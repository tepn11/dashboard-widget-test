var Ao=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function l3(K){return K&&K.__esModule&&Object.prototype.hasOwnProperty.call(K,"default")?K.default:K}function $p(K){throw new Error('Could not dynamically require "'+K+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var gp={exports:{}},Ki={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var qm=Object.getOwnPropertySymbols,u3=Object.prototype.hasOwnProperty,f3=Object.prototype.propertyIsEnumerable;function c3(K){if(K==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(K)}function h3(){try{if(!Object.assign)return!1;var K=new String("abc");if(K[5]="de",Object.getOwnPropertyNames(K)[0]==="5")return!1;for(var fe={},t=0;t<10;t++)fe["_"+String.fromCharCode(t)]=t;var B=Object.getOwnPropertyNames(fe).map(function(d){return fe[d]});if(B.join("")!=="0123456789")return!1;var H={};return"abcdefghijklmnopqrst".split("").forEach(function(d){H[d]=d}),Object.keys(Object.assign({},H)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var yx=h3()?Object.assign:function(K,fe){for(var t,B=c3(K),H,d=1;d<arguments.length;d++){t=Object(arguments[d]);for(var l in t)u3.call(t,l)&&(B[l]=t[l]);if(qm){H=qm(t);for(var b=0;b<H.length;b++)f3.call(t,H[b])&&(B[H[b]]=t[H[b]])}}return B};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xg=yx,$h=60103,mx=60106;Ki.Fragment=60107;Ki.StrictMode=60108;Ki.Profiler=60114;var xx=60109,bx=60110,_x=60112;Ki.Suspense=60113;var wx=60115,Tx=60116;if(typeof Symbol=="function"&&Symbol.for){var sf=Symbol.for;$h=sf("react.element"),mx=sf("react.portal"),Ki.Fragment=sf("react.fragment"),Ki.StrictMode=sf("react.strict_mode"),Ki.Profiler=sf("react.profiler"),xx=sf("react.provider"),bx=sf("react.context"),_x=sf("react.forward_ref"),Ki.Suspense=sf("react.suspense"),wx=sf("react.memo"),Tx=sf("react.lazy")}var e1=typeof Symbol=="function"&&Symbol.iterator;function v3(K){return K===null||typeof K!="object"?null:(K=e1&&K[e1]||K["@@iterator"],typeof K=="function"?K:null)}function yp(K){for(var fe="https://reactjs.org/docs/error-decoder.html?invariant="+K,t=1;t<arguments.length;t++)fe+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+K+"; visit "+fe+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ax={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Mx={};function qh(K,fe,t){this.props=K,this.context=fe,this.refs=Mx,this.updater=t||Ax}qh.prototype.isReactComponent={};qh.prototype.setState=function(K,fe){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error(yp(85));this.updater.enqueueSetState(this,K,fe,"setState")};qh.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function Sx(){}Sx.prototype=qh.prototype;function jg(K,fe,t){this.props=K,this.context=fe,this.refs=Mx,this.updater=t||Ax}var Zg=jg.prototype=new Sx;Zg.constructor=jg;Xg(Zg,qh.prototype);Zg.isPureReactComponent=!0;var Kg={current:null},kx=Object.prototype.hasOwnProperty,Ex={key:!0,ref:!0,__self:!0,__source:!0};function Cx(K,fe,t){var B,H={},d=null,l=null;if(fe!=null)for(B in fe.ref!==void 0&&(l=fe.ref),fe.key!==void 0&&(d=""+fe.key),fe)kx.call(fe,B)&&!Ex.hasOwnProperty(B)&&(H[B]=fe[B]);var b=arguments.length-2;if(b===1)H.children=t;else if(1<b){for(var w=Array(b),e=0;e<b;e++)w[e]=arguments[e+2];H.children=w}if(K&&K.defaultProps)for(B in b=K.defaultProps,b)H[B]===void 0&&(H[B]=b[B]);return{$$typeof:$h,type:K,key:d,ref:l,props:H,_owner:Kg.current}}function p3(K,fe){return{$$typeof:$h,type:K.type,key:fe,ref:K.ref,props:K.props,_owner:K._owner}}function Jg(K){return typeof K=="object"&&K!==null&&K.$$typeof===$h}function d3(K){var fe={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(t){return fe[t]})}var t1=/\/+/g;function F0(K,fe){return typeof K=="object"&&K!==null&&K.key!=null?d3(""+K.key):fe.toString(36)}function cd(K,fe,t,B,H){var d=typeof K;(d==="undefined"||d==="boolean")&&(K=null);var l=!1;if(K===null)l=!0;else switch(d){case"string":case"number":l=!0;break;case"object":switch(K.$$typeof){case $h:case mx:l=!0}}if(l)return l=K,H=H(l),K=B===""?"."+F0(l,0):B,Array.isArray(H)?(t="",K!=null&&(t=K.replace(t1,"$&/")+"/"),cd(H,fe,t,"",function(e){return e})):H!=null&&(Jg(H)&&(H=p3(H,t+(!H.key||l&&l.key===H.key?"":(""+H.key).replace(t1,"$&/")+"/")+K)),fe.push(H)),1;if(l=0,B=B===""?".":B+":",Array.isArray(K))for(var b=0;b<K.length;b++){d=K[b];var w=B+F0(d,b);l+=cd(d,fe,t,w,H)}else if(w=v3(K),typeof w=="function")for(K=w.call(K),b=0;!(d=K.next()).done;)d=d.value,w=B+F0(d,b++),l+=cd(d,fe,t,w,H);else if(d==="object")throw fe=""+K,Error(yp(31,fe==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":fe));return l}function qp(K,fe,t){if(K==null)return K;var B=[],H=0;return cd(K,B,"","",function(d){return fe.call(t,d,H++)}),B}function g3(K){if(K._status===-1){var fe=K._result;fe=fe(),K._status=0,K._result=fe,fe.then(function(t){K._status===0&&(t=t.default,K._status=1,K._result=t)},function(t){K._status===0&&(K._status=2,K._result=t)})}if(K._status===1)return K._result;throw K._result}var Lx={current:null};function Kf(){var K=Lx.current;if(K===null)throw Error(yp(321));return K}var y3={ReactCurrentDispatcher:Lx,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:Kg,IsSomeRendererActing:{current:!1},assign:Xg};Ki.Children={map:qp,forEach:function(K,fe,t){qp(K,function(){fe.apply(this,arguments)},t)},count:function(K){var fe=0;return qp(K,function(){fe++}),fe},toArray:function(K){return qp(K,function(fe){return fe})||[]},only:function(K){if(!Jg(K))throw Error(yp(143));return K}};Ki.Component=qh;Ki.PureComponent=jg;Ki.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=y3;Ki.cloneElement=function(K,fe,t){if(K==null)throw Error(yp(267,K));var B=Xg({},K.props),H=K.key,d=K.ref,l=K._owner;if(fe!=null){if(fe.ref!==void 0&&(d=fe.ref,l=Kg.current),fe.key!==void 0&&(H=""+fe.key),K.type&&K.type.defaultProps)var b=K.type.defaultProps;for(w in fe)kx.call(fe,w)&&!Ex.hasOwnProperty(w)&&(B[w]=fe[w]===void 0&&b!==void 0?b[w]:fe[w])}var w=arguments.length-2;if(w===1)B.children=t;else if(1<w){b=Array(w);for(var e=0;e<w;e++)b[e]=arguments[e+2];B.children=b}return{$$typeof:$h,type:K.type,key:H,ref:d,props:B,_owner:l}};Ki.createContext=function(K,fe){return fe===void 0&&(fe=null),K={$$typeof:bx,_calculateChangedBits:fe,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider={$$typeof:xx,_context:K},K.Consumer=K};Ki.createElement=Cx;Ki.createFactory=function(K){var fe=Cx.bind(null,K);return fe.type=K,fe};Ki.createRef=function(){return{current:null}};Ki.forwardRef=function(K){return{$$typeof:_x,render:K}};Ki.isValidElement=Jg;Ki.lazy=function(K){return{$$typeof:Tx,_payload:{_status:-1,_result:K},_init:g3}};Ki.memo=function(K,fe){return{$$typeof:wx,type:K,compare:fe===void 0?null:fe}};Ki.useCallback=function(K,fe){return Kf().useCallback(K,fe)};Ki.useContext=function(K,fe){return Kf().useContext(K,fe)};Ki.useDebugValue=function(){};Ki.useEffect=function(K,fe){return Kf().useEffect(K,fe)};Ki.useImperativeHandle=function(K,fe,t){return Kf().useImperativeHandle(K,fe,t)};Ki.useLayoutEffect=function(K,fe){return Kf().useLayoutEffect(K,fe)};Ki.useMemo=function(K,fe){return Kf().useMemo(K,fe)};Ki.useReducer=function(K,fe,t){return Kf().useReducer(K,fe,t)};Ki.useRef=function(K){return Kf().useRef(K)};Ki.useState=function(K){return Kf().useState(K)};Ki.version="17.0.2";gp.exports=Ki;var _5=gp.exports,Px={exports:{}},Nu={},Dx={exports:{}},Rx={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(K){var fe,t,B,H;if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;K.unstable_now=function(){return d.now()}}else{var l=Date,b=l.now();K.unstable_now=function(){return l.now()-b}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var w=null,e=null,o=function(){if(w!==null)try{var D=K.unstable_now();w(!0,D),w=null}catch(O){throw setTimeout(o,0),O}};fe=function(D){w!==null?setTimeout(fe,0,D):(w=D,setTimeout(o,0))},t=function(D,O){e=setTimeout(D,O)},B=function(){clearTimeout(e)},K.unstable_shouldYield=function(){return!1},H=K.unstable_forceFrameRate=function(){}}else{var a=window.setTimeout,r=window.clearTimeout;if(typeof console!="undefined"){var n=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof n!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var c=!1,s=null,i=-1,v=5,u=0;K.unstable_shouldYield=function(){return K.unstable_now()>=u},H=function(){},K.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<D?Math.floor(1e3/D):5};var g=new MessageChannel,h=g.port2;g.port1.onmessage=function(){if(s!==null){var D=K.unstable_now();u=D+v;try{s(!0,D)?h.postMessage(null):(c=!1,s=null)}catch(O){throw h.postMessage(null),O}}else c=!1},fe=function(D){s=D,c||(c=!0,h.postMessage(null))},t=function(D,O){i=a(function(){D(K.unstable_now())},O)},B=function(){r(i),i=-1}}function y(D,O){var F=D.length;D.push(O);e:for(;;){var G=F-1>>>1,W=D[G];if(W!==void 0&&0<m(W,O))D[G]=O,D[F]=W,F=G;else break e}}function p(D){return D=D[0],D===void 0?null:D}function A(D){var O=D[0];if(O!==void 0){var F=D.pop();if(F!==O){D[0]=F;e:for(var G=0,W=D.length;G<W;){var q=2*(G+1)-1,J=D[q],X=q+1,Z=D[X];if(J!==void 0&&0>m(J,F))Z!==void 0&&0>m(Z,J)?(D[G]=Z,D[X]=F,G=X):(D[G]=J,D[q]=F,G=q);else if(Z!==void 0&&0>m(Z,F))D[G]=Z,D[X]=F,G=X;else break e}}return O}return null}function m(D,O){var F=D.sortIndex-O.sortIndex;return F!==0?F:D.id-O.id}var M=[],x=[],T=1,_=null,f=3,L=!1,S=!1,k=!1;function P(D){for(var O=p(x);O!==null;){if(O.callback===null)A(x);else if(O.startTime<=D)A(x),O.sortIndex=O.expirationTime,y(M,O);else break;O=p(x)}}function z(D){if(k=!1,P(D),!S)if(p(M)!==null)S=!0,fe(I);else{var O=p(x);O!==null&&t(z,O.startTime-D)}}function I(D,O){S=!1,k&&(k=!1,B()),L=!0;var F=f;try{for(P(O),_=p(M);_!==null&&(!(_.expirationTime>O)||D&&!K.unstable_shouldYield());){var G=_.callback;if(typeof G=="function"){_.callback=null,f=_.priorityLevel;var W=G(_.expirationTime<=O);O=K.unstable_now(),typeof W=="function"?_.callback=W:_===p(M)&&A(M),P(O)}else A(M);_=p(M)}if(_!==null)var q=!0;else{var J=p(x);J!==null&&t(z,J.startTime-O),q=!1}return q}finally{_=null,f=F,L=!1}}var R=H;K.unstable_IdlePriority=5,K.unstable_ImmediatePriority=1,K.unstable_LowPriority=4,K.unstable_NormalPriority=3,K.unstable_Profiling=null,K.unstable_UserBlockingPriority=2,K.unstable_cancelCallback=function(D){D.callback=null},K.unstable_continueExecution=function(){S||L||(S=!0,fe(I))},K.unstable_getCurrentPriorityLevel=function(){return f},K.unstable_getFirstCallbackNode=function(){return p(M)},K.unstable_next=function(D){switch(f){case 1:case 2:case 3:var O=3;break;default:O=f}var F=f;f=O;try{return D()}finally{f=F}},K.unstable_pauseExecution=function(){},K.unstable_requestPaint=R,K.unstable_runWithPriority=function(D,O){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var F=f;f=D;try{return O()}finally{f=F}},K.unstable_scheduleCallback=function(D,O,F){var G=K.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?G+F:G):F=G,D){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=F+W,D={id:T++,callback:O,priorityLevel:D,startTime:F,expirationTime:W,sortIndex:-1},F>G?(D.sortIndex=F,y(x,D),p(M)===null&&D===p(x)&&(k?B():k=!0,t(z,F-G))):(D.sortIndex=W,y(M,D),S||L||(S=!0,fe(I))),D},K.unstable_wrapCallback=function(D){var O=f;return function(){var F=f;f=O;try{return D.apply(this,arguments)}finally{f=F}}}})(Rx);Dx.exports=Rx;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wd=gp.exports,Oo=yx,Gs=Dx.exports;function Ca(K){for(var fe="https://reactjs.org/docs/error-decoder.html?invariant="+K,t=1;t<arguments.length;t++)fe+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+K+"; visit "+fe+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!Wd)throw Error(Ca(227));var Ix=new Set,rp={};function $c(K,fe){Zh(K,fe),Zh(K+"Capture",fe)}function Zh(K,fe){for(rp[K]=fe,K=0;K<fe.length;K++)Ix.add(fe[K])}var Zf=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),m3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,r1=Object.prototype.hasOwnProperty,n1={},a1={};function x3(K){return r1.call(a1,K)?!0:r1.call(n1,K)?!1:m3.test(K)?a1[K]=!0:(n1[K]=!0,!1)}function b3(K,fe,t,B){if(t!==null&&t.type===0)return!1;switch(typeof fe){case"function":case"symbol":return!0;case"boolean":return B?!1:t!==null?!t.acceptsBooleans:(K=K.toLowerCase().slice(0,5),K!=="data-"&&K!=="aria-");default:return!1}}function _3(K,fe,t,B){if(fe===null||typeof fe=="undefined"||b3(K,fe,t,B))return!0;if(B)return!1;if(t!==null)switch(t.type){case 3:return!fe;case 4:return fe===!1;case 5:return isNaN(fe);case 6:return isNaN(fe)||1>fe}return!1}function Ol(K,fe,t,B,H,d,l){this.acceptsBooleans=fe===2||fe===3||fe===4,this.attributeName=B,this.attributeNamespace=H,this.mustUseProperty=t,this.propertyName=K,this.type=fe,this.sanitizeURL=d,this.removeEmptyString=l}var il={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(K){il[K]=new Ol(K,0,!1,K,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(K){var fe=K[0];il[fe]=new Ol(fe,1,!1,K[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(K){il[K]=new Ol(K,2,!1,K.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(K){il[K]=new Ol(K,2,!1,K,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(K){il[K]=new Ol(K,3,!1,K.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(K){il[K]=new Ol(K,3,!0,K,null,!1,!1)});["capture","download"].forEach(function(K){il[K]=new Ol(K,4,!1,K,null,!1,!1)});["cols","rows","size","span"].forEach(function(K){il[K]=new Ol(K,6,!1,K,null,!1,!1)});["rowSpan","start"].forEach(function(K){il[K]=new Ol(K,5,!1,K.toLowerCase(),null,!1,!1)});var Qg=/[\-:]([a-z])/g;function $g(K){return K[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(K){var fe=K.replace(Qg,$g);il[fe]=new Ol(fe,1,!1,K,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(K){var fe=K.replace(Qg,$g);il[fe]=new Ol(fe,1,!1,K,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(K){var fe=K.replace(Qg,$g);il[fe]=new Ol(fe,1,!1,K,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(K){il[K]=new Ol(K,1,!1,K.toLowerCase(),null,!1,!1)});il.xlinkHref=new Ol("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(K){il[K]=new Ol(K,1,!1,K.toLowerCase(),null,!0,!0)});function qg(K,fe,t,B){var H=il.hasOwnProperty(fe)?il[fe]:null,d=H!==null?H.type===0:B?!1:!(!(2<fe.length)||fe[0]!=="o"&&fe[0]!=="O"||fe[1]!=="n"&&fe[1]!=="N");d||(_3(fe,t,H,B)&&(t=null),B||H===null?x3(fe)&&(t===null?K.removeAttribute(fe):K.setAttribute(fe,""+t)):H.mustUseProperty?K[H.propertyName]=t===null?H.type===3?!1:"":t:(fe=H.attributeName,B=H.attributeNamespace,t===null?K.removeAttribute(fe):(H=H.type,t=H===3||H===4&&t===!0?"":""+t,B?K.setAttributeNS(B,fe,t):K.setAttribute(fe,t))))}var qc=Wd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bv=60103,Gc=60106,cc=60107,ey=60108,Yv=60114,ty=60109,ry=60110,Xd=60112,Wv=60113,wd=60120,jd=60115,ny=60116,ay=60121,iy=60128,zx=60129,oy=60130,og=60131;if(typeof Symbol=="function"&&Symbol.for){var Vs=Symbol.for;Bv=Vs("react.element"),Gc=Vs("react.portal"),cc=Vs("react.fragment"),ey=Vs("react.strict_mode"),Yv=Vs("react.profiler"),ty=Vs("react.provider"),ry=Vs("react.context"),Xd=Vs("react.forward_ref"),Wv=Vs("react.suspense"),wd=Vs("react.suspense_list"),jd=Vs("react.memo"),ny=Vs("react.lazy"),ay=Vs("react.block"),Vs("react.scope"),iy=Vs("react.opaque.id"),zx=Vs("react.debug_trace_mode"),oy=Vs("react.offscreen"),og=Vs("react.legacy_hidden")}var i1=typeof Symbol=="function"&&Symbol.iterator;function kv(K){return K===null||typeof K!="object"?null:(K=i1&&K[i1]||K["@@iterator"],typeof K=="function"?K:null)}var O0;function Uv(K){if(O0===void 0)try{throw Error()}catch(t){var fe=t.stack.trim().match(/\n( *(at )?)/);O0=fe&&fe[1]||""}return`
`+O0+K}var N0=!1;function ed(K,fe){if(!K||N0)return"";N0=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(fe)if(fe=function(){throw Error()},Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(w){var B=w}Reflect.construct(K,[],fe)}else{try{fe.call()}catch(w){B=w}K.call(fe.prototype)}else{try{throw Error()}catch(w){B=w}K()}}catch(w){if(w&&B&&typeof w.stack=="string"){for(var H=w.stack.split(`
`),d=B.stack.split(`
`),l=H.length-1,b=d.length-1;1<=l&&0<=b&&H[l]!==d[b];)b--;for(;1<=l&&0<=b;l--,b--)if(H[l]!==d[b]){if(l!==1||b!==1)do if(l--,b--,0>b||H[l]!==d[b])return`
`+H[l].replace(" at new "," at ");while(1<=l&&0<=b);break}}}finally{N0=!1,Error.prepareStackTrace=t}return(K=K?K.displayName||K.name:"")?Uv(K):""}function w3(K){switch(K.tag){case 5:return Uv(K.type);case 16:return Uv("Lazy");case 13:return Uv("Suspense");case 19:return Uv("SuspenseList");case 0:case 2:case 15:return K=ed(K.type,!1),K;case 11:return K=ed(K.type.render,!1),K;case 22:return K=ed(K.type._render,!1),K;case 1:return K=ed(K.type,!0),K;default:return""}}function Nh(K){if(K==null)return null;if(typeof K=="function")return K.displayName||K.name||null;if(typeof K=="string")return K;switch(K){case cc:return"Fragment";case Gc:return"Portal";case Yv:return"Profiler";case ey:return"StrictMode";case Wv:return"Suspense";case wd:return"SuspenseList"}if(typeof K=="object")switch(K.$$typeof){case ry:return(K.displayName||"Context")+".Consumer";case ty:return(K._context.displayName||"Context")+".Provider";case Xd:var fe=K.render;return fe=fe.displayName||fe.name||"",K.displayName||(fe!==""?"ForwardRef("+fe+")":"ForwardRef");case jd:return Nh(K.type);case ay:return Nh(K._render);case ny:fe=K._payload,K=K._init;try{return Nh(K(fe))}catch{}}return null}function Tc(K){switch(typeof K){case"boolean":case"number":case"object":case"string":case"undefined":return K;default:return""}}function Fx(K){var fe=K.type;return(K=K.nodeName)&&K.toLowerCase()==="input"&&(fe==="checkbox"||fe==="radio")}function T3(K){var fe=Fx(K)?"checked":"value",t=Object.getOwnPropertyDescriptor(K.constructor.prototype,fe),B=""+K[fe];if(!K.hasOwnProperty(fe)&&typeof t!="undefined"&&typeof t.get=="function"&&typeof t.set=="function"){var H=t.get,d=t.set;return Object.defineProperty(K,fe,{configurable:!0,get:function(){return H.call(this)},set:function(l){B=""+l,d.call(this,l)}}),Object.defineProperty(K,fe,{enumerable:t.enumerable}),{getValue:function(){return B},setValue:function(l){B=""+l},stopTracking:function(){K._valueTracker=null,delete K[fe]}}}}function td(K){K._valueTracker||(K._valueTracker=T3(K))}function Ox(K){if(!K)return!1;var fe=K._valueTracker;if(!fe)return!0;var t=fe.getValue(),B="";return K&&(B=Fx(K)?K.checked?"true":"false":K.value),K=B,K!==t?(fe.setValue(K),!0):!1}function Td(K){if(K=K||(typeof document!="undefined"?document:void 0),typeof K=="undefined")return null;try{return K.activeElement||K.body}catch{return K.body}}function sg(K,fe){var t=fe.checked;return Oo({},fe,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t!=null?t:K._wrapperState.initialChecked})}function o1(K,fe){var t=fe.defaultValue==null?"":fe.defaultValue,B=fe.checked!=null?fe.checked:fe.defaultChecked;t=Tc(fe.value!=null?fe.value:t),K._wrapperState={initialChecked:B,initialValue:t,controlled:fe.type==="checkbox"||fe.type==="radio"?fe.checked!=null:fe.value!=null}}function Nx(K,fe){fe=fe.checked,fe!=null&&qg(K,"checked",fe,!1)}function lg(K,fe){Nx(K,fe);var t=Tc(fe.value),B=fe.type;if(t!=null)B==="number"?(t===0&&K.value===""||K.value!=t)&&(K.value=""+t):K.value!==""+t&&(K.value=""+t);else if(B==="submit"||B==="reset"){K.removeAttribute("value");return}fe.hasOwnProperty("value")?ug(K,fe.type,t):fe.hasOwnProperty("defaultValue")&&ug(K,fe.type,Tc(fe.defaultValue)),fe.checked==null&&fe.defaultChecked!=null&&(K.defaultChecked=!!fe.defaultChecked)}function s1(K,fe,t){if(fe.hasOwnProperty("value")||fe.hasOwnProperty("defaultValue")){var B=fe.type;if(!(B!=="submit"&&B!=="reset"||fe.value!==void 0&&fe.value!==null))return;fe=""+K._wrapperState.initialValue,t||fe===K.value||(K.value=fe),K.defaultValue=fe}t=K.name,t!==""&&(K.name=""),K.defaultChecked=!!K._wrapperState.initialChecked,t!==""&&(K.name=t)}function ug(K,fe,t){(fe!=="number"||Td(K.ownerDocument)!==K)&&(t==null?K.defaultValue=""+K._wrapperState.initialValue:K.defaultValue!==""+t&&(K.defaultValue=""+t))}function A3(K){var fe="";return Wd.Children.forEach(K,function(t){t!=null&&(fe+=t)}),fe}function fg(K,fe){return K=Oo({children:void 0},fe),(fe=A3(fe.children))&&(K.children=fe),K}function Bh(K,fe,t,B){if(K=K.options,fe){fe={};for(var H=0;H<t.length;H++)fe["$"+t[H]]=!0;for(t=0;t<K.length;t++)H=fe.hasOwnProperty("$"+K[t].value),K[t].selected!==H&&(K[t].selected=H),H&&B&&(K[t].defaultSelected=!0)}else{for(t=""+Tc(t),fe=null,H=0;H<K.length;H++){if(K[H].value===t){K[H].selected=!0,B&&(K[H].defaultSelected=!0);return}fe!==null||K[H].disabled||(fe=K[H])}fe!==null&&(fe.selected=!0)}}function cg(K,fe){if(fe.dangerouslySetInnerHTML!=null)throw Error(Ca(91));return Oo({},fe,{value:void 0,defaultValue:void 0,children:""+K._wrapperState.initialValue})}function l1(K,fe){var t=fe.value;if(t==null){if(t=fe.children,fe=fe.defaultValue,t!=null){if(fe!=null)throw Error(Ca(92));if(Array.isArray(t)){if(!(1>=t.length))throw Error(Ca(93));t=t[0]}fe=t}fe==null&&(fe=""),t=fe}K._wrapperState={initialValue:Tc(t)}}function Bx(K,fe){var t=Tc(fe.value),B=Tc(fe.defaultValue);t!=null&&(t=""+t,t!==K.value&&(K.value=t),fe.defaultValue==null&&K.defaultValue!==t&&(K.defaultValue=t)),B!=null&&(K.defaultValue=""+B)}function u1(K){var fe=K.textContent;fe===K._wrapperState.initialValue&&fe!==""&&fe!==null&&(K.value=fe)}var hg={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Ux(K){switch(K){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vg(K,fe){return K==null||K==="http://www.w3.org/1999/xhtml"?Ux(fe):K==="http://www.w3.org/2000/svg"&&fe==="foreignObject"?"http://www.w3.org/1999/xhtml":K}var rd,Hx=function(K){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(fe,t,B,H){MSApp.execUnsafeLocalFunction(function(){return K(fe,t,B,H)})}:K}(function(K,fe){if(K.namespaceURI!==hg.svg||"innerHTML"in K)K.innerHTML=fe;else{for(rd=rd||document.createElement("div"),rd.innerHTML="<svg>"+fe.valueOf().toString()+"</svg>",fe=rd.firstChild;K.firstChild;)K.removeChild(K.firstChild);for(;fe.firstChild;)K.appendChild(fe.firstChild)}});function np(K,fe){if(fe){var t=K.firstChild;if(t&&t===K.lastChild&&t.nodeType===3){t.nodeValue=fe;return}}K.textContent=fe}var Xv={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},M3=["Webkit","ms","Moz","O"];Object.keys(Xv).forEach(function(K){M3.forEach(function(fe){fe=fe+K.charAt(0).toUpperCase()+K.substring(1),Xv[fe]=Xv[K]})});function Vx(K,fe,t){return fe==null||typeof fe=="boolean"||fe===""?"":t||typeof fe!="number"||fe===0||Xv.hasOwnProperty(K)&&Xv[K]?(""+fe).trim():fe+"px"}function Gx(K,fe){K=K.style;for(var t in fe)if(fe.hasOwnProperty(t)){var B=t.indexOf("--")===0,H=Vx(t,fe[t],B);t==="float"&&(t="cssFloat"),B?K.setProperty(t,H):K[t]=H}}var S3=Oo({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pg(K,fe){if(fe){if(S3[K]&&(fe.children!=null||fe.dangerouslySetInnerHTML!=null))throw Error(Ca(137,K));if(fe.dangerouslySetInnerHTML!=null){if(fe.children!=null)throw Error(Ca(60));if(!(typeof fe.dangerouslySetInnerHTML=="object"&&"__html"in fe.dangerouslySetInnerHTML))throw Error(Ca(61))}if(fe.style!=null&&typeof fe.style!="object")throw Error(Ca(62))}}function dg(K,fe){if(K.indexOf("-")===-1)return typeof fe.is=="string";switch(K){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function sy(K){return K=K.target||K.srcElement||window,K.correspondingUseElement&&(K=K.correspondingUseElement),K.nodeType===3?K.parentNode:K}var gg=null,Uh=null,Hh=null;function f1(K){if(K=xp(K)){if(typeof gg!="function")throw Error(Ca(280));var fe=K.stateNode;fe&&(fe=qd(fe),gg(K.stateNode,K.type,fe))}}function Yx(K){Uh?Hh?Hh.push(K):Hh=[K]:Uh=K}function Wx(){if(Uh){var K=Uh,fe=Hh;if(Hh=Uh=null,f1(K),fe)for(K=0;K<fe.length;K++)f1(fe[K])}}function ly(K,fe){return K(fe)}function Xx(K,fe,t,B,H){return K(fe,t,B,H)}function uy(){}var jx=ly,Yc=!1,B0=!1;function fy(){(Uh!==null||Hh!==null)&&(uy(),Wx())}function k3(K,fe,t){if(B0)return K(fe,t);B0=!0;try{return jx(K,fe,t)}finally{B0=!1,fy()}}function ap(K,fe){var t=K.stateNode;if(t===null)return null;var B=qd(t);if(B===null)return null;t=B[fe];e:switch(fe){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(B=!B.disabled)||(K=K.type,B=!(K==="button"||K==="input"||K==="select"||K==="textarea")),K=!B;break e;default:K=!1}if(K)return null;if(t&&typeof t!="function")throw Error(Ca(231,fe,typeof t));return t}var yg=!1;if(Zf)try{var Ev={};Object.defineProperty(Ev,"passive",{get:function(){yg=!0}}),window.addEventListener("test",Ev,Ev),window.removeEventListener("test",Ev,Ev)}catch{yg=!1}function E3(K,fe,t,B,H,d,l,b,w){var e=Array.prototype.slice.call(arguments,3);try{fe.apply(t,e)}catch(o){this.onError(o)}}var jv=!1,Ad=null,Md=!1,mg=null,C3={onError:function(K){jv=!0,Ad=K}};function L3(K,fe,t,B,H,d,l,b,w){jv=!1,Ad=null,E3.apply(C3,arguments)}function P3(K,fe,t,B,H,d,l,b,w){if(L3.apply(this,arguments),jv){if(jv){var e=Ad;jv=!1,Ad=null}else throw Error(Ca(198));Md||(Md=!0,mg=e)}}function eh(K){var fe=K,t=K;if(K.alternate)for(;fe.return;)fe=fe.return;else{K=fe;do fe=K,(fe.flags&1026)!==0&&(t=fe.return),K=fe.return;while(K)}return fe.tag===3?t:null}function Zx(K){if(K.tag===13){var fe=K.memoizedState;if(fe===null&&(K=K.alternate,K!==null&&(fe=K.memoizedState)),fe!==null)return fe.dehydrated}return null}function c1(K){if(eh(K)!==K)throw Error(Ca(188))}function D3(K){var fe=K.alternate;if(!fe){if(fe=eh(K),fe===null)throw Error(Ca(188));return fe!==K?null:K}for(var t=K,B=fe;;){var H=t.return;if(H===null)break;var d=H.alternate;if(d===null){if(B=H.return,B!==null){t=B;continue}break}if(H.child===d.child){for(d=H.child;d;){if(d===t)return c1(H),K;if(d===B)return c1(H),fe;d=d.sibling}throw Error(Ca(188))}if(t.return!==B.return)t=H,B=d;else{for(var l=!1,b=H.child;b;){if(b===t){l=!0,t=H,B=d;break}if(b===B){l=!0,B=H,t=d;break}b=b.sibling}if(!l){for(b=d.child;b;){if(b===t){l=!0,t=d,B=H;break}if(b===B){l=!0,B=d,t=H;break}b=b.sibling}if(!l)throw Error(Ca(189))}}if(t.alternate!==B)throw Error(Ca(190))}if(t.tag!==3)throw Error(Ca(188));return t.stateNode.current===t?K:fe}function Kx(K){if(K=D3(K),!K)return null;for(var fe=K;;){if(fe.tag===5||fe.tag===6)return fe;if(fe.child)fe.child.return=fe,fe=fe.child;else{if(fe===K)break;for(;!fe.sibling;){if(!fe.return||fe.return===K)return null;fe=fe.return}fe.sibling.return=fe.return,fe=fe.sibling}}return null}function h1(K,fe){for(var t=K.alternate;fe!==null;){if(fe===K||fe===t)return!0;fe=fe.return}return!1}var Jx,cy,Qx,$x,xg=!1,Cf=[],dc=null,gc=null,yc=null,ip=new Map,op=new Map,Cv=[],v1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bg(K,fe,t,B,H){return{blockedOn:K,domEventName:fe,eventSystemFlags:t|16,nativeEvent:H,targetContainers:[B]}}function p1(K,fe){switch(K){case"focusin":case"focusout":dc=null;break;case"dragenter":case"dragleave":gc=null;break;case"mouseover":case"mouseout":yc=null;break;case"pointerover":case"pointerout":ip.delete(fe.pointerId);break;case"gotpointercapture":case"lostpointercapture":op.delete(fe.pointerId)}}function Lv(K,fe,t,B,H,d){return K===null||K.nativeEvent!==d?(K=bg(fe,t,B,H,d),fe!==null&&(fe=xp(fe),fe!==null&&cy(fe)),K):(K.eventSystemFlags|=B,fe=K.targetContainers,H!==null&&fe.indexOf(H)===-1&&fe.push(H),K)}function R3(K,fe,t,B,H){switch(fe){case"focusin":return dc=Lv(dc,K,fe,t,B,H),!0;case"dragenter":return gc=Lv(gc,K,fe,t,B,H),!0;case"mouseover":return yc=Lv(yc,K,fe,t,B,H),!0;case"pointerover":var d=H.pointerId;return ip.set(d,Lv(ip.get(d)||null,K,fe,t,B,H)),!0;case"gotpointercapture":return d=H.pointerId,op.set(d,Lv(op.get(d)||null,K,fe,t,B,H)),!0}return!1}function I3(K){var fe=Wc(K.target);if(fe!==null){var t=eh(fe);if(t!==null){if(fe=t.tag,fe===13){if(fe=Zx(t),fe!==null){K.blockedOn=fe,$x(K.lanePriority,function(){Gs.unstable_runWithPriority(K.priority,function(){Qx(t)})});return}}else if(fe===3&&t.stateNode.hydrate){K.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}K.blockedOn=null}function hd(K){if(K.blockedOn!==null)return!1;for(var fe=K.targetContainers;0<fe.length;){var t=dy(K.domEventName,K.eventSystemFlags,fe[0],K.nativeEvent);if(t!==null)return fe=xp(t),fe!==null&&cy(fe),K.blockedOn=t,!1;fe.shift()}return!0}function d1(K,fe,t){hd(K)&&t.delete(fe)}function z3(){for(xg=!1;0<Cf.length;){var K=Cf[0];if(K.blockedOn!==null){K=xp(K.blockedOn),K!==null&&Jx(K);break}for(var fe=K.targetContainers;0<fe.length;){var t=dy(K.domEventName,K.eventSystemFlags,fe[0],K.nativeEvent);if(t!==null){K.blockedOn=t;break}fe.shift()}K.blockedOn===null&&Cf.shift()}dc!==null&&hd(dc)&&(dc=null),gc!==null&&hd(gc)&&(gc=null),yc!==null&&hd(yc)&&(yc=null),ip.forEach(d1),op.forEach(d1)}function Pv(K,fe){K.blockedOn===fe&&(K.blockedOn=null,xg||(xg=!0,Gs.unstable_scheduleCallback(Gs.unstable_NormalPriority,z3)))}function qx(K){function fe(H){return Pv(H,K)}if(0<Cf.length){Pv(Cf[0],K);for(var t=1;t<Cf.length;t++){var B=Cf[t];B.blockedOn===K&&(B.blockedOn=null)}}for(dc!==null&&Pv(dc,K),gc!==null&&Pv(gc,K),yc!==null&&Pv(yc,K),ip.forEach(fe),op.forEach(fe),t=0;t<Cv.length;t++)B=Cv[t],B.blockedOn===K&&(B.blockedOn=null);for(;0<Cv.length&&(t=Cv[0],t.blockedOn===null);)I3(t),t.blockedOn===null&&Cv.shift()}function nd(K,fe){var t={};return t[K.toLowerCase()]=fe.toLowerCase(),t["Webkit"+K]="webkit"+fe,t["Moz"+K]="moz"+fe,t}var Dh={animationend:nd("Animation","AnimationEnd"),animationiteration:nd("Animation","AnimationIteration"),animationstart:nd("Animation","AnimationStart"),transitionend:nd("Transition","TransitionEnd")},U0={},eb={};Zf&&(eb=document.createElement("div").style,"AnimationEvent"in window||(delete Dh.animationend.animation,delete Dh.animationiteration.animation,delete Dh.animationstart.animation),"TransitionEvent"in window||delete Dh.transitionend.transition);function Zd(K){if(U0[K])return U0[K];if(!Dh[K])return K;var fe=Dh[K],t;for(t in fe)if(fe.hasOwnProperty(t)&&t in eb)return U0[K]=fe[t];return K}var tb=Zd("animationend"),rb=Zd("animationiteration"),nb=Zd("animationstart"),ab=Zd("transitionend"),ib=new Map,hy=new Map,F3=["abort","abort",tb,"animationEnd",rb,"animationIteration",nb,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",ab,"transitionEnd","waiting","waiting"];function vy(K,fe){for(var t=0;t<K.length;t+=2){var B=K[t],H=K[t+1];H="on"+(H[0].toUpperCase()+H.slice(1)),hy.set(B,fe),ib.set(B,H),$c(H,[B])}}var O3=Gs.unstable_now;O3();var Mo=8;function Lh(K){if((1&K)!==0)return Mo=15,1;if((2&K)!==0)return Mo=14,2;if((4&K)!==0)return Mo=13,4;var fe=24&K;return fe!==0?(Mo=12,fe):(K&32)!==0?(Mo=11,32):(fe=192&K,fe!==0?(Mo=10,fe):(K&256)!==0?(Mo=9,256):(fe=3584&K,fe!==0?(Mo=8,fe):(K&4096)!==0?(Mo=7,4096):(fe=4186112&K,fe!==0?(Mo=6,fe):(fe=62914560&K,fe!==0?(Mo=5,fe):K&67108864?(Mo=4,67108864):(K&134217728)!==0?(Mo=3,134217728):(fe=805306368&K,fe!==0?(Mo=2,fe):(1073741824&K)!==0?(Mo=1,1073741824):(Mo=8,K))))))}function N3(K){switch(K){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function B3(K){switch(K){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(Ca(358,K))}}function sp(K,fe){var t=K.pendingLanes;if(t===0)return Mo=0;var B=0,H=0,d=K.expiredLanes,l=K.suspendedLanes,b=K.pingedLanes;if(d!==0)B=d,H=Mo=15;else if(d=t&134217727,d!==0){var w=d&~l;w!==0?(B=Lh(w),H=Mo):(b&=d,b!==0&&(B=Lh(b),H=Mo))}else d=t&~l,d!==0?(B=Lh(d),H=Mo):b!==0&&(B=Lh(b),H=Mo);if(B===0)return 0;if(B=31-Ac(B),B=t&((0>B?0:1<<B)<<1)-1,fe!==0&&fe!==B&&(fe&l)===0){if(Lh(fe),H<=Mo)return fe;Mo=H}if(fe=K.entangledLanes,fe!==0)for(K=K.entanglements,fe&=B;0<fe;)t=31-Ac(fe),H=1<<t,B|=K[t],fe&=~H;return B}function ob(K){return K=K.pendingLanes&-1073741825,K!==0?K:K&1073741824?1073741824:0}function Sd(K,fe){switch(K){case 15:return 1;case 14:return 2;case 12:return K=Ph(24&~fe),K===0?Sd(10,fe):K;case 10:return K=Ph(192&~fe),K===0?Sd(8,fe):K;case 8:return K=Ph(3584&~fe),K===0&&(K=Ph(4186112&~fe),K===0&&(K=512)),K;case 2:return fe=Ph(805306368&~fe),fe===0&&(fe=268435456),fe}throw Error(Ca(358,K))}function Ph(K){return K&-K}function H0(K){for(var fe=[],t=0;31>t;t++)fe.push(K);return fe}function Kd(K,fe,t){K.pendingLanes|=fe;var B=fe-1;K.suspendedLanes&=B,K.pingedLanes&=B,K=K.eventTimes,fe=31-Ac(fe),K[fe]=t}var Ac=Math.clz32?Math.clz32:V3,U3=Math.log,H3=Math.LN2;function V3(K){return K===0?32:31-(U3(K)/H3|0)|0}var G3=Gs.unstable_UserBlockingPriority,Y3=Gs.unstable_runWithPriority,vd=!0;function W3(K,fe,t,B){Yc||uy();var H=py,d=Yc;Yc=!0;try{Xx(H,K,fe,t,B)}finally{(Yc=d)||fy()}}function X3(K,fe,t,B){Y3(G3,py.bind(null,K,fe,t,B))}function py(K,fe,t,B){if(vd){var H;if((H=(fe&4)===0)&&0<Cf.length&&-1<v1.indexOf(K))K=bg(null,K,fe,t,B),Cf.push(K);else{var d=dy(K,fe,t,B);if(d===null)H&&p1(K,B);else{if(H){if(-1<v1.indexOf(K)){K=bg(d,K,fe,t,B),Cf.push(K);return}if(R3(d,K,fe,t,B))return;p1(K,B)}xb(K,fe,B,null,t)}}}}function dy(K,fe,t,B){var H=sy(B);if(H=Wc(H),H!==null){var d=eh(H);if(d===null)H=null;else{var l=d.tag;if(l===13){if(H=Zx(d),H!==null)return H;H=null}else if(l===3){if(d.stateNode.hydrate)return d.tag===3?d.stateNode.containerInfo:null;H=null}else d!==H&&(H=null)}}return xb(K,fe,B,H,t),null}var hc=null,gy=null,pd=null;function sb(){if(pd)return pd;var K,fe=gy,t=fe.length,B,H="value"in hc?hc.value:hc.textContent,d=H.length;for(K=0;K<t&&fe[K]===H[K];K++);var l=t-K;for(B=1;B<=l&&fe[t-B]===H[d-B];B++);return pd=H.slice(K,1<B?1-B:void 0)}function dd(K){var fe=K.keyCode;return"charCode"in K?(K=K.charCode,K===0&&fe===13&&(K=13)):K=fe,K===10&&(K=13),32<=K||K===13?K:0}function ad(){return!0}function g1(){return!1}function mu(K){function fe(t,B,H,d,l){this._reactName=t,this._targetInst=H,this.type=B,this.nativeEvent=d,this.target=l,this.currentTarget=null;for(var b in K)K.hasOwnProperty(b)&&(t=K[b],this[b]=t?t(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?ad:g1,this.isPropagationStopped=g1,this}return Oo(fe.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=ad)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=ad)},persist:function(){},isPersistent:ad}),fe}var ev={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(K){return K.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yy=mu(ev),mp=Oo({},ev,{view:0,detail:0}),j3=mu(mp),V0,G0,Dv,Jd=Oo({},mp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:my,button:0,buttons:0,relatedTarget:function(K){return K.relatedTarget===void 0?K.fromElement===K.srcElement?K.toElement:K.fromElement:K.relatedTarget},movementX:function(K){return"movementX"in K?K.movementX:(K!==Dv&&(Dv&&K.type==="mousemove"?(V0=K.screenX-Dv.screenX,G0=K.screenY-Dv.screenY):G0=V0=0,Dv=K),V0)},movementY:function(K){return"movementY"in K?K.movementY:G0}}),y1=mu(Jd),Z3=Oo({},Jd,{dataTransfer:0}),K3=mu(Z3),J3=Oo({},mp,{relatedTarget:0}),Y0=mu(J3),Q3=Oo({},ev,{animationName:0,elapsedTime:0,pseudoElement:0}),$3=mu(Q3),q3=Oo({},ev,{clipboardData:function(K){return"clipboardData"in K?K.clipboardData:window.clipboardData}}),eT=mu(q3),tT=Oo({},ev,{data:0}),m1=mu(tT),rT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iT(K){var fe=this.nativeEvent;return fe.getModifierState?fe.getModifierState(K):(K=aT[K])?!!fe[K]:!1}function my(){return iT}var oT=Oo({},mp,{key:function(K){if(K.key){var fe=rT[K.key]||K.key;if(fe!=="Unidentified")return fe}return K.type==="keypress"?(K=dd(K),K===13?"Enter":String.fromCharCode(K)):K.type==="keydown"||K.type==="keyup"?nT[K.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:my,charCode:function(K){return K.type==="keypress"?dd(K):0},keyCode:function(K){return K.type==="keydown"||K.type==="keyup"?K.keyCode:0},which:function(K){return K.type==="keypress"?dd(K):K.type==="keydown"||K.type==="keyup"?K.keyCode:0}}),sT=mu(oT),lT=Oo({},Jd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),x1=mu(lT),uT=Oo({},mp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:my}),fT=mu(uT),cT=Oo({},ev,{propertyName:0,elapsedTime:0,pseudoElement:0}),hT=mu(cT),vT=Oo({},Jd,{deltaX:function(K){return"deltaX"in K?K.deltaX:"wheelDeltaX"in K?-K.wheelDeltaX:0},deltaY:function(K){return"deltaY"in K?K.deltaY:"wheelDeltaY"in K?-K.wheelDeltaY:"wheelDelta"in K?-K.wheelDelta:0},deltaZ:0,deltaMode:0}),pT=mu(vT),dT=[9,13,27,32],xy=Zf&&"CompositionEvent"in window,Zv=null;Zf&&"documentMode"in document&&(Zv=document.documentMode);var gT=Zf&&"TextEvent"in window&&!Zv,lb=Zf&&(!xy||Zv&&8<Zv&&11>=Zv),b1=String.fromCharCode(32),_1=!1;function ub(K,fe){switch(K){case"keyup":return dT.indexOf(fe.keyCode)!==-1;case"keydown":return fe.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fb(K){return K=K.detail,typeof K=="object"&&"data"in K?K.data:null}var Rh=!1;function yT(K,fe){switch(K){case"compositionend":return fb(fe);case"keypress":return fe.which!==32?null:(_1=!0,b1);case"textInput":return K=fe.data,K===b1&&_1?null:K;default:return null}}function mT(K,fe){if(Rh)return K==="compositionend"||!xy&&ub(K,fe)?(K=sb(),pd=gy=hc=null,Rh=!1,K):null;switch(K){case"paste":return null;case"keypress":if(!(fe.ctrlKey||fe.altKey||fe.metaKey)||fe.ctrlKey&&fe.altKey){if(fe.char&&1<fe.char.length)return fe.char;if(fe.which)return String.fromCharCode(fe.which)}return null;case"compositionend":return lb&&fe.locale!=="ko"?null:fe.data;default:return null}}var xT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function w1(K){var fe=K&&K.nodeName&&K.nodeName.toLowerCase();return fe==="input"?!!xT[K.type]:fe==="textarea"}function cb(K,fe,t,B){Yx(B),fe=kd(fe,"onChange"),0<fe.length&&(t=new yy("onChange","change",null,t,B),K.push({event:t,listeners:fe}))}var Kv=null,lp=null;function bT(K){gb(K,0)}function Qd(K){var fe=zh(K);if(Ox(fe))return K}function _T(K,fe){if(K==="change")return fe}var hb=!1;if(Zf){var W0;if(Zf){var X0="oninput"in document;if(!X0){var T1=document.createElement("div");T1.setAttribute("oninput","return;"),X0=typeof T1.oninput=="function"}W0=X0}else W0=!1;hb=W0&&(!document.documentMode||9<document.documentMode)}function A1(){Kv&&(Kv.detachEvent("onpropertychange",vb),lp=Kv=null)}function vb(K){if(K.propertyName==="value"&&Qd(lp)){var fe=[];if(cb(fe,lp,K,sy(K)),K=bT,Yc)K(fe);else{Yc=!0;try{ly(K,fe)}finally{Yc=!1,fy()}}}}function wT(K,fe,t){K==="focusin"?(A1(),Kv=fe,lp=t,Kv.attachEvent("onpropertychange",vb)):K==="focusout"&&A1()}function TT(K){if(K==="selectionchange"||K==="keyup"||K==="keydown")return Qd(lp)}function AT(K,fe){if(K==="click")return Qd(fe)}function MT(K,fe){if(K==="input"||K==="change")return Qd(fe)}function ST(K,fe){return K===fe&&(K!==0||1/K===1/fe)||K!==K&&fe!==fe}var Ru=typeof Object.is=="function"?Object.is:ST,kT=Object.prototype.hasOwnProperty;function up(K,fe){if(Ru(K,fe))return!0;if(typeof K!="object"||K===null||typeof fe!="object"||fe===null)return!1;var t=Object.keys(K),B=Object.keys(fe);if(t.length!==B.length)return!1;for(B=0;B<t.length;B++)if(!kT.call(fe,t[B])||!Ru(K[t[B]],fe[t[B]]))return!1;return!0}function M1(K){for(;K&&K.firstChild;)K=K.firstChild;return K}function S1(K,fe){var t=M1(K);K=0;for(var B;t;){if(t.nodeType===3){if(B=K+t.textContent.length,K<=fe&&B>=fe)return{node:t,offset:fe-K};K=B}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=M1(t)}}function pb(K,fe){return K&&fe?K===fe?!0:K&&K.nodeType===3?!1:fe&&fe.nodeType===3?pb(K,fe.parentNode):"contains"in K?K.contains(fe):K.compareDocumentPosition?!!(K.compareDocumentPosition(fe)&16):!1:!1}function k1(){for(var K=window,fe=Td();fe instanceof K.HTMLIFrameElement;){try{var t=typeof fe.contentWindow.location.href=="string"}catch{t=!1}if(t)K=fe.contentWindow;else break;fe=Td(K.document)}return fe}function _g(K){var fe=K&&K.nodeName&&K.nodeName.toLowerCase();return fe&&(fe==="input"&&(K.type==="text"||K.type==="search"||K.type==="tel"||K.type==="url"||K.type==="password")||fe==="textarea"||K.contentEditable==="true")}var ET=Zf&&"documentMode"in document&&11>=document.documentMode,Ih=null,wg=null,Jv=null,Tg=!1;function E1(K,fe,t){var B=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Tg||Ih==null||Ih!==Td(B)||(B=Ih,"selectionStart"in B&&_g(B)?B={start:B.selectionStart,end:B.selectionEnd}:(B=(B.ownerDocument&&B.ownerDocument.defaultView||window).getSelection(),B={anchorNode:B.anchorNode,anchorOffset:B.anchorOffset,focusNode:B.focusNode,focusOffset:B.focusOffset}),Jv&&up(Jv,B)||(Jv=B,B=kd(wg,"onSelect"),0<B.length&&(fe=new yy("onSelect","select",null,fe,t),K.push({event:fe,listeners:B}),fe.target=Ih)))}vy("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);vy("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);vy(F3,2);for(var C1="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),j0=0;j0<C1.length;j0++)hy.set(C1[j0],0);Zh("onMouseEnter",["mouseout","mouseover"]);Zh("onMouseLeave",["mouseout","mouseover"]);Zh("onPointerEnter",["pointerout","pointerover"]);Zh("onPointerLeave",["pointerout","pointerover"]);$c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$c("onBeforeInput",["compositionend","keypress","textInput","paste"]);$c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),db=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hv));function L1(K,fe,t){var B=K.type||"unknown-event";K.currentTarget=t,P3(B,fe,void 0,K),K.currentTarget=null}function gb(K,fe){fe=(fe&4)!==0;for(var t=0;t<K.length;t++){var B=K[t],H=B.event;B=B.listeners;e:{var d=void 0;if(fe)for(var l=B.length-1;0<=l;l--){var b=B[l],w=b.instance,e=b.currentTarget;if(b=b.listener,w!==d&&H.isPropagationStopped())break e;L1(H,b,e),d=w}else for(l=0;l<B.length;l++){if(b=B[l],w=b.instance,e=b.currentTarget,b=b.listener,w!==d&&H.isPropagationStopped())break e;L1(H,b,e),d=w}}}if(Md)throw K=mg,Md=!1,mg=null,K}function Do(K,fe){var t=_b(fe),B=K+"__bubble";t.has(B)||(mb(fe,K,2,!1),t.add(B))}var P1="_reactListening"+Math.random().toString(36).slice(2);function yb(K){K[P1]||(K[P1]=!0,Ix.forEach(function(fe){db.has(fe)||D1(fe,!1,K,null),D1(fe,!0,K,null)}))}function D1(K,fe,t,B){var H=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,d=t;if(K==="selectionchange"&&t.nodeType!==9&&(d=t.ownerDocument),B!==null&&!fe&&db.has(K)){if(K!=="scroll")return;H|=2,d=B}var l=_b(d),b=K+"__"+(fe?"capture":"bubble");l.has(b)||(fe&&(H|=4),mb(d,K,H,fe),l.add(b))}function mb(K,fe,t,B){var H=hy.get(fe);switch(H===void 0?2:H){case 0:H=W3;break;case 1:H=X3;break;default:H=py}t=H.bind(null,fe,t,K),H=void 0,!yg||fe!=="touchstart"&&fe!=="touchmove"&&fe!=="wheel"||(H=!0),B?H!==void 0?K.addEventListener(fe,t,{capture:!0,passive:H}):K.addEventListener(fe,t,!0):H!==void 0?K.addEventListener(fe,t,{passive:H}):K.addEventListener(fe,t,!1)}function xb(K,fe,t,B,H){var d=B;if((fe&1)===0&&(fe&2)===0&&B!==null)e:for(;;){if(B===null)return;var l=B.tag;if(l===3||l===4){var b=B.stateNode.containerInfo;if(b===H||b.nodeType===8&&b.parentNode===H)break;if(l===4)for(l=B.return;l!==null;){var w=l.tag;if((w===3||w===4)&&(w=l.stateNode.containerInfo,w===H||w.nodeType===8&&w.parentNode===H))return;l=l.return}for(;b!==null;){if(l=Wc(b),l===null)return;if(w=l.tag,w===5||w===6){B=d=l;continue e}b=b.parentNode}}B=B.return}k3(function(){var e=d,o=sy(t),a=[];e:{var r=ib.get(K);if(r!==void 0){var n=yy,c=K;switch(K){case"keypress":if(dd(t)===0)break e;case"keydown":case"keyup":n=sT;break;case"focusin":c="focus",n=Y0;break;case"focusout":c="blur",n=Y0;break;case"beforeblur":case"afterblur":n=Y0;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":n=y1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":n=K3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":n=fT;break;case tb:case rb:case nb:n=$3;break;case ab:n=hT;break;case"scroll":n=j3;break;case"wheel":n=pT;break;case"copy":case"cut":case"paste":n=eT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":n=x1}var s=(fe&4)!==0,i=!s&&K==="scroll",v=s?r!==null?r+"Capture":null:r;s=[];for(var u=e,g;u!==null;){g=u;var h=g.stateNode;if(g.tag===5&&h!==null&&(g=h,v!==null&&(h=ap(u,v),h!=null&&s.push(fp(u,h,g)))),i)break;u=u.return}0<s.length&&(r=new n(r,c,null,t,o),a.push({event:r,listeners:s}))}}if((fe&7)===0){e:{if(r=K==="mouseover"||K==="pointerover",n=K==="mouseout"||K==="pointerout",r&&(fe&16)===0&&(c=t.relatedTarget||t.fromElement)&&(Wc(c)||c[tv]))break e;if((n||r)&&(r=o.window===o?o:(r=o.ownerDocument)?r.defaultView||r.parentWindow:window,n?(c=t.relatedTarget||t.toElement,n=e,c=c?Wc(c):null,c!==null&&(i=eh(c),c!==i||c.tag!==5&&c.tag!==6)&&(c=null)):(n=null,c=e),n!==c)){if(s=y1,h="onMouseLeave",v="onMouseEnter",u="mouse",(K==="pointerout"||K==="pointerover")&&(s=x1,h="onPointerLeave",v="onPointerEnter",u="pointer"),i=n==null?r:zh(n),g=c==null?r:zh(c),r=new s(h,u+"leave",n,t,o),r.target=i,r.relatedTarget=g,h=null,Wc(o)===e&&(s=new s(v,u+"enter",c,t,o),s.target=g,s.relatedTarget=i,h=s),i=h,n&&c)t:{for(s=n,v=c,u=0,g=s;g;g=Ch(g))u++;for(g=0,h=v;h;h=Ch(h))g++;for(;0<u-g;)s=Ch(s),u--;for(;0<g-u;)v=Ch(v),g--;for(;u--;){if(s===v||v!==null&&s===v.alternate)break t;s=Ch(s),v=Ch(v)}s=null}else s=null;n!==null&&R1(a,r,n,s,!1),c!==null&&i!==null&&R1(a,i,c,s,!0)}}e:{if(r=e?zh(e):window,n=r.nodeName&&r.nodeName.toLowerCase(),n==="select"||n==="input"&&r.type==="file")var y=_T;else if(w1(r))if(hb)y=MT;else{y=TT;var p=wT}else(n=r.nodeName)&&n.toLowerCase()==="input"&&(r.type==="checkbox"||r.type==="radio")&&(y=AT);if(y&&(y=y(K,e))){cb(a,y,t,o);break e}p&&p(K,r,e),K==="focusout"&&(p=r._wrapperState)&&p.controlled&&r.type==="number"&&ug(r,"number",r.value)}switch(p=e?zh(e):window,K){case"focusin":(w1(p)||p.contentEditable==="true")&&(Ih=p,wg=e,Jv=null);break;case"focusout":Jv=wg=Ih=null;break;case"mousedown":Tg=!0;break;case"contextmenu":case"mouseup":case"dragend":Tg=!1,E1(a,t,o);break;case"selectionchange":if(ET)break;case"keydown":case"keyup":E1(a,t,o)}var A;if(xy)e:{switch(K){case"compositionstart":var m="onCompositionStart";break e;case"compositionend":m="onCompositionEnd";break e;case"compositionupdate":m="onCompositionUpdate";break e}m=void 0}else Rh?ub(K,t)&&(m="onCompositionEnd"):K==="keydown"&&t.keyCode===229&&(m="onCompositionStart");m&&(lb&&t.locale!=="ko"&&(Rh||m!=="onCompositionStart"?m==="onCompositionEnd"&&Rh&&(A=sb()):(hc=o,gy="value"in hc?hc.value:hc.textContent,Rh=!0)),p=kd(e,m),0<p.length&&(m=new m1(m,K,null,t,o),a.push({event:m,listeners:p}),A?m.data=A:(A=fb(t),A!==null&&(m.data=A)))),(A=gT?yT(K,t):mT(K,t))&&(e=kd(e,"onBeforeInput"),0<e.length&&(o=new m1("onBeforeInput","beforeinput",null,t,o),a.push({event:o,listeners:e}),o.data=A))}gb(a,fe)})}function fp(K,fe,t){return{instance:K,listener:fe,currentTarget:t}}function kd(K,fe){for(var t=fe+"Capture",B=[];K!==null;){var H=K,d=H.stateNode;H.tag===5&&d!==null&&(H=d,d=ap(K,t),d!=null&&B.unshift(fp(K,d,H)),d=ap(K,fe),d!=null&&B.push(fp(K,d,H))),K=K.return}return B}function Ch(K){if(K===null)return null;do K=K.return;while(K&&K.tag!==5);return K||null}function R1(K,fe,t,B,H){for(var d=fe._reactName,l=[];t!==null&&t!==B;){var b=t,w=b.alternate,e=b.stateNode;if(w!==null&&w===B)break;b.tag===5&&e!==null&&(b=e,H?(w=ap(t,d),w!=null&&l.unshift(fp(t,w,b))):H||(w=ap(t,d),w!=null&&l.push(fp(t,w,b)))),t=t.return}l.length!==0&&K.push({event:fe,listeners:l})}function Ed(){}var Z0=null,K0=null;function bb(K,fe){switch(K){case"button":case"input":case"select":case"textarea":return!!fe.autoFocus}return!1}function Ag(K,fe){return K==="textarea"||K==="option"||K==="noscript"||typeof fe.children=="string"||typeof fe.children=="number"||typeof fe.dangerouslySetInnerHTML=="object"&&fe.dangerouslySetInnerHTML!==null&&fe.dangerouslySetInnerHTML.__html!=null}var I1=typeof setTimeout=="function"?setTimeout:void 0,CT=typeof clearTimeout=="function"?clearTimeout:void 0;function by(K){K.nodeType===1?K.textContent="":K.nodeType===9&&(K=K.body,K!=null&&(K.textContent=""))}function Vh(K){for(;K!=null;K=K.nextSibling){var fe=K.nodeType;if(fe===1||fe===3)break}return K}function z1(K){K=K.previousSibling;for(var fe=0;K;){if(K.nodeType===8){var t=K.data;if(t==="$"||t==="$!"||t==="$?"){if(fe===0)return K;fe--}else t==="/$"&&fe++}K=K.previousSibling}return null}var J0=0;function LT(K){return{$$typeof:iy,toString:K,valueOf:K}}var $d=Math.random().toString(36).slice(2),vc="__reactFiber$"+$d,Cd="__reactProps$"+$d,tv="__reactContainer$"+$d,F1="__reactEvents$"+$d;function Wc(K){var fe=K[vc];if(fe)return fe;for(var t=K.parentNode;t;){if(fe=t[tv]||t[vc]){if(t=fe.alternate,fe.child!==null||t!==null&&t.child!==null)for(K=z1(K);K!==null;){if(t=K[vc])return t;K=z1(K)}return fe}K=t,t=K.parentNode}return null}function xp(K){return K=K[vc]||K[tv],!K||K.tag!==5&&K.tag!==6&&K.tag!==13&&K.tag!==3?null:K}function zh(K){if(K.tag===5||K.tag===6)return K.stateNode;throw Error(Ca(33))}function qd(K){return K[Cd]||null}function _b(K){var fe=K[F1];return fe===void 0&&(fe=K[F1]=new Set),fe}var Mg=[],Fh=-1;function Ec(K){return{current:K}}function Ro(K){0>Fh||(K.current=Mg[Fh],Mg[Fh]=null,Fh--)}function qo(K,fe){Fh++,Mg[Fh]=K.current,K.current=fe}var Mc={},Al=Ec(Mc),tu=Ec(!1),Kc=Mc;function Kh(K,fe){var t=K.type.contextTypes;if(!t)return Mc;var B=K.stateNode;if(B&&B.__reactInternalMemoizedUnmaskedChildContext===fe)return B.__reactInternalMemoizedMaskedChildContext;var H={},d;for(d in t)H[d]=fe[d];return B&&(K=K.stateNode,K.__reactInternalMemoizedUnmaskedChildContext=fe,K.__reactInternalMemoizedMaskedChildContext=H),H}function ru(K){return K=K.childContextTypes,K!=null}function Ld(){Ro(tu),Ro(Al)}function O1(K,fe,t){if(Al.current!==Mc)throw Error(Ca(168));qo(Al,fe),qo(tu,t)}function wb(K,fe,t){var B=K.stateNode;if(K=fe.childContextTypes,typeof B.getChildContext!="function")return t;B=B.getChildContext();for(var H in B)if(!(H in K))throw Error(Ca(108,Nh(fe)||"Unknown",H));return Oo({},t,B)}function gd(K){return K=(K=K.stateNode)&&K.__reactInternalMemoizedMergedChildContext||Mc,Kc=Al.current,qo(Al,K),qo(tu,tu.current),!0}function N1(K,fe,t){var B=K.stateNode;if(!B)throw Error(Ca(169));t?(K=wb(K,fe,Kc),B.__reactInternalMemoizedMergedChildContext=K,Ro(tu),Ro(Al),qo(Al,K)):Ro(tu),qo(tu,t)}var _y=null,Zc=null,PT=Gs.unstable_runWithPriority,wy=Gs.unstable_scheduleCallback,Sg=Gs.unstable_cancelCallback,DT=Gs.unstable_shouldYield,B1=Gs.unstable_requestPaint,kg=Gs.unstable_now,RT=Gs.unstable_getCurrentPriorityLevel,e0=Gs.unstable_ImmediatePriority,Tb=Gs.unstable_UserBlockingPriority,Ab=Gs.unstable_NormalPriority,Mb=Gs.unstable_LowPriority,Sb=Gs.unstable_IdlePriority,Q0={},IT=B1!==void 0?B1:function(){},Gf=null,yd=null,$0=!1,U1=kg(),wl=1e4>U1?kg:function(){return kg()-U1};function Jh(){switch(RT()){case e0:return 99;case Tb:return 98;case Ab:return 97;case Mb:return 96;case Sb:return 95;default:throw Error(Ca(332))}}function kb(K){switch(K){case 99:return e0;case 98:return Tb;case 97:return Ab;case 96:return Mb;case 95:return Sb;default:throw Error(Ca(332))}}function Jc(K,fe){return K=kb(K),PT(K,fe)}function cp(K,fe,t){return K=kb(K),wy(K,fe,t)}function If(){if(yd!==null){var K=yd;yd=null,Sg(K)}Eb()}function Eb(){if(!$0&&Gf!==null){$0=!0;var K=0;try{var fe=Gf;Jc(99,function(){for(;K<fe.length;K++){var t=fe[K];do t=t(!0);while(t!==null)}}),Gf=null}catch(t){throw Gf!==null&&(Gf=Gf.slice(K+1)),wy(e0,If),t}finally{$0=!1}}}var zT=qc.ReactCurrentBatchConfig;function lf(K,fe){if(K&&K.defaultProps){fe=Oo({},fe),K=K.defaultProps;for(var t in K)fe[t]===void 0&&(fe[t]=K[t]);return fe}return fe}var Pd=Ec(null),Dd=null,Oh=null,Rd=null;function Ty(){Rd=Oh=Dd=null}function Ay(K){var fe=Pd.current;Ro(Pd),K.type._context._currentValue=fe}function Cb(K,fe){for(;K!==null;){var t=K.alternate;if((K.childLanes&fe)===fe){if(t===null||(t.childLanes&fe)===fe)break;t.childLanes|=fe}else K.childLanes|=fe,t!==null&&(t.childLanes|=fe);K=K.return}}function Gh(K,fe){Dd=K,Rd=Oh=null,K=K.dependencies,K!==null&&K.firstContext!==null&&((K.lanes&fe)!==0&&(uf=!0),K.firstContext=null)}function Fu(K,fe){if(Rd!==K&&fe!==!1&&fe!==0)if((typeof fe!="number"||fe===1073741823)&&(Rd=K,fe=1073741823),fe={context:K,observedBits:fe,next:null},Oh===null){if(Dd===null)throw Error(Ca(308));Oh=fe,Dd.dependencies={lanes:0,firstContext:fe,responders:null}}else Oh=Oh.next=fe;return K._currentValue}var fc=!1;function My(K){K.updateQueue={baseState:K.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function Lb(K,fe){K=K.updateQueue,fe.updateQueue===K&&(fe.updateQueue={baseState:K.baseState,firstBaseUpdate:K.firstBaseUpdate,lastBaseUpdate:K.lastBaseUpdate,shared:K.shared,effects:K.effects})}function mc(K,fe){return{eventTime:K,lane:fe,tag:0,payload:null,callback:null,next:null}}function xc(K,fe){if(K=K.updateQueue,K!==null){K=K.shared;var t=K.pending;t===null?fe.next=fe:(fe.next=t.next,t.next=fe),K.pending=fe}}function H1(K,fe){var t=K.updateQueue,B=K.alternate;if(B!==null&&(B=B.updateQueue,t===B)){var H=null,d=null;if(t=t.firstBaseUpdate,t!==null){do{var l={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};d===null?H=d=l:d=d.next=l,t=t.next}while(t!==null);d===null?H=d=fe:d=d.next=fe}else H=d=fe;t={baseState:B.baseState,firstBaseUpdate:H,lastBaseUpdate:d,shared:B.shared,effects:B.effects},K.updateQueue=t;return}K=t.lastBaseUpdate,K===null?t.firstBaseUpdate=fe:K.next=fe,t.lastBaseUpdate=fe}function hp(K,fe,t,B){var H=K.updateQueue;fc=!1;var d=H.firstBaseUpdate,l=H.lastBaseUpdate,b=H.shared.pending;if(b!==null){H.shared.pending=null;var w=b,e=w.next;w.next=null,l===null?d=e:l.next=e,l=w;var o=K.alternate;if(o!==null){o=o.updateQueue;var a=o.lastBaseUpdate;a!==l&&(a===null?o.firstBaseUpdate=e:a.next=e,o.lastBaseUpdate=w)}}if(d!==null){a=H.baseState,l=0,o=e=w=null;do{b=d.lane;var r=d.eventTime;if((B&b)===b){o!==null&&(o=o.next={eventTime:r,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var n=K,c=d;switch(b=fe,r=t,c.tag){case 1:if(n=c.payload,typeof n=="function"){a=n.call(r,a,b);break e}a=n;break e;case 3:n.flags=n.flags&-4097|64;case 0:if(n=c.payload,b=typeof n=="function"?n.call(r,a,b):n,b==null)break e;a=Oo({},a,b);break e;case 2:fc=!0}}d.callback!==null&&(K.flags|=32,b=H.effects,b===null?H.effects=[d]:b.push(d))}else r={eventTime:r,lane:b,tag:d.tag,payload:d.payload,callback:d.callback,next:null},o===null?(e=o=r,w=a):o=o.next=r,l|=b;if(d=d.next,d===null){if(b=H.shared.pending,b===null)break;d=b.next,b.next=null,H.lastBaseUpdate=b,H.shared.pending=null}}while(1);o===null&&(w=a),H.baseState=w,H.firstBaseUpdate=e,H.lastBaseUpdate=o,_p|=l,K.lanes=l,K.memoizedState=a}}function V1(K,fe,t){if(K=fe.effects,fe.effects=null,K!==null)for(fe=0;fe<K.length;fe++){var B=K[fe],H=B.callback;if(H!==null){if(B.callback=null,B=t,typeof H!="function")throw Error(Ca(191,H));H.call(B)}}}var Pb=new Wd.Component().refs;function Id(K,fe,t,B){fe=K.memoizedState,t=t(B,fe),t=t==null?fe:Oo({},fe,t),K.memoizedState=t,K.lanes===0&&(K.updateQueue.baseState=t)}var t0={isMounted:function(K){return(K=K._reactInternals)?eh(K)===K:!1},enqueueSetState:function(K,fe,t){K=K._reactInternals;var B=yu(),H=bc(K),d=mc(B,H);d.payload=fe,t!=null&&(d.callback=t),xc(K,d),_c(K,H,B)},enqueueReplaceState:function(K,fe,t){K=K._reactInternals;var B=yu(),H=bc(K),d=mc(B,H);d.tag=1,d.payload=fe,t!=null&&(d.callback=t),xc(K,d),_c(K,H,B)},enqueueForceUpdate:function(K,fe){K=K._reactInternals;var t=yu(),B=bc(K),H=mc(t,B);H.tag=2,fe!=null&&(H.callback=fe),xc(K,H),_c(K,B,t)}};function G1(K,fe,t,B,H,d,l){return K=K.stateNode,typeof K.shouldComponentUpdate=="function"?K.shouldComponentUpdate(B,d,l):fe.prototype&&fe.prototype.isPureReactComponent?!up(t,B)||!up(H,d):!0}function Db(K,fe,t){var B=!1,H=Mc,d=fe.contextType;return typeof d=="object"&&d!==null?d=Fu(d):(H=ru(fe)?Kc:Al.current,B=fe.contextTypes,d=(B=B!=null)?Kh(K,H):Mc),fe=new fe(t,d),K.memoizedState=fe.state!==null&&fe.state!==void 0?fe.state:null,fe.updater=t0,K.stateNode=fe,fe._reactInternals=K,B&&(K=K.stateNode,K.__reactInternalMemoizedUnmaskedChildContext=H,K.__reactInternalMemoizedMaskedChildContext=d),fe}function Y1(K,fe,t,B){K=fe.state,typeof fe.componentWillReceiveProps=="function"&&fe.componentWillReceiveProps(t,B),typeof fe.UNSAFE_componentWillReceiveProps=="function"&&fe.UNSAFE_componentWillReceiveProps(t,B),fe.state!==K&&t0.enqueueReplaceState(fe,fe.state,null)}function Eg(K,fe,t,B){var H=K.stateNode;H.props=t,H.state=K.memoizedState,H.refs=Pb,My(K);var d=fe.contextType;typeof d=="object"&&d!==null?H.context=Fu(d):(d=ru(fe)?Kc:Al.current,H.context=Kh(K,d)),hp(K,t,H,B),H.state=K.memoizedState,d=fe.getDerivedStateFromProps,typeof d=="function"&&(Id(K,fe,d,t),H.state=K.memoizedState),typeof fe.getDerivedStateFromProps=="function"||typeof H.getSnapshotBeforeUpdate=="function"||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(fe=H.state,typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount(),fe!==H.state&&t0.enqueueReplaceState(H,H.state,null),hp(K,t,H,B),H.state=K.memoizedState),typeof H.componentDidMount=="function"&&(K.flags|=4)}var id=Array.isArray;function Rv(K,fe,t){if(K=t.ref,K!==null&&typeof K!="function"&&typeof K!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Ca(309));var B=t.stateNode}if(!B)throw Error(Ca(147,K));var H=""+K;return fe!==null&&fe.ref!==null&&typeof fe.ref=="function"&&fe.ref._stringRef===H?fe.ref:(fe=function(d){var l=B.refs;l===Pb&&(l=B.refs={}),d===null?delete l[H]:l[H]=d},fe._stringRef=H,fe)}if(typeof K!="string")throw Error(Ca(284));if(!t._owner)throw Error(Ca(290,K))}return K}function od(K,fe){if(K.type!=="textarea")throw Error(Ca(31,Object.prototype.toString.call(fe)==="[object Object]"?"object with keys {"+Object.keys(fe).join(", ")+"}":fe))}function Rb(K){function fe(i,v){if(K){var u=i.lastEffect;u!==null?(u.nextEffect=v,i.lastEffect=v):i.firstEffect=i.lastEffect=v,v.nextEffect=null,v.flags=8}}function t(i,v){if(!K)return null;for(;v!==null;)fe(i,v),v=v.sibling;return null}function B(i,v){for(i=new Map;v!==null;)v.key!==null?i.set(v.key,v):i.set(v.index,v),v=v.sibling;return i}function H(i,v){return i=kc(i,v),i.index=0,i.sibling=null,i}function d(i,v,u){return i.index=u,K?(u=i.alternate,u!==null?(u=u.index,u<v?(i.flags=2,v):u):(i.flags=2,v)):v}function l(i){return K&&i.alternate===null&&(i.flags=2),i}function b(i,v,u,g){return v===null||v.tag!==6?(v=ng(u,i.mode,g),v.return=i,v):(v=H(v,u),v.return=i,v)}function w(i,v,u,g){return v!==null&&v.elementType===u.type?(g=H(v,u.props),g.ref=Rv(i,v,u),g.return=i,g):(g=_d(u.type,u.key,u.props,null,i.mode,g),g.ref=Rv(i,v,u),g.return=i,g)}function e(i,v,u,g){return v===null||v.tag!==4||v.stateNode.containerInfo!==u.containerInfo||v.stateNode.implementation!==u.implementation?(v=ag(u,i.mode,g),v.return=i,v):(v=H(v,u.children||[]),v.return=i,v)}function o(i,v,u,g,h){return v===null||v.tag!==7?(v=jh(u,i.mode,g,h),v.return=i,v):(v=H(v,u),v.return=i,v)}function a(i,v,u){if(typeof v=="string"||typeof v=="number")return v=ng(""+v,i.mode,u),v.return=i,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Bv:return u=_d(v.type,v.key,v.props,null,i.mode,u),u.ref=Rv(i,null,v),u.return=i,u;case Gc:return v=ag(v,i.mode,u),v.return=i,v}if(id(v)||kv(v))return v=jh(v,i.mode,u,null),v.return=i,v;od(i,v)}return null}function r(i,v,u,g){var h=v!==null?v.key:null;if(typeof u=="string"||typeof u=="number")return h!==null?null:b(i,v,""+u,g);if(typeof u=="object"&&u!==null){switch(u.$$typeof){case Bv:return u.key===h?u.type===cc?o(i,v,u.props.children,g,h):w(i,v,u,g):null;case Gc:return u.key===h?e(i,v,u,g):null}if(id(u)||kv(u))return h!==null?null:o(i,v,u,g,null);od(i,u)}return null}function n(i,v,u,g,h){if(typeof g=="string"||typeof g=="number")return i=i.get(u)||null,b(v,i,""+g,h);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Bv:return i=i.get(g.key===null?u:g.key)||null,g.type===cc?o(v,i,g.props.children,h,g.key):w(v,i,g,h);case Gc:return i=i.get(g.key===null?u:g.key)||null,e(v,i,g,h)}if(id(g)||kv(g))return i=i.get(u)||null,o(v,i,g,h,null);od(v,g)}return null}function c(i,v,u,g){for(var h=null,y=null,p=v,A=v=0,m=null;p!==null&&A<u.length;A++){p.index>A?(m=p,p=null):m=p.sibling;var M=r(i,p,u[A],g);if(M===null){p===null&&(p=m);break}K&&p&&M.alternate===null&&fe(i,p),v=d(M,v,A),y===null?h=M:y.sibling=M,y=M,p=m}if(A===u.length)return t(i,p),h;if(p===null){for(;A<u.length;A++)p=a(i,u[A],g),p!==null&&(v=d(p,v,A),y===null?h=p:y.sibling=p,y=p);return h}for(p=B(i,p);A<u.length;A++)m=n(p,i,A,u[A],g),m!==null&&(K&&m.alternate!==null&&p.delete(m.key===null?A:m.key),v=d(m,v,A),y===null?h=m:y.sibling=m,y=m);return K&&p.forEach(function(x){return fe(i,x)}),h}function s(i,v,u,g){var h=kv(u);if(typeof h!="function")throw Error(Ca(150));if(u=h.call(u),u==null)throw Error(Ca(151));for(var y=h=null,p=v,A=v=0,m=null,M=u.next();p!==null&&!M.done;A++,M=u.next()){p.index>A?(m=p,p=null):m=p.sibling;var x=r(i,p,M.value,g);if(x===null){p===null&&(p=m);break}K&&p&&x.alternate===null&&fe(i,p),v=d(x,v,A),y===null?h=x:y.sibling=x,y=x,p=m}if(M.done)return t(i,p),h;if(p===null){for(;!M.done;A++,M=u.next())M=a(i,M.value,g),M!==null&&(v=d(M,v,A),y===null?h=M:y.sibling=M,y=M);return h}for(p=B(i,p);!M.done;A++,M=u.next())M=n(p,i,A,M.value,g),M!==null&&(K&&M.alternate!==null&&p.delete(M.key===null?A:M.key),v=d(M,v,A),y===null?h=M:y.sibling=M,y=M);return K&&p.forEach(function(T){return fe(i,T)}),h}return function(i,v,u,g){var h=typeof u=="object"&&u!==null&&u.type===cc&&u.key===null;h&&(u=u.props.children);var y=typeof u=="object"&&u!==null;if(y)switch(u.$$typeof){case Bv:e:{for(y=u.key,h=v;h!==null;){if(h.key===y){switch(h.tag){case 7:if(u.type===cc){t(i,h.sibling),v=H(h,u.props.children),v.return=i,i=v;break e}break;default:if(h.elementType===u.type){t(i,h.sibling),v=H(h,u.props),v.ref=Rv(i,h,u),v.return=i,i=v;break e}}t(i,h);break}else fe(i,h);h=h.sibling}u.type===cc?(v=jh(u.props.children,i.mode,g,u.key),v.return=i,i=v):(g=_d(u.type,u.key,u.props,null,i.mode,g),g.ref=Rv(i,v,u),g.return=i,i=g)}return l(i);case Gc:e:{for(h=u.key;v!==null;){if(v.key===h)if(v.tag===4&&v.stateNode.containerInfo===u.containerInfo&&v.stateNode.implementation===u.implementation){t(i,v.sibling),v=H(v,u.children||[]),v.return=i,i=v;break e}else{t(i,v);break}else fe(i,v);v=v.sibling}v=ag(u,i.mode,g),v.return=i,i=v}return l(i)}if(typeof u=="string"||typeof u=="number")return u=""+u,v!==null&&v.tag===6?(t(i,v.sibling),v=H(v,u),v.return=i,i=v):(t(i,v),v=ng(u,i.mode,g),v.return=i,i=v),l(i);if(id(u))return c(i,v,u,g);if(kv(u))return s(i,v,u,g);if(y&&od(i,u),typeof u=="undefined"&&!h)switch(i.tag){case 1:case 22:case 0:case 11:case 15:throw Error(Ca(152,Nh(i.type)||"Component"))}return t(i,v)}}var zd=Rb(!0),Ib=Rb(!1),bp={},Df=Ec(bp),vp=Ec(bp),pp=Ec(bp);function Xc(K){if(K===bp)throw Error(Ca(174));return K}function Cg(K,fe){switch(qo(pp,fe),qo(vp,K),qo(Df,bp),K=fe.nodeType,K){case 9:case 11:fe=(fe=fe.documentElement)?fe.namespaceURI:vg(null,"");break;default:K=K===8?fe.parentNode:fe,fe=K.namespaceURI||null,K=K.tagName,fe=vg(fe,K)}Ro(Df),qo(Df,fe)}function Qh(){Ro(Df),Ro(vp),Ro(pp)}function W1(K){Xc(pp.current);var fe=Xc(Df.current),t=vg(fe,K.type);fe!==t&&(qo(vp,K),qo(Df,t))}function Sy(K){vp.current===K&&(Ro(Df),Ro(vp))}var $o=Ec(0);function Fd(K){for(var fe=K;fe!==null;){if(fe.tag===13){var t=fe.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return fe}else if(fe.tag===19&&fe.memoizedProps.revealOrder!==void 0){if((fe.flags&64)!==0)return fe}else if(fe.child!==null){fe.child.return=fe,fe=fe.child;continue}if(fe===K)break;for(;fe.sibling===null;){if(fe.return===null||fe.return===K)return null;fe=fe.return}fe.sibling.return=fe.return,fe=fe.sibling}return null}var Wf=null,pc=null,Rf=!1;function zb(K,fe){var t=Iu(5,null,null,0);t.elementType="DELETED",t.type="DELETED",t.stateNode=fe,t.return=K,t.flags=8,K.lastEffect!==null?(K.lastEffect.nextEffect=t,K.lastEffect=t):K.firstEffect=K.lastEffect=t}function X1(K,fe){switch(K.tag){case 5:var t=K.type;return fe=fe.nodeType!==1||t.toLowerCase()!==fe.nodeName.toLowerCase()?null:fe,fe!==null?(K.stateNode=fe,!0):!1;case 6:return fe=K.pendingProps===""||fe.nodeType!==3?null:fe,fe!==null?(K.stateNode=fe,!0):!1;case 13:return!1;default:return!1}}function Lg(K){if(Rf){var fe=pc;if(fe){var t=fe;if(!X1(K,fe)){if(fe=Vh(t.nextSibling),!fe||!X1(K,fe)){K.flags=K.flags&-1025|2,Rf=!1,Wf=K;return}zb(Wf,t)}Wf=K,pc=Vh(fe.firstChild)}else K.flags=K.flags&-1025|2,Rf=!1,Wf=K}}function j1(K){for(K=K.return;K!==null&&K.tag!==5&&K.tag!==3&&K.tag!==13;)K=K.return;Wf=K}function sd(K){if(K!==Wf)return!1;if(!Rf)return j1(K),Rf=!0,!1;var fe=K.type;if(K.tag!==5||fe!=="head"&&fe!=="body"&&!Ag(fe,K.memoizedProps))for(fe=pc;fe;)zb(K,fe),fe=Vh(fe.nextSibling);if(j1(K),K.tag===13){if(K=K.memoizedState,K=K!==null?K.dehydrated:null,!K)throw Error(Ca(317));e:{for(K=K.nextSibling,fe=0;K;){if(K.nodeType===8){var t=K.data;if(t==="/$"){if(fe===0){pc=Vh(K.nextSibling);break e}fe--}else t!=="$"&&t!=="$!"&&t!=="$?"||fe++}K=K.nextSibling}pc=null}}else pc=Wf?Vh(K.stateNode.nextSibling):null;return!0}function q0(){pc=Wf=null,Rf=!1}var Yh=[];function ky(){for(var K=0;K<Yh.length;K++)Yh[K]._workInProgressVersionPrimary=null;Yh.length=0}var Qv=qc.ReactCurrentDispatcher,zu=qc.ReactCurrentBatchConfig,dp=0,ls=null,_l=null,nl=null,Od=!1,$v=!1;function ql(){throw Error(Ca(321))}function Ey(K,fe){if(fe===null)return!1;for(var t=0;t<fe.length&&t<K.length;t++)if(!Ru(K[t],fe[t]))return!1;return!0}function Cy(K,fe,t,B,H,d){if(dp=d,ls=fe,fe.memoizedState=null,fe.updateQueue=null,fe.lanes=0,Qv.current=K===null||K.memoizedState===null?OT:NT,K=t(B,H),$v){d=0;do{if($v=!1,!(25>d))throw Error(Ca(301));d+=1,nl=_l=null,fe.updateQueue=null,Qv.current=BT,K=t(B,H)}while($v)}if(Qv.current=Hd,fe=_l!==null&&_l.next!==null,dp=0,nl=_l=ls=null,Od=!1,fe)throw Error(Ca(300));return K}function jc(){var K={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nl===null?ls.memoizedState=nl=K:nl=nl.next=K,nl}function th(){if(_l===null){var K=ls.alternate;K=K!==null?K.memoizedState:null}else K=_l.next;var fe=nl===null?ls.memoizedState:nl.next;if(fe!==null)nl=fe,_l=K;else{if(K===null)throw Error(Ca(310));_l=K,K={memoizedState:_l.memoizedState,baseState:_l.baseState,baseQueue:_l.baseQueue,queue:_l.queue,next:null},nl===null?ls.memoizedState=nl=K:nl=nl.next=K}return nl}function Lf(K,fe){return typeof fe=="function"?fe(K):fe}function Iv(K){var fe=th(),t=fe.queue;if(t===null)throw Error(Ca(311));t.lastRenderedReducer=K;var B=_l,H=B.baseQueue,d=t.pending;if(d!==null){if(H!==null){var l=H.next;H.next=d.next,d.next=l}B.baseQueue=H=d,t.pending=null}if(H!==null){H=H.next,B=B.baseState;var b=l=d=null,w=H;do{var e=w.lane;if((dp&e)===e)b!==null&&(b=b.next={lane:0,action:w.action,eagerReducer:w.eagerReducer,eagerState:w.eagerState,next:null}),B=w.eagerReducer===K?w.eagerState:K(B,w.action);else{var o={lane:e,action:w.action,eagerReducer:w.eagerReducer,eagerState:w.eagerState,next:null};b===null?(l=b=o,d=B):b=b.next=o,ls.lanes|=e,_p|=e}w=w.next}while(w!==null&&w!==H);b===null?d=B:b.next=l,Ru(B,fe.memoizedState)||(uf=!0),fe.memoizedState=B,fe.baseState=d,fe.baseQueue=b,t.lastRenderedState=B}return[fe.memoizedState,t.dispatch]}function zv(K){var fe=th(),t=fe.queue;if(t===null)throw Error(Ca(311));t.lastRenderedReducer=K;var B=t.dispatch,H=t.pending,d=fe.memoizedState;if(H!==null){t.pending=null;var l=H=H.next;do d=K(d,l.action),l=l.next;while(l!==H);Ru(d,fe.memoizedState)||(uf=!0),fe.memoizedState=d,fe.baseQueue===null&&(fe.baseState=d),t.lastRenderedState=d}return[d,B]}function Z1(K,fe,t){var B=fe._getVersion;B=B(fe._source);var H=fe._workInProgressVersionPrimary;if(H!==null?K=H===B:(K=K.mutableReadLanes,(K=(dp&K)===K)&&(fe._workInProgressVersionPrimary=B,Yh.push(fe))),K)return t(fe._source);throw Yh.push(fe),Error(Ca(350))}function Fb(K,fe,t,B){var H=Fl;if(H===null)throw Error(Ca(349));var d=fe._getVersion,l=d(fe._source),b=Qv.current,w=b.useState(function(){return Z1(H,fe,t)}),e=w[1],o=w[0];w=nl;var a=K.memoizedState,r=a.refs,n=r.getSnapshot,c=a.source;a=a.subscribe;var s=ls;return K.memoizedState={refs:r,source:fe,subscribe:B},b.useEffect(function(){r.getSnapshot=t,r.setSnapshot=e;var i=d(fe._source);if(!Ru(l,i)){i=t(fe._source),Ru(o,i)||(e(i),i=bc(s),H.mutableReadLanes|=i&H.pendingLanes),i=H.mutableReadLanes,H.entangledLanes|=i;for(var v=H.entanglements,u=i;0<u;){var g=31-Ac(u),h=1<<g;v[g]|=i,u&=~h}}},[t,fe,B]),b.useEffect(function(){return B(fe._source,function(){var i=r.getSnapshot,v=r.setSnapshot;try{v(i(fe._source));var u=bc(s);H.mutableReadLanes|=u&H.pendingLanes}catch(g){v(function(){throw g})}})},[fe,B]),Ru(n,t)&&Ru(c,fe)&&Ru(a,B)||(K={pending:null,dispatch:null,lastRenderedReducer:Lf,lastRenderedState:o},K.dispatch=e=Dy.bind(null,ls,K),w.queue=K,w.baseQueue=null,o=Z1(H,fe,t),w.memoizedState=w.baseState=o),o}function Ob(K,fe,t){var B=th();return Fb(B,K,fe,t)}function Fv(K){var fe=jc();return typeof K=="function"&&(K=K()),fe.memoizedState=fe.baseState=K,K=fe.queue={pending:null,dispatch:null,lastRenderedReducer:Lf,lastRenderedState:K},K=K.dispatch=Dy.bind(null,ls,K),[fe.memoizedState,K]}function Nd(K,fe,t,B){return K={tag:K,create:fe,destroy:t,deps:B,next:null},fe=ls.updateQueue,fe===null?(fe={lastEffect:null},ls.updateQueue=fe,fe.lastEffect=K.next=K):(t=fe.lastEffect,t===null?fe.lastEffect=K.next=K:(B=t.next,t.next=K,K.next=B,fe.lastEffect=K)),K}function K1(K){var fe=jc();return K={current:K},fe.memoizedState=K}function Bd(){return th().memoizedState}function Pg(K,fe,t,B){var H=jc();ls.flags|=K,H.memoizedState=Nd(1|fe,t,void 0,B===void 0?null:B)}function Ly(K,fe,t,B){var H=th();B=B===void 0?null:B;var d=void 0;if(_l!==null){var l=_l.memoizedState;if(d=l.destroy,B!==null&&Ey(B,l.deps)){Nd(fe,t,d,B);return}}ls.flags|=K,H.memoizedState=Nd(1|fe,t,d,B)}function J1(K,fe){return Pg(516,4,K,fe)}function Ud(K,fe){return Ly(516,4,K,fe)}function Nb(K,fe){return Ly(4,2,K,fe)}function Bb(K,fe){if(typeof fe=="function")return K=K(),fe(K),function(){fe(null)};if(fe!=null)return K=K(),fe.current=K,function(){fe.current=null}}function Ub(K,fe,t){return t=t!=null?t.concat([K]):null,Ly(4,2,Bb.bind(null,fe,K),t)}function Py(){}function Hb(K,fe){var t=th();fe=fe===void 0?null:fe;var B=t.memoizedState;return B!==null&&fe!==null&&Ey(fe,B[1])?B[0]:(t.memoizedState=[K,fe],K)}function Vb(K,fe){var t=th();fe=fe===void 0?null:fe;var B=t.memoizedState;return B!==null&&fe!==null&&Ey(fe,B[1])?B[0]:(K=K(),t.memoizedState=[K,fe],K)}function FT(K,fe){var t=Jh();Jc(98>t?98:t,function(){K(!0)}),Jc(97<t?97:t,function(){var B=zu.transition;zu.transition=1;try{K(!1),fe()}finally{zu.transition=B}})}function Dy(K,fe,t){var B=yu(),H=bc(K),d={lane:H,action:t,eagerReducer:null,eagerState:null,next:null},l=fe.pending;if(l===null?d.next=d:(d.next=l.next,l.next=d),fe.pending=d,l=K.alternate,K===ls||l!==null&&l===ls)$v=Od=!0;else{if(K.lanes===0&&(l===null||l.lanes===0)&&(l=fe.lastRenderedReducer,l!==null))try{var b=fe.lastRenderedState,w=l(b,t);if(d.eagerReducer=l,d.eagerState=w,Ru(w,b))return}catch{}finally{}_c(K,H,B)}}var Hd={readContext:Fu,useCallback:ql,useContext:ql,useEffect:ql,useImperativeHandle:ql,useLayoutEffect:ql,useMemo:ql,useReducer:ql,useRef:ql,useState:ql,useDebugValue:ql,useDeferredValue:ql,useTransition:ql,useMutableSource:ql,useOpaqueIdentifier:ql,unstable_isNewReconciler:!1},OT={readContext:Fu,useCallback:function(K,fe){return jc().memoizedState=[K,fe===void 0?null:fe],K},useContext:Fu,useEffect:J1,useImperativeHandle:function(K,fe,t){return t=t!=null?t.concat([K]):null,Pg(4,2,Bb.bind(null,fe,K),t)},useLayoutEffect:function(K,fe){return Pg(4,2,K,fe)},useMemo:function(K,fe){var t=jc();return fe=fe===void 0?null:fe,K=K(),t.memoizedState=[K,fe],K},useReducer:function(K,fe,t){var B=jc();return fe=t!==void 0?t(fe):fe,B.memoizedState=B.baseState=fe,K=B.queue={pending:null,dispatch:null,lastRenderedReducer:K,lastRenderedState:fe},K=K.dispatch=Dy.bind(null,ls,K),[B.memoizedState,K]},useRef:K1,useState:Fv,useDebugValue:Py,useDeferredValue:function(K){var fe=Fv(K),t=fe[0],B=fe[1];return J1(function(){var H=zu.transition;zu.transition=1;try{B(K)}finally{zu.transition=H}},[K]),t},useTransition:function(){var K=Fv(!1),fe=K[0];return K=FT.bind(null,K[1]),K1(K),[K,fe]},useMutableSource:function(K,fe,t){var B=jc();return B.memoizedState={refs:{getSnapshot:fe,setSnapshot:null},source:K,subscribe:t},Fb(B,K,fe,t)},useOpaqueIdentifier:function(){if(Rf){var K=!1,fe=LT(function(){throw K||(K=!0,t("r:"+(J0++).toString(36))),Error(Ca(355))}),t=Fv(fe)[1];return(ls.mode&2)===0&&(ls.flags|=516,Nd(5,function(){t("r:"+(J0++).toString(36))},void 0,null)),fe}return fe="r:"+(J0++).toString(36),Fv(fe),fe},unstable_isNewReconciler:!1},NT={readContext:Fu,useCallback:Hb,useContext:Fu,useEffect:Ud,useImperativeHandle:Ub,useLayoutEffect:Nb,useMemo:Vb,useReducer:Iv,useRef:Bd,useState:function(){return Iv(Lf)},useDebugValue:Py,useDeferredValue:function(K){var fe=Iv(Lf),t=fe[0],B=fe[1];return Ud(function(){var H=zu.transition;zu.transition=1;try{B(K)}finally{zu.transition=H}},[K]),t},useTransition:function(){var K=Iv(Lf)[0];return[Bd().current,K]},useMutableSource:Ob,useOpaqueIdentifier:function(){return Iv(Lf)[0]},unstable_isNewReconciler:!1},BT={readContext:Fu,useCallback:Hb,useContext:Fu,useEffect:Ud,useImperativeHandle:Ub,useLayoutEffect:Nb,useMemo:Vb,useReducer:zv,useRef:Bd,useState:function(){return zv(Lf)},useDebugValue:Py,useDeferredValue:function(K){var fe=zv(Lf),t=fe[0],B=fe[1];return Ud(function(){var H=zu.transition;zu.transition=1;try{B(K)}finally{zu.transition=H}},[K]),t},useTransition:function(){var K=zv(Lf)[0];return[Bd().current,K]},useMutableSource:Ob,useOpaqueIdentifier:function(){return zv(Lf)[0]},unstable_isNewReconciler:!1},UT=qc.ReactCurrentOwner,uf=!1;function eu(K,fe,t,B){fe.child=K===null?Ib(fe,null,t,B):zd(fe,K.child,t,B)}function Q1(K,fe,t,B,H){t=t.render;var d=fe.ref;return Gh(fe,H),B=Cy(K,fe,t,B,d,H),K!==null&&!uf?(fe.updateQueue=K.updateQueue,fe.flags&=-517,K.lanes&=~H,Xf(K,fe,H)):(fe.flags|=1,eu(K,fe,B,H),fe.child)}function $1(K,fe,t,B,H,d){if(K===null){var l=t.type;return typeof l=="function"&&!Ny(l)&&l.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(fe.tag=15,fe.type=l,Gb(K,fe,l,B,H,d)):(K=_d(t.type,null,B,fe,fe.mode,d),K.ref=fe.ref,K.return=fe,fe.child=K)}return l=K.child,(H&d)===0&&(H=l.memoizedProps,t=t.compare,t=t!==null?t:up,t(H,B)&&K.ref===fe.ref)?Xf(K,fe,d):(fe.flags|=1,K=kc(l,B),K.ref=fe.ref,K.return=fe,fe.child=K)}function Gb(K,fe,t,B,H,d){if(K!==null&&up(K.memoizedProps,B)&&K.ref===fe.ref)if(uf=!1,(d&H)!==0)(K.flags&16384)!==0&&(uf=!0);else return fe.lanes=K.lanes,Xf(K,fe,d);return Dg(K,fe,t,B,d)}function eg(K,fe,t){var B=fe.pendingProps,H=B.children,d=K!==null?K.memoizedState:null;if(B.mode==="hidden"||B.mode==="unstable-defer-without-hiding")if((fe.mode&4)===0)fe.memoizedState={baseLanes:0},ud(fe,t);else if((t&1073741824)!==0)fe.memoizedState={baseLanes:0},ud(fe,d!==null?d.baseLanes:t);else return K=d!==null?d.baseLanes|t:t,fe.lanes=fe.childLanes=1073741824,fe.memoizedState={baseLanes:K},ud(fe,K),null;else d!==null?(B=d.baseLanes|t,fe.memoizedState=null):B=t,ud(fe,B);return eu(K,fe,H,t),fe.child}function Yb(K,fe){var t=fe.ref;(K===null&&t!==null||K!==null&&K.ref!==t)&&(fe.flags|=128)}function Dg(K,fe,t,B,H){var d=ru(t)?Kc:Al.current;return d=Kh(fe,d),Gh(fe,H),t=Cy(K,fe,t,B,d,H),K!==null&&!uf?(fe.updateQueue=K.updateQueue,fe.flags&=-517,K.lanes&=~H,Xf(K,fe,H)):(fe.flags|=1,eu(K,fe,t,H),fe.child)}function q1(K,fe,t,B,H){if(ru(t)){var d=!0;gd(fe)}else d=!1;if(Gh(fe,H),fe.stateNode===null)K!==null&&(K.alternate=null,fe.alternate=null,fe.flags|=2),Db(fe,t,B),Eg(fe,t,B,H),B=!0;else if(K===null){var l=fe.stateNode,b=fe.memoizedProps;l.props=b;var w=l.context,e=t.contextType;typeof e=="object"&&e!==null?e=Fu(e):(e=ru(t)?Kc:Al.current,e=Kh(fe,e));var o=t.getDerivedStateFromProps,a=typeof o=="function"||typeof l.getSnapshotBeforeUpdate=="function";a||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(b!==B||w!==e)&&Y1(fe,l,B,e),fc=!1;var r=fe.memoizedState;l.state=r,hp(fe,B,l,H),w=fe.memoizedState,b!==B||r!==w||tu.current||fc?(typeof o=="function"&&(Id(fe,t,o,B),w=fe.memoizedState),(b=fc||G1(fe,t,b,B,r,w,e))?(a||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(fe.flags|=4)):(typeof l.componentDidMount=="function"&&(fe.flags|=4),fe.memoizedProps=B,fe.memoizedState=w),l.props=B,l.state=w,l.context=e,B=b):(typeof l.componentDidMount=="function"&&(fe.flags|=4),B=!1)}else{l=fe.stateNode,Lb(K,fe),b=fe.memoizedProps,e=fe.type===fe.elementType?b:lf(fe.type,b),l.props=e,a=fe.pendingProps,r=l.context,w=t.contextType,typeof w=="object"&&w!==null?w=Fu(w):(w=ru(t)?Kc:Al.current,w=Kh(fe,w));var n=t.getDerivedStateFromProps;(o=typeof n=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(b!==a||r!==w)&&Y1(fe,l,B,w),fc=!1,r=fe.memoizedState,l.state=r,hp(fe,B,l,H);var c=fe.memoizedState;b!==a||r!==c||tu.current||fc?(typeof n=="function"&&(Id(fe,t,n,B),c=fe.memoizedState),(e=fc||G1(fe,t,e,B,r,c,w))?(o||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(B,c,w),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(B,c,w)),typeof l.componentDidUpdate=="function"&&(fe.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(fe.flags|=256)):(typeof l.componentDidUpdate!="function"||b===K.memoizedProps&&r===K.memoizedState||(fe.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||b===K.memoizedProps&&r===K.memoizedState||(fe.flags|=256),fe.memoizedProps=B,fe.memoizedState=c),l.props=B,l.state=c,l.context=w,B=e):(typeof l.componentDidUpdate!="function"||b===K.memoizedProps&&r===K.memoizedState||(fe.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||b===K.memoizedProps&&r===K.memoizedState||(fe.flags|=256),B=!1)}return Rg(K,fe,t,B,d,H)}function Rg(K,fe,t,B,H,d){Yb(K,fe);var l=(fe.flags&64)!==0;if(!B&&!l)return H&&N1(fe,t,!1),Xf(K,fe,d);B=fe.stateNode,UT.current=fe;var b=l&&typeof t.getDerivedStateFromError!="function"?null:B.render();return fe.flags|=1,K!==null&&l?(fe.child=zd(fe,K.child,null,d),fe.child=zd(fe,null,b,d)):eu(K,fe,b,d),fe.memoizedState=B.state,H&&N1(fe,t,!0),fe.child}function ex(K){var fe=K.stateNode;fe.pendingContext?O1(K,fe.pendingContext,fe.pendingContext!==fe.context):fe.context&&O1(K,fe.context,!1),Cg(K,fe.containerInfo)}var ld={dehydrated:null,retryLane:0};function tx(K,fe,t){var B=fe.pendingProps,H=$o.current,d=!1,l;return(l=(fe.flags&64)!==0)||(l=K!==null&&K.memoizedState===null?!1:(H&2)!==0),l?(d=!0,fe.flags&=-65):K!==null&&K.memoizedState===null||B.fallback===void 0||B.unstable_avoidThisFallback===!0||(H|=1),qo($o,H&1),K===null?(B.fallback!==void 0&&Lg(fe),K=B.children,H=B.fallback,d?(K=rx(fe,K,H,t),fe.child.memoizedState={baseLanes:t},fe.memoizedState=ld,K):typeof B.unstable_expectedLoadTime=="number"?(K=rx(fe,K,H,t),fe.child.memoizedState={baseLanes:t},fe.memoizedState=ld,fe.lanes=33554432,K):(t=By({mode:"visible",children:K},fe.mode,t,null),t.return=fe,fe.child=t)):K.memoizedState!==null?d?(B=ax(K,fe,B.children,B.fallback,t),d=fe.child,H=K.child.memoizedState,d.memoizedState=H===null?{baseLanes:t}:{baseLanes:H.baseLanes|t},d.childLanes=K.childLanes&~t,fe.memoizedState=ld,B):(t=nx(K,fe,B.children,t),fe.memoizedState=null,t):d?(B=ax(K,fe,B.children,B.fallback,t),d=fe.child,H=K.child.memoizedState,d.memoizedState=H===null?{baseLanes:t}:{baseLanes:H.baseLanes|t},d.childLanes=K.childLanes&~t,fe.memoizedState=ld,B):(t=nx(K,fe,B.children,t),fe.memoizedState=null,t)}function rx(K,fe,t,B){var H=K.mode,d=K.child;return fe={mode:"hidden",children:fe},(H&2)===0&&d!==null?(d.childLanes=0,d.pendingProps=fe):d=By(fe,H,0,null),t=jh(t,H,B,null),d.return=K,t.return=K,d.sibling=t,K.child=d,t}function nx(K,fe,t,B){var H=K.child;return K=H.sibling,t=kc(H,{mode:"visible",children:t}),(fe.mode&2)===0&&(t.lanes=B),t.return=fe,t.sibling=null,K!==null&&(K.nextEffect=null,K.flags=8,fe.firstEffect=fe.lastEffect=K),fe.child=t}function ax(K,fe,t,B,H){var d=fe.mode,l=K.child;K=l.sibling;var b={mode:"hidden",children:t};return(d&2)===0&&fe.child!==l?(t=fe.child,t.childLanes=0,t.pendingProps=b,l=t.lastEffect,l!==null?(fe.firstEffect=t.firstEffect,fe.lastEffect=l,l.nextEffect=null):fe.firstEffect=fe.lastEffect=null):t=kc(l,b),K!==null?B=kc(K,B):(B=jh(B,d,H,null),B.flags|=2),B.return=fe,t.return=fe,t.sibling=B,fe.child=t,B}function ix(K,fe){K.lanes|=fe;var t=K.alternate;t!==null&&(t.lanes|=fe),Cb(K.return,fe)}function tg(K,fe,t,B,H,d){var l=K.memoizedState;l===null?K.memoizedState={isBackwards:fe,rendering:null,renderingStartTime:0,last:B,tail:t,tailMode:H,lastEffect:d}:(l.isBackwards=fe,l.rendering=null,l.renderingStartTime=0,l.last=B,l.tail=t,l.tailMode=H,l.lastEffect=d)}function ox(K,fe,t){var B=fe.pendingProps,H=B.revealOrder,d=B.tail;if(eu(K,fe,B.children,t),B=$o.current,(B&2)!==0)B=B&1|2,fe.flags|=64;else{if(K!==null&&(K.flags&64)!==0)e:for(K=fe.child;K!==null;){if(K.tag===13)K.memoizedState!==null&&ix(K,t);else if(K.tag===19)ix(K,t);else if(K.child!==null){K.child.return=K,K=K.child;continue}if(K===fe)break e;for(;K.sibling===null;){if(K.return===null||K.return===fe)break e;K=K.return}K.sibling.return=K.return,K=K.sibling}B&=1}if(qo($o,B),(fe.mode&2)===0)fe.memoizedState=null;else switch(H){case"forwards":for(t=fe.child,H=null;t!==null;)K=t.alternate,K!==null&&Fd(K)===null&&(H=t),t=t.sibling;t=H,t===null?(H=fe.child,fe.child=null):(H=t.sibling,t.sibling=null),tg(fe,!1,H,t,d,fe.lastEffect);break;case"backwards":for(t=null,H=fe.child,fe.child=null;H!==null;){if(K=H.alternate,K!==null&&Fd(K)===null){fe.child=H;break}K=H.sibling,H.sibling=t,t=H,H=K}tg(fe,!0,t,null,d,fe.lastEffect);break;case"together":tg(fe,!1,null,null,void 0,fe.lastEffect);break;default:fe.memoizedState=null}return fe.child}function Xf(K,fe,t){if(K!==null&&(fe.dependencies=K.dependencies),_p|=fe.lanes,(t&fe.childLanes)!==0){if(K!==null&&fe.child!==K.child)throw Error(Ca(153));if(fe.child!==null){for(K=fe.child,t=kc(K,K.pendingProps),fe.child=t,t.return=fe;K.sibling!==null;)K=K.sibling,t=t.sibling=kc(K,K.pendingProps),t.return=fe;t.sibling=null}return fe.child}return null}var Wb,Ig,Xb,jb;Wb=function(K,fe){for(var t=fe.child;t!==null;){if(t.tag===5||t.tag===6)K.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===fe)break;for(;t.sibling===null;){if(t.return===null||t.return===fe)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Ig=function(){};Xb=function(K,fe,t,B){var H=K.memoizedProps;if(H!==B){K=fe.stateNode,Xc(Df.current);var d=null;switch(t){case"input":H=sg(K,H),B=sg(K,B),d=[];break;case"option":H=fg(K,H),B=fg(K,B),d=[];break;case"select":H=Oo({},H,{value:void 0}),B=Oo({},B,{value:void 0}),d=[];break;case"textarea":H=cg(K,H),B=cg(K,B),d=[];break;default:typeof H.onClick!="function"&&typeof B.onClick=="function"&&(K.onclick=Ed)}pg(t,B);var l;t=null;for(e in H)if(!B.hasOwnProperty(e)&&H.hasOwnProperty(e)&&H[e]!=null)if(e==="style"){var b=H[e];for(l in b)b.hasOwnProperty(l)&&(t||(t={}),t[l]="")}else e!=="dangerouslySetInnerHTML"&&e!=="children"&&e!=="suppressContentEditableWarning"&&e!=="suppressHydrationWarning"&&e!=="autoFocus"&&(rp.hasOwnProperty(e)?d||(d=[]):(d=d||[]).push(e,null));for(e in B){var w=B[e];if(b=H!=null?H[e]:void 0,B.hasOwnProperty(e)&&w!==b&&(w!=null||b!=null))if(e==="style")if(b){for(l in b)!b.hasOwnProperty(l)||w&&w.hasOwnProperty(l)||(t||(t={}),t[l]="");for(l in w)w.hasOwnProperty(l)&&b[l]!==w[l]&&(t||(t={}),t[l]=w[l])}else t||(d||(d=[]),d.push(e,t)),t=w;else e==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,b=b?b.__html:void 0,w!=null&&b!==w&&(d=d||[]).push(e,w)):e==="children"?typeof w!="string"&&typeof w!="number"||(d=d||[]).push(e,""+w):e!=="suppressContentEditableWarning"&&e!=="suppressHydrationWarning"&&(rp.hasOwnProperty(e)?(w!=null&&e==="onScroll"&&Do("scroll",K),d||b===w||(d=[])):typeof w=="object"&&w!==null&&w.$$typeof===iy?w.toString():(d=d||[]).push(e,w))}t&&(d=d||[]).push("style",t);var e=d;(fe.updateQueue=e)&&(fe.flags|=4)}};jb=function(K,fe,t,B){t!==B&&(fe.flags|=4)};function Ov(K,fe){if(!Rf)switch(K.tailMode){case"hidden":fe=K.tail;for(var t=null;fe!==null;)fe.alternate!==null&&(t=fe),fe=fe.sibling;t===null?K.tail=null:t.sibling=null;break;case"collapsed":t=K.tail;for(var B=null;t!==null;)t.alternate!==null&&(B=t),t=t.sibling;B===null?fe||K.tail===null?K.tail=null:K.tail.sibling=null:B.sibling=null}}function HT(K,fe,t){var B=fe.pendingProps;switch(fe.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return ru(fe.type)&&Ld(),null;case 3:return Qh(),Ro(tu),Ro(Al),ky(),B=fe.stateNode,B.pendingContext&&(B.context=B.pendingContext,B.pendingContext=null),(K===null||K.child===null)&&(sd(fe)?fe.flags|=4:B.hydrate||(fe.flags|=256)),Ig(fe),null;case 5:Sy(fe);var H=Xc(pp.current);if(t=fe.type,K!==null&&fe.stateNode!=null)Xb(K,fe,t,B,H),K.ref!==fe.ref&&(fe.flags|=128);else{if(!B){if(fe.stateNode===null)throw Error(Ca(166));return null}if(K=Xc(Df.current),sd(fe)){B=fe.stateNode,t=fe.type;var d=fe.memoizedProps;switch(B[vc]=fe,B[Cd]=d,t){case"dialog":Do("cancel",B),Do("close",B);break;case"iframe":case"object":case"embed":Do("load",B);break;case"video":case"audio":for(K=0;K<Hv.length;K++)Do(Hv[K],B);break;case"source":Do("error",B);break;case"img":case"image":case"link":Do("error",B),Do("load",B);break;case"details":Do("toggle",B);break;case"input":o1(B,d),Do("invalid",B);break;case"select":B._wrapperState={wasMultiple:!!d.multiple},Do("invalid",B);break;case"textarea":l1(B,d),Do("invalid",B)}pg(t,d),K=null;for(var l in d)d.hasOwnProperty(l)&&(H=d[l],l==="children"?typeof H=="string"?B.textContent!==H&&(K=["children",H]):typeof H=="number"&&B.textContent!==""+H&&(K=["children",""+H]):rp.hasOwnProperty(l)&&H!=null&&l==="onScroll"&&Do("scroll",B));switch(t){case"input":td(B),s1(B,d,!0);break;case"textarea":td(B),u1(B);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(B.onclick=Ed)}B=K,fe.updateQueue=B,B!==null&&(fe.flags|=4)}else{switch(l=H.nodeType===9?H:H.ownerDocument,K===hg.html&&(K=Ux(t)),K===hg.html?t==="script"?(K=l.createElement("div"),K.innerHTML="<script><\/script>",K=K.removeChild(K.firstChild)):typeof B.is=="string"?K=l.createElement(t,{is:B.is}):(K=l.createElement(t),t==="select"&&(l=K,B.multiple?l.multiple=!0:B.size&&(l.size=B.size))):K=l.createElementNS(K,t),K[vc]=fe,K[Cd]=B,Wb(K,fe,!1,!1),fe.stateNode=K,l=dg(t,B),t){case"dialog":Do("cancel",K),Do("close",K),H=B;break;case"iframe":case"object":case"embed":Do("load",K),H=B;break;case"video":case"audio":for(H=0;H<Hv.length;H++)Do(Hv[H],K);H=B;break;case"source":Do("error",K),H=B;break;case"img":case"image":case"link":Do("error",K),Do("load",K),H=B;break;case"details":Do("toggle",K),H=B;break;case"input":o1(K,B),H=sg(K,B),Do("invalid",K);break;case"option":H=fg(K,B);break;case"select":K._wrapperState={wasMultiple:!!B.multiple},H=Oo({},B,{value:void 0}),Do("invalid",K);break;case"textarea":l1(K,B),H=cg(K,B),Do("invalid",K);break;default:H=B}pg(t,H);var b=H;for(d in b)if(b.hasOwnProperty(d)){var w=b[d];d==="style"?Gx(K,w):d==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&Hx(K,w)):d==="children"?typeof w=="string"?(t!=="textarea"||w!=="")&&np(K,w):typeof w=="number"&&np(K,""+w):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(rp.hasOwnProperty(d)?w!=null&&d==="onScroll"&&Do("scroll",K):w!=null&&qg(K,d,w,l))}switch(t){case"input":td(K),s1(K,B,!1);break;case"textarea":td(K),u1(K);break;case"option":B.value!=null&&K.setAttribute("value",""+Tc(B.value));break;case"select":K.multiple=!!B.multiple,d=B.value,d!=null?Bh(K,!!B.multiple,d,!1):B.defaultValue!=null&&Bh(K,!!B.multiple,B.defaultValue,!0);break;default:typeof H.onClick=="function"&&(K.onclick=Ed)}bb(t,B)&&(fe.flags|=4)}fe.ref!==null&&(fe.flags|=128)}return null;case 6:if(K&&fe.stateNode!=null)jb(K,fe,K.memoizedProps,B);else{if(typeof B!="string"&&fe.stateNode===null)throw Error(Ca(166));t=Xc(pp.current),Xc(Df.current),sd(fe)?(B=fe.stateNode,t=fe.memoizedProps,B[vc]=fe,B.nodeValue!==t&&(fe.flags|=4)):(B=(t.nodeType===9?t:t.ownerDocument).createTextNode(B),B[vc]=fe,fe.stateNode=B)}return null;case 13:return Ro($o),B=fe.memoizedState,(fe.flags&64)!==0?(fe.lanes=t,fe):(B=B!==null,t=!1,K===null?fe.memoizedProps.fallback!==void 0&&sd(fe):t=K.memoizedState!==null,B&&!t&&(fe.mode&2)!==0&&(K===null&&fe.memoizedProps.unstable_avoidThisFallback!==!0||($o.current&1)!==0?al===0&&(al=3):((al===0||al===3)&&(al=4),Fl===null||(_p&134217727)===0&&(nv&134217727)===0||Wh(Fl,Tl))),(B||t)&&(fe.flags|=4),null);case 4:return Qh(),Ig(fe),K===null&&yb(fe.stateNode.containerInfo),null;case 10:return Ay(fe),null;case 17:return ru(fe.type)&&Ld(),null;case 19:if(Ro($o),B=fe.memoizedState,B===null)return null;if(d=(fe.flags&64)!==0,l=B.rendering,l===null)if(d)Ov(B,!1);else{if(al!==0||K!==null&&(K.flags&64)!==0)for(K=fe.child;K!==null;){if(l=Fd(K),l!==null){for(fe.flags|=64,Ov(B,!1),d=l.updateQueue,d!==null&&(fe.updateQueue=d,fe.flags|=4),B.lastEffect===null&&(fe.firstEffect=null),fe.lastEffect=B.lastEffect,B=t,t=fe.child;t!==null;)d=t,K=B,d.flags&=2,d.nextEffect=null,d.firstEffect=null,d.lastEffect=null,l=d.alternate,l===null?(d.childLanes=0,d.lanes=K,d.child=null,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=l.childLanes,d.lanes=l.lanes,d.child=l.child,d.memoizedProps=l.memoizedProps,d.memoizedState=l.memoizedState,d.updateQueue=l.updateQueue,d.type=l.type,K=l.dependencies,d.dependencies=K===null?null:{lanes:K.lanes,firstContext:K.firstContext}),t=t.sibling;return qo($o,$o.current&1|2),fe.child}K=K.sibling}B.tail!==null&&wl()>Ug&&(fe.flags|=64,d=!0,Ov(B,!1),fe.lanes=33554432)}else{if(!d)if(K=Fd(l),K!==null){if(fe.flags|=64,d=!0,t=K.updateQueue,t!==null&&(fe.updateQueue=t,fe.flags|=4),Ov(B,!0),B.tail===null&&B.tailMode==="hidden"&&!l.alternate&&!Rf)return fe=fe.lastEffect=B.lastEffect,fe!==null&&(fe.nextEffect=null),null}else 2*wl()-B.renderingStartTime>Ug&&t!==1073741824&&(fe.flags|=64,d=!0,Ov(B,!1),fe.lanes=33554432);B.isBackwards?(l.sibling=fe.child,fe.child=l):(t=B.last,t!==null?t.sibling=l:fe.child=l,B.last=l)}return B.tail!==null?(t=B.tail,B.rendering=t,B.tail=t.sibling,B.lastEffect=fe.lastEffect,B.renderingStartTime=wl(),t.sibling=null,fe=$o.current,qo($o,d?fe&1|2:fe&1),t):null;case 23:case 24:return Oy(),K!==null&&K.memoizedState!==null!=(fe.memoizedState!==null)&&B.mode!=="unstable-defer-without-hiding"&&(fe.flags|=4),null}throw Error(Ca(156,fe.tag))}function VT(K){switch(K.tag){case 1:ru(K.type)&&Ld();var fe=K.flags;return fe&4096?(K.flags=fe&-4097|64,K):null;case 3:if(Qh(),Ro(tu),Ro(Al),ky(),fe=K.flags,(fe&64)!==0)throw Error(Ca(285));return K.flags=fe&-4097|64,K;case 5:return Sy(K),null;case 13:return Ro($o),fe=K.flags,fe&4096?(K.flags=fe&-4097|64,K):null;case 19:return Ro($o),null;case 4:return Qh(),null;case 10:return Ay(K),null;case 23:case 24:return Oy(),null;default:return null}}function Ry(K,fe){try{var t="",B=fe;do t+=w3(B),B=B.return;while(B);var H=t}catch(d){H=`
Error generating stack: `+d.message+`
`+d.stack}return{value:K,source:fe,stack:H}}function zg(K,fe){try{console.error(fe.value)}catch(t){setTimeout(function(){throw t})}}var GT=typeof WeakMap=="function"?WeakMap:Map;function Zb(K,fe,t){t=mc(-1,t),t.tag=3,t.payload={element:null};var B=fe.value;return t.callback=function(){Gd||(Gd=!0,Hg=B),zg(K,fe)},t}function Kb(K,fe,t){t=mc(-1,t),t.tag=3;var B=K.type.getDerivedStateFromError;if(typeof B=="function"){var H=fe.value;t.payload=function(){return zg(K,fe),B(H)}}var d=K.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(t.callback=function(){typeof B!="function"&&(Pf===null?Pf=new Set([this]):Pf.add(this),zg(K,fe));var l=fe.stack;this.componentDidCatch(fe.value,{componentStack:l!==null?l:""})}),t}var YT=typeof WeakSet=="function"?WeakSet:Set;function sx(K){var fe=K.ref;if(fe!==null)if(typeof fe=="function")try{fe(null)}catch(t){wc(K,t)}else fe.current=null}function WT(K,fe){switch(fe.tag){case 0:case 11:case 15:case 22:return;case 1:if(fe.flags&256&&K!==null){var t=K.memoizedProps,B=K.memoizedState;K=fe.stateNode,fe=K.getSnapshotBeforeUpdate(fe.elementType===fe.type?t:lf(fe.type,t),B),K.__reactInternalSnapshotBeforeUpdate=fe}return;case 3:fe.flags&256&&by(fe.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(Ca(163))}function XT(K,fe,t){switch(t.tag){case 0:case 11:case 15:case 22:if(fe=t.updateQueue,fe=fe!==null?fe.lastEffect:null,fe!==null){K=fe=fe.next;do{if((K.tag&3)===3){var B=K.create;K.destroy=B()}K=K.next}while(K!==fe)}if(fe=t.updateQueue,fe=fe!==null?fe.lastEffect:null,fe!==null){K=fe=fe.next;do{var H=K;B=H.next,H=H.tag,(H&4)!==0&&(H&1)!==0&&(a2(t,K),e5(t,K)),K=B}while(K!==fe)}return;case 1:K=t.stateNode,t.flags&4&&(fe===null?K.componentDidMount():(B=t.elementType===t.type?fe.memoizedProps:lf(t.type,fe.memoizedProps),K.componentDidUpdate(B,fe.memoizedState,K.__reactInternalSnapshotBeforeUpdate))),fe=t.updateQueue,fe!==null&&V1(t,fe,K);return;case 3:if(fe=t.updateQueue,fe!==null){if(K=null,t.child!==null)switch(t.child.tag){case 5:K=t.child.stateNode;break;case 1:K=t.child.stateNode}V1(t,fe,K)}return;case 5:K=t.stateNode,fe===null&&t.flags&4&&bb(t.type,t.memoizedProps)&&K.focus();return;case 6:return;case 4:return;case 12:return;case 13:t.memoizedState===null&&(t=t.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&qx(t))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(Ca(163))}function lx(K,fe){for(var t=K;;){if(t.tag===5){var B=t.stateNode;if(fe)B=B.style,typeof B.setProperty=="function"?B.setProperty("display","none","important"):B.display="none";else{B=t.stateNode;var H=t.memoizedProps.style;H=H!=null&&H.hasOwnProperty("display")?H.display:null,B.style.display=Vx("display",H)}}else if(t.tag===6)t.stateNode.nodeValue=fe?"":t.memoizedProps;else if((t.tag!==23&&t.tag!==24||t.memoizedState===null||t===K)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===K)break;for(;t.sibling===null;){if(t.return===null||t.return===K)return;t=t.return}t.sibling.return=t.return,t=t.sibling}}function ux(K,fe){if(Zc&&typeof Zc.onCommitFiberUnmount=="function")try{Zc.onCommitFiberUnmount(_y,fe)}catch{}switch(fe.tag){case 0:case 11:case 14:case 15:case 22:if(K=fe.updateQueue,K!==null&&(K=K.lastEffect,K!==null)){var t=K=K.next;do{var B=t,H=B.destroy;if(B=B.tag,H!==void 0)if((B&4)!==0)a2(fe,t);else{B=fe;try{H()}catch(d){wc(B,d)}}t=t.next}while(t!==K)}break;case 1:if(sx(fe),K=fe.stateNode,typeof K.componentWillUnmount=="function")try{K.props=fe.memoizedProps,K.state=fe.memoizedState,K.componentWillUnmount()}catch(d){wc(fe,d)}break;case 5:sx(fe);break;case 4:Jb(K,fe)}}function fx(K){K.alternate=null,K.child=null,K.dependencies=null,K.firstEffect=null,K.lastEffect=null,K.memoizedProps=null,K.memoizedState=null,K.pendingProps=null,K.return=null,K.updateQueue=null}function cx(K){return K.tag===5||K.tag===3||K.tag===4}function hx(K){e:{for(var fe=K.return;fe!==null;){if(cx(fe))break e;fe=fe.return}throw Error(Ca(160))}var t=fe;switch(fe=t.stateNode,t.tag){case 5:var B=!1;break;case 3:fe=fe.containerInfo,B=!0;break;case 4:fe=fe.containerInfo,B=!0;break;default:throw Error(Ca(161))}t.flags&16&&(np(fe,""),t.flags&=-17);e:t:for(t=K;;){for(;t.sibling===null;){if(t.return===null||cx(t.return)){t=null;break e}t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2)){t=t.stateNode;break e}}B?Fg(K,t,fe):Og(K,t,fe)}function Fg(K,fe,t){var B=K.tag,H=B===5||B===6;if(H)K=H?K.stateNode:K.stateNode.instance,fe?t.nodeType===8?t.parentNode.insertBefore(K,fe):t.insertBefore(K,fe):(t.nodeType===8?(fe=t.parentNode,fe.insertBefore(K,t)):(fe=t,fe.appendChild(K)),t=t._reactRootContainer,t!=null||fe.onclick!==null||(fe.onclick=Ed));else if(B!==4&&(K=K.child,K!==null))for(Fg(K,fe,t),K=K.sibling;K!==null;)Fg(K,fe,t),K=K.sibling}function Og(K,fe,t){var B=K.tag,H=B===5||B===6;if(H)K=H?K.stateNode:K.stateNode.instance,fe?t.insertBefore(K,fe):t.appendChild(K);else if(B!==4&&(K=K.child,K!==null))for(Og(K,fe,t),K=K.sibling;K!==null;)Og(K,fe,t),K=K.sibling}function Jb(K,fe){for(var t=fe,B=!1,H,d;;){if(!B){B=t.return;e:for(;;){if(B===null)throw Error(Ca(160));switch(H=B.stateNode,B.tag){case 5:d=!1;break e;case 3:H=H.containerInfo,d=!0;break e;case 4:H=H.containerInfo,d=!0;break e}B=B.return}B=!0}if(t.tag===5||t.tag===6){e:for(var l=K,b=t,w=b;;)if(ux(l,w),w.child!==null&&w.tag!==4)w.child.return=w,w=w.child;else{if(w===b)break e;for(;w.sibling===null;){if(w.return===null||w.return===b)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}d?(l=H,b=t.stateNode,l.nodeType===8?l.parentNode.removeChild(b):l.removeChild(b)):H.removeChild(t.stateNode)}else if(t.tag===4){if(t.child!==null){H=t.stateNode.containerInfo,d=!0,t.child.return=t,t=t.child;continue}}else if(ux(K,t),t.child!==null){t.child.return=t,t=t.child;continue}if(t===fe)break;for(;t.sibling===null;){if(t.return===null||t.return===fe)return;t=t.return,t.tag===4&&(B=!1)}t.sibling.return=t.return,t=t.sibling}}function rg(K,fe){switch(fe.tag){case 0:case 11:case 14:case 15:case 22:var t=fe.updateQueue;if(t=t!==null?t.lastEffect:null,t!==null){var B=t=t.next;do(B.tag&3)===3&&(K=B.destroy,B.destroy=void 0,K!==void 0&&K()),B=B.next;while(B!==t)}return;case 1:return;case 5:if(t=fe.stateNode,t!=null){B=fe.memoizedProps;var H=K!==null?K.memoizedProps:B;K=fe.type;var d=fe.updateQueue;if(fe.updateQueue=null,d!==null){for(t[Cd]=B,K==="input"&&B.type==="radio"&&B.name!=null&&Nx(t,B),dg(K,H),fe=dg(K,B),H=0;H<d.length;H+=2){var l=d[H],b=d[H+1];l==="style"?Gx(t,b):l==="dangerouslySetInnerHTML"?Hx(t,b):l==="children"?np(t,b):qg(t,l,b,fe)}switch(K){case"input":lg(t,B);break;case"textarea":Bx(t,B);break;case"select":K=t._wrapperState.wasMultiple,t._wrapperState.wasMultiple=!!B.multiple,d=B.value,d!=null?Bh(t,!!B.multiple,d,!1):K!==!!B.multiple&&(B.defaultValue!=null?Bh(t,!!B.multiple,B.defaultValue,!0):Bh(t,!!B.multiple,B.multiple?[]:"",!1))}}}return;case 6:if(fe.stateNode===null)throw Error(Ca(162));fe.stateNode.nodeValue=fe.memoizedProps;return;case 3:t=fe.stateNode,t.hydrate&&(t.hydrate=!1,qx(t.containerInfo));return;case 12:return;case 13:fe.memoizedState!==null&&(Fy=wl(),lx(fe.child,!0)),vx(fe);return;case 19:vx(fe);return;case 17:return;case 23:case 24:lx(fe,fe.memoizedState!==null);return}throw Error(Ca(163))}function vx(K){var fe=K.updateQueue;if(fe!==null){K.updateQueue=null;var t=K.stateNode;t===null&&(t=K.stateNode=new YT),fe.forEach(function(B){var H=n5.bind(null,K,B);t.has(B)||(t.add(B),B.then(H,H))})}}function jT(K,fe){return K!==null&&(K=K.memoizedState,K===null||K.dehydrated!==null)?(fe=fe.memoizedState,fe!==null&&fe.dehydrated===null):!1}var ZT=Math.ceil,Vd=qc.ReactCurrentDispatcher,Iy=qc.ReactCurrentOwner,ci=0,Fl=null,Cs=null,Tl=0,Qc=0,Ng=Ec(0),al=0,r0=null,rv=0,_p=0,nv=0,zy=0,Bg=null,Fy=0,Ug=1/0;function av(){Ug=wl()+500}var Ja=null,Gd=!1,Hg=null,Pf=null,Sc=!1,qv=null,Vv=90,Vg=[],Gg=[],jf=null,ep=0,Yg=null,md=-1,Yf=0,xd=0,tp=null,bd=!1;function yu(){return(ci&48)!==0?wl():md!==-1?md:md=wl()}function bc(K){if(K=K.mode,(K&2)===0)return 1;if((K&4)===0)return Jh()===99?1:2;if(Yf===0&&(Yf=rv),zT.transition!==0){xd!==0&&(xd=Bg!==null?Bg.pendingLanes:0),K=Yf;var fe=4186112&~xd;return fe&=-fe,fe===0&&(K=4186112&~K,fe=K&-K,fe===0&&(fe=8192)),fe}return K=Jh(),(ci&4)!==0&&K===98?K=Sd(12,Yf):(K=N3(K),K=Sd(K,Yf)),K}function _c(K,fe,t){if(50<ep)throw ep=0,Yg=null,Error(Ca(185));if(K=n0(K,fe),K===null)return null;Kd(K,fe,t),K===Fl&&(nv|=fe,al===4&&Wh(K,Tl));var B=Jh();fe===1?(ci&8)!==0&&(ci&48)===0?Wg(K):(Ou(K,t),ci===0&&(av(),If())):((ci&4)===0||B!==98&&B!==99||(jf===null?jf=new Set([K]):jf.add(K)),Ou(K,t)),Bg=K}function n0(K,fe){K.lanes|=fe;var t=K.alternate;for(t!==null&&(t.lanes|=fe),t=K,K=K.return;K!==null;)K.childLanes|=fe,t=K.alternate,t!==null&&(t.childLanes|=fe),t=K,K=K.return;return t.tag===3?t.stateNode:null}function Ou(K,fe){for(var t=K.callbackNode,B=K.suspendedLanes,H=K.pingedLanes,d=K.expirationTimes,l=K.pendingLanes;0<l;){var b=31-Ac(l),w=1<<b,e=d[b];if(e===-1){if((w&B)===0||(w&H)!==0){e=fe,Lh(w);var o=Mo;d[b]=10<=o?e+250:6<=o?e+5e3:-1}}else e<=fe&&(K.expiredLanes|=w);l&=~w}if(B=sp(K,K===Fl?Tl:0),fe=Mo,B===0)t!==null&&(t!==Q0&&Sg(t),K.callbackNode=null,K.callbackPriority=0);else{if(t!==null){if(K.callbackPriority===fe)return;t!==Q0&&Sg(t)}fe===15?(t=Wg.bind(null,K),Gf===null?(Gf=[t],yd=wy(e0,Eb)):Gf.push(t),t=Q0):fe===14?t=cp(99,Wg.bind(null,K)):(t=B3(fe),t=cp(t,Qb.bind(null,K))),K.callbackPriority=fe,K.callbackNode=t}}function Qb(K){if(md=-1,xd=Yf=0,(ci&48)!==0)throw Error(Ca(327));var fe=K.callbackNode;if(Cc()&&K.callbackNode!==fe)return null;var t=sp(K,K===Fl?Tl:0);if(t===0)return null;var B=t,H=ci;ci|=16;var d=t2();(Fl!==K||Tl!==B)&&(av(),Xh(K,B));do try{QT();break}catch(b){e2(K,b)}while(1);if(Ty(),Vd.current=d,ci=H,Cs!==null?B=0:(Fl=null,Tl=0,B=al),(rv&nv)!==0)Xh(K,0);else if(B!==0){if(B===2&&(ci|=64,K.hydrate&&(K.hydrate=!1,by(K.containerInfo)),t=ob(K),t!==0&&(B=Gv(K,t))),B===1)throw fe=r0,Xh(K,0),Wh(K,t),Ou(K,wl()),fe;switch(K.finishedWork=K.current.alternate,K.finishedLanes=t,B){case 0:case 1:throw Error(Ca(345));case 2:Vc(K);break;case 3:if(Wh(K,t),(t&62914560)===t&&(B=Fy+500-wl(),10<B)){if(sp(K,0)!==0)break;if(H=K.suspendedLanes,(H&t)!==t){yu(),K.pingedLanes|=K.suspendedLanes&H;break}K.timeoutHandle=I1(Vc.bind(null,K),B);break}Vc(K);break;case 4:if(Wh(K,t),(t&4186112)===t)break;for(B=K.eventTimes,H=-1;0<t;){var l=31-Ac(t);d=1<<l,l=B[l],l>H&&(H=l),t&=~d}if(t=H,t=wl()-t,t=(120>t?120:480>t?480:1080>t?1080:1920>t?1920:3e3>t?3e3:4320>t?4320:1960*ZT(t/1960))-t,10<t){K.timeoutHandle=I1(Vc.bind(null,K),t);break}Vc(K);break;case 5:Vc(K);break;default:throw Error(Ca(329))}}return Ou(K,wl()),K.callbackNode===fe?Qb.bind(null,K):null}function Wh(K,fe){for(fe&=~zy,fe&=~nv,K.suspendedLanes|=fe,K.pingedLanes&=~fe,K=K.expirationTimes;0<fe;){var t=31-Ac(fe),B=1<<t;K[t]=-1,fe&=~B}}function Wg(K){if((ci&48)!==0)throw Error(Ca(327));if(Cc(),K===Fl&&(K.expiredLanes&Tl)!==0){var fe=Tl,t=Gv(K,fe);(rv&nv)!==0&&(fe=sp(K,fe),t=Gv(K,fe))}else fe=sp(K,0),t=Gv(K,fe);if(K.tag!==0&&t===2&&(ci|=64,K.hydrate&&(K.hydrate=!1,by(K.containerInfo)),fe=ob(K),fe!==0&&(t=Gv(K,fe))),t===1)throw t=r0,Xh(K,0),Wh(K,fe),Ou(K,wl()),t;return K.finishedWork=K.current.alternate,K.finishedLanes=fe,Vc(K),Ou(K,wl()),null}function KT(){if(jf!==null){var K=jf;jf=null,K.forEach(function(fe){fe.expiredLanes|=24&fe.pendingLanes,Ou(fe,wl())})}If()}function $b(K,fe){var t=ci;ci|=1;try{return K(fe)}finally{ci=t,ci===0&&(av(),If())}}function qb(K,fe){var t=ci;ci&=-2,ci|=8;try{return K(fe)}finally{ci=t,ci===0&&(av(),If())}}function ud(K,fe){qo(Ng,Qc),Qc|=fe,rv|=fe}function Oy(){Qc=Ng.current,Ro(Ng)}function Xh(K,fe){K.finishedWork=null,K.finishedLanes=0;var t=K.timeoutHandle;if(t!==-1&&(K.timeoutHandle=-1,CT(t)),Cs!==null)for(t=Cs.return;t!==null;){var B=t;switch(B.tag){case 1:B=B.type.childContextTypes,B!=null&&Ld();break;case 3:Qh(),Ro(tu),Ro(Al),ky();break;case 5:Sy(B);break;case 4:Qh();break;case 13:Ro($o);break;case 19:Ro($o);break;case 10:Ay(B);break;case 23:case 24:Oy()}t=t.return}Fl=K,Cs=kc(K.current,null),Tl=Qc=rv=fe,al=0,r0=null,zy=nv=_p=0}function e2(K,fe){do{var t=Cs;try{if(Ty(),Qv.current=Hd,Od){for(var B=ls.memoizedState;B!==null;){var H=B.queue;H!==null&&(H.pending=null),B=B.next}Od=!1}if(dp=0,nl=_l=ls=null,$v=!1,Iy.current=null,t===null||t.return===null){al=1,r0=fe,Cs=null;break}e:{var d=K,l=t.return,b=t,w=fe;if(fe=Tl,b.flags|=2048,b.firstEffect=b.lastEffect=null,w!==null&&typeof w=="object"&&typeof w.then=="function"){var e=w;if((b.mode&2)===0){var o=b.alternate;o?(b.updateQueue=o.updateQueue,b.memoizedState=o.memoizedState,b.lanes=o.lanes):(b.updateQueue=null,b.memoizedState=null)}var a=($o.current&1)!==0,r=l;do{var n;if(n=r.tag===13){var c=r.memoizedState;if(c!==null)n=c.dehydrated!==null;else{var s=r.memoizedProps;n=s.fallback===void 0?!1:s.unstable_avoidThisFallback!==!0?!0:!a}}if(n){var i=r.updateQueue;if(i===null){var v=new Set;v.add(e),r.updateQueue=v}else i.add(e);if((r.mode&2)===0){if(r.flags|=64,b.flags|=16384,b.flags&=-2981,b.tag===1)if(b.alternate===null)b.tag=17;else{var u=mc(-1,1);u.tag=2,xc(b,u)}b.lanes|=1;break e}w=void 0,b=fe;var g=d.pingCache;if(g===null?(g=d.pingCache=new GT,w=new Set,g.set(e,w)):(w=g.get(e),w===void 0&&(w=new Set,g.set(e,w))),!w.has(b)){w.add(b);var h=r5.bind(null,d,e,b);e.then(h,h)}r.flags|=4096,r.lanes=fe;break e}r=r.return}while(r!==null);w=Error((Nh(b.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}al!==5&&(al=2),w=Ry(w,b),r=l;do{switch(r.tag){case 3:d=w,r.flags|=4096,fe&=-fe,r.lanes|=fe;var y=Zb(r,d,fe);H1(r,y);break e;case 1:d=w;var p=r.type,A=r.stateNode;if((r.flags&64)===0&&(typeof p.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Pf===null||!Pf.has(A)))){r.flags|=4096,fe&=-fe,r.lanes|=fe;var m=Kb(r,d,fe);H1(r,m);break e}}r=r.return}while(r!==null)}n2(t)}catch(M){fe=M,Cs===t&&t!==null&&(Cs=t=t.return);continue}break}while(1)}function t2(){var K=Vd.current;return Vd.current=Hd,K===null?Hd:K}function Gv(K,fe){var t=ci;ci|=16;var B=t2();Fl===K&&Tl===fe||Xh(K,fe);do try{JT();break}catch(H){e2(K,H)}while(1);if(Ty(),ci=t,Vd.current=B,Cs!==null)throw Error(Ca(261));return Fl=null,Tl=0,al}function JT(){for(;Cs!==null;)r2(Cs)}function QT(){for(;Cs!==null&&!DT();)r2(Cs)}function r2(K){var fe=i2(K.alternate,K,Qc);K.memoizedProps=K.pendingProps,fe===null?n2(K):Cs=fe,Iy.current=null}function n2(K){var fe=K;do{var t=fe.alternate;if(K=fe.return,(fe.flags&2048)===0){if(t=HT(t,fe,Qc),t!==null){Cs=t;return}if(t=fe,t.tag!==24&&t.tag!==23||t.memoizedState===null||(Qc&1073741824)!==0||(t.mode&4)===0){for(var B=0,H=t.child;H!==null;)B|=H.lanes|H.childLanes,H=H.sibling;t.childLanes=B}K!==null&&(K.flags&2048)===0&&(K.firstEffect===null&&(K.firstEffect=fe.firstEffect),fe.lastEffect!==null&&(K.lastEffect!==null&&(K.lastEffect.nextEffect=fe.firstEffect),K.lastEffect=fe.lastEffect),1<fe.flags&&(K.lastEffect!==null?K.lastEffect.nextEffect=fe:K.firstEffect=fe,K.lastEffect=fe))}else{if(t=VT(fe),t!==null){t.flags&=2047,Cs=t;return}K!==null&&(K.firstEffect=K.lastEffect=null,K.flags|=2048)}if(fe=fe.sibling,fe!==null){Cs=fe;return}Cs=fe=K}while(fe!==null);al===0&&(al=5)}function Vc(K){var fe=Jh();return Jc(99,$T.bind(null,K,fe)),null}function $T(K,fe){do Cc();while(qv!==null);if((ci&48)!==0)throw Error(Ca(327));var t=K.finishedWork;if(t===null)return null;if(K.finishedWork=null,K.finishedLanes=0,t===K.current)throw Error(Ca(177));K.callbackNode=null;var B=t.lanes|t.childLanes,H=B,d=K.pendingLanes&~H;K.pendingLanes=H,K.suspendedLanes=0,K.pingedLanes=0,K.expiredLanes&=H,K.mutableReadLanes&=H,K.entangledLanes&=H,H=K.entanglements;for(var l=K.eventTimes,b=K.expirationTimes;0<d;){var w=31-Ac(d),e=1<<w;H[w]=0,l[w]=-1,b[w]=-1,d&=~e}if(jf!==null&&(B&24)===0&&jf.has(K)&&jf.delete(K),K===Fl&&(Cs=Fl=null,Tl=0),1<t.flags?t.lastEffect!==null?(t.lastEffect.nextEffect=t,B=t.firstEffect):B=t:B=t.firstEffect,B!==null){if(H=ci,ci|=32,Iy.current=null,Z0=vd,l=k1(),_g(l)){if("selectionStart"in l)b={start:l.selectionStart,end:l.selectionEnd};else e:if(b=(b=l.ownerDocument)&&b.defaultView||window,(e=b.getSelection&&b.getSelection())&&e.rangeCount!==0){b=e.anchorNode,d=e.anchorOffset,w=e.focusNode,e=e.focusOffset;try{b.nodeType,w.nodeType}catch{b=null;break e}var o=0,a=-1,r=-1,n=0,c=0,s=l,i=null;t:for(;;){for(var v;s!==b||d!==0&&s.nodeType!==3||(a=o+d),s!==w||e!==0&&s.nodeType!==3||(r=o+e),s.nodeType===3&&(o+=s.nodeValue.length),(v=s.firstChild)!==null;)i=s,s=v;for(;;){if(s===l)break t;if(i===b&&++n===d&&(a=o),i===w&&++c===e&&(r=o),(v=s.nextSibling)!==null)break;s=i,i=s.parentNode}s=v}b=a===-1||r===-1?null:{start:a,end:r}}else b=null;b=b||{start:0,end:0}}else b=null;K0={focusedElem:l,selectionRange:b},vd=!1,tp=null,bd=!1,Ja=B;do try{qT()}catch(M){if(Ja===null)throw Error(Ca(330));wc(Ja,M),Ja=Ja.nextEffect}while(Ja!==null);tp=null,Ja=B;do try{for(l=K;Ja!==null;){var u=Ja.flags;if(u&16&&np(Ja.stateNode,""),u&128){var g=Ja.alternate;if(g!==null){var h=g.ref;h!==null&&(typeof h=="function"?h(null):h.current=null)}}switch(u&1038){case 2:hx(Ja),Ja.flags&=-3;break;case 6:hx(Ja),Ja.flags&=-3,rg(Ja.alternate,Ja);break;case 1024:Ja.flags&=-1025;break;case 1028:Ja.flags&=-1025,rg(Ja.alternate,Ja);break;case 4:rg(Ja.alternate,Ja);break;case 8:b=Ja,Jb(l,b);var y=b.alternate;fx(b),y!==null&&fx(y)}Ja=Ja.nextEffect}}catch(M){if(Ja===null)throw Error(Ca(330));wc(Ja,M),Ja=Ja.nextEffect}while(Ja!==null);if(h=K0,g=k1(),u=h.focusedElem,l=h.selectionRange,g!==u&&u&&u.ownerDocument&&pb(u.ownerDocument.documentElement,u)){for(l!==null&&_g(u)&&(g=l.start,h=l.end,h===void 0&&(h=g),"selectionStart"in u?(u.selectionStart=g,u.selectionEnd=Math.min(h,u.value.length)):(h=(g=u.ownerDocument||document)&&g.defaultView||window,h.getSelection&&(h=h.getSelection(),b=u.textContent.length,y=Math.min(l.start,b),l=l.end===void 0?y:Math.min(l.end,b),!h.extend&&y>l&&(b=l,l=y,y=b),b=S1(u,y),d=S1(u,l),b&&d&&(h.rangeCount!==1||h.anchorNode!==b.node||h.anchorOffset!==b.offset||h.focusNode!==d.node||h.focusOffset!==d.offset)&&(g=g.createRange(),g.setStart(b.node,b.offset),h.removeAllRanges(),y>l?(h.addRange(g),h.extend(d.node,d.offset)):(g.setEnd(d.node,d.offset),h.addRange(g)))))),g=[],h=u;h=h.parentNode;)h.nodeType===1&&g.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<g.length;u++)h=g[u],h.element.scrollLeft=h.left,h.element.scrollTop=h.top}vd=!!Z0,K0=Z0=null,K.current=t,Ja=B;do try{for(u=K;Ja!==null;){var p=Ja.flags;if(p&36&&XT(u,Ja.alternate,Ja),p&128){g=void 0;var A=Ja.ref;if(A!==null){var m=Ja.stateNode;switch(Ja.tag){case 5:g=m;break;default:g=m}typeof A=="function"?A(g):A.current=g}}Ja=Ja.nextEffect}}catch(M){if(Ja===null)throw Error(Ca(330));wc(Ja,M),Ja=Ja.nextEffect}while(Ja!==null);Ja=null,IT(),ci=H}else K.current=t;if(Sc)Sc=!1,qv=K,Vv=fe;else for(Ja=B;Ja!==null;)fe=Ja.nextEffect,Ja.nextEffect=null,Ja.flags&8&&(p=Ja,p.sibling=null,p.stateNode=null),Ja=fe;if(B=K.pendingLanes,B===0&&(Pf=null),B===1?K===Yg?ep++:(ep=0,Yg=K):ep=0,t=t.stateNode,Zc&&typeof Zc.onCommitFiberRoot=="function")try{Zc.onCommitFiberRoot(_y,t,void 0,(t.current.flags&64)===64)}catch{}if(Ou(K,wl()),Gd)throw Gd=!1,K=Hg,Hg=null,K;return(ci&8)!==0||If(),null}function qT(){for(;Ja!==null;){var K=Ja.alternate;bd||tp===null||((Ja.flags&8)!==0?h1(Ja,tp)&&(bd=!0):Ja.tag===13&&jT(K,Ja)&&h1(Ja,tp)&&(bd=!0));var fe=Ja.flags;(fe&256)!==0&&WT(K,Ja),(fe&512)===0||Sc||(Sc=!0,cp(97,function(){return Cc(),null})),Ja=Ja.nextEffect}}function Cc(){if(Vv!==90){var K=97<Vv?97:Vv;return Vv=90,Jc(K,t5)}return!1}function e5(K,fe){Vg.push(fe,K),Sc||(Sc=!0,cp(97,function(){return Cc(),null}))}function a2(K,fe){Gg.push(fe,K),Sc||(Sc=!0,cp(97,function(){return Cc(),null}))}function t5(){if(qv===null)return!1;var K=qv;if(qv=null,(ci&48)!==0)throw Error(Ca(331));var fe=ci;ci|=32;var t=Gg;Gg=[];for(var B=0;B<t.length;B+=2){var H=t[B],d=t[B+1],l=H.destroy;if(H.destroy=void 0,typeof l=="function")try{l()}catch(w){if(d===null)throw Error(Ca(330));wc(d,w)}}for(t=Vg,Vg=[],B=0;B<t.length;B+=2){H=t[B],d=t[B+1];try{var b=H.create;H.destroy=b()}catch(w){if(d===null)throw Error(Ca(330));wc(d,w)}}for(b=K.current.firstEffect;b!==null;)K=b.nextEffect,b.nextEffect=null,b.flags&8&&(b.sibling=null,b.stateNode=null),b=K;return ci=fe,If(),!0}function px(K,fe,t){fe=Ry(t,fe),fe=Zb(K,fe,1),xc(K,fe),fe=yu(),K=n0(K,1),K!==null&&(Kd(K,1,fe),Ou(K,fe))}function wc(K,fe){if(K.tag===3)px(K,K,fe);else for(var t=K.return;t!==null;){if(t.tag===3){px(t,K,fe);break}else if(t.tag===1){var B=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof B.componentDidCatch=="function"&&(Pf===null||!Pf.has(B))){K=Ry(fe,K);var H=Kb(t,K,1);if(xc(t,H),H=yu(),t=n0(t,1),t!==null)Kd(t,1,H),Ou(t,H);else if(typeof B.componentDidCatch=="function"&&(Pf===null||!Pf.has(B)))try{B.componentDidCatch(fe,K)}catch{}break}}t=t.return}}function r5(K,fe,t){var B=K.pingCache;B!==null&&B.delete(fe),fe=yu(),K.pingedLanes|=K.suspendedLanes&t,Fl===K&&(Tl&t)===t&&(al===4||al===3&&(Tl&62914560)===Tl&&500>wl()-Fy?Xh(K,0):zy|=t),Ou(K,fe)}function n5(K,fe){var t=K.stateNode;t!==null&&t.delete(fe),fe=0,fe===0&&(fe=K.mode,(fe&2)===0?fe=1:(fe&4)===0?fe=Jh()===99?1:2:(Yf===0&&(Yf=rv),fe=Ph(62914560&~Yf),fe===0&&(fe=4194304))),t=yu(),K=n0(K,fe),K!==null&&(Kd(K,fe,t),Ou(K,t))}var i2;i2=function(K,fe,t){var B=fe.lanes;if(K!==null)if(K.memoizedProps!==fe.pendingProps||tu.current)uf=!0;else if((t&B)!==0)uf=(K.flags&16384)!==0;else{switch(uf=!1,fe.tag){case 3:ex(fe),q0();break;case 5:W1(fe);break;case 1:ru(fe.type)&&gd(fe);break;case 4:Cg(fe,fe.stateNode.containerInfo);break;case 10:B=fe.memoizedProps.value;var H=fe.type._context;qo(Pd,H._currentValue),H._currentValue=B;break;case 13:if(fe.memoizedState!==null)return(t&fe.child.childLanes)!==0?tx(K,fe,t):(qo($o,$o.current&1),fe=Xf(K,fe,t),fe!==null?fe.sibling:null);qo($o,$o.current&1);break;case 19:if(B=(t&fe.childLanes)!==0,(K.flags&64)!==0){if(B)return ox(K,fe,t);fe.flags|=64}if(H=fe.memoizedState,H!==null&&(H.rendering=null,H.tail=null,H.lastEffect=null),qo($o,$o.current),B)break;return null;case 23:case 24:return fe.lanes=0,eg(K,fe,t)}return Xf(K,fe,t)}else uf=!1;switch(fe.lanes=0,fe.tag){case 2:if(B=fe.type,K!==null&&(K.alternate=null,fe.alternate=null,fe.flags|=2),K=fe.pendingProps,H=Kh(fe,Al.current),Gh(fe,t),H=Cy(null,fe,B,K,H,t),fe.flags|=1,typeof H=="object"&&H!==null&&typeof H.render=="function"&&H.$$typeof===void 0){if(fe.tag=1,fe.memoizedState=null,fe.updateQueue=null,ru(B)){var d=!0;gd(fe)}else d=!1;fe.memoizedState=H.state!==null&&H.state!==void 0?H.state:null,My(fe);var l=B.getDerivedStateFromProps;typeof l=="function"&&Id(fe,B,l,K),H.updater=t0,fe.stateNode=H,H._reactInternals=fe,Eg(fe,B,K,t),fe=Rg(null,fe,B,!0,d,t)}else fe.tag=0,eu(null,fe,H,t),fe=fe.child;return fe;case 16:H=fe.elementType;e:{switch(K!==null&&(K.alternate=null,fe.alternate=null,fe.flags|=2),K=fe.pendingProps,d=H._init,H=d(H._payload),fe.type=H,d=fe.tag=i5(H),K=lf(H,K),d){case 0:fe=Dg(null,fe,H,K,t);break e;case 1:fe=q1(null,fe,H,K,t);break e;case 11:fe=Q1(null,fe,H,K,t);break e;case 14:fe=$1(null,fe,H,lf(H.type,K),B,t);break e}throw Error(Ca(306,H,""))}return fe;case 0:return B=fe.type,H=fe.pendingProps,H=fe.elementType===B?H:lf(B,H),Dg(K,fe,B,H,t);case 1:return B=fe.type,H=fe.pendingProps,H=fe.elementType===B?H:lf(B,H),q1(K,fe,B,H,t);case 3:if(ex(fe),B=fe.updateQueue,K===null||B===null)throw Error(Ca(282));if(B=fe.pendingProps,H=fe.memoizedState,H=H!==null?H.element:null,Lb(K,fe),hp(fe,B,null,t),B=fe.memoizedState.element,B===H)q0(),fe=Xf(K,fe,t);else{if(H=fe.stateNode,(d=H.hydrate)&&(pc=Vh(fe.stateNode.containerInfo.firstChild),Wf=fe,d=Rf=!0),d){if(K=H.mutableSourceEagerHydrationData,K!=null)for(H=0;H<K.length;H+=2)d=K[H],d._workInProgressVersionPrimary=K[H+1],Yh.push(d);for(t=Ib(fe,null,B,t),fe.child=t;t;)t.flags=t.flags&-3|1024,t=t.sibling}else eu(K,fe,B,t),q0();fe=fe.child}return fe;case 5:return W1(fe),K===null&&Lg(fe),B=fe.type,H=fe.pendingProps,d=K!==null?K.memoizedProps:null,l=H.children,Ag(B,H)?l=null:d!==null&&Ag(B,d)&&(fe.flags|=16),Yb(K,fe),eu(K,fe,l,t),fe.child;case 6:return K===null&&Lg(fe),null;case 13:return tx(K,fe,t);case 4:return Cg(fe,fe.stateNode.containerInfo),B=fe.pendingProps,K===null?fe.child=zd(fe,null,B,t):eu(K,fe,B,t),fe.child;case 11:return B=fe.type,H=fe.pendingProps,H=fe.elementType===B?H:lf(B,H),Q1(K,fe,B,H,t);case 7:return eu(K,fe,fe.pendingProps,t),fe.child;case 8:return eu(K,fe,fe.pendingProps.children,t),fe.child;case 12:return eu(K,fe,fe.pendingProps.children,t),fe.child;case 10:e:{B=fe.type._context,H=fe.pendingProps,l=fe.memoizedProps,d=H.value;var b=fe.type._context;if(qo(Pd,b._currentValue),b._currentValue=d,l!==null)if(b=l.value,d=Ru(b,d)?0:(typeof B._calculateChangedBits=="function"?B._calculateChangedBits(b,d):1073741823)|0,d===0){if(l.children===H.children&&!tu.current){fe=Xf(K,fe,t);break e}}else for(b=fe.child,b!==null&&(b.return=fe);b!==null;){var w=b.dependencies;if(w!==null){l=b.child;for(var e=w.firstContext;e!==null;){if(e.context===B&&(e.observedBits&d)!==0){b.tag===1&&(e=mc(-1,t&-t),e.tag=2,xc(b,e)),b.lanes|=t,e=b.alternate,e!==null&&(e.lanes|=t),Cb(b.return,t),w.lanes|=t;break}e=e.next}}else l=b.tag===10&&b.type===fe.type?null:b.child;if(l!==null)l.return=b;else for(l=b;l!==null;){if(l===fe){l=null;break}if(b=l.sibling,b!==null){b.return=l.return,l=b;break}l=l.return}b=l}eu(K,fe,H.children,t),fe=fe.child}return fe;case 9:return H=fe.type,d=fe.pendingProps,B=d.children,Gh(fe,t),H=Fu(H,d.unstable_observedBits),B=B(H),fe.flags|=1,eu(K,fe,B,t),fe.child;case 14:return H=fe.type,d=lf(H,fe.pendingProps),d=lf(H.type,d),$1(K,fe,H,d,B,t);case 15:return Gb(K,fe,fe.type,fe.pendingProps,B,t);case 17:return B=fe.type,H=fe.pendingProps,H=fe.elementType===B?H:lf(B,H),K!==null&&(K.alternate=null,fe.alternate=null,fe.flags|=2),fe.tag=1,ru(B)?(K=!0,gd(fe)):K=!1,Gh(fe,t),Db(fe,B,H),Eg(fe,B,H,t),Rg(null,fe,B,!0,K,t);case 19:return ox(K,fe,t);case 23:return eg(K,fe,t);case 24:return eg(K,fe,t)}throw Error(Ca(156,fe.tag))};function a5(K,fe,t,B){this.tag=K,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=fe,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=B,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Iu(K,fe,t,B){return new a5(K,fe,t,B)}function Ny(K){return K=K.prototype,!(!K||!K.isReactComponent)}function i5(K){if(typeof K=="function")return Ny(K)?1:0;if(K!=null){if(K=K.$$typeof,K===Xd)return 11;if(K===jd)return 14}return 2}function kc(K,fe){var t=K.alternate;return t===null?(t=Iu(K.tag,fe,K.key,K.mode),t.elementType=K.elementType,t.type=K.type,t.stateNode=K.stateNode,t.alternate=K,K.alternate=t):(t.pendingProps=fe,t.type=K.type,t.flags=0,t.nextEffect=null,t.firstEffect=null,t.lastEffect=null),t.childLanes=K.childLanes,t.lanes=K.lanes,t.child=K.child,t.memoizedProps=K.memoizedProps,t.memoizedState=K.memoizedState,t.updateQueue=K.updateQueue,fe=K.dependencies,t.dependencies=fe===null?null:{lanes:fe.lanes,firstContext:fe.firstContext},t.sibling=K.sibling,t.index=K.index,t.ref=K.ref,t}function _d(K,fe,t,B,H,d){var l=2;if(B=K,typeof K=="function")Ny(K)&&(l=1);else if(typeof K=="string")l=5;else e:switch(K){case cc:return jh(t.children,H,d,fe);case zx:l=8,H|=16;break;case ey:l=8,H|=1;break;case Yv:return K=Iu(12,t,fe,H|8),K.elementType=Yv,K.type=Yv,K.lanes=d,K;case Wv:return K=Iu(13,t,fe,H),K.type=Wv,K.elementType=Wv,K.lanes=d,K;case wd:return K=Iu(19,t,fe,H),K.elementType=wd,K.lanes=d,K;case oy:return By(t,H,d,fe);case og:return K=Iu(24,t,fe,H),K.elementType=og,K.lanes=d,K;default:if(typeof K=="object"&&K!==null)switch(K.$$typeof){case ty:l=10;break e;case ry:l=9;break e;case Xd:l=11;break e;case jd:l=14;break e;case ny:l=16,B=null;break e;case ay:l=22;break e}throw Error(Ca(130,K==null?K:typeof K,""))}return fe=Iu(l,t,fe,H),fe.elementType=K,fe.type=B,fe.lanes=d,fe}function jh(K,fe,t,B){return K=Iu(7,K,B,fe),K.lanes=t,K}function By(K,fe,t,B){return K=Iu(23,K,B,fe),K.elementType=oy,K.lanes=t,K}function ng(K,fe,t){return K=Iu(6,K,null,fe),K.lanes=t,K}function ag(K,fe,t){return fe=Iu(4,K.children!==null?K.children:[],K.key,fe),fe.lanes=t,fe.stateNode={containerInfo:K.containerInfo,pendingChildren:null,implementation:K.implementation},fe}function o5(K,fe,t){this.tag=fe,this.containerInfo=K,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=t,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=H0(0),this.expirationTimes=H0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=H0(0),this.mutableSourceEagerHydrationData=null}function s5(K,fe,t){var B=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gc,key:B==null?null:""+B,children:K,containerInfo:fe,implementation:t}}function Yd(K,fe,t,B){var H=fe.current,d=yu(),l=bc(H);e:if(t){t=t._reactInternals;t:{if(eh(t)!==t||t.tag!==1)throw Error(Ca(170));var b=t;do{switch(b.tag){case 3:b=b.stateNode.context;break t;case 1:if(ru(b.type)){b=b.stateNode.__reactInternalMemoizedMergedChildContext;break t}}b=b.return}while(b!==null);throw Error(Ca(171))}if(t.tag===1){var w=t.type;if(ru(w)){t=wb(t,w,b);break e}}t=b}else t=Mc;return fe.context===null?fe.context=t:fe.pendingContext=t,fe=mc(d,l),fe.payload={element:K},B=B===void 0?null:B,B!==null&&(fe.callback=B),xc(H,fe),_c(H,l,d),l}function ig(K){if(K=K.current,!K.child)return null;switch(K.child.tag){case 5:return K.child.stateNode;default:return K.child.stateNode}}function dx(K,fe){if(K=K.memoizedState,K!==null&&K.dehydrated!==null){var t=K.retryLane;K.retryLane=t!==0&&t<fe?t:fe}}function Uy(K,fe){dx(K,fe),(K=K.alternate)&&dx(K,fe)}function l5(){return null}function Hy(K,fe,t){var B=t!=null&&t.hydrationOptions!=null&&t.hydrationOptions.mutableSources||null;if(t=new o5(K,fe,t!=null&&t.hydrate===!0),fe=Iu(3,null,null,fe===2?7:fe===1?3:0),t.current=fe,fe.stateNode=t,My(fe),K[tv]=t.current,yb(K.nodeType===8?K.parentNode:K),B)for(K=0;K<B.length;K++){fe=B[K];var H=fe._getVersion;H=H(fe._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[fe,H]:t.mutableSourceEagerHydrationData.push(fe,H)}this._internalRoot=t}Hy.prototype.render=function(K){Yd(K,this._internalRoot,null,null)};Hy.prototype.unmount=function(){var K=this._internalRoot,fe=K.containerInfo;Yd(null,K,null,function(){fe[tv]=null})};function wp(K){return!(!K||K.nodeType!==1&&K.nodeType!==9&&K.nodeType!==11&&(K.nodeType!==8||K.nodeValue!==" react-mount-point-unstable "))}function u5(K,fe){if(fe||(fe=K?K.nodeType===9?K.documentElement:K.firstChild:null,fe=!(!fe||fe.nodeType!==1||!fe.hasAttribute("data-reactroot"))),!fe)for(var t;t=K.lastChild;)K.removeChild(t);return new Hy(K,0,fe?{hydrate:!0}:void 0)}function a0(K,fe,t,B,H){var d=t._reactRootContainer;if(d){var l=d._internalRoot;if(typeof H=="function"){var b=H;H=function(){var e=ig(l);b.call(e)}}Yd(fe,l,K,H)}else{if(d=t._reactRootContainer=u5(t,B),l=d._internalRoot,typeof H=="function"){var w=H;H=function(){var e=ig(l);w.call(e)}}qb(function(){Yd(fe,l,K,H)})}return ig(l)}Jx=function(K){if(K.tag===13){var fe=yu();_c(K,4,fe),Uy(K,4)}};cy=function(K){if(K.tag===13){var fe=yu();_c(K,67108864,fe),Uy(K,67108864)}};Qx=function(K){if(K.tag===13){var fe=yu(),t=bc(K);_c(K,t,fe),Uy(K,t)}};$x=function(K,fe){return fe()};gg=function(K,fe,t){switch(fe){case"input":if(lg(K,t),fe=t.name,t.type==="radio"&&fe!=null){for(t=K;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+fe)+'][type="radio"]'),fe=0;fe<t.length;fe++){var B=t[fe];if(B!==K&&B.form===K.form){var H=qd(B);if(!H)throw Error(Ca(90));Ox(B),lg(B,H)}}}break;case"textarea":Bx(K,t);break;case"select":fe=t.value,fe!=null&&Bh(K,!!t.multiple,fe,!1)}};ly=$b;Xx=function(K,fe,t,B,H){var d=ci;ci|=4;try{return Jc(98,K.bind(null,fe,t,B,H))}finally{ci=d,ci===0&&(av(),If())}};uy=function(){(ci&49)===0&&(KT(),Cc())};jx=function(K,fe){var t=ci;ci|=2;try{return K(fe)}finally{ci=t,ci===0&&(av(),If())}};function o2(K,fe){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wp(fe))throw Error(Ca(200));return s5(K,fe,null,t)}var f5={Events:[xp,zh,qd,Yx,Wx,Cc,{current:!1}]},Nv={findFiberByHostInstance:Wc,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},c5={bundleType:Nv.bundleType,version:Nv.version,rendererPackageName:Nv.rendererPackageName,rendererConfig:Nv.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qc.ReactCurrentDispatcher,findHostInstanceByFiber:function(K){return K=Kx(K),K===null?null:K.stateNode},findFiberByHostInstance:Nv.findFiberByHostInstance||l5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var fd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fd.isDisabled&&fd.supportsFiber)try{_y=fd.inject(c5),Zc=fd}catch{}}Nu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=f5;Nu.createPortal=o2;Nu.findDOMNode=function(K){if(K==null)return null;if(K.nodeType===1)return K;var fe=K._reactInternals;if(fe===void 0)throw typeof K.render=="function"?Error(Ca(188)):Error(Ca(268,Object.keys(K)));return K=Kx(fe),K=K===null?null:K.stateNode,K};Nu.flushSync=function(K,fe){var t=ci;if((t&48)!==0)return K(fe);ci|=1;try{if(K)return Jc(99,K.bind(null,fe))}finally{ci=t,If()}};Nu.hydrate=function(K,fe,t){if(!wp(fe))throw Error(Ca(200));return a0(null,K,fe,!0,t)};Nu.render=function(K,fe,t){if(!wp(fe))throw Error(Ca(200));return a0(null,K,fe,!1,t)};Nu.unmountComponentAtNode=function(K){if(!wp(K))throw Error(Ca(40));return K._reactRootContainer?(qb(function(){a0(null,null,K,!1,function(){K._reactRootContainer=null,K[tv]=null})}),!0):!1};Nu.unstable_batchedUpdates=$b;Nu.unstable_createPortal=function(K,fe){return o2(K,fe,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Nu.unstable_renderSubtreeIntoContainer=function(K,fe,t,B){if(!wp(t))throw Error(Ca(200));if(K==null||K._reactInternals===void 0)throw Error(Ca(38));return a0(K,fe,t,!1,B)};Nu.version="17.0.2";function s2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s2)}catch(K){console.error(K)}}s2(),Px.exports=Nu;var w5=Px.exports,l2={},u2={},f2={exports:{}},h5="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",v5=h5,p5=v5;function c2(){}function h2(){}h2.resetWarningCache=c2;var d5=function(){function K(B,H,d,l,b,w){if(w!==p5){var e=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw e.name="Invariant Violation",e}}K.isRequired=K;function fe(){return K}var t={array:K,bigint:K,bool:K,func:K,number:K,object:K,string:K,symbol:K,any:K,arrayOf:fe,element:K,elementType:K,instanceOf:fe,node:K,objectOf:fe,oneOf:fe,oneOfType:fe,shape:fe,exact:fe,checkPropTypes:h2,resetWarningCache:c2};return t.PropTypes=t,t};f2.exports=d5();(function(K){function fe(y){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?fe=function(A){return typeof A}:fe=function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},fe(y)}Object.defineProperty(K,"__esModule",{value:!0}),K.default=h;var t=l(gp.exports),B=H(f2.exports);function H(y){return y&&y.__esModule?y:{default:y}}function d(){if(typeof WeakMap!="function")return null;var y=new WeakMap;return d=function(){return y},y}function l(y){if(y&&y.__esModule)return y;if(y===null||fe(y)!=="object"&&typeof y!="function")return{default:y};var p=d();if(p&&p.has(y))return p.get(y);var A={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var M in y)if(Object.prototype.hasOwnProperty.call(y,M)){var x=m?Object.getOwnPropertyDescriptor(y,M):null;x&&(x.get||x.set)?Object.defineProperty(A,M,x):A[M]=y[M]}return A.default=y,p&&p.set(y,A),A}function b(y,p){if(!(y instanceof p))throw new TypeError("Cannot call a class as a function")}function w(y,p){for(var A=0;A<p.length;A++){var m=p[A];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(y,m.key,m)}}function e(y,p,A){return p&&w(y.prototype,p),A&&w(y,A),y}function o(y,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(p&&p.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),p&&a(y,p)}function a(y,p){return a=Object.setPrototypeOf||function(m,M){return m.__proto__=M,m},a(y,p)}function r(y){var p=s();return function(){var m=i(y),M;if(p){var x=i(this).constructor;M=Reflect.construct(m,arguments,x)}else M=m.apply(this,arguments);return n(this,M)}}function n(y,p){return p&&(fe(p)==="object"||typeof p=="function")?p:c(y)}function c(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function s(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function i(y){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(A){return A.__proto__||Object.getPrototypeOf(A)},i(y)}var v=["AfterExport","AfterPlot","Animated","AnimatingFrame","AnimationInterrupted","AutoSize","BeforeExport","BeforeHover","ButtonClicked","Click","ClickAnnotation","Deselect","DoubleClick","Framework","Hover","LegendClick","LegendDoubleClick","Relayout","Relayouting","Restyle","Redraw","Selected","Selecting","SliderChange","SliderEnd","SliderStart","SunburstClick","Transitioning","TransitionInterrupted","Unhover"],u=["plotly_restyle","plotly_redraw","plotly_relayout","plotly_relayouting","plotly_doubleclick","plotly_animated","plotly_sunburstclick"],g=typeof window!="undefined";function h(y){var p=function(A){o(M,A);var m=r(M);function M(x){var T;return b(this,M),T=m.call(this,x),T.p=Promise.resolve(),T.resizeHandler=null,T.handlers={},T.syncWindowResize=T.syncWindowResize.bind(c(T)),T.syncEventHandlers=T.syncEventHandlers.bind(c(T)),T.attachUpdateEvents=T.attachUpdateEvents.bind(c(T)),T.getRef=T.getRef.bind(c(T)),T.handleUpdate=T.handleUpdate.bind(c(T)),T.figureCallback=T.figureCallback.bind(c(T)),T.updatePlotly=T.updatePlotly.bind(c(T)),T}return e(M,[{key:"updatePlotly",value:function(T,_,f){var L=this;this.p=this.p.then(function(){if(!L.unmounting){if(!L.el)throw new Error("Missing element reference");return y.react(L.el,{data:L.props.data,layout:L.props.layout,config:L.props.config,frames:L.props.frames})}}).then(function(){L.unmounting||(L.syncWindowResize(T),L.syncEventHandlers(),L.figureCallback(_),f&&L.attachUpdateEvents())}).catch(function(S){L.props.onError&&L.props.onError(S)})}},{key:"componentDidMount",value:function(){this.unmounting=!1,this.updatePlotly(!0,this.props.onInitialized,!0)}},{key:"componentDidUpdate",value:function(T){this.unmounting=!1;var _=T.frames&&T.frames.length?T.frames.length:0,f=this.props.frames&&this.props.frames.length?this.props.frames.length:0,L=!(T.layout===this.props.layout&&T.data===this.props.data&&T.config===this.props.config&&f===_),S=T.revision!==void 0,k=T.revision!==this.props.revision;!L&&(!S||S&&!k)||this.updatePlotly(!1,this.props.onUpdate,!1)}},{key:"componentWillUnmount",value:function(){this.unmounting=!0,this.figureCallback(this.props.onPurge),this.resizeHandler&&g&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null),this.removeUpdateEvents(),y.purge(this.el)}},{key:"attachUpdateEvents",value:function(){var T=this;!this.el||!this.el.removeListener||u.forEach(function(_){T.el.on(_,T.handleUpdate)})}},{key:"removeUpdateEvents",value:function(){var T=this;!this.el||!this.el.removeListener||u.forEach(function(_){T.el.removeListener(_,T.handleUpdate)})}},{key:"handleUpdate",value:function(){this.figureCallback(this.props.onUpdate)}},{key:"figureCallback",value:function(T){if(typeof T=="function"){var _=this.el,f=_.data,L=_.layout,S=this.el._transitionData?this.el._transitionData._frames:null,k={data:f,layout:L,frames:S};T(k,this.el)}}},{key:"syncWindowResize",value:function(T){var _=this;!g||(this.props.useResizeHandler&&!this.resizeHandler?(this.resizeHandler=function(){return y.Plots.resize(_.el)},window.addEventListener("resize",this.resizeHandler),T&&this.resizeHandler()):!this.props.useResizeHandler&&this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null))}},{key:"getRef",value:function(T){this.el=T,this.props.debug&&g&&(window.gd=this.el)}},{key:"syncEventHandlers",value:function(){var T=this;v.forEach(function(_){var f=T.props["on"+_],L=T.handlers[_],S=Boolean(L);f&&!S?T.addEventHandler(_,f):!f&&S?T.removeEventHandler(_):f&&S&&f!==L&&(T.removeEventHandler(_),T.addEventHandler(_,f))})}},{key:"addEventHandler",value:function(T,_){this.handlers[T]=_,this.el.on(this.getPlotlyEventName(T),this.handlers[T])}},{key:"removeEventHandler",value:function(T){this.el.removeListener(this.getPlotlyEventName(T),this.handlers[T]),delete this.handlers[T]}},{key:"getPlotlyEventName",value:function(T){return"plotly_"+T.toLowerCase()}},{key:"render",value:function(){return t.default.createElement("div",{id:this.props.divId,style:this.props.style,ref:this.getRef,className:this.props.className})}}]),M}(t.Component);return p.propTypes={data:B.default.arrayOf(B.default.object),config:B.default.object,layout:B.default.object,frames:B.default.arrayOf(B.default.object),revision:B.default.number,onInitialized:B.default.func,onPurge:B.default.func,onError:B.default.func,onUpdate:B.default.func,debug:B.default.bool,style:B.default.object,className:B.default.string,useResizeHandler:B.default.bool,divId:B.default.string},v.forEach(function(A){p.propTypes["on"+A]=B.default.func}),p.defaultProps={debug:!1,useResizeHandler:!1,data:[],style:{position:"relative",display:"inline-block"}},p}})(u2);var v2={exports:{}};(function(K,fe){(function(t){K.exports=t()})(function(){return function(){function t(B,H,d){function l(e,o){if(!H[e]){if(!B[e]){var a=typeof $p=="function"&&$p;if(!o&&a)return a(e,!0);if(b)return b(e,!0);var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}var n=H[e]={exports:{}};B[e][0].call(n.exports,function(c){var s=B[e][1][c];return l(s||c)},n,n.exports,t,B,H,d)}return H[e].exports}for(var b=typeof $p=="function"&&$p,w=0;w<d.length;w++)l(d[w]);return l}return t}()({1:[function(t,B,H){var d=t("../src/lib"),l={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:#fff;","X .select-outline-2":"stroke:#000;stroke-dasharray:2px 2px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var b in l){var w=b.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");d.addStyleRule(w,l[b])}},{"../src/lib":503}],2:[function(t,B,H){B.exports=t("../src/transforms/aggregate")},{"../src/transforms/aggregate":1114}],3:[function(t,B,H){B.exports=t("../src/traces/bar")},{"../src/traces/bar":656}],4:[function(t,B,H){B.exports=t("../src/traces/barpolar")},{"../src/traces/barpolar":669}],5:[function(t,B,H){B.exports=t("../src/traces/box")},{"../src/traces/box":679}],6:[function(t,B,H){B.exports=t("../src/components/calendars")},{"../src/components/calendars":364}],7:[function(t,B,H){B.exports=t("../src/traces/candlestick")},{"../src/traces/candlestick":688}],8:[function(t,B,H){B.exports=t("../src/traces/carpet")},{"../src/traces/carpet":707}],9:[function(t,B,H){B.exports=t("../src/traces/choropleth")},{"../src/traces/choropleth":721}],10:[function(t,B,H){B.exports=t("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":728}],11:[function(t,B,H){B.exports=t("../src/traces/cone")},{"../src/traces/cone":734}],12:[function(t,B,H){B.exports=t("../src/traces/contour")},{"../src/traces/contour":749}],13:[function(t,B,H){B.exports=t("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":760}],14:[function(t,B,H){B.exports=t("../src/core")},{"../src/core":481}],15:[function(t,B,H){B.exports=t("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":768}],16:[function(t,B,H){B.exports=t("../src/transforms/filter")},{"../src/transforms/filter":1115}],17:[function(t,B,H){B.exports=t("../src/traces/funnel")},{"../src/traces/funnel":778}],18:[function(t,B,H){B.exports=t("../src/traces/funnelarea")},{"../src/traces/funnelarea":787}],19:[function(t,B,H){B.exports=t("../src/transforms/groupby")},{"../src/transforms/groupby":1116}],20:[function(t,B,H){B.exports=t("../src/traces/heatmap")},{"../src/traces/heatmap":800}],21:[function(t,B,H){B.exports=t("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":811}],22:[function(t,B,H){B.exports=t("../src/traces/histogram")},{"../src/traces/histogram":823}],23:[function(t,B,H){B.exports=t("../src/traces/histogram2d")},{"../src/traces/histogram2d":829}],24:[function(t,B,H){B.exports=t("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":833}],25:[function(t,B,H){B.exports=t("../src/traces/icicle")},{"../src/traces/icicle":839}],26:[function(t,B,H){B.exports=t("../src/traces/image")},{"../src/traces/image":852}],27:[function(t,B,H){var d=t("./core");d.register([t("./bar"),t("./box"),t("./heatmap"),t("./histogram"),t("./histogram2d"),t("./histogram2dcontour"),t("./contour"),t("./scatterternary"),t("./violin"),t("./funnel"),t("./waterfall"),t("./image"),t("./pie"),t("./sunburst"),t("./treemap"),t("./icicle"),t("./funnelarea"),t("./scatter3d"),t("./surface"),t("./isosurface"),t("./volume"),t("./mesh3d"),t("./cone"),t("./streamtube"),t("./scattergeo"),t("./choropleth"),t("./scattergl"),t("./splom"),t("./pointcloud"),t("./heatmapgl"),t("./parcoords"),t("./parcats"),t("./scattermapbox"),t("./choroplethmapbox"),t("./densitymapbox"),t("./sankey"),t("./indicator"),t("./table"),t("./carpet"),t("./scattercarpet"),t("./contourcarpet"),t("./ohlc"),t("./candlestick"),t("./scatterpolar"),t("./scatterpolargl"),t("./barpolar"),t("./scattersmith"),t("./aggregate"),t("./filter"),t("./groupby"),t("./sort"),t("./calendars")]),B.exports=d},{"./aggregate":2,"./bar":3,"./barpolar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./icicle":25,"./image":26,"./indicator":28,"./isosurface":29,"./mesh3d":30,"./ohlc":31,"./parcats":32,"./parcoords":33,"./pie":34,"./pointcloud":35,"./sankey":36,"./scatter3d":37,"./scattercarpet":38,"./scattergeo":39,"./scattergl":40,"./scattermapbox":41,"./scatterpolar":42,"./scatterpolargl":43,"./scattersmith":44,"./scatterternary":45,"./sort":46,"./splom":47,"./streamtube":48,"./sunburst":49,"./surface":50,"./table":51,"./treemap":52,"./violin":53,"./volume":54,"./waterfall":55}],28:[function(t,B,H){B.exports=t("../src/traces/indicator")},{"../src/traces/indicator":860}],29:[function(t,B,H){B.exports=t("../src/traces/isosurface")},{"../src/traces/isosurface":866}],30:[function(t,B,H){B.exports=t("../src/traces/mesh3d")},{"../src/traces/mesh3d":871}],31:[function(t,B,H){B.exports=t("../src/traces/ohlc")},{"../src/traces/ohlc":876}],32:[function(t,B,H){B.exports=t("../src/traces/parcats")},{"../src/traces/parcats":885}],33:[function(t,B,H){B.exports=t("../src/traces/parcoords")},{"../src/traces/parcoords":895}],34:[function(t,B,H){B.exports=t("../src/traces/pie")},{"../src/traces/pie":906}],35:[function(t,B,H){B.exports=t("../src/traces/pointcloud")},{"../src/traces/pointcloud":915}],36:[function(t,B,H){B.exports=t("../src/traces/sankey")},{"../src/traces/sankey":921}],37:[function(t,B,H){B.exports=t("../src/traces/scatter3d")},{"../src/traces/scatter3d":959}],38:[function(t,B,H){B.exports=t("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":966}],39:[function(t,B,H){B.exports=t("../src/traces/scattergeo")},{"../src/traces/scattergeo":974}],40:[function(t,B,H){B.exports=t("../src/traces/scattergl")},{"../src/traces/scattergl":987}],41:[function(t,B,H){B.exports=t("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":997}],42:[function(t,B,H){B.exports=t("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1005}],43:[function(t,B,H){B.exports=t("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1012}],44:[function(t,B,H){B.exports=t("../src/traces/scattersmith")},{"../src/traces/scattersmith":1019}],45:[function(t,B,H){B.exports=t("../src/traces/scatterternary")},{"../src/traces/scatterternary":1027}],46:[function(t,B,H){B.exports=t("../src/transforms/sort")},{"../src/transforms/sort":1118}],47:[function(t,B,H){B.exports=t("../src/traces/splom")},{"../src/traces/splom":1036}],48:[function(t,B,H){B.exports=t("../src/traces/streamtube")},{"../src/traces/streamtube":1044}],49:[function(t,B,H){B.exports=t("../src/traces/sunburst")},{"../src/traces/sunburst":1052}],50:[function(t,B,H){B.exports=t("../src/traces/surface")},{"../src/traces/surface":1061}],51:[function(t,B,H){B.exports=t("../src/traces/table")},{"../src/traces/table":1069}],52:[function(t,B,H){B.exports=t("../src/traces/treemap")},{"../src/traces/treemap":1080}],53:[function(t,B,H){B.exports=t("../src/traces/violin")},{"../src/traces/violin":1093}],54:[function(t,B,H){B.exports=t("../src/traces/volume")},{"../src/traces/volume":1101}],55:[function(t,B,H){B.exports=t("../src/traces/waterfall")},{"../src/traces/waterfall":1109}],56:[function(t,B,H){(function(d,l){typeof H=="object"&&typeof B!="undefined"?l(H,t("d3-array"),t("d3-collection"),t("d3-shape"),t("elementary-circuits-directed-graph")):l(d.d3=d.d3||{},d.d3,d.d3,d.d3,null)})(this,function(d,l,b,w,e){e=e&&e.hasOwnProperty("default")?e.default:e;function o(he){return he.target.depth}function a(he){return he.depth}function r(he,ge){return ge-1-he.height}function n(he,ge){return he.sourceLinks.length?he.depth:ge-1}function c(he){return he.targetLinks.length?he.depth:he.sourceLinks.length?l.min(he.sourceLinks,o)-1:0}function s(he){return function(){return he}}var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(he){return typeof he}:function(he){return he&&typeof Symbol=="function"&&he.constructor===Symbol&&he!==Symbol.prototype?"symbol":typeof he};function v(he,ge){return g(he.source,ge.source)||he.index-ge.index}function u(he,ge){return g(he.target,ge.target)||he.index-ge.index}function g(he,ge){return he.partOfCycle===ge.partOfCycle?he.y0-ge.y0:he.circularLinkType==="top"||ge.circularLinkType==="bottom"?-1:1}function h(he){return he.value}function y(he){return(he.y0+he.y1)/2}function p(he){return y(he.source)}function A(he){return y(he.target)}function m(he){return he.index}function M(he){return he.nodes}function x(he){return he.links}function T(he,ge){var me=he.get(ge);if(!me)throw new Error("missing: "+ge);return me}function _(he,ge){return ge(he)}var f=25,L=10,S=.3;function k(){var he=0,ge=0,me=1,ke=1,Ae=24,Ne,He=m,Ge=n,_e=M,De=x,Ye=32,qe=2,Ue,Ie=null;function Ve(){var St={nodes:_e.apply(null,arguments),links:De.apply(null,arguments)};dt(St),P(St,He,Ie),Dt(St),Ft(St),z(St,He),Nt(St,Ye,He),Lt(St);for(var it=4,ht=0;ht<it;ht++)Q(St,ke,He),ne(St,ke,He),re(St,ge,ke,He),Q(St,ke,He),ne(St,ke,He);return xe(St,ge,ke),G(St,qe,ke,He),St}Ve.nodeId=function(St){return arguments.length?(He=typeof St=="function"?St:s(St),Ve):He},Ve.nodeAlign=function(St){return arguments.length?(Ge=typeof St=="function"?St:s(St),Ve):Ge},Ve.nodeWidth=function(St){return arguments.length?(Ae=+St,Ve):Ae},Ve.nodePadding=function(St){return arguments.length?(Ne=+St,Ve):Ne},Ve.nodes=function(St){return arguments.length?(_e=typeof St=="function"?St:s(St),Ve):_e},Ve.links=function(St){return arguments.length?(De=typeof St=="function"?St:s(St),Ve):De},Ve.size=function(St){return arguments.length?(he=ge=0,me=+St[0],ke=+St[1],Ve):[me-he,ke-ge]},Ve.extent=function(St){return arguments.length?(he=+St[0][0],me=+St[1][0],ge=+St[0][1],ke=+St[1][1],Ve):[[he,ge],[me,ke]]},Ve.iterations=function(St){return arguments.length?(Ye=+St,Ve):Ye},Ve.circularLinkGap=function(St){return arguments.length?(qe=+St,Ve):qe},Ve.nodePaddingRatio=function(St){return arguments.length?(Ue=+St,Ve):Ue},Ve.sortNodes=function(St){return arguments.length?(Ie=St,Ve):Ie},Ve.update=function(St){return z(St,He),Lt(St),St.links.forEach(function(it){it.circular&&(it.circularLinkType=it.y0+it.y1<ke?"top":"bottom",it.source.circularLinkType=it.circularLinkType,it.target.circularLinkType=it.circularLinkType)}),Q(St,ke,He,!1),ne(St,ke,He),G(St,qe,ke,He),St};function dt(St){St.nodes.forEach(function(ht,Qe){ht.index=Qe,ht.sourceLinks=[],ht.targetLinks=[]});var it=b.map(St.nodes,He);return St.links.forEach(function(ht,Qe){ht.index=Qe;var Ce=ht.source,je=ht.target;(typeof Ce=="undefined"?"undefined":i(Ce))!=="object"&&(Ce=ht.source=T(it,Ce)),(typeof je=="undefined"?"undefined":i(je))!=="object"&&(je=ht.target=T(it,je)),Ce.sourceLinks.push(ht),je.targetLinks.push(ht)}),St}function Dt(St){St.nodes.forEach(function(it){it.partOfCycle=!1,it.value=Math.max(l.sum(it.sourceLinks,h),l.sum(it.targetLinks,h)),it.sourceLinks.forEach(function(ht){ht.circular&&(it.partOfCycle=!0,it.circularLinkType=ht.circularLinkType)}),it.targetLinks.forEach(function(ht){ht.circular&&(it.partOfCycle=!0,it.circularLinkType=ht.circularLinkType)})})}function Yt(St){var it=0,ht=0,Qe=0,Ce=0,je=l.max(St.nodes,function(rt){return rt.column});return St.links.forEach(function(rt){rt.circular&&(rt.circularLinkType=="top"?it=it+rt.width:ht=ht+rt.width,rt.target.column==0&&(Ce=Ce+rt.width),rt.source.column==je&&(Qe=Qe+rt.width))}),it=it>0?it+f+L:it,ht=ht>0?ht+f+L:ht,Qe=Qe>0?Qe+f+L:Qe,Ce=Ce>0?Ce+f+L:Ce,{top:it,bottom:ht,left:Ce,right:Qe}}function kt(St,it){var ht=l.max(St.nodes,function(Tt){return Tt.column}),Qe=me-he,Ce=ke-ge,je=Qe+it.right+it.left,rt=Ce+it.top+it.bottom,ut=Qe/je,Pt=Ce/rt;return he=he*ut+it.left,me=it.right==0?me:me*ut,ge=ge*Pt+it.top,ke=ke*Pt,St.nodes.forEach(function(Tt){Tt.x0=he+Tt.column*((me-he-Ae)/ht),Tt.x1=Tt.x0+Ae}),Pt}function Ft(St){var it,ht,Qe;for(it=St.nodes,ht=[],Qe=0;it.length;++Qe,it=ht,ht=[])it.forEach(function(Ce){Ce.depth=Qe,Ce.sourceLinks.forEach(function(je){ht.indexOf(je.target)<0&&!je.circular&&ht.push(je.target)})});for(it=St.nodes,ht=[],Qe=0;it.length;++Qe,it=ht,ht=[])it.forEach(function(Ce){Ce.height=Qe,Ce.targetLinks.forEach(function(je){ht.indexOf(je.source)<0&&!je.circular&&ht.push(je.source)})});St.nodes.forEach(function(Ce){Ce.column=Math.floor(Ge.call(null,Ce,Qe))})}function Nt(St,it,ht){var Qe=b.nest().key(function(Tt){return Tt.column}).sortKeys(l.ascending).entries(St.nodes).map(function(Tt){return Tt.values});rt(ht),Pt();for(var Ce=1,je=it;je>0;--je)ut(Ce*=.99,ht),Pt();function rt(Tt){if(Ue){var Ot=1/0;Qe.forEach(function(Je){var pt=ke*Ue/(Je.length+1);Ot=pt<Ot?pt:Ot}),Ne=Ot}var Kt=l.min(Qe,function(Je){return(ke-ge-(Je.length-1)*Ne)/l.sum(Je,h)});Kt=Kt*S,St.links.forEach(function(Je){Je.width=Je.value*Kt});var Bt=Yt(St),Zt=kt(St,Bt);Kt=Kt*Zt,St.links.forEach(function(Je){Je.width=Je.value*Kt}),Qe.forEach(function(Je){var pt=Je.length;Je.forEach(function(Et,ar){Et.depth==Qe.length-1&&pt==1||Et.depth==0&&pt==1?(Et.y0=ke/2-Et.value*Kt,Et.y1=Et.y0+Et.value*Kt):Et.partOfCycle?D(Et,Tt)==0?(Et.y0=ke/2+ar,Et.y1=Et.y0+Et.value*Kt):Et.circularLinkType=="top"?(Et.y0=ge+ar,Et.y1=Et.y0+Et.value*Kt):(Et.y0=ke-Et.value*Kt-ar,Et.y1=Et.y0+Et.value*Kt):Bt.top==0||Bt.bottom==0?(Et.y0=(ke-ge)/pt*ar,Et.y1=Et.y0+Et.value*Kt):(Et.y0=(ke-ge)/2-pt/2+ar,Et.y1=Et.y0+Et.value*Kt)})})}function ut(Tt,Ot){var Kt=Qe.length;Qe.forEach(function(Bt){var Zt=Bt.length,Je=Bt[0].depth;Bt.forEach(function(pt){var Et;if((pt.sourceLinks.length||pt.targetLinks.length)&&!(pt.partOfCycle&&D(pt,Ot)>0))if(Je==0&&Zt==1)Et=pt.y1-pt.y0,pt.y0=ke/2-Et/2,pt.y1=ke/2+Et/2;else if(Je==Kt-1&&Zt==1)Et=pt.y1-pt.y0,pt.y0=ke/2-Et/2,pt.y1=ke/2+Et/2;else{var ar=0,vr=l.mean(pt.sourceLinks,A),ir=l.mean(pt.targetLinks,p);vr&&ir?ar=(vr+ir)/2:ar=vr||ir;var dr=(ar-y(pt))*Tt;pt.y0+=dr,pt.y1+=dr}})})}function Pt(){Qe.forEach(function(Tt){var Ot,Kt,Bt=ge,Zt=Tt.length,Je;for(Tt.sort(g),Je=0;Je<Zt;++Je)Ot=Tt[Je],Kt=Bt-Ot.y0,Kt>0&&(Ot.y0+=Kt,Ot.y1+=Kt),Bt=Ot.y1+Ne;if(Kt=Bt-Ne-ke,Kt>0)for(Bt=Ot.y0-=Kt,Ot.y1-=Kt,Je=Zt-2;Je>=0;--Je)Ot=Tt[Je],Kt=Ot.y1+Ne-Bt,Kt>0&&(Ot.y0-=Kt,Ot.y1-=Kt),Bt=Ot.y0})}}function Lt(St){St.nodes.forEach(function(it){it.sourceLinks.sort(u),it.targetLinks.sort(v)}),St.nodes.forEach(function(it){var ht=it.y0,Qe=ht,Ce=it.y1,je=Ce;it.sourceLinks.forEach(function(rt){rt.circular?(rt.y0=Ce-rt.width/2,Ce=Ce-rt.width):(rt.y0=ht+rt.width/2,ht+=rt.width)}),it.targetLinks.forEach(function(rt){rt.circular?(rt.y1=je-rt.width/2,je=je-rt.width):(rt.y1=Qe+rt.width/2,Qe+=rt.width)})})}return Ve}function P(he,ge,me){var ke=0;if(me===null){for(var Ae=[],Ne=0;Ne<he.links.length;Ne++){var He=he.links[Ne],Ge=He.source.index,_e=He.target.index;Ae[Ge]||(Ae[Ge]=[]),Ae[_e]||(Ae[_e]=[]),Ae[Ge].indexOf(_e)===-1&&Ae[Ge].push(_e)}var De=e(Ae);De.sort(function(Ie,Ve){return Ie.length-Ve.length});var Ye={};for(Ne=0;Ne<De.length;Ne++){var qe=De[Ne],Ue=qe.slice(-2);Ye[Ue[0]]||(Ye[Ue[0]]={}),Ye[Ue[0]][Ue[1]]=!0}he.links.forEach(function(Ie){var Ve=Ie.target.index,dt=Ie.source.index;Ve===dt||Ye[dt]&&Ye[dt][Ve]?(Ie.circular=!0,Ie.circularLinkID=ke,ke=ke+1):Ie.circular=!1})}else he.links.forEach(function(Ie){Ie.source[me]<Ie.target[me]?Ie.circular=!1:(Ie.circular=!0,Ie.circularLinkID=ke,ke=ke+1)})}function z(he,ge){var me=0,ke=0;he.links.forEach(function(Ae){Ae.circular&&(Ae.source.circularLinkType||Ae.target.circularLinkType?Ae.circularLinkType=Ae.source.circularLinkType?Ae.source.circularLinkType:Ae.target.circularLinkType:Ae.circularLinkType=me<ke?"top":"bottom",Ae.circularLinkType=="top"?me=me+1:ke=ke+1,he.nodes.forEach(function(Ne){(_(Ne,ge)==_(Ae.source,ge)||_(Ne,ge)==_(Ae.target,ge))&&(Ne.circularLinkType=Ae.circularLinkType)}))}),he.links.forEach(function(Ae){Ae.circular&&(Ae.source.circularLinkType==Ae.target.circularLinkType&&(Ae.circularLinkType=Ae.source.circularLinkType),ue(Ae,ge)&&(Ae.circularLinkType=Ae.source.circularLinkType))})}function I(he){var ge=Math.abs(he.y1-he.y0),me=Math.abs(he.target.x0-he.source.x1);return Math.atan(me/ge)}function R(he,ge){return he.source.column<ge.target.column?!1:!(he.target.column>ge.source.column)}function D(he,ge){var me=0;he.sourceLinks.forEach(function(Ae){me=Ae.circular&&!ue(Ae,ge)?me+1:me});var ke=0;return he.targetLinks.forEach(function(Ae){ke=Ae.circular&&!ue(Ae,ge)?ke+1:ke}),me+ke}function O(he){var ge=he.source.sourceLinks,me=0;ge.forEach(function(Ne){me=Ne.circular?me+1:me});var ke=he.target.targetLinks,Ae=0;return ke.forEach(function(Ne){Ae=Ne.circular?Ae+1:Ae}),!(me>1||Ae>1)}function F(he,ge,me){return he.sort(q),he.forEach(function(ke,Ae){var Ne=0;if(ue(ke,me)&&O(ke))ke.circularPathData.verticalBuffer=Ne+ke.width/2;else{var He=0;for(He;He<Ae;He++)if(R(he[Ae],he[He])){var Ge=he[He].circularPathData.verticalBuffer+he[He].width/2+ge;Ne=Ge>Ne?Ge:Ne}ke.circularPathData.verticalBuffer=Ne+ke.width/2}}),he}function G(he,ge,me,ke){var Ae=5,Ne=l.min(he.links,function(_e){return _e.source.y0});he.links.forEach(function(_e){_e.circular&&(_e.circularPathData={})});var He=he.links.filter(function(_e){return _e.circularLinkType=="top"});F(He,ge,ke);var Ge=he.links.filter(function(_e){return _e.circularLinkType=="bottom"});F(Ge,ge,ke),he.links.forEach(function(_e){if(_e.circular){if(_e.circularPathData.arcRadius=_e.width+L,_e.circularPathData.leftNodeBuffer=Ae,_e.circularPathData.rightNodeBuffer=Ae,_e.circularPathData.sourceWidth=_e.source.x1-_e.source.x0,_e.circularPathData.sourceX=_e.source.x0+_e.circularPathData.sourceWidth,_e.circularPathData.targetX=_e.target.x0,_e.circularPathData.sourceY=_e.y0,_e.circularPathData.targetY=_e.y1,ue(_e,ke)&&O(_e))_e.circularPathData.leftSmallArcRadius=L+_e.width/2,_e.circularPathData.leftLargeArcRadius=L+_e.width/2,_e.circularPathData.rightSmallArcRadius=L+_e.width/2,_e.circularPathData.rightLargeArcRadius=L+_e.width/2,_e.circularLinkType=="bottom"?(_e.circularPathData.verticalFullExtent=_e.source.y1+f+_e.circularPathData.verticalBuffer,_e.circularPathData.verticalLeftInnerExtent=_e.circularPathData.verticalFullExtent-_e.circularPathData.leftLargeArcRadius,_e.circularPathData.verticalRightInnerExtent=_e.circularPathData.verticalFullExtent-_e.circularPathData.rightLargeArcRadius):(_e.circularPathData.verticalFullExtent=_e.source.y0-f-_e.circularPathData.verticalBuffer,_e.circularPathData.verticalLeftInnerExtent=_e.circularPathData.verticalFullExtent+_e.circularPathData.leftLargeArcRadius,_e.circularPathData.verticalRightInnerExtent=_e.circularPathData.verticalFullExtent+_e.circularPathData.rightLargeArcRadius);else{var De=_e.source.column,Ye=_e.circularLinkType,qe=he.links.filter(function(Ve){return Ve.source.column==De&&Ve.circularLinkType==Ye});_e.circularLinkType=="bottom"?qe.sort(X):qe.sort(J);var Ue=0;qe.forEach(function(Ve,dt){Ve.circularLinkID==_e.circularLinkID&&(_e.circularPathData.leftSmallArcRadius=L+_e.width/2+Ue,_e.circularPathData.leftLargeArcRadius=L+_e.width/2+dt*ge+Ue),Ue=Ue+Ve.width}),De=_e.target.column,qe=he.links.filter(function(Ve){return Ve.target.column==De&&Ve.circularLinkType==Ye}),_e.circularLinkType=="bottom"?qe.sort(se):qe.sort(Z),Ue=0,qe.forEach(function(Ve,dt){Ve.circularLinkID==_e.circularLinkID&&(_e.circularPathData.rightSmallArcRadius=L+_e.width/2+Ue,_e.circularPathData.rightLargeArcRadius=L+_e.width/2+dt*ge+Ue),Ue=Ue+Ve.width}),_e.circularLinkType=="bottom"?(_e.circularPathData.verticalFullExtent=Math.max(me,_e.source.y1,_e.target.y1)+f+_e.circularPathData.verticalBuffer,_e.circularPathData.verticalLeftInnerExtent=_e.circularPathData.verticalFullExtent-_e.circularPathData.leftLargeArcRadius,_e.circularPathData.verticalRightInnerExtent=_e.circularPathData.verticalFullExtent-_e.circularPathData.rightLargeArcRadius):(_e.circularPathData.verticalFullExtent=Ne-f-_e.circularPathData.verticalBuffer,_e.circularPathData.verticalLeftInnerExtent=_e.circularPathData.verticalFullExtent+_e.circularPathData.leftLargeArcRadius,_e.circularPathData.verticalRightInnerExtent=_e.circularPathData.verticalFullExtent+_e.circularPathData.rightLargeArcRadius)}_e.circularPathData.leftInnerExtent=_e.circularPathData.sourceX+_e.circularPathData.leftNodeBuffer,_e.circularPathData.rightInnerExtent=_e.circularPathData.targetX-_e.circularPathData.rightNodeBuffer,_e.circularPathData.leftFullExtent=_e.circularPathData.sourceX+_e.circularPathData.leftLargeArcRadius+_e.circularPathData.leftNodeBuffer,_e.circularPathData.rightFullExtent=_e.circularPathData.targetX-_e.circularPathData.rightLargeArcRadius-_e.circularPathData.rightNodeBuffer}if(_e.circular)_e.path=W(_e);else{var Ie=w.linkHorizontal().source(function(Ve){var dt=Ve.source.x0+(Ve.source.x1-Ve.source.x0),Dt=Ve.y0;return[dt,Dt]}).target(function(Ve){var dt=Ve.target.x0,Dt=Ve.y1;return[dt,Dt]});_e.path=Ie(_e)}})}function W(he){var ge="";return he.circularLinkType=="top"?ge="M"+he.circularPathData.sourceX+" "+he.circularPathData.sourceY+" L"+he.circularPathData.leftInnerExtent+" "+he.circularPathData.sourceY+" A"+he.circularPathData.leftLargeArcRadius+" "+he.circularPathData.leftSmallArcRadius+" 0 0 0 "+he.circularPathData.leftFullExtent+" "+(he.circularPathData.sourceY-he.circularPathData.leftSmallArcRadius)+" L"+he.circularPathData.leftFullExtent+" "+he.circularPathData.verticalLeftInnerExtent+" A"+he.circularPathData.leftLargeArcRadius+" "+he.circularPathData.leftLargeArcRadius+" 0 0 0 "+he.circularPathData.leftInnerExtent+" "+he.circularPathData.verticalFullExtent+" L"+he.circularPathData.rightInnerExtent+" "+he.circularPathData.verticalFullExtent+" A"+he.circularPathData.rightLargeArcRadius+" "+he.circularPathData.rightLargeArcRadius+" 0 0 0 "+he.circularPathData.rightFullExtent+" "+he.circularPathData.verticalRightInnerExtent+" L"+he.circularPathData.rightFullExtent+" "+(he.circularPathData.targetY-he.circularPathData.rightSmallArcRadius)+" A"+he.circularPathData.rightLargeArcRadius+" "+he.circularPathData.rightSmallArcRadius+" 0 0 0 "+he.circularPathData.rightInnerExtent+" "+he.circularPathData.targetY+" L"+he.circularPathData.targetX+" "+he.circularPathData.targetY:ge="M"+he.circularPathData.sourceX+" "+he.circularPathData.sourceY+" L"+he.circularPathData.leftInnerExtent+" "+he.circularPathData.sourceY+" A"+he.circularPathData.leftLargeArcRadius+" "+he.circularPathData.leftSmallArcRadius+" 0 0 1 "+he.circularPathData.leftFullExtent+" "+(he.circularPathData.sourceY+he.circularPathData.leftSmallArcRadius)+" L"+he.circularPathData.leftFullExtent+" "+he.circularPathData.verticalLeftInnerExtent+" A"+he.circularPathData.leftLargeArcRadius+" "+he.circularPathData.leftLargeArcRadius+" 0 0 1 "+he.circularPathData.leftInnerExtent+" "+he.circularPathData.verticalFullExtent+" L"+he.circularPathData.rightInnerExtent+" "+he.circularPathData.verticalFullExtent+" A"+he.circularPathData.rightLargeArcRadius+" "+he.circularPathData.rightLargeArcRadius+" 0 0 1 "+he.circularPathData.rightFullExtent+" "+he.circularPathData.verticalRightInnerExtent+" L"+he.circularPathData.rightFullExtent+" "+(he.circularPathData.targetY+he.circularPathData.rightSmallArcRadius)+" A"+he.circularPathData.rightLargeArcRadius+" "+he.circularPathData.rightSmallArcRadius+" 0 0 1 "+he.circularPathData.rightInnerExtent+" "+he.circularPathData.targetY+" L"+he.circularPathData.targetX+" "+he.circularPathData.targetY,ge}function q(he,ge){return le(he)==le(ge)?he.circularLinkType=="bottom"?X(he,ge):J(he,ge):le(ge)-le(he)}function J(he,ge){return he.y0-ge.y0}function X(he,ge){return ge.y0-he.y0}function Z(he,ge){return he.y1-ge.y1}function se(he,ge){return ge.y1-he.y1}function le(he){return he.target.column-he.source.column}function oe(he){return he.target.x0-he.source.x1}function U(he,ge){var me=I(he),ke=oe(ge)/Math.tan(me),Ae=ie(he)=="up"?he.y1+ke:he.y1-ke;return Ae}function V(he,ge){var me=I(he),ke=oe(ge)/Math.tan(me),Ae=ie(he)=="up"?he.y1-ke:he.y1+ke;return Ae}function re(he,ge,me,ke){he.links.forEach(function(Ae){if(!Ae.circular&&Ae.target.column-Ae.source.column>1){var Ne=Ae.source.column+1,He=Ae.target.column-1,Ge=1,_e=He-Ne+1;for(Ge=1;Ne<=He;Ne++,Ge++)he.nodes.forEach(function(De){if(De.column==Ne){var Ye=Ge/(_e+1),qe=Math.pow(1-Ye,3),Ue=3*Ye*Math.pow(1-Ye,2),Ie=3*Math.pow(Ye,2)*(1-Ye),Ve=Math.pow(Ye,3),dt=qe*Ae.y0+Ue*Ae.y0+Ie*Ae.y1+Ve*Ae.y1,Dt=dt-Ae.width/2,Yt=dt+Ae.width/2,kt;Dt>De.y0&&Dt<De.y1?(kt=De.y1-Dt+10,kt=De.circularLinkType=="bottom"?kt:-kt,De=j(De,kt,ge,me),he.nodes.forEach(function(Ft){_(Ft,ke)==_(De,ke)||Ft.column!=De.column||ee(De,Ft)&&j(Ft,kt,ge,me)})):Yt>De.y0&&Yt<De.y1?(kt=Yt-De.y0+10,De=j(De,kt,ge,me),he.nodes.forEach(function(Ft){_(Ft,ke)==_(De,ke)||Ft.column!=De.column||Ft.y0<De.y1&&Ft.y1>De.y1&&j(Ft,kt,ge,me)})):Dt<De.y0&&Yt>De.y1&&(kt=Yt-De.y0+10,De=j(De,kt,ge,me),he.nodes.forEach(function(Ft){_(Ft,ke)==_(De,ke)||Ft.column!=De.column||Ft.y0<De.y1&&Ft.y1>De.y1&&j(Ft,kt,ge,me)}))}})}})}function ee(he,ge){return he.y0>ge.y0&&he.y0<ge.y1||he.y1>ge.y0&&he.y1<ge.y1?!0:he.y0<ge.y0&&he.y1>ge.y1}function j(he,ge,me,ke){return he.y0+ge>=me&&he.y1+ge<=ke&&(he.y0=he.y0+ge,he.y1=he.y1+ge,he.targetLinks.forEach(function(Ae){Ae.y1=Ae.y1+ge}),he.sourceLinks.forEach(function(Ae){Ae.y0=Ae.y0+ge})),he}function Q(he,ge,me,ke){he.nodes.forEach(function(Ae){ke&&Ae.y+(Ae.y1-Ae.y0)>ge&&(Ae.y=Ae.y-(Ae.y+(Ae.y1-Ae.y0)-ge));var Ne=he.links.filter(function(_e){return _(_e.source,me)==_(Ae,me)}),He=Ne.length;He>1&&Ne.sort(function(_e,De){if(!_e.circular&&!De.circular){if(_e.target.column==De.target.column)return _e.y1-De.y1;if(ae(_e,De)){if(_e.target.column>De.target.column){var Ye=V(De,_e);return _e.y1-Ye}if(De.target.column>_e.target.column){var qe=V(_e,De);return qe-De.y1}}else return _e.y1-De.y1}if(_e.circular&&!De.circular)return _e.circularLinkType=="top"?-1:1;if(De.circular&&!_e.circular)return De.circularLinkType=="top"?1:-1;if(_e.circular&&De.circular)return _e.circularLinkType===De.circularLinkType&&_e.circularLinkType=="top"?_e.target.column===De.target.column?_e.target.y1-De.target.y1:De.target.column-_e.target.column:_e.circularLinkType===De.circularLinkType&&_e.circularLinkType=="bottom"?_e.target.column===De.target.column?De.target.y1-_e.target.y1:_e.target.column-De.target.column:_e.circularLinkType=="top"?-1:1});var Ge=Ae.y0;Ne.forEach(function(_e){_e.y0=Ge+_e.width/2,Ge=Ge+_e.width}),Ne.forEach(function(_e,De){if(_e.circularLinkType=="bottom"){var Ye=De+1,qe=0;for(Ye;Ye<He;Ye++)qe=qe+Ne[Ye].width;_e.y0=Ae.y1-qe-_e.width/2}})})}function ne(he,ge,me){he.nodes.forEach(function(ke){var Ae=he.links.filter(function(Ge){return _(Ge.target,me)==_(ke,me)}),Ne=Ae.length;Ne>1&&Ae.sort(function(Ge,_e){if(!Ge.circular&&!_e.circular){if(Ge.source.column==_e.source.column)return Ge.y0-_e.y0;if(ae(Ge,_e)){if(_e.source.column<Ge.source.column){var De=U(_e,Ge);return Ge.y0-De}if(Ge.source.column<_e.source.column){var Ye=U(Ge,_e);return Ye-_e.y0}}else return Ge.y0-_e.y0}if(Ge.circular&&!_e.circular)return Ge.circularLinkType=="top"?-1:1;if(_e.circular&&!Ge.circular)return _e.circularLinkType=="top"?1:-1;if(Ge.circular&&_e.circular)return Ge.circularLinkType===_e.circularLinkType&&Ge.circularLinkType=="top"?Ge.source.column===_e.source.column?Ge.source.y1-_e.source.y1:Ge.source.column-_e.source.column:Ge.circularLinkType===_e.circularLinkType&&Ge.circularLinkType=="bottom"?Ge.source.column===_e.source.column?Ge.source.y1-_e.source.y1:_e.source.column-Ge.source.column:Ge.circularLinkType=="top"?-1:1});var He=ke.y0;Ae.forEach(function(Ge){Ge.y1=He+Ge.width/2,He=He+Ge.width}),Ae.forEach(function(Ge,_e){if(Ge.circularLinkType=="bottom"){var De=_e+1,Ye=0;for(De;De<Ne;De++)Ye=Ye+Ae[De].width;Ge.y1=ke.y1-Ye-Ge.width/2}})})}function ae(he,ge){return ie(he)==ie(ge)}function ie(he){return he.y0-he.y1>0?"up":"down"}function ue(he,ge){return _(he.source,ge)==_(he.target,ge)}function xe(he,ge,me){var ke=he.nodes,Ae=he.links,Ne=!1,He=!1;if(Ae.forEach(function(Ue){Ue.circularLinkType=="top"?Ne=!0:Ue.circularLinkType=="bottom"&&(He=!0)}),Ne==!1||He==!1){var Ge=l.min(ke,function(Ue){return Ue.y0}),_e=l.max(ke,function(Ue){return Ue.y1}),De=_e-Ge,Ye=me-ge,qe=Ye/De;ke.forEach(function(Ue){var Ie=(Ue.y1-Ue.y0)*qe;Ue.y0=(Ue.y0-Ge)*qe,Ue.y1=Ue.y0+Ie}),Ae.forEach(function(Ue){Ue.y0=(Ue.y0-Ge)*qe,Ue.y1=(Ue.y1-Ge)*qe,Ue.width=Ue.width*qe})}}d.sankeyCircular=k,d.sankeyCenter=c,d.sankeyLeft=a,d.sankeyRight=r,d.sankeyJustify=n,Object.defineProperty(d,"__esModule",{value:!0})})},{"d3-array":107,"d3-collection":108,"d3-shape":119,"elementary-circuits-directed-graph":130}],57:[function(t,B,H){(function(d,l){typeof H=="object"&&typeof B!="undefined"?l(H,t("d3-array"),t("d3-collection"),t("d3-shape")):l(d.d3=d.d3||{},d.d3,d.d3,d.d3)})(this,function(d,l,b,w){function e(L){return L.target.depth}function o(L){return L.depth}function a(L,S){return S-1-L.height}function r(L,S){return L.sourceLinks.length?L.depth:S-1}function n(L){return L.targetLinks.length?L.depth:L.sourceLinks.length?l.min(L.sourceLinks,e)-1:0}function c(L){return function(){return L}}function s(L,S){return v(L.source,S.source)||L.index-S.index}function i(L,S){return v(L.target,S.target)||L.index-S.index}function v(L,S){return L.y0-S.y0}function u(L){return L.value}function g(L){return(L.y0+L.y1)/2}function h(L){return g(L.source)*L.value}function y(L){return g(L.target)*L.value}function p(L){return L.index}function A(L){return L.nodes}function m(L){return L.links}function M(L,S){var k=L.get(S);if(!k)throw new Error("missing: "+S);return k}var x=function(){var L=0,S=0,k=1,P=1,z=24,I=8,R=p,D=r,O=A,F=m,G=32,W=2/3;function q(){var oe={nodes:O.apply(null,arguments),links:F.apply(null,arguments)};return J(oe),X(oe),Z(oe),se(oe),le(oe),oe}q.update=function(oe){return le(oe),oe},q.nodeId=function(oe){return arguments.length?(R=typeof oe=="function"?oe:c(oe),q):R},q.nodeAlign=function(oe){return arguments.length?(D=typeof oe=="function"?oe:c(oe),q):D},q.nodeWidth=function(oe){return arguments.length?(z=+oe,q):z},q.nodePadding=function(oe){return arguments.length?(I=+oe,q):I},q.nodes=function(oe){return arguments.length?(O=typeof oe=="function"?oe:c(oe),q):O},q.links=function(oe){return arguments.length?(F=typeof oe=="function"?oe:c(oe),q):F},q.size=function(oe){return arguments.length?(L=S=0,k=+oe[0],P=+oe[1],q):[k-L,P-S]},q.extent=function(oe){return arguments.length?(L=+oe[0][0],k=+oe[1][0],S=+oe[0][1],P=+oe[1][1],q):[[L,S],[k,P]]},q.iterations=function(oe){return arguments.length?(G=+oe,q):G};function J(oe){oe.nodes.forEach(function(V,re){V.index=re,V.sourceLinks=[],V.targetLinks=[]});var U=b.map(oe.nodes,R);oe.links.forEach(function(V,re){V.index=re;var ee=V.source,j=V.target;typeof ee!="object"&&(ee=V.source=M(U,ee)),typeof j!="object"&&(j=V.target=M(U,j)),ee.sourceLinks.push(V),j.targetLinks.push(V)})}function X(oe){oe.nodes.forEach(function(U){U.value=Math.max(l.sum(U.sourceLinks,u),l.sum(U.targetLinks,u))})}function Z(oe){var U,V,re;for(U=oe.nodes,V=[],re=0;U.length;++re,U=V,V=[])U.forEach(function(j){j.depth=re,j.sourceLinks.forEach(function(Q){V.indexOf(Q.target)<0&&V.push(Q.target)})});for(U=oe.nodes,V=[],re=0;U.length;++re,U=V,V=[])U.forEach(function(j){j.height=re,j.targetLinks.forEach(function(Q){V.indexOf(Q.source)<0&&V.push(Q.source)})});var ee=(k-L-z)/(re-1);oe.nodes.forEach(function(j){j.x1=(j.x0=L+Math.max(0,Math.min(re-1,Math.floor(D.call(null,j,re))))*ee)+z})}function se(oe){var U=b.nest().key(function(ae){return ae.x0}).sortKeys(l.ascending).entries(oe.nodes).map(function(ae){return ae.values});ee(),ne();for(var V=1,re=G;re>0;--re)Q(V*=.99),ne(),j(V),ne();function ee(){var ae=l.max(U,function(xe){return xe.length}),ie=W*(P-S)/(ae-1);I>ie&&(I=ie);var ue=l.min(U,function(xe){return(P-S-(xe.length-1)*I)/l.sum(xe,u)});U.forEach(function(xe){xe.forEach(function(he,ge){he.y1=(he.y0=ge)+he.value*ue})}),oe.links.forEach(function(xe){xe.width=xe.value*ue})}function j(ae){U.forEach(function(ie){ie.forEach(function(ue){if(ue.targetLinks.length){var xe=(l.sum(ue.targetLinks,h)/l.sum(ue.targetLinks,u)-g(ue))*ae;ue.y0+=xe,ue.y1+=xe}})})}function Q(ae){U.slice().reverse().forEach(function(ie){ie.forEach(function(ue){if(ue.sourceLinks.length){var xe=(l.sum(ue.sourceLinks,y)/l.sum(ue.sourceLinks,u)-g(ue))*ae;ue.y0+=xe,ue.y1+=xe}})})}function ne(){U.forEach(function(ae){var ie,ue,xe=S,he=ae.length,ge;for(ae.sort(v),ge=0;ge<he;++ge)ie=ae[ge],ue=xe-ie.y0,ue>0&&(ie.y0+=ue,ie.y1+=ue),xe=ie.y1+I;if(ue=xe-I-P,ue>0)for(xe=ie.y0-=ue,ie.y1-=ue,ge=he-2;ge>=0;--ge)ie=ae[ge],ue=ie.y1+I-xe,ue>0&&(ie.y0-=ue,ie.y1-=ue),xe=ie.y0})}}function le(oe){oe.nodes.forEach(function(U){U.sourceLinks.sort(i),U.targetLinks.sort(s)}),oe.nodes.forEach(function(U){var V=U.y0,re=V;U.sourceLinks.forEach(function(ee){ee.y0=V+ee.width/2,V+=ee.width}),U.targetLinks.forEach(function(ee){ee.y1=re+ee.width/2,re+=ee.width})})}return q};function T(L){return[L.source.x1,L.y0]}function _(L){return[L.target.x0,L.y1]}var f=function(){return w.linkHorizontal().source(T).target(_)};d.sankey=x,d.sankeyCenter=n,d.sankeyLeft=o,d.sankeyRight=a,d.sankeyJustify=r,d.sankeyLinkHorizontal=f,Object.defineProperty(d,"__esModule",{value:!0})})},{"d3-array":107,"d3-collection":108,"d3-shape":119}],58:[function(t,B,H){(function(){var d={version:"3.8.0"},l=[].slice,b=function(ce){return l.call(ce)},w=self.document;function e(ce){return ce&&(ce.ownerDocument||ce.document||ce).documentElement}function o(ce){return ce&&(ce.ownerDocument&&ce.ownerDocument.defaultView||ce.document&&ce||ce.defaultView)}if(w)try{b(w.documentElement.childNodes)[0].nodeType}catch{b=function(Te){for(var Le=Te.length,Be=new Array(Le);Le--;)Be[Le]=Te[Le];return Be}}if(Date.now||(Date.now=function(){return+new Date}),w)try{w.createElement("DIV").style.setProperty("opacity",0,"")}catch{var a=this.Element.prototype,r=a.setAttribute,n=a.setAttributeNS,c=this.CSSStyleDeclaration.prototype,s=c.setProperty;a.setAttribute=function(Te,Le){r.call(this,Te,Le+"")},a.setAttributeNS=function(Te,Le,Be){n.call(this,Te,Le,Be+"")},c.setProperty=function(Te,Le,Be){s.call(this,Te,Le+"",Be)}}d.ascending=i;function i(ce,Te){return ce<Te?-1:ce>Te?1:ce>=Te?0:NaN}d.descending=function(ce,Te){return Te<ce?-1:Te>ce?1:Te>=ce?0:NaN},d.min=function(ce,Te){var Le=-1,Be=ce.length,Oe,Ke;if(arguments.length===1){for(;++Le<Be;)if((Ke=ce[Le])!=null&&Ke>=Ke){Oe=Ke;break}for(;++Le<Be;)(Ke=ce[Le])!=null&&Oe>Ke&&(Oe=Ke)}else{for(;++Le<Be;)if((Ke=Te.call(ce,ce[Le],Le))!=null&&Ke>=Ke){Oe=Ke;break}for(;++Le<Be;)(Ke=Te.call(ce,ce[Le],Le))!=null&&Oe>Ke&&(Oe=Ke)}return Oe},d.max=function(ce,Te){var Le=-1,Be=ce.length,Oe,Ke;if(arguments.length===1){for(;++Le<Be;)if((Ke=ce[Le])!=null&&Ke>=Ke){Oe=Ke;break}for(;++Le<Be;)(Ke=ce[Le])!=null&&Ke>Oe&&(Oe=Ke)}else{for(;++Le<Be;)if((Ke=Te.call(ce,ce[Le],Le))!=null&&Ke>=Ke){Oe=Ke;break}for(;++Le<Be;)(Ke=Te.call(ce,ce[Le],Le))!=null&&Ke>Oe&&(Oe=Ke)}return Oe},d.extent=function(ce,Te){var Le=-1,Be=ce.length,Oe,Ke,bt;if(arguments.length===1){for(;++Le<Be;)if((Ke=ce[Le])!=null&&Ke>=Ke){Oe=bt=Ke;break}for(;++Le<Be;)(Ke=ce[Le])!=null&&(Oe>Ke&&(Oe=Ke),bt<Ke&&(bt=Ke))}else{for(;++Le<Be;)if((Ke=Te.call(ce,ce[Le],Le))!=null&&Ke>=Ke){Oe=bt=Ke;break}for(;++Le<Be;)(Ke=Te.call(ce,ce[Le],Le))!=null&&(Oe>Ke&&(Oe=Ke),bt<Ke&&(bt=Ke))}return[Oe,bt]};function v(ce){return ce===null?NaN:+ce}function u(ce){return!isNaN(ce)}d.sum=function(ce,Te){var Le=0,Be=ce.length,Oe,Ke=-1;if(arguments.length===1)for(;++Ke<Be;)u(Oe=+ce[Ke])&&(Le+=Oe);else for(;++Ke<Be;)u(Oe=+Te.call(ce,ce[Ke],Ke))&&(Le+=Oe);return Le},d.mean=function(ce,Te){var Le=0,Be=ce.length,Oe,Ke=-1,bt=Be;if(arguments.length===1)for(;++Ke<Be;)u(Oe=v(ce[Ke]))?Le+=Oe:--bt;else for(;++Ke<Be;)u(Oe=v(Te.call(ce,ce[Ke],Ke)))?Le+=Oe:--bt;if(bt)return Le/bt},d.quantile=function(ce,Te){var Le=(ce.length-1)*Te+1,Be=Math.floor(Le),Oe=+ce[Be-1],Ke=Le-Be;return Ke?Oe+Ke*(ce[Be]-Oe):Oe},d.median=function(ce,Te){var Le=[],Be=ce.length,Oe,Ke=-1;if(arguments.length===1)for(;++Ke<Be;)u(Oe=v(ce[Ke]))&&Le.push(Oe);else for(;++Ke<Be;)u(Oe=v(Te.call(ce,ce[Ke],Ke)))&&Le.push(Oe);if(Le.length)return d.quantile(Le.sort(i),.5)},d.variance=function(ce,Te){var Le=ce.length,Be=0,Oe,Ke,bt=0,vt=-1,Ct=0;if(arguments.length===1)for(;++vt<Le;)u(Oe=v(ce[vt]))&&(Ke=Oe-Be,Be+=Ke/++Ct,bt+=Ke*(Oe-Be));else for(;++vt<Le;)u(Oe=v(Te.call(ce,ce[vt],vt)))&&(Ke=Oe-Be,Be+=Ke/++Ct,bt+=Ke*(Oe-Be));if(Ct>1)return bt/(Ct-1)},d.deviation=function(){var ce=d.variance.apply(this,arguments);return ce&&Math.sqrt(ce)};function g(ce){return{left:function(Te,Le,Be,Oe){for(arguments.length<3&&(Be=0),arguments.length<4&&(Oe=Te.length);Be<Oe;){var Ke=Be+Oe>>>1;ce(Te[Ke],Le)<0?Be=Ke+1:Oe=Ke}return Be},right:function(Te,Le,Be,Oe){for(arguments.length<3&&(Be=0),arguments.length<4&&(Oe=Te.length);Be<Oe;){var Ke=Be+Oe>>>1;ce(Te[Ke],Le)>0?Oe=Ke:Be=Ke+1}return Be}}}var h=g(i);d.bisectLeft=h.left,d.bisect=d.bisectRight=h.right,d.bisector=function(ce){return g(ce.length===1?function(Te,Le){return i(ce(Te),Le)}:ce)},d.shuffle=function(ce,Te,Le){(Be=arguments.length)<3&&(Le=ce.length,Be<2&&(Te=0));for(var Be=Le-Te,Oe,Ke;Be;)Ke=Math.random()*Be--|0,Oe=ce[Be+Te],ce[Be+Te]=ce[Ke+Te],ce[Ke+Te]=Oe;return ce},d.permute=function(ce,Te){for(var Le=Te.length,Be=new Array(Le);Le--;)Be[Le]=ce[Te[Le]];return Be},d.pairs=function(ce){for(var Te=0,Le=ce.length-1,Be=ce[0],Oe=new Array(Le<0?0:Le);Te<Le;)Oe[Te]=[Be,Be=ce[++Te]];return Oe},d.transpose=function(ce){if(!(Ke=ce.length))return[];for(var Te=-1,Le=d.min(ce,y),Be=new Array(Le);++Te<Le;)for(var Oe=-1,Ke,bt=Be[Te]=new Array(Ke);++Oe<Ke;)bt[Oe]=ce[Oe][Te];return Be};function y(ce){return ce.length}d.zip=function(){return d.transpose(arguments)},d.keys=function(ce){var Te=[];for(var Le in ce)Te.push(Le);return Te},d.values=function(ce){var Te=[];for(var Le in ce)Te.push(ce[Le]);return Te},d.entries=function(ce){var Te=[];for(var Le in ce)Te.push({key:Le,value:ce[Le]});return Te},d.merge=function(ce){for(var Te=ce.length,Le,Be=-1,Oe=0,Ke,bt;++Be<Te;)Oe+=ce[Be].length;for(Ke=new Array(Oe);--Te>=0;)for(bt=ce[Te],Le=bt.length;--Le>=0;)Ke[--Oe]=bt[Le];return Ke};var p=Math.abs;d.range=function(ce,Te,Le){if(arguments.length<3&&(Le=1,arguments.length<2&&(Te=ce,ce=0)),(Te-ce)/Le===1/0)throw new Error("infinite range");var Be=[],Oe=A(p(Le)),Ke=-1,bt;if(ce*=Oe,Te*=Oe,Le*=Oe,Le<0)for(;(bt=ce+Le*++Ke)>Te;)Be.push(bt/Oe);else for(;(bt=ce+Le*++Ke)<Te;)Be.push(bt/Oe);return Be};function A(ce){for(var Te=1;ce*Te%1;)Te*=10;return Te}function m(ce,Te){for(var Le in Te)Object.defineProperty(ce.prototype,Le,{value:Te[Le],enumerable:!1})}d.map=function(ce,Te){var Le=new M;if(ce instanceof M)ce.forEach(function(vt,Ct){Le.set(vt,Ct)});else if(Array.isArray(ce)){var Be=-1,Oe=ce.length,Ke;if(arguments.length===1)for(;++Be<Oe;)Le.set(Be,ce[Be]);else for(;++Be<Oe;)Le.set(Te.call(ce,Ke=ce[Be],Be),Ke)}else for(var bt in ce)Le.set(bt,ce[bt]);return Le};function M(){this._=Object.create(null)}var x="__proto__",T="\0";m(M,{has:L,get:function(ce){return this._[_(ce)]},set:function(ce,Te){return this._[_(ce)]=Te},remove:S,keys:k,values:function(){var ce=[];for(var Te in this._)ce.push(this._[Te]);return ce},entries:function(){var ce=[];for(var Te in this._)ce.push({key:f(Te),value:this._[Te]});return ce},size:P,empty:z,forEach:function(ce){for(var Te in this._)ce.call(this,f(Te),this._[Te])}});function _(ce){return(ce+="")===x||ce[0]===T?T+ce:ce}function f(ce){return(ce+="")[0]===T?ce.slice(1):ce}function L(ce){return _(ce)in this._}function S(ce){return(ce=_(ce))in this._&&delete this._[ce]}function k(){var ce=[];for(var Te in this._)ce.push(f(Te));return ce}function P(){var ce=0;for(var Te in this._)++ce;return ce}function z(){for(var ce in this._)return!1;return!0}d.nest=function(){var ce={},Te=[],Le=[],Be,Oe;function Ke(vt,Ct,Ut){if(Ut>=Te.length)return Oe?Oe.call(ce,Ct):Be?Ct.sort(Be):Ct;for(var Wt=-1,Xt=Ct.length,br=Te[Ut++],Qr,cn,Mr,Or=new M,Xr;++Wt<Xt;)(Xr=Or.get(Qr=br(cn=Ct[Wt])))?Xr.push(cn):Or.set(Qr,[cn]);return vt?(cn=vt(),Mr=function(ln,fn){cn.set(ln,Ke(vt,fn,Ut))}):(cn={},Mr=function(ln,fn){cn[ln]=Ke(vt,fn,Ut)}),Or.forEach(Mr),cn}function bt(vt,Ct){if(Ct>=Te.length)return vt;var Ut=[],Wt=Le[Ct++];return vt.forEach(function(Xt,br){Ut.push({key:Xt,values:bt(br,Ct)})}),Wt?Ut.sort(function(Xt,br){return Wt(Xt.key,br.key)}):Ut}return ce.map=function(vt,Ct){return Ke(Ct,vt,0)},ce.entries=function(vt){return bt(Ke(d.map,vt,0),0)},ce.key=function(vt){return Te.push(vt),ce},ce.sortKeys=function(vt){return Le[Te.length-1]=vt,ce},ce.sortValues=function(vt){return Be=vt,ce},ce.rollup=function(vt){return Oe=vt,ce},ce},d.set=function(ce){var Te=new I;if(ce)for(var Le=0,Be=ce.length;Le<Be;++Le)Te.add(ce[Le]);return Te};function I(){this._=Object.create(null)}m(I,{has:L,add:function(ce){return this._[_(ce+="")]=!0,ce},remove:S,values:k,size:P,empty:z,forEach:function(ce){for(var Te in this._)ce.call(this,f(Te))}}),d.behavior={};function R(ce){return ce}d.rebind=function(ce,Te){for(var Le=1,Be=arguments.length,Oe;++Le<Be;)ce[Oe=arguments[Le]]=D(ce,Te,Te[Oe]);return ce};function D(ce,Te,Le){return function(){var Be=Le.apply(Te,arguments);return Be===Te?ce:Be}}function O(ce,Te){if(Te in ce)return Te;Te=Te.charAt(0).toUpperCase()+Te.slice(1);for(var Le=0,Be=F.length;Le<Be;++Le){var Oe=F[Le]+Te;if(Oe in ce)return Oe}}var F=["webkit","ms","moz","Moz","o","O"];function G(){}d.dispatch=function(){for(var ce=new W,Te=-1,Le=arguments.length;++Te<Le;)ce[arguments[Te]]=q(ce);return ce};function W(){}W.prototype.on=function(ce,Te){var Le=ce.indexOf("."),Be="";if(Le>=0&&(Be=ce.slice(Le+1),ce=ce.slice(0,Le)),ce)return arguments.length<2?this[ce].on(Be):this[ce].on(Be,Te);if(arguments.length===2){if(Te==null)for(ce in this)this.hasOwnProperty(ce)&&this[ce].on(Be,null);return this}};function q(ce){var Te=[],Le=new M;function Be(){for(var Oe=Te,Ke=-1,bt=Oe.length,vt;++Ke<bt;)(vt=Oe[Ke].on)&&vt.apply(this,arguments);return ce}return Be.on=function(Oe,Ke){var bt=Le.get(Oe),vt;return arguments.length<2?bt&&bt.on:(bt&&(bt.on=null,Te=Te.slice(0,vt=Te.indexOf(bt)).concat(Te.slice(vt+1)),Le.remove(Oe)),Ke&&Te.push(Le.set(Oe,{on:Ke})),ce)},Be}d.event=null;function J(){d.event.preventDefault()}function X(){for(var ce=d.event,Te;Te=ce.sourceEvent;)ce=Te;return ce}function Z(ce){for(var Te=new W,Le=0,Be=arguments.length;++Le<Be;)Te[arguments[Le]]=q(Te);return Te.of=function(Oe,Ke){return function(bt){try{var vt=bt.sourceEvent=d.event;bt.target=ce,d.event=bt,Te[bt.type].apply(Oe,Ke)}finally{d.event=vt}}},Te}d.requote=function(ce){return ce.replace(se,"\\$&")};var se=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,le={}.__proto__?function(ce,Te){ce.__proto__=Te}:function(ce,Te){for(var Le in Te)ce[Le]=Te[Le]};function oe(ce){return le(ce,ee),ce}var U=function(ce,Te){return Te.querySelector(ce)},V=function(ce,Te){return Te.querySelectorAll(ce)},re=function(ce,Te){var Le=ce.matches||ce[O(ce,"matchesSelector")];return re=function(Be,Oe){return Le.call(Be,Oe)},re(ce,Te)};typeof Sizzle=="function"&&(U=function(ce,Te){return Sizzle(ce,Te)[0]||null},V=Sizzle,re=Sizzle.matchesSelector),d.selection=function(){return d.select(w.documentElement)};var ee=d.selection.prototype=[];ee.select=function(ce){var Te=[],Le,Be,Oe,Ke;ce=j(ce);for(var bt=-1,vt=this.length;++bt<vt;){Te.push(Le=[]),Le.parentNode=(Oe=this[bt]).parentNode;for(var Ct=-1,Ut=Oe.length;++Ct<Ut;)(Ke=Oe[Ct])?(Le.push(Be=ce.call(Ke,Ke.__data__,Ct,bt)),Be&&"__data__"in Ke&&(Be.__data__=Ke.__data__)):Le.push(null)}return oe(Te)};function j(ce){return typeof ce=="function"?ce:function(){return U(ce,this)}}ee.selectAll=function(ce){var Te=[],Le,Be;ce=Q(ce);for(var Oe=-1,Ke=this.length;++Oe<Ke;)for(var bt=this[Oe],vt=-1,Ct=bt.length;++vt<Ct;)(Be=bt[vt])&&(Te.push(Le=b(ce.call(Be,Be.__data__,vt,Oe))),Le.parentNode=Be);return oe(Te)};function Q(ce){return typeof ce=="function"?ce:function(){return V(ce,this)}}var ne="http://www.w3.org/1999/xhtml",ae={svg:"http://www.w3.org/2000/svg",xhtml:ne,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};d.ns={prefix:ae,qualify:function(ce){var Te=ce.indexOf(":"),Le=ce;return Te>=0&&(Le=ce.slice(0,Te))!=="xmlns"&&(ce=ce.slice(Te+1)),ae.hasOwnProperty(Le)?{space:ae[Le],local:ce}:ce}},ee.attr=function(ce,Te){if(arguments.length<2){if(typeof ce=="string"){var Le=this.node();return ce=d.ns.qualify(ce),ce.local?Le.getAttributeNS(ce.space,ce.local):Le.getAttribute(ce)}for(Te in ce)this.each(ie(Te,ce[Te]));return this}return this.each(ie(ce,Te))};function ie(ce,Te){ce=d.ns.qualify(ce);function Le(){this.removeAttribute(ce)}function Be(){this.removeAttributeNS(ce.space,ce.local)}function Oe(){this.setAttribute(ce,Te)}function Ke(){this.setAttributeNS(ce.space,ce.local,Te)}function bt(){var Ct=Te.apply(this,arguments);Ct==null?this.removeAttribute(ce):this.setAttribute(ce,Ct)}function vt(){var Ct=Te.apply(this,arguments);Ct==null?this.removeAttributeNS(ce.space,ce.local):this.setAttributeNS(ce.space,ce.local,Ct)}return Te==null?ce.local?Be:Le:typeof Te=="function"?ce.local?vt:bt:ce.local?Ke:Oe}function ue(ce){return ce.trim().replace(/\s+/g," ")}ee.classed=function(ce,Te){if(arguments.length<2){if(typeof ce=="string"){var Le=this.node(),Be=(ce=he(ce)).length,Oe=-1;if(Te=Le.classList){for(;++Oe<Be;)if(!Te.contains(ce[Oe]))return!1}else for(Te=Le.getAttribute("class");++Oe<Be;)if(!xe(ce[Oe]).test(Te))return!1;return!0}for(Te in ce)this.each(ge(Te,ce[Te]));return this}return this.each(ge(ce,Te))};function xe(ce){return new RegExp("(?:^|\\s+)"+d.requote(ce)+"(?:\\s+|$)","g")}function he(ce){return(ce+"").trim().split(/^|\s+/)}function ge(ce,Te){ce=he(ce).map(me);var Le=ce.length;function Be(){for(var Ke=-1;++Ke<Le;)ce[Ke](this,Te)}function Oe(){for(var Ke=-1,bt=Te.apply(this,arguments);++Ke<Le;)ce[Ke](this,bt)}return typeof Te=="function"?Oe:Be}function me(ce){var Te=xe(ce);return function(Le,Be){if(Oe=Le.classList)return Be?Oe.add(ce):Oe.remove(ce);var Oe=Le.getAttribute("class")||"";Be?(Te.lastIndex=0,Te.test(Oe)||Le.setAttribute("class",ue(Oe+" "+ce))):Le.setAttribute("class",ue(Oe.replace(Te," ")))}}ee.style=function(ce,Te,Le){var Be=arguments.length;if(Be<3){if(typeof ce!="string"){Be<2&&(Te="");for(Le in ce)this.each(ke(Le,ce[Le],Te));return this}if(Be<2){var Oe=this.node();return o(Oe).getComputedStyle(Oe,null).getPropertyValue(ce)}Le=""}return this.each(ke(ce,Te,Le))};function ke(ce,Te,Le){function Be(){this.style.removeProperty(ce)}function Oe(){this.style.setProperty(ce,Te,Le)}function Ke(){var bt=Te.apply(this,arguments);bt==null?this.style.removeProperty(ce):this.style.setProperty(ce,bt,Le)}return Te==null?Be:typeof Te=="function"?Ke:Oe}ee.property=function(ce,Te){if(arguments.length<2){if(typeof ce=="string")return this.node()[ce];for(Te in ce)this.each(Ae(Te,ce[Te]));return this}return this.each(Ae(ce,Te))};function Ae(ce,Te){function Le(){delete this[ce]}function Be(){this[ce]=Te}function Oe(){var Ke=Te.apply(this,arguments);Ke==null?delete this[ce]:this[ce]=Ke}return Te==null?Le:typeof Te=="function"?Oe:Be}ee.text=function(ce){return arguments.length?this.each(typeof ce=="function"?function(){var Te=ce.apply(this,arguments);this.textContent=Te==null?"":Te}:ce==null?function(){this.textContent=""}:function(){this.textContent=ce}):this.node().textContent},ee.html=function(ce){return arguments.length?this.each(typeof ce=="function"?function(){var Te=ce.apply(this,arguments);this.innerHTML=Te==null?"":Te}:ce==null?function(){this.innerHTML=""}:function(){this.innerHTML=ce}):this.node().innerHTML},ee.append=function(ce){return ce=Ne(ce),this.select(function(){return this.appendChild(ce.apply(this,arguments))})};function Ne(ce){function Te(){var Be=this.ownerDocument,Oe=this.namespaceURI;return Oe===ne&&Be.documentElement.namespaceURI===ne?Be.createElement(ce):Be.createElementNS(Oe,ce)}function Le(){return this.ownerDocument.createElementNS(ce.space,ce.local)}return typeof ce=="function"?ce:(ce=d.ns.qualify(ce)).local?Le:Te}ee.insert=function(ce,Te){return ce=Ne(ce),Te=j(Te),this.select(function(){return this.insertBefore(ce.apply(this,arguments),Te.apply(this,arguments)||null)})},ee.remove=function(){return this.each(He)};function He(){var ce=this.parentNode;ce&&ce.removeChild(this)}ee.data=function(ce,Te){var Le=-1,Be=this.length,Oe,Ke;if(!arguments.length){for(ce=new Array(Be=(Oe=this[0]).length);++Le<Be;)(Ke=Oe[Le])&&(ce[Le]=Ke.__data__);return ce}function bt(Wt,Xt){var br,Qr=Wt.length,cn=Xt.length,Mr=Math.min(Qr,cn),Or=new Array(cn),Xr=new Array(cn),ln=new Array(Qr),fn,Kr;if(Te){var Gn=new M,ra=new Array(Qr),wa;for(br=-1;++br<Qr;)(fn=Wt[br])&&(Gn.has(wa=Te.call(fn,fn.__data__,br))?ln[br]=fn:Gn.set(wa,fn),ra[br]=wa);for(br=-1;++br<cn;)(fn=Gn.get(wa=Te.call(Xt,Kr=Xt[br],br)))?fn!==!0&&(Or[br]=fn,fn.__data__=Kr):Xr[br]=Ge(Kr),Gn.set(wa,!0);for(br=-1;++br<Qr;)br in ra&&Gn.get(ra[br])!==!0&&(ln[br]=Wt[br])}else{for(br=-1;++br<Mr;)fn=Wt[br],Kr=Xt[br],fn?(fn.__data__=Kr,Or[br]=fn):Xr[br]=Ge(Kr);for(;br<cn;++br)Xr[br]=Ge(Xt[br]);for(;br<Qr;++br)ln[br]=Wt[br]}Xr.update=Or,Xr.parentNode=Or.parentNode=ln.parentNode=Wt.parentNode,vt.push(Xr),Ct.push(Or),Ut.push(ln)}var vt=qe([]),Ct=oe([]),Ut=oe([]);if(typeof ce=="function")for(;++Le<Be;)bt(Oe=this[Le],ce.call(Oe,Oe.parentNode.__data__,Le));else for(;++Le<Be;)bt(Oe=this[Le],ce);return Ct.enter=function(){return vt},Ct.exit=function(){return Ut},Ct};function Ge(ce){return{__data__:ce}}ee.datum=function(ce){return arguments.length?this.property("__data__",ce):this.property("__data__")},ee.filter=function(ce){var Te=[],Le,Be,Oe;typeof ce!="function"&&(ce=_e(ce));for(var Ke=0,bt=this.length;Ke<bt;Ke++){Te.push(Le=[]),Le.parentNode=(Be=this[Ke]).parentNode;for(var vt=0,Ct=Be.length;vt<Ct;vt++)(Oe=Be[vt])&&ce.call(Oe,Oe.__data__,vt,Ke)&&Le.push(Oe)}return oe(Te)};function _e(ce){return function(){return re(this,ce)}}ee.order=function(){for(var ce=-1,Te=this.length;++ce<Te;)for(var Le=this[ce],Be=Le.length-1,Oe=Le[Be],Ke;--Be>=0;)(Ke=Le[Be])&&(Oe&&Oe!==Ke.nextSibling&&Oe.parentNode.insertBefore(Ke,Oe),Oe=Ke);return this},ee.sort=function(ce){ce=De.apply(this,arguments);for(var Te=-1,Le=this.length;++Te<Le;)this[Te].sort(ce);return this.order()};function De(ce){return arguments.length||(ce=i),function(Te,Le){return Te&&Le?ce(Te.__data__,Le.__data__):!Te-!Le}}ee.each=function(ce){return Ye(this,function(Te,Le,Be){ce.call(Te,Te.__data__,Le,Be)})};function Ye(ce,Te){for(var Le=0,Be=ce.length;Le<Be;Le++)for(var Oe=ce[Le],Ke=0,bt=Oe.length,vt;Ke<bt;Ke++)(vt=Oe[Ke])&&Te(vt,Ke,Le);return ce}ee.call=function(ce){var Te=b(arguments);return ce.apply(Te[0]=this,Te),this},ee.empty=function(){return!this.node()},ee.node=function(){for(var ce=0,Te=this.length;ce<Te;ce++)for(var Le=this[ce],Be=0,Oe=Le.length;Be<Oe;Be++){var Ke=Le[Be];if(Ke)return Ke}return null},ee.size=function(){var ce=0;return Ye(this,function(){++ce}),ce};function qe(ce){return le(ce,Ue),ce}var Ue=[];d.selection.enter=qe,d.selection.enter.prototype=Ue,Ue.append=ee.append,Ue.empty=ee.empty,Ue.node=ee.node,Ue.call=ee.call,Ue.size=ee.size,Ue.select=function(ce){for(var Te=[],Le,Be,Oe,Ke,bt,vt=-1,Ct=this.length;++vt<Ct;){Oe=(Ke=this[vt]).update,Te.push(Le=[]),Le.parentNode=Ke.parentNode;for(var Ut=-1,Wt=Ke.length;++Ut<Wt;)(bt=Ke[Ut])?(Le.push(Oe[Ut]=Be=ce.call(Ke.parentNode,bt.__data__,Ut,vt)),Be.__data__=bt.__data__):Le.push(null)}return oe(Te)},Ue.insert=function(ce,Te){return arguments.length<2&&(Te=Ie(this)),ee.insert.call(this,ce,Te)};function Ie(ce){var Te,Le;return function(Be,Oe,Ke){var bt=ce[Ke].update,vt=bt.length,Ct;for(Ke!=Le&&(Le=Ke,Te=0),Oe>=Te&&(Te=Oe+1);!(Ct=bt[Te])&&++Te<vt;);return Ct}}d.select=function(ce){var Te;return typeof ce=="string"?(Te=[U(ce,w)],Te.parentNode=w.documentElement):(Te=[ce],Te.parentNode=e(ce)),oe([Te])},d.selectAll=function(ce){var Te;return typeof ce=="string"?(Te=b(V(ce,w)),Te.parentNode=w.documentElement):(Te=b(ce),Te.parentNode=null),oe([Te])},ee.on=function(ce,Te,Le){var Be=arguments.length;if(Be<3){if(typeof ce!="string"){Be<2&&(Te=!1);for(Le in ce)this.each(Ve(Le,ce[Le],Te));return this}if(Be<2)return(Be=this.node()["__on"+ce])&&Be._;Le=!1}return this.each(Ve(ce,Te,Le))};function Ve(ce,Te,Le){var Be="__on"+ce,Oe=ce.indexOf("."),Ke=Dt;Oe>0&&(ce=ce.slice(0,Oe));var bt=dt.get(ce);bt&&(ce=bt,Ke=Yt);function vt(){var Wt=this[Be];Wt&&(this.removeEventListener(ce,Wt,Wt.$),delete this[Be])}function Ct(){var Wt=Ke(Te,b(arguments));vt.call(this),this.addEventListener(ce,this[Be]=Wt,Wt.$=Le),Wt._=Te}function Ut(){var Wt=new RegExp("^__on([^.]+)"+d.requote(ce)+"$"),Xt;for(var br in this)if(Xt=br.match(Wt)){var Qr=this[br];this.removeEventListener(Xt[1],Qr,Qr.$),delete this[br]}}return Oe?Te?Ct:vt:Te?G:Ut}var dt=d.map({mouseenter:"mouseover",mouseleave:"mouseout"});w&&dt.forEach(function(ce){"on"+ce in w&&dt.remove(ce)});function Dt(ce,Te){return function(Le){var Be=d.event;d.event=Le,Te[0]=this.__data__;try{ce.apply(this,Te)}finally{d.event=Be}}}function Yt(ce,Te){var Le=Dt(ce,Te);return function(Be){var Oe=this,Ke=Be.relatedTarget;(!Ke||Ke!==Oe&&!(Ke.compareDocumentPosition(Oe)&8))&&Le.call(Oe,Be)}}var kt,Ft=0;function Nt(ce){var Te=".dragsuppress-"+ ++Ft,Le="click"+Te,Be=d.select(o(ce)).on("touchmove"+Te,J).on("dragstart"+Te,J).on("selectstart"+Te,J);if(kt==null&&(kt="onselectstart"in ce?!1:O(ce.style,"userSelect")),kt){var Oe=e(ce).style,Ke=Oe[kt];Oe[kt]="none"}return function(bt){if(Be.on(Te,null),kt&&(Oe[kt]=Ke),bt){var vt=function(){Be.on(Le,null)};Be.on(Le,function(){J(),vt()},!0),setTimeout(vt,0)}}}d.mouse=function(ce){return St(ce,X())};var Lt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function St(ce,Te){Te.changedTouches&&(Te=Te.changedTouches[0]);var Le=ce.ownerSVGElement||ce;if(Le.createSVGPoint){var Be=Le.createSVGPoint();if(Lt<0){var Oe=o(ce);if(Oe.scrollX||Oe.scrollY){Le=d.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var Ke=Le[0][0].getScreenCTM();Lt=!(Ke.f||Ke.e),Le.remove()}}return Lt?(Be.x=Te.pageX,Be.y=Te.pageY):(Be.x=Te.clientX,Be.y=Te.clientY),Be=Be.matrixTransform(ce.getScreenCTM().inverse()),[Be.x,Be.y]}var bt=ce.getBoundingClientRect();return[Te.clientX-bt.left-ce.clientLeft,Te.clientY-bt.top-ce.clientTop]}d.touch=function(ce,Te,Le){if(arguments.length<3&&(Le=Te,Te=X().changedTouches),Te){for(var Be=0,Oe=Te.length,Ke;Be<Oe;++Be)if((Ke=Te[Be]).identifier===Le)return St(ce,Ke)}},d.behavior.drag=function(){var ce=Z(Oe,"drag","dragstart","dragend"),Te=null,Le=Ke(G,d.mouse,o,"mousemove","mouseup"),Be=Ke(it,d.touch,R,"touchmove","touchend");function Oe(){this.on("mousedown.drag",Le).on("touchstart.drag",Be)}function Ke(bt,vt,Ct,Ut,Wt){return function(){var Xt=this,br=d.event.target.correspondingElement||d.event.target,Qr=Xt.parentNode,cn=ce.of(Xt,arguments),Mr=0,Or=bt(),Xr=".drag"+(Or==null?"":"-"+Or),ln,fn=d.select(Ct(br)).on(Ut+Xr,ra).on(Wt+Xr,wa),Kr=Nt(br),Gn=vt(Qr,Or);Te?(ln=Te.apply(Xt,arguments),ln=[ln.x-Gn[0],ln.y-Gn[1]]):ln=[0,0],cn({type:"dragstart"});function ra(){var oa=vt(Qr,Or),Ea,fa;!oa||(Ea=oa[0]-Gn[0],fa=oa[1]-Gn[1],Mr|=Ea|fa,Gn=oa,cn({type:"drag",x:oa[0]+ln[0],y:oa[1]+ln[1],dx:Ea,dy:fa}))}function wa(){!vt(Qr,Or)||(fn.on(Ut+Xr,null).on(Wt+Xr,null),Kr(Mr),cn({type:"dragend"}))}}}return Oe.origin=function(bt){return arguments.length?(Te=bt,Oe):Te},d.rebind(Oe,ce,"on")};function it(){return d.event.changedTouches[0].identifier}d.touches=function(ce,Te){return arguments.length<2&&(Te=X().touches),Te?b(Te).map(function(Le){var Be=St(ce,Le);return Be.identifier=Le.identifier,Be}):[]};var ht=1e-6,Qe=ht*ht,Ce=Math.PI,je=2*Ce,rt=je-ht,ut=Ce/2,Pt=Ce/180,Tt=180/Ce;function Ot(ce,Te,Le){return(Te[0]-ce[0])*(Le[1]-ce[1])-(Te[1]-ce[1])*(Le[0]-ce[0])}function Kt(ce){return ce>1?ut:ce<-1?-ut:Math.asin(ce)}function Bt(ce){return((ce=Math.exp(ce))-1/ce)/2}function Zt(ce){return((ce=Math.exp(ce))+1/ce)/2}function Je(ce){return((ce=Math.exp(2*ce))-1)/(ce+1)}var pt=Math.SQRT2,Et=2,ar=4;d.interpolateZoom=function(ce,Te){var Le=ce[0],Be=ce[1],Oe=ce[2],Ke=Te[0],bt=Te[1],vt=Te[2],Ct=Ke-Le,Ut=bt-Be,Wt=Ct*Ct+Ut*Ut,Xt,br;if(Wt<Qe)br=Math.log(vt/Oe)/pt,Xt=function(ln){return[Le+ln*Ct,Be+ln*Ut,Oe*Math.exp(pt*ln*br)]};else{var Qr=Math.sqrt(Wt),cn=(vt*vt-Oe*Oe+ar*Wt)/(2*Oe*Et*Qr),Mr=(vt*vt-Oe*Oe-ar*Wt)/(2*vt*Et*Qr),Or=Math.log(Math.sqrt(cn*cn+1)-cn),Xr=Math.log(Math.sqrt(Mr*Mr+1)-Mr);br=(Xr-Or)/pt,Xt=function(ln){var fn=ln*br,Kr=Zt(Or),Gn=Oe/(Et*Qr)*(Kr*Je(pt*fn+Or)-Bt(Or));return[Le+Gn*Ct,Be+Gn*Ut,Oe*Kr/Zt(pt*fn+Or)]}}return Xt.duration=br*1e3,Xt},d.behavior.zoom=function(){var ce={x:0,y:0,k:1},Te,Le,Be,Oe=[960,500],Ke=vr,bt=250,vt=0,Ct="mousedown.zoom",Ut="mousemove.zoom",Wt="mouseup.zoom",Xt,br="touchstart.zoom",Qr,cn=Z(fn,"zoomstart","zoom","zoomend"),Mr,Or,Xr,ln;dr||(dr="onwheel"in w?(ir=function(){return-d.event.deltaY*(d.event.deltaMode?120:1)},"wheel"):"onmousewheel"in w?(ir=function(){return d.event.wheelDelta},"mousewheel"):(ir=function(){return-d.event.detail},"MozMousePixelScroll"));function fn(ha){ha.on(Ct,$a).on(dr+".zoom",ho).on("dblclick.zoom",Ii).on(br,gi)}fn.event=function(ha){ha.each(function(){var ai=cn.of(this,arguments),Xa=ce;Wa?d.select(this).transition().each("start.zoom",function(){ce=this.__chart__||{x:0,y:0,k:1},fa(ai)}).tween("zoom:zoom",function(){var Mi=Oe[0],si=Oe[1],so=Le?Le[0]:Mi/2,$i=Le?Le[1]:si/2,yo=d.interpolateZoom([(so-ce.x)/ce.k,($i-ce.y)/ce.k,Mi/ce.k],[(so-Xa.x)/Xa.k,($i-Xa.y)/Xa.k,Mi/Xa.k]);return function(Zo){var Ho=yo(Zo),Ko=Mi/Ho[2];this.__chart__=ce={x:so-Ho[0]*Ko,y:$i-Ho[1]*Ko,k:Ko},Va(ai)}}).each("interrupt.zoom",function(){Ra(ai)}).each("end.zoom",function(){Ra(ai)}):(this.__chart__=ce,fa(ai),Va(ai),Ra(ai))})},fn.translate=function(ha){return arguments.length?(ce={x:+ha[0],y:+ha[1],k:ce.k},Ea(),fn):[ce.x,ce.y]},fn.scale=function(ha){return arguments.length?(ce={x:ce.x,y:ce.y,k:null},ra(+ha),Ea(),fn):ce.k},fn.scaleExtent=function(ha){return arguments.length?(Ke=ha==null?vr:[+ha[0],+ha[1]],fn):Ke},fn.center=function(ha){return arguments.length?(Be=ha&&[+ha[0],+ha[1]],fn):Be},fn.size=function(ha){return arguments.length?(Oe=ha&&[+ha[0],+ha[1]],fn):Oe},fn.duration=function(ha){return arguments.length?(bt=+ha,fn):bt},fn.x=function(ha){return arguments.length?(Or=ha,Mr=ha.copy(),ce={x:0,y:0,k:1},fn):Or},fn.y=function(ha){return arguments.length?(ln=ha,Xr=ha.copy(),ce={x:0,y:0,k:1},fn):ln};function Kr(ha){return[(ha[0]-ce.x)/ce.k,(ha[1]-ce.y)/ce.k]}function Gn(ha){return[ha[0]*ce.k+ce.x,ha[1]*ce.k+ce.y]}function ra(ha){ce.k=Math.max(Ke[0],Math.min(Ke[1],ha))}function wa(ha,ai){ai=Gn(ai),ce.x+=ha[0]-ai[0],ce.y+=ha[1]-ai[1]}function oa(ha,ai,Xa,Mi){ha.__chart__={x:ce.x,y:ce.y,k:ce.k},ra(Math.pow(2,Mi)),wa(Le=ai,Xa),ha=d.select(ha),bt>0&&(ha=ha.transition().duration(bt)),ha.call(fn.event)}function Ea(){Or&&Or.domain(Mr.range().map(function(ha){return(ha-ce.x)/ce.k}).map(Mr.invert)),ln&&ln.domain(Xr.range().map(function(ha){return(ha-ce.y)/ce.k}).map(Xr.invert))}function fa(ha){vt++||ha({type:"zoomstart"})}function Va(ha){Ea(),ha({type:"zoom",scale:ce.k,translate:[ce.x,ce.y]})}function Ra(ha){--vt||(ha({type:"zoomend"}),Le=null)}function $a(){var ha=this,ai=cn.of(ha,arguments),Xa=0,Mi=d.select(o(ha)).on(Ut,$i).on(Wt,yo),si=Kr(d.mouse(ha)),so=Nt(ha);Pn.call(ha),fa(ai);function $i(){Xa=1,wa(d.mouse(ha),si),Va(ai)}function yo(){Mi.on(Ut,null).on(Wt,null),so(Xa),Ra(ai)}}function gi(){var ha=this,ai=cn.of(ha,arguments),Xa={},Mi=0,si,so=".zoom-"+d.event.changedTouches[0].identifier,$i="touchmove"+so,yo="touchend"+so,Zo=[],Ho=d.select(ha),Ko=Nt(ha);Ni(),fa(ai),Ho.on(Ct,null).on(br,Ni);function Gi(){var bo=d.touches(ha);return si=ce.k,bo.forEach(function(ro){ro.identifier in Xa&&(Xa[ro.identifier]=Kr(ro))}),bo}function Ni(){var bo=d.event.target;d.select(bo).on($i,Fa).on(yo,ja),Zo.push(bo);for(var ro=d.event.changedTouches,zo=0,Xi=ro.length;zo<Xi;++zo)Xa[ro[zo].identifier]=null;var Jo=Gi(),ks=Date.now();if(Jo.length===1){if(ks-Qr<500){var vu=Jo[0];oa(ha,vu,Xa[vu.identifier],Math.floor(Math.log(ce.k)/Math.LN2)+1),J()}Qr=ks}else if(Jo.length>1){var vu=Jo[0],ji=Jo[1],Qf=vu[0]-ji[0],Zl=vu[1]-ji[1];Mi=Qf*Qf+Zl*Zl}}function Fa(){var bo=d.touches(ha),ro,zo,Xi,Jo;Pn.call(ha);for(var ks=0,vu=bo.length;ks<vu;++ks,Jo=null)if(Xi=bo[ks],Jo=Xa[Xi.identifier]){if(zo)break;ro=Xi,zo=Jo}if(Jo){var ji=(ji=Xi[0]-ro[0])*ji+(ji=Xi[1]-ro[1])*ji,Qf=Mi&&Math.sqrt(ji/Mi);ro=[(ro[0]+Xi[0])/2,(ro[1]+Xi[1])/2],zo=[(zo[0]+Jo[0])/2,(zo[1]+Jo[1])/2],ra(Qf*si)}Qr=null,wa(ro,zo),Va(ai)}function ja(){if(d.event.touches.length){for(var bo=d.event.changedTouches,ro=0,zo=bo.length;ro<zo;++ro)delete Xa[bo[ro].identifier];for(var Xi in Xa)return void Gi()}d.selectAll(Zo).on(so,null),Ho.on(Ct,$a).on(br,gi),Ko(),Ra(ai)}}function ho(){var ha=cn.of(this,arguments);Xt?clearTimeout(Xt):(Pn.call(this),Te=Kr(Le=Be||d.mouse(this)),fa(ha)),Xt=setTimeout(function(){Xt=null,Ra(ha)},50),J(),ra(Math.pow(2,ir()*.002)*ce.k),wa(Le,Te),Va(ha)}function Ii(){var ha=d.mouse(this),ai=Math.log(ce.k)/Math.LN2;oa(this,ha,Kr(ha),d.event.shiftKey?Math.ceil(ai)-1:Math.floor(ai)+1)}return d.rebind(fn,cn,"on")};var vr=[0,1/0],ir,dr;d.color=Pr;function Pr(){}Pr.prototype.toString=function(){return this.rgb()+""},d.hsl=Sr;function Sr(ce,Te,Le){return this instanceof Sr?(this.h=+ce,this.s=+Te,void(this.l=+Le)):arguments.length<2?ce instanceof Sr?new Sr(ce.h,ce.s,ce.l):dn(""+ce,Yr,Sr):new Sr(ce,Te,Le)}var tr=Sr.prototype=new Pr;tr.brighter=function(ce){return ce=Math.pow(.7,arguments.length?ce:1),new Sr(this.h,this.s,this.l/ce)},tr.darker=function(ce){return ce=Math.pow(.7,arguments.length?ce:1),new Sr(this.h,this.s,ce*this.l)},tr.rgb=function(){return Nr(this.h,this.s,this.l)};function Nr(ce,Te,Le){var Be,Oe;ce=isNaN(ce)?0:(ce%=360)<0?ce+360:ce,Te=isNaN(Te)||Te<0?0:Te>1?1:Te,Le=Le<0?0:Le>1?1:Le,Oe=Le<=.5?Le*(1+Te):Le+Te-Le*Te,Be=2*Le-Oe;function Ke(vt){return vt>360?vt-=360:vt<0&&(vt+=360),vt<60?Be+(Oe-Be)*vt/60:vt<180?Oe:vt<240?Be+(Oe-Be)*(240-vt)/60:Be}function bt(vt){return Math.round(Ke(vt)*255)}return new fr(bt(ce+120),bt(ce),bt(ce-120))}d.hcl=et;function et(ce,Te,Le){return this instanceof et?(this.h=+ce,this.c=+Te,void(this.l=+Le)):arguments.length<2?ce instanceof et?new et(ce.h,ce.c,ce.l):ce instanceof Re?Vt(ce.l,ce.a,ce.b):Vt((ce=Ar((ce=d.rgb(ce)).r,ce.g,ce.b)).l,ce.a,ce.b):new et(ce,Te,Le)}var we=et.prototype=new Pr;we.brighter=function(ce){return new et(this.h,this.c,Math.min(100,this.l+Xe*(arguments.length?ce:1)))},we.darker=function(ce){return new et(this.h,this.c,Math.max(0,this.l-Xe*(arguments.length?ce:1)))},we.rgb=function(){return Me(this.h,this.c,this.l).rgb()};function Me(ce,Te,Le){return isNaN(ce)&&(ce=0),isNaN(Te)&&(Te=0),new Re(Le,Math.cos(ce*=Pt)*Te,Math.sin(ce)*Te)}d.lab=Re;function Re(ce,Te,Le){return this instanceof Re?(this.l=+ce,this.a=+Te,void(this.b=+Le)):arguments.length<2?ce instanceof Re?new Re(ce.l,ce.a,ce.b):ce instanceof et?Me(ce.h,ce.c,ce.l):Ar((ce=fr(ce)).r,ce.g,ce.b):new Re(ce,Te,Le)}var Xe=18,$e=.95047,ot=1,st=1.08883,yt=Re.prototype=new Pr;yt.brighter=function(ce){return new Re(Math.min(100,this.l+Xe*(arguments.length?ce:1)),this.a,this.b)},yt.darker=function(ce){return new Re(Math.max(0,this.l-Xe*(arguments.length?ce:1)),this.a,this.b)},yt.rgb=function(){return wt(this.l,this.a,this.b)};function wt(ce,Te,Le){var Be=(ce+16)/116,Oe=Be+Te/500,Ke=Be-Le/200;return Oe=gr(Oe)*$e,Be=gr(Be)*ot,Ke=gr(Ke)*st,new fr(Lr(3.2404542*Oe-1.5371385*Be-.4985314*Ke),Lr(-.969266*Oe+1.8760108*Be+.041556*Ke),Lr(.0556434*Oe-.2040259*Be+1.0572252*Ke))}function Vt(ce,Te,Le){return ce>0?new et(Math.atan2(Le,Te)*Tt,Math.sqrt(Te*Te+Le*Le),ce):new et(NaN,NaN,ce)}function gr(ce){return ce>.206893034?ce*ce*ce:(ce-4/29)/7.787037}function wr(ce){return ce>.008856?Math.pow(ce,1/3):7.787037*ce+4/29}function Lr(ce){return Math.round(255*(ce<=.00304?12.92*ce:1.055*Math.pow(ce,1/2.4)-.055))}d.rgb=fr;function fr(ce,Te,Le){return this instanceof fr?(this.r=~~ce,this.g=~~Te,void(this.b=~~Le)):arguments.length<2?ce instanceof fr?new fr(ce.r,ce.g,ce.b):dn(""+ce,fr,Nr):new fr(ce,Te,Le)}function Fr(ce){return new fr(ce>>16,ce>>8&255,ce&255)}function nn(ce){return Fr(ce)+""}var yr=fr.prototype=new Pr;yr.brighter=function(ce){ce=Math.pow(.7,arguments.length?ce:1);var Te=this.r,Le=this.g,Be=this.b,Oe=30;return!Te&&!Le&&!Be?new fr(Oe,Oe,Oe):(Te&&Te<Oe&&(Te=Oe),Le&&Le<Oe&&(Le=Oe),Be&&Be<Oe&&(Be=Oe),new fr(Math.min(255,Te/ce),Math.min(255,Le/ce),Math.min(255,Be/ce)))},yr.darker=function(ce){return ce=Math.pow(.7,arguments.length?ce:1),new fr(ce*this.r,ce*this.g,ce*this.b)},yr.hsl=function(){return Yr(this.r,this.g,this.b)},yr.toString=function(){return"#"+_r(this.r)+_r(this.g)+_r(this.b)};function _r(ce){return ce<16?"0"+Math.max(0,ce).toString(16):Math.min(255,ce).toString(16)}function dn(ce,Te,Le){var Be=0,Oe=0,Ke=0,bt,vt,Ct;if(bt=/([a-z]+)\((.*)\)/.exec(ce=ce.toLowerCase()),bt)switch(vt=bt[2].split(","),bt[1]){case"hsl":return Le(parseFloat(vt[0]),parseFloat(vt[1])/100,parseFloat(vt[2])/100);case"rgb":return Te(rn(vt[0]),rn(vt[1]),rn(vt[2]))}return(Ct=Zr.get(ce))?Te(Ct.r,Ct.g,Ct.b):(ce!=null&&ce.charAt(0)==="#"&&!isNaN(Ct=parseInt(ce.slice(1),16))&&(ce.length===4?(Be=(Ct&3840)>>4,Be=Be>>4|Be,Oe=Ct&240,Oe=Oe>>4|Oe,Ke=Ct&15,Ke=Ke<<4|Ke):ce.length===7&&(Be=(Ct&16711680)>>16,Oe=(Ct&65280)>>8,Ke=Ct&255)),Te(Be,Oe,Ke))}function Yr(ce,Te,Le){var Be=Math.min(ce/=255,Te/=255,Le/=255),Oe=Math.max(ce,Te,Le),Ke=Oe-Be,bt,vt,Ct=(Oe+Be)/2;return Ke?(vt=Ct<.5?Ke/(Oe+Be):Ke/(2-Oe-Be),ce==Oe?bt=(Te-Le)/Ke+(Te<Le?6:0):Te==Oe?bt=(Le-ce)/Ke+2:bt=(ce-Te)/Ke+4,bt*=60):(bt=NaN,vt=Ct>0&&Ct<1?0:bt),new Sr(bt,vt,Ct)}function Ar(ce,Te,Le){ce=an(ce),Te=an(Te),Le=an(Le);var Be=wr((.4124564*ce+.3575761*Te+.1804375*Le)/$e),Oe=wr((.2126729*ce+.7151522*Te+.072175*Le)/ot),Ke=wr((.0193339*ce+.119192*Te+.9503041*Le)/st);return Re(116*Oe-16,500*(Be-Oe),200*(Oe-Ke))}function an(ce){return(ce/=255)<=.04045?ce/12.92:Math.pow((ce+.055)/1.055,2.4)}function rn(ce){var Te=parseFloat(ce);return ce.charAt(ce.length-1)==="%"?Math.round(Te*2.55):Te}var Zr=d.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Zr.forEach(function(ce,Te){Zr.set(ce,Fr(Te))});function at(ce){return typeof ce=="function"?ce:function(){return ce}}d.functor=at,d.xhr=zt(R);function zt(ce){return function(Te,Le,Be){return arguments.length===2&&typeof Le=="function"&&(Be=Le,Le=null),er(Te,Le,ce,Be)}}function er(ce,Te,Le,Be){var Oe={},Ke=d.dispatch("beforesend","progress","load","error"),bt={},vt=new XMLHttpRequest,Ct=null;self.XDomainRequest&&!("withCredentials"in vt)&&/^(http(s)?:)?\/\//.test(ce)&&(vt=new XDomainRequest),"onload"in vt?vt.onload=vt.onerror=Ut:vt.onreadystatechange=function(){vt.readyState>3&&Ut()};function Ut(){var Wt=vt.status,Xt;if(!Wt&&Vr(vt)||Wt>=200&&Wt<300||Wt===304){try{Xt=Le.call(Oe,vt)}catch(br){Ke.error.call(Oe,br);return}Ke.load.call(Oe,Xt)}else Ke.error.call(Oe,vt)}return vt.onprogress=function(Wt){var Xt=d.event;d.event=Wt;try{Ke.progress.call(Oe,vt)}finally{d.event=Xt}},Oe.header=function(Wt,Xt){return Wt=(Wt+"").toLowerCase(),arguments.length<2?bt[Wt]:(Xt==null?delete bt[Wt]:bt[Wt]=Xt+"",Oe)},Oe.mimeType=function(Wt){return arguments.length?(Te=Wt==null?null:Wt+"",Oe):Te},Oe.responseType=function(Wt){return arguments.length?(Ct=Wt,Oe):Ct},Oe.response=function(Wt){return Le=Wt,Oe},["get","post"].forEach(function(Wt){Oe[Wt]=function(){return Oe.send.apply(Oe,[Wt].concat(b(arguments)))}}),Oe.send=function(Wt,Xt,br){if(arguments.length===2&&typeof Xt=="function"&&(br=Xt,Xt=null),vt.open(Wt,ce,!0),Te!=null&&!("accept"in bt)&&(bt.accept=Te+",*/*"),vt.setRequestHeader)for(var Qr in bt)vt.setRequestHeader(Qr,bt[Qr]);return Te!=null&&vt.overrideMimeType&&vt.overrideMimeType(Te),Ct!=null&&(vt.responseType=Ct),br!=null&&Oe.on("error",br).on("load",function(cn){br(null,cn)}),Ke.beforesend.call(Oe,vt),vt.send(Xt==null?null:Xt),Oe},Oe.abort=function(){return vt.abort(),Oe},d.rebind(Oe,Ke,"on"),Be==null?Oe:Oe.get(hr(Be))}function hr(ce){return ce.length===1?function(Te,Le){ce(Te==null?Le:null)}:ce}function Vr(ce){var Te=ce.responseType;return Te&&Te!=="text"?ce.response:ce.responseText}d.dsv=function(ce,Te){var Le=new RegExp('["'+ce+`
]`),Be=ce.charCodeAt(0);function Oe(Ut,Wt,Xt){arguments.length<3&&(Xt=Wt,Wt=null);var br=er(Ut,Te,Wt==null?Ke:bt(Wt),Xt);return br.row=function(Qr){return arguments.length?br.response((Wt=Qr)==null?Ke:bt(Qr)):Wt},br}function Ke(Ut){return Oe.parse(Ut.responseText)}function bt(Ut){return function(Wt){return Oe.parse(Wt.responseText,Ut)}}Oe.parse=function(Ut,Wt){var Xt;return Oe.parseRows(Ut,function(br,Qr){if(Xt)return Xt(br,Qr-1);var cn=function(Mr){for(var Or={},Xr=br.length,ln=0;ln<Xr;++ln)Or[br[ln]]=Mr[ln];return Or};Xt=Wt?function(Mr,Or){return Wt(cn(Mr),Or)}:cn})},Oe.parseRows=function(Ut,Wt){var Xt={},br={},Qr=[],cn=Ut.length,Mr=0,Or=0,Xr,ln;function fn(){if(Mr>=cn)return br;if(ln)return ln=!1,Xt;var Gn=Mr;if(Ut.charCodeAt(Gn)===34){for(var ra=Gn;ra++<cn;)if(Ut.charCodeAt(ra)===34){if(Ut.charCodeAt(ra+1)!==34)break;++ra}Mr=ra+2;var wa=Ut.charCodeAt(ra+1);return wa===13?(ln=!0,Ut.charCodeAt(ra+2)===10&&++Mr):wa===10&&(ln=!0),Ut.slice(Gn+1,ra).replace(/""/g,'"')}for(;Mr<cn;){var wa=Ut.charCodeAt(Mr++),oa=1;if(wa===10)ln=!0;else if(wa===13)ln=!0,Ut.charCodeAt(Mr)===10&&(++Mr,++oa);else if(wa!==Be)continue;return Ut.slice(Gn,Mr-oa)}return Ut.slice(Gn)}for(;(Xr=fn())!==br;){for(var Kr=[];Xr!==Xt&&Xr!==br;)Kr.push(Xr),Xr=fn();Wt&&(Kr=Wt(Kr,Or++))==null||Qr.push(Kr)}return Qr},Oe.format=function(Ut){if(Array.isArray(Ut[0]))return Oe.formatRows(Ut);var Wt=new I,Xt=[];return Ut.forEach(function(br){for(var Qr in br)Wt.has(Qr)||Xt.push(Wt.add(Qr))}),[Xt.map(Ct).join(ce)].concat(Ut.map(function(br){return Xt.map(function(Qr){return Ct(br[Qr])}).join(ce)})).join(`
`)},Oe.formatRows=function(Ut){return Ut.map(vt).join(`
`)};function vt(Ut){return Ut.map(Ct).join(ce)}function Ct(Ut){return Le.test(Ut)?'"'+Ut.replace(/\"/g,'""')+'"':Ut}return Oe},d.csv=d.dsv(",","text/csv"),d.tsv=d.dsv("	","text/tab-separated-values");var Rr,Er,xr,Wr,Rn=this[O(this,"requestAnimationFrame")]||function(ce){setTimeout(ce,17)};d.timer=function(){En.apply(this,arguments)};function En(ce,Te,Le){var Be=arguments.length;Be<2&&(Te=0),Be<3&&(Le=Date.now());var Oe=Le+Te,Ke={c:ce,t:Oe,n:null};return Er?Er.n=Ke:Rr=Ke,Er=Ke,xr||(Wr=clearTimeout(Wr),xr=1,Rn(ea)),Ke}function ea(){var ce=ia(),Te=Aa()-ce;Te>24?(isFinite(Te)&&(clearTimeout(Wr),Wr=setTimeout(ea,Te)),xr=0):(xr=1,Rn(ea))}d.timer.flush=function(){ia(),Aa()};function ia(){for(var ce=Date.now(),Te=Rr;Te;)ce>=Te.t&&Te.c(ce-Te.t)&&(Te.c=null),Te=Te.n;return ce}function Aa(){for(var ce,Te=Rr,Le=1/0;Te;)Te.c?(Te.t<Le&&(Le=Te.t),Te=(ce=Te).n):Te=ce?ce.n=Te.n:Rr=Te.n;return Er=ce,Le}d.round=function(ce,Te){return Te?Math.round(ce*(Te=Math.pow(10,Te)))/Te:Math.round(ce)},d.geom={};function ya(ce){return ce[0]}function pr(ce){return ce[1]}d.geom.hull=function(ce){var Te=ya,Le=pr;if(arguments.length)return Be(ce);function Be(Oe){if(Oe.length<3)return[];var Ke=at(Te),bt=at(Le),vt,Ct=Oe.length,Ut=[],Wt=[];for(vt=0;vt<Ct;vt++)Ut.push([+Ke.call(this,Oe[vt],vt),+bt.call(this,Oe[vt],vt),vt]);for(Ut.sort($r),vt=0;vt<Ct;vt++)Wt.push([Ut[vt][0],-Ut[vt][1]]);var Xt=vn(Ut),br=vn(Wt),Qr=br[0]===Xt[0],cn=br[br.length-1]===Xt[Xt.length-1],Mr=[];for(vt=Xt.length-1;vt>=0;--vt)Mr.push(Oe[Ut[Xt[vt]][2]]);for(vt=+Qr;vt<br.length-cn;++vt)Mr.push(Oe[Ut[br[vt]][2]]);return Mr}return Be.x=function(Oe){return arguments.length?(Te=Oe,Be):Te},Be.y=function(Oe){return arguments.length?(Le=Oe,Be):Le},Be};function vn(ce){for(var Te=ce.length,Le=[0,1],Be=2,Oe=2;Oe<Te;Oe++){for(;Be>1&&Ot(ce[Le[Be-2]],ce[Le[Be-1]],ce[Oe])<=0;)--Be;Le[Be++]=Oe}return Le.slice(0,Be)}function $r(ce,Te){return ce[0]-Te[0]||ce[1]-Te[1]}d.geom.polygon=function(ce){return le(ce,Fn),ce};var Fn=d.geom.polygon.prototype=[];Fn.area=function(){for(var ce=-1,Te=this.length,Le,Be=this[Te-1],Oe=0;++ce<Te;)Le=Be,Be=this[ce],Oe+=Le[1]*Be[0]-Le[0]*Be[1];return Oe*.5},Fn.centroid=function(ce){var Te=-1,Le=this.length,Be=0,Oe=0,Ke,bt=this[Le-1],vt;for(arguments.length||(ce=-1/(6*this.area()));++Te<Le;)Ke=bt,bt=this[Te],vt=Ke[0]*bt[1]-bt[0]*Ke[1],Be+=(Ke[0]+bt[0])*vt,Oe+=(Ke[1]+bt[1])*vt;return[Be*ce,Oe*ce]},Fn.clip=function(ce){for(var Te,Le=ta(ce),Be=-1,Oe=this.length-ta(this),Ke,bt,vt=this[Oe-1],Ct,Ut,Wt;++Be<Oe;){for(Te=ce.slice(),ce.length=0,Ct=this[Be],Ut=Te[(bt=Te.length-Le)-1],Ke=-1;++Ke<bt;)Wt=Te[Ke],Bn(Wt,vt,Ct)?(Bn(Ut,vt,Ct)||ce.push(ca(Ut,Wt,vt,Ct)),ce.push(Wt)):Bn(Ut,vt,Ct)&&ce.push(ca(Ut,Wt,vt,Ct)),Ut=Wt;Le&&ce.push(ce[0]),vt=Ct}return ce};function Bn(ce,Te,Le){return(Le[0]-Te[0])*(ce[1]-Te[1])<(Le[1]-Te[1])*(ce[0]-Te[0])}function ca(ce,Te,Le,Be){var Oe=ce[0],Ke=Le[0],bt=Te[0]-Oe,vt=Be[0]-Ke,Ct=ce[1],Ut=Le[1],Wt=Te[1]-Ct,Xt=Be[1]-Ut,br=(vt*(Ct-Ut)-Xt*(Oe-Ke))/(Xt*bt-vt*Wt);return[Oe+br*bt,Ct+br*Wt]}function ta(ce){var Te=ce[0],Le=ce[ce.length-1];return!(Te[0]-Le[0]||Te[1]-Le[1])}var Un,la,da,ur=[],Dr,sn,tn=[];function mn(){eo(this),this.edge=this.site=this.circle=null}function wn(ce){var Te=ur.pop()||new mn;return Te.site=ce,Te}function gn(ce){pn(ce),da.remove(ce),ur.push(ce),eo(ce)}function mr(ce){var Te=ce.circle,Le=Te.x,Be=Te.cy,Oe={x:Le,y:Be},Ke=ce.P,bt=ce.N,vt=[ce];gn(ce);for(var Ct=Ke;Ct.circle&&p(Le-Ct.circle.x)<ht&&p(Be-Ct.circle.cy)<ht;)Ke=Ct.P,vt.unshift(Ct),gn(Ct),Ct=Ke;vt.unshift(Ct),pn(Ct);for(var Ut=bt;Ut.circle&&p(Le-Ut.circle.x)<ht&&p(Be-Ut.circle.cy)<ht;)bt=Ut.N,vt.push(Ut),gn(Ut),Ut=bt;vt.push(Ut),pn(Ut);var Wt=vt.length,Xt;for(Xt=1;Xt<Wt;++Xt)Ut=vt[Xt],Ct=vt[Xt-1],No(Ut.edge,Ct.site,Ut.site,Oe);Ct=vt[0],Ut=vt[Wt-1],Ut.edge=ka(Ct.site,Ut.site,null,Oe),Hn(Ct),Hn(Ut)}function rr(ce){for(var Te=ce.x,Le=ce.y,Be,Oe,Ke,bt,vt=da._;vt;)if(Ke=zr(vt,Le)-Te,Ke>ht)vt=vt.L;else if(bt=Te-jr(vt,Le),bt>ht){if(!vt.R){Be=vt;break}vt=vt.R}else{Ke>-ht?(Be=vt.P,Oe=vt):bt>-ht?(Be=vt,Oe=vt.N):Be=Oe=vt;break}var Ct=wn(ce);if(da.insert(Be,Ct),!(!Be&&!Oe)){if(Be===Oe){pn(Be),Oe=wn(Be.site),da.insert(Ct,Oe),Ct.edge=Oe.edge=ka(Be.site,Ct.site),Hn(Be),Hn(Oe);return}if(!Oe){Ct.edge=ka(Be.site,Ct.site);return}pn(Be),pn(Oe);var Ut=Be.site,Wt=Ut.x,Xt=Ut.y,br=ce.x-Wt,Qr=ce.y-Xt,cn=Oe.site,Mr=cn.x-Wt,Or=cn.y-Xt,Xr=2*(br*Or-Qr*Mr),ln=br*br+Qr*Qr,fn=Mr*Mr+Or*Or,Kr={x:(Or*ln-Qr*fn)/Xr+Wt,y:(br*fn-Mr*ln)/Xr+Xt};No(Oe.edge,Ut,cn,Kr),Ct.edge=ka(Ut,ce,null,Kr),Oe.edge=ka(ce,cn,null,Kr),Hn(Be),Hn(Oe)}}function zr(ce,Te){var Le=ce.site,Be=Le.x,Oe=Le.y,Ke=Oe-Te;if(!Ke)return Be;var bt=ce.P;if(!bt)return-1/0;Le=bt.site;var vt=Le.x,Ct=Le.y,Ut=Ct-Te;if(!Ut)return vt;var Wt=vt-Be,Xt=1/Ke-1/Ut,br=Wt/Ut;return Xt?(-br+Math.sqrt(br*br-2*Xt*(Wt*Wt/(-2*Ut)-Ct+Ut/2+Oe-Ke/2)))/Xt+Be:(Be+vt)/2}function jr(ce,Te){var Le=ce.N;if(Le)return zr(Le,Te);var Be=ce.site;return Be.y===Te?Be.x:1/0}function Sn(ce){this.site=ce,this.edges=[]}Sn.prototype.prepare=function(){for(var ce=this.edges,Te=ce.length,Le;Te--;)Le=ce[Te].edge,(!Le.b||!Le.a)&&ce.splice(Te,1);return ce.sort(aa),ce.length};function On(ce){for(var Te=ce[0][0],Le=ce[1][0],Be=ce[0][1],Oe=ce[1][1],Ke,bt,vt,Ct,Ut=la,Wt=Ut.length,Xt,br,Qr,cn,Mr,Or;Wt--;)if(Xt=Ut[Wt],!(!Xt||!Xt.prepare()))for(Qr=Xt.edges,cn=Qr.length,br=0;br<cn;)Or=Qr[br].end(),vt=Or.x,Ct=Or.y,Mr=Qr[++br%cn].start(),Ke=Mr.x,bt=Mr.y,(p(vt-Ke)>ht||p(Ct-bt)>ht)&&(Qr.splice(br,0,new es(Ys(Xt.site,Or,p(vt-Te)<ht&&Oe-Ct>ht?{x:Te,y:p(Ke-Te)<ht?bt:Oe}:p(Ct-Oe)<ht&&Le-vt>ht?{x:p(bt-Oe)<ht?Ke:Le,y:Oe}:p(vt-Le)<ht&&Ct-Be>ht?{x:Le,y:p(Ke-Le)<ht?bt:Be}:p(Ct-Be)<ht&&vt-Te>ht?{x:p(bt-Be)<ht?Ke:Te,y:Be}:null),Xt.site,null)),++cn)}function aa(ce,Te){return Te.angle-ce.angle}function Zn(){eo(this),this.x=this.y=this.arc=this.site=this.cy=null}function Hn(ce){var Te=ce.P,Le=ce.N;if(!(!Te||!Le)){var Be=Te.site,Oe=ce.site,Ke=Le.site;if(Be!==Ke){var bt=Oe.x,vt=Oe.y,Ct=Be.x-bt,Ut=Be.y-vt,Wt=Ke.x-bt,Or=Ke.y-vt,Xt=2*(Ct*Or-Ut*Wt);if(!(Xt>=-Qe)){var br=Ct*Ct+Ut*Ut,Qr=Wt*Wt+Or*Or,cn=(Or*br-Ut*Qr)/Xt,Mr=(Ct*Qr-Wt*br)/Xt,Or=Mr+vt,Xr=tn.pop()||new Zn;Xr.arc=ce,Xr.site=Oe,Xr.x=cn+bt,Xr.y=Or+Math.sqrt(cn*cn+Mr*Mr),Xr.cy=Or,ce.circle=Xr;for(var ln=null,fn=sn._;fn;)if(Xr.y<fn.y||Xr.y===fn.y&&Xr.x<=fn.x)if(fn.L)fn=fn.L;else{ln=fn.P;break}else if(fn.R)fn=fn.R;else{ln=fn;break}sn.insert(ln,Xr),ln||(Dr=Xr)}}}}function pn(ce){var Te=ce.circle;Te&&(Te.P||(Dr=Te.N),sn.remove(Te),tn.push(Te),eo(Te),ce.circle=null)}function In(ce,Te,Le,Be){return function(Oe){var Ke=Oe.a,bt=Oe.b,vt=Ke.x,Ct=Ke.y,Ut=bt.x,Wt=bt.y,Xt=0,br=1,Qr=Ut-vt,cn=Wt-Ct,Mr;if(Mr=ce-vt,!(!Qr&&Mr>0)){if(Mr/=Qr,Qr<0){if(Mr<Xt)return;Mr<br&&(br=Mr)}else if(Qr>0){if(Mr>br)return;Mr>Xt&&(Xt=Mr)}if(Mr=Le-vt,!(!Qr&&Mr<0)){if(Mr/=Qr,Qr<0){if(Mr>br)return;Mr>Xt&&(Xt=Mr)}else if(Qr>0){if(Mr<Xt)return;Mr<br&&(br=Mr)}if(Mr=Te-Ct,!(!cn&&Mr>0)){if(Mr/=cn,cn<0){if(Mr<Xt)return;Mr<br&&(br=Mr)}else if(cn>0){if(Mr>br)return;Mr>Xt&&(Xt=Mr)}if(Mr=Be-Ct,!(!cn&&Mr<0)){if(Mr/=cn,cn<0){if(Mr>br)return;Mr>Xt&&(Xt=Mr)}else if(cn>0){if(Mr<Xt)return;Mr<br&&(br=Mr)}return Xt>0&&(Oe.a={x:vt+Xt*Qr,y:Ct+Xt*cn}),br<1&&(Oe.b={x:vt+br*Qr,y:Ct+br*cn}),Oe}}}}}}function Yn(ce){for(var Te=Un,Le=In(ce[0][0],ce[0][1],ce[1][0],ce[1][1]),Be=Te.length,Oe;Be--;)Oe=Te[Be],(!ua(Oe,ce)||!Le(Oe)||p(Oe.a.x-Oe.b.x)<ht&&p(Oe.a.y-Oe.b.y)<ht)&&(Oe.a=Oe.b=null,Te.splice(Be,1))}function ua(ce,Te){var Le=ce.b;if(Le)return!0;var Be=ce.a,Oe=Te[0][0],Ke=Te[1][0],bt=Te[0][1],vt=Te[1][1],Ct=ce.l,Ut=ce.r,Wt=Ct.x,Xt=Ct.y,br=Ut.x,Qr=Ut.y,cn=(Wt+br)/2,Mr=(Xt+Qr)/2,Or,Xr;if(Qr===Xt){if(cn<Oe||cn>=Ke)return;if(Wt>br){if(!Be)Be={x:cn,y:bt};else if(Be.y>=vt)return;Le={x:cn,y:vt}}else{if(!Be)Be={x:cn,y:vt};else if(Be.y<bt)return;Le={x:cn,y:bt}}}else if(Or=(Wt-br)/(Qr-Xt),Xr=Mr-Or*cn,Or<-1||Or>1)if(Wt>br){if(!Be)Be={x:(bt-Xr)/Or,y:bt};else if(Be.y>=vt)return;Le={x:(vt-Xr)/Or,y:vt}}else{if(!Be)Be={x:(vt-Xr)/Or,y:vt};else if(Be.y<bt)return;Le={x:(bt-Xr)/Or,y:bt}}else if(Xt<Qr){if(!Be)Be={x:Oe,y:Or*Oe+Xr};else if(Be.x>=Ke)return;Le={x:Ke,y:Or*Ke+Xr}}else{if(!Be)Be={x:Ke,y:Or*Ke+Xr};else if(Be.x<Oe)return;Le={x:Oe,y:Or*Oe+Xr}}return ce.a=Be,ce.b=Le,!0}function Ha(ce,Te){this.l=ce,this.r=Te,this.a=this.b=null}function ka(ce,Te,Le,Be){var Oe=new Ha(ce,Te);return Un.push(Oe),Le&&No(Oe,ce,Te,Le),Be&&No(Oe,Te,ce,Be),la[ce.i].edges.push(new es(Oe,ce,Te)),la[Te.i].edges.push(new es(Oe,Te,ce)),Oe}function Ys(ce,Te,Le){var Be=new Ha(ce,null);return Be.a=Te,Be.b=Le,Un.push(Be),Be}function No(ce,Te,Le,Be){!ce.a&&!ce.b?(ce.a=Be,ce.l=Te,ce.r=Le):ce.l===Le?ce.b=Be:ce.a=Be}function es(ce,Te,Le){var Be=ce.a,Oe=ce.b;this.edge=ce,this.site=Te,this.angle=Le?Math.atan2(Le.y-Te.y,Le.x-Te.x):ce.l===Te?Math.atan2(Oe.x-Be.x,Be.y-Oe.y):Math.atan2(Be.x-Oe.x,Oe.y-Be.y)}es.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function Ls(){this._=null}function eo(ce){ce.U=ce.C=ce.L=ce.R=ce.P=ce.N=null}Ls.prototype={insert:function(ce,Te){var Le,Be,Oe;if(ce){if(Te.P=ce,Te.N=ce.N,ce.N&&(ce.N.P=Te),ce.N=Te,ce.R){for(ce=ce.R;ce.L;)ce=ce.L;ce.L=Te}else ce.R=Te;Le=ce}else this._?(ce=Xs(this._),Te.P=null,Te.N=ce,ce.P=ce.L=Te,Le=ce):(Te.P=Te.N=null,this._=Te,Le=null);for(Te.L=Te.R=null,Te.U=Le,Te.C=!0,ce=Te;Le&&Le.C;)Be=Le.U,Le===Be.L?(Oe=Be.R,Oe&&Oe.C?(Le.C=Oe.C=!1,Be.C=!0,ce=Be):(ce===Le.R&&(Pi(this,Le),ce=Le,Le=ce.U),Le.C=!1,Be.C=!0,Ws(this,Be))):(Oe=Be.L,Oe&&Oe.C?(Le.C=Oe.C=!1,Be.C=!0,ce=Be):(ce===Le.L&&(Ws(this,Le),ce=Le,Le=ce.U),Le.C=!1,Be.C=!0,Pi(this,Be))),Le=ce.U;this._.C=!1},remove:function(ce){ce.N&&(ce.N.P=ce.P),ce.P&&(ce.P.N=ce.N),ce.N=ce.P=null;var Te=ce.U,Le,Be=ce.L,Oe=ce.R,Ke,bt;if(Be?Oe?Ke=Xs(Oe):Ke=Be:Ke=Oe,Te?Te.L===ce?Te.L=Ke:Te.R=Ke:this._=Ke,Be&&Oe?(bt=Ke.C,Ke.C=ce.C,Ke.L=Be,Be.U=Ke,Ke!==Oe?(Te=Ke.U,Ke.U=ce.U,ce=Ke.R,Te.L=ce,Ke.R=Oe,Oe.U=Ke):(Ke.U=Te,Te=Ke,ce=Ke.R)):(bt=ce.C,ce=Ke),ce&&(ce.U=Te),!bt){if(ce&&ce.C){ce.C=!1;return}do{if(ce===this._)break;if(ce===Te.L){if(Le=Te.R,Le.C&&(Le.C=!1,Te.C=!0,Pi(this,Te),Le=Te.R),Le.L&&Le.L.C||Le.R&&Le.R.C){(!Le.R||!Le.R.C)&&(Le.L.C=!1,Le.C=!0,Ws(this,Le),Le=Te.R),Le.C=Te.C,Te.C=Le.R.C=!1,Pi(this,Te),ce=this._;break}}else if(Le=Te.L,Le.C&&(Le.C=!1,Te.C=!0,Ws(this,Te),Le=Te.L),Le.L&&Le.L.C||Le.R&&Le.R.C){(!Le.L||!Le.L.C)&&(Le.R.C=!1,Le.C=!0,Pi(this,Le),Le=Te.L),Le.C=Te.C,Te.C=Le.L.C=!1,Ws(this,Te),ce=this._;break}Le.C=!0,ce=Te,Te=Te.U}while(!ce.C);ce&&(ce.C=!1)}}};function Pi(ce,Te){var Le=Te,Be=Te.R,Oe=Le.U;Oe?Oe.L===Le?Oe.L=Be:Oe.R=Be:ce._=Be,Be.U=Oe,Le.U=Be,Le.R=Be.L,Le.R&&(Le.R.U=Le),Be.L=Le}function Ws(ce,Te){var Le=Te,Be=Te.L,Oe=Le.U;Oe?Oe.L===Le?Oe.L=Be:Oe.R=Be:ce._=Be,Be.U=Oe,Le.U=Be,Le.L=Be.R,Le.L&&(Le.L.U=Le),Be.R=Le}function Xs(ce){for(;ce.L;)ce=ce.L;return ce}function ts(ce,Te){var Le=ce.sort(Ml).pop(),Be,Oe,Ke;for(Un=[],la=new Array(ce.length),da=new Ls,sn=new Ls;;)if(Ke=Dr,Le&&(!Ke||Le.y<Ke.y||Le.y===Ke.y&&Le.x<Ke.x))(Le.x!==Be||Le.y!==Oe)&&(la[Le.i]=new Sn(Le),rr(Le),Be=Le.x,Oe=Le.y),Le=ce.pop();else if(Ke)mr(Ke.arc);else break;Te&&(Yn(Te),On(Te));var bt={cells:la,edges:Un};return da=sn=Un=la=null,bt}function Ml(ce,Te){return Te.y-ce.y||Te.x-ce.x}d.geom.voronoi=function(ce){var Te=ya,Le=pr,Be=Te,Oe=Le,Ke=Nl;if(ce)return bt(ce);function bt(Ct){var Ut=new Array(Ct.length),Wt=Ke[0][0],Xt=Ke[0][1],br=Ke[1][0],Qr=Ke[1][1];return ts(vt(Ct),Ke).cells.forEach(function(cn,Mr){var Or=cn.edges,Xr=cn.site,ln=Ut[Mr]=Or.length?Or.map(function(fn){var Kr=fn.start();return[Kr.x,Kr.y]}):Xr.x>=Wt&&Xr.x<=br&&Xr.y>=Xt&&Xr.y<=Qr?[[Wt,Qr],[br,Qr],[br,Xt],[Wt,Xt]]:[];ln.point=Ct[Mr]}),Ut}function vt(Ct){return Ct.map(function(Ut,Wt){return{x:Math.round(Be(Ut,Wt)/ht)*ht,y:Math.round(Oe(Ut,Wt)/ht)*ht,i:Wt}})}return bt.links=function(Ct){return ts(vt(Ct)).edges.filter(function(Ut){return Ut.l&&Ut.r}).map(function(Ut){return{source:Ct[Ut.l.i],target:Ct[Ut.r.i]}})},bt.triangles=function(Ct){var Ut=[];return ts(vt(Ct)).cells.forEach(function(Wt,Xt){for(var br=Wt.site,Qr=Wt.edges.sort(aa),cn=-1,Mr=Qr.length,Or,Xr=Qr[Mr-1].edge,ln=Xr.l===br?Xr.r:Xr.l;++cn<Mr;)Or=ln,Xr=Qr[cn].edge,ln=Xr.l===br?Xr.r:Xr.l,Xt<Or.i&&Xt<ln.i&&xu(br,Or,ln)<0&&Ut.push([Ct[Xt],Ct[Or.i],Ct[ln.i]])}),Ut},bt.x=function(Ct){return arguments.length?(Be=at(Te=Ct),bt):Te},bt.y=function(Ct){return arguments.length?(Oe=at(Le=Ct),bt):Le},bt.clipExtent=function(Ct){return arguments.length?(Ke=Ct==null?Nl:Ct,bt):Ke===Nl?null:Ke},bt.size=function(Ct){return arguments.length?bt.clipExtent(Ct&&[[0,0],Ct]):Ke===Nl?null:Ke&&Ke[1]},bt};var Nl=[[-1e6,-1e6],[1e6,1e6]];function xu(ce,Te,Le){return(ce.x-Le.x)*(Te.y-ce.y)-(ce.x-Te.x)*(Le.y-ce.y)}d.geom.delaunay=function(ce){return d.geom.voronoi().triangles(ce)},d.geom.quadtree=function(ce,Te,Le,Be,Oe){var Ke=ya,bt=pr,vt;if(vt=arguments.length)return Ke=hi,bt=ol,vt===3&&(Oe=Le,Be=Te,Le=Te=0),Ct(ce);function Ct(Ut){var Wt,Xt=at(Ke),br=at(bt),Qr,cn,Mr,Or,Xr,ln,fn,Kr;if(Te!=null)Xr=Te,ln=Le,fn=Be,Kr=Oe;else if(fn=Kr=-(Xr=ln=1/0),Qr=[],cn=[],Or=Ut.length,vt)for(Mr=0;Mr<Or;++Mr)Wt=Ut[Mr],Wt.x<Xr&&(Xr=Wt.x),Wt.y<ln&&(ln=Wt.y),Wt.x>fn&&(fn=Wt.x),Wt.y>Kr&&(Kr=Wt.y),Qr.push(Wt.x),cn.push(Wt.y);else for(Mr=0;Mr<Or;++Mr){var Gn=+Xt(Wt=Ut[Mr],Mr),ra=+br(Wt,Mr);Gn<Xr&&(Xr=Gn),ra<ln&&(ln=ra),Gn>fn&&(fn=Gn),ra>Kr&&(Kr=ra),Qr.push(Gn),cn.push(ra)}var wa=fn-Xr,oa=Kr-ln;wa>oa?Kr=ln+wa:fn=Xr+oa;function Ea(Ra,$a,gi,ho,Ii,ha,ai,Xa){if(!(isNaN(gi)||isNaN(ho)))if(Ra.leaf){var Mi=Ra.x,si=Ra.y;if(Mi!=null)if(p(Mi-gi)+p(si-ho)<.01)fa(Ra,$a,gi,ho,Ii,ha,ai,Xa);else{var so=Ra.point;Ra.x=Ra.y=Ra.point=null,fa(Ra,so,Mi,si,Ii,ha,ai,Xa),fa(Ra,$a,gi,ho,Ii,ha,ai,Xa)}else Ra.x=gi,Ra.y=ho,Ra.point=$a}else fa(Ra,$a,gi,ho,Ii,ha,ai,Xa)}function fa(Ra,$a,gi,ho,Ii,ha,ai,Xa){var Mi=(Ii+ai)*.5,si=(ha+Xa)*.5,so=gi>=Mi,$i=ho>=si,yo=$i<<1|so;Ra.leaf=!1,Ra=Ra.nodes[yo]||(Ra.nodes[yo]=js()),so?Ii=Mi:ai=Mi,$i?ha=si:Xa=si,Ea(Ra,$a,gi,ho,Ii,ha,ai,Xa)}var Va=js();if(Va.add=function(Ra){Ea(Va,Ra,+Xt(Ra,++Mr),+br(Ra,Mr),Xr,ln,fn,Kr)},Va.visit=function(Ra){Ui(Ra,Va,Xr,ln,fn,Kr)},Va.find=function(Ra){return So(Va,Ra[0],Ra[1],Xr,ln,fn,Kr)},Mr=-1,Te==null){for(;++Mr<Or;)Ea(Va,Ut[Mr],Qr[Mr],cn[Mr],Xr,ln,fn,Kr);--Mr}else Ut.forEach(Va.add);return Qr=cn=Ut=Wt=null,Va}return Ct.x=function(Ut){return arguments.length?(Ke=Ut,Ct):Ke},Ct.y=function(Ut){return arguments.length?(bt=Ut,Ct):bt},Ct.extent=function(Ut){return arguments.length?(Ut==null?Te=Le=Be=Oe=null:(Te=+Ut[0][0],Le=+Ut[0][1],Be=+Ut[1][0],Oe=+Ut[1][1]),Ct):Te==null?null:[[Te,Le],[Be,Oe]]},Ct.size=function(Ut){return arguments.length?(Ut==null?Te=Le=Be=Oe=null:(Te=Le=0,Be=+Ut[0],Oe=+Ut[1]),Ct):Te==null?null:[Be-Te,Oe-Le]},Ct};function hi(ce){return ce.x}function ol(ce){return ce.y}function js(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Ui(ce,Te,Le,Be,Oe,Ke){if(!ce(Te,Le,Be,Oe,Ke)){var bt=(Le+Oe)*.5,vt=(Be+Ke)*.5,Ct=Te.nodes;Ct[0]&&Ui(ce,Ct[0],Le,Be,bt,vt),Ct[1]&&Ui(ce,Ct[1],bt,Be,Oe,vt),Ct[2]&&Ui(ce,Ct[2],Le,vt,bt,Ke),Ct[3]&&Ui(ce,Ct[3],bt,vt,Oe,Ke)}}function So(ce,Te,Le,Be,Oe,Ke,bt){var vt=1/0,Ct;return function Ut(Wt,Xt,br,Qr,cn){if(!(Xt>Ke||br>bt||Qr<Be||cn<Oe)){if(Mr=Wt.point){var Mr,Or=Te-Wt.x,Xr=Le-Wt.y,ln=Or*Or+Xr*Xr;if(ln<vt){var fn=Math.sqrt(vt=ln);Be=Te-fn,Oe=Le-fn,Ke=Te+fn,bt=Le+fn,Ct=Mr}}for(var Kr=Wt.nodes,Gn=(Xt+Qr)*.5,ra=(br+cn)*.5,wa=Te>=Gn,oa=Le>=ra,Ea=oa<<1|wa,fa=Ea+4;Ea<fa;++Ea)if(Wt=Kr[Ea&3])switch(Ea&3){case 0:Ut(Wt,Xt,br,Gn,ra);break;case 1:Ut(Wt,Gn,br,Qr,ra);break;case 2:Ut(Wt,Xt,ra,Gn,cn);break;case 3:Ut(Wt,Gn,ra,Qr,cn);break}}}(ce,Be,Oe,Ke,bt),Ct}d.interpolateRgb=Bl;function Bl(ce,Te){ce=d.rgb(ce),Te=d.rgb(Te);var Le=ce.r,Be=ce.g,Oe=ce.b,Ke=Te.r-Le,bt=Te.g-Be,vt=Te.b-Oe;return function(Ct){return"#"+_r(Math.round(Le+Ke*Ct))+_r(Math.round(Be+bt*Ct))+_r(Math.round(Oe+vt*Ct))}}d.interpolateObject=_s;function _s(ce,Te){var Le={},Be={},Oe;for(Oe in ce)Oe in Te?Le[Oe]=io(ce[Oe],Te[Oe]):Be[Oe]=ce[Oe];for(Oe in Te)Oe in ce||(Be[Oe]=Te[Oe]);return function(Ke){for(Oe in Le)Be[Oe]=Le[Oe](Ke);return Be}}d.interpolateNumber=Di;function Di(ce,Te){return ce=+ce,Te=+Te,function(Le){return ce*(1-Le)+Te*Le}}d.interpolateString=Sl;function Sl(ce,Te){var Le=Ji.lastIndex=Fi.lastIndex=0,Be,Oe,Ke,bt=-1,vt=[],Ct=[];for(ce=ce+"",Te=Te+"";(Be=Ji.exec(ce))&&(Oe=Fi.exec(Te));)(Ke=Oe.index)>Le&&(Ke=Te.slice(Le,Ke),vt[bt]?vt[bt]+=Ke:vt[++bt]=Ke),(Be=Be[0])===(Oe=Oe[0])?vt[bt]?vt[bt]+=Oe:vt[++bt]=Oe:(vt[++bt]=null,Ct.push({i:bt,x:Di(Be,Oe)})),Le=Fi.lastIndex;return Le<Te.length&&(Ke=Te.slice(Le),vt[bt]?vt[bt]+=Ke:vt[++bt]=Ke),vt.length<2?Ct[0]?(Te=Ct[0].x,function(Ut){return Te(Ut)+""}):function(){return Te}:(Te=Ct.length,function(Ut){for(var Wt=0,Xt;Wt<Te;++Wt)vt[(Xt=Ct[Wt]).i]=Xt.x(Ut);return vt.join("")})}var Ji=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Fi=new RegExp(Ji.source,"g");d.interpolate=io;function io(ce,Te){for(var Le=d.interpolators.length,Be;--Le>=0&&!(Be=d.interpolators[Le](ce,Te)););return Be}d.interpolators=[function(ce,Te){var Le=typeof Te;return(Le==="string"?Zr.has(Te.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(Te)?Bl:Sl:Te instanceof Pr?Bl:Array.isArray(Te)?Qi:Le==="object"&&isNaN(Te)?_s:Di)(ce,Te)}],d.interpolateArray=Qi;function Qi(ce,Te){var Le=[],Be=[],Oe=ce.length,Ke=Te.length,bt=Math.min(ce.length,Te.length),vt;for(vt=0;vt<bt;++vt)Le.push(io(ce[vt],Te[vt]));for(;vt<Oe;++vt)Be[vt]=ce[vt];for(;vt<Ke;++vt)Be[vt]=Te[vt];return function(Ct){for(vt=0;vt<bt;++vt)Be[vt]=Le[vt](Ct);return Be}}var us=function(){return R},sl=d.map({linear:us,poly:Ps,quad:function(){return ko},cubic:function(){return ff},sin:function(){return nu},exp:function(){return cf},circle:function(){return hf},elastic:ll,back:au,bounce:function(){return Ds}}),Bu=d.map({in:R,out:Uu,"in-out":Zs,"out-in":function(ce){return Zs(Uu(ce))}});d.ease=function(ce){var Te=ce.indexOf("-"),Le=Te>=0?ce.slice(0,Te):ce,Be=Te>=0?ce.slice(Te+1):"in";return Le=sl.get(Le)||us,Be=Bu.get(Be)||R,rs(Be(Le.apply(null,l.call(arguments,1))))};function rs(ce){return function(Te){return Te<=0?0:Te>=1?1:ce(Te)}}function Uu(ce){return function(Te){return 1-ce(1-Te)}}function Zs(ce){return function(Te){return .5*(Te<.5?ce(2*Te):2-ce(2-2*Te))}}function ko(ce){return ce*ce}function ff(ce){return ce*ce*ce}function Ks(ce){if(ce<=0)return 0;if(ce>=1)return 1;var Te=ce*ce,Le=Te*ce;return 4*(ce<.5?Le:3*(ce-Te)+Le-.75)}function Ps(ce){return function(Te){return Math.pow(Te,ce)}}function nu(ce){return 1-Math.cos(ce*ut)}function cf(ce){return Math.pow(2,10*(ce-1))}function hf(ce){return 1-Math.sqrt(1-ce*ce)}function ll(ce,Te){var Le;return arguments.length<2&&(Te=.45),arguments.length?Le=Te/je*Math.asin(1/ce):(ce=1,Le=Te/4),function(Be){return 1+ce*Math.pow(2,-10*Be)*Math.sin((Be-Le)*je/Te)}}function au(ce){return ce||(ce=1.70158),function(Te){return Te*Te*((ce+1)*Te-ce)}}function Ds(ce){return ce<1/2.75?7.5625*ce*ce:ce<2/2.75?7.5625*(ce-=1.5/2.75)*ce+.75:ce<2.5/2.75?7.5625*(ce-=2.25/2.75)*ce+.9375:7.5625*(ce-=2.625/2.75)*ce+.984375}d.interpolateHcl=bu;function bu(ce,Te){ce=d.hcl(ce),Te=d.hcl(Te);var Le=ce.h,Be=ce.c,Oe=ce.l,Ke=Te.h-Le,bt=Te.c-Be,vt=Te.l-Oe;return isNaN(bt)&&(bt=0,Be=isNaN(Be)?Te.c:Be),isNaN(Ke)?(Ke=0,Le=isNaN(Le)?Te.h:Le):Ke>180?Ke-=360:Ke<-180&&(Ke+=360),function(Ct){return Me(Le+Ke*Ct,Be+bt*Ct,Oe+vt*Ct)+""}}d.interpolateHsl=kl;function kl(ce,Te){ce=d.hsl(ce),Te=d.hsl(Te);var Le=ce.h,Be=ce.s,Oe=ce.l,Ke=Te.h-Le,bt=Te.s-Be,vt=Te.l-Oe;return isNaN(bt)&&(bt=0,Be=isNaN(Be)?Te.s:Be),isNaN(Ke)?(Ke=0,Le=isNaN(Le)?Te.h:Le):Ke>180?Ke-=360:Ke<-180&&(Ke+=360),function(Ct){return Nr(Le+Ke*Ct,Be+bt*Ct,Oe+vt*Ct)+""}}d.interpolateLab=_u;function _u(ce,Te){ce=d.lab(ce),Te=d.lab(Te);var Le=ce.l,Be=ce.a,Oe=ce.b,Ke=Te.l-Le,bt=Te.a-Be,vt=Te.b-Oe;return function(Ct){return wt(Le+Ke*Ct,Be+bt*Ct,Oe+vt*Ct)+""}}d.interpolateRound=Hu;function Hu(ce,Te){return Te-=ce,function(Le){return Math.round(ce+Te*Le)}}d.transform=function(ce){var Te=w.createElementNS(d.ns.prefix.svg,"g");return(d.transform=function(Le){if(Le!=null){Te.setAttribute("transform",Le);var Be=Te.transform.baseVal.consolidate()}return new iu(Be?Be.matrix:ou)})(ce)};function iu(ce){var Te=[ce.a,ce.b],Le=[ce.c,ce.d],Be=ul(Te),Oe=vf(Te,Le),Ke=ul(wu(Le,Te,-Oe))||0;Te[0]*Le[1]<Le[0]*Te[1]&&(Te[0]*=-1,Te[1]*=-1,Be*=-1,Oe*=-1),this.rotate=(Be?Math.atan2(Te[1],Te[0]):Math.atan2(-Le[0],Le[1]))*Tt,this.translate=[ce.e,ce.f],this.scale=[Be,Ke],this.skew=Ke?Math.atan2(Oe,Ke)*Tt:0}iu.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function vf(ce,Te){return ce[0]*Te[0]+ce[1]*Te[1]}function ul(ce){var Te=Math.sqrt(vf(ce,ce));return Te&&(ce[0]/=Te,ce[1]/=Te),Te}function wu(ce,Te,Le){return ce[0]+=Le*Te[0],ce[1]+=Le*Te[1],ce}var ou={a:1,b:0,c:0,d:1,e:0,f:0};d.interpolateTransform=su;function ws(ce){return ce.length?ce.pop()+",":""}function Ul(ce,Te,Le,Be){if(ce[0]!==Te[0]||ce[1]!==Te[1]){var Oe=Le.push("translate(",null,",",null,")");Be.push({i:Oe-4,x:Di(ce[0],Te[0])},{i:Oe-2,x:Di(ce[1],Te[1])})}else(Te[0]||Te[1])&&Le.push("translate("+Te+")")}function Tu(ce,Te,Le,Be){ce!==Te?(ce-Te>180?Te+=360:Te-ce>180&&(ce+=360),Be.push({i:Le.push(ws(Le)+"rotate(",null,")")-2,x:Di(ce,Te)})):Te&&Le.push(ws(Le)+"rotate("+Te+")")}function Vu(ce,Te,Le,Be){ce!==Te?Be.push({i:Le.push(ws(Le)+"skewX(",null,")")-2,x:Di(ce,Te)}):Te&&Le.push(ws(Le)+"skewX("+Te+")")}function Gu(ce,Te,Le,Be){if(ce[0]!==Te[0]||ce[1]!==Te[1]){var Oe=Le.push(ws(Le)+"scale(",null,",",null,")");Be.push({i:Oe-4,x:Di(ce[0],Te[0])},{i:Oe-2,x:Di(ce[1],Te[1])})}else(Te[0]!==1||Te[1]!==1)&&Le.push(ws(Le)+"scale("+Te+")")}function su(ce,Te){var Le=[],Be=[];return ce=d.transform(ce),Te=d.transform(Te),Ul(ce.translate,Te.translate,Le,Be),Tu(ce.rotate,Te.rotate,Le,Be),Vu(ce.skew,Te.skew,Le,Be),Gu(ce.scale,Te.scale,Le,Be),ce=Te=null,function(Oe){for(var Ke=-1,bt=Be.length,vt;++Ke<bt;)Le[(vt=Be[Ke]).i]=vt.x(Oe);return Le.join("")}}function pf(ce,Te){return Te=(Te-=ce=+ce)||1/Te,function(Le){return(Le-ce)/Te}}function Yu(ce,Te){return Te=(Te-=ce=+ce)||1/Te,function(Le){return Math.max(0,Math.min(1,(Le-ce)/Te))}}d.layout={},d.layout.bundle=function(){return function(ce){for(var Te=[],Le=-1,Be=ce.length;++Le<Be;)Te.push(ns(ce[Le]));return Te}};function ns(ce){for(var Te=ce.source,Le=ce.target,Be=Cl(Te,Le),Oe=[Te];Te!==Be;)Te=Te.parent,Oe.push(Te);for(var Ke=Oe.length;Le!==Be;)Oe.splice(Ke,0,Le),Le=Le.parent;return Oe}function El(ce){for(var Te=[],Le=ce.parent;Le!=null;)Te.push(ce),ce=Le,Le=Le.parent;return Te.push(ce),Te}function Cl(ce,Te){if(ce===Te)return ce;for(var Le=El(ce),Be=El(Te),Oe=Le.pop(),Ke=Be.pop(),bt=null;Oe===Ke;)bt=Oe,Oe=Le.pop(),Ke=Be.pop();return bt}d.layout.chord=function(){var ce={},Te,Le,Be,Oe,Ke=0,bt,vt,Ct;function Ut(){var Xt={},br=[],Qr=d.range(Oe),cn=[],Mr,Or,Xr,ln,fn;for(Te=[],Le=[],Mr=0,ln=-1;++ln<Oe;){for(Or=0,fn=-1;++fn<Oe;)Or+=Be[ln][fn];br.push(Or),cn.push(d.range(Oe)),Mr+=Or}for(bt&&Qr.sort(function(Va,Ra){return bt(br[Va],br[Ra])}),vt&&cn.forEach(function(Va,Ra){Va.sort(function($a,gi){return vt(Be[Ra][$a],Be[Ra][gi])})}),Mr=(je-Ke*Oe)/Mr,Or=0,ln=-1;++ln<Oe;){for(Xr=Or,fn=-1;++fn<Oe;){var Kr=Qr[ln],Gn=cn[Kr][fn],ra=Be[Kr][Gn],wa=Or,oa=Or+=ra*Mr;Xt[Kr+"-"+Gn]={index:Kr,subindex:Gn,startAngle:wa,endAngle:oa,value:ra}}Le[Kr]={index:Kr,startAngle:Xr,endAngle:Or,value:br[Kr]},Or+=Ke}for(ln=-1;++ln<Oe;)for(fn=ln-1;++fn<Oe;){var Ea=Xt[ln+"-"+fn],fa=Xt[fn+"-"+ln];(Ea.value||fa.value)&&Te.push(Ea.value<fa.value?{source:fa,target:Ea}:{source:Ea,target:fa})}Ct&&Wt()}function Wt(){Te.sort(function(Xt,br){return Ct((Xt.source.value+Xt.target.value)/2,(br.source.value+br.target.value)/2)})}return ce.matrix=function(Xt){return arguments.length?(Oe=(Be=Xt)&&Be.length,Te=Le=null,ce):Be},ce.padding=function(Xt){return arguments.length?(Ke=Xt,Te=Le=null,ce):Ke},ce.sortGroups=function(Xt){return arguments.length?(bt=Xt,Te=Le=null,ce):bt},ce.sortSubgroups=function(Xt){return arguments.length?(vt=Xt,Te=null,ce):vt},ce.sortChords=function(Xt){return arguments.length?(Ct=Xt,Te&&Wt(),ce):Ct},ce.chords=function(){return Te||Ut(),Te},ce.groups=function(){return Le||Ut(),Le},ce},d.layout.force=function(){var ce={},Te=d.dispatch("start","tick","end"),Le,Be=[1,1],Oe,Ke,bt=.9,vt=Is,Ct=lo,Ut=-30,Wt=Hl,Xt=.1,br=.64,Qr=[],cn=[],Mr,Or,Xr;function ln(Kr){return function(Gn,ra,wa,oa){if(Gn.point!==Kr){var Ea=Gn.cx-Kr.x,fa=Gn.cy-Kr.y,Va=oa-ra,Ra=Ea*Ea+fa*fa;if(Va*Va/br<Ra){if(Ra<Wt){var $a=Gn.charge/Ra;Kr.px-=Ea*$a,Kr.py-=fa*$a}return!0}if(Gn.point&&Ra&&Ra<Wt){var $a=Gn.pointCharge/Ra;Kr.px-=Ea*$a,Kr.py-=fa*$a}}return!Gn.charge}}ce.tick=function(){if((Ke*=.99)<.005)return Le=null,Te.end({type:"end",alpha:Ke=0}),!0;var Kr=Qr.length,Gn=cn.length,ra,wa,oa,Ea,fa,Va,Ra,$a,gi;for(wa=0;wa<Gn;++wa)oa=cn[wa],Ea=oa.source,fa=oa.target,$a=fa.x-Ea.x,gi=fa.y-Ea.y,(Va=$a*$a+gi*gi)&&(Va=Ke*Or[wa]*((Va=Math.sqrt(Va))-Mr[wa])/Va,$a*=Va,gi*=Va,fa.x-=$a*(Ra=Ea.weight+fa.weight?Ea.weight/(Ea.weight+fa.weight):.5),fa.y-=gi*Ra,Ea.x+=$a*(Ra=1-Ra),Ea.y+=gi*Ra);if((Ra=Ke*Xt)&&($a=Be[0]/2,gi=Be[1]/2,wa=-1,Ra))for(;++wa<Kr;)oa=Qr[wa],oa.x+=($a-oa.x)*Ra,oa.y+=(gi-oa.y)*Ra;if(Ut)for(Rs(ra=d.geom.quadtree(Qr),Ke,Xr),wa=-1;++wa<Kr;)(oa=Qr[wa]).fixed||ra.visit(ln(oa));for(wa=-1;++wa<Kr;)oa=Qr[wa],oa.fixed?(oa.x=oa.px,oa.y=oa.py):(oa.x-=(oa.px-(oa.px=oa.x))*bt,oa.y-=(oa.py-(oa.py=oa.y))*bt);Te.tick({type:"tick",alpha:Ke})},ce.nodes=function(Kr){return arguments.length?(Qr=Kr,ce):Qr},ce.links=function(Kr){return arguments.length?(cn=Kr,ce):cn},ce.size=function(Kr){return arguments.length?(Be=Kr,ce):Be},ce.linkDistance=function(Kr){return arguments.length?(vt=typeof Kr=="function"?Kr:+Kr,ce):vt},ce.distance=ce.linkDistance,ce.linkStrength=function(Kr){return arguments.length?(Ct=typeof Kr=="function"?Kr:+Kr,ce):Ct},ce.friction=function(Kr){return arguments.length?(bt=+Kr,ce):bt},ce.charge=function(Kr){return arguments.length?(Ut=typeof Kr=="function"?Kr:+Kr,ce):Ut},ce.chargeDistance=function(Kr){return arguments.length?(Wt=Kr*Kr,ce):Math.sqrt(Wt)},ce.gravity=function(Kr){return arguments.length?(Xt=+Kr,ce):Xt},ce.theta=function(Kr){return arguments.length?(br=Kr*Kr,ce):Math.sqrt(br)},ce.alpha=function(Kr){return arguments.length?(Kr=+Kr,Ke?Kr>0?Ke=Kr:(Le.c=null,Le.t=NaN,Le=null,Te.end({type:"end",alpha:Ke=0})):Kr>0&&(Te.start({type:"start",alpha:Ke=Kr}),Le=En(ce.tick)),ce):Ke},ce.start=function(){var Kr,Gn=Qr.length,ra=cn.length,wa=Be[0],oa=Be[1],Ea,fa;for(Kr=0;Kr<Gn;++Kr)(fa=Qr[Kr]).index=Kr,fa.weight=0;for(Kr=0;Kr<ra;++Kr)fa=cn[Kr],typeof fa.source=="number"&&(fa.source=Qr[fa.source]),typeof fa.target=="number"&&(fa.target=Qr[fa.target]),++fa.source.weight,++fa.target.weight;for(Kr=0;Kr<Gn;++Kr)fa=Qr[Kr],isNaN(fa.x)&&(fa.x=Va("x",wa)),isNaN(fa.y)&&(fa.y=Va("y",oa)),isNaN(fa.px)&&(fa.px=fa.x),isNaN(fa.py)&&(fa.py=fa.y);if(Mr=[],typeof vt=="function")for(Kr=0;Kr<ra;++Kr)Mr[Kr]=+vt.call(this,cn[Kr],Kr);else for(Kr=0;Kr<ra;++Kr)Mr[Kr]=vt;if(Or=[],typeof Ct=="function")for(Kr=0;Kr<ra;++Kr)Or[Kr]=+Ct.call(this,cn[Kr],Kr);else for(Kr=0;Kr<ra;++Kr)Or[Kr]=Ct;if(Xr=[],typeof Ut=="function")for(Kr=0;Kr<Gn;++Kr)Xr[Kr]=+Ut.call(this,Qr[Kr],Kr);else for(Kr=0;Kr<Gn;++Kr)Xr[Kr]=Ut;function Va(Ra,$a){if(!Ea){for(Ea=new Array(Gn),Ii=0;Ii<Gn;++Ii)Ea[Ii]=[];for(Ii=0;Ii<ra;++Ii){var gi=cn[Ii];Ea[gi.source.index].push(gi.target),Ea[gi.target.index].push(gi.source)}}for(var ho=Ea[Kr],Ii=-1,ha=ho.length,ai;++Ii<ha;)if(!isNaN(ai=ho[Ii][Ra]))return ai;return Math.random()*$a}return ce.resume()},ce.resume=function(){return ce.alpha(.1)},ce.stop=function(){return ce.alpha(0)},ce.drag=function(){if(Oe||(Oe=d.behavior.drag().origin(R).on("dragstart.force",Au).on("drag.force",fn).on("dragend.force",Ts)),!arguments.length)return Oe;this.on("mouseover.force",Eo).on("mouseout.force",lu).call(Oe)};function fn(Kr){Kr.px=d.event.x,Kr.py=d.event.y,ce.resume()}return d.rebind(ce,Te,"on")};function Au(ce){ce.fixed|=2}function Ts(ce){ce.fixed&=-7}function Eo(ce){ce.fixed|=4,ce.px=ce.x,ce.py=ce.y}function lu(ce){ce.fixed&=-5}function Rs(ce,Te,Le){var Be=0,Oe=0;if(ce.charge=0,!ce.leaf)for(var Ke=ce.nodes,bt=Ke.length,vt=-1,Ct;++vt<bt;)Ct=Ke[vt],Ct!=null&&(Rs(Ct,Te,Le),ce.charge+=Ct.charge,Be+=Ct.charge*Ct.cx,Oe+=Ct.charge*Ct.cy);if(ce.point){ce.leaf||(ce.point.x+=Math.random()-.5,ce.point.y+=Math.random()-.5);var Ut=Te*Le[ce.point.index];ce.charge+=ce.pointCharge=Ut,Be+=Ut*ce.point.x,Oe+=Ut*ce.point.y}ce.cx=Be/ce.charge,ce.cy=Oe/ce.charge}var Is=20,lo=1,Hl=1/0;d.layout.hierarchy=function(){var ce=uu,Te=Gl,Le=Ll;function Be(Oe){var Ke=[Oe],bt=[],vt;for(Oe.depth=0;(vt=Ke.pop())!=null;)if(bt.push(vt),(Ut=Te.call(Be,vt,vt.depth))&&(Ct=Ut.length)){for(var Ct,Ut,Wt;--Ct>=0;)Ke.push(Wt=Ut[Ct]),Wt.parent=vt,Wt.depth=vt.depth+1;Le&&(vt.value=0),vt.children=Ut}else Le&&(vt.value=+Le.call(Be,vt,vt.depth)||0),delete vt.children;return As(Oe,function(Xt){var br,Qr;ce&&(br=Xt.children)&&br.sort(ce),Le&&(Qr=Xt.parent)&&(Qr.value+=Xt.value)}),bt}return Be.sort=function(Oe){return arguments.length?(ce=Oe,Be):ce},Be.children=function(Oe){return arguments.length?(Te=Oe,Be):Te},Be.value=function(Oe){return arguments.length?(Le=Oe,Be):Le},Be.revalue=function(Oe){return Le&&(fl(Oe,function(Ke){Ke.children&&(Ke.value=0)}),As(Oe,function(Ke){var bt;Ke.children||(Ke.value=+Le.call(Be,Ke,Ke.depth)||0),(bt=Ke.parent)&&(bt.value+=Ke.value)})),Oe},Be};function Vl(ce,Te){return d.rebind(ce,Te,"sort","children","value"),ce.nodes=ce,ce.links=Yl,ce}function fl(ce,Te){for(var Le=[ce];(ce=Le.pop())!=null;)if(Te(ce),(Oe=ce.children)&&(Be=Oe.length))for(var Be,Oe;--Be>=0;)Le.push(Oe[Be])}function As(ce,Te){for(var Le=[ce],Be=[];(ce=Le.pop())!=null;)if(Be.push(ce),(bt=ce.children)&&(Ke=bt.length))for(var Oe=-1,Ke,bt;++Oe<Ke;)Le.push(bt[Oe]);for(;(ce=Be.pop())!=null;)Te(ce)}function Gl(ce){return ce.children}function Ll(ce){return ce.value}function uu(ce,Te){return Te.value-ce.value}function Yl(ce){return d.merge(ce.map(function(Te){return(Te.children||[]).map(function(Le){return{source:Te,target:Le}})}))}d.layout.partition=function(){var ce=d.layout.hierarchy(),Te=[1,1];function Le(Ke,bt,vt,Ct){var Ut=Ke.children;if(Ke.x=bt,Ke.y=Ke.depth*Ct,Ke.dx=vt,Ke.dy=Ct,Ut&&(Xt=Ut.length)){var Wt=-1,Xt,br,Qr;for(vt=Ke.value?vt/Ke.value:0;++Wt<Xt;)Le(br=Ut[Wt],bt,Qr=br.value*vt,Ct),bt+=Qr}}function Be(Ke){var bt=Ke.children,vt=0;if(bt&&(Ut=bt.length))for(var Ct=-1,Ut;++Ct<Ut;)vt=Math.max(vt,Be(bt[Ct]));return 1+vt}function Oe(Ke,bt){var vt=ce.call(this,Ke,bt);return Le(vt[0],0,Te[0],Te[1]/Be(vt[0])),vt}return Oe.size=function(Ke){return arguments.length?(Te=Ke,Oe):Te},Vl(Oe,ce)},d.layout.pie=function(){var ce=Number,Te=cl,Le=0,Be=je,Oe=0;function Ke(bt){var vt=bt.length,Ct=bt.map(function(ln,fn){return+ce.call(Ke,ln,fn)}),Ut=+(typeof Le=="function"?Le.apply(this,arguments):Le),Wt=(typeof Be=="function"?Be.apply(this,arguments):Be)-Ut,Xt=Math.min(Math.abs(Wt)/vt,+(typeof Oe=="function"?Oe.apply(this,arguments):Oe)),br=Xt*(Wt<0?-1:1),Qr=d.sum(Ct),cn=Qr?(Wt-vt*br)/Qr:0,Mr=d.range(vt),Or=[],Xr;return Te!=null&&Mr.sort(Te===cl?function(ln,fn){return Ct[fn]-Ct[ln]}:function(ln,fn){return Te(bt[ln],bt[fn])}),Mr.forEach(function(ln){Or[ln]={data:bt[ln],value:Xr=Ct[ln],startAngle:Ut,endAngle:Ut+=Xr*cn+br,padAngle:Xt}}),Or}return Ke.value=function(bt){return arguments.length?(ce=bt,Ke):ce},Ke.sort=function(bt){return arguments.length?(Te=bt,Ke):Te},Ke.startAngle=function(bt){return arguments.length?(Le=bt,Ke):Le},Ke.endAngle=function(bt){return arguments.length?(Be=bt,Ke):Be},Ke.padAngle=function(bt){return arguments.length?(Oe=bt,Ke):Oe},Ke};var cl={};d.layout.stack=function(){var ce=R,Te=Wl,Le=hl,Be=zf,Oe=df,Ke=fs;function bt(vt,Ct){if(!(cn=vt.length))return vt;var Ut=vt.map(function(ln,fn){return ce.call(bt,ln,fn)}),Wt=Ut.map(function(ln){return ln.map(function(fn,Kr){return[Oe.call(bt,fn,Kr),Ke.call(bt,fn,Kr)]})}),Xt=Te.call(bt,Wt,Ct);Ut=d.permute(Ut,Xt),Wt=d.permute(Wt,Xt);var br=Le.call(bt,Wt,Ct),Qr=Ut[0].length,cn,Mr,Or,Xr;for(Or=0;Or<Qr;++Or)for(Be.call(bt,Ut[0][Or],Xr=br[Or],Wt[0][Or][1]),Mr=1;Mr<cn;++Mr)Be.call(bt,Ut[Mr][Or],Xr+=Wt[Mr-1][Or][1],Wt[Mr][Or][1]);return vt}return bt.values=function(vt){return arguments.length?(ce=vt,bt):ce},bt.order=function(vt){return arguments.length?(Te=typeof vt=="function"?vt:Mu.get(vt)||Wl,bt):Te},bt.offset=function(vt){return arguments.length?(Le=typeof vt=="function"?vt:Pl.get(vt)||hl,bt):Le},bt.x=function(vt){return arguments.length?(Oe=vt,bt):Oe},bt.y=function(vt){return arguments.length?(Ke=vt,bt):Ke},bt.out=function(vt){return arguments.length?(Be=vt,bt):Be},bt};function df(ce){return ce.x}function fs(ce){return ce.y}function zf(ce,Te,Le){ce.y0=Te,ce.y=Le}var Mu=d.map({"inside-out":function(ce){var Te=ce.length,Le,Be,Oe=ce.map(Xl),Ke=ce.map(Wu),bt=d.range(Te).sort(function(Xt,br){return Oe[Xt]-Oe[br]}),vt=0,Ct=0,Ut=[],Wt=[];for(Le=0;Le<Te;++Le)Be=bt[Le],vt<Ct?(vt+=Ke[Be],Ut.push(Be)):(Ct+=Ke[Be],Wt.push(Be));return Wt.reverse().concat(Ut)},reverse:function(ce){return d.range(ce.length).reverse()},default:Wl}),Pl=d.map({silhouette:function(ce){var Te=ce.length,Le=ce[0].length,Be=[],Oe=0,Ke,bt,vt,Ct=[];for(bt=0;bt<Le;++bt){for(Ke=0,vt=0;Ke<Te;Ke++)vt+=ce[Ke][bt][1];vt>Oe&&(Oe=vt),Be.push(vt)}for(bt=0;bt<Le;++bt)Ct[bt]=(Oe-Be[bt])/2;return Ct},wiggle:function(ce){var Te=ce.length,Le=ce[0],Be=Le.length,Oe,Ke,bt,vt,Ct,Ut,Wt,Xt,br,Qr=[];for(Qr[0]=Xt=br=0,Ke=1;Ke<Be;++Ke){for(Oe=0,vt=0;Oe<Te;++Oe)vt+=ce[Oe][Ke][1];for(Oe=0,Ct=0,Wt=Le[Ke][0]-Le[Ke-1][0];Oe<Te;++Oe){for(bt=0,Ut=(ce[Oe][Ke][1]-ce[Oe][Ke-1][1])/(2*Wt);bt<Oe;++bt)Ut+=(ce[bt][Ke][1]-ce[bt][Ke-1][1])/Wt;Ct+=Ut*ce[Oe][Ke][1]}Qr[Ke]=Xt-=vt?Ct/vt*Wt:0,Xt<br&&(br=Xt)}for(Ke=0;Ke<Be;++Ke)Qr[Ke]-=br;return Qr},expand:function(ce){var Te=ce.length,Le=ce[0].length,Be=1/Te,Oe,Ke,bt,vt=[];for(Ke=0;Ke<Le;++Ke){for(Oe=0,bt=0;Oe<Te;Oe++)bt+=ce[Oe][Ke][1];if(bt)for(Oe=0;Oe<Te;Oe++)ce[Oe][Ke][1]/=bt;else for(Oe=0;Oe<Te;Oe++)ce[Oe][Ke][1]=Be}for(Ke=0;Ke<Le;++Ke)vt[Ke]=0;return vt},zero:hl});function Wl(ce){return d.range(ce.length)}function hl(ce){for(var Te=-1,Le=ce[0].length,Be=[];++Te<Le;)Be[Te]=0;return Be}function Xl(ce){for(var Te=1,Le=0,Be=ce[0][1],Oe,Ke=ce.length;Te<Ke;++Te)(Oe=ce[Te][1])>Be&&(Le=Te,Be=Oe);return Le}function Wu(ce){return ce.reduce(Xu,0)}function Xu(ce,Te){return ce+Te[1]}d.layout.histogram=function(){var ce=!0,Te=Number,Le=Dl,Be=Ff;function Oe(Ke,br){for(var vt=[],Ct=Ke.map(Te,this),Ut=Le.call(this,Ct,br),Wt=Be.call(this,Ut,Ct,br),Xt,br=-1,Qr=Ct.length,cn=Wt.length-1,Mr=ce?1:1/Qr,Or;++br<cn;)Xt=vt[br]=[],Xt.dx=Wt[br+1]-(Xt.x=Wt[br]),Xt.y=0;if(cn>0)for(br=-1;++br<Qr;)Or=Ct[br],Or>=Ut[0]&&Or<=Ut[1]&&(Xt=vt[d.bisect(Wt,Or,1,cn)-1],Xt.y+=Mr,Xt.push(Ke[br]));return vt}return Oe.value=function(Ke){return arguments.length?(Te=Ke,Oe):Te},Oe.range=function(Ke){return arguments.length?(Le=at(Ke),Oe):Le},Oe.bins=function(Ke){return arguments.length?(Be=typeof Ke=="number"?function(bt){return Ri(bt,Ke)}:at(Ke),Oe):Be},Oe.frequency=function(Ke){return arguments.length?(ce=!!Ke,Oe):ce},Oe};function Ff(ce,Te){return Ri(ce,Math.ceil(Math.log(Te.length)/Math.LN2+1))}function Ri(ce,Te){for(var Le=-1,Be=+ce[0],Oe=(ce[1]-Be)/Te,Ke=[];++Le<=Te;)Ke[Le]=Oe*Le+Be;return Ke}function Dl(ce){return[d.min(ce),d.max(ce)]}d.layout.pack=function(){var ce=d.layout.hierarchy().sort(vl),Te=0,Le=[1,1],Be;function Oe(Ke,bt){var vt=ce.call(this,Ke,bt),Ct=vt[0],Ut=Le[0],Wt=Le[1],Xt=Be==null?Math.sqrt:typeof Be=="function"?Be:function(){return Be};if(Ct.x=Ct.y=0,As(Ct,function(Qr){Qr.r=+Xt(Qr.value)}),As(Ct,uo),Te){var br=Te*(Be?1:Math.max(2*Ct.r/Ut,2*Ct.r/Wt))/2;As(Ct,function(Qr){Qr.r+=br}),As(Ct,uo),As(Ct,function(Qr){Qr.r-=br})}return Js(Ct,Ut/2,Wt/2,Be?1:1/Math.max(2*Ct.r/Ut,2*Ct.r/Wt)),vt}return Oe.size=function(Ke){return arguments.length?(Le=Ke,Oe):Le},Oe.radius=function(Ke){return arguments.length?(Be=Ke==null||typeof Ke=="function"?Ke:+Ke,Oe):Be},Oe.padding=function(Ke){return arguments.length?(Te=+Ke,Oe):Te},Vl(Oe,ce)};function vl(ce,Te){return ce.value-Te.value}function as(ce,Te){var Le=ce._pack_next;ce._pack_next=Te,Te._pack_prev=ce,Te._pack_next=Le,Le._pack_prev=Te}function cs(ce,Te){ce._pack_next=Te,Te._pack_prev=ce}function jl(ce,Te){var Le=Te.x-ce.x,Be=Te.y-ce.y,Oe=ce.r+Te.r;return .999*Oe*Oe>Le*Le+Be*Be}function uo(ce){if(!(Te=ce.children)||!(br=Te.length))return;var Te,Le=1/0,Be=-1/0,Oe=1/0,Ke=-1/0,bt,vt,Ct,Ut,Wt,Xt,br;function Qr(Kr){Le=Math.min(Kr.x-Kr.r,Le),Be=Math.max(Kr.x+Kr.r,Be),Oe=Math.min(Kr.y-Kr.r,Oe),Ke=Math.max(Kr.y+Kr.r,Ke)}if(Te.forEach(ju),bt=Te[0],bt.x=-bt.r,bt.y=0,Qr(bt),br>1&&(vt=Te[1],vt.x=vt.r,vt.y=0,Qr(vt),br>2))for(Ct=Te[2],Qs(bt,vt,Ct),Qr(Ct),as(bt,Ct),bt._pack_prev=Ct,as(Ct,vt),vt=bt._pack_next,Ut=3;Ut<br;Ut++){Qs(bt,vt,Ct=Te[Ut]);var cn=0,Mr=1,Or=1;for(Wt=vt._pack_next;Wt!==vt;Wt=Wt._pack_next,Mr++)if(jl(Wt,Ct)){cn=1;break}if(cn==1)for(Xt=bt._pack_prev;Xt!==Wt._pack_prev&&!jl(Xt,Ct);Xt=Xt._pack_prev,Or++);cn?(Mr<Or||Mr==Or&&vt.r<bt.r?cs(bt,vt=Wt):cs(bt=Xt,vt),Ut--):(as(bt,Ct),vt=Ct,Qr(Ct))}var Xr=(Le+Be)/2,ln=(Oe+Ke)/2,fn=0;for(Ut=0;Ut<br;Ut++)Ct=Te[Ut],Ct.x-=Xr,Ct.y-=ln,fn=Math.max(fn,Ct.r+Math.sqrt(Ct.x*Ct.x+Ct.y*Ct.y));ce.r=fn,Te.forEach(hs)}function ju(ce){ce._pack_next=ce._pack_prev=ce}function hs(ce){delete ce._pack_next,delete ce._pack_prev}function Js(ce,Te,Le,Be){var Oe=ce.children;if(ce.x=Te+=Be*ce.x,ce.y=Le+=Be*ce.y,ce.r*=Be,Oe)for(var Ke=-1,bt=Oe.length;++Ke<bt;)Js(Oe[Ke],Te,Le,Be)}function Qs(ce,Te,Le){var Be=ce.r+Le.r,Oe=Te.x-ce.x,Ke=Te.y-ce.y;if(Be&&(Oe||Ke)){var bt=Te.r+Le.r,vt=Oe*Oe+Ke*Ke;bt*=bt,Be*=Be;var Ct=.5+(Be-bt)/(2*vt),Ut=Math.sqrt(Math.max(0,2*bt*(Be+vt)-(Be-=vt)*Be-bt*bt))/(2*vt);Le.x=ce.x+Ct*Oe+Ut*Ke,Le.y=ce.y+Ct*Ke-Ut*Oe}else Le.x=ce.x+Be,Le.y=ce.y}d.layout.tree=function(){var ce=d.layout.hierarchy().sort(null).value(null),Te=zs,Le=[1,1],Be=null;function Oe(Wt,Xt){var br=ce.call(this,Wt,Xt),Qr=br[0],cn=Ke(Qr);if(As(cn,bt),cn.parent.m=-cn.z,fl(cn,vt),Be)fl(Qr,Ut);else{var Mr=Qr,Or=Qr,Xr=Qr;fl(Qr,function(Gn){Gn.x<Mr.x&&(Mr=Gn),Gn.x>Or.x&&(Or=Gn),Gn.depth>Xr.depth&&(Xr=Gn)});var ln=Te(Mr,Or)/2-Mr.x,fn=Le[0]/(Or.x+Te(Or,Mr)/2+ln),Kr=Le[1]/(Xr.depth||1);fl(Qr,function(Gn){Gn.x=(Gn.x+ln)*fn,Gn.y=Gn.depth*Kr})}return br}function Ke(Wt){for(var Xt={A:null,children:[Wt]},br=[Xt],Qr;(Qr=br.pop())!=null;)for(var cn=Qr.children,Mr,Or=0,Xr=cn.length;Or<Xr;++Or)br.push((cn[Or]=Mr={_:cn[Or],parent:Qr,children:(Mr=cn[Or].children)&&Mr.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Or}).a=Mr);return Xt.children[0]}function bt(Wt){var Xt=Wt.children,br=Wt.parent.children,Qr=Wt.i?br[Wt.i-1]:null;if(Xt.length){ps(Wt);var cn=(Xt[0].z+Xt[Xt.length-1].z)/2;Qr?(Wt.z=Qr.z+Te(Wt._,Qr._),Wt.m=Wt.z-cn):Wt.z=cn}else Qr&&(Wt.z=Qr.z+Te(Wt._,Qr._));Wt.parent.A=Ct(Wt,Qr,Wt.parent.A||br[0])}function vt(Wt){Wt._.x=Wt.z+Wt.parent.m,Wt.m+=Wt.parent.m}function Ct(Wt,Xt,br){if(Xt){for(var Qr=Wt,cn=Wt,Mr=Xt,Or=Qr.parent.children[0],Xr=Qr.m,ln=cn.m,fn=Mr.m,Kr=Or.m,Gn;Mr=Hi(Mr),Qr=vs(Qr),Mr&&Qr;)Or=vs(Or),cn=Hi(cn),cn.a=Wt,Gn=Mr.z+fn-Qr.z-Xr+Te(Mr._,Qr._),Gn>0&&(Co(Zu(Mr,Wt,br),Wt,Gn),Xr+=Gn,ln+=Gn),fn+=Mr.m,Xr+=Qr.m,Kr+=Or.m,ln+=cn.m;Mr&&!Hi(cn)&&(cn.t=Mr,cn.m+=fn-ln),Qr&&!vs(Or)&&(Or.t=Qr,Or.m+=Xr-Kr,br=Wt)}return br}function Ut(Wt){Wt.x*=Le[0],Wt.y=Wt.depth*Le[1]}return Oe.separation=function(Wt){return arguments.length?(Te=Wt,Oe):Te},Oe.size=function(Wt){return arguments.length?(Be=(Le=Wt)==null?Ut:null,Oe):Be?null:Le},Oe.nodeSize=function(Wt){return arguments.length?(Be=(Le=Wt)==null?null:Ut,Oe):Be?Le:null},Vl(Oe,ce)};function zs(ce,Te){return ce.parent==Te.parent?1:2}function vs(ce){var Te=ce.children;return Te.length?Te[0]:ce.t}function Hi(ce){var Te=ce.children,Le;return(Le=Te.length)?Te[Le-1]:ce.t}function Co(ce,Te,Le){var Be=Le/(Te.i-ce.i);Te.c-=Be,Te.s+=Le,ce.c+=Be,Te.z+=Le,Te.m+=Le}function ps(ce){for(var Te=0,Le=0,Be=ce.children,Oe=Be.length,Ke;--Oe>=0;)Ke=Be[Oe],Ke.z+=Te,Ke.m+=Te,Te+=Ke.s+(Le+=Ke.c)}function Zu(ce,Te,Le){return ce.a.parent===Te.parent?ce.a:Le}d.layout.cluster=function(){var ce=d.layout.hierarchy().sort(null).value(null),Te=zs,Le=[1,1],Be=!1;function Oe(Ke,bt){var vt=ce.call(this,Ke,bt),Ct=vt[0],Ut,Wt=0;As(Ct,function(Mr){var Or=Mr.children;Or&&Or.length?(Mr.x=Ku(Or),Mr.y=fu(Or)):(Mr.x=Ut?Wt+=Te(Mr,Ut):0,Mr.y=0,Ut=Mr)});var Xt=mt(Ct),br=It(Ct),Qr=Xt.x-Te(Xt,br)/2,cn=br.x+Te(br,Xt)/2;return As(Ct,Be?function(Mr){Mr.x=(Mr.x-Ct.x)*Le[0],Mr.y=(Ct.y-Mr.y)*Le[1]}:function(Mr){Mr.x=(Mr.x-Qr)/(cn-Qr)*Le[0],Mr.y=(1-(Ct.y?Mr.y/Ct.y:1))*Le[1]}),vt}return Oe.separation=function(Ke){return arguments.length?(Te=Ke,Oe):Te},Oe.size=function(Ke){return arguments.length?(Be=(Le=Ke)==null,Oe):Be?null:Le},Oe.nodeSize=function(Ke){return arguments.length?(Be=(Le=Ke)!=null,Oe):Be?Le:null},Vl(Oe,ce)};function fu(ce){return 1+d.max(ce,function(Te){return Te.y})}function Ku(ce){return ce.reduce(function(Te,Le){return Te+Le.x},0)/ce.length}function mt(ce){var Te=ce.children;return Te&&Te.length?mt(Te[0]):ce}function It(ce){var Te=ce.children,Le;return Te&&(Le=Te.length)?It(Te[Le-1]):ce}d.layout.treemap=function(){var ce=d.layout.hierarchy(),Te=Math.round,Le=[1,1],Be=null,Oe=nr,Ke=!1,bt,vt="squarify",Ct=.5*(1+Math.sqrt(5));function Ut(Mr,Or){for(var Xr=-1,ln=Mr.length,fn,Kr;++Xr<ln;)Kr=(fn=Mr[Xr]).value*(Or<0?0:Or),fn.area=isNaN(Kr)||Kr<=0?0:Kr}function Wt(Mr){var Or=Mr.children;if(Or&&Or.length){var Xr=Oe(Mr),ln=[],fn=Or.slice(),Kr,Gn=1/0,ra,wa=vt==="slice"?Xr.dx:vt==="dice"?Xr.dy:vt==="slice-dice"?Mr.depth&1?Xr.dy:Xr.dx:Math.min(Xr.dx,Xr.dy),oa;for(Ut(fn,Xr.dx*Xr.dy/Mr.value),ln.area=0;(oa=fn.length)>0;)ln.push(Kr=fn[oa-1]),ln.area+=Kr.area,vt!=="squarify"||(ra=br(ln,wa))<=Gn?(fn.pop(),Gn=ra):(ln.area-=ln.pop().area,Qr(ln,wa,Xr,!1),wa=Math.min(Xr.dx,Xr.dy),ln.length=ln.area=0,Gn=1/0);ln.length&&(Qr(ln,wa,Xr,!0),ln.length=ln.area=0),Or.forEach(Wt)}}function Xt(Mr){var Or=Mr.children;if(Or&&Or.length){var Xr=Oe(Mr),ln=Or.slice(),fn,Kr=[];for(Ut(ln,Xr.dx*Xr.dy/Mr.value),Kr.area=0;fn=ln.pop();)Kr.push(fn),Kr.area+=fn.area,fn.z!=null&&(Qr(Kr,fn.z?Xr.dx:Xr.dy,Xr,!ln.length),Kr.length=Kr.area=0);Or.forEach(Xt)}}function br(Mr,Or){for(var Xr=Mr.area,ln,fn=0,Kr=1/0,Gn=-1,ra=Mr.length;++Gn<ra;)!(ln=Mr[Gn].area)||(ln<Kr&&(Kr=ln),ln>fn&&(fn=ln));return Xr*=Xr,Or*=Or,Xr?Math.max(Or*fn*Ct/Xr,Xr/(Or*Kr*Ct)):1/0}function Qr(Mr,Or,Xr,ln){var fn=-1,Kr=Mr.length,Gn=Xr.x,ra=Xr.y,wa=Or?Te(Mr.area/Or):0,oa;if(Or==Xr.dx){for((ln||wa>Xr.dy)&&(wa=Xr.dy);++fn<Kr;)oa=Mr[fn],oa.x=Gn,oa.y=ra,oa.dy=wa,Gn+=oa.dx=Math.min(Xr.x+Xr.dx-Gn,wa?Te(oa.area/wa):0);oa.z=!0,oa.dx+=Xr.x+Xr.dx-Gn,Xr.y+=wa,Xr.dy-=wa}else{for((ln||wa>Xr.dx)&&(wa=Xr.dx);++fn<Kr;)oa=Mr[fn],oa.x=Gn,oa.y=ra,oa.dx=wa,ra+=oa.dy=Math.min(Xr.y+Xr.dy-ra,wa?Te(oa.area/wa):0);oa.z=!1,oa.dy+=Xr.y+Xr.dy-ra,Xr.x+=wa,Xr.dx-=wa}}function cn(Mr){var Or=bt||ce(Mr),Xr=Or[0];return Xr.x=Xr.y=0,Xr.value?(Xr.dx=Le[0],Xr.dy=Le[1]):Xr.dx=Xr.dy=0,bt&&ce.revalue(Xr),Ut([Xr],Xr.dx*Xr.dy/Xr.value),(bt?Xt:Wt)(Xr),Ke&&(bt=Or),Or}return cn.size=function(Mr){return arguments.length?(Le=Mr,cn):Le},cn.padding=function(Mr){if(!arguments.length)return Be;function Or(fn){var Kr=Mr.call(cn,fn,fn.depth);return Kr==null?nr(fn):Jt(fn,typeof Kr=="number"?[Kr,Kr,Kr,Kr]:Kr)}function Xr(fn){return Jt(fn,Mr)}var ln;return Oe=(Be=Mr)==null?nr:(ln=typeof Mr)=="function"?Or:(ln==="number"&&(Mr=[Mr,Mr,Mr,Mr]),Xr),cn},cn.round=function(Mr){return arguments.length?(Te=Mr?Math.round:Number,cn):Te!=Number},cn.sticky=function(Mr){return arguments.length?(Ke=Mr,bt=null,cn):Ke},cn.ratio=function(Mr){return arguments.length?(Ct=Mr,cn):Ct},cn.mode=function(Mr){return arguments.length?(vt=Mr+"",cn):vt},Vl(cn,ce)};function nr(ce){return{x:ce.x,y:ce.y,dx:ce.dx,dy:ce.dy}}function Jt(ce,Te){var Le=ce.x+Te[3],Be=ce.y+Te[0],Oe=ce.dx-Te[1]-Te[3],Ke=ce.dy-Te[0]-Te[2];return Oe<0&&(Le+=Oe/2,Oe=0),Ke<0&&(Be+=Ke/2,Ke=0),{x:Le,y:Be,dx:Oe,dy:Ke}}d.random={normal:function(ce,Te){var Le=arguments.length;return Le<2&&(Te=1),Le<1&&(ce=0),function(){var Be,Oe,Ke;do Be=Math.random()*2-1,Oe=Math.random()*2-1,Ke=Be*Be+Oe*Oe;while(!Ke||Ke>1);return ce+Te*Be*Math.sqrt(-2*Math.log(Ke)/Ke)}},logNormal:function(){var ce=d.random.normal.apply(d,arguments);return function(){return Math.exp(ce())}},bates:function(ce){var Te=d.random.irwinHall(ce);return function(){return Te()/ce}},irwinHall:function(ce){return function(){for(var Te=0,Le=0;Le<ce;Le++)Te+=Math.random();return Te}}},d.scale={};function Cr(ce){var Te=ce[0],Le=ce[ce.length-1];return Te<Le?[Te,Le]:[Le,Te]}function on(ce){return ce.rangeExtent?ce.rangeExtent():Cr(ce.range())}function yn(ce,Te,Le,Be){var Oe=Le(ce[0],ce[1]),Ke=Be(Te[0],Te[1]);return function(bt){return Ke(Oe(bt))}}function Tn(ce,Te){var Le=0,Be=ce.length-1,Oe=ce[Le],Ke=ce[Be],bt;return Ke<Oe&&(bt=Le,Le=Be,Be=bt,bt=Oe,Oe=Ke,Ke=bt),ce[Le]=Te.floor(Oe),ce[Be]=Te.ceil(Ke),ce}function Cn(ce){return ce?{floor:function(Te){return Math.floor(Te/ce)*ce},ceil:function(Te){return Math.ceil(Te/ce)*ce}}:Vn}var Vn={floor:R,ceil:R};function xn(ce,Te,Le,Be){var Oe=[],Ke=[],bt=0,vt=Math.min(ce.length,Te.length)-1;for(ce[vt]<ce[0]&&(ce=ce.slice().reverse(),Te=Te.slice().reverse());++bt<=vt;)Oe.push(Le(ce[bt-1],ce[bt])),Ke.push(Be(Te[bt-1],Te[bt]));return function(Ct){var Ut=d.bisect(ce,Ct,1,vt)-1;return Ke[Ut](Oe[Ut](Ct))}}d.scale.linear=function(){return zn([0,1],[0,1],io,!1)};function zn(ce,Te,Le,Be){var Oe,Ke;function bt(){var Ct=Math.min(ce.length,Te.length)>2?xn:yn,Ut=Be?Yu:pf;return Oe=Ct(ce,Te,Ut,Le),Ke=Ct(Te,ce,Ut,io),vt}function vt(Ct){return Oe(Ct)}return vt.invert=function(Ct){return Ke(Ct)},vt.domain=function(Ct){return arguments.length?(ce=Ct.map(Number),bt()):ce},vt.range=function(Ct){return arguments.length?(Te=Ct,bt()):Te},vt.rangeRound=function(Ct){return vt.range(Ct).interpolate(Hu)},vt.clamp=function(Ct){return arguments.length?(Be=Ct,bt()):Be},vt.interpolate=function(Ct){return arguments.length?(Le=Ct,bt()):Le},vt.ticks=function(Ct){return Oa(ce,Ct)},vt.tickFormat=function(Ct,Ut){return d3_scale_linearTickFormat(ce,Ct,Ut)},vt.nice=function(Ct){return Wn(ce,Ct),bt()},vt.copy=function(){return zn(ce,Te,Le,Be)},bt()}function Ln(ce,Te){return d.rebind(ce,Te,"range","rangeRound","interpolate","clamp")}function Wn(ce,Te){return Tn(ce,Cn($n(ce,Te)[2])),Tn(ce,Cn($n(ce,Te)[2])),ce}function $n(ce,Te){Te==null&&(Te=10);var Le=Cr(ce),Be=Le[1]-Le[0],Oe=Math.pow(10,Math.floor(Math.log(Be/Te)/Math.LN10)),Ke=Te/Be*Oe;return Ke<=.15?Oe*=10:Ke<=.35?Oe*=5:Ke<=.75&&(Oe*=2),Le[0]=Math.ceil(Le[0]/Oe)*Oe,Le[1]=Math.floor(Le[1]/Oe)*Oe+Oe*.5,Le[2]=Oe,Le}function Oa(ce,Te){return d.range.apply(d,$n(ce,Te))}d.scale.log=function(){return La(d.scale.linear().domain([0,1]),10,!0,[1,10])};function La(ce,Te,Le,Be){function Oe(vt){return(Le?Math.log(vt<0?0:vt):-Math.log(vt>0?0:-vt))/Math.log(Te)}function Ke(vt){return Le?Math.pow(Te,vt):-Math.pow(Te,-vt)}function bt(vt){return ce(Oe(vt))}return bt.invert=function(vt){return Ke(ce.invert(vt))},bt.domain=function(vt){return arguments.length?(Le=vt[0]>=0,ce.domain((Be=vt.map(Number)).map(Oe)),bt):Be},bt.base=function(vt){return arguments.length?(Te=+vt,ce.domain(Be.map(Oe)),bt):Te},bt.nice=function(){var vt=Tn(Be.map(Oe),Le?Math:Na);return ce.domain(vt),Be=vt.map(Ke),bt},bt.ticks=function(){var vt=Cr(Be),Ct=[],Ut=vt[0],Wt=vt[1],Xt=Math.floor(Oe(Ut)),br=Math.ceil(Oe(Wt)),Qr=Te%1?2:Te;if(isFinite(br-Xt)){if(Le){for(;Xt<br;Xt++)for(var cn=1;cn<Qr;cn++)Ct.push(Ke(Xt)*cn);Ct.push(Ke(Xt))}else for(Ct.push(Ke(Xt));Xt++<br;)for(var cn=Qr-1;cn>0;cn--)Ct.push(Ke(Xt)*cn);for(Xt=0;Ct[Xt]<Ut;Xt++);for(br=Ct.length;Ct[br-1]>Wt;br--);Ct=Ct.slice(Xt,br)}return Ct},bt.copy=function(){return La(ce.copy(),Te,Le,Be)},Ln(bt,ce)}var Na={floor:function(ce){return-Math.ceil(-ce)},ceil:function(ce){return-Math.floor(-ce)}};d.scale.pow=function(){return Ba(d.scale.linear(),1,[0,1])};function Ba(ce,Te,Le){var Be=Jn(Te),Oe=Jn(1/Te);function Ke(bt){return ce(Be(bt))}return Ke.invert=function(bt){return Oe(ce.invert(bt))},Ke.domain=function(bt){return arguments.length?(ce.domain((Le=bt.map(Number)).map(Be)),Ke):Le},Ke.ticks=function(bt){return Oa(Le,bt)},Ke.tickFormat=function(bt,vt){return d3_scale_linearTickFormat(Le,bt,vt)},Ke.nice=function(bt){return Ke.domain(Wn(Le,bt))},Ke.exponent=function(bt){return arguments.length?(Be=Jn(Te=bt),Oe=Jn(1/Te),ce.domain(Le.map(Be)),Ke):Te},Ke.copy=function(){return Ba(ce.copy(),Te,Le)},Ln(Ke,ce)}function Jn(ce){return function(Te){return Te<0?-Math.pow(-Te,ce):Math.pow(Te,ce)}}d.scale.sqrt=function(){return d.scale.pow().exponent(.5)},d.scale.ordinal=function(){return pa([],{t:"range",a:[[]]})};function pa(ce,Te){var Le,Be,Oe;function Ke(vt){return Be[((Le.get(vt)||(Te.t==="range"?Le.set(vt,ce.push(vt)):NaN))-1)%Be.length]}function bt(vt,Ct){return d.range(ce.length).map(function(Ut){return vt+Ct*Ut})}return Ke.domain=function(vt){if(!arguments.length)return ce;ce=[],Le=new M;for(var Ct=-1,Ut=vt.length,Wt;++Ct<Ut;)Le.has(Wt=vt[Ct])||Le.set(Wt,ce.push(Wt));return Ke[Te.t].apply(Ke,Te.a)},Ke.range=function(vt){return arguments.length?(Be=vt,Oe=0,Te={t:"range",a:arguments},Ke):Be},Ke.rangePoints=function(vt,Ct){arguments.length<2&&(Ct=0);var Ut=vt[0],Wt=vt[1],Xt=ce.length<2?(Ut=(Ut+Wt)/2,0):(Wt-Ut)/(ce.length-1+Ct);return Be=bt(Ut+Xt*Ct/2,Xt),Oe=0,Te={t:"rangePoints",a:arguments},Ke},Ke.rangeRoundPoints=function(vt,Ct){arguments.length<2&&(Ct=0);var Ut=vt[0],Wt=vt[1],Xt=ce.length<2?(Ut=Wt=Math.round((Ut+Wt)/2),0):(Wt-Ut)/(ce.length-1+Ct)|0;return Be=bt(Ut+Math.round(Xt*Ct/2+(Wt-Ut-(ce.length-1+Ct)*Xt)/2),Xt),Oe=0,Te={t:"rangeRoundPoints",a:arguments},Ke},Ke.rangeBands=function(vt,Ct,Ut){arguments.length<2&&(Ct=0),arguments.length<3&&(Ut=Ct);var Wt=vt[1]<vt[0],Xt=vt[Wt-0],br=vt[1-Wt],Qr=(br-Xt)/(ce.length-Ct+2*Ut);return Be=bt(Xt+Qr*Ut,Qr),Wt&&Be.reverse(),Oe=Qr*(1-Ct),Te={t:"rangeBands",a:arguments},Ke},Ke.rangeRoundBands=function(vt,Ct,Ut){arguments.length<2&&(Ct=0),arguments.length<3&&(Ut=Ct);var Wt=vt[1]<vt[0],Xt=vt[Wt-0],br=vt[1-Wt],Qr=Math.floor((br-Xt)/(ce.length-Ct+2*Ut));return Be=bt(Xt+Math.round((br-Xt-(ce.length-Ct)*Qr)/2),Qr),Wt&&Be.reverse(),Oe=Math.round(Qr*(1-Ct)),Te={t:"rangeRoundBands",a:arguments},Ke},Ke.rangeBand=function(){return Oe},Ke.rangeExtent=function(){return Cr(Te.a[0])},Ke.copy=function(){return pa(ce,Te)},Ke.domain(ce)}d.scale.category10=function(){return d.scale.ordinal().range(Ya)},d.scale.category20=function(){return d.scale.ordinal().range(Qa)},d.scale.category20b=function(){return d.scale.ordinal().range(pi)},d.scale.category20c=function(){return d.scale.ordinal().range(di)};var Ya=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(nn),Qa=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(nn),pi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(nn),di=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(nn);d.scale.quantile=function(){return yi([],[])};function yi(ce,Te){var Le;function Be(){var Ke=0,bt=Te.length;for(Le=[];++Ke<bt;)Le[Ke-1]=d.quantile(ce,Ke/bt);return Oe}function Oe(Ke){if(!isNaN(Ke=+Ke))return Te[d.bisect(Le,Ke)]}return Oe.domain=function(Ke){return arguments.length?(ce=Ke.map(v).filter(u).sort(i),Be()):ce},Oe.range=function(Ke){return arguments.length?(Te=Ke,Be()):Te},Oe.quantiles=function(){return Le},Oe.invertExtent=function(Ke){return Ke=Te.indexOf(Ke),Ke<0?[NaN,NaN]:[Ke>0?Le[Ke-1]:ce[0],Ke<Le.length?Le[Ke]:ce[ce.length-1]]},Oe.copy=function(){return yi(ce,Te)},Be()}d.scale.quantize=function(){return Ti(0,1,[0,1])};function Ti(ce,Te,Le){var Be,Oe;function Ke(vt){return Le[Math.max(0,Math.min(Oe,Math.floor(Be*(vt-ce))))]}function bt(){return Be=Le.length/(Te-ce),Oe=Le.length-1,Ke}return Ke.domain=function(vt){return arguments.length?(ce=+vt[0],Te=+vt[vt.length-1],bt()):[ce,Te]},Ke.range=function(vt){return arguments.length?(Le=vt,bt()):Le},Ke.invertExtent=function(vt){return vt=Le.indexOf(vt),vt=vt<0?NaN:vt/Be+ce,[vt,vt+1/Be]},Ke.copy=function(){return Ti(ce,Te,Le)},bt()}d.scale.threshold=function(){return oi([.5],[0,1])};function oi(ce,Te){function Le(Be){if(Be<=Be)return Te[d.bisect(ce,Be)]}return Le.domain=function(Be){return arguments.length?(ce=Be,Le):ce},Le.range=function(Be){return arguments.length?(Te=Be,Le):Te},Le.invertExtent=function(Be){return Be=Te.indexOf(Be),[ce[Be-1],ce[Be]]},Le.copy=function(){return oi(ce,Te)},Le}d.scale.identity=function(){return mo([0,1])};function mo(ce){function Te(Le){return+Le}return Te.invert=Te,Te.domain=Te.range=function(Le){return arguments.length?(ce=Le.map(Te),Te):ce},Te.ticks=function(Le){return Oa(ce,Le)},Te.tickFormat=function(Le,Be){return d3_scale_linearTickFormat(ce,Le,Be)},Te.copy=function(){return mo(ce)},Te}d.svg={};function to(){return 0}d.svg.arc=function(){var ce=ga,Te=mi,Le=to,Be=Ka,Oe=fo,Ke=po,bt=ds;function vt(){var Ut=Math.max(0,+ce.apply(this,arguments)),Wt=Math.max(0,+Te.apply(this,arguments)),Xt=Oe.apply(this,arguments)-ut,br=Ke.apply(this,arguments)-ut,Qr=Math.abs(br-Xt),cn=Xt>br?0:1;if(Wt<Ut&&(Mr=Wt,Wt=Ut,Ut=Mr),Qr>=rt)return Ct(Wt,cn)+(Ut?Ct(Ut,1-cn):"")+"Z";var Mr,Or,Xr,ln,fn=0,Kr=0,Gn,ra,wa,oa,Ea,fa,Va,Ra,$a=[];if((ln=(+bt.apply(this,arguments)||0)/2)&&(Xr=Be===Ka?Math.sqrt(Ut*Ut+Wt*Wt):+Be.apply(this,arguments),cn||(Kr*=-1),Wt&&(Kr=Kt(Xr/Wt*Math.sin(ln))),Ut&&(fn=Kt(Xr/Ut*Math.sin(ln)))),Wt){Gn=Wt*Math.cos(Xt+Kr),ra=Wt*Math.sin(Xt+Kr),wa=Wt*Math.cos(br-Kr),oa=Wt*Math.sin(br-Kr);var gi=Math.abs(br-Xt-2*Kr)<=Ce?0:1;if(Kr&&Fs(Gn,ra,wa,oa)===cn^gi){var ho=(Xt+br)/2;Gn=Wt*Math.cos(ho),ra=Wt*Math.sin(ho),wa=oa=null}}else Gn=ra=0;if(Ut){Ea=Ut*Math.cos(br-fn),fa=Ut*Math.sin(br-fn),Va=Ut*Math.cos(Xt+fn),Ra=Ut*Math.sin(Xt+fn);var Ii=Math.abs(Xt-br+2*fn)<=Ce?0:1;if(fn&&Fs(Ea,fa,Va,Ra)===1-cn^Ii){var ha=(Xt+br)/2;Ea=Ut*Math.cos(ha),fa=Ut*Math.sin(ha),Va=Ra=null}}else Ea=fa=0;if(Qr>ht&&(Mr=Math.min(Math.abs(Wt-Ut)/2,+Le.apply(this,arguments)))>.001){Or=Ut<Wt^cn?0:1;var ai=Mr,Xa=Mr;if(Qr<Ce){var Mi=Va==null?[Ea,fa]:wa==null?[Gn,ra]:ca([Gn,ra],[Va,Ra],[wa,oa],[Ea,fa]),si=Gn-Mi[0],so=ra-Mi[1],$i=wa-Mi[0],yo=oa-Mi[1],Zo=1/Math.sin(Math.acos((si*$i+so*yo)/(Math.sqrt(si*si+so*so)*Math.sqrt($i*$i+yo*yo)))/2),Ho=Math.sqrt(Mi[0]*Mi[0]+Mi[1]*Mi[1]);Xa=Math.min(Mr,(Ut-Ho)/(Zo-1)),ai=Math.min(Mr,(Wt-Ho)/(Zo+1))}if(wa!=null){var Ko=Bo(Va==null?[Ea,fa]:[Va,Ra],[Gn,ra],Wt,ai,cn),Gi=Bo([wa,oa],[Ea,fa],Wt,ai,cn);Mr===ai?$a.push("M",Ko[0],"A",ai,",",ai," 0 0,",Or," ",Ko[1],"A",Wt,",",Wt," 0 ",1-cn^Fs(Ko[1][0],Ko[1][1],Gi[1][0],Gi[1][1]),",",cn," ",Gi[1],"A",ai,",",ai," 0 0,",Or," ",Gi[0]):$a.push("M",Ko[0],"A",ai,",",ai," 0 1,",Or," ",Gi[0])}else $a.push("M",Gn,",",ra);if(Va!=null){var Ni=Bo([Gn,ra],[Va,Ra],Ut,-Xa,cn),Fa=Bo([Ea,fa],wa==null?[Gn,ra]:[wa,oa],Ut,-Xa,cn);Mr===Xa?$a.push("L",Fa[0],"A",Xa,",",Xa," 0 0,",Or," ",Fa[1],"A",Ut,",",Ut," 0 ",cn^Fs(Fa[1][0],Fa[1][1],Ni[1][0],Ni[1][1]),",",1-cn," ",Ni[1],"A",Xa,",",Xa," 0 0,",Or," ",Ni[0]):$a.push("L",Fa[0],"A",Xa,",",Xa," 0 0,",Or," ",Ni[0])}else $a.push("L",Ea,",",fa)}else $a.push("M",Gn,",",ra),wa!=null&&$a.push("A",Wt,",",Wt," 0 ",gi,",",cn," ",wa,",",oa),$a.push("L",Ea,",",fa),Va!=null&&$a.push("A",Ut,",",Ut," 0 ",Ii,",",1-cn," ",Va,",",Ra);return $a.push("Z"),$a.join("")}function Ct(Ut,Wt){return"M0,"+Ut+"A"+Ut+","+Ut+" 0 1,"+Wt+" 0,"+-Ut+"A"+Ut+","+Ut+" 0 1,"+Wt+" 0,"+Ut}return vt.innerRadius=function(Ut){return arguments.length?(ce=at(Ut),vt):ce},vt.outerRadius=function(Ut){return arguments.length?(Te=at(Ut),vt):Te},vt.cornerRadius=function(Ut){return arguments.length?(Le=at(Ut),vt):Le},vt.padRadius=function(Ut){return arguments.length?(Be=Ut==Ka?Ka:at(Ut),vt):Be},vt.startAngle=function(Ut){return arguments.length?(Oe=at(Ut),vt):Oe},vt.endAngle=function(Ut){return arguments.length?(Ke=at(Ut),vt):Ke},vt.padAngle=function(Ut){return arguments.length?(bt=at(Ut),vt):bt},vt.centroid=function(){var Ut=(+ce.apply(this,arguments)+ +Te.apply(this,arguments))/2,Wt=(+Oe.apply(this,arguments)+ +Ke.apply(this,arguments))/2-ut;return[Math.cos(Wt)*Ut,Math.sin(Wt)*Ut]},vt};var Ka="auto";function ga(ce){return ce.innerRadius}function mi(ce){return ce.outerRadius}function fo(ce){return ce.startAngle}function po(ce){return ce.endAngle}function ds(ce){return ce&&ce.padAngle}function Fs(ce,Te,Le,Be){return(ce-Le)*Te-(Te-Be)*ce>0?0:1}function Bo(ce,Te,Le,Be,Oe){var Ke=ce[0]-Te[0],bt=ce[1]-Te[1],vt=(Oe?Be:-Be)/Math.sqrt(Ke*Ke+bt*bt),Ct=vt*bt,Ut=-vt*Ke,Wt=ce[0]+Ct,Xt=ce[1]+Ut,br=Te[0]+Ct,Qr=Te[1]+Ut,cn=(Wt+br)/2,Mr=(Xt+Qr)/2,Or=br-Wt,Xr=Qr-Xt,ln=Or*Or+Xr*Xr,fn=Le-Be,Kr=Wt*Qr-br*Xt,Gn=(Xr<0?-1:1)*Math.sqrt(Math.max(0,fn*fn*ln-Kr*Kr)),ra=(Kr*Xr-Or*Gn)/ln,wa=(-Kr*Or-Xr*Gn)/ln,oa=(Kr*Xr+Or*Gn)/ln,Ea=(-Kr*Or+Xr*Gn)/ln,fa=ra-cn,Va=wa-Mr,Ra=oa-cn,$a=Ea-Mr;return fa*fa+Va*Va>Ra*Ra+$a*$a&&(ra=oa,wa=Ea),[[ra-Ct,wa-Ut],[ra*Le/fn,wa*Le/fn]]}function pl(){return!0}function Ms(ce){var Te=ya,Le=pr,Be=pl,Oe=xo,Ke=Oe.key,bt=.7;function vt(Ct){var Ut=[],Wt=[],Xt=-1,br=Ct.length,Qr,cn=at(Te),Mr=at(Le);function Or(){Ut.push("M",Oe(ce(Wt),bt))}for(;++Xt<br;)Be.call(this,Qr=Ct[Xt],Xt)?Wt.push([+cn.call(this,Qr,Xt),+Mr.call(this,Qr,Xt)]):Wt.length&&(Or(),Wt=[]);return Wt.length&&Or(),Ut.length?Ut.join(""):null}return vt.x=function(Ct){return arguments.length?(Te=Ct,vt):Te},vt.y=function(Ct){return arguments.length?(Le=Ct,vt):Le},vt.defined=function(Ct){return arguments.length?(Be=Ct,vt):Be},vt.interpolate=function(Ct){return arguments.length?(typeof Ct=="function"?Ke=Oe=Ct:Ke=(Oe=gs.get(Ct)||xo).key,vt):Ke},vt.tension=function(Ct){return arguments.length?(bt=Ct,vt):bt},vt}d.svg.line=function(){return Ms(R)};var gs=d.map({linear:xo,"linear-closed":cu,step:Su,"step-before":ys,"step-after":Ju,basis:Os,"basis-open":Of,"basis-closed":mf,bundle:xf,cardinal:gf,"cardinal-open":hu,"cardinal-closed":Lc,monotone:We});gs.forEach(function(ce,Te){Te.key=ce,Te.closed=/-closed$/.test(ce)});function xo(ce){return ce.length>1?ce.join("L"):ce+"Z"}function cu(ce){return ce.join("L")+"Z"}function Su(ce){for(var Te=0,Le=ce.length,Be=ce[0],Oe=[Be[0],",",Be[1]];++Te<Le;)Oe.push("H",(Be[0]+(Be=ce[Te])[0])/2,"V",Be[1]);return Le>1&&Oe.push("H",Be[0]),Oe.join("")}function ys(ce){for(var Te=0,Le=ce.length,Be=ce[0],Oe=[Be[0],",",Be[1]];++Te<Le;)Oe.push("V",(Be=ce[Te])[1],"H",Be[0]);return Oe.join("")}function Ju(ce){for(var Te=0,Le=ce.length,Be=ce[0],Oe=[Be[0],",",Be[1]];++Te<Le;)Oe.push("H",(Be=ce[Te])[0],"V",Be[1]);return Oe.join("")}function hu(ce,Te){return ce.length<4?xo(ce):ce[1]+Qu(ce.slice(1,-1),yf(ce,Te))}function Lc(ce,Te){return ce.length<3?cu(ce):ce[0]+Qu((ce.push(ce[0]),ce),yf([ce[ce.length-2]].concat(ce,[ce[1]]),Te))}function gf(ce,Te){return ce.length<3?xo(ce):ce[0]+Qu(ce,yf(ce,Te))}function Qu(ce,Te){if(Te.length<1||ce.length!=Te.length&&ce.length!=Te.length+2)return xo(ce);var Le=ce.length!=Te.length,Be="",Oe=ce[0],Ke=ce[1],bt=Te[0],vt=bt,Ct=1;if(Le&&(Be+="Q"+(Ke[0]-bt[0]*2/3)+","+(Ke[1]-bt[1]*2/3)+","+Ke[0]+","+Ke[1],Oe=ce[1],Ct=2),Te.length>1){vt=Te[1],Ke=ce[Ct],Ct++,Be+="C"+(Oe[0]+bt[0])+","+(Oe[1]+bt[1])+","+(Ke[0]-vt[0])+","+(Ke[1]-vt[1])+","+Ke[0]+","+Ke[1];for(var Ut=2;Ut<Te.length;Ut++,Ct++)Ke=ce[Ct],vt=Te[Ut],Be+="S"+(Ke[0]-vt[0])+","+(Ke[1]-vt[1])+","+Ke[0]+","+Ke[1]}if(Le){var Wt=ce[Ct];Be+="Q"+(Ke[0]+vt[0]*2/3)+","+(Ke[1]+vt[1]*2/3)+","+Wt[0]+","+Wt[1]}return Be}function yf(ce,Te){for(var Le=[],Be=(1-Te)/2,Oe,Ke=ce[0],bt=ce[1],vt=1,Ct=ce.length;++vt<Ct;)Oe=Ke,Ke=bt,bt=ce[vt],Le.push([Be*(bt[0]-Oe[0]),Be*(bt[1]-Oe[1])]);return Le}function Os(ce){if(ce.length<3)return xo(ce);var Te=1,Le=ce.length,Be=ce[0],Oe=Be[0],Ke=Be[1],bt=[Oe,Oe,Oe,(Be=ce[1])[0]],vt=[Ke,Ke,Ke,Be[1]],Ct=[Oe,",",Ke,"L",Uo(Ss,bt),",",Uo(Ss,vt)];for(ce.push(ce[Le-1]);++Te<=Le;)Be=ce[Te],bt.shift(),bt.push(Be[0]),vt.shift(),vt.push(Be[1]),$u(Ct,bt,vt);return ce.pop(),Ct.push("L",Be),Ct.join("")}function Of(ce){if(ce.length<4)return xo(ce);for(var Te=[],Le=-1,Be=ce.length,Oe,Ke=[0],bt=[0];++Le<3;)Oe=ce[Le],Ke.push(Oe[0]),bt.push(Oe[1]);for(Te.push(Uo(Ss,Ke)+","+Uo(Ss,bt)),--Le;++Le<Be;)Oe=ce[Le],Ke.shift(),Ke.push(Oe[0]),bt.shift(),bt.push(Oe[1]),$u(Te,Ke,bt);return Te.join("")}function mf(ce){for(var Te,Le=-1,Be=ce.length,Oe=Be+4,Ke,bt=[],vt=[];++Le<4;)Ke=ce[Le%Be],bt.push(Ke[0]),vt.push(Ke[1]);for(Te=[Uo(Ss,bt),",",Uo(Ss,vt)],--Le;++Le<Oe;)Ke=ce[Le%Be],bt.shift(),bt.push(Ke[0]),vt.shift(),vt.push(Ke[1]),$u(Te,bt,vt);return Te.join("")}function xf(ce,Te){var Le=ce.length-1;if(Le)for(var Be=ce[0][0],Oe=ce[0][1],Ke=ce[Le][0]-Be,bt=ce[Le][1]-Oe,vt=-1,Ct,Ut;++vt<=Le;)Ct=ce[vt],Ut=vt/Le,Ct[0]=Te*Ct[0]+(1-Te)*(Be+Ut*Ke),Ct[1]=Te*Ct[1]+(1-Te)*(Oe+Ut*bt);return Os(ce)}function Uo(ce,Te){return ce[0]*Te[0]+ce[1]*Te[1]+ce[2]*Te[2]+ce[3]*Te[3]}var bf=[0,2/3,1/3,0],Jf=[0,1/3,2/3,0],Ss=[0,1/6,2/3,1/6];function $u(ce,Te,Le){ce.push("C",Uo(bf,Te),",",Uo(bf,Le),",",Uo(Jf,Te),",",Uo(Jf,Le),",",Uo(Ss,Te),",",Uo(Ss,Le))}function qu(ce,Te){return(Te[1]-ce[1])/(Te[0]-ce[0])}function _f(ce){for(var Te=0,Le=ce.length-1,Be=[],Oe=ce[0],Ke=ce[1],bt=Be[0]=qu(Oe,Ke);++Te<Le;)Be[Te]=(bt+(bt=qu(Oe=Ke,Ke=ce[Te+1])))/2;return Be[Te]=bt,Be}function ze(ce){for(var Te=[],Le,Be,Oe,Ke,bt=_f(ce),vt=-1,Ct=ce.length-1;++vt<Ct;)Le=qu(ce[vt],ce[vt+1]),p(Le)<ht?bt[vt]=bt[vt+1]=0:(Be=bt[vt]/Le,Oe=bt[vt+1]/Le,Ke=Be*Be+Oe*Oe,Ke>9&&(Ke=Le*3/Math.sqrt(Ke),bt[vt]=Ke*Be,bt[vt+1]=Ke*Oe));for(vt=-1;++vt<=Ct;)Ke=(ce[Math.min(Ct,vt+1)][0]-ce[Math.max(0,vt-1)][0])/(6*(1+bt[vt]*bt[vt])),Te.push([Ke||0,bt[vt]*Ke||0]);return Te}function We(ce){return ce.length<3?xo(ce):ce[0]+Qu(ce,ze(ce))}d.svg.line.radial=function(){var ce=Ms(nt);return ce.radius=ce.x,delete ce.x,ce.angle=ce.y,delete ce.y,ce};function nt(ce){for(var Te,Le=-1,Be=ce.length,Oe,Ke;++Le<Be;)Te=ce[Le],Oe=Te[0],Ke=Te[1]-ut,Te[0]=Oe*Math.cos(Ke),Te[1]=Oe*Math.sin(Ke);return ce}function lt(ce){var Te=ya,Le=ya,Be=0,Oe=pr,Ke=pl,bt=xo,vt=bt.key,Ct=bt,Ut="L",Wt=.7;function Xt(br){var Qr=[],cn=[],Mr=[],Or=-1,Xr=br.length,ln,fn=at(Te),Kr=at(Be),Gn=Te===Le?function(){return wa}:at(Le),ra=Be===Oe?function(){return oa}:at(Oe),wa,oa;function Ea(){Qr.push("M",bt(ce(Mr),Wt),Ut,Ct(ce(cn.reverse()),Wt),"Z")}for(;++Or<Xr;)Ke.call(this,ln=br[Or],Or)?(cn.push([wa=+fn.call(this,ln,Or),oa=+Kr.call(this,ln,Or)]),Mr.push([+Gn.call(this,ln,Or),+ra.call(this,ln,Or)])):cn.length&&(Ea(),cn=[],Mr=[]);return cn.length&&Ea(),Qr.length?Qr.join(""):null}return Xt.x=function(br){return arguments.length?(Te=Le=br,Xt):Le},Xt.x0=function(br){return arguments.length?(Te=br,Xt):Te},Xt.x1=function(br){return arguments.length?(Le=br,Xt):Le},Xt.y=function(br){return arguments.length?(Be=Oe=br,Xt):Oe},Xt.y0=function(br){return arguments.length?(Be=br,Xt):Be},Xt.y1=function(br){return arguments.length?(Oe=br,Xt):Oe},Xt.defined=function(br){return arguments.length?(Ke=br,Xt):Ke},Xt.interpolate=function(br){return arguments.length?(typeof br=="function"?vt=bt=br:vt=(bt=gs.get(br)||xo).key,Ct=bt.reverse||bt,Ut=bt.closed?"M":"L",Xt):vt},Xt.tension=function(br){return arguments.length?(Wt=br,Xt):Wt},Xt}ys.reverse=Ju,Ju.reverse=ys,d.svg.area=function(){return lt(R)},d.svg.area.radial=function(){var ce=lt(nt);return ce.radius=ce.x,delete ce.x,ce.innerRadius=ce.x0,delete ce.x0,ce.outerRadius=ce.x1,delete ce.x1,ce.angle=ce.y,delete ce.y,ce.startAngle=ce.y0,delete ce.y0,ce.endAngle=ce.y1,delete ce.y1,ce};function _t(ce){return ce.source}function xt(ce){return ce.target}d.svg.chord=function(){var ce=_t,Te=xt,Le=At,Be=fo,Oe=po;function Ke(Wt,Xt){var br=bt(this,ce,Wt,Xt),Qr=bt(this,Te,Wt,Xt);return"M"+br.p0+Ct(br.r,br.p1,br.a1-br.a0)+(vt(br,Qr)?Ut(br.r,br.p1,br.r,br.p0):Ut(br.r,br.p1,Qr.r,Qr.p0)+Ct(Qr.r,Qr.p1,Qr.a1-Qr.a0)+Ut(Qr.r,Qr.p1,br.r,br.p0))+"Z"}function bt(Wt,Xt,br,Qr){var cn=Xt.call(Wt,br,Qr),Mr=Le.call(Wt,cn,Qr),Or=Be.call(Wt,cn,Qr)-ut,Xr=Oe.call(Wt,cn,Qr)-ut;return{r:Mr,a0:Or,a1:Xr,p0:[Mr*Math.cos(Or),Mr*Math.sin(Or)],p1:[Mr*Math.cos(Xr),Mr*Math.sin(Xr)]}}function vt(Wt,Xt){return Wt.a0==Xt.a0&&Wt.a1==Xt.a1}function Ct(Wt,Xt,br){return"A"+Wt+","+Wt+" 0 "+ +(br>Ce)+",1 "+Xt}function Ut(Wt,Xt,br,Qr){return"Q 0,0 "+Qr}return Ke.radius=function(Wt){return arguments.length?(Le=at(Wt),Ke):Le},Ke.source=function(Wt){return arguments.length?(ce=at(Wt),Ke):ce},Ke.target=function(Wt){return arguments.length?(Te=at(Wt),Ke):Te},Ke.startAngle=function(Wt){return arguments.length?(Be=at(Wt),Ke):Be},Ke.endAngle=function(Wt){return arguments.length?(Oe=at(Wt),Ke):Oe},Ke};function At(ce){return ce.radius}d.svg.diagonal=function(){var ce=_t,Te=xt,Le=qt;function Be(Oe,Ke){var bt=ce.call(this,Oe,Ke),vt=Te.call(this,Oe,Ke),Ct=(bt.y+vt.y)/2,Ut=[bt,{x:bt.x,y:Ct},{x:vt.x,y:Ct},vt];return Ut=Ut.map(Le),"M"+Ut[0]+"C"+Ut[1]+" "+Ut[2]+" "+Ut[3]}return Be.source=function(Oe){return arguments.length?(ce=at(Oe),Be):ce},Be.target=function(Oe){return arguments.length?(Te=at(Oe),Be):Te},Be.projection=function(Oe){return arguments.length?(Le=Oe,Be):Le},Be};function qt(ce){return[ce.x,ce.y]}d.svg.diagonal.radial=function(){var ce=d.svg.diagonal(),Te=qt,Le=ce.projection;return ce.projection=function(Be){return arguments.length?Le(sr(Te=Be)):Te},ce};function sr(ce){return function(){var Te=ce.apply(this,arguments),Le=Te[0],Be=Te[1]-ut;return[Le*Math.cos(Be),Le*Math.sin(Be)]}}d.svg.symbol=function(){var ce=cr,Te=Qt;function Le(Be,Oe){return(Gr.get(ce.call(this,Be,Oe))||kr)(Te.call(this,Be,Oe))}return Le.type=function(Be){return arguments.length?(ce=at(Be),Le):ce},Le.size=function(Be){return arguments.length?(Te=at(Be),Le):Te},Le};function Qt(){return 64}function cr(){return"circle"}function kr(ce){var Te=Math.sqrt(ce/Ce);return"M0,"+Te+"A"+Te+","+Te+" 0 1,1 0,"+-Te+"A"+Te+","+Te+" 0 1,1 0,"+Te+"Z"}var Gr=d.map({circle:kr,cross:function(ce){var Te=Math.sqrt(ce/5)/2;return"M"+-3*Te+","+-Te+"H"+-Te+"V"+-3*Te+"H"+Te+"V"+-Te+"H"+3*Te+"V"+Te+"H"+Te+"V"+3*Te+"H"+-Te+"V"+Te+"H"+-3*Te+"Z"},diamond:function(ce){var Te=Math.sqrt(ce/(2*_n)),Le=Te*_n;return"M0,"+-Te+"L"+Le+",0 0,"+Te+" "+-Le+",0Z"},square:function(ce){var Te=Math.sqrt(ce)/2;return"M"+-Te+","+-Te+"L"+Te+","+-Te+" "+Te+","+Te+" "+-Te+","+Te+"Z"},"triangle-down":function(ce){var Te=Math.sqrt(ce/en),Le=Te*en/2;return"M0,"+Le+"L"+Te+","+-Le+" "+-Te+","+-Le+"Z"},"triangle-up":function(ce){var Te=Math.sqrt(ce/en),Le=Te*en/2;return"M0,"+-Le+"L"+Te+","+Le+" "+-Te+","+Le+"Z"}});d.svg.symbolTypes=Gr.keys();var en=Math.sqrt(3),_n=Math.tan(30*Pt);ee.transition=function(ce){for(var Te=Wa||++Za,Le=ri(ce),Be=[],Oe,Ke,bt=ei||{time:Date.now(),ease:Ks,delay:0,duration:250},vt=-1,Ct=this.length;++vt<Ct;){Be.push(Oe=[]);for(var Ut=this[vt],Wt=-1,Xt=Ut.length;++Wt<Xt;)(Ke=Ut[Wt])&&Vi(Ke,Wt,Le,Te,bt),Oe.push(Ke)}return ma(Be,Le,Te)},ee.interrupt=function(ce){return this.each(ce==null?Pn:jn(ri(ce)))};var Pn=jn(ri());function jn(ce){return function(){var Te,Le,Be;(Te=this[ce])&&(Be=Te[Le=Te.active])&&(Be.timer.c=null,Be.timer.t=NaN,--Te.count?delete Te[Le]:delete this[ce],Te.active+=.5,Be.event&&Be.event.interrupt.call(this,this.__data__,Be.index))}}function ma(ce,Te,Le){return le(ce,ba),ce.namespace=Te,ce.id=Le,ce}var ba=[],Za=0,Wa,ei;ba.call=ee.call,ba.empty=ee.empty,ba.node=ee.node,ba.size=ee.size,d.transition=function(ce,Te){return ce&&ce.transition?Wa?ce.transition(Te):ce:d.selection().transition(ce)},d.transition.prototype=ba,ba.select=function(ce){var Te=this.id,Le=this.namespace,Be=[],Oe,Ke,bt;ce=j(ce);for(var vt=-1,Ct=this.length;++vt<Ct;){Be.push(Oe=[]);for(var Ut=this[vt],Wt=-1,Xt=Ut.length;++Wt<Xt;)(bt=Ut[Wt])&&(Ke=ce.call(bt,bt.__data__,Wt,vt))?("__data__"in bt&&(Ke.__data__=bt.__data__),Vi(Ke,Wt,Le,Te,bt[Le][Te]),Oe.push(Ke)):Oe.push(null)}return ma(Be,Le,Te)},ba.selectAll=function(ce){var Te=this.id,Le=this.namespace,Be=[],Oe,Ke,bt,vt,Ct;ce=Q(ce);for(var Ut=-1,Wt=this.length;++Ut<Wt;)for(var Xt=this[Ut],br=-1,Qr=Xt.length;++br<Qr;)if(bt=Xt[br]){Ct=bt[Le][Te],Ke=ce.call(bt,bt.__data__,br,Ut),Be.push(Oe=[]);for(var cn=-1,Mr=Ke.length;++cn<Mr;)(vt=Ke[cn])&&Vi(vt,cn,Le,Te,Ct),Oe.push(vt)}return ma(Be,Le,Te)},ba.filter=function(ce){var Te=[],Le,Be,Oe;typeof ce!="function"&&(ce=_e(ce));for(var Ke=0,bt=this.length;Ke<bt;Ke++){Te.push(Le=[]);for(var Be=this[Ke],vt=0,Ct=Be.length;vt<Ct;vt++)(Oe=Be[vt])&&ce.call(Oe,Oe.__data__,vt,Ke)&&Le.push(Oe)}return ma(Te,this.namespace,this.id)},ba.tween=function(ce,Te){var Le=this.id,Be=this.namespace;return arguments.length<2?this.node()[Be][Le].tween.get(ce):Ye(this,Te==null?function(Oe){Oe[Be][Le].tween.remove(ce)}:function(Oe){Oe[Be][Le].tween.set(ce,Te)})};function fi(ce,Te,Le,Be){var Oe=ce.id,Ke=ce.namespace;return Ye(ce,typeof Le=="function"?function(bt,vt,Ct){bt[Ke][Oe].tween.set(Te,Be(Le.call(bt,bt.__data__,vt,Ct)))}:(Le=Be(Le),function(bt){bt[Ke][Oe].tween.set(Te,Le)}))}ba.attr=function(ce,Te){if(arguments.length<2){for(Te in ce)this.attr(Te,ce[Te]);return this}var Le=ce=="transform"?su:io,Be=d.ns.qualify(ce);function Oe(){this.removeAttribute(Be)}function Ke(){this.removeAttributeNS(Be.space,Be.local)}function bt(Ct){return Ct==null?Oe:(Ct+="",function(){var Ut=this.getAttribute(Be),Wt;return Ut!==Ct&&(Wt=Le(Ut,Ct),function(Xt){this.setAttribute(Be,Wt(Xt))})})}function vt(Ct){return Ct==null?Ke:(Ct+="",function(){var Ut=this.getAttributeNS(Be.space,Be.local),Wt;return Ut!==Ct&&(Wt=Le(Ut,Ct),function(Xt){this.setAttributeNS(Be.space,Be.local,Wt(Xt))})})}return fi(this,"attr."+ce,Te,Be.local?vt:bt)},ba.attrTween=function(ce,Te){var Le=d.ns.qualify(ce);function Be(Ke,bt){var vt=Te.call(this,Ke,bt,this.getAttribute(Le));return vt&&function(Ct){this.setAttribute(Le,vt(Ct))}}function Oe(Ke,bt){var vt=Te.call(this,Ke,bt,this.getAttributeNS(Le.space,Le.local));return vt&&function(Ct){this.setAttributeNS(Le.space,Le.local,vt(Ct))}}return this.tween("attr."+ce,Le.local?Oe:Be)},ba.style=function(ce,Te,Le){var Be=arguments.length;if(Be<3){if(typeof ce!="string"){Be<2&&(Te="");for(Le in ce)this.style(Le,ce[Le],Te);return this}Le=""}function Oe(){this.style.removeProperty(ce)}function Ke(bt){return bt==null?Oe:(bt+="",function(){var vt=o(this).getComputedStyle(this,null).getPropertyValue(ce),Ct;return vt!==bt&&(Ct=io(vt,bt),function(Ut){this.style.setProperty(ce,Ct(Ut),Le)})})}return fi(this,"style."+ce,Te,Ke)},ba.styleTween=function(ce,Te,Le){arguments.length<3&&(Le="");function Be(Oe,Ke){var bt=Te.call(this,Oe,Ke,o(this).getComputedStyle(this,null).getPropertyValue(ce));return bt&&function(vt){this.style.setProperty(ce,bt(vt),Le)}}return this.tween("style."+ce,Be)},ba.text=function(ce){return fi(this,"text",ce,oo)};function oo(ce){return ce==null&&(ce=""),function(){this.textContent=ce}}ba.remove=function(){var ce=this.namespace;return this.each("end.transition",function(){var Te;this[ce].count<2&&(Te=this.parentNode)&&Te.removeChild(this)})},ba.ease=function(ce){var Te=this.id,Le=this.namespace;return arguments.length<1?this.node()[Le][Te].ease:(typeof ce!="function"&&(ce=d.ease.apply(d,arguments)),Ye(this,function(Be){Be[Le][Te].ease=ce}))},ba.delay=function(ce){var Te=this.id,Le=this.namespace;return arguments.length<1?this.node()[Le][Te].delay:Ye(this,typeof ce=="function"?function(Be,Oe,Ke){Be[Le][Te].delay=+ce.call(Be,Be.__data__,Oe,Ke)}:(ce=+ce,function(Be){Be[Le][Te].delay=ce}))},ba.duration=function(ce){var Te=this.id,Le=this.namespace;return arguments.length<1?this.node()[Le][Te].duration:Ye(this,typeof ce=="function"?function(Be,Oe,Ke){Be[Le][Te].duration=Math.max(1,ce.call(Be,Be.__data__,Oe,Ke))}:(ce=Math.max(1,ce),function(Be){Be[Le][Te].duration=ce}))},ba.each=function(ce,Te){var Le=this.id,Be=this.namespace;if(arguments.length<2){var Oe=ei,Ke=Wa;try{Wa=Le,Ye(this,function(bt,vt,Ct){ei=bt[Be][Le],ce.call(bt,bt.__data__,vt,Ct)})}finally{ei=Oe,Wa=Ke}}else Ye(this,function(bt){var vt=bt[Be][Le];(vt.event||(vt.event=d.dispatch("start","end","interrupt"))).on(ce,Te)});return this},ba.transition=function(){for(var ce=this.id,Te=++Za,Le=this.namespace,Be=[],Oe,Ke,bt,vt,Ct=0,Ut=this.length;Ct<Ut;Ct++){Be.push(Oe=[]);for(var Ke=this[Ct],Wt=0,Xt=Ke.length;Wt<Xt;Wt++)(bt=Ke[Wt])&&(vt=bt[Le][ce],Vi(bt,Wt,Le,Te,{time:vt.time,ease:vt.ease,delay:vt.delay+vt.duration,duration:vt.duration})),Oe.push(bt)}return ma(Be,Le,Te)};function ri(ce){return ce==null?"__transition__":"__transition_"+ce+"__"}function Vi(ce,Te,Le,Be,Oe){var Ke=ce[Le]||(ce[Le]={active:0,count:0}),bt=Ke[Be],vt,Ct,Ut,Wt,Xt;function br(Mr){var Or=bt.delay;if(Ct.t=Or+vt,Or<=Mr)return Qr(Mr-Or);Ct.c=Qr}function Qr(Mr){var Or=Ke.active,Xr=Ke[Or];Xr&&(Xr.timer.c=null,Xr.timer.t=NaN,--Ke.count,delete Ke[Or],Xr.event&&Xr.event.interrupt.call(ce,ce.__data__,Xr.index));for(var ln in Ke)if(+ln<Be){var fn=Ke[ln];fn.timer.c=null,fn.timer.t=NaN,--Ke.count,delete Ke[ln]}Ct.c=cn,En(function(){return Ct.c&&cn(Mr||1)&&(Ct.c=null,Ct.t=NaN),1},0,vt),Ke.active=Be,bt.event&&bt.event.start.call(ce,ce.__data__,Te),Xt=[],bt.tween.forEach(function(Kr,Gn){(Gn=Gn.call(ce,ce.__data__,Te))&&Xt.push(Gn)}),Wt=bt.ease,Ut=bt.duration}function cn(Mr){for(var Or=Mr/Ut,Xr=Wt(Or),ln=Xt.length;ln>0;)Xt[--ln].call(ce,Xr);if(Or>=1)return bt.event&&bt.event.end.call(ce,ce.__data__,Te),--Ke.count?delete Ke[Be]:delete ce[Le],1}bt||(vt=Oe.time,Ct=En(br,0,vt),bt=Ke[Be]={tween:new M,time:vt,timer:Ct,delay:Oe.delay,duration:Oe.duration,ease:Oe.ease,index:Te},Oe=null,++Ke.count)}d.svg.axis=function(){var ce=d.scale.linear(),Te=co,Le=6,Be=6,Oe=3,Ke=[10],bt=null,vt;function Ct(Ut){Ut.each(function(){var Wt=d.select(this),Xt=this.__chart__||ce,br=this.__chart__=ce.copy(),Qr=bt==null?br.ticks?br.ticks.apply(br,Ke):br.domain():bt,cn=vt==null?br.tickFormat?br.tickFormat.apply(br,Ke):R:vt,Mr=Wt.selectAll(".tick").data(Qr,br),Or=Mr.enter().insert("g",".domain").attr("class","tick").style("opacity",ht),Xr=d.transition(Mr.exit()).style("opacity",ht).remove(),ln=d.transition(Mr.order()).style("opacity",1),fn=Math.max(Le,0)+Oe,Kr,Gn=on(br),ra=Wt.selectAll(".domain").data([0]),wa=(ra.enter().append("path").attr("class","domain"),d.transition(ra));Or.append("line"),Or.append("text");var oa=Or.select("line"),Ea=ln.select("line"),fa=Mr.select("text").text(cn),Va=Or.select("text"),Ra=ln.select("text"),$a=Te==="top"||Te==="left"?-1:1,gi,ho,Ii,ha;if(Te==="bottom"||Te==="top"?(Kr=xi,gi="x",Ii="y",ho="x2",ha="y2",fa.attr("dy",$a<0?"0em":".71em").style("text-anchor","middle"),wa.attr("d","M"+Gn[0]+","+$a*Be+"V0H"+Gn[1]+"V"+$a*Be)):(Kr=Ai,gi="y",Ii="x",ho="y2",ha="x2",fa.attr("dy",".32em").style("text-anchor",$a<0?"end":"start"),wa.attr("d","M"+$a*Be+","+Gn[0]+"H0V"+Gn[1]+"H"+$a*Be)),oa.attr(ha,$a*Le),Va.attr(Ii,$a*fn),Ea.attr(ho,0).attr(ha,$a*Le),Ra.attr(gi,0).attr(Ii,$a*fn),br.rangeBand){var ai=br,Xa=ai.rangeBand()/2;Xt=br=function(Mi){return ai(Mi)+Xa}}else Xt.rangeBand?Xt=br:Xr.call(Kr,br,Xt);Or.call(Kr,Xt,br),ln.call(Kr,br,br)})}return Ct.scale=function(Ut){return arguments.length?(ce=Ut,Ct):ce},Ct.orient=function(Ut){return arguments.length?(Te=Ut in _o?Ut+"":co,Ct):Te},Ct.ticks=function(){return arguments.length?(Ke=b(arguments),Ct):Ke},Ct.tickValues=function(Ut){return arguments.length?(bt=Ut,Ct):bt},Ct.tickFormat=function(Ut){return arguments.length?(vt=Ut,Ct):vt},Ct.tickSize=function(Ut){var Wt=arguments.length;return Wt?(Le=+Ut,Be=+arguments[Wt-1],Ct):Le},Ct.innerTickSize=function(Ut){return arguments.length?(Le=+Ut,Ct):Le},Ct.outerTickSize=function(Ut){return arguments.length?(Be=+Ut,Ct):Be},Ct.tickPadding=function(Ut){return arguments.length?(Oe=+Ut,Ct):Oe},Ct.tickSubdivide=function(){return arguments.length&&Ct},Ct};var co="bottom",_o={top:1,right:1,bottom:1,left:1};function xi(ce,Te,Le){ce.attr("transform",function(Be){var Oe=Te(Be);return"translate("+(isFinite(Oe)?Oe:Le(Be))+",0)"})}function Ai(ce,Te,Le){ce.attr("transform",function(Be){var Oe=Te(Be);return"translate(0,"+(isFinite(Oe)?Oe:Le(Be))+")"})}d.svg.brush=function(){var ce=Z(Wt,"brushstart","brush","brushend"),Te=null,Le=null,Be=[0,0],Oe=[0,0],Ke,bt,vt=!0,Ct=!0,Ut=go[0];function Wt(Mr){Mr.each(function(){var Or=d.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",cn).on("touchstart.brush",cn),Xr=Or.selectAll(".background").data([0]);Xr.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Or.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var ln=Or.selectAll(".resize").data(Ut,R);ln.exit().remove(),ln.enter().append("g").attr("class",function(ra){return"resize "+ra}).style("cursor",function(ra){return ms[ra]}).append("rect").attr("x",function(ra){return/[ew]$/.test(ra)?-3:null}).attr("y",function(ra){return/^[ns]/.test(ra)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),ln.style("display",Wt.empty()?"none":null);var fn=d.transition(Or),Kr=d.transition(Xr),Gn;Te&&(Gn=on(Te),Kr.attr("x",Gn[0]).attr("width",Gn[1]-Gn[0]),br(fn)),Le&&(Gn=on(Le),Kr.attr("y",Gn[0]).attr("height",Gn[1]-Gn[0]),Qr(fn)),Xt(fn)})}Wt.event=function(Mr){Mr.each(function(){var Or=ce.of(this,arguments),Xr={x:Be,y:Oe,i:Ke,j:bt},ln=this.__chart__||Xr;this.__chart__=Xr,Wa?d.select(this).transition().each("start.brush",function(){Ke=ln.i,bt=ln.j,Be=ln.x,Oe=ln.y,Or({type:"brushstart"})}).tween("brush:brush",function(){var fn=Qi(Be,Xr.x),Kr=Qi(Oe,Xr.y);return Ke=bt=null,function(Gn){Be=Xr.x=fn(Gn),Oe=Xr.y=Kr(Gn),Or({type:"brush",mode:"resize"})}}).each("end.brush",function(){Ke=Xr.i,bt=Xr.j,Or({type:"brush",mode:"resize"}),Or({type:"brushend"})}):(Or({type:"brushstart"}),Or({type:"brush",mode:"resize"}),Or({type:"brushend"}))})};function Xt(Mr){Mr.selectAll(".resize").attr("transform",function(Or){return"translate("+Be[+/e$/.test(Or)]+","+Oe[+/^s/.test(Or)]+")"})}function br(Mr){Mr.select(".extent").attr("x",Be[0]),Mr.selectAll(".extent,.n>rect,.s>rect").attr("width",Be[1]-Be[0])}function Qr(Mr){Mr.select(".extent").attr("y",Oe[0]),Mr.selectAll(".extent,.e>rect,.w>rect").attr("height",Oe[1]-Oe[0])}function cn(){var Mr=this,Or=d.select(d.event.target),Xr=ce.of(Mr,arguments),ln=d.select(Mr),fn=Or.datum(),Kr=!/^(n|s)$/.test(fn)&&Te,Gn=!/^(e|w)$/.test(fn)&&Le,ra=Or.classed("extent"),wa=Nt(Mr),oa,Ea=d.mouse(Mr),fa,Va=d.select(o(Mr)).on("keydown.brush",gi).on("keyup.brush",ho);if(d.event.changedTouches?Va.on("touchmove.brush",Ii).on("touchend.brush",ai):Va.on("mousemove.brush",Ii).on("mouseup.brush",ai),ln.interrupt().selectAll("*").interrupt(),ra)Ea[0]=Be[0]-Ea[0],Ea[1]=Oe[0]-Ea[1];else if(fn){var Ra=+/w$/.test(fn),$a=+/^n/.test(fn);fa=[Be[1-Ra]-Ea[0],Oe[1-$a]-Ea[1]],Ea[0]=Be[Ra],Ea[1]=Oe[$a]}else d.event.altKey&&(oa=Ea.slice());ln.style("pointer-events","none").selectAll(".resize").style("display",null),d.select("body").style("cursor",Or.style("cursor")),Xr({type:"brushstart"}),Ii();function gi(){d.event.keyCode==32&&(ra||(oa=null,Ea[0]-=Be[1],Ea[1]-=Oe[1],ra=2),J())}function ho(){d.event.keyCode==32&&ra==2&&(Ea[0]+=Be[1],Ea[1]+=Oe[1],ra=0,J())}function Ii(){var Xa=d.mouse(Mr),Mi=!1;fa&&(Xa[0]+=fa[0],Xa[1]+=fa[1]),ra||(d.event.altKey?(oa||(oa=[(Be[0]+Be[1])/2,(Oe[0]+Oe[1])/2]),Ea[0]=Be[+(Xa[0]<oa[0])],Ea[1]=Oe[+(Xa[1]<oa[1])]):oa=null),Kr&&ha(Xa,Te,0)&&(br(ln),Mi=!0),Gn&&ha(Xa,Le,1)&&(Qr(ln),Mi=!0),Mi&&(Xt(ln),Xr({type:"brush",mode:ra?"move":"resize"}))}function ha(Xa,Mi,si){var so=on(Mi),$i=so[0],yo=so[1],Zo=Ea[si],Ho=si?Oe:Be,Ko=Ho[1]-Ho[0],Gi,Ni;if(ra&&($i-=Zo,yo-=Ko+Zo),Gi=(si?Ct:vt)?Math.max($i,Math.min(yo,Xa[si])):Xa[si],ra?Ni=(Gi+=Zo)+Ko:(oa&&(Zo=Math.max($i,Math.min(yo,2*oa[si]-Gi))),Zo<Gi?(Ni=Gi,Gi=Zo):Ni=Zo),Ho[0]!=Gi||Ho[1]!=Ni)return si?bt=null:Ke=null,Ho[0]=Gi,Ho[1]=Ni,!0}function ai(){Ii(),ln.style("pointer-events","all").selectAll(".resize").style("display",Wt.empty()?"none":null),d.select("body").style("cursor",null),Va.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),wa(),Xr({type:"brushend"})}}return Wt.x=function(Mr){return arguments.length?(Te=Mr,Ut=go[!Te<<1|!Le],Wt):Te},Wt.y=function(Mr){return arguments.length?(Le=Mr,Ut=go[!Te<<1|!Le],Wt):Le},Wt.clamp=function(Mr){return arguments.length?(Te&&Le?(vt=!!Mr[0],Ct=!!Mr[1]):Te?vt=!!Mr:Le&&(Ct=!!Mr),Wt):Te&&Le?[vt,Ct]:Te?vt:Le?Ct:null},Wt.extent=function(Mr){var Or,Xr,ln,fn,Kr;return arguments.length?(Te&&(Or=Mr[0],Xr=Mr[1],Le&&(Or=Or[0],Xr=Xr[0]),Ke=[Or,Xr],Te.invert&&(Or=Te(Or),Xr=Te(Xr)),Xr<Or&&(Kr=Or,Or=Xr,Xr=Kr),(Or!=Be[0]||Xr!=Be[1])&&(Be=[Or,Xr])),Le&&(ln=Mr[0],fn=Mr[1],Te&&(ln=ln[1],fn=fn[1]),bt=[ln,fn],Le.invert&&(ln=Le(ln),fn=Le(fn)),fn<ln&&(Kr=ln,ln=fn,fn=Kr),(ln!=Oe[0]||fn!=Oe[1])&&(Oe=[ln,fn])),Wt):(Te&&(Ke?(Or=Ke[0],Xr=Ke[1]):(Or=Be[0],Xr=Be[1],Te.invert&&(Or=Te.invert(Or),Xr=Te.invert(Xr)),Xr<Or&&(Kr=Or,Or=Xr,Xr=Kr))),Le&&(bt?(ln=bt[0],fn=bt[1]):(ln=Oe[0],fn=Oe[1],Le.invert&&(ln=Le.invert(ln),fn=Le.invert(fn)),fn<ln&&(Kr=ln,ln=fn,fn=Kr))),Te&&Le?[[Or,ln],[Xr,fn]]:Te?[Or,Xr]:Le&&[ln,fn])},Wt.clear=function(){return Wt.empty()||(Be=[0,0],Oe=[0,0],Ke=bt=null),Wt},Wt.empty=function(){return!!Te&&Be[0]==Be[1]||!!Le&&Oe[0]==Oe[1]},d.rebind(Wt,ce,"on")};var ms={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},go=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];d.text=zt(function(ce){return ce.responseText}),d.json=function(ce,Te){return er(ce,"application/json",Io,Te)};function Io(ce){return JSON.parse(ce.responseText)}d.html=function(ce,Te){return er(ce,"text/html",jo,Te)};function jo(ce){var Te=w.createRange();return Te.selectNode(w.body),Te.createContextualFragment(ce.responseText)}d.xml=zt(function(ce){return ce.responseXML}),typeof B=="object"&&B.exports?B.exports=d:this.d3=d}).apply(self)},{}],59:[function(t,B,H){B.exports=t("./quad")},{"./quad":60}],60:[function(t,B,H){var d=t("binary-search-bounds"),l=t("clamp"),b=t("parse-rect"),w=t("array-bounds"),e=t("pick-by-alias"),o=t("defined"),a=t("flatten-vertex-data"),r=t("is-obj"),n=t("dtype"),c=t("math-log2"),s=1073741824;B.exports=function(u,g){g||(g={}),u=a(u,"float64"),g=e(g,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var h=o(g.maxDepth,255),y=o(g.bounds,w(u,2));y[0]===y[2]&&y[2]++,y[1]===y[3]&&y[3]++;var p=i(u,y),A=u.length>>>1,m;g.dtype||(g.dtype="array"),typeof g.dtype=="string"?m=new(n(g.dtype))(A):g.dtype&&(m=g.dtype,Array.isArray(m)&&(m.length=A));for(var M=0;M<A;++M)m[M]=M;var x=[],T=[],_=[],f=[];R(0,0,1,m,0,1);for(var L=0,S=0;S<x.length;S++){var k=x[S];if(m.set)m.set(k,L);else for(var P=0,z=k.length;P<z;P++)m[P+L]=k[P];var I=L+x[S].length;f[S]=[L,I],L=I}return m.range=D,m;function R(G,W,q,J,X,Z){if(!J.length)return null;var se=x[X]||(x[X]=[]),le=_[X]||(_[X]=[]),oe=T[X]||(T[X]=[]),U=se.length;if(X++,X>h||Z>s){for(var V=0;V<J.length;V++)se.push(J[V]),le.push(Z),oe.push(null,null,null,null);return U}if(se.push(J[0]),le.push(Z),J.length<=1)return oe.push(null,null,null,null),U;for(var re=q*.5,ee=G+re,j=W+re,Q=[],ne=[],ae=[],ie=[],ue=1,xe=J.length;ue<xe;ue++){var he=J[ue],ge=p[he*2],me=p[he*2+1];ge<ee?me<j?Q.push(he):ne.push(he):me<j?ae.push(he):ie.push(he)}return Z<<=2,oe.push(R(G,W,re,Q,X,Z),R(G,j,re,ne,X,Z+1),R(ee,W,re,ae,X,Z+2),R(ee,j,re,ie,X,Z+3)),U}function D(){for(var G=[],W=arguments.length;W--;)G[W]=arguments[W];var q;if(r(G[G.length-1])){var J=G.pop();!G.length&&(J.x!=null||J.l!=null||J.left!=null)&&(G=[J],q={}),q=e(J,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else q={};G.length||(G=y);var X=b.apply(void 0,G),Z=[Math.min(X.x,X.x+X.width),Math.min(X.y,X.y+X.height),Math.max(X.x,X.x+X.width),Math.max(X.y,X.y+X.height)],se=Z[0],le=Z[1],oe=Z[2],U=Z[3],V=i([se,le,oe,U],y),re=V[0],ee=V[1],j=V[2],Q=V[3],ne=o(q.level,x.length);if(q.d!=null){var ae;typeof q.d=="number"?ae=[q.d,q.d]:q.d.length&&(ae=q.d),ne=Math.min(Math.max(Math.ceil(-c(Math.abs(ae[0])/(y[2]-y[0]))),Math.ceil(-c(Math.abs(ae[1])/(y[3]-y[1])))),ne)}if(ne=Math.min(ne,x.length),q.lod)return O(re,ee,j,Q,ne);var ie=[];ue(0,0,1,0,0,1);function ue(he,ge,me,ke,Ae,Ne){if(!(Ae===null||Ne===null)){var He=he+me,Ge=ge+me;if(!(re>He||ee>Ge||j<he||Q<ge)&&!(ke>=ne)&&Ae!==Ne){var _e=x[ke];Ne===void 0&&(Ne=_e.length);for(var De=Ae;De<Ne;De++){var Ye=_e[De],qe=u[Ye*2],Ue=u[Ye*2+1];qe>=se&&qe<=oe&&Ue>=le&&Ue<=U&&ie.push(Ye)}var Ie=T[ke],Ve=Ie[Ae*4+0],dt=Ie[Ae*4+1],Dt=Ie[Ae*4+2],Yt=Ie[Ae*4+3],kt=xe(Ie,Ae+1),Ft=me*.5,Nt=ke+1;ue(he,ge,Ft,Nt,Ve,dt||Dt||Yt||kt),ue(he,ge+Ft,Ft,Nt,dt,Dt||Yt||kt),ue(he+Ft,ge,Ft,Nt,Dt,Yt||kt),ue(he+Ft,ge+Ft,Ft,Nt,Yt,kt)}}}function xe(he,ge){for(var me=null,ke=0;me===null;)if(me=he[ge*4+ke],ke++,ke>he.length)return null;return me}return ie}function O(G,W,q,J,X){for(var Z=[],se=0;se<X;se++){var le=_[se],oe=f[se][0],U=F(G,W,se),V=F(q,J,se),re=d.ge(le,U),ee=d.gt(le,V,re,le.length-1);Z[se]=[re+oe,ee+oe]}return Z}function F(G,W,q){for(var J=1,X=.5,Z=.5,se=.5,le=0;le<q;le++)J<<=2,J+=G<X?W<Z?0:1:W<Z?2:3,se*=.5,X+=G<X?-se:se,Z+=W<Z?-se:se;return J}};function i(v,u){for(var g=u[0],h=u[1],y=u[2],p=u[3],A=1/(y-g),m=1/(p-h),M=new Array(v.length),x=0,T=v.length/2;x<T;x++)M[2*x]=l((v[2*x]-g)*A,0,1),M[2*x+1]=l((v[2*x+1]-h)*m,0,1);return M}},{"array-bounds":71,"binary-search-bounds":80,clamp:86,defined:124,dtype:127,"flatten-vertex-data":191,"is-obj":235,"math-log2":240,"parse-rect":249,"pick-by-alias":253}],61:[function(t,B,H){Object.defineProperty(H,"__esModule",{value:!0});var d=t("@turf/meta"),l=6378137;function b(r){return d.geomReduce(r,function(n,c){return n+w(c)},0)}H.default=b;function w(r){var n=0,c;switch(r.type){case"Polygon":return e(r.coordinates);case"MultiPolygon":for(c=0;c<r.coordinates.length;c++)n+=e(r.coordinates[c]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function e(r){var n=0;if(r&&r.length>0){n+=Math.abs(o(r[0]));for(var c=1;c<r.length;c++)n-=Math.abs(o(r[c]))}return n}function o(r){var n,c,s,i,v,u,g,h=0,y=r.length;if(y>2){for(g=0;g<y;g++)g===y-2?(i=y-2,v=y-1,u=0):g===y-1?(i=y-1,v=0,u=1):(i=g,v=g+1,u=g+2),n=r[i],c=r[v],s=r[u],h+=(a(s[0])-a(n[0]))*Math.sin(a(c[1]));h=h*l*l/2}return h}function a(r){return r*Math.PI/180}},{"@turf/meta":63}],62:[function(t,B,H){Object.defineProperty(H,"__esModule",{value:!0}),H.earthRadius=63710088e-1,H.factors={centimeters:H.earthRadius*100,centimetres:H.earthRadius*100,degrees:H.earthRadius/111325,feet:H.earthRadius*3.28084,inches:H.earthRadius*39.37,kilometers:H.earthRadius/1e3,kilometres:H.earthRadius/1e3,meters:H.earthRadius,metres:H.earthRadius,miles:H.earthRadius/1609.344,millimeters:H.earthRadius*1e3,millimetres:H.earthRadius*1e3,nauticalmiles:H.earthRadius/1852,radians:1,yards:H.earthRadius*1.0936},H.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/H.earthRadius,yards:1.0936133},H.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function d(S,k,P){P===void 0&&(P={});var z={type:"Feature"};return(P.id===0||P.id)&&(z.id=P.id),P.bbox&&(z.bbox=P.bbox),z.properties=k||{},z.geometry=S,z}H.feature=d;function l(S,k,P){switch(S){case"Point":return b(k).geometry;case"LineString":return a(k).geometry;case"Polygon":return e(k).geometry;case"MultiPoint":return s(k).geometry;case"MultiLineString":return c(k).geometry;case"MultiPolygon":return i(k).geometry;default:throw new Error(S+" is invalid")}}H.geometry=l;function b(S,k,P){if(P===void 0&&(P={}),!S)throw new Error("coordinates is required");if(!Array.isArray(S))throw new Error("coordinates must be an Array");if(S.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!T(S[0])||!T(S[1]))throw new Error("coordinates must contain numbers");var z={type:"Point",coordinates:S};return d(z,k,P)}H.point=b;function w(S,k,P){return P===void 0&&(P={}),n(S.map(function(z){return b(z,k)}),P)}H.points=w;function e(S,k,P){P===void 0&&(P={});for(var z=0,I=S;z<I.length;z++){var R=I[z];if(R.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var D=0;D<R[R.length-1].length;D++)if(R[R.length-1][D]!==R[0][D])throw new Error("First and last Position are not equivalent.")}var O={type:"Polygon",coordinates:S};return d(O,k,P)}H.polygon=e;function o(S,k,P){return P===void 0&&(P={}),n(S.map(function(z){return e(z,k)}),P)}H.polygons=o;function a(S,k,P){if(P===void 0&&(P={}),S.length<2)throw new Error("coordinates must be an array of two or more positions");var z={type:"LineString",coordinates:S};return d(z,k,P)}H.lineString=a;function r(S,k,P){return P===void 0&&(P={}),n(S.map(function(z){return a(z,k)}),P)}H.lineStrings=r;function n(S,k){k===void 0&&(k={});var P={type:"FeatureCollection"};return k.id&&(P.id=k.id),k.bbox&&(P.bbox=k.bbox),P.features=S,P}H.featureCollection=n;function c(S,k,P){P===void 0&&(P={});var z={type:"MultiLineString",coordinates:S};return d(z,k,P)}H.multiLineString=c;function s(S,k,P){P===void 0&&(P={});var z={type:"MultiPoint",coordinates:S};return d(z,k,P)}H.multiPoint=s;function i(S,k,P){P===void 0&&(P={});var z={type:"MultiPolygon",coordinates:S};return d(z,k,P)}H.multiPolygon=i;function v(S,k,P){P===void 0&&(P={});var z={type:"GeometryCollection",geometries:S};return d(z,k,P)}H.geometryCollection=v;function u(S,k){if(k===void 0&&(k=0),k&&!(k>=0))throw new Error("precision must be a positive number");var P=Math.pow(10,k||0);return Math.round(S*P)/P}H.round=u;function g(S,k){k===void 0&&(k="kilometers");var P=H.factors[k];if(!P)throw new Error(k+" units is invalid");return S*P}H.radiansToLength=g;function h(S,k){k===void 0&&(k="kilometers");var P=H.factors[k];if(!P)throw new Error(k+" units is invalid");return S/P}H.lengthToRadians=h;function y(S,k){return A(h(S,k))}H.lengthToDegrees=y;function p(S){var k=S%360;return k<0&&(k+=360),k}H.bearingToAzimuth=p;function A(S){var k=S%(2*Math.PI);return k*180/Math.PI}H.radiansToDegrees=A;function m(S){var k=S%360;return k*Math.PI/180}H.degreesToRadians=m;function M(S,k,P){if(k===void 0&&(k="kilometers"),P===void 0&&(P="kilometers"),!(S>=0))throw new Error("length must be a positive number");return g(h(S,k),P)}H.convertLength=M;function x(S,k,P){if(k===void 0&&(k="meters"),P===void 0&&(P="kilometers"),!(S>=0))throw new Error("area must be a positive number");var z=H.areaFactors[k];if(!z)throw new Error("invalid original units");var I=H.areaFactors[P];if(!I)throw new Error("invalid final units");return S/z*I}H.convertArea=x;function T(S){return!isNaN(S)&&S!==null&&!Array.isArray(S)}H.isNumber=T;function _(S){return!!S&&S.constructor===Object}H.isObject=_;function f(S){if(!S)throw new Error("bbox is required");if(!Array.isArray(S))throw new Error("bbox must be an Array");if(S.length!==4&&S.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");S.forEach(function(k){if(!T(k))throw new Error("bbox must only contain numbers")})}H.validateBBox=f;function L(S){if(!S)throw new Error("id is required");if(["string","number"].indexOf(typeof S)===-1)throw new Error("id must be a number or a string")}H.validateId=L},{}],63:[function(t,B,H){Object.defineProperty(H,"__esModule",{value:!0});var d=t("@turf/helpers");function l(A,m,M){if(A!==null)for(var x,T,_,f,L,S,k,P=0,z=0,I,R=A.type,D=R==="FeatureCollection",O=R==="Feature",F=D?A.features.length:1,G=0;G<F;G++){k=D?A.features[G].geometry:O?A.geometry:A,I=k?k.type==="GeometryCollection":!1,L=I?k.geometries.length:1;for(var W=0;W<L;W++){var q=0,J=0;if(f=I?k.geometries[W]:k,f!==null){S=f.coordinates;var X=f.type;switch(P=M&&(X==="Polygon"||X==="MultiPolygon")?1:0,X){case null:break;case"Point":if(m(S,z,G,q,J)===!1)return!1;z++,q++;break;case"LineString":case"MultiPoint":for(x=0;x<S.length;x++){if(m(S[x],z,G,q,J)===!1)return!1;z++,X==="MultiPoint"&&q++}X==="LineString"&&q++;break;case"Polygon":case"MultiLineString":for(x=0;x<S.length;x++){for(T=0;T<S[x].length-P;T++){if(m(S[x][T],z,G,q,J)===!1)return!1;z++}X==="MultiLineString"&&q++,X==="Polygon"&&J++}X==="Polygon"&&q++;break;case"MultiPolygon":for(x=0;x<S.length;x++){for(J=0,T=0;T<S[x].length;T++){for(_=0;_<S[x][T].length-P;_++){if(m(S[x][T][_],z,G,q,J)===!1)return!1;z++}J++}q++}break;case"GeometryCollection":for(x=0;x<f.geometries.length;x++)if(l(f.geometries[x],m,M)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function b(A,m,M,x){var T=M;return l(A,function(_,f,L,S,k){f===0&&M===void 0?T=_:T=m(T,_,f,L,S,k)},x),T}function w(A,m){var M;switch(A.type){case"FeatureCollection":for(M=0;M<A.features.length&&m(A.features[M].properties,M)!==!1;M++);break;case"Feature":m(A.properties,0);break}}function e(A,m,M){var x=M;return w(A,function(T,_){_===0&&M===void 0?x=T:x=m(x,T,_)}),x}function o(A,m){if(A.type==="Feature")m(A,0);else if(A.type==="FeatureCollection")for(var M=0;M<A.features.length&&m(A.features[M],M)!==!1;M++);}function a(A,m,M){var x=M;return o(A,function(T,_){_===0&&M===void 0?x=T:x=m(x,T,_)}),x}function r(A){var m=[];return l(A,function(M){m.push(M)}),m}function n(A,m){var M,x,T,_,f,L,S,k,P,z,I=0,R=A.type==="FeatureCollection",D=A.type==="Feature",O=R?A.features.length:1;for(M=0;M<O;M++){for(L=R?A.features[M].geometry:D?A.geometry:A,k=R?A.features[M].properties:D?A.properties:{},P=R?A.features[M].bbox:D?A.bbox:void 0,z=R?A.features[M].id:D?A.id:void 0,S=L?L.type==="GeometryCollection":!1,f=S?L.geometries.length:1,T=0;T<f;T++){if(_=S?L.geometries[T]:L,_===null){if(m(null,I,k,P,z)===!1)return!1;continue}switch(_.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(m(_,I,k,P,z)===!1)return!1;break}case"GeometryCollection":{for(x=0;x<_.geometries.length;x++)if(m(_.geometries[x],I,k,P,z)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}I++}}function c(A,m,M){var x=M;return n(A,function(T,_,f,L,S){_===0&&M===void 0?x=T:x=m(x,T,_,f,L,S)}),x}function s(A,m){n(A,function(M,x,T,_,f){var L=M===null?null:M.type;switch(L){case null:case"Point":case"LineString":case"Polygon":return m(d.feature(M,T,{bbox:_,id:f}),x,0)===!1?!1:void 0}var S;switch(L){case"MultiPoint":S="Point";break;case"MultiLineString":S="LineString";break;case"MultiPolygon":S="Polygon";break}for(var k=0;k<M.coordinates.length;k++){var P=M.coordinates[k],z={type:S,coordinates:P};if(m(d.feature(z,T),x,k)===!1)return!1}})}function i(A,m,M){var x=M;return s(A,function(T,_,f){_===0&&f===0&&M===void 0?x=T:x=m(x,T,_,f)}),x}function v(A,m){s(A,function(M,x,T){var _=0;if(!!M.geometry){var f=M.geometry.type;if(!(f==="Point"||f==="MultiPoint")){var L,S=0,k=0,P=0;if(l(M,function(z,I,R,D,O){if(L===void 0||x>S||D>k||O>P){L=z,S=x,k=D,P=O,_=0;return}var F=d.lineString([L,z],M.properties);if(m(F,x,T,O,_)===!1)return!1;_++,L=z})===!1)return!1}}})}function u(A,m,M){var x=M,T=!1;return v(A,function(_,f,L,S,k){T===!1&&M===void 0?x=_:x=m(x,_,f,L,S,k),T=!0}),x}function g(A,m){if(!A)throw new Error("geojson is required");s(A,function(M,x,T){if(M.geometry!==null){var _=M.geometry.type,f=M.geometry.coordinates;switch(_){case"LineString":if(m(M,x,T,0,0)===!1)return!1;break;case"Polygon":for(var L=0;L<f.length;L++)if(m(d.lineString(f[L],M.properties),x,T,L)===!1)return!1;break}}})}function h(A,m,M){var x=M;return g(A,function(T,_,f,L){_===0&&M===void 0?x=T:x=m(x,T,_,f,L)}),x}function y(A,m){if(m=m||{},!d.isObject(m))throw new Error("options is invalid");var M=m.featureIndex||0,x=m.multiFeatureIndex||0,T=m.geometryIndex||0,_=m.segmentIndex||0,f=m.properties,L;switch(A.type){case"FeatureCollection":M<0&&(M=A.features.length+M),f=f||A.features[M].properties,L=A.features[M].geometry;break;case"Feature":f=f||A.properties,L=A.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=A;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var S=L.coordinates;switch(L.type){case"Point":case"MultiPoint":return null;case"LineString":return _<0&&(_=S.length+_-1),d.lineString([S[_],S[_+1]],f,m);case"Polygon":return T<0&&(T=S.length+T),_<0&&(_=S[T].length+_-1),d.lineString([S[T][_],S[T][_+1]],f,m);case"MultiLineString":return x<0&&(x=S.length+x),_<0&&(_=S[x].length+_-1),d.lineString([S[x][_],S[x][_+1]],f,m);case"MultiPolygon":return x<0&&(x=S.length+x),T<0&&(T=S[x].length+T),_<0&&(_=S[x][T].length-_-1),d.lineString([S[x][T][_],S[x][T][_+1]],f,m)}throw new Error("geojson is invalid")}function p(A,m){if(m=m||{},!d.isObject(m))throw new Error("options is invalid");var M=m.featureIndex||0,x=m.multiFeatureIndex||0,T=m.geometryIndex||0,_=m.coordIndex||0,f=m.properties,L;switch(A.type){case"FeatureCollection":M<0&&(M=A.features.length+M),f=f||A.features[M].properties,L=A.features[M].geometry;break;case"Feature":f=f||A.properties,L=A.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=A;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var S=L.coordinates;switch(L.type){case"Point":return d.point(S,f,m);case"MultiPoint":return x<0&&(x=S.length+x),d.point(S[x],f,m);case"LineString":return _<0&&(_=S.length+_),d.point(S[_],f,m);case"Polygon":return T<0&&(T=S.length+T),_<0&&(_=S[T].length+_),d.point(S[T][_],f,m);case"MultiLineString":return x<0&&(x=S.length+x),_<0&&(_=S[x].length+_),d.point(S[x][_],f,m);case"MultiPolygon":return x<0&&(x=S.length+x),T<0&&(T=S[x].length+T),_<0&&(_=S[x][T].length-_),d.point(S[x][T][_],f,m)}throw new Error("geojson is invalid")}H.coordEach=l,H.coordReduce=b,H.propEach=w,H.propReduce=e,H.featureEach=o,H.featureReduce=a,H.coordAll=r,H.geomEach=n,H.geomReduce=c,H.flattenEach=s,H.flattenReduce=i,H.segmentEach=v,H.segmentReduce=u,H.lineEach=g,H.lineReduce=h,H.findSegment=y,H.findPoint=p},{"@turf/helpers":62}],64:[function(t,B,H){Object.defineProperty(H,"__esModule",{value:!0});var d=t("@turf/meta");function l(b){var w=[1/0,1/0,-1/0,-1/0];return d.coordEach(b,function(e){w[0]>e[0]&&(w[0]=e[0]),w[1]>e[1]&&(w[1]=e[1]),w[2]<e[0]&&(w[2]=e[0]),w[3]<e[1]&&(w[3]=e[1])}),w}l.default=l,H.default=l},{"@turf/meta":66}],65:[function(t,B,H){arguments[4][62][0].apply(H,arguments)},{dup:62}],66:[function(t,B,H){arguments[4][63][0].apply(H,arguments)},{"@turf/helpers":65,dup:63}],67:[function(t,B,H){Object.defineProperty(H,"__esModule",{value:!0});var d=t("@turf/meta"),l=t("@turf/helpers");function b(w,e){e===void 0&&(e={});var o=0,a=0,r=0;return d.coordEach(w,function(n){o+=n[0],a+=n[1],r++}),l.point([o/r,a/r],e.properties)}H.default=b},{"@turf/helpers":68,"@turf/meta":69}],68:[function(t,B,H){Object.defineProperty(H,"__esModule",{value:!0}),H.earthRadius=63710088e-1,H.factors={centimeters:H.earthRadius*100,centimetres:H.earthRadius*100,degrees:H.earthRadius/111325,feet:H.earthRadius*3.28084,inches:H.earthRadius*39.37,kilometers:H.earthRadius/1e3,kilometres:H.earthRadius/1e3,meters:H.earthRadius,metres:H.earthRadius,miles:H.earthRadius/1609.344,millimeters:H.earthRadius*1e3,millimetres:H.earthRadius*1e3,nauticalmiles:H.earthRadius/1852,radians:1,yards:H.earthRadius/1.0936},H.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/H.earthRadius,yards:1/1.0936},H.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function d(O,F,G){G===void 0&&(G={});var W={type:"Feature"};return(G.id===0||G.id)&&(W.id=G.id),G.bbox&&(W.bbox=G.bbox),W.properties=F||{},W.geometry=O,W}H.feature=d;function l(O,F,G){switch(O){case"Point":return b(F).geometry;case"LineString":return a(F).geometry;case"Polygon":return e(F).geometry;case"MultiPoint":return s(F).geometry;case"MultiLineString":return c(F).geometry;case"MultiPolygon":return i(F).geometry;default:throw new Error(O+" is invalid")}}H.geometry=l;function b(O,F,G){G===void 0&&(G={});var W={type:"Point",coordinates:O};return d(W,F,G)}H.point=b;function w(O,F,G){return G===void 0&&(G={}),n(O.map(function(W){return b(W,F)}),G)}H.points=w;function e(O,F,G){G===void 0&&(G={});for(var W=0,q=O;W<q.length;W++){var J=q[W];if(J.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var X=0;X<J[J.length-1].length;X++)if(J[J.length-1][X]!==J[0][X])throw new Error("First and last Position are not equivalent.")}var Z={type:"Polygon",coordinates:O};return d(Z,F,G)}H.polygon=e;function o(O,F,G){return G===void 0&&(G={}),n(O.map(function(W){return e(W,F)}),G)}H.polygons=o;function a(O,F,G){if(G===void 0&&(G={}),O.length<2)throw new Error("coordinates must be an array of two or more positions");var W={type:"LineString",coordinates:O};return d(W,F,G)}H.lineString=a;function r(O,F,G){return G===void 0&&(G={}),n(O.map(function(W){return a(W,F)}),G)}H.lineStrings=r;function n(O,F){F===void 0&&(F={});var G={type:"FeatureCollection"};return F.id&&(G.id=F.id),F.bbox&&(G.bbox=F.bbox),G.features=O,G}H.featureCollection=n;function c(O,F,G){G===void 0&&(G={});var W={type:"MultiLineString",coordinates:O};return d(W,F,G)}H.multiLineString=c;function s(O,F,G){G===void 0&&(G={});var W={type:"MultiPoint",coordinates:O};return d(W,F,G)}H.multiPoint=s;function i(O,F,G){G===void 0&&(G={});var W={type:"MultiPolygon",coordinates:O};return d(W,F,G)}H.multiPolygon=i;function v(O,F,G){G===void 0&&(G={});var W={type:"GeometryCollection",geometries:O};return d(W,F,G)}H.geometryCollection=v;function u(O,F){if(F===void 0&&(F=0),F&&!(F>=0))throw new Error("precision must be a positive number");var G=Math.pow(10,F||0);return Math.round(O*G)/G}H.round=u;function g(O,F){F===void 0&&(F="kilometers");var G=H.factors[F];if(!G)throw new Error(F+" units is invalid");return O*G}H.radiansToLength=g;function h(O,F){F===void 0&&(F="kilometers");var G=H.factors[F];if(!G)throw new Error(F+" units is invalid");return O/G}H.lengthToRadians=h;function y(O,F){return A(h(O,F))}H.lengthToDegrees=y;function p(O){var F=O%360;return F<0&&(F+=360),F}H.bearingToAzimuth=p;function A(O){var F=O%(2*Math.PI);return F*180/Math.PI}H.radiansToDegrees=A;function m(O){var F=O%360;return F*Math.PI/180}H.degreesToRadians=m;function M(O,F,G){if(F===void 0&&(F="kilometers"),G===void 0&&(G="kilometers"),!(O>=0))throw new Error("length must be a positive number");return g(h(O,F),G)}H.convertLength=M;function x(O,F,G){if(F===void 0&&(F="meters"),G===void 0&&(G="kilometers"),!(O>=0))throw new Error("area must be a positive number");var W=H.areaFactors[F];if(!W)throw new Error("invalid original units");var q=H.areaFactors[G];if(!q)throw new Error("invalid final units");return O/W*q}H.convertArea=x;function T(O){return!isNaN(O)&&O!==null&&!Array.isArray(O)&&!/^\s*$/.test(O)}H.isNumber=T;function _(O){return!!O&&O.constructor===Object}H.isObject=_;function f(O){if(!O)throw new Error("bbox is required");if(!Array.isArray(O))throw new Error("bbox must be an Array");if(O.length!==4&&O.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");O.forEach(function(F){if(!T(F))throw new Error("bbox must only contain numbers")})}H.validateBBox=f;function L(O){if(!O)throw new Error("id is required");if(["string","number"].indexOf(typeof O)===-1)throw new Error("id must be a number or a string")}H.validateId=L;function S(){throw new Error("method has been renamed to `radiansToDegrees`")}H.radians2degrees=S;function k(){throw new Error("method has been renamed to `degreesToRadians`")}H.degrees2radians=k;function P(){throw new Error("method has been renamed to `lengthToDegrees`")}H.distanceToDegrees=P;function z(){throw new Error("method has been renamed to `lengthToRadians`")}H.distanceToRadians=z;function I(){throw new Error("method has been renamed to `radiansToLength`")}H.radiansToDistance=I;function R(){throw new Error("method has been renamed to `bearingToAzimuth`")}H.bearingToAngle=R;function D(){throw new Error("method has been renamed to `convertLength`")}H.convertDistance=D},{}],69:[function(t,B,H){Object.defineProperty(H,"__esModule",{value:!0});var d=t("@turf/helpers");function l(A,m,M){if(A!==null)for(var x,T,_,f,L,S,k,P=0,z=0,I,R=A.type,D=R==="FeatureCollection",O=R==="Feature",F=D?A.features.length:1,G=0;G<F;G++){k=D?A.features[G].geometry:O?A.geometry:A,I=k?k.type==="GeometryCollection":!1,L=I?k.geometries.length:1;for(var W=0;W<L;W++){var q=0,J=0;if(f=I?k.geometries[W]:k,f!==null){S=f.coordinates;var X=f.type;switch(P=M&&(X==="Polygon"||X==="MultiPolygon")?1:0,X){case null:break;case"Point":if(m(S,z,G,q,J)===!1)return!1;z++,q++;break;case"LineString":case"MultiPoint":for(x=0;x<S.length;x++){if(m(S[x],z,G,q,J)===!1)return!1;z++,X==="MultiPoint"&&q++}X==="LineString"&&q++;break;case"Polygon":case"MultiLineString":for(x=0;x<S.length;x++){for(T=0;T<S[x].length-P;T++){if(m(S[x][T],z,G,q,J)===!1)return!1;z++}X==="MultiLineString"&&q++,X==="Polygon"&&J++}X==="Polygon"&&q++;break;case"MultiPolygon":for(x=0;x<S.length;x++){for(J=0,T=0;T<S[x].length;T++){for(_=0;_<S[x][T].length-P;_++){if(m(S[x][T][_],z,G,q,J)===!1)return!1;z++}J++}q++}break;case"GeometryCollection":for(x=0;x<f.geometries.length;x++)if(l(f.geometries[x],m,M)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function b(A,m,M,x){var T=M;return l(A,function(_,f,L,S,k){f===0&&M===void 0?T=_:T=m(T,_,f,L,S,k)},x),T}function w(A,m){var M;switch(A.type){case"FeatureCollection":for(M=0;M<A.features.length&&m(A.features[M].properties,M)!==!1;M++);break;case"Feature":m(A.properties,0);break}}function e(A,m,M){var x=M;return w(A,function(T,_){_===0&&M===void 0?x=T:x=m(x,T,_)}),x}function o(A,m){if(A.type==="Feature")m(A,0);else if(A.type==="FeatureCollection")for(var M=0;M<A.features.length&&m(A.features[M],M)!==!1;M++);}function a(A,m,M){var x=M;return o(A,function(T,_){_===0&&M===void 0?x=T:x=m(x,T,_)}),x}function r(A){var m=[];return l(A,function(M){m.push(M)}),m}function n(A,m){var M,x,T,_,f,L,S,k,P,z,I=0,R=A.type==="FeatureCollection",D=A.type==="Feature",O=R?A.features.length:1;for(M=0;M<O;M++){for(L=R?A.features[M].geometry:D?A.geometry:A,k=R?A.features[M].properties:D?A.properties:{},P=R?A.features[M].bbox:D?A.bbox:void 0,z=R?A.features[M].id:D?A.id:void 0,S=L?L.type==="GeometryCollection":!1,f=S?L.geometries.length:1,T=0;T<f;T++){if(_=S?L.geometries[T]:L,_===null){if(m(null,I,k,P,z)===!1)return!1;continue}switch(_.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(m(_,I,k,P,z)===!1)return!1;break}case"GeometryCollection":{for(x=0;x<_.geometries.length;x++)if(m(_.geometries[x],I,k,P,z)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}I++}}function c(A,m,M){var x=M;return n(A,function(T,_,f,L,S){_===0&&M===void 0?x=T:x=m(x,T,_,f,L,S)}),x}function s(A,m){n(A,function(M,x,T,_,f){var L=M===null?null:M.type;switch(L){case null:case"Point":case"LineString":case"Polygon":return m(d.feature(M,T,{bbox:_,id:f}),x,0)===!1?!1:void 0}var S;switch(L){case"MultiPoint":S="Point";break;case"MultiLineString":S="LineString";break;case"MultiPolygon":S="Polygon";break}for(var k=0;k<M.coordinates.length;k++){var P=M.coordinates[k],z={type:S,coordinates:P};if(m(d.feature(z,T),x,k)===!1)return!1}})}function i(A,m,M){var x=M;return s(A,function(T,_,f){_===0&&f===0&&M===void 0?x=T:x=m(x,T,_,f)}),x}function v(A,m){s(A,function(M,x,T){var _=0;if(!!M.geometry){var f=M.geometry.type;if(!(f==="Point"||f==="MultiPoint")){var L,S=0,k=0,P=0;if(l(M,function(z,I,R,D,O){if(L===void 0||x>S||D>k||O>P){L=z,S=x,k=D,P=O,_=0;return}var F=d.lineString([L,z],M.properties);if(m(F,x,T,O,_)===!1)return!1;_++,L=z})===!1)return!1}}})}function u(A,m,M){var x=M,T=!1;return v(A,function(_,f,L,S,k){T===!1&&M===void 0?x=_:x=m(x,_,f,L,S,k),T=!0}),x}function g(A,m){if(!A)throw new Error("geojson is required");s(A,function(M,x,T){if(M.geometry!==null){var _=M.geometry.type,f=M.geometry.coordinates;switch(_){case"LineString":if(m(M,x,T,0,0)===!1)return!1;break;case"Polygon":for(var L=0;L<f.length;L++)if(m(d.lineString(f[L],M.properties),x,T,L)===!1)return!1;break}}})}function h(A,m,M){var x=M;return g(A,function(T,_,f,L){_===0&&M===void 0?x=T:x=m(x,T,_,f,L)}),x}function y(A,m){if(m=m||{},!d.isObject(m))throw new Error("options is invalid");var M=m.featureIndex||0,x=m.multiFeatureIndex||0,T=m.geometryIndex||0,_=m.segmentIndex||0,f=m.properties,L;switch(A.type){case"FeatureCollection":M<0&&(M=A.features.length+M),f=f||A.features[M].properties,L=A.features[M].geometry;break;case"Feature":f=f||A.properties,L=A.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=A;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var S=L.coordinates;switch(L.type){case"Point":case"MultiPoint":return null;case"LineString":return _<0&&(_=S.length+_-1),d.lineString([S[_],S[_+1]],f,m);case"Polygon":return T<0&&(T=S.length+T),_<0&&(_=S[T].length+_-1),d.lineString([S[T][_],S[T][_+1]],f,m);case"MultiLineString":return x<0&&(x=S.length+x),_<0&&(_=S[x].length+_-1),d.lineString([S[x][_],S[x][_+1]],f,m);case"MultiPolygon":return x<0&&(x=S.length+x),T<0&&(T=S[x].length+T),_<0&&(_=S[x][T].length-_-1),d.lineString([S[x][T][_],S[x][T][_+1]],f,m)}throw new Error("geojson is invalid")}function p(A,m){if(m=m||{},!d.isObject(m))throw new Error("options is invalid");var M=m.featureIndex||0,x=m.multiFeatureIndex||0,T=m.geometryIndex||0,_=m.coordIndex||0,f=m.properties,L;switch(A.type){case"FeatureCollection":M<0&&(M=A.features.length+M),f=f||A.features[M].properties,L=A.features[M].geometry;break;case"Feature":f=f||A.properties,L=A.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=A;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var S=L.coordinates;switch(L.type){case"Point":return d.point(S,f,m);case"MultiPoint":return x<0&&(x=S.length+x),d.point(S[x],f,m);case"LineString":return _<0&&(_=S.length+_),d.point(S[_],f,m);case"Polygon":return T<0&&(T=S.length+T),_<0&&(_=S[T].length+_),d.point(S[T][_],f,m);case"MultiLineString":return x<0&&(x=S.length+x),_<0&&(_=S[x].length+_),d.point(S[x][_],f,m);case"MultiPolygon":return x<0&&(x=S.length+x),T<0&&(T=S[x].length+T),_<0&&(_=S[x][T].length-_),d.point(S[x][T][_],f,m)}throw new Error("geojson is invalid")}H.coordEach=l,H.coordReduce=b,H.propEach=w,H.propReduce=e,H.featureEach=o,H.featureReduce=a,H.coordAll=r,H.geomEach=n,H.geomReduce=c,H.flattenEach=s,H.flattenReduce=i,H.segmentEach=v,H.segmentReduce=u,H.lineEach=g,H.lineReduce=h,H.findSegment=y,H.findPoint=p},{"@turf/helpers":68}],70:[function(t,B,H){B.exports=d;function d(l){var b=0,w=0,e=0,o=0;return l.map(function(a){a=a.slice();var r=a[0],n=r.toUpperCase();if(r!=n)switch(a[0]=n,r){case"a":a[6]+=e,a[7]+=o;break;case"v":a[1]+=o;break;case"h":a[1]+=e;break;default:for(var c=1;c<a.length;)a[c++]+=e,a[c++]+=o}switch(n){case"Z":e=b,o=w;break;case"H":e=a[1];break;case"V":o=a[1];break;case"M":e=b=a[1],o=w=a[2];break;default:e=a[a.length-2],o=a[a.length-1]}return a})}},{}],71:[function(t,B,H){B.exports=d;function d(l,b){if(!l||l.length==null)throw Error("Argument should be an array");b==null?b=1:b=Math.floor(b);for(var w=Array(b*2),e=0;e<b;e++){for(var o=-1/0,a=1/0,r=e,n=l.length;r<n;r+=b)l[r]>o&&(o=l[r]),l[r]<a&&(a=l[r]);w[e]=a,w[b+e]=o}return w}},{}],72:[function(t,B,H){B.exports=function(d,l,b){if(typeof Array.prototype.findIndex=="function")return d.findIndex(l,b);if(typeof l!="function")throw new TypeError("predicate must be a function");var w=Object(d),e=w.length;if(e===0)return-1;for(var o=0;o<e;o++)if(l.call(b,w[o],o,w))return o;return-1}},{}],73:[function(t,B,H){var d=t("array-bounds");B.exports=l;function l(b,w,e){if(!b||b.length==null)throw Error("Argument should be an array");w==null&&(w=1),e==null&&(e=d(b,w));for(var o=0;o<w;o++){var a=e[w+o],r=e[o],n=o,c=b.length;if(a===1/0&&r===-1/0)for(n=o;n<c;n+=w)b[n]=b[n]===a?1:b[n]===r?0:.5;else if(a===1/0)for(n=o;n<c;n+=w)b[n]=b[n]===a?1:0;else if(r===-1/0)for(n=o;n<c;n+=w)b[n]=b[n]===r?0:1;else{var s=a-r;for(n=o;n<c;n+=w)isNaN(b[n])||(b[n]=s===0?.5:(b[n]-r)/s)}}return b}},{"array-bounds":71}],74:[function(t,B,H){B.exports=function(l,b){var w=typeof l=="number",e=typeof b=="number";w&&!e?(b=l,l=0):!w&&!e&&(l=0,b=0),l=l|0,b=b|0;var o=b-l;if(o<0)throw new Error("array length must be positive");for(var a=new Array(o),r=0,n=l;r<o;r++,n++)a[r]=n;return a}},{}],75:[function(t,B,H){(function(d){(function(){var l=t("object-assign");/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function b(k,P){if(k===P)return 0;for(var z=k.length,I=P.length,R=0,D=Math.min(z,I);R<D;++R)if(k[R]!==P[R]){z=k[R],I=P[R];break}return z<I?-1:I<z?1:0}function w(k){return d.Buffer&&typeof d.Buffer.isBuffer=="function"?d.Buffer.isBuffer(k):!!(k!=null&&k._isBuffer)}var e=t("util/"),o=Object.prototype.hasOwnProperty,a=Array.prototype.slice,r=function(){return function(){}.name==="foo"}();function n(k){return Object.prototype.toString.call(k)}function c(k){return w(k)||typeof d.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(k):k?!!(k instanceof DataView||k.buffer&&k.buffer instanceof ArrayBuffer):!1}var s=B.exports=p,i=/\s*function\s+([^\(\s]*)\s*/;function v(k){if(!!e.isFunction(k)){if(r)return k.name;var P=k.toString(),z=P.match(i);return z&&z[1]}}s.AssertionError=function(P){this.name="AssertionError",this.actual=P.actual,this.expected=P.expected,this.operator=P.operator,P.message?(this.message=P.message,this.generatedMessage=!1):(this.message=h(this),this.generatedMessage=!0);var z=P.stackStartFunction||y;if(Error.captureStackTrace)Error.captureStackTrace(this,z);else{var I=new Error;if(I.stack){var R=I.stack,D=v(z),O=R.indexOf(`
`+D);if(O>=0){var F=R.indexOf(`
`,O+1);R=R.substring(F+1)}this.stack=R}}},e.inherits(s.AssertionError,Error);function u(k,P){return typeof k=="string"?k.length<P?k:k.slice(0,P):k}function g(k){if(r||!e.isFunction(k))return e.inspect(k);var P=v(k),z=P?": "+P:"";return"[Function"+z+"]"}function h(k){return u(g(k.actual),128)+" "+k.operator+" "+u(g(k.expected),128)}function y(k,P,z,I,R){throw new s.AssertionError({message:z,actual:k,expected:P,operator:I,stackStartFunction:R})}s.fail=y;function p(k,P){k||y(k,!0,P,"==",s.ok)}s.ok=p,s.equal=function(P,z,I){P!=z&&y(P,z,I,"==",s.equal)},s.notEqual=function(P,z,I){P==z&&y(P,z,I,"!=",s.notEqual)},s.deepEqual=function(P,z,I){A(P,z,!1)||y(P,z,I,"deepEqual",s.deepEqual)},s.deepStrictEqual=function(P,z,I){A(P,z,!0)||y(P,z,I,"deepStrictEqual",s.deepStrictEqual)};function A(k,P,z,I){if(k===P)return!0;if(w(k)&&w(P))return b(k,P)===0;if(e.isDate(k)&&e.isDate(P))return k.getTime()===P.getTime();if(e.isRegExp(k)&&e.isRegExp(P))return k.source===P.source&&k.global===P.global&&k.multiline===P.multiline&&k.lastIndex===P.lastIndex&&k.ignoreCase===P.ignoreCase;if((k===null||typeof k!="object")&&(P===null||typeof P!="object"))return z?k===P:k==P;if(c(k)&&c(P)&&n(k)===n(P)&&!(k instanceof Float32Array||k instanceof Float64Array))return b(new Uint8Array(k.buffer),new Uint8Array(P.buffer))===0;if(w(k)!==w(P))return!1;I=I||{actual:[],expected:[]};var R=I.actual.indexOf(k);return R!==-1&&R===I.expected.indexOf(P)?!0:(I.actual.push(k),I.expected.push(P),M(k,P,z,I))}function m(k){return Object.prototype.toString.call(k)=="[object Arguments]"}function M(k,P,z,I){if(k==null||P===null||P===void 0)return!1;if(e.isPrimitive(k)||e.isPrimitive(P))return k===P;if(z&&Object.getPrototypeOf(k)!==Object.getPrototypeOf(P))return!1;var R=m(k),D=m(P);if(R&&!D||!R&&D)return!1;if(R)return k=a.call(k),P=a.call(P),A(k,P,z);var O=S(k),F=S(P),G,W;if(O.length!==F.length)return!1;for(O.sort(),F.sort(),W=O.length-1;W>=0;W--)if(O[W]!==F[W])return!1;for(W=O.length-1;W>=0;W--)if(G=O[W],!A(k[G],P[G],z,I))return!1;return!0}s.notDeepEqual=function(P,z,I){A(P,z,!1)&&y(P,z,I,"notDeepEqual",s.notDeepEqual)},s.notDeepStrictEqual=x;function x(k,P,z){A(k,P,!0)&&y(k,P,z,"notDeepStrictEqual",x)}s.strictEqual=function(P,z,I){P!==z&&y(P,z,I,"===",s.strictEqual)},s.notStrictEqual=function(P,z,I){P===z&&y(P,z,I,"!==",s.notStrictEqual)};function T(k,P){if(!k||!P)return!1;if(Object.prototype.toString.call(P)=="[object RegExp]")return P.test(k);try{if(k instanceof P)return!0}catch{}return Error.isPrototypeOf(P)?!1:P.call({},k)===!0}function _(k){var P;try{k()}catch(z){P=z}return P}function f(k,P,z,I){var R;if(typeof P!="function")throw new TypeError('"block" argument must be a function');typeof z=="string"&&(I=z,z=null),R=_(P),I=(z&&z.name?" ("+z.name+").":".")+(I?" "+I:"."),k&&!R&&y(R,z,"Missing expected exception"+I);var D=typeof I=="string",O=!k&&e.isError(R),F=!k&&R&&!z;if((O&&D&&T(R,z)||F)&&y(R,z,"Got unwanted exception"+I),k&&R&&z&&!T(R,z)||!k&&R)throw R}s.throws=function(k,P,z){f(!0,k,P,z)},s.doesNotThrow=function(k,P,z){f(!1,k,P,z)},s.ifError=function(k){if(k)throw k};function L(k,P){k||y(k,!0,P,"==",L)}s.strict=l(L,s,{equal:s.strictEqual,deepEqual:s.deepStrictEqual,notEqual:s.notStrictEqual,notDeepEqual:s.notDeepStrictEqual}),s.strict.strict=s.strict;var S=Object.keys||function(k){var P=[];for(var z in k)o.call(k,z)&&P.push(z);return P}}).call(this)}).call(this,typeof Ao!="undefined"?Ao:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"object-assign":247,"util/":78}],76:[function(t,B,H){typeof Object.create=="function"?B.exports=function(l,b){l.super_=b,l.prototype=Object.create(b.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}})}:B.exports=function(l,b){l.super_=b;var w=function(){};w.prototype=b.prototype,l.prototype=new w,l.prototype.constructor=l}},{}],77:[function(t,B,H){B.exports=function(l){return l&&typeof l=="object"&&typeof l.copy=="function"&&typeof l.fill=="function"&&typeof l.readUInt8=="function"}},{}],78:[function(t,B,H){(function(d,l){(function(){var b=/%[sdj%]/g;H.format=function(F){if(!M(F)){for(var G=[],W=0;W<arguments.length;W++)G.push(o(arguments[W]));return G.join(" ")}for(var W=1,q=arguments,J=q.length,X=String(F).replace(b,function(se){if(se==="%%")return"%";if(W>=J)return se;switch(se){case"%s":return String(q[W++]);case"%d":return Number(q[W++]);case"%j":try{return JSON.stringify(q[W++])}catch{return"[Circular]"}default:return se}}),Z=q[W];W<J;Z=q[++W])p(Z)||!f(Z)?X+=" "+Z:X+=" "+o(Z);return X},H.deprecate=function(F,G){if(T(l.process))return function(){return H.deprecate(F,G).apply(this,arguments)};if(d.noDeprecation===!0)return F;var W=!1;function q(){if(!W){if(d.throwDeprecation)throw new Error(G);d.traceDeprecation?console.trace(G):console.error(G),W=!0}return F.apply(this,arguments)}return q};var w={},e;H.debuglog=function(F){if(T(e)&&(e={}.NODE_DEBUG||""),F=F.toUpperCase(),!w[F])if(new RegExp("\\b"+F+"\\b","i").test(e)){var G=d.pid;w[F]=function(){var W=H.format.apply(H,arguments);console.error("%s %d: %s",F,G,W)}}else w[F]=function(){};return w[F]};function o(F,G){var W={seen:[],stylize:r};return arguments.length>=3&&(W.depth=arguments[2]),arguments.length>=4&&(W.colors=arguments[3]),y(G)?W.showHidden=G:G&&H._extend(W,G),T(W.showHidden)&&(W.showHidden=!1),T(W.depth)&&(W.depth=2),T(W.colors)&&(W.colors=!1),T(W.customInspect)&&(W.customInspect=!0),W.colors&&(W.stylize=a),c(W,F,W.depth)}H.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function a(F,G){var W=o.styles[G];return W?"\x1B["+o.colors[W][0]+"m"+F+"\x1B["+o.colors[W][1]+"m":F}function r(F,G){return F}function n(F){var G={};return F.forEach(function(W,q){G[W]=!0}),G}function c(F,G,W){if(F.customInspect&&G&&k(G.inspect)&&G.inspect!==H.inspect&&!(G.constructor&&G.constructor.prototype===G)){var q=G.inspect(W,F);return M(q)||(q=c(F,q,W)),q}var J=s(F,G);if(J)return J;var X=Object.keys(G),Z=n(X);if(F.showHidden&&(X=Object.getOwnPropertyNames(G)),S(G)&&(X.indexOf("message")>=0||X.indexOf("description")>=0))return i(G);if(X.length===0){if(k(G)){var se=G.name?": "+G.name:"";return F.stylize("[Function"+se+"]","special")}if(_(G))return F.stylize(RegExp.prototype.toString.call(G),"regexp");if(L(G))return F.stylize(Date.prototype.toString.call(G),"date");if(S(G))return i(G)}var le="",oe=!1,U=["{","}"];if(h(G)&&(oe=!0,U=["[","]"]),k(G)){var V=G.name?": "+G.name:"";le=" [Function"+V+"]"}if(_(G)&&(le=" "+RegExp.prototype.toString.call(G)),L(G)&&(le=" "+Date.prototype.toUTCString.call(G)),S(G)&&(le=" "+i(G)),X.length===0&&(!oe||G.length==0))return U[0]+le+U[1];if(W<0)return _(G)?F.stylize(RegExp.prototype.toString.call(G),"regexp"):F.stylize("[Object]","special");F.seen.push(G);var re;return oe?re=v(F,G,W,Z,X):re=X.map(function(ee){return u(F,G,W,Z,ee,oe)}),F.seen.pop(),g(re,le,U)}function s(F,G){if(T(G))return F.stylize("undefined","undefined");if(M(G)){var W="'"+JSON.stringify(G).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return F.stylize(W,"string")}if(m(G))return F.stylize(""+G,"number");if(y(G))return F.stylize(""+G,"boolean");if(p(G))return F.stylize("null","null")}function i(F){return"["+Error.prototype.toString.call(F)+"]"}function v(F,G,W,q,J){for(var X=[],Z=0,se=G.length;Z<se;++Z)O(G,String(Z))?X.push(u(F,G,W,q,String(Z),!0)):X.push("");return J.forEach(function(le){le.match(/^\d+$/)||X.push(u(F,G,W,q,le,!0))}),X}function u(F,G,W,q,J,X){var Z,se,le;if(le=Object.getOwnPropertyDescriptor(G,J)||{value:G[J]},le.get?le.set?se=F.stylize("[Getter/Setter]","special"):se=F.stylize("[Getter]","special"):le.set&&(se=F.stylize("[Setter]","special")),O(q,J)||(Z="["+J+"]"),se||(F.seen.indexOf(le.value)<0?(p(W)?se=c(F,le.value,null):se=c(F,le.value,W-1),se.indexOf(`
`)>-1&&(X?se=se.split(`
`).map(function(oe){return"  "+oe}).join(`
`).substr(2):se=`
`+se.split(`
`).map(function(oe){return"   "+oe}).join(`
`))):se=F.stylize("[Circular]","special")),T(Z)){if(X&&J.match(/^\d+$/))return se;Z=JSON.stringify(""+J),Z.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Z=Z.substr(1,Z.length-2),Z=F.stylize(Z,"name")):(Z=Z.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Z=F.stylize(Z,"string"))}return Z+": "+se}function g(F,G,W){var q=F.reduce(function(J,X){return X.indexOf(`
`)>=0,J+X.replace(/\u001b\[\d\d?m/g,"").length+1},0);return q>60?W[0]+(G===""?"":G+`
 `)+" "+F.join(`,
  `)+" "+W[1]:W[0]+G+" "+F.join(", ")+" "+W[1]}function h(F){return Array.isArray(F)}H.isArray=h;function y(F){return typeof F=="boolean"}H.isBoolean=y;function p(F){return F===null}H.isNull=p;function A(F){return F==null}H.isNullOrUndefined=A;function m(F){return typeof F=="number"}H.isNumber=m;function M(F){return typeof F=="string"}H.isString=M;function x(F){return typeof F=="symbol"}H.isSymbol=x;function T(F){return F===void 0}H.isUndefined=T;function _(F){return f(F)&&z(F)==="[object RegExp]"}H.isRegExp=_;function f(F){return typeof F=="object"&&F!==null}H.isObject=f;function L(F){return f(F)&&z(F)==="[object Date]"}H.isDate=L;function S(F){return f(F)&&(z(F)==="[object Error]"||F instanceof Error)}H.isError=S;function k(F){return typeof F=="function"}H.isFunction=k;function P(F){return F===null||typeof F=="boolean"||typeof F=="number"||typeof F=="string"||typeof F=="symbol"||typeof F=="undefined"}H.isPrimitive=P,H.isBuffer=t("./support/isBuffer");function z(F){return Object.prototype.toString.call(F)}function I(F){return F<10?"0"+F.toString(10):F.toString(10)}var R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function D(){var F=new Date,G=[I(F.getHours()),I(F.getMinutes()),I(F.getSeconds())].join(":");return[F.getDate(),R[F.getMonth()],G].join(" ")}H.log=function(){console.log("%s - %s",D(),H.format.apply(H,arguments))},H.inherits=t("inherits"),H._extend=function(F,G){if(!G||!f(G))return F;for(var W=Object.keys(G),q=W.length;q--;)F[W[q]]=G[W[q]];return F};function O(F,G){return Object.prototype.hasOwnProperty.call(F,G)}}).call(this)}).call(this,t("_process"),typeof Ao!="undefined"?Ao:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./support/isBuffer":77,_process:277,inherits:76}],79:[function(t,B,H){H.byteLength=r,H.toByteArray=c,H.fromByteArray=v;for(var d=[],l=[],b=typeof Uint8Array!="undefined"?Uint8Array:Array,w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,o=w.length;e<o;++e)d[e]=w[e],l[w.charCodeAt(e)]=e;l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63;function a(u){var g=u.length;if(g%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var h=u.indexOf("=");h===-1&&(h=g);var y=h===g?0:4-h%4;return[h,y]}function r(u){var g=a(u),h=g[0],y=g[1];return(h+y)*3/4-y}function n(u,g,h){return(g+h)*3/4-h}function c(u){var g,h=a(u),y=h[0],p=h[1],A=new b(n(u,y,p)),m=0,M=p>0?y-4:y,x;for(x=0;x<M;x+=4)g=l[u.charCodeAt(x)]<<18|l[u.charCodeAt(x+1)]<<12|l[u.charCodeAt(x+2)]<<6|l[u.charCodeAt(x+3)],A[m++]=g>>16&255,A[m++]=g>>8&255,A[m++]=g&255;return p===2&&(g=l[u.charCodeAt(x)]<<2|l[u.charCodeAt(x+1)]>>4,A[m++]=g&255),p===1&&(g=l[u.charCodeAt(x)]<<10|l[u.charCodeAt(x+1)]<<4|l[u.charCodeAt(x+2)]>>2,A[m++]=g>>8&255,A[m++]=g&255),A}function s(u){return d[u>>18&63]+d[u>>12&63]+d[u>>6&63]+d[u&63]}function i(u,g,h){for(var y,p=[],A=g;A<h;A+=3)y=(u[A]<<16&16711680)+(u[A+1]<<8&65280)+(u[A+2]&255),p.push(s(y));return p.join("")}function v(u){for(var g,h=u.length,y=h%3,p=[],A=16383,m=0,M=h-y;m<M;m+=A)p.push(i(u,m,m+A>M?M:m+A));return y===1?(g=u[h-1],p.push(d[g>>2]+d[g<<4&63]+"==")):y===2&&(g=(u[h-2]<<8)+u[h-1],p.push(d[g>>10]+d[g>>4&63]+d[g<<2&63]+"=")),p.join("")}},{}],80:[function(t,B,H){function d(a,r,n,c,s){for(var i=s+1;c<=s;){var v=c+s>>>1,u=a[v],g=n!==void 0?n(u,r):u-r;g>=0?(i=v,s=v-1):c=v+1}return i}function l(a,r,n,c,s){for(var i=s+1;c<=s;){var v=c+s>>>1,u=a[v],g=n!==void 0?n(u,r):u-r;g>0?(i=v,s=v-1):c=v+1}return i}function b(a,r,n,c,s){for(var i=c-1;c<=s;){var v=c+s>>>1,u=a[v],g=n!==void 0?n(u,r):u-r;g<0?(i=v,c=v+1):s=v-1}return i}function w(a,r,n,c,s){for(var i=c-1;c<=s;){var v=c+s>>>1,u=a[v],g=n!==void 0?n(u,r):u-r;g<=0?(i=v,c=v+1):s=v-1}return i}function e(a,r,n,c,s){for(;c<=s;){var i=c+s>>>1,v=a[i],u=n!==void 0?n(v,r):v-r;if(u===0)return i;u<=0?c=i+1:s=i-1}return-1}function o(a,r,n,c,s,i){return typeof n=="function"?i(a,r,n,c===void 0?0:c|0,s===void 0?a.length-1:s|0):i(a,r,void 0,n===void 0?0:n|0,c===void 0?a.length-1:c|0)}B.exports={ge:function(a,r,n,c,s){return o(a,r,n,c,s,d)},gt:function(a,r,n,c,s){return o(a,r,n,c,s,l)},lt:function(a,r,n,c,s){return o(a,r,n,c,s,b)},le:function(a,r,n,c,s){return o(a,r,n,c,s,w)},eq:function(a,r,n,c,s){return o(a,r,n,c,s,e)}}},{}],81:[function(t,B,H){var d=32;H.INT_BITS=d,H.INT_MAX=2147483647,H.INT_MIN=-1<<d-1,H.sign=function(w){return(w>0)-(w<0)},H.abs=function(w){var e=w>>d-1;return(w^e)-e},H.min=function(w,e){return e^(w^e)&-(w<e)},H.max=function(w,e){return w^(w^e)&-(w<e)},H.isPow2=function(w){return!(w&w-1)&&!!w},H.log2=function(w){var e,o;return e=(w>65535)<<4,w>>>=e,o=(w>255)<<3,w>>>=o,e|=o,o=(w>15)<<2,w>>>=o,e|=o,o=(w>3)<<1,w>>>=o,e|=o,e|w>>1},H.log10=function(w){return w>=1e9?9:w>=1e8?8:w>=1e7?7:w>=1e6?6:w>=1e5?5:w>=1e4?4:w>=1e3?3:w>=100?2:w>=10?1:0},H.popCount=function(w){return w=w-(w>>>1&1431655765),w=(w&858993459)+(w>>>2&858993459),(w+(w>>>4)&252645135)*16843009>>>24};function l(w){var e=32;return w&=-w,w&&e--,w&65535&&(e-=16),w&16711935&&(e-=8),w&252645135&&(e-=4),w&858993459&&(e-=2),w&1431655765&&(e-=1),e}H.countTrailingZeros=l,H.nextPow2=function(w){return w+=w===0,--w,w|=w>>>1,w|=w>>>2,w|=w>>>4,w|=w>>>8,w|=w>>>16,w+1},H.prevPow2=function(w){return w|=w>>>1,w|=w>>>2,w|=w>>>4,w|=w>>>8,w|=w>>>16,w-(w>>>1)},H.parity=function(w){return w^=w>>>16,w^=w>>>8,w^=w>>>4,w&=15,27030>>>w&1};var b=new Array(256);(function(w){for(var e=0;e<256;++e){var o=e,a=e,r=7;for(o>>>=1;o;o>>>=1)a<<=1,a|=o&1,--r;w[e]=a<<r&255}})(b),H.reverse=function(w){return b[w&255]<<24|b[w>>>8&255]<<16|b[w>>>16&255]<<8|b[w>>>24&255]},H.interleave2=function(w,e){return w&=65535,w=(w|w<<8)&16711935,w=(w|w<<4)&252645135,w=(w|w<<2)&858993459,w=(w|w<<1)&1431655765,e&=65535,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,w|e<<1},H.deinterleave2=function(w,e){return w=w>>>e&1431655765,w=(w|w>>>1)&858993459,w=(w|w>>>2)&252645135,w=(w|w>>>4)&16711935,w=(w|w>>>16)&65535,w<<16>>16},H.interleave3=function(w,e,o){return w&=1023,w=(w|w<<16)&4278190335,w=(w|w<<8)&251719695,w=(w|w<<4)&3272356035,w=(w|w<<2)&1227133513,e&=1023,e=(e|e<<16)&4278190335,e=(e|e<<8)&251719695,e=(e|e<<4)&3272356035,e=(e|e<<2)&1227133513,w|=e<<1,o&=1023,o=(o|o<<16)&4278190335,o=(o|o<<8)&251719695,o=(o|o<<4)&3272356035,o=(o|o<<2)&1227133513,w|o<<2},H.deinterleave3=function(w,e){return w=w>>>e&1227133513,w=(w|w>>>2)&3272356035,w=(w|w>>>4)&251719695,w=(w|w>>>8)&4278190335,w=(w|w>>>16)&1023,w<<22>>22},H.nextCombination=function(w){var e=w|w-1;return e+1|(~e&-~e)-1>>>l(w)+1}},{}],82:[function(t,B,H){var d=t("clamp");B.exports=b;var l=1e20;function b(o,a){a||(a={});var r=a.cutoff==null?.25:a.cutoff,n=a.radius==null?8:a.radius,c=a.channel||0,s,i,v,u,g,h,y,p,A,m,M;if(ArrayBuffer.isView(o)||Array.isArray(o)){if(!a.width||!a.height)throw Error("For raw data width and height should be provided by options");s=a.width,i=a.height,u=o,a.stride?h=a.stride:h=Math.floor(o.length/s/i)}else window.HTMLCanvasElement&&o instanceof window.HTMLCanvasElement?(p=o,y=p.getContext("2d"),s=p.width,i=p.height,A=y.getImageData(0,0,s,i),u=A.data,h=4):window.CanvasRenderingContext2D&&o instanceof window.CanvasRenderingContext2D?(p=o.canvas,y=o,s=p.width,i=p.height,A=y.getImageData(0,0,s,i),u=A.data,h=4):window.ImageData&&o instanceof window.ImageData&&(A=o,s=o.width,i=o.height,u=A.data,h=4);if(v=Math.max(s,i),window.Uint8ClampedArray&&u instanceof window.Uint8ClampedArray||window.Uint8Array&&u instanceof window.Uint8Array)for(g=u,u=Array(s*i),m=0,M=g.length;m<M;m++)u[m]=g[m*h+c]/255;else if(h!==1)throw Error("Raw data can have only 1 value per pixel");var x=Array(s*i),T=Array(s*i),_=Array(v),f=Array(v),L=Array(v+1),S=Array(v);for(m=0,M=s*i;m<M;m++){var k=u[m];x[m]=k===1?0:k===0?l:Math.pow(Math.max(0,.5-k),2),T[m]=k===1?l:k===0?0:Math.pow(Math.max(0,k-.5),2)}w(x,s,i,_,f,S,L),w(T,s,i,_,f,S,L);var P=window.Float32Array?new Float32Array(s*i):new Array(s*i);for(m=0,M=s*i;m<M;m++)P[m]=d(1-((x[m]-T[m])/n+r),0,1);return P}function w(o,a,r,n,c,s,i){for(var v=0;v<a;v++){for(var u=0;u<r;u++)n[u]=o[u*a+v];for(e(n,c,s,i,r),u=0;u<r;u++)o[u*a+v]=c[u]}for(u=0;u<r;u++){for(v=0;v<a;v++)n[v]=o[u*a+v];for(e(n,c,s,i,a),v=0;v<a;v++)o[u*a+v]=Math.sqrt(c[v])}}function e(o,a,r,n,c){r[0]=0,n[0]=-l,n[1]=+l;for(var s=1,i=0;s<c;s++){for(var v=(o[s]+s*s-(o[r[i]]+r[i]*r[i]))/(2*s-2*r[i]);v<=n[i];)i--,v=(o[s]+s*s-(o[r[i]]+r[i]*r[i]))/(2*s-2*r[i]);i++,r[i]=s,n[i]=v,n[i+1]=+l}for(s=0,i=0;s<c;s++){for(;n[i+1]<s;)i++;a[s]=(s-r[i])*(s-r[i])+o[r[i]]}}},{clamp:86}],83:[function(t,B,H){},{}],84:[function(t,B,H){var d=typeof Reflect=="object"?Reflect:null,l=d&&typeof d.apply=="function"?d.apply:function(m,M,x){return Function.prototype.apply.call(m,M,x)},b;d&&typeof d.ownKeys=="function"?b=d.ownKeys:Object.getOwnPropertySymbols?b=function(m){return Object.getOwnPropertyNames(m).concat(Object.getOwnPropertySymbols(m))}:b=function(m){return Object.getOwnPropertyNames(m)};function w(A){console&&console.warn&&console.warn(A)}var e=Number.isNaN||function(m){return m!==m};function o(){o.init.call(this)}B.exports=o,B.exports.once=p,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function r(A){if(typeof A!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof A)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(A){if(typeof A!="number"||A<0||e(A))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+A+".");a=A}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(m){if(typeof m!="number"||m<0||e(m))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+m+".");return this._maxListeners=m,this};function n(A){return A._maxListeners===void 0?o.defaultMaxListeners:A._maxListeners}o.prototype.getMaxListeners=function(){return n(this)},o.prototype.emit=function(m){for(var M=[],x=1;x<arguments.length;x++)M.push(arguments[x]);var T=m==="error",_=this._events;if(_!==void 0)T=T&&_.error===void 0;else if(!T)return!1;if(T){var f;if(M.length>0&&(f=M[0]),f instanceof Error)throw f;var L=new Error("Unhandled error."+(f?" ("+f.message+")":""));throw L.context=f,L}var S=_[m];if(S===void 0)return!1;if(typeof S=="function")l(S,this,M);else for(var k=S.length,P=g(S,k),x=0;x<k;++x)l(P[x],this,M);return!0};function c(A,m,M,x){var T,_,f;if(r(M),_=A._events,_===void 0?(_=A._events=Object.create(null),A._eventsCount=0):(_.newListener!==void 0&&(A.emit("newListener",m,M.listener?M.listener:M),_=A._events),f=_[m]),f===void 0)f=_[m]=M,++A._eventsCount;else if(typeof f=="function"?f=_[m]=x?[M,f]:[f,M]:x?f.unshift(M):f.push(M),T=n(A),T>0&&f.length>T&&!f.warned){f.warned=!0;var L=new Error("Possible EventEmitter memory leak detected. "+f.length+" "+String(m)+" listeners added. Use emitter.setMaxListeners() to increase limit");L.name="MaxListenersExceededWarning",L.emitter=A,L.type=m,L.count=f.length,w(L)}return A}o.prototype.addListener=function(m,M){return c(this,m,M,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(m,M){return c(this,m,M,!0)};function s(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function i(A,m,M){var x={fired:!1,wrapFn:void 0,target:A,type:m,listener:M},T=s.bind(x);return T.listener=M,x.wrapFn=T,T}o.prototype.once=function(m,M){return r(M),this.on(m,i(this,m,M)),this},o.prototype.prependOnceListener=function(m,M){return r(M),this.prependListener(m,i(this,m,M)),this},o.prototype.removeListener=function(m,M){var x,T,_,f,L;if(r(M),T=this._events,T===void 0)return this;if(x=T[m],x===void 0)return this;if(x===M||x.listener===M)--this._eventsCount===0?this._events=Object.create(null):(delete T[m],T.removeListener&&this.emit("removeListener",m,x.listener||M));else if(typeof x!="function"){for(_=-1,f=x.length-1;f>=0;f--)if(x[f]===M||x[f].listener===M){L=x[f].listener,_=f;break}if(_<0)return this;_===0?x.shift():h(x,_),x.length===1&&(T[m]=x[0]),T.removeListener!==void 0&&this.emit("removeListener",m,L||M)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(m){var M,x,T;if(x=this._events,x===void 0)return this;if(x.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):x[m]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete x[m]),this;if(arguments.length===0){var _=Object.keys(x),f;for(T=0;T<_.length;++T)f=_[T],f!=="removeListener"&&this.removeAllListeners(f);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(M=x[m],typeof M=="function")this.removeListener(m,M);else if(M!==void 0)for(T=M.length-1;T>=0;T--)this.removeListener(m,M[T]);return this};function v(A,m,M){var x=A._events;if(x===void 0)return[];var T=x[m];return T===void 0?[]:typeof T=="function"?M?[T.listener||T]:[T]:M?y(T):g(T,T.length)}o.prototype.listeners=function(m){return v(this,m,!0)},o.prototype.rawListeners=function(m){return v(this,m,!1)},o.listenerCount=function(A,m){return typeof A.listenerCount=="function"?A.listenerCount(m):u.call(A,m)},o.prototype.listenerCount=u;function u(A){var m=this._events;if(m!==void 0){var M=m[A];if(typeof M=="function")return 1;if(M!==void 0)return M.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?b(this._events):[]};function g(A,m){for(var M=new Array(m),x=0;x<m;++x)M[x]=A[x];return M}function h(A,m){for(;m+1<A.length;m++)A[m]=A[m+1];A.pop()}function y(A){for(var m=new Array(A.length),M=0;M<m.length;++M)m[M]=A[M].listener||A[M];return m}function p(A,m){return new Promise(function(M,x){function T(){_!==void 0&&A.removeListener("error",_),M([].slice.call(arguments))}var _;m!=="error"&&(_=function(L){A.removeListener(m,T),x(L)},A.once("error",_)),A.once(m,T)})}},{}],85:[function(t,B,H){(function(d){(function(){var l=t("base64-js"),b=t("ieee754");H.Buffer=a,H.SlowBuffer=y,H.INSPECT_MAX_BYTES=50;var w=2147483647;H.kMaxLength=w,a.TYPED_ARRAY_SUPPORT=e(),!a.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function e(){try{var ae=new Uint8Array(1);return ae.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},ae.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(!!a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(!!a.isBuffer(this))return this.byteOffset}});function o(ae){if(ae>w)throw new RangeError('The value "'+ae+'" is invalid for option "size"');var ie=new Uint8Array(ae);return ie.__proto__=a.prototype,ie}function a(ae,ie,ue){if(typeof ae=="number"){if(typeof ie=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return s(ae)}return r(ae,ie,ue)}typeof Symbol!="undefined"&&Symbol.species!=null&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),a.poolSize=8192;function r(ae,ie,ue){if(typeof ae=="string")return i(ae,ie);if(ArrayBuffer.isView(ae))return v(ae);if(ae==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae);if(Q(ae,ArrayBuffer)||ae&&Q(ae.buffer,ArrayBuffer))return u(ae,ie,ue);if(typeof ae=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var xe=ae.valueOf&&ae.valueOf();if(xe!=null&&xe!==ae)return a.from(xe,ie,ue);var he=g(ae);if(he)return he;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof ae[Symbol.toPrimitive]=="function")return a.from(ae[Symbol.toPrimitive]("string"),ie,ue);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae)}a.from=function(ae,ie,ue){return r(ae,ie,ue)},a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array;function n(ae){if(typeof ae!="number")throw new TypeError('"size" argument must be of type number');if(ae<0)throw new RangeError('The value "'+ae+'" is invalid for option "size"')}function c(ae,ie,ue){return n(ae),ae<=0?o(ae):ie!==void 0?typeof ue=="string"?o(ae).fill(ie,ue):o(ae).fill(ie):o(ae)}a.alloc=function(ae,ie,ue){return c(ae,ie,ue)};function s(ae){return n(ae),o(ae<0?0:h(ae)|0)}a.allocUnsafe=function(ae){return s(ae)},a.allocUnsafeSlow=function(ae){return s(ae)};function i(ae,ie){if((typeof ie!="string"||ie==="")&&(ie="utf8"),!a.isEncoding(ie))throw new TypeError("Unknown encoding: "+ie);var ue=p(ae,ie)|0,xe=o(ue),he=xe.write(ae,ie);return he!==ue&&(xe=xe.slice(0,he)),xe}function v(ae){for(var ie=ae.length<0?0:h(ae.length)|0,ue=o(ie),xe=0;xe<ie;xe+=1)ue[xe]=ae[xe]&255;return ue}function u(ae,ie,ue){if(ie<0||ae.byteLength<ie)throw new RangeError('"offset" is outside of buffer bounds');if(ae.byteLength<ie+(ue||0))throw new RangeError('"length" is outside of buffer bounds');var xe;return ie===void 0&&ue===void 0?xe=new Uint8Array(ae):ue===void 0?xe=new Uint8Array(ae,ie):xe=new Uint8Array(ae,ie,ue),xe.__proto__=a.prototype,xe}function g(ae){if(a.isBuffer(ae)){var ie=h(ae.length)|0,ue=o(ie);return ue.length===0||ae.copy(ue,0,0,ie),ue}if(ae.length!==void 0)return typeof ae.length!="number"||ne(ae.length)?o(0):v(ae);if(ae.type==="Buffer"&&Array.isArray(ae.data))return v(ae.data)}function h(ae){if(ae>=w)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+w.toString(16)+" bytes");return ae|0}function y(ae){return+ae!=ae&&(ae=0),a.alloc(+ae)}a.isBuffer=function(ie){return ie!=null&&ie._isBuffer===!0&&ie!==a.prototype},a.compare=function(ie,ue){if(Q(ie,Uint8Array)&&(ie=a.from(ie,ie.offset,ie.byteLength)),Q(ue,Uint8Array)&&(ue=a.from(ue,ue.offset,ue.byteLength)),!a.isBuffer(ie)||!a.isBuffer(ue))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ie===ue)return 0;for(var xe=ie.length,he=ue.length,ge=0,me=Math.min(xe,he);ge<me;++ge)if(ie[ge]!==ue[ge]){xe=ie[ge],he=ue[ge];break}return xe<he?-1:he<xe?1:0},a.isEncoding=function(ie){switch(String(ie).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(ie,ue){if(!Array.isArray(ie))throw new TypeError('"list" argument must be an Array of Buffers');if(ie.length===0)return a.alloc(0);var xe;if(ue===void 0)for(ue=0,xe=0;xe<ie.length;++xe)ue+=ie[xe].length;var he=a.allocUnsafe(ue),ge=0;for(xe=0;xe<ie.length;++xe){var me=ie[xe];if(Q(me,Uint8Array)&&(me=a.from(me)),!a.isBuffer(me))throw new TypeError('"list" argument must be an Array of Buffers');me.copy(he,ge),ge+=me.length}return he};function p(ae,ie){if(a.isBuffer(ae))return ae.length;if(ArrayBuffer.isView(ae)||Q(ae,ArrayBuffer))return ae.byteLength;if(typeof ae!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ae);var ue=ae.length,xe=arguments.length>2&&arguments[2]===!0;if(!xe&&ue===0)return 0;for(var he=!1;;)switch(ie){case"ascii":case"latin1":case"binary":return ue;case"utf8":case"utf-8":return U(ae).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ue*2;case"hex":return ue>>>1;case"base64":return ee(ae).length;default:if(he)return xe?-1:U(ae).length;ie=(""+ie).toLowerCase(),he=!0}}a.byteLength=p;function A(ae,ie,ue){var xe=!1;if((ie===void 0||ie<0)&&(ie=0),ie>this.length||((ue===void 0||ue>this.length)&&(ue=this.length),ue<=0)||(ue>>>=0,ie>>>=0,ue<=ie))return"";for(ae||(ae="utf8");;)switch(ae){case"hex":return F(this,ie,ue);case"utf8":case"utf-8":return z(this,ie,ue);case"ascii":return D(this,ie,ue);case"latin1":case"binary":return O(this,ie,ue);case"base64":return P(this,ie,ue);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,ie,ue);default:if(xe)throw new TypeError("Unknown encoding: "+ae);ae=(ae+"").toLowerCase(),xe=!0}}a.prototype._isBuffer=!0;function m(ae,ie,ue){var xe=ae[ie];ae[ie]=ae[ue],ae[ue]=xe}a.prototype.swap16=function(){var ie=this.length;if(ie%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ue=0;ue<ie;ue+=2)m(this,ue,ue+1);return this},a.prototype.swap32=function(){var ie=this.length;if(ie%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ue=0;ue<ie;ue+=4)m(this,ue,ue+3),m(this,ue+1,ue+2);return this},a.prototype.swap64=function(){var ie=this.length;if(ie%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ue=0;ue<ie;ue+=8)m(this,ue,ue+7),m(this,ue+1,ue+6),m(this,ue+2,ue+5),m(this,ue+3,ue+4);return this},a.prototype.toString=function(){var ie=this.length;return ie===0?"":arguments.length===0?z(this,0,ie):A.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(ie){if(!a.isBuffer(ie))throw new TypeError("Argument must be a Buffer");return this===ie?!0:a.compare(this,ie)===0},a.prototype.inspect=function(){var ie="",ue=H.INSPECT_MAX_BYTES;return ie=this.toString("hex",0,ue).replace(/(.{2})/g,"$1 ").trim(),this.length>ue&&(ie+=" ... "),"<Buffer "+ie+">"},a.prototype.compare=function(ie,ue,xe,he,ge){if(Q(ie,Uint8Array)&&(ie=a.from(ie,ie.offset,ie.byteLength)),!a.isBuffer(ie))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ie);if(ue===void 0&&(ue=0),xe===void 0&&(xe=ie?ie.length:0),he===void 0&&(he=0),ge===void 0&&(ge=this.length),ue<0||xe>ie.length||he<0||ge>this.length)throw new RangeError("out of range index");if(he>=ge&&ue>=xe)return 0;if(he>=ge)return-1;if(ue>=xe)return 1;if(ue>>>=0,xe>>>=0,he>>>=0,ge>>>=0,this===ie)return 0;for(var me=ge-he,ke=xe-ue,Ae=Math.min(me,ke),Ne=this.slice(he,ge),He=ie.slice(ue,xe),Ge=0;Ge<Ae;++Ge)if(Ne[Ge]!==He[Ge]){me=Ne[Ge],ke=He[Ge];break}return me<ke?-1:ke<me?1:0};function M(ae,ie,ue,xe,he){if(ae.length===0)return-1;if(typeof ue=="string"?(xe=ue,ue=0):ue>2147483647?ue=2147483647:ue<-2147483648&&(ue=-2147483648),ue=+ue,ne(ue)&&(ue=he?0:ae.length-1),ue<0&&(ue=ae.length+ue),ue>=ae.length){if(he)return-1;ue=ae.length-1}else if(ue<0)if(he)ue=0;else return-1;if(typeof ie=="string"&&(ie=a.from(ie,xe)),a.isBuffer(ie))return ie.length===0?-1:x(ae,ie,ue,xe,he);if(typeof ie=="number")return ie=ie&255,typeof Uint8Array.prototype.indexOf=="function"?he?Uint8Array.prototype.indexOf.call(ae,ie,ue):Uint8Array.prototype.lastIndexOf.call(ae,ie,ue):x(ae,[ie],ue,xe,he);throw new TypeError("val must be string, number or Buffer")}function x(ae,ie,ue,xe,he){var ge=1,me=ae.length,ke=ie.length;if(xe!==void 0&&(xe=String(xe).toLowerCase(),xe==="ucs2"||xe==="ucs-2"||xe==="utf16le"||xe==="utf-16le")){if(ae.length<2||ie.length<2)return-1;ge=2,me/=2,ke/=2,ue/=2}function Ae(De,Ye){return ge===1?De[Ye]:De.readUInt16BE(Ye*ge)}var Ne;if(he){var He=-1;for(Ne=ue;Ne<me;Ne++)if(Ae(ae,Ne)===Ae(ie,He===-1?0:Ne-He)){if(He===-1&&(He=Ne),Ne-He+1===ke)return He*ge}else He!==-1&&(Ne-=Ne-He),He=-1}else for(ue+ke>me&&(ue=me-ke),Ne=ue;Ne>=0;Ne--){for(var Ge=!0,_e=0;_e<ke;_e++)if(Ae(ae,Ne+_e)!==Ae(ie,_e)){Ge=!1;break}if(Ge)return Ne}return-1}a.prototype.includes=function(ie,ue,xe){return this.indexOf(ie,ue,xe)!==-1},a.prototype.indexOf=function(ie,ue,xe){return M(this,ie,ue,xe,!0)},a.prototype.lastIndexOf=function(ie,ue,xe){return M(this,ie,ue,xe,!1)};function T(ae,ie,ue,xe){ue=Number(ue)||0;var he=ae.length-ue;xe?(xe=Number(xe),xe>he&&(xe=he)):xe=he;var ge=ie.length;xe>ge/2&&(xe=ge/2);for(var me=0;me<xe;++me){var ke=parseInt(ie.substr(me*2,2),16);if(ne(ke))return me;ae[ue+me]=ke}return me}function _(ae,ie,ue,xe){return j(U(ie,ae.length-ue),ae,ue,xe)}function f(ae,ie,ue,xe){return j(V(ie),ae,ue,xe)}function L(ae,ie,ue,xe){return f(ae,ie,ue,xe)}function S(ae,ie,ue,xe){return j(ee(ie),ae,ue,xe)}function k(ae,ie,ue,xe){return j(re(ie,ae.length-ue),ae,ue,xe)}a.prototype.write=function(ie,ue,xe,he){if(ue===void 0)he="utf8",xe=this.length,ue=0;else if(xe===void 0&&typeof ue=="string")he=ue,xe=this.length,ue=0;else if(isFinite(ue))ue=ue>>>0,isFinite(xe)?(xe=xe>>>0,he===void 0&&(he="utf8")):(he=xe,xe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var ge=this.length-ue;if((xe===void 0||xe>ge)&&(xe=ge),ie.length>0&&(xe<0||ue<0)||ue>this.length)throw new RangeError("Attempt to write outside buffer bounds");he||(he="utf8");for(var me=!1;;)switch(he){case"hex":return T(this,ie,ue,xe);case"utf8":case"utf-8":return _(this,ie,ue,xe);case"ascii":return f(this,ie,ue,xe);case"latin1":case"binary":return L(this,ie,ue,xe);case"base64":return S(this,ie,ue,xe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,ie,ue,xe);default:if(me)throw new TypeError("Unknown encoding: "+he);he=(""+he).toLowerCase(),me=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function P(ae,ie,ue){return ie===0&&ue===ae.length?l.fromByteArray(ae):l.fromByteArray(ae.slice(ie,ue))}function z(ae,ie,ue){ue=Math.min(ae.length,ue);for(var xe=[],he=ie;he<ue;){var ge=ae[he],me=null,ke=ge>239?4:ge>223?3:ge>191?2:1;if(he+ke<=ue){var Ae,Ne,He,Ge;switch(ke){case 1:ge<128&&(me=ge);break;case 2:Ae=ae[he+1],(Ae&192)===128&&(Ge=(ge&31)<<6|Ae&63,Ge>127&&(me=Ge));break;case 3:Ae=ae[he+1],Ne=ae[he+2],(Ae&192)===128&&(Ne&192)===128&&(Ge=(ge&15)<<12|(Ae&63)<<6|Ne&63,Ge>2047&&(Ge<55296||Ge>57343)&&(me=Ge));break;case 4:Ae=ae[he+1],Ne=ae[he+2],He=ae[he+3],(Ae&192)===128&&(Ne&192)===128&&(He&192)===128&&(Ge=(ge&15)<<18|(Ae&63)<<12|(Ne&63)<<6|He&63,Ge>65535&&Ge<1114112&&(me=Ge))}}me===null?(me=65533,ke=1):me>65535&&(me-=65536,xe.push(me>>>10&1023|55296),me=56320|me&1023),xe.push(me),he+=ke}return R(xe)}var I=4096;function R(ae){var ie=ae.length;if(ie<=I)return String.fromCharCode.apply(String,ae);for(var ue="",xe=0;xe<ie;)ue+=String.fromCharCode.apply(String,ae.slice(xe,xe+=I));return ue}function D(ae,ie,ue){var xe="";ue=Math.min(ae.length,ue);for(var he=ie;he<ue;++he)xe+=String.fromCharCode(ae[he]&127);return xe}function O(ae,ie,ue){var xe="";ue=Math.min(ae.length,ue);for(var he=ie;he<ue;++he)xe+=String.fromCharCode(ae[he]);return xe}function F(ae,ie,ue){var xe=ae.length;(!ie||ie<0)&&(ie=0),(!ue||ue<0||ue>xe)&&(ue=xe);for(var he="",ge=ie;ge<ue;++ge)he+=oe(ae[ge]);return he}function G(ae,ie,ue){for(var xe=ae.slice(ie,ue),he="",ge=0;ge<xe.length;ge+=2)he+=String.fromCharCode(xe[ge]+xe[ge+1]*256);return he}a.prototype.slice=function(ie,ue){var xe=this.length;ie=~~ie,ue=ue===void 0?xe:~~ue,ie<0?(ie+=xe,ie<0&&(ie=0)):ie>xe&&(ie=xe),ue<0?(ue+=xe,ue<0&&(ue=0)):ue>xe&&(ue=xe),ue<ie&&(ue=ie);var he=this.subarray(ie,ue);return he.__proto__=a.prototype,he};function W(ae,ie,ue){if(ae%1!==0||ae<0)throw new RangeError("offset is not uint");if(ae+ie>ue)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUIntLE=function(ie,ue,xe){ie=ie>>>0,ue=ue>>>0,xe||W(ie,ue,this.length);for(var he=this[ie],ge=1,me=0;++me<ue&&(ge*=256);)he+=this[ie+me]*ge;return he},a.prototype.readUIntBE=function(ie,ue,xe){ie=ie>>>0,ue=ue>>>0,xe||W(ie,ue,this.length);for(var he=this[ie+--ue],ge=1;ue>0&&(ge*=256);)he+=this[ie+--ue]*ge;return he},a.prototype.readUInt8=function(ie,ue){return ie=ie>>>0,ue||W(ie,1,this.length),this[ie]},a.prototype.readUInt16LE=function(ie,ue){return ie=ie>>>0,ue||W(ie,2,this.length),this[ie]|this[ie+1]<<8},a.prototype.readUInt16BE=function(ie,ue){return ie=ie>>>0,ue||W(ie,2,this.length),this[ie]<<8|this[ie+1]},a.prototype.readUInt32LE=function(ie,ue){return ie=ie>>>0,ue||W(ie,4,this.length),(this[ie]|this[ie+1]<<8|this[ie+2]<<16)+this[ie+3]*16777216},a.prototype.readUInt32BE=function(ie,ue){return ie=ie>>>0,ue||W(ie,4,this.length),this[ie]*16777216+(this[ie+1]<<16|this[ie+2]<<8|this[ie+3])},a.prototype.readIntLE=function(ie,ue,xe){ie=ie>>>0,ue=ue>>>0,xe||W(ie,ue,this.length);for(var he=this[ie],ge=1,me=0;++me<ue&&(ge*=256);)he+=this[ie+me]*ge;return ge*=128,he>=ge&&(he-=Math.pow(2,8*ue)),he},a.prototype.readIntBE=function(ie,ue,xe){ie=ie>>>0,ue=ue>>>0,xe||W(ie,ue,this.length);for(var he=ue,ge=1,me=this[ie+--he];he>0&&(ge*=256);)me+=this[ie+--he]*ge;return ge*=128,me>=ge&&(me-=Math.pow(2,8*ue)),me},a.prototype.readInt8=function(ie,ue){return ie=ie>>>0,ue||W(ie,1,this.length),this[ie]&128?(255-this[ie]+1)*-1:this[ie]},a.prototype.readInt16LE=function(ie,ue){ie=ie>>>0,ue||W(ie,2,this.length);var xe=this[ie]|this[ie+1]<<8;return xe&32768?xe|4294901760:xe},a.prototype.readInt16BE=function(ie,ue){ie=ie>>>0,ue||W(ie,2,this.length);var xe=this[ie+1]|this[ie]<<8;return xe&32768?xe|4294901760:xe},a.prototype.readInt32LE=function(ie,ue){return ie=ie>>>0,ue||W(ie,4,this.length),this[ie]|this[ie+1]<<8|this[ie+2]<<16|this[ie+3]<<24},a.prototype.readInt32BE=function(ie,ue){return ie=ie>>>0,ue||W(ie,4,this.length),this[ie]<<24|this[ie+1]<<16|this[ie+2]<<8|this[ie+3]},a.prototype.readFloatLE=function(ie,ue){return ie=ie>>>0,ue||W(ie,4,this.length),b.read(this,ie,!0,23,4)},a.prototype.readFloatBE=function(ie,ue){return ie=ie>>>0,ue||W(ie,4,this.length),b.read(this,ie,!1,23,4)},a.prototype.readDoubleLE=function(ie,ue){return ie=ie>>>0,ue||W(ie,8,this.length),b.read(this,ie,!0,52,8)},a.prototype.readDoubleBE=function(ie,ue){return ie=ie>>>0,ue||W(ie,8,this.length),b.read(this,ie,!1,52,8)};function q(ae,ie,ue,xe,he,ge){if(!a.isBuffer(ae))throw new TypeError('"buffer" argument must be a Buffer instance');if(ie>he||ie<ge)throw new RangeError('"value" argument is out of bounds');if(ue+xe>ae.length)throw new RangeError("Index out of range")}a.prototype.writeUIntLE=function(ie,ue,xe,he){if(ie=+ie,ue=ue>>>0,xe=xe>>>0,!he){var ge=Math.pow(2,8*xe)-1;q(this,ie,ue,xe,ge,0)}var me=1,ke=0;for(this[ue]=ie&255;++ke<xe&&(me*=256);)this[ue+ke]=ie/me&255;return ue+xe},a.prototype.writeUIntBE=function(ie,ue,xe,he){if(ie=+ie,ue=ue>>>0,xe=xe>>>0,!he){var ge=Math.pow(2,8*xe)-1;q(this,ie,ue,xe,ge,0)}var me=xe-1,ke=1;for(this[ue+me]=ie&255;--me>=0&&(ke*=256);)this[ue+me]=ie/ke&255;return ue+xe},a.prototype.writeUInt8=function(ie,ue,xe){return ie=+ie,ue=ue>>>0,xe||q(this,ie,ue,1,255,0),this[ue]=ie&255,ue+1},a.prototype.writeUInt16LE=function(ie,ue,xe){return ie=+ie,ue=ue>>>0,xe||q(this,ie,ue,2,65535,0),this[ue]=ie&255,this[ue+1]=ie>>>8,ue+2},a.prototype.writeUInt16BE=function(ie,ue,xe){return ie=+ie,ue=ue>>>0,xe||q(this,ie,ue,2,65535,0),this[ue]=ie>>>8,this[ue+1]=ie&255,ue+2},a.prototype.writeUInt32LE=function(ie,ue,xe){return ie=+ie,ue=ue>>>0,xe||q(this,ie,ue,4,4294967295,0),this[ue+3]=ie>>>24,this[ue+2]=ie>>>16,this[ue+1]=ie>>>8,this[ue]=ie&255,ue+4},a.prototype.writeUInt32BE=function(ie,ue,xe){return ie=+ie,ue=ue>>>0,xe||q(this,ie,ue,4,4294967295,0),this[ue]=ie>>>24,this[ue+1]=ie>>>16,this[ue+2]=ie>>>8,this[ue+3]=ie&255,ue+4},a.prototype.writeIntLE=function(ie,ue,xe,he){if(ie=+ie,ue=ue>>>0,!he){var ge=Math.pow(2,8*xe-1);q(this,ie,ue,xe,ge-1,-ge)}var me=0,ke=1,Ae=0;for(this[ue]=ie&255;++me<xe&&(ke*=256);)ie<0&&Ae===0&&this[ue+me-1]!==0&&(Ae=1),this[ue+me]=(ie/ke>>0)-Ae&255;return ue+xe},a.prototype.writeIntBE=function(ie,ue,xe,he){if(ie=+ie,ue=ue>>>0,!he){var ge=Math.pow(2,8*xe-1);q(this,ie,ue,xe,ge-1,-ge)}var me=xe-1,ke=1,Ae=0;for(this[ue+me]=ie&255;--me>=0&&(ke*=256);)ie<0&&Ae===0&&this[ue+me+1]!==0&&(Ae=1),this[ue+me]=(ie/ke>>0)-Ae&255;return ue+xe},a.prototype.writeInt8=function(ie,ue,xe){return ie=+ie,ue=ue>>>0,xe||q(this,ie,ue,1,127,-128),ie<0&&(ie=255+ie+1),this[ue]=ie&255,ue+1},a.prototype.writeInt16LE=function(ie,ue,xe){return ie=+ie,ue=ue>>>0,xe||q(this,ie,ue,2,32767,-32768),this[ue]=ie&255,this[ue+1]=ie>>>8,ue+2},a.prototype.writeInt16BE=function(ie,ue,xe){return ie=+ie,ue=ue>>>0,xe||q(this,ie,ue,2,32767,-32768),this[ue]=ie>>>8,this[ue+1]=ie&255,ue+2},a.prototype.writeInt32LE=function(ie,ue,xe){return ie=+ie,ue=ue>>>0,xe||q(this,ie,ue,4,2147483647,-2147483648),this[ue]=ie&255,this[ue+1]=ie>>>8,this[ue+2]=ie>>>16,this[ue+3]=ie>>>24,ue+4},a.prototype.writeInt32BE=function(ie,ue,xe){return ie=+ie,ue=ue>>>0,xe||q(this,ie,ue,4,2147483647,-2147483648),ie<0&&(ie=4294967295+ie+1),this[ue]=ie>>>24,this[ue+1]=ie>>>16,this[ue+2]=ie>>>8,this[ue+3]=ie&255,ue+4};function J(ae,ie,ue,xe,he,ge){if(ue+xe>ae.length)throw new RangeError("Index out of range");if(ue<0)throw new RangeError("Index out of range")}function X(ae,ie,ue,xe,he){return ie=+ie,ue=ue>>>0,he||J(ae,ie,ue,4),b.write(ae,ie,ue,xe,23,4),ue+4}a.prototype.writeFloatLE=function(ie,ue,xe){return X(this,ie,ue,!0,xe)},a.prototype.writeFloatBE=function(ie,ue,xe){return X(this,ie,ue,!1,xe)};function Z(ae,ie,ue,xe,he){return ie=+ie,ue=ue>>>0,he||J(ae,ie,ue,8),b.write(ae,ie,ue,xe,52,8),ue+8}a.prototype.writeDoubleLE=function(ie,ue,xe){return Z(this,ie,ue,!0,xe)},a.prototype.writeDoubleBE=function(ie,ue,xe){return Z(this,ie,ue,!1,xe)},a.prototype.copy=function(ie,ue,xe,he){if(!a.isBuffer(ie))throw new TypeError("argument should be a Buffer");if(xe||(xe=0),!he&&he!==0&&(he=this.length),ue>=ie.length&&(ue=ie.length),ue||(ue=0),he>0&&he<xe&&(he=xe),he===xe||ie.length===0||this.length===0)return 0;if(ue<0)throw new RangeError("targetStart out of bounds");if(xe<0||xe>=this.length)throw new RangeError("Index out of range");if(he<0)throw new RangeError("sourceEnd out of bounds");he>this.length&&(he=this.length),ie.length-ue<he-xe&&(he=ie.length-ue+xe);var ge=he-xe;if(this===ie&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(ue,xe,he);else if(this===ie&&xe<ue&&ue<he)for(var me=ge-1;me>=0;--me)ie[me+ue]=this[me+xe];else Uint8Array.prototype.set.call(ie,this.subarray(xe,he),ue);return ge},a.prototype.fill=function(ie,ue,xe,he){if(typeof ie=="string"){if(typeof ue=="string"?(he=ue,ue=0,xe=this.length):typeof xe=="string"&&(he=xe,xe=this.length),he!==void 0&&typeof he!="string")throw new TypeError("encoding must be a string");if(typeof he=="string"&&!a.isEncoding(he))throw new TypeError("Unknown encoding: "+he);if(ie.length===1){var ge=ie.charCodeAt(0);(he==="utf8"&&ge<128||he==="latin1")&&(ie=ge)}}else typeof ie=="number"&&(ie=ie&255);if(ue<0||this.length<ue||this.length<xe)throw new RangeError("Out of range index");if(xe<=ue)return this;ue=ue>>>0,xe=xe===void 0?this.length:xe>>>0,ie||(ie=0);var me;if(typeof ie=="number")for(me=ue;me<xe;++me)this[me]=ie;else{var ke=a.isBuffer(ie)?ie:a.from(ie,he),Ae=ke.length;if(Ae===0)throw new TypeError('The value "'+ie+'" is invalid for argument "value"');for(me=0;me<xe-ue;++me)this[me+ue]=ke[me%Ae]}return this};var se=/[^+/0-9A-Za-z-_]/g;function le(ae){if(ae=ae.split("=")[0],ae=ae.trim().replace(se,""),ae.length<2)return"";for(;ae.length%4!==0;)ae=ae+"=";return ae}function oe(ae){return ae<16?"0"+ae.toString(16):ae.toString(16)}function U(ae,ie){ie=ie||1/0;for(var ue,xe=ae.length,he=null,ge=[],me=0;me<xe;++me){if(ue=ae.charCodeAt(me),ue>55295&&ue<57344){if(!he){if(ue>56319){(ie-=3)>-1&&ge.push(239,191,189);continue}else if(me+1===xe){(ie-=3)>-1&&ge.push(239,191,189);continue}he=ue;continue}if(ue<56320){(ie-=3)>-1&&ge.push(239,191,189),he=ue;continue}ue=(he-55296<<10|ue-56320)+65536}else he&&(ie-=3)>-1&&ge.push(239,191,189);if(he=null,ue<128){if((ie-=1)<0)break;ge.push(ue)}else if(ue<2048){if((ie-=2)<0)break;ge.push(ue>>6|192,ue&63|128)}else if(ue<65536){if((ie-=3)<0)break;ge.push(ue>>12|224,ue>>6&63|128,ue&63|128)}else if(ue<1114112){if((ie-=4)<0)break;ge.push(ue>>18|240,ue>>12&63|128,ue>>6&63|128,ue&63|128)}else throw new Error("Invalid code point")}return ge}function V(ae){for(var ie=[],ue=0;ue<ae.length;++ue)ie.push(ae.charCodeAt(ue)&255);return ie}function re(ae,ie){for(var ue,xe,he,ge=[],me=0;me<ae.length&&!((ie-=2)<0);++me)ue=ae.charCodeAt(me),xe=ue>>8,he=ue%256,ge.push(he),ge.push(xe);return ge}function ee(ae){return l.toByteArray(le(ae))}function j(ae,ie,ue,xe){for(var he=0;he<xe&&!(he+ue>=ie.length||he>=ae.length);++he)ie[he+ue]=ae[he];return he}function Q(ae,ie){return ae instanceof ie||ae!=null&&ae.constructor!=null&&ae.constructor.name!=null&&ae.constructor.name===ie.name}function ne(ae){return ae!==ae}}).call(this)}).call(this,t("buffer").Buffer)},{"base64-js":79,buffer:85,ieee754:230}],86:[function(t,B,H){B.exports=d;function d(l,b,w){return b<w?l<b?b:l>w?w:l:l<w?w:l>b?b:l}},{}],87:[function(t,B,H){var d=t("clamp");B.exports=l,B.exports.to=l,B.exports.from=b;function l(w,e){e==null&&(e=!0);var o=w[0],a=w[1],r=w[2],n=w[3];n==null&&(n=e?1:255),e&&(o*=255,a*=255,r*=255,n*=255),o=d(o,0,255)&255,a=d(a,0,255)&255,r=d(r,0,255)&255,n=d(n,0,255)&255;var c=o*16777216+(a<<16)+(r<<8)+n;return c}function b(w,e){w=+w;var o=w>>>24,a=(w&16711680)>>>16,r=(w&65280)>>>8,n=w&255;return e===!1?[o,a,r,n]:[o/255,a/255,r/255,n/255]}},{clamp:86}],88:[function(t,B,H){B.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],89:[function(t,B,H){var d=t("color-rgba"),l=t("clamp"),b=t("dtype");B.exports=function(o,a){(a==="float"||!a)&&(a="array"),a==="uint"&&(a="uint8"),a==="uint_clamped"&&(a="uint8_clamped");var r=b(a),n=new r(4),c=a!=="uint8"&&a!=="uint8_clamped";return(!o.length||typeof o=="string")&&(o=d(o),o[0]/=255,o[1]/=255,o[2]/=255),w(o)?(n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3]!=null?o[3]:255,c&&(n[0]/=255,n[1]/=255,n[2]/=255,n[3]/=255),n):(c?(n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3]!=null?o[3]:1):(n[0]=l(Math.floor(o[0]*255),0,255),n[1]=l(Math.floor(o[1]*255),0,255),n[2]=l(Math.floor(o[2]*255),0,255),n[3]=o[3]==null?255:l(Math.floor(o[3]*255),0,255)),n)};function w(e){return!!(e instanceof Uint8Array||e instanceof Uint8ClampedArray||Array.isArray(e)&&(e[0]>1||e[0]===0)&&(e[1]>1||e[1]===0)&&(e[2]>1||e[2]===0)&&(!e[3]||e[3]>1))}},{clamp:86,"color-rgba":91,dtype:127}],90:[function(t,B,H){(function(d){(function(){var l=t("color-name"),b=t("is-plain-obj"),w=t("defined");B.exports=o;var e={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function o(a){var r,n=[],c=1,s;if(typeof a=="string")if(l[a])n=l[a].slice(),s="rgb";else if(a==="transparent")c=0,s="rgb",n=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(a)){var i=a.slice(1),v=i.length,u=v<=4;c=1,u?(n=[parseInt(i[0]+i[0],16),parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16)],v===4&&(c=parseInt(i[3]+i[3],16)/255)):(n=[parseInt(i[0]+i[1],16),parseInt(i[2]+i[3],16),parseInt(i[4]+i[5],16)],v===8&&(c=parseInt(i[6]+i[7],16)/255)),n[0]||(n[0]=0),n[1]||(n[1]=0),n[2]||(n[2]=0),s="rgb"}else if(r=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(a)){var g=r[1],h=g==="rgb",i=g.replace(/a$/,"");s=i;var v=i==="cmyk"?4:i==="gray"?1:3;n=r[2].trim().split(/\s*,\s*/).map(function(m,M){if(/%$/.test(m))return M===v?parseFloat(m)/100:i==="rgb"?parseFloat(m)*255/100:parseFloat(m);if(i[M]==="h"){if(/deg$/.test(m))return parseFloat(m);if(e[m]!==void 0)return e[m]}return parseFloat(m)}),g===i&&n.push(1),c=h||n[v]===void 0?1:n[v],n=n.slice(0,v)}else a.length>10&&/[0-9](?:\s|\/)/.test(a)&&(n=a.match(/([0-9]+)/g).map(function(p){return parseFloat(p)}),s=a.match(/([a-z])/ig).join("").toLowerCase());else if(!isNaN(a))s="rgb",n=[a>>>16,(a&65280)>>>8,a&255];else if(b(a)){var y=w(a.r,a.red,a.R,null);y!==null?(s="rgb",n=[y,w(a.g,a.green,a.G),w(a.b,a.blue,a.B)]):(s="hsl",n=[w(a.h,a.hue,a.H),w(a.s,a.saturation,a.S),w(a.l,a.lightness,a.L,a.b,a.brightness)]),c=w(a.a,a.alpha,a.opacity,1),a.opacity!=null&&(c/=100)}else(Array.isArray(a)||d.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(a))&&(n=[a[0],a[1],a[2]],s="rgb",c=a.length===4?a[3]:1);return{space:s,values:n,alpha:c}}}).call(this)}).call(this,typeof Ao!="undefined"?Ao:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"color-name":88,defined:124,"is-plain-obj":236}],91:[function(t,B,H){var d=t("color-parse"),l=t("color-space/hsl"),b=t("clamp");B.exports=function(e){var o,a=d(e);return a.space?(o=Array(3),o[0]=b(a.values[0],0,255),o[1]=b(a.values[1],0,255),o[2]=b(a.values[2],0,255),a.space[0]==="h"&&(o=l.rgb(o)),o.push(b(a.alpha,0,1)),o):[]}},{clamp:86,"color-parse":90,"color-space/hsl":92}],92:[function(t,B,H){var d=t("./rgb");B.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(l){var b=l[0]/360,w=l[1]/100,e=l[2]/100,o,a,r,n,c;if(w===0)return c=e*255,[c,c,c];e<.5?a=e*(1+w):a=e+w-e*w,o=2*e-a,n=[0,0,0];for(var s=0;s<3;s++)r=b+1/3*-(s-1),r<0?r++:r>1&&r--,6*r<1?c=o+(a-o)*6*r:2*r<1?c=a:3*r<2?c=o+(a-o)*(2/3-r)*6:c=o,n[s]=c*255;return n}},d.hsl=function(l){var b=l[0]/255,w=l[1]/255,e=l[2]/255,o=Math.min(b,w,e),a=Math.max(b,w,e),r=a-o,n,c,s;return a===o?n=0:b===a?n=(w-e)/r:w===a?n=2+(e-b)/r:e===a&&(n=4+(b-w)/r),n=Math.min(n*60,360),n<0&&(n+=360),s=(o+a)/2,a===o?c=0:s<=.5?c=r/(a+o):c=r/(2-a-o),[n,c*100,s*100]}},{"./rgb":93}],93:[function(t,B,H){B.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],94:[function(t,B,H){B.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xE7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xE9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xE9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xE3)o.?tom(e|\xE9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],95:[function(t,B,H){B.exports=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]},{}],96:[function(t,B,H){B.exports=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]},{}],97:[function(t,B,H){B.exports=["normal","italic","oblique"]},{}],98:[function(t,B,H){B.exports=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},{}],99:[function(t,B,H){B.exports={parse:t("./parse"),stringify:t("./stringify")}},{"./parse":101,"./stringify":102}],100:[function(t,B,H){var d=t("css-font-size-keywords");B.exports={isSize:function(b){return/^[\d\.]/.test(b)||b.indexOf("/")!==-1||d.indexOf(b)!==-1}}},{"css-font-size-keywords":95}],101:[function(t,B,H){var d=t("unquote"),l=t("css-global-keywords"),b=t("css-system-font-keywords"),w=t("css-font-weight-keywords"),e=t("css-font-style-keywords"),o=t("css-font-stretch-keywords"),a=t("string-split-by"),r=t("./lib/util").isSize;B.exports=c;var n=c.cache={};function c(i){if(typeof i!="string")throw new Error("Font argument must be a string.");if(n[i])return n[i];if(i==="")throw new Error("Cannot parse an empty string.");if(b.indexOf(i)!==-1)return n[i]={system:i};for(var v={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},u=a(i,/\s+/),g;g=u.shift();){if(l.indexOf(g)!==-1)return["style","variant","weight","stretch"].forEach(function(y){v[y]=g}),n[i]=v;if(e.indexOf(g)!==-1){v.style=g;continue}if(g==="normal"||g==="small-caps"){v.variant=g;continue}if(o.indexOf(g)!==-1){v.stretch=g;continue}if(w.indexOf(g)!==-1){v.weight=g;continue}if(r(g)){var h=a(g,"/");if(v.size=h[0],h[1]!=null?v.lineHeight=s(h[1]):u[0]==="/"&&(u.shift(),v.lineHeight=s(u.shift())),!u.length)throw new Error("Missing required font-family.");return v.family=a(u.join(" "),/\s*,\s*/).map(d),n[i]=v}throw new Error("Unknown or unsupported font token: "+g)}throw new Error("Missing required font-size.")}function s(i){var v=parseFloat(i);return v.toString()===i?v:i}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"string-split-by":305,unquote:328}],102:[function(t,B,H){var d=t("pick-by-alias"),l=t("./lib/util").isSize,b=i(t("css-global-keywords")),w=i(t("css-system-font-keywords")),e=i(t("css-font-weight-keywords")),o=i(t("css-font-style-keywords")),a=i(t("css-font-stretch-keywords")),r={normal:1,"small-caps":1},n={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},c={style:"normal",variant:"normal",weight:"normal",stretch:"normal",size:"1rem",lineHeight:"normal",family:"serif"};B.exports=function(u){if(u=d(u,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"}),u.system)return u.system&&s(u.system,w),u.system;if(s(u.style,o),s(u.variant,r),s(u.weight,e),s(u.stretch,a),u.size==null&&(u.size=c.size),typeof u.size=="number"&&(u.size+="px"),!l)throw Error("Bad size value `"+u.size+"`");u.family||(u.family=c.family),Array.isArray(u.family)&&(u.family.length||(u.family=[c.family]),u.family=u.family.map(function(h){return n[h]?h:'"'+h+'"'}).join(", "));var g=[];return g.push(u.style),u.variant!==u.style&&g.push(u.variant),u.weight!==u.variant&&u.weight!==u.style&&g.push(u.weight),u.stretch!==u.weight&&u.stretch!==u.variant&&u.stretch!==u.style&&g.push(u.stretch),g.push(u.size+(u.lineHeight==null||u.lineHeight==="normal"||u.lineHeight+""=="1"?"":"/"+u.lineHeight)),g.push(u.family),g.filter(Boolean).join(" ")};function s(v,u){if(v&&!u[v]&&!b[v])throw Error("Unknown keyword `"+v+"`");return v}function i(v){for(var u={},g=0;g<v.length;g++)u[v[g]]=1;return u}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"pick-by-alias":253}],103:[function(t,B,H){B.exports=["inherit","initial","unset"]},{}],104:[function(t,B,H){B.exports=["caption","icon","menu","message-box","small-caption","status-bar"]},{}],105:[function(t,B,H){var d=t("type/value/is"),l=t("type/value/ensure"),b=t("type/plain-function/ensure"),w=t("es5-ext/object/copy"),e=t("es5-ext/object/normalize-options"),o=t("es5-ext/object/map"),a=Function.prototype.bind,r=Object.defineProperty,n=Object.prototype.hasOwnProperty,c;c=function(s,i,v){var u=l(i)&&b(i.value),g;return g=w(i),delete g.writable,delete g.value,g.get=function(){return!v.overwriteDefinition&&n.call(this,s)?u:(i.value=a.call(u,v.resolveContext?v.resolveContext(this):this),r(this,s,i),this[s])},g},B.exports=function(s){var i=e(arguments[1]);return d(i.resolveContext)&&b(i.resolveContext),o(s,function(v,u){return c(u,v,i)})}},{"es5-ext/object/copy":147,"es5-ext/object/map":155,"es5-ext/object/normalize-options":156,"type/plain-function/ensure":321,"type/value/ensure":325,"type/value/is":326}],106:[function(t,B,H){var d=t("type/value/is"),l=t("type/plain-function/is"),b=t("es5-ext/object/assign"),w=t("es5-ext/object/normalize-options"),e=t("es5-ext/string/#/contains"),o=B.exports=function(a,r){var n,c,s,i,v;return arguments.length<2||typeof a!="string"?(i=r,r=a,a=null):i=arguments[2],d(a)?(n=e.call(a,"c"),c=e.call(a,"e"),s=e.call(a,"w")):(n=s=!0,c=!1),v={value:r,configurable:n,enumerable:c,writable:s},i?b(w(i),v):v};o.gs=function(a,r,n){var c,s,i,v;return typeof a!="string"?(i=n,n=r,r=a,a=null):i=arguments[3],d(r)?l(r)?d(n)?l(n)||(i=n,n=void 0):n=void 0:(i=r,r=n=void 0):r=void 0,d(a)?(c=e.call(a,"c"),s=e.call(a,"e")):(c=!0,s=!1),v={get:r,set:n,configurable:c,enumerable:s},i?b(w(i),v):v}},{"es5-ext/object/assign":144,"es5-ext/object/normalize-options":156,"es5-ext/string/#/contains":163,"type/plain-function/is":322,"type/value/is":326}],107:[function(t,B,H){(function(d,l){l(typeof H=="object"&&typeof B!="undefined"?H:d.d3=d.d3||{})})(this,function(d){function l(U,V){return U<V?-1:U>V?1:U>=V?0:NaN}function b(U){return U.length===1&&(U=w(U)),{left:function(V,re,ee,j){for(ee==null&&(ee=0),j==null&&(j=V.length);ee<j;){var Q=ee+j>>>1;U(V[Q],re)<0?ee=Q+1:j=Q}return ee},right:function(V,re,ee,j){for(ee==null&&(ee=0),j==null&&(j=V.length);ee<j;){var Q=ee+j>>>1;U(V[Q],re)>0?j=Q:ee=Q+1}return ee}}}function w(U){return function(V,re){return l(U(V),re)}}var e=b(l),o=e.right,a=e.left;function r(U,V){V==null&&(V=n);for(var re=0,ee=U.length-1,j=U[0],Q=new Array(ee<0?0:ee);re<ee;)Q[re]=V(j,j=U[++re]);return Q}function n(U,V){return[U,V]}function c(U,V,re){var ee=U.length,j=V.length,Q=new Array(ee*j),ne,ae,ie,ue;for(re==null&&(re=n),ne=ie=0;ne<ee;++ne)for(ue=U[ne],ae=0;ae<j;++ae,++ie)Q[ie]=re(ue,V[ae]);return Q}function s(U,V){return V<U?-1:V>U?1:V>=U?0:NaN}function i(U){return U===null?NaN:+U}function v(U,V){var re=U.length,ee=0,j=-1,Q=0,ne,ae,ie=0;if(V==null)for(;++j<re;)isNaN(ne=i(U[j]))||(ae=ne-Q,Q+=ae/++ee,ie+=ae*(ne-Q));else for(;++j<re;)isNaN(ne=i(V(U[j],j,U)))||(ae=ne-Q,Q+=ae/++ee,ie+=ae*(ne-Q));if(ee>1)return ie/(ee-1)}function u(U,V){var re=v(U,V);return re&&Math.sqrt(re)}function g(U,V){var re=U.length,ee=-1,j,Q,ne;if(V==null){for(;++ee<re;)if((j=U[ee])!=null&&j>=j)for(Q=ne=j;++ee<re;)(j=U[ee])!=null&&(Q>j&&(Q=j),ne<j&&(ne=j))}else for(;++ee<re;)if((j=V(U[ee],ee,U))!=null&&j>=j)for(Q=ne=j;++ee<re;)(j=V(U[ee],ee,U))!=null&&(Q>j&&(Q=j),ne<j&&(ne=j));return[Q,ne]}var h=Array.prototype,y=h.slice,p=h.map;function A(U){return function(){return U}}function m(U){return U}function M(U,V,re){U=+U,V=+V,re=(j=arguments.length)<2?(V=U,U=0,1):j<3?1:+re;for(var ee=-1,j=Math.max(0,Math.ceil((V-U)/re))|0,Q=new Array(j);++ee<j;)Q[ee]=U+ee*re;return Q}var x=Math.sqrt(50),T=Math.sqrt(10),_=Math.sqrt(2);function f(U,V,re){var ee,j=-1,Q,ne,ae;if(V=+V,U=+U,re=+re,U===V&&re>0)return[U];if((ee=V<U)&&(Q=U,U=V,V=Q),(ae=L(U,V,re))===0||!isFinite(ae))return[];if(ae>0)for(U=Math.ceil(U/ae),V=Math.floor(V/ae),ne=new Array(Q=Math.ceil(V-U+1));++j<Q;)ne[j]=(U+j)*ae;else for(U=Math.floor(U*ae),V=Math.ceil(V*ae),ne=new Array(Q=Math.ceil(U-V+1));++j<Q;)ne[j]=(U-j)/ae;return ee&&ne.reverse(),ne}function L(U,V,re){var ee=(V-U)/Math.max(0,re),j=Math.floor(Math.log(ee)/Math.LN10),Q=ee/Math.pow(10,j);return j>=0?(Q>=x?10:Q>=T?5:Q>=_?2:1)*Math.pow(10,j):-Math.pow(10,-j)/(Q>=x?10:Q>=T?5:Q>=_?2:1)}function S(U,V,re){var ee=Math.abs(V-U)/Math.max(0,re),j=Math.pow(10,Math.floor(Math.log(ee)/Math.LN10)),Q=ee/j;return Q>=x?j*=10:Q>=T?j*=5:Q>=_&&(j*=2),V<U?-j:j}function k(U){return Math.ceil(Math.log(U.length)/Math.LN2)+1}function P(){var U=m,V=g,re=k;function ee(j){var Q,ne=j.length,ae,ie=new Array(ne);for(Q=0;Q<ne;++Q)ie[Q]=U(j[Q],Q,j);var ue=V(ie),xe=ue[0],he=ue[1],ge=re(ie,xe,he);Array.isArray(ge)||(ge=S(xe,he,ge),ge=M(Math.ceil(xe/ge)*ge,he,ge));for(var me=ge.length;ge[0]<=xe;)ge.shift(),--me;for(;ge[me-1]>he;)ge.pop(),--me;var ke=new Array(me+1),Ae;for(Q=0;Q<=me;++Q)Ae=ke[Q]=[],Ae.x0=Q>0?ge[Q-1]:xe,Ae.x1=Q<me?ge[Q]:he;for(Q=0;Q<ne;++Q)ae=ie[Q],xe<=ae&&ae<=he&&ke[o(ge,ae,0,me)].push(j[Q]);return ke}return ee.value=function(j){return arguments.length?(U=typeof j=="function"?j:A(j),ee):U},ee.domain=function(j){return arguments.length?(V=typeof j=="function"?j:A([j[0],j[1]]),ee):V},ee.thresholds=function(j){return arguments.length?(re=typeof j=="function"?j:Array.isArray(j)?A(y.call(j)):A(j),ee):re},ee}function z(U,V,re){if(re==null&&(re=i),!!(ee=U.length)){if((V=+V)<=0||ee<2)return+re(U[0],0,U);if(V>=1)return+re(U[ee-1],ee-1,U);var ee,j=(ee-1)*V,Q=Math.floor(j),ne=+re(U[Q],Q,U),ae=+re(U[Q+1],Q+1,U);return ne+(ae-ne)*(j-Q)}}function I(U,V,re){return U=p.call(U,i).sort(l),Math.ceil((re-V)/(2*(z(U,.75)-z(U,.25))*Math.pow(U.length,-1/3)))}function R(U,V,re){return Math.ceil((re-V)/(3.5*u(U)*Math.pow(U.length,-1/3)))}function D(U,V){var re=U.length,ee=-1,j,Q;if(V==null){for(;++ee<re;)if((j=U[ee])!=null&&j>=j)for(Q=j;++ee<re;)(j=U[ee])!=null&&j>Q&&(Q=j)}else for(;++ee<re;)if((j=V(U[ee],ee,U))!=null&&j>=j)for(Q=j;++ee<re;)(j=V(U[ee],ee,U))!=null&&j>Q&&(Q=j);return Q}function O(U,V){var re=U.length,ee=re,j=-1,Q,ne=0;if(V==null)for(;++j<re;)isNaN(Q=i(U[j]))?--ee:ne+=Q;else for(;++j<re;)isNaN(Q=i(V(U[j],j,U)))?--ee:ne+=Q;if(ee)return ne/ee}function F(U,V){var re=U.length,ee=-1,j,Q=[];if(V==null)for(;++ee<re;)isNaN(j=i(U[ee]))||Q.push(j);else for(;++ee<re;)isNaN(j=i(V(U[ee],ee,U)))||Q.push(j);return z(Q.sort(l),.5)}function G(U){for(var V=U.length,re,ee=-1,j=0,Q,ne;++ee<V;)j+=U[ee].length;for(Q=new Array(j);--V>=0;)for(ne=U[V],re=ne.length;--re>=0;)Q[--j]=ne[re];return Q}function W(U,V){var re=U.length,ee=-1,j,Q;if(V==null){for(;++ee<re;)if((j=U[ee])!=null&&j>=j)for(Q=j;++ee<re;)(j=U[ee])!=null&&Q>j&&(Q=j)}else for(;++ee<re;)if((j=V(U[ee],ee,U))!=null&&j>=j)for(Q=j;++ee<re;)(j=V(U[ee],ee,U))!=null&&Q>j&&(Q=j);return Q}function q(U,V){for(var re=V.length,ee=new Array(re);re--;)ee[re]=U[V[re]];return ee}function J(U,V){if(!!(re=U.length)){var re,ee=0,j=0,Q,ne=U[j];for(V==null&&(V=l);++ee<re;)(V(Q=U[ee],ne)<0||V(ne,ne)!==0)&&(ne=Q,j=ee);if(V(ne,ne)===0)return j}}function X(U,V,re){for(var ee=(re==null?U.length:re)-(V=V==null?0:+V),j,Q;ee;)Q=Math.random()*ee--|0,j=U[ee+V],U[ee+V]=U[Q+V],U[Q+V]=j;return U}function Z(U,V){var re=U.length,ee=-1,j,Q=0;if(V==null)for(;++ee<re;)(j=+U[ee])&&(Q+=j);else for(;++ee<re;)(j=+V(U[ee],ee,U))&&(Q+=j);return Q}function se(U){if(!(Q=U.length))return[];for(var V=-1,re=W(U,le),ee=new Array(re);++V<re;)for(var j=-1,Q,ne=ee[V]=new Array(Q);++j<Q;)ne[j]=U[j][V];return ee}function le(U){return U.length}function oe(){return se(arguments)}d.bisect=o,d.bisectRight=o,d.bisectLeft=a,d.ascending=l,d.bisector=b,d.cross=c,d.descending=s,d.deviation=u,d.extent=g,d.histogram=P,d.thresholdFreedmanDiaconis=I,d.thresholdScott=R,d.thresholdSturges=k,d.max=D,d.mean=O,d.median=F,d.merge=G,d.min=W,d.pairs=r,d.permute=q,d.quantile=z,d.range=M,d.scan=J,d.shuffle=X,d.sum=Z,d.ticks=f,d.tickIncrement=L,d.tickStep=S,d.transpose=se,d.variance=v,d.zip=oe,Object.defineProperty(d,"__esModule",{value:!0})})},{}],108:[function(t,B,H){(function(d,l){l(typeof H=="object"&&typeof B!="undefined"?H:d.d3=d.d3||{})})(this,function(d){var l="$";function b(){}b.prototype=w.prototype={constructor:b,has:function(h){return l+h in this},get:function(h){return this[l+h]},set:function(h,y){return this[l+h]=y,this},remove:function(h){var y=l+h;return y in this&&delete this[y]},clear:function(){for(var h in this)h[0]===l&&delete this[h]},keys:function(){var h=[];for(var y in this)y[0]===l&&h.push(y.slice(1));return h},values:function(){var h=[];for(var y in this)y[0]===l&&h.push(this[y]);return h},entries:function(){var h=[];for(var y in this)y[0]===l&&h.push({key:y.slice(1),value:this[y]});return h},size:function(){var h=0;for(var y in this)y[0]===l&&++h;return h},empty:function(){for(var h in this)if(h[0]===l)return!1;return!0},each:function(h){for(var y in this)y[0]===l&&h(this[y],y.slice(1),this)}};function w(h,y){var p=new b;if(h instanceof b)h.each(function(T,_){p.set(_,T)});else if(Array.isArray(h)){var A=-1,m=h.length,M;if(y==null)for(;++A<m;)p.set(A,h[A]);else for(;++A<m;)p.set(y(M=h[A],A,h),M)}else if(h)for(var x in h)p.set(x,h[x]);return p}function e(){var h=[],y=[],p,A,m;function M(T,_,f,L){if(_>=h.length)return p!=null&&T.sort(p),A!=null?A(T):T;for(var S=-1,k=T.length,P=h[_++],z,I,R=w(),D,O=f();++S<k;)(D=R.get(z=P(I=T[S])+""))?D.push(I):R.set(z,[I]);return R.each(function(F,G){L(O,G,M(F,_,f,L))}),O}function x(T,_){if(++_>h.length)return T;var f,L=y[_-1];return A!=null&&_>=h.length?f=T.entries():(f=[],T.each(function(S,k){f.push({key:k,values:x(S,_)})})),L!=null?f.sort(function(S,k){return L(S.key,k.key)}):f}return m={object:function(T){return M(T,0,o,a)},map:function(T){return M(T,0,r,n)},entries:function(T){return x(M(T,0,r,n),0)},key:function(T){return h.push(T),m},sortKeys:function(T){return y[h.length-1]=T,m},sortValues:function(T){return p=T,m},rollup:function(T){return A=T,m}}}function o(){return{}}function a(h,y,p){h[y]=p}function r(){return w()}function n(h,y,p){h.set(y,p)}function c(){}var s=w.prototype;c.prototype=i.prototype={constructor:c,has:s.has,add:function(h){return h+="",this[l+h]=h,this},remove:s.remove,clear:s.clear,values:s.keys,size:s.size,empty:s.empty,each:s.each};function i(h,y){var p=new c;if(h instanceof c)h.each(function(M){p.add(M)});else if(h){var A=-1,m=h.length;if(y==null)for(;++A<m;)p.add(h[A]);else for(;++A<m;)p.add(y(h[A],A,h))}return p}function v(h){var y=[];for(var p in h)y.push(p);return y}function u(h){var y=[];for(var p in h)y.push(h[p]);return y}function g(h){var y=[];for(var p in h)y.push({key:p,value:h[p]});return y}d.nest=e,d.set=i,d.map=w,d.keys=v,d.values=u,d.entries=g,Object.defineProperty(d,"__esModule",{value:!0})})},{}],109:[function(t,B,H){(function(d,l){typeof H=="object"&&typeof B!="undefined"?l(H):(d=d||self,l(d.d3=d.d3||{}))})(this,function(d){function l(Ie,Ve,dt){Ie.prototype=Ve.prototype=dt,dt.constructor=Ie}function b(Ie,Ve){var dt=Object.create(Ie.prototype);for(var Dt in Ve)dt[Dt]=Ve[Dt];return dt}function w(){}var e=.7,o=1/e,a="\\s*([+-]?\\d+)\\s*",r="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",n="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",c=/^#([0-9a-f]{3,8})$/,s=new RegExp("^rgb\\("+[a,a,a]+"\\)$"),i=new RegExp("^rgb\\("+[n,n,n]+"\\)$"),v=new RegExp("^rgba\\("+[a,a,a,r]+"\\)$"),u=new RegExp("^rgba\\("+[n,n,n,r]+"\\)$"),g=new RegExp("^hsl\\("+[r,n,n]+"\\)$"),h=new RegExp("^hsla\\("+[r,n,n,r]+"\\)$"),y={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};l(w,M,{copy:function(Ie){return Object.assign(new this.constructor,this,Ie)},displayable:function(){return this.rgb().displayable()},hex:p,formatHex:p,formatHsl:A,formatRgb:m,toString:m});function p(){return this.rgb().formatHex()}function A(){return I(this).formatHsl()}function m(){return this.rgb().formatRgb()}function M(Ie){var Ve,dt;return Ie=(Ie+"").trim().toLowerCase(),(Ve=c.exec(Ie))?(dt=Ve[1].length,Ve=parseInt(Ve[1],16),dt===6?x(Ve):dt===3?new L(Ve>>8&15|Ve>>4&240,Ve>>4&15|Ve&240,(Ve&15)<<4|Ve&15,1):dt===8?T(Ve>>24&255,Ve>>16&255,Ve>>8&255,(Ve&255)/255):dt===4?T(Ve>>12&15|Ve>>8&240,Ve>>8&15|Ve>>4&240,Ve>>4&15|Ve&240,((Ve&15)<<4|Ve&15)/255):null):(Ve=s.exec(Ie))?new L(Ve[1],Ve[2],Ve[3],1):(Ve=i.exec(Ie))?new L(Ve[1]*255/100,Ve[2]*255/100,Ve[3]*255/100,1):(Ve=v.exec(Ie))?T(Ve[1],Ve[2],Ve[3],Ve[4]):(Ve=u.exec(Ie))?T(Ve[1]*255/100,Ve[2]*255/100,Ve[3]*255/100,Ve[4]):(Ve=g.exec(Ie))?z(Ve[1],Ve[2]/100,Ve[3]/100,1):(Ve=h.exec(Ie))?z(Ve[1],Ve[2]/100,Ve[3]/100,Ve[4]):y.hasOwnProperty(Ie)?x(y[Ie]):Ie==="transparent"?new L(NaN,NaN,NaN,0):null}function x(Ie){return new L(Ie>>16&255,Ie>>8&255,Ie&255,1)}function T(Ie,Ve,dt,Dt){return Dt<=0&&(Ie=Ve=dt=NaN),new L(Ie,Ve,dt,Dt)}function _(Ie){return Ie instanceof w||(Ie=M(Ie)),Ie?(Ie=Ie.rgb(),new L(Ie.r,Ie.g,Ie.b,Ie.opacity)):new L}function f(Ie,Ve,dt,Dt){return arguments.length===1?_(Ie):new L(Ie,Ve,dt,Dt==null?1:Dt)}function L(Ie,Ve,dt,Dt){this.r=+Ie,this.g=+Ve,this.b=+dt,this.opacity=+Dt}l(L,f,b(w,{brighter:function(Ie){return Ie=Ie==null?o:Math.pow(o,Ie),new L(this.r*Ie,this.g*Ie,this.b*Ie,this.opacity)},darker:function(Ie){return Ie=Ie==null?e:Math.pow(e,Ie),new L(this.r*Ie,this.g*Ie,this.b*Ie,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:S,formatHex:S,formatRgb:k,toString:k}));function S(){return"#"+P(this.r)+P(this.g)+P(this.b)}function k(){var Ie=this.opacity;return Ie=isNaN(Ie)?1:Math.max(0,Math.min(1,Ie)),(Ie===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(Ie===1?")":", "+Ie+")")}function P(Ie){return Ie=Math.max(0,Math.min(255,Math.round(Ie)||0)),(Ie<16?"0":"")+Ie.toString(16)}function z(Ie,Ve,dt,Dt){return Dt<=0?Ie=Ve=dt=NaN:dt<=0||dt>=1?Ie=Ve=NaN:Ve<=0&&(Ie=NaN),new D(Ie,Ve,dt,Dt)}function I(Ie){if(Ie instanceof D)return new D(Ie.h,Ie.s,Ie.l,Ie.opacity);if(Ie instanceof w||(Ie=M(Ie)),!Ie)return new D;if(Ie instanceof D)return Ie;Ie=Ie.rgb();var Ve=Ie.r/255,dt=Ie.g/255,Dt=Ie.b/255,Yt=Math.min(Ve,dt,Dt),kt=Math.max(Ve,dt,Dt),Ft=NaN,Nt=kt-Yt,Lt=(kt+Yt)/2;return Nt?(Ve===kt?Ft=(dt-Dt)/Nt+(dt<Dt)*6:dt===kt?Ft=(Dt-Ve)/Nt+2:Ft=(Ve-dt)/Nt+4,Nt/=Lt<.5?kt+Yt:2-kt-Yt,Ft*=60):Nt=Lt>0&&Lt<1?0:Ft,new D(Ft,Nt,Lt,Ie.opacity)}function R(Ie,Ve,dt,Dt){return arguments.length===1?I(Ie):new D(Ie,Ve,dt,Dt==null?1:Dt)}function D(Ie,Ve,dt,Dt){this.h=+Ie,this.s=+Ve,this.l=+dt,this.opacity=+Dt}l(D,R,b(w,{brighter:function(Ie){return Ie=Ie==null?o:Math.pow(o,Ie),new D(this.h,this.s,this.l*Ie,this.opacity)},darker:function(Ie){return Ie=Ie==null?e:Math.pow(e,Ie),new D(this.h,this.s,this.l*Ie,this.opacity)},rgb:function(){var Ie=this.h%360+(this.h<0)*360,Ve=isNaN(Ie)||isNaN(this.s)?0:this.s,dt=this.l,Dt=dt+(dt<.5?dt:1-dt)*Ve,Yt=2*dt-Dt;return new L(O(Ie>=240?Ie-240:Ie+120,Yt,Dt),O(Ie,Yt,Dt),O(Ie<120?Ie+240:Ie-120,Yt,Dt),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var Ie=this.opacity;return Ie=isNaN(Ie)?1:Math.max(0,Math.min(1,Ie)),(Ie===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(Ie===1?")":", "+Ie+")")}}));function O(Ie,Ve,dt){return(Ie<60?Ve+(dt-Ve)*Ie/60:Ie<180?dt:Ie<240?Ve+(dt-Ve)*(240-Ie)/60:Ve)*255}var F=Math.PI/180,G=180/Math.PI,W=18,q=.96422,J=1,X=.82521,Z=4/29,se=6/29,le=3*se*se,oe=se*se*se;function U(Ie){if(Ie instanceof ee)return new ee(Ie.l,Ie.a,Ie.b,Ie.opacity);if(Ie instanceof he)return ge(Ie);Ie instanceof L||(Ie=_(Ie));var Ve=ae(Ie.r),dt=ae(Ie.g),Dt=ae(Ie.b),Yt=j((.2225045*Ve+.7168786*dt+.0606169*Dt)/J),kt,Ft;return Ve===dt&&dt===Dt?kt=Ft=Yt:(kt=j((.4360747*Ve+.3850649*dt+.1430804*Dt)/q),Ft=j((.0139322*Ve+.0971045*dt+.7141733*Dt)/X)),new ee(116*Yt-16,500*(kt-Yt),200*(Yt-Ft),Ie.opacity)}function V(Ie,Ve){return new ee(Ie,0,0,Ve==null?1:Ve)}function re(Ie,Ve,dt,Dt){return arguments.length===1?U(Ie):new ee(Ie,Ve,dt,Dt==null?1:Dt)}function ee(Ie,Ve,dt,Dt){this.l=+Ie,this.a=+Ve,this.b=+dt,this.opacity=+Dt}l(ee,re,b(w,{brighter:function(Ie){return new ee(this.l+W*(Ie==null?1:Ie),this.a,this.b,this.opacity)},darker:function(Ie){return new ee(this.l-W*(Ie==null?1:Ie),this.a,this.b,this.opacity)},rgb:function(){var Ie=(this.l+16)/116,Ve=isNaN(this.a)?Ie:Ie+this.a/500,dt=isNaN(this.b)?Ie:Ie-this.b/200;return Ve=q*Q(Ve),Ie=J*Q(Ie),dt=X*Q(dt),new L(ne(3.1338561*Ve-1.6168667*Ie-.4906146*dt),ne(-.9787684*Ve+1.9161415*Ie+.033454*dt),ne(.0719453*Ve-.2289914*Ie+1.4052427*dt),this.opacity)}}));function j(Ie){return Ie>oe?Math.pow(Ie,1/3):Ie/le+Z}function Q(Ie){return Ie>se?Ie*Ie*Ie:le*(Ie-Z)}function ne(Ie){return 255*(Ie<=.0031308?12.92*Ie:1.055*Math.pow(Ie,1/2.4)-.055)}function ae(Ie){return(Ie/=255)<=.04045?Ie/12.92:Math.pow((Ie+.055)/1.055,2.4)}function ie(Ie){if(Ie instanceof he)return new he(Ie.h,Ie.c,Ie.l,Ie.opacity);if(Ie instanceof ee||(Ie=U(Ie)),Ie.a===0&&Ie.b===0)return new he(NaN,0<Ie.l&&Ie.l<100?0:NaN,Ie.l,Ie.opacity);var Ve=Math.atan2(Ie.b,Ie.a)*G;return new he(Ve<0?Ve+360:Ve,Math.sqrt(Ie.a*Ie.a+Ie.b*Ie.b),Ie.l,Ie.opacity)}function ue(Ie,Ve,dt,Dt){return arguments.length===1?ie(Ie):new he(dt,Ve,Ie,Dt==null?1:Dt)}function xe(Ie,Ve,dt,Dt){return arguments.length===1?ie(Ie):new he(Ie,Ve,dt,Dt==null?1:Dt)}function he(Ie,Ve,dt,Dt){this.h=+Ie,this.c=+Ve,this.l=+dt,this.opacity=+Dt}function ge(Ie){if(isNaN(Ie.h))return new ee(Ie.l,0,0,Ie.opacity);var Ve=Ie.h*F;return new ee(Ie.l,Math.cos(Ve)*Ie.c,Math.sin(Ve)*Ie.c,Ie.opacity)}l(he,xe,b(w,{brighter:function(Ie){return new he(this.h,this.c,this.l+W*(Ie==null?1:Ie),this.opacity)},darker:function(Ie){return new he(this.h,this.c,this.l-W*(Ie==null?1:Ie),this.opacity)},rgb:function(){return ge(this).rgb()}}));var me=-.14861,ke=1.78277,Ae=-.29227,Ne=-.90649,He=1.97294,Ge=He*Ne,_e=He*ke,De=ke*Ae-Ne*me;function Ye(Ie){if(Ie instanceof Ue)return new Ue(Ie.h,Ie.s,Ie.l,Ie.opacity);Ie instanceof L||(Ie=_(Ie));var Ve=Ie.r/255,dt=Ie.g/255,Dt=Ie.b/255,Yt=(De*Dt+Ge*Ve-_e*dt)/(De+Ge-_e),kt=Dt-Yt,Ft=(He*(dt-Yt)-Ae*kt)/Ne,Nt=Math.sqrt(Ft*Ft+kt*kt)/(He*Yt*(1-Yt)),Lt=Nt?Math.atan2(Ft,kt)*G-120:NaN;return new Ue(Lt<0?Lt+360:Lt,Nt,Yt,Ie.opacity)}function qe(Ie,Ve,dt,Dt){return arguments.length===1?Ye(Ie):new Ue(Ie,Ve,dt,Dt==null?1:Dt)}function Ue(Ie,Ve,dt,Dt){this.h=+Ie,this.s=+Ve,this.l=+dt,this.opacity=+Dt}l(Ue,qe,b(w,{brighter:function(Ie){return Ie=Ie==null?o:Math.pow(o,Ie),new Ue(this.h,this.s,this.l*Ie,this.opacity)},darker:function(Ie){return Ie=Ie==null?e:Math.pow(e,Ie),new Ue(this.h,this.s,this.l*Ie,this.opacity)},rgb:function(){var Ie=isNaN(this.h)?0:(this.h+120)*F,Ve=+this.l,dt=isNaN(this.s)?0:this.s*Ve*(1-Ve),Dt=Math.cos(Ie),Yt=Math.sin(Ie);return new L(255*(Ve+dt*(me*Dt+ke*Yt)),255*(Ve+dt*(Ae*Dt+Ne*Yt)),255*(Ve+dt*(He*Dt)),this.opacity)}})),d.color=M,d.cubehelix=qe,d.gray=V,d.hcl=xe,d.hsl=R,d.lab=re,d.lch=ue,d.rgb=f,Object.defineProperty(d,"__esModule",{value:!0})})},{}],110:[function(t,B,H){(function(d,l){typeof H=="object"&&typeof B!="undefined"?l(H):(d=d||self,l(d.d3=d.d3||{}))})(this,function(d){var l={value:function(){}};function b(){for(var r=0,n=arguments.length,c={},s;r<n;++r){if(!(s=arguments[r]+"")||s in c||/[\s.]/.test(s))throw new Error("illegal type: "+s);c[s]=[]}return new w(c)}function w(r){this._=r}function e(r,n){return r.trim().split(/^|\s+/).map(function(c){var s="",i=c.indexOf(".");if(i>=0&&(s=c.slice(i+1),c=c.slice(0,i)),c&&!n.hasOwnProperty(c))throw new Error("unknown type: "+c);return{type:c,name:s}})}w.prototype=b.prototype={constructor:w,on:function(r,n){var c=this._,s=e(r+"",c),i,v=-1,u=s.length;if(arguments.length<2){for(;++v<u;)if((i=(r=s[v]).type)&&(i=o(c[i],r.name)))return i;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++v<u;)if(i=(r=s[v]).type)c[i]=a(c[i],r.name,n);else if(n==null)for(i in c)c[i]=a(c[i],r.name,null);return this},copy:function(){var r={},n=this._;for(var c in n)r[c]=n[c].slice();return new w(r)},call:function(r,n){if((i=arguments.length-2)>0)for(var c=new Array(i),s=0,i,v;s<i;++s)c[s]=arguments[s+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(v=this._[r],s=0,i=v.length;s<i;++s)v[s].value.apply(n,c)},apply:function(r,n,c){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var s=this._[r],i=0,v=s.length;i<v;++i)s[i].value.apply(n,c)}};function o(r,n){for(var c=0,s=r.length,i;c<s;++c)if((i=r[c]).name===n)return i.value}function a(r,n,c){for(var s=0,i=r.length;s<i;++s)if(r[s].name===n){r[s]=l,r=r.slice(0,s).concat(r.slice(s+1));break}return c!=null&&r.push({name:n,value:c}),r}d.dispatch=b,Object.defineProperty(d,"__esModule",{value:!0})})},{}],111:[function(t,B,H){(function(d,l){typeof H=="object"&&typeof B!="undefined"?l(H,t("d3-quadtree"),t("d3-collection"),t("d3-dispatch"),t("d3-timer")):l(d.d3=d.d3||{},d.d3,d.d3,d.d3,d.d3)})(this,function(d,l,b,w,e){function o(_,f){var L;_==null&&(_=0),f==null&&(f=0);function S(){var k,P=L.length,z,I=0,R=0;for(k=0;k<P;++k)z=L[k],I+=z.x,R+=z.y;for(I=I/P-_,R=R/P-f,k=0;k<P;++k)z=L[k],z.x-=I,z.y-=R}return S.initialize=function(k){L=k},S.x=function(k){return arguments.length?(_=+k,S):_},S.y=function(k){return arguments.length?(f=+k,S):f},S}function a(_){return function(){return _}}function r(){return(Math.random()-.5)*1e-6}function n(_){return _.x+_.vx}function c(_){return _.y+_.vy}function s(_){var f,L,S=1,k=1;typeof _!="function"&&(_=a(_==null?1:+_));function P(){for(var R,D=f.length,O,F,G,W,q,J,X=0;X<k;++X)for(O=l.quadtree(f,n,c).visitAfter(z),R=0;R<D;++R)F=f[R],q=L[F.index],J=q*q,G=F.x+F.vx,W=F.y+F.vy,O.visit(Z);function Z(se,le,oe,U,V){var re=se.data,ee=se.r,j=q+ee;if(re){if(re.index>F.index){var Q=G-re.x-re.vx,ne=W-re.y-re.vy,ae=Q*Q+ne*ne;ae<j*j&&(Q===0&&(Q=r(),ae+=Q*Q),ne===0&&(ne=r(),ae+=ne*ne),ae=(j-(ae=Math.sqrt(ae)))/ae*S,F.vx+=(Q*=ae)*(j=(ee*=ee)/(J+ee)),F.vy+=(ne*=ae)*j,re.vx-=Q*(j=1-j),re.vy-=ne*j)}return}return le>G+j||U<G-j||oe>W+j||V<W-j}}function z(R){if(R.data)return R.r=L[R.data.index];for(var D=R.r=0;D<4;++D)R[D]&&R[D].r>R.r&&(R.r=R[D].r)}function I(){if(!!f){var R,D=f.length,O;for(L=new Array(D),R=0;R<D;++R)O=f[R],L[O.index]=+_(O,R,f)}}return P.initialize=function(R){f=R,I()},P.iterations=function(R){return arguments.length?(k=+R,P):k},P.strength=function(R){return arguments.length?(S=+R,P):S},P.radius=function(R){return arguments.length?(_=typeof R=="function"?R:a(+R),I(),P):_},P}function i(_){return _.index}function v(_,f){var L=_.get(f);if(!L)throw new Error("missing: "+f);return L}function u(_){var f=i,L=O,S,k=a(30),P,z,I,R,D=1;_==null&&(_=[]);function O(J){return 1/Math.min(I[J.source.index],I[J.target.index])}function F(J){for(var X=0,Z=_.length;X<D;++X)for(var se=0,le,oe,U,V,re,ee,j;se<Z;++se)le=_[se],oe=le.source,U=le.target,V=U.x+U.vx-oe.x-oe.vx||r(),re=U.y+U.vy-oe.y-oe.vy||r(),ee=Math.sqrt(V*V+re*re),ee=(ee-P[se])/ee*J*S[se],V*=ee,re*=ee,U.vx-=V*(j=R[se]),U.vy-=re*j,oe.vx+=V*(j=1-j),oe.vy+=re*j}function G(){if(!!z){var J,X=z.length,Z=_.length,se=b.map(z,f),le;for(J=0,I=new Array(X);J<Z;++J)le=_[J],le.index=J,typeof le.source!="object"&&(le.source=v(se,le.source)),typeof le.target!="object"&&(le.target=v(se,le.target)),I[le.source.index]=(I[le.source.index]||0)+1,I[le.target.index]=(I[le.target.index]||0)+1;for(J=0,R=new Array(Z);J<Z;++J)le=_[J],R[J]=I[le.source.index]/(I[le.source.index]+I[le.target.index]);S=new Array(Z),W(),P=new Array(Z),q()}}function W(){if(!!z)for(var J=0,X=_.length;J<X;++J)S[J]=+L(_[J],J,_)}function q(){if(!!z)for(var J=0,X=_.length;J<X;++J)P[J]=+k(_[J],J,_)}return F.initialize=function(J){z=J,G()},F.links=function(J){return arguments.length?(_=J,G(),F):_},F.id=function(J){return arguments.length?(f=J,F):f},F.iterations=function(J){return arguments.length?(D=+J,F):D},F.strength=function(J){return arguments.length?(L=typeof J=="function"?J:a(+J),W(),F):L},F.distance=function(J){return arguments.length?(k=typeof J=="function"?J:a(+J),q(),F):k},F}function g(_){return _.x}function h(_){return _.y}var y=10,p=Math.PI*(3-Math.sqrt(5));function A(_){var f,L=1,S=.001,k=1-Math.pow(S,1/300),P=0,z=.6,I=b.map(),R=e.timer(O),D=w.dispatch("tick","end");_==null&&(_=[]);function O(){F(),D.call("tick",f),L<S&&(R.stop(),D.call("end",f))}function F(q){var J,X=_.length,Z;q===void 0&&(q=1);for(var se=0;se<q;++se)for(L+=(P-L)*k,I.each(function(le){le(L)}),J=0;J<X;++J)Z=_[J],Z.fx==null?Z.x+=Z.vx*=z:(Z.x=Z.fx,Z.vx=0),Z.fy==null?Z.y+=Z.vy*=z:(Z.y=Z.fy,Z.vy=0);return f}function G(){for(var q=0,J=_.length,X;q<J;++q){if(X=_[q],X.index=q,X.fx!=null&&(X.x=X.fx),X.fy!=null&&(X.y=X.fy),isNaN(X.x)||isNaN(X.y)){var Z=y*Math.sqrt(q),se=q*p;X.x=Z*Math.cos(se),X.y=Z*Math.sin(se)}(isNaN(X.vx)||isNaN(X.vy))&&(X.vx=X.vy=0)}}function W(q){return q.initialize&&q.initialize(_),q}return G(),f={tick:F,restart:function(){return R.restart(O),f},stop:function(){return R.stop(),f},nodes:function(q){return arguments.length?(_=q,G(),I.each(W),f):_},alpha:function(q){return arguments.length?(L=+q,f):L},alphaMin:function(q){return arguments.length?(S=+q,f):S},alphaDecay:function(q){return arguments.length?(k=+q,f):+k},alphaTarget:function(q){return arguments.length?(P=+q,f):P},velocityDecay:function(q){return arguments.length?(z=1-q,f):1-z},force:function(q,J){return arguments.length>1?(J==null?I.remove(q):I.set(q,W(J)),f):I.get(q)},find:function(q,J,X){var Z=0,se=_.length,le,oe,U,V,re;for(X==null?X=1/0:X*=X,Z=0;Z<se;++Z)V=_[Z],le=q-V.x,oe=J-V.y,U=le*le+oe*oe,U<X&&(re=V,X=U);return re},on:function(q,J){return arguments.length>1?(D.on(q,J),f):D.on(q)}}}function m(){var _,f,L,S=a(-30),k,P=1,z=1/0,I=.81;function R(G){var W,q=_.length,J=l.quadtree(_,g,h).visitAfter(O);for(L=G,W=0;W<q;++W)f=_[W],J.visit(F)}function D(){if(!!_){var G,W=_.length,q;for(k=new Array(W),G=0;G<W;++G)q=_[G],k[q.index]=+S(q,G,_)}}function O(G){var W=0,q,J,X=0,Z,se,le;if(G.length){for(Z=se=le=0;le<4;++le)(q=G[le])&&(J=Math.abs(q.value))&&(W+=q.value,X+=J,Z+=J*q.x,se+=J*q.y);G.x=Z/X,G.y=se/X}else{q=G,q.x=q.data.x,q.y=q.data.y;do W+=k[q.data.index];while(q=q.next)}G.value=W}function F(G,W,q,J){if(!G.value)return!0;var X=G.x-f.x,Z=G.y-f.y,se=J-W,le=X*X+Z*Z;if(se*se/I<le)return le<z&&(X===0&&(X=r(),le+=X*X),Z===0&&(Z=r(),le+=Z*Z),le<P&&(le=Math.sqrt(P*le)),f.vx+=X*G.value*L/le,f.vy+=Z*G.value*L/le),!0;if(G.length||le>=z)return;(G.data!==f||G.next)&&(X===0&&(X=r(),le+=X*X),Z===0&&(Z=r(),le+=Z*Z),le<P&&(le=Math.sqrt(P*le)));do G.data!==f&&(se=k[G.data.index]*L/le,f.vx+=X*se,f.vy+=Z*se);while(G=G.next)}return R.initialize=function(G){_=G,D()},R.strength=function(G){return arguments.length?(S=typeof G=="function"?G:a(+G),D(),R):S},R.distanceMin=function(G){return arguments.length?(P=G*G,R):Math.sqrt(P)},R.distanceMax=function(G){return arguments.length?(z=G*G,R):Math.sqrt(z)},R.theta=function(G){return arguments.length?(I=G*G,R):Math.sqrt(I)},R}function M(_,f,L){var S,k=a(.1),P,z;typeof _!="function"&&(_=a(+_)),f==null&&(f=0),L==null&&(L=0);function I(D){for(var O=0,F=S.length;O<F;++O){var G=S[O],W=G.x-f||1e-6,q=G.y-L||1e-6,J=Math.sqrt(W*W+q*q),X=(z[O]-J)*P[O]*D/J;G.vx+=W*X,G.vy+=q*X}}function R(){if(!!S){var D,O=S.length;for(P=new Array(O),z=new Array(O),D=0;D<O;++D)z[D]=+_(S[D],D,S),P[D]=isNaN(z[D])?0:+k(S[D],D,S)}}return I.initialize=function(D){S=D,R()},I.strength=function(D){return arguments.length?(k=typeof D=="function"?D:a(+D),R(),I):k},I.radius=function(D){return arguments.length?(_=typeof D=="function"?D:a(+D),R(),I):_},I.x=function(D){return arguments.length?(f=+D,I):f},I.y=function(D){return arguments.length?(L=+D,I):L},I}function x(_){var f=a(.1),L,S,k;typeof _!="function"&&(_=a(_==null?0:+_));function P(I){for(var R=0,D=L.length,O;R<D;++R)O=L[R],O.vx+=(k[R]-O.x)*S[R]*I}function z(){if(!!L){var I,R=L.length;for(S=new Array(R),k=new Array(R),I=0;I<R;++I)S[I]=isNaN(k[I]=+_(L[I],I,L))?0:+f(L[I],I,L)}}return P.initialize=function(I){L=I,z()},P.strength=function(I){return arguments.length?(f=typeof I=="function"?I:a(+I),z(),P):f},P.x=function(I){return arguments.length?(_=typeof I=="function"?I:a(+I),z(),P):_},P}function T(_){var f=a(.1),L,S,k;typeof _!="function"&&(_=a(_==null?0:+_));function P(I){for(var R=0,D=L.length,O;R<D;++R)O=L[R],O.vy+=(k[R]-O.y)*S[R]*I}function z(){if(!!L){var I,R=L.length;for(S=new Array(R),k=new Array(R),I=0;I<R;++I)S[I]=isNaN(k[I]=+_(L[I],I,L))?0:+f(L[I],I,L)}}return P.initialize=function(I){L=I,z()},P.strength=function(I){return arguments.length?(f=typeof I=="function"?I:a(+I),z(),P):f},P.y=function(I){return arguments.length?(_=typeof I=="function"?I:a(+I),z(),P):_},P}d.forceCenter=o,d.forceCollide=s,d.forceLink=u,d.forceManyBody=m,d.forceRadial=M,d.forceSimulation=A,d.forceX=x,d.forceY=T,Object.defineProperty(d,"__esModule",{value:!0})})},{"d3-collection":108,"d3-dispatch":110,"d3-quadtree":118,"d3-timer":123}],112:[function(t,B,H){(function(d,l){typeof H=="object"&&typeof B!="undefined"?l(H):(d=typeof globalThis!="undefined"?globalThis:d||self,l(d.d3=d.d3||{}))})(this,function(d){function l(_){return Math.abs(_=Math.round(_))>=1e21?_.toLocaleString("en").replace(/,/g,""):_.toString(10)}function b(_,f){if((L=(_=f?_.toExponential(f-1):_.toExponential()).indexOf("e"))<0)return null;var L,S=_.slice(0,L);return[S.length>1?S[0]+S.slice(2):S,+_.slice(L+1)]}function w(_){return _=b(Math.abs(_)),_?_[1]:NaN}function e(_,f){return function(L,S){for(var k=L.length,P=[],z=0,I=_[0],R=0;k>0&&I>0&&(R+I+1>S&&(I=Math.max(1,S-R)),P.push(L.substring(k-=I,k+I)),!((R+=I+1)>S));)I=_[z=(z+1)%_.length];return P.reverse().join(f)}}function o(_){return function(f){return f.replace(/[0-9]/g,function(L){return _[+L]})}}var a=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function r(_){if(!(f=a.exec(_)))throw new Error("invalid format: "+_);var f;return new n({fill:f[1],align:f[2],sign:f[3],symbol:f[4],zero:f[5],width:f[6],comma:f[7],precision:f[8]&&f[8].slice(1),trim:f[9],type:f[10]})}r.prototype=n.prototype;function n(_){this.fill=_.fill===void 0?" ":_.fill+"",this.align=_.align===void 0?">":_.align+"",this.sign=_.sign===void 0?"-":_.sign+"",this.symbol=_.symbol===void 0?"":_.symbol+"",this.zero=!!_.zero,this.width=_.width===void 0?void 0:+_.width,this.comma=!!_.comma,this.precision=_.precision===void 0?void 0:+_.precision,this.trim=!!_.trim,this.type=_.type===void 0?"":_.type+""}n.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function c(_){e:for(var f=_.length,L=1,S=-1,k;L<f;++L)switch(_[L]){case".":S=k=L;break;case"0":S===0&&(S=L),k=L;break;default:if(!+_[L])break e;S>0&&(S=0);break}return S>0?_.slice(0,S)+_.slice(k+1):_}var s;function i(_,f){var L=b(_,f);if(!L)return _+"";var S=L[0],k=L[1],P=k-(s=Math.max(-8,Math.min(8,Math.floor(k/3)))*3)+1,z=S.length;return P===z?S:P>z?S+new Array(P-z+1).join("0"):P>0?S.slice(0,P)+"."+S.slice(P):"0."+new Array(1-P).join("0")+b(_,Math.max(0,f+P-1))[0]}function v(_,f){var L=b(_,f);if(!L)return _+"";var S=L[0],k=L[1];return k<0?"0."+new Array(-k).join("0")+S:S.length>k+1?S.slice(0,k+1)+"."+S.slice(k+1):S+new Array(k-S.length+2).join("0")}var u={"%":function(_,f){return(_*100).toFixed(f)},b:function(_){return Math.round(_).toString(2)},c:function(_){return _+""},d:l,e:function(_,f){return _.toExponential(f)},f:function(_,f){return _.toFixed(f)},g:function(_,f){return _.toPrecision(f)},o:function(_){return Math.round(_).toString(8)},p:function(_,f){return v(_*100,f)},r:v,s:i,X:function(_){return Math.round(_).toString(16).toUpperCase()},x:function(_){return Math.round(_).toString(16)}};function g(_){return _}var h=Array.prototype.map,y=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function p(_){var f=_.grouping===void 0||_.thousands===void 0?g:e(h.call(_.grouping,Number),_.thousands+""),L=_.currency===void 0?"":_.currency[0]+"",S=_.currency===void 0?"":_.currency[1]+"",k=_.decimal===void 0?".":_.decimal+"",P=_.numerals===void 0?g:o(h.call(_.numerals,String)),z=_.percent===void 0?"%":_.percent+"",I=_.minus===void 0?"-":_.minus+"",R=_.nan===void 0?"NaN":_.nan+"";function D(F){F=r(F);var G=F.fill,W=F.align,q=F.sign,J=F.symbol,X=F.zero,Z=F.width,se=F.comma,le=F.precision,oe=F.trim,U=F.type;U==="n"?(se=!0,U="g"):u[U]||(le===void 0&&(le=12),oe=!0,U="g"),(X||G==="0"&&W==="=")&&(X=!0,G="0",W="=");var V=J==="$"?L:J==="#"&&/[boxX]/.test(U)?"0"+U.toLowerCase():"",re=J==="$"?S:/[%p]/.test(U)?z:"",ee=u[U],j=/[defgprs%]/.test(U);le=le===void 0?6:/[gprs]/.test(U)?Math.max(1,Math.min(21,le)):Math.max(0,Math.min(20,le));function Q(ne){var ae=V,ie=re,ue,xe,he;if(U==="c")ie=ee(ne)+ie,ne="";else{ne=+ne;var ge=ne<0||1/ne<0;if(ne=isNaN(ne)?R:ee(Math.abs(ne),le),oe&&(ne=c(ne)),ge&&+ne==0&&q!=="+"&&(ge=!1),ae=(ge?q==="("?q:I:q==="-"||q==="("?"":q)+ae,ie=(U==="s"?y[8+s/3]:"")+ie+(ge&&q==="("?")":""),j){for(ue=-1,xe=ne.length;++ue<xe;)if(he=ne.charCodeAt(ue),48>he||he>57){ie=(he===46?k+ne.slice(ue+1):ne.slice(ue))+ie,ne=ne.slice(0,ue);break}}}se&&!X&&(ne=f(ne,1/0));var me=ae.length+ne.length+ie.length,ke=me<Z?new Array(Z-me+1).join(G):"";switch(se&&X&&(ne=f(ke+ne,ke.length?Z-ie.length:1/0),ke=""),W){case"<":ne=ae+ne+ie+ke;break;case"=":ne=ae+ke+ne+ie;break;case"^":ne=ke.slice(0,me=ke.length>>1)+ae+ne+ie+ke.slice(me);break;default:ne=ke+ae+ne+ie;break}return P(ne)}return Q.toString=function(){return F+""},Q}function O(F,G){var W=D((F=r(F),F.type="f",F)),q=Math.max(-8,Math.min(8,Math.floor(w(G)/3)))*3,J=Math.pow(10,-q),X=y[8+q/3];return function(Z){return W(J*Z)+X}}return{format:D,formatPrefix:O}}var A;m({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function m(_){return A=p(_),d.format=A.format,d.formatPrefix=A.formatPrefix,A}function M(_){return Math.max(0,-w(Math.abs(_)))}function x(_,f){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(w(f)/3)))*3-w(Math.abs(_)))}function T(_,f){return _=Math.abs(_),f=Math.abs(f)-_,Math.max(0,w(f)-w(_))+1}d.FormatSpecifier=n,d.formatDefaultLocale=m,d.formatLocale=p,d.formatSpecifier=r,d.precisionFixed=M,d.precisionPrefix=x,d.precisionRound=T,Object.defineProperty(d,"__esModule",{value:!0})})},{}],113:[function(t,B,H){(function(d,l){typeof H=="object"&&typeof B!="undefined"?l(H,t("d3-geo"),t("d3-array")):l(d.d3=d.d3||{},d.d3,d.d3)})(this,function(d,l,b){var w=Math.abs,e=Math.atan,o=Math.atan2,a=Math.cos,r=Math.exp,n=Math.floor,c=Math.log,s=Math.max,i=Math.min,v=Math.pow,u=Math.round,g=Math.sign||function(ze){return ze>0?1:ze<0?-1:0},h=Math.sin,y=Math.tan,p=1e-6,A=1e-12,m=Math.PI,M=m/2,x=m/4,T=Math.SQRT1_2,_=R(2),f=R(m),L=m*2,S=180/m,k=m/180;function P(ze){return ze?ze/Math.sin(ze):1}function z(ze){return ze>1?M:ze<-1?-M:Math.asin(ze)}function I(ze){return ze>1?0:ze<-1?m:Math.acos(ze)}function R(ze){return ze>0?Math.sqrt(ze):0}function D(ze){return ze=r(2*ze),(ze-1)/(ze+1)}function O(ze){return(r(ze)-r(-ze))/2}function F(ze){return(r(ze)+r(-ze))/2}function G(ze){return c(ze+R(ze*ze+1))}function W(ze){return c(ze+R(ze*ze-1))}function q(ze){var We=y(ze/2),nt=2*c(a(ze/2))/(We*We);function lt(_t,xt){var At=a(_t),qt=a(xt),sr=h(xt),Qt=qt*At,cr=-((1-Qt?c((1+Qt)/2)/(1-Qt):-.5)+nt/(1+Qt));return[cr*qt*h(_t),cr*sr]}return lt.invert=function(_t,xt){var At=R(_t*_t+xt*xt),qt=-ze/2,sr=50,Qt;if(!At)return[0,0];do{var cr=qt/2,kr=a(cr),Gr=h(cr),en=Gr/kr,_n=-c(w(kr));qt-=Qt=(2/en*_n-nt*en-At)/(-_n/(Gr*Gr)+1-nt/(2*kr*kr))*(kr<0?.7:1)}while(w(Qt)>p&&--sr>0);var Pn=h(qt);return[o(_t*Pn,At*a(qt)),z(xt*Pn/At)]},lt}function J(){var ze=M,We=l.geoProjectionMutator(q),nt=We(ze);return nt.radius=function(lt){return arguments.length?We(ze=lt*k):ze*S},nt.scale(179.976).clipAngle(147)}function X(ze,We){var nt=a(We),lt=P(I(nt*a(ze/=2)));return[2*nt*h(ze)*lt,h(We)*lt]}X.invert=function(ze,We){if(!(ze*ze+4*We*We>m*m+p)){var nt=ze,lt=We,_t=25;do{var xt=h(nt),At=h(nt/2),qt=a(nt/2),sr=h(lt),Qt=a(lt),cr=h(2*lt),kr=sr*sr,Gr=Qt*Qt,en=At*At,_n=1-Gr*qt*qt,Pn=_n?I(Qt*qt)*R(jn=1/_n):jn=0,jn,ma=2*Pn*Qt*At-ze,ba=Pn*sr-We,Za=jn*(Gr*en+Pn*Qt*qt*kr),Wa=jn*(.5*xt*cr-Pn*2*sr*At),ei=jn*.25*(cr*At-Pn*sr*Gr*xt),fi=jn*(kr*qt+Pn*en*Qt),oo=Wa*ei-fi*Za;if(!oo)break;var ri=(ba*Wa-ma*fi)/oo,Vi=(ma*ei-ba*Za)/oo;nt-=ri,lt-=Vi}while((w(ri)>p||w(Vi)>p)&&--_t>0);return[nt,lt]}};function Z(){return l.geoProjection(X).scale(152.63)}function se(ze){var We=h(ze),nt=a(ze),lt=ze>=0?1:-1,_t=y(lt*ze),xt=(1+We-nt)/2;function At(qt,sr){var Qt=a(sr),cr=a(qt/=2);return[(1+Qt)*h(qt),(lt*sr>-o(cr,_t)-.001?0:-lt*10)+xt+h(sr)*nt-(1+Qt)*We*cr]}return At.invert=function(qt,sr){var Qt=0,cr=0,kr=50;do{var Gr=a(Qt),en=h(Qt),_n=a(cr),Pn=h(cr),jn=1+_n,ma=jn*en-qt,ba=xt+Pn*nt-jn*We*Gr-sr,Za=jn*Gr/2,Wa=-en*Pn,ei=We*jn*en/2,fi=nt*_n+We*Gr*Pn,oo=Wa*ei-fi*Za,ri=(ba*Wa-ma*fi)/oo/2,Vi=(ma*ei-ba*Za)/oo;w(Vi)>2&&(Vi/=2),Qt-=ri,cr-=Vi}while((w(ri)>p||w(Vi)>p)&&--kr>0);return lt*cr>-o(a(Qt),_t)-.001?[Qt*2,cr]:null},At}function le(){var ze=20*k,We=ze>=0?1:-1,nt=y(We*ze),lt=l.geoProjectionMutator(se),_t=lt(ze),xt=_t.stream;return _t.parallel=function(At){return arguments.length?(nt=y((We=(ze=At*k)>=0?1:-1)*ze),lt(ze)):ze*S},_t.stream=function(At){var qt=_t.rotate(),sr=xt(At),Qt=(_t.rotate([0,0]),xt(At)),cr=_t.precision();return _t.rotate(qt),sr.sphere=function(){Qt.polygonStart(),Qt.lineStart();for(var kr=We*-180;We*kr<180;kr+=We*90)Qt.point(kr,We*90);if(ze)for(;We*(kr-=3*We*cr)>=-180;)Qt.point(kr,We*-o(a(kr*k/2),nt)*S);Qt.lineEnd(),Qt.polygonEnd()},sr},_t.scale(218.695).center([0,28.0974])}function oe(ze,We){var nt=y(We/2),lt=R(1-nt*nt),_t=1+lt*a(ze/=2),xt=h(ze)*lt/_t,At=nt/_t,qt=xt*xt,sr=At*At;return[4/3*xt*(3+qt-3*sr),4/3*At*(3+3*qt-sr)]}oe.invert=function(ze,We){if(ze*=3/8,We*=3/8,!ze&&w(We)>1)return null;var nt=ze*ze,lt=We*We,_t=1+nt+lt,xt=R((_t-R(_t*_t-4*We*We))/2),At=z(xt)/3,qt=xt?W(w(We/xt))/3:G(w(ze))/3,sr=a(At),Qt=F(qt),cr=Qt*Qt-sr*sr;return[g(ze)*2*o(O(qt)*sr,.25-cr),g(We)*2*o(Qt*h(At),.25+cr)]};function U(){return l.geoProjection(oe).scale(66.1603)}var V=R(8),re=c(1+_);function ee(ze,We){var nt=w(We);return nt<x?[ze,c(y(x+We/2))]:[ze*a(nt)*(2*_-1/h(nt)),g(We)*(2*_*(nt-x)-c(y(nt/2)))]}ee.invert=function(ze,We){if((xt=w(We))<re)return[ze,2*e(r(We))-M];var nt=x,lt=25,_t,xt;do{var At=a(nt/2),qt=y(nt/2);nt-=_t=(V*(nt-x)-c(qt)-xt)/(V-At*At/(2*qt))}while(w(_t)>A&&--lt>0);return[ze/(a(nt)*(V-1/h(nt))),g(We)*nt]};function j(){return l.geoProjection(ee).scale(112.314)}function Q(ze){var We=2*m/ze;function nt(lt,_t){var xt=l.geoAzimuthalEquidistantRaw(lt,_t);if(w(lt)>M){var At=o(xt[1],xt[0]),qt=R(xt[0]*xt[0]+xt[1]*xt[1]),sr=We*u((At-M)/We)+M,Qt=o(h(At-=sr),2-a(At));At=sr+z(m/qt*h(Qt))-Qt,xt[0]=qt*a(At),xt[1]=qt*h(At)}return xt}return nt.invert=function(lt,_t){var xt=R(lt*lt+_t*_t);if(xt>M){var At=o(_t,lt),qt=We*u((At-M)/We)+M,sr=At>qt?-1:1,Qt=xt*a(qt-At),cr=1/y(sr*I((Qt-m)/R(m*(m-2*Qt)+xt*xt)));At=qt+2*e((cr+sr*R(cr*cr-3))/3),lt=xt*a(At),_t=xt*h(At)}return l.geoAzimuthalEquidistantRaw.invert(lt,_t)},nt}function ne(){var ze=5,We=l.geoProjectionMutator(Q),nt=We(ze),lt=nt.stream,_t=.01,xt=-a(_t*k),At=h(_t*k);return nt.lobes=function(qt){return arguments.length?We(ze=+qt):ze},nt.stream=function(qt){var sr=nt.rotate(),Qt=lt(qt),cr=(nt.rotate([0,0]),lt(qt));return nt.rotate(sr),Qt.sphere=function(){cr.polygonStart(),cr.lineStart();for(var kr=0,Gr=360/ze,en=2*m/ze,_n=90-180/ze,Pn=M;kr<ze;++kr,_n-=Gr,Pn-=en)cr.point(o(At*a(Pn),xt)*S,z(At*h(Pn))*S),_n<-90?(cr.point(-90,-180-_n-_t),cr.point(-90,-180-_n+_t)):(cr.point(90,_n+_t),cr.point(90,_n-_t));cr.lineEnd(),cr.polygonEnd()},Qt},nt.scale(87.8076).center([0,17.1875]).clipAngle(180-.001)}function ae(ze,We){if(arguments.length<2&&(We=ze),We===1)return l.geoAzimuthalEqualAreaRaw;if(We===1/0)return ie;function nt(lt,_t){var xt=l.geoAzimuthalEqualAreaRaw(lt/We,_t);return xt[0]*=ze,xt}return nt.invert=function(lt,_t){var xt=l.geoAzimuthalEqualAreaRaw.invert(lt/ze,_t);return xt[0]*=We,xt},nt}function ie(ze,We){return[ze*a(We)/a(We/=2),2*h(We)]}ie.invert=function(ze,We){var nt=2*z(We/2);return[ze*a(nt/2)/a(nt),nt]};function ue(){var ze=2,We=l.geoProjectionMutator(ae),nt=We(ze);return nt.coefficient=function(lt){return arguments.length?We(ze=+lt):ze},nt.scale(169.529)}function xe(ze,We,nt){var lt=100,_t,xt,At;nt=nt===void 0?0:+nt,We=+We;do xt=ze(nt),At=ze(nt+p),xt===At&&(At=xt+p),nt-=_t=-1*p*(xt-We)/(xt-At);while(lt-- >0&&w(_t)>p);return lt<0?NaN:nt}function he(ze,We,nt){return We===void 0&&(We=40),nt===void 0&&(nt=A),function(lt,_t,xt,At){var qt,sr,Qt;xt=xt===void 0?0:+xt,At=At===void 0?0:+At;for(var cr=0;cr<We;cr++){var kr=ze(xt,At),Gr=kr[0]-lt,en=kr[1]-_t;if(w(Gr)<nt&&w(en)<nt)break;var _n=Gr*Gr+en*en;if(_n>qt){xt-=sr/=2,At-=Qt/=2;continue}qt=_n;var Pn=(xt>0?-1:1)*nt,jn=(At>0?-1:1)*nt,ma=ze(xt+Pn,At),ba=ze(xt,At+jn),Za=(ma[0]-kr[0])/Pn,Wa=(ma[1]-kr[1])/Pn,ei=(ba[0]-kr[0])/jn,fi=(ba[1]-kr[1])/jn,oo=fi*Za-Wa*ei,ri=(w(oo)<.5?.5:1)/oo;if(sr=(en*ei-Gr*fi)*ri,Qt=(Gr*Wa-en*Za)*ri,xt+=sr,At+=Qt,w(sr)<nt&&w(Qt)<nt)break}return[xt,At]}}function ge(){var ze=ae(1.68,2),We=1.4,nt=12;function lt(_t,xt){if(_t+xt<-We){var At=(_t-xt+1.6)*(_t+xt+We)/8;_t+=At,xt-=.8*At*h(xt+m/2)}var qt=ze(_t,xt),sr=(1-a(_t*xt))/nt;return qt[1]<0&&(qt[0]*=1+sr),qt[1]>0&&(qt[1]*=1+sr/1.5*qt[0]*qt[0]),qt}return lt.invert=he(lt),lt}function me(){return l.geoProjection(ge()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function ke(ze,We){var nt=ze*h(We),lt=30,_t;do We-=_t=(We+h(We)-nt)/(1+a(We));while(w(_t)>p&&--lt>0);return We/2}function Ae(ze,We,nt){function lt(_t,xt){return[ze*_t*a(xt=ke(nt,xt)),We*h(xt)]}return lt.invert=function(_t,xt){return xt=z(xt/We),[_t/(ze*a(xt)),z((2*xt+h(2*xt))/nt)]},lt}var Ne=Ae(_/M,_,m);function He(){return l.geoProjection(Ne).scale(169.529)}var Ge=2.00276,_e=1.11072;function De(ze,We){var nt=ke(m,We);return[Ge*ze/(1/a(We)+_e/a(nt)),(We+_*h(nt))/Ge]}De.invert=function(ze,We){var nt=Ge*We,lt=We<0?-x:x,_t=25,xt,At;do At=nt-_*h(lt),lt-=xt=(h(2*lt)+2*lt-m*h(At))/(2*a(2*lt)+2+m*a(At)*_*a(lt));while(w(xt)>p&&--_t>0);return At=nt-_*h(lt),[ze*(1/a(At)+_e/a(lt))/Ge,At]};function Ye(){return l.geoProjection(De).scale(160.857)}function qe(ze){var We=0,nt=l.geoProjectionMutator(ze),lt=nt(We);return lt.parallel=function(_t){return arguments.length?nt(We=_t*k):We*S},lt}function Ue(ze,We){return[ze*a(We),We]}Ue.invert=function(ze,We){return[ze/a(We),We]};function Ie(){return l.geoProjection(Ue).scale(152.63)}function Ve(ze){if(!ze)return Ue;var We=1/y(ze);function nt(lt,_t){var xt=We+ze-_t,At=xt&&lt*a(_t)/xt;return[xt*h(At),We-xt*a(At)]}return nt.invert=function(lt,_t){var xt=R(lt*lt+(_t=We-_t)*_t),At=We+ze-xt;return[xt/a(At)*o(lt,_t),At]},nt}function dt(){return qe(Ve).scale(123.082).center([0,26.1441]).parallel(45)}function Dt(ze){function We(nt,lt){var _t=M-lt,xt=_t&&nt*ze*h(_t)/_t;return[_t*h(xt)/ze,M-_t*a(xt)]}return We.invert=function(nt,lt){var _t=nt*ze,xt=M-lt,At=R(_t*_t+xt*xt),qt=o(_t,xt);return[(At?At/h(At):1)*qt/ze,M-At]},We}function Yt(){var ze=.5,We=l.geoProjectionMutator(Dt),nt=We(ze);return nt.fraction=function(lt){return arguments.length?We(ze=+lt):ze},nt.scale(158.837)}var kt=Ae(1,4/m,m);function Ft(){return l.geoProjection(kt).scale(152.63)}function Nt(ze,We,nt,lt,_t,xt){var At=a(xt),qt;if(w(ze)>1||w(xt)>1)qt=I(nt*_t+We*lt*At);else{var sr=h(ze/2),Qt=h(xt/2);qt=2*z(R(sr*sr+We*lt*Qt*Qt))}return w(qt)>p?[qt,o(lt*h(xt),We*_t-nt*lt*At)]:[0,0]}function Lt(ze,We,nt){return I((ze*ze+We*We-nt*nt)/(2*ze*We))}function St(ze){return ze-2*m*n((ze+m)/(2*m))}function it(ze,We,nt){for(var lt=[[ze[0],ze[1],h(ze[1]),a(ze[1])],[We[0],We[1],h(We[1]),a(We[1])],[nt[0],nt[1],h(nt[1]),a(nt[1])]],_t=lt[2],xt,At=0;At<3;++At,_t=xt)xt=lt[At],_t.v=Nt(xt[1]-_t[1],_t[3],_t[2],xt[3],xt[2],xt[0]-_t[0]),_t.point=[0,0];var qt=Lt(lt[0].v[0],lt[2].v[0],lt[1].v[0]),sr=Lt(lt[0].v[0],lt[1].v[0],lt[2].v[0]),Qt=m-qt;lt[2].point[1]=0,lt[0].point[0]=-(lt[1].point[0]=lt[0].v[0]/2);var cr=[lt[2].point[0]=lt[0].point[0]+lt[2].v[0]*a(qt),2*(lt[0].point[1]=lt[1].point[1]=lt[2].v[0]*h(qt))];function kr(Gr,en){var _n=h(en),Pn=a(en),jn=new Array(3),ma;for(ma=0;ma<3;++ma){var ba=lt[ma];if(jn[ma]=Nt(en-ba[1],ba[3],ba[2],Pn,_n,Gr-ba[0]),!jn[ma][0])return ba.point;jn[ma][1]=St(jn[ma][1]-ba.v[1])}var Za=cr.slice();for(ma=0;ma<3;++ma){var Wa=ma==2?0:ma+1,ei=Lt(lt[ma].v[0],jn[ma][0],jn[Wa][0]);jn[ma][1]<0&&(ei=-ei),ma?ma==1?(ei=sr-ei,Za[0]-=jn[ma][0]*a(ei),Za[1]-=jn[ma][0]*h(ei)):(ei=Qt-ei,Za[0]+=jn[ma][0]*a(ei),Za[1]+=jn[ma][0]*h(ei)):(Za[0]+=jn[ma][0]*a(ei),Za[1]-=jn[ma][0]*h(ei))}return Za[0]/=3,Za[1]/=3,Za}return kr}function ht(ze){return ze[0]*=k,ze[1]*=k,ze}function Qe(){return Ce([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function Ce(ze,We,nt){var lt=l.geoCentroid({type:"MultiPoint",coordinates:[ze,We,nt]}),_t=[-lt[0],-lt[1]],xt=l.geoRotation(_t),At=it(ht(xt(ze)),ht(xt(We)),ht(xt(nt)));At.invert=he(At);var qt=l.geoProjection(At).rotate(_t),sr=qt.center;return delete qt.rotate,qt.center=function(Qt){return arguments.length?sr(xt(Qt)):xt.invert(sr())},qt.clipAngle(90)}function je(ze,We){var nt=R(1-h(We));return[2/f*ze*nt,f*(1-nt)]}je.invert=function(ze,We){var nt=(nt=We/f-1)*nt;return[nt>0?ze*R(m/nt)/2:0,z(1-nt)]};function rt(){return l.geoProjection(je).scale(95.6464).center([0,30])}function ut(ze){var We=y(ze);function nt(lt,_t){return[lt,(lt?lt/h(lt):1)*(h(_t)*a(lt)-We*a(_t))]}return nt.invert=We?function(lt,_t){lt&&(_t*=h(lt)/lt);var xt=a(lt);return[lt,2*o(R(xt*xt+We*We-_t*_t)-xt,We-_t)]}:function(lt,_t){return[lt,z(lt?_t*y(lt)/lt:_t)]},nt}function Pt(){return qe(ut).scale(249.828).clipAngle(90)}var Tt=R(3);function Ot(ze,We){return[Tt*ze*(2*a(2*We/3)-1)/f,Tt*f*h(We/3)]}Ot.invert=function(ze,We){var nt=3*z(We/(Tt*f));return[f*ze/(Tt*(2*a(2*nt/3)-1)),nt]};function Kt(){return l.geoProjection(Ot).scale(156.19)}function Bt(ze){var We=a(ze);function nt(lt,_t){return[lt*We,h(_t)/We]}return nt.invert=function(lt,_t){return[lt/We,z(_t*We)]},nt}function Zt(){return qe(Bt).parallel(38.58).scale(195.044)}function Je(ze){var We=a(ze);function nt(lt,_t){return[lt*We,(1+We)*y(_t/2)]}return nt.invert=function(lt,_t){return[lt/We,e(_t/(1+We))*2]},nt}function pt(){return qe(Je).scale(124.75)}function Et(ze,We){var nt=R(8/(3*m));return[nt*ze*(1-w(We)/m),nt*We]}Et.invert=function(ze,We){var nt=R(8/(3*m)),lt=We/nt;return[ze/(nt*(1-w(lt)/m)),lt]};function ar(){return l.geoProjection(Et).scale(165.664)}function vr(ze,We){var nt=R(4-3*h(w(We)));return[2/R(6*m)*ze*nt,g(We)*R(2*m/3)*(2-nt)]}vr.invert=function(ze,We){var nt=2-w(We)/R(2*m/3);return[ze*R(6*m)/(2*nt),g(We)*z((4-nt*nt)/3)]};function ir(){return l.geoProjection(vr).scale(165.664)}function dr(ze,We){var nt=R(m*(4+m));return[2/nt*ze*(1+R(1-4*We*We/(m*m))),4/nt*We]}dr.invert=function(ze,We){var nt=R(m*(4+m))/2;return[ze*nt/(1+R(1-We*We*(4+m)/(4*m))),We*nt/2]};function Pr(){return l.geoProjection(dr).scale(180.739)}function Sr(ze,We){var nt=(2+M)*h(We);We/=2;for(var lt=0,_t=1/0;lt<10&&w(_t)>p;lt++){var xt=a(We);We-=_t=(We+h(We)*(xt+2)-nt)/(2*xt*(1+xt))}return[2/R(m*(4+m))*ze*(1+a(We)),2*R(m/(4+m))*h(We)]}Sr.invert=function(ze,We){var nt=We*R((4+m)/m)/2,lt=z(nt),_t=a(lt);return[ze/(2/R(m*(4+m))*(1+_t)),z((lt+nt*(_t+2))/(2+M))]};function tr(){return l.geoProjection(Sr).scale(180.739)}function Nr(ze,We){return[ze*(1+a(We))/R(2+m),2*We/R(2+m)]}Nr.invert=function(ze,We){var nt=R(2+m),lt=We*nt/2;return[nt*ze/(1+a(lt)),lt]};function et(){return l.geoProjection(Nr).scale(173.044)}function we(ze,We){for(var nt=(1+M)*h(We),lt=0,_t=1/0;lt<10&&w(_t)>p;lt++)We-=_t=(We+h(We)-nt)/(1+a(We));return nt=R(2+m),[ze*(1+a(We))/nt,2*We/nt]}we.invert=function(ze,We){var nt=1+M,lt=R(nt/2);return[ze*2*lt/(1+a(We*=lt)),z((We+h(We))/nt)]};function Me(){return l.geoProjection(we).scale(173.044)}var Re=3+2*_;function Xe(ze,We){var nt=h(ze/=2),lt=a(ze),_t=R(a(We)),xt=a(We/=2),At=h(We)/(xt+_*lt*_t),qt=R(2/(1+At*At)),sr=R((_*xt+(lt+nt)*_t)/(_*xt+(lt-nt)*_t));return[Re*(qt*(sr-1/sr)-2*c(sr)),Re*(qt*At*(sr+1/sr)-2*e(At))]}Xe.invert=function(ze,We){if(!(xt=oe.invert(ze/1.2,We*1.065)))return null;var nt=xt[0],lt=xt[1],_t=20,xt;ze/=Re,We/=Re;do{var At=nt/2,qt=lt/2,sr=h(At),Qt=a(At),cr=h(qt),kr=a(qt),Gr=a(lt),en=R(Gr),_n=cr/(kr+_*Qt*en),Pn=_n*_n,jn=R(2/(1+Pn)),ma=_*kr+(Qt+sr)*en,ba=_*kr+(Qt-sr)*en,Za=ma/ba,Wa=R(Za),ei=Wa-1/Wa,fi=Wa+1/Wa,oo=jn*ei-2*c(Wa)-ze,ri=jn*_n*fi-2*e(_n)-We,Vi=cr&&T*en*sr*Pn/cr,co=(_*Qt*kr+en)/(2*(kr+_*Qt*en)*(kr+_*Qt*en)*en),_o=-.5*_n*jn*jn*jn,xi=_o*Vi,Ai=_o*co,ms=(ms=2*kr+_*en*(Qt-sr))*ms*Wa,go=(_*Qt*kr*en+Gr)/ms,Io=-(_*sr*cr)/(en*ms),jo=ei*xi-2*go/Wa+jn*(go+go/Za),ce=ei*Ai-2*Io/Wa+jn*(Io+Io/Za),Te=_n*fi*xi-2*Vi/(1+Pn)+jn*fi*Vi+jn*_n*(go-go/Za),Le=_n*fi*Ai-2*co/(1+Pn)+jn*fi*co+jn*_n*(Io-Io/Za),Be=ce*Te-Le*jo;if(!Be)break;var Oe=(ri*ce-oo*Le)/Be,Ke=(oo*Te-ri*jo)/Be;nt-=Oe,lt=s(-M,i(M,lt-Ke))}while((w(Oe)>p||w(Ke)>p)&&--_t>0);return w(w(lt)-M)<p?[0,lt]:_t&&[nt,lt]};function $e(){return l.geoProjection(Xe).scale(62.5271)}var ot=a(35*k);function st(ze,We){var nt=y(We/2);return[ze*ot*R(1-nt*nt),(1+ot)*nt]}st.invert=function(ze,We){var nt=We/(1+ot);return[ze&&ze/(ot*R(1-nt*nt)),2*e(nt)]};function yt(){return l.geoProjection(st).scale(137.152)}function wt(ze,We){var nt=We/2,lt=a(nt);return[2*ze/f*a(We)*lt*lt,f*y(nt)]}wt.invert=function(ze,We){var nt=e(We/f),lt=a(nt),_t=2*nt;return[ze*f/2/(a(_t)*lt*lt),_t]};function Vt(){return l.geoProjection(wt).scale(135.264)}function gr(ze){var We=1-ze,nt=xt(m,0)[0]-xt(-m,0)[0],lt=xt(0,M)[1]-xt(0,-M)[1],_t=R(2*lt/nt);function xt(sr,Qt){var cr=a(Qt),kr=h(Qt);return[cr/(We+ze*cr)*sr,We*Qt+ze*kr]}function At(sr,Qt){var cr=xt(sr,Qt);return[cr[0]*_t,cr[1]/_t]}function qt(sr){return At(0,sr)[1]}return At.invert=function(sr,Qt){var cr=xe(qt,Qt),kr=sr/_t*(ze+We/a(cr));return[kr,cr]},At}function wr(){var ze=.5,We=l.geoProjectionMutator(gr),nt=We(ze);return nt.alpha=function(lt){return arguments.length?We(ze=+lt):ze},nt.scale(168.725)}function Lr(ze){return[ze[0]/2,z(y(ze[1]/2*k))*S]}function fr(ze){return[ze[0]*2,2*e(h(ze[1]*k))*S]}function Fr(ze){ze==null&&(ze=l.geoOrthographic);var We=ze(),nt=l.geoEquirectangular().scale(S).precision(0).clipAngle(null).translate([0,0]);function lt(xt){return We(Lr(xt))}We.invert&&(lt.invert=function(xt){return fr(We.invert(xt))}),lt.stream=function(xt){var At=We.stream(xt),qt=nt.stream({point:function(sr,Qt){At.point(sr/2,z(y(-Qt/2*k))*S)},lineStart:function(){At.lineStart()},lineEnd:function(){At.lineEnd()},polygonStart:function(){At.polygonStart()},polygonEnd:function(){At.polygonEnd()}});return qt.sphere=At.sphere,qt};function _t(xt){lt[xt]=function(){return arguments.length?(We[xt].apply(We,arguments),lt):We[xt]()}}return lt.rotate=function(xt){return arguments.length?(nt.rotate(xt),lt):nt.rotate()},lt.center=function(xt){return arguments.length?(We.center(Lr(xt)),lt):fr(We.center())},_t("angle"),_t("clipAngle"),_t("clipExtent"),_t("fitExtent"),_t("fitHeight"),_t("fitSize"),_t("fitWidth"),_t("scale"),_t("translate"),_t("precision"),lt.scale(249.5)}function nn(ze,We){var nt=2*m/We,lt=ze*ze;function _t(xt,At){var qt=l.geoAzimuthalEquidistantRaw(xt,At),sr=qt[0],Qt=qt[1],cr=sr*sr+Qt*Qt;if(cr>lt){var kr=R(cr),Gr=o(Qt,sr),en=nt*u(Gr/nt),_n=Gr-en,Pn=ze*a(_n),jn=(ze*h(_n)-_n*h(Pn))/(M-Pn),ma=yr(_n,jn),ba=(m-ze)/_r(ma,Pn,m);sr=kr;var Za=50,Wa;do sr-=Wa=(ze+_r(ma,Pn,sr)*ba-kr)/(ma(sr)*ba);while(w(Wa)>p&&--Za>0);Qt=_n*h(sr),sr<M&&(Qt-=jn*(sr-M));var ei=h(en),fi=a(en);qt[0]=sr*fi-Qt*ei,qt[1]=sr*ei+Qt*fi}return qt}return _t.invert=function(xt,At){var qt=xt*xt+At*At;if(qt>lt){var sr=R(qt),Qt=o(At,xt),cr=nt*u(Qt/nt),kr=Qt-cr;xt=sr*a(kr),At=sr*h(kr);for(var Gr=xt-M,en=h(xt),_n=At/en,Pn=xt<M?1/0:0,jn=10;;){var ma=ze*h(_n),ba=ze*a(_n),Za=h(ba),Wa=M-ba,ei=(ma-_n*Za)/Wa,fi=yr(_n,ei);if(w(Pn)<A||!--jn)break;_n-=Pn=(_n*en-ei*Gr-At)/(en-Gr*2*(Wa*(ba+_n*ma*a(ba)-Za)-ma*(ma-_n*Za))/(Wa*Wa))}sr=ze+_r(fi,ba,xt)*(m-ze)/_r(fi,ba,m),Qt=cr+_n,xt=sr*a(Qt),At=sr*h(Qt)}return l.geoAzimuthalEquidistantRaw.invert(xt,At)},_t}function yr(ze,We){return function(nt){var lt=ze*a(nt);return nt<M&&(lt-=We),R(1+lt*lt)}}function _r(ze,We,nt){for(var lt=50,_t=(nt-We)/lt,xt=ze(We)+ze(nt),At=1,qt=We;At<lt;++At)xt+=2*ze(qt+=_t);return xt*.5*_t}function dn(){var ze=6,We=30*k,nt=a(We),lt=h(We),_t=l.geoProjectionMutator(nn),xt=_t(We,ze),At=xt.stream,qt=.01,sr=-a(qt*k),Qt=h(qt*k);return xt.radius=function(cr){return arguments.length?(nt=a(We=cr*k),lt=h(We),_t(We,ze)):We*S},xt.lobes=function(cr){return arguments.length?_t(We,ze=+cr):ze},xt.stream=function(cr){var kr=xt.rotate(),Gr=At(cr),en=(xt.rotate([0,0]),At(cr));return xt.rotate(kr),Gr.sphere=function(){en.polygonStart(),en.lineStart();for(var _n=0,Pn=2*m/ze,jn=0;_n<ze;++_n,jn-=Pn)en.point(o(Qt*a(jn),sr)*S,z(Qt*h(jn))*S),en.point(o(lt*a(jn-Pn/2),nt)*S,z(lt*h(jn-Pn/2))*S);en.lineEnd(),en.polygonEnd()},Gr},xt.rotate([90,-40]).scale(91.7095).clipAngle(180-.001)}function Yr(ze,We,nt,lt,_t,xt,At,qt){arguments.length<8&&(qt=0);function sr(Qt,cr){if(!cr)return[ze*Qt/m,0];var kr=cr*cr,Gr=ze+kr*(We+kr*(nt+kr*lt)),en=cr*(_t-1+kr*(xt-qt+kr*At)),_n=(Gr*Gr+en*en)/(2*en),Pn=Qt*z(Gr/_n)/m;return[_n*h(Pn),cr*(1+kr*qt)+_n*(1-a(Pn))]}return sr.invert=function(Qt,cr){var kr=m*Qt/ze,Gr=cr,en,_n,Pn=50;do{var jn=Gr*Gr,ma=ze+jn*(We+jn*(nt+jn*lt)),ba=Gr*(_t-1+jn*(xt-qt+jn*At)),Za=ma*ma+ba*ba,Wa=2*ba,ei=Za/Wa,fi=ei*ei,oo=z(ma/ei)/m,ri=kr*oo,Vi=ma*ma,co=(2*We+jn*(4*nt+jn*6*lt))*Gr,_o=_t+jn*(3*xt+jn*5*At),xi=2*(ma*co+ba*(_o-1)),Ai=2*(_o-1),ms=(xi*Wa-Za*Ai)/(Wa*Wa),go=a(ri),Io=h(ri),jo=ei*go,ce=ei*Io,Te=kr/m*(1/R(1-Vi/fi))*(co*ei-ma*ms)/fi,Le=ce-Qt,Be=Gr*(1+jn*qt)+ei-jo-cr,Oe=ms*Io+jo*Te,Ke=jo*oo,bt=1+ms-(ms*go-ce*Te),vt=ce*oo,Ct=Oe*vt-bt*Ke;if(!Ct)break;kr-=en=(Be*Oe-Le*bt)/Ct,Gr-=_n=(Le*vt-Be*Ke)/Ct}while((w(en)>p||w(_n)>p)&&--Pn>0);return[kr,Gr]},sr}var Ar=Yr(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function an(){return l.geoProjection(Ar).scale(149.995)}var rn=Yr(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function Zr(){return l.geoProjection(rn).scale(153.93)}var at=Yr(5/6*m,-.62636,-.0344,0,1.3493,-.05524,0,.045);function zt(){return l.geoProjection(at).scale(130.945)}function er(ze,We){var nt=ze*ze,lt=We*We;return[ze*(1-.162388*lt)*(.87-952426e-9*nt*nt),We*(1+lt/12)]}er.invert=function(ze,We){var nt=ze,lt=We,_t=50,xt;do{var At=lt*lt;lt-=xt=(lt*(1+At/12)-We)/(1+At/4)}while(w(xt)>p&&--_t>0);_t=50,ze/=1-.162388*At;do{var qt=(qt=nt*nt)*qt;nt-=xt=(nt*(.87-952426e-9*qt)-ze)/(.87-.00476213*qt)}while(w(xt)>p&&--_t>0);return[nt,lt]};function hr(){return l.geoProjection(er).scale(131.747)}var Vr=Yr(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Rr(){return l.geoProjection(Vr).scale(131.087)}function Er(ze){var We=ze(M,0)[0]-ze(-M,0)[0];function nt(lt,_t){var xt=lt>0?-.5:.5,At=ze(lt+xt*m,_t);return At[0]-=xt*We,At}return ze.invert&&(nt.invert=function(lt,_t){var xt=lt>0?-.5:.5,At=ze.invert(lt+xt*We,_t),qt=At[0]-xt*m;return qt<-m?qt+=2*m:qt>m&&(qt-=2*m),At[0]=qt,At}),nt}function xr(ze,We){var nt=g(ze),lt=g(We),_t=a(We),xt=a(ze)*_t,At=h(ze)*_t,qt=h(lt*We);ze=w(o(At,qt)),We=z(xt),w(ze-M)>p&&(ze%=M);var sr=Wr(ze>m/4?M-ze:ze,We);return ze>m/4&&(qt=sr[0],sr[0]=-sr[1],sr[1]=-qt),sr[0]*=nt,sr[1]*=-lt,sr}xr.invert=function(ze,We){w(ze)>1&&(ze=g(ze)*2-ze),w(We)>1&&(We=g(We)*2-We);var nt=g(ze),lt=g(We),_t=-nt*ze,xt=-lt*We,At=xt/_t<1,qt=Rn(At?xt:_t,At?_t:xt),sr=qt[0],Qt=qt[1],cr=a(Qt);return At&&(sr=-M-sr),[nt*(o(h(sr)*cr,-h(Qt))+m),lt*z(a(sr)*cr)]};function Wr(ze,We){if(We===M)return[0,0];var nt=h(We),lt=nt*nt,_t=lt*lt,xt=1+_t,At=1+3*_t,qt=1-_t,sr=z(1/R(xt)),Qt=qt+lt*xt*sr,cr=(1-nt)/Qt,kr=R(cr),Gr=cr*xt,en=R(Gr),_n=kr*qt,Pn,jn;if(ze===0)return[0,-(_n+lt*en)];var ma=a(We),ba=1/ma,Za=2*nt*ma,Wa=(-3*lt+sr*At)*Za,ei=(-Qt*ma-(1-nt)*Wa)/(Qt*Qt),fi=.5*ei/kr,oo=qt*fi-2*lt*kr*Za,ri=lt*xt*ei+cr*At*Za,Vi=-ba*Za,co=-ba*ri,_o=-2*ba*oo,xi=4*ze/m,Ai;if(ze>.222*m||We<m/4&&ze>.175*m){if(Pn=(_n+lt*R(Gr*(1+_t)-_n*_n))/(1+_t),ze>m/4)return[Pn,Pn];var ms=Pn,go=.5*Pn;Pn=.5*(go+ms),jn=50;do{var Io=R(Gr-Pn*Pn),jo=Pn*(_o+Vi*Io)+co*z(Pn/en)-xi;if(!jo)break;jo<0?go=Pn:ms=Pn,Pn=.5*(go+ms)}while(w(ms-go)>p&&--jn>0)}else{Pn=p,jn=25;do{var ce=Pn*Pn,Te=R(Gr-ce),Le=_o+Vi*Te,Be=Pn*Le+co*z(Pn/en)-xi,Oe=Le+(co-Vi*ce)/Te;Pn-=Ai=Te?Be/Oe:0}while(w(Ai)>p&&--jn>0)}return[Pn,-_n-lt*R(Gr-Pn*Pn)]}function Rn(ze,We){for(var nt=0,lt=1,_t=.5,xt=50;;){var At=_t*_t,qt=R(_t),sr=z(1/R(1+At)),Qt=1-At+_t*(1+At)*sr,cr=(1-qt)/Qt,kr=R(cr),Gr=cr*(1+At),en=kr*(1-At),_n=Gr-ze*ze,Pn=R(_n),jn=We+en+_t*Pn;if(w(lt-nt)<A||--xt===0||jn===0)break;jn>0?nt=_t:lt=_t,_t=.5*(nt+lt)}if(!xt)return null;var ma=z(qt),ba=a(ma),Za=1/ba,Wa=2*qt*ba,ei=(-3*_t+sr*(1+3*At))*Wa,fi=(-Qt*ba-(1-qt)*ei)/(Qt*Qt),oo=.5*fi/kr,ri=(1-At)*oo-2*_t*kr*Wa,Vi=-2*Za*ri,co=-Za*Wa,_o=-Za*(_t*(1+At)*fi+cr*(1+3*At)*Wa);return[m/4*(ze*(Vi+co*Pn)+_o*z(ze/R(Gr))),ma]}function En(){return l.geoProjection(Er(xr)).scale(239.75)}function ea(ze,We,nt){var lt,_t,xt;return ze?(lt=ia(ze,nt),We?(_t=ia(We,1-nt),xt=_t[1]*_t[1]+nt*lt[0]*lt[0]*_t[0]*_t[0],[[lt[0]*_t[2]/xt,lt[1]*lt[2]*_t[0]*_t[1]/xt],[lt[1]*_t[1]/xt,-lt[0]*lt[2]*_t[0]*_t[2]/xt],[lt[2]*_t[1]*_t[2]/xt,-nt*lt[0]*lt[1]*_t[0]/xt]]):[[lt[0],0],[lt[1],0],[lt[2],0]]):(_t=ia(We,1-nt),[[0,_t[0]/_t[1]],[1/_t[1],0],[_t[2]/_t[1],0]])}function ia(ze,We){var nt,lt,_t,xt,At;if(We<p)return xt=h(ze),lt=a(ze),nt=We*(ze-xt*lt)/4,[xt-nt*lt,lt+nt*xt,1-We*xt*xt/2,ze-nt];if(We>=1-p)return nt=(1-We)/4,lt=F(ze),xt=D(ze),_t=1/lt,At=lt*O(ze),[xt+nt*(At-ze)/(lt*lt),_t-nt*xt*_t*(At-ze),_t+nt*xt*_t*(At+ze),2*e(r(ze))-M+nt*(At-ze)/lt];var qt=[1,0,0,0,0,0,0,0,0],sr=[R(We),0,0,0,0,0,0,0,0],Qt=0;for(lt=R(1-We),At=1;w(sr[Qt]/qt[Qt])>p&&Qt<8;)nt=qt[Qt++],sr[Qt]=(nt-lt)/2,qt[Qt]=(nt+lt)/2,lt=R(nt*lt),At*=2;_t=At*qt[Qt]*ze;do xt=sr[Qt]*h(lt=_t)/qt[Qt],_t=(z(xt)+_t)/2;while(--Qt);return[h(_t),xt=a(_t),xt/a(_t-lt),_t]}function Aa(ze,We,nt){var lt=w(ze),_t=w(We),xt=O(_t);if(lt){var At=1/h(lt),qt=1/(y(lt)*y(lt)),sr=-(qt+nt*(xt*xt*At*At)-1+nt),Qt=(nt-1)*qt,cr=(-sr+R(sr*sr-4*Qt))/2;return[ya(e(1/R(cr)),nt)*g(ze),ya(e(R((cr/qt-1)/nt)),1-nt)*g(We)]}return[0,ya(e(xt),1-nt)*g(We)]}function ya(ze,We){if(!We)return ze;if(We===1)return c(y(ze/2+x));for(var nt=1,lt=R(1-We),_t=R(We),xt=0;w(_t)>p;xt++){if(ze%m){var At=e(lt*y(ze)/nt);At<0&&(At+=m),ze+=At+~~(ze/m)*m}else ze+=ze;_t=(nt+lt)/2,lt=R(nt*lt),_t=((nt=_t)-lt)/2}return ze/(v(2,xt)*nt)}function pr(ze,We){var nt=(_-1)/(_+1),lt=R(1-nt*nt),_t=ya(M,lt*lt),xt=-1,At=c(y(m/4+w(We)/2)),qt=r(xt*At)/R(nt),sr=vn(qt*a(xt*ze),qt*h(xt*ze)),Qt=Aa(sr[0],sr[1],lt*lt);return[-Qt[1],(We>=0?1:-1)*(.5*_t-Qt[0])]}function vn(ze,We){var nt=ze*ze,lt=We+1,_t=1-nt-We*We;return[.5*((ze>=0?M:-M)-o(_t,2*ze)),-.25*c(_t*_t+4*nt)+.5*c(lt*lt+nt)]}function $r(ze,We){var nt=We[0]*We[0]+We[1]*We[1];return[(ze[0]*We[0]+ze[1]*We[1])/nt,(ze[1]*We[0]-ze[0]*We[1])/nt]}pr.invert=function(ze,We){var nt=(_-1)/(_+1),lt=R(1-nt*nt),_t=ya(M,lt*lt),xt=-1,At=ea(.5*_t-We,-ze,lt*lt),qt=$r(At[0],At[1]),sr=o(qt[1],qt[0])/xt;return[sr,2*e(r(.5/xt*c(nt*qt[0]*qt[0]+nt*qt[1]*qt[1])))-M]};function Fn(){return l.geoProjection(Er(pr)).scale(151.496)}function Bn(ze){var We=h(ze),nt=a(ze),lt=ca(ze);lt.invert=ca(-ze);function _t(xt,At){var qt=lt(xt,At);xt=qt[0],At=qt[1];var sr=h(At),Qt=a(At),cr=a(xt),kr=I(We*sr+nt*Qt*cr),Gr=h(kr),en=w(Gr)>p?kr/Gr:1;return[en*nt*h(xt),(w(xt)>M?en:-en)*(We*Qt-nt*sr*cr)]}return _t.invert=function(xt,At){var qt=R(xt*xt+At*At),sr=-h(qt),Qt=a(qt),cr=qt*Qt,kr=-At*sr,Gr=qt*We,en=R(cr*cr+kr*kr-Gr*Gr),_n=o(cr*Gr+kr*en,kr*Gr-cr*en),Pn=(qt>M?-1:1)*o(xt*sr,qt*a(_n)*Qt+At*h(_n)*sr);return lt.invert(Pn,_n)},_t}function ca(ze){var We=h(ze),nt=a(ze);return function(lt,_t){var xt=a(_t),At=a(lt)*xt,qt=h(lt)*xt,sr=h(_t);return[o(qt,At*nt-sr*We),z(sr*nt+At*We)]}}function ta(){var ze=0,We=l.geoProjectionMutator(Bn),nt=We(ze),lt=nt.rotate,_t=nt.stream,xt=l.geoCircle();return nt.parallel=function(At){if(!arguments.length)return ze*S;var qt=nt.rotate();return We(ze=At*k).rotate(qt)},nt.rotate=function(At){return arguments.length?(lt.call(nt,[At[0],At[1]-ze*S]),xt.center([-At[0],-At[1]]),nt):(At=lt.call(nt),At[1]+=ze*S,At)},nt.stream=function(At){return At=_t(At),At.sphere=function(){At.polygonStart();var qt=.01,sr=xt.radius(90-qt)().coordinates[0],Qt=sr.length-1,cr=-1,kr;for(At.lineStart();++cr<Qt;)At.point((kr=sr[cr])[0],kr[1]);for(At.lineEnd(),sr=xt.radius(90+qt)().coordinates[0],Qt=sr.length-1,At.lineStart();--cr>=0;)At.point((kr=sr[cr])[0],kr[1]);At.lineEnd(),At.polygonEnd()},At},nt.scale(79.4187).parallel(45).clipAngle(180-.001)}var Un=3,la=z(1-1/Un)*S,da=Bt(0);function ur(ze){var We=la*k,nt=je(m,We)[0]-je(-m,We)[0],lt=da(0,We)[1],_t=je(0,We)[1],xt=f-_t,At=L/ze,qt=4/L,sr=lt+xt*xt*4/L;function Qt(cr,kr){var Gr,en=w(kr);if(en>We){var _n=i(ze-1,s(0,n((cr+m)/At)));cr+=m*(ze-1)/ze-_n*At,Gr=je(cr,en),Gr[0]=Gr[0]*L/nt-L*(ze-1)/(2*ze)+_n*L/ze,Gr[1]=lt+(Gr[1]-_t)*4*xt/L,kr<0&&(Gr[1]=-Gr[1])}else Gr=da(cr,kr);return Gr[0]*=qt,Gr[1]/=sr,Gr}return Qt.invert=function(cr,kr){cr/=qt,kr*=sr;var Gr=w(kr);if(Gr>lt){var en=i(ze-1,s(0,n((cr+m)/At)));cr=(cr+m*(ze-1)/ze-en*At)*nt/L;var _n=je.invert(cr,.25*(Gr-lt)*L/xt+_t);return _n[0]-=m*(ze-1)/ze-en*At,kr<0&&(_n[1]=-_n[1]),_n}return da.invert(cr,kr)},Qt}function Dr(ze,We){return[ze,We&1?90-p:la]}function sn(ze,We){return[ze,We&1?-90+p:-la]}function tn(ze){return[ze[0]*(1-p),ze[1]]}function mn(ze){var We=[].concat(b.range(-180,180+ze/2,ze).map(Dr),b.range(180,-180-ze/2,-ze).map(sn));return{type:"Polygon",coordinates:[ze===180?We.map(tn):We]}}function wn(){var ze=4,We=l.geoProjectionMutator(ur),nt=We(ze),lt=nt.stream;return nt.lobes=function(_t){return arguments.length?We(ze=+_t):ze},nt.stream=function(_t){var xt=nt.rotate(),At=lt(_t),qt=(nt.rotate([0,0]),lt(_t));return nt.rotate(xt),At.sphere=function(){l.geoStream(mn(180/ze),qt)},At},nt.scale(239.75)}function gn(ze){var We=1+ze,nt=h(1/We),lt=z(nt),_t=2*R(m/(xt=m+4*lt*We)),xt,At=.5*_t*(We+R(ze*(2+ze))),qt=ze*ze,sr=We*We;function Qt(cr,kr){var Gr=1-h(kr),en,_n;if(Gr&&Gr<2){var Pn=M-kr,jn=25,ma;do{var ba=h(Pn),Za=a(Pn),Wa=lt+o(ba,We-Za),ei=1+sr-2*We*Za;Pn-=ma=(Pn-qt*lt-We*ba+ei*Wa-.5*Gr*xt)/(2*We*ba*Wa)}while(w(ma)>A&&--jn>0);en=_t*R(ei),_n=cr*Wa/m}else en=_t*(ze+Gr),_n=cr*lt/m;return[en*h(_n),At-en*a(_n)]}return Qt.invert=function(cr,kr){var Gr=cr*cr+(kr-=At)*kr,en=(1+sr-Gr/(_t*_t))/(2*We),_n=I(en),Pn=h(_n),jn=lt+o(Pn,We-en);return[z(cr/R(Gr))*m/jn,z(1-2*(_n-qt*lt-We*Pn+(1+sr-2*We*en)*jn)/xt)]},Qt}function mr(){var ze=1,We=l.geoProjectionMutator(gn),nt=We(ze);return nt.ratio=function(lt){return arguments.length?We(ze=+lt):ze},nt.scale(167.774).center([0,18.67])}var rr=.7109889596207567,zr=.0528035274542;function jr(ze,We){return We>-rr?(ze=Ne(ze,We),ze[1]+=zr,ze):Ue(ze,We)}jr.invert=function(ze,We){return We>-rr?Ne.invert(ze,We-zr):Ue.invert(ze,We)};function Sn(){return l.geoProjection(jr).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function On(ze,We){return w(We)>rr?(ze=Ne(ze,We),ze[1]-=We>0?zr:-zr,ze):Ue(ze,We)}On.invert=function(ze,We){return w(We)>rr?Ne.invert(ze,We+(We>0?zr:-zr)):Ue.invert(ze,We)};function aa(){return l.geoProjection(On).scale(152.63)}function Zn(ze,We,nt,lt){var _t=R(4*m/(2*nt+(1+ze-We/2)*h(2*nt)+(ze+We)/2*h(4*nt)+We/2*h(6*nt))),xt=R(lt*h(nt)*R((1+ze*a(2*nt)+We*a(4*nt))/(1+ze+We))),At=nt*sr(1);function qt(kr){return R(1+ze*a(2*kr)+We*a(4*kr))}function sr(kr){var Gr=kr*nt;return(2*Gr+(1+ze-We/2)*h(2*Gr)+(ze+We)/2*h(4*Gr)+We/2*h(6*Gr))/nt}function Qt(kr){return qt(kr)*h(kr)}var cr=function(kr,Gr){var en=nt*xe(sr,At*h(Gr)/nt,Gr/m);isNaN(en)&&(en=nt*g(Gr));var _n=_t*qt(en);return[_n*xt*kr/m*a(en),_n/xt*h(en)]};return cr.invert=function(kr,Gr){var en=xe(Qt,Gr*xt/_t);return[kr*m/(a(en)*_t*xt*qt(en)),z(nt*sr(en/nt)/At)]},nt===0&&(_t=R(lt/m),cr=function(kr,Gr){return[kr*_t,h(Gr)/_t]},cr.invert=function(kr,Gr){return[kr/_t,z(Gr*_t)]}),cr}function Hn(){var ze=1,We=0,nt=45*k,lt=2,_t=l.geoProjectionMutator(Zn),xt=_t(ze,We,nt,lt);return xt.a=function(At){return arguments.length?_t(ze=+At,We,nt,lt):ze},xt.b=function(At){return arguments.length?_t(ze,We=+At,nt,lt):We},xt.psiMax=function(At){return arguments.length?_t(ze,We,nt=+At*k,lt):nt*S},xt.ratio=function(At){return arguments.length?_t(ze,We,nt,lt=+At):lt},xt.scale(180.739)}function pn(ze,We,nt,lt,_t,xt,At,qt,sr,Qt,cr){if(cr.nanEncountered)return NaN;var kr,Gr,en,_n,Pn,jn,ma,ba,Za,Wa;if(kr=nt-We,Gr=ze(We+kr*.25),en=ze(nt-kr*.25),isNaN(Gr)){cr.nanEncountered=!0;return}if(isNaN(en)){cr.nanEncountered=!0;return}return _n=kr*(lt+4*Gr+_t)/12,Pn=kr*(_t+4*en+xt)/12,jn=_n+Pn,Wa=(jn-At)/15,Qt>sr?(cr.maxDepthCount++,jn+Wa):Math.abs(Wa)<qt?jn+Wa:(ma=We+kr*.5,ba=pn(ze,We,ma,lt,Gr,_t,_n,qt*.5,sr,Qt+1,cr),isNaN(ba)?(cr.nanEncountered=!0,NaN):(Za=pn(ze,ma,nt,_t,en,xt,Pn,qt*.5,sr,Qt+1,cr),isNaN(Za)?(cr.nanEncountered=!0,NaN):ba+Za))}function In(ze,We,nt,lt,_t){var xt={maxDepthCount:0,nanEncountered:!1};lt===void 0&&(lt=1e-8),_t===void 0&&(_t=20);var At=ze(We),qt=ze(.5*(We+nt)),sr=ze(nt),Qt=(At+4*qt+sr)*(nt-We)/6,cr=pn(ze,We,nt,At,qt,sr,Qt,lt,_t,1,xt);return cr}function Yn(ze,We,nt){function lt(en){return ze+(1-ze)*v(1-v(en,We),1/We)}function _t(en){return In(lt,0,en,1e-4)}for(var xt=1/_t(1),At=1e3,qt=(1+1e-8)*xt,sr=[],Qt=0;Qt<=At;Qt++)sr.push(_t(Qt/At)*qt);function cr(en){var _n=0,Pn=At,jn=At>>1;do sr[jn]>en?Pn=jn:_n=jn,jn=_n+Pn>>1;while(jn>_n);var ma=sr[jn+1]-sr[jn];return ma&&(ma=(en-sr[jn+1])/ma),(jn+1+ma)/At}var kr=2*cr(1)/m*xt/nt,Gr=function(en,_n){var Pn=cr(w(h(_n))),jn=lt(Pn)*en;return Pn/=kr,[jn,_n>=0?Pn:-Pn]};return Gr.invert=function(en,_n){var Pn;return _n*=kr,w(_n)<1&&(Pn=g(_n)*z(_t(w(_n))*xt)),[en/lt(w(_n)),Pn]},Gr}function ua(){var ze=0,We=2.5,nt=1.183136,lt=l.geoProjectionMutator(Yn),_t=lt(ze,We,nt);return _t.alpha=function(xt){return arguments.length?lt(ze=+xt,We,nt):ze},_t.k=function(xt){return arguments.length?lt(ze,We=+xt,nt):We},_t.gamma=function(xt){return arguments.length?lt(ze,We,nt=+xt):nt},_t.scale(152.63)}function Ha(ze,We){return w(ze[0]-We[0])<p&&w(ze[1]-We[1])<p}function ka(ze,We){for(var nt=-1,lt=ze.length,_t=ze[0],xt,At,qt,sr=[];++nt<lt;){xt=ze[nt],At=(xt[0]-_t[0])/We,qt=(xt[1]-_t[1])/We;for(var Qt=0;Qt<We;++Qt)sr.push([_t[0]+Qt*At,_t[1]+Qt*qt]);_t=xt}return sr.push(xt),sr}function Ys(ze){var We=[],nt,lt,_t,xt,At,qt,sr,Qt=ze[0].length;for(sr=0;sr<Qt;++sr)nt=ze[0][sr],lt=nt[0][0],_t=nt[0][1],xt=nt[1][1],At=nt[2][0],qt=nt[2][1],We.push(ka([[lt+p,_t+p],[lt+p,xt-p],[At-p,xt-p],[At-p,qt+p]],30));for(sr=ze[1].length-1;sr>=0;--sr)nt=ze[1][sr],lt=nt[0][0],_t=nt[0][1],xt=nt[1][1],At=nt[2][0],qt=nt[2][1],We.push(ka([[At-p,qt-p],[At-p,xt+p],[lt+p,xt+p],[lt+p,_t-p]],30));return{type:"Polygon",coordinates:[b.merge(We)]}}function No(ze,We,nt){var lt,_t;function xt(sr,Qt){for(var cr=Qt<0?-1:1,kr=We[+(Qt<0)],Gr=0,en=kr.length-1;Gr<en&&sr>kr[Gr][2][0];++Gr);var _n=ze(sr-kr[Gr][1][0],Qt);return _n[0]+=ze(kr[Gr][1][0],cr*Qt>cr*kr[Gr][0][1]?kr[Gr][0][1]:Qt)[0],_n}nt?xt.invert=nt(xt):ze.invert&&(xt.invert=function(sr,Qt){for(var cr=_t[+(Qt<0)],kr=We[+(Qt<0)],Gr=0,en=cr.length;Gr<en;++Gr){var _n=cr[Gr];if(_n[0][0]<=sr&&sr<_n[1][0]&&_n[0][1]<=Qt&&Qt<_n[1][1]){var Pn=ze.invert(sr-ze(kr[Gr][1][0],0)[0],Qt);return Pn[0]+=kr[Gr][1][0],Ha(xt(Pn[0],Pn[1]),[sr,Qt])?Pn:null}}});var At=l.geoProjection(xt),qt=At.stream;return At.stream=function(sr){var Qt=At.rotate(),cr=qt(sr),kr=(At.rotate([0,0]),qt(sr));return At.rotate(Qt),cr.sphere=function(){l.geoStream(lt,kr)},cr},At.lobes=function(sr){return arguments.length?(lt=Ys(sr),We=sr.map(function(Qt){return Qt.map(function(cr){return[[cr[0][0]*k,cr[0][1]*k],[cr[1][0]*k,cr[1][1]*k],[cr[2][0]*k,cr[2][1]*k]]})}),_t=We.map(function(Qt){return Qt.map(function(cr){var kr=ze(cr[0][0],cr[0][1])[0],Gr=ze(cr[2][0],cr[2][1])[0],en=ze(cr[1][0],cr[0][1])[1],_n=ze(cr[1][0],cr[1][1])[1],Pn;return en>_n&&(Pn=en,en=_n,_n=Pn),[[kr,en],[Gr,_n]]})}),At):We.map(function(Qt){return Qt.map(function(cr){return[[cr[0][0]*S,cr[0][1]*S],[cr[1][0]*S,cr[1][1]*S],[cr[2][0]*S,cr[2][1]*S]]})})},We!=null&&At.lobes(We),At}var es=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Ls(){return No(De,es).scale(160.857)}var eo=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Pi(){return No(On,eo).scale(152.63)}var Ws=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Xs(){return No(Ne,Ws).scale(169.529)}var ts=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Ml(){return No(Ne,ts).scale(169.529).rotate([20,0])}var Nl=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function xu(){return No(jr,Nl,he).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var hi=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function ol(){return No(Ue,hi).scale(152.63).rotate([-20,0])}function js(ze,We){return[3/L*ze*R(m*m/3-We*We),We]}js.invert=function(ze,We){return[L/3*ze/R(m*m/3-We*We),We]};function Ui(){return l.geoProjection(js).scale(158.837)}function So(ze){function We(nt,lt){if(w(w(lt)-M)<p)return[0,lt<0?-2:2];var _t=h(lt),xt=v((1+_t)/(1-_t),ze/2),At=.5*(xt+1/xt)+a(nt*=ze);return[2*h(nt)/At,(xt-1/xt)/At]}return We.invert=function(nt,lt){var _t=w(lt);if(w(_t-2)<p)return nt?null:[0,g(lt)*M];if(_t>2)return null;nt/=2,lt/=2;var xt=nt*nt,At=lt*lt,qt=2*lt/(1+xt+At);return qt=v((1+qt)/(1-qt),1/ze),[o(2*nt,1-xt-At)/ze,z((qt-1)/(qt+1))]},We}function Bl(){var ze=.5,We=l.geoProjectionMutator(So),nt=We(ze);return nt.spacing=function(lt){return arguments.length?We(ze=+lt):ze},nt.scale(124.75)}var _s=m/_;function Di(ze,We){return[ze*(1+R(a(We)))/2,We/(a(We/2)*a(ze/6))]}Di.invert=function(ze,We){var nt=w(ze),lt=w(We),_t=p,xt=M;lt<_s?xt*=lt/_s:_t+=6*I(_s/lt);for(var At=0;At<25;At++){var qt=h(xt),sr=R(a(xt)),Qt=h(xt/2),cr=a(xt/2),kr=h(_t/6),Gr=a(_t/6),en=.5*_t*(1+sr)-nt,_n=xt/(cr*Gr)-lt,Pn=sr?-.25*_t*qt/sr:0,jn=.5*(1+sr),ma=(1+.5*xt*Qt/cr)/(cr*Gr),ba=xt/cr*(kr/6)/(Gr*Gr),Za=Pn*ba-ma*jn,Wa=(en*ba-_n*jn)/Za,ei=(_n*Pn-en*ma)/Za;if(xt-=Wa,_t-=ei,w(Wa)<p&&w(ei)<p)break}return[ze<0?-_t:_t,We<0?-xt:xt]};function Sl(){return l.geoProjection(Di).scale(97.2672)}function Ji(ze,We){var nt=ze*ze,lt=We*We;return[ze*(.975534+lt*(-.119161+nt*-.0143059+lt*-.0547009)),We*(1.00384+nt*(.0802894+lt*-.02855+nt*199025e-9)+lt*(.0998909+lt*-.0491032))]}Ji.invert=function(ze,We){var nt=g(ze)*m,lt=We/2,_t=50;do{var xt=nt*nt,At=lt*lt,qt=nt*lt,sr=nt*(.975534+At*(-.119161+xt*-.0143059+At*-.0547009))-ze,Qt=lt*(1.00384+xt*(.0802894+At*-.02855+xt*199025e-9)+At*(.0998909+At*-.0491032))-We,cr=.975534-At*(.119161+3*xt*.0143059+At*.0547009),kr=-qt*(2*.119161+4*.0547009*At+2*.0143059*xt),Gr=qt*(2*.0802894+4*199025e-9*xt+2*-.02855*At),en=1.00384+xt*(.0802894+199025e-9*xt)+At*(3*(.0998909-.02855*xt)-5*.0491032*At),_n=kr*Gr-en*cr,Pn=(Qt*kr-sr*en)/_n,jn=(sr*Gr-Qt*cr)/_n;nt-=Pn,lt-=jn}while((w(Pn)>p||w(jn)>p)&&--_t>0);return _t&&[nt,lt]};function Fi(){return l.geoProjection(Ji).scale(139.98)}function io(ze,We){return[h(ze)/a(We),y(We)*a(ze)]}io.invert=function(ze,We){var nt=ze*ze,lt=We*We,_t=lt+1,xt=nt+_t,At=ze?T*R((xt-R(xt*xt-4*nt))/nt):1/R(_t);return[z(ze*At),g(We)*I(At)]};function Qi(){return l.geoProjection(io).scale(144.049).clipAngle(90-.001)}function us(ze){var We=a(ze),nt=y(x+ze/2);function lt(_t,xt){var At=xt-ze,qt=w(At)<p?_t*We:w(qt=x+xt/2)<p||w(w(qt)-M)<p?0:_t*At/c(y(qt)/nt);return[qt,At]}return lt.invert=function(_t,xt){var At,qt=xt+ze;return[w(xt)<p?_t/We:w(At=x+qt/2)<p||w(w(At)-M)<p?0:_t*c(y(At)/nt)/xt,qt]},lt}function sl(){return qe(us).parallel(40).scale(158.837)}function Bu(ze,We){return[ze,1.25*c(y(x+.4*We))]}Bu.invert=function(ze,We){return[ze,2.5*e(r(.8*We))-.625*m]};function rs(){return l.geoProjection(Bu).scale(108.318)}function Uu(ze){var We=ze.length-1;function nt(lt,_t){for(var xt=a(_t),At=2/(1+xt*a(lt)),qt=At*xt*h(lt),sr=At*h(_t),Qt=We,cr=ze[Qt],kr=cr[0],Gr=cr[1],en;--Qt>=0;)cr=ze[Qt],kr=cr[0]+qt*(en=kr)-sr*Gr,Gr=cr[1]+qt*Gr+sr*en;return kr=qt*(en=kr)-sr*Gr,Gr=qt*Gr+sr*en,[kr,Gr]}return nt.invert=function(lt,_t){var xt=20,At=lt,qt=_t;do{for(var sr=We,Qt=ze[sr],cr=Qt[0],kr=Qt[1],Gr=0,en=0,_n;--sr>=0;)Qt=ze[sr],Gr=cr+At*(_n=Gr)-qt*en,en=kr+At*en+qt*_n,cr=Qt[0]+At*(_n=cr)-qt*kr,kr=Qt[1]+At*kr+qt*_n;Gr=cr+At*(_n=Gr)-qt*en,en=kr+At*en+qt*_n,cr=At*(_n=cr)-qt*kr-lt,kr=At*kr+qt*_n-_t;var Pn=Gr*Gr+en*en,jn,ma;At-=jn=(cr*Gr+kr*en)/Pn,qt-=ma=(kr*Gr-cr*en)/Pn}while(w(jn)+w(ma)>p*p&&--xt>0);if(xt){var ba=R(At*At+qt*qt),Za=2*e(ba*.5),Wa=h(Za);return[o(At*Wa,ba*a(Za)),ba?z(qt*Wa/ba):0]}},nt}var Zs=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],ko=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],ff=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],Ks=[[.9245,0],[0,0],[.01943,0]],Ps=[[.721316,0],[0,0],[-.00881625,-.00617325]];function nu(){return Ds(Zs,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function cf(){return Ds(ko,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function hf(){return Ds(ff,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function ll(){return Ds(Ks,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function au(){return Ds(Ps,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function Ds(ze,We){var nt=l.geoProjection(Uu(ze)).rotate(We).clipAngle(90),lt=l.geoRotation(We),_t=nt.center;return delete nt.rotate,nt.center=function(xt){return arguments.length?_t(lt(xt)):lt.invert(_t())},nt}var bu=R(6),kl=R(7);function _u(ze,We){var nt=z(7*h(We)/(3*bu));return[bu*ze*(2*a(2*nt/3)-1)/kl,9*h(nt/3)/kl]}_u.invert=function(ze,We){var nt=3*z(We*kl/9);return[ze*kl/(bu*(2*a(2*nt/3)-1)),z(h(nt)*3*bu/7)]};function Hu(){return l.geoProjection(_u).scale(164.859)}function iu(ze,We){for(var nt=(1+T)*h(We),lt=We,_t=0,xt;_t<25&&(lt-=xt=(h(lt/2)+h(lt)-nt)/(.5*a(lt/2)+a(lt)),!(w(xt)<p));_t++);return[ze*(1+2*a(lt)/a(lt/2))/(3*_),2*R(3)*h(lt/2)/R(2+_)]}iu.invert=function(ze,We){var nt=We*R(2+_)/(2*R(3)),lt=2*z(nt);return[3*_*ze/(1+2*a(lt)/a(lt/2)),z((nt+h(lt))/(1+T))]};function vf(){return l.geoProjection(iu).scale(188.209)}function ul(ze,We){for(var nt=R(6/(4+m)),lt=(1+m/4)*h(We),_t=We/2,xt=0,At;xt<25&&(_t-=At=(_t/2+h(_t)-lt)/(.5+a(_t)),!(w(At)<p));xt++);return[nt*(.5+a(_t))*ze/1.5,nt*_t]}ul.invert=function(ze,We){var nt=R(6/(4+m)),lt=We/nt;return w(w(lt)-M)<p&&(lt=lt<0?-M:M),[1.5*ze/(nt*(.5+a(lt))),z((lt/2+h(lt))/(1+m/4))]};function wu(){return l.geoProjection(ul).scale(166.518)}function ou(ze,We){var nt=We*We,lt=nt*nt,_t=nt*lt;return[ze*(.84719-.13063*nt+_t*_t*(-.04515+.05494*nt-.02326*lt+.00331*_t)),We*(1.01183+lt*lt*(-.02625+.01926*nt-.00396*lt))]}ou.invert=function(ze,We){var nt=We,lt=25,_t,xt,At,qt;do xt=nt*nt,At=xt*xt,nt-=_t=(nt*(1.01183+At*At*(-.02625+.01926*xt-.00396*At))-We)/(1.01183+At*At*(9*-.02625+11*.01926*xt+13*-.00396*At));while(w(_t)>A&&--lt>0);return xt=nt*nt,At=xt*xt,qt=xt*At,[ze/(.84719-.13063*xt+qt*qt*(-.04515+.05494*xt-.02326*At+.00331*qt)),nt]};function ws(){return l.geoProjection(ou).scale(175.295)}function Ul(ze,We){return[ze*(1+a(We))/2,2*(We-y(We/2))]}Ul.invert=function(ze,We){for(var nt=We/2,lt=0,_t=1/0;lt<10&&w(_t)>p;++lt){var xt=a(We/2);We-=_t=(We-y(We/2)-nt)/(1-.5/(xt*xt))}return[2*ze/(1+a(We)),We]};function Tu(){return l.geoProjection(Ul).scale(152.63)}var Vu=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Gu(){return No(ae(1/0),Vu).rotate([20,0]).scale(152.63)}function su(ze,We){var nt=h(We),lt=a(We),_t=g(ze);if(ze===0||w(We)===M)return[0,We];if(We===0)return[ze,0];if(w(ze)===M)return[ze*lt,M*nt];var xt=m/(2*ze)-2*ze/m,At=2*We/m,qt=(1-At*At)/(nt-At),sr=xt*xt,Qt=qt*qt,cr=1+sr/Qt,kr=1+Qt/sr,Gr=(xt*nt/qt-xt/2)/cr,en=(Qt*nt/sr+qt/2)/kr,_n=Gr*Gr+lt*lt/cr,Pn=en*en-(Qt*nt*nt/sr+qt*nt-1)/kr;return[M*(Gr+R(_n)*_t),M*(en+R(Pn<0?0:Pn)*g(-We*xt)*_t)]}su.invert=function(ze,We){ze/=M,We/=M;var nt=ze*ze,lt=We*We,_t=nt+lt,xt=m*m;return[ze?(_t-1+R((1-_t)*(1-_t)+4*nt))/(2*ze)*M:0,xe(function(At){return _t*(m*h(At)-2*At)*m+4*At*At*(We-h(At))+2*m*At-xt*We},0)]};function pf(){return l.geoProjection(su).scale(127.267)}var Yu=1.0148,ns=.23185,El=-.14499,Cl=.02406,Au=Yu,Ts=5*ns,Eo=7*El,lu=9*Cl,Rs=1.790857183;function Is(ze,We){var nt=We*We;return[ze,We*(Yu+nt*nt*(ns+nt*(El+Cl*nt)))]}Is.invert=function(ze,We){We>Rs?We=Rs:We<-Rs&&(We=-Rs);var nt=We,lt;do{var _t=nt*nt;nt-=lt=(nt*(Yu+_t*_t*(ns+_t*(El+Cl*_t)))-We)/(Au+_t*_t*(Ts+_t*(Eo+lu*_t)))}while(w(lt)>p);return[ze,nt]};function lo(){return l.geoProjection(Is).scale(139.319)}function Hl(ze,We){if(w(We)<p)return[ze,0];var nt=y(We),lt=ze*h(We);return[h(lt)/nt,We+(1-a(lt))/nt]}Hl.invert=function(ze,We){if(w(We)<p)return[ze,0];var nt=ze*ze+We*We,lt=We*.5,_t=10,xt;do{var At=y(lt),qt=1/a(lt),sr=nt-2*We*lt+lt*lt;lt-=xt=(At*sr+2*(lt-We))/(2+sr*qt*qt+2*(lt-We)*At)}while(w(xt)>p&&--_t>0);return At=y(lt),[(w(We)<w(lt+1/At)?z(ze*At):g(We)*g(ze)*(I(w(ze*At))+M))/h(lt),lt]};function Vl(){return l.geoProjection(Hl).scale(103.74)}function fl(ze,We){var nt=Ll(ze[1],ze[0]),lt=Ll(We[1],We[0]),_t=Yl(nt,lt),xt=uu(nt)/uu(lt);return Gl([1,0,ze[0][0],0,1,ze[0][1]],Gl([xt,0,0,0,xt,0],Gl([a(_t),h(_t),0,-h(_t),a(_t),0],[1,0,-We[0][0],0,1,-We[0][1]])))}function As(ze){var We=1/(ze[0]*ze[4]-ze[1]*ze[3]);return[We*ze[4],-We*ze[1],We*(ze[1]*ze[5]-ze[2]*ze[4]),-We*ze[3],We*ze[0],We*(ze[2]*ze[3]-ze[0]*ze[5])]}function Gl(ze,We){return[ze[0]*We[0]+ze[1]*We[3],ze[0]*We[1]+ze[1]*We[4],ze[0]*We[2]+ze[1]*We[5]+ze[2],ze[3]*We[0]+ze[4]*We[3],ze[3]*We[1]+ze[4]*We[4],ze[3]*We[2]+ze[4]*We[5]+ze[5]]}function Ll(ze,We){return[ze[0]-We[0],ze[1]-We[1]]}function uu(ze){return R(ze[0]*ze[0]+ze[1]*ze[1])}function Yl(ze,We){return o(ze[0]*We[1]-ze[1]*We[0],ze[0]*We[0]+ze[1]*We[1])}function cl(ze,We,nt){lt(ze,{transform:null});function lt(Qt,cr){if(Qt.edges=Mu(Qt.face),cr.face){var kr=Qt.shared=zf(Qt.face,cr.face),Gr=fl(kr.map(cr.project),kr.map(Qt.project));Qt.transform=cr.transform?Gl(cr.transform,Gr):Gr;for(var en=cr.edges,_n=0,Pn=en.length;_n<Pn;++_n)fs(kr[0],en[_n][1])&&fs(kr[1],en[_n][0])&&(en[_n]=Qt),fs(kr[0],en[_n][0])&&fs(kr[1],en[_n][1])&&(en[_n]=Qt);for(en=Qt.edges,_n=0,Pn=en.length;_n<Pn;++_n)fs(kr[0],en[_n][0])&&fs(kr[1],en[_n][1])&&(en[_n]=cr),fs(kr[0],en[_n][1])&&fs(kr[1],en[_n][0])&&(en[_n]=cr)}else Qt.transform=cr.transform;return Qt.children&&Qt.children.forEach(function(jn){lt(jn,Qt)}),Qt}function _t(Qt,cr){var kr=We(Qt,cr),Gr=kr.project([Qt*S,cr*S]),en;return(en=kr.transform)?[en[0]*Gr[0]+en[1]*Gr[1]+en[2],-(en[3]*Gr[0]+en[4]*Gr[1]+en[5])]:(Gr[1]=-Gr[1],Gr)}Pl(ze)&&(_t.invert=function(Qt,cr){var kr=xt(ze,[Qt,-cr]);return kr&&(kr[0]*=k,kr[1]*=k,kr)});function xt(Qt,cr){var kr=Qt.project.invert,Gr=Qt.transform,en=cr;if(Gr&&(Gr=As(Gr),en=[Gr[0]*en[0]+Gr[1]*en[1]+Gr[2],Gr[3]*en[0]+Gr[4]*en[1]+Gr[5]]),kr&&Qt===At(_n=kr(en)))return _n;for(var _n,Pn=Qt.children,jn=0,ma=Pn&&Pn.length;jn<ma;++jn)if(_n=xt(Pn[jn],cr))return _n}function At(Qt){return We(Qt[0]*k,Qt[1]*k)}var qt=l.geoProjection(_t),sr=qt.stream;return qt.stream=function(Qt){var cr=qt.rotate(),kr=sr(Qt),Gr=(qt.rotate([0,0]),sr(Qt));return qt.rotate(cr),kr.sphere=function(){Gr.polygonStart(),Gr.lineStart(),df(Gr,ze),Gr.lineEnd(),Gr.polygonEnd()},kr},qt.angle(nt==null?-30:nt*S)}function df(ze,We,nt){var lt,_t=We.edges,xt=_t.length,At,qt={type:"MultiPoint",coordinates:We.face},sr=We.face.filter(function(Pn){return w(Pn[1])!==90}),Qt=l.geoBounds({type:"MultiPoint",coordinates:sr}),cr=!1,kr=-1,Gr=Qt[1][0]-Qt[0][0],en=Gr===180||Gr===360?[(Qt[0][0]+Qt[1][0])/2,(Qt[0][1]+Qt[1][1])/2]:l.geoCentroid(qt);if(nt)for(;++kr<xt&&_t[kr]!==nt;);++kr;for(var _n=0;_n<xt;++_n)At=_t[(_n+kr)%xt],Array.isArray(At)?(cr||(ze.point((lt=l.geoInterpolate(At[0],en)(p))[0],lt[1]),cr=!0),ze.point((lt=l.geoInterpolate(At[1],en)(p))[0],lt[1])):(cr=!1,At!==nt&&df(ze,At,We))}function fs(ze,We){return ze&&We&&ze[0]===We[0]&&ze[1]===We[1]}function zf(ze,We){for(var nt,lt,_t=ze.length,xt=null,At=0;At<_t;++At){nt=ze[At];for(var qt=We.length;--qt>=0;)if(lt=We[qt],nt[0]===lt[0]&&nt[1]===lt[1]){if(xt)return[xt,nt];xt=nt}}}function Mu(ze){for(var We=ze.length,nt=[],lt=ze[We-1],_t=0;_t<We;++_t)nt.push([lt,lt=ze[_t]]);return nt}function Pl(ze){return ze.project.invert||ze.children&&ze.children.some(Pl)}var Wl=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],hl=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(ze){return ze.map(function(We){return Wl[We]})});function Xl(ze){ze=ze||function(nt){var lt=l.geoCentroid({type:"MultiPoint",coordinates:nt});return l.geoGnomonic().scale(1).translate([0,0]).rotate([-lt[0],-lt[1]])};var We=hl.map(function(nt){return{face:nt,project:ze(nt)}});return[-1,0,0,1,0,1,4,5].forEach(function(nt,lt){var _t=We[nt];_t&&(_t.children||(_t.children=[])).push(We[lt])}),cl(We[0],function(nt,lt){return We[nt<-m/2?lt<0?6:4:nt<0?lt<0?2:0:nt<m/2?lt<0?3:1:lt<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var Wu=2/R(3);function Xu(ze,We){var nt=je(ze,We);return[nt[0]*Wu,nt[1]]}Xu.invert=function(ze,We){return je.invert(ze/Wu,We)};function Ff(ze){ze=ze||function(nt){var lt=l.geoCentroid({type:"MultiPoint",coordinates:nt});return l.geoProjection(Xu).translate([0,0]).scale(1).rotate(lt[1]>0?[-lt[0],0]:[180-lt[0],180])};var We=hl.map(function(nt){return{face:nt,project:ze(nt)}});return[-1,0,0,1,0,1,4,5].forEach(function(nt,lt){var _t=We[nt];_t&&(_t.children||(_t.children=[])).push(We[lt])}),cl(We[0],function(nt,lt){return We[nt<-m/2?lt<0?6:4:nt<0?lt<0?2:0:nt<m/2?lt<0?3:1:lt<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function Ri(ze){ze=ze||function(At){var qt=At.length===6?l.geoCentroid({type:"MultiPoint",coordinates:At}):At[0];return l.geoGnomonic().scale(1).translate([0,0]).rotate([-qt[0],-qt[1]])};var We=hl.map(function(At){for(var qt=At.map(cs),sr=qt.length,Qt=qt[sr-1],cr,kr=[],Gr=0;Gr<sr;++Gr)cr=qt[Gr],kr.push(as([Qt[0]*.9486832980505138+cr[0]*.31622776601683794,Qt[1]*.9486832980505138+cr[1]*.31622776601683794,Qt[2]*.9486832980505138+cr[2]*.31622776601683794]),as([cr[0]*.9486832980505138+Qt[0]*.31622776601683794,cr[1]*.9486832980505138+Qt[1]*.31622776601683794,cr[2]*.9486832980505138+Qt[2]*.31622776601683794])),Qt=cr;return kr}),nt=[],lt=[-1,0,0,1,0,1,4,5];We.forEach(function(At,qt){for(var sr=hl[qt],Qt=sr.length,cr=nt[qt]=[],kr=0;kr<Qt;++kr)We.push([sr[kr],At[(kr*2+2)%(2*Qt)],At[(kr*2+1)%(2*Qt)]]),lt.push(qt),cr.push(vl(cs(At[(kr*2+2)%(2*Qt)]),cs(At[(kr*2+1)%(2*Qt)])))});var _t=We.map(function(At){return{project:ze(At),face:At}});lt.forEach(function(At,qt){var sr=_t[At];sr&&(sr.children||(sr.children=[])).push(_t[qt])});function xt(At,qt){var sr=a(qt),Qt=[sr*a(At),sr*h(At),h(qt)],cr=At<-m/2?qt<0?6:4:At<0?qt<0?2:0:At<m/2?qt<0?3:1:qt<0?7:5,kr=nt[cr];return _t[Dl(kr[0],Qt)<0?8+3*cr:Dl(kr[1],Qt)<0?8+3*cr+1:Dl(kr[2],Qt)<0?8+3*cr+2:cr]}return cl(_t[0],xt).angle(-30).scale(110.625).center([0,45])}function Dl(ze,We){for(var nt=0,lt=ze.length,_t=0;nt<lt;++nt)_t+=ze[nt]*We[nt];return _t}function vl(ze,We){return[ze[1]*We[2]-ze[2]*We[1],ze[2]*We[0]-ze[0]*We[2],ze[0]*We[1]-ze[1]*We[0]]}function as(ze){return[o(ze[1],ze[0])*S,z(s(-1,i(1,ze[2])))*S]}function cs(ze){var We=ze[0]*k,nt=ze[1]*k,lt=a(nt);return[lt*a(We),lt*h(We),h(nt)]}function jl(){}function uo(ze){if((nt=ze.length)<4)return!1;for(var We=0,nt,lt=ze[nt-1][1]*ze[0][0]-ze[nt-1][0]*ze[0][1];++We<nt;)lt+=ze[We-1][1]*ze[We][0]-ze[We-1][0]*ze[We][1];return lt<=0}function ju(ze,We){for(var nt=We[0],lt=We[1],_t=!1,xt=0,At=ze.length,qt=At-1;xt<At;qt=xt++){var sr=ze[xt],Qt=sr[0],cr=sr[1],kr=ze[qt],Gr=kr[0],en=kr[1];cr>lt^en>lt&&nt<(Gr-Qt)*(lt-cr)/(en-cr)+Qt&&(_t=!_t)}return _t}function hs(ze,We){var nt=We.stream,lt;if(!nt)throw new Error("invalid projection");switch(ze&&ze.type){case"Feature":lt=Qs;break;case"FeatureCollection":lt=Js;break;default:lt=vs;break}return lt(ze,nt)}function Js(ze,We){return{type:"FeatureCollection",features:ze.features.map(function(nt){return Qs(nt,We)})}}function Qs(ze,We){return{type:"Feature",id:ze.id,properties:ze.properties,geometry:vs(ze.geometry,We)}}function zs(ze,We){return{type:"GeometryCollection",geometries:ze.geometries.map(function(nt){return vs(nt,We)})}}function vs(ze,We){if(!ze)return null;if(ze.type==="GeometryCollection")return zs(ze,We);var nt;switch(ze.type){case"Point":nt=ps;break;case"MultiPoint":nt=ps;break;case"LineString":nt=Zu;break;case"MultiLineString":nt=Zu;break;case"Polygon":nt=fu;break;case"MultiPolygon":nt=fu;break;case"Sphere":nt=fu;break;default:return null}return l.geoStream(ze,We(nt)),nt.result()}var Hi=[],Co=[],ps={point:function(ze,We){Hi.push([ze,We])},result:function(){var ze=Hi.length?Hi.length<2?{type:"Point",coordinates:Hi[0]}:{type:"MultiPoint",coordinates:Hi}:null;return Hi=[],ze}},Zu={lineStart:jl,point:function(ze,We){Hi.push([ze,We])},lineEnd:function(){Hi.length&&(Co.push(Hi),Hi=[])},result:function(){var ze=Co.length?Co.length<2?{type:"LineString",coordinates:Co[0]}:{type:"MultiLineString",coordinates:Co}:null;return Co=[],ze}},fu={polygonStart:jl,lineStart:jl,point:function(ze,We){Hi.push([ze,We])},lineEnd:function(){var ze=Hi.length;if(ze){do Hi.push(Hi[0].slice());while(++ze<4);Co.push(Hi),Hi=[]}},polygonEnd:jl,result:function(){if(!Co.length)return null;var ze=[],We=[];return Co.forEach(function(nt){uo(nt)?ze.push([nt]):We.push(nt)}),We.forEach(function(nt){var lt=nt[0];ze.some(function(_t){if(ju(_t[0],lt))return _t.push(nt),!0})||ze.push([nt])}),Co=[],ze.length?ze.length>1?{type:"MultiPolygon",coordinates:ze}:{type:"Polygon",coordinates:ze[0]}:null}};function Ku(ze){var We=ze(M,0)[0]-ze(-M,0)[0];function nt(lt,_t){var xt=w(lt)<M,At=ze(xt?lt:lt>0?lt-m:lt+m,_t),qt=(At[0]-At[1])*T,sr=(At[0]+At[1])*T;if(xt)return[qt,sr];var Qt=We*T,cr=qt>0^sr>0?-1:1;return[cr*qt-g(sr)*Qt,cr*sr-g(qt)*Qt]}return ze.invert&&(nt.invert=function(lt,_t){var xt=(lt+_t)*T,At=(_t-lt)*T,qt=w(xt)<.5*We&&w(At)<.5*We;if(!qt){var sr=We*T,Qt=xt>0^At>0?-1:1,cr=-Qt*lt+(At>0?1:-1)*sr,kr=-Qt*_t+(xt>0?1:-1)*sr;xt=(-cr-kr)*T,At=(cr-kr)*T}var Gr=ze.invert(xt,At);return qt||(Gr[0]+=xt>0?m:-m),Gr}),l.geoProjection(nt).rotate([-90,-90,45]).clipAngle(180-.001)}function mt(){return Ku(xr).scale(176.423)}function It(){return Ku(pr).scale(111.48)}function nr(ze,We){if(!(0<=(We=+We)&&We<=20))throw new Error("invalid digits");function nt(Qt){var cr=Qt.length,kr=2,Gr=new Array(cr);for(Gr[0]=+Qt[0].toFixed(We),Gr[1]=+Qt[1].toFixed(We);kr<cr;)Gr[kr]=Qt[kr],++kr;return Gr}function lt(Qt){return Qt.map(nt)}function _t(Qt){for(var cr=nt(Qt[0]),kr=[cr],Gr=1;Gr<Qt.length;Gr++){var en=nt(Qt[Gr]);(en.length>2||en[0]!=cr[0]||en[1]!=cr[1])&&(kr.push(en),cr=en)}return kr.length===1&&Qt.length>1&&kr.push(nt(Qt[Qt.length-1])),kr}function xt(Qt){return Qt.map(_t)}function At(Qt){if(Qt==null)return Qt;var cr;switch(Qt.type){case"GeometryCollection":cr={type:"GeometryCollection",geometries:Qt.geometries.map(At)};break;case"Point":cr={type:"Point",coordinates:nt(Qt.coordinates)};break;case"MultiPoint":cr={type:Qt.type,coordinates:lt(Qt.coordinates)};break;case"LineString":cr={type:Qt.type,coordinates:_t(Qt.coordinates)};break;case"MultiLineString":case"Polygon":cr={type:Qt.type,coordinates:xt(Qt.coordinates)};break;case"MultiPolygon":cr={type:"MultiPolygon",coordinates:Qt.coordinates.map(xt)};break;default:return Qt}return Qt.bbox!=null&&(cr.bbox=Qt.bbox),cr}function qt(Qt){var cr={type:"Feature",properties:Qt.properties,geometry:At(Qt.geometry)};return Qt.id!=null&&(cr.id=Qt.id),Qt.bbox!=null&&(cr.bbox=Qt.bbox),cr}if(ze!=null)switch(ze.type){case"Feature":return qt(ze);case"FeatureCollection":{var sr={type:"FeatureCollection",features:ze.features.map(qt)};return ze.bbox!=null&&(sr.bbox=ze.bbox),sr}default:return At(ze)}return ze}function Jt(ze){var We=h(ze);function nt(lt,_t){var xt=We?y(lt*We/2)/We:lt/2;if(!_t)return[2*xt,-ze];var At=2*e(xt*h(_t)),qt=1/y(_t);return[h(At)*qt,_t+(1-a(At))*qt-ze]}return nt.invert=function(lt,_t){if(w(_t+=ze)<p)return[We?2*e(We*lt/2)/We:lt,0];var xt=lt*lt+_t*_t,At=0,qt=10,sr;do{var Qt=y(At),cr=1/a(At),kr=xt-2*_t*At+At*At;At-=sr=(Qt*kr+2*(At-_t))/(2+kr*cr*cr+2*(At-_t)*Qt)}while(w(sr)>p&&--qt>0);var Gr=lt*(Qt=y(At)),en=y(w(_t)<w(At+1/Qt)?z(Gr)*.5:I(Gr)*.5+m/4)/h(At);return[We?2*e(We*en)/We:2*en,At]},nt}function Cr(){return qe(Jt).scale(131.215)}var on=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];on.forEach(function(ze){ze[1]*=1.0144});function yn(ze,We){var nt=i(18,w(We)*36/m),lt=n(nt),_t=nt-lt,xt=(kr=on[lt])[0],At=kr[1],qt=(kr=on[++lt])[0],sr=kr[1],Qt=(kr=on[i(19,++lt)])[0],cr=kr[1],kr;return[ze*(qt+_t*(Qt-xt)/2+_t*_t*(Qt-2*qt+xt)/2),(We>0?M:-M)*(sr+_t*(cr-At)/2+_t*_t*(cr-2*sr+At)/2)]}yn.invert=function(ze,We){var nt=We/M,lt=nt*90,_t=i(18,w(lt/5)),xt=s(0,n(_t));do{var At=on[xt][1],qt=on[xt+1][1],sr=on[i(19,xt+2)][1],Qt=sr-At,cr=sr-2*qt+At,kr=2*(w(nt)-qt)/Qt,Gr=cr/Qt,en=kr*(1-Gr*kr*(1-2*Gr*kr));if(en>=0||xt===1){lt=(We>=0?5:-5)*(en+_t);var _n=50,Pn;do _t=i(18,w(lt)/5),xt=n(_t),en=_t-xt,At=on[xt][1],qt=on[xt+1][1],sr=on[i(19,xt+2)][1],lt-=(Pn=(We>=0?M:-M)*(qt+en*(sr-At)/2+en*en*(sr-2*qt+At)/2)-We)*S;while(w(Pn)>A&&--_n>0);break}}while(--xt>=0);var jn=on[xt][0],ma=on[xt+1][0],ba=on[i(19,xt+2)][0];return[ze/(ma+en*(ba-jn)/2+en*en*(ba-2*ma+jn)/2),lt*k]};function Tn(){return l.geoProjection(yn).scale(152.63)}function Cn(ze){function We(nt,lt){var _t=a(lt),xt=(ze-1)/(ze-_t*a(nt));return[xt*_t*h(nt),xt*h(lt)]}return We.invert=function(nt,lt){var _t=nt*nt+lt*lt,xt=R(_t),At=(ze-R(1-_t*(ze+1)/(ze-1)))/((ze-1)/xt+xt/(ze-1));return[o(nt*At,xt*R(1-At*At)),xt?z(lt*At/xt):0]},We}function Vn(ze,We){var nt=Cn(ze);if(!We)return nt;var lt=a(We),_t=h(We);function xt(At,qt){var sr=nt(At,qt),Qt=sr[1],cr=Qt*_t/(ze-1)+lt;return[sr[0]*lt/cr,Qt/cr]}return xt.invert=function(At,qt){var sr=(ze-1)/(ze-1-qt*_t);return nt.invert(sr*At,sr*qt*lt)},xt}function xn(){var ze=2,We=0,nt=l.geoProjectionMutator(Vn),lt=nt(ze,We);return lt.distance=function(_t){return arguments.length?nt(ze=+_t,We):ze},lt.tilt=function(_t){return arguments.length?nt(ze,We=_t*k):We*S},lt.scale(432.147).clipAngle(I(1/ze)*S-1e-6)}var zn=1e-4,Ln=1e4,Wn=-180,$n=Wn+zn,Oa=180,La=Oa-zn,Na=-90,Ba=Na+zn,Jn=90,pa=Jn-zn;function Ya(ze){return ze.length>0}function Qa(ze){return Math.floor(ze*Ln)/Ln}function pi(ze){return ze===Na||ze===Jn?[0,ze]:[Wn,Qa(ze)]}function di(ze){var We=ze[0],nt=ze[1],lt=!1;return We<=$n?(We=Wn,lt=!0):We>=La&&(We=Oa,lt=!0),nt<=Ba?(nt=Na,lt=!0):nt>=pa&&(nt=Jn,lt=!0),lt?[We,nt]:ze}function yi(ze){return ze.map(di)}function Ti(ze,We,nt){for(var lt=0,_t=ze.length;lt<_t;++lt){var xt=ze[lt].slice();nt.push({index:-1,polygon:We,ring:xt});for(var At=0,qt=xt.length;At<qt;++At){var sr=xt[At],Qt=sr[0],cr=sr[1];if(Qt<=$n||Qt>=La||cr<=Ba||cr>=pa){xt[At]=di(sr);for(var kr=At+1;kr<qt;++kr){var Gr=xt[kr],en=Gr[0],_n=Gr[1];if(en>$n&&en<La&&_n>Ba&&_n<pa)break}if(kr===At+1)continue;if(At){var Pn={index:-1,polygon:We,ring:xt.slice(0,At+1)};Pn.ring[Pn.ring.length-1]=pi(cr),nt[nt.length-1]=Pn}else nt.pop();if(kr>=qt)break;nt.push({index:-1,polygon:We,ring:xt=xt.slice(kr-1)}),xt[0]=pi(xt[0][1]),At=-1,qt=xt.length}}}}function oi(ze){var We,nt=ze.length,lt={},_t={},xt,At,qt,sr,Qt;for(We=0;We<nt;++We){if(xt=ze[We],At=xt.ring[0],sr=xt.ring[xt.ring.length-1],At[0]===sr[0]&&At[1]===sr[1]){xt.polygon.push(xt.ring),ze[We]=null;continue}xt.index=We,lt[At]=_t[sr]=xt}for(We=0;We<nt;++We)if(xt=ze[We],xt){if(At=xt.ring[0],sr=xt.ring[xt.ring.length-1],qt=_t[At],Qt=lt[sr],delete lt[At],delete _t[sr],At[0]===sr[0]&&At[1]===sr[1]){xt.polygon.push(xt.ring);continue}qt?(delete _t[At],delete lt[qt.ring[0]],qt.ring.pop(),ze[qt.index]=null,xt={index:-1,polygon:qt.polygon,ring:qt.ring.concat(xt.ring)},qt===Qt?xt.polygon.push(xt.ring):(xt.index=nt++,ze.push(lt[xt.ring[0]]=_t[xt.ring[xt.ring.length-1]]=xt))):Qt?(delete lt[sr],delete _t[Qt.ring[Qt.ring.length-1]],xt.ring.pop(),xt={index:nt++,polygon:Qt.polygon,ring:xt.ring.concat(Qt.ring)},ze[Qt.index]=null,ze.push(lt[xt.ring[0]]=_t[xt.ring[xt.ring.length-1]]=xt)):(xt.ring.push(xt.ring[0]),xt.polygon.push(xt.ring))}}function mo(ze){var We={type:"Feature",geometry:to(ze.geometry)};return ze.id!=null&&(We.id=ze.id),ze.bbox!=null&&(We.bbox=ze.bbox),ze.properties!=null&&(We.properties=ze.properties),We}function to(ze){if(ze==null)return ze;var We,nt,lt,_t;switch(ze.type){case"GeometryCollection":We={type:"GeometryCollection",geometries:ze.geometries.map(to)};break;case"Point":We={type:"Point",coordinates:di(ze.coordinates)};break;case"MultiPoint":case"LineString":We={type:ze.type,coordinates:yi(ze.coordinates)};break;case"MultiLineString":We={type:"MultiLineString",coordinates:ze.coordinates.map(yi)};break;case"Polygon":{var xt=[];Ti(ze.coordinates,xt,nt=[]),oi(nt),We={type:"Polygon",coordinates:xt};break}case"MultiPolygon":{nt=[],lt=-1,_t=ze.coordinates.length;for(var At=new Array(_t);++lt<_t;)Ti(ze.coordinates[lt],At[lt]=[],nt);oi(nt),We={type:"MultiPolygon",coordinates:At.filter(Ya)};break}default:return ze}return ze.bbox!=null&&(We.bbox=ze.bbox),We}function Ka(ze){if(ze==null)return ze;switch(ze.type){case"Feature":return mo(ze);case"FeatureCollection":{var We={type:"FeatureCollection",features:ze.features.map(mo)};return ze.bbox!=null&&(We.bbox=ze.bbox),We}default:return to(ze)}}function ga(ze,We){var nt=y(We/2),lt=h(x*nt);return[ze*(.74482-.34588*lt*lt),1.70711*nt]}ga.invert=function(ze,We){var nt=We/1.70711,lt=h(x*nt);return[ze/(.74482-.34588*lt*lt),2*e(nt)]};function mi(){return l.geoProjection(ga).scale(146.153)}function fo(ze,We,nt){var lt=l.geoInterpolate(We,nt),_t=lt(.5),xt=l.geoRotation([-_t[0],-_t[1]])(We),At=lt.distance/2,qt=-z(h(xt[1]*k)/h(At)),sr=[-_t[0],-_t[1],-(xt[0]>0?m-qt:qt)*S],Qt=l.geoProjection(ze(At)).rotate(sr),cr=l.geoRotation(sr),kr=Qt.center;return delete Qt.rotate,Qt.center=function(Gr){return arguments.length?kr(cr(Gr)):cr.invert(kr())},Qt.clipAngle(90)}function po(ze){var We=a(ze);function nt(lt,_t){var xt=l.geoGnomonicRaw(lt,_t);return xt[0]*=We,xt}return nt.invert=function(lt,_t){return l.geoGnomonicRaw.invert(lt/We,_t)},nt}function ds(){return Fs([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function Fs(ze,We){return fo(po,ze,We)}function Bo(ze){if(!(ze*=2))return l.geoAzimuthalEquidistantRaw;var We=-ze/2,nt=-We,lt=ze*ze,_t=y(nt),xt=.5/h(nt);function At(qt,sr){var Qt=I(a(sr)*a(qt-We)),cr=I(a(sr)*a(qt-nt)),kr=sr<0?-1:1;return Qt*=Qt,cr*=cr,[(Qt-cr)/(2*ze),kr*R(4*lt*cr-(lt-Qt+cr)*(lt-Qt+cr))/(2*ze)]}return At.invert=function(qt,sr){var Qt=sr*sr,cr=a(R(Qt+(Gr=qt+We)*Gr)),kr=a(R(Qt+(Gr=qt+nt)*Gr)),Gr,en;return[o(en=cr-kr,Gr=(cr+kr)*_t),(sr<0?-1:1)*I(R(Gr*Gr+en*en)*xt)]},At}function pl(){return Ms([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function Ms(ze,We){return fo(Bo,ze,We)}function gs(ze,We){if(w(We)<p)return[ze,0];var nt=w(We/M),lt=z(nt);if(w(ze)<p||w(w(We)-M)<p)return[0,g(We)*m*y(lt/2)];var _t=a(lt),xt=w(m/ze-ze/m)/2,At=xt*xt,qt=_t/(nt+_t-1),sr=qt*(2/nt-1),Qt=sr*sr,cr=Qt+At,kr=qt-Qt,Gr=At+qt;return[g(ze)*m*(xt*kr+R(At*kr*kr-cr*(qt*qt-Qt)))/cr,g(We)*m*(sr*Gr-xt*R((At+1)*cr-Gr*Gr))/cr]}gs.invert=function(ze,We){if(w(We)<p)return[ze,0];if(w(ze)<p)return[0,M*h(2*e(We/m))];var nt=(ze/=m)*ze,lt=(We/=m)*We,_t=nt+lt,xt=_t*_t,At=-w(We)*(1+_t),qt=At-2*lt+nt,sr=-2*At+1+2*lt+xt,Qt=lt/sr+(2*qt*qt*qt/(sr*sr*sr)-9*At*qt/(sr*sr))/27,cr=(At-qt*qt/(3*sr))/sr,kr=2*R(-cr/3),Gr=I(3*Qt/(cr*kr))/3;return[m*(_t-1+R(1+2*(nt-lt)+xt))/(2*ze),g(We)*m*(-kr*a(Gr+m/3)-qt/(3*sr))]};function xo(){return l.geoProjection(gs).scale(79.4183)}function cu(ze,We){if(w(We)<p)return[ze,0];var nt=w(We/M),lt=z(nt);if(w(ze)<p||w(w(We)-M)<p)return[0,g(We)*m*y(lt/2)];var _t=a(lt),xt=w(m/ze-ze/m)/2,At=xt*xt,qt=_t*(R(1+At)-xt*_t)/(1+At*nt*nt);return[g(ze)*m*qt,g(We)*m*R(1-qt*(2*xt+qt))]}cu.invert=function(ze,We){if(!ze)return[0,M*h(2*e(We/m))];var nt=w(ze/m),lt=(1-nt*nt-(We/=m)*We)/(2*nt),_t=lt*lt,xt=R(_t+1);return[g(ze)*m*(xt-lt),g(We)*M*h(2*o(R((1-2*lt*nt)*(lt+xt)-nt),R(xt+lt+nt)))]};function Su(){return l.geoProjection(cu).scale(79.4183)}function ys(ze,We){if(w(We)<p)return[ze,0];var nt=We/M,lt=z(nt);if(w(ze)<p||w(w(We)-M)<p)return[0,m*y(lt/2)];var _t=(m/ze-ze/m)/2,xt=nt/(1+a(lt));return[m*(g(ze)*R(_t*_t+1-xt*xt)-_t),m*xt]}ys.invert=function(ze,We){if(!We)return[ze,0];var nt=We/m,lt=(m*m*(1-nt*nt)-ze*ze)/(2*m*ze);return[ze?m*(g(ze)*R(lt*lt+1)-lt):0,M*h(2*e(nt))]};function Ju(){return l.geoProjection(ys).scale(79.4183)}function hu(ze,We){if(!We)return[ze,0];var nt=w(We);if(!ze||nt===M)return[0,We];var lt=nt/M,_t=lt*lt,xt=(8*lt-_t*(_t+2)-5)/(2*_t*(lt-1)),At=xt*xt,qt=lt*xt,sr=_t+At+2*qt,Qt=lt+3*xt,cr=ze/M,kr=cr+1/cr,Gr=g(w(ze)-M)*R(kr*kr-4),en=Gr*Gr,_n=sr*(_t+At*en-1)+(1-_t)*(_t*(Qt*Qt+4*At)+12*qt*At+4*At*At),Pn=(Gr*(sr+At-1)+2*R(_n))/(4*sr+en);return[g(ze)*M*Pn,g(We)*M*R(1+Gr*w(Pn)-Pn*Pn)]}hu.invert=function(ze,We){var nt;if(!ze||!We)return[ze,We];We/=m;var lt=g(ze)*ze/M,_t=(lt*lt-1+4*We*We)/w(lt),xt=_t*_t,At=2*We,qt=50;do{var sr=At*At,Qt=(8*At-sr*(sr+2)-5)/(2*sr*(At-1)),cr=(3*At-sr*At-10)/(2*sr*At),kr=Qt*Qt,Gr=At*Qt,en=At+Qt,_n=en*en,Pn=At+3*Qt,jn=_n*(sr+kr*xt-1)+(1-sr)*(sr*(Pn*Pn+4*kr)+kr*(12*Gr+4*kr)),ma=-2*en*(4*Gr*kr+(1-4*sr+3*sr*sr)*(1+cr)+kr*(-6+14*sr-xt+(-8+8*sr-2*xt)*cr)+Gr*(-8+12*sr+(-10+10*sr-xt)*cr)),ba=R(jn),Za=_t*(_n+kr-1)+2*ba-lt*(4*_n+xt),Wa=_t*(2*Qt*cr+2*en*(1+cr))+ma/ba-8*en*(_t*(-1+kr+_n)+2*ba)*(1+cr)/(xt+4*_n);At-=nt=Za/Wa}while(nt>p&&--qt>0);return[g(ze)*(R(_t*_t+4)+_t)*m/4,M*At]};function Lc(){return l.geoProjection(hu).scale(127.16)}function gf(ze,We,nt,lt,_t){function xt(At,qt){var sr=nt*h(lt*qt),Qt=R(1-sr*sr),cr=R(2/(1+Qt*a(At*=_t)));return[ze*Qt*cr*h(At),We*sr*cr]}return xt.invert=function(At,qt){var sr=At/ze,Qt=qt/We,cr=R(sr*sr+Qt*Qt),kr=2*z(cr/2);return[o(At*y(kr),ze*cr)/_t,cr&&z(qt*h(kr)/(We*nt*cr))/lt]},xt}function Qu(ze,We,nt,lt){var _t=m/3;ze=s(ze,p),We=s(We,p),ze=i(ze,M),We=i(We,m-p),nt=s(nt,0),nt=i(nt,100-p),lt=s(lt,p);var xt=nt/100+1,At=lt/100,qt=I(xt*a(_t))/_t,sr=h(ze)/h(qt*M),Qt=We/m,cr=R(At*h(ze/2)/h(We/2)),kr=cr/R(Qt*sr*qt),Gr=1/(cr*R(Qt*sr*qt));return gf(kr,Gr,sr,qt,Qt)}function yf(){var ze=65*k,We=60*k,nt=20,lt=200,_t=l.geoProjectionMutator(Qu),xt=_t(ze,We,nt,lt);return xt.poleline=function(At){return arguments.length?_t(ze=+At*k,We,nt,lt):ze*S},xt.parallels=function(At){return arguments.length?_t(ze,We=+At*k,nt,lt):We*S},xt.inflation=function(At){return arguments.length?_t(ze,We,nt=+At,lt):nt},xt.ratio=function(At){return arguments.length?_t(ze,We,nt,lt=+At):lt},xt.scale(163.775)}function Os(){return yf().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}var Of=4*m+3*R(3),mf=2*R(2*m*R(3)/Of),xf=Ae(mf*R(3)/m,mf,Of/6);function Uo(){return l.geoProjection(xf).scale(176.84)}function bf(ze,We){return[ze*R(1-3*We*We/(m*m)),We]}bf.invert=function(ze,We){return[ze/R(1-3*We*We/(m*m)),We]};function Jf(){return l.geoProjection(bf).scale(152.63)}function Ss(ze,We){var nt=a(We),lt=a(ze)*nt,_t=1-lt,xt=a(ze=o(h(ze)*nt,-h(We))),At=h(ze);return nt=R(1-lt*lt),[At*nt-xt*_t,-xt*nt-At*_t]}Ss.invert=function(ze,We){var nt=(ze*ze+We*We)/-2,lt=R(-nt*(2+nt)),_t=We*nt+ze*lt,xt=ze*nt-We*lt,At=R(xt*xt+_t*_t);return[o(lt*_t,At*(1+nt)),At?-z(lt*xt/At):0]};function $u(){return l.geoProjection(Ss).rotate([0,-90,45]).scale(124.75).clipAngle(180-.001)}function qu(ze,We){var nt=X(ze,We);return[(nt[0]+ze/M)/2,(nt[1]+We)/2]}qu.invert=function(ze,We){var nt=ze,lt=We,_t=25;do{var xt=a(lt),At=h(lt),qt=h(2*lt),sr=At*At,Qt=xt*xt,cr=h(nt),kr=a(nt/2),Gr=h(nt/2),en=Gr*Gr,_n=1-Qt*kr*kr,Pn=_n?I(xt*kr)*R(jn=1/_n):jn=0,jn,ma=.5*(2*Pn*xt*Gr+nt/M)-ze,ba=.5*(Pn*At+lt)-We,Za=.5*jn*(Qt*en+Pn*xt*kr*sr)+.5/M,Wa=jn*(cr*qt/4-Pn*At*Gr),ei=.125*jn*(qt*Gr-Pn*At*Qt*cr),fi=.5*jn*(sr*kr+Pn*en*xt)+.5,oo=Wa*ei-fi*Za,ri=(ba*Wa-ma*fi)/oo,Vi=(ma*ei-ba*Za)/oo;nt-=ri,lt-=Vi}while((w(ri)>p||w(Vi)>p)&&--_t>0);return[nt,lt]};function _f(){return l.geoProjection(qu).scale(158.837)}d.geoNaturalEarth=l.geoNaturalEarth1,d.geoNaturalEarthRaw=l.geoNaturalEarth1Raw,d.geoAiry=J,d.geoAiryRaw=q,d.geoAitoff=Z,d.geoAitoffRaw=X,d.geoArmadillo=le,d.geoArmadilloRaw=se,d.geoAugust=U,d.geoAugustRaw=oe,d.geoBaker=j,d.geoBakerRaw=ee,d.geoBerghaus=ne,d.geoBerghausRaw=Q,d.geoBertin1953=me,d.geoBertin1953Raw=ge,d.geoBoggs=Ye,d.geoBoggsRaw=De,d.geoBonne=dt,d.geoBonneRaw=Ve,d.geoBottomley=Yt,d.geoBottomleyRaw=Dt,d.geoBromley=Ft,d.geoBromleyRaw=kt,d.geoChamberlin=Ce,d.geoChamberlinRaw=it,d.geoChamberlinAfrica=Qe,d.geoCollignon=rt,d.geoCollignonRaw=je,d.geoCraig=Pt,d.geoCraigRaw=ut,d.geoCraster=Kt,d.geoCrasterRaw=Ot,d.geoCylindricalEqualArea=Zt,d.geoCylindricalEqualAreaRaw=Bt,d.geoCylindricalStereographic=pt,d.geoCylindricalStereographicRaw=Je,d.geoEckert1=ar,d.geoEckert1Raw=Et,d.geoEckert2=ir,d.geoEckert2Raw=vr,d.geoEckert3=Pr,d.geoEckert3Raw=dr,d.geoEckert4=tr,d.geoEckert4Raw=Sr,d.geoEckert5=et,d.geoEckert5Raw=Nr,d.geoEckert6=Me,d.geoEckert6Raw=we,d.geoEisenlohr=$e,d.geoEisenlohrRaw=Xe,d.geoFahey=yt,d.geoFaheyRaw=st,d.geoFoucaut=Vt,d.geoFoucautRaw=wt,d.geoFoucautSinusoidal=wr,d.geoFoucautSinusoidalRaw=gr,d.geoGilbert=Fr,d.geoGingery=dn,d.geoGingeryRaw=nn,d.geoGinzburg4=an,d.geoGinzburg4Raw=Ar,d.geoGinzburg5=Zr,d.geoGinzburg5Raw=rn,d.geoGinzburg6=zt,d.geoGinzburg6Raw=at,d.geoGinzburg8=hr,d.geoGinzburg8Raw=er,d.geoGinzburg9=Rr,d.geoGinzburg9Raw=Vr,d.geoGringorten=En,d.geoGringortenRaw=xr,d.geoGuyou=Fn,d.geoGuyouRaw=pr,d.geoHammer=ue,d.geoHammerRaw=ae,d.geoHammerRetroazimuthal=ta,d.geoHammerRetroazimuthalRaw=Bn,d.geoHealpix=wn,d.geoHealpixRaw=ur,d.geoHill=mr,d.geoHillRaw=gn,d.geoHomolosine=aa,d.geoHomolosineRaw=On,d.geoHufnagel=Hn,d.geoHufnagelRaw=Zn,d.geoHyperelliptical=ua,d.geoHyperellipticalRaw=Yn,d.geoInterrupt=No,d.geoInterruptedBoggs=Ls,d.geoInterruptedHomolosine=Pi,d.geoInterruptedMollweide=Xs,d.geoInterruptedMollweideHemispheres=Ml,d.geoInterruptedSinuMollweide=xu,d.geoInterruptedSinusoidal=ol,d.geoKavrayskiy7=Ui,d.geoKavrayskiy7Raw=js,d.geoLagrange=Bl,d.geoLagrangeRaw=So,d.geoLarrivee=Sl,d.geoLarriveeRaw=Di,d.geoLaskowski=Fi,d.geoLaskowskiRaw=Ji,d.geoLittrow=Qi,d.geoLittrowRaw=io,d.geoLoximuthal=sl,d.geoLoximuthalRaw=us,d.geoMiller=rs,d.geoMillerRaw=Bu,d.geoModifiedStereographic=Ds,d.geoModifiedStereographicRaw=Uu,d.geoModifiedStereographicAlaska=nu,d.geoModifiedStereographicGs48=cf,d.geoModifiedStereographicGs50=hf,d.geoModifiedStereographicMiller=ll,d.geoModifiedStereographicLee=au,d.geoMollweide=He,d.geoMollweideRaw=Ne,d.geoMtFlatPolarParabolic=Hu,d.geoMtFlatPolarParabolicRaw=_u,d.geoMtFlatPolarQuartic=vf,d.geoMtFlatPolarQuarticRaw=iu,d.geoMtFlatPolarSinusoidal=wu,d.geoMtFlatPolarSinusoidalRaw=ul,d.geoNaturalEarth2=ws,d.geoNaturalEarth2Raw=ou,d.geoNellHammer=Tu,d.geoNellHammerRaw=Ul,d.geoInterruptedQuarticAuthalic=Gu,d.geoNicolosi=pf,d.geoNicolosiRaw=su,d.geoPatterson=lo,d.geoPattersonRaw=Is,d.geoPolyconic=Vl,d.geoPolyconicRaw=Hl,d.geoPolyhedral=cl,d.geoPolyhedralButterfly=Xl,d.geoPolyhedralCollignon=Ff,d.geoPolyhedralWaterman=Ri,d.geoProject=hs,d.geoGringortenQuincuncial=mt,d.geoPeirceQuincuncial=It,d.geoPierceQuincuncial=It,d.geoQuantize=nr,d.geoQuincuncial=Ku,d.geoRectangularPolyconic=Cr,d.geoRectangularPolyconicRaw=Jt,d.geoRobinson=Tn,d.geoRobinsonRaw=yn,d.geoSatellite=xn,d.geoSatelliteRaw=Vn,d.geoSinuMollweide=Sn,d.geoSinuMollweideRaw=jr,d.geoSinusoidal=Ie,d.geoSinusoidalRaw=Ue,d.geoStitch=Ka,d.geoTimes=mi,d.geoTimesRaw=ga,d.geoTwoPointAzimuthal=Fs,d.geoTwoPointAzimuthalRaw=po,d.geoTwoPointAzimuthalUsa=ds,d.geoTwoPointEquidistant=Ms,d.geoTwoPointEquidistantRaw=Bo,d.geoTwoPointEquidistantUsa=pl,d.geoVanDerGrinten=xo,d.geoVanDerGrintenRaw=gs,d.geoVanDerGrinten2=Su,d.geoVanDerGrinten2Raw=cu,d.geoVanDerGrinten3=Ju,d.geoVanDerGrinten3Raw=ys,d.geoVanDerGrinten4=Lc,d.geoVanDerGrinten4Raw=hu,d.geoWagner=yf,d.geoWagner7=Os,d.geoWagnerRaw=Qu,d.geoWagner4=Uo,d.geoWagner4Raw=xf,d.geoWagner6=Jf,d.geoWagner6Raw=bf,d.geoWiechel=$u,d.geoWiechelRaw=Ss,d.geoWinkel3=_f,d.geoWinkel3Raw=qu,Object.defineProperty(d,"__esModule",{value:!0})})},{"d3-array":107,"d3-geo":114}],114:[function(t,B,H){(function(d,l){typeof H=="object"&&typeof B!="undefined"?l(H,t("d3-array")):(d=d||self,l(d.d3=d.d3||{},d.d3))})(this,function(d,l){function b(){return new w}function w(){this.reset()}w.prototype={constructor:w,reset:function(){this.s=this.t=0},add:function(mt){o(e,mt,this.t),o(this,e.s,this.s),this.s?this.t+=e.t:this.s=e.t},valueOf:function(){return this.s}};var e=new w;function o(mt,It,nr){var Jt=mt.s=It+nr,Cr=Jt-It,on=Jt-Cr;mt.t=It-on+(nr-Cr)}var a=1e-6,r=1e-12,n=Math.PI,c=n/2,s=n/4,i=n*2,v=180/n,u=n/180,g=Math.abs,h=Math.atan,y=Math.atan2,p=Math.cos,A=Math.ceil,m=Math.exp,M=Math.log,x=Math.pow,T=Math.sin,_=Math.sign||function(mt){return mt>0?1:mt<0?-1:0},f=Math.sqrt,L=Math.tan;function S(mt){return mt>1?0:mt<-1?n:Math.acos(mt)}function k(mt){return mt>1?c:mt<-1?-c:Math.asin(mt)}function P(mt){return(mt=T(mt/2))*mt}function z(){}function I(mt,It){mt&&D.hasOwnProperty(mt.type)&&D[mt.type](mt,It)}var R={Feature:function(mt,It){I(mt.geometry,It)},FeatureCollection:function(mt,It){for(var nr=mt.features,Jt=-1,Cr=nr.length;++Jt<Cr;)I(nr[Jt].geometry,It)}},D={Sphere:function(mt,It){It.sphere()},Point:function(mt,It){mt=mt.coordinates,It.point(mt[0],mt[1],mt[2])},MultiPoint:function(mt,It){for(var nr=mt.coordinates,Jt=-1,Cr=nr.length;++Jt<Cr;)mt=nr[Jt],It.point(mt[0],mt[1],mt[2])},LineString:function(mt,It){O(mt.coordinates,It,0)},MultiLineString:function(mt,It){for(var nr=mt.coordinates,Jt=-1,Cr=nr.length;++Jt<Cr;)O(nr[Jt],It,0)},Polygon:function(mt,It){F(mt.coordinates,It)},MultiPolygon:function(mt,It){for(var nr=mt.coordinates,Jt=-1,Cr=nr.length;++Jt<Cr;)F(nr[Jt],It)},GeometryCollection:function(mt,It){for(var nr=mt.geometries,Jt=-1,Cr=nr.length;++Jt<Cr;)I(nr[Jt],It)}};function O(mt,It,nr){var Jt=-1,Cr=mt.length-nr,on;for(It.lineStart();++Jt<Cr;)on=mt[Jt],It.point(on[0],on[1],on[2]);It.lineEnd()}function F(mt,It){var nr=-1,Jt=mt.length;for(It.polygonStart();++nr<Jt;)O(mt[nr],It,1);It.polygonEnd()}function G(mt,It){mt&&R.hasOwnProperty(mt.type)?R[mt.type](mt,It):I(mt,It)}var W=b(),q=b(),J,X,Z,se,le,oe={point:z,lineStart:z,lineEnd:z,polygonStart:function(){W.reset(),oe.lineStart=U,oe.lineEnd=V},polygonEnd:function(){var mt=+W;q.add(mt<0?i+mt:mt),this.lineStart=this.lineEnd=this.point=z},sphere:function(){q.add(i)}};function U(){oe.point=re}function V(){ee(J,X)}function re(mt,It){oe.point=ee,J=mt,X=It,mt*=u,It*=u,Z=mt,se=p(It=It/2+s),le=T(It)}function ee(mt,It){mt*=u,It*=u,It=It/2+s;var nr=mt-Z,Jt=nr>=0?1:-1,Cr=Jt*nr,on=p(It),yn=T(It),Tn=le*yn,Cn=se*on+Tn*p(Cr),Vn=Tn*Jt*T(Cr);W.add(y(Vn,Cn)),Z=mt,se=on,le=yn}function j(mt){return q.reset(),G(mt,oe),q*2}function Q(mt){return[y(mt[1],mt[0]),k(mt[2])]}function ne(mt){var It=mt[0],nr=mt[1],Jt=p(nr);return[Jt*p(It),Jt*T(It),T(nr)]}function ae(mt,It){return mt[0]*It[0]+mt[1]*It[1]+mt[2]*It[2]}function ie(mt,It){return[mt[1]*It[2]-mt[2]*It[1],mt[2]*It[0]-mt[0]*It[2],mt[0]*It[1]-mt[1]*It[0]]}function ue(mt,It){mt[0]+=It[0],mt[1]+=It[1],mt[2]+=It[2]}function xe(mt,It){return[mt[0]*It,mt[1]*It,mt[2]*It]}function he(mt){var It=f(mt[0]*mt[0]+mt[1]*mt[1]+mt[2]*mt[2]);mt[0]/=It,mt[1]/=It,mt[2]/=It}var ge,me,ke,Ae,Ne,He,Ge,_e,De=b(),Ye,qe,Ue={point:Ie,lineStart:dt,lineEnd:Dt,polygonStart:function(){Ue.point=Yt,Ue.lineStart=kt,Ue.lineEnd=Ft,De.reset(),oe.polygonStart()},polygonEnd:function(){oe.polygonEnd(),Ue.point=Ie,Ue.lineStart=dt,Ue.lineEnd=Dt,W<0?(ge=-(ke=180),me=-(Ae=90)):De>a?Ae=90:De<-a&&(me=-90),qe[0]=ge,qe[1]=ke},sphere:function(){ge=-(ke=180),me=-(Ae=90)}};function Ie(mt,It){Ye.push(qe=[ge=mt,ke=mt]),It<me&&(me=It),It>Ae&&(Ae=It)}function Ve(mt,It){var nr=ne([mt*u,It*u]);if(_e){var Jt=ie(_e,nr),Cr=[Jt[1],-Jt[0],0],on=ie(Cr,Jt);he(on),on=Q(on);var yn=mt-Ne,Tn=yn>0?1:-1,Cn=on[0]*v*Tn,Vn,xn=g(yn)>180;xn^(Tn*Ne<Cn&&Cn<Tn*mt)?(Vn=on[1]*v,Vn>Ae&&(Ae=Vn)):(Cn=(Cn+360)%360-180,xn^(Tn*Ne<Cn&&Cn<Tn*mt)?(Vn=-on[1]*v,Vn<me&&(me=Vn)):(It<me&&(me=It),It>Ae&&(Ae=It))),xn?mt<Ne?Nt(ge,mt)>Nt(ge,ke)&&(ke=mt):Nt(mt,ke)>Nt(ge,ke)&&(ge=mt):ke>=ge?(mt<ge&&(ge=mt),mt>ke&&(ke=mt)):mt>Ne?Nt(ge,mt)>Nt(ge,ke)&&(ke=mt):Nt(mt,ke)>Nt(ge,ke)&&(ge=mt)}else Ye.push(qe=[ge=mt,ke=mt]);It<me&&(me=It),It>Ae&&(Ae=It),_e=nr,Ne=mt}function dt(){Ue.point=Ve}function Dt(){qe[0]=ge,qe[1]=ke,Ue.point=Ie,_e=null}function Yt(mt,It){if(_e){var nr=mt-Ne;De.add(g(nr)>180?nr+(nr>0?360:-360):nr)}else He=mt,Ge=It;oe.point(mt,It),Ve(mt,It)}function kt(){oe.lineStart()}function Ft(){Yt(He,Ge),oe.lineEnd(),g(De)>a&&(ge=-(ke=180)),qe[0]=ge,qe[1]=ke,_e=null}function Nt(mt,It){return(It-=mt)<0?It+360:It}function Lt(mt,It){return mt[0]-It[0]}function St(mt,It){return mt[0]<=mt[1]?mt[0]<=It&&It<=mt[1]:It<mt[0]||mt[1]<It}function it(mt){var It,nr,Jt,Cr,on,yn,Tn;if(Ae=ke=-(ge=me=1/0),Ye=[],G(mt,Ue),nr=Ye.length){for(Ye.sort(Lt),It=1,Jt=Ye[0],on=[Jt];It<nr;++It)Cr=Ye[It],St(Jt,Cr[0])||St(Jt,Cr[1])?(Nt(Jt[0],Cr[1])>Nt(Jt[0],Jt[1])&&(Jt[1]=Cr[1]),Nt(Cr[0],Jt[1])>Nt(Jt[0],Jt[1])&&(Jt[0]=Cr[0])):on.push(Jt=Cr);for(yn=-1/0,nr=on.length-1,It=0,Jt=on[nr];It<=nr;Jt=Cr,++It)Cr=on[It],(Tn=Nt(Jt[1],Cr[0]))>yn&&(yn=Tn,ge=Cr[0],ke=Jt[1])}return Ye=qe=null,ge===1/0||me===1/0?[[NaN,NaN],[NaN,NaN]]:[[ge,me],[ke,Ae]]}var ht,Qe,Ce,je,rt,ut,Pt,Tt,Ot,Kt,Bt,Zt,Je,pt,Et,ar,vr={sphere:z,point:ir,lineStart:Pr,lineEnd:Nr,polygonStart:function(){vr.lineStart=et,vr.lineEnd=we},polygonEnd:function(){vr.lineStart=Pr,vr.lineEnd=Nr}};function ir(mt,It){mt*=u,It*=u;var nr=p(It);dr(nr*p(mt),nr*T(mt),T(It))}function dr(mt,It,nr){++ht,Ce+=(mt-Ce)/ht,je+=(It-je)/ht,rt+=(nr-rt)/ht}function Pr(){vr.point=Sr}function Sr(mt,It){mt*=u,It*=u;var nr=p(It);pt=nr*p(mt),Et=nr*T(mt),ar=T(It),vr.point=tr,dr(pt,Et,ar)}function tr(mt,It){mt*=u,It*=u;var nr=p(It),Jt=nr*p(mt),Cr=nr*T(mt),on=T(It),yn=y(f((yn=Et*on-ar*Cr)*yn+(yn=ar*Jt-pt*on)*yn+(yn=pt*Cr-Et*Jt)*yn),pt*Jt+Et*Cr+ar*on);Qe+=yn,ut+=yn*(pt+(pt=Jt)),Pt+=yn*(Et+(Et=Cr)),Tt+=yn*(ar+(ar=on)),dr(pt,Et,ar)}function Nr(){vr.point=ir}function et(){vr.point=Me}function we(){Re(Zt,Je),vr.point=ir}function Me(mt,It){Zt=mt,Je=It,mt*=u,It*=u,vr.point=Re;var nr=p(It);pt=nr*p(mt),Et=nr*T(mt),ar=T(It),dr(pt,Et,ar)}function Re(mt,It){mt*=u,It*=u;var nr=p(It),Jt=nr*p(mt),Cr=nr*T(mt),on=T(It),yn=Et*on-ar*Cr,Tn=ar*Jt-pt*on,Cn=pt*Cr-Et*Jt,Vn=f(yn*yn+Tn*Tn+Cn*Cn),xn=k(Vn),zn=Vn&&-xn/Vn;Ot+=zn*yn,Kt+=zn*Tn,Bt+=zn*Cn,Qe+=xn,ut+=xn*(pt+(pt=Jt)),Pt+=xn*(Et+(Et=Cr)),Tt+=xn*(ar+(ar=on)),dr(pt,Et,ar)}function Xe(mt){ht=Qe=Ce=je=rt=ut=Pt=Tt=Ot=Kt=Bt=0,G(mt,vr);var It=Ot,nr=Kt,Jt=Bt,Cr=It*It+nr*nr+Jt*Jt;return Cr<r&&(It=ut,nr=Pt,Jt=Tt,Qe<a&&(It=Ce,nr=je,Jt=rt),Cr=It*It+nr*nr+Jt*Jt,Cr<r)?[NaN,NaN]:[y(nr,It)*v,k(Jt/f(Cr))*v]}function $e(mt){return function(){return mt}}function ot(mt,It){function nr(Jt,Cr){return Jt=mt(Jt,Cr),It(Jt[0],Jt[1])}return mt.invert&&It.invert&&(nr.invert=function(Jt,Cr){return Jt=It.invert(Jt,Cr),Jt&&mt.invert(Jt[0],Jt[1])}),nr}function st(mt,It){return[g(mt)>n?mt+Math.round(-mt/i)*i:mt,It]}st.invert=st;function yt(mt,It,nr){return(mt%=i)?It||nr?ot(Vt(mt),gr(It,nr)):Vt(mt):It||nr?gr(It,nr):st}function wt(mt){return function(It,nr){return It+=mt,[It>n?It-i:It<-n?It+i:It,nr]}}function Vt(mt){var It=wt(mt);return It.invert=wt(-mt),It}function gr(mt,It){var nr=p(mt),Jt=T(mt),Cr=p(It),on=T(It);function yn(Tn,Cn){var Vn=p(Cn),xn=p(Tn)*Vn,zn=T(Tn)*Vn,Ln=T(Cn),Wn=Ln*nr+xn*Jt;return[y(zn*Cr-Wn*on,xn*nr-Ln*Jt),k(Wn*Cr+zn*on)]}return yn.invert=function(Tn,Cn){var Vn=p(Cn),xn=p(Tn)*Vn,zn=T(Tn)*Vn,Ln=T(Cn),Wn=Ln*Cr-zn*on;return[y(zn*Cr+Ln*on,xn*nr+Wn*Jt),k(Wn*nr-xn*Jt)]},yn}function wr(mt){mt=yt(mt[0]*u,mt[1]*u,mt.length>2?mt[2]*u:0);function It(nr){return nr=mt(nr[0]*u,nr[1]*u),nr[0]*=v,nr[1]*=v,nr}return It.invert=function(nr){return nr=mt.invert(nr[0]*u,nr[1]*u),nr[0]*=v,nr[1]*=v,nr},It}function Lr(mt,It,nr,Jt,Cr,on){if(!!nr){var yn=p(It),Tn=T(It),Cn=Jt*nr;Cr==null?(Cr=It+Jt*i,on=It-Cn/2):(Cr=fr(yn,Cr),on=fr(yn,on),(Jt>0?Cr<on:Cr>on)&&(Cr+=Jt*i));for(var Vn,xn=Cr;Jt>0?xn>on:xn<on;xn-=Cn)Vn=Q([yn,-Tn*p(xn),-Tn*T(xn)]),mt.point(Vn[0],Vn[1])}}function fr(mt,It){It=ne(It),It[0]-=mt,he(It);var nr=S(-It[1]);return((-It[2]<0?-nr:nr)+i-a)%i}function Fr(){var mt=$e([0,0]),It=$e(90),nr=$e(6),Jt,Cr,on={point:yn};function yn(Cn,Vn){Jt.push(Cn=Cr(Cn,Vn)),Cn[0]*=v,Cn[1]*=v}function Tn(){var Cn=mt.apply(this,arguments),Vn=It.apply(this,arguments)*u,xn=nr.apply(this,arguments)*u;return Jt=[],Cr=yt(-Cn[0]*u,-Cn[1]*u,0).invert,Lr(on,Vn,xn,1),Cn={type:"Polygon",coordinates:[Jt]},Jt=Cr=null,Cn}return Tn.center=function(Cn){return arguments.length?(mt=typeof Cn=="function"?Cn:$e([+Cn[0],+Cn[1]]),Tn):mt},Tn.radius=function(Cn){return arguments.length?(It=typeof Cn=="function"?Cn:$e(+Cn),Tn):It},Tn.precision=function(Cn){return arguments.length?(nr=typeof Cn=="function"?Cn:$e(+Cn),Tn):nr},Tn}function nn(){var mt=[],It;return{point:function(nr,Jt,Cr){It.push([nr,Jt,Cr])},lineStart:function(){mt.push(It=[])},lineEnd:z,rejoin:function(){mt.length>1&&mt.push(mt.pop().concat(mt.shift()))},result:function(){var nr=mt;return mt=[],It=null,nr}}}function yr(mt,It){return g(mt[0]-It[0])<a&&g(mt[1]-It[1])<a}function _r(mt,It,nr,Jt){this.x=mt,this.z=It,this.o=nr,this.e=Jt,this.v=!1,this.n=this.p=null}function dn(mt,It,nr,Jt,Cr){var on=[],yn=[],Tn,Cn;if(mt.forEach(function($n){if(!((Oa=$n.length-1)<=0)){var Oa,La=$n[0],Na=$n[Oa],Ba;if(yr(La,Na)){if(!La[2]&&!Na[2]){for(Cr.lineStart(),Tn=0;Tn<Oa;++Tn)Cr.point((La=$n[Tn])[0],La[1]);Cr.lineEnd();return}Na[0]+=2*a}on.push(Ba=new _r(La,$n,null,!0)),yn.push(Ba.o=new _r(La,null,Ba,!1)),on.push(Ba=new _r(Na,$n,null,!1)),yn.push(Ba.o=new _r(Na,null,Ba,!0))}}),!!on.length){for(yn.sort(It),Yr(on),Yr(yn),Tn=0,Cn=yn.length;Tn<Cn;++Tn)yn[Tn].e=nr=!nr;for(var Vn=on[0],xn,zn;;){for(var Ln=Vn,Wn=!0;Ln.v;)if((Ln=Ln.n)===Vn)return;xn=Ln.z,Cr.lineStart();do{if(Ln.v=Ln.o.v=!0,Ln.e){if(Wn)for(Tn=0,Cn=xn.length;Tn<Cn;++Tn)Cr.point((zn=xn[Tn])[0],zn[1]);else Jt(Ln.x,Ln.n.x,1,Cr);Ln=Ln.n}else{if(Wn)for(xn=Ln.p.z,Tn=xn.length-1;Tn>=0;--Tn)Cr.point((zn=xn[Tn])[0],zn[1]);else Jt(Ln.x,Ln.p.x,-1,Cr);Ln=Ln.p}Ln=Ln.o,xn=Ln.z,Wn=!Wn}while(!Ln.v);Cr.lineEnd()}}}function Yr(mt){if(!!(It=mt.length)){for(var It,nr=0,Jt=mt[0],Cr;++nr<It;)Jt.n=Cr=mt[nr],Cr.p=Jt,Jt=Cr;Jt.n=Cr=mt[0],Cr.p=Jt}}var Ar=b();function an(mt){return g(mt[0])<=n?mt[0]:_(mt[0])*((g(mt[0])+n)%i-n)}function rn(mt,It){var nr=an(It),Jt=It[1],Cr=T(Jt),on=[T(nr),-p(nr),0],yn=0,Tn=0;Ar.reset(),Cr===1?Jt=c+a:Cr===-1&&(Jt=-c-a);for(var Cn=0,Vn=mt.length;Cn<Vn;++Cn)if(!!(zn=(xn=mt[Cn]).length))for(var xn,zn,Ln=xn[zn-1],Wn=an(Ln),$n=Ln[1]/2+s,Oa=T($n),La=p($n),Na=0;Na<zn;++Na,Wn=Jn,Oa=Ya,La=Qa,Ln=Ba){var Ba=xn[Na],Jn=an(Ba),pa=Ba[1]/2+s,Ya=T(pa),Qa=p(pa),pi=Jn-Wn,di=pi>=0?1:-1,yi=di*pi,Ti=yi>n,oi=Oa*Ya;if(Ar.add(y(oi*di*T(yi),La*Qa+oi*p(yi))),yn+=Ti?pi+di*i:pi,Ti^Wn>=nr^Jn>=nr){var mo=ie(ne(Ln),ne(Ba));he(mo);var to=ie(on,mo);he(to);var Ka=(Ti^pi>=0?-1:1)*k(to[2]);(Jt>Ka||Jt===Ka&&(mo[0]||mo[1]))&&(Tn+=Ti^pi>=0?1:-1)}}return(yn<-a||yn<a&&Ar<-a)^Tn&1}function Zr(mt,It,nr,Jt){return function(Cr){var on=It(Cr),yn=nn(),Tn=It(yn),Cn=!1,Vn,xn,zn,Ln={point:Wn,lineStart:Oa,lineEnd:La,polygonStart:function(){Ln.point=Na,Ln.lineStart=Ba,Ln.lineEnd=Jn,xn=[],Vn=[]},polygonEnd:function(){Ln.point=Wn,Ln.lineStart=Oa,Ln.lineEnd=La,xn=l.merge(xn);var pa=rn(Vn,Jt);xn.length?(Cn||(Cr.polygonStart(),Cn=!0),dn(xn,zt,pa,nr,Cr)):pa&&(Cn||(Cr.polygonStart(),Cn=!0),Cr.lineStart(),nr(null,null,1,Cr),Cr.lineEnd()),Cn&&(Cr.polygonEnd(),Cn=!1),xn=Vn=null},sphere:function(){Cr.polygonStart(),Cr.lineStart(),nr(null,null,1,Cr),Cr.lineEnd(),Cr.polygonEnd()}};function Wn(pa,Ya){mt(pa,Ya)&&Cr.point(pa,Ya)}function $n(pa,Ya){on.point(pa,Ya)}function Oa(){Ln.point=$n,on.lineStart()}function La(){Ln.point=Wn,on.lineEnd()}function Na(pa,Ya){zn.push([pa,Ya]),Tn.point(pa,Ya)}function Ba(){Tn.lineStart(),zn=[]}function Jn(){Na(zn[0][0],zn[0][1]),Tn.lineEnd();var pa=Tn.clean(),Ya=yn.result(),Qa,pi=Ya.length,di,yi,Ti;if(zn.pop(),Vn.push(zn),zn=null,!!pi){if(pa&1){if(yi=Ya[0],(di=yi.length-1)>0){for(Cn||(Cr.polygonStart(),Cn=!0),Cr.lineStart(),Qa=0;Qa<di;++Qa)Cr.point((Ti=yi[Qa])[0],Ti[1]);Cr.lineEnd()}return}pi>1&&pa&2&&Ya.push(Ya.pop().concat(Ya.shift())),xn.push(Ya.filter(at))}}return Ln}}function at(mt){return mt.length>1}function zt(mt,It){return((mt=mt.x)[0]<0?mt[1]-c-a:c-mt[1])-((It=It.x)[0]<0?It[1]-c-a:c-It[1])}var er=Zr(function(){return!0},hr,Rr,[-n,-c]);function hr(mt){var It=NaN,nr=NaN,Jt=NaN,Cr;return{lineStart:function(){mt.lineStart(),Cr=1},point:function(on,yn){var Tn=on>0?n:-n,Cn=g(on-It);g(Cn-n)<a?(mt.point(It,nr=(nr+yn)/2>0?c:-c),mt.point(Jt,nr),mt.lineEnd(),mt.lineStart(),mt.point(Tn,nr),mt.point(on,nr),Cr=0):Jt!==Tn&&Cn>=n&&(g(It-Jt)<a&&(It-=Jt*a),g(on-Tn)<a&&(on-=Tn*a),nr=Vr(It,nr,on,yn),mt.point(Jt,nr),mt.lineEnd(),mt.lineStart(),mt.point(Tn,nr),Cr=0),mt.point(It=on,nr=yn),Jt=Tn},lineEnd:function(){mt.lineEnd(),It=nr=NaN},clean:function(){return 2-Cr}}}function Vr(mt,It,nr,Jt){var Cr,on,yn=T(mt-nr);return g(yn)>a?h((T(It)*(on=p(Jt))*T(nr)-T(Jt)*(Cr=p(It))*T(mt))/(Cr*on*yn)):(It+Jt)/2}function Rr(mt,It,nr,Jt){var Cr;if(mt==null)Cr=nr*c,Jt.point(-n,Cr),Jt.point(0,Cr),Jt.point(n,Cr),Jt.point(n,0),Jt.point(n,-Cr),Jt.point(0,-Cr),Jt.point(-n,-Cr),Jt.point(-n,0),Jt.point(-n,Cr);else if(g(mt[0]-It[0])>a){var on=mt[0]<It[0]?n:-n;Cr=nr*on/2,Jt.point(-on,Cr),Jt.point(0,Cr),Jt.point(on,Cr)}else Jt.point(It[0],It[1])}function Er(mt){var It=p(mt),nr=6*u,Jt=It>0,Cr=g(It)>a;function on(xn,zn,Ln,Wn){Lr(Wn,mt,nr,Ln,xn,zn)}function yn(xn,zn){return p(xn)*p(zn)>It}function Tn(xn){var zn,Ln,Wn,$n,Oa;return{lineStart:function(){$n=Wn=!1,Oa=1},point:function(La,Na){var Ba=[La,Na],Jn,pa=yn(La,Na),Ya=Jt?pa?0:Vn(La,Na):pa?Vn(La+(La<0?n:-n),Na):0;if(!zn&&($n=Wn=pa)&&xn.lineStart(),pa!==Wn&&(Jn=Cn(zn,Ba),(!Jn||yr(zn,Jn)||yr(Ba,Jn))&&(Ba[2]=1)),pa!==Wn)Oa=0,pa?(xn.lineStart(),Jn=Cn(Ba,zn),xn.point(Jn[0],Jn[1])):(Jn=Cn(zn,Ba),xn.point(Jn[0],Jn[1],2),xn.lineEnd()),zn=Jn;else if(Cr&&zn&&Jt^pa){var Qa;!(Ya&Ln)&&(Qa=Cn(Ba,zn,!0))&&(Oa=0,Jt?(xn.lineStart(),xn.point(Qa[0][0],Qa[0][1]),xn.point(Qa[1][0],Qa[1][1]),xn.lineEnd()):(xn.point(Qa[1][0],Qa[1][1]),xn.lineEnd(),xn.lineStart(),xn.point(Qa[0][0],Qa[0][1],3)))}pa&&(!zn||!yr(zn,Ba))&&xn.point(Ba[0],Ba[1]),zn=Ba,Wn=pa,Ln=Ya},lineEnd:function(){Wn&&xn.lineEnd(),zn=null},clean:function(){return Oa|($n&&Wn)<<1}}}function Cn(xn,zn,Ln){var Wn=ne(xn),$n=ne(zn),Oa=[1,0,0],La=ie(Wn,$n),Na=ae(La,La),Ba=La[0],Jn=Na-Ba*Ba;if(!Jn)return!Ln&&xn;var pa=It*Na/Jn,Ya=-It*Ba/Jn,Qa=ie(Oa,La),pi=xe(Oa,pa),di=xe(La,Ya);ue(pi,di);var yi=Qa,Ti=ae(pi,yi),oi=ae(yi,yi),mo=Ti*Ti-oi*(ae(pi,pi)-1);if(!(mo<0)){var to=f(mo),Ka=xe(yi,(-Ti-to)/oi);if(ue(Ka,pi),Ka=Q(Ka),!Ln)return Ka;var ga=xn[0],mi=zn[0],fo=xn[1],po=zn[1],ds;mi<ga&&(ds=ga,ga=mi,mi=ds);var Fs=mi-ga,Bo=g(Fs-n)<a,pl=Bo||Fs<a;if(!Bo&&po<fo&&(ds=fo,fo=po,po=ds),pl?Bo?fo+po>0^Ka[1]<(g(Ka[0]-ga)<a?fo:po):fo<=Ka[1]&&Ka[1]<=po:Fs>n^(ga<=Ka[0]&&Ka[0]<=mi)){var Ms=xe(yi,(-Ti+to)/oi);return ue(Ms,pi),[Ka,Q(Ms)]}}}function Vn(xn,zn){var Ln=Jt?mt:n-mt,Wn=0;return xn<-Ln?Wn|=1:xn>Ln&&(Wn|=2),zn<-Ln?Wn|=4:zn>Ln&&(Wn|=8),Wn}return Zr(yn,Tn,on,Jt?[0,-mt]:[-n,mt-n])}function xr(mt,It,nr,Jt,Cr,on){var yn=mt[0],Tn=mt[1],Cn=It[0],Vn=It[1],xn=0,zn=1,Ln=Cn-yn,Wn=Vn-Tn,$n;if($n=nr-yn,!(!Ln&&$n>0)){if($n/=Ln,Ln<0){if($n<xn)return;$n<zn&&(zn=$n)}else if(Ln>0){if($n>zn)return;$n>xn&&(xn=$n)}if($n=Cr-yn,!(!Ln&&$n<0)){if($n/=Ln,Ln<0){if($n>zn)return;$n>xn&&(xn=$n)}else if(Ln>0){if($n<xn)return;$n<zn&&(zn=$n)}if($n=Jt-Tn,!(!Wn&&$n>0)){if($n/=Wn,Wn<0){if($n<xn)return;$n<zn&&(zn=$n)}else if(Wn>0){if($n>zn)return;$n>xn&&(xn=$n)}if($n=on-Tn,!(!Wn&&$n<0)){if($n/=Wn,Wn<0){if($n>zn)return;$n>xn&&(xn=$n)}else if(Wn>0){if($n<xn)return;$n<zn&&(zn=$n)}return xn>0&&(mt[0]=yn+xn*Ln,mt[1]=Tn+xn*Wn),zn<1&&(It[0]=yn+zn*Ln,It[1]=Tn+zn*Wn),!0}}}}}var Wr=1e9,Rn=-Wr;function En(mt,It,nr,Jt){function Cr(Vn,xn){return mt<=Vn&&Vn<=nr&&It<=xn&&xn<=Jt}function on(Vn,xn,zn,Ln){var Wn=0,$n=0;if(Vn==null||(Wn=yn(Vn,zn))!==($n=yn(xn,zn))||Cn(Vn,xn)<0^zn>0)do Ln.point(Wn===0||Wn===3?mt:nr,Wn>1?Jt:It);while((Wn=(Wn+zn+4)%4)!==$n);else Ln.point(xn[0],xn[1])}function yn(Vn,xn){return g(Vn[0]-mt)<a?xn>0?0:3:g(Vn[0]-nr)<a?xn>0?2:1:g(Vn[1]-It)<a?xn>0?1:0:xn>0?3:2}function Tn(Vn,xn){return Cn(Vn.x,xn.x)}function Cn(Vn,xn){var zn=yn(Vn,1),Ln=yn(xn,1);return zn!==Ln?zn-Ln:zn===0?xn[1]-Vn[1]:zn===1?Vn[0]-xn[0]:zn===2?Vn[1]-xn[1]:xn[0]-Vn[0]}return function(Vn){var xn=Vn,zn=nn(),Ln,Wn,$n,Oa,La,Na,Ba,Jn,pa,Ya,Qa,pi={point:di,lineStart:mo,lineEnd:to,polygonStart:Ti,polygonEnd:oi};function di(ga,mi){Cr(ga,mi)&&xn.point(ga,mi)}function yi(){for(var ga=0,mi=0,fo=Wn.length;mi<fo;++mi)for(var po=Wn[mi],ds=1,Fs=po.length,Bo=po[0],pl,Ms,gs=Bo[0],xo=Bo[1];ds<Fs;++ds)pl=gs,Ms=xo,Bo=po[ds],gs=Bo[0],xo=Bo[1],Ms<=Jt?xo>Jt&&(gs-pl)*(Jt-Ms)>(xo-Ms)*(mt-pl)&&++ga:xo<=Jt&&(gs-pl)*(Jt-Ms)<(xo-Ms)*(mt-pl)&&--ga;return ga}function Ti(){xn=zn,Ln=[],Wn=[],Qa=!0}function oi(){var ga=yi(),mi=Qa&&ga,fo=(Ln=l.merge(Ln)).length;(mi||fo)&&(Vn.polygonStart(),mi&&(Vn.lineStart(),on(null,null,1,Vn),Vn.lineEnd()),fo&&dn(Ln,Tn,ga,on,Vn),Vn.polygonEnd()),xn=Vn,Ln=Wn=$n=null}function mo(){pi.point=Ka,Wn&&Wn.push($n=[]),Ya=!0,pa=!1,Ba=Jn=NaN}function to(){Ln&&(Ka(Oa,La),Na&&pa&&zn.rejoin(),Ln.push(zn.result())),pi.point=di,pa&&xn.lineEnd()}function Ka(ga,mi){var fo=Cr(ga,mi);if(Wn&&$n.push([ga,mi]),Ya)Oa=ga,La=mi,Na=fo,Ya=!1,fo&&(xn.lineStart(),xn.point(ga,mi));else if(fo&&pa)xn.point(ga,mi);else{var po=[Ba=Math.max(Rn,Math.min(Wr,Ba)),Jn=Math.max(Rn,Math.min(Wr,Jn))],ds=[ga=Math.max(Rn,Math.min(Wr,ga)),mi=Math.max(Rn,Math.min(Wr,mi))];xr(po,ds,mt,It,nr,Jt)?(pa||(xn.lineStart(),xn.point(po[0],po[1])),xn.point(ds[0],ds[1]),fo||xn.lineEnd(),Qa=!1):fo&&(xn.lineStart(),xn.point(ga,mi),Qa=!1)}Ba=ga,Jn=mi,pa=fo}return pi}}function ea(){var mt=0,It=0,nr=960,Jt=500,Cr,on,yn;return yn={stream:function(Tn){return Cr&&on===Tn?Cr:Cr=En(mt,It,nr,Jt)(on=Tn)},extent:function(Tn){return arguments.length?(mt=+Tn[0][0],It=+Tn[0][1],nr=+Tn[1][0],Jt=+Tn[1][1],Cr=on=null,yn):[[mt,It],[nr,Jt]]}}}var ia=b(),Aa,ya,pr,vn={sphere:z,point:z,lineStart:$r,lineEnd:z,polygonStart:z,polygonEnd:z};function $r(){vn.point=Bn,vn.lineEnd=Fn}function Fn(){vn.point=vn.lineEnd=z}function Bn(mt,It){mt*=u,It*=u,Aa=mt,ya=T(It),pr=p(It),vn.point=ca}function ca(mt,It){mt*=u,It*=u;var nr=T(It),Jt=p(It),Cr=g(mt-Aa),on=p(Cr),yn=T(Cr),Tn=Jt*yn,Cn=pr*nr-ya*Jt*on,Vn=ya*nr+pr*Jt*on;ia.add(y(f(Tn*Tn+Cn*Cn),Vn)),Aa=mt,ya=nr,pr=Jt}function ta(mt){return ia.reset(),G(mt,vn),+ia}var Un=[null,null],la={type:"LineString",coordinates:Un};function da(mt,It){return Un[0]=mt,Un[1]=It,ta(la)}var ur={Feature:function(mt,It){return sn(mt.geometry,It)},FeatureCollection:function(mt,It){for(var nr=mt.features,Jt=-1,Cr=nr.length;++Jt<Cr;)if(sn(nr[Jt].geometry,It))return!0;return!1}},Dr={Sphere:function(){return!0},Point:function(mt,It){return tn(mt.coordinates,It)},MultiPoint:function(mt,It){for(var nr=mt.coordinates,Jt=-1,Cr=nr.length;++Jt<Cr;)if(tn(nr[Jt],It))return!0;return!1},LineString:function(mt,It){return mn(mt.coordinates,It)},MultiLineString:function(mt,It){for(var nr=mt.coordinates,Jt=-1,Cr=nr.length;++Jt<Cr;)if(mn(nr[Jt],It))return!0;return!1},Polygon:function(mt,It){return wn(mt.coordinates,It)},MultiPolygon:function(mt,It){for(var nr=mt.coordinates,Jt=-1,Cr=nr.length;++Jt<Cr;)if(wn(nr[Jt],It))return!0;return!1},GeometryCollection:function(mt,It){for(var nr=mt.geometries,Jt=-1,Cr=nr.length;++Jt<Cr;)if(sn(nr[Jt],It))return!0;return!1}};function sn(mt,It){return mt&&Dr.hasOwnProperty(mt.type)?Dr[mt.type](mt,It):!1}function tn(mt,It){return da(mt,It)===0}function mn(mt,It){for(var nr,Jt,Cr,on=0,yn=mt.length;on<yn;on++){if(Jt=da(mt[on],It),Jt===0||on>0&&(Cr=da(mt[on],mt[on-1]),Cr>0&&nr<=Cr&&Jt<=Cr&&(nr+Jt-Cr)*(1-Math.pow((nr-Jt)/Cr,2))<r*Cr))return!0;nr=Jt}return!1}function wn(mt,It){return!!rn(mt.map(gn),mr(It))}function gn(mt){return mt=mt.map(mr),mt.pop(),mt}function mr(mt){return[mt[0]*u,mt[1]*u]}function rr(mt,It){return(mt&&ur.hasOwnProperty(mt.type)?ur[mt.type]:sn)(mt,It)}function zr(mt,It,nr){var Jt=l.range(mt,It-a,nr).concat(It);return function(Cr){return Jt.map(function(on){return[Cr,on]})}}function jr(mt,It,nr){var Jt=l.range(mt,It-a,nr).concat(It);return function(Cr){return Jt.map(function(on){return[on,Cr]})}}function Sn(){var mt,It,nr,Jt,Cr,on,yn,Tn,Cn=10,Vn=Cn,xn=90,zn=360,Ln,Wn,$n,Oa,La=2.5;function Na(){return{type:"MultiLineString",coordinates:Ba()}}function Ba(){return l.range(A(Jt/xn)*xn,nr,xn).map($n).concat(l.range(A(Tn/zn)*zn,yn,zn).map(Oa)).concat(l.range(A(It/Cn)*Cn,mt,Cn).filter(function(Jn){return g(Jn%xn)>a}).map(Ln)).concat(l.range(A(on/Vn)*Vn,Cr,Vn).filter(function(Jn){return g(Jn%zn)>a}).map(Wn))}return Na.lines=function(){return Ba().map(function(Jn){return{type:"LineString",coordinates:Jn}})},Na.outline=function(){return{type:"Polygon",coordinates:[$n(Jt).concat(Oa(yn).slice(1),$n(nr).reverse().slice(1),Oa(Tn).reverse().slice(1))]}},Na.extent=function(Jn){return arguments.length?Na.extentMajor(Jn).extentMinor(Jn):Na.extentMinor()},Na.extentMajor=function(Jn){return arguments.length?(Jt=+Jn[0][0],nr=+Jn[1][0],Tn=+Jn[0][1],yn=+Jn[1][1],Jt>nr&&(Jn=Jt,Jt=nr,nr=Jn),Tn>yn&&(Jn=Tn,Tn=yn,yn=Jn),Na.precision(La)):[[Jt,Tn],[nr,yn]]},Na.extentMinor=function(Jn){return arguments.length?(It=+Jn[0][0],mt=+Jn[1][0],on=+Jn[0][1],Cr=+Jn[1][1],It>mt&&(Jn=It,It=mt,mt=Jn),on>Cr&&(Jn=on,on=Cr,Cr=Jn),Na.precision(La)):[[It,on],[mt,Cr]]},Na.step=function(Jn){return arguments.length?Na.stepMajor(Jn).stepMinor(Jn):Na.stepMinor()},Na.stepMajor=function(Jn){return arguments.length?(xn=+Jn[0],zn=+Jn[1],Na):[xn,zn]},Na.stepMinor=function(Jn){return arguments.length?(Cn=+Jn[0],Vn=+Jn[1],Na):[Cn,Vn]},Na.precision=function(Jn){return arguments.length?(La=+Jn,Ln=zr(on,Cr,90),Wn=jr(It,mt,La),$n=zr(Tn,yn,90),Oa=jr(Jt,nr,La),Na):La},Na.extentMajor([[-180,-90+a],[180,90-a]]).extentMinor([[-180,-80-a],[180,80+a]])}function On(){return Sn()()}function aa(mt,It){var nr=mt[0]*u,Jt=mt[1]*u,Cr=It[0]*u,on=It[1]*u,yn=p(Jt),Tn=T(Jt),Cn=p(on),Vn=T(on),xn=yn*p(nr),zn=yn*T(nr),Ln=Cn*p(Cr),Wn=Cn*T(Cr),$n=2*k(f(P(on-Jt)+yn*Cn*P(Cr-nr))),Oa=T($n),La=$n?function(Na){var Ba=T(Na*=$n)/Oa,Jn=T($n-Na)/Oa,pa=Jn*xn+Ba*Ln,Ya=Jn*zn+Ba*Wn,Qa=Jn*Tn+Ba*Vn;return[y(Ya,pa)*v,y(Qa,f(pa*pa+Ya*Ya))*v]}:function(){return[nr*v,Jt*v]};return La.distance=$n,La}function Zn(mt){return mt}var Hn=b(),pn=b(),In,Yn,ua,Ha,ka={point:z,lineStart:z,lineEnd:z,polygonStart:function(){ka.lineStart=Ys,ka.lineEnd=Ls},polygonEnd:function(){ka.lineStart=ka.lineEnd=ka.point=z,Hn.add(g(pn)),pn.reset()},result:function(){var mt=Hn/2;return Hn.reset(),mt}};function Ys(){ka.point=No}function No(mt,It){ka.point=es,In=ua=mt,Yn=Ha=It}function es(mt,It){pn.add(Ha*mt-ua*It),ua=mt,Ha=It}function Ls(){es(In,Yn)}var eo=1/0,Pi=eo,Ws=-eo,Xs=Ws,ts={point:Ml,lineStart:z,lineEnd:z,polygonStart:z,polygonEnd:z,result:function(){var mt=[[eo,Pi],[Ws,Xs]];return Ws=Xs=-(Pi=eo=1/0),mt}};function Ml(mt,It){mt<eo&&(eo=mt),mt>Ws&&(Ws=mt),It<Pi&&(Pi=It),It>Xs&&(Xs=It)}var Nl=0,xu=0,hi=0,ol=0,js=0,Ui=0,So=0,Bl=0,_s=0,Di,Sl,Ji,Fi,io={point:Qi,lineStart:us,lineEnd:rs,polygonStart:function(){io.lineStart=Uu,io.lineEnd=Zs},polygonEnd:function(){io.point=Qi,io.lineStart=us,io.lineEnd=rs},result:function(){var mt=_s?[So/_s,Bl/_s]:Ui?[ol/Ui,js/Ui]:hi?[Nl/hi,xu/hi]:[NaN,NaN];return Nl=xu=hi=ol=js=Ui=So=Bl=_s=0,mt}};function Qi(mt,It){Nl+=mt,xu+=It,++hi}function us(){io.point=sl}function sl(mt,It){io.point=Bu,Qi(Ji=mt,Fi=It)}function Bu(mt,It){var nr=mt-Ji,Jt=It-Fi,Cr=f(nr*nr+Jt*Jt);ol+=Cr*(Ji+mt)/2,js+=Cr*(Fi+It)/2,Ui+=Cr,Qi(Ji=mt,Fi=It)}function rs(){io.point=Qi}function Uu(){io.point=ko}function Zs(){ff(Di,Sl)}function ko(mt,It){io.point=ff,Qi(Di=Ji=mt,Sl=Fi=It)}function ff(mt,It){var nr=mt-Ji,Jt=It-Fi,Cr=f(nr*nr+Jt*Jt);ol+=Cr*(Ji+mt)/2,js+=Cr*(Fi+It)/2,Ui+=Cr,Cr=Fi*mt-Ji*It,So+=Cr*(Ji+mt),Bl+=Cr*(Fi+It),_s+=Cr*3,Qi(Ji=mt,Fi=It)}function Ks(mt){this._context=mt}Ks.prototype={_radius:4.5,pointRadius:function(mt){return this._radius=mt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(mt,It){switch(this._point){case 0:{this._context.moveTo(mt,It),this._point=1;break}case 1:{this._context.lineTo(mt,It);break}default:{this._context.moveTo(mt+this._radius,It),this._context.arc(mt,It,this._radius,0,i);break}}},result:z};var Ps=b(),nu,cf,hf,ll,au,Ds={point:z,lineStart:function(){Ds.point=bu},lineEnd:function(){nu&&kl(cf,hf),Ds.point=z},polygonStart:function(){nu=!0},polygonEnd:function(){nu=null},result:function(){var mt=+Ps;return Ps.reset(),mt}};function bu(mt,It){Ds.point=kl,cf=ll=mt,hf=au=It}function kl(mt,It){ll-=mt,au-=It,Ps.add(f(ll*ll+au*au)),ll=mt,au=It}function _u(){this._string=[]}_u.prototype={_radius:4.5,_circle:Hu(4.5),pointRadius:function(mt){return(mt=+mt)!==this._radius&&(this._radius=mt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(mt,It){switch(this._point){case 0:{this._string.push("M",mt,",",It),this._point=1;break}case 1:{this._string.push("L",mt,",",It);break}default:{this._circle==null&&(this._circle=Hu(this._radius)),this._string.push("M",mt,",",It,this._circle);break}}},result:function(){if(this._string.length){var mt=this._string.join("");return this._string=[],mt}else return null}};function Hu(mt){return"m0,"+mt+"a"+mt+","+mt+" 0 1,1 0,"+-2*mt+"a"+mt+","+mt+" 0 1,1 0,"+2*mt+"z"}function iu(mt,It){var nr=4.5,Jt,Cr;function on(yn){return yn&&(typeof nr=="function"&&Cr.pointRadius(+nr.apply(this,arguments)),G(yn,Jt(Cr))),Cr.result()}return on.area=function(yn){return G(yn,Jt(ka)),ka.result()},on.measure=function(yn){return G(yn,Jt(Ds)),Ds.result()},on.bounds=function(yn){return G(yn,Jt(ts)),ts.result()},on.centroid=function(yn){return G(yn,Jt(io)),io.result()},on.projection=function(yn){return arguments.length?(Jt=yn==null?(mt=null,Zn):(mt=yn).stream,on):mt},on.context=function(yn){return arguments.length?(Cr=yn==null?(It=null,new _u):new Ks(It=yn),typeof nr!="function"&&Cr.pointRadius(nr),on):It},on.pointRadius=function(yn){return arguments.length?(nr=typeof yn=="function"?yn:(Cr.pointRadius(+yn),+yn),on):nr},on.projection(mt).context(It)}function vf(mt){return{stream:ul(mt)}}function ul(mt){return function(It){var nr=new wu;for(var Jt in mt)nr[Jt]=mt[Jt];return nr.stream=It,nr}}function wu(){}wu.prototype={constructor:wu,point:function(mt,It){this.stream.point(mt,It)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function ou(mt,It,nr){var Jt=mt.clipExtent&&mt.clipExtent();return mt.scale(150).translate([0,0]),Jt!=null&&mt.clipExtent(null),G(nr,mt.stream(ts)),It(ts.result()),Jt!=null&&mt.clipExtent(Jt),mt}function ws(mt,It,nr){return ou(mt,function(Jt){var Cr=It[1][0]-It[0][0],on=It[1][1]-It[0][1],yn=Math.min(Cr/(Jt[1][0]-Jt[0][0]),on/(Jt[1][1]-Jt[0][1])),Tn=+It[0][0]+(Cr-yn*(Jt[1][0]+Jt[0][0]))/2,Cn=+It[0][1]+(on-yn*(Jt[1][1]+Jt[0][1]))/2;mt.scale(150*yn).translate([Tn,Cn])},nr)}function Ul(mt,It,nr){return ws(mt,[[0,0],It],nr)}function Tu(mt,It,nr){return ou(mt,function(Jt){var Cr=+It,on=Cr/(Jt[1][0]-Jt[0][0]),yn=(Cr-on*(Jt[1][0]+Jt[0][0]))/2,Tn=-on*Jt[0][1];mt.scale(150*on).translate([yn,Tn])},nr)}function Vu(mt,It,nr){return ou(mt,function(Jt){var Cr=+It,on=Cr/(Jt[1][1]-Jt[0][1]),yn=-on*Jt[0][0],Tn=(Cr-on*(Jt[1][1]+Jt[0][1]))/2;mt.scale(150*on).translate([yn,Tn])},nr)}var Gu=16,su=p(30*u);function pf(mt,It){return+It?ns(mt,It):Yu(mt)}function Yu(mt){return ul({point:function(It,nr){It=mt(It,nr),this.stream.point(It[0],It[1])}})}function ns(mt,It){function nr(Jt,Cr,on,yn,Tn,Cn,Vn,xn,zn,Ln,Wn,$n,Oa,La){var Na=Vn-Jt,Ba=xn-Cr,Jn=Na*Na+Ba*Ba;if(Jn>4*It&&Oa--){var pa=yn+Ln,Ya=Tn+Wn,Qa=Cn+$n,pi=f(pa*pa+Ya*Ya+Qa*Qa),di=k(Qa/=pi),yi=g(g(Qa)-1)<a||g(on-zn)<a?(on+zn)/2:y(Ya,pa),Ti=mt(yi,di),oi=Ti[0],mo=Ti[1],to=oi-Jt,Ka=mo-Cr,ga=Ba*to-Na*Ka;(ga*ga/Jn>It||g((Na*to+Ba*Ka)/Jn-.5)>.3||yn*Ln+Tn*Wn+Cn*$n<su)&&(nr(Jt,Cr,on,yn,Tn,Cn,oi,mo,yi,pa/=pi,Ya/=pi,Qa,Oa,La),La.point(oi,mo),nr(oi,mo,yi,pa,Ya,Qa,Vn,xn,zn,Ln,Wn,$n,Oa,La))}}return function(Jt){var Cr,on,yn,Tn,Cn,Vn,xn,zn,Ln,Wn,$n,Oa,La={point:Na,lineStart:Ba,lineEnd:pa,polygonStart:function(){Jt.polygonStart(),La.lineStart=Ya},polygonEnd:function(){Jt.polygonEnd(),La.lineStart=Ba}};function Na(di,yi){di=mt(di,yi),Jt.point(di[0],di[1])}function Ba(){zn=NaN,La.point=Jn,Jt.lineStart()}function Jn(di,yi){var Ti=ne([di,yi]),oi=mt(di,yi);nr(zn,Ln,xn,Wn,$n,Oa,zn=oi[0],Ln=oi[1],xn=di,Wn=Ti[0],$n=Ti[1],Oa=Ti[2],Gu,Jt),Jt.point(zn,Ln)}function pa(){La.point=Na,Jt.lineEnd()}function Ya(){Ba(),La.point=Qa,La.lineEnd=pi}function Qa(di,yi){Jn(Cr=di,yi),on=zn,yn=Ln,Tn=Wn,Cn=$n,Vn=Oa,La.point=Jn}function pi(){nr(zn,Ln,xn,Wn,$n,Oa,on,yn,Cr,Tn,Cn,Vn,Gu,Jt),La.lineEnd=pa,pa()}return La}}var El=ul({point:function(mt,It){this.stream.point(mt*u,It*u)}});function Cl(mt){return ul({point:function(It,nr){var Jt=mt(It,nr);return this.stream.point(Jt[0],Jt[1])}})}function Au(mt,It,nr,Jt,Cr){function on(yn,Tn){return yn*=Jt,Tn*=Cr,[It+mt*yn,nr-mt*Tn]}return on.invert=function(yn,Tn){return[(yn-It)/mt*Jt,(nr-Tn)/mt*Cr]},on}function Ts(mt,It,nr,Jt,Cr,on){var yn=p(on),Tn=T(on),Cn=yn*mt,Vn=Tn*mt,xn=yn/mt,zn=Tn/mt,Ln=(Tn*nr-yn*It)/mt,Wn=(Tn*It+yn*nr)/mt;function $n(Oa,La){return Oa*=Jt,La*=Cr,[Cn*Oa-Vn*La+It,nr-Vn*Oa-Cn*La]}return $n.invert=function(Oa,La){return[Jt*(xn*Oa-zn*La+Ln),Cr*(Wn-zn*Oa-xn*La)]},$n}function Eo(mt){return lu(function(){return mt})()}function lu(mt){var It,nr=150,Jt=480,Cr=250,on=0,yn=0,Tn=0,Cn=0,Vn=0,xn,zn=0,Ln=1,Wn=1,$n=null,Oa=er,La=null,Na,Ba,Jn,pa=Zn,Ya=.5,Qa,pi,di,yi,Ti;function oi(ga){return di(ga[0]*u,ga[1]*u)}function mo(ga){return ga=di.invert(ga[0],ga[1]),ga&&[ga[0]*v,ga[1]*v]}oi.stream=function(ga){return yi&&Ti===ga?yi:yi=El(Cl(xn)(Oa(Qa(pa(Ti=ga)))))},oi.preclip=function(ga){return arguments.length?(Oa=ga,$n=void 0,Ka()):Oa},oi.postclip=function(ga){return arguments.length?(pa=ga,La=Na=Ba=Jn=null,Ka()):pa},oi.clipAngle=function(ga){return arguments.length?(Oa=+ga?Er($n=ga*u):($n=null,er),Ka()):$n*v},oi.clipExtent=function(ga){return arguments.length?(pa=ga==null?(La=Na=Ba=Jn=null,Zn):En(La=+ga[0][0],Na=+ga[0][1],Ba=+ga[1][0],Jn=+ga[1][1]),Ka()):La==null?null:[[La,Na],[Ba,Jn]]},oi.scale=function(ga){return arguments.length?(nr=+ga,to()):nr},oi.translate=function(ga){return arguments.length?(Jt=+ga[0],Cr=+ga[1],to()):[Jt,Cr]},oi.center=function(ga){return arguments.length?(on=ga[0]%360*u,yn=ga[1]%360*u,to()):[on*v,yn*v]},oi.rotate=function(ga){return arguments.length?(Tn=ga[0]%360*u,Cn=ga[1]%360*u,Vn=ga.length>2?ga[2]%360*u:0,to()):[Tn*v,Cn*v,Vn*v]},oi.angle=function(ga){return arguments.length?(zn=ga%360*u,to()):zn*v},oi.reflectX=function(ga){return arguments.length?(Ln=ga?-1:1,to()):Ln<0},oi.reflectY=function(ga){return arguments.length?(Wn=ga?-1:1,to()):Wn<0},oi.precision=function(ga){return arguments.length?(Qa=pf(pi,Ya=ga*ga),Ka()):f(Ya)},oi.fitExtent=function(ga,mi){return ws(oi,ga,mi)},oi.fitSize=function(ga,mi){return Ul(oi,ga,mi)},oi.fitWidth=function(ga,mi){return Tu(oi,ga,mi)},oi.fitHeight=function(ga,mi){return Vu(oi,ga,mi)};function to(){var ga=Ts(nr,0,0,Ln,Wn,zn).apply(null,It(on,yn)),mi=(zn?Ts:Au)(nr,Jt-ga[0],Cr-ga[1],Ln,Wn,zn);return xn=yt(Tn,Cn,Vn),pi=ot(It,mi),di=ot(xn,pi),Qa=pf(pi,Ya),Ka()}function Ka(){return yi=Ti=null,oi}return function(){return It=mt.apply(this,arguments),oi.invert=It.invert&&mo,to()}}function Rs(mt){var It=0,nr=n/3,Jt=lu(mt),Cr=Jt(It,nr);return Cr.parallels=function(on){return arguments.length?Jt(It=on[0]*u,nr=on[1]*u):[It*v,nr*v]},Cr}function Is(mt){var It=p(mt);function nr(Jt,Cr){return[Jt*It,T(Cr)/It]}return nr.invert=function(Jt,Cr){return[Jt/It,k(Cr*It)]},nr}function lo(mt,It){var nr=T(mt),Jt=(nr+T(It))/2;if(g(Jt)<a)return Is(mt);var Cr=1+nr*(2*Jt-nr),on=f(Cr)/Jt;function yn(Tn,Cn){var Vn=f(Cr-2*Jt*T(Cn))/Jt;return[Vn*T(Tn*=Jt),on-Vn*p(Tn)]}return yn.invert=function(Tn,Cn){var Vn=on-Cn,xn=y(Tn,g(Vn))*_(Vn);return Vn*Jt<0&&(xn-=n*_(Tn)*_(Vn)),[xn/Jt,k((Cr-(Tn*Tn+Vn*Vn)*Jt*Jt)/(2*Jt))]},yn}function Hl(){return Rs(lo).scale(155.424).center([0,33.6442])}function Vl(){return Hl().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function fl(mt){var It=mt.length;return{point:function(nr,Jt){for(var Cr=-1;++Cr<It;)mt[Cr].point(nr,Jt)},sphere:function(){for(var nr=-1;++nr<It;)mt[nr].sphere()},lineStart:function(){for(var nr=-1;++nr<It;)mt[nr].lineStart()},lineEnd:function(){for(var nr=-1;++nr<It;)mt[nr].lineEnd()},polygonStart:function(){for(var nr=-1;++nr<It;)mt[nr].polygonStart()},polygonEnd:function(){for(var nr=-1;++nr<It;)mt[nr].polygonEnd()}}}function As(){var mt,It,nr=Vl(),Jt,Cr=Hl().rotate([154,0]).center([-2,58.5]).parallels([55,65]),on,yn=Hl().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Tn,Cn,Vn={point:function(Ln,Wn){Cn=[Ln,Wn]}};function xn(Ln){var Wn=Ln[0],$n=Ln[1];return Cn=null,Jt.point(Wn,$n),Cn||(on.point(Wn,$n),Cn)||(Tn.point(Wn,$n),Cn)}xn.invert=function(Ln){var Wn=nr.scale(),$n=nr.translate(),Oa=(Ln[0]-$n[0])/Wn,La=(Ln[1]-$n[1])/Wn;return(La>=.12&&La<.234&&Oa>=-.425&&Oa<-.214?Cr:La>=.166&&La<.234&&Oa>=-.214&&Oa<-.115?yn:nr).invert(Ln)},xn.stream=function(Ln){return mt&&It===Ln?mt:mt=fl([nr.stream(It=Ln),Cr.stream(Ln),yn.stream(Ln)])},xn.precision=function(Ln){return arguments.length?(nr.precision(Ln),Cr.precision(Ln),yn.precision(Ln),zn()):nr.precision()},xn.scale=function(Ln){return arguments.length?(nr.scale(Ln),Cr.scale(Ln*.35),yn.scale(Ln),xn.translate(nr.translate())):nr.scale()},xn.translate=function(Ln){if(!arguments.length)return nr.translate();var Wn=nr.scale(),$n=+Ln[0],Oa=+Ln[1];return Jt=nr.translate(Ln).clipExtent([[$n-.455*Wn,Oa-.238*Wn],[$n+.455*Wn,Oa+.238*Wn]]).stream(Vn),on=Cr.translate([$n-.307*Wn,Oa+.201*Wn]).clipExtent([[$n-.425*Wn+a,Oa+.12*Wn+a],[$n-.214*Wn-a,Oa+.234*Wn-a]]).stream(Vn),Tn=yn.translate([$n-.205*Wn,Oa+.212*Wn]).clipExtent([[$n-.214*Wn+a,Oa+.166*Wn+a],[$n-.115*Wn-a,Oa+.234*Wn-a]]).stream(Vn),zn()},xn.fitExtent=function(Ln,Wn){return ws(xn,Ln,Wn)},xn.fitSize=function(Ln,Wn){return Ul(xn,Ln,Wn)},xn.fitWidth=function(Ln,Wn){return Tu(xn,Ln,Wn)},xn.fitHeight=function(Ln,Wn){return Vu(xn,Ln,Wn)};function zn(){return mt=It=null,xn}return xn.scale(1070)}function Gl(mt){return function(It,nr){var Jt=p(It),Cr=p(nr),on=mt(Jt*Cr);return[on*Cr*T(It),on*T(nr)]}}function Ll(mt){return function(It,nr){var Jt=f(It*It+nr*nr),Cr=mt(Jt),on=T(Cr),yn=p(Cr);return[y(It*on,Jt*yn),k(Jt&&nr*on/Jt)]}}var uu=Gl(function(mt){return f(2/(1+mt))});uu.invert=Ll(function(mt){return 2*k(mt/2)});function Yl(){return Eo(uu).scale(124.75).clipAngle(180-.001)}var cl=Gl(function(mt){return(mt=S(mt))&&mt/T(mt)});cl.invert=Ll(function(mt){return mt});function df(){return Eo(cl).scale(79.4188).clipAngle(180-.001)}function fs(mt,It){return[mt,M(L((c+It)/2))]}fs.invert=function(mt,It){return[mt,2*h(m(It))-c]};function zf(){return Mu(fs).scale(961/i)}function Mu(mt){var It=Eo(mt),nr=It.center,Jt=It.scale,Cr=It.translate,on=It.clipExtent,yn=null,Tn,Cn,Vn;It.scale=function(zn){return arguments.length?(Jt(zn),xn()):Jt()},It.translate=function(zn){return arguments.length?(Cr(zn),xn()):Cr()},It.center=function(zn){return arguments.length?(nr(zn),xn()):nr()},It.clipExtent=function(zn){return arguments.length?(zn==null?yn=Tn=Cn=Vn=null:(yn=+zn[0][0],Tn=+zn[0][1],Cn=+zn[1][0],Vn=+zn[1][1]),xn()):yn==null?null:[[yn,Tn],[Cn,Vn]]};function xn(){var zn=n*Jt(),Ln=It(wr(It.rotate()).invert([0,0]));return on(yn==null?[[Ln[0]-zn,Ln[1]-zn],[Ln[0]+zn,Ln[1]+zn]]:mt===fs?[[Math.max(Ln[0]-zn,yn),Tn],[Math.min(Ln[0]+zn,Cn),Vn]]:[[yn,Math.max(Ln[1]-zn,Tn)],[Cn,Math.min(Ln[1]+zn,Vn)]])}return xn()}function Pl(mt){return L((c+mt)/2)}function Wl(mt,It){var nr=p(mt),Jt=mt===It?T(mt):M(nr/p(It))/M(Pl(It)/Pl(mt)),Cr=nr*x(Pl(mt),Jt)/Jt;if(!Jt)return fs;function on(yn,Tn){Cr>0?Tn<-c+a&&(Tn=-c+a):Tn>c-a&&(Tn=c-a);var Cn=Cr/x(Pl(Tn),Jt);return[Cn*T(Jt*yn),Cr-Cn*p(Jt*yn)]}return on.invert=function(yn,Tn){var Cn=Cr-Tn,Vn=_(Jt)*f(yn*yn+Cn*Cn),xn=y(yn,g(Cn))*_(Cn);return Cn*Jt<0&&(xn-=n*_(yn)*_(Cn)),[xn/Jt,2*h(x(Cr/Vn,1/Jt))-c]},on}function hl(){return Rs(Wl).scale(109.5).parallels([30,30])}function Xl(mt,It){return[mt,It]}Xl.invert=Xl;function Wu(){return Eo(Xl).scale(152.63)}function Xu(mt,It){var nr=p(mt),Jt=mt===It?T(mt):(nr-p(It))/(It-mt),Cr=nr/Jt+mt;if(g(Jt)<a)return Xl;function on(yn,Tn){var Cn=Cr-Tn,Vn=Jt*yn;return[Cn*T(Vn),Cr-Cn*p(Vn)]}return on.invert=function(yn,Tn){var Cn=Cr-Tn,Vn=y(yn,g(Cn))*_(Cn);return Cn*Jt<0&&(Vn-=n*_(yn)*_(Cn)),[Vn/Jt,Cr-_(Jt)*f(yn*yn+Cn*Cn)]},on}function Ff(){return Rs(Xu).scale(131.154).center([0,13.9389])}var Ri=1.340264,Dl=-.081106,vl=893e-6,as=.003796,cs=f(3)/2,jl=12;function uo(mt,It){var nr=k(cs*T(It)),Jt=nr*nr,Cr=Jt*Jt*Jt;return[mt*p(nr)/(cs*(Ri+3*Dl*Jt+Cr*(7*vl+9*as*Jt))),nr*(Ri+Dl*Jt+Cr*(vl+as*Jt))]}uo.invert=function(mt,It){for(var nr=It,Jt=nr*nr,Cr=Jt*Jt*Jt,on=0,yn,Tn,Cn;on<jl&&(Tn=nr*(Ri+Dl*Jt+Cr*(vl+as*Jt))-It,Cn=Ri+3*Dl*Jt+Cr*(7*vl+9*as*Jt),nr-=yn=Tn/Cn,Jt=nr*nr,Cr=Jt*Jt*Jt,!(g(yn)<r));++on);return[cs*mt*(Ri+3*Dl*Jt+Cr*(7*vl+9*as*Jt))/p(nr),k(T(nr)/cs)]};function ju(){return Eo(uo).scale(177.158)}function hs(mt,It){var nr=p(It),Jt=p(mt)*nr;return[nr*T(mt)/Jt,T(It)/Jt]}hs.invert=Ll(h);function Js(){return Eo(hs).scale(144.049).clipAngle(60)}function Qs(){var mt=1,It=0,nr=0,Jt=1,Cr=1,on=0,yn,Tn,Cn=null,Vn,xn,zn,Ln=1,Wn=1,$n=ul({point:function(pa,Ya){var Qa=Jn([pa,Ya]);this.stream.point(Qa[0],Qa[1])}}),Oa=Zn,La,Na;function Ba(){return Ln=mt*Jt,Wn=mt*Cr,La=Na=null,Jn}function Jn(pa){var Ya=pa[0]*Ln,Qa=pa[1]*Wn;if(on){var pi=Qa*yn-Ya*Tn;Ya=Ya*yn+Qa*Tn,Qa=pi}return[Ya+It,Qa+nr]}return Jn.invert=function(pa){var Ya=pa[0]-It,Qa=pa[1]-nr;if(on){var pi=Qa*yn+Ya*Tn;Ya=Ya*yn-Qa*Tn,Qa=pi}return[Ya/Ln,Qa/Wn]},Jn.stream=function(pa){return La&&Na===pa?La:La=$n(Oa(Na=pa))},Jn.postclip=function(pa){return arguments.length?(Oa=pa,Cn=Vn=xn=zn=null,Ba()):Oa},Jn.clipExtent=function(pa){return arguments.length?(Oa=pa==null?(Cn=Vn=xn=zn=null,Zn):En(Cn=+pa[0][0],Vn=+pa[0][1],xn=+pa[1][0],zn=+pa[1][1]),Ba()):Cn==null?null:[[Cn,Vn],[xn,zn]]},Jn.scale=function(pa){return arguments.length?(mt=+pa,Ba()):mt},Jn.translate=function(pa){return arguments.length?(It=+pa[0],nr=+pa[1],Ba()):[It,nr]},Jn.angle=function(pa){return arguments.length?(on=pa%360*u,Tn=T(on),yn=p(on),Ba()):on*v},Jn.reflectX=function(pa){return arguments.length?(Jt=pa?-1:1,Ba()):Jt<0},Jn.reflectY=function(pa){return arguments.length?(Cr=pa?-1:1,Ba()):Cr<0},Jn.fitExtent=function(pa,Ya){return ws(Jn,pa,Ya)},Jn.fitSize=function(pa,Ya){return Ul(Jn,pa,Ya)},Jn.fitWidth=function(pa,Ya){return Tu(Jn,pa,Ya)},Jn.fitHeight=function(pa,Ya){return Vu(Jn,pa,Ya)},Jn}function zs(mt,It){var nr=It*It,Jt=nr*nr;return[mt*(.8707-.131979*nr+Jt*(-.013791+Jt*(.003971*nr-.001529*Jt))),It*(1.007226+nr*(.015085+Jt*(-.044475+.028874*nr-.005916*Jt)))]}zs.invert=function(mt,It){var nr=It,Jt=25,Cr;do{var on=nr*nr,yn=on*on;nr-=Cr=(nr*(1.007226+on*(.015085+yn*(-.044475+.028874*on-.005916*yn)))-It)/(1.007226+on*(.015085*3+yn*(-.044475*7+.028874*9*on-.005916*11*yn)))}while(g(Cr)>a&&--Jt>0);return[mt/(.8707+(on=nr*nr)*(-.131979+on*(-.013791+on*on*on*(.003971-.001529*on)))),nr]};function vs(){return Eo(zs).scale(175.295)}function Hi(mt,It){return[p(It)*T(mt),T(It)]}Hi.invert=Ll(k);function Co(){return Eo(Hi).scale(249.5).clipAngle(90+a)}function ps(mt,It){var nr=p(It),Jt=1+p(mt)*nr;return[nr*T(mt)/Jt,T(It)/Jt]}ps.invert=Ll(function(mt){return 2*h(mt)});function Zu(){return Eo(ps).scale(250).clipAngle(142)}function fu(mt,It){return[M(L((c+It)/2)),-mt]}fu.invert=function(mt,It){return[-It,2*h(m(mt))-c]};function Ku(){var mt=Mu(fu),It=mt.center,nr=mt.rotate;return mt.center=function(Jt){return arguments.length?It([-Jt[1],Jt[0]]):(Jt=It(),[Jt[1],-Jt[0]])},mt.rotate=function(Jt){return arguments.length?nr([Jt[0],Jt[1],Jt.length>2?Jt[2]+90:90]):(Jt=nr(),[Jt[0],Jt[1],Jt[2]-90])},nr([0,0,90]).scale(159.155)}d.geoAlbers=Vl,d.geoAlbersUsa=As,d.geoArea=j,d.geoAzimuthalEqualArea=Yl,d.geoAzimuthalEqualAreaRaw=uu,d.geoAzimuthalEquidistant=df,d.geoAzimuthalEquidistantRaw=cl,d.geoBounds=it,d.geoCentroid=Xe,d.geoCircle=Fr,d.geoClipAntimeridian=er,d.geoClipCircle=Er,d.geoClipExtent=ea,d.geoClipRectangle=En,d.geoConicConformal=hl,d.geoConicConformalRaw=Wl,d.geoConicEqualArea=Hl,d.geoConicEqualAreaRaw=lo,d.geoConicEquidistant=Ff,d.geoConicEquidistantRaw=Xu,d.geoContains=rr,d.geoDistance=da,d.geoEqualEarth=ju,d.geoEqualEarthRaw=uo,d.geoEquirectangular=Wu,d.geoEquirectangularRaw=Xl,d.geoGnomonic=Js,d.geoGnomonicRaw=hs,d.geoGraticule=Sn,d.geoGraticule10=On,d.geoIdentity=Qs,d.geoInterpolate=aa,d.geoLength=ta,d.geoMercator=zf,d.geoMercatorRaw=fs,d.geoNaturalEarth1=vs,d.geoNaturalEarth1Raw=zs,d.geoOrthographic=Co,d.geoOrthographicRaw=Hi,d.geoPath=iu,d.geoProjection=Eo,d.geoProjectionMutator=lu,d.geoRotation=wr,d.geoStereographic=Zu,d.geoStereographicRaw=ps,d.geoStream=G,d.geoTransform=vf,d.geoTransverseMercator=Ku,d.geoTransverseMercatorRaw=fu,Object.defineProperty(d,"__esModule",{value:!0})})},{"d3-array":107}],115:[function(t,B,H){(function(d,l){typeof H=="object"&&typeof B!="undefined"?l(H):(d=d||self,l(d.d3=d.d3||{}))})(this,function(d){function l(Qe,Ce){return Qe.parent===Ce.parent?1:2}function b(Qe){return Qe.reduce(w,0)/Qe.length}function w(Qe,Ce){return Qe+Ce.x}function e(Qe){return 1+Qe.reduce(o,0)}function o(Qe,Ce){return Math.max(Qe,Ce.y)}function a(Qe){for(var Ce;Ce=Qe.children;)Qe=Ce[0];return Qe}function r(Qe){for(var Ce;Ce=Qe.children;)Qe=Ce[Ce.length-1];return Qe}function n(){var Qe=l,Ce=1,je=1,rt=!1;function ut(Pt){var Tt,Ot=0;Pt.eachAfter(function(pt){var Et=pt.children;Et?(pt.x=b(Et),pt.y=e(Et)):(pt.x=Tt?Ot+=Qe(pt,Tt):0,pt.y=0,Tt=pt)});var Kt=a(Pt),Bt=r(Pt),Zt=Kt.x-Qe(Kt,Bt)/2,Je=Bt.x+Qe(Bt,Kt)/2;return Pt.eachAfter(rt?function(pt){pt.x=(pt.x-Pt.x)*Ce,pt.y=(Pt.y-pt.y)*je}:function(pt){pt.x=(pt.x-Zt)/(Je-Zt)*Ce,pt.y=(1-(Pt.y?pt.y/Pt.y:1))*je})}return ut.separation=function(Pt){return arguments.length?(Qe=Pt,ut):Qe},ut.size=function(Pt){return arguments.length?(rt=!1,Ce=+Pt[0],je=+Pt[1],ut):rt?null:[Ce,je]},ut.nodeSize=function(Pt){return arguments.length?(rt=!0,Ce=+Pt[0],je=+Pt[1],ut):rt?[Ce,je]:null},ut}function c(Qe){var Ce=0,je=Qe.children,rt=je&&je.length;if(!rt)Ce=1;else for(;--rt>=0;)Ce+=je[rt].value;Qe.value=Ce}function s(){return this.eachAfter(c)}function i(Qe){var Ce=this,je,rt=[Ce],ut,Pt,Tt;do for(je=rt.reverse(),rt=[];Ce=je.pop();)if(Qe(Ce),ut=Ce.children,ut)for(Pt=0,Tt=ut.length;Pt<Tt;++Pt)rt.push(ut[Pt]);while(rt.length);return this}function v(Qe){for(var Ce=this,je=[Ce],rt,ut;Ce=je.pop();)if(Qe(Ce),rt=Ce.children,rt)for(ut=rt.length-1;ut>=0;--ut)je.push(rt[ut]);return this}function u(Qe){for(var Ce=this,je=[Ce],rt=[],ut,Pt,Tt;Ce=je.pop();)if(rt.push(Ce),ut=Ce.children,ut)for(Pt=0,Tt=ut.length;Pt<Tt;++Pt)je.push(ut[Pt]);for(;Ce=rt.pop();)Qe(Ce);return this}function g(Qe){return this.eachAfter(function(Ce){for(var je=+Qe(Ce.data)||0,rt=Ce.children,ut=rt&&rt.length;--ut>=0;)je+=rt[ut].value;Ce.value=je})}function h(Qe){return this.eachBefore(function(Ce){Ce.children&&Ce.children.sort(Qe)})}function y(Qe){for(var Ce=this,je=p(Ce,Qe),rt=[Ce];Ce!==je;)Ce=Ce.parent,rt.push(Ce);for(var ut=rt.length;Qe!==je;)rt.splice(ut,0,Qe),Qe=Qe.parent;return rt}function p(Qe,Ce){if(Qe===Ce)return Qe;var je=Qe.ancestors(),rt=Ce.ancestors(),ut=null;for(Qe=je.pop(),Ce=rt.pop();Qe===Ce;)ut=Qe,Qe=je.pop(),Ce=rt.pop();return ut}function A(){for(var Qe=this,Ce=[Qe];Qe=Qe.parent;)Ce.push(Qe);return Ce}function m(){var Qe=[];return this.each(function(Ce){Qe.push(Ce)}),Qe}function M(){var Qe=[];return this.eachBefore(function(Ce){Ce.children||Qe.push(Ce)}),Qe}function x(){var Qe=this,Ce=[];return Qe.each(function(je){je!==Qe&&Ce.push({source:je.parent,target:je})}),Ce}function T(Qe,Ce){var je=new k(Qe),rt=+Qe.value&&(je.value=Qe.value),ut,Pt=[je],Tt,Ot,Kt,Bt;for(Ce==null&&(Ce=f);ut=Pt.pop();)if(rt&&(ut.value=+ut.data.value),(Ot=Ce(ut.data))&&(Bt=Ot.length))for(ut.children=new Array(Bt),Kt=Bt-1;Kt>=0;--Kt)Pt.push(Tt=ut.children[Kt]=new k(Ot[Kt])),Tt.parent=ut,Tt.depth=ut.depth+1;return je.eachBefore(S)}function _(){return T(this).eachBefore(L)}function f(Qe){return Qe.children}function L(Qe){Qe.data=Qe.data.data}function S(Qe){var Ce=0;do Qe.height=Ce;while((Qe=Qe.parent)&&Qe.height<++Ce)}function k(Qe){this.data=Qe,this.depth=this.height=0,this.parent=null}k.prototype=T.prototype={constructor:k,count:s,each:i,eachAfter:u,eachBefore:v,sum:g,sort:h,path:y,ancestors:A,descendants:m,leaves:M,links:x,copy:_};var P=Array.prototype.slice;function z(Qe){for(var Ce=Qe.length,je,rt;Ce;)rt=Math.random()*Ce--|0,je=Qe[Ce],Qe[Ce]=Qe[rt],Qe[rt]=je;return Qe}function I(Qe){for(var Ce=0,je=(Qe=z(P.call(Qe))).length,rt=[],ut,Pt;Ce<je;)ut=Qe[Ce],Pt&&O(Pt,ut)?++Ce:(Pt=G(rt=R(rt,ut)),Ce=0);return Pt}function R(Qe,Ce){var je,rt;if(F(Ce,Qe))return[Ce];for(je=0;je<Qe.length;++je)if(D(Ce,Qe[je])&&F(q(Qe[je],Ce),Qe))return[Qe[je],Ce];for(je=0;je<Qe.length-1;++je)for(rt=je+1;rt<Qe.length;++rt)if(D(q(Qe[je],Qe[rt]),Ce)&&D(q(Qe[je],Ce),Qe[rt])&&D(q(Qe[rt],Ce),Qe[je])&&F(J(Qe[je],Qe[rt],Ce),Qe))return[Qe[je],Qe[rt],Ce];throw new Error}function D(Qe,Ce){var je=Qe.r-Ce.r,rt=Ce.x-Qe.x,ut=Ce.y-Qe.y;return je<0||je*je<rt*rt+ut*ut}function O(Qe,Ce){var je=Qe.r-Ce.r+1e-6,rt=Ce.x-Qe.x,ut=Ce.y-Qe.y;return je>0&&je*je>rt*rt+ut*ut}function F(Qe,Ce){for(var je=0;je<Ce.length;++je)if(!O(Qe,Ce[je]))return!1;return!0}function G(Qe){switch(Qe.length){case 1:return W(Qe[0]);case 2:return q(Qe[0],Qe[1]);case 3:return J(Qe[0],Qe[1],Qe[2])}}function W(Qe){return{x:Qe.x,y:Qe.y,r:Qe.r}}function q(Qe,Ce){var je=Qe.x,rt=Qe.y,ut=Qe.r,Pt=Ce.x,Tt=Ce.y,Ot=Ce.r,Kt=Pt-je,Bt=Tt-rt,Zt=Ot-ut,Je=Math.sqrt(Kt*Kt+Bt*Bt);return{x:(je+Pt+Kt/Je*Zt)/2,y:(rt+Tt+Bt/Je*Zt)/2,r:(Je+ut+Ot)/2}}function J(Qe,Ce,je){var rt=Qe.x,ut=Qe.y,Pt=Qe.r,Tt=Ce.x,Ot=Ce.y,Kt=Ce.r,Bt=je.x,Zt=je.y,Je=je.r,pt=rt-Tt,Et=rt-Bt,ar=ut-Ot,vr=ut-Zt,ir=Kt-Pt,dr=Je-Pt,Pr=rt*rt+ut*ut-Pt*Pt,Sr=Pr-Tt*Tt-Ot*Ot+Kt*Kt,tr=Pr-Bt*Bt-Zt*Zt+Je*Je,Nr=Et*ar-pt*vr,et=(ar*tr-vr*Sr)/(Nr*2)-rt,we=(vr*ir-ar*dr)/Nr,Me=(Et*Sr-pt*tr)/(Nr*2)-ut,Re=(pt*dr-Et*ir)/Nr,Xe=we*we+Re*Re-1,$e=2*(Pt+et*we+Me*Re),ot=et*et+Me*Me-Pt*Pt,st=-(Xe?($e+Math.sqrt($e*$e-4*Xe*ot))/(2*Xe):ot/$e);return{x:rt+et+we*st,y:ut+Me+Re*st,r:st}}function X(Qe,Ce,je){var rt=Qe.x-Ce.x,ut,Pt,Tt=Qe.y-Ce.y,Ot,Kt,Bt=rt*rt+Tt*Tt;Bt?(Pt=Ce.r+je.r,Pt*=Pt,Kt=Qe.r+je.r,Kt*=Kt,Pt>Kt?(ut=(Bt+Kt-Pt)/(2*Bt),Ot=Math.sqrt(Math.max(0,Kt/Bt-ut*ut)),je.x=Qe.x-ut*rt-Ot*Tt,je.y=Qe.y-ut*Tt+Ot*rt):(ut=(Bt+Pt-Kt)/(2*Bt),Ot=Math.sqrt(Math.max(0,Pt/Bt-ut*ut)),je.x=Ce.x+ut*rt-Ot*Tt,je.y=Ce.y+ut*Tt+Ot*rt)):(je.x=Ce.x+je.r,je.y=Ce.y)}function Z(Qe,Ce){var je=Qe.r+Ce.r-1e-6,rt=Ce.x-Qe.x,ut=Ce.y-Qe.y;return je>0&&je*je>rt*rt+ut*ut}function se(Qe){var Ce=Qe._,je=Qe.next._,rt=Ce.r+je.r,ut=(Ce.x*je.r+je.x*Ce.r)/rt,Pt=(Ce.y*je.r+je.y*Ce.r)/rt;return ut*ut+Pt*Pt}function le(Qe){this._=Qe,this.next=null,this.previous=null}function oe(Qe){if(!(ut=Qe.length))return 0;var Ce,je,rt,ut,Pt,Tt,Ot,Kt,Bt,Zt,Je;if(Ce=Qe[0],Ce.x=0,Ce.y=0,!(ut>1))return Ce.r;if(je=Qe[1],Ce.x=-je.r,je.x=Ce.r,je.y=0,!(ut>2))return Ce.r+je.r;X(je,Ce,rt=Qe[2]),Ce=new le(Ce),je=new le(je),rt=new le(rt),Ce.next=rt.previous=je,je.next=Ce.previous=rt,rt.next=je.previous=Ce;e:for(Ot=3;Ot<ut;++Ot){X(Ce._,je._,rt=Qe[Ot]),rt=new le(rt),Kt=je.next,Bt=Ce.previous,Zt=je._.r,Je=Ce._.r;do if(Zt<=Je){if(Z(Kt._,rt._)){je=Kt,Ce.next=je,je.previous=Ce,--Ot;continue e}Zt+=Kt._.r,Kt=Kt.next}else{if(Z(Bt._,rt._)){Ce=Bt,Ce.next=je,je.previous=Ce,--Ot;continue e}Je+=Bt._.r,Bt=Bt.previous}while(Kt!==Bt.next);for(rt.previous=Ce,rt.next=je,Ce.next=je.previous=je=rt,Pt=se(Ce);(rt=rt.next)!==je;)(Tt=se(rt))<Pt&&(Ce=rt,Pt=Tt);je=Ce.next}for(Ce=[je._],rt=je;(rt=rt.next)!==je;)Ce.push(rt._);for(rt=I(Ce),Ot=0;Ot<ut;++Ot)Ce=Qe[Ot],Ce.x-=rt.x,Ce.y-=rt.y;return rt.r}function U(Qe){return oe(Qe),Qe}function V(Qe){return Qe==null?null:re(Qe)}function re(Qe){if(typeof Qe!="function")throw new Error;return Qe}function ee(){return 0}function j(Qe){return function(){return Qe}}function Q(Qe){return Math.sqrt(Qe.value)}function ne(){var Qe=null,Ce=1,je=1,rt=ee;function ut(Pt){return Pt.x=Ce/2,Pt.y=je/2,Qe?Pt.eachBefore(ae(Qe)).eachAfter(ie(rt,.5)).eachBefore(ue(1)):Pt.eachBefore(ae(Q)).eachAfter(ie(ee,1)).eachAfter(ie(rt,Pt.r/Math.min(Ce,je))).eachBefore(ue(Math.min(Ce,je)/(2*Pt.r))),Pt}return ut.radius=function(Pt){return arguments.length?(Qe=V(Pt),ut):Qe},ut.size=function(Pt){return arguments.length?(Ce=+Pt[0],je=+Pt[1],ut):[Ce,je]},ut.padding=function(Pt){return arguments.length?(rt=typeof Pt=="function"?Pt:j(+Pt),ut):rt},ut}function ae(Qe){return function(Ce){Ce.children||(Ce.r=Math.max(0,+Qe(Ce)||0))}}function ie(Qe,Ce){return function(je){if(rt=je.children){var rt,ut,Pt=rt.length,Tt=Qe(je)*Ce||0,Ot;if(Tt)for(ut=0;ut<Pt;++ut)rt[ut].r+=Tt;if(Ot=oe(rt),Tt)for(ut=0;ut<Pt;++ut)rt[ut].r-=Tt;je.r=Ot+Tt}}}function ue(Qe){return function(Ce){var je=Ce.parent;Ce.r*=Qe,je&&(Ce.x=je.x+Qe*Ce.x,Ce.y=je.y+Qe*Ce.y)}}function xe(Qe){Qe.x0=Math.round(Qe.x0),Qe.y0=Math.round(Qe.y0),Qe.x1=Math.round(Qe.x1),Qe.y1=Math.round(Qe.y1)}function he(Qe,Ce,je,rt,ut){for(var Pt=Qe.children,Tt,Ot=-1,Kt=Pt.length,Bt=Qe.value&&(rt-Ce)/Qe.value;++Ot<Kt;)Tt=Pt[Ot],Tt.y0=je,Tt.y1=ut,Tt.x0=Ce,Tt.x1=Ce+=Tt.value*Bt}function ge(){var Qe=1,Ce=1,je=0,rt=!1;function ut(Tt){var Ot=Tt.height+1;return Tt.x0=Tt.y0=je,Tt.x1=Qe,Tt.y1=Ce/Ot,Tt.eachBefore(Pt(Ce,Ot)),rt&&Tt.eachBefore(xe),Tt}function Pt(Tt,Ot){return function(Kt){Kt.children&&he(Kt,Kt.x0,Tt*(Kt.depth+1)/Ot,Kt.x1,Tt*(Kt.depth+2)/Ot);var Bt=Kt.x0,Zt=Kt.y0,Je=Kt.x1-je,pt=Kt.y1-je;Je<Bt&&(Bt=Je=(Bt+Je)/2),pt<Zt&&(Zt=pt=(Zt+pt)/2),Kt.x0=Bt,Kt.y0=Zt,Kt.x1=Je,Kt.y1=pt}}return ut.round=function(Tt){return arguments.length?(rt=!!Tt,ut):rt},ut.size=function(Tt){return arguments.length?(Qe=+Tt[0],Ce=+Tt[1],ut):[Qe,Ce]},ut.padding=function(Tt){return arguments.length?(je=+Tt,ut):je},ut}var me="$",ke={depth:-1},Ae={};function Ne(Qe){return Qe.id}function He(Qe){return Qe.parentId}function Ge(){var Qe=Ne,Ce=He;function je(rt){var ut,Pt,Tt=rt.length,Ot,Kt,Bt,Zt=new Array(Tt),Je,pt,Et={};for(Pt=0;Pt<Tt;++Pt)ut=rt[Pt],Bt=Zt[Pt]=new k(ut),(Je=Qe(ut,Pt,rt))!=null&&(Je+="")&&(pt=me+(Bt.id=Je),Et[pt]=pt in Et?Ae:Bt);for(Pt=0;Pt<Tt;++Pt)if(Bt=Zt[Pt],Je=Ce(rt[Pt],Pt,rt),Je==null||!(Je+="")){if(Ot)throw new Error("multiple roots");Ot=Bt}else{if(Kt=Et[me+Je],!Kt)throw new Error("missing: "+Je);if(Kt===Ae)throw new Error("ambiguous: "+Je);Kt.children?Kt.children.push(Bt):Kt.children=[Bt],Bt.parent=Kt}if(!Ot)throw new Error("no root");if(Ot.parent=ke,Ot.eachBefore(function(ar){ar.depth=ar.parent.depth+1,--Tt}).eachBefore(S),Ot.parent=null,Tt>0)throw new Error("cycle");return Ot}return je.id=function(rt){return arguments.length?(Qe=re(rt),je):Qe},je.parentId=function(rt){return arguments.length?(Ce=re(rt),je):Ce},je}function _e(Qe,Ce){return Qe.parent===Ce.parent?1:2}function De(Qe){var Ce=Qe.children;return Ce?Ce[0]:Qe.t}function Ye(Qe){var Ce=Qe.children;return Ce?Ce[Ce.length-1]:Qe.t}function qe(Qe,Ce,je){var rt=je/(Ce.i-Qe.i);Ce.c-=rt,Ce.s+=je,Qe.c+=rt,Ce.z+=je,Ce.m+=je}function Ue(Qe){for(var Ce=0,je=0,rt=Qe.children,ut=rt.length,Pt;--ut>=0;)Pt=rt[ut],Pt.z+=Ce,Pt.m+=Ce,Ce+=Pt.s+(je+=Pt.c)}function Ie(Qe,Ce,je){return Qe.a.parent===Ce.parent?Qe.a:je}function Ve(Qe,Ce){this._=Qe,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=Ce}Ve.prototype=Object.create(k.prototype);function dt(Qe){for(var Ce=new Ve(Qe,0),je,rt=[Ce],ut,Pt,Tt,Ot;je=rt.pop();)if(Pt=je._.children)for(je.children=new Array(Ot=Pt.length),Tt=Ot-1;Tt>=0;--Tt)rt.push(ut=je.children[Tt]=new Ve(Pt[Tt],Tt)),ut.parent=je;return(Ce.parent=new Ve(null,0)).children=[Ce],Ce}function Dt(){var Qe=_e,Ce=1,je=1,rt=null;function ut(Bt){var Zt=dt(Bt);if(Zt.eachAfter(Pt),Zt.parent.m=-Zt.z,Zt.eachBefore(Tt),rt)Bt.eachBefore(Kt);else{var Je=Bt,pt=Bt,Et=Bt;Bt.eachBefore(function(Pr){Pr.x<Je.x&&(Je=Pr),Pr.x>pt.x&&(pt=Pr),Pr.depth>Et.depth&&(Et=Pr)});var ar=Je===pt?1:Qe(Je,pt)/2,vr=ar-Je.x,ir=Ce/(pt.x+ar+vr),dr=je/(Et.depth||1);Bt.eachBefore(function(Pr){Pr.x=(Pr.x+vr)*ir,Pr.y=Pr.depth*dr})}return Bt}function Pt(Bt){var Zt=Bt.children,Je=Bt.parent.children,pt=Bt.i?Je[Bt.i-1]:null;if(Zt){Ue(Bt);var Et=(Zt[0].z+Zt[Zt.length-1].z)/2;pt?(Bt.z=pt.z+Qe(Bt._,pt._),Bt.m=Bt.z-Et):Bt.z=Et}else pt&&(Bt.z=pt.z+Qe(Bt._,pt._));Bt.parent.A=Ot(Bt,pt,Bt.parent.A||Je[0])}function Tt(Bt){Bt._.x=Bt.z+Bt.parent.m,Bt.m+=Bt.parent.m}function Ot(Bt,Zt,Je){if(Zt){for(var pt=Bt,Et=Bt,ar=Zt,vr=pt.parent.children[0],ir=pt.m,dr=Et.m,Pr=ar.m,Sr=vr.m,tr;ar=Ye(ar),pt=De(pt),ar&&pt;)vr=De(vr),Et=Ye(Et),Et.a=Bt,tr=ar.z+Pr-pt.z-ir+Qe(ar._,pt._),tr>0&&(qe(Ie(ar,Bt,Je),Bt,tr),ir+=tr,dr+=tr),Pr+=ar.m,ir+=pt.m,Sr+=vr.m,dr+=Et.m;ar&&!Ye(Et)&&(Et.t=ar,Et.m+=Pr-dr),pt&&!De(vr)&&(vr.t=pt,vr.m+=ir-Sr,Je=Bt)}return Je}function Kt(Bt){Bt.x*=Ce,Bt.y=Bt.depth*je}return ut.separation=function(Bt){return arguments.length?(Qe=Bt,ut):Qe},ut.size=function(Bt){return arguments.length?(rt=!1,Ce=+Bt[0],je=+Bt[1],ut):rt?null:[Ce,je]},ut.nodeSize=function(Bt){return arguments.length?(rt=!0,Ce=+Bt[0],je=+Bt[1],ut):rt?[Ce,je]:null},ut}function Yt(Qe,Ce,je,rt,ut){for(var Pt=Qe.children,Tt,Ot=-1,Kt=Pt.length,Bt=Qe.value&&(ut-je)/Qe.value;++Ot<Kt;)Tt=Pt[Ot],Tt.x0=Ce,Tt.x1=rt,Tt.y0=je,Tt.y1=je+=Tt.value*Bt}var kt=(1+Math.sqrt(5))/2;function Ft(Qe,Ce,je,rt,ut,Pt){for(var Tt=[],Ot=Ce.children,Kt,Bt,Zt=0,Je=0,pt=Ot.length,Et,ar,vr=Ce.value,ir,dr,Pr,Sr,tr,Nr,et;Zt<pt;){Et=ut-je,ar=Pt-rt;do ir=Ot[Je++].value;while(!ir&&Je<pt);for(dr=Pr=ir,Nr=Math.max(ar/Et,Et/ar)/(vr*Qe),et=ir*ir*Nr,tr=Math.max(Pr/et,et/dr);Je<pt;++Je){if(ir+=Bt=Ot[Je].value,Bt<dr&&(dr=Bt),Bt>Pr&&(Pr=Bt),et=ir*ir*Nr,Sr=Math.max(Pr/et,et/dr),Sr>tr){ir-=Bt;break}tr=Sr}Tt.push(Kt={value:ir,dice:Et<ar,children:Ot.slice(Zt,Je)}),Kt.dice?he(Kt,je,rt,ut,vr?rt+=ar*ir/vr:Pt):Yt(Kt,je,rt,vr?je+=Et*ir/vr:ut,Pt),vr-=ir,Zt=Je}return Tt}var Nt=function Qe(Ce){function je(rt,ut,Pt,Tt,Ot){Ft(Ce,rt,ut,Pt,Tt,Ot)}return je.ratio=function(rt){return Qe((rt=+rt)>1?rt:1)},je}(kt);function Lt(){var Qe=Nt,Ce=!1,je=1,rt=1,ut=[0],Pt=ee,Tt=ee,Ot=ee,Kt=ee,Bt=ee;function Zt(pt){return pt.x0=pt.y0=0,pt.x1=je,pt.y1=rt,pt.eachBefore(Je),ut=[0],Ce&&pt.eachBefore(xe),pt}function Je(pt){var Et=ut[pt.depth],ar=pt.x0+Et,vr=pt.y0+Et,ir=pt.x1-Et,dr=pt.y1-Et;ir<ar&&(ar=ir=(ar+ir)/2),dr<vr&&(vr=dr=(vr+dr)/2),pt.x0=ar,pt.y0=vr,pt.x1=ir,pt.y1=dr,pt.children&&(Et=ut[pt.depth+1]=Pt(pt)/2,ar+=Bt(pt)-Et,vr+=Tt(pt)-Et,ir-=Ot(pt)-Et,dr-=Kt(pt)-Et,ir<ar&&(ar=ir=(ar+ir)/2),dr<vr&&(vr=dr=(vr+dr)/2),Qe(pt,ar,vr,ir,dr))}return Zt.round=function(pt){return arguments.length?(Ce=!!pt,Zt):Ce},Zt.size=function(pt){return arguments.length?(je=+pt[0],rt=+pt[1],Zt):[je,rt]},Zt.tile=function(pt){return arguments.length?(Qe=re(pt),Zt):Qe},Zt.padding=function(pt){return arguments.length?Zt.paddingInner(pt).paddingOuter(pt):Zt.paddingInner()},Zt.paddingInner=function(pt){return arguments.length?(Pt=typeof pt=="function"?pt:j(+pt),Zt):Pt},Zt.paddingOuter=function(pt){return arguments.length?Zt.paddingTop(pt).paddingRight(pt).paddingBottom(pt).paddingLeft(pt):Zt.paddingTop()},Zt.paddingTop=function(pt){return arguments.length?(Tt=typeof pt=="function"?pt:j(+pt),Zt):Tt},Zt.paddingRight=function(pt){return arguments.length?(Ot=typeof pt=="function"?pt:j(+pt),Zt):Ot},Zt.paddingBottom=function(pt){return arguments.length?(Kt=typeof pt=="function"?pt:j(+pt),Zt):Kt},Zt.paddingLeft=function(pt){return arguments.length?(Bt=typeof pt=="function"?pt:j(+pt),Zt):Bt},Zt}function St(Qe,Ce,je,rt,ut){var Pt=Qe.children,Tt,Ot=Pt.length,Kt,Bt=new Array(Ot+1);for(Bt[0]=Kt=Tt=0;Tt<Ot;++Tt)Bt[Tt+1]=Kt+=Pt[Tt].value;Zt(0,Ot,Qe.value,Ce,je,rt,ut);function Zt(Je,pt,Et,ar,vr,ir,dr){if(Je>=pt-1){var Pr=Pt[Je];Pr.x0=ar,Pr.y0=vr,Pr.x1=ir,Pr.y1=dr;return}for(var Sr=Bt[Je],tr=Et/2+Sr,Nr=Je+1,et=pt-1;Nr<et;){var we=Nr+et>>>1;Bt[we]<tr?Nr=we+1:et=we}tr-Bt[Nr-1]<Bt[Nr]-tr&&Je+1<Nr&&--Nr;var Me=Bt[Nr]-Sr,Re=Et-Me;if(ir-ar>dr-vr){var Xe=(ar*Re+ir*Me)/Et;Zt(Je,Nr,Me,ar,vr,Xe,dr),Zt(Nr,pt,Re,Xe,vr,ir,dr)}else{var $e=(vr*Re+dr*Me)/Et;Zt(Je,Nr,Me,ar,vr,ir,$e),Zt(Nr,pt,Re,ar,$e,ir,dr)}}}function it(Qe,Ce,je,rt,ut){(Qe.depth&1?Yt:he)(Qe,Ce,je,rt,ut)}var ht=function Qe(Ce){function je(rt,ut,Pt,Tt,Ot){if((Kt=rt._squarify)&&Kt.ratio===Ce)for(var Kt,Bt,Zt,Je,pt=-1,Et,ar=Kt.length,vr=rt.value;++pt<ar;){for(Bt=Kt[pt],Zt=Bt.children,Je=Bt.value=0,Et=Zt.length;Je<Et;++Je)Bt.value+=Zt[Je].value;Bt.dice?he(Bt,ut,Pt,Tt,Pt+=(Ot-Pt)*Bt.value/vr):Yt(Bt,ut,Pt,ut+=(Tt-ut)*Bt.value/vr,Ot),vr-=Bt.value}else rt._squarify=Kt=Ft(Ce,rt,ut,Pt,Tt,Ot),Kt.ratio=Ce}return je.ratio=function(rt){return Qe((rt=+rt)>1?rt:1)},je}(kt);d.cluster=n,d.hierarchy=T,d.pack=ne,d.packEnclose=I,d.packSiblings=U,d.partition=ge,d.stratify=Ge,d.tree=Dt,d.treemap=Lt,d.treemapBinary=St,d.treemapDice=he,d.treemapResquarify=ht,d.treemapSlice=Yt,d.treemapSliceDice=it,d.treemapSquarify=Nt,Object.defineProperty(d,"__esModule",{value:!0})})},{}],116:[function(t,B,H){(function(d,l){typeof H=="object"&&typeof B!="undefined"?l(H,t("d3-color")):(d=d||self,l(d.d3=d.d3||{},d.d3))})(this,function(d,l){function b(_e,De,Ye,qe,Ue){var Ie=_e*_e,Ve=Ie*_e;return((1-3*_e+3*Ie-Ve)*De+(4-6*Ie+3*Ve)*Ye+(1+3*_e+3*Ie-3*Ve)*qe+Ve*Ue)/6}function w(_e){var De=_e.length-1;return function(Ye){var qe=Ye<=0?Ye=0:Ye>=1?(Ye=1,De-1):Math.floor(Ye*De),Ue=_e[qe],Ie=_e[qe+1],Ve=qe>0?_e[qe-1]:2*Ue-Ie,dt=qe<De-1?_e[qe+2]:2*Ie-Ue;return b((Ye-qe/De)*De,Ve,Ue,Ie,dt)}}function e(_e){var De=_e.length;return function(Ye){var qe=Math.floor(((Ye%=1)<0?++Ye:Ye)*De),Ue=_e[(qe+De-1)%De],Ie=_e[qe%De],Ve=_e[(qe+1)%De],dt=_e[(qe+2)%De];return b((Ye-qe/De)*De,Ue,Ie,Ve,dt)}}function o(_e){return function(){return _e}}function a(_e,De){return function(Ye){return _e+Ye*De}}function r(_e,De,Ye){return _e=Math.pow(_e,Ye),De=Math.pow(De,Ye)-_e,Ye=1/Ye,function(qe){return Math.pow(_e+qe*De,Ye)}}function n(_e,De){var Ye=De-_e;return Ye?a(_e,Ye>180||Ye<-180?Ye-360*Math.round(Ye/360):Ye):o(isNaN(_e)?De:_e)}function c(_e){return(_e=+_e)==1?s:function(De,Ye){return Ye-De?r(De,Ye,_e):o(isNaN(De)?Ye:De)}}function s(_e,De){var Ye=De-_e;return Ye?a(_e,Ye):o(isNaN(_e)?De:_e)}var i=function _e(De){var Ye=c(De);function qe(Ue,Ie){var Ve=Ye((Ue=l.rgb(Ue)).r,(Ie=l.rgb(Ie)).r),dt=Ye(Ue.g,Ie.g),Dt=Ye(Ue.b,Ie.b),Yt=s(Ue.opacity,Ie.opacity);return function(kt){return Ue.r=Ve(kt),Ue.g=dt(kt),Ue.b=Dt(kt),Ue.opacity=Yt(kt),Ue+""}}return qe.gamma=_e,qe}(1);function v(_e){return function(De){var Ye=De.length,qe=new Array(Ye),Ue=new Array(Ye),Ie=new Array(Ye),Ve,dt;for(Ve=0;Ve<Ye;++Ve)dt=l.rgb(De[Ve]),qe[Ve]=dt.r||0,Ue[Ve]=dt.g||0,Ie[Ve]=dt.b||0;return qe=_e(qe),Ue=_e(Ue),Ie=_e(Ie),dt.opacity=1,function(Dt){return dt.r=qe(Dt),dt.g=Ue(Dt),dt.b=Ie(Dt),dt+""}}}var u=v(w),g=v(e);function h(_e,De){De||(De=[]);var Ye=_e?Math.min(De.length,_e.length):0,qe=De.slice(),Ue;return function(Ie){for(Ue=0;Ue<Ye;++Ue)qe[Ue]=_e[Ue]*(1-Ie)+De[Ue]*Ie;return qe}}function y(_e){return ArrayBuffer.isView(_e)&&!(_e instanceof DataView)}function p(_e,De){return(y(De)?h:A)(_e,De)}function A(_e,De){var Ye=De?De.length:0,qe=_e?Math.min(Ye,_e.length):0,Ue=new Array(qe),Ie=new Array(Ye),Ve;for(Ve=0;Ve<qe;++Ve)Ue[Ve]=k(_e[Ve],De[Ve]);for(;Ve<Ye;++Ve)Ie[Ve]=De[Ve];return function(dt){for(Ve=0;Ve<qe;++Ve)Ie[Ve]=Ue[Ve](dt);return Ie}}function m(_e,De){var Ye=new Date;return _e=+_e,De=+De,function(qe){return Ye.setTime(_e*(1-qe)+De*qe),Ye}}function M(_e,De){return _e=+_e,De=+De,function(Ye){return _e*(1-Ye)+De*Ye}}function x(_e,De){var Ye={},qe={},Ue;(_e===null||typeof _e!="object")&&(_e={}),(De===null||typeof De!="object")&&(De={});for(Ue in De)Ue in _e?Ye[Ue]=k(_e[Ue],De[Ue]):qe[Ue]=De[Ue];return function(Ie){for(Ue in Ye)qe[Ue]=Ye[Ue](Ie);return qe}}var T=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_=new RegExp(T.source,"g");function f(_e){return function(){return _e}}function L(_e){return function(De){return _e(De)+""}}function S(_e,De){var Ye=T.lastIndex=_.lastIndex=0,qe,Ue,Ie,Ve=-1,dt=[],Dt=[];for(_e=_e+"",De=De+"";(qe=T.exec(_e))&&(Ue=_.exec(De));)(Ie=Ue.index)>Ye&&(Ie=De.slice(Ye,Ie),dt[Ve]?dt[Ve]+=Ie:dt[++Ve]=Ie),(qe=qe[0])===(Ue=Ue[0])?dt[Ve]?dt[Ve]+=Ue:dt[++Ve]=Ue:(dt[++Ve]=null,Dt.push({i:Ve,x:M(qe,Ue)})),Ye=_.lastIndex;return Ye<De.length&&(Ie=De.slice(Ye),dt[Ve]?dt[Ve]+=Ie:dt[++Ve]=Ie),dt.length<2?Dt[0]?L(Dt[0].x):f(De):(De=Dt.length,function(Yt){for(var kt=0,Ft;kt<De;++kt)dt[(Ft=Dt[kt]).i]=Ft.x(Yt);return dt.join("")})}function k(_e,De){var Ye=typeof De,qe;return De==null||Ye==="boolean"?o(De):(Ye==="number"?M:Ye==="string"?(qe=l.color(De))?(De=qe,i):S:De instanceof l.color?i:De instanceof Date?m:y(De)?h:Array.isArray(De)?A:typeof De.valueOf!="function"&&typeof De.toString!="function"||isNaN(De)?x:M)(_e,De)}function P(_e){var De=_e.length;return function(Ye){return _e[Math.max(0,Math.min(De-1,Math.floor(Ye*De)))]}}function z(_e,De){var Ye=n(+_e,+De);return function(qe){var Ue=Ye(qe);return Ue-360*Math.floor(Ue/360)}}function I(_e,De){return _e=+_e,De=+De,function(Ye){return Math.round(_e*(1-Ye)+De*Ye)}}var R=180/Math.PI,D={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function O(_e,De,Ye,qe,Ue,Ie){var Ve,dt,Dt;return(Ve=Math.sqrt(_e*_e+De*De))&&(_e/=Ve,De/=Ve),(Dt=_e*Ye+De*qe)&&(Ye-=_e*Dt,qe-=De*Dt),(dt=Math.sqrt(Ye*Ye+qe*qe))&&(Ye/=dt,qe/=dt,Dt/=dt),_e*qe<De*Ye&&(_e=-_e,De=-De,Dt=-Dt,Ve=-Ve),{translateX:Ue,translateY:Ie,rotate:Math.atan2(De,_e)*R,skewX:Math.atan(Dt)*R,scaleX:Ve,scaleY:dt}}var F,G,W,q;function J(_e){return _e==="none"?D:(F||(F=document.createElement("DIV"),G=document.documentElement,W=document.defaultView),F.style.transform=_e,_e=W.getComputedStyle(G.appendChild(F),null).getPropertyValue("transform"),G.removeChild(F),_e=_e.slice(7,-1).split(","),O(+_e[0],+_e[1],+_e[2],+_e[3],+_e[4],+_e[5]))}function X(_e){return _e==null||(q||(q=document.createElementNS("http://www.w3.org/2000/svg","g")),q.setAttribute("transform",_e),!(_e=q.transform.baseVal.consolidate()))?D:(_e=_e.matrix,O(_e.a,_e.b,_e.c,_e.d,_e.e,_e.f))}function Z(_e,De,Ye,qe){function Ue(Yt){return Yt.length?Yt.pop()+" ":""}function Ie(Yt,kt,Ft,Nt,Lt,St){if(Yt!==Ft||kt!==Nt){var it=Lt.push("translate(",null,De,null,Ye);St.push({i:it-4,x:M(Yt,Ft)},{i:it-2,x:M(kt,Nt)})}else(Ft||Nt)&&Lt.push("translate("+Ft+De+Nt+Ye)}function Ve(Yt,kt,Ft,Nt){Yt!==kt?(Yt-kt>180?kt+=360:kt-Yt>180&&(Yt+=360),Nt.push({i:Ft.push(Ue(Ft)+"rotate(",null,qe)-2,x:M(Yt,kt)})):kt&&Ft.push(Ue(Ft)+"rotate("+kt+qe)}function dt(Yt,kt,Ft,Nt){Yt!==kt?Nt.push({i:Ft.push(Ue(Ft)+"skewX(",null,qe)-2,x:M(Yt,kt)}):kt&&Ft.push(Ue(Ft)+"skewX("+kt+qe)}function Dt(Yt,kt,Ft,Nt,Lt,St){if(Yt!==Ft||kt!==Nt){var it=Lt.push(Ue(Lt)+"scale(",null,",",null,")");St.push({i:it-4,x:M(Yt,Ft)},{i:it-2,x:M(kt,Nt)})}else(Ft!==1||Nt!==1)&&Lt.push(Ue(Lt)+"scale("+Ft+","+Nt+")")}return function(Yt,kt){var Ft=[],Nt=[];return Yt=_e(Yt),kt=_e(kt),Ie(Yt.translateX,Yt.translateY,kt.translateX,kt.translateY,Ft,Nt),Ve(Yt.rotate,kt.rotate,Ft,Nt),dt(Yt.skewX,kt.skewX,Ft,Nt),Dt(Yt.scaleX,Yt.scaleY,kt.scaleX,kt.scaleY,Ft,Nt),Yt=kt=null,function(Lt){for(var St=-1,it=Nt.length,ht;++St<it;)Ft[(ht=Nt[St]).i]=ht.x(Lt);return Ft.join("")}}}var se=Z(J,"px, ","px)","deg)"),le=Z(X,", ",")",")"),oe=Math.SQRT2,U=2,V=4,re=1e-12;function ee(_e){return((_e=Math.exp(_e))+1/_e)/2}function j(_e){return((_e=Math.exp(_e))-1/_e)/2}function Q(_e){return((_e=Math.exp(2*_e))-1)/(_e+1)}function ne(_e,De){var Ye=_e[0],qe=_e[1],Ue=_e[2],Ie=De[0],Ve=De[1],dt=De[2],Dt=Ie-Ye,Yt=Ve-qe,kt=Dt*Dt+Yt*Yt,Ft,Nt;if(kt<re)Nt=Math.log(dt/Ue)/oe,Ft=function(Ce){return[Ye+Ce*Dt,qe+Ce*Yt,Ue*Math.exp(oe*Ce*Nt)]};else{var Lt=Math.sqrt(kt),St=(dt*dt-Ue*Ue+V*kt)/(2*Ue*U*Lt),it=(dt*dt-Ue*Ue-V*kt)/(2*dt*U*Lt),ht=Math.log(Math.sqrt(St*St+1)-St),Qe=Math.log(Math.sqrt(it*it+1)-it);Nt=(Qe-ht)/oe,Ft=function(Ce){var je=Ce*Nt,rt=ee(ht),ut=Ue/(U*Lt)*(rt*Q(oe*je+ht)-j(ht));return[Ye+ut*Dt,qe+ut*Yt,Ue*rt/ee(oe*je+ht)]}}return Ft.duration=Nt*1e3,Ft}function ae(_e){return function(De,Ye){var qe=_e((De=l.hsl(De)).h,(Ye=l.hsl(Ye)).h),Ue=s(De.s,Ye.s),Ie=s(De.l,Ye.l),Ve=s(De.opacity,Ye.opacity);return function(dt){return De.h=qe(dt),De.s=Ue(dt),De.l=Ie(dt),De.opacity=Ve(dt),De+""}}}var ie=ae(n),ue=ae(s);function xe(_e,De){var Ye=s((_e=l.lab(_e)).l,(De=l.lab(De)).l),qe=s(_e.a,De.a),Ue=s(_e.b,De.b),Ie=s(_e.opacity,De.opacity);return function(Ve){return _e.l=Ye(Ve),_e.a=qe(Ve),_e.b=Ue(Ve),_e.opacity=Ie(Ve),_e+""}}function he(_e){return function(De,Ye){var qe=_e((De=l.hcl(De)).h,(Ye=l.hcl(Ye)).h),Ue=s(De.c,Ye.c),Ie=s(De.l,Ye.l),Ve=s(De.opacity,Ye.opacity);return function(dt){return De.h=qe(dt),De.c=Ue(dt),De.l=Ie(dt),De.opacity=Ve(dt),De+""}}}var ge=he(n),me=he(s);function ke(_e){return function De(Ye){Ye=+Ye;function qe(Ue,Ie){var Ve=_e((Ue=l.cubehelix(Ue)).h,(Ie=l.cubehelix(Ie)).h),dt=s(Ue.s,Ie.s),Dt=s(Ue.l,Ie.l),Yt=s(Ue.opacity,Ie.opacity);return function(kt){return Ue.h=Ve(kt),Ue.s=dt(kt),Ue.l=Dt(Math.pow(kt,Ye)),Ue.opacity=Yt(kt),Ue+""}}return qe.gamma=De,qe}(1)}var Ae=ke(n),Ne=ke(s);function He(_e,De){for(var Ye=0,qe=De.length-1,Ue=De[0],Ie=new Array(qe<0?0:qe);Ye<qe;)Ie[Ye]=_e(Ue,Ue=De[++Ye]);return function(Ve){var dt=Math.max(0,Math.min(qe-1,Math.floor(Ve*=qe)));return Ie[dt](Ve-dt)}}function Ge(_e,De){for(var Ye=new Array(De),qe=0;qe<De;++qe)Ye[qe]=_e(qe/(De-1));return Ye}d.interpolate=k,d.interpolateArray=p,d.interpolateBasis=w,d.interpolateBasisClosed=e,d.interpolateCubehelix=Ae,d.interpolateCubehelixLong=Ne,d.interpolateDate=m,d.interpolateDiscrete=P,d.interpolateHcl=ge,d.interpolateHclLong=me,d.interpolateHsl=ie,d.interpolateHslLong=ue,d.interpolateHue=z,d.interpolateLab=xe,d.interpolateNumber=M,d.interpolateNumberArray=h,d.interpolateObject=x,d.interpolateRgb=i,d.interpolateRgbBasis=u,d.interpolateRgbBasisClosed=g,d.interpolateRound=I,d.interpolateString=S,d.interpolateTransformCss=se,d.interpolateTransformSvg=le,d.interpolateZoom=ne,d.piecewise=He,d.quantize=Ge,Object.defineProperty(d,"__esModule",{value:!0})})},{"d3-color":109}],117:[function(t,B,H){(function(d,l){typeof H=="object"&&typeof B!="undefined"?l(H):(d=d||self,l(d.d3=d.d3||{}))})(this,function(d){var l=Math.PI,b=2*l,w=1e-6,e=b-w;function o(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function a(){return new o}o.prototype=a.prototype={constructor:o,moveTo:function(r,n){this._+="M"+(this._x0=this._x1=+r)+","+(this._y0=this._y1=+n)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(r,n){this._+="L"+(this._x1=+r)+","+(this._y1=+n)},quadraticCurveTo:function(r,n,c,s){this._+="Q"+ +r+","+ +n+","+(this._x1=+c)+","+(this._y1=+s)},bezierCurveTo:function(r,n,c,s,i,v){this._+="C"+ +r+","+ +n+","+ +c+","+ +s+","+(this._x1=+i)+","+(this._y1=+v)},arcTo:function(r,n,c,s,i){r=+r,n=+n,c=+c,s=+s,i=+i;var v=this._x1,u=this._y1,g=c-r,h=s-n,y=v-r,p=u-n,A=y*y+p*p;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=r)+","+(this._y1=n);else if(A>w)if(!(Math.abs(p*g-h*y)>w)||!i)this._+="L"+(this._x1=r)+","+(this._y1=n);else{var m=c-v,M=s-u,x=g*g+h*h,T=m*m+M*M,_=Math.sqrt(x),f=Math.sqrt(A),L=i*Math.tan((l-Math.acos((x+A-T)/(2*_*f)))/2),S=L/f,k=L/_;Math.abs(S-1)>w&&(this._+="L"+(r+S*y)+","+(n+S*p)),this._+="A"+i+","+i+",0,0,"+ +(p*m>y*M)+","+(this._x1=r+k*g)+","+(this._y1=n+k*h)}},arc:function(r,n,c,s,i,v){r=+r,n=+n,c=+c,v=!!v;var u=c*Math.cos(s),g=c*Math.sin(s),h=r+u,y=n+g,p=1^v,A=v?s-i:i-s;if(c<0)throw new Error("negative radius: "+c);this._x1===null?this._+="M"+h+","+y:(Math.abs(this._x1-h)>w||Math.abs(this._y1-y)>w)&&(this._+="L"+h+","+y),c&&(A<0&&(A=A%b+b),A>e?this._+="A"+c+","+c+",0,1,"+p+","+(r-u)+","+(n-g)+"A"+c+","+c+",0,1,"+p+","+(this._x1=h)+","+(this._y1=y):A>w&&(this._+="A"+c+","+c+",0,"+ +(A>=l)+","+p+","+(this._x1=r+c*Math.cos(i))+","+(this._y1=n+c*Math.sin(i))))},rect:function(r,n,c,s){this._+="M"+(this._x0=this._x1=+r)+","+(this._y0=this._y1=+n)+"h"+ +c+"v"+ +s+"h"+-c+"Z"},toString:function(){return this._}},d.path=a,Object.defineProperty(d,"__esModule",{value:!0})})},{}],118:[function(t,B,H){(function(d,l){typeof H=="object"&&typeof B!="undefined"?l(H):(d=d||self,l(d.d3=d.d3||{}))})(this,function(d){function l(_){var f=+this._x.call(null,_),L=+this._y.call(null,_);return b(this.cover(f,L),f,L,_)}function b(_,f,L,S){if(isNaN(f)||isNaN(L))return _;var k,P=_._root,z={data:S},I=_._x0,R=_._y0,D=_._x1,O=_._y1,F,G,W,q,J,X,Z,se;if(!P)return _._root=z,_;for(;P.length;)if((J=f>=(F=(I+D)/2))?I=F:D=F,(X=L>=(G=(R+O)/2))?R=G:O=G,k=P,!(P=P[Z=X<<1|J]))return k[Z]=z,_;if(W=+_._x.call(null,P.data),q=+_._y.call(null,P.data),f===W&&L===q)return z.next=P,k?k[Z]=z:_._root=z,_;do k=k?k[Z]=new Array(4):_._root=new Array(4),(J=f>=(F=(I+D)/2))?I=F:D=F,(X=L>=(G=(R+O)/2))?R=G:O=G;while((Z=X<<1|J)===(se=(q>=G)<<1|W>=F));return k[se]=P,k[Z]=z,_}function w(_){var f,L,S=_.length,k,P,z=new Array(S),I=new Array(S),R=1/0,D=1/0,O=-1/0,F=-1/0;for(L=0;L<S;++L)isNaN(k=+this._x.call(null,f=_[L]))||isNaN(P=+this._y.call(null,f))||(z[L]=k,I[L]=P,k<R&&(R=k),k>O&&(O=k),P<D&&(D=P),P>F&&(F=P));if(R>O||D>F)return this;for(this.cover(R,D).cover(O,F),L=0;L<S;++L)b(this,z[L],I[L],_[L]);return this}function e(_,f){if(isNaN(_=+_)||isNaN(f=+f))return this;var L=this._x0,S=this._y0,k=this._x1,P=this._y1;if(isNaN(L))k=(L=Math.floor(_))+1,P=(S=Math.floor(f))+1;else{for(var z=k-L,I=this._root,R,D;L>_||_>=k||S>f||f>=P;)switch(D=(f<S)<<1|_<L,R=new Array(4),R[D]=I,I=R,z*=2,D){case 0:k=L+z,P=S+z;break;case 1:L=k-z,P=S+z;break;case 2:k=L+z,S=P-z;break;case 3:L=k-z,S=P-z;break}this._root&&this._root.length&&(this._root=I)}return this._x0=L,this._y0=S,this._x1=k,this._y1=P,this}function o(){var _=[];return this.visit(function(f){if(!f.length)do _.push(f.data);while(f=f.next)}),_}function a(_){return arguments.length?this.cover(+_[0][0],+_[0][1]).cover(+_[1][0],+_[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function r(_,f,L,S,k){this.node=_,this.x0=f,this.y0=L,this.x1=S,this.y1=k}function n(_,f,L){var S,k=this._x0,P=this._y0,z,I,R,D,O=this._x1,F=this._y1,G=[],W=this._root,q,J;for(W&&G.push(new r(W,k,P,O,F)),L==null?L=1/0:(k=_-L,P=f-L,O=_+L,F=f+L,L*=L);q=G.pop();)if(!(!(W=q.node)||(z=q.x0)>O||(I=q.y0)>F||(R=q.x1)<k||(D=q.y1)<P))if(W.length){var X=(z+R)/2,Z=(I+D)/2;G.push(new r(W[3],X,Z,R,D),new r(W[2],z,Z,X,D),new r(W[1],X,I,R,Z),new r(W[0],z,I,X,Z)),(J=(f>=Z)<<1|_>=X)&&(q=G[G.length-1],G[G.length-1]=G[G.length-1-J],G[G.length-1-J]=q)}else{var se=_-+this._x.call(null,W.data),le=f-+this._y.call(null,W.data),oe=se*se+le*le;if(oe<L){var U=Math.sqrt(L=oe);k=_-U,P=f-U,O=_+U,F=f+U,S=W.data}}return S}function c(_){if(isNaN(O=+this._x.call(null,_))||isNaN(F=+this._y.call(null,_)))return this;var f,L=this._root,S,k,P,z=this._x0,I=this._y0,R=this._x1,D=this._y1,O,F,G,W,q,J,X,Z;if(!L)return this;if(L.length)for(;;){if((q=O>=(G=(z+R)/2))?z=G:R=G,(J=F>=(W=(I+D)/2))?I=W:D=W,f=L,!(L=L[X=J<<1|q]))return this;if(!L.length)break;(f[X+1&3]||f[X+2&3]||f[X+3&3])&&(S=f,Z=X)}for(;L.data!==_;)if(k=L,!(L=L.next))return this;return(P=L.next)&&delete L.next,k?(P?k.next=P:delete k.next,this):f?(P?f[X]=P:delete f[X],(L=f[0]||f[1]||f[2]||f[3])&&L===(f[3]||f[2]||f[1]||f[0])&&!L.length&&(S?S[Z]=L:this._root=L),this):(this._root=P,this)}function s(_){for(var f=0,L=_.length;f<L;++f)this.remove(_[f]);return this}function i(){return this._root}function v(){var _=0;return this.visit(function(f){if(!f.length)do++_;while(f=f.next)}),_}function u(_){var f=[],L,S=this._root,k,P,z,I,R;for(S&&f.push(new r(S,this._x0,this._y0,this._x1,this._y1));L=f.pop();)if(!_(S=L.node,P=L.x0,z=L.y0,I=L.x1,R=L.y1)&&S.length){var D=(P+I)/2,O=(z+R)/2;(k=S[3])&&f.push(new r(k,D,O,I,R)),(k=S[2])&&f.push(new r(k,P,O,D,R)),(k=S[1])&&f.push(new r(k,D,z,I,O)),(k=S[0])&&f.push(new r(k,P,z,D,O))}return this}function g(_){var f=[],L=[],S;for(this._root&&f.push(new r(this._root,this._x0,this._y0,this._x1,this._y1));S=f.pop();){var k=S.node;if(k.length){var P,z=S.x0,I=S.y0,R=S.x1,D=S.y1,O=(z+R)/2,F=(I+D)/2;(P=k[0])&&f.push(new r(P,z,I,O,F)),(P=k[1])&&f.push(new r(P,O,I,R,F)),(P=k[2])&&f.push(new r(P,z,F,O,D)),(P=k[3])&&f.push(new r(P,O,F,R,D))}L.push(S)}for(;S=L.pop();)_(S.node,S.x0,S.y0,S.x1,S.y1);return this}function h(_){return _[0]}function y(_){return arguments.length?(this._x=_,this):this._x}function p(_){return _[1]}function A(_){return arguments.length?(this._y=_,this):this._y}function m(_,f,L){var S=new M(f==null?h:f,L==null?p:L,NaN,NaN,NaN,NaN);return _==null?S:S.addAll(_)}function M(_,f,L,S,k,P){this._x=_,this._y=f,this._x0=L,this._y0=S,this._x1=k,this._y1=P,this._root=void 0}function x(_){for(var f={data:_.data},L=f;_=_.next;)L=L.next={data:_.data};return f}var T=m.prototype=M.prototype;T.copy=function(){var _=new M(this._x,this._y,this._x0,this._y0,this._x1,this._y1),f=this._root,L,S;if(!f)return _;if(!f.length)return _._root=x(f),_;for(L=[{source:f,target:_._root=new Array(4)}];f=L.pop();)for(var k=0;k<4;++k)(S=f.source[k])&&(S.length?L.push({source:S,target:f.target[k]=new Array(4)}):f.target[k]=x(S));return _},T.add=l,T.addAll=w,T.cover=e,T.data=o,T.extent=a,T.find=n,T.remove=c,T.removeAll=s,T.root=i,T.size=v,T.visit=u,T.visitAfter=g,T.x=y,T.y=A,d.quadtree=m,Object.defineProperty(d,"__esModule",{value:!0})})},{}],119:[function(t,B,H){(function(d,l){typeof H=="object"&&typeof B!="undefined"?l(H,t("d3-path")):(d=d||self,l(d.d3=d.d3||{},d.d3))})(this,function(d,l){function b(at){return function(){return at}}var w=Math.abs,e=Math.atan2,o=Math.cos,a=Math.max,r=Math.min,n=Math.sin,c=Math.sqrt,s=1e-12,i=Math.PI,v=i/2,u=2*i;function g(at){return at>1?0:at<-1?i:Math.acos(at)}function h(at){return at>=1?v:at<=-1?-v:Math.asin(at)}function y(at){return at.innerRadius}function p(at){return at.outerRadius}function A(at){return at.startAngle}function m(at){return at.endAngle}function M(at){return at&&at.padAngle}function x(at,zt,er,hr,Vr,Rr,Er,xr){var Wr=er-at,Rn=hr-zt,En=Er-Vr,ea=xr-Rr,ia=ea*Wr-En*Rn;if(!(ia*ia<s))return ia=(En*(zt-Rr)-ea*(at-Vr))/ia,[at+ia*Wr,zt+ia*Rn]}function T(at,zt,er,hr,Vr,Rr,Er){var xr=at-er,Wr=zt-hr,Rn=(Er?Rr:-Rr)/c(xr*xr+Wr*Wr),En=Rn*Wr,ea=-Rn*xr,ia=at+En,Aa=zt+ea,ya=er+En,pr=hr+ea,vn=(ia+ya)/2,$r=(Aa+pr)/2,Fn=ya-ia,Bn=pr-Aa,ca=Fn*Fn+Bn*Bn,ta=Vr-Rr,Un=ia*pr-ya*Aa,la=(Bn<0?-1:1)*c(a(0,ta*ta*ca-Un*Un)),da=(Un*Bn-Fn*la)/ca,ur=(-Un*Fn-Bn*la)/ca,Dr=(Un*Bn+Fn*la)/ca,sn=(-Un*Fn+Bn*la)/ca,tn=da-vn,mn=ur-$r,wn=Dr-vn,gn=sn-$r;return tn*tn+mn*mn>wn*wn+gn*gn&&(da=Dr,ur=sn),{cx:da,cy:ur,x01:-En,y01:-ea,x11:da*(Vr/ta-1),y11:ur*(Vr/ta-1)}}function _(){var at=y,zt=p,er=b(0),hr=null,Vr=A,Rr=m,Er=M,xr=null;function Wr(){var Rn,En,ea=+at.apply(this,arguments),ia=+zt.apply(this,arguments),Aa=Vr.apply(this,arguments)-v,ya=Rr.apply(this,arguments)-v,pr=w(ya-Aa),vn=ya>Aa;if(xr||(xr=Rn=l.path()),ia<ea&&(En=ia,ia=ea,ea=En),!(ia>s))xr.moveTo(0,0);else if(pr>u-s)xr.moveTo(ia*o(Aa),ia*n(Aa)),xr.arc(0,0,ia,Aa,ya,!vn),ea>s&&(xr.moveTo(ea*o(ya),ea*n(ya)),xr.arc(0,0,ea,ya,Aa,vn));else{var $r=Aa,Fn=ya,Bn=Aa,ca=ya,ta=pr,Un=pr,la=Er.apply(this,arguments)/2,da=la>s&&(hr?+hr.apply(this,arguments):c(ea*ea+ia*ia)),ur=r(w(ia-ea)/2,+er.apply(this,arguments)),Dr=ur,sn=ur,tn,mn;if(da>s){var wn=h(da/ea*n(la)),gn=h(da/ia*n(la));(ta-=wn*2)>s?(wn*=vn?1:-1,Bn+=wn,ca-=wn):(ta=0,Bn=ca=(Aa+ya)/2),(Un-=gn*2)>s?(gn*=vn?1:-1,$r+=gn,Fn-=gn):(Un=0,$r=Fn=(Aa+ya)/2)}var mr=ia*o($r),rr=ia*n($r),zr=ea*o(ca),jr=ea*n(ca);if(ur>s){var Sn=ia*o(Fn),On=ia*n(Fn),aa=ea*o(Bn),Zn=ea*n(Bn),Hn;if(pr<i&&(Hn=x(mr,rr,aa,Zn,Sn,On,zr,jr))){var pn=mr-Hn[0],In=rr-Hn[1],Yn=Sn-Hn[0],ua=On-Hn[1],Ha=1/n(g((pn*Yn+In*ua)/(c(pn*pn+In*In)*c(Yn*Yn+ua*ua)))/2),ka=c(Hn[0]*Hn[0]+Hn[1]*Hn[1]);Dr=r(ur,(ea-ka)/(Ha-1)),sn=r(ur,(ia-ka)/(Ha+1))}}Un>s?sn>s?(tn=T(aa,Zn,mr,rr,ia,sn,vn),mn=T(Sn,On,zr,jr,ia,sn,vn),xr.moveTo(tn.cx+tn.x01,tn.cy+tn.y01),sn<ur?xr.arc(tn.cx,tn.cy,sn,e(tn.y01,tn.x01),e(mn.y01,mn.x01),!vn):(xr.arc(tn.cx,tn.cy,sn,e(tn.y01,tn.x01),e(tn.y11,tn.x11),!vn),xr.arc(0,0,ia,e(tn.cy+tn.y11,tn.cx+tn.x11),e(mn.cy+mn.y11,mn.cx+mn.x11),!vn),xr.arc(mn.cx,mn.cy,sn,e(mn.y11,mn.x11),e(mn.y01,mn.x01),!vn))):(xr.moveTo(mr,rr),xr.arc(0,0,ia,$r,Fn,!vn)):xr.moveTo(mr,rr),!(ea>s)||!(ta>s)?xr.lineTo(zr,jr):Dr>s?(tn=T(zr,jr,Sn,On,ea,-Dr,vn),mn=T(mr,rr,aa,Zn,ea,-Dr,vn),xr.lineTo(tn.cx+tn.x01,tn.cy+tn.y01),Dr<ur?xr.arc(tn.cx,tn.cy,Dr,e(tn.y01,tn.x01),e(mn.y01,mn.x01),!vn):(xr.arc(tn.cx,tn.cy,Dr,e(tn.y01,tn.x01),e(tn.y11,tn.x11),!vn),xr.arc(0,0,ea,e(tn.cy+tn.y11,tn.cx+tn.x11),e(mn.cy+mn.y11,mn.cx+mn.x11),vn),xr.arc(mn.cx,mn.cy,Dr,e(mn.y11,mn.x11),e(mn.y01,mn.x01),!vn))):xr.arc(0,0,ea,ca,Bn,vn)}if(xr.closePath(),Rn)return xr=null,Rn+""||null}return Wr.centroid=function(){var Rn=(+at.apply(this,arguments)+ +zt.apply(this,arguments))/2,En=(+Vr.apply(this,arguments)+ +Rr.apply(this,arguments))/2-i/2;return[o(En)*Rn,n(En)*Rn]},Wr.innerRadius=function(Rn){return arguments.length?(at=typeof Rn=="function"?Rn:b(+Rn),Wr):at},Wr.outerRadius=function(Rn){return arguments.length?(zt=typeof Rn=="function"?Rn:b(+Rn),Wr):zt},Wr.cornerRadius=function(Rn){return arguments.length?(er=typeof Rn=="function"?Rn:b(+Rn),Wr):er},Wr.padRadius=function(Rn){return arguments.length?(hr=Rn==null?null:typeof Rn=="function"?Rn:b(+Rn),Wr):hr},Wr.startAngle=function(Rn){return arguments.length?(Vr=typeof Rn=="function"?Rn:b(+Rn),Wr):Vr},Wr.endAngle=function(Rn){return arguments.length?(Rr=typeof Rn=="function"?Rn:b(+Rn),Wr):Rr},Wr.padAngle=function(Rn){return arguments.length?(Er=typeof Rn=="function"?Rn:b(+Rn),Wr):Er},Wr.context=function(Rn){return arguments.length?(xr=Rn==null?null:Rn,Wr):xr},Wr}function f(at){this._context=at}f.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,zt){switch(at=+at,zt=+zt,this._point){case 0:this._point=1,this._line?this._context.lineTo(at,zt):this._context.moveTo(at,zt);break;case 1:this._point=2;default:this._context.lineTo(at,zt);break}}};function L(at){return new f(at)}function S(at){return at[0]}function k(at){return at[1]}function P(){var at=S,zt=k,er=b(!0),hr=null,Vr=L,Rr=null;function Er(xr){var Wr,Rn=xr.length,En,ea=!1,ia;for(hr==null&&(Rr=Vr(ia=l.path())),Wr=0;Wr<=Rn;++Wr)!(Wr<Rn&&er(En=xr[Wr],Wr,xr))===ea&&((ea=!ea)?Rr.lineStart():Rr.lineEnd()),ea&&Rr.point(+at(En,Wr,xr),+zt(En,Wr,xr));if(ia)return Rr=null,ia+""||null}return Er.x=function(xr){return arguments.length?(at=typeof xr=="function"?xr:b(+xr),Er):at},Er.y=function(xr){return arguments.length?(zt=typeof xr=="function"?xr:b(+xr),Er):zt},Er.defined=function(xr){return arguments.length?(er=typeof xr=="function"?xr:b(!!xr),Er):er},Er.curve=function(xr){return arguments.length?(Vr=xr,hr!=null&&(Rr=Vr(hr)),Er):Vr},Er.context=function(xr){return arguments.length?(xr==null?hr=Rr=null:Rr=Vr(hr=xr),Er):hr},Er}function z(){var at=S,zt=null,er=b(0),hr=k,Vr=b(!0),Rr=null,Er=L,xr=null;function Wr(En){var ea,ia,Aa,ya=En.length,pr,vn=!1,$r,Fn=new Array(ya),Bn=new Array(ya);for(Rr==null&&(xr=Er($r=l.path())),ea=0;ea<=ya;++ea){if(!(ea<ya&&Vr(pr=En[ea],ea,En))===vn)if(vn=!vn)ia=ea,xr.areaStart(),xr.lineStart();else{for(xr.lineEnd(),xr.lineStart(),Aa=ea-1;Aa>=ia;--Aa)xr.point(Fn[Aa],Bn[Aa]);xr.lineEnd(),xr.areaEnd()}vn&&(Fn[ea]=+at(pr,ea,En),Bn[ea]=+er(pr,ea,En),xr.point(zt?+zt(pr,ea,En):Fn[ea],hr?+hr(pr,ea,En):Bn[ea]))}if($r)return xr=null,$r+""||null}function Rn(){return P().defined(Vr).curve(Er).context(Rr)}return Wr.x=function(En){return arguments.length?(at=typeof En=="function"?En:b(+En),zt=null,Wr):at},Wr.x0=function(En){return arguments.length?(at=typeof En=="function"?En:b(+En),Wr):at},Wr.x1=function(En){return arguments.length?(zt=En==null?null:typeof En=="function"?En:b(+En),Wr):zt},Wr.y=function(En){return arguments.length?(er=typeof En=="function"?En:b(+En),hr=null,Wr):er},Wr.y0=function(En){return arguments.length?(er=typeof En=="function"?En:b(+En),Wr):er},Wr.y1=function(En){return arguments.length?(hr=En==null?null:typeof En=="function"?En:b(+En),Wr):hr},Wr.lineX0=Wr.lineY0=function(){return Rn().x(at).y(er)},Wr.lineY1=function(){return Rn().x(at).y(hr)},Wr.lineX1=function(){return Rn().x(zt).y(er)},Wr.defined=function(En){return arguments.length?(Vr=typeof En=="function"?En:b(!!En),Wr):Vr},Wr.curve=function(En){return arguments.length?(Er=En,Rr!=null&&(xr=Er(Rr)),Wr):Er},Wr.context=function(En){return arguments.length?(En==null?Rr=xr=null:xr=Er(Rr=En),Wr):Rr},Wr}function I(at,zt){return zt<at?-1:zt>at?1:zt>=at?0:NaN}function R(at){return at}function D(){var at=R,zt=I,er=null,hr=b(0),Vr=b(u),Rr=b(0);function Er(xr){var Wr,Rn=xr.length,En,ea,ia=0,Aa=new Array(Rn),ya=new Array(Rn),pr=+hr.apply(this,arguments),vn=Math.min(u,Math.max(-u,Vr.apply(this,arguments)-pr)),$r,Fn=Math.min(Math.abs(vn)/Rn,Rr.apply(this,arguments)),Bn=Fn*(vn<0?-1:1),ca;for(Wr=0;Wr<Rn;++Wr)(ca=ya[Aa[Wr]=Wr]=+at(xr[Wr],Wr,xr))>0&&(ia+=ca);for(zt!=null?Aa.sort(function(ta,Un){return zt(ya[ta],ya[Un])}):er!=null&&Aa.sort(function(ta,Un){return er(xr[ta],xr[Un])}),Wr=0,ea=ia?(vn-Rn*Bn)/ia:0;Wr<Rn;++Wr,pr=$r)En=Aa[Wr],ca=ya[En],$r=pr+(ca>0?ca*ea:0)+Bn,ya[En]={data:xr[En],index:Wr,value:ca,startAngle:pr,endAngle:$r,padAngle:Fn};return ya}return Er.value=function(xr){return arguments.length?(at=typeof xr=="function"?xr:b(+xr),Er):at},Er.sortValues=function(xr){return arguments.length?(zt=xr,er=null,Er):zt},Er.sort=function(xr){return arguments.length?(er=xr,zt=null,Er):er},Er.startAngle=function(xr){return arguments.length?(hr=typeof xr=="function"?xr:b(+xr),Er):hr},Er.endAngle=function(xr){return arguments.length?(Vr=typeof xr=="function"?xr:b(+xr),Er):Vr},Er.padAngle=function(xr){return arguments.length?(Rr=typeof xr=="function"?xr:b(+xr),Er):Rr},Er}var O=G(L);function F(at){this._curve=at}F.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(at,zt){this._curve.point(zt*Math.sin(at),zt*-Math.cos(at))}};function G(at){function zt(er){return new F(at(er))}return zt._curve=at,zt}function W(at){var zt=at.curve;return at.angle=at.x,delete at.x,at.radius=at.y,delete at.y,at.curve=function(er){return arguments.length?zt(G(er)):zt()._curve},at}function q(){return W(P().curve(O))}function J(){var at=z().curve(O),zt=at.curve,er=at.lineX0,hr=at.lineX1,Vr=at.lineY0,Rr=at.lineY1;return at.angle=at.x,delete at.x,at.startAngle=at.x0,delete at.x0,at.endAngle=at.x1,delete at.x1,at.radius=at.y,delete at.y,at.innerRadius=at.y0,delete at.y0,at.outerRadius=at.y1,delete at.y1,at.lineStartAngle=function(){return W(er())},delete at.lineX0,at.lineEndAngle=function(){return W(hr())},delete at.lineX1,at.lineInnerRadius=function(){return W(Vr())},delete at.lineY0,at.lineOuterRadius=function(){return W(Rr())},delete at.lineY1,at.curve=function(Er){return arguments.length?zt(G(Er)):zt()._curve},at}function X(at,zt){return[(zt=+zt)*Math.cos(at-=Math.PI/2),zt*Math.sin(at)]}var Z=Array.prototype.slice;function se(at){return at.source}function le(at){return at.target}function oe(at){var zt=se,er=le,hr=S,Vr=k,Rr=null;function Er(){var xr,Wr=Z.call(arguments),Rn=zt.apply(this,Wr),En=er.apply(this,Wr);if(Rr||(Rr=xr=l.path()),at(Rr,+hr.apply(this,(Wr[0]=Rn,Wr)),+Vr.apply(this,Wr),+hr.apply(this,(Wr[0]=En,Wr)),+Vr.apply(this,Wr)),xr)return Rr=null,xr+""||null}return Er.source=function(xr){return arguments.length?(zt=xr,Er):zt},Er.target=function(xr){return arguments.length?(er=xr,Er):er},Er.x=function(xr){return arguments.length?(hr=typeof xr=="function"?xr:b(+xr),Er):hr},Er.y=function(xr){return arguments.length?(Vr=typeof xr=="function"?xr:b(+xr),Er):Vr},Er.context=function(xr){return arguments.length?(Rr=xr==null?null:xr,Er):Rr},Er}function U(at,zt,er,hr,Vr){at.moveTo(zt,er),at.bezierCurveTo(zt=(zt+hr)/2,er,zt,Vr,hr,Vr)}function V(at,zt,er,hr,Vr){at.moveTo(zt,er),at.bezierCurveTo(zt,er=(er+Vr)/2,hr,er,hr,Vr)}function re(at,zt,er,hr,Vr){var Rr=X(zt,er),Er=X(zt,er=(er+Vr)/2),xr=X(hr,er),Wr=X(hr,Vr);at.moveTo(Rr[0],Rr[1]),at.bezierCurveTo(Er[0],Er[1],xr[0],xr[1],Wr[0],Wr[1])}function ee(){return oe(U)}function j(){return oe(V)}function Q(){var at=oe(re);return at.angle=at.x,delete at.x,at.radius=at.y,delete at.y,at}var ne={draw:function(at,zt){var er=Math.sqrt(zt/i);at.moveTo(er,0),at.arc(0,0,er,0,u)}},ae={draw:function(at,zt){var er=Math.sqrt(zt/5)/2;at.moveTo(-3*er,-er),at.lineTo(-er,-er),at.lineTo(-er,-3*er),at.lineTo(er,-3*er),at.lineTo(er,-er),at.lineTo(3*er,-er),at.lineTo(3*er,er),at.lineTo(er,er),at.lineTo(er,3*er),at.lineTo(-er,3*er),at.lineTo(-er,er),at.lineTo(-3*er,er),at.closePath()}},ie=Math.sqrt(1/3),ue=ie*2,xe={draw:function(at,zt){var er=Math.sqrt(zt/ue),hr=er*ie;at.moveTo(0,-er),at.lineTo(hr,0),at.lineTo(0,er),at.lineTo(-hr,0),at.closePath()}},he=.8908130915292852,ge=Math.sin(i/10)/Math.sin(7*i/10),me=Math.sin(u/10)*ge,ke=-Math.cos(u/10)*ge,Ae={draw:function(at,zt){var er=Math.sqrt(zt*he),hr=me*er,Vr=ke*er;at.moveTo(0,-er),at.lineTo(hr,Vr);for(var Rr=1;Rr<5;++Rr){var Er=u*Rr/5,xr=Math.cos(Er),Wr=Math.sin(Er);at.lineTo(Wr*er,-xr*er),at.lineTo(xr*hr-Wr*Vr,Wr*hr+xr*Vr)}at.closePath()}},Ne={draw:function(at,zt){var er=Math.sqrt(zt),hr=-er/2;at.rect(hr,hr,er,er)}},He=Math.sqrt(3),Ge={draw:function(at,zt){var er=-Math.sqrt(zt/(He*3));at.moveTo(0,er*2),at.lineTo(-He*er,-er),at.lineTo(He*er,-er),at.closePath()}},_e=-.5,De=Math.sqrt(3)/2,Ye=1/Math.sqrt(12),qe=(Ye/2+1)*3,Ue={draw:function(at,zt){var er=Math.sqrt(zt/qe),hr=er/2,Vr=er*Ye,Rr=hr,Er=er*Ye+er,xr=-Rr,Wr=Er;at.moveTo(hr,Vr),at.lineTo(Rr,Er),at.lineTo(xr,Wr),at.lineTo(_e*hr-De*Vr,De*hr+_e*Vr),at.lineTo(_e*Rr-De*Er,De*Rr+_e*Er),at.lineTo(_e*xr-De*Wr,De*xr+_e*Wr),at.lineTo(_e*hr+De*Vr,_e*Vr-De*hr),at.lineTo(_e*Rr+De*Er,_e*Er-De*Rr),at.lineTo(_e*xr+De*Wr,_e*Wr-De*xr),at.closePath()}},Ie=[ne,ae,xe,Ne,Ae,Ge,Ue];function Ve(){var at=b(ne),zt=b(64),er=null;function hr(){var Vr;if(er||(er=Vr=l.path()),at.apply(this,arguments).draw(er,+zt.apply(this,arguments)),Vr)return er=null,Vr+""||null}return hr.type=function(Vr){return arguments.length?(at=typeof Vr=="function"?Vr:b(Vr),hr):at},hr.size=function(Vr){return arguments.length?(zt=typeof Vr=="function"?Vr:b(+Vr),hr):zt},hr.context=function(Vr){return arguments.length?(er=Vr==null?null:Vr,hr):er},hr}function dt(){}function Dt(at,zt,er){at._context.bezierCurveTo((2*at._x0+at._x1)/3,(2*at._y0+at._y1)/3,(at._x0+2*at._x1)/3,(at._y0+2*at._y1)/3,(at._x0+4*at._x1+zt)/6,(at._y0+4*at._y1+er)/6)}function Yt(at){this._context=at}Yt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Dt(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,zt){switch(at=+at,zt=+zt,this._point){case 0:this._point=1,this._line?this._context.lineTo(at,zt):this._context.moveTo(at,zt);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Dt(this,at,zt);break}this._x0=this._x1,this._x1=at,this._y0=this._y1,this._y1=zt}};function kt(at){return new Yt(at)}function Ft(at){this._context=at}Ft.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(at,zt){switch(at=+at,zt=+zt,this._point){case 0:this._point=1,this._x2=at,this._y2=zt;break;case 1:this._point=2,this._x3=at,this._y3=zt;break;case 2:this._point=3,this._x4=at,this._y4=zt,this._context.moveTo((this._x0+4*this._x1+at)/6,(this._y0+4*this._y1+zt)/6);break;default:Dt(this,at,zt);break}this._x0=this._x1,this._x1=at,this._y0=this._y1,this._y1=zt}};function Nt(at){return new Ft(at)}function Lt(at){this._context=at}Lt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(at,zt){switch(at=+at,zt=+zt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var er=(this._x0+4*this._x1+at)/6,hr=(this._y0+4*this._y1+zt)/6;this._line?this._context.lineTo(er,hr):this._context.moveTo(er,hr);break;case 3:this._point=4;default:Dt(this,at,zt);break}this._x0=this._x1,this._x1=at,this._y0=this._y1,this._y1=zt}};function St(at){return new Lt(at)}function it(at,zt){this._basis=new Yt(at),this._beta=zt}it.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var at=this._x,zt=this._y,er=at.length-1;if(er>0)for(var hr=at[0],Vr=zt[0],Rr=at[er]-hr,Er=zt[er]-Vr,xr=-1,Wr;++xr<=er;)Wr=xr/er,this._basis.point(this._beta*at[xr]+(1-this._beta)*(hr+Wr*Rr),this._beta*zt[xr]+(1-this._beta)*(Vr+Wr*Er));this._x=this._y=null,this._basis.lineEnd()},point:function(at,zt){this._x.push(+at),this._y.push(+zt)}};var ht=function at(zt){function er(hr){return zt===1?new Yt(hr):new it(hr,zt)}return er.beta=function(hr){return at(+hr)},er}(.85);function Qe(at,zt,er){at._context.bezierCurveTo(at._x1+at._k*(at._x2-at._x0),at._y1+at._k*(at._y2-at._y0),at._x2+at._k*(at._x1-zt),at._y2+at._k*(at._y1-er),at._x2,at._y2)}function Ce(at,zt){this._context=at,this._k=(1-zt)/6}Ce.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Qe(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,zt){switch(at=+at,zt=+zt,this._point){case 0:this._point=1,this._line?this._context.lineTo(at,zt):this._context.moveTo(at,zt);break;case 1:this._point=2,this._x1=at,this._y1=zt;break;case 2:this._point=3;default:Qe(this,at,zt);break}this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=zt}};var je=function at(zt){function er(hr){return new Ce(hr,zt)}return er.tension=function(hr){return at(+hr)},er}(0);function rt(at,zt){this._context=at,this._k=(1-zt)/6}rt.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(at,zt){switch(at=+at,zt=+zt,this._point){case 0:this._point=1,this._x3=at,this._y3=zt;break;case 1:this._point=2,this._context.moveTo(this._x4=at,this._y4=zt);break;case 2:this._point=3,this._x5=at,this._y5=zt;break;default:Qe(this,at,zt);break}this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=zt}};var ut=function at(zt){function er(hr){return new rt(hr,zt)}return er.tension=function(hr){return at(+hr)},er}(0);function Pt(at,zt){this._context=at,this._k=(1-zt)/6}Pt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(at,zt){switch(at=+at,zt=+zt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Qe(this,at,zt);break}this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=zt}};var Tt=function at(zt){function er(hr){return new Pt(hr,zt)}return er.tension=function(hr){return at(+hr)},er}(0);function Ot(at,zt,er){var hr=at._x1,Vr=at._y1,Rr=at._x2,Er=at._y2;if(at._l01_a>s){var xr=2*at._l01_2a+3*at._l01_a*at._l12_a+at._l12_2a,Wr=3*at._l01_a*(at._l01_a+at._l12_a);hr=(hr*xr-at._x0*at._l12_2a+at._x2*at._l01_2a)/Wr,Vr=(Vr*xr-at._y0*at._l12_2a+at._y2*at._l01_2a)/Wr}if(at._l23_a>s){var Rn=2*at._l23_2a+3*at._l23_a*at._l12_a+at._l12_2a,En=3*at._l23_a*(at._l23_a+at._l12_a);Rr=(Rr*Rn+at._x1*at._l23_2a-zt*at._l12_2a)/En,Er=(Er*Rn+at._y1*at._l23_2a-er*at._l12_2a)/En}at._context.bezierCurveTo(hr,Vr,Rr,Er,at._x2,at._y2)}function Kt(at,zt){this._context=at,this._alpha=zt}Kt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,zt){if(at=+at,zt=+zt,this._point){var er=this._x2-at,hr=this._y2-zt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(er*er+hr*hr,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(at,zt):this._context.moveTo(at,zt);break;case 1:this._point=2;break;case 2:this._point=3;default:Ot(this,at,zt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=zt}};var Bt=function at(zt){function er(hr){return zt?new Kt(hr,zt):new Ce(hr,0)}return er.alpha=function(hr){return at(+hr)},er}(.5);function Zt(at,zt){this._context=at,this._alpha=zt}Zt.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(at,zt){if(at=+at,zt=+zt,this._point){var er=this._x2-at,hr=this._y2-zt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(er*er+hr*hr,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=at,this._y3=zt;break;case 1:this._point=2,this._context.moveTo(this._x4=at,this._y4=zt);break;case 2:this._point=3,this._x5=at,this._y5=zt;break;default:Ot(this,at,zt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=zt}};var Je=function at(zt){function er(hr){return zt?new Zt(hr,zt):new rt(hr,0)}return er.alpha=function(hr){return at(+hr)},er}(.5);function pt(at,zt){this._context=at,this._alpha=zt}pt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(at,zt){if(at=+at,zt=+zt,this._point){var er=this._x2-at,hr=this._y2-zt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(er*er+hr*hr,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ot(this,at,zt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=zt}};var Et=function at(zt){function er(hr){return zt?new pt(hr,zt):new Pt(hr,0)}return er.alpha=function(hr){return at(+hr)},er}(.5);function ar(at){this._context=at}ar.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(at,zt){at=+at,zt=+zt,this._point?this._context.lineTo(at,zt):(this._point=1,this._context.moveTo(at,zt))}};function vr(at){return new ar(at)}function ir(at){return at<0?-1:1}function dr(at,zt,er){var hr=at._x1-at._x0,Vr=zt-at._x1,Rr=(at._y1-at._y0)/(hr||Vr<0&&-0),Er=(er-at._y1)/(Vr||hr<0&&-0),xr=(Rr*Vr+Er*hr)/(hr+Vr);return(ir(Rr)+ir(Er))*Math.min(Math.abs(Rr),Math.abs(Er),.5*Math.abs(xr))||0}function Pr(at,zt){var er=at._x1-at._x0;return er?(3*(at._y1-at._y0)/er-zt)/2:zt}function Sr(at,zt,er){var hr=at._x0,Vr=at._y0,Rr=at._x1,Er=at._y1,xr=(Rr-hr)/3;at._context.bezierCurveTo(hr+xr,Vr+xr*zt,Rr-xr,Er-xr*er,Rr,Er)}function tr(at){this._context=at}tr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Sr(this,this._t0,Pr(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,zt){var er=NaN;if(at=+at,zt=+zt,!(at===this._x1&&zt===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(at,zt):this._context.moveTo(at,zt);break;case 1:this._point=2;break;case 2:this._point=3,Sr(this,Pr(this,er=dr(this,at,zt)),er);break;default:Sr(this,this._t0,er=dr(this,at,zt));break}this._x0=this._x1,this._x1=at,this._y0=this._y1,this._y1=zt,this._t0=er}}};function Nr(at){this._context=new et(at)}(Nr.prototype=Object.create(tr.prototype)).point=function(at,zt){tr.prototype.point.call(this,zt,at)};function et(at){this._context=at}et.prototype={moveTo:function(at,zt){this._context.moveTo(zt,at)},closePath:function(){this._context.closePath()},lineTo:function(at,zt){this._context.lineTo(zt,at)},bezierCurveTo:function(at,zt,er,hr,Vr,Rr){this._context.bezierCurveTo(zt,at,hr,er,Rr,Vr)}};function we(at){return new tr(at)}function Me(at){return new Nr(at)}function Re(at){this._context=at}Re.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var at=this._x,zt=this._y,er=at.length;if(er)if(this._line?this._context.lineTo(at[0],zt[0]):this._context.moveTo(at[0],zt[0]),er===2)this._context.lineTo(at[1],zt[1]);else for(var hr=Xe(at),Vr=Xe(zt),Rr=0,Er=1;Er<er;++Rr,++Er)this._context.bezierCurveTo(hr[0][Rr],Vr[0][Rr],hr[1][Rr],Vr[1][Rr],at[Er],zt[Er]);(this._line||this._line!==0&&er===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(at,zt){this._x.push(+at),this._y.push(+zt)}};function Xe(at){var zt,er=at.length-1,hr,Vr=new Array(er),Rr=new Array(er),Er=new Array(er);for(Vr[0]=0,Rr[0]=2,Er[0]=at[0]+2*at[1],zt=1;zt<er-1;++zt)Vr[zt]=1,Rr[zt]=4,Er[zt]=4*at[zt]+2*at[zt+1];for(Vr[er-1]=2,Rr[er-1]=7,Er[er-1]=8*at[er-1]+at[er],zt=1;zt<er;++zt)hr=Vr[zt]/Rr[zt-1],Rr[zt]-=hr,Er[zt]-=hr*Er[zt-1];for(Vr[er-1]=Er[er-1]/Rr[er-1],zt=er-2;zt>=0;--zt)Vr[zt]=(Er[zt]-Vr[zt+1])/Rr[zt];for(Rr[er-1]=(at[er]+Vr[er-1])/2,zt=0;zt<er-1;++zt)Rr[zt]=2*at[zt+1]-Vr[zt+1];return[Vr,Rr]}function $e(at){return new Re(at)}function ot(at,zt){this._context=at,this._t=zt}ot.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(at,zt){switch(at=+at,zt=+zt,this._point){case 0:this._point=1,this._line?this._context.lineTo(at,zt):this._context.moveTo(at,zt);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,zt),this._context.lineTo(at,zt);else{var er=this._x*(1-this._t)+at*this._t;this._context.lineTo(er,this._y),this._context.lineTo(er,zt)}break}}this._x=at,this._y=zt}};function st(at){return new ot(at,.5)}function yt(at){return new ot(at,0)}function wt(at){return new ot(at,1)}function Vt(at,zt){if((Er=at.length)>1)for(var er=1,hr,Vr,Rr=at[zt[0]],Er,xr=Rr.length;er<Er;++er)for(Vr=Rr,Rr=at[zt[er]],hr=0;hr<xr;++hr)Rr[hr][1]+=Rr[hr][0]=isNaN(Vr[hr][1])?Vr[hr][0]:Vr[hr][1]}function gr(at){for(var zt=at.length,er=new Array(zt);--zt>=0;)er[zt]=zt;return er}function wr(at,zt){return at[zt]}function Lr(){var at=b([]),zt=gr,er=Vt,hr=wr;function Vr(Rr){var Er=at.apply(this,arguments),xr,Wr=Rr.length,Rn=Er.length,En=new Array(Rn),ea;for(xr=0;xr<Rn;++xr){for(var ia=Er[xr],Aa=En[xr]=new Array(Wr),ya=0,pr;ya<Wr;++ya)Aa[ya]=pr=[0,+hr(Rr[ya],ia,ya,Rr)],pr.data=Rr[ya];Aa.key=ia}for(xr=0,ea=zt(En);xr<Rn;++xr)En[ea[xr]].index=xr;return er(En,ea),En}return Vr.keys=function(Rr){return arguments.length?(at=typeof Rr=="function"?Rr:b(Z.call(Rr)),Vr):at},Vr.value=function(Rr){return arguments.length?(hr=typeof Rr=="function"?Rr:b(+Rr),Vr):hr},Vr.order=function(Rr){return arguments.length?(zt=Rr==null?gr:typeof Rr=="function"?Rr:b(Z.call(Rr)),Vr):zt},Vr.offset=function(Rr){return arguments.length?(er=Rr==null?Vt:Rr,Vr):er},Vr}function fr(at,zt){if((hr=at.length)>0){for(var er,hr,Vr=0,Rr=at[0].length,Er;Vr<Rr;++Vr){for(Er=er=0;er<hr;++er)Er+=at[er][Vr][1]||0;if(Er)for(er=0;er<hr;++er)at[er][Vr][1]/=Er}Vt(at,zt)}}function Fr(at,zt){if((Wr=at.length)>0)for(var er,hr=0,Vr,Rr,Er,xr,Wr,Rn=at[zt[0]].length;hr<Rn;++hr)for(Er=xr=0,er=0;er<Wr;++er)(Rr=(Vr=at[zt[er]][hr])[1]-Vr[0])>0?(Vr[0]=Er,Vr[1]=Er+=Rr):Rr<0?(Vr[1]=xr,Vr[0]=xr+=Rr):(Vr[0]=0,Vr[1]=Rr)}function nn(at,zt){if((Vr=at.length)>0){for(var er=0,hr=at[zt[0]],Vr,Rr=hr.length;er<Rr;++er){for(var Er=0,xr=0;Er<Vr;++Er)xr+=at[Er][er][1]||0;hr[er][1]+=hr[er][0]=-xr/2}Vt(at,zt)}}function yr(at,zt){if(!(!((Er=at.length)>0)||!((Rr=(Vr=at[zt[0]]).length)>0))){for(var er=0,hr=1,Vr,Rr,Er;hr<Rr;++hr){for(var xr=0,Wr=0,Rn=0;xr<Er;++xr){for(var En=at[zt[xr]],ea=En[hr][1]||0,ia=En[hr-1][1]||0,Aa=(ea-ia)/2,ya=0;ya<xr;++ya){var pr=at[zt[ya]],vn=pr[hr][1]||0,$r=pr[hr-1][1]||0;Aa+=vn-$r}Wr+=ea,Rn+=Aa*ea}Vr[hr-1][1]+=Vr[hr-1][0]=er,Wr&&(er-=Rn/Wr)}Vr[hr-1][1]+=Vr[hr-1][0]=er,Vt(at,zt)}}function _r(at){var zt=at.map(dn);return gr(at).sort(function(er,hr){return zt[er]-zt[hr]})}function dn(at){for(var zt=-1,er=0,hr=at.length,Vr,Rr=-1/0;++zt<hr;)(Vr=+at[zt][1])>Rr&&(Rr=Vr,er=zt);return er}function Yr(at){var zt=at.map(Ar);return gr(at).sort(function(er,hr){return zt[er]-zt[hr]})}function Ar(at){for(var zt=0,er=-1,hr=at.length,Vr;++er<hr;)(Vr=+at[er][1])&&(zt+=Vr);return zt}function an(at){return Yr(at).reverse()}function rn(at){var zt=at.length,er,hr,Vr=at.map(Ar),Rr=_r(at),Er=0,xr=0,Wr=[],Rn=[];for(er=0;er<zt;++er)hr=Rr[er],Er<xr?(Er+=Vr[hr],Wr.push(hr)):(xr+=Vr[hr],Rn.push(hr));return Rn.reverse().concat(Wr)}function Zr(at){return gr(at).reverse()}d.arc=_,d.area=z,d.areaRadial=J,d.curveBasis=kt,d.curveBasisClosed=Nt,d.curveBasisOpen=St,d.curveBundle=ht,d.curveCardinal=je,d.curveCardinalClosed=ut,d.curveCardinalOpen=Tt,d.curveCatmullRom=Bt,d.curveCatmullRomClosed=Je,d.curveCatmullRomOpen=Et,d.curveLinear=L,d.curveLinearClosed=vr,d.curveMonotoneX=we,d.curveMonotoneY=Me,d.curveNatural=$e,d.curveStep=st,d.curveStepAfter=wt,d.curveStepBefore=yt,d.line=P,d.lineRadial=q,d.linkHorizontal=ee,d.linkRadial=Q,d.linkVertical=j,d.pie=D,d.pointRadial=X,d.radialArea=J,d.radialLine=q,d.stack=Lr,d.stackOffsetDiverging=Fr,d.stackOffsetExpand=fr,d.stackOffsetNone=Vt,d.stackOffsetSilhouette=nn,d.stackOffsetWiggle=yr,d.stackOrderAppearance=_r,d.stackOrderAscending=Yr,d.stackOrderDescending=an,d.stackOrderInsideOut=rn,d.stackOrderNone=gr,d.stackOrderReverse=Zr,d.symbol=Ve,d.symbolCircle=ne,d.symbolCross=ae,d.symbolDiamond=xe,d.symbolSquare=Ne,d.symbolStar=Ae,d.symbolTriangle=Ge,d.symbolWye=Ue,d.symbols=Ie,Object.defineProperty(d,"__esModule",{value:!0})})},{"d3-path":117}],120:[function(t,B,H){(function(d,l){typeof H=="object"&&typeof B!="undefined"?l(H,t("d3-time")):(d=d||self,l(d.d3=d.d3||{},d.d3))})(this,function(d,l){function b(it){if(0<=it.y&&it.y<100){var ht=new Date(-1,it.m,it.d,it.H,it.M,it.S,it.L);return ht.setFullYear(it.y),ht}return new Date(it.y,it.m,it.d,it.H,it.M,it.S,it.L)}function w(it){if(0<=it.y&&it.y<100){var ht=new Date(Date.UTC(-1,it.m,it.d,it.H,it.M,it.S,it.L));return ht.setUTCFullYear(it.y),ht}return new Date(Date.UTC(it.y,it.m,it.d,it.H,it.M,it.S,it.L))}function e(it,ht,Qe){return{y:it,m:ht,d:Qe,H:0,M:0,S:0,L:0}}function o(it){var ht=it.dateTime,Qe=it.date,Ce=it.time,je=it.periods,rt=it.days,ut=it.shortDays,Pt=it.months,Tt=it.shortMonths,Ot=v(je),Kt=u(je),Bt=v(rt),Zt=u(rt),Je=v(ut),pt=u(ut),Et=v(Pt),ar=u(Pt),vr=v(Tt),ir=u(Tt),dr={a:wt,A:Vt,b:gr,B:wr,c:null,d:F,e:F,f:X,H:G,I:W,j:q,L:J,m:Z,M:se,p:Lr,q:fr,Q:Ve,s:dt,S:le,u:oe,U,V,w:re,W:ee,x:null,X:null,y:j,Y:Q,Z:ne,"%":Ie},Pr={a:Fr,A:nn,b:yr,B:_r,c:null,d:ae,e:ae,f:ge,H:ie,I:ue,j:xe,L:he,m:me,M:ke,p:dn,q:Yr,Q:Ve,s:dt,S:Ae,u:Ne,U:He,V:Ge,w:_e,W:De,x:null,X:null,y:Ye,Y:qe,Z:Ue,"%":Ie},Sr={a:Me,A:Re,b:Xe,B:$e,c:ot,d:f,e:f,f:I,H:S,I:S,j:L,L:z,m:_,M:k,p:we,q:T,Q:D,s:O,S:P,u:h,U:y,V:p,w:g,W:A,x:st,X:yt,y:M,Y:m,Z:x,"%":R};dr.x=tr(Qe,dr),dr.X=tr(Ce,dr),dr.c=tr(ht,dr),Pr.x=tr(Qe,Pr),Pr.X=tr(Ce,Pr),Pr.c=tr(ht,Pr);function tr(Ar,an){return function(rn){var Zr=[],at=-1,zt=0,er=Ar.length,hr,Vr,Rr;for(rn instanceof Date||(rn=new Date(+rn));++at<er;)Ar.charCodeAt(at)===37&&(Zr.push(Ar.slice(zt,at)),(Vr=a[hr=Ar.charAt(++at)])!=null?hr=Ar.charAt(++at):Vr=hr==="e"?" ":"0",(Rr=an[hr])&&(hr=Rr(rn,Vr)),Zr.push(hr),zt=at+1);return Zr.push(Ar.slice(zt,at)),Zr.join("")}}function Nr(Ar,an){return function(rn){var Zr=e(1900,void 0,1),at=et(Zr,Ar,rn+="",0),zt,er;if(at!=rn.length)return null;if("Q"in Zr)return new Date(Zr.Q);if("s"in Zr)return new Date(Zr.s*1e3+("L"in Zr?Zr.L:0));if(an&&!("Z"in Zr)&&(Zr.Z=0),"p"in Zr&&(Zr.H=Zr.H%12+Zr.p*12),Zr.m===void 0&&(Zr.m="q"in Zr?Zr.q:0),"V"in Zr){if(Zr.V<1||Zr.V>53)return null;"w"in Zr||(Zr.w=1),"Z"in Zr?(zt=w(e(Zr.y,0,1)),er=zt.getUTCDay(),zt=er>4||er===0?l.utcMonday.ceil(zt):l.utcMonday(zt),zt=l.utcDay.offset(zt,(Zr.V-1)*7),Zr.y=zt.getUTCFullYear(),Zr.m=zt.getUTCMonth(),Zr.d=zt.getUTCDate()+(Zr.w+6)%7):(zt=b(e(Zr.y,0,1)),er=zt.getDay(),zt=er>4||er===0?l.timeMonday.ceil(zt):l.timeMonday(zt),zt=l.timeDay.offset(zt,(Zr.V-1)*7),Zr.y=zt.getFullYear(),Zr.m=zt.getMonth(),Zr.d=zt.getDate()+(Zr.w+6)%7)}else("W"in Zr||"U"in Zr)&&("w"in Zr||(Zr.w="u"in Zr?Zr.u%7:"W"in Zr?1:0),er="Z"in Zr?w(e(Zr.y,0,1)).getUTCDay():b(e(Zr.y,0,1)).getDay(),Zr.m=0,Zr.d="W"in Zr?(Zr.w+6)%7+Zr.W*7-(er+5)%7:Zr.w+Zr.U*7-(er+6)%7);return"Z"in Zr?(Zr.H+=Zr.Z/100|0,Zr.M+=Zr.Z%100,w(Zr)):b(Zr)}}function et(Ar,an,rn,Zr){for(var at=0,zt=an.length,er=rn.length,hr,Vr;at<zt;){if(Zr>=er)return-1;if(hr=an.charCodeAt(at++),hr===37){if(hr=an.charAt(at++),Vr=Sr[hr in a?an.charAt(at++):hr],!Vr||(Zr=Vr(Ar,rn,Zr))<0)return-1}else if(hr!=rn.charCodeAt(Zr++))return-1}return Zr}function we(Ar,an,rn){var Zr=Ot.exec(an.slice(rn));return Zr?(Ar.p=Kt[Zr[0].toLowerCase()],rn+Zr[0].length):-1}function Me(Ar,an,rn){var Zr=Je.exec(an.slice(rn));return Zr?(Ar.w=pt[Zr[0].toLowerCase()],rn+Zr[0].length):-1}function Re(Ar,an,rn){var Zr=Bt.exec(an.slice(rn));return Zr?(Ar.w=Zt[Zr[0].toLowerCase()],rn+Zr[0].length):-1}function Xe(Ar,an,rn){var Zr=vr.exec(an.slice(rn));return Zr?(Ar.m=ir[Zr[0].toLowerCase()],rn+Zr[0].length):-1}function $e(Ar,an,rn){var Zr=Et.exec(an.slice(rn));return Zr?(Ar.m=ar[Zr[0].toLowerCase()],rn+Zr[0].length):-1}function ot(Ar,an,rn){return et(Ar,ht,an,rn)}function st(Ar,an,rn){return et(Ar,Qe,an,rn)}function yt(Ar,an,rn){return et(Ar,Ce,an,rn)}function wt(Ar){return ut[Ar.getDay()]}function Vt(Ar){return rt[Ar.getDay()]}function gr(Ar){return Tt[Ar.getMonth()]}function wr(Ar){return Pt[Ar.getMonth()]}function Lr(Ar){return je[+(Ar.getHours()>=12)]}function fr(Ar){return 1+~~(Ar.getMonth()/3)}function Fr(Ar){return ut[Ar.getUTCDay()]}function nn(Ar){return rt[Ar.getUTCDay()]}function yr(Ar){return Tt[Ar.getUTCMonth()]}function _r(Ar){return Pt[Ar.getUTCMonth()]}function dn(Ar){return je[+(Ar.getUTCHours()>=12)]}function Yr(Ar){return 1+~~(Ar.getUTCMonth()/3)}return{format:function(Ar){var an=tr(Ar+="",dr);return an.toString=function(){return Ar},an},parse:function(Ar){var an=Nr(Ar+="",!1);return an.toString=function(){return Ar},an},utcFormat:function(Ar){var an=tr(Ar+="",Pr);return an.toString=function(){return Ar},an},utcParse:function(Ar){var an=Nr(Ar+="",!0);return an.toString=function(){return Ar},an}}}var a={"-":"",_:" ","0":"0"},r=/^\s*\d+/,n=/^%/,c=/[\\^$*+?|[\]().{}]/g;function s(it,ht,Qe){var Ce=it<0?"-":"",je=(Ce?-it:it)+"",rt=je.length;return Ce+(rt<Qe?new Array(Qe-rt+1).join(ht)+je:je)}function i(it){return it.replace(c,"\\$&")}function v(it){return new RegExp("^(?:"+it.map(i).join("|")+")","i")}function u(it){for(var ht={},Qe=-1,Ce=it.length;++Qe<Ce;)ht[it[Qe].toLowerCase()]=Qe;return ht}function g(it,ht,Qe){var Ce=r.exec(ht.slice(Qe,Qe+1));return Ce?(it.w=+Ce[0],Qe+Ce[0].length):-1}function h(it,ht,Qe){var Ce=r.exec(ht.slice(Qe,Qe+1));return Ce?(it.u=+Ce[0],Qe+Ce[0].length):-1}function y(it,ht,Qe){var Ce=r.exec(ht.slice(Qe,Qe+2));return Ce?(it.U=+Ce[0],Qe+Ce[0].length):-1}function p(it,ht,Qe){var Ce=r.exec(ht.slice(Qe,Qe+2));return Ce?(it.V=+Ce[0],Qe+Ce[0].length):-1}function A(it,ht,Qe){var Ce=r.exec(ht.slice(Qe,Qe+2));return Ce?(it.W=+Ce[0],Qe+Ce[0].length):-1}function m(it,ht,Qe){var Ce=r.exec(ht.slice(Qe,Qe+4));return Ce?(it.y=+Ce[0],Qe+Ce[0].length):-1}function M(it,ht,Qe){var Ce=r.exec(ht.slice(Qe,Qe+2));return Ce?(it.y=+Ce[0]+(+Ce[0]>68?1900:2e3),Qe+Ce[0].length):-1}function x(it,ht,Qe){var Ce=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(ht.slice(Qe,Qe+6));return Ce?(it.Z=Ce[1]?0:-(Ce[2]+(Ce[3]||"00")),Qe+Ce[0].length):-1}function T(it,ht,Qe){var Ce=r.exec(ht.slice(Qe,Qe+1));return Ce?(it.q=Ce[0]*3-3,Qe+Ce[0].length):-1}function _(it,ht,Qe){var Ce=r.exec(ht.slice(Qe,Qe+2));return Ce?(it.m=Ce[0]-1,Qe+Ce[0].length):-1}function f(it,ht,Qe){var Ce=r.exec(ht.slice(Qe,Qe+2));return Ce?(it.d=+Ce[0],Qe+Ce[0].length):-1}function L(it,ht,Qe){var Ce=r.exec(ht.slice(Qe,Qe+3));return Ce?(it.m=0,it.d=+Ce[0],Qe+Ce[0].length):-1}function S(it,ht,Qe){var Ce=r.exec(ht.slice(Qe,Qe+2));return Ce?(it.H=+Ce[0],Qe+Ce[0].length):-1}function k(it,ht,Qe){var Ce=r.exec(ht.slice(Qe,Qe+2));return Ce?(it.M=+Ce[0],Qe+Ce[0].length):-1}function P(it,ht,Qe){var Ce=r.exec(ht.slice(Qe,Qe+2));return Ce?(it.S=+Ce[0],Qe+Ce[0].length):-1}function z(it,ht,Qe){var Ce=r.exec(ht.slice(Qe,Qe+3));return Ce?(it.L=+Ce[0],Qe+Ce[0].length):-1}function I(it,ht,Qe){var Ce=r.exec(ht.slice(Qe,Qe+6));return Ce?(it.L=Math.floor(Ce[0]/1e3),Qe+Ce[0].length):-1}function R(it,ht,Qe){var Ce=n.exec(ht.slice(Qe,Qe+1));return Ce?Qe+Ce[0].length:-1}function D(it,ht,Qe){var Ce=r.exec(ht.slice(Qe));return Ce?(it.Q=+Ce[0],Qe+Ce[0].length):-1}function O(it,ht,Qe){var Ce=r.exec(ht.slice(Qe));return Ce?(it.s=+Ce[0],Qe+Ce[0].length):-1}function F(it,ht){return s(it.getDate(),ht,2)}function G(it,ht){return s(it.getHours(),ht,2)}function W(it,ht){return s(it.getHours()%12||12,ht,2)}function q(it,ht){return s(1+l.timeDay.count(l.timeYear(it),it),ht,3)}function J(it,ht){return s(it.getMilliseconds(),ht,3)}function X(it,ht){return J(it,ht)+"000"}function Z(it,ht){return s(it.getMonth()+1,ht,2)}function se(it,ht){return s(it.getMinutes(),ht,2)}function le(it,ht){return s(it.getSeconds(),ht,2)}function oe(it){var ht=it.getDay();return ht===0?7:ht}function U(it,ht){return s(l.timeSunday.count(l.timeYear(it)-1,it),ht,2)}function V(it,ht){var Qe=it.getDay();return it=Qe>=4||Qe===0?l.timeThursday(it):l.timeThursday.ceil(it),s(l.timeThursday.count(l.timeYear(it),it)+(l.timeYear(it).getDay()===4),ht,2)}function re(it){return it.getDay()}function ee(it,ht){return s(l.timeMonday.count(l.timeYear(it)-1,it),ht,2)}function j(it,ht){return s(it.getFullYear()%100,ht,2)}function Q(it,ht){return s(it.getFullYear()%1e4,ht,4)}function ne(it){var ht=it.getTimezoneOffset();return(ht>0?"-":(ht*=-1,"+"))+s(ht/60|0,"0",2)+s(ht%60,"0",2)}function ae(it,ht){return s(it.getUTCDate(),ht,2)}function ie(it,ht){return s(it.getUTCHours(),ht,2)}function ue(it,ht){return s(it.getUTCHours()%12||12,ht,2)}function xe(it,ht){return s(1+l.utcDay.count(l.utcYear(it),it),ht,3)}function he(it,ht){return s(it.getUTCMilliseconds(),ht,3)}function ge(it,ht){return he(it,ht)+"000"}function me(it,ht){return s(it.getUTCMonth()+1,ht,2)}function ke(it,ht){return s(it.getUTCMinutes(),ht,2)}function Ae(it,ht){return s(it.getUTCSeconds(),ht,2)}function Ne(it){var ht=it.getUTCDay();return ht===0?7:ht}function He(it,ht){return s(l.utcSunday.count(l.utcYear(it)-1,it),ht,2)}function Ge(it,ht){var Qe=it.getUTCDay();return it=Qe>=4||Qe===0?l.utcThursday(it):l.utcThursday.ceil(it),s(l.utcThursday.count(l.utcYear(it),it)+(l.utcYear(it).getUTCDay()===4),ht,2)}function _e(it){return it.getUTCDay()}function De(it,ht){return s(l.utcMonday.count(l.utcYear(it)-1,it),ht,2)}function Ye(it,ht){return s(it.getUTCFullYear()%100,ht,2)}function qe(it,ht){return s(it.getUTCFullYear()%1e4,ht,4)}function Ue(){return"+0000"}function Ie(){return"%"}function Ve(it){return+it}function dt(it){return Math.floor(+it/1e3)}var Dt;Yt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Yt(it){return Dt=o(it),d.timeFormat=Dt.format,d.timeParse=Dt.parse,d.utcFormat=Dt.utcFormat,d.utcParse=Dt.utcParse,Dt}var kt="%Y-%m-%dT%H:%M:%S.%LZ";function Ft(it){return it.toISOString()}var Nt=Date.prototype.toISOString?Ft:d.utcFormat(kt);function Lt(it){var ht=new Date(it);return isNaN(ht)?null:ht}var St=+new Date("2000-01-01T00:00:00.000Z")?Lt:d.utcParse(kt);d.isoFormat=Nt,d.isoParse=St,d.timeFormatDefaultLocale=Yt,d.timeFormatLocale=o,Object.defineProperty(d,"__esModule",{value:!0})})},{"d3-time":121}],121:[function(t,B,H){(function(d,l){typeof H=="object"&&typeof B!="undefined"?l(H):(d=d||self,l(d.d3=d.d3||{}))})(this,function(d){var l=new Date,b=new Date;function w(_e,De,Ye,qe){function Ue(Ie){return _e(Ie=arguments.length===0?new Date:new Date(+Ie)),Ie}return Ue.floor=function(Ie){return _e(Ie=new Date(+Ie)),Ie},Ue.ceil=function(Ie){return _e(Ie=new Date(Ie-1)),De(Ie,1),_e(Ie),Ie},Ue.round=function(Ie){var Ve=Ue(Ie),dt=Ue.ceil(Ie);return Ie-Ve<dt-Ie?Ve:dt},Ue.offset=function(Ie,Ve){return De(Ie=new Date(+Ie),Ve==null?1:Math.floor(Ve)),Ie},Ue.range=function(Ie,Ve,dt){var Dt=[],Yt;if(Ie=Ue.ceil(Ie),dt=dt==null?1:Math.floor(dt),!(Ie<Ve)||!(dt>0))return Dt;do Dt.push(Yt=new Date(+Ie)),De(Ie,dt),_e(Ie);while(Yt<Ie&&Ie<Ve);return Dt},Ue.filter=function(Ie){return w(function(Ve){if(Ve>=Ve)for(;_e(Ve),!Ie(Ve);)Ve.setTime(Ve-1)},function(Ve,dt){if(Ve>=Ve)if(dt<0)for(;++dt<=0;)for(;De(Ve,-1),!Ie(Ve););else for(;--dt>=0;)for(;De(Ve,1),!Ie(Ve););})},Ye&&(Ue.count=function(Ie,Ve){return l.setTime(+Ie),b.setTime(+Ve),_e(l),_e(b),Math.floor(Ye(l,b))},Ue.every=function(Ie){return Ie=Math.floor(Ie),!isFinite(Ie)||!(Ie>0)?null:Ie>1?Ue.filter(qe?function(Ve){return qe(Ve)%Ie===0}:function(Ve){return Ue.count(0,Ve)%Ie===0}):Ue}),Ue}var e=w(function(){},function(_e,De){_e.setTime(+_e+De)},function(_e,De){return De-_e});e.every=function(_e){return _e=Math.floor(_e),!isFinite(_e)||!(_e>0)?null:_e>1?w(function(De){De.setTime(Math.floor(De/_e)*_e)},function(De,Ye){De.setTime(+De+Ye*_e)},function(De,Ye){return(Ye-De)/_e}):e};var o=e.range,a=1e3,r=6e4,n=36e5,c=864e5,s=6048e5,i=w(function(_e){_e.setTime(_e-_e.getMilliseconds())},function(_e,De){_e.setTime(+_e+De*a)},function(_e,De){return(De-_e)/a},function(_e){return _e.getUTCSeconds()}),v=i.range,u=w(function(_e){_e.setTime(_e-_e.getMilliseconds()-_e.getSeconds()*a)},function(_e,De){_e.setTime(+_e+De*r)},function(_e,De){return(De-_e)/r},function(_e){return _e.getMinutes()}),g=u.range,h=w(function(_e){_e.setTime(_e-_e.getMilliseconds()-_e.getSeconds()*a-_e.getMinutes()*r)},function(_e,De){_e.setTime(+_e+De*n)},function(_e,De){return(De-_e)/n},function(_e){return _e.getHours()}),y=h.range,p=w(function(_e){_e.setHours(0,0,0,0)},function(_e,De){_e.setDate(_e.getDate()+De)},function(_e,De){return(De-_e-(De.getTimezoneOffset()-_e.getTimezoneOffset())*r)/c},function(_e){return _e.getDate()-1}),A=p.range;function m(_e){return w(function(De){De.setDate(De.getDate()-(De.getDay()+7-_e)%7),De.setHours(0,0,0,0)},function(De,Ye){De.setDate(De.getDate()+Ye*7)},function(De,Ye){return(Ye-De-(Ye.getTimezoneOffset()-De.getTimezoneOffset())*r)/s})}var M=m(0),x=m(1),T=m(2),_=m(3),f=m(4),L=m(5),S=m(6),k=M.range,P=x.range,z=T.range,I=_.range,R=f.range,D=L.range,O=S.range,F=w(function(_e){_e.setDate(1),_e.setHours(0,0,0,0)},function(_e,De){_e.setMonth(_e.getMonth()+De)},function(_e,De){return De.getMonth()-_e.getMonth()+(De.getFullYear()-_e.getFullYear())*12},function(_e){return _e.getMonth()}),G=F.range,W=w(function(_e){_e.setMonth(0,1),_e.setHours(0,0,0,0)},function(_e,De){_e.setFullYear(_e.getFullYear()+De)},function(_e,De){return De.getFullYear()-_e.getFullYear()},function(_e){return _e.getFullYear()});W.every=function(_e){return!isFinite(_e=Math.floor(_e))||!(_e>0)?null:w(function(De){De.setFullYear(Math.floor(De.getFullYear()/_e)*_e),De.setMonth(0,1),De.setHours(0,0,0,0)},function(De,Ye){De.setFullYear(De.getFullYear()+Ye*_e)})};var q=W.range,J=w(function(_e){_e.setUTCSeconds(0,0)},function(_e,De){_e.setTime(+_e+De*r)},function(_e,De){return(De-_e)/r},function(_e){return _e.getUTCMinutes()}),X=J.range,Z=w(function(_e){_e.setUTCMinutes(0,0,0)},function(_e,De){_e.setTime(+_e+De*n)},function(_e,De){return(De-_e)/n},function(_e){return _e.getUTCHours()}),se=Z.range,le=w(function(_e){_e.setUTCHours(0,0,0,0)},function(_e,De){_e.setUTCDate(_e.getUTCDate()+De)},function(_e,De){return(De-_e)/c},function(_e){return _e.getUTCDate()-1}),oe=le.range;function U(_e){return w(function(De){De.setUTCDate(De.getUTCDate()-(De.getUTCDay()+7-_e)%7),De.setUTCHours(0,0,0,0)},function(De,Ye){De.setUTCDate(De.getUTCDate()+Ye*7)},function(De,Ye){return(Ye-De)/s})}var V=U(0),re=U(1),ee=U(2),j=U(3),Q=U(4),ne=U(5),ae=U(6),ie=V.range,ue=re.range,xe=ee.range,he=j.range,ge=Q.range,me=ne.range,ke=ae.range,Ae=w(function(_e){_e.setUTCDate(1),_e.setUTCHours(0,0,0,0)},function(_e,De){_e.setUTCMonth(_e.getUTCMonth()+De)},function(_e,De){return De.getUTCMonth()-_e.getUTCMonth()+(De.getUTCFullYear()-_e.getUTCFullYear())*12},function(_e){return _e.getUTCMonth()}),Ne=Ae.range,He=w(function(_e){_e.setUTCMonth(0,1),_e.setUTCHours(0,0,0,0)},function(_e,De){_e.setUTCFullYear(_e.getUTCFullYear()+De)},function(_e,De){return De.getUTCFullYear()-_e.getUTCFullYear()},function(_e){return _e.getUTCFullYear()});He.every=function(_e){return!isFinite(_e=Math.floor(_e))||!(_e>0)?null:w(function(De){De.setUTCFullYear(Math.floor(De.getUTCFullYear()/_e)*_e),De.setUTCMonth(0,1),De.setUTCHours(0,0,0,0)},function(De,Ye){De.setUTCFullYear(De.getUTCFullYear()+Ye*_e)})};var Ge=He.range;d.timeDay=p,d.timeDays=A,d.timeFriday=L,d.timeFridays=D,d.timeHour=h,d.timeHours=y,d.timeInterval=w,d.timeMillisecond=e,d.timeMilliseconds=o,d.timeMinute=u,d.timeMinutes=g,d.timeMonday=x,d.timeMondays=P,d.timeMonth=F,d.timeMonths=G,d.timeSaturday=S,d.timeSaturdays=O,d.timeSecond=i,d.timeSeconds=v,d.timeSunday=M,d.timeSundays=k,d.timeThursday=f,d.timeThursdays=R,d.timeTuesday=T,d.timeTuesdays=z,d.timeWednesday=_,d.timeWednesdays=I,d.timeWeek=M,d.timeWeeks=k,d.timeYear=W,d.timeYears=q,d.utcDay=le,d.utcDays=oe,d.utcFriday=ne,d.utcFridays=me,d.utcHour=Z,d.utcHours=se,d.utcMillisecond=e,d.utcMilliseconds=o,d.utcMinute=J,d.utcMinutes=X,d.utcMonday=re,d.utcMondays=ue,d.utcMonth=Ae,d.utcMonths=Ne,d.utcSaturday=ae,d.utcSaturdays=ke,d.utcSecond=i,d.utcSeconds=v,d.utcSunday=V,d.utcSundays=ie,d.utcThursday=Q,d.utcThursdays=ge,d.utcTuesday=ee,d.utcTuesdays=xe,d.utcWednesday=j,d.utcWednesdays=he,d.utcWeek=V,d.utcWeeks=ie,d.utcYear=He,d.utcYears=Ge,Object.defineProperty(d,"__esModule",{value:!0})})},{}],122:[function(t,B,H){arguments[4][121][0].apply(H,arguments)},{dup:121}],123:[function(t,B,H){(function(d,l){typeof H=="object"&&typeof B!="undefined"?l(H):(d=d||self,l(d.d3=d.d3||{}))})(this,function(d){var l=0,b=0,w=0,e=1e3,o,a,r=0,n=0,c=0,s=typeof performance=="object"&&performance.now?performance:Date,i=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(_){setTimeout(_,17)};function v(){return n||(i(u),n=s.now()+c)}function u(){n=0}function g(){this._call=this._time=this._next=null}g.prototype=h.prototype={constructor:g,restart:function(_,f,L){if(typeof _!="function")throw new TypeError("callback is not a function");L=(L==null?v():+L)+(f==null?0:+f),!this._next&&a!==this&&(a?a._next=this:o=this,a=this),this._call=_,this._time=L,M()},stop:function(){this._call&&(this._call=null,this._time=1/0,M())}};function h(_,f,L){var S=new g;return S.restart(_,f,L),S}function y(){v(),++l;for(var _=o,f;_;)(f=n-_._time)>=0&&_._call.call(null,f),_=_._next;--l}function p(){n=(r=s.now())+c,l=b=0;try{y()}finally{l=0,m(),n=0}}function A(){var _=s.now(),f=_-r;f>e&&(c-=f,r=_)}function m(){for(var _,f=o,L,S=1/0;f;)f._call?(S>f._time&&(S=f._time),_=f,f=f._next):(L=f._next,f._next=null,f=_?_._next=L:o=L);a=_,M(S)}function M(_){if(!l){b&&(b=clearTimeout(b));var f=_-n;f>24?(_<1/0&&(b=setTimeout(p,_-s.now()-c)),w&&(w=clearInterval(w))):(w||(r=s.now(),w=setInterval(A,e)),l=1,i(p))}}function x(_,f,L){var S=new g;return f=f==null?0:+f,S.restart(function(k){S.stop(),_(k+f)},f,L),S}function T(_,f,L){var S=new g,k=f;return f==null?(S.restart(_,f,L),S):(f=+f,L=L==null?v():+L,S.restart(function P(z){z+=k,S.restart(P,k+=f,L),_(z)},f,L),S)}d.interval=T,d.now=v,d.timeout=x,d.timer=h,d.timerFlush=y,Object.defineProperty(d,"__esModule",{value:!0})})},{}],124:[function(t,B,H){B.exports=function(){for(var d=0;d<arguments.length;d++)if(arguments[d]!==void 0)return arguments[d]}},{}],125:[function(t,B,H){B.exports=w;var d=w.canvas=document.createElement("canvas"),l=d.getContext("2d"),b=e([32,126]);w.createPairs=e,w.ascii=b;function w(o,a){Array.isArray(o)&&(o=o.join(", "));var r={},n,c=16,s=.05;a&&(a.length===2&&typeof a[0]=="number"?n=e(a):Array.isArray(a)?n=a:(a.o?n=e(a.o):a.pairs&&(n=a.pairs),a.fontSize&&(c=a.fontSize),a.threshold!=null&&(s=a.threshold))),n||(n=b),l.font=c+"px "+o;for(var i=0;i<n.length;i++){var v=n[i],u=l.measureText(v[0]).width+l.measureText(v[1]).width,g=l.measureText(v).width;if(Math.abs(u-g)>c*s){var h=(g-u)/c;r[v]=h*1e3}}return r}function e(o){for(var a=[],r=o[0];r<=o[1];r++)for(var n=String.fromCharCode(r),c=o[0];c<o[1];c++){var s=String.fromCharCode(c),i=n+s;a.push(i)}return a}},{}],126:[function(t,B,H){var d=t("abs-svg-path"),l=t("normalize-svg-path"),b={M:"moveTo",C:"bezierCurveTo"};B.exports=function(w,e){w.beginPath(),l(d(e)).forEach(function(o){var a=o[0],r=o.slice(1);w[b[a]].apply(w,r)}),w.closePath()}},{"abs-svg-path":70,"normalize-svg-path":246}],127:[function(t,B,H){B.exports=function(d){switch(d){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],128:[function(t,B,H){function d(w,e,o){var a=w[o]|0;if(a<=0)return[];var r=new Array(a),n;if(o===w.length-1)for(n=0;n<a;++n)r[n]=e;else for(n=0;n<a;++n)r[n]=d(w,e,o+1);return r}function l(w,e){var o,a;for(o=new Array(w),a=0;a<w;++a)o[a]=e;return o}function b(w,e){switch(typeof e=="undefined"&&(e=0),typeof w){case"number":if(w>0)return l(w|0,e);break;case"object":if(typeof w.length=="number")return d(w,e,0);break}return[]}B.exports=b},{}],129:[function(t,B,H){B.exports=d,B.exports.default=d;function d(D,O,F){F=F||2;var G=O&&O.length,W=G?O[0]*F:D.length,q=l(D,0,W,F,!0),J=[];if(!q||q.next===q.prev)return J;var X,Z,se,le,oe,U,V;if(G&&(q=n(D,O,q,F)),D.length>80*F){X=se=D[0],Z=le=D[1];for(var re=F;re<W;re+=F)oe=D[re],U=D[re+1],oe<X&&(X=oe),U<Z&&(Z=U),oe>se&&(se=oe),U>le&&(le=U);V=Math.max(se-X,le-Z),V=V!==0?1/V:0}return w(q,J,F,X,Z,V),J}function l(D,O,F,G,W){var q,J;if(W===R(D,O,F,G)>0)for(q=O;q<F;q+=G)J=P(q,D[q],D[q+1],J);else for(q=F-G;q>=O;q-=G)J=P(q,D[q],D[q+1],J);return J&&M(J,J.next)&&(z(J),J=J.next),J}function b(D,O){if(!D)return D;O||(O=D);var F=D,G;do if(G=!1,!F.steiner&&(M(F,F.next)||m(F.prev,F,F.next)===0)){if(z(F),F=O=F.prev,F===F.next)break;G=!0}else F=F.next;while(G||F!==O);return O}function w(D,O,F,G,W,q,J){if(!!D){!J&&q&&u(D,G,W,q);for(var X=D,Z,se;D.prev!==D.next;){if(Z=D.prev,se=D.next,q?o(D,G,W,q):e(D)){O.push(Z.i/F),O.push(D.i/F),O.push(se.i/F),z(D),D=se.next,X=se.next;continue}if(D=se,D===X){J?J===1?(D=a(b(D),O,F),w(D,O,F,G,W,q,2)):J===2&&r(D,O,F,G,W,q):w(b(D),O,F,G,W,q,1);break}}}}function e(D){var O=D.prev,F=D,G=D.next;if(m(O,F,G)>=0)return!1;for(var W=D.next.next;W!==D.prev;){if(p(O.x,O.y,F.x,F.y,G.x,G.y,W.x,W.y)&&m(W.prev,W,W.next)>=0)return!1;W=W.next}return!0}function o(D,O,F,G){var W=D.prev,q=D,J=D.next;if(m(W,q,J)>=0)return!1;for(var X=W.x<q.x?W.x<J.x?W.x:J.x:q.x<J.x?q.x:J.x,Z=W.y<q.y?W.y<J.y?W.y:J.y:q.y<J.y?q.y:J.y,se=W.x>q.x?W.x>J.x?W.x:J.x:q.x>J.x?q.x:J.x,le=W.y>q.y?W.y>J.y?W.y:J.y:q.y>J.y?q.y:J.y,oe=h(X,Z,O,F,G),U=h(se,le,O,F,G),V=D.prevZ,re=D.nextZ;V&&V.z>=oe&&re&&re.z<=U;){if(V!==D.prev&&V!==D.next&&p(W.x,W.y,q.x,q.y,J.x,J.y,V.x,V.y)&&m(V.prev,V,V.next)>=0||(V=V.prevZ,re!==D.prev&&re!==D.next&&p(W.x,W.y,q.x,q.y,J.x,J.y,re.x,re.y)&&m(re.prev,re,re.next)>=0))return!1;re=re.nextZ}for(;V&&V.z>=oe;){if(V!==D.prev&&V!==D.next&&p(W.x,W.y,q.x,q.y,J.x,J.y,V.x,V.y)&&m(V.prev,V,V.next)>=0)return!1;V=V.prevZ}for(;re&&re.z<=U;){if(re!==D.prev&&re!==D.next&&p(W.x,W.y,q.x,q.y,J.x,J.y,re.x,re.y)&&m(re.prev,re,re.next)>=0)return!1;re=re.nextZ}return!0}function a(D,O,F){var G=D;do{var W=G.prev,q=G.next.next;!M(W,q)&&x(W,G,G.next,q)&&L(W,q)&&L(q,W)&&(O.push(W.i/F),O.push(G.i/F),O.push(q.i/F),z(G),z(G.next),G=D=q),G=G.next}while(G!==D);return b(G)}function r(D,O,F,G,W,q){var J=D;do{for(var X=J.next.next;X!==J.prev;){if(J.i!==X.i&&A(J,X)){var Z=k(J,X);J=b(J,J.next),Z=b(Z,Z.next),w(J,O,F,G,W,q),w(Z,O,F,G,W,q);return}X=X.next}J=J.next}while(J!==D)}function n(D,O,F,G){var W=[],q,J,X,Z,se;for(q=0,J=O.length;q<J;q++)X=O[q]*G,Z=q<J-1?O[q+1]*G:D.length,se=l(D,X,Z,G,!1),se===se.next&&(se.steiner=!0),W.push(y(se));for(W.sort(c),q=0;q<W.length;q++)s(W[q],F),F=b(F,F.next);return F}function c(D,O){return D.x-O.x}function s(D,O){if(O=i(D,O),O){var F=k(O,D);b(O,O.next),b(F,F.next)}}function i(D,O){var F=O,G=D.x,W=D.y,q=-1/0,J;do{if(W<=F.y&&W>=F.next.y&&F.next.y!==F.y){var X=F.x+(W-F.y)*(F.next.x-F.x)/(F.next.y-F.y);if(X<=G&&X>q){if(q=X,X===G){if(W===F.y)return F;if(W===F.next.y)return F.next}J=F.x<F.next.x?F:F.next}}F=F.next}while(F!==O);if(!J)return null;if(G===q)return J;var Z=J,se=J.x,le=J.y,oe=1/0,U;F=J;do G>=F.x&&F.x>=se&&G!==F.x&&p(W<le?G:q,W,se,le,W<le?q:G,W,F.x,F.y)&&(U=Math.abs(W-F.y)/(G-F.x),L(F,D)&&(U<oe||U===oe&&(F.x>J.x||F.x===J.x&&v(J,F)))&&(J=F,oe=U)),F=F.next;while(F!==Z);return J}function v(D,O){return m(D.prev,D,O.prev)<0&&m(O.next,D,D.next)<0}function u(D,O,F,G){var W=D;do W.z===null&&(W.z=h(W.x,W.y,O,F,G)),W.prevZ=W.prev,W.nextZ=W.next,W=W.next;while(W!==D);W.prevZ.nextZ=null,W.prevZ=null,g(W)}function g(D){var O,F,G,W,q,J,X,Z,se=1;do{for(F=D,D=null,q=null,J=0;F;){for(J++,G=F,X=0,O=0;O<se&&(X++,G=G.nextZ,!!G);O++);for(Z=se;X>0||Z>0&&G;)X!==0&&(Z===0||!G||F.z<=G.z)?(W=F,F=F.nextZ,X--):(W=G,G=G.nextZ,Z--),q?q.nextZ=W:D=W,W.prevZ=q,q=W;F=G}q.nextZ=null,se*=2}while(J>1);return D}function h(D,O,F,G,W){return D=32767*(D-F)*W,O=32767*(O-G)*W,D=(D|D<<8)&16711935,D=(D|D<<4)&252645135,D=(D|D<<2)&858993459,D=(D|D<<1)&1431655765,O=(O|O<<8)&16711935,O=(O|O<<4)&252645135,O=(O|O<<2)&858993459,O=(O|O<<1)&1431655765,D|O<<1}function y(D){var O=D,F=D;do(O.x<F.x||O.x===F.x&&O.y<F.y)&&(F=O),O=O.next;while(O!==D);return F}function p(D,O,F,G,W,q,J,X){return(W-J)*(O-X)-(D-J)*(q-X)>=0&&(D-J)*(G-X)-(F-J)*(O-X)>=0&&(F-J)*(q-X)-(W-J)*(G-X)>=0}function A(D,O){return D.next.i!==O.i&&D.prev.i!==O.i&&!f(D,O)&&(L(D,O)&&L(O,D)&&S(D,O)&&(m(D.prev,D,O.prev)||m(D,O.prev,O))||M(D,O)&&m(D.prev,D,D.next)>0&&m(O.prev,O,O.next)>0)}function m(D,O,F){return(O.y-D.y)*(F.x-O.x)-(O.x-D.x)*(F.y-O.y)}function M(D,O){return D.x===O.x&&D.y===O.y}function x(D,O,F,G){var W=_(m(D,O,F)),q=_(m(D,O,G)),J=_(m(F,G,D)),X=_(m(F,G,O));return!!(W!==q&&J!==X||W===0&&T(D,F,O)||q===0&&T(D,G,O)||J===0&&T(F,D,G)||X===0&&T(F,O,G))}function T(D,O,F){return O.x<=Math.max(D.x,F.x)&&O.x>=Math.min(D.x,F.x)&&O.y<=Math.max(D.y,F.y)&&O.y>=Math.min(D.y,F.y)}function _(D){return D>0?1:D<0?-1:0}function f(D,O){var F=D;do{if(F.i!==D.i&&F.next.i!==D.i&&F.i!==O.i&&F.next.i!==O.i&&x(F,F.next,D,O))return!0;F=F.next}while(F!==D);return!1}function L(D,O){return m(D.prev,D,D.next)<0?m(D,O,D.next)>=0&&m(D,D.prev,O)>=0:m(D,O,D.prev)<0||m(D,D.next,O)<0}function S(D,O){var F=D,G=!1,W=(D.x+O.x)/2,q=(D.y+O.y)/2;do F.y>q!=F.next.y>q&&F.next.y!==F.y&&W<(F.next.x-F.x)*(q-F.y)/(F.next.y-F.y)+F.x&&(G=!G),F=F.next;while(F!==D);return G}function k(D,O){var F=new I(D.i,D.x,D.y),G=new I(O.i,O.x,O.y),W=D.next,q=O.prev;return D.next=O,O.prev=D,F.next=W,W.prev=F,G.next=F,F.prev=G,q.next=G,G.prev=q,G}function P(D,O,F,G){var W=new I(D,O,F);return G?(W.next=G.next,W.prev=G,G.next.prev=W,G.next=W):(W.prev=W,W.next=W),W}function z(D){D.next.prev=D.prev,D.prev.next=D.next,D.prevZ&&(D.prevZ.nextZ=D.nextZ),D.nextZ&&(D.nextZ.prevZ=D.prevZ)}function I(D,O,F){this.i=D,this.x=O,this.y=F,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}d.deviation=function(D,O,F,G){var W=O&&O.length,q=W?O[0]*F:D.length,J=Math.abs(R(D,0,q,F));if(W)for(var X=0,Z=O.length;X<Z;X++){var se=O[X]*F,le=X<Z-1?O[X+1]*F:D.length;J-=Math.abs(R(D,se,le,F))}var oe=0;for(X=0;X<G.length;X+=3){var U=G[X]*F,V=G[X+1]*F,re=G[X+2]*F;oe+=Math.abs((D[U]-D[re])*(D[V+1]-D[U+1])-(D[U]-D[V])*(D[re+1]-D[U+1]))}return J===0&&oe===0?0:Math.abs((oe-J)/J)};function R(D,O,F,G){for(var W=0,q=O,J=F-G;q<F;q+=G)W+=(D[J]-D[q])*(D[q+1]+D[J+1]),J=q;return W}d.flatten=function(D){for(var O=D[0][0].length,F={vertices:[],holes:[],dimensions:O},G=0,W=0;W<D.length;W++){for(var q=0;q<D[W].length;q++)for(var J=0;J<O;J++)F.vertices.push(D[W][q][J]);W>0&&(G+=D[W-1].length,F.holes.push(G))}return F}},{}],130:[function(t,B,H){var d=t("strongly-connected-components");B.exports=function(b,w){var e=[],o=[],a=[],r={},n=[],c;function s(M){a[M]=!1,r.hasOwnProperty(M)&&Object.keys(r[M]).forEach(function(x){delete r[M][x],a[x]&&s(x)})}function i(M){var x=!1;o.push(M),a[M]=!0;var T,_;for(T=0;T<n[M].length;T++)_=n[M][T],_===c?(v(c,o),x=!0):a[_]||(x=i(_));if(x)s(M);else for(T=0;T<n[M].length;T++){_=n[M][T];var f=r[_];f||(f={},r[_]=f),f[_]=!0}return o.pop(),x}function v(M,x){var T=[].concat(x).concat(M);w?w(i):e.push(T)}function u(M){for(var x=0;x<b.length;x++)x<M&&(b[x]=[]),b[x]=b[x].filter(function(T){return T>=M})}function g(M){u(M);for(var x=b,T=d(x),_=T.components.filter(function(I){return I.length>1}),f=1/0,L,S=0;S<_.length;S++)for(var k=0;k<_[S].length;k++)_[S][k]<f&&(f=_[S][k],L=S);var P=_[L];if(!P)return!1;var z=b.map(function(I,R){return P.indexOf(R)===-1?[]:I.filter(function(D){return P.indexOf(D)!==-1})});return{leastVertex:f,adjList:z}}c=0;for(var h=b.length;c<h;){var y=g(c);if(c=y.leastVertex,n=y.adjList,n){for(var p=0;p<n.length;p++)for(var A=0;A<n[p].length;A++){var m=n[p][A];a[+m]=!1,r[m]={}}i(c),c=c+1}else c=h}if(!w)return e}},{"strongly-connected-components":306}],131:[function(t,B,H){var d=t("../../object/valid-value");B.exports=function(){return d(this).length=0,this}},{"../../object/valid-value":162}],132:[function(t,B,H){B.exports=t("./is-implemented")()?Array.from:t("./shim")},{"./is-implemented":133,"./shim":134}],133:[function(t,B,H){B.exports=function(){var d=Array.from,l,b;return typeof d!="function"?!1:(l=["raz","dwa"],b=d(l),Boolean(b&&b!==l&&b[1]==="dwa"))}},{}],134:[function(t,B,H){var d=t("es6-symbol").iterator,l=t("../../function/is-arguments"),b=t("../../function/is-function"),w=t("../../number/to-pos-integer"),e=t("../../object/valid-callable"),o=t("../../object/valid-value"),a=t("../../object/is-value"),r=t("../../string/is-string"),n=Array.isArray,c=Function.prototype.call,s={configurable:!0,enumerable:!0,writable:!0,value:null},i=Object.defineProperty;B.exports=function(v){var u=arguments[1],g=arguments[2],h,y,p,A,m,M,x,T,_,f;if(v=Object(o(v)),a(u)&&e(u),!this||this===Array||!b(this)){if(!u){if(l(v))return m=v.length,m!==1?Array.apply(null,v):(A=new Array(1),A[0]=v[0],A);if(n(v)){for(A=new Array(m=v.length),y=0;y<m;++y)A[y]=v[y];return A}}A=[]}else h=this;if(!n(v)){if((_=v[d])!==void 0){for(x=e(_).call(v),h&&(A=new h),T=x.next(),y=0;!T.done;)f=u?c.call(u,g,T.value,y):T.value,h?(s.value=f,i(A,y,s)):A[y]=f,T=x.next(),++y;m=y}else if(r(v)){for(m=v.length,h&&(A=new h),y=0,p=0;y<m;++y)f=v[y],y+1<m&&(M=f.charCodeAt(0),M>=55296&&M<=56319&&(f+=v[++y])),f=u?c.call(u,g,f,p):f,h?(s.value=f,i(A,p,s)):A[p]=f,++p;m=p}}if(m===void 0)for(m=w(v.length),h&&(A=new h(m)),y=0;y<m;++y)f=u?c.call(u,g,v[y],y):v[y],h?(s.value=f,i(A,y,s)):A[y]=f;return h&&(s.value=null,A.length=m),A}},{"../../function/is-arguments":135,"../../function/is-function":136,"../../number/to-pos-integer":142,"../../object/is-value":151,"../../object/valid-callable":160,"../../object/valid-value":162,"../../string/is-string":166,"es6-symbol":175}],135:[function(t,B,H){var d=Object.prototype.toString,l=d.call(function(){return arguments}());B.exports=function(b){return d.call(b)===l}},{}],136:[function(t,B,H){var d=Object.prototype.toString,l=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);B.exports=function(b){return typeof b=="function"&&l(d.call(b))}},{}],137:[function(t,B,H){B.exports=function(){}},{}],138:[function(t,B,H){B.exports=t("./is-implemented")()?Math.sign:t("./shim")},{"./is-implemented":139,"./shim":140}],139:[function(t,B,H){B.exports=function(){var d=Math.sign;return typeof d!="function"?!1:d(10)===1&&d(-20)===-1}},{}],140:[function(t,B,H){B.exports=function(d){return d=Number(d),isNaN(d)||d===0?d:d>0?1:-1}},{}],141:[function(t,B,H){var d=t("../math/sign"),l=Math.abs,b=Math.floor;B.exports=function(w){return isNaN(w)?0:(w=Number(w),w===0||!isFinite(w)?w:d(w)*b(l(w)))}},{"../math/sign":138}],142:[function(t,B,H){var d=t("./to-integer"),l=Math.max;B.exports=function(b){return l(0,d(b))}},{"./to-integer":141}],143:[function(t,B,H){var d=t("./valid-callable"),l=t("./valid-value"),b=Function.prototype.bind,w=Function.prototype.call,e=Object.keys,o=Object.prototype.propertyIsEnumerable;B.exports=function(a,r){return function(n,c){var s,i=arguments[2],v=arguments[3];return n=Object(l(n)),d(c),s=e(n),v&&s.sort(typeof v=="function"?b.call(v,n):void 0),typeof a!="function"&&(a=s[a]),w.call(a,s,function(u,g){return o.call(n,u)?w.call(c,i,n[u],u,n,g):r})}}},{"./valid-callable":160,"./valid-value":162}],144:[function(t,B,H){B.exports=t("./is-implemented")()?Object.assign:t("./shim")},{"./is-implemented":145,"./shim":146}],145:[function(t,B,H){B.exports=function(){var d=Object.assign,l;return typeof d!="function"?!1:(l={foo:"raz"},d(l,{bar:"dwa"},{trzy:"trzy"}),l.foo+l.bar+l.trzy==="razdwatrzy")}},{}],146:[function(t,B,H){var d=t("../keys"),l=t("../valid-value"),b=Math.max;B.exports=function(w,e){var o,a,r=b(arguments.length,2),n;for(w=Object(l(w)),n=function(c){try{w[c]=e[c]}catch(s){o||(o=s)}},a=1;a<r;++a)e=arguments[a],d(e).forEach(n);if(o!==void 0)throw o;return w}},{"../keys":152,"../valid-value":162}],147:[function(t,B,H){var d=t("../array/from"),l=t("./assign"),b=t("./valid-value");B.exports=function(w){var e=Object(b(w)),o=arguments[1],a=Object(arguments[2]);if(e!==w&&!o)return e;var r={};return o?d(o,function(n){(a.ensure||n in w)&&(r[n]=w[n])}):l(r,w),r}},{"../array/from":132,"./assign":144,"./valid-value":162}],148:[function(t,B,H){var d=Object.create,l;t("./set-prototype-of/is-implemented")()||(l=t("./set-prototype-of/shim")),B.exports=function(){var b,w,e;return!l||l.level!==1?d:(b={},w={},e={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(o){if(o==="__proto__"){w[o]={configurable:!0,enumerable:!1,writable:!0,value:void 0};return}w[o]=e}),Object.defineProperties(b,w),Object.defineProperty(l,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:b}),function(o,a){return d(o===null?b:o,a)})}()},{"./set-prototype-of/is-implemented":158,"./set-prototype-of/shim":159}],149:[function(t,B,H){B.exports=t("./_iterate")("forEach")},{"./_iterate":143}],150:[function(t,B,H){var d=t("./is-value"),l={function:!0,object:!0};B.exports=function(b){return d(b)&&l[typeof b]||!1}},{"./is-value":151}],151:[function(t,B,H){var d=t("../function/noop")();B.exports=function(l){return l!==d&&l!==null}},{"../function/noop":137}],152:[function(t,B,H){B.exports=t("./is-implemented")()?Object.keys:t("./shim")},{"./is-implemented":153,"./shim":154}],153:[function(t,B,H){B.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},{}],154:[function(t,B,H){var d=t("../is-value"),l=Object.keys;B.exports=function(b){return l(d(b)?Object(b):b)}},{"../is-value":151}],155:[function(t,B,H){var d=t("./valid-callable"),l=t("./for-each"),b=Function.prototype.call;B.exports=function(w,e){var o={},a=arguments[2];return d(e),l(w,function(r,n,c,s){o[n]=b.call(e,a,r,n,c,s)}),o}},{"./for-each":149,"./valid-callable":160}],156:[function(t,B,H){var d=t("./is-value"),l=Array.prototype.forEach,b=Object.create,w=function(e,o){var a;for(a in e)o[a]=e[a]};B.exports=function(e){var o=b(null);return l.call(arguments,function(a){!d(a)||w(Object(a),o)}),o}},{"./is-value":151}],157:[function(t,B,H){B.exports=t("./is-implemented")()?Object.setPrototypeOf:t("./shim")},{"./is-implemented":158,"./shim":159}],158:[function(t,B,H){var d=Object.create,l=Object.getPrototypeOf,b={};B.exports=function(){var w=Object.setPrototypeOf,e=arguments[0]||d;return typeof w!="function"?!1:l(w(e(null),b))===b}},{}],159:[function(t,B,H){var d=t("../is-object"),l=t("../valid-value"),b=Object.prototype.isPrototypeOf,w=Object.defineProperty,e={configurable:!0,enumerable:!1,writable:!0,value:void 0},o;o=function(a,r){if(l(a),r===null||d(r))return a;throw new TypeError("Prototype must be null or an object")},B.exports=function(a){var r,n;return a?(a.level===2?a.set?(n=a.set,r=function(c,s){return n.call(o(c,s),s),c}):r=function(c,s){return o(c,s).__proto__=s,c}:r=function c(s,i){var v;return o(s,i),v=b.call(c.nullPolyfill,s),v&&delete c.nullPolyfill.__proto__,i===null&&(i=c.nullPolyfill),s.__proto__=i,v&&w(c.nullPolyfill,"__proto__",e),s},Object.defineProperty(r,"level",{configurable:!1,enumerable:!1,writable:!1,value:a.level})):null}(function(){var a=Object.create(null),r={},n,c=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(c){try{n=c.set,n.call(a,r)}catch{}if(Object.getPrototypeOf(a)===r)return{set:n,level:2}}return a.__proto__=r,Object.getPrototypeOf(a)===r?{level:2}:(a={},a.__proto__=r,Object.getPrototypeOf(a)===r?{level:1}:!1)}()),t("../create")},{"../create":148,"../is-object":150,"../valid-value":162}],160:[function(t,B,H){B.exports=function(d){if(typeof d!="function")throw new TypeError(d+" is not a function");return d}},{}],161:[function(t,B,H){var d=t("./is-object");B.exports=function(l){if(!d(l))throw new TypeError(l+" is not an Object");return l}},{"./is-object":150}],162:[function(t,B,H){var d=t("./is-value");B.exports=function(l){if(!d(l))throw new TypeError("Cannot use null or undefined");return l}},{"./is-value":151}],163:[function(t,B,H){B.exports=t("./is-implemented")()?String.prototype.contains:t("./shim")},{"./is-implemented":164,"./shim":165}],164:[function(t,B,H){var d="razdwatrzy";B.exports=function(){return typeof d.contains!="function"?!1:d.contains("dwa")===!0&&d.contains("foo")===!1}},{}],165:[function(t,B,H){var d=String.prototype.indexOf;B.exports=function(l){return d.call(this,l,arguments[1])>-1}},{}],166:[function(t,B,H){var d=Object.prototype.toString,l=d.call("");B.exports=function(b){return typeof b=="string"||b&&typeof b=="object"&&(b instanceof String||d.call(b)===l)||!1}},{}],167:[function(t,B,H){var d=Object.create(null),l=Math.random;B.exports=function(){var b;do b=l().toString(36).slice(2);while(d[b]);return b}},{}],168:[function(t,B,H){var d=t("es5-ext/object/set-prototype-of"),l=t("es5-ext/string/#/contains"),b=t("d"),w=t("es6-symbol"),e=t("./"),o=Object.defineProperty,a;a=B.exports=function(r,n){if(!(this instanceof a))throw new TypeError("Constructor requires 'new'");e.call(this,r),n?l.call(n,"key+value")?n="key+value":l.call(n,"key")?n="key":n="value":n="value",o(this,"__kind__",b("",n))},d&&d(a,e),delete a.prototype.constructor,a.prototype=Object.create(e.prototype,{_resolve:b(function(r){return this.__kind__==="value"?this.__list__[r]:this.__kind__==="key+value"?[r,this.__list__[r]]:r})}),o(a.prototype,w.toStringTag,b("c","Array Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es5-ext/string/#/contains":163,"es6-symbol":175}],169:[function(t,B,H){var d=t("es5-ext/function/is-arguments"),l=t("es5-ext/object/valid-callable"),b=t("es5-ext/string/is-string"),w=t("./get"),e=Array.isArray,o=Function.prototype.call,a=Array.prototype.some;B.exports=function(r,n){var c,s=arguments[2],i,v,u,g,h,y,p;if(e(r)||d(r)?c="array":b(r)?c="string":r=w(r),l(n),v=function(){u=!0},c==="array"){a.call(r,function(A){return o.call(n,s,A,v),u});return}if(c==="string"){for(h=r.length,g=0;g<h&&(y=r[g],g+1<h&&(p=y.charCodeAt(0),p>=55296&&p<=56319&&(y+=r[++g])),o.call(n,s,y,v),!u);++g);return}for(i=r.next();!i.done;){if(o.call(n,s,i.value,v),u)return;i=r.next()}}},{"./get":170,"es5-ext/function/is-arguments":135,"es5-ext/object/valid-callable":160,"es5-ext/string/is-string":166}],170:[function(t,B,H){var d=t("es5-ext/function/is-arguments"),l=t("es5-ext/string/is-string"),b=t("./array"),w=t("./string"),e=t("./valid-iterable"),o=t("es6-symbol").iterator;B.exports=function(a){return typeof e(a)[o]=="function"?a[o]():d(a)?new b(a):l(a)?new w(a):new b(a)}},{"./array":168,"./string":173,"./valid-iterable":174,"es5-ext/function/is-arguments":135,"es5-ext/string/is-string":166,"es6-symbol":175}],171:[function(t,B,H){var d=t("es5-ext/array/#/clear"),l=t("es5-ext/object/assign"),b=t("es5-ext/object/valid-callable"),w=t("es5-ext/object/valid-value"),e=t("d"),o=t("d/auto-bind"),a=t("es6-symbol"),r=Object.defineProperty,n=Object.defineProperties,c;B.exports=c=function(s,i){if(!(this instanceof c))throw new TypeError("Constructor requires 'new'");n(this,{__list__:e("w",w(s)),__context__:e("w",i),__nextIndex__:e("w",0)}),i&&(b(i.on),i.on("_add",this._onAdd),i.on("_delete",this._onDelete),i.on("_clear",this._onClear))},delete c.prototype.constructor,n(c.prototype,l({_next:e(function(){var s;if(!!this.__list__){if(this.__redo__&&(s=this.__redo__.shift(),s!==void 0))return s;if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:e(function(){return this._createResult(this._next())}),_createResult:e(function(s){return s===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(s)}}),_resolve:e(function(s){return this.__list__[s]}),_unBind:e(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:e(function(){return"[object "+(this[a.toStringTag]||"Object")+"]"})},o({_onAdd:e(function(s){if(!(s>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__){r(this,"__redo__",e("c",[s]));return}this.__redo__.forEach(function(i,v){i>=s&&(this.__redo__[v]=++i)},this),this.__redo__.push(s)}}),_onDelete:e(function(s){var i;s>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(i=this.__redo__.indexOf(s),i!==-1&&this.__redo__.splice(i,1),this.__redo__.forEach(function(v,u){v>s&&(this.__redo__[u]=--v)},this)))}),_onClear:e(function(){this.__redo__&&d.call(this.__redo__),this.__nextIndex__=0})}))),r(c.prototype,a.iterator,e(function(){return this}))},{d:106,"d/auto-bind":105,"es5-ext/array/#/clear":131,"es5-ext/object/assign":144,"es5-ext/object/valid-callable":160,"es5-ext/object/valid-value":162,"es6-symbol":175}],172:[function(t,B,H){var d=t("es5-ext/function/is-arguments"),l=t("es5-ext/object/is-value"),b=t("es5-ext/string/is-string"),w=t("es6-symbol").iterator,e=Array.isArray;B.exports=function(o){return l(o)?e(o)||b(o)||d(o)?!0:typeof o[w]=="function":!1}},{"es5-ext/function/is-arguments":135,"es5-ext/object/is-value":151,"es5-ext/string/is-string":166,"es6-symbol":175}],173:[function(t,B,H){var d=t("es5-ext/object/set-prototype-of"),l=t("d"),b=t("es6-symbol"),w=t("./"),e=Object.defineProperty,o;o=B.exports=function(a){if(!(this instanceof o))throw new TypeError("Constructor requires 'new'");a=String(a),w.call(this,a),e(this,"__length__",l("",a.length))},d&&d(o,w),delete o.prototype.constructor,o.prototype=Object.create(w.prototype,{_next:l(function(){if(!!this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:l(function(a){var r=this.__list__[a],n;return this.__nextIndex__===this.__length__?r:(n=r.charCodeAt(0),n>=55296&&n<=56319?r+this.__list__[this.__nextIndex__++]:r)})}),e(o.prototype,b.toStringTag,l("c","String Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es6-symbol":175}],174:[function(t,B,H){var d=t("./is-iterable");B.exports=function(l){if(!d(l))throw new TypeError(l+" is not iterable");return l}},{"./is-iterable":172}],175:[function(t,B,H){B.exports=t("./is-implemented")()?t("ext/global-this").Symbol:t("./polyfill")},{"./is-implemented":176,"./polyfill":181,"ext/global-this":188}],176:[function(t,B,H){var d=t("ext/global-this"),l={object:!0,symbol:!0};B.exports=function(){var b=d.Symbol,w;if(typeof b!="function")return!1;w=b("test symbol");try{String(w)}catch{return!1}return!(!l[typeof b.iterator]||!l[typeof b.toPrimitive]||!l[typeof b.toStringTag])}},{"ext/global-this":188}],177:[function(t,B,H){B.exports=function(d){return d?typeof d=="symbol"?!0:!d.constructor||d.constructor.name!=="Symbol"?!1:d[d.constructor.toStringTag]==="Symbol":!1}},{}],178:[function(t,B,H){var d=t("d"),l=Object.create,b=Object.defineProperty,w=Object.prototype,e=l(null);B.exports=function(o){for(var a=0,r,n;e[o+(a||"")];)++a;return o+=a||"",e[o]=!0,r="@@"+o,b(w,r,d.gs(null,function(c){n||(n=!0,b(this,r,d(c)),n=!1)})),r}},{d:106}],179:[function(t,B,H){var d=t("d"),l=t("ext/global-this").Symbol;B.exports=function(b){return Object.defineProperties(b,{hasInstance:d("",l&&l.hasInstance||b("hasInstance")),isConcatSpreadable:d("",l&&l.isConcatSpreadable||b("isConcatSpreadable")),iterator:d("",l&&l.iterator||b("iterator")),match:d("",l&&l.match||b("match")),replace:d("",l&&l.replace||b("replace")),search:d("",l&&l.search||b("search")),species:d("",l&&l.species||b("species")),split:d("",l&&l.split||b("split")),toPrimitive:d("",l&&l.toPrimitive||b("toPrimitive")),toStringTag:d("",l&&l.toStringTag||b("toStringTag")),unscopables:d("",l&&l.unscopables||b("unscopables"))})}},{d:106,"ext/global-this":188}],180:[function(t,B,H){var d=t("d"),l=t("../../../validate-symbol"),b=Object.create(null);B.exports=function(w){return Object.defineProperties(w,{for:d(function(e){return b[e]?b[e]:b[e]=w(String(e))}),keyFor:d(function(e){var o;l(e);for(o in b)if(b[o]===e)return o})})}},{"../../../validate-symbol":182,d:106}],181:[function(t,B,H){var d=t("d"),l=t("./validate-symbol"),b=t("ext/global-this").Symbol,w=t("./lib/private/generate-name"),e=t("./lib/private/setup/standard-symbols"),o=t("./lib/private/setup/symbol-registry"),a=Object.create,r=Object.defineProperties,n=Object.defineProperty,c,s,i;if(typeof b=="function")try{String(b()),i=!0}catch{}else b=null;s=function(u){if(this instanceof s)throw new TypeError("Symbol is not a constructor");return c(u)},B.exports=c=function v(u){var g;if(this instanceof v)throw new TypeError("Symbol is not a constructor");return i?b(u):(g=a(s.prototype),u=u===void 0?"":String(u),r(g,{__description__:d("",u),__name__:d("",w(u))}))},e(c),o(c),r(s.prototype,{constructor:d(c),toString:d("",function(){return this.__name__})}),r(c.prototype,{toString:d(function(){return"Symbol ("+l(this).__description__+")"}),valueOf:d(function(){return l(this)})}),n(c.prototype,c.toPrimitive,d("",function(){var v=l(this);return typeof v=="symbol"?v:v.toString()})),n(c.prototype,c.toStringTag,d("c","Symbol")),n(s.prototype,c.toStringTag,d("c",c.prototype[c.toStringTag])),n(s.prototype,c.toPrimitive,d("c",c.prototype[c.toPrimitive]))},{"./lib/private/generate-name":178,"./lib/private/setup/standard-symbols":179,"./lib/private/setup/symbol-registry":180,"./validate-symbol":182,d:106,"ext/global-this":188}],182:[function(t,B,H){var d=t("./is-symbol");B.exports=function(l){if(!d(l))throw new TypeError(l+" is not a symbol");return l}},{"./is-symbol":177}],183:[function(t,B,H){B.exports=t("./is-implemented")()?WeakMap:t("./polyfill")},{"./is-implemented":184,"./polyfill":186}],184:[function(t,B,H){B.exports=function(){var d,l;if(typeof WeakMap!="function")return!1;try{d=new WeakMap([[l={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return!(String(d)!=="[object WeakMap]"||typeof d.set!="function"||d.set({},1)!==d||typeof d.delete!="function"||typeof d.has!="function"||d.get(l)!=="one")}},{}],185:[function(t,B,H){B.exports=function(){return typeof WeakMap!="function"?!1:Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"}()},{}],186:[function(t,B,H){var d=t("es5-ext/object/is-value"),l=t("es5-ext/object/set-prototype-of"),b=t("es5-ext/object/valid-object"),w=t("es5-ext/object/valid-value"),e=t("es5-ext/string/random-uniq"),o=t("d"),a=t("es6-iterator/get"),r=t("es6-iterator/for-of"),n=t("es6-symbol").toStringTag,c=t("./is-native-implemented"),s=Array.isArray,i=Object.defineProperty,v=Object.prototype.hasOwnProperty,u=Object.getPrototypeOf,g;B.exports=g=function(){var h=arguments[0],y;if(!(this instanceof g))throw new TypeError("Constructor requires 'new'");return y=c&&l&&WeakMap!==g?l(new WeakMap,u(this)):this,d(h)&&(s(h)||(h=a(h))),i(y,"__weakMapData__",o("c","$weakMap$"+e())),h&&r(h,function(p){w(p),y.set(p[0],p[1])}),y},c&&(l&&l(g,WeakMap),g.prototype=Object.create(WeakMap.prototype,{constructor:o(g)})),Object.defineProperties(g.prototype,{delete:o(function(h){return v.call(b(h),this.__weakMapData__)?(delete h[this.__weakMapData__],!0):!1}),get:o(function(h){if(!!v.call(b(h),this.__weakMapData__))return h[this.__weakMapData__]}),has:o(function(h){return v.call(b(h),this.__weakMapData__)}),set:o(function(h,y){return i(b(h),this.__weakMapData__,o("c",y)),this}),toString:o(function(){return"[object WeakMap]"})}),i(g.prototype,n,o("c","WeakMap"))},{"./is-native-implemented":185,d:106,"es5-ext/object/is-value":151,"es5-ext/object/set-prototype-of":157,"es5-ext/object/valid-object":161,"es5-ext/object/valid-value":162,"es5-ext/string/random-uniq":167,"es6-iterator/for-of":169,"es6-iterator/get":170,"es6-symbol":175}],187:[function(t,B,H){var d=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};B.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return d()}try{return __global__||d()}finally{delete Object.prototype.__global__}}()},{}],188:[function(t,B,H){B.exports=t("./is-implemented")()?globalThis:t("./implementation")},{"./implementation":187,"./is-implemented":189}],189:[function(t,B,H){B.exports=function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array}},{}],190:[function(t,B,H){var d=t("is-string-blank");B.exports=function(l){var b=typeof l;if(b==="string"){var w=l;if(l=+l,l===0&&d(w))return!1}else if(b!=="number")return!1;return l-l<1}},{"is-string-blank":237}],191:[function(t,B,H){var d=t("dtype");B.exports=l;function l(b,w,e){if(!b)throw new TypeError("must specify data as first parameter");if(e=+(e||0)|0,Array.isArray(b)&&b[0]&&typeof b[0][0]=="number"){var o=b[0].length,a=b.length*o,r,n,c,s;(!w||typeof w=="string")&&(w=new(d(w||"float32"))(a+e));var i=w.length-e;if(a!==i)throw new Error("source length "+a+" ("+o+"x"+b.length+") does not match destination length "+i);for(r=0,c=e;r<b.length;r++)for(n=0;n<o;n++)w[c++]=b[r][n]===null?NaN:b[r][n]}else if(!w||typeof w=="string"){var v=d(w||"float32");if(Array.isArray(b)||w==="array")for(w=new v(b.length+e),r=0,c=e,s=w.length;c<s;c++,r++)w[c]=b[r]===null?NaN:b[r];else e===0?w=new v(b):(w=new v(b.length+e),w.set(b,e))}else w.set(b,e);return w}},{dtype:127}],192:[function(t,B,H){var d=t("css-font/stringify"),l=[32,126];B.exports=b;function b(w){w=w||{};var e=w.shape?w.shape:w.canvas?[w.canvas.width,w.canvas.height]:[512,512],o=w.canvas||document.createElement("canvas"),a=w.font,r=typeof w.step=="number"?[w.step,w.step]:w.step||[32,32],n=w.chars||l;if(a&&typeof a!="string"&&(a=d(a)),!Array.isArray(n))n=String(n).split("");else if(n.length===2&&typeof n[0]=="number"&&typeof n[1]=="number"){for(var c=[],s=n[0],i=0;s<=n[1];s++)c[i++]=String.fromCharCode(s);n=c}e=e.slice(),o.width=e[0],o.height=e[1];var v=o.getContext("2d");v.fillStyle="#000",v.fillRect(0,0,o.width,o.height),v.font=a,v.textAlign="center",v.textBaseline="middle",v.fillStyle="#fff";for(var u=r[0]/2,g=r[1]/2,s=0;s<n.length;s++)v.fillText(n[s],u,g),(u+=r[0])>e[0]-r[0]/2&&(u=r[0]/2,g+=r[1]);return o}},{"css-font/stringify":102}],193:[function(t,B,H){B.exports=d,d.canvas=document.createElement("canvas"),d.cache={};function d(s,o){o||(o={}),(typeof s=="string"||Array.isArray(s))&&(o.family=s);var a=Array.isArray(o.family)?o.family.join(", "):o.family;if(!a)throw Error("`family` must be defined");var r=o.size||o.fontSize||o.em||48,n=o.weight||o.fontWeight||"",c=o.style||o.fontStyle||"",s=[c,n,r].join(" ")+"px "+a,i=o.origin||"top";if(d.cache[a]&&r<=d.cache[a].em)return l(d.cache[a],i);var v=o.canvas||d.canvas,u=v.getContext("2d"),g={upper:o.upper!==void 0?o.upper:"H",lower:o.lower!==void 0?o.lower:"x",descent:o.descent!==void 0?o.descent:"p",ascent:o.ascent!==void 0?o.ascent:"h",tittle:o.tittle!==void 0?o.tittle:"i",overshoot:o.overshoot!==void 0?o.overshoot:"O"},h=Math.ceil(r*1.5);v.height=h,v.width=h*.5,u.font=s;var y="H",p={top:0};u.clearRect(0,0,h,h),u.textBaseline="top",u.fillStyle="black",u.fillText(y,0,0);var A=b(u.getImageData(0,0,h,h));u.clearRect(0,0,h,h),u.textBaseline="bottom",u.fillText(y,0,h);var m=b(u.getImageData(0,0,h,h));p.lineHeight=p.bottom=h-m+A,u.clearRect(0,0,h,h),u.textBaseline="alphabetic",u.fillText(y,0,h);var M=b(u.getImageData(0,0,h,h)),x=h-M-1+A;p.baseline=p.alphabetic=x,u.clearRect(0,0,h,h),u.textBaseline="middle",u.fillText(y,0,h*.5);var T=b(u.getImageData(0,0,h,h));p.median=p.middle=h-T-1+A-h*.5,u.clearRect(0,0,h,h),u.textBaseline="hanging",u.fillText(y,0,h*.5);var _=b(u.getImageData(0,0,h,h));p.hanging=h-_-1+A-h*.5,u.clearRect(0,0,h,h),u.textBaseline="ideographic",u.fillText(y,0,h);var f=b(u.getImageData(0,0,h,h));if(p.ideographic=h-f-1+A,g.upper&&(u.clearRect(0,0,h,h),u.textBaseline="top",u.fillText(g.upper,0,0),p.upper=b(u.getImageData(0,0,h,h)),p.capHeight=p.baseline-p.upper),g.lower&&(u.clearRect(0,0,h,h),u.textBaseline="top",u.fillText(g.lower,0,0),p.lower=b(u.getImageData(0,0,h,h)),p.xHeight=p.baseline-p.lower),g.tittle&&(u.clearRect(0,0,h,h),u.textBaseline="top",u.fillText(g.tittle,0,0),p.tittle=b(u.getImageData(0,0,h,h))),g.ascent&&(u.clearRect(0,0,h,h),u.textBaseline="top",u.fillText(g.ascent,0,0),p.ascent=b(u.getImageData(0,0,h,h))),g.descent&&(u.clearRect(0,0,h,h),u.textBaseline="top",u.fillText(g.descent,0,0),p.descent=w(u.getImageData(0,0,h,h))),g.overshoot){u.clearRect(0,0,h,h),u.textBaseline="top",u.fillText(g.overshoot,0,0);var L=w(u.getImageData(0,0,h,h));p.overshoot=L-x}for(var S in p)p[S]/=r;return p.em=r,d.cache[a]=p,l(p,i)}function l(e,o){var a={};typeof o=="string"&&(o=e[o]);for(var r in e)r!=="em"&&(a[r]=e[r]-o);return a}function b(e){for(var o=e.height,a=e.data,r=3;r<a.length;r+=4)if(a[r]!==0)return Math.floor((r-3)*.25/o)}function w(e){for(var o=e.height,a=e.data,r=a.length-1;r>0;r-=4)if(a[r]!==0)return Math.floor((r-3)*.25/o)}},{}],194:[function(t,B,H){B.exports=d;function d(l,b){if(typeof l!="string")throw new TypeError("must specify type string");if(b=b||{},typeof document=="undefined"&&!b.canvas)return null;var w=b.canvas||document.createElement("canvas");typeof b.width=="number"&&(w.width=b.width),typeof b.height=="number"&&(w.height=b.height);var e=b,o;try{var a=[l];l.indexOf("webgl")===0&&a.push("experimental-"+l);for(var r=0;r<a.length;r++)if(o=w.getContext(a[r],e),o)return o}catch{o=null}return o||null}},{}],195:[function(t,B,H){B.exports=d;function d(l,b){var w=b[0],e=b[1],o=b[2],a=b[3],r=b[4],n=b[5],c=b[6],s=b[7],i=b[8],v=b[9],u=b[10],g=b[11],h=b[12],y=b[13],p=b[14],A=b[15];return l[0]=n*(u*A-g*p)-v*(c*A-s*p)+y*(c*g-s*u),l[1]=-(e*(u*A-g*p)-v*(o*A-a*p)+y*(o*g-a*u)),l[2]=e*(c*A-s*p)-n*(o*A-a*p)+y*(o*s-a*c),l[3]=-(e*(c*g-s*u)-n*(o*g-a*u)+v*(o*s-a*c)),l[4]=-(r*(u*A-g*p)-i*(c*A-s*p)+h*(c*g-s*u)),l[5]=w*(u*A-g*p)-i*(o*A-a*p)+h*(o*g-a*u),l[6]=-(w*(c*A-s*p)-r*(o*A-a*p)+h*(o*s-a*c)),l[7]=w*(c*g-s*u)-r*(o*g-a*u)+i*(o*s-a*c),l[8]=r*(v*A-g*y)-i*(n*A-s*y)+h*(n*g-s*v),l[9]=-(w*(v*A-g*y)-i*(e*A-a*y)+h*(e*g-a*v)),l[10]=w*(n*A-s*y)-r*(e*A-a*y)+h*(e*s-a*n),l[11]=-(w*(n*g-s*v)-r*(e*g-a*v)+i*(e*s-a*n)),l[12]=-(r*(v*p-u*y)-i*(n*p-c*y)+h*(n*u-c*v)),l[13]=w*(v*p-u*y)-i*(e*p-o*y)+h*(e*u-o*v),l[14]=-(w*(n*p-c*y)-r*(e*p-o*y)+h*(e*c-o*n)),l[15]=w*(n*u-c*v)-r*(e*u-o*v)+i*(e*c-o*n),l}},{}],196:[function(t,B,H){B.exports=d;function d(l){var b=new Float32Array(16);return b[0]=l[0],b[1]=l[1],b[2]=l[2],b[3]=l[3],b[4]=l[4],b[5]=l[5],b[6]=l[6],b[7]=l[7],b[8]=l[8],b[9]=l[9],b[10]=l[10],b[11]=l[11],b[12]=l[12],b[13]=l[13],b[14]=l[14],b[15]=l[15],b}},{}],197:[function(t,B,H){B.exports=d;function d(l,b){return l[0]=b[0],l[1]=b[1],l[2]=b[2],l[3]=b[3],l[4]=b[4],l[5]=b[5],l[6]=b[6],l[7]=b[7],l[8]=b[8],l[9]=b[9],l[10]=b[10],l[11]=b[11],l[12]=b[12],l[13]=b[13],l[14]=b[14],l[15]=b[15],l}},{}],198:[function(t,B,H){B.exports=d;function d(){var l=new Float32Array(16);return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}},{}],199:[function(t,B,H){B.exports=d;function d(l){var b=l[0],w=l[1],e=l[2],o=l[3],a=l[4],r=l[5],n=l[6],c=l[7],s=l[8],i=l[9],v=l[10],u=l[11],g=l[12],h=l[13],y=l[14],p=l[15],A=b*r-w*a,m=b*n-e*a,M=b*c-o*a,x=w*n-e*r,T=w*c-o*r,_=e*c-o*n,f=s*h-i*g,L=s*y-v*g,S=s*p-u*g,k=i*y-v*h,P=i*p-u*h,z=v*p-u*y;return A*z-m*P+M*k+x*S-T*L+_*f}},{}],200:[function(t,B,H){B.exports=d;function d(l,b){var w=b[0],e=b[1],o=b[2],a=b[3],r=w+w,n=e+e,c=o+o,s=w*r,i=e*r,v=e*n,u=o*r,g=o*n,h=o*c,y=a*r,p=a*n,A=a*c;return l[0]=1-v-h,l[1]=i+A,l[2]=u-p,l[3]=0,l[4]=i-A,l[5]=1-s-h,l[6]=g+y,l[7]=0,l[8]=u+p,l[9]=g-y,l[10]=1-s-v,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}},{}],201:[function(t,B,H){B.exports=d;function d(l,b,w){var e,o,a,r=w[0],n=w[1],c=w[2],s=Math.sqrt(r*r+n*n+c*c);return Math.abs(s)<1e-6?null:(s=1/s,r*=s,n*=s,c*=s,e=Math.sin(b),o=Math.cos(b),a=1-o,l[0]=r*r*a+o,l[1]=n*r*a+c*e,l[2]=c*r*a-n*e,l[3]=0,l[4]=r*n*a-c*e,l[5]=n*n*a+o,l[6]=c*n*a+r*e,l[7]=0,l[8]=r*c*a+n*e,l[9]=n*c*a-r*e,l[10]=c*c*a+o,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l)}},{}],202:[function(t,B,H){B.exports=d;function d(l,b,w){var e=b[0],o=b[1],a=b[2],r=b[3],n=e+e,c=o+o,s=a+a,i=e*n,v=e*c,u=e*s,g=o*c,h=o*s,y=a*s,p=r*n,A=r*c,m=r*s;return l[0]=1-(g+y),l[1]=v+m,l[2]=u-A,l[3]=0,l[4]=v-m,l[5]=1-(i+y),l[6]=h+p,l[7]=0,l[8]=u+A,l[9]=h-p,l[10]=1-(i+g),l[11]=0,l[12]=w[0],l[13]=w[1],l[14]=w[2],l[15]=1,l}},{}],203:[function(t,B,H){B.exports=d;function d(l,b){return l[0]=b[0],l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=b[1],l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=b[2],l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}},{}],204:[function(t,B,H){B.exports=d;function d(l,b){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=b[0],l[13]=b[1],l[14]=b[2],l[15]=1,l}},{}],205:[function(t,B,H){B.exports=d;function d(l,b){var w=Math.sin(b),e=Math.cos(b);return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=e,l[6]=w,l[7]=0,l[8]=0,l[9]=-w,l[10]=e,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}},{}],206:[function(t,B,H){B.exports=d;function d(l,b){var w=Math.sin(b),e=Math.cos(b);return l[0]=e,l[1]=0,l[2]=-w,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=w,l[9]=0,l[10]=e,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}},{}],207:[function(t,B,H){B.exports=d;function d(l,b){var w=Math.sin(b),e=Math.cos(b);return l[0]=e,l[1]=w,l[2]=0,l[3]=0,l[4]=-w,l[5]=e,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}},{}],208:[function(t,B,H){B.exports=d;function d(l,b,w,e,o,a,r){var n=1/(w-b),c=1/(o-e),s=1/(a-r);return l[0]=a*2*n,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=a*2*c,l[6]=0,l[7]=0,l[8]=(w+b)*n,l[9]=(o+e)*c,l[10]=(r+a)*s,l[11]=-1,l[12]=0,l[13]=0,l[14]=r*a*2*s,l[15]=0,l}},{}],209:[function(t,B,H){B.exports=d;function d(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}},{}],210:[function(t,B,H){B.exports={create:t("./create"),clone:t("./clone"),copy:t("./copy"),identity:t("./identity"),transpose:t("./transpose"),invert:t("./invert"),adjoint:t("./adjoint"),determinant:t("./determinant"),multiply:t("./multiply"),translate:t("./translate"),scale:t("./scale"),rotate:t("./rotate"),rotateX:t("./rotateX"),rotateY:t("./rotateY"),rotateZ:t("./rotateZ"),fromRotation:t("./fromRotation"),fromRotationTranslation:t("./fromRotationTranslation"),fromScaling:t("./fromScaling"),fromTranslation:t("./fromTranslation"),fromXRotation:t("./fromXRotation"),fromYRotation:t("./fromYRotation"),fromZRotation:t("./fromZRotation"),fromQuat:t("./fromQuat"),frustum:t("./frustum"),perspective:t("./perspective"),perspectiveFromFieldOfView:t("./perspectiveFromFieldOfView"),ortho:t("./ortho"),lookAt:t("./lookAt"),str:t("./str")}},{"./adjoint":195,"./clone":196,"./copy":197,"./create":198,"./determinant":199,"./fromQuat":200,"./fromRotation":201,"./fromRotationTranslation":202,"./fromScaling":203,"./fromTranslation":204,"./fromXRotation":205,"./fromYRotation":206,"./fromZRotation":207,"./frustum":208,"./identity":209,"./invert":211,"./lookAt":212,"./multiply":213,"./ortho":214,"./perspective":215,"./perspectiveFromFieldOfView":216,"./rotate":217,"./rotateX":218,"./rotateY":219,"./rotateZ":220,"./scale":221,"./str":222,"./translate":223,"./transpose":224}],211:[function(t,B,H){B.exports=d;function d(l,b){var w=b[0],e=b[1],o=b[2],a=b[3],r=b[4],n=b[5],c=b[6],s=b[7],i=b[8],v=b[9],u=b[10],g=b[11],h=b[12],y=b[13],p=b[14],A=b[15],m=w*n-e*r,M=w*c-o*r,x=w*s-a*r,T=e*c-o*n,_=e*s-a*n,f=o*s-a*c,L=i*y-v*h,S=i*p-u*h,k=i*A-g*h,P=v*p-u*y,z=v*A-g*y,I=u*A-g*p,R=m*I-M*z+x*P+T*k-_*S+f*L;return R?(R=1/R,l[0]=(n*I-c*z+s*P)*R,l[1]=(o*z-e*I-a*P)*R,l[2]=(y*f-p*_+A*T)*R,l[3]=(u*_-v*f-g*T)*R,l[4]=(c*k-r*I-s*S)*R,l[5]=(w*I-o*k+a*S)*R,l[6]=(p*x-h*f-A*M)*R,l[7]=(i*f-u*x+g*M)*R,l[8]=(r*z-n*k+s*L)*R,l[9]=(e*k-w*z-a*L)*R,l[10]=(h*_-y*x+A*m)*R,l[11]=(v*x-i*_-g*m)*R,l[12]=(n*S-r*P-c*L)*R,l[13]=(w*P-e*S+o*L)*R,l[14]=(y*M-h*T-p*m)*R,l[15]=(i*T-v*M+u*m)*R,l):null}},{}],212:[function(t,B,H){var d=t("./identity");B.exports=l;function l(b,w,e,o){var a,r,n,c,s,i,v,u,g,h,y=w[0],p=w[1],A=w[2],m=o[0],M=o[1],x=o[2],T=e[0],_=e[1],f=e[2];return Math.abs(y-T)<1e-6&&Math.abs(p-_)<1e-6&&Math.abs(A-f)<1e-6?d(b):(v=y-T,u=p-_,g=A-f,h=1/Math.sqrt(v*v+u*u+g*g),v*=h,u*=h,g*=h,a=M*g-x*u,r=x*v-m*g,n=m*u-M*v,h=Math.sqrt(a*a+r*r+n*n),h?(h=1/h,a*=h,r*=h,n*=h):(a=0,r=0,n=0),c=u*n-g*r,s=g*a-v*n,i=v*r-u*a,h=Math.sqrt(c*c+s*s+i*i),h?(h=1/h,c*=h,s*=h,i*=h):(c=0,s=0,i=0),b[0]=a,b[1]=c,b[2]=v,b[3]=0,b[4]=r,b[5]=s,b[6]=u,b[7]=0,b[8]=n,b[9]=i,b[10]=g,b[11]=0,b[12]=-(a*y+r*p+n*A),b[13]=-(c*y+s*p+i*A),b[14]=-(v*y+u*p+g*A),b[15]=1,b)}},{"./identity":209}],213:[function(t,B,H){B.exports=d;function d(l,b,w){var e=b[0],o=b[1],a=b[2],r=b[3],n=b[4],c=b[5],s=b[6],i=b[7],v=b[8],u=b[9],g=b[10],h=b[11],y=b[12],p=b[13],A=b[14],m=b[15],M=w[0],x=w[1],T=w[2],_=w[3];return l[0]=M*e+x*n+T*v+_*y,l[1]=M*o+x*c+T*u+_*p,l[2]=M*a+x*s+T*g+_*A,l[3]=M*r+x*i+T*h+_*m,M=w[4],x=w[5],T=w[6],_=w[7],l[4]=M*e+x*n+T*v+_*y,l[5]=M*o+x*c+T*u+_*p,l[6]=M*a+x*s+T*g+_*A,l[7]=M*r+x*i+T*h+_*m,M=w[8],x=w[9],T=w[10],_=w[11],l[8]=M*e+x*n+T*v+_*y,l[9]=M*o+x*c+T*u+_*p,l[10]=M*a+x*s+T*g+_*A,l[11]=M*r+x*i+T*h+_*m,M=w[12],x=w[13],T=w[14],_=w[15],l[12]=M*e+x*n+T*v+_*y,l[13]=M*o+x*c+T*u+_*p,l[14]=M*a+x*s+T*g+_*A,l[15]=M*r+x*i+T*h+_*m,l}},{}],214:[function(t,B,H){B.exports=d;function d(l,b,w,e,o,a,r){var n=1/(b-w),c=1/(e-o),s=1/(a-r);return l[0]=-2*n,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*c,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*s,l[11]=0,l[12]=(b+w)*n,l[13]=(o+e)*c,l[14]=(r+a)*s,l[15]=1,l}},{}],215:[function(t,B,H){B.exports=d;function d(l,b,w,e,o){var a=1/Math.tan(b/2),r=1/(e-o);return l[0]=a/w,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=a,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=(o+e)*r,l[11]=-1,l[12]=0,l[13]=0,l[14]=2*o*e*r,l[15]=0,l}},{}],216:[function(t,B,H){B.exports=d;function d(l,b,w,e){var o=Math.tan(b.upDegrees*Math.PI/180),a=Math.tan(b.downDegrees*Math.PI/180),r=Math.tan(b.leftDegrees*Math.PI/180),n=Math.tan(b.rightDegrees*Math.PI/180),c=2/(r+n),s=2/(o+a);return l[0]=c,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=s,l[6]=0,l[7]=0,l[8]=-((r-n)*c*.5),l[9]=(o-a)*s*.5,l[10]=e/(w-e),l[11]=-1,l[12]=0,l[13]=0,l[14]=e*w/(w-e),l[15]=0,l}},{}],217:[function(t,B,H){B.exports=d;function d(l,b,w,e){var o=e[0],a=e[1],r=e[2],n=Math.sqrt(o*o+a*a+r*r),c,s,i,v,u,g,h,y,p,A,m,M,x,T,_,f,L,S,k,P,z,I,R,D;return Math.abs(n)<1e-6?null:(n=1/n,o*=n,a*=n,r*=n,c=Math.sin(w),s=Math.cos(w),i=1-s,v=b[0],u=b[1],g=b[2],h=b[3],y=b[4],p=b[5],A=b[6],m=b[7],M=b[8],x=b[9],T=b[10],_=b[11],f=o*o*i+s,L=a*o*i+r*c,S=r*o*i-a*c,k=o*a*i-r*c,P=a*a*i+s,z=r*a*i+o*c,I=o*r*i+a*c,R=a*r*i-o*c,D=r*r*i+s,l[0]=v*f+y*L+M*S,l[1]=u*f+p*L+x*S,l[2]=g*f+A*L+T*S,l[3]=h*f+m*L+_*S,l[4]=v*k+y*P+M*z,l[5]=u*k+p*P+x*z,l[6]=g*k+A*P+T*z,l[7]=h*k+m*P+_*z,l[8]=v*I+y*R+M*D,l[9]=u*I+p*R+x*D,l[10]=g*I+A*R+T*D,l[11]=h*I+m*R+_*D,b!==l&&(l[12]=b[12],l[13]=b[13],l[14]=b[14],l[15]=b[15]),l)}},{}],218:[function(t,B,H){B.exports=d;function d(l,b,w){var e=Math.sin(w),o=Math.cos(w),a=b[4],r=b[5],n=b[6],c=b[7],s=b[8],i=b[9],v=b[10],u=b[11];return b!==l&&(l[0]=b[0],l[1]=b[1],l[2]=b[2],l[3]=b[3],l[12]=b[12],l[13]=b[13],l[14]=b[14],l[15]=b[15]),l[4]=a*o+s*e,l[5]=r*o+i*e,l[6]=n*o+v*e,l[7]=c*o+u*e,l[8]=s*o-a*e,l[9]=i*o-r*e,l[10]=v*o-n*e,l[11]=u*o-c*e,l}},{}],219:[function(t,B,H){B.exports=d;function d(l,b,w){var e=Math.sin(w),o=Math.cos(w),a=b[0],r=b[1],n=b[2],c=b[3],s=b[8],i=b[9],v=b[10],u=b[11];return b!==l&&(l[4]=b[4],l[5]=b[5],l[6]=b[6],l[7]=b[7],l[12]=b[12],l[13]=b[13],l[14]=b[14],l[15]=b[15]),l[0]=a*o-s*e,l[1]=r*o-i*e,l[2]=n*o-v*e,l[3]=c*o-u*e,l[8]=a*e+s*o,l[9]=r*e+i*o,l[10]=n*e+v*o,l[11]=c*e+u*o,l}},{}],220:[function(t,B,H){B.exports=d;function d(l,b,w){var e=Math.sin(w),o=Math.cos(w),a=b[0],r=b[1],n=b[2],c=b[3],s=b[4],i=b[5],v=b[6],u=b[7];return b!==l&&(l[8]=b[8],l[9]=b[9],l[10]=b[10],l[11]=b[11],l[12]=b[12],l[13]=b[13],l[14]=b[14],l[15]=b[15]),l[0]=a*o+s*e,l[1]=r*o+i*e,l[2]=n*o+v*e,l[3]=c*o+u*e,l[4]=s*o-a*e,l[5]=i*o-r*e,l[6]=v*o-n*e,l[7]=u*o-c*e,l}},{}],221:[function(t,B,H){B.exports=d;function d(l,b,w){var e=w[0],o=w[1],a=w[2];return l[0]=b[0]*e,l[1]=b[1]*e,l[2]=b[2]*e,l[3]=b[3]*e,l[4]=b[4]*o,l[5]=b[5]*o,l[6]=b[6]*o,l[7]=b[7]*o,l[8]=b[8]*a,l[9]=b[9]*a,l[10]=b[10]*a,l[11]=b[11]*a,l[12]=b[12],l[13]=b[13],l[14]=b[14],l[15]=b[15],l}},{}],222:[function(t,B,H){B.exports=d;function d(l){return"mat4("+l[0]+", "+l[1]+", "+l[2]+", "+l[3]+", "+l[4]+", "+l[5]+", "+l[6]+", "+l[7]+", "+l[8]+", "+l[9]+", "+l[10]+", "+l[11]+", "+l[12]+", "+l[13]+", "+l[14]+", "+l[15]+")"}},{}],223:[function(t,B,H){B.exports=d;function d(l,b,w){var e=w[0],o=w[1],a=w[2],r,n,c,s,i,v,u,g,h,y,p,A;return b===l?(l[12]=b[0]*e+b[4]*o+b[8]*a+b[12],l[13]=b[1]*e+b[5]*o+b[9]*a+b[13],l[14]=b[2]*e+b[6]*o+b[10]*a+b[14],l[15]=b[3]*e+b[7]*o+b[11]*a+b[15]):(r=b[0],n=b[1],c=b[2],s=b[3],i=b[4],v=b[5],u=b[6],g=b[7],h=b[8],y=b[9],p=b[10],A=b[11],l[0]=r,l[1]=n,l[2]=c,l[3]=s,l[4]=i,l[5]=v,l[6]=u,l[7]=g,l[8]=h,l[9]=y,l[10]=p,l[11]=A,l[12]=r*e+i*o+h*a+b[12],l[13]=n*e+v*o+y*a+b[13],l[14]=c*e+u*o+p*a+b[14],l[15]=s*e+g*o+A*a+b[15]),l}},{}],224:[function(t,B,H){B.exports=d;function d(l,b){if(l===b){var w=b[1],e=b[2],o=b[3],a=b[6],r=b[7],n=b[11];l[1]=b[4],l[2]=b[8],l[3]=b[12],l[4]=w,l[6]=b[9],l[7]=b[13],l[8]=e,l[9]=a,l[11]=b[14],l[12]=o,l[13]=r,l[14]=n}else l[0]=b[0],l[1]=b[4],l[2]=b[8],l[3]=b[12],l[4]=b[1],l[5]=b[5],l[6]=b[9],l[7]=b[13],l[8]=b[2],l[9]=b[6],l[10]=b[10],l[11]=b[14],l[12]=b[3],l[13]=b[7],l[14]=b[11],l[15]=b[15];return l}},{}],225:[function(t,B,H){var d=t("css-font"),l=t("pick-by-alias"),b=t("regl"),w=t("gl-util/context"),e=t("es6-weak-map"),o=t("color-normalize"),a=t("font-atlas"),r=t("typedarray-pool"),n=t("parse-rect"),c=t("is-plain-obj"),s=t("parse-unit"),i=t("to-px"),v=t("detect-kerning"),u=t("object-assign"),g=t("font-measure"),h=t("flatten-vertex-data"),y=t("bit-twiddle"),p=y.nextPow2,A=new e,m=!1;if(document.body){var M=document.body.appendChild(document.createElement("div"));M.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(M).fontStretch&&(m=!0),document.body.removeChild(M)}var x=function(f){T(f)?(f={regl:f},this.gl=f.regl._gl):this.gl=w(f),this.shader=A.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=f.regl||b({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),A.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(c(f)?f:{})};x.prototype.createShader=function(){var f=this.regl,L=f({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:f.prop("count"),offset:f.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:f.this("sizeBuffer")},width:{offset:0,stride:8,buffer:f.this("sizeBuffer")},char:f.this("charBuffer"),position:f.this("position")},uniforms:{atlasSize:function(k,P){return[P.atlas.width,P.atlas.height]},atlasDim:function(k,P){return[P.atlas.cols,P.atlas.rows]},atlas:function(k,P){return P.atlas.texture},charStep:function(k,P){return P.atlas.step},em:function(k,P){return P.atlas.em},color:f.prop("color"),opacity:f.prop("opacity"),viewport:f.this("viewportArray"),scale:f.this("scale"),align:f.prop("align"),baseline:f.prop("baseline"),translate:f.this("translate"),positionOffset:f.prop("positionOffset")},primitive:"points",viewport:f.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`}),S={};return{regl:f,draw:L,atlas:S}},x.prototype.update=function(f){var L=this;if(typeof f=="string")f={text:f};else if(!f)return;f=l(f,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0),f.opacity!=null&&(Array.isArray(f.opacity)?this.opacity=f.opacity.map(function(_e){return parseFloat(_e)}):this.opacity=parseFloat(f.opacity)),f.viewport!=null&&(this.viewport=n(f.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),f.kerning!=null&&(this.kerning=f.kerning),f.offset!=null&&(typeof f.offset=="number"&&(f.offset=[f.offset,0]),this.positionOffset=h(f.offset)),f.direction&&(this.direction=f.direction),f.range&&(this.range=f.range,this.scale=[1/(f.range[2]-f.range[0]),1/(f.range[3]-f.range[1])],this.translate=[-f.range[0],-f.range[1]]),f.scale&&(this.scale=f.scale),f.translate&&(this.translate=f.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),!this.font.length&&!f.font&&(f.font=x.baseFontSize+"px sans-serif");var S=!1,k=!1;if(f.font&&(Array.isArray(f.font)?f.font:[f.font]).forEach(function(_e,De){if(typeof _e=="string")try{_e=d.parse(_e)}catch{_e=d.parse(x.baseFontSize+"px "+_e)}else _e=d.parse(d.stringify(_e));var Ye=d.stringify({size:x.baseFontSize,family:_e.family,stretch:m?_e.stretch:void 0,variant:_e.variant,weight:_e.weight,style:_e.style}),qe=s(_e.size),Ue=Math.round(qe[0]*i(qe[1]));if(Ue!==L.fontSize[De]&&(k=!0,L.fontSize[De]=Ue),(!L.font[De]||Ye!=L.font[De].baseString)&&(S=!0,L.font[De]=x.fonts[Ye],!L.font[De])){var Ie=_e.family.join(", "),Ve=[_e.style];_e.style!=_e.variant&&Ve.push(_e.variant),_e.variant!=_e.weight&&Ve.push(_e.weight),m&&_e.weight!=_e.stretch&&Ve.push(_e.stretch),L.font[De]={baseString:Ye,family:Ie,weight:_e.weight,stretch:_e.stretch,style:_e.style,variant:_e.variant,width:{},kerning:{},metrics:g(Ie,{origin:"top",fontSize:x.baseFontSize,fontStyle:Ve.join(" ")})},x.fonts[Ye]=L.font[De]}}),(S||k)&&this.font.forEach(function(_e,De){var Ye=d.stringify({size:L.fontSize[De],family:_e.family,stretch:m?_e.stretch:void 0,variant:_e.variant,weight:_e.weight,style:_e.style});if(L.fontAtlas[De]=L.shader.atlas[Ye],!L.fontAtlas[De]){var qe=_e.metrics;L.shader.atlas[Ye]=L.fontAtlas[De]={fontString:Ye,step:Math.ceil(L.fontSize[De]*qe.bottom*.5)*2,em:L.fontSize[De],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:L.regl.texture()}}f.text==null&&(f.text=L.text)}),typeof f.text=="string"&&f.position&&f.position.length>2){for(var P=Array(f.position.length*.5),z=0;z<P.length;z++)P[z]=f.text;f.text=P}var I;if(f.text!=null||S){if(this.textOffsets=[0],Array.isArray(f.text)){this.count=f.text[0].length,this.counts=[this.count];for(var R=1;R<f.text.length;R++)this.textOffsets[R]=this.textOffsets[R-1]+f.text[R-1].length,this.count+=f.text[R].length,this.counts.push(f.text[R].length);this.text=f.text.join("")}else this.text=f.text,this.count=this.text.length,this.counts=[this.count];I=[],this.font.forEach(function(_e,De){x.atlasContext.font=_e.baseString;for(var Ye=L.fontAtlas[De],qe=0;qe<L.text.length;qe++){var Ue=L.text.charAt(qe);if(Ye.ids[Ue]==null&&(Ye.ids[Ue]=Ye.chars.length,Ye.chars.push(Ue),I.push(Ue)),_e.width[Ue]==null&&(_e.width[Ue]=x.atlasContext.measureText(Ue).width/x.baseFontSize,L.kerning)){var Ie=[];for(var Ve in _e.width)Ie.push(Ve+Ue,Ue+Ve);u(_e.kerning,v(_e.family,{pairs:Ie}))}}})}if(f.position)if(f.position.length>2){for(var D=!f.position[0].length,O=r.mallocFloat(this.count*2),F=0,G=0;F<this.counts.length;F++){var W=this.counts[F];if(D)for(var q=0;q<W;q++)O[G++]=f.position[F*2],O[G++]=f.position[F*2+1];else for(var J=0;J<W;J++)O[G++]=f.position[F][0],O[G++]=f.position[F][1]}this.position.call?this.position({type:"float",data:O}):this.position=this.regl.buffer({type:"float",data:O}),r.freeFloat(O)}else this.position.destroy&&this.position.destroy(),this.position={constant:f.position};if(f.text||S){var X=r.mallocUint8(this.count),Z=r.mallocFloat(this.count*2);this.textWidth=[];for(var se=0,le=0;se<this.counts.length;se++){for(var oe=this.counts[se],U=this.font[se]||this.font[0],V=this.fontAtlas[se]||this.fontAtlas[0],re=0;re<oe;re++){var ee=this.text.charAt(le),j=this.text.charAt(le-1);if(X[le]=V.ids[ee],Z[le*2]=U.width[ee],re){var Q=Z[le*2-2],ne=Z[le*2],ae=Z[le*2-1],ie=ae+Q*.5+ne*.5;if(this.kerning){var ue=U.kerning[j+ee];ue&&(ie+=ue*.001)}Z[le*2+1]=ie}else Z[le*2+1]=Z[le*2]*.5;le++}this.textWidth.push(Z.length?Z[le*2-2]*.5+Z[le*2-1]:0)}f.align||(f.align=this.align),this.charBuffer({data:X,type:"uint8",usage:"stream"}),this.sizeBuffer({data:Z,type:"float",usage:"stream"}),r.freeUint8(X),r.freeFloat(Z),I.length&&this.font.forEach(function(_e,De){var Ye=L.fontAtlas[De],qe=Ye.step,Ue=Math.floor(x.maxAtlasSize/qe),Ie=Math.min(Ue,Ye.chars.length),Ve=Math.ceil(Ye.chars.length/Ie),dt=p(Ie*qe),Dt=p(Ve*qe);Ye.width=dt,Ye.height=Dt,Ye.rows=Ve,Ye.cols=Ie,Ye.em&&Ye.texture({data:a({canvas:x.atlasCanvas,font:Ye.fontString,chars:Ye.chars,shape:[dt,Dt],step:[qe,qe]})})})}if(f.align&&(this.align=f.align,this.alignOffset=this.textWidth.map(function(_e,De){var Ye=Array.isArray(L.align)?L.align.length>1?L.align[De]:L.align[0]:L.align;if(typeof Ye=="number")return Ye;switch(Ye){case"right":case"end":return-_e;case"center":case"centre":case"middle":return-_e*.5}return 0})),this.baseline==null&&f.baseline==null&&(f.baseline=0),f.baseline!=null&&(this.baseline=f.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(_e,De){var Ye=(L.font[De]||L.font[0]).metrics,qe=0;return qe+=Ye.bottom*.5,typeof _e=="number"?qe+=_e-Ye.baseline:qe+=-Ye[_e],qe*=-1,qe})),f.color!=null)if(f.color||(f.color="transparent"),typeof f.color=="string"||!isNaN(f.color))this.color=o(f.color,"uint8");else{var xe;if(typeof f.color[0]=="number"&&f.color.length>this.counts.length){var he=f.color.length;xe=r.mallocUint8(he);for(var ge=(f.color.subarray||f.color.slice).bind(f.color),me=0;me<he;me+=4)xe.set(o(ge(me,me+4),"uint8"),me)}else{var ke=f.color.length;xe=r.mallocUint8(ke*4);for(var Ae=0;Ae<ke;Ae++)xe.set(o(f.color[Ae]||0,"uint8"),Ae*4)}this.color=xe}if(f.position||f.text||f.color||f.baseline||f.align||f.font||f.offset||f.opacity){var Ne=this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2;if(Ne){var He=Math.max(this.position.length*.5||0,this.color.length*.25||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,this.positionOffset.length*.5||0);this.batch=Array(He);for(var Ge=0;Ge<this.batch.length;Ge++)this.batch[Ge]={count:this.counts.length>1?this.counts[Ge]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[Ge]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(Ge*4,Ge*4+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[Ge]:this.opacity,baseline:this.baselineOffset[Ge]!=null?this.baselineOffset[Ge]:this.baselineOffset[0],align:this.align?this.alignOffset[Ge]!=null?this.alignOffset[Ge]:this.alignOffset[0]:0,atlas:this.fontAtlas[Ge]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(Ge*2,Ge*2+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]}},x.prototype.destroy=function(){},x.prototype.kerning=!0,x.prototype.position={constant:new Float32Array(2)},x.prototype.translate=null,x.prototype.scale=null,x.prototype.font=null,x.prototype.text="",x.prototype.positionOffset=[0,0],x.prototype.opacity=1,x.prototype.color=new Uint8Array([0,0,0,255]),x.prototype.alignOffset=[0,0],x.maxAtlasSize=1024,x.atlasCanvas=document.createElement("canvas"),x.atlasContext=x.atlasCanvas.getContext("2d",{alpha:!1}),x.baseFontSize=64,x.fonts={};function T(_){return typeof _=="function"&&_._gl&&_.prop&&_.texture&&_.buffer}B.exports=x},{"bit-twiddle":81,"color-normalize":89,"css-font":99,"detect-kerning":125,"es6-weak-map":183,"flatten-vertex-data":191,"font-atlas":192,"font-measure":193,"gl-util/context":226,"is-plain-obj":236,"object-assign":247,"parse-rect":249,"parse-unit":251,"pick-by-alias":253,regl:283,"to-px":314,"typedarray-pool":327}],226:[function(t,B,H){(function(d){(function(){var l=t("pick-by-alias");B.exports=function(n){if(n?typeof n=="string"&&(n={container:n}):n={},w(n)?n={container:n}:e(n)?n={container:n}:o(n)?n={gl:n}:n=l(n,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0),n.pixelRatio||(n.pixelRatio=d.pixelRatio||1),n.gl)return n.gl;if(n.canvas&&(n.container=n.canvas.parentNode),n.container){if(typeof n.container=="string"){var c=document.querySelector(n.container);if(!c)throw Error("Element "+n.container+" is not found");n.container=c}w(n.container)?(n.canvas=n.container,n.container=n.canvas.parentNode):n.canvas||(n.canvas=a(),n.container.appendChild(n.canvas),b(n))}else if(!n.canvas)if(typeof document!="undefined")n.container=document.body||document.documentElement,n.canvas=a(),n.container.appendChild(n.canvas),b(n);else throw Error("Not DOM environment. Use headless-gl.");return n.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(s){try{n.gl=n.canvas.getContext(s,n.attrs)}catch{}return n.gl}),n.gl};function b(r){if(r.container)if(r.container==document.body)document.body.style.width||(r.canvas.width=r.width||r.pixelRatio*d.innerWidth),document.body.style.height||(r.canvas.height=r.height||r.pixelRatio*d.innerHeight);else{var n=r.container.getBoundingClientRect();r.canvas.width=r.width||n.right-n.left,r.canvas.height=r.height||n.bottom-n.top}}function w(r){return typeof r.getContext=="function"&&"width"in r&&"height"in r}function e(r){return typeof r.nodeName=="string"&&typeof r.appendChild=="function"&&typeof r.getBoundingClientRect=="function"}function o(r){return typeof r.drawArrays=="function"||typeof r.drawElements=="function"}function a(){var r=document.createElement("canvas");return r.style.position="absolute",r.style.top=0,r.style.left=0,r}}).call(this)}).call(this,typeof Ao!="undefined"?Ao:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"pick-by-alias":253}],227:[function(t,B,H){B.exports=function(d){typeof d=="string"&&(d=[d]);for(var l=[].slice.call(arguments,1),b=[],w=0;w<d.length-1;w++)b.push(d[w],l[w]||"");return b.push(d[w]),b.join("")}},{}],228:[function(t,B,H){(function(d){(function(){var l=t("is-browser"),b;typeof d.matchMedia=="function"?b=!d.matchMedia("(hover: none)").matches:b=l,B.exports=b}).call(this)}).call(this,typeof Ao!="undefined"?Ao:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"is-browser":232}],229:[function(t,B,H){var d=t("is-browser");function l(){var b=!1;try{var w=Object.defineProperty({},"passive",{get:function(){b=!0}});window.addEventListener("test",null,w),window.removeEventListener("test",null,w)}catch{b=!1}return b}B.exports=d&&l()},{"is-browser":232}],230:[function(t,B,H){H.read=function(d,l,b,w,e){var o,a,r=e*8-w-1,n=(1<<r)-1,c=n>>1,s=-7,i=b?e-1:0,v=b?-1:1,u=d[l+i];for(i+=v,o=u&(1<<-s)-1,u>>=-s,s+=r;s>0;o=o*256+d[l+i],i+=v,s-=8);for(a=o&(1<<-s)-1,o>>=-s,s+=w;s>0;a=a*256+d[l+i],i+=v,s-=8);if(o===0)o=1-c;else{if(o===n)return a?NaN:(u?-1:1)*(1/0);a=a+Math.pow(2,w),o=o-c}return(u?-1:1)*a*Math.pow(2,o-w)},H.write=function(d,l,b,w,e,o){var a,r,n,c=o*8-e-1,s=(1<<c)-1,i=s>>1,v=e===23?Math.pow(2,-24)-Math.pow(2,-77):0,u=w?0:o-1,g=w?1:-1,h=l<0||l===0&&1/l<0?1:0;for(l=Math.abs(l),isNaN(l)||l===1/0?(r=isNaN(l)?1:0,a=s):(a=Math.floor(Math.log(l)/Math.LN2),l*(n=Math.pow(2,-a))<1&&(a--,n*=2),a+i>=1?l+=v/n:l+=v*Math.pow(2,1-i),l*n>=2&&(a++,n/=2),a+i>=s?(r=0,a=s):a+i>=1?(r=(l*n-1)*Math.pow(2,e),a=a+i):(r=l*Math.pow(2,i-1)*Math.pow(2,e),a=0));e>=8;d[b+u]=r&255,u+=g,r/=256,e-=8);for(a=a<<e|r,c+=e;c>0;d[b+u]=a&255,u+=g,a/=256,c-=8);d[b+u-g]|=h*128}},{}],231:[function(t,B,H){typeof Object.create=="function"?B.exports=function(l,b){b&&(l.super_=b,l.prototype=Object.create(b.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}))}:B.exports=function(l,b){if(b){l.super_=b;var w=function(){};w.prototype=b.prototype,l.prototype=new w,l.prototype.constructor=l}}},{}],232:[function(t,B,H){B.exports=!0},{}],233:[function(t,B,H){B.exports=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],234:[function(t,B,H){B.exports=b,B.exports.isMobile=b,B.exports.default=b;var d=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,l=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function b(w){w||(w={});var e=w.ua;if(!e&&typeof navigator!="undefined"&&(e=navigator.userAgent),e&&e.headers&&typeof e.headers["user-agent"]=="string"&&(e=e.headers["user-agent"]),typeof e!="string")return!1;var o=w.tablet?l.test(e):d.test(e);return!o&&w.tablet&&w.featureDetect&&navigator&&navigator.maxTouchPoints>1&&e.indexOf("Macintosh")!==-1&&e.indexOf("Safari")!==-1&&(o=!0),o}},{}],235:[function(t,B,H){B.exports=function(d){var l=typeof d;return d!==null&&(l==="object"||l==="function")}},{}],236:[function(t,B,H){var d=Object.prototype.toString;B.exports=function(l){var b;return d.call(l)==="[object Object]"&&(b=Object.getPrototypeOf(l),b===null||b===Object.getPrototypeOf({}))}},{}],237:[function(t,B,H){B.exports=function(d){for(var l=d.length,b,w=0;w<l;w++)if(b=d.charCodeAt(w),(b<9||b>13)&&b!==32&&b!==133&&b!==160&&b!==5760&&b!==6158&&(b<8192||b>8205)&&b!==8232&&b!==8233&&b!==8239&&b!==8287&&b!==8288&&b!==12288&&b!==65279)return!1;return!0}},{}],238:[function(t,B,H){B.exports=function(l){return typeof l!="string"?!1:(l=l.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(l)&&/[\dz]$/i.test(l)&&l.length>4))}},{}],239:[function(t,B,H){(function(d,l){typeof H=="object"&&typeof B!="undefined"?B.exports=l():(d=d||self,d.mapboxgl=l())})(this,function(){var d,l,b;function w(e,o){if(!d)d=o;else if(!l)l=o;else{var a="var sharedChunk = {}; ("+d+")(sharedChunk); ("+l+")(sharedChunk);",r={};d(r),b=o(r),b.workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"}))}}return w(["exports"],function(e){function o(E,C){return C={exports:{}},E(C,C.exports),C.exports}var a="1.10.1",r=n;function n(E,C,N,te){this.cx=3*E,this.bx=3*(N-E)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*C,this.by=3*(te-C)-this.cy,this.ay=1-this.cy-this.by,this.p1x=E,this.p1y=te,this.p2x=N,this.p2y=te}n.prototype.sampleCurveX=function(E){return((this.ax*E+this.bx)*E+this.cx)*E},n.prototype.sampleCurveY=function(E){return((this.ay*E+this.by)*E+this.cy)*E},n.prototype.sampleCurveDerivativeX=function(E){return(3*this.ax*E+2*this.bx)*E+this.cx},n.prototype.solveCurveX=function(E,C){typeof C=="undefined"&&(C=1e-6);var N,te,pe,be,Se;for(pe=E,Se=0;Se<8;Se++){if(be=this.sampleCurveX(pe)-E,Math.abs(be)<C)return pe;var Fe=this.sampleCurveDerivativeX(pe);if(Math.abs(Fe)<1e-6)break;pe=pe-be/Fe}if(N=0,te=1,pe=E,pe<N)return N;if(pe>te)return te;for(;N<te;){if(be=this.sampleCurveX(pe),Math.abs(be-E)<C)return pe;E>be?N=pe:te=pe,pe=(te-N)*.5+N}return pe},n.prototype.solve=function(E,C){return this.sampleCurveY(this.solveCurveX(E,C))};var c=s;function s(E,C){this.x=E,this.y=C}s.prototype={clone:function(){return new s(this.x,this.y)},add:function(E){return this.clone()._add(E)},sub:function(E){return this.clone()._sub(E)},multByPoint:function(E){return this.clone()._multByPoint(E)},divByPoint:function(E){return this.clone()._divByPoint(E)},mult:function(E){return this.clone()._mult(E)},div:function(E){return this.clone()._div(E)},rotate:function(E){return this.clone()._rotate(E)},rotateAround:function(E,C){return this.clone()._rotateAround(E,C)},matMult:function(E){return this.clone()._matMult(E)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(E){return this.x===E.x&&this.y===E.y},dist:function(E){return Math.sqrt(this.distSqr(E))},distSqr:function(E){var C=E.x-this.x,N=E.y-this.y;return C*C+N*N},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(E){return Math.atan2(this.y-E.y,this.x-E.x)},angleWith:function(E){return this.angleWithSep(E.x,E.y)},angleWithSep:function(E,C){return Math.atan2(this.x*C-this.y*E,this.x*E+this.y*C)},_matMult:function(E){var C=E[0]*this.x+E[1]*this.y,N=E[2]*this.x+E[3]*this.y;return this.x=C,this.y=N,this},_add:function(E){return this.x+=E.x,this.y+=E.y,this},_sub:function(E){return this.x-=E.x,this.y-=E.y,this},_mult:function(E){return this.x*=E,this.y*=E,this},_div:function(E){return this.x/=E,this.y/=E,this},_multByPoint:function(E){return this.x*=E.x,this.y*=E.y,this},_divByPoint:function(E){return this.x/=E.x,this.y/=E.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var E=this.y;return this.y=this.x,this.x=-E,this},_rotate:function(E){var C=Math.cos(E),N=Math.sin(E),te=C*this.x-N*this.y,pe=N*this.x+C*this.y;return this.x=te,this.y=pe,this},_rotateAround:function(E,C){var N=Math.cos(E),te=Math.sin(E),pe=C.x+N*(this.x-C.x)-te*(this.y-C.y),be=C.y+te*(this.x-C.x)+N*(this.y-C.y);return this.x=pe,this.y=be,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},s.convert=function(E){return E instanceof s?E:Array.isArray(E)?new s(E[0],E[1]):E};function i(E,C){if(Array.isArray(E)){if(!Array.isArray(C)||E.length!==C.length)return!1;for(var N=0;N<E.length;N++)if(!i(E[N],C[N]))return!1;return!0}if(typeof E=="object"&&E!==null&&C!==null){if(typeof C!="object")return!1;var te=Object.keys(E);if(te.length!==Object.keys(C).length)return!1;for(var pe in E)if(!i(E[pe],C[pe]))return!1;return!0}return E===C}function v(E){if(E<=0)return 0;if(E>=1)return 1;var C=E*E,N=C*E;return 4*(E<.5?N:3*(E-C)+N-.75)}function u(E,C,N,te){var pe=new r(E,C,N,te);return function(be){return pe.solve(be)}}var g=u(.25,.1,.25,1);function h(E,C,N){return Math.min(N,Math.max(C,E))}function y(E,C,N){var te=N-C,pe=((E-C)%te+te)%te+C;return pe===C?N:pe}function p(E,C,N){if(!E.length)return N(null,[]);var te=E.length,pe=new Array(E.length),be=null;E.forEach(function(Se,Fe){C(Se,function(tt,ct){tt&&(be=tt),pe[Fe]=ct,--te===0&&N(be,pe)})})}function A(E){var C=[];for(var N in E)C.push(E[N]);return C}function m(E,C){var N=[];for(var te in E)te in C||N.push(te);return N}function M(E){for(var C=[],N=arguments.length-1;N-- >0;)C[N]=arguments[N+1];for(var te=0,pe=C;te<pe.length;te+=1){var be=pe[te];for(var Se in be)E[Se]=be[Se]}return E}function x(E,C){for(var N={},te=0;te<C.length;te++){var pe=C[te];pe in E&&(N[pe]=E[pe])}return N}var T=1;function _(){return T++}function f(){function E(C){return C?(C^Math.random()*16>>C/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,E)}return E()}function L(E){return E?/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(E):!1}function S(E,C){E.forEach(function(N){!C[N]||(C[N]=C[N].bind(C))})}function k(E,C){return E.indexOf(C,E.length-C.length)!==-1}function P(E,C,N){var te={};for(var pe in E)te[pe]=C.call(N||this,E[pe],pe,E);return te}function z(E,C,N){var te={};for(var pe in E)C.call(N||this,E[pe],pe,E)&&(te[pe]=E[pe]);return te}function I(E){return Array.isArray(E)?E.map(I):typeof E=="object"&&E?P(E,I):E}function R(E,C){for(var N=0;N<E.length;N++)if(C.indexOf(E[N])>=0)return!0;return!1}var D={};function O(E){D[E]||(typeof console!="undefined"&&console.warn(E),D[E]=!0)}function F(E,C,N){return(N.y-E.y)*(C.x-E.x)>(C.y-E.y)*(N.x-E.x)}function G(E){for(var C=0,N=0,te=E.length,pe=te-1,be=void 0,Se=void 0;N<te;pe=N++)be=E[N],Se=E[pe],C+=(Se.x-be.x)*(be.y+Se.y);return C}function W(E){var C=E[0],N=E[1],te=E[2];return N+=90,N*=Math.PI/180,te*=Math.PI/180,{x:C*Math.cos(N)*Math.sin(te),y:C*Math.sin(N)*Math.sin(te),z:C*Math.cos(te)}}function q(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function J(E){var C=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,N={};if(E.replace(C,function(pe,be,Se,Fe){var tt=Se||Fe;return N[be]=tt?tt.toLowerCase():!0,""}),N["max-age"]){var te=parseInt(N["max-age"],10);isNaN(te)?delete N["max-age"]:N["max-age"]=te}return N}var X=null;function Z(E){if(X==null){var C=E.navigator?E.navigator.userAgent:null;X=!!E.safari||!!(C&&(/\b(iPad|iPhone|iPod)\b/.test(C)||!!C.match("Safari")&&!C.match("Chrome")))}return X}function se(E){try{var C=self[E];return C.setItem("_mapbox_test_",1),C.removeItem("_mapbox_test_"),!0}catch{return!1}}function le(E){return self.btoa(encodeURIComponent(E).replace(/%([0-9A-F]{2})/g,function(C,N){return String.fromCharCode(Number("0x"+N))}))}function oe(E){return decodeURIComponent(self.atob(E).split("").map(function(C){return"%"+("00"+C.charCodeAt(0).toString(16)).slice(-2)}).join(""))}var U=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),V=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,re=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,ee,j,Q={now:U,frame:function(C){var N=V(C);return{cancel:function(){return re(N)}}},getImageData:function(C,N){N===void 0&&(N=0);var te=self.document.createElement("canvas"),pe=te.getContext("2d");if(!pe)throw new Error("failed to create canvas 2d context");return te.width=C.width,te.height=C.height,pe.drawImage(C,0,0,C.width,C.height),pe.getImageData(-N,-N,C.width+2*N,C.height+2*N)},resolveURL:function(C){return ee||(ee=self.document.createElement("a")),ee.href=C,ee.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return self.matchMedia?(j==null&&(j=self.matchMedia("(prefers-reduced-motion: reduce)")),j.matches):!1}},ne={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ae={supported:!1,testSupport:ge},ie,ue=!1,xe,he=!1;self.document&&(xe=self.document.createElement("img"),xe.onload=function(){ie&&me(ie),ie=null,he=!0},xe.onerror=function(){ue=!0,ie=null},xe.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");function ge(E){ue||!xe||(he?me(E):ie=E)}function me(E){var C=E.createTexture();E.bindTexture(E.TEXTURE_2D,C);try{if(E.texImage2D(E.TEXTURE_2D,0,E.RGBA,E.RGBA,E.UNSIGNED_BYTE,xe),E.isContextLost())return;ae.supported=!0}catch{}E.deleteTexture(C),ue=!0}var ke="01";function Ae(){for(var E="1",C="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",N="",te=0;te<10;te++)N+=C[Math.floor(Math.random()*62)];var pe=12*60*60*1e3,be=[E,ke,N].join(""),Se=Date.now()+pe;return{token:be,tokenExpiresAt:Se}}var Ne=function(C,N){this._transformRequestFn=C,this._customAccessToken=N,this._createSkuToken()};Ne.prototype._createSkuToken=function(){var C=Ae();this._skuToken=C.token,this._skuTokenExpiresAt=C.tokenExpiresAt},Ne.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Ne.prototype.transformRequest=function(C,N){return this._transformRequestFn?this._transformRequestFn(C,N)||{url:C}:{url:C}},Ne.prototype.normalizeStyleURL=function(C,N){if(!He(C))return C;var te=Ue(C);return te.path="/styles/v1"+te.path,this._makeAPIURL(te,this._customAccessToken||N)},Ne.prototype.normalizeGlyphsURL=function(C,N){if(!He(C))return C;var te=Ue(C);return te.path="/fonts/v1"+te.path,this._makeAPIURL(te,this._customAccessToken||N)},Ne.prototype.normalizeSourceURL=function(C,N){if(!He(C))return C;var te=Ue(C);return te.path="/v4/"+te.authority+".json",te.params.push("secure"),this._makeAPIURL(te,this._customAccessToken||N)},Ne.prototype.normalizeSpriteURL=function(C,N,te,pe){var be=Ue(C);return He(C)?(be.path="/styles/v1"+be.path+"/sprite"+N+te,this._makeAPIURL(be,this._customAccessToken||pe)):(be.path+=""+N+te,Ie(be))},Ne.prototype.normalizeTileURL=function(C,N){if(this._isSkuTokenExpired()&&this._createSkuToken(),C&&!He(C))return C;var te=Ue(C),pe=/(\.(png|jpg)\d*)(?=$)/,be=/^.+\/v4\//,Se=Q.devicePixelRatio>=2||N===512?"@2x":"",Fe=ae.supported?".webp":"$1";te.path=te.path.replace(pe,""+Se+Fe),te.path=te.path.replace(be,"/"),te.path="/v4"+te.path;var tt=this._customAccessToken||Ye(te.params)||ne.ACCESS_TOKEN;return ne.REQUIRE_ACCESS_TOKEN&&tt&&this._skuToken&&te.params.push("sku="+this._skuToken),this._makeAPIURL(te,tt)},Ne.prototype.canonicalizeTileURL=function(C,N){var te="/v4/",pe=/\.[\w]+$/,be=Ue(C);if(!be.path.match(/(^\/v4\/)/)||!be.path.match(pe))return C;var Se="mapbox://tiles/";Se+=be.path.replace(te,"");var Fe=be.params;return N&&(Fe=Fe.filter(function(tt){return!tt.match(/^access_token=/)})),Fe.length&&(Se+="?"+Fe.join("&")),Se},Ne.prototype.canonicalizeTileset=function(C,N){for(var te=N?He(N):!1,pe=[],be=0,Se=C.tiles||[];be<Se.length;be+=1){var Fe=Se[be];_e(Fe)?pe.push(this.canonicalizeTileURL(Fe,te)):pe.push(Fe)}return pe},Ne.prototype._makeAPIURL=function(C,N){var te="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",pe=Ue(ne.API_URL);if(C.protocol=pe.protocol,C.authority=pe.authority,pe.path!=="/"&&(C.path=""+pe.path+C.path),!ne.REQUIRE_ACCESS_TOKEN)return Ie(C);if(N=N||ne.ACCESS_TOKEN,!N)throw new Error("An API access token is required to use Mapbox GL. "+te);if(N[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+te);return C.params=C.params.filter(function(be){return be.indexOf("access_token")===-1}),C.params.push("access_token="+N),Ie(C)};function He(E){return E.indexOf("mapbox:")===0}var Ge=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function _e(E){return Ge.test(E)}function De(E){return E.indexOf("sku=")>0&&_e(E)}function Ye(E){for(var C=0,N=E;C<N.length;C+=1){var te=N[C],pe=te.match(/^access_token=(.*)$/);if(pe)return pe[1]}return null}var qe=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Ue(E){var C=E.match(qe);if(!C)throw new Error("Unable to parse URL object");return{protocol:C[1],authority:C[2],path:C[3]||"/",params:C[4]?C[4].split("&"):[]}}function Ie(E){var C=E.params.length?"?"+E.params.join("&"):"";return E.protocol+"://"+E.authority+E.path+C}var Ve="mapbox.eventData";function dt(E){if(!E)return null;var C=E.split(".");if(!C||C.length!==3)return null;try{var N=JSON.parse(oe(C[1]));return N}catch{return null}}var Dt=function(C){this.type=C,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Dt.prototype.getStorageKey=function(C){var N=dt(ne.ACCESS_TOKEN),te="";return N&&N.u?te=le(N.u):te=ne.ACCESS_TOKEN||"",C?Ve+"."+C+":"+te:Ve+":"+te},Dt.prototype.fetchEventData=function(){var C=se("localStorage"),N=this.getStorageKey(),te=this.getStorageKey("uuid");if(C)try{var pe=self.localStorage.getItem(N);pe&&(this.eventData=JSON.parse(pe));var be=self.localStorage.getItem(te);be&&(this.anonId=be)}catch{O("Unable to read from LocalStorage")}},Dt.prototype.saveEventData=function(){var C=se("localStorage"),N=this.getStorageKey(),te=this.getStorageKey("uuid");if(C)try{self.localStorage.setItem(te,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(N,JSON.stringify(this.eventData))}catch{O("Unable to write to LocalStorage")}},Dt.prototype.processRequests=function(C){},Dt.prototype.postEvent=function(C,N,te,pe){var be=this;if(!!ne.EVENTS_URL){var Se=Ue(ne.EVENTS_URL);Se.params.push("access_token="+(pe||ne.ACCESS_TOKEN||""));var Fe={event:this.type,created:new Date(C).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:a,skuId:ke,userId:this.anonId},tt=N?M(Fe,N):Fe,ct={url:Ie(Se),headers:{"Content-Type":"text/plain"},body:JSON.stringify([tt])};this.pendingRequest=Xe(ct,function(gt){be.pendingRequest=null,te(gt),be.saveEventData(),be.processRequests(pe)})}},Dt.prototype.queueRequest=function(C,N){this.queue.push(C),this.processRequests(N)};var Yt=function(E){function C(){E.call(this,"map.load"),this.success={},this.skuToken=""}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.postMapLoadEvent=function(te,pe,be,Se){this.skuToken=be,(ne.EVENTS_URL&&Se||ne.ACCESS_TOKEN&&Array.isArray(te)&&te.some(function(Fe){return He(Fe)||_e(Fe)}))&&this.queueRequest({id:pe,timestamp:Date.now()},Se)},C.prototype.processRequests=function(te){var pe=this;if(!(this.pendingRequest||this.queue.length===0)){var be=this.queue.shift(),Se=be.id,Fe=be.timestamp;Se&&this.success[Se]||(this.anonId||this.fetchEventData(),L(this.anonId)||(this.anonId=f()),this.postEvent(Fe,{skuToken:this.skuToken},function(tt){tt||Se&&(pe.success[Se]=!0)},te))}},C}(Dt),kt=function(E){function C(N){E.call(this,"appUserTurnstile"),this._customAccessToken=N}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.postTurnstileEvent=function(te,pe){ne.EVENTS_URL&&ne.ACCESS_TOKEN&&Array.isArray(te)&&te.some(function(be){return He(be)||_e(be)})&&this.queueRequest(Date.now(),pe)},C.prototype.processRequests=function(te){var pe=this;if(!(this.pendingRequest||this.queue.length===0)){(!this.anonId||!this.eventData.lastSuccess||!this.eventData.tokenU)&&this.fetchEventData();var be=dt(ne.ACCESS_TOKEN),Se=be?be.u:ne.ACCESS_TOKEN,Fe=Se!==this.eventData.tokenU;L(this.anonId)||(this.anonId=f(),Fe=!0);var tt=this.queue.shift();if(this.eventData.lastSuccess){var ct=new Date(this.eventData.lastSuccess),gt=new Date(tt),Rt=(tt-this.eventData.lastSuccess)/(24*60*60*1e3);Fe=Fe||Rt>=1||Rt<-1||ct.getDate()!==gt.getDate()}else Fe=!0;if(!Fe)return this.processRequests();this.postEvent(tt,{"enabled.telemetry":!1},function(jt){jt||(pe.eventData.lastSuccess=tt,pe.eventData.tokenU=Se)},te)}},C}(Dt),Ft=new kt,Nt=Ft.postTurnstileEvent.bind(Ft),Lt=new Yt,St=Lt.postMapLoadEvent.bind(Lt),it="mapbox-tiles",ht=500,Qe=50,Ce=1e3*60*7,je;function rt(){self.caches&&!je&&(je=self.caches.open(it))}var ut;function Pt(E,C){if(ut===void 0)try{new Response(new ReadableStream),ut=!0}catch{ut=!1}ut?C(E.body):E.blob().then(C)}function Tt(E,C,N){if(rt(),!!je){var te={status:C.status,statusText:C.statusText,headers:new self.Headers};C.headers.forEach(function(Se,Fe){return te.headers.set(Fe,Se)});var pe=J(C.headers.get("Cache-Control")||"");if(!pe["no-store"]){pe["max-age"]&&te.headers.set("Expires",new Date(N+pe["max-age"]*1e3).toUTCString());var be=new Date(te.headers.get("Expires")).getTime()-N;be<Ce||Pt(C,function(Se){var Fe=new self.Response(Se,te);rt(),je&&je.then(function(tt){return tt.put(Ot(E.url),Fe)}).catch(function(tt){return O(tt.message)})})}}}function Ot(E){var C=E.indexOf("?");return C<0?E:E.slice(0,C)}function Kt(E,C){if(rt(),!je)return C(null);var N=Ot(E.url);je.then(function(te){te.match(N).then(function(pe){var be=Bt(pe);te.delete(N),be&&te.put(N,pe.clone()),C(null,pe,be)}).catch(C)}).catch(C)}function Bt(E){if(!E)return!1;var C=new Date(E.headers.get("Expires")||0),N=J(E.headers.get("Cache-Control")||"");return C>Date.now()&&!N["no-cache"]}var Zt=1/0;function Je(E){Zt++,Zt>Qe&&(E.getActor().send("enforceCacheSizeLimit",ht),Zt=0)}function pt(E){rt(),je&&je.then(function(C){C.keys().then(function(N){for(var te=0;te<N.length-E;te++)C.delete(N[te])})})}function Et(E){var C=self.caches.delete(it);E&&C.catch(E).then(function(){return E()})}function ar(E,C){ht=E,Qe=C}var vr;function ir(){return vr==null&&(vr=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),vr}var dr={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(dr);var Pr=function(E){function C(N,te,pe){te===401&&_e(pe)&&(N+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),E.call(this,N),this.status=te,this.url=pe,this.name=this.constructor.name,this.message=N}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},C}(Error),Sr=q()?function(){return self.worker&&self.worker.referrer}:function(){return(self.location.protocol==="blob:"?self.parent:self).location.href},tr=function(E){return/^file:/.test(E)||/^file:/.test(Sr())&&!/^\w+:/.test(E)};function Nr(E,C){var N=new self.AbortController,te=new self.Request(E.url,{method:E.method||"GET",body:E.body,credentials:E.credentials,headers:E.headers,referrer:Sr(),signal:N.signal}),pe=!1,be=!1,Se=De(te.url);E.type==="json"&&te.headers.set("Accept","application/json");var Fe=function(ct,gt,Rt){if(!be){if(ct&&ct.message!=="SecurityError"&&O(ct),gt&&Rt)return tt(gt);var jt=Date.now();self.fetch(te).then(function(Gt){if(Gt.ok){var lr=Se?Gt.clone():null;return tt(Gt,lr,jt)}else return C(new Pr(Gt.statusText,Gt.status,E.url))}).catch(function(Gt){Gt.code!==20&&C(new Error(Gt.message))})}},tt=function(ct,gt,Rt){(E.type==="arrayBuffer"?ct.arrayBuffer():E.type==="json"?ct.json():ct.text()).then(function(jt){be||(gt&&Rt&&Tt(te,gt,Rt),pe=!0,C(null,jt,ct.headers.get("Cache-Control"),ct.headers.get("Expires")))}).catch(function(jt){be||C(new Error(jt.message))})};return Se?Kt(te,Fe):Fe(null,null),{cancel:function(){be=!0,pe||N.abort()}}}function et(E,C){var N=new self.XMLHttpRequest;N.open(E.method||"GET",E.url,!0),E.type==="arrayBuffer"&&(N.responseType="arraybuffer");for(var te in E.headers)N.setRequestHeader(te,E.headers[te]);return E.type==="json"&&(N.responseType="text",N.setRequestHeader("Accept","application/json")),N.withCredentials=E.credentials==="include",N.onerror=function(){C(new Error(N.statusText))},N.onload=function(){if((N.status>=200&&N.status<300||N.status===0)&&N.response!==null){var pe=N.response;if(E.type==="json")try{pe=JSON.parse(N.response)}catch(be){return C(be)}C(null,pe,N.getResponseHeader("Cache-Control"),N.getResponseHeader("Expires"))}else C(new Pr(N.statusText,N.status,E.url))},N.send(E.body),{cancel:function(){return N.abort()}}}var we=function(E,C){if(!tr(E.url)){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return Nr(E,C);if(q()&&self.worker&&self.worker.actor){var N=!0;return self.worker.actor.send("getResource",E,C,void 0,N)}}return et(E,C)},Me=function(E,C){return we(M(E,{type:"json"}),C)},Re=function(E,C){return we(M(E,{type:"arrayBuffer"}),C)},Xe=function(E,C){return we(M(E,{method:"POST"}),C)};function $e(E){var C=self.document.createElement("a");return C.href=E,C.protocol===self.document.location.protocol&&C.host===self.document.location.host}var ot="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function st(E,C,N,te){var pe=new self.Image,be=self.URL;pe.onload=function(){C(null,pe),be.revokeObjectURL(pe.src)},pe.onerror=function(){return C(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Se=new self.Blob([new Uint8Array(E)],{type:"image/png"});pe.cacheControl=N,pe.expires=te,pe.src=E.byteLength?be.createObjectURL(Se):ot}function yt(E,C){var N=new self.Blob([new Uint8Array(E)],{type:"image/png"});self.createImageBitmap(N).then(function(te){C(null,te)}).catch(function(te){C(new Error("Could not load image because of "+te.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}var wt,Vt,gr=function(){wt=[],Vt=0};gr();var wr=function(E,C){if(ae.supported&&(E.headers||(E.headers={}),E.headers.accept="image/webp,*/*"),Vt>=ne.MAX_PARALLEL_IMAGE_REQUESTS){var N={requestParameters:E,callback:C,cancelled:!1,cancel:function(){this.cancelled=!0}};return wt.push(N),N}Vt++;var te=!1,pe=function(){if(!te)for(te=!0,Vt--;wt.length&&Vt<ne.MAX_PARALLEL_IMAGE_REQUESTS;){var Se=wt.shift(),Fe=Se.requestParameters,tt=Se.callback,ct=Se.cancelled;ct||(Se.cancel=wr(Fe,tt).cancel)}},be=Re(E,function(Se,Fe,tt,ct){pe(),Se?C(Se):Fe&&(ir()?yt(Fe,C):st(Fe,C,tt,ct))});return{cancel:function(){be.cancel(),pe()}}},Lr=function(E,C){var N=self.document.createElement("video");N.muted=!0,N.onloadstart=function(){C(null,N)};for(var te=0;te<E.length;te++){var pe=self.document.createElement("source");$e(E[te])||(N.crossOrigin="Anonymous"),pe.src=E[te],N.appendChild(pe)}return{cancel:function(){}}};function fr(E,C,N){var te=N[E]&&N[E].indexOf(C)!==-1;te||(N[E]=N[E]||[],N[E].push(C))}function Fr(E,C,N){if(N&&N[E]){var te=N[E].indexOf(C);te!==-1&&N[E].splice(te,1)}}var nn=function(C,N){N===void 0&&(N={}),M(this,N),this.type=C},yr=function(E){function C(N,te){te===void 0&&(te={}),E.call(this,"error",M({error:N},te))}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C}(nn),_r=function(){};_r.prototype.on=function(C,N){return this._listeners=this._listeners||{},fr(C,N,this._listeners),this},_r.prototype.off=function(C,N){return Fr(C,N,this._listeners),Fr(C,N,this._oneTimeListeners),this},_r.prototype.once=function(C,N){return this._oneTimeListeners=this._oneTimeListeners||{},fr(C,N,this._oneTimeListeners),this},_r.prototype.fire=function(C,N){typeof C=="string"&&(C=new nn(C,N||{}));var te=C.type;if(this.listens(te)){C.target=this;for(var pe=this._listeners&&this._listeners[te]?this._listeners[te].slice():[],be=0,Se=pe;be<Se.length;be+=1){var Fe=Se[be];Fe.call(this,C)}for(var tt=this._oneTimeListeners&&this._oneTimeListeners[te]?this._oneTimeListeners[te].slice():[],ct=0,gt=tt;ct<gt.length;ct+=1){var Rt=gt[ct];Fr(te,Rt,this._oneTimeListeners),Rt.call(this,C)}var jt=this._eventedParent;jt&&(M(C,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),jt.fire(C))}else C instanceof yr&&console.error(C.error);return this},_r.prototype.listens=function(C){return this._listeners&&this._listeners[C]&&this._listeners[C].length>0||this._oneTimeListeners&&this._oneTimeListeners[C]&&this._oneTimeListeners[C].length>0||this._eventedParent&&this._eventedParent.listens(C)},_r.prototype.setEventedParent=function(C,N){return this._eventedParent=C,this._eventedParentData=N,this};var dn=8,Yr={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},Ar={"*":{type:"source"}},an=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],rn={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},Zr={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},at={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},zt={type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},er={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},hr={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Vr={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Rr=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],Er={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},xr={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Wr={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Rn={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},En={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},ea={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},ia={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Aa={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},ya={type:"array",value:"*"},pr={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},vn={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},$r={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},Fn={type:"array",value:"*",minimum:1},Bn={type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},ca={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},ta=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],Un={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},la={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},da={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},ur={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Dr={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},sn={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},tn={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},mn={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},wn={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},gn={"*":{type:"string"}},mr={$version:dn,$root:Yr,sources:Ar,source:an,source_vector:rn,source_raster:Zr,source_raster_dem:at,source_geojson:zt,source_video:er,source_image:hr,layer:Vr,layout:Rr,layout_background:Er,layout_fill:xr,layout_circle:Wr,layout_heatmap:Rn,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:En,layout_symbol:ea,layout_raster:ia,layout_hillshade:Aa,filter:ya,filter_operator:pr,geometry_type:vn,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:$r,expression:Fn,expression_name:Bn,light:ca,paint:ta,paint_fill:Un,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:la,paint_circle:da,paint_heatmap:ur,paint_symbol:Dr,paint_raster:sn,paint_hillshade:tn,paint_background:mn,transition:wn,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:gn},rr=function(C,N,te,pe){this.message=(C?C+": ":"")+te,pe&&(this.identifier=pe),N!=null&&N.__line__&&(this.line=N.__line__)};function zr(E){var C=E.key,N=E.value;return N?[new rr(C,N,"constants have been deprecated as of v8")]:[]}function jr(E){for(var C=[],N=arguments.length-1;N-- >0;)C[N]=arguments[N+1];for(var te=0,pe=C;te<pe.length;te+=1){var be=pe[te];for(var Se in be)E[Se]=be[Se]}return E}function Sn(E){return E instanceof Number||E instanceof String||E instanceof Boolean?E.valueOf():E}function On(E){if(Array.isArray(E))return E.map(On);if(E instanceof Object&&!(E instanceof Number||E instanceof String||E instanceof Boolean)){var C={};for(var N in E)C[N]=On(E[N]);return C}return Sn(E)}var aa=function(E){function C(N,te){E.call(this,te),this.message=te,this.key=N}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C}(Error),Zn=function(C,N){N===void 0&&(N=[]),this.parent=C,this.bindings={};for(var te=0,pe=N;te<pe.length;te+=1){var be=pe[te],Se=be[0],Fe=be[1];this.bindings[Se]=Fe}};Zn.prototype.concat=function(C){return new Zn(this,C)},Zn.prototype.get=function(C){if(this.bindings[C])return this.bindings[C];if(this.parent)return this.parent.get(C);throw new Error(C+" not found in scope.")},Zn.prototype.has=function(C){return this.bindings[C]?!0:this.parent?this.parent.has(C):!1};var Hn={kind:"null"},pn={kind:"number"},In={kind:"string"},Yn={kind:"boolean"},ua={kind:"color"},Ha={kind:"object"},ka={kind:"value"},Ys={kind:"error"},No={kind:"collator"},es={kind:"formatted"},Ls={kind:"resolvedImage"};function eo(E,C){return{kind:"array",itemType:E,N:C}}function Pi(E){if(E.kind==="array"){var C=Pi(E.itemType);return typeof E.N=="number"?"array<"+C+", "+E.N+">":E.itemType.kind==="value"?"array":"array<"+C+">"}else return E.kind}var Ws=[Hn,pn,In,Yn,ua,es,Ha,eo(ka),Ls];function Xs(E,C){if(C.kind==="error")return null;if(E.kind==="array"){if(C.kind==="array"&&(C.N===0&&C.itemType.kind==="value"||!Xs(E.itemType,C.itemType))&&(typeof E.N!="number"||E.N===C.N))return null}else{if(E.kind===C.kind)return null;if(E.kind==="value")for(var N=0,te=Ws;N<te.length;N+=1){var pe=te[N];if(!Xs(pe,C))return null}}return"Expected "+Pi(E)+" but found "+Pi(C)+" instead."}function ts(E,C){return C.some(function(N){return N.kind===E.kind})}function Ml(E,C){return C.some(function(N){return N==="null"?E===null:N==="array"?Array.isArray(E):N==="object"?E&&!Array.isArray(E)&&typeof E=="object":N===typeof E})}var Nl=o(function(E,C){var N={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function te(ct){return ct=Math.round(ct),ct<0?0:ct>255?255:ct}function pe(ct){return ct<0?0:ct>1?1:ct}function be(ct){return ct[ct.length-1]==="%"?te(parseFloat(ct)/100*255):te(parseInt(ct))}function Se(ct){return ct[ct.length-1]==="%"?pe(parseFloat(ct)/100):pe(parseFloat(ct))}function Fe(ct,gt,Rt){return Rt<0?Rt+=1:Rt>1&&(Rt-=1),Rt*6<1?ct+(gt-ct)*Rt*6:Rt*2<1?gt:Rt*3<2?ct+(gt-ct)*(2/3-Rt)*6:ct}function tt(ct){var gt=ct.replace(/ /g,"").toLowerCase();if(gt in N)return N[gt].slice();if(gt[0]==="#"){if(gt.length===4){var Rt=parseInt(gt.substr(1),16);return Rt>=0&&Rt<=4095?[(Rt&3840)>>4|(Rt&3840)>>8,Rt&240|(Rt&240)>>4,Rt&15|(Rt&15)<<4,1]:null}else if(gt.length===7){var Rt=parseInt(gt.substr(1),16);return Rt>=0&&Rt<=16777215?[(Rt&16711680)>>16,(Rt&65280)>>8,Rt&255,1]:null}return null}var jt=gt.indexOf("("),Gt=gt.indexOf(")");if(jt!==-1&&Gt+1===gt.length){var lr=gt.substr(0,jt),Ir=gt.substr(jt+1,Gt-(jt+1)).split(","),un=1;switch(lr){case"rgba":if(Ir.length!==4)return null;un=Se(Ir.pop());case"rgb":return Ir.length!==3?null:[be(Ir[0]),be(Ir[1]),be(Ir[2]),un];case"hsla":if(Ir.length!==4)return null;un=Se(Ir.pop());case"hsl":if(Ir.length!==3)return null;var qr=(parseFloat(Ir[0])%360+360)%360/360,Mn=Se(Ir[1]),bn=Se(Ir[2]),An=bn<=.5?bn*(Mn+1):bn+Mn-bn*Mn,Dn=bn*2-An;return[te(Fe(Dn,An,qr+1/3)*255),te(Fe(Dn,An,qr)*255),te(Fe(Dn,An,qr-1/3)*255),un];default:return null}}return null}try{C.parseCSSColor=tt}catch{}}),xu=Nl.parseCSSColor,hi=function(C,N,te,pe){pe===void 0&&(pe=1),this.r=C,this.g=N,this.b=te,this.a=pe};hi.parse=function(C){if(!!C){if(C instanceof hi)return C;if(typeof C=="string"){var N=xu(C);if(!!N)return new hi(N[0]/255*N[3],N[1]/255*N[3],N[2]/255*N[3],N[3])}}},hi.prototype.toString=function(){var C=this.toArray(),N=C[0],te=C[1],pe=C[2],be=C[3];return"rgba("+Math.round(N)+","+Math.round(te)+","+Math.round(pe)+","+be+")"},hi.prototype.toArray=function(){var C=this,N=C.r,te=C.g,pe=C.b,be=C.a;return be===0?[0,0,0,0]:[N*255/be,te*255/be,pe*255/be,be]},hi.black=new hi(0,0,0,1),hi.white=new hi(1,1,1,1),hi.transparent=new hi(0,0,0,0),hi.red=new hi(1,0,0,1);var ol=function(C,N,te){C?this.sensitivity=N?"variant":"case":this.sensitivity=N?"accent":"base",this.locale=te,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};ol.prototype.compare=function(C,N){return this.collator.compare(C,N)},ol.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var js=function(C,N,te,pe,be){this.text=C,this.image=N,this.scale=te,this.fontStack=pe,this.textColor=be},Ui=function(C){this.sections=C};Ui.fromString=function(C){return new Ui([new js(C,null,null,null,null)])},Ui.prototype.isEmpty=function(){return this.sections.length===0?!0:!this.sections.some(function(C){return C.text.length!==0||C.image&&C.image.name.length!==0})},Ui.factory=function(C){return C instanceof Ui?C:Ui.fromString(C)},Ui.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(C){return C.text}).join("")},Ui.prototype.serialize=function(){for(var C=["format"],N=0,te=this.sections;N<te.length;N+=1){var pe=te[N];if(pe.image){C.push(["image",pe.image.name]);continue}C.push(pe.text);var be={};pe.fontStack&&(be["text-font"]=["literal",pe.fontStack.split(",")]),pe.scale&&(be["font-scale"]=pe.scale),pe.textColor&&(be["text-color"]=["rgba"].concat(pe.textColor.toArray())),C.push(be)}return C};var So=function(C){this.name=C.name,this.available=C.available};So.prototype.toString=function(){return this.name},So.fromString=function(C){return C?new So({name:C,available:!1}):null},So.prototype.serialize=function(){return["image",this.name]};function Bl(E,C,N,te){if(!(typeof E=="number"&&E>=0&&E<=255&&typeof C=="number"&&C>=0&&C<=255&&typeof N=="number"&&N>=0&&N<=255)){var pe=typeof te=="number"?[E,C,N,te]:[E,C,N];return"Invalid rgba value ["+pe.join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}return typeof te=="undefined"||typeof te=="number"&&te>=0&&te<=1?null:"Invalid rgba value ["+[E,C,N,te].join(", ")+"]: 'a' must be between 0 and 1."}function _s(E){if(E===null)return!0;if(typeof E=="string")return!0;if(typeof E=="boolean")return!0;if(typeof E=="number")return!0;if(E instanceof hi)return!0;if(E instanceof ol)return!0;if(E instanceof Ui)return!0;if(E instanceof So)return!0;if(Array.isArray(E)){for(var C=0,N=E;C<N.length;C+=1){var te=N[C];if(!_s(te))return!1}return!0}else if(typeof E=="object"){for(var pe in E)if(!_s(E[pe]))return!1;return!0}else return!1}function Di(E){if(E===null)return Hn;if(typeof E=="string")return In;if(typeof E=="boolean")return Yn;if(typeof E=="number")return pn;if(E instanceof hi)return ua;if(E instanceof ol)return No;if(E instanceof Ui)return es;if(E instanceof So)return Ls;if(Array.isArray(E)){for(var C=E.length,N,te=0,pe=E;te<pe.length;te+=1){var be=pe[te],Se=Di(be);if(!N)N=Se;else{if(N===Se)continue;N=ka;break}}return eo(N||ka,C)}else return Ha}function Sl(E){var C=typeof E;return E===null?"":C==="string"||C==="number"||C==="boolean"?String(E):E instanceof hi||E instanceof Ui||E instanceof So?E.toString():JSON.stringify(E)}var Ji=function(C,N){this.type=C,this.value=N};Ji.parse=function(C,N){if(C.length!==2)return N.error("'literal' expression requires exactly one argument, but found "+(C.length-1)+" instead.");if(!_s(C[1]))return N.error("invalid value");var te=C[1],pe=Di(te),be=N.expectedType;return pe.kind==="array"&&pe.N===0&&be&&be.kind==="array"&&(typeof be.N!="number"||be.N===0)&&(pe=be),new Ji(pe,te)},Ji.prototype.evaluate=function(){return this.value},Ji.prototype.eachChild=function(){},Ji.prototype.outputDefined=function(){return!0},Ji.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof hi?["rgba"].concat(this.value.toArray()):this.value instanceof Ui?this.value.serialize():this.value};var Fi=function(C){this.name="ExpressionEvaluationError",this.message=C};Fi.prototype.toJSON=function(){return this.message};var io={string:In,number:pn,boolean:Yn,object:Ha},Qi=function(C,N){this.type=C,this.args=N};Qi.parse=function(C,N){if(C.length<2)return N.error("Expected at least one argument.");var te=1,pe,be=C[0];if(be==="array"){var Se;if(C.length>2){var Fe=C[1];if(typeof Fe!="string"||!(Fe in io)||Fe==="object")return N.error('The item type argument of "array" must be one of string, number, boolean',1);Se=io[Fe],te++}else Se=ka;var tt;if(C.length>3){if(C[2]!==null&&(typeof C[2]!="number"||C[2]<0||C[2]!==Math.floor(C[2])))return N.error('The length argument to "array" must be a positive integer literal',2);tt=C[2],te++}pe=eo(Se,tt)}else pe=io[be];for(var ct=[];te<C.length;te++){var gt=N.parse(C[te],te,ka);if(!gt)return null;ct.push(gt)}return new Qi(pe,ct)},Qi.prototype.evaluate=function(C){for(var N=0;N<this.args.length;N++){var te=this.args[N].evaluate(C),pe=Xs(this.type,Di(te));if(pe){if(N===this.args.length-1)throw new Fi("Expected value to be of type "+Pi(this.type)+", but found "+Pi(Di(te))+" instead.")}else return te}return null},Qi.prototype.eachChild=function(C){this.args.forEach(C)},Qi.prototype.outputDefined=function(){return this.args.every(function(C){return C.outputDefined()})},Qi.prototype.serialize=function(){var C=this.type,N=[C.kind];if(C.kind==="array"){var te=C.itemType;if(te.kind==="string"||te.kind==="number"||te.kind==="boolean"){N.push(te.kind);var pe=C.N;(typeof pe=="number"||this.args.length>1)&&N.push(pe)}}return N.concat(this.args.map(function(be){return be.serialize()}))};var us=function(C){this.type=es,this.sections=C};us.parse=function(C,N){if(C.length<2)return N.error("Expected at least one argument.");var te=C[1];if(!Array.isArray(te)&&typeof te=="object")return N.error("First argument must be an image or text section.");for(var pe=[],be=!1,Se=1;Se<=C.length-1;++Se){var Fe=C[Se];if(be&&typeof Fe=="object"&&!Array.isArray(Fe)){be=!1;var tt=null;if(Fe["font-scale"]&&(tt=N.parse(Fe["font-scale"],1,pn),!tt))return null;var ct=null;if(Fe["text-font"]&&(ct=N.parse(Fe["text-font"],1,eo(In)),!ct))return null;var gt=null;if(Fe["text-color"]&&(gt=N.parse(Fe["text-color"],1,ua),!gt))return null;var Rt=pe[pe.length-1];Rt.scale=tt,Rt.font=ct,Rt.textColor=gt}else{var jt=N.parse(C[Se],1,ka);if(!jt)return null;var Gt=jt.type.kind;if(Gt!=="string"&&Gt!=="value"&&Gt!=="null"&&Gt!=="resolvedImage")return N.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");be=!0,pe.push({content:jt,scale:null,font:null,textColor:null})}}return new us(pe)},us.prototype.evaluate=function(C){var N=function(te){var pe=te.content.evaluate(C);return Di(pe)===Ls?new js("",pe,null,null,null):new js(Sl(pe),null,te.scale?te.scale.evaluate(C):null,te.font?te.font.evaluate(C).join(","):null,te.textColor?te.textColor.evaluate(C):null)};return new Ui(this.sections.map(N))},us.prototype.eachChild=function(C){for(var N=0,te=this.sections;N<te.length;N+=1){var pe=te[N];C(pe.content),pe.scale&&C(pe.scale),pe.font&&C(pe.font),pe.textColor&&C(pe.textColor)}},us.prototype.outputDefined=function(){return!1},us.prototype.serialize=function(){for(var C=["format"],N=0,te=this.sections;N<te.length;N+=1){var pe=te[N];C.push(pe.content.serialize());var be={};pe.scale&&(be["font-scale"]=pe.scale.serialize()),pe.font&&(be["text-font"]=pe.font.serialize()),pe.textColor&&(be["text-color"]=pe.textColor.serialize()),C.push(be)}return C};var sl=function(C){this.type=Ls,this.input=C};sl.parse=function(C,N){if(C.length!==2)return N.error("Expected two arguments.");var te=N.parse(C[1],1,In);return te?new sl(te):N.error("No image name provided.")},sl.prototype.evaluate=function(C){var N=this.input.evaluate(C),te=So.fromString(N);return te&&C.availableImages&&(te.available=C.availableImages.indexOf(N)>-1),te},sl.prototype.eachChild=function(C){C(this.input)},sl.prototype.outputDefined=function(){return!1},sl.prototype.serialize=function(){return["image",this.input.serialize()]};var Bu={"to-boolean":Yn,"to-color":ua,"to-number":pn,"to-string":In},rs=function(C,N){this.type=C,this.args=N};rs.parse=function(C,N){if(C.length<2)return N.error("Expected at least one argument.");var te=C[0];if((te==="to-boolean"||te==="to-string")&&C.length!==2)return N.error("Expected one argument.");for(var pe=Bu[te],be=[],Se=1;Se<C.length;Se++){var Fe=N.parse(C[Se],Se,ka);if(!Fe)return null;be.push(Fe)}return new rs(pe,be)},rs.prototype.evaluate=function(C){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(C));if(this.type.kind==="color"){for(var N,te,pe=0,be=this.args;pe<be.length;pe+=1){var Se=be[pe];if(N=Se.evaluate(C),te=null,N instanceof hi)return N;if(typeof N=="string"){var Fe=C.parseColor(N);if(Fe)return Fe}else if(Array.isArray(N)&&(N.length<3||N.length>4?te="Invalid rbga value "+JSON.stringify(N)+": expected an array containing either three or four numeric values.":te=Bl(N[0],N[1],N[2],N[3]),!te))return new hi(N[0]/255,N[1]/255,N[2]/255,N[3])}throw new Fi(te||"Could not parse color from value '"+(typeof N=="string"?N:String(JSON.stringify(N)))+"'")}else if(this.type.kind==="number"){for(var tt=null,ct=0,gt=this.args;ct<gt.length;ct+=1){var Rt=gt[ct];if(tt=Rt.evaluate(C),tt===null)return 0;var jt=Number(tt);if(!isNaN(jt))return jt}throw new Fi("Could not convert "+JSON.stringify(tt)+" to number.")}else return this.type.kind==="formatted"?Ui.fromString(Sl(this.args[0].evaluate(C))):this.type.kind==="resolvedImage"?So.fromString(Sl(this.args[0].evaluate(C))):Sl(this.args[0].evaluate(C))},rs.prototype.eachChild=function(C){this.args.forEach(C)},rs.prototype.outputDefined=function(){return this.args.every(function(C){return C.outputDefined()})},rs.prototype.serialize=function(){if(this.type.kind==="formatted")return new us([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new sl(this.args[0]).serialize();var C=["to-"+this.type.kind];return this.eachChild(function(N){C.push(N.serialize())}),C};var Uu=["Unknown","Point","LineString","Polygon"],Zs=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Zs.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Zs.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Uu[this.feature.type]:this.feature.type:null},Zs.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Zs.prototype.canonicalID=function(){return this.canonical},Zs.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Zs.prototype.parseColor=function(C){var N=this._parseColorCache[C];return N||(N=this._parseColorCache[C]=hi.parse(C)),N};var ko=function(C,N,te,pe){this.name=C,this.type=N,this._evaluate=te,this.args=pe};ko.prototype.evaluate=function(C){return this._evaluate(C,this.args)},ko.prototype.eachChild=function(C){this.args.forEach(C)},ko.prototype.outputDefined=function(){return!1},ko.prototype.serialize=function(){return[this.name].concat(this.args.map(function(C){return C.serialize()}))},ko.parse=function(C,N){var te,pe=C[0],be=ko.definitions[pe];if(!be)return N.error('Unknown expression "'+pe+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Se=Array.isArray(be)?be[0]:be.type,Fe=Array.isArray(be)?[[be[1],be[2]]]:be.overloads,tt=Fe.filter(function(Da){var Ia=Da[0];return!Array.isArray(Ia)||Ia.length===C.length-1}),ct=null,gt=0,Rt=tt;gt<Rt.length;gt+=1){var jt=Rt[gt],Gt=jt[0],lr=jt[1];ct=new Eo(N.registry,N.path,null,N.scope);for(var Ir=[],un=!1,qr=1;qr<C.length;qr++){var Mn=C[qr],bn=Array.isArray(Gt)?Gt[qr-1]:Gt.type,An=ct.parse(Mn,1+Ir.length,bn);if(!An){un=!0;break}Ir.push(An)}if(!un){if(Array.isArray(Gt)&&Gt.length!==Ir.length){ct.error("Expected "+Gt.length+" arguments, but found "+Ir.length+" instead.");continue}for(var Dn=0;Dn<Ir.length;Dn++){var Xn=Array.isArray(Gt)?Gt[Dn]:Gt.type,sa=Ir[Dn];ct.concat(Dn+1).checkSubtype(Xn,sa.type)}if(ct.errors.length===0)return new ko(pe,Se,lr,Ir)}}if(tt.length===1)(te=N.errors).push.apply(te,ct.errors);else{for(var na=tt.length?tt:Fe,za=na.map(function(Da){var Ia=Da[0];return ff(Ia)}).join(" | "),Ta=[],Sa=1;Sa<C.length;Sa++){var ti=N.parse(C[Sa],1+Ta.length);if(!ti)return null;Ta.push(Pi(ti.type))}N.error("Expected arguments of type "+za+", but found ("+Ta.join(", ")+") instead.")}return null},ko.register=function(C,N){ko.definitions=N;for(var te in N)C[te]=ko};function ff(E){return Array.isArray(E)?"("+E.map(Pi).join(", ")+")":"("+Pi(E.type)+"...)"}var Ks=function(C,N,te){this.type=No,this.locale=te,this.caseSensitive=C,this.diacriticSensitive=N};Ks.parse=function(C,N){if(C.length!==2)return N.error("Expected one argument.");var te=C[1];if(typeof te!="object"||Array.isArray(te))return N.error("Collator options argument must be an object.");var pe=N.parse(te["case-sensitive"]===void 0?!1:te["case-sensitive"],1,Yn);if(!pe)return null;var be=N.parse(te["diacritic-sensitive"]===void 0?!1:te["diacritic-sensitive"],1,Yn);if(!be)return null;var Se=null;return te.locale&&(Se=N.parse(te.locale,1,In),!Se)?null:new Ks(pe,be,Se)},Ks.prototype.evaluate=function(C){return new ol(this.caseSensitive.evaluate(C),this.diacriticSensitive.evaluate(C),this.locale?this.locale.evaluate(C):null)},Ks.prototype.eachChild=function(C){C(this.caseSensitive),C(this.diacriticSensitive),this.locale&&C(this.locale)},Ks.prototype.outputDefined=function(){return!1},Ks.prototype.serialize=function(){var C={};return C["case-sensitive"]=this.caseSensitive.serialize(),C["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(C.locale=this.locale.serialize()),["collator",C]};var Ps=8192;function nu(E,C){E[0]=Math.min(E[0],C[0]),E[1]=Math.min(E[1],C[1]),E[2]=Math.max(E[2],C[0]),E[3]=Math.max(E[3],C[1])}function cf(E){return(180+E)/360}function hf(E){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+E*Math.PI/360)))/360}function ll(E,C){return!(E[0]<=C[0]||E[2]>=C[2]||E[1]<=C[1]||E[3]>=C[3])}function au(E,C){var N=cf(E[0]),te=hf(E[1]),pe=Math.pow(2,C.z);return[Math.round(N*pe*Ps),Math.round(te*pe*Ps)]}function Ds(E,C,N){var te=E[0]-C[0],pe=E[1]-C[1],be=E[0]-N[0],Se=E[1]-N[1];return te*Se-be*pe===0&&te*be<=0&&pe*Se<=0}function bu(E,C,N){return C[1]>E[1]!=N[1]>E[1]&&E[0]<(N[0]-C[0])*(E[1]-C[1])/(N[1]-C[1])+C[0]}function kl(E,C){for(var N=!1,te=0,pe=C.length;te<pe;te++)for(var be=C[te],Se=0,Fe=be.length;Se<Fe-1;Se++){if(Ds(E,be[Se],be[Se+1]))return!1;bu(E,be[Se],be[Se+1])&&(N=!N)}return N}function _u(E,C){for(var N=0;N<C.length;N++)if(kl(E,C[N]))return!0;return!1}function Hu(E,C){return E[0]*C[1]-E[1]*C[0]}function iu(E,C,N,te){var pe=E[0]-N[0],be=E[1]-N[1],Se=C[0]-N[0],Fe=C[1]-N[1],tt=te[0]-N[0],ct=te[1]-N[1],gt=pe*ct-tt*be,Rt=Se*ct-tt*Fe;return gt>0&&Rt<0||gt<0&&Rt>0}function vf(E,C,N,te){var pe=[C[0]-E[0],C[1]-E[1]],be=[te[0]-N[0],te[1]-N[1]];return Hu(be,pe)===0?!1:!!(iu(E,C,N,te)&&iu(N,te,E,C))}function ul(E,C,N){for(var te=0,pe=N;te<pe.length;te+=1)for(var be=pe[te],Se=0;Se<be.length-1;++Se)if(vf(E,C,be[Se],be[Se+1]))return!0;return!1}function wu(E,C){for(var N=0;N<E.length;++N)if(!kl(E[N],C))return!1;for(var te=0;te<E.length-1;++te)if(ul(E[te],E[te+1],C))return!1;return!0}function ou(E,C){for(var N=0;N<C.length;N++)if(wu(E,C[N]))return!0;return!1}function ws(E,C,N){for(var te=[],pe=0;pe<E.length;pe++){for(var be=[],Se=0;Se<E[pe].length;Se++){var Fe=au(E[pe][Se],N);nu(C,Fe),be.push(Fe)}te.push(be)}return te}function Ul(E,C,N){for(var te=[],pe=0;pe<E.length;pe++){var be=ws(E[pe],C,N);te.push(be)}return te}function Tu(E,C,N,te){if(E[0]<N[0]||E[0]>N[2]){var pe=te*.5,be=E[0]-N[0]>pe?-te:N[0]-E[0]>pe?te:0;be===0&&(be=E[0]-N[2]>pe?-te:N[2]-E[0]>pe?te:0),E[0]+=be}nu(C,E)}function Vu(E){E[0]=E[1]=1/0,E[2]=E[3]=-1/0}function Gu(E,C,N,te){for(var pe=Math.pow(2,te.z)*Ps,be=[te.x*Ps,te.y*Ps],Se=[],Fe=0,tt=E;Fe<tt.length;Fe+=1)for(var ct=tt[Fe],gt=0,Rt=ct;gt<Rt.length;gt+=1){var jt=Rt[gt],Gt=[jt.x+be[0],jt.y+be[1]];Tu(Gt,C,N,pe),Se.push(Gt)}return Se}function su(E,C,N,te){for(var pe=Math.pow(2,te.z)*Ps,be=[te.x*Ps,te.y*Ps],Se=[],Fe=0,tt=E;Fe<tt.length;Fe+=1){for(var ct=tt[Fe],gt=[],Rt=0,jt=ct;Rt<jt.length;Rt+=1){var Gt=jt[Rt],lr=[Gt.x+be[0],Gt.y+be[1]];nu(C,lr),gt.push(lr)}Se.push(gt)}if(C[2]-C[0]<=pe/2){Vu(C);for(var Ir=0,un=Se;Ir<un.length;Ir+=1)for(var qr=un[Ir],Mn=0,bn=qr;Mn<bn.length;Mn+=1){var An=bn[Mn];Tu(An,C,N,pe)}}return Se}function pf(E,C){var N=[1/0,1/0,-1/0,-1/0],te=[1/0,1/0,-1/0,-1/0],pe=E.canonicalID();if(C.type==="Polygon"){var be=ws(C.coordinates,te,pe),Se=Gu(E.geometry(),N,te,pe);if(!ll(N,te))return!1;for(var Fe=0,tt=Se;Fe<tt.length;Fe+=1){var ct=tt[Fe];if(!kl(ct,be))return!1}}if(C.type==="MultiPolygon"){var gt=Ul(C.coordinates,te,pe),Rt=Gu(E.geometry(),N,te,pe);if(!ll(N,te))return!1;for(var jt=0,Gt=Rt;jt<Gt.length;jt+=1){var lr=Gt[jt];if(!_u(lr,gt))return!1}}return!0}function Yu(E,C){var N=[1/0,1/0,-1/0,-1/0],te=[1/0,1/0,-1/0,-1/0],pe=E.canonicalID();if(C.type==="Polygon"){var be=ws(C.coordinates,te,pe),Se=su(E.geometry(),N,te,pe);if(!ll(N,te))return!1;for(var Fe=0,tt=Se;Fe<tt.length;Fe+=1){var ct=tt[Fe];if(!wu(ct,be))return!1}}if(C.type==="MultiPolygon"){var gt=Ul(C.coordinates,te,pe),Rt=su(E.geometry(),N,te,pe);if(!ll(N,te))return!1;for(var jt=0,Gt=Rt;jt<Gt.length;jt+=1){var lr=Gt[jt];if(!ou(lr,gt))return!1}}return!0}var ns=function(C,N){this.type=Yn,this.geojson=C,this.geometries=N};ns.parse=function(C,N){if(C.length!==2)return N.error("'within' expression requires exactly one argument, but found "+(C.length-1)+" instead.");if(_s(C[1])){var te=C[1];if(te.type==="FeatureCollection")for(var pe=0;pe<te.features.length;++pe){var be=te.features[pe].geometry.type;if(be==="Polygon"||be==="MultiPolygon")return new ns(te,te.features[pe].geometry)}else if(te.type==="Feature"){var Se=te.geometry.type;if(Se==="Polygon"||Se==="MultiPolygon")return new ns(te,te.geometry)}else if(te.type==="Polygon"||te.type==="MultiPolygon")return new ns(te,te)}return N.error("'within' expression requires valid geojson object that contains polygon geometry type.")},ns.prototype.evaluate=function(C){if(C.geometry()!=null&&C.canonicalID()!=null){if(C.geometryType()==="Point")return pf(C,this.geometries);if(C.geometryType()==="LineString")return Yu(C,this.geometries)}return!1},ns.prototype.eachChild=function(){},ns.prototype.outputDefined=function(){return!0},ns.prototype.serialize=function(){return["within",this.geojson]};function El(E){if(E instanceof ko){if(E.name==="get"&&E.args.length===1)return!1;if(E.name==="feature-state")return!1;if(E.name==="has"&&E.args.length===1)return!1;if(E.name==="properties"||E.name==="geometry-type"||E.name==="id")return!1;if(/^filter-/.test(E.name))return!1}if(E instanceof ns)return!1;var C=!0;return E.eachChild(function(N){C&&!El(N)&&(C=!1)}),C}function Cl(E){if(E instanceof ko&&E.name==="feature-state")return!1;var C=!0;return E.eachChild(function(N){C&&!Cl(N)&&(C=!1)}),C}function Au(E,C){if(E instanceof ko&&C.indexOf(E.name)>=0)return!1;var N=!0;return E.eachChild(function(te){N&&!Au(te,C)&&(N=!1)}),N}var Ts=function(C,N){this.type=N.type,this.name=C,this.boundExpression=N};Ts.parse=function(C,N){if(C.length!==2||typeof C[1]!="string")return N.error("'var' expression requires exactly one string literal argument.");var te=C[1];return N.scope.has(te)?new Ts(te,N.scope.get(te)):N.error('Unknown variable "'+te+'". Make sure "'+te+'" has been bound in an enclosing "let" expression before using it.',1)},Ts.prototype.evaluate=function(C){return this.boundExpression.evaluate(C)},Ts.prototype.eachChild=function(){},Ts.prototype.outputDefined=function(){return!1},Ts.prototype.serialize=function(){return["var",this.name]};var Eo=function(C,N,te,pe,be){N===void 0&&(N=[]),pe===void 0&&(pe=new Zn),be===void 0&&(be=[]),this.registry=C,this.path=N,this.key=N.map(function(Se){return"["+Se+"]"}).join(""),this.scope=pe,this.errors=be,this.expectedType=te};Eo.prototype.parse=function(C,N,te,pe,be){return be===void 0&&(be={}),N?this.concat(N,te,pe)._parse(C,be):this._parse(C,be)},Eo.prototype._parse=function(C,N){(C===null||typeof C=="string"||typeof C=="boolean"||typeof C=="number")&&(C=["literal",C]);function te(gt,Rt,jt){return jt==="assert"?new Qi(Rt,[gt]):jt==="coerce"?new rs(Rt,[gt]):gt}if(Array.isArray(C)){if(C.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var pe=C[0];if(typeof pe!="string")return this.error("Expression name must be a string, but found "+typeof pe+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var be=this.registry[pe];if(be){var Se=be.parse(C,this);if(!Se)return null;if(this.expectedType){var Fe=this.expectedType,tt=Se.type;if((Fe.kind==="string"||Fe.kind==="number"||Fe.kind==="boolean"||Fe.kind==="object"||Fe.kind==="array")&&tt.kind==="value")Se=te(Se,Fe,N.typeAnnotation||"assert");else if((Fe.kind==="color"||Fe.kind==="formatted"||Fe.kind==="resolvedImage")&&(tt.kind==="value"||tt.kind==="string"))Se=te(Se,Fe,N.typeAnnotation||"coerce");else if(this.checkSubtype(Fe,tt))return null}if(!(Se instanceof Ji)&&Se.type.kind!=="resolvedImage"&&lu(Se)){var ct=new Zs;try{Se=new Ji(Se.type,Se.evaluate(ct))}catch(gt){return this.error(gt.message),null}}return Se}return this.error('Unknown expression "'+pe+'". If you wanted a literal array, use ["literal", [...]].',0)}else return typeof C=="undefined"?this.error("'undefined' value invalid. Use null instead."):typeof C=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof C+" instead.")},Eo.prototype.concat=function(C,N,te){var pe=typeof C=="number"?this.path.concat(C):this.path,be=te?this.scope.concat(te):this.scope;return new Eo(this.registry,pe,N||null,be,this.errors)},Eo.prototype.error=function(C){for(var N=[],te=arguments.length-1;te-- >0;)N[te]=arguments[te+1];var pe=""+this.key+N.map(function(be){return"["+be+"]"}).join("");this.errors.push(new aa(pe,C))},Eo.prototype.checkSubtype=function(C,N){var te=Xs(C,N);return te&&this.error(te),te};function lu(E){if(E instanceof Ts)return lu(E.boundExpression);if(E instanceof ko&&E.name==="error")return!1;if(E instanceof Ks)return!1;if(E instanceof ns)return!1;var C=E instanceof rs||E instanceof Qi,N=!0;return E.eachChild(function(te){C?N=N&&lu(te):N=N&&te instanceof Ji}),N?El(E)&&Au(E,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function Rs(E,C){for(var N=E.length-1,te=0,pe=N,be=0,Se,Fe;te<=pe;)if(be=Math.floor((te+pe)/2),Se=E[be],Fe=E[be+1],Se<=C){if(be===N||C<Fe)return be;te=be+1}else if(Se>C)pe=be-1;else throw new Fi("Input is not a number.");return 0}var Is=function(C,N,te){this.type=C,this.input=N,this.labels=[],this.outputs=[];for(var pe=0,be=te;pe<be.length;pe+=1){var Se=be[pe],Fe=Se[0],tt=Se[1];this.labels.push(Fe),this.outputs.push(tt)}};Is.parse=function(C,N){if(C.length-1<4)return N.error("Expected at least 4 arguments, but found only "+(C.length-1)+".");if((C.length-1)%2!==0)return N.error("Expected an even number of arguments.");var te=N.parse(C[1],1,pn);if(!te)return null;var pe=[],be=null;N.expectedType&&N.expectedType.kind!=="value"&&(be=N.expectedType);for(var Se=1;Se<C.length;Se+=2){var Fe=Se===1?-1/0:C[Se],tt=C[Se+1],ct=Se,gt=Se+1;if(typeof Fe!="number")return N.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ct);if(pe.length&&pe[pe.length-1][0]>=Fe)return N.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ct);var Rt=N.parse(tt,gt,be);if(!Rt)return null;be=be||Rt.type,pe.push([Fe,Rt])}return new Is(be,te,pe)},Is.prototype.evaluate=function(C){var N=this.labels,te=this.outputs;if(N.length===1)return te[0].evaluate(C);var pe=this.input.evaluate(C);if(pe<=N[0])return te[0].evaluate(C);var be=N.length;if(pe>=N[be-1])return te[be-1].evaluate(C);var Se=Rs(N,pe);return te[Se].evaluate(C)},Is.prototype.eachChild=function(C){C(this.input);for(var N=0,te=this.outputs;N<te.length;N+=1){var pe=te[N];C(pe)}},Is.prototype.outputDefined=function(){return this.outputs.every(function(C){return C.outputDefined()})},Is.prototype.serialize=function(){for(var C=["step",this.input.serialize()],N=0;N<this.labels.length;N++)N>0&&C.push(this.labels[N]),C.push(this.outputs[N].serialize());return C};function lo(E,C,N){return E*(1-N)+C*N}function Hl(E,C,N){return new hi(lo(E.r,C.r,N),lo(E.g,C.g,N),lo(E.b,C.b,N),lo(E.a,C.a,N))}function Vl(E,C,N){return E.map(function(te,pe){return lo(te,C[pe],N)})}var fl=Object.freeze({__proto__:null,number:lo,color:Hl,array:Vl}),As=.95047,Gl=1,Ll=1.08883,uu=4/29,Yl=6/29,cl=3*Yl*Yl,df=Yl*Yl*Yl,fs=Math.PI/180,zf=180/Math.PI;function Mu(E){return E>df?Math.pow(E,1/3):E/cl+uu}function Pl(E){return E>Yl?E*E*E:cl*(E-uu)}function Wl(E){return 255*(E<=.0031308?12.92*E:1.055*Math.pow(E,1/2.4)-.055)}function hl(E){return E/=255,E<=.04045?E/12.92:Math.pow((E+.055)/1.055,2.4)}function Xl(E){var C=hl(E.r),N=hl(E.g),te=hl(E.b),pe=Mu((.4124564*C+.3575761*N+.1804375*te)/As),be=Mu((.2126729*C+.7151522*N+.072175*te)/Gl),Se=Mu((.0193339*C+.119192*N+.9503041*te)/Ll);return{l:116*be-16,a:500*(pe-be),b:200*(be-Se),alpha:E.a}}function Wu(E){var C=(E.l+16)/116,N=isNaN(E.a)?C:C+E.a/500,te=isNaN(E.b)?C:C-E.b/200;return C=Gl*Pl(C),N=As*Pl(N),te=Ll*Pl(te),new hi(Wl(3.2404542*N-1.5371385*C-.4985314*te),Wl(-.969266*N+1.8760108*C+.041556*te),Wl(.0556434*N-.2040259*C+1.0572252*te),E.alpha)}function Xu(E,C,N){return{l:lo(E.l,C.l,N),a:lo(E.a,C.a,N),b:lo(E.b,C.b,N),alpha:lo(E.alpha,C.alpha,N)}}function Ff(E){var C=Xl(E),N=C.l,te=C.a,pe=C.b,be=Math.atan2(pe,te)*zf;return{h:be<0?be+360:be,c:Math.sqrt(te*te+pe*pe),l:N,alpha:E.a}}function Ri(E){var C=E.h*fs,N=E.c,te=E.l;return Wu({l:te,a:Math.cos(C)*N,b:Math.sin(C)*N,alpha:E.alpha})}function Dl(E,C,N){var te=C-E;return E+N*(te>180||te<-180?te-360*Math.round(te/360):te)}function vl(E,C,N){return{h:Dl(E.h,C.h,N),c:lo(E.c,C.c,N),l:lo(E.l,C.l,N),alpha:lo(E.alpha,C.alpha,N)}}var as={forward:Xl,reverse:Wu,interpolate:Xu},cs={forward:Ff,reverse:Ri,interpolate:vl},jl=Object.freeze({__proto__:null,lab:as,hcl:cs}),uo=function(C,N,te,pe,be){this.type=C,this.operator=N,this.interpolation=te,this.input=pe,this.labels=[],this.outputs=[];for(var Se=0,Fe=be;Se<Fe.length;Se+=1){var tt=Fe[Se],ct=tt[0],gt=tt[1];this.labels.push(ct),this.outputs.push(gt)}};uo.interpolationFactor=function(C,N,te,pe){var be=0;if(C.name==="exponential")be=ju(N,C.base,te,pe);else if(C.name==="linear")be=ju(N,1,te,pe);else if(C.name==="cubic-bezier"){var Se=C.controlPoints,Fe=new r(Se[0],Se[1],Se[2],Se[3]);be=Fe.solve(ju(N,1,te,pe))}return be},uo.parse=function(C,N){var te=C[0],pe=C[1],be=C[2],Se=C.slice(3);if(!Array.isArray(pe)||pe.length===0)return N.error("Expected an interpolation type expression.",1);if(pe[0]==="linear")pe={name:"linear"};else if(pe[0]==="exponential"){var Fe=pe[1];if(typeof Fe!="number")return N.error("Exponential interpolation requires a numeric base.",1,1);pe={name:"exponential",base:Fe}}else if(pe[0]==="cubic-bezier"){var tt=pe.slice(1);if(tt.length!==4||tt.some(function(qr){return typeof qr!="number"||qr<0||qr>1}))return N.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);pe={name:"cubic-bezier",controlPoints:tt}}else return N.error("Unknown interpolation type "+String(pe[0]),1,0);if(C.length-1<4)return N.error("Expected at least 4 arguments, but found only "+(C.length-1)+".");if((C.length-1)%2!==0)return N.error("Expected an even number of arguments.");if(be=N.parse(be,2,pn),!be)return null;var ct=[],gt=null;te==="interpolate-hcl"||te==="interpolate-lab"?gt=ua:N.expectedType&&N.expectedType.kind!=="value"&&(gt=N.expectedType);for(var Rt=0;Rt<Se.length;Rt+=2){var jt=Se[Rt],Gt=Se[Rt+1],lr=Rt+3,Ir=Rt+4;if(typeof jt!="number")return N.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',lr);if(ct.length&&ct[ct.length-1][0]>=jt)return N.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',lr);var un=N.parse(Gt,Ir,gt);if(!un)return null;gt=gt||un.type,ct.push([jt,un])}return gt.kind!=="number"&&gt.kind!=="color"&&!(gt.kind==="array"&&gt.itemType.kind==="number"&&typeof gt.N=="number")?N.error("Type "+Pi(gt)+" is not interpolatable."):new uo(gt,te,pe,be,ct)},uo.prototype.evaluate=function(C){var N=this.labels,te=this.outputs;if(N.length===1)return te[0].evaluate(C);var pe=this.input.evaluate(C);if(pe<=N[0])return te[0].evaluate(C);var be=N.length;if(pe>=N[be-1])return te[be-1].evaluate(C);var Se=Rs(N,pe),Fe=N[Se],tt=N[Se+1],ct=uo.interpolationFactor(this.interpolation,pe,Fe,tt),gt=te[Se].evaluate(C),Rt=te[Se+1].evaluate(C);return this.operator==="interpolate"?fl[this.type.kind.toLowerCase()](gt,Rt,ct):this.operator==="interpolate-hcl"?cs.reverse(cs.interpolate(cs.forward(gt),cs.forward(Rt),ct)):as.reverse(as.interpolate(as.forward(gt),as.forward(Rt),ct))},uo.prototype.eachChild=function(C){C(this.input);for(var N=0,te=this.outputs;N<te.length;N+=1){var pe=te[N];C(pe)}},uo.prototype.outputDefined=function(){return this.outputs.every(function(C){return C.outputDefined()})},uo.prototype.serialize=function(){var C;this.interpolation.name==="linear"?C=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?C=["linear"]:C=["exponential",this.interpolation.base]:C=["cubic-bezier"].concat(this.interpolation.controlPoints);for(var N=[this.operator,C,this.input.serialize()],te=0;te<this.labels.length;te++)N.push(this.labels[te],this.outputs[te].serialize());return N};function ju(E,C,N,te){var pe=te-N,be=E-N;return pe===0?0:C===1?be/pe:(Math.pow(C,be)-1)/(Math.pow(C,pe)-1)}var hs=function(C,N){this.type=C,this.args=N};hs.parse=function(C,N){if(C.length<2)return N.error("Expectected at least one argument.");var te=null,pe=N.expectedType;pe&&pe.kind!=="value"&&(te=pe);for(var be=[],Se=0,Fe=C.slice(1);Se<Fe.length;Se+=1){var tt=Fe[Se],ct=N.parse(tt,1+be.length,te,void 0,{typeAnnotation:"omit"});if(!ct)return null;te=te||ct.type,be.push(ct)}var gt=pe&&be.some(function(Rt){return Xs(pe,Rt.type)});return gt?new hs(ka,be):new hs(te,be)},hs.prototype.evaluate=function(C){for(var N=null,te=0,pe,be=0,Se=this.args;be<Se.length;be+=1){var Fe=Se[be];if(te++,N=Fe.evaluate(C),N&&N instanceof So&&!N.available&&(pe||(pe=N.name),N=null,te===this.args.length&&(N=pe)),N!==null)break}return N},hs.prototype.eachChild=function(C){this.args.forEach(C)},hs.prototype.outputDefined=function(){return this.args.every(function(C){return C.outputDefined()})},hs.prototype.serialize=function(){var C=["coalesce"];return this.eachChild(function(N){C.push(N.serialize())}),C};var Js=function(C,N){this.type=N.type,this.bindings=[].concat(C),this.result=N};Js.prototype.evaluate=function(C){return this.result.evaluate(C)},Js.prototype.eachChild=function(C){for(var N=0,te=this.bindings;N<te.length;N+=1){var pe=te[N];C(pe[1])}C(this.result)},Js.parse=function(C,N){if(C.length<4)return N.error("Expected at least 3 arguments, but found "+(C.length-1)+" instead.");for(var te=[],pe=1;pe<C.length-1;pe+=2){var be=C[pe];if(typeof be!="string")return N.error("Expected string, but found "+typeof be+" instead.",pe);if(/[^a-zA-Z0-9_]/.test(be))return N.error("Variable names must contain only alphanumeric characters or '_'.",pe);var Se=N.parse(C[pe+1],pe+1);if(!Se)return null;te.push([be,Se])}var Fe=N.parse(C[C.length-1],C.length-1,N.expectedType,te);return Fe?new Js(te,Fe):null},Js.prototype.outputDefined=function(){return this.result.outputDefined()},Js.prototype.serialize=function(){for(var C=["let"],N=0,te=this.bindings;N<te.length;N+=1){var pe=te[N],be=pe[0],Se=pe[1];C.push(be,Se.serialize())}return C.push(this.result.serialize()),C};var Qs=function(C,N,te){this.type=C,this.index=N,this.input=te};Qs.parse=function(C,N){if(C.length!==3)return N.error("Expected 2 arguments, but found "+(C.length-1)+" instead.");var te=N.parse(C[1],1,pn),pe=N.parse(C[2],2,eo(N.expectedType||ka));if(!te||!pe)return null;var be=pe.type;return new Qs(be.itemType,te,pe)},Qs.prototype.evaluate=function(C){var N=this.index.evaluate(C),te=this.input.evaluate(C);if(N<0)throw new Fi("Array index out of bounds: "+N+" < 0.");if(N>=te.length)throw new Fi("Array index out of bounds: "+N+" > "+(te.length-1)+".");if(N!==Math.floor(N))throw new Fi("Array index must be an integer, but found "+N+" instead.");return te[N]},Qs.prototype.eachChild=function(C){C(this.index),C(this.input)},Qs.prototype.outputDefined=function(){return!1},Qs.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var zs=function(C,N){this.type=Yn,this.needle=C,this.haystack=N};zs.parse=function(C,N){if(C.length!==3)return N.error("Expected 2 arguments, but found "+(C.length-1)+" instead.");var te=N.parse(C[1],1,ka),pe=N.parse(C[2],2,ka);return!te||!pe?null:ts(te.type,[Yn,In,pn,Hn,ka])?new zs(te,pe):N.error("Expected first argument to be of type boolean, string, number or null, but found "+Pi(te.type)+" instead")},zs.prototype.evaluate=function(C){var N=this.needle.evaluate(C),te=this.haystack.evaluate(C);if(!te)return!1;if(!Ml(N,["boolean","string","number","null"]))throw new Fi("Expected first argument to be of type boolean, string, number or null, but found "+Pi(Di(N))+" instead.");if(!Ml(te,["string","array"]))throw new Fi("Expected second argument to be of type array or string, but found "+Pi(Di(te))+" instead.");return te.indexOf(N)>=0},zs.prototype.eachChild=function(C){C(this.needle),C(this.haystack)},zs.prototype.outputDefined=function(){return!0},zs.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var vs=function(C,N,te){this.type=pn,this.needle=C,this.haystack=N,this.fromIndex=te};vs.parse=function(C,N){if(C.length<=2||C.length>=5)return N.error("Expected 3 or 4 arguments, but found "+(C.length-1)+" instead.");var te=N.parse(C[1],1,ka),pe=N.parse(C[2],2,ka);if(!te||!pe)return null;if(!ts(te.type,[Yn,In,pn,Hn,ka]))return N.error("Expected first argument to be of type boolean, string, number or null, but found "+Pi(te.type)+" instead");if(C.length===4){var be=N.parse(C[3],3,pn);return be?new vs(te,pe,be):null}else return new vs(te,pe)},vs.prototype.evaluate=function(C){var N=this.needle.evaluate(C),te=this.haystack.evaluate(C);if(!Ml(N,["boolean","string","number","null"]))throw new Fi("Expected first argument to be of type boolean, string, number or null, but found "+Pi(Di(N))+" instead.");if(!Ml(te,["string","array"]))throw new Fi("Expected second argument to be of type array or string, but found "+Pi(Di(te))+" instead.");if(this.fromIndex){var pe=this.fromIndex.evaluate(C);return te.indexOf(N,pe)}return te.indexOf(N)},vs.prototype.eachChild=function(C){C(this.needle),C(this.haystack),this.fromIndex&&C(this.fromIndex)},vs.prototype.outputDefined=function(){return!1},vs.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var C=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),C]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Hi=function(C,N,te,pe,be,Se){this.inputType=C,this.type=N,this.input=te,this.cases=pe,this.outputs=be,this.otherwise=Se};Hi.parse=function(C,N){if(C.length<5)return N.error("Expected at least 4 arguments, but found only "+(C.length-1)+".");if(C.length%2!==1)return N.error("Expected an even number of arguments.");var te,pe;N.expectedType&&N.expectedType.kind!=="value"&&(pe=N.expectedType);for(var be={},Se=[],Fe=2;Fe<C.length-1;Fe+=2){var tt=C[Fe],ct=C[Fe+1];Array.isArray(tt)||(tt=[tt]);var gt=N.concat(Fe);if(tt.length===0)return gt.error("Expected at least one branch label.");for(var Rt=0,jt=tt;Rt<jt.length;Rt+=1){var Gt=jt[Rt];if(typeof Gt!="number"&&typeof Gt!="string")return gt.error("Branch labels must be numbers or strings.");if(typeof Gt=="number"&&Math.abs(Gt)>Number.MAX_SAFE_INTEGER)return gt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Gt=="number"&&Math.floor(Gt)!==Gt)return gt.error("Numeric branch labels must be integer values.");if(!te)te=Di(Gt);else if(gt.checkSubtype(te,Di(Gt)))return null;if(typeof be[String(Gt)]!="undefined")return gt.error("Branch labels must be unique.");be[String(Gt)]=Se.length}var lr=N.parse(ct,Fe,pe);if(!lr)return null;pe=pe||lr.type,Se.push(lr)}var Ir=N.parse(C[1],1,ka);if(!Ir)return null;var un=N.parse(C[C.length-1],C.length-1,pe);return!un||Ir.type.kind!=="value"&&N.concat(1).checkSubtype(te,Ir.type)?null:new Hi(te,pe,Ir,be,Se,un)},Hi.prototype.evaluate=function(C){var N=this.input.evaluate(C),te=Di(N)===this.inputType&&this.outputs[this.cases[N]]||this.otherwise;return te.evaluate(C)},Hi.prototype.eachChild=function(C){C(this.input),this.outputs.forEach(C),C(this.otherwise)},Hi.prototype.outputDefined=function(){return this.outputs.every(function(C){return C.outputDefined()})&&this.otherwise.outputDefined()},Hi.prototype.serialize=function(){for(var C=this,N=["match",this.input.serialize()],te=Object.keys(this.cases).sort(),pe=[],be={},Se=0,Fe=te;Se<Fe.length;Se+=1){var tt=Fe[Se],ct=be[this.cases[tt]];ct===void 0?(be[this.cases[tt]]=pe.length,pe.push([this.cases[tt],[tt]])):pe[ct][1].push(tt)}for(var gt=function(Ir){return C.inputType.kind==="number"?Number(Ir):Ir},Rt=0,jt=pe;Rt<jt.length;Rt+=1){var Gt=jt[Rt],ct=Gt[0],lr=Gt[1];lr.length===1?N.push(gt(lr[0])):N.push(lr.map(gt)),N.push(this.outputs[outputIndex$1].serialize())}return N.push(this.otherwise.serialize()),N};var Co=function(C,N,te){this.type=C,this.branches=N,this.otherwise=te};Co.parse=function(C,N){if(C.length<4)return N.error("Expected at least 3 arguments, but found only "+(C.length-1)+".");if(C.length%2!==0)return N.error("Expected an odd number of arguments.");var te;N.expectedType&&N.expectedType.kind!=="value"&&(te=N.expectedType);for(var pe=[],be=1;be<C.length-1;be+=2){var Se=N.parse(C[be],be,Yn);if(!Se)return null;var Fe=N.parse(C[be+1],be+1,te);if(!Fe)return null;pe.push([Se,Fe]),te=te||Fe.type}var tt=N.parse(C[C.length-1],C.length-1,te);return tt?new Co(te,pe,tt):null},Co.prototype.evaluate=function(C){for(var N=0,te=this.branches;N<te.length;N+=1){var pe=te[N],be=pe[0],Se=pe[1];if(be.evaluate(C))return Se.evaluate(C)}return this.otherwise.evaluate(C)},Co.prototype.eachChild=function(C){for(var N=0,te=this.branches;N<te.length;N+=1){var pe=te[N],be=pe[0],Se=pe[1];C(be),C(Se)}C(this.otherwise)},Co.prototype.outputDefined=function(){return this.branches.every(function(C){C[0];var N=C[1];return N.outputDefined()})&&this.otherwise.outputDefined()},Co.prototype.serialize=function(){var C=["case"];return this.eachChild(function(N){C.push(N.serialize())}),C};var ps=function(C,N,te,pe){this.type=C,this.input=N,this.beginIndex=te,this.endIndex=pe};ps.parse=function(C,N){if(C.length<=2||C.length>=5)return N.error("Expected 3 or 4 arguments, but found "+(C.length-1)+" instead.");var te=N.parse(C[1],1,ka),pe=N.parse(C[2],2,pn);if(!te||!pe)return null;if(!ts(te.type,[eo(ka),In,ka]))return N.error("Expected first argument to be of type array or string, but found "+Pi(te.type)+" instead");if(C.length===4){var be=N.parse(C[3],3,pn);return be?new ps(te.type,te,pe,be):null}else return new ps(te.type,te,pe)},ps.prototype.evaluate=function(C){var N=this.input.evaluate(C),te=this.beginIndex.evaluate(C);if(!Ml(N,["string","array"]))throw new Fi("Expected first argument to be of type array or string, but found "+Pi(Di(N))+" instead.");if(this.endIndex){var pe=this.endIndex.evaluate(C);return N.slice(te,pe)}return N.slice(te)},ps.prototype.eachChild=function(C){C(this.input),C(this.beginIndex),this.endIndex&&C(this.endIndex)},ps.prototype.outputDefined=function(){return!1},ps.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var C=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),C]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};function Zu(E,C){return E==="=="||E==="!="?C.kind==="boolean"||C.kind==="string"||C.kind==="number"||C.kind==="null"||C.kind==="value":C.kind==="string"||C.kind==="number"||C.kind==="value"}function fu(E,C,N){return C===N}function Ku(E,C,N){return C!==N}function mt(E,C,N){return C<N}function It(E,C,N){return C>N}function nr(E,C,N){return C<=N}function Jt(E,C,N){return C>=N}function Cr(E,C,N,te){return te.compare(C,N)===0}function on(E,C,N,te){return!Cr(E,C,N,te)}function yn(E,C,N,te){return te.compare(C,N)<0}function Tn(E,C,N,te){return te.compare(C,N)>0}function Cn(E,C,N,te){return te.compare(C,N)<=0}function Vn(E,C,N,te){return te.compare(C,N)>=0}function xn(E,C,N){var te=E!=="=="&&E!=="!=";return function(){function pe(be,Se,Fe){this.type=Yn,this.lhs=be,this.rhs=Se,this.collator=Fe,this.hasUntypedArgument=be.type.kind==="value"||Se.type.kind==="value"}return pe.parse=function(Se,Fe){if(Se.length!==3&&Se.length!==4)return Fe.error("Expected two or three arguments.");var tt=Se[0],ct=Fe.parse(Se[1],1,ka);if(!ct)return null;if(!Zu(tt,ct.type))return Fe.concat(1).error('"'+tt+`" comparisons are not supported for type '`+Pi(ct.type)+"'.");var gt=Fe.parse(Se[2],2,ka);if(!gt)return null;if(!Zu(tt,gt.type))return Fe.concat(2).error('"'+tt+`" comparisons are not supported for type '`+Pi(gt.type)+"'.");if(ct.type.kind!==gt.type.kind&&ct.type.kind!=="value"&&gt.type.kind!=="value")return Fe.error("Cannot compare types '"+Pi(ct.type)+"' and '"+Pi(gt.type)+"'.");te&&(ct.type.kind==="value"&&gt.type.kind!=="value"?ct=new Qi(gt.type,[ct]):ct.type.kind!=="value"&&gt.type.kind==="value"&&(gt=new Qi(ct.type,[gt])));var Rt=null;if(Se.length===4){if(ct.type.kind!=="string"&&gt.type.kind!=="string"&&ct.type.kind!=="value"&&gt.type.kind!=="value")return Fe.error("Cannot use collator to compare non-string types.");if(Rt=Fe.parse(Se[3],3,No),!Rt)return null}return new pe(ct,gt,Rt)},pe.prototype.evaluate=function(Se){var Fe=this.lhs.evaluate(Se),tt=this.rhs.evaluate(Se);if(te&&this.hasUntypedArgument){var ct=Di(Fe),gt=Di(tt);if(ct.kind!==gt.kind||!(ct.kind==="string"||ct.kind==="number"))throw new Fi('Expected arguments for "'+E+'" to be (string, string) or (number, number), but found ('+ct.kind+", "+gt.kind+") instead.")}if(this.collator&&!te&&this.hasUntypedArgument){var Rt=Di(Fe),jt=Di(tt);if(Rt.kind!=="string"||jt.kind!=="string")return C(Se,Fe,tt)}return this.collator?N(Se,Fe,tt,this.collator.evaluate(Se)):C(Se,Fe,tt)},pe.prototype.eachChild=function(Se){Se(this.lhs),Se(this.rhs),this.collator&&Se(this.collator)},pe.prototype.outputDefined=function(){return!0},pe.prototype.serialize=function(){var Se=[E];return this.eachChild(function(Fe){Se.push(Fe.serialize())}),Se},pe}()}var zn=xn("==",fu,Cr),Ln=xn("!=",Ku,on),Wn=xn("<",mt,yn),$n=xn(">",It,Tn),Oa=xn("<=",nr,Cn),La=xn(">=",Jt,Vn),Na=function(C,N,te,pe,be){this.type=In,this.number=C,this.locale=N,this.currency=te,this.minFractionDigits=pe,this.maxFractionDigits=be};Na.parse=function(C,N){if(C.length!==3)return N.error("Expected two arguments.");var te=N.parse(C[1],1,pn);if(!te)return null;var pe=C[2];if(typeof pe!="object"||Array.isArray(pe))return N.error("NumberFormat options argument must be an object.");var be=null;if(pe.locale&&(be=N.parse(pe.locale,1,In),!be))return null;var Se=null;if(pe.currency&&(Se=N.parse(pe.currency,1,In),!Se))return null;var Fe=null;if(pe["min-fraction-digits"]&&(Fe=N.parse(pe["min-fraction-digits"],1,pn),!Fe))return null;var tt=null;return pe["max-fraction-digits"]&&(tt=N.parse(pe["max-fraction-digits"],1,pn),!tt)?null:new Na(te,be,Se,Fe,tt)},Na.prototype.evaluate=function(C){return new Intl.NumberFormat(this.locale?this.locale.evaluate(C):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(C):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(C):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(C):void 0}).format(this.number.evaluate(C))},Na.prototype.eachChild=function(C){C(this.number),this.locale&&C(this.locale),this.currency&&C(this.currency),this.minFractionDigits&&C(this.minFractionDigits),this.maxFractionDigits&&C(this.maxFractionDigits)},Na.prototype.outputDefined=function(){return!1},Na.prototype.serialize=function(){var C={};return this.locale&&(C.locale=this.locale.serialize()),this.currency&&(C.currency=this.currency.serialize()),this.minFractionDigits&&(C["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(C["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),C]};var Ba=function(C){this.type=pn,this.input=C};Ba.parse=function(C,N){if(C.length!==2)return N.error("Expected 1 argument, but found "+(C.length-1)+" instead.");var te=N.parse(C[1],1);return te?te.type.kind!=="array"&&te.type.kind!=="string"&&te.type.kind!=="value"?N.error("Expected argument of type string or array, but found "+Pi(te.type)+" instead."):new Ba(te):null},Ba.prototype.evaluate=function(C){var N=this.input.evaluate(C);if(typeof N=="string")return N.length;if(Array.isArray(N))return N.length;throw new Fi("Expected value to be of type string or array, but found "+Pi(Di(N))+" instead.")},Ba.prototype.eachChild=function(C){C(this.input)},Ba.prototype.outputDefined=function(){return!1},Ba.prototype.serialize=function(){var C=["length"];return this.eachChild(function(N){C.push(N.serialize())}),C};var Jn={"==":zn,"!=":Ln,">":$n,"<":Wn,">=":La,"<=":Oa,array:Qi,at:Qs,boolean:Qi,case:Co,coalesce:hs,collator:Ks,format:us,image:sl,in:zs,"index-of":vs,interpolate:uo,"interpolate-hcl":uo,"interpolate-lab":uo,length:Ba,let:Js,literal:Ji,match:Hi,number:Qi,"number-format":Na,object:Qi,slice:ps,step:Is,string:Qi,"to-boolean":rs,"to-color":rs,"to-number":rs,"to-string":rs,var:Ts,within:ns};function pa(E,C){var N=C[0],te=C[1],pe=C[2],be=C[3];N=N.evaluate(E),te=te.evaluate(E),pe=pe.evaluate(E);var Se=be?be.evaluate(E):1,Fe=Bl(N,te,pe,Se);if(Fe)throw new Fi(Fe);return new hi(N/255*Se,te/255*Se,pe/255*Se,Se)}function Ya(E,C){return E in C}function Qa(E,C){var N=C[E];return typeof N=="undefined"?null:N}function pi(E,C,N,te){for(;N<=te;){var pe=N+te>>1;if(C[pe]===E)return!0;C[pe]>E?te=pe-1:N=pe+1}return!1}function di(E){return{type:E}}ko.register(Jn,{error:[Ys,[In],function(E,C){var N=C[0];throw new Fi(N.evaluate(E))}],typeof:[In,[ka],function(E,C){var N=C[0];return Pi(Di(N.evaluate(E)))}],"to-rgba":[eo(pn,4),[ua],function(E,C){var N=C[0];return N.evaluate(E).toArray()}],rgb:[ua,[pn,pn,pn],pa],rgba:[ua,[pn,pn,pn,pn],pa],has:{type:Yn,overloads:[[[In],function(E,C){var N=C[0];return Ya(N.evaluate(E),E.properties())}],[[In,Ha],function(E,C){var N=C[0],te=C[1];return Ya(N.evaluate(E),te.evaluate(E))}]]},get:{type:ka,overloads:[[[In],function(E,C){var N=C[0];return Qa(N.evaluate(E),E.properties())}],[[In,Ha],function(E,C){var N=C[0],te=C[1];return Qa(N.evaluate(E),te.evaluate(E))}]]},"feature-state":[ka,[In],function(E,C){var N=C[0];return Qa(N.evaluate(E),E.featureState||{})}],properties:[Ha,[],function(E){return E.properties()}],"geometry-type":[In,[],function(E){return E.geometryType()}],id:[ka,[],function(E){return E.id()}],zoom:[pn,[],function(E){return E.globals.zoom}],"heatmap-density":[pn,[],function(E){return E.globals.heatmapDensity||0}],"line-progress":[pn,[],function(E){return E.globals.lineProgress||0}],accumulated:[ka,[],function(E){return E.globals.accumulated===void 0?null:E.globals.accumulated}],"+":[pn,di(pn),function(E,C){for(var N=0,te=0,pe=C;te<pe.length;te+=1){var be=pe[te];N+=be.evaluate(E)}return N}],"*":[pn,di(pn),function(E,C){for(var N=1,te=0,pe=C;te<pe.length;te+=1){var be=pe[te];N*=be.evaluate(E)}return N}],"-":{type:pn,overloads:[[[pn,pn],function(E,C){var N=C[0],te=C[1];return N.evaluate(E)-te.evaluate(E)}],[[pn],function(E,C){var N=C[0];return-N.evaluate(E)}]]},"/":[pn,[pn,pn],function(E,C){var N=C[0],te=C[1];return N.evaluate(E)/te.evaluate(E)}],"%":[pn,[pn,pn],function(E,C){var N=C[0],te=C[1];return N.evaluate(E)%te.evaluate(E)}],ln2:[pn,[],function(){return Math.LN2}],pi:[pn,[],function(){return Math.PI}],e:[pn,[],function(){return Math.E}],"^":[pn,[pn,pn],function(E,C){var N=C[0],te=C[1];return Math.pow(N.evaluate(E),te.evaluate(E))}],sqrt:[pn,[pn],function(E,C){var N=C[0];return Math.sqrt(N.evaluate(E))}],log10:[pn,[pn],function(E,C){var N=C[0];return Math.log(N.evaluate(E))/Math.LN10}],ln:[pn,[pn],function(E,C){var N=C[0];return Math.log(N.evaluate(E))}],log2:[pn,[pn],function(E,C){var N=C[0];return Math.log(N.evaluate(E))/Math.LN2}],sin:[pn,[pn],function(E,C){var N=C[0];return Math.sin(N.evaluate(E))}],cos:[pn,[pn],function(E,C){var N=C[0];return Math.cos(N.evaluate(E))}],tan:[pn,[pn],function(E,C){var N=C[0];return Math.tan(N.evaluate(E))}],asin:[pn,[pn],function(E,C){var N=C[0];return Math.asin(N.evaluate(E))}],acos:[pn,[pn],function(E,C){var N=C[0];return Math.acos(N.evaluate(E))}],atan:[pn,[pn],function(E,C){var N=C[0];return Math.atan(N.evaluate(E))}],min:[pn,di(pn),function(E,C){return Math.min.apply(Math,C.map(function(N){return N.evaluate(E)}))}],max:[pn,di(pn),function(E,C){return Math.max.apply(Math,C.map(function(N){return N.evaluate(E)}))}],abs:[pn,[pn],function(E,C){var N=C[0];return Math.abs(N.evaluate(E))}],round:[pn,[pn],function(E,C){var N=C[0],te=N.evaluate(E);return te<0?-Math.round(-te):Math.round(te)}],floor:[pn,[pn],function(E,C){var N=C[0];return Math.floor(N.evaluate(E))}],ceil:[pn,[pn],function(E,C){var N=C[0];return Math.ceil(N.evaluate(E))}],"filter-==":[Yn,[In,ka],function(E,C){var N=C[0],te=C[1];return E.properties()[N.value]===te.value}],"filter-id-==":[Yn,[ka],function(E,C){var N=C[0];return E.id()===N.value}],"filter-type-==":[Yn,[In],function(E,C){var N=C[0];return E.geometryType()===N.value}],"filter-<":[Yn,[In,ka],function(E,C){var N=C[0],te=C[1],pe=E.properties()[N.value],be=te.value;return typeof pe==typeof be&&pe<be}],"filter-id-<":[Yn,[ka],function(E,C){var N=C[0],te=E.id(),pe=N.value;return typeof te==typeof pe&&te<pe}],"filter->":[Yn,[In,ka],function(E,C){var N=C[0],te=C[1],pe=E.properties()[N.value],be=te.value;return typeof pe==typeof be&&pe>be}],"filter-id->":[Yn,[ka],function(E,C){var N=C[0],te=E.id(),pe=N.value;return typeof te==typeof pe&&te>pe}],"filter-<=":[Yn,[In,ka],function(E,C){var N=C[0],te=C[1],pe=E.properties()[N.value],be=te.value;return typeof pe==typeof be&&pe<=be}],"filter-id-<=":[Yn,[ka],function(E,C){var N=C[0],te=E.id(),pe=N.value;return typeof te==typeof pe&&te<=pe}],"filter->=":[Yn,[In,ka],function(E,C){var N=C[0],te=C[1],pe=E.properties()[N.value],be=te.value;return typeof pe==typeof be&&pe>=be}],"filter-id->=":[Yn,[ka],function(E,C){var N=C[0],te=E.id(),pe=N.value;return typeof te==typeof pe&&te>=pe}],"filter-has":[Yn,[ka],function(E,C){var N=C[0];return N.value in E.properties()}],"filter-has-id":[Yn,[],function(E){return E.id()!==null&&E.id()!==void 0}],"filter-type-in":[Yn,[eo(In)],function(E,C){var N=C[0];return N.value.indexOf(E.geometryType())>=0}],"filter-id-in":[Yn,[eo(ka)],function(E,C){var N=C[0];return N.value.indexOf(E.id())>=0}],"filter-in-small":[Yn,[In,eo(ka)],function(E,C){var N=C[0],te=C[1];return te.value.indexOf(E.properties()[N.value])>=0}],"filter-in-large":[Yn,[In,eo(ka)],function(E,C){var N=C[0],te=C[1];return pi(E.properties()[N.value],te.value,0,te.value.length-1)}],all:{type:Yn,overloads:[[[Yn,Yn],function(E,C){var N=C[0],te=C[1];return N.evaluate(E)&&te.evaluate(E)}],[di(Yn),function(E,C){for(var N=0,te=C;N<te.length;N+=1){var pe=te[N];if(!pe.evaluate(E))return!1}return!0}]]},any:{type:Yn,overloads:[[[Yn,Yn],function(E,C){var N=C[0],te=C[1];return N.evaluate(E)||te.evaluate(E)}],[di(Yn),function(E,C){for(var N=0,te=C;N<te.length;N+=1){var pe=te[N];if(pe.evaluate(E))return!0}return!1}]]},"!":[Yn,[Yn],function(E,C){var N=C[0];return!N.evaluate(E)}],"is-supported-script":[Yn,[In],function(E,C){var N=C[0],te=E.globals&&E.globals.isSupportedScript;return te?te(N.evaluate(E)):!0}],upcase:[In,[In],function(E,C){var N=C[0];return N.evaluate(E).toUpperCase()}],downcase:[In,[In],function(E,C){var N=C[0];return N.evaluate(E).toLowerCase()}],concat:[In,di(ka),function(E,C){return C.map(function(N){return Sl(N.evaluate(E))}).join("")}],"resolved-locale":[In,[No],function(E,C){var N=C[0];return N.evaluate(E).resolvedLocale()}]});function yi(E){return{result:"success",value:E}}function Ti(E){return{result:"error",value:E}}function oi(E){return E["property-type"]==="data-driven"||E["property-type"]==="cross-faded-data-driven"}function mo(E){return!!E.expression&&E.expression.parameters.indexOf("zoom")>-1}function to(E){return!!E.expression&&E.expression.interpolated}function Ka(E){return E instanceof Number?"number":E instanceof String?"string":E instanceof Boolean?"boolean":Array.isArray(E)?"array":E===null?"null":typeof E}function ga(E){return typeof E=="object"&&E!==null&&!Array.isArray(E)}function mi(E){return E}function fo(E,C){var N=C.type==="color",te=E.stops&&typeof E.stops[0][0]=="object",pe=te||E.property!==void 0,be=te||!pe,Se=E.type||(to(C)?"exponential":"interval");if(N&&(E=jr({},E),E.stops&&(E.stops=E.stops.map(function(na){return[na[0],hi.parse(na[1])]})),E.default?E.default=hi.parse(E.default):E.default=hi.parse(C.default)),E.colorSpace&&E.colorSpace!=="rgb"&&!jl[E.colorSpace])throw new Error("Unknown color space: "+E.colorSpace);var Fe,tt,ct;if(Se==="exponential")Fe=Bo;else if(Se==="interval")Fe=Fs;else if(Se==="categorical"){Fe=ds,tt=Object.create(null);for(var gt=0,Rt=E.stops;gt<Rt.length;gt+=1){var jt=Rt[gt];tt[jt[0]]=jt[1]}ct=typeof E.stops[0][0]}else if(Se==="identity")Fe=pl;else throw new Error('Unknown function type "'+Se+'"');if(te){for(var Gt={},lr=[],Ir=0;Ir<E.stops.length;Ir++){var un=E.stops[Ir],qr=un[0].zoom;Gt[qr]===void 0&&(Gt[qr]={zoom:qr,type:E.type,property:E.property,default:E.default,stops:[]},lr.push(qr)),Gt[qr].stops.push([un[0].value,un[1]])}for(var Mn=[],bn=0,An=lr;bn<An.length;bn+=1){var Dn=An[bn];Mn.push([Gt[Dn].zoom,fo(Gt[Dn],C)])}var Xn={name:"linear"};return{kind:"composite",interpolationType:Xn,interpolationFactor:uo.interpolationFactor.bind(void 0,Xn),zoomStops:Mn.map(function(na){return na[0]}),evaluate:function(za,Ta){var Sa=za.zoom;return Bo({stops:Mn,base:E.base},C,Sa).evaluate(Sa,Ta)}}}else if(be){var sa=Se==="exponential"?{name:"exponential",base:E.base!==void 0?E.base:1}:null;return{kind:"camera",interpolationType:sa,interpolationFactor:uo.interpolationFactor.bind(void 0,sa),zoomStops:E.stops.map(function(na){return na[0]}),evaluate:function(na){var za=na.zoom;return Fe(E,C,za,tt,ct)}}}else return{kind:"source",evaluate:function(za,Ta){var Sa=Ta&&Ta.properties?Ta.properties[E.property]:void 0;return Sa===void 0?po(E.default,C.default):Fe(E,C,Sa,tt,ct)}}}function po(E,C,N){if(E!==void 0)return E;if(C!==void 0)return C;if(N!==void 0)return N}function ds(E,C,N,te,pe){var be=typeof N===pe?te[N]:void 0;return po(be,E.default,C.default)}function Fs(E,C,N){if(Ka(N)!=="number")return po(E.default,C.default);var te=E.stops.length;if(te===1||N<=E.stops[0][0])return E.stops[0][1];if(N>=E.stops[te-1][0])return E.stops[te-1][1];var pe=Rs(E.stops.map(function(be){return be[0]}),N);return E.stops[pe][1]}function Bo(E,C,N){var te=E.base!==void 0?E.base:1;if(Ka(N)!=="number")return po(E.default,C.default);var pe=E.stops.length;if(pe===1||N<=E.stops[0][0])return E.stops[0][1];if(N>=E.stops[pe-1][0])return E.stops[pe-1][1];var be=Rs(E.stops.map(function(Rt){return Rt[0]}),N),Se=Ms(N,te,E.stops[be][0],E.stops[be+1][0]),Fe=E.stops[be][1],tt=E.stops[be+1][1],ct=fl[C.type]||mi;if(E.colorSpace&&E.colorSpace!=="rgb"){var gt=jl[E.colorSpace];ct=function(Rt,jt){return gt.reverse(gt.interpolate(gt.forward(Rt),gt.forward(jt),Se))}}return typeof Fe.evaluate=="function"?{evaluate:function(){for(var jt=[],Gt=arguments.length;Gt--;)jt[Gt]=arguments[Gt];var lr=Fe.evaluate.apply(void 0,jt),Ir=tt.evaluate.apply(void 0,jt);if(!(lr===void 0||Ir===void 0))return ct(lr,Ir,Se)}}:ct(Fe,tt,Se)}function pl(E,C,N){return C.type==="color"?N=hi.parse(N):C.type==="formatted"?N=Ui.fromString(N.toString()):C.type==="resolvedImage"?N=So.fromString(N.toString()):Ka(N)!==C.type&&(C.type!=="enum"||!C.values[N])&&(N=void 0),po(N,E.default,C.default)}function Ms(E,C,N,te){var pe=te-N,be=E-N;return pe===0?0:C===1?be/pe:(Math.pow(C,be)-1)/(Math.pow(C,pe)-1)}var gs=function(C,N){this.expression=C,this._warningHistory={},this._evaluator=new Zs,this._defaultValue=N?yf(N):null,this._enumValues=N&&N.type==="enum"?N.values:null};gs.prototype.evaluateWithoutErrorHandling=function(C,N,te,pe,be,Se){return this._evaluator.globals=C,this._evaluator.feature=N,this._evaluator.featureState=te,this._evaluator.canonical=pe,this._evaluator.availableImages=be||null,this._evaluator.formattedSection=Se,this.expression.evaluate(this._evaluator)},gs.prototype.evaluate=function(C,N,te,pe,be,Se){this._evaluator.globals=C,this._evaluator.feature=N||null,this._evaluator.featureState=te||null,this._evaluator.canonical=pe,this._evaluator.availableImages=be||null,this._evaluator.formattedSection=Se||null;try{var Fe=this.expression.evaluate(this._evaluator);if(Fe==null||typeof Fe=="number"&&Fe!==Fe)return this._defaultValue;if(this._enumValues&&!(Fe in this._enumValues))throw new Fi("Expected value to be one of "+Object.keys(this._enumValues).map(function(tt){return JSON.stringify(tt)}).join(", ")+", but found "+JSON.stringify(Fe)+" instead.");return Fe}catch(tt){return this._warningHistory[tt.message]||(this._warningHistory[tt.message]=!0,typeof console!="undefined"&&console.warn(tt.message)),this._defaultValue}};function xo(E){return Array.isArray(E)&&E.length>0&&typeof E[0]=="string"&&E[0]in Jn}function cu(E,C){var N=new Eo(Jn,[],C?Qu(C):void 0),te=N.parse(E,void 0,void 0,void 0,C&&C.type==="string"?{typeAnnotation:"coerce"}:void 0);return te?yi(new gs(te,C)):Ti(N.errors)}var Su=function(C,N){this.kind=C,this._styleExpression=N,this.isStateDependent=C!=="constant"&&!Cl(N.expression)};Su.prototype.evaluateWithoutErrorHandling=function(C,N,te,pe,be,Se){return this._styleExpression.evaluateWithoutErrorHandling(C,N,te,pe,be,Se)},Su.prototype.evaluate=function(C,N,te,pe,be,Se){return this._styleExpression.evaluate(C,N,te,pe,be,Se)};var ys=function(C,N,te,pe){this.kind=C,this.zoomStops=te,this._styleExpression=N,this.isStateDependent=C!=="camera"&&!Cl(N.expression),this.interpolationType=pe};ys.prototype.evaluateWithoutErrorHandling=function(C,N,te,pe,be,Se){return this._styleExpression.evaluateWithoutErrorHandling(C,N,te,pe,be,Se)},ys.prototype.evaluate=function(C,N,te,pe,be,Se){return this._styleExpression.evaluate(C,N,te,pe,be,Se)},ys.prototype.interpolationFactor=function(C,N,te){return this.interpolationType?uo.interpolationFactor(this.interpolationType,C,N,te):0};function Ju(E,C){if(E=cu(E,C),E.result==="error")return E;var N=E.value.expression,te=El(N);if(!te&&!oi(C))return Ti([new aa("","data expressions not supported")]);var pe=Au(N,["zoom"]);if(!pe&&!mo(C))return Ti([new aa("","zoom expressions not supported")]);var be=gf(N);if(!be&&!pe)return Ti([new aa("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(be instanceof aa)return Ti([be]);if(be instanceof uo&&!to(C))return Ti([new aa("",'"interpolate" expressions cannot be used with this property')]);if(!be)return yi(te?new Su("constant",E.value):new Su("source",E.value));var Se=be instanceof uo?be.interpolation:void 0;return yi(te?new ys("camera",E.value,be.labels,Se):new ys("composite",E.value,be.labels,Se))}var hu=function(C,N){this._parameters=C,this._specification=N,jr(this,fo(this._parameters,this._specification))};hu.deserialize=function(C){return new hu(C._parameters,C._specification)},hu.serialize=function(C){return{_parameters:C._parameters,_specification:C._specification}};function Lc(E,C){if(ga(E))return new hu(E,C);if(xo(E)){var N=Ju(E,C);if(N.result==="error")throw new Error(N.value.map(function(pe){return pe.key+": "+pe.message}).join(", "));return N.value}else{var te=E;return typeof E=="string"&&C.type==="color"&&(te=hi.parse(E)),{kind:"constant",evaluate:function(){return te}}}}function gf(E){var C=null;if(E instanceof Js)C=gf(E.result);else if(E instanceof hs)for(var N=0,te=E.args;N<te.length;N+=1){var pe=te[N];if(C=gf(pe),C)break}else(E instanceof Is||E instanceof uo)&&E.input instanceof ko&&E.input.name==="zoom"&&(C=E);return C instanceof aa||E.eachChild(function(be){var Se=gf(be);Se instanceof aa?C=Se:!C&&Se?C=new aa("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):C&&Se&&C!==Se&&(C=new aa("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),C}function Qu(E){var C={color:ua,string:In,number:pn,enum:In,boolean:Yn,formatted:es,resolvedImage:Ls};return E.type==="array"?eo(C[E.value]||ka,E.length):C[E.type]}function yf(E){return E.type==="color"&&ga(E.default)?new hi(0,0,0,0):E.type==="color"?hi.parse(E.default)||null:E.default===void 0?null:E.default}function Os(E){var C=E.key,N=E.value,te=E.valueSpec||{},pe=E.objectElementValidators||{},be=E.style,Se=E.styleSpec,Fe=[],tt=Ka(N);if(tt!=="object")return[new rr(C,N,"object expected, "+tt+" found")];for(var ct in N){var gt=ct.split(".")[0],Rt=te[gt]||te["*"],jt=void 0;if(pe[gt])jt=pe[gt];else if(te[gt])jt=fi;else if(pe["*"])jt=pe["*"];else if(te["*"])jt=fi;else{Fe.push(new rr(C,N[ct],'unknown property "'+ct+'"'));continue}Fe=Fe.concat(jt({key:(C&&C+".")+ct,value:N[ct],valueSpec:Rt,style:be,styleSpec:Se,object:N,objectKey:ct},N))}for(var Gt in te)pe[Gt]||te[Gt].required&&te[Gt].default===void 0&&N[Gt]===void 0&&Fe.push(new rr(C,N,'missing required property "'+Gt+'"'));return Fe}function Of(E){var C=E.value,N=E.valueSpec,te=E.style,pe=E.styleSpec,be=E.key,Se=E.arrayElementValidator||fi;if(Ka(C)!=="array")return[new rr(be,C,"array expected, "+Ka(C)+" found")];if(N.length&&C.length!==N.length)return[new rr(be,C,"array length "+N.length+" expected, length "+C.length+" found")];if(N["min-length"]&&C.length<N["min-length"])return[new rr(be,C,"array length at least "+N["min-length"]+" expected, length "+C.length+" found")];var Fe={type:N.value,values:N.values};pe.$version<7&&(Fe.function=N.function),Ka(N.value)==="object"&&(Fe=N.value);for(var tt=[],ct=0;ct<C.length;ct++)tt=tt.concat(Se({array:C,arrayIndex:ct,value:C[ct],valueSpec:Fe,style:te,styleSpec:pe,key:be+"["+ct+"]"}));return tt}function mf(E){var C=E.key,N=E.value,te=E.valueSpec,pe=Ka(N);return pe==="number"&&N!==N&&(pe="NaN"),pe!=="number"?[new rr(C,N,"number expected, "+pe+" found")]:"minimum"in te&&N<te.minimum?[new rr(C,N,N+" is less than the minimum value "+te.minimum)]:"maximum"in te&&N>te.maximum?[new rr(C,N,N+" is greater than the maximum value "+te.maximum)]:[]}function xf(E){var C=E.valueSpec,N=Sn(E.value.type),te,pe={},be,Se,Fe=N!=="categorical"&&E.value.property===void 0,tt=!Fe,ct=Ka(E.value.stops)==="array"&&Ka(E.value.stops[0])==="array"&&Ka(E.value.stops[0][0])==="object",gt=Os({key:E.key,value:E.value,valueSpec:E.styleSpec.function,style:E.style,styleSpec:E.styleSpec,objectElementValidators:{stops:Rt,default:lr}});return N==="identity"&&Fe&&gt.push(new rr(E.key,E.value,'missing required property "property"')),N!=="identity"&&!E.value.stops&&gt.push(new rr(E.key,E.value,'missing required property "stops"')),N==="exponential"&&E.valueSpec.expression&&!to(E.valueSpec)&&gt.push(new rr(E.key,E.value,"exponential functions not supported")),E.styleSpec.$version>=8&&(tt&&!oi(E.valueSpec)?gt.push(new rr(E.key,E.value,"property functions not supported")):Fe&&!mo(E.valueSpec)&&gt.push(new rr(E.key,E.value,"zoom functions not supported"))),(N==="categorical"||ct)&&E.value.property===void 0&&gt.push(new rr(E.key,E.value,'"property" property is required')),gt;function Rt(Ir){if(N==="identity")return[new rr(Ir.key,Ir.value,'identity function may not have a "stops" property')];var un=[],qr=Ir.value;return un=un.concat(Of({key:Ir.key,value:qr,valueSpec:Ir.valueSpec,style:Ir.style,styleSpec:Ir.styleSpec,arrayElementValidator:jt})),Ka(qr)==="array"&&qr.length===0&&un.push(new rr(Ir.key,qr,"array must have at least one stop")),un}function jt(Ir){var un=[],qr=Ir.value,Mn=Ir.key;if(Ka(qr)!=="array")return[new rr(Mn,qr,"array expected, "+Ka(qr)+" found")];if(qr.length!==2)return[new rr(Mn,qr,"array length 2 expected, length "+qr.length+" found")];if(ct){if(Ka(qr[0])!=="object")return[new rr(Mn,qr,"object expected, "+Ka(qr[0])+" found")];if(qr[0].zoom===void 0)return[new rr(Mn,qr,"object stop key must have zoom")];if(qr[0].value===void 0)return[new rr(Mn,qr,"object stop key must have value")];if(Se&&Se>Sn(qr[0].zoom))return[new rr(Mn,qr[0].zoom,"stop zoom values must appear in ascending order")];Sn(qr[0].zoom)!==Se&&(Se=Sn(qr[0].zoom),be=void 0,pe={}),un=un.concat(Os({key:Mn+"[0]",value:qr[0],valueSpec:{zoom:{}},style:Ir.style,styleSpec:Ir.styleSpec,objectElementValidators:{zoom:mf,value:Gt}}))}else un=un.concat(Gt({key:Mn+"[0]",value:qr[0],valueSpec:{},style:Ir.style,styleSpec:Ir.styleSpec},qr));return xo(On(qr[1]))?un.concat([new rr(Mn+"[1]",qr[1],"expressions are not allowed in function stops.")]):un.concat(fi({key:Mn+"[1]",value:qr[1],valueSpec:C,style:Ir.style,styleSpec:Ir.styleSpec}))}function Gt(Ir,un){var qr=Ka(Ir.value),Mn=Sn(Ir.value),bn=Ir.value!==null?Ir.value:un;if(!te)te=qr;else if(qr!==te)return[new rr(Ir.key,bn,qr+" stop domain type must match previous stop domain type "+te)];if(qr!=="number"&&qr!=="string"&&qr!=="boolean")return[new rr(Ir.key,bn,"stop domain value must be a number, string, or boolean")];if(qr!=="number"&&N!=="categorical"){var An="number expected, "+qr+" found";return oi(C)&&N===void 0&&(An+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new rr(Ir.key,bn,An)]}return N==="categorical"&&qr==="number"&&(!isFinite(Mn)||Math.floor(Mn)!==Mn)?[new rr(Ir.key,bn,"integer expected, found "+Mn)]:N!=="categorical"&&qr==="number"&&be!==void 0&&Mn<be?[new rr(Ir.key,bn,"stop domain values must appear in ascending order")]:(be=Mn,N==="categorical"&&Mn in pe?[new rr(Ir.key,bn,"stop domain values must be unique")]:(pe[Mn]=!0,[]))}function lr(Ir){return fi({key:Ir.key,value:Ir.value,valueSpec:C,style:Ir.style,styleSpec:Ir.styleSpec})}}function Uo(E){var C=(E.expressionContext==="property"?Ju:cu)(On(E.value),E.valueSpec);if(C.result==="error")return C.value.map(function(te){return new rr(""+E.key+te.key,E.value,te.message)});var N=C.value.expression||C.value._styleExpression.expression;if(E.expressionContext==="property"&&E.propertyKey==="text-font"&&!N.outputDefined())return[new rr(E.key,E.value,'Invalid data expression for "'+E.propertyKey+'". Output values must be contained as literals within the expression.')];if(E.expressionContext==="property"&&E.propertyType==="layout"&&!Cl(N))return[new rr(E.key,E.value,'"feature-state" data expressions are not supported with layout properties.')];if(E.expressionContext==="filter"&&!Cl(N))return[new rr(E.key,E.value,'"feature-state" data expressions are not supported with filters.')];if(E.expressionContext&&E.expressionContext.indexOf("cluster")===0){if(!Au(N,["zoom","feature-state"]))return[new rr(E.key,E.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(E.expressionContext==="cluster-initial"&&!El(N))return[new rr(E.key,E.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function bf(E){var C=E.value,N=E.key,te=Ka(C);return te!=="boolean"?[new rr(N,C,"boolean expected, "+te+" found")]:[]}function Jf(E){var C=E.key,N=E.value,te=Ka(N);return te!=="string"?[new rr(C,N,"color expected, "+te+" found")]:xu(N)===null?[new rr(C,N,'color expected, "'+N+'" found')]:[]}function Ss(E){var C=E.key,N=E.value,te=E.valueSpec,pe=[];return Array.isArray(te.values)?te.values.indexOf(Sn(N))===-1&&pe.push(new rr(C,N,"expected one of ["+te.values.join(", ")+"], "+JSON.stringify(N)+" found")):Object.keys(te.values).indexOf(Sn(N))===-1&&pe.push(new rr(C,N,"expected one of ["+Object.keys(te.values).join(", ")+"], "+JSON.stringify(N)+" found")),pe}function $u(E){if(E===!0||E===!1)return!0;if(!Array.isArray(E)||E.length===0)return!1;switch(E[0]){case"has":return E.length>=2&&E[1]!=="$id"&&E[1]!=="$type";case"in":return E.length>=3&&(typeof E[1]!="string"||Array.isArray(E[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return E.length!==3||Array.isArray(E[1])||Array.isArray(E[2]);case"any":case"all":for(var C=0,N=E.slice(1);C<N.length;C+=1){var te=N[C];if(!$u(te)&&typeof te!="boolean")return!1}return!0;default:return!0}}var qu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function _f(E){if(E==null)return{filter:function(){return!0},needGeometry:!1};$u(E)||(E=nt(E));var C=cu(E,qu);if(C.result==="error")throw new Error(C.value.map(function(te){return te.key+": "+te.message}).join(", "));var N=We(E);return{filter:function(te,pe,be){return C.value.evaluate(te,pe,{},be)},needGeometry:N}}function ze(E,C){return E<C?-1:E>C?1:0}function We(E){if(!Array.isArray(E))return!1;if(E[0]==="within")return!0;for(var C=1;C<E.length;C++)if(We(E[C]))return!0;return!1}function nt(E){if(!E)return!0;var C=E[0];if(E.length<=1)return C!=="any";var N=C==="=="?lt(E[1],E[2],"=="):C==="!="?qt(lt(E[1],E[2],"==")):C==="<"||C===">"||C==="<="||C===">="?lt(E[1],E[2],C):C==="any"?_t(E.slice(1)):C==="all"?["all"].concat(E.slice(1).map(nt)):C==="none"?["all"].concat(E.slice(1).map(nt).map(qt)):C==="in"?xt(E[1],E.slice(2)):C==="!in"?qt(xt(E[1],E.slice(2))):C==="has"?At(E[1]):C==="!has"?qt(At(E[1])):C==="within"?E:!0;return N}function lt(E,C,N){switch(E){case"$type":return["filter-type-"+N,C];case"$id":return["filter-id-"+N,C];default:return["filter-"+N,E,C]}}function _t(E){return["any"].concat(E.map(nt))}function xt(E,C){if(C.length===0)return!1;switch(E){case"$type":return["filter-type-in",["literal",C]];case"$id":return["filter-id-in",["literal",C]];default:return C.length>200&&!C.some(function(N){return typeof N!=typeof C[0]})?["filter-in-large",E,["literal",C.sort(ze)]]:["filter-in-small",E,["literal",C]]}}function At(E){switch(E){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",E]}}function qt(E){return["!",E]}function sr(E){return $u(On(E.value))?Uo(jr({},E,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Qt(E)}function Qt(E){var C=E.value,N=E.key;if(Ka(C)!=="array")return[new rr(N,C,"array expected, "+Ka(C)+" found")];var te=E.styleSpec,pe,be=[];if(C.length<1)return[new rr(N,C,"filter array must have at least 1 element")];switch(be=be.concat(Ss({key:N+"[0]",value:C[0],valueSpec:te.filter_operator,style:E.style,styleSpec:E.styleSpec})),Sn(C[0])){case"<":case"<=":case">":case">=":C.length>=2&&Sn(C[1])==="$type"&&be.push(new rr(N,C,'"$type" cannot be use with operator "'+C[0]+'"'));case"==":case"!=":C.length!==3&&be.push(new rr(N,C,'filter array for operator "'+C[0]+'" must have 3 elements'));case"in":case"!in":C.length>=2&&(pe=Ka(C[1]),pe!=="string"&&be.push(new rr(N+"[1]",C[1],"string expected, "+pe+" found")));for(var Se=2;Se<C.length;Se++)pe=Ka(C[Se]),Sn(C[1])==="$type"?be=be.concat(Ss({key:N+"["+Se+"]",value:C[Se],valueSpec:te.geometry_type,style:E.style,styleSpec:E.styleSpec})):pe!=="string"&&pe!=="number"&&pe!=="boolean"&&be.push(new rr(N+"["+Se+"]",C[Se],"string, number, or boolean expected, "+pe+" found"));break;case"any":case"all":case"none":for(var Fe=1;Fe<C.length;Fe++)be=be.concat(Qt({key:N+"["+Fe+"]",value:C[Fe],style:E.style,styleSpec:E.styleSpec}));break;case"has":case"!has":pe=Ka(C[1]),C.length!==2?be.push(new rr(N,C,'filter array for "'+C[0]+'" operator must have 2 elements')):pe!=="string"&&be.push(new rr(N+"[1]",C[1],"string expected, "+pe+" found"));break;case"within":pe=Ka(C[1]),C.length!==2?be.push(new rr(N,C,'filter array for "'+C[0]+'" operator must have 2 elements')):pe!=="object"&&be.push(new rr(N+"[1]",C[1],"object expected, "+pe+" found"));break}return be}function cr(E,C){var N=E.key,te=E.style,pe=E.styleSpec,be=E.value,Se=E.objectKey,Fe=pe[C+"_"+E.layerType];if(!Fe)return[];var tt=Se.match(/^(.*)-transition$/);if(C==="paint"&&tt&&Fe[tt[1]]&&Fe[tt[1]].transition)return fi({key:N,value:be,valueSpec:pe.transition,style:te,styleSpec:pe});var ct=E.valueSpec||Fe[Se];if(!ct)return[new rr(N,be,'unknown property "'+Se+'"')];var gt;if(Ka(be)==="string"&&oi(ct)&&!ct.tokens&&(gt=/^{([^}]+)}$/.exec(be)))return[new rr(N,be,'"'+Se+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(gt[1])+" }`.")];var Rt=[];return E.layerType==="symbol"&&(Se==="text-field"&&te&&!te.glyphs&&Rt.push(new rr(N,be,'use of "text-field" requires a style "glyphs" property')),Se==="text-font"&&ga(On(be))&&Sn(be.type)==="identity"&&Rt.push(new rr(N,be,'"text-font" does not support identity functions'))),Rt.concat(fi({key:E.key,value:be,valueSpec:ct,style:te,styleSpec:pe,expressionContext:"property",propertyType:C,propertyKey:Se}))}function kr(E){return cr(E,"paint")}function Gr(E){return cr(E,"layout")}function en(E){var C=[],N=E.value,te=E.key,pe=E.style,be=E.styleSpec;!N.type&&!N.ref&&C.push(new rr(te,N,'either "type" or "ref" is required'));var Se=Sn(N.type),Fe=Sn(N.ref);if(N.id)for(var tt=Sn(N.id),ct=0;ct<E.arrayIndex;ct++){var gt=pe.layers[ct];Sn(gt.id)===tt&&C.push(new rr(te,N.id,'duplicate layer id "'+N.id+'", previously used at line '+gt.id.__line__))}if("ref"in N){["type","source","source-layer","filter","layout"].forEach(function(lr){lr in N&&C.push(new rr(te,N[lr],'"'+lr+'" is prohibited for ref layers'))});var Rt;pe.layers.forEach(function(lr){Sn(lr.id)===Fe&&(Rt=lr)}),Rt?Rt.ref?C.push(new rr(te,N.ref,"ref cannot reference another ref layer")):Se=Sn(Rt.type):C.push(new rr(te,N.ref,'ref layer "'+Fe+'" not found'))}else if(Se!=="background")if(!N.source)C.push(new rr(te,N,'missing required property "source"'));else{var jt=pe.sources&&pe.sources[N.source],Gt=jt&&Sn(jt.type);jt?Gt==="vector"&&Se==="raster"?C.push(new rr(te,N.source,'layer "'+N.id+'" requires a raster source')):Gt==="raster"&&Se!=="raster"?C.push(new rr(te,N.source,'layer "'+N.id+'" requires a vector source')):Gt==="vector"&&!N["source-layer"]?C.push(new rr(te,N,'layer "'+N.id+'" must specify a "source-layer"')):Gt==="raster-dem"&&Se!=="hillshade"?C.push(new rr(te,N.source,"raster-dem source can only be used with layer type 'hillshade'.")):Se==="line"&&N.paint&&N.paint["line-gradient"]&&(Gt!=="geojson"||!jt.lineMetrics)&&C.push(new rr(te,N,'layer "'+N.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):C.push(new rr(te,N.source,'source "'+N.source+'" not found'))}return C=C.concat(Os({key:te,value:N,valueSpec:be.layer,style:E.style,styleSpec:E.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return fi({key:te+".type",value:N.type,valueSpec:be.layer.type,style:E.style,styleSpec:E.styleSpec,object:N,objectKey:"type"})},filter:sr,layout:function(Ir){return Os({layer:N,key:Ir.key,value:Ir.value,style:Ir.style,styleSpec:Ir.styleSpec,objectElementValidators:{"*":function(qr){return Gr(jr({layerType:Se},qr))}}})},paint:function(Ir){return Os({layer:N,key:Ir.key,value:Ir.value,style:Ir.style,styleSpec:Ir.styleSpec,objectElementValidators:{"*":function(qr){return kr(jr({layerType:Se},qr))}}})}}})),C}function _n(E){var C=E.value,N=E.key,te=Ka(C);return te!=="string"?[new rr(N,C,"string expected, "+te+" found")]:[]}var Pn={promoteId:ma};function jn(E){var C=E.value,N=E.key,te=E.styleSpec,pe=E.style;if(!C.type)return[new rr(N,C,'"type" is required')];var be=Sn(C.type),Se;switch(be){case"vector":case"raster":case"raster-dem":return Se=Os({key:N,value:C,valueSpec:te["source_"+be.replace("-","_")],style:E.style,styleSpec:te,objectElementValidators:Pn}),Se;case"geojson":if(Se=Os({key:N,value:C,valueSpec:te.source_geojson,style:pe,styleSpec:te,objectElementValidators:Pn}),C.cluster)for(var Fe in C.clusterProperties){var tt=C.clusterProperties[Fe],ct=tt[0],gt=tt[1],Rt=typeof ct=="string"?[ct,["accumulated"],["get",Fe]]:ct;Se.push.apply(Se,Uo({key:N+"."+Fe+".map",value:gt,expressionContext:"cluster-map"})),Se.push.apply(Se,Uo({key:N+"."+Fe+".reduce",value:Rt,expressionContext:"cluster-reduce"}))}return Se;case"video":return Os({key:N,value:C,valueSpec:te.source_video,style:pe,styleSpec:te});case"image":return Os({key:N,value:C,valueSpec:te.source_image,style:pe,styleSpec:te});case"canvas":return[new rr(N,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ss({key:N+".type",value:C.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:pe,styleSpec:te})}}function ma(E){var C=E.key,N=E.value;if(Ka(N)==="string")return _n({key:C,value:N});var te=[];for(var pe in N)te.push.apply(te,_n({key:C+"."+pe,value:N[pe]}));return te}function ba(E){var C=E.value,N=E.styleSpec,te=N.light,pe=E.style,be=[],Se=Ka(C);if(C===void 0)return be;if(Se!=="object")return be=be.concat([new rr("light",C,"object expected, "+Se+" found")]),be;for(var Fe in C){var tt=Fe.match(/^(.*)-transition$/);tt&&te[tt[1]]&&te[tt[1]].transition?be=be.concat(fi({key:Fe,value:C[Fe],valueSpec:N.transition,style:pe,styleSpec:N})):te[Fe]?be=be.concat(fi({key:Fe,value:C[Fe],valueSpec:te[Fe],style:pe,styleSpec:N})):be=be.concat([new rr(Fe,C[Fe],'unknown property "'+Fe+'"')])}return be}function Za(E){return _n(E).length===0?[]:Uo(E)}function Wa(E){return _n(E).length===0?[]:Uo(E)}var ei={"*":function(){return[]},array:Of,boolean:bf,number:mf,color:Jf,constants:zr,enum:Ss,filter:sr,function:xf,layer:en,object:Os,source:jn,light:ba,string:_n,formatted:Za,resolvedImage:Wa};function fi(E){var C=E.value,N=E.valueSpec,te=E.styleSpec;if(N.expression&&ga(Sn(C)))return xf(E);if(N.expression&&xo(On(C)))return Uo(E);if(N.type&&ei[N.type])return ei[N.type](E);var pe=Os(jr({},E,{valueSpec:N.type?te[N.type]:N}));return pe}function oo(E){var C=E.value,N=E.key,te=_n(E);return te.length||(C.indexOf("{fontstack}")===-1&&te.push(new rr(N,C,'"glyphs" url must include a "{fontstack}" token')),C.indexOf("{range}")===-1&&te.push(new rr(N,C,'"glyphs" url must include a "{range}" token'))),te}function ri(E,C){C===void 0&&(C=mr);var N=[];return N=N.concat(fi({key:"",value:E,valueSpec:C.$root,styleSpec:C,style:E,objectElementValidators:{glyphs:oo,"*":function(){return[]}}})),E.constants&&(N=N.concat(zr({key:"constants",value:E.constants,style:E,styleSpec:C}))),Vi(N)}ri.source=co(jn),ri.light=co(ba),ri.layer=co(en),ri.filter=co(sr),ri.paintProperty=co(kr),ri.layoutProperty=co(Gr);function Vi(E){return[].concat(E).sort(function(C,N){return C.line-N.line})}function co(E){return function(){for(var C=[],N=arguments.length;N--;)C[N]=arguments[N];return Vi(E.apply(this,C))}}var _o=ri,xi=_o.light,Ai=_o.paintProperty,ms=_o.layoutProperty;function go(E,C){var N=!1;if(C&&C.length)for(var te=0,pe=C;te<pe.length;te+=1){var be=pe[te];E.fire(new yr(new Error(be.message))),N=!0}return N}var Io=ce,jo=3;function ce(E,C,N){var te=this.cells=[];if(E instanceof ArrayBuffer){this.arrayBuffer=E;var pe=new Int32Array(this.arrayBuffer);E=pe[0],C=pe[1],N=pe[2],this.d=C+2*N;for(var be=0;be<this.d*this.d;be++){var Se=pe[jo+be],Fe=pe[jo+be+1];te.push(Se===Fe?null:pe.subarray(Se,Fe))}var tt=pe[jo+te.length],ct=pe[jo+te.length+1];this.keys=pe.subarray(tt,ct),this.bboxes=pe.subarray(ct),this.insert=this._insertReadonly}else{this.d=C+2*N;for(var gt=0;gt<this.d*this.d;gt++)te.push([]);this.keys=[],this.bboxes=[]}this.n=C,this.extent=E,this.padding=N,this.scale=C/E,this.uid=0;var Rt=N/C*E;this.min=-Rt,this.max=E+Rt}ce.prototype.insert=function(E,C,N,te,pe){this._forEachCell(C,N,te,pe,this._insertCell,this.uid++),this.keys.push(E),this.bboxes.push(C),this.bboxes.push(N),this.bboxes.push(te),this.bboxes.push(pe)},ce.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ce.prototype._insertCell=function(E,C,N,te,pe,be){this.cells[pe].push(be)},ce.prototype.query=function(E,C,N,te,pe){var be=this.min,Se=this.max;if(E<=be&&C<=be&&Se<=N&&Se<=te&&!pe)return Array.prototype.slice.call(this.keys);var Fe=[],tt={};return this._forEachCell(E,C,N,te,this._queryCell,Fe,tt,pe),Fe},ce.prototype._queryCell=function(E,C,N,te,pe,be,Se,Fe){var tt=this.cells[pe];if(tt!==null)for(var ct=this.keys,gt=this.bboxes,Rt=0;Rt<tt.length;Rt++){var jt=tt[Rt];if(Se[jt]===void 0){var Gt=jt*4;(Fe?Fe(gt[Gt+0],gt[Gt+1],gt[Gt+2],gt[Gt+3]):E<=gt[Gt+2]&&C<=gt[Gt+3]&&N>=gt[Gt+0]&&te>=gt[Gt+1])?(Se[jt]=!0,be.push(ct[jt])):Se[jt]=!1}}},ce.prototype._forEachCell=function(E,C,N,te,pe,be,Se,Fe){for(var tt=this._convertToCellCoord(E),ct=this._convertToCellCoord(C),gt=this._convertToCellCoord(N),Rt=this._convertToCellCoord(te),jt=tt;jt<=gt;jt++)for(var Gt=ct;Gt<=Rt;Gt++){var lr=this.d*Gt+jt;if(!(Fe&&!Fe(this._convertFromCellCoord(jt),this._convertFromCellCoord(Gt),this._convertFromCellCoord(jt+1),this._convertFromCellCoord(Gt+1)))&&pe.call(this,E,C,N,te,lr,be,Se,Fe))return}},ce.prototype._convertFromCellCoord=function(E){return(E-this.padding)/this.scale},ce.prototype._convertToCellCoord=function(E){return Math.max(0,Math.min(this.d-1,Math.floor(E*this.scale)+this.padding))},ce.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var E=this.cells,C=jo+this.cells.length+1+1,N=0,te=0;te<this.cells.length;te++)N+=this.cells[te].length;var pe=new Int32Array(C+N+this.keys.length+this.bboxes.length);pe[0]=this.extent,pe[1]=this.n,pe[2]=this.padding;for(var be=C,Se=0;Se<E.length;Se++){var Fe=E[Se];pe[jo+Se]=be,pe.set(Fe,be),be+=Fe.length}return pe[jo+E.length]=be,pe.set(this.keys,be),be+=this.keys.length,pe[jo+E.length+1]=be,pe.set(this.bboxes,be),be+=this.bboxes.length,pe.buffer};var Te=self.ImageData,Le=self.ImageBitmap,Be={};function Oe(E,C,N){N===void 0&&(N={}),Object.defineProperty(C,"_classRegistryKey",{value:E,writeable:!1}),Be[E]={klass:C,omit:N.omit||[],shallow:N.shallow||[]}}Oe("Object",Object),Io.serialize=function(C,N){var te=C.toArrayBuffer();return N&&N.push(te),{buffer:te}},Io.deserialize=function(C){return new Io(C.buffer)},Oe("Grid",Io),Oe("Color",hi),Oe("Error",Error),Oe("ResolvedImage",So),Oe("StylePropertyFunction",hu),Oe("StyleExpression",gs,{omit:["_evaluator"]}),Oe("ZoomDependentExpression",ys),Oe("ZoomConstantExpression",Su),Oe("CompoundExpression",ko,{omit:["_evaluate"]});for(var Ke in Jn)Jn[Ke]._classRegistryKey||Oe("Expression_"+Ke,Jn[Ke]);function bt(E){return E&&typeof ArrayBuffer!="undefined"&&(E instanceof ArrayBuffer||E.constructor&&E.constructor.name==="ArrayBuffer")}function vt(E){return Le&&E instanceof Le}function Ct(E,C){if(E==null||typeof E=="boolean"||typeof E=="number"||typeof E=="string"||E instanceof Boolean||E instanceof Number||E instanceof String||E instanceof Date||E instanceof RegExp)return E;if(bt(E)||vt(E))return C&&C.push(E),E;if(ArrayBuffer.isView(E)){var N=E;return C&&C.push(N.buffer),N}if(E instanceof Te)return C&&C.push(E.data.buffer),E;if(Array.isArray(E)){for(var te=[],pe=0,be=E;pe<be.length;pe+=1){var Se=be[pe];te.push(Ct(Se,C))}return te}if(typeof E=="object"){var Fe=E.constructor,tt=Fe._classRegistryKey;if(!tt)throw new Error("can't serialize object of unregistered class");var ct=Fe.serialize?Fe.serialize(E,C):{};if(!Fe.serialize){for(var gt in E)if(!!E.hasOwnProperty(gt)&&!(Be[tt].omit.indexOf(gt)>=0)){var Rt=E[gt];ct[gt]=Be[tt].shallow.indexOf(gt)>=0?Rt:Ct(Rt,C)}E instanceof Error&&(ct.message=E.message)}if(ct.$name)throw new Error("$name property is reserved for worker serialization logic.");return tt!=="Object"&&(ct.$name=tt),ct}throw new Error("can't serialize object of type "+typeof E)}function Ut(E){if(E==null||typeof E=="boolean"||typeof E=="number"||typeof E=="string"||E instanceof Boolean||E instanceof Number||E instanceof String||E instanceof Date||E instanceof RegExp||bt(E)||vt(E)||ArrayBuffer.isView(E)||E instanceof Te)return E;if(Array.isArray(E))return E.map(Ut);if(typeof E=="object"){var C=E.$name||"Object",N=Be[C],te=N.klass;if(!te)throw new Error("can't deserialize unregistered class "+C);if(te.deserialize)return te.deserialize(E);for(var pe=Object.create(te.prototype),be=0,Se=Object.keys(E);be<Se.length;be+=1){var Fe=Se[be];if(Fe!=="$name"){var tt=E[Fe];pe[Fe]=Be[C].shallow.indexOf(Fe)>=0?tt:Ut(tt)}}return pe}throw new Error("can't deserialize object of type "+typeof E)}var Wt=function(){this.first=!0};Wt.prototype.update=function(C,N){var te=Math.floor(C);return this.first?(this.first=!1,this.lastIntegerZoom=te,this.lastIntegerZoomTime=0,this.lastZoom=C,this.lastFloorZoom=te,!0):(this.lastFloorZoom>te?(this.lastIntegerZoom=te+1,this.lastIntegerZoomTime=N):this.lastFloorZoom<te&&(this.lastIntegerZoom=te,this.lastIntegerZoomTime=N),C!==this.lastZoom?(this.lastZoom=C,this.lastFloorZoom=te,!0):!1)};var Xt={"Latin-1 Supplement":function(E){return E>=128&&E<=255},Arabic:function(E){return E>=1536&&E<=1791},"Arabic Supplement":function(E){return E>=1872&&E<=1919},"Arabic Extended-A":function(E){return E>=2208&&E<=2303},"Hangul Jamo":function(E){return E>=4352&&E<=4607},"Unified Canadian Aboriginal Syllabics":function(E){return E>=5120&&E<=5759},Khmer:function(E){return E>=6016&&E<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(E){return E>=6320&&E<=6399},"General Punctuation":function(E){return E>=8192&&E<=8303},"Letterlike Symbols":function(E){return E>=8448&&E<=8527},"Number Forms":function(E){return E>=8528&&E<=8591},"Miscellaneous Technical":function(E){return E>=8960&&E<=9215},"Control Pictures":function(E){return E>=9216&&E<=9279},"Optical Character Recognition":function(E){return E>=9280&&E<=9311},"Enclosed Alphanumerics":function(E){return E>=9312&&E<=9471},"Geometric Shapes":function(E){return E>=9632&&E<=9727},"Miscellaneous Symbols":function(E){return E>=9728&&E<=9983},"Miscellaneous Symbols and Arrows":function(E){return E>=11008&&E<=11263},"CJK Radicals Supplement":function(E){return E>=11904&&E<=12031},"Kangxi Radicals":function(E){return E>=12032&&E<=12255},"Ideographic Description Characters":function(E){return E>=12272&&E<=12287},"CJK Symbols and Punctuation":function(E){return E>=12288&&E<=12351},Hiragana:function(E){return E>=12352&&E<=12447},Katakana:function(E){return E>=12448&&E<=12543},Bopomofo:function(E){return E>=12544&&E<=12591},"Hangul Compatibility Jamo":function(E){return E>=12592&&E<=12687},Kanbun:function(E){return E>=12688&&E<=12703},"Bopomofo Extended":function(E){return E>=12704&&E<=12735},"CJK Strokes":function(E){return E>=12736&&E<=12783},"Katakana Phonetic Extensions":function(E){return E>=12784&&E<=12799},"Enclosed CJK Letters and Months":function(E){return E>=12800&&E<=13055},"CJK Compatibility":function(E){return E>=13056&&E<=13311},"CJK Unified Ideographs Extension A":function(E){return E>=13312&&E<=19903},"Yijing Hexagram Symbols":function(E){return E>=19904&&E<=19967},"CJK Unified Ideographs":function(E){return E>=19968&&E<=40959},"Yi Syllables":function(E){return E>=40960&&E<=42127},"Yi Radicals":function(E){return E>=42128&&E<=42191},"Hangul Jamo Extended-A":function(E){return E>=43360&&E<=43391},"Hangul Syllables":function(E){return E>=44032&&E<=55215},"Hangul Jamo Extended-B":function(E){return E>=55216&&E<=55295},"Private Use Area":function(E){return E>=57344&&E<=63743},"CJK Compatibility Ideographs":function(E){return E>=63744&&E<=64255},"Arabic Presentation Forms-A":function(E){return E>=64336&&E<=65023},"Vertical Forms":function(E){return E>=65040&&E<=65055},"CJK Compatibility Forms":function(E){return E>=65072&&E<=65103},"Small Form Variants":function(E){return E>=65104&&E<=65135},"Arabic Presentation Forms-B":function(E){return E>=65136&&E<=65279},"Halfwidth and Fullwidth Forms":function(E){return E>=65280&&E<=65519}};function br(E){for(var C=0,N=E;C<N.length;C+=1){var te=N[C];if(Or(te.charCodeAt(0)))return!0}return!1}function Qr(E){for(var C=0,N=E;C<N.length;C+=1){var te=N[C];if(!cn(te.charCodeAt(0)))return!1}return!0}function cn(E){return!(Xt.Arabic(E)||Xt["Arabic Supplement"](E)||Xt["Arabic Extended-A"](E)||Xt["Arabic Presentation Forms-A"](E)||Xt["Arabic Presentation Forms-B"](E))}function Mr(E){return E<11904?!1:!!(Xt["Bopomofo Extended"](E)||Xt.Bopomofo(E)||Xt["CJK Compatibility Forms"](E)||Xt["CJK Compatibility Ideographs"](E)||Xt["CJK Compatibility"](E)||Xt["CJK Radicals Supplement"](E)||Xt["CJK Strokes"](E)||Xt["CJK Symbols and Punctuation"](E)||Xt["CJK Unified Ideographs Extension A"](E)||Xt["CJK Unified Ideographs"](E)||Xt["Enclosed CJK Letters and Months"](E)||Xt["Halfwidth and Fullwidth Forms"](E)||Xt.Hiragana(E)||Xt["Ideographic Description Characters"](E)||Xt["Kangxi Radicals"](E)||Xt["Katakana Phonetic Extensions"](E)||Xt.Katakana(E)||Xt["Vertical Forms"](E)||Xt["Yi Radicals"](E)||Xt["Yi Syllables"](E))}function Or(E){return E===746||E===747?!0:E<4352?!1:!!(Xt["Bopomofo Extended"](E)||Xt.Bopomofo(E)||Xt["CJK Compatibility Forms"](E)&&!(E>=65097&&E<=65103)||Xt["CJK Compatibility Ideographs"](E)||Xt["CJK Compatibility"](E)||Xt["CJK Radicals Supplement"](E)||Xt["CJK Strokes"](E)||Xt["CJK Symbols and Punctuation"](E)&&!(E>=12296&&E<=12305)&&!(E>=12308&&E<=12319)&&E!==12336||Xt["CJK Unified Ideographs Extension A"](E)||Xt["CJK Unified Ideographs"](E)||Xt["Enclosed CJK Letters and Months"](E)||Xt["Hangul Compatibility Jamo"](E)||Xt["Hangul Jamo Extended-A"](E)||Xt["Hangul Jamo Extended-B"](E)||Xt["Hangul Jamo"](E)||Xt["Hangul Syllables"](E)||Xt.Hiragana(E)||Xt["Ideographic Description Characters"](E)||Xt.Kanbun(E)||Xt["Kangxi Radicals"](E)||Xt["Katakana Phonetic Extensions"](E)||Xt.Katakana(E)&&E!==12540||Xt["Halfwidth and Fullwidth Forms"](E)&&E!==65288&&E!==65289&&E!==65293&&!(E>=65306&&E<=65310)&&E!==65339&&E!==65341&&E!==65343&&!(E>=65371&&E<=65503)&&E!==65507&&!(E>=65512&&E<=65519)||Xt["Small Form Variants"](E)&&!(E>=65112&&E<=65118)&&!(E>=65123&&E<=65126)||Xt["Unified Canadian Aboriginal Syllabics"](E)||Xt["Unified Canadian Aboriginal Syllabics Extended"](E)||Xt["Vertical Forms"](E)||Xt["Yijing Hexagram Symbols"](E)||Xt["Yi Syllables"](E)||Xt["Yi Radicals"](E))}function Xr(E){return!!(Xt["Latin-1 Supplement"](E)&&(E===167||E===169||E===174||E===177||E===188||E===189||E===190||E===215||E===247)||Xt["General Punctuation"](E)&&(E===8214||E===8224||E===8225||E===8240||E===8241||E===8251||E===8252||E===8258||E===8263||E===8264||E===8265||E===8273)||Xt["Letterlike Symbols"](E)||Xt["Number Forms"](E)||Xt["Miscellaneous Technical"](E)&&(E>=8960&&E<=8967||E>=8972&&E<=8991||E>=8996&&E<=9e3||E===9003||E>=9085&&E<=9114||E>=9150&&E<=9165||E===9167||E>=9169&&E<=9179||E>=9186&&E<=9215)||Xt["Control Pictures"](E)&&E!==9251||Xt["Optical Character Recognition"](E)||Xt["Enclosed Alphanumerics"](E)||Xt["Geometric Shapes"](E)||Xt["Miscellaneous Symbols"](E)&&!(E>=9754&&E<=9759)||Xt["Miscellaneous Symbols and Arrows"](E)&&(E>=11026&&E<=11055||E>=11088&&E<=11097||E>=11192&&E<=11243)||Xt["CJK Symbols and Punctuation"](E)||Xt.Katakana(E)||Xt["Private Use Area"](E)||Xt["CJK Compatibility Forms"](E)||Xt["Small Form Variants"](E)||Xt["Halfwidth and Fullwidth Forms"](E)||E===8734||E===8756||E===8757||E>=9984&&E<=10087||E>=10102&&E<=10131||E===65532||E===65533)}function ln(E){return!(Or(E)||Xr(E))}function fn(E){return Xt.Arabic(E)||Xt["Arabic Supplement"](E)||Xt["Arabic Extended-A"](E)||Xt["Arabic Presentation Forms-A"](E)||Xt["Arabic Presentation Forms-B"](E)}function Kr(E){return E>=1424&&E<=2303||Xt["Arabic Presentation Forms-A"](E)||Xt["Arabic Presentation Forms-B"](E)}function Gn(E,C){return!(!C&&Kr(E)||E>=2304&&E<=3583||E>=3840&&E<=4255||Xt.Khmer(E))}function ra(E){for(var C=0,N=E;C<N.length;C+=1){var te=N[C];if(Kr(te.charCodeAt(0)))return!0}return!1}function wa(E,C){for(var N=0,te=E;N<te.length;N+=1){var pe=te[N];if(!Gn(pe.charCodeAt(0),C))return!1}return!0}var oa={unavailable:"unavailable",deferred:"deferred",loading:"loading",loaded:"loaded",error:"error"},Ea=null,fa=oa.unavailable,Va=null,Ra=function(E){E&&typeof E=="string"&&E.indexOf("NetworkError")>-1&&(fa=oa.error),Ea&&Ea(E)};function $a(){gi.fire(new nn("pluginStateChange",{pluginStatus:fa,pluginURL:Va}))}var gi=new _r,ho=function(){return fa},Ii=function(E){return E({pluginStatus:fa,pluginURL:Va}),gi.on("pluginStateChange",E),E},ha=function(E,C,N){if(N===void 0&&(N=!1),fa===oa.deferred||fa===oa.loading||fa===oa.loaded)throw new Error("setRTLTextPlugin cannot be called multiple times.");Va=Q.resolveURL(E),fa=oa.deferred,Ea=C,$a(),N||ai()},ai=function(){if(fa!==oa.deferred||!Va)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");fa=oa.loading,$a(),Va&&Re({url:Va},function(E){E?Ra(E):(fa=oa.loaded,$a())})},Xa={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return fa===oa.loaded||Xa.applyArabicShaping!=null},isLoading:function(){return fa===oa.loading},setState:function(C){fa=C.pluginStatus,Va=C.pluginURL},isParsed:function(){return Xa.applyArabicShaping!=null&&Xa.processBidirectionalText!=null&&Xa.processStyledBidirectionalText!=null},getPluginURL:function(){return Va}},Mi=function(){!Xa.isLoading()&&!Xa.isLoaded()&&ho()==="deferred"&&ai()},si=function(C,N){this.zoom=C,N?(this.now=N.now,this.fadeDuration=N.fadeDuration,this.zoomHistory=N.zoomHistory,this.transition=N.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Wt,this.transition={})};si.prototype.isSupportedScript=function(C){return wa(C,Xa.isLoaded())},si.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},si.prototype.getCrossfadeParameters=function(){var C=this.zoom,N=C-Math.floor(C),te=this.crossFadingFactor();return C>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:N+(1-N)*te}:{fromScale:.5,toScale:1,t:1-(1-te)*N}};var so=function(C,N){this.property=C,this.value=N,this.expression=Lc(N===void 0?C.specification.default:N,C.specification)};so.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},so.prototype.possiblyEvaluate=function(C,N,te){return this.property.possiblyEvaluate(this,C,N,te)};var $i=function(C){this.property=C,this.value=new so(C,void 0)};$i.prototype.transitioned=function(C,N){return new Zo(this.property,this.value,N,M({},C.transition,this.transition),C.now)},$i.prototype.untransitioned=function(){return new Zo(this.property,this.value,null,{},0)};var yo=function(C){this._properties=C,this._values=Object.create(C.defaultTransitionablePropertyValues)};yo.prototype.getValue=function(C){return I(this._values[C].value.value)},yo.prototype.setValue=function(C,N){this._values.hasOwnProperty(C)||(this._values[C]=new $i(this._values[C].property)),this._values[C].value=new so(this._values[C].property,N===null?void 0:I(N))},yo.prototype.getTransition=function(C){return I(this._values[C].transition)},yo.prototype.setTransition=function(C,N){this._values.hasOwnProperty(C)||(this._values[C]=new $i(this._values[C].property)),this._values[C].transition=I(N)||void 0},yo.prototype.serialize=function(){for(var C={},N=0,te=Object.keys(this._values);N<te.length;N+=1){var pe=te[N],be=this.getValue(pe);be!==void 0&&(C[pe]=be);var Se=this.getTransition(pe);Se!==void 0&&(C[pe+"-transition"]=Se)}return C},yo.prototype.transitioned=function(C,N){for(var te=new Ho(this._properties),pe=0,be=Object.keys(this._values);pe<be.length;pe+=1){var Se=be[pe];te._values[Se]=this._values[Se].transitioned(C,N._values[Se])}return te},yo.prototype.untransitioned=function(){for(var C=new Ho(this._properties),N=0,te=Object.keys(this._values);N<te.length;N+=1){var pe=te[N];C._values[pe]=this._values[pe].untransitioned()}return C};var Zo=function(C,N,te,pe,be){this.property=C,this.value=N,this.begin=be+pe.delay||0,this.end=this.begin+pe.duration||0,C.specification.transition&&(pe.delay||pe.duration)&&(this.prior=te)};Zo.prototype.possiblyEvaluate=function(C,N,te){var pe=C.now||0,be=this.value.possiblyEvaluate(C,N,te),Se=this.prior;if(Se){if(pe>this.end)return this.prior=null,be;if(this.value.isDataDriven())return this.prior=null,be;if(pe<this.begin)return Se.possiblyEvaluate(C,N,te);var Fe=(pe-this.begin)/(this.end-this.begin);return this.property.interpolate(Se.possiblyEvaluate(C,N,te),be,v(Fe))}else return be};var Ho=function(C){this._properties=C,this._values=Object.create(C.defaultTransitioningPropertyValues)};Ho.prototype.possiblyEvaluate=function(C,N,te){for(var pe=new Ni(this._properties),be=0,Se=Object.keys(this._values);be<Se.length;be+=1){var Fe=Se[be];pe._values[Fe]=this._values[Fe].possiblyEvaluate(C,N,te)}return pe},Ho.prototype.hasTransition=function(){for(var C=0,N=Object.keys(this._values);C<N.length;C+=1){var te=N[C];if(this._values[te].prior)return!0}return!1};var Ko=function(C){this._properties=C,this._values=Object.create(C.defaultPropertyValues)};Ko.prototype.getValue=function(C){return I(this._values[C].value)},Ko.prototype.setValue=function(C,N){this._values[C]=new so(this._values[C].property,N===null?void 0:I(N))},Ko.prototype.serialize=function(){for(var C={},N=0,te=Object.keys(this._values);N<te.length;N+=1){var pe=te[N],be=this.getValue(pe);be!==void 0&&(C[pe]=be)}return C},Ko.prototype.possiblyEvaluate=function(C,N,te){for(var pe=new Ni(this._properties),be=0,Se=Object.keys(this._values);be<Se.length;be+=1){var Fe=Se[be];pe._values[Fe]=this._values[Fe].possiblyEvaluate(C,N,te)}return pe};var Gi=function(C,N,te){this.property=C,this.value=N,this.parameters=te};Gi.prototype.isConstant=function(){return this.value.kind==="constant"},Gi.prototype.constantOr=function(C){return this.value.kind==="constant"?this.value.value:C},Gi.prototype.evaluate=function(C,N,te,pe){return this.property.evaluate(this.value,this.parameters,C,N,te,pe)};var Ni=function(C){this._properties=C,this._values=Object.create(C.defaultPossiblyEvaluatedValues)};Ni.prototype.get=function(C){return this._values[C]};var Fa=function(C){this.specification=C};Fa.prototype.possiblyEvaluate=function(C,N){return C.expression.evaluate(N)},Fa.prototype.interpolate=function(C,N,te){var pe=fl[this.specification.type];return pe?pe(C,N,te):C};var ja=function(C,N){this.specification=C,this.overrides=N};ja.prototype.possiblyEvaluate=function(C,N,te,pe){return C.expression.kind==="constant"||C.expression.kind==="camera"?new Gi(this,{kind:"constant",value:C.expression.evaluate(N,null,{},te,pe)},N):new Gi(this,C.expression,N)},ja.prototype.interpolate=function(C,N,te){if(C.value.kind!=="constant"||N.value.kind!=="constant")return C;if(C.value.value===void 0||N.value.value===void 0)return new Gi(this,{kind:"constant",value:void 0},C.parameters);var pe=fl[this.specification.type];return pe?new Gi(this,{kind:"constant",value:pe(C.value.value,N.value.value,te)},C.parameters):C},ja.prototype.evaluate=function(C,N,te,pe,be,Se){return C.kind==="constant"?C.value:C.evaluate(N,te,pe,be,Se)};var bo=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.possiblyEvaluate=function(te,pe,be,Se){if(te.value===void 0)return new Gi(this,{kind:"constant",value:void 0},pe);if(te.expression.kind==="constant"){var Fe=te.expression.evaluate(pe,null,{},be,Se),tt=te.property.specification.type==="resolvedImage",ct=tt&&typeof Fe!="string"?Fe.name:Fe,gt=this._calculate(ct,ct,ct,pe);return new Gi(this,{kind:"constant",value:gt},pe)}else if(te.expression.kind==="camera"){var Rt=this._calculate(te.expression.evaluate({zoom:pe.zoom-1}),te.expression.evaluate({zoom:pe.zoom}),te.expression.evaluate({zoom:pe.zoom+1}),pe);return new Gi(this,{kind:"constant",value:Rt},pe)}else return new Gi(this,te.expression,pe)},C.prototype.evaluate=function(te,pe,be,Se,Fe,tt){if(te.kind==="source"){var ct=te.evaluate(pe,be,Se,Fe,tt);return this._calculate(ct,ct,ct,pe)}else return te.kind==="composite"?this._calculate(te.evaluate({zoom:Math.floor(pe.zoom)-1},be,Se),te.evaluate({zoom:Math.floor(pe.zoom)},be,Se),te.evaluate({zoom:Math.floor(pe.zoom)+1},be,Se),pe):te.value},C.prototype._calculate=function(te,pe,be,Se){var Fe=Se.zoom;return Fe>Se.zoomHistory.lastIntegerZoom?{from:te,to:pe}:{from:be,to:pe}},C.prototype.interpolate=function(te){return te},C}(ja),ro=function(C){this.specification=C};ro.prototype.possiblyEvaluate=function(C,N,te,pe){if(C.value!==void 0)if(C.expression.kind==="constant"){var be=C.expression.evaluate(N,null,{},te,pe);return this._calculate(be,be,be,N)}else return this._calculate(C.expression.evaluate(new si(Math.floor(N.zoom-1),N)),C.expression.evaluate(new si(Math.floor(N.zoom),N)),C.expression.evaluate(new si(Math.floor(N.zoom+1),N)),N)},ro.prototype._calculate=function(C,N,te,pe){var be=pe.zoom;return be>pe.zoomHistory.lastIntegerZoom?{from:C,to:N}:{from:te,to:N}},ro.prototype.interpolate=function(C){return C};var zo=function(C){this.specification=C};zo.prototype.possiblyEvaluate=function(C,N,te,pe){return!!C.expression.evaluate(N,null,{},te,pe)},zo.prototype.interpolate=function(){return!1};var Xi=function(C){this.properties=C,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(var N in C){var te=C[N];te.specification.overridable&&this.overridableProperties.push(N);var pe=this.defaultPropertyValues[N]=new so(te,void 0),be=this.defaultTransitionablePropertyValues[N]=new $i(te);this.defaultTransitioningPropertyValues[N]=be.untransitioned(),this.defaultPossiblyEvaluatedValues[N]=pe.possiblyEvaluate({})}};Oe("DataDrivenProperty",ja),Oe("DataConstantProperty",Fa),Oe("CrossFadedDataDrivenProperty",bo),Oe("CrossFadedProperty",ro),Oe("ColorRampProperty",zo);var Jo="-transition",ks=function(E){function C(N,te){if(E.call(this),this.id=N.id,this.type=N.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},N.type!=="custom"&&(N=N,this.metadata=N.metadata,this.minzoom=N.minzoom,this.maxzoom=N.maxzoom,N.type!=="background"&&(this.source=N.source,this.sourceLayer=N["source-layer"],this.filter=N.filter),te.layout&&(this._unevaluatedLayout=new Ko(te.layout)),te.paint)){this._transitionablePaint=new yo(te.paint);for(var pe in N.paint)this.setPaintProperty(pe,N.paint[pe],{validate:!1});for(var be in N.layout)this.setLayoutProperty(be,N.layout[be],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ni(te.paint)}}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},C.prototype.getLayoutProperty=function(te){return te==="visibility"?this.visibility:this._unevaluatedLayout.getValue(te)},C.prototype.setLayoutProperty=function(te,pe,be){if(be===void 0&&(be={}),pe!=null){var Se="layers."+this.id+".layout."+te;if(this._validate(ms,Se,te,pe,be))return}if(te==="visibility"){this.visibility=pe;return}this._unevaluatedLayout.setValue(te,pe)},C.prototype.getPaintProperty=function(te){return k(te,Jo)?this._transitionablePaint.getTransition(te.slice(0,-Jo.length)):this._transitionablePaint.getValue(te)},C.prototype.setPaintProperty=function(te,pe,be){if(be===void 0&&(be={}),pe!=null){var Se="layers."+this.id+".paint."+te;if(this._validate(Ai,Se,te,pe,be))return!1}if(k(te,Jo))return this._transitionablePaint.setTransition(te.slice(0,-Jo.length),pe||void 0),!1;var Fe=this._transitionablePaint._values[te],tt=Fe.property.specification["property-type"]==="cross-faded-data-driven",ct=Fe.value.isDataDriven(),gt=Fe.value;this._transitionablePaint.setValue(te,pe),this._handleSpecialPaintPropertyUpdate(te);var Rt=this._transitionablePaint._values[te].value,jt=Rt.isDataDriven();return jt||ct||tt||this._handleOverridablePaintPropertyUpdate(te,gt,Rt)},C.prototype._handleSpecialPaintPropertyUpdate=function(te){},C.prototype._handleOverridablePaintPropertyUpdate=function(te,pe,be){return!1},C.prototype.isHidden=function(te){return this.minzoom&&te<this.minzoom||this.maxzoom&&te>=this.maxzoom?!0:this.visibility==="none"},C.prototype.updateTransitions=function(te){this._transitioningPaint=this._transitionablePaint.transitioned(te,this._transitioningPaint)},C.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},C.prototype.recalculate=function(te,pe){te.getCrossfadeParameters&&(this._crossfadeParameters=te.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(te,void 0,pe)),this.paint=this._transitioningPaint.possiblyEvaluate(te,void 0,pe)},C.prototype.serialize=function(){var te={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(te.layout=te.layout||{},te.layout.visibility=this.visibility),z(te,function(pe,be){return pe!==void 0&&!(be==="layout"&&!Object.keys(pe).length)&&!(be==="paint"&&!Object.keys(pe).length)})},C.prototype._validate=function(te,pe,be,Se,Fe){return Fe===void 0&&(Fe={}),Fe&&Fe.validate===!1?!1:go(this,te.call(_o,{key:pe,layerType:this.type,objectKey:be,value:Se,styleSpec:mr,style:{glyphs:!0,sprite:!0}}))},C.prototype.is3D=function(){return!1},C.prototype.isTileClipped=function(){return!1},C.prototype.hasOffscreenPass=function(){return!1},C.prototype.resize=function(){},C.prototype.isStateDependent=function(){for(var te in this.paint._values){var pe=this.paint.get(te);if(!(!(pe instanceof Gi)||!oi(pe.property.specification))&&(pe.value.kind==="source"||pe.value.kind==="composite")&&pe.value.isStateDependent)return!0}return!1},C}(_r),vu={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},ji=function(C,N){this._structArray=C,this._pos1=N*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Qf=128,Zl=5,Oi=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};Oi.serialize=function(C,N){return C._trim(),N&&(C.isTransferred=!0,N.push(C.arrayBuffer)),{length:C.length,arrayBuffer:C.arrayBuffer}},Oi.deserialize=function(C){var N=Object.create(this.prototype);return N.arrayBuffer=C.arrayBuffer,N.length=C.length,N.capacity=C.arrayBuffer.byteLength/N.bytesPerElement,N._refreshViews(),N},Oi.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Oi.prototype.clear=function(){this.length=0},Oi.prototype.resize=function(C){this.reserve(C),this.length=C},Oi.prototype.reserve=function(C){if(C>this.capacity){this.capacity=Math.max(C,Math.floor(this.capacity*Zl),Qf),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var N=this.uint8;this._refreshViews(),N&&this.uint8.set(N)}},Oi.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};function Fo(E,C){C===void 0&&(C=1);var N=0,te=0,pe=E.map(function(Se){var Fe=i0(Se.type),tt=N=rh(N,Math.max(C,Fe)),ct=Se.components||1;return te=Math.max(te,Fe),N+=Fe*ct,{name:Se.name,type:Se.type,components:ct,offset:tt}}),be=rh(N,Math.max(te,C));return{members:pe,size:be,alignment:C}}function i0(E){return vu[E].BYTES_PER_ELEMENT}function rh(E,C){return Math.ceil(E/C)*C}var Pc=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe){var be=this.length;return this.resize(be+1),this.emplace(be,te,pe)},C.prototype.emplace=function(te,pe,be){var Se=te*2;return this.int16[Se+0]=pe,this.int16[Se+1]=be,te},C}(Oi);Pc.prototype.bytesPerElement=4,Oe("StructArrayLayout2i4",Pc);var wf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,be,Se){var Fe=this.length;return this.resize(Fe+1),this.emplace(Fe,te,pe,be,Se)},C.prototype.emplace=function(te,pe,be,Se,Fe){var tt=te*4;return this.int16[tt+0]=pe,this.int16[tt+1]=be,this.int16[tt+2]=Se,this.int16[tt+3]=Fe,te},C}(Oi);wf.prototype.bytesPerElement=8,Oe("StructArrayLayout4i8",wf);var $f=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,be,Se,Fe,tt){var ct=this.length;return this.resize(ct+1),this.emplace(ct,te,pe,be,Se,Fe,tt)},C.prototype.emplace=function(te,pe,be,Se,Fe,tt,ct){var gt=te*6;return this.int16[gt+0]=pe,this.int16[gt+1]=be,this.int16[gt+2]=Se,this.int16[gt+3]=Fe,this.int16[gt+4]=tt,this.int16[gt+5]=ct,te},C}(Oi);$f.prototype.bytesPerElement=12,Oe("StructArrayLayout2i4i12",$f);var nh=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,be,Se,Fe,tt){var ct=this.length;return this.resize(ct+1),this.emplace(ct,te,pe,be,Se,Fe,tt)},C.prototype.emplace=function(te,pe,be,Se,Fe,tt,ct){var gt=te*4,Rt=te*8;return this.int16[gt+0]=pe,this.int16[gt+1]=be,this.uint8[Rt+4]=Se,this.uint8[Rt+5]=Fe,this.uint8[Rt+6]=tt,this.uint8[Rt+7]=ct,te},C}(Oi);nh.prototype.bytesPerElement=8,Oe("StructArrayLayout2i4ub8",nh);var $s=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,be,Se,Fe,tt,ct,gt,Rt,jt){var Gt=this.length;return this.resize(Gt+1),this.emplace(Gt,te,pe,be,Se,Fe,tt,ct,gt,Rt,jt)},C.prototype.emplace=function(te,pe,be,Se,Fe,tt,ct,gt,Rt,jt,Gt){var lr=te*9,Ir=te*18;return this.uint16[lr+0]=pe,this.uint16[lr+1]=be,this.uint16[lr+2]=Se,this.uint16[lr+3]=Fe,this.uint16[lr+4]=tt,this.uint16[lr+5]=ct,this.uint16[lr+6]=gt,this.uint16[lr+7]=Rt,this.uint8[Ir+16]=jt,this.uint8[Ir+17]=Gt,te},C}(Oi);$s.prototype.bytesPerElement=18,Oe("StructArrayLayout8ui2ub18",$s);var Tf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,be,Se,Fe,tt,ct,gt,Rt,jt,Gt,lr){var Ir=this.length;return this.resize(Ir+1),this.emplace(Ir,te,pe,be,Se,Fe,tt,ct,gt,Rt,jt,Gt,lr)},C.prototype.emplace=function(te,pe,be,Se,Fe,tt,ct,gt,Rt,jt,Gt,lr,Ir){var un=te*12;return this.int16[un+0]=pe,this.int16[un+1]=be,this.int16[un+2]=Se,this.int16[un+3]=Fe,this.uint16[un+4]=tt,this.uint16[un+5]=ct,this.uint16[un+6]=gt,this.uint16[un+7]=Rt,this.int16[un+8]=jt,this.int16[un+9]=Gt,this.int16[un+10]=lr,this.int16[un+11]=Ir,te},C}(Oi);Tf.prototype.bytesPerElement=24,Oe("StructArrayLayout4i4ui4i24",Tf);var iv=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,be){var Se=this.length;return this.resize(Se+1),this.emplace(Se,te,pe,be)},C.prototype.emplace=function(te,pe,be,Se){var Fe=te*3;return this.float32[Fe+0]=pe,this.float32[Fe+1]=be,this.float32[Fe+2]=Se,te},C}(Oi);iv.prototype.bytesPerElement=12,Oe("StructArrayLayout3f12",iv);var ov=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te){var pe=this.length;return this.resize(pe+1),this.emplace(pe,te)},C.prototype.emplace=function(te,pe){var be=te*1;return this.uint32[be+0]=pe,te},C}(Oi);ov.prototype.bytesPerElement=4,Oe("StructArrayLayout1ul4",ov);var Dc=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,be,Se,Fe,tt,ct,gt,Rt){var jt=this.length;return this.resize(jt+1),this.emplace(jt,te,pe,be,Se,Fe,tt,ct,gt,Rt)},C.prototype.emplace=function(te,pe,be,Se,Fe,tt,ct,gt,Rt,jt){var Gt=te*10,lr=te*5;return this.int16[Gt+0]=pe,this.int16[Gt+1]=be,this.int16[Gt+2]=Se,this.int16[Gt+3]=Fe,this.int16[Gt+4]=tt,this.int16[Gt+5]=ct,this.uint32[lr+3]=gt,this.uint16[Gt+8]=Rt,this.uint16[Gt+9]=jt,te},C}(Oi);Dc.prototype.bytesPerElement=20,Oe("StructArrayLayout6i1ul2ui20",Dc);var ah=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,be,Se,Fe,tt){var ct=this.length;return this.resize(ct+1),this.emplace(ct,te,pe,be,Se,Fe,tt)},C.prototype.emplace=function(te,pe,be,Se,Fe,tt,ct){var gt=te*6;return this.int16[gt+0]=pe,this.int16[gt+1]=be,this.int16[gt+2]=Se,this.int16[gt+3]=Fe,this.int16[gt+4]=tt,this.int16[gt+5]=ct,te},C}(Oi);ah.prototype.bytesPerElement=12,Oe("StructArrayLayout2i2i2i12",ah);var ef=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,be,Se,Fe){var tt=this.length;return this.resize(tt+1),this.emplace(tt,te,pe,be,Se,Fe)},C.prototype.emplace=function(te,pe,be,Se,Fe,tt){var ct=te*4,gt=te*8;return this.float32[ct+0]=pe,this.float32[ct+1]=be,this.float32[ct+2]=Se,this.int16[gt+6]=Fe,this.int16[gt+7]=tt,te},C}(Oi);ef.prototype.bytesPerElement=16,Oe("StructArrayLayout2f1f2i16",ef);var dl=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,be,Se){var Fe=this.length;return this.resize(Fe+1),this.emplace(Fe,te,pe,be,Se)},C.prototype.emplace=function(te,pe,be,Se,Fe){var tt=te*12,ct=te*3;return this.uint8[tt+0]=pe,this.uint8[tt+1]=be,this.float32[ct+1]=Se,this.float32[ct+2]=Fe,te},C}(Oi);dl.prototype.bytesPerElement=12,Oe("StructArrayLayout2ub2f12",dl);var tf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,be){var Se=this.length;return this.resize(Se+1),this.emplace(Se,te,pe,be)},C.prototype.emplace=function(te,pe,be,Se){var Fe=te*3;return this.uint16[Fe+0]=pe,this.uint16[Fe+1]=be,this.uint16[Fe+2]=Se,te},C}(Oi);tf.prototype.bytesPerElement=6,Oe("StructArrayLayout3ui6",tf);var Rc=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,be,Se,Fe,tt,ct,gt,Rt,jt,Gt,lr,Ir,un,qr,Mn,bn){var An=this.length;return this.resize(An+1),this.emplace(An,te,pe,be,Se,Fe,tt,ct,gt,Rt,jt,Gt,lr,Ir,un,qr,Mn,bn)},C.prototype.emplace=function(te,pe,be,Se,Fe,tt,ct,gt,Rt,jt,Gt,lr,Ir,un,qr,Mn,bn,An){var Dn=te*24,Xn=te*12,sa=te*48;return this.int16[Dn+0]=pe,this.int16[Dn+1]=be,this.uint16[Dn+2]=Se,this.uint16[Dn+3]=Fe,this.uint32[Xn+2]=tt,this.uint32[Xn+3]=ct,this.uint32[Xn+4]=gt,this.uint16[Dn+10]=Rt,this.uint16[Dn+11]=jt,this.uint16[Dn+12]=Gt,this.float32[Xn+7]=lr,this.float32[Xn+8]=Ir,this.uint8[sa+36]=un,this.uint8[sa+37]=qr,this.uint8[sa+38]=Mn,this.uint32[Xn+10]=bn,this.int16[Dn+22]=An,te},C}(Oi);Rc.prototype.bytesPerElement=48,Oe("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Rc);var ih=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,be,Se,Fe,tt,ct,gt,Rt,jt,Gt,lr,Ir,un,qr,Mn,bn,An,Dn,Xn,sa,na,za,Ta,Sa,ti,Da,Ia){var ui=this.length;return this.resize(ui+1),this.emplace(ui,te,pe,be,Se,Fe,tt,ct,gt,Rt,jt,Gt,lr,Ir,un,qr,Mn,bn,An,Dn,Xn,sa,na,za,Ta,Sa,ti,Da,Ia)},C.prototype.emplace=function(te,pe,be,Se,Fe,tt,ct,gt,Rt,jt,Gt,lr,Ir,un,qr,Mn,bn,An,Dn,Xn,sa,na,za,Ta,Sa,ti,Da,Ia,ui){var qa=te*34,Si=te*17;return this.int16[qa+0]=pe,this.int16[qa+1]=be,this.int16[qa+2]=Se,this.int16[qa+3]=Fe,this.int16[qa+4]=tt,this.int16[qa+5]=ct,this.int16[qa+6]=gt,this.int16[qa+7]=Rt,this.uint16[qa+8]=jt,this.uint16[qa+9]=Gt,this.uint16[qa+10]=lr,this.uint16[qa+11]=Ir,this.uint16[qa+12]=un,this.uint16[qa+13]=qr,this.uint16[qa+14]=Mn,this.uint16[qa+15]=bn,this.uint16[qa+16]=An,this.uint16[qa+17]=Dn,this.uint16[qa+18]=Xn,this.uint16[qa+19]=sa,this.uint16[qa+20]=na,this.uint16[qa+21]=za,this.uint16[qa+22]=Ta,this.uint32[Si+12]=Sa,this.float32[Si+13]=ti,this.float32[Si+14]=Da,this.float32[Si+15]=Ia,this.float32[Si+16]=ui,te},C}(Oi);ih.prototype.bytesPerElement=68,Oe("StructArrayLayout8i15ui1ul4f68",ih);var qf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te){var pe=this.length;return this.resize(pe+1),this.emplace(pe,te)},C.prototype.emplace=function(te,pe){var be=te*1;return this.float32[be+0]=pe,te},C}(Oi);qf.prototype.bytesPerElement=4,Oe("StructArrayLayout1f4",qf);var sv=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,be){var Se=this.length;return this.resize(Se+1),this.emplace(Se,te,pe,be)},C.prototype.emplace=function(te,pe,be,Se){var Fe=te*3;return this.int16[Fe+0]=pe,this.int16[Fe+1]=be,this.int16[Fe+2]=Se,te},C}(Oi);sv.prototype.bytesPerElement=6,Oe("StructArrayLayout3i6",sv);var Af=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,be){var Se=this.length;return this.resize(Se+1),this.emplace(Se,te,pe,be)},C.prototype.emplace=function(te,pe,be,Se){var Fe=te*2,tt=te*4;return this.uint32[Fe+0]=pe,this.uint16[tt+2]=be,this.uint16[tt+3]=Se,te},C}(Oi);Af.prototype.bytesPerElement=8,Oe("StructArrayLayout1ul2ui8",Af);var Ic=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe){var be=this.length;return this.resize(be+1),this.emplace(be,te,pe)},C.prototype.emplace=function(te,pe,be){var Se=te*2;return this.uint16[Se+0]=pe,this.uint16[Se+1]=be,te},C}(Oi);Ic.prototype.bytesPerElement=4,Oe("StructArrayLayout2ui4",Ic);var ec=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te){var pe=this.length;return this.resize(pe+1),this.emplace(pe,te)},C.prototype.emplace=function(te,pe){var be=te*1;return this.uint16[be+0]=pe,te},C}(Oi);ec.prototype.bytesPerElement=2,Oe("StructArrayLayout1ui2",ec);var Mf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe){var be=this.length;return this.resize(be+1),this.emplace(be,te,pe)},C.prototype.emplace=function(te,pe,be){var Se=te*2;return this.float32[Se+0]=pe,this.float32[Se+1]=be,te},C}(Oi);Mf.prototype.bytesPerElement=8,Oe("StructArrayLayout2f8",Mf);var lv=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,be,Se){var Fe=this.length;return this.resize(Fe+1),this.emplace(Fe,te,pe,be,Se)},C.prototype.emplace=function(te,pe,be,Se,Fe){var tt=te*4;return this.float32[tt+0]=pe,this.float32[tt+1]=be,this.float32[tt+2]=Se,this.float32[tt+3]=Fe,te},C}(Oi);lv.prototype.bytesPerElement=16,Oe("StructArrayLayout4f16",lv);var Ap=function(E){function C(){E.apply(this,arguments)}E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C;var N={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return N.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},N.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},N.x1.get=function(){return this._structArray.int16[this._pos2+2]},N.y1.get=function(){return this._structArray.int16[this._pos2+3]},N.x2.get=function(){return this._structArray.int16[this._pos2+4]},N.y2.get=function(){return this._structArray.int16[this._pos2+5]},N.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},N.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},N.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},N.anchorPoint.get=function(){return new c(this.anchorPointX,this.anchorPointY)},Object.defineProperties(C.prototype,N),C}(ji);Ap.prototype.size=20;var Sf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.get=function(te){return new Ap(this,te)},C}(Dc);Oe("CollisionBoxArray",Sf);var uv=function(E){function C(){E.apply(this,arguments)}E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C;var N={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return N.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},N.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},N.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},N.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},N.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},N.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},N.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},N.segment.get=function(){return this._structArray.uint16[this._pos2+10]},N.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},N.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},N.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},N.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},N.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},N.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},N.placedOrientation.set=function(te){this._structArray.uint8[this._pos1+37]=te},N.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},N.hidden.set=function(te){this._structArray.uint8[this._pos1+38]=te},N.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},N.crossTileID.set=function(te){this._structArray.uint32[this._pos4+10]=te},N.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(C.prototype,N),C}(ji);uv.prototype.size=48;var tc=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.get=function(te){return new uv(this,te)},C}(Rc);Oe("PlacedSymbolArray",tc);var Mp=function(E){function C(){E.apply(this,arguments)}E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C;var N={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return N.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},N.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},N.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},N.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},N.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},N.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},N.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},N.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},N.key.get=function(){return this._structArray.uint16[this._pos2+8]},N.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},N.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},N.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},N.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},N.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},N.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},N.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},N.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},N.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},N.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},N.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},N.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},N.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},N.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},N.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},N.crossTileID.set=function(te){this._structArray.uint32[this._pos4+12]=te},N.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},N.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},N.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},N.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(C.prototype,N),C}(ji);Mp.prototype.size=68;var Sp=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.get=function(te){return new Mp(this,te)},C}(ih);Oe("SymbolInstanceArray",Sp);var pu=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.getoffsetX=function(te){return this.float32[te*1+0]},C}(qf);Oe("GlyphOffsetArray",pu);var kp=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.getx=function(te){return this.int16[te*3+0]},C.prototype.gety=function(te){return this.int16[te*3+1]},C.prototype.gettileUnitDistanceFromAnchor=function(te){return this.int16[te*3+2]},C}(sv);Oe("SymbolLineVertexArray",kp);var Ep=function(E){function C(){E.apply(this,arguments)}E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C;var N={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return N.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},N.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},N.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(C.prototype,N),C}(ji);Ep.prototype.size=8;var fv=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.get=function(te){return new Ep(this,te)},C}(Af);Oe("FeatureIndexArray",fv);var Cp=Fo([{name:"a_pos",components:2,type:"Int16"}],4),ve=Cp.members,Y=function(C){C===void 0&&(C=[]),this.segments=C};Y.prototype.prepareSegment=function(C,N,te,pe){var be=this.segments[this.segments.length-1];return C>Y.MAX_VERTEX_ARRAY_LENGTH&&O("Max vertices per segment is "+Y.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+C),(!be||be.vertexLength+C>Y.MAX_VERTEX_ARRAY_LENGTH||be.sortKey!==pe)&&(be={vertexOffset:N.length,primitiveOffset:te.length,vertexLength:0,primitiveLength:0},pe!==void 0&&(be.sortKey=pe),this.segments.push(be)),be},Y.prototype.get=function(){return this.segments},Y.prototype.destroy=function(){for(var C=0,N=this.segments;C<N.length;C+=1){var te=N[C];for(var pe in te.vaos)te.vaos[pe].destroy()}},Y.simpleSegment=function(C,N,te,pe){return new Y([{vertexOffset:C,primitiveOffset:N,vertexLength:te,primitiveLength:pe,vaos:{},sortKey:0}])},Y.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Oe("SegmentVector",Y);function de(E,C){return E=h(Math.floor(E),0,255),C=h(Math.floor(C),0,255),256*E+C}var $=Fo([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),ye=o(function(E){function C(N,te){var pe,be,Se,Fe,tt,ct,gt,Rt;for(pe=N.length&3,be=N.length-pe,Se=te,tt=3432918353,ct=461845907,Rt=0;Rt<be;)gt=N.charCodeAt(Rt)&255|(N.charCodeAt(++Rt)&255)<<8|(N.charCodeAt(++Rt)&255)<<16|(N.charCodeAt(++Rt)&255)<<24,++Rt,gt=(gt&65535)*tt+(((gt>>>16)*tt&65535)<<16)&4294967295,gt=gt<<15|gt>>>17,gt=(gt&65535)*ct+(((gt>>>16)*ct&65535)<<16)&4294967295,Se^=gt,Se=Se<<13|Se>>>19,Fe=(Se&65535)*5+(((Se>>>16)*5&65535)<<16)&4294967295,Se=(Fe&65535)+27492+(((Fe>>>16)+58964&65535)<<16);switch(gt=0,pe){case 3:gt^=(N.charCodeAt(Rt+2)&255)<<16;case 2:gt^=(N.charCodeAt(Rt+1)&255)<<8;case 1:gt^=N.charCodeAt(Rt)&255,gt=(gt&65535)*tt+(((gt>>>16)*tt&65535)<<16)&4294967295,gt=gt<<15|gt>>>17,gt=(gt&65535)*ct+(((gt>>>16)*ct&65535)<<16)&4294967295,Se^=gt}return Se^=N.length,Se^=Se>>>16,Se=(Se&65535)*2246822507+(((Se>>>16)*2246822507&65535)<<16)&4294967295,Se^=Se>>>13,Se=(Se&65535)*3266489909+(((Se>>>16)*3266489909&65535)<<16)&4294967295,Se^=Se>>>16,Se>>>0}E.exports=C}),Ee=o(function(E){function C(N,te){for(var pe=N.length,be=te^pe,Se=0,Fe;pe>=4;)Fe=N.charCodeAt(Se)&255|(N.charCodeAt(++Se)&255)<<8|(N.charCodeAt(++Se)&255)<<16|(N.charCodeAt(++Se)&255)<<24,Fe=(Fe&65535)*1540483477+(((Fe>>>16)*1540483477&65535)<<16),Fe^=Fe>>>24,Fe=(Fe&65535)*1540483477+(((Fe>>>16)*1540483477&65535)<<16),be=(be&65535)*1540483477+(((be>>>16)*1540483477&65535)<<16)^Fe,pe-=4,++Se;switch(pe){case 3:be^=(N.charCodeAt(Se+2)&255)<<16;case 2:be^=(N.charCodeAt(Se+1)&255)<<8;case 1:be^=N.charCodeAt(Se)&255,be=(be&65535)*1540483477+(((be>>>16)*1540483477&65535)<<16)}return be^=be>>>13,be=(be&65535)*1540483477+(((be>>>16)*1540483477&65535)<<16),be^=be>>>15,be>>>0}E.exports=C}),Pe=ye,Ze=ye,ft=Ee;Pe.murmur3=Ze,Pe.murmur2=ft;var Mt=function(){this.ids=[],this.positions=[],this.indexed=!1};Mt.prototype.add=function(C,N,te,pe){this.ids.push($t(C)),this.positions.push(N,te,pe)},Mt.prototype.getPositions=function(C){for(var N=$t(C),te=0,pe=this.ids.length-1;te<pe;){var be=te+pe>>1;this.ids[be]>=N?pe=be:te=be+1}for(var Se=[];this.ids[te]===N;){var Fe=this.positions[3*te],tt=this.positions[3*te+1],ct=this.positions[3*te+2];Se.push({index:Fe,start:tt,end:ct}),te++}return Se},Mt.serialize=function(C,N){var te=new Float64Array(C.ids),pe=new Uint32Array(C.positions);return or(te,pe,0,te.length-1),N&&N.push(te.buffer,pe.buffer),{ids:te,positions:pe}},Mt.deserialize=function(C){var N=new Mt;return N.ids=C.ids,N.positions=C.positions,N.indexed=!0,N};var Ht=Math.pow(2,53)-1;function $t(E){var C=+E;return!isNaN(C)&&C<=Ht?C:Pe(String(E))}function or(E,C,N,te){for(;N<te;){for(var pe=E[N+te>>1],be=N-1,Se=te+1;;){do be++;while(E[be]<pe);do Se--;while(E[Se]>pe);if(be>=Se)break;Tr(E,be,Se),Tr(C,3*be,3*Se),Tr(C,3*be+1,3*Se+1),Tr(C,3*be+2,3*Se+2)}Se-N<te-Se?(or(E,C,N,Se),N=Se+1):(or(E,C,Se+1,te),te=Se)}}function Tr(E,C,N){var te=E[C];E[C]=E[N],E[N]=te}Oe("FeaturePositionMap",Mt);var Ur=function(C,N){this.gl=C.gl,this.location=N},Hr=function(E){function C(N,te){E.call(this,N,te),this.current=0}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function(te){this.current!==te&&(this.current=te,this.gl.uniform1i(this.location,te))},C}(Ur),Br=function(E){function C(N,te){E.call(this,N,te),this.current=0}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function(te){this.current!==te&&(this.current=te,this.gl.uniform1f(this.location,te))},C}(Ur),Jr=function(E){function C(N,te){E.call(this,N,te),this.current=[0,0]}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function(te){(te[0]!==this.current[0]||te[1]!==this.current[1])&&(this.current=te,this.gl.uniform2f(this.location,te[0],te[1]))},C}(Ur),hn=function(E){function C(N,te){E.call(this,N,te),this.current=[0,0,0]}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function(te){(te[0]!==this.current[0]||te[1]!==this.current[1]||te[2]!==this.current[2])&&(this.current=te,this.gl.uniform3f(this.location,te[0],te[1],te[2]))},C}(Ur),kn=function(E){function C(N,te){E.call(this,N,te),this.current=[0,0,0,0]}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function(te){(te[0]!==this.current[0]||te[1]!==this.current[1]||te[2]!==this.current[2]||te[3]!==this.current[3])&&(this.current=te,this.gl.uniform4f(this.location,te[0],te[1],te[2],te[3]))},C}(Ur),Nn=function(E){function C(N,te){E.call(this,N,te),this.current=hi.transparent}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function(te){(te.r!==this.current.r||te.g!==this.current.g||te.b!==this.current.b||te.a!==this.current.a)&&(this.current=te,this.gl.uniform4f(this.location,te.r,te.g,te.b,te.a))},C}(Ur),Kn=new Float32Array(16),qn=function(E){function C(N,te){E.call(this,N,te),this.current=Kn}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function(te){if(te[12]!==this.current[12]||te[0]!==this.current[0]){this.current=te,this.gl.uniformMatrix4fv(this.location,!1,te);return}for(var pe=1;pe<16;pe++)if(te[pe]!==this.current[pe]){this.current=te,this.gl.uniformMatrix4fv(this.location,!1,te);break}},C}(Ur);function Qn(E){return[de(255*E.r,255*E.g),de(255*E.b,255*E.a)]}var va=function(C,N,te){this.value=C,this.uniformNames=N.map(function(pe){return"u_"+pe}),this.type=te};va.prototype.setUniform=function(C,N,te){C.set(te.constantOr(this.value))},va.prototype.getBinding=function(C,N,te){return this.type==="color"?new Nn(C,N):new Br(C,N)};var _a=function(C,N){this.uniformNames=N.map(function(te){return"u_"+te}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};_a.prototype.setConstantPatternPositions=function(C,N){this.pixelRatioFrom=N.pixelRatio,this.pixelRatioTo=C.pixelRatio,this.patternFrom=N.tlbr,this.patternTo=C.tlbr},_a.prototype.setUniform=function(C,N,te,pe){var be=pe==="u_pattern_to"?this.patternTo:pe==="u_pattern_from"?this.patternFrom:pe==="u_pixel_ratio_to"?this.pixelRatioTo:pe==="u_pixel_ratio_from"?this.pixelRatioFrom:null;be&&C.set(be)},_a.prototype.getBinding=function(C,N,te){return te.substr(0,9)==="u_pattern"?new kn(C,N):new Br(C,N)};var xa=function(C,N,te,pe){this.expression=C,this.type=te,this.maxValue=0,this.paintVertexAttributes=N.map(function(be){return{name:"a_"+be,type:"Float32",components:te==="color"?2:1,offset:0}}),this.paintVertexArray=new pe};xa.prototype.populatePaintArray=function(C,N,te,pe,be){var Se=this.paintVertexArray.length,Fe=this.expression.evaluate(new si(0),N,{},pe,[],be);this.paintVertexArray.resize(C),this._setPaintValue(Se,C,Fe)},xa.prototype.updatePaintArray=function(C,N,te,pe){var be=this.expression.evaluate({zoom:0},te,pe);this._setPaintValue(C,N,be)},xa.prototype._setPaintValue=function(C,N,te){if(this.type==="color")for(var pe=Qn(te),be=C;be<N;be++)this.paintVertexArray.emplace(be,pe[0],pe[1]);else{for(var Se=C;Se<N;Se++)this.paintVertexArray.emplace(Se,te);this.maxValue=Math.max(this.maxValue,Math.abs(te))}},xa.prototype.upload=function(C){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=C.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},xa.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Ma=function(C,N,te,pe,be,Se){this.expression=C,this.uniformNames=N.map(function(Fe){return"u_"+Fe+"_t"}),this.type=te,this.useIntegerZoom=pe,this.zoom=be,this.maxValue=0,this.paintVertexAttributes=N.map(function(Fe){return{name:"a_"+Fe,type:"Float32",components:te==="color"?4:2,offset:0}}),this.paintVertexArray=new Se};Ma.prototype.populatePaintArray=function(C,N,te,pe,be){var Se=this.expression.evaluate(new si(this.zoom),N,{},pe,[],be),Fe=this.expression.evaluate(new si(this.zoom+1),N,{},pe,[],be),tt=this.paintVertexArray.length;this.paintVertexArray.resize(C),this._setPaintValue(tt,C,Se,Fe)},Ma.prototype.updatePaintArray=function(C,N,te,pe){var be=this.expression.evaluate({zoom:this.zoom},te,pe),Se=this.expression.evaluate({zoom:this.zoom+1},te,pe);this._setPaintValue(C,N,be,Se)},Ma.prototype._setPaintValue=function(C,N,te,pe){if(this.type==="color")for(var be=Qn(te),Se=Qn(pe),Fe=C;Fe<N;Fe++)this.paintVertexArray.emplace(Fe,be[0],be[1],Se[0],Se[1]);else{for(var tt=C;tt<N;tt++)this.paintVertexArray.emplace(tt,te,pe);this.maxValue=Math.max(this.maxValue,Math.abs(te),Math.abs(pe))}},Ma.prototype.upload=function(C){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=C.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ma.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ma.prototype.setUniform=function(C,N){var te=this.useIntegerZoom?Math.floor(N.zoom):N.zoom,pe=h(this.expression.interpolationFactor(te,this.zoom,this.zoom+1),0,1);C.set(pe)},Ma.prototype.getBinding=function(C,N,te){return new Br(C,N)};var Pa=function(C,N,te,pe,be,Se){this.expression=C,this.type=N,this.useIntegerZoom=te,this.zoom=pe,this.layerId=Se,this.zoomInPaintVertexArray=new be,this.zoomOutPaintVertexArray=new be};Pa.prototype.populatePaintArray=function(C,N,te){var pe=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(C),this.zoomOutPaintVertexArray.resize(C),this._setPaintValues(pe,C,N.patterns&&N.patterns[this.layerId],te)},Pa.prototype.updatePaintArray=function(C,N,te,pe,be){this._setPaintValues(C,N,te.patterns&&te.patterns[this.layerId],be)},Pa.prototype._setPaintValues=function(C,N,te,pe){if(!(!pe||!te)){var be=te.min,Se=te.mid,Fe=te.max,tt=pe[be],ct=pe[Se],gt=pe[Fe];if(!(!tt||!ct||!gt))for(var Rt=C;Rt<N;Rt++)this.zoomInPaintVertexArray.emplace(Rt,ct.tl[0],ct.tl[1],ct.br[0],ct.br[1],tt.tl[0],tt.tl[1],tt.br[0],tt.br[1],ct.pixelRatio,tt.pixelRatio),this.zoomOutPaintVertexArray.emplace(Rt,ct.tl[0],ct.tl[1],ct.br[0],ct.br[1],gt.tl[0],gt.tl[1],gt.br[0],gt.br[1],ct.pixelRatio,gt.pixelRatio)}},Pa.prototype.upload=function(C){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=C.createVertexBuffer(this.zoomInPaintVertexArray,$.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=C.createVertexBuffer(this.zoomOutPaintVertexArray,$.members,this.expression.isStateDependent))},Pa.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ga=function(C,N,te,pe){this.binders={},this.layoutAttributes=pe,this._buffers=[];var be=[];for(var Se in C.paint._values)if(!!te(Se)){var Fe=C.paint.get(Se);if(!(!(Fe instanceof Gi)||!oi(Fe.property.specification))){var tt=Ci(Se,C.type),ct=Fe.value,gt=Fe.property.specification.type,Rt=Fe.property.useIntegerZoom,jt=Fe.property.specification["property-type"],Gt=jt==="cross-faded"||jt==="cross-faded-data-driven";if(ct.kind==="constant")this.binders[Se]=Gt?new _a(ct.value,tt):new va(ct.value,tt,gt),be.push("/u_"+Se);else if(ct.kind==="source"||Gt){var lr=vi(Se,gt,"source");this.binders[Se]=Gt?new Pa(ct,gt,Rt,N,lr,C.id):new xa(ct,tt,gt,lr),be.push("/a_"+Se)}else{var Ir=vi(Se,gt,"composite");this.binders[Se]=new Ma(ct,tt,gt,Rt,N,Ir),be.push("/z_"+Se)}}}this.cacheKey=be.sort().join("")};Ga.prototype.getMaxValue=function(C){var N=this.binders[C];return N instanceof xa||N instanceof Ma?N.maxValue:0},Ga.prototype.populatePaintArrays=function(C,N,te,pe,be){for(var Se in this.binders){var Fe=this.binders[Se];(Fe instanceof xa||Fe instanceof Ma||Fe instanceof Pa)&&Fe.populatePaintArray(C,N,te,pe,be)}},Ga.prototype.setConstantPatternPositions=function(C,N){for(var te in this.binders){var pe=this.binders[te];pe instanceof _a&&pe.setConstantPatternPositions(C,N)}},Ga.prototype.updatePaintArrays=function(C,N,te,pe,be){var Se=!1;for(var Fe in C)for(var tt=N.getPositions(Fe),ct=0,gt=tt;ct<gt.length;ct+=1){var Rt=gt[ct],jt=te.feature(Rt.index);for(var Gt in this.binders){var lr=this.binders[Gt];if((lr instanceof xa||lr instanceof Ma||lr instanceof Pa)&&lr.expression.isStateDependent===!0){var Ir=pe.paint.get(Gt);lr.expression=Ir.value,lr.updatePaintArray(Rt.start,Rt.end,jt,C[Fe],be),Se=!0}}}return Se},Ga.prototype.defines=function(){var C=[];for(var N in this.binders){var te=this.binders[N];(te instanceof va||te instanceof _a)&&C.push.apply(C,te.uniformNames.map(function(pe){return"#define HAS_UNIFORM_"+pe}))}return C},Ga.prototype.getPaintVertexBuffers=function(){return this._buffers},Ga.prototype.getUniforms=function(C,N){var te=[];for(var pe in this.binders){var be=this.binders[pe];if(be instanceof va||be instanceof _a||be instanceof Ma)for(var Se=0,Fe=be.uniformNames;Se<Fe.length;Se+=1){var tt=Fe[Se];if(N[tt]){var ct=be.getBinding(C,N[tt],tt);te.push({name:tt,property:pe,binding:ct})}}}return te},Ga.prototype.setUniforms=function(C,N,te,pe){for(var be=0,Se=N;be<Se.length;be+=1){var Fe=Se[be],tt=Fe.name,ct=Fe.property,gt=Fe.binding;this.binders[ct].setUniform(gt,pe,te.get(ct),tt)}},Ga.prototype.updatePaintBuffers=function(C){this._buffers=[];for(var N in this.binders){var te=this.binders[N];if(C&&te instanceof Pa){var pe=C.fromScale===2?te.zoomInPaintVertexBuffer:te.zoomOutPaintVertexBuffer;pe&&this._buffers.push(pe)}else(te instanceof xa||te instanceof Ma)&&te.paintVertexBuffer&&this._buffers.push(te.paintVertexBuffer)}},Ga.prototype.upload=function(C){for(var N in this.binders){var te=this.binders[N];(te instanceof xa||te instanceof Ma||te instanceof Pa)&&te.upload(C)}this.updatePaintBuffers()},Ga.prototype.destroy=function(){for(var C in this.binders){var N=this.binders[C];(N instanceof xa||N instanceof Ma||N instanceof Pa)&&N.destroy()}};var ni=function(C,N,te,pe){pe===void 0&&(pe=function(){return!0}),this.programConfigurations={};for(var be=0,Se=N;be<Se.length;be+=1){var Fe=Se[be];this.programConfigurations[Fe.id]=new Ga(Fe,te,pe,C)}this.needsUpload=!1,this._featureMap=new Mt,this._bufferOffset=0};ni.prototype.populatePaintArrays=function(C,N,te,pe,be,Se){for(var Fe in this.programConfigurations)this.programConfigurations[Fe].populatePaintArrays(C,N,pe,be,Se);N.id!==void 0&&this._featureMap.add(N.id,te,this._bufferOffset,C),this._bufferOffset=C,this.needsUpload=!0},ni.prototype.updatePaintArrays=function(C,N,te,pe){for(var be=0,Se=te;be<Se.length;be+=1){var Fe=Se[be];this.needsUpload=this.programConfigurations[Fe.id].updatePaintArrays(C,this._featureMap,N,Fe,pe)||this.needsUpload}},ni.prototype.get=function(C){return this.programConfigurations[C]},ni.prototype.upload=function(C){if(!!this.needsUpload){for(var N in this.programConfigurations)this.programConfigurations[N].upload(C);this.needsUpload=!1}},ni.prototype.destroy=function(){for(var C in this.programConfigurations)this.programConfigurations[C].destroy()};function Ci(E,C){var N={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]};return N[E]||[E.replace(C+"-","").replace(/-/g,"_")]}function li(E){var C={"line-pattern":{source:$s,composite:$s},"fill-pattern":{source:$s,composite:$s},"fill-extrusion-pattern":{source:$s,composite:$s}};return C[E]}function vi(E,C,N){var te={color:{source:Mf,composite:lv},number:{source:qf,composite:Mf}},pe=li(E);return pe&&pe[N]||te[C][N]}Oe("ConstantBinder",va),Oe("CrossFadedConstantBinder",_a),Oe("SourceExpressionBinder",xa),Oe("CrossFadedCompositeBinder",Pa),Oe("CompositeExpressionBinder",Ma),Oe("ProgramConfiguration",Ga,{omit:["_buffers"]}),Oe("ProgramConfigurationSet",ni);var Ua=8192;function Li(E){return{min:-1*Math.pow(2,E-1),max:Math.pow(2,E-1)-1}}var zi=Li(15);function Bi(E){for(var C=Ua/E.extent,N=E.loadGeometry(),te=0;te<N.length;te++)for(var pe=N[te],be=0;be<pe.length;be++){var Se=pe[be];Se.x=Math.round(Se.x*C),Se.y=Math.round(Se.y*C),(Se.x<zi.min||Se.x>zi.max||Se.y<zi.min||Se.y>zi.max)&&(O("Geometry exceeds allowed extent, reduce your vector tile buffer size"),Se.x=h(Se.x,zi.min,zi.max),Se.y=h(Se.y,zi.min,zi.max))}return N}function bi(E,C,N,te,pe){E.emplaceBack(C*2+(te+1)/2,N*2+(pe+1)/2)}var Zi=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=C.index,this.hasPattern=!1,this.layoutVertexArray=new Pc,this.indexArray=new tf,this.segments=new Y,this.programConfigurations=new ni(ve,C.layers,C.zoom),this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};Zi.prototype.populate=function(C,N,te){var pe=this.layers[0],be=[],Se=null;pe.type==="circle"&&(Se=pe.layout.get("circle-sort-key"));for(var Fe=0,tt=C;Fe<tt.length;Fe+=1){var ct=tt[Fe],gt=ct.feature,Rt=ct.id,jt=ct.index,Gt=ct.sourceLayerIndex,lr=this.layers[0]._featureFilter.needGeometry,Ir={type:gt.type,id:Rt,properties:gt.properties,geometry:lr?Bi(gt):[]};if(!!this.layers[0]._featureFilter.filter(new si(this.zoom),Ir,te)){lr||(Ir.geometry=Bi(gt));var un=Se?Se.evaluate(Ir,{},te):void 0,qr={id:Rt,properties:gt.properties,type:gt.type,sourceLayerIndex:Gt,index:jt,geometry:Ir.geometry,patterns:{},sortKey:un};be.push(qr)}}Se&&be.sort(function(Ta,Sa){return Ta.sortKey-Sa.sortKey});for(var Mn=0,bn=be;Mn<bn.length;Mn+=1){var An=bn[Mn],Dn=An,Xn=Dn.geometry,sa=Dn.index,na=Dn.sourceLayerIndex,za=C[sa].feature;this.addFeature(An,Xn,sa,te),N.featureIndex.insert(za,Xn,sa,na,this.index)}},Zi.prototype.update=function(C,N,te){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,N,this.stateDependentLayers,te)},Zi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Zi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Zi.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,ve),this.indexBuffer=C.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(C),this.uploaded=!0},Zi.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Zi.prototype.addFeature=function(C,N,te,pe){for(var be=0,Se=N;be<Se.length;be+=1)for(var Fe=Se[be],tt=0,ct=Fe;tt<ct.length;tt+=1){var gt=ct[tt],Rt=gt.x,jt=gt.y;if(!(Rt<0||Rt>=Ua||jt<0||jt>=Ua)){var Gt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,C.sortKey),lr=Gt.vertexLength;bi(this.layoutVertexArray,Rt,jt,-1,-1),bi(this.layoutVertexArray,Rt,jt,1,-1),bi(this.layoutVertexArray,Rt,jt,1,1),bi(this.layoutVertexArray,Rt,jt,-1,1),this.indexArray.emplaceBack(lr,lr+1,lr+2),this.indexArray.emplaceBack(lr,lr+3,lr+2),Gt.vertexLength+=4,Gt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,te,{},pe)},Oe("CircleBucket",Zi,{omit:["layers"]});function ii(E,C){for(var N=0;N<E.length;N++)if(qs(C,E[N]))return!0;for(var te=0;te<C.length;te++)if(qs(E,C[te]))return!0;return!!Jl(E,C)}function _i(E,C,N){return!!(qs(E,C)||Eu(C,E,N))}function wo(E,C){if(E.length===1)return Cu(C,E[0]);for(var N=0;N<C.length;N++)for(var te=C[N],pe=0;pe<te.length;pe++)if(qs(E,te[pe]))return!0;for(var be=0;be<E.length;be++)if(Cu(C,E[be]))return!0;for(var Se=0;Se<C.length;Se++)if(Jl(E,C[Se]))return!0;return!1}function Vo(E,C,N){for(var te=0;te<C.length;te++){var pe=C[te];if(E.length>=3){for(var be=0;be<pe.length;be++)if(qs(E,pe[be]))return!0}if(Kl(E,pe,N))return!0}return!1}function Kl(E,C,N){if(E.length>1){if(Jl(E,C))return!0;for(var te=0;te<C.length;te++)if(Eu(C[te],E,N))return!0}for(var pe=0;pe<E.length;pe++)if(Eu(E[pe],C,N))return!0;return!1}function Jl(E,C){if(E.length===0||C.length===0)return!1;for(var N=0;N<E.length-1;N++)for(var te=E[N],pe=E[N+1],be=0;be<C.length-1;be++){var Se=C[be],Fe=C[be+1];if(ku(te,pe,Se,Fe))return!0}return!1}function ku(E,C,N,te){return F(E,N,te)!==F(C,N,te)&&F(E,C,N)!==F(E,C,te)}function Eu(E,C,N){var te=N*N;if(C.length===1)return E.distSqr(C[0])<te;for(var pe=1;pe<C.length;pe++){var be=C[pe-1],Se=C[pe];if(rf(E,be,Se)<te)return!0}return!1}function rf(E,C,N){var te=C.distSqr(N);if(te===0)return E.distSqr(C);var pe=((E.x-C.x)*(N.x-C.x)+(E.y-C.y)*(N.y-C.y))/te;return pe<0?E.distSqr(C):pe>1?E.distSqr(N):E.distSqr(N.sub(C)._mult(pe)._add(C))}function Cu(E,C){for(var N=!1,te,pe,be,Se=0;Se<E.length;Se++){te=E[Se];for(var Fe=0,tt=te.length-1;Fe<te.length;tt=Fe++)pe=te[Fe],be=te[tt],pe.y>C.y!=be.y>C.y&&C.x<(be.x-pe.x)*(C.y-pe.y)/(be.y-pe.y)+pe.x&&(N=!N)}return N}function qs(E,C){for(var N=!1,te=0,pe=E.length-1;te<E.length;pe=te++){var be=E[te],Se=E[pe];be.y>C.y!=Se.y>C.y&&C.x<(Se.x-be.x)*(C.y-be.y)/(Se.y-be.y)+be.x&&(N=!N)}return N}function kf(E,C,N,te,pe){for(var be=0,Se=E;be<Se.length;be+=1){var Fe=Se[be];if(C<=Fe.x&&N<=Fe.y&&te>=Fe.x&&pe>=Fe.y)return!0}var tt=[new c(C,N),new c(C,pe),new c(te,pe),new c(te,N)];if(E.length>2)for(var ct=0,gt=tt;ct<gt.length;ct+=1){var Rt=gt[ct];if(qs(E,Rt))return!0}for(var jt=0;jt<E.length-1;jt++){var Gt=E[jt],lr=E[jt+1];if(Es(Gt,lr,tt))return!0}return!1}function Es(E,C,N){var te=N[0],pe=N[2];if(E.x<te.x&&C.x<te.x||E.x>pe.x&&C.x>pe.x||E.y<te.y&&C.y<te.y||E.y>pe.y&&C.y>pe.y)return!1;var be=F(E,C,N[0]);return be!==F(E,C,N[1])||be!==F(E,C,N[2])||be!==F(E,C,N[3])}function Rl(E,C,N){var te=C.paint.get(E).value;return te.kind==="constant"?te.value:N.programConfigurations.get(C.id).getMaxValue(E)}function Lu(E){return Math.sqrt(E[0]*E[0]+E[1]*E[1])}function du(E,C,N,te,pe){if(!C[0]&&!C[1])return E;var be=c.convert(C)._mult(pe);N==="viewport"&&be._rotate(-te);for(var Se=[],Fe=0;Fe<E.length;Fe++){var tt=E[Fe];Se.push(tt.sub(be))}return Se}var Pu=new Xi({"circle-sort-key":new ja(mr.layout_circle["circle-sort-key"])}),oh=new Xi({"circle-radius":new ja(mr.paint_circle["circle-radius"]),"circle-color":new ja(mr.paint_circle["circle-color"]),"circle-blur":new ja(mr.paint_circle["circle-blur"]),"circle-opacity":new ja(mr.paint_circle["circle-opacity"]),"circle-translate":new Fa(mr.paint_circle["circle-translate"]),"circle-translate-anchor":new Fa(mr.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Fa(mr.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Fa(mr.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ja(mr.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ja(mr.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ja(mr.paint_circle["circle-stroke-opacity"])}),Nf={paint:oh,layout:Pu},xs=typeof Float32Array!="undefined"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var E=arguments,C=0,N=arguments.length;N--;)C+=E[N]*E[N];return Math.sqrt(C)});function zc(){var E=new xs(4);return xs!=Float32Array&&(E[1]=0,E[2]=0),E[0]=1,E[3]=1,E}function Ns(E,C,N){var te=C[0],pe=C[1],be=C[2],Se=C[3],Fe=Math.sin(N),tt=Math.cos(N);return E[0]=te*tt+be*Fe,E[1]=pe*tt+Se*Fe,E[2]=te*-Fe+be*tt,E[3]=pe*-Fe+Se*tt,E}function Fc(){var E=new xs(9);return xs!=Float32Array&&(E[1]=0,E[2]=0,E[3]=0,E[5]=0,E[6]=0,E[7]=0),E[0]=1,E[4]=1,E[8]=1,E}function sh(E,C){var N=Math.sin(C),te=Math.cos(C);return E[0]=te,E[1]=N,E[2]=0,E[3]=-N,E[4]=te,E[5]=0,E[6]=0,E[7]=0,E[8]=1,E}function lh(){var E=new xs(16);return xs!=Float32Array&&(E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[11]=0,E[12]=0,E[13]=0,E[14]=0),E[0]=1,E[5]=1,E[10]=1,E[15]=1,E}function Lp(E){var C=new xs(16);return C[0]=E[0],C[1]=E[1],C[2]=E[2],C[3]=E[3],C[4]=E[4],C[5]=E[5],C[6]=E[6],C[7]=E[7],C[8]=E[8],C[9]=E[9],C[10]=E[10],C[11]=E[11],C[12]=E[12],C[13]=E[13],C[14]=E[14],C[15]=E[15],C}function uh(E){return E[0]=1,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=1,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[10]=1,E[11]=0,E[12]=0,E[13]=0,E[14]=0,E[15]=1,E}function rc(E,C){var N=C[0],te=C[1],pe=C[2],be=C[3],Se=C[4],Fe=C[5],tt=C[6],ct=C[7],gt=C[8],Rt=C[9],jt=C[10],Gt=C[11],lr=C[12],Ir=C[13],un=C[14],qr=C[15],Mn=N*Fe-te*Se,bn=N*tt-pe*Se,An=N*ct-be*Se,Dn=te*tt-pe*Fe,Xn=te*ct-be*Fe,sa=pe*ct-be*tt,na=gt*Ir-Rt*lr,za=gt*un-jt*lr,Ta=gt*qr-Gt*lr,Sa=Rt*un-jt*Ir,ti=Rt*qr-Gt*Ir,Da=jt*qr-Gt*un,Ia=Mn*Da-bn*ti+An*Sa+Dn*Ta-Xn*za+sa*na;return Ia?(Ia=1/Ia,E[0]=(Fe*Da-tt*ti+ct*Sa)*Ia,E[1]=(pe*ti-te*Da-be*Sa)*Ia,E[2]=(Ir*sa-un*Xn+qr*Dn)*Ia,E[3]=(jt*Xn-Rt*sa-Gt*Dn)*Ia,E[4]=(tt*Ta-Se*Da-ct*za)*Ia,E[5]=(N*Da-pe*Ta+be*za)*Ia,E[6]=(un*An-lr*sa-qr*bn)*Ia,E[7]=(gt*sa-jt*An+Gt*bn)*Ia,E[8]=(Se*ti-Fe*Ta+ct*na)*Ia,E[9]=(te*Ta-N*ti-be*na)*Ia,E[10]=(lr*Xn-Ir*An+qr*Mn)*Ia,E[11]=(Rt*An-gt*Xn-Gt*Mn)*Ia,E[12]=(Fe*za-Se*Sa-tt*na)*Ia,E[13]=(N*Sa-te*za+pe*na)*Ia,E[14]=(Ir*bn-lr*Dn-un*Mn)*Ia,E[15]=(gt*Dn-Rt*bn+jt*Mn)*Ia,E):null}function nc(E,C,N){var te=C[0],pe=C[1],be=C[2],Se=C[3],Fe=C[4],tt=C[5],ct=C[6],gt=C[7],Rt=C[8],jt=C[9],Gt=C[10],lr=C[11],Ir=C[12],un=C[13],qr=C[14],Mn=C[15],bn=N[0],An=N[1],Dn=N[2],Xn=N[3];return E[0]=bn*te+An*Fe+Dn*Rt+Xn*Ir,E[1]=bn*pe+An*tt+Dn*jt+Xn*un,E[2]=bn*be+An*ct+Dn*Gt+Xn*qr,E[3]=bn*Se+An*gt+Dn*lr+Xn*Mn,bn=N[4],An=N[5],Dn=N[6],Xn=N[7],E[4]=bn*te+An*Fe+Dn*Rt+Xn*Ir,E[5]=bn*pe+An*tt+Dn*jt+Xn*un,E[6]=bn*be+An*ct+Dn*Gt+Xn*qr,E[7]=bn*Se+An*gt+Dn*lr+Xn*Mn,bn=N[8],An=N[9],Dn=N[10],Xn=N[11],E[8]=bn*te+An*Fe+Dn*Rt+Xn*Ir,E[9]=bn*pe+An*tt+Dn*jt+Xn*un,E[10]=bn*be+An*ct+Dn*Gt+Xn*qr,E[11]=bn*Se+An*gt+Dn*lr+Xn*Mn,bn=N[12],An=N[13],Dn=N[14],Xn=N[15],E[12]=bn*te+An*Fe+Dn*Rt+Xn*Ir,E[13]=bn*pe+An*tt+Dn*jt+Xn*un,E[14]=bn*be+An*ct+Dn*Gt+Xn*qr,E[15]=bn*Se+An*gt+Dn*lr+Xn*Mn,E}function Lo(E,C,N){var te=N[0],pe=N[1],be=N[2],Se,Fe,tt,ct,gt,Rt,jt,Gt,lr,Ir,un,qr;return C===E?(E[12]=C[0]*te+C[4]*pe+C[8]*be+C[12],E[13]=C[1]*te+C[5]*pe+C[9]*be+C[13],E[14]=C[2]*te+C[6]*pe+C[10]*be+C[14],E[15]=C[3]*te+C[7]*pe+C[11]*be+C[15]):(Se=C[0],Fe=C[1],tt=C[2],ct=C[3],gt=C[4],Rt=C[5],jt=C[6],Gt=C[7],lr=C[8],Ir=C[9],un=C[10],qr=C[11],E[0]=Se,E[1]=Fe,E[2]=tt,E[3]=ct,E[4]=gt,E[5]=Rt,E[6]=jt,E[7]=Gt,E[8]=lr,E[9]=Ir,E[10]=un,E[11]=qr,E[12]=Se*te+gt*pe+lr*be+C[12],E[13]=Fe*te+Rt*pe+Ir*be+C[13],E[14]=tt*te+jt*pe+un*be+C[14],E[15]=ct*te+Gt*pe+qr*be+C[15]),E}function yl(E,C,N){var te=N[0],pe=N[1],be=N[2];return E[0]=C[0]*te,E[1]=C[1]*te,E[2]=C[2]*te,E[3]=C[3]*te,E[4]=C[4]*pe,E[5]=C[5]*pe,E[6]=C[6]*pe,E[7]=C[7]*pe,E[8]=C[8]*be,E[9]=C[9]*be,E[10]=C[10]*be,E[11]=C[11]*be,E[12]=C[12],E[13]=C[13],E[14]=C[14],E[15]=C[15],E}function ml(E,C,N){var te=Math.sin(N),pe=Math.cos(N),be=C[4],Se=C[5],Fe=C[6],tt=C[7],ct=C[8],gt=C[9],Rt=C[10],jt=C[11];return C!==E&&(E[0]=C[0],E[1]=C[1],E[2]=C[2],E[3]=C[3],E[12]=C[12],E[13]=C[13],E[14]=C[14],E[15]=C[15]),E[4]=be*pe+ct*te,E[5]=Se*pe+gt*te,E[6]=Fe*pe+Rt*te,E[7]=tt*pe+jt*te,E[8]=ct*pe-be*te,E[9]=gt*pe-Se*te,E[10]=Rt*pe-Fe*te,E[11]=jt*pe-tt*te,E}function fh(E,C,N){var te=Math.sin(N),pe=Math.cos(N),be=C[0],Se=C[1],Fe=C[2],tt=C[3],ct=C[4],gt=C[5],Rt=C[6],jt=C[7];return C!==E&&(E[8]=C[8],E[9]=C[9],E[10]=C[10],E[11]=C[11],E[12]=C[12],E[13]=C[13],E[14]=C[14],E[15]=C[15]),E[0]=be*pe+ct*te,E[1]=Se*pe+gt*te,E[2]=Fe*pe+Rt*te,E[3]=tt*pe+jt*te,E[4]=ct*pe-be*te,E[5]=gt*pe-Se*te,E[6]=Rt*pe-Fe*te,E[7]=jt*pe-tt*te,E}function cv(E,C,N,te,pe){var be=1/Math.tan(C/2),Se;return E[0]=be/N,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=be,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[11]=-1,E[12]=0,E[13]=0,E[15]=0,pe!=null&&pe!==1/0?(Se=1/(te-pe),E[10]=(pe+te)*Se,E[14]=2*pe*te*Se):(E[10]=-1,E[14]=-2*te),E}function o0(E,C,N,te,pe,be,Se){var Fe=1/(C-N),tt=1/(te-pe),ct=1/(be-Se);return E[0]=-2*Fe,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=-2*tt,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[10]=2*ct,E[11]=0,E[12]=(C+N)*Fe,E[13]=(pe+te)*tt,E[14]=(Se+be)*ct,E[15]=1,E}var s0=nc;function Oc(){var E=new xs(3);return xs!=Float32Array&&(E[0]=0,E[1]=0,E[2]=0),E}function l0(E){var C=new xs(3);return C[0]=E[0],C[1]=E[1],C[2]=E[2],C}function ch(E,C,N){return E[0]=C[0]+N[0],E[1]=C[1]+N[1],E[2]=C[2]+N[2],E}function u0(E,C,N){return E[0]=C[0]-N[0],E[1]=C[1]-N[1],E[2]=C[2]-N[2],E}function f0(E,C,N){return E[0]=C[0]*N,E[1]=C[1]*N,E[2]=C[2]*N,E}function hv(E,C){var N=C[0],te=C[1],pe=C[2],be=N*N+te*te+pe*pe;return be>0&&(be=1/Math.sqrt(be)),E[0]=C[0]*be,E[1]=C[1]*be,E[2]=C[2]*be,E}function g2(E,C){return E[0]*C[0]+E[1]*C[1]+E[2]*C[2]}function y2(E,C,N){var te=C[0],pe=C[1],be=C[2],Se=N[0],Fe=N[1],tt=N[2];return E[0]=pe*tt-be*Fe,E[1]=be*Se-te*tt,E[2]=te*Fe-pe*Se,E}function m2(E,C,N){var te=C[0],pe=C[1],be=C[2];return E[0]=te*N[0]+pe*N[3]+be*N[6],E[1]=te*N[1]+pe*N[4]+be*N[7],E[2]=te*N[2]+pe*N[5]+be*N[8],E}var x2=u0;(function(){var E=Oc();return function(C,N,te,pe,be,Se){var Fe,tt;for(N||(N=3),te||(te=0),pe?tt=Math.min(pe*N+te,C.length):tt=C.length,Fe=te;Fe<tt;Fe+=N)E[0]=C[Fe],E[1]=C[Fe+1],E[2]=C[Fe+2],be(E,E,Se),C[Fe]=E[0],C[Fe+1]=E[1],C[Fe+2]=E[2];return C}})();function b2(){var E=new xs(4);return xs!=Float32Array&&(E[0]=0,E[1]=0,E[2]=0,E[3]=0),E}function _2(E,C,N){return E[0]=C[0]*N,E[1]=C[1]*N,E[2]=C[2]*N,E[3]=C[3]*N,E}function w2(E,C){return E[0]*C[0]+E[1]*C[1]+E[2]*C[2]+E[3]*C[3]}function Pp(E,C,N){var te=C[0],pe=C[1],be=C[2],Se=C[3];return E[0]=N[0]*te+N[4]*pe+N[8]*be+N[12]*Se,E[1]=N[1]*te+N[5]*pe+N[9]*be+N[13]*Se,E[2]=N[2]*te+N[6]*pe+N[10]*be+N[14]*Se,E[3]=N[3]*te+N[7]*pe+N[11]*be+N[15]*Se,E}(function(){var E=b2();return function(C,N,te,pe,be,Se){var Fe,tt;for(N||(N=4),te||(te=0),pe?tt=Math.min(pe*N+te,C.length):tt=C.length,Fe=te;Fe<tt;Fe+=N)E[0]=C[Fe],E[1]=C[Fe+1],E[2]=C[Fe+2],E[3]=C[Fe+3],be(E,E,Se),C[Fe]=E[0],C[Fe+1]=E[1],C[Fe+2]=E[2],C[Fe+3]=E[3];return C}})();function T2(){var E=new xs(2);return xs!=Float32Array&&(E[0]=0,E[1]=0),E}function A2(E){var C=E[0],N=E[1];return C*C+N*N}var M2=A2;(function(){var E=T2();return function(C,N,te,pe,be,Se){var Fe,tt;for(N||(N=2),te||(te=0),pe?tt=Math.min(pe*N+te,C.length):tt=C.length,Fe=te;Fe<tt;Fe+=N)E[0]=C[Fe],E[1]=C[Fe+1],be(E,E,Se),C[Fe]=E[0],C[Fe+1]=E[1];return C}})();var S2=function(E){function C(N){E.call(this,N,Nf)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.createBucket=function(te){return new Zi(te)},C.prototype.queryRadius=function(te){var pe=te;return Rl("circle-radius",this,pe)+Rl("circle-stroke-width",this,pe)+Lu(this.paint.get("circle-translate"))},C.prototype.queryIntersectsFeature=function(te,pe,be,Se,Fe,tt,ct,gt){for(var Rt=du(te,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),tt.angle,ct),jt=this.paint.get("circle-radius").evaluate(pe,be),Gt=this.paint.get("circle-stroke-width").evaluate(pe,be),lr=jt+Gt,Ir=this.paint.get("circle-pitch-alignment")==="map",un=Ir?Rt:k2(Rt,gt),qr=Ir?lr*ct:lr,Mn=0,bn=Se;Mn<bn.length;Mn+=1)for(var An=bn[Mn],Dn=0,Xn=An;Dn<Xn.length;Dn+=1){var sa=Xn[Dn],na=Ir?sa:Vy(sa,gt),za=qr,Ta=Pp([],[sa.x,sa.y,0,1],gt);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?za*=Ta[3]/tt.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(za*=tt.cameraToCenterDistance/Ta[3]),_i(un,na,za))return!0}return!1},C}(ks);function Vy(E,C){var N=Pp([],[E.x,E.y,0,1],C);return new c(N[0]/N[3],N[1]/N[3])}function k2(E,C){return E.map(function(N){return Vy(N,C)})}var Gy=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C}(Zi);Oe("HeatmapBucket",Gy,{omit:["layers"]});function c0(E,C,N,te){var pe=C.width,be=C.height;if(!te)te=new Uint8Array(pe*be*N);else if(te instanceof Uint8ClampedArray)te=new Uint8Array(te.buffer);else if(te.length!==pe*be*N)throw new RangeError("mismatched image size");return E.width=pe,E.height=be,E.data=te,E}function Yy(E,C,N){var te=C.width,pe=C.height;if(!(te===E.width&&pe===E.height)){var be=c0({},{width:te,height:pe},N);h0(E,be,{x:0,y:0},{x:0,y:0},{width:Math.min(E.width,te),height:Math.min(E.height,pe)},N),E.width=te,E.height=pe,E.data=be.data}}function h0(E,C,N,te,pe,be){if(pe.width===0||pe.height===0)return C;if(pe.width>E.width||pe.height>E.height||N.x>E.width-pe.width||N.y>E.height-pe.height)throw new RangeError("out of range source coordinates for image copy");if(pe.width>C.width||pe.height>C.height||te.x>C.width-pe.width||te.y>C.height-pe.height)throw new RangeError("out of range destination coordinates for image copy");for(var Se=E.data,Fe=C.data,tt=0;tt<pe.height;tt++)for(var ct=((N.y+tt)*E.width+N.x)*be,gt=((te.y+tt)*C.width+te.x)*be,Rt=0;Rt<pe.width*be;Rt++)Fe[gt+Rt]=Se[ct+Rt];return C}var Nc=function(C,N){c0(this,C,1,N)};Nc.prototype.resize=function(C){Yy(this,C,1)},Nc.prototype.clone=function(){return new Nc({width:this.width,height:this.height},new Uint8Array(this.data))},Nc.copy=function(C,N,te,pe,be){h0(C,N,te,pe,be,1)};var xl=function(C,N){c0(this,C,4,N)};xl.prototype.resize=function(C){Yy(this,C,4)},xl.prototype.replace=function(C,N){N?this.data.set(C):C instanceof Uint8ClampedArray?this.data=new Uint8Array(C.buffer):this.data=C},xl.prototype.clone=function(){return new xl({width:this.width,height:this.height},new Uint8Array(this.data))},xl.copy=function(C,N,te,pe,be){h0(C,N,te,pe,be,4)},Oe("AlphaImage",Nc),Oe("RGBAImage",xl);var E2=new Xi({"heatmap-radius":new ja(mr.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ja(mr.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Fa(mr.paint_heatmap["heatmap-intensity"]),"heatmap-color":new zo(mr.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Fa(mr.paint_heatmap["heatmap-opacity"])}),C2={paint:E2};function Wy(E,C){for(var N=new Uint8Array(1024),te={},pe=0,be=0;pe<256;pe++,be+=4){te[C]=pe/255;var Se=E.evaluate(te);N[be+0]=Math.floor(Se.r*255/Se.a),N[be+1]=Math.floor(Se.g*255/Se.a),N[be+2]=Math.floor(Se.b*255/Se.a),N[be+3]=Math.floor(Se.a*255)}return new xl({width:256,height:1},N)}var L2=function(E){function C(N){E.call(this,N,C2),this._updateColorRamp()}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.createBucket=function(te){return new Gy(te)},C.prototype._handleSpecialPaintPropertyUpdate=function(te){te==="heatmap-color"&&this._updateColorRamp()},C.prototype._updateColorRamp=function(){var te=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=Wy(te,"heatmapDensity"),this.colorRampTexture=null},C.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},C.prototype.queryRadius=function(){return 0},C.prototype.queryIntersectsFeature=function(){return!1},C.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},C}(ks),P2=new Xi({"hillshade-illumination-direction":new Fa(mr.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Fa(mr.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Fa(mr.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Fa(mr.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Fa(mr.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Fa(mr.paint_hillshade["hillshade-accent-color"])}),D2={paint:P2},R2=function(E){function C(N){E.call(this,N,D2)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},C}(ks),I2=Fo([{name:"a_pos",components:2,type:"Int16"}],4),Xy=I2.members,v0=Dp,z2=Dp;function Dp(E,C,N){N=N||2;var te=C&&C.length,pe=te?C[0]*N:E.length,be=jy(E,0,pe,N,!0),Se=[];if(!be||be.next===be.prev)return Se;var Fe,tt,ct,gt,Rt,jt,Gt;if(te&&(be=U2(E,C,be,N)),E.length>80*N){Fe=ct=E[0],tt=gt=E[1];for(var lr=N;lr<pe;lr+=N)Rt=E[lr],jt=E[lr+1],Rt<Fe&&(Fe=Rt),jt<tt&&(tt=jt),Rt>ct&&(ct=Rt),jt>gt&&(gt=jt);Gt=Math.max(ct-Fe,gt-tt),Gt=Gt!==0?1/Gt:0}return vv(be,Se,N,Fe,tt,Gt),Se}function jy(E,C,N,te,pe){var be,Se;if(pe===g0(E,C,N,te)>0)for(be=C;be<N;be+=te)Se=Jy(be,E[be],E[be+1],Se);else for(be=N-te;be>=C;be-=te)Se=Jy(be,E[be],E[be+1],Se);return Se&&Rp(Se,Se.next)&&(dv(Se),Se=Se.next),Se}function ac(E,C){if(!E)return E;C||(C=E);var N=E,te;do if(te=!1,!N.steiner&&(Rp(N,N.next)||Go(N.prev,N,N.next)===0)){if(dv(N),N=C=N.prev,N===N.next)break;te=!0}else N=N.next;while(te||N!==C);return C}function vv(E,C,N,te,pe,be,Se){if(!!E){!Se&&be&&W2(E,te,pe,be);for(var Fe=E,tt,ct;E.prev!==E.next;){if(tt=E.prev,ct=E.next,be?O2(E,te,pe,be):F2(E)){C.push(tt.i/N),C.push(E.i/N),C.push(ct.i/N),dv(E),E=ct.next,Fe=ct.next;continue}if(E=ct,E===Fe){Se?Se===1?(E=N2(ac(E),C,N),vv(E,C,N,te,pe,be,2)):Se===2&&B2(E,C,N,te,pe,be):vv(ac(E),C,N,te,pe,be,1);break}}}}function F2(E){var C=E.prev,N=E,te=E.next;if(Go(C,N,te)>=0)return!1;for(var pe=E.next.next;pe!==E.prev;){if(hh(C.x,C.y,N.x,N.y,te.x,te.y,pe.x,pe.y)&&Go(pe.prev,pe,pe.next)>=0)return!1;pe=pe.next}return!0}function O2(E,C,N,te){var pe=E.prev,be=E,Se=E.next;if(Go(pe,be,Se)>=0)return!1;for(var Fe=pe.x<be.x?pe.x<Se.x?pe.x:Se.x:be.x<Se.x?be.x:Se.x,tt=pe.y<be.y?pe.y<Se.y?pe.y:Se.y:be.y<Se.y?be.y:Se.y,ct=pe.x>be.x?pe.x>Se.x?pe.x:Se.x:be.x>Se.x?be.x:Se.x,gt=pe.y>be.y?pe.y>Se.y?pe.y:Se.y:be.y>Se.y?be.y:Se.y,Rt=p0(Fe,tt,C,N,te),jt=p0(ct,gt,C,N,te),Gt=E.prevZ,lr=E.nextZ;Gt&&Gt.z>=Rt&&lr&&lr.z<=jt;){if(Gt!==E.prev&&Gt!==E.next&&hh(pe.x,pe.y,be.x,be.y,Se.x,Se.y,Gt.x,Gt.y)&&Go(Gt.prev,Gt,Gt.next)>=0||(Gt=Gt.prevZ,lr!==E.prev&&lr!==E.next&&hh(pe.x,pe.y,be.x,be.y,Se.x,Se.y,lr.x,lr.y)&&Go(lr.prev,lr,lr.next)>=0))return!1;lr=lr.nextZ}for(;Gt&&Gt.z>=Rt;){if(Gt!==E.prev&&Gt!==E.next&&hh(pe.x,pe.y,be.x,be.y,Se.x,Se.y,Gt.x,Gt.y)&&Go(Gt.prev,Gt,Gt.next)>=0)return!1;Gt=Gt.prevZ}for(;lr&&lr.z<=jt;){if(lr!==E.prev&&lr!==E.next&&hh(pe.x,pe.y,be.x,be.y,Se.x,Se.y,lr.x,lr.y)&&Go(lr.prev,lr,lr.next)>=0)return!1;lr=lr.nextZ}return!0}function N2(E,C,N){var te=E;do{var pe=te.prev,be=te.next.next;!Rp(pe,be)&&Zy(pe,te,te.next,be)&&pv(pe,be)&&pv(be,pe)&&(C.push(pe.i/N),C.push(te.i/N),C.push(be.i/N),dv(te),dv(te.next),te=E=be),te=te.next}while(te!==E);return ac(te)}function B2(E,C,N,te,pe,be){var Se=E;do{for(var Fe=Se.next.next;Fe!==Se.prev;){if(Se.i!==Fe.i&&Z2(Se,Fe)){var tt=Ky(Se,Fe);Se=ac(Se,Se.next),tt=ac(tt,tt.next),vv(Se,C,N,te,pe,be),vv(tt,C,N,te,pe,be);return}Fe=Fe.next}Se=Se.next}while(Se!==E)}function U2(E,C,N,te){var pe=[],be,Se,Fe,tt,ct;for(be=0,Se=C.length;be<Se;be++)Fe=C[be]*te,tt=be<Se-1?C[be+1]*te:E.length,ct=jy(E,Fe,tt,te,!1),ct===ct.next&&(ct.steiner=!0),pe.push(j2(ct));for(pe.sort(H2),be=0;be<pe.length;be++)V2(pe[be],N),N=ac(N,N.next);return N}function H2(E,C){return E.x-C.x}function V2(E,C){if(C=G2(E,C),C){var N=Ky(C,E);ac(C,C.next),ac(N,N.next)}}function G2(E,C){var N=C,te=E.x,pe=E.y,be=-1/0,Se;do{if(pe<=N.y&&pe>=N.next.y&&N.next.y!==N.y){var Fe=N.x+(pe-N.y)*(N.next.x-N.x)/(N.next.y-N.y);if(Fe<=te&&Fe>be){if(be=Fe,Fe===te){if(pe===N.y)return N;if(pe===N.next.y)return N.next}Se=N.x<N.next.x?N:N.next}}N=N.next}while(N!==C);if(!Se)return null;if(te===be)return Se;var tt=Se,ct=Se.x,gt=Se.y,Rt=1/0,jt;N=Se;do te>=N.x&&N.x>=ct&&te!==N.x&&hh(pe<gt?te:be,pe,ct,gt,pe<gt?be:te,pe,N.x,N.y)&&(jt=Math.abs(pe-N.y)/(te-N.x),pv(N,E)&&(jt<Rt||jt===Rt&&(N.x>Se.x||N.x===Se.x&&Y2(Se,N)))&&(Se=N,Rt=jt)),N=N.next;while(N!==tt);return Se}function Y2(E,C){return Go(E.prev,E,C.prev)<0&&Go(C.next,E,E.next)<0}function W2(E,C,N,te){var pe=E;do pe.z===null&&(pe.z=p0(pe.x,pe.y,C,N,te)),pe.prevZ=pe.prev,pe.nextZ=pe.next,pe=pe.next;while(pe!==E);pe.prevZ.nextZ=null,pe.prevZ=null,X2(pe)}function X2(E){var C,N,te,pe,be,Se,Fe,tt,ct=1;do{for(N=E,E=null,be=null,Se=0;N;){for(Se++,te=N,Fe=0,C=0;C<ct&&(Fe++,te=te.nextZ,!!te);C++);for(tt=ct;Fe>0||tt>0&&te;)Fe!==0&&(tt===0||!te||N.z<=te.z)?(pe=N,N=N.nextZ,Fe--):(pe=te,te=te.nextZ,tt--),be?be.nextZ=pe:E=pe,pe.prevZ=be,be=pe;N=te}be.nextZ=null,ct*=2}while(Se>1);return E}function p0(E,C,N,te,pe){return E=32767*(E-N)*pe,C=32767*(C-te)*pe,E=(E|E<<8)&16711935,E=(E|E<<4)&252645135,E=(E|E<<2)&858993459,E=(E|E<<1)&1431655765,C=(C|C<<8)&16711935,C=(C|C<<4)&252645135,C=(C|C<<2)&858993459,C=(C|C<<1)&1431655765,E|C<<1}function j2(E){var C=E,N=E;do(C.x<N.x||C.x===N.x&&C.y<N.y)&&(N=C),C=C.next;while(C!==E);return N}function hh(E,C,N,te,pe,be,Se,Fe){return(pe-Se)*(C-Fe)-(E-Se)*(be-Fe)>=0&&(E-Se)*(te-Fe)-(N-Se)*(C-Fe)>=0&&(N-Se)*(be-Fe)-(pe-Se)*(te-Fe)>=0}function Z2(E,C){return E.next.i!==C.i&&E.prev.i!==C.i&&!K2(E,C)&&(pv(E,C)&&pv(C,E)&&J2(E,C)&&(Go(E.prev,E,C.prev)||Go(E,C.prev,C))||Rp(E,C)&&Go(E.prev,E,E.next)>0&&Go(C.prev,C,C.next)>0)}function Go(E,C,N){return(C.y-E.y)*(N.x-C.x)-(C.x-E.x)*(N.y-C.y)}function Rp(E,C){return E.x===C.x&&E.y===C.y}function Zy(E,C,N,te){var pe=zp(Go(E,C,N)),be=zp(Go(E,C,te)),Se=zp(Go(N,te,E)),Fe=zp(Go(N,te,C));return!!(pe!==be&&Se!==Fe||pe===0&&Ip(E,N,C)||be===0&&Ip(E,te,C)||Se===0&&Ip(N,E,te)||Fe===0&&Ip(N,C,te))}function Ip(E,C,N){return C.x<=Math.max(E.x,N.x)&&C.x>=Math.min(E.x,N.x)&&C.y<=Math.max(E.y,N.y)&&C.y>=Math.min(E.y,N.y)}function zp(E){return E>0?1:E<0?-1:0}function K2(E,C){var N=E;do{if(N.i!==E.i&&N.next.i!==E.i&&N.i!==C.i&&N.next.i!==C.i&&Zy(N,N.next,E,C))return!0;N=N.next}while(N!==E);return!1}function pv(E,C){return Go(E.prev,E,E.next)<0?Go(E,C,E.next)>=0&&Go(E,E.prev,C)>=0:Go(E,C,E.prev)<0||Go(E,E.next,C)<0}function J2(E,C){var N=E,te=!1,pe=(E.x+C.x)/2,be=(E.y+C.y)/2;do N.y>be!=N.next.y>be&&N.next.y!==N.y&&pe<(N.next.x-N.x)*(be-N.y)/(N.next.y-N.y)+N.x&&(te=!te),N=N.next;while(N!==E);return te}function Ky(E,C){var N=new d0(E.i,E.x,E.y),te=new d0(C.i,C.x,C.y),pe=E.next,be=C.prev;return E.next=C,C.prev=E,N.next=pe,pe.prev=N,te.next=N,N.prev=te,be.next=te,te.prev=be,te}function Jy(E,C,N,te){var pe=new d0(E,C,N);return te?(pe.next=te.next,pe.prev=te,te.next.prev=pe,te.next=pe):(pe.prev=pe,pe.next=pe),pe}function dv(E){E.next.prev=E.prev,E.prev.next=E.next,E.prevZ&&(E.prevZ.nextZ=E.nextZ),E.nextZ&&(E.nextZ.prevZ=E.prevZ)}function d0(E,C,N){this.i=E,this.x=C,this.y=N,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}Dp.deviation=function(E,C,N,te){var pe=C&&C.length,be=pe?C[0]*N:E.length,Se=Math.abs(g0(E,0,be,N));if(pe)for(var Fe=0,tt=C.length;Fe<tt;Fe++){var ct=C[Fe]*N,gt=Fe<tt-1?C[Fe+1]*N:E.length;Se-=Math.abs(g0(E,ct,gt,N))}var Rt=0;for(Fe=0;Fe<te.length;Fe+=3){var jt=te[Fe]*N,Gt=te[Fe+1]*N,lr=te[Fe+2]*N;Rt+=Math.abs((E[jt]-E[lr])*(E[Gt+1]-E[jt+1])-(E[jt]-E[Gt])*(E[lr+1]-E[jt+1]))}return Se===0&&Rt===0?0:Math.abs((Rt-Se)/Se)};function g0(E,C,N,te){for(var pe=0,be=C,Se=N-te;be<N;be+=te)pe+=(E[Se]-E[be])*(E[be+1]+E[Se+1]),Se=be;return pe}Dp.flatten=function(E){for(var C=E[0][0].length,N={vertices:[],holes:[],dimensions:C},te=0,pe=0;pe<E.length;pe++){for(var be=0;be<E[pe].length;be++)for(var Se=0;Se<C;Se++)N.vertices.push(E[pe][be][Se]);pe>0&&(te+=E[pe-1].length,N.holes.push(te))}return N},v0.default=z2;function Q2(E,C,N,te,pe){Qy(E,C,N||0,te||E.length-1,pe||$2)}function Qy(E,C,N,te,pe){for(;te>N;){if(te-N>600){var be=te-N+1,Se=C-N+1,Fe=Math.log(be),tt=.5*Math.exp(2*Fe/3),ct=.5*Math.sqrt(Fe*tt*(be-tt)/be)*(Se-be/2<0?-1:1),gt=Math.max(N,Math.floor(C-Se*tt/be+ct)),Rt=Math.min(te,Math.floor(C+(be-Se)*tt/be+ct));Qy(E,C,gt,Rt,pe)}var jt=E[C],Gt=N,lr=te;for(gv(E,N,C),pe(E[te],jt)>0&&gv(E,N,te);Gt<lr;){for(gv(E,Gt,lr),Gt++,lr--;pe(E[Gt],jt)<0;)Gt++;for(;pe(E[lr],jt)>0;)lr--}pe(E[N],jt)===0?gv(E,N,lr):(lr++,gv(E,lr,te)),lr<=C&&(N=lr+1),C<=lr&&(te=lr-1)}}function gv(E,C,N){var te=E[C];E[C]=E[N],E[N]=te}function $2(E,C){return E<C?-1:E>C?1:0}function y0(E,C){var N=E.length;if(N<=1)return[E];for(var te=[],pe,be,Se=0;Se<N;Se++){var Fe=G(E[Se]);Fe!==0&&(E[Se].area=Math.abs(Fe),be===void 0&&(be=Fe<0),be===Fe<0?(pe&&te.push(pe),pe=[E[Se]]):pe.push(E[Se]))}if(pe&&te.push(pe),C>1)for(var tt=0;tt<te.length;tt++)te[tt].length<=C||(Q2(te[tt],C,1,te[tt].length-1,q2),te[tt]=te[tt].slice(0,C));return te}function q2(E,C){return C.area-E.area}function m0(E,C,N){for(var te=N.patternDependencies,pe=!1,be=0,Se=C;be<Se.length;be+=1){var Fe=Se[be],tt=Fe.paint.get(E+"-pattern");tt.isConstant()||(pe=!0);var ct=tt.constantOr(null);ct&&(pe=!0,te[ct.to]=!0,te[ct.from]=!0)}return pe}function x0(E,C,N,te,pe){for(var be=pe.patternDependencies,Se=0,Fe=C;Se<Fe.length;Se+=1){var tt=Fe[Se],ct=tt.paint.get(E+"-pattern"),gt=ct.value;if(gt.kind!=="constant"){var Rt=gt.evaluate({zoom:te-1},N,{},pe.availableImages),jt=gt.evaluate({zoom:te},N,{},pe.availableImages),Gt=gt.evaluate({zoom:te+1},N,{},pe.availableImages);Rt=Rt&&Rt.name?Rt.name:Rt,jt=jt&&jt.name?jt.name:jt,Gt=Gt&&Gt.name?Gt.name:Gt,be[Rt]=!0,be[jt]=!0,be[Gt]=!0,N.patterns[tt.id]={min:Rt,mid:jt,max:Gt}}}return N}var e_=500,nf=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=C.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Pc,this.indexArray=new tf,this.indexArray2=new Ic,this.programConfigurations=new ni(Xy,C.layers,C.zoom),this.segments=new Y,this.segments2=new Y,this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};nf.prototype.populate=function(C,N,te){this.hasPattern=m0("fill",this.layers,N);for(var pe=this.layers[0].layout.get("fill-sort-key"),be=[],Se=0,Fe=C;Se<Fe.length;Se+=1){var tt=Fe[Se],ct=tt.feature,gt=tt.id,Rt=tt.index,jt=tt.sourceLayerIndex,Gt=this.layers[0]._featureFilter.needGeometry,lr={type:ct.type,id:gt,properties:ct.properties,geometry:Gt?Bi(ct):[]};if(!!this.layers[0]._featureFilter.filter(new si(this.zoom),lr,te)){Gt||(lr.geometry=Bi(ct));var Ir=pe?pe.evaluate(lr,{},te,N.availableImages):void 0,un={id:gt,properties:ct.properties,type:ct.type,sourceLayerIndex:jt,index:Rt,geometry:lr.geometry,patterns:{},sortKey:Ir};be.push(un)}}pe&&be.sort(function(Ta,Sa){return Ta.sortKey-Sa.sortKey});for(var qr=0,Mn=be;qr<Mn.length;qr+=1){var bn=Mn[qr],An=bn,Dn=An.geometry,Xn=An.index,sa=An.sourceLayerIndex;if(this.hasPattern){var na=x0("fill",this.layers,bn,this.zoom,N);this.patternFeatures.push(na)}else this.addFeature(bn,Dn,Xn,te,{});var za=C[Xn].feature;N.featureIndex.insert(za,Dn,Xn,sa,this.index)}},nf.prototype.update=function(C,N,te){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,N,this.stateDependentLayers,te)},nf.prototype.addFeatures=function(C,N,te){for(var pe=0,be=this.patternFeatures;pe<be.length;pe+=1){var Se=be[pe];this.addFeature(Se,Se.geometry,Se.index,N,te)}},nf.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},nf.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},nf.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,Xy),this.indexBuffer=C.createIndexBuffer(this.indexArray),this.indexBuffer2=C.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(C),this.uploaded=!0},nf.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},nf.prototype.addFeature=function(C,N,te,pe,be){for(var Se=0,Fe=y0(N,e_);Se<Fe.length;Se+=1){for(var tt=Fe[Se],ct=0,gt=0,Rt=tt;gt<Rt.length;gt+=1){var jt=Rt[gt];ct+=jt.length}for(var Gt=this.segments.prepareSegment(ct,this.layoutVertexArray,this.indexArray),lr=Gt.vertexLength,Ir=[],un=[],qr=0,Mn=tt;qr<Mn.length;qr+=1){var bn=Mn[qr];if(bn.length!==0){bn!==tt[0]&&un.push(Ir.length/2);var An=this.segments2.prepareSegment(bn.length,this.layoutVertexArray,this.indexArray2),Dn=An.vertexLength;this.layoutVertexArray.emplaceBack(bn[0].x,bn[0].y),this.indexArray2.emplaceBack(Dn+bn.length-1,Dn),Ir.push(bn[0].x),Ir.push(bn[0].y);for(var Xn=1;Xn<bn.length;Xn++)this.layoutVertexArray.emplaceBack(bn[Xn].x,bn[Xn].y),this.indexArray2.emplaceBack(Dn+Xn-1,Dn+Xn),Ir.push(bn[Xn].x),Ir.push(bn[Xn].y);An.vertexLength+=bn.length,An.primitiveLength+=bn.length}}for(var sa=v0(Ir,un),na=0;na<sa.length;na+=3)this.indexArray.emplaceBack(lr+sa[na],lr+sa[na+1],lr+sa[na+2]);Gt.vertexLength+=ct,Gt.primitiveLength+=sa.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,te,be,pe)},Oe("FillBucket",nf,{omit:["layers","patternFeatures"]});var t_=new Xi({"fill-sort-key":new ja(mr.layout_fill["fill-sort-key"])}),r_=new Xi({"fill-antialias":new Fa(mr.paint_fill["fill-antialias"]),"fill-opacity":new ja(mr.paint_fill["fill-opacity"]),"fill-color":new ja(mr.paint_fill["fill-color"]),"fill-outline-color":new ja(mr.paint_fill["fill-outline-color"]),"fill-translate":new Fa(mr.paint_fill["fill-translate"]),"fill-translate-anchor":new Fa(mr.paint_fill["fill-translate-anchor"]),"fill-pattern":new bo(mr.paint_fill["fill-pattern"])}),n_={paint:r_,layout:t_},a_=function(E){function C(N){E.call(this,N,n_)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.recalculate=function(te,pe){E.prototype.recalculate.call(this,te,pe);var be=this.paint._values["fill-outline-color"];be.value.kind==="constant"&&be.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},C.prototype.createBucket=function(te){return new nf(te)},C.prototype.queryRadius=function(){return Lu(this.paint.get("fill-translate"))},C.prototype.queryIntersectsFeature=function(te,pe,be,Se,Fe,tt,ct){var gt=du(te,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),tt.angle,ct);return wo(gt,Se)},C.prototype.isTileClipped=function(){return!0},C}(ks),i_=Fo([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),$y=i_.members,qy=vh;function vh(E,C,N,te,pe){this.properties={},this.extent=N,this.type=0,this._pbf=E,this._geometry=-1,this._keys=te,this._values=pe,E.readFields(o_,this,C)}function o_(E,C,N){E==1?C.id=N.readVarint():E==2?s_(N,C):E==3?C.type=N.readVarint():E==4&&(C._geometry=N.pos)}function s_(E,C){for(var N=E.readVarint()+E.pos;E.pos<N;){var te=C._keys[E.readVarint()],pe=C._values[E.readVarint()];C.properties[te]=pe}}vh.types=["Unknown","Point","LineString","Polygon"],vh.prototype.loadGeometry=function(){var E=this._pbf;E.pos=this._geometry;for(var C=E.readVarint()+E.pos,N=1,te=0,pe=0,be=0,Se=[],Fe;E.pos<C;){if(te<=0){var tt=E.readVarint();N=tt&7,te=tt>>3}if(te--,N===1||N===2)pe+=E.readSVarint(),be+=E.readSVarint(),N===1&&(Fe&&Se.push(Fe),Fe=[]),Fe.push(new c(pe,be));else if(N===7)Fe&&Fe.push(Fe[0].clone());else throw new Error("unknown command "+N)}return Fe&&Se.push(Fe),Se},vh.prototype.bbox=function(){var E=this._pbf;E.pos=this._geometry;for(var C=E.readVarint()+E.pos,N=1,te=0,pe=0,be=0,Se=1/0,Fe=-1/0,tt=1/0,ct=-1/0;E.pos<C;){if(te<=0){var gt=E.readVarint();N=gt&7,te=gt>>3}if(te--,N===1||N===2)pe+=E.readSVarint(),be+=E.readSVarint(),pe<Se&&(Se=pe),pe>Fe&&(Fe=pe),be<tt&&(tt=be),be>ct&&(ct=be);else if(N!==7)throw new Error("unknown command "+N)}return[Se,tt,Fe,ct]},vh.prototype.toGeoJSON=function(E,C,N){var te=this.extent*Math.pow(2,N),pe=this.extent*E,be=this.extent*C,Se=this.loadGeometry(),Fe=vh.types[this.type],tt,ct;function gt(Gt){for(var lr=0;lr<Gt.length;lr++){var Ir=Gt[lr],un=180-(Ir.y+be)*360/te;Gt[lr]=[(Ir.x+pe)*360/te-180,360/Math.PI*Math.atan(Math.exp(un*Math.PI/180))-90]}}switch(this.type){case 1:var Rt=[];for(tt=0;tt<Se.length;tt++)Rt[tt]=Se[tt][0];Se=Rt,gt(Se);break;case 2:for(tt=0;tt<Se.length;tt++)gt(Se[tt]);break;case 3:for(Se=l_(Se),tt=0;tt<Se.length;tt++)for(ct=0;ct<Se[tt].length;ct++)gt(Se[tt][ct]);break}Se.length===1?Se=Se[0]:Fe="Multi"+Fe;var jt={type:"Feature",geometry:{type:Fe,coordinates:Se},properties:this.properties};return"id"in this&&(jt.id=this.id),jt};function l_(E){var C=E.length;if(C<=1)return[E];for(var N=[],te,pe,be=0;be<C;be++){var Se=u_(E[be]);Se!==0&&(pe===void 0&&(pe=Se<0),pe===Se<0?(te&&N.push(te),te=[E[be]]):te.push(E[be]))}return te&&N.push(te),N}function u_(E){for(var C=0,N=0,te=E.length,pe=te-1,be,Se;N<te;pe=N++)be=E[N],Se=E[pe],C+=(Se.x-be.x)*(be.y+Se.y);return C}var em=tm;function tm(E,C){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=E,this._keys=[],this._values=[],this._features=[],E.readFields(f_,this,C),this.length=this._features.length}function f_(E,C,N){E===15?C.version=N.readVarint():E===1?C.name=N.readString():E===5?C.extent=N.readVarint():E===2?C._features.push(N.pos):E===3?C._keys.push(N.readString()):E===4&&C._values.push(c_(N))}function c_(E){for(var C=null,N=E.readVarint()+E.pos;E.pos<N;){var te=E.readVarint()>>3;C=te===1?E.readString():te===2?E.readFloat():te===3?E.readDouble():te===4?E.readVarint64():te===5?E.readVarint():te===6?E.readSVarint():te===7?E.readBoolean():null}return C}tm.prototype.feature=function(E){if(E<0||E>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[E];var C=this._pbf.readVarint()+this._pbf.pos;return new qy(this._pbf,C,this.extent,this._keys,this._values)};var h_=v_;function v_(E,C){this.layers=E.readFields(p_,{},C)}function p_(E,C,N){if(E===3){var te=new em(N,N.readVarint()+N.pos);te.length&&(C[te.name]=te)}}var d_=h_,g_=qy,y_=em,ph={VectorTile:d_,VectorTileFeature:g_,VectorTileLayer:y_},m_=ph.VectorTileFeature.types,x_=500,b0=Math.pow(2,13);function yv(E,C,N,te,pe,be,Se,Fe){E.emplaceBack(C,N,Math.floor(te*b0)*2+Se,pe*b0*2,be*b0*2,Math.round(Fe))}var af=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=C.index,this.hasPattern=!1,this.layoutVertexArray=new $f,this.indexArray=new tf,this.programConfigurations=new ni($y,C.layers,C.zoom),this.segments=new Y,this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};af.prototype.populate=function(C,N,te){this.features=[],this.hasPattern=m0("fill-extrusion",this.layers,N);for(var pe=0,be=C;pe<be.length;pe+=1){var Se=be[pe],Fe=Se.feature,tt=Se.id,ct=Se.index,gt=Se.sourceLayerIndex,Rt=this.layers[0]._featureFilter.needGeometry,jt={type:Fe.type,id:tt,properties:Fe.properties,geometry:Rt?Bi(Fe):[]};if(!!this.layers[0]._featureFilter.filter(new si(this.zoom),jt,te)){var Gt={id:tt,sourceLayerIndex:gt,index:ct,geometry:Rt?jt.geometry:Bi(Fe),properties:Fe.properties,type:Fe.type,patterns:{}};typeof Fe.id!="undefined"&&(Gt.id=Fe.id),this.hasPattern?this.features.push(x0("fill-extrusion",this.layers,Gt,this.zoom,N)):this.addFeature(Gt,Gt.geometry,ct,te,{}),N.featureIndex.insert(Fe,Gt.geometry,ct,gt,this.index,!0)}}},af.prototype.addFeatures=function(C,N,te){for(var pe=0,be=this.features;pe<be.length;pe+=1){var Se=be[pe],Fe=Se.geometry;this.addFeature(Se,Fe,Se.index,N,te)}},af.prototype.update=function(C,N,te){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,N,this.stateDependentLayers,te)},af.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},af.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},af.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,$y),this.indexBuffer=C.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(C),this.uploaded=!0},af.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},af.prototype.addFeature=function(C,N,te,pe,be){for(var Se=0,Fe=y0(N,x_);Se<Fe.length;Se+=1){for(var tt=Fe[Se],ct=0,gt=0,Rt=tt;gt<Rt.length;gt+=1){var jt=Rt[gt];ct+=jt.length}for(var Gt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),lr=0,Ir=tt;lr<Ir.length;lr+=1){var un=Ir[lr];if(un.length!==0&&!__(un))for(var qr=0,Mn=0;Mn<un.length;Mn++){var bn=un[Mn];if(Mn>=1){var An=un[Mn-1];if(!b_(bn,An)){Gt.vertexLength+4>Y.MAX_VERTEX_ARRAY_LENGTH&&(Gt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Dn=bn.sub(An)._perp()._unit(),Xn=An.dist(bn);qr+Xn>32768&&(qr=0),yv(this.layoutVertexArray,bn.x,bn.y,Dn.x,Dn.y,0,0,qr),yv(this.layoutVertexArray,bn.x,bn.y,Dn.x,Dn.y,0,1,qr),qr+=Xn,yv(this.layoutVertexArray,An.x,An.y,Dn.x,Dn.y,0,0,qr),yv(this.layoutVertexArray,An.x,An.y,Dn.x,Dn.y,0,1,qr);var sa=Gt.vertexLength;this.indexArray.emplaceBack(sa,sa+2,sa+1),this.indexArray.emplaceBack(sa+1,sa+2,sa+3),Gt.vertexLength+=4,Gt.primitiveLength+=2}}}}if(Gt.vertexLength+ct>Y.MAX_VERTEX_ARRAY_LENGTH&&(Gt=this.segments.prepareSegment(ct,this.layoutVertexArray,this.indexArray)),m_[C.type]==="Polygon"){for(var na=[],za=[],Ta=Gt.vertexLength,Sa=0,ti=tt;Sa<ti.length;Sa+=1){var Da=ti[Sa];if(Da.length!==0){Da!==tt[0]&&za.push(na.length/2);for(var Ia=0;Ia<Da.length;Ia++){var ui=Da[Ia];yv(this.layoutVertexArray,ui.x,ui.y,0,0,1,1,0),na.push(ui.x),na.push(ui.y)}}}for(var qa=v0(na,za),Si=0;Si<qa.length;Si+=3)this.indexArray.emplaceBack(Ta+qa[Si],Ta+qa[Si+2],Ta+qa[Si+1]);Gt.primitiveLength+=qa.length/3,Gt.vertexLength+=ct}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,te,be,pe)},Oe("FillExtrusionBucket",af,{omit:["layers","features"]});function b_(E,C){return E.x===C.x&&(E.x<0||E.x>Ua)||E.y===C.y&&(E.y<0||E.y>Ua)}function __(E){return E.every(function(C){return C.x<0})||E.every(function(C){return C.x>Ua})||E.every(function(C){return C.y<0})||E.every(function(C){return C.y>Ua})}var w_=new Xi({"fill-extrusion-opacity":new Fa(mr["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ja(mr["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Fa(mr["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Fa(mr["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new bo(mr["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ja(mr["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ja(mr["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Fa(mr["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])}),T_={paint:w_},A_=function(E){function C(N){E.call(this,N,T_)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.createBucket=function(te){return new af(te)},C.prototype.queryRadius=function(){return Lu(this.paint.get("fill-extrusion-translate"))},C.prototype.is3D=function(){return!0},C.prototype.queryIntersectsFeature=function(te,pe,be,Se,Fe,tt,ct,gt){var Rt=du(te,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),tt.angle,ct),jt=this.paint.get("fill-extrusion-height").evaluate(pe,be),Gt=this.paint.get("fill-extrusion-base").evaluate(pe,be),lr=k_(Rt,gt,tt,0),Ir=S_(Se,Gt,jt,gt),un=Ir[0],qr=Ir[1];return M_(un,qr,lr)},C}(ks);function mv(E,C){return E.x*C.x+E.y*C.y}function rm(E,C){if(E.length===1){for(var N=0,te=C[N++],pe;!pe||te.equals(pe);)if(pe=C[N++],!pe)return 1/0;for(;N<C.length;N++){var be=C[N],Se=E[0],Fe=pe.sub(te),tt=be.sub(te),ct=Se.sub(te),gt=mv(Fe,Fe),Rt=mv(Fe,tt),jt=mv(tt,tt),Gt=mv(ct,Fe),lr=mv(ct,tt),Ir=gt*jt-Rt*Rt,un=(jt*Gt-Rt*lr)/Ir,qr=(gt*lr-Rt*Gt)/Ir,Mn=1-un-qr,bn=te.z*Mn+pe.z*un+be.z*qr;if(isFinite(bn))return bn}return 1/0}else{for(var An=1/0,Dn=0,Xn=C;Dn<Xn.length;Dn+=1){var sa=Xn[Dn];An=Math.min(An,sa.z)}return An}}function M_(E,C,N){var te=1/0;wo(N,C)&&(te=rm(N,C[0]));for(var pe=0;pe<C.length;pe++)for(var be=C[pe],Se=E[pe],Fe=0;Fe<be.length-1;Fe++){var tt=be[Fe],ct=be[Fe+1],gt=Se[Fe],Rt=Se[Fe+1],jt=[tt,ct,Rt,gt,tt];ii(N,jt)&&(te=Math.min(te,rm(N,jt)))}return te===1/0?!1:te}function S_(E,C,N,te){for(var pe=[],be=[],Se=te[8]*C,Fe=te[9]*C,tt=te[10]*C,ct=te[11]*C,gt=te[8]*N,Rt=te[9]*N,jt=te[10]*N,Gt=te[11]*N,lr=0,Ir=E;lr<Ir.length;lr+=1){for(var un=Ir[lr],qr=[],Mn=[],bn=0,An=un;bn<An.length;bn+=1){var Dn=An[bn],Xn=Dn.x,sa=Dn.y,na=te[0]*Xn+te[4]*sa+te[12],za=te[1]*Xn+te[5]*sa+te[13],Ta=te[2]*Xn+te[6]*sa+te[14],Sa=te[3]*Xn+te[7]*sa+te[15],ti=na+Se,Da=za+Fe,Ia=Ta+tt,ui=Sa+ct,qa=na+gt,Si=za+Rt,Wi=Ta+jt,ki=Sa+Gt,Ei=new c(ti/ui,Da/ui);Ei.z=Ia/ui,qr.push(Ei);var wi=new c(qa/ki,Si/ki);wi.z=Wi/ki,Mn.push(wi)}pe.push(qr),be.push(Mn)}return[pe,be]}function k_(E,C,N,te){for(var pe=[],be=0,Se=E;be<Se.length;be+=1){var Fe=Se[be],tt=[Fe.x,Fe.y,te,1];Pp(tt,tt,C),pe.push(new c(tt[0]/tt[3],tt[1]/tt[3]))}return pe}var E_=Fo([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),nm=E_.members,C_=ph.VectorTileFeature.types,am=63,L_=Math.cos(75/2*(Math.PI/180)),P_=15,D_=20,R_=15,im=1/2,om=Math.pow(2,R_-1)/im,bl=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=C.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new nh,this.indexArray=new tf,this.programConfigurations=new ni(nm,C.layers,C.zoom),this.segments=new Y,this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};bl.prototype.populate=function(C,N,te){this.hasPattern=m0("line",this.layers,N);for(var pe=this.layers[0].layout.get("line-sort-key"),be=[],Se=0,Fe=C;Se<Fe.length;Se+=1){var tt=Fe[Se],ct=tt.feature,gt=tt.id,Rt=tt.index,jt=tt.sourceLayerIndex,Gt=this.layers[0]._featureFilter.needGeometry,lr={type:ct.type,id:gt,properties:ct.properties,geometry:Gt?Bi(ct):[]};if(!!this.layers[0]._featureFilter.filter(new si(this.zoom),lr,te)){Gt||(lr.geometry=Bi(ct));var Ir=pe?pe.evaluate(lr,{},te):void 0,un={id:gt,properties:ct.properties,type:ct.type,sourceLayerIndex:jt,index:Rt,geometry:lr.geometry,patterns:{},sortKey:Ir};be.push(un)}}pe&&be.sort(function(Ta,Sa){return Ta.sortKey-Sa.sortKey});for(var qr=0,Mn=be;qr<Mn.length;qr+=1){var bn=Mn[qr],An=bn,Dn=An.geometry,Xn=An.index,sa=An.sourceLayerIndex;if(this.hasPattern){var na=x0("line",this.layers,bn,this.zoom,N);this.patternFeatures.push(na)}else this.addFeature(bn,Dn,Xn,te,{});var za=C[Xn].feature;N.featureIndex.insert(za,Dn,Xn,sa,this.index)}},bl.prototype.update=function(C,N,te){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,N,this.stateDependentLayers,te)},bl.prototype.addFeatures=function(C,N,te){for(var pe=0,be=this.patternFeatures;pe<be.length;pe+=1){var Se=be[pe];this.addFeature(Se,Se.geometry,Se.index,N,te)}},bl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},bl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},bl.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,nm),this.indexBuffer=C.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(C),this.uploaded=!0},bl.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},bl.prototype.addFeature=function(C,N,te,pe,be){for(var Se=this.layers[0].layout,Fe=Se.get("line-join").evaluate(C,{}),tt=Se.get("line-cap"),ct=Se.get("line-miter-limit"),gt=Se.get("line-round-limit"),Rt=0,jt=N;Rt<jt.length;Rt+=1){var Gt=jt[Rt];this.addLine(Gt,C,Fe,tt,ct,gt)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,te,be,pe)},bl.prototype.addLine=function(C,N,te,pe,be,Se){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,!!N.properties&&N.properties.hasOwnProperty("mapbox_clip_start")&&N.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+N.properties.mapbox_clip_start,this.clipEnd=+N.properties.mapbox_clip_end;for(var Fe=0;Fe<C.length-1;Fe++)this.totalDistance+=C[Fe].dist(C[Fe+1]);this.updateScaledDistance()}for(var tt=C_[N.type]==="Polygon",ct=C.length;ct>=2&&C[ct-1].equals(C[ct-2]);)ct--;for(var gt=0;gt<ct-1&&C[gt].equals(C[gt+1]);)gt++;if(!(ct<(tt?3:2))){te==="bevel"&&(be=1.05);var Rt=this.overscaling<=16?P_*Ua/(512*this.overscaling):0,jt=this.segments.prepareSegment(ct*10,this.layoutVertexArray,this.indexArray),Gt,lr=void 0,Ir=void 0,un=void 0,qr=void 0;this.e1=this.e2=-1,tt&&(Gt=C[ct-2],qr=C[gt].sub(Gt)._unit()._perp());for(var Mn=gt;Mn<ct;Mn++)if(Ir=Mn===ct-1?tt?C[gt+1]:void 0:C[Mn+1],!(Ir&&C[Mn].equals(Ir))){qr&&(un=qr),Gt&&(lr=Gt),Gt=C[Mn],qr=Ir?Ir.sub(Gt)._unit()._perp():un,un=un||qr;var bn=un.add(qr);(bn.x!==0||bn.y!==0)&&bn._unit();var An=un.x*qr.x+un.y*qr.y,Dn=bn.x*qr.x+bn.y*qr.y,Xn=Dn!==0?1/Dn:1/0,sa=2*Math.sqrt(2-2*Dn),na=Dn<L_&&lr&&Ir,za=un.x*qr.y-un.y*qr.x>0;if(na&&Mn>gt){var Ta=Gt.dist(lr);if(Ta>2*Rt){var Sa=Gt.sub(Gt.sub(lr)._mult(Rt/Ta)._round());this.updateDistance(lr,Sa),this.addCurrentVertex(Sa,un,0,0,jt),lr=Sa}}var ti=lr&&Ir,Da=ti?te:tt?"butt":pe;if(ti&&Da==="round"&&(Xn<Se?Da="miter":Xn<=2&&(Da="fakeround")),Da==="miter"&&Xn>be&&(Da="bevel"),Da==="bevel"&&(Xn>2&&(Da="flipbevel"),Xn<be&&(Da="miter")),lr&&this.updateDistance(lr,Gt),Da==="miter")bn._mult(Xn),this.addCurrentVertex(Gt,bn,0,0,jt);else if(Da==="flipbevel"){if(Xn>100)bn=qr.mult(-1);else{var Ia=Xn*un.add(qr).mag()/un.sub(qr).mag();bn._perp()._mult(Ia*(za?-1:1))}this.addCurrentVertex(Gt,bn,0,0,jt),this.addCurrentVertex(Gt,bn.mult(-1),0,0,jt)}else if(Da==="bevel"||Da==="fakeround"){var ui=-Math.sqrt(Xn*Xn-1),qa=za?ui:0,Si=za?0:ui;if(lr&&this.addCurrentVertex(Gt,un,qa,Si,jt),Da==="fakeround")for(var Wi=Math.round(sa*180/Math.PI/D_),ki=1;ki<Wi;ki++){var Ei=ki/Wi;if(Ei!==.5){var wi=Ei-.5,qi=1.0904+An*(-3.2452+An*(3.55645-An*1.43519)),ao=.848013+An*(-1.06021+An*.215638);Ei=Ei+Ei*wi*(Ei-1)*(qi*wi*wi+ao)}var To=qr.sub(un)._mult(Ei)._add(un)._unit()._mult(za?-1:1);this.addHalfVertex(Gt,To.x,To.y,!1,za,0,jt)}Ir&&this.addCurrentVertex(Gt,qr,-qa,-Si,jt)}else if(Da==="butt")this.addCurrentVertex(Gt,bn,0,0,jt);else if(Da==="square"){var Po=lr?1:-1;this.addCurrentVertex(Gt,bn,Po,Po,jt)}else Da==="round"&&(lr&&(this.addCurrentVertex(Gt,un,0,0,jt),this.addCurrentVertex(Gt,un,1,1,jt,!0)),Ir&&(this.addCurrentVertex(Gt,qr,-1,-1,jt,!0),this.addCurrentVertex(Gt,qr,0,0,jt)));if(na&&Mn<ct-1){var os=Gt.dist(Ir);if(os>2*Rt){var Xo=Gt.add(Ir.sub(Gt)._mult(Rt/os)._round());this.updateDistance(Gt,Xo),this.addCurrentVertex(Xo,qr,0,0,jt),Gt=Xo}}}}},bl.prototype.addCurrentVertex=function(C,N,te,pe,be,Se){Se===void 0&&(Se=!1);var Fe=N.x+N.y*te,tt=N.y-N.x*te,ct=-N.x+N.y*pe,gt=-N.y-N.x*pe;this.addHalfVertex(C,Fe,tt,Se,!1,te,be),this.addHalfVertex(C,ct,gt,Se,!0,-pe,be),this.distance>om/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(C,N,te,pe,be,Se))},bl.prototype.addHalfVertex=function(C,N,te,pe,be,Se,Fe){var tt=C.x,ct=C.y,gt=this.scaledDistance*im;this.layoutVertexArray.emplaceBack((tt<<1)+(pe?1:0),(ct<<1)+(be?1:0),Math.round(am*N)+128,Math.round(am*te)+128,(Se===0?0:Se<0?-1:1)+1|(gt&63)<<2,gt>>6);var Rt=Fe.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Rt),Fe.primitiveLength++),be?this.e2=Rt:this.e1=Rt},bl.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(om-1):this.distance},bl.prototype.updateDistance=function(C,N){this.distance+=C.dist(N),this.updateScaledDistance()},Oe("LineBucket",bl,{omit:["layers","patternFeatures"]});var I_=new Xi({"line-cap":new Fa(mr.layout_line["line-cap"]),"line-join":new ja(mr.layout_line["line-join"]),"line-miter-limit":new Fa(mr.layout_line["line-miter-limit"]),"line-round-limit":new Fa(mr.layout_line["line-round-limit"]),"line-sort-key":new ja(mr.layout_line["line-sort-key"])}),z_=new Xi({"line-opacity":new ja(mr.paint_line["line-opacity"]),"line-color":new ja(mr.paint_line["line-color"]),"line-translate":new Fa(mr.paint_line["line-translate"]),"line-translate-anchor":new Fa(mr.paint_line["line-translate-anchor"]),"line-width":new ja(mr.paint_line["line-width"]),"line-gap-width":new ja(mr.paint_line["line-gap-width"]),"line-offset":new ja(mr.paint_line["line-offset"]),"line-blur":new ja(mr.paint_line["line-blur"]),"line-dasharray":new ro(mr.paint_line["line-dasharray"]),"line-pattern":new bo(mr.paint_line["line-pattern"]),"line-gradient":new zo(mr.paint_line["line-gradient"])}),sm={paint:z_,layout:I_},F_=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.possiblyEvaluate=function(te,pe){return pe=new si(Math.floor(pe.zoom),{now:pe.now,fadeDuration:pe.fadeDuration,zoomHistory:pe.zoomHistory,transition:pe.transition}),E.prototype.possiblyEvaluate.call(this,te,pe)},C.prototype.evaluate=function(te,pe,be,Se){return pe=M({},pe,{zoom:Math.floor(pe.zoom)}),E.prototype.evaluate.call(this,te,pe,be,Se)},C}(ja),lm=new F_(sm.paint.properties["line-width"].specification);lm.useIntegerZoom=!0;var O_=function(E){function C(N){E.call(this,N,sm)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._handleSpecialPaintPropertyUpdate=function(te){te==="line-gradient"&&this._updateGradient()},C.prototype._updateGradient=function(){var te=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=Wy(te,"lineProgress"),this.gradientTexture=null},C.prototype.recalculate=function(te,pe){E.prototype.recalculate.call(this,te,pe),this.paint._values["line-floorwidth"]=lm.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,te)},C.prototype.createBucket=function(te){return new bl(te)},C.prototype.queryRadius=function(te){var pe=te,be=um(Rl("line-width",this,pe),Rl("line-gap-width",this,pe)),Se=Rl("line-offset",this,pe);return be/2+Math.abs(Se)+Lu(this.paint.get("line-translate"))},C.prototype.queryIntersectsFeature=function(te,pe,be,Se,Fe,tt,ct){var gt=du(te,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),tt.angle,ct),Rt=ct/2*um(this.paint.get("line-width").evaluate(pe,be),this.paint.get("line-gap-width").evaluate(pe,be)),jt=this.paint.get("line-offset").evaluate(pe,be);return jt&&(Se=N_(Se,jt*ct)),Vo(gt,Se,Rt)},C.prototype.isTileClipped=function(){return!0},C}(ks);function um(E,C){return C>0?C+2*E:E}function N_(E,C){for(var N=[],te=new c(0,0),pe=0;pe<E.length;pe++){for(var be=E[pe],Se=[],Fe=0;Fe<be.length;Fe++){var tt=be[Fe-1],ct=be[Fe],gt=be[Fe+1],Rt=Fe===0?te:ct.sub(tt)._unit()._perp(),jt=Fe===be.length-1?te:gt.sub(ct)._unit()._perp(),Gt=Rt._add(jt)._unit(),lr=Gt.x*jt.x+Gt.y*jt.y;Gt._mult(1/lr),Se.push(Gt._mult(C)._add(ct))}N.push(Se)}return N}var _0=Fo([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),B_=Fo([{name:"a_projected_pos",components:3,type:"Float32"}],4);Fo([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var U_=Fo([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Fo([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);var fm=Fo([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),H_=Fo([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Fo([{name:"triangle",components:3,type:"Uint16"}]),Fo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Fo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Fo([{type:"Float32",name:"offsetX"}]),Fo([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);function V_(E,C,N){var te=C.layout.get("text-transform").evaluate(N,{});return te==="uppercase"?E=E.toLocaleUpperCase():te==="lowercase"&&(E=E.toLocaleLowerCase()),Xa.applyArabicShaping&&(E=Xa.applyArabicShaping(E)),E}function G_(E,C,N){return E.sections.forEach(function(te){te.text=V_(te.text,C,N)}),E}function Y_(E){var C={},N={},te=[],pe=0;function be(qr){te.push(E[qr]),pe++}function Se(qr,Mn,bn){var An=N[qr];return delete N[qr],N[Mn]=An,te[An].geometry[0].pop(),te[An].geometry[0]=te[An].geometry[0].concat(bn[0]),An}function Fe(qr,Mn,bn){var An=C[Mn];return delete C[Mn],C[qr]=An,te[An].geometry[0].shift(),te[An].geometry[0]=bn[0].concat(te[An].geometry[0]),An}function tt(qr,Mn,bn){var An=bn?Mn[0][Mn[0].length-1]:Mn[0][0];return qr+":"+An.x+":"+An.y}for(var ct=0;ct<E.length;ct++){var gt=E[ct],Rt=gt.geometry,jt=gt.text?gt.text.toString():null;if(!jt){be(ct);continue}var Gt=tt(jt,Rt),lr=tt(jt,Rt,!0);if(Gt in N&&lr in C&&N[Gt]!==C[lr]){var Ir=Fe(Gt,lr,Rt),un=Se(Gt,lr,te[Ir].geometry);delete C[Gt],delete N[lr],N[tt(jt,te[un].geometry,!0)]=un,te[Ir].geometry=null}else Gt in N?Se(Gt,lr,Rt):lr in C?Fe(Gt,lr,Rt):(be(ct),C[Gt]=pe-1,N[lr]=pe-1)}return te.filter(function(qr){return qr.geometry})}var xv={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};function W_(E){for(var C="",N=0;N<E.length;N++){var te=E.charCodeAt(N+1)||null,pe=E.charCodeAt(N-1)||null,be=(!te||!ln(te)||xv[E[N+1]])&&(!pe||!ln(pe)||xv[E[N-1]]);be&&xv[E[N]]?C+=xv[E[N]]:C+=E[N]}return C}var bs=24,X_=function(E,C,N,te,pe){var be,Se,Fe=pe*8-te-1,tt=(1<<Fe)-1,ct=tt>>1,gt=-7,Rt=N?pe-1:0,jt=N?-1:1,Gt=E[C+Rt];for(Rt+=jt,be=Gt&(1<<-gt)-1,Gt>>=-gt,gt+=Fe;gt>0;be=be*256+E[C+Rt],Rt+=jt,gt-=8);for(Se=be&(1<<-gt)-1,be>>=-gt,gt+=te;gt>0;Se=Se*256+E[C+Rt],Rt+=jt,gt-=8);if(be===0)be=1-ct;else{if(be===tt)return Se?NaN:(Gt?-1:1)*(1/0);Se=Se+Math.pow(2,te),be=be-ct}return(Gt?-1:1)*Se*Math.pow(2,be-te)},j_=function(E,C,N,te,pe,be){var Se,Fe,tt,ct=be*8-pe-1,gt=(1<<ct)-1,Rt=gt>>1,jt=pe===23?Math.pow(2,-24)-Math.pow(2,-77):0,Gt=te?0:be-1,lr=te?1:-1,Ir=C<0||C===0&&1/C<0?1:0;for(C=Math.abs(C),isNaN(C)||C===1/0?(Fe=isNaN(C)?1:0,Se=gt):(Se=Math.floor(Math.log(C)/Math.LN2),C*(tt=Math.pow(2,-Se))<1&&(Se--,tt*=2),Se+Rt>=1?C+=jt/tt:C+=jt*Math.pow(2,1-Rt),C*tt>=2&&(Se++,tt/=2),Se+Rt>=gt?(Fe=0,Se=gt):Se+Rt>=1?(Fe=(C*tt-1)*Math.pow(2,pe),Se=Se+Rt):(Fe=C*Math.pow(2,Rt-1)*Math.pow(2,pe),Se=0));pe>=8;E[N+Gt]=Fe&255,Gt+=lr,Fe/=256,pe-=8);for(Se=Se<<pe|Fe,ct+=pe;ct>0;E[N+Gt]=Se&255,Gt+=lr,Se/=256,ct-=8);E[N+Gt-lr]|=Ir*128},Fp={read:X_,write:j_},Op=no;function no(E){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(E)?E:new Uint8Array(E||0),this.pos=0,this.type=0,this.length=this.buf.length}no.Varint=0,no.Fixed64=1,no.Bytes=2,no.Fixed32=5;var w0=(1<<16)*(1<<16),cm=1/w0,Z_=12,hm=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");no.prototype={destroy:function(){this.buf=null},readFields:function(E,C,N){for(N=N||this.length;this.pos<N;){var te=this.readVarint(),pe=te>>3,be=this.pos;this.type=te&7,E(pe,C,this),this.pos===be&&this.skip(te)}return C},readMessage:function(E,C){return this.readFields(E,C,this.readVarint()+this.pos)},readFixed32:function(){var E=Np(this.buf,this.pos);return this.pos+=4,E},readSFixed32:function(){var E=pm(this.buf,this.pos);return this.pos+=4,E},readFixed64:function(){var E=Np(this.buf,this.pos)+Np(this.buf,this.pos+4)*w0;return this.pos+=8,E},readSFixed64:function(){var E=Np(this.buf,this.pos)+pm(this.buf,this.pos+4)*w0;return this.pos+=8,E},readFloat:function(){var E=Fp.read(this.buf,this.pos,!0,23,4);return this.pos+=4,E},readDouble:function(){var E=Fp.read(this.buf,this.pos,!0,52,8);return this.pos+=8,E},readVarint:function(E){var C=this.buf,N,te;return te=C[this.pos++],N=te&127,te<128||(te=C[this.pos++],N|=(te&127)<<7,te<128)||(te=C[this.pos++],N|=(te&127)<<14,te<128)||(te=C[this.pos++],N|=(te&127)<<21,te<128)?N:(te=C[this.pos],N|=(te&15)<<28,K_(N,E,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var E=this.readVarint();return E%2===1?(E+1)/-2:E/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var E=this.readVarint()+this.pos,C=this.pos;return this.pos=E,E-C>=Z_&&hm?uw(this.buf,C,E):lw(this.buf,C,E)},readBytes:function(){var E=this.readVarint()+this.pos,C=this.buf.subarray(this.pos,E);return this.pos=E,C},readPackedVarint:function(E,C){if(this.type!==no.Bytes)return E.push(this.readVarint(C));var N=Bf(this);for(E=E||[];this.pos<N;)E.push(this.readVarint(C));return E},readPackedSVarint:function(E){if(this.type!==no.Bytes)return E.push(this.readSVarint());var C=Bf(this);for(E=E||[];this.pos<C;)E.push(this.readSVarint());return E},readPackedBoolean:function(E){if(this.type!==no.Bytes)return E.push(this.readBoolean());var C=Bf(this);for(E=E||[];this.pos<C;)E.push(this.readBoolean());return E},readPackedFloat:function(E){if(this.type!==no.Bytes)return E.push(this.readFloat());var C=Bf(this);for(E=E||[];this.pos<C;)E.push(this.readFloat());return E},readPackedDouble:function(E){if(this.type!==no.Bytes)return E.push(this.readDouble());var C=Bf(this);for(E=E||[];this.pos<C;)E.push(this.readDouble());return E},readPackedFixed32:function(E){if(this.type!==no.Bytes)return E.push(this.readFixed32());var C=Bf(this);for(E=E||[];this.pos<C;)E.push(this.readFixed32());return E},readPackedSFixed32:function(E){if(this.type!==no.Bytes)return E.push(this.readSFixed32());var C=Bf(this);for(E=E||[];this.pos<C;)E.push(this.readSFixed32());return E},readPackedFixed64:function(E){if(this.type!==no.Bytes)return E.push(this.readFixed64());var C=Bf(this);for(E=E||[];this.pos<C;)E.push(this.readFixed64());return E},readPackedSFixed64:function(E){if(this.type!==no.Bytes)return E.push(this.readSFixed64());var C=Bf(this);for(E=E||[];this.pos<C;)E.push(this.readSFixed64());return E},skip:function(E){var C=E&7;if(C===no.Varint)for(;this.buf[this.pos++]>127;);else if(C===no.Bytes)this.pos=this.readVarint()+this.pos;else if(C===no.Fixed32)this.pos+=4;else if(C===no.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+C)},writeTag:function(E,C){this.writeVarint(E<<3|C)},realloc:function(E){for(var C=this.length||16;C<this.pos+E;)C*=2;if(C!==this.length){var N=new Uint8Array(C);N.set(this.buf),this.buf=N,this.length=C}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(E){this.realloc(4),gh(this.buf,E,this.pos),this.pos+=4},writeSFixed32:function(E){this.realloc(4),gh(this.buf,E,this.pos),this.pos+=4},writeFixed64:function(E){this.realloc(8),gh(this.buf,E&-1,this.pos),gh(this.buf,Math.floor(E*cm),this.pos+4),this.pos+=8},writeSFixed64:function(E){this.realloc(8),gh(this.buf,E&-1,this.pos),gh(this.buf,Math.floor(E*cm),this.pos+4),this.pos+=8},writeVarint:function(E){if(E=+E||0,E>268435455||E<0){J_(E,this);return}this.realloc(4),this.buf[this.pos++]=E&127|(E>127?128:0),!(E<=127)&&(this.buf[this.pos++]=(E>>>=7)&127|(E>127?128:0),!(E<=127)&&(this.buf[this.pos++]=(E>>>=7)&127|(E>127?128:0),!(E<=127)&&(this.buf[this.pos++]=E>>>7&127)))},writeSVarint:function(E){this.writeVarint(E<0?-E*2-1:E*2)},writeBoolean:function(E){this.writeVarint(Boolean(E))},writeString:function(E){E=String(E),this.realloc(E.length*4),this.pos++;var C=this.pos;this.pos=fw(this.buf,E,this.pos);var N=this.pos-C;N>=128&&vm(C,N,this),this.pos=C-1,this.writeVarint(N),this.pos+=N},writeFloat:function(E){this.realloc(4),Fp.write(this.buf,E,this.pos,!0,23,4),this.pos+=4},writeDouble:function(E){this.realloc(8),Fp.write(this.buf,E,this.pos,!0,52,8),this.pos+=8},writeBytes:function(E){var C=E.length;this.writeVarint(C),this.realloc(C);for(var N=0;N<C;N++)this.buf[this.pos++]=E[N]},writeRawMessage:function(E,C){this.pos++;var N=this.pos;E(C,this);var te=this.pos-N;te>=128&&vm(N,te,this),this.pos=N-1,this.writeVarint(te),this.pos+=te},writeMessage:function(E,C,N){this.writeTag(E,no.Bytes),this.writeRawMessage(C,N)},writePackedVarint:function(E,C){C.length&&this.writeMessage(E,q_,C)},writePackedSVarint:function(E,C){C.length&&this.writeMessage(E,ew,C)},writePackedBoolean:function(E,C){C.length&&this.writeMessage(E,nw,C)},writePackedFloat:function(E,C){C.length&&this.writeMessage(E,tw,C)},writePackedDouble:function(E,C){C.length&&this.writeMessage(E,rw,C)},writePackedFixed32:function(E,C){C.length&&this.writeMessage(E,aw,C)},writePackedSFixed32:function(E,C){C.length&&this.writeMessage(E,iw,C)},writePackedFixed64:function(E,C){C.length&&this.writeMessage(E,ow,C)},writePackedSFixed64:function(E,C){C.length&&this.writeMessage(E,sw,C)},writeBytesField:function(E,C){this.writeTag(E,no.Bytes),this.writeBytes(C)},writeFixed32Field:function(E,C){this.writeTag(E,no.Fixed32),this.writeFixed32(C)},writeSFixed32Field:function(E,C){this.writeTag(E,no.Fixed32),this.writeSFixed32(C)},writeFixed64Field:function(E,C){this.writeTag(E,no.Fixed64),this.writeFixed64(C)},writeSFixed64Field:function(E,C){this.writeTag(E,no.Fixed64),this.writeSFixed64(C)},writeVarintField:function(E,C){this.writeTag(E,no.Varint),this.writeVarint(C)},writeSVarintField:function(E,C){this.writeTag(E,no.Varint),this.writeSVarint(C)},writeStringField:function(E,C){this.writeTag(E,no.Bytes),this.writeString(C)},writeFloatField:function(E,C){this.writeTag(E,no.Fixed32),this.writeFloat(C)},writeDoubleField:function(E,C){this.writeTag(E,no.Fixed64),this.writeDouble(C)},writeBooleanField:function(E,C){this.writeVarintField(E,Boolean(C))}};function K_(E,C,N){var te=N.buf,pe,be;if(be=te[N.pos++],pe=(be&112)>>4,be<128||(be=te[N.pos++],pe|=(be&127)<<3,be<128)||(be=te[N.pos++],pe|=(be&127)<<10,be<128)||(be=te[N.pos++],pe|=(be&127)<<17,be<128)||(be=te[N.pos++],pe|=(be&127)<<24,be<128)||(be=te[N.pos++],pe|=(be&1)<<31,be<128))return dh(E,pe,C);throw new Error("Expected varint not more than 10 bytes")}function Bf(E){return E.type===no.Bytes?E.readVarint()+E.pos:E.pos+1}function dh(E,C,N){return N?C*4294967296+(E>>>0):(C>>>0)*4294967296+(E>>>0)}function J_(E,C){var N,te;if(E>=0?(N=E%4294967296|0,te=E/4294967296|0):(N=~(-E%4294967296),te=~(-E/4294967296),N^4294967295?N=N+1|0:(N=0,te=te+1|0)),E>=18446744073709552e3||E<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");C.realloc(10),Q_(N,te,C),$_(te,C)}function Q_(E,C,N){N.buf[N.pos++]=E&127|128,E>>>=7,N.buf[N.pos++]=E&127|128,E>>>=7,N.buf[N.pos++]=E&127|128,E>>>=7,N.buf[N.pos++]=E&127|128,E>>>=7,N.buf[N.pos]=E&127}function $_(E,C){var N=(E&7)<<4;C.buf[C.pos++]|=N|((E>>>=3)?128:0),E&&(C.buf[C.pos++]=E&127|((E>>>=7)?128:0),E&&(C.buf[C.pos++]=E&127|((E>>>=7)?128:0),E&&(C.buf[C.pos++]=E&127|((E>>>=7)?128:0),E&&(C.buf[C.pos++]=E&127|((E>>>=7)?128:0),E&&(C.buf[C.pos++]=E&127)))))}function vm(E,C,N){var te=C<=16383?1:C<=2097151?2:C<=268435455?3:Math.floor(Math.log(C)/(Math.LN2*7));N.realloc(te);for(var pe=N.pos-1;pe>=E;pe--)N.buf[pe+te]=N.buf[pe]}function q_(E,C){for(var N=0;N<E.length;N++)C.writeVarint(E[N])}function ew(E,C){for(var N=0;N<E.length;N++)C.writeSVarint(E[N])}function tw(E,C){for(var N=0;N<E.length;N++)C.writeFloat(E[N])}function rw(E,C){for(var N=0;N<E.length;N++)C.writeDouble(E[N])}function nw(E,C){for(var N=0;N<E.length;N++)C.writeBoolean(E[N])}function aw(E,C){for(var N=0;N<E.length;N++)C.writeFixed32(E[N])}function iw(E,C){for(var N=0;N<E.length;N++)C.writeSFixed32(E[N])}function ow(E,C){for(var N=0;N<E.length;N++)C.writeFixed64(E[N])}function sw(E,C){for(var N=0;N<E.length;N++)C.writeSFixed64(E[N])}function Np(E,C){return(E[C]|E[C+1]<<8|E[C+2]<<16)+E[C+3]*16777216}function gh(E,C,N){E[N]=C,E[N+1]=C>>>8,E[N+2]=C>>>16,E[N+3]=C>>>24}function pm(E,C){return(E[C]|E[C+1]<<8|E[C+2]<<16)+(E[C+3]<<24)}function lw(E,C,N){for(var te="",pe=C;pe<N;){var be=E[pe],Se=null,Fe=be>239?4:be>223?3:be>191?2:1;if(pe+Fe>N)break;var tt,ct,gt;Fe===1?be<128&&(Se=be):Fe===2?(tt=E[pe+1],(tt&192)===128&&(Se=(be&31)<<6|tt&63,Se<=127&&(Se=null))):Fe===3?(tt=E[pe+1],ct=E[pe+2],(tt&192)===128&&(ct&192)===128&&(Se=(be&15)<<12|(tt&63)<<6|ct&63,(Se<=2047||Se>=55296&&Se<=57343)&&(Se=null))):Fe===4&&(tt=E[pe+1],ct=E[pe+2],gt=E[pe+3],(tt&192)===128&&(ct&192)===128&&(gt&192)===128&&(Se=(be&15)<<18|(tt&63)<<12|(ct&63)<<6|gt&63,(Se<=65535||Se>=1114112)&&(Se=null))),Se===null?(Se=65533,Fe=1):Se>65535&&(Se-=65536,te+=String.fromCharCode(Se>>>10&1023|55296),Se=56320|Se&1023),te+=String.fromCharCode(Se),pe+=Fe}return te}function uw(E,C,N){return hm.decode(E.subarray(C,N))}function fw(E,C,N){for(var te=0,pe,be;te<C.length;te++){if(pe=C.charCodeAt(te),pe>55295&&pe<57344)if(be)if(pe<56320){E[N++]=239,E[N++]=191,E[N++]=189,be=pe;continue}else pe=be-55296<<10|pe-56320|65536,be=null;else{pe>56319||te+1===C.length?(E[N++]=239,E[N++]=191,E[N++]=189):be=pe;continue}else be&&(E[N++]=239,E[N++]=191,E[N++]=189,be=null);pe<128?E[N++]=pe:(pe<2048?E[N++]=pe>>6|192:(pe<65536?E[N++]=pe>>12|224:(E[N++]=pe>>18|240,E[N++]=pe>>12&63|128),E[N++]=pe>>6&63|128),E[N++]=pe&63|128)}return N}var T0=3;function cw(E,C,N){E===1&&N.readMessage(hw,C)}function hw(E,C,N){if(E===3){var te=N.readMessage(vw,{}),pe=te.id,be=te.bitmap,Se=te.width,Fe=te.height,tt=te.left,ct=te.top,gt=te.advance;C.push({id:pe,bitmap:new Nc({width:Se+2*T0,height:Fe+2*T0},be),metrics:{width:Se,height:Fe,left:tt,top:ct,advance:gt}})}}function vw(E,C,N){E===1?C.id=N.readVarint():E===2?C.bitmap=N.readBytes():E===3?C.width=N.readVarint():E===4?C.height=N.readVarint():E===5?C.left=N.readSVarint():E===6?C.top=N.readSVarint():E===7&&(C.advance=N.readVarint())}function pw(E){return new Op(E).readFields(cw,[])}var dm=T0;function gm(E){for(var C=0,N=0,te=0,pe=E;te<pe.length;te+=1){var be=pe[te];C+=be.w*be.h,N=Math.max(N,be.w)}E.sort(function(un,qr){return qr.h-un.h});for(var Se=Math.max(Math.ceil(Math.sqrt(C/.95)),N),Fe=[{x:0,y:0,w:Se,h:1/0}],tt=0,ct=0,gt=0,Rt=E;gt<Rt.length;gt+=1)for(var jt=Rt[gt],Gt=Fe.length-1;Gt>=0;Gt--){var lr=Fe[Gt];if(!(jt.w>lr.w||jt.h>lr.h)){if(jt.x=lr.x,jt.y=lr.y,ct=Math.max(ct,jt.y+jt.h),tt=Math.max(tt,jt.x+jt.w),jt.w===lr.w&&jt.h===lr.h){var Ir=Fe.pop();Gt<Fe.length&&(Fe[Gt]=Ir)}else jt.h===lr.h?(lr.x+=jt.w,lr.w-=jt.w):jt.w===lr.w?(lr.y+=jt.h,lr.h-=jt.h):(Fe.push({x:lr.x+jt.w,y:lr.y,w:lr.w-jt.w,h:jt.h}),lr.y+=jt.h,lr.h-=jt.h);break}}return{w:tt,h:ct,fill:C/(tt*ct)||0}}var Il=1,Bp=function(C,N){var te=N.pixelRatio,pe=N.version,be=N.stretchX,Se=N.stretchY,Fe=N.content;this.paddedRect=C,this.pixelRatio=te,this.stretchX=be,this.stretchY=Se,this.content=Fe,this.version=pe},bv={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};bv.tl.get=function(){return[this.paddedRect.x+Il,this.paddedRect.y+Il]},bv.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-Il,this.paddedRect.y+this.paddedRect.h-Il]},bv.tlbr.get=function(){return this.tl.concat(this.br)},bv.displaySize.get=function(){return[(this.paddedRect.w-Il*2)/this.pixelRatio,(this.paddedRect.h-Il*2)/this.pixelRatio]},Object.defineProperties(Bp.prototype,bv);var _v=function(C,N){var te={},pe={};this.haveRenderCallbacks=[];var be=[];this.addImages(C,te,be),this.addImages(N,pe,be);var Se=gm(be),Fe=Se.w,tt=Se.h,ct=new xl({width:Fe||1,height:tt||1});for(var gt in C){var Rt=C[gt],jt=te[gt].paddedRect;xl.copy(Rt.data,ct,{x:0,y:0},{x:jt.x+Il,y:jt.y+Il},Rt.data)}for(var Gt in N){var lr=N[Gt],Ir=pe[Gt].paddedRect,un=Ir.x+Il,qr=Ir.y+Il,Mn=lr.data.width,bn=lr.data.height;xl.copy(lr.data,ct,{x:0,y:0},{x:un,y:qr},lr.data),xl.copy(lr.data,ct,{x:0,y:bn-1},{x:un,y:qr-1},{width:Mn,height:1}),xl.copy(lr.data,ct,{x:0,y:0},{x:un,y:qr+bn},{width:Mn,height:1}),xl.copy(lr.data,ct,{x:Mn-1,y:0},{x:un-1,y:qr},{width:1,height:bn}),xl.copy(lr.data,ct,{x:0,y:0},{x:un+Mn,y:qr},{width:1,height:bn})}this.image=ct,this.iconPositions=te,this.patternPositions=pe};_v.prototype.addImages=function(C,N,te){for(var pe in C){var be=C[pe],Se={x:0,y:0,w:be.data.width+2*Il,h:be.data.height+2*Il};te.push(Se),N[pe]=new Bp(Se,be),be.hasRenderCallback&&this.haveRenderCallbacks.push(pe)}},_v.prototype.patchUpdatedImages=function(C,N){C.dispatchRenderCallbacks(this.haveRenderCallbacks);for(var te in C.updatedImages)this.patchUpdatedImage(this.iconPositions[te],C.getImage(te),N),this.patchUpdatedImage(this.patternPositions[te],C.getImage(te),N)},_v.prototype.patchUpdatedImage=function(C,N,te){if(!(!C||!N)&&C.version!==N.version){C.version=N.version;var pe=C.tl,be=pe[0],Se=pe[1];te.update(N.data,void 0,{x:be,y:Se})}},Oe("ImagePosition",Bp),Oe("ImageAtlas",_v);var Ql={horizontal:1,vertical:2,horizontalOnly:3},wv=-17;function dw(E){for(var C=0,N=E;C<N.length;C+=1){var te=N[C];if(te.positionedGlyphs.length!==0)return!1}return!0}var ym=57344,mm=63743,yh=function(){this.scale=1,this.fontStack="",this.imageName=null};yh.forText=function(C,N){var te=new yh;return te.scale=C||1,te.fontStack=N,te},yh.forImage=function(C){var N=new yh;return N.imageName=C,N};var Bs=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};Bs.fromFeature=function(C,N){for(var te=new Bs,pe=0;pe<C.sections.length;pe++){var be=C.sections[pe];be.image?te.addImageSection(be):te.addTextSection(be,N)}return te},Bs.prototype.length=function(){return this.text.length},Bs.prototype.getSection=function(C){return this.sections[this.sectionIndex[C]]},Bs.prototype.getSectionIndex=function(C){return this.sectionIndex[C]},Bs.prototype.getCharCode=function(C){return this.text.charCodeAt(C)},Bs.prototype.verticalizePunctuation=function(){this.text=W_(this.text)},Bs.prototype.trim=function(){for(var C=0,N=0;N<this.text.length&&Ef[this.text.charCodeAt(N)];N++)C++;for(var te=this.text.length,pe=this.text.length-1;pe>=0&&pe>=C&&Ef[this.text.charCodeAt(pe)];pe--)te--;this.text=this.text.substring(C,te),this.sectionIndex=this.sectionIndex.slice(C,te)},Bs.prototype.substring=function(C,N){var te=new Bs;return te.text=this.text.substring(C,N),te.sectionIndex=this.sectionIndex.slice(C,N),te.sections=this.sections,te},Bs.prototype.toString=function(){return this.text},Bs.prototype.getMaxScale=function(){var C=this;return this.sectionIndex.reduce(function(N,te){return Math.max(N,C.sections[te].scale)},0)},Bs.prototype.addTextSection=function(C,N){this.text+=C.text,this.sections.push(yh.forText(C.scale,C.fontStack||N));for(var te=this.sections.length-1,pe=0;pe<C.text.length;++pe)this.sectionIndex.push(te)},Bs.prototype.addImageSection=function(C){var N=C.image?C.image.name:"";if(N.length===0){O("Can't add FormattedSection with an empty image.");return}var te=this.getNextImageSectionCharCode();if(!te){O("Reached maximum number of images "+(mm-ym+2));return}this.text+=String.fromCharCode(te),this.sections.push(yh.forImage(N)),this.sectionIndex.push(this.sections.length-1)},Bs.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=mm?null:++this.imageSectionID:(this.imageSectionID=ym,this.imageSectionID)};function gw(E,C){for(var N=[],te=E.text,pe=0,be=0,Se=C;be<Se.length;be+=1){var Fe=Se[be];N.push(E.substring(pe,Fe)),pe=Fe}return pe<te.length&&N.push(E.substring(pe,te.length)),N}function Up(E,C,N,te,pe,be,Se,Fe,tt,ct,gt,Rt,jt,Gt,lr,Ir){var un=Bs.fromFeature(E,pe);Rt===Ql.vertical&&un.verticalizePunctuation();var qr,Mn=Xa.processBidirectionalText,bn=Xa.processStyledBidirectionalText;if(Mn&&un.sections.length===1){qr=[];for(var An=Mn(un.toString(),A0(un,ct,be,C,te,Gt,lr)),Dn=0,Xn=An;Dn<Xn.length;Dn+=1){var sa=Xn[Dn],na=new Bs;na.text=sa,na.sections=un.sections;for(var za=0;za<sa.length;za++)na.sectionIndex.push(0);qr.push(na)}}else if(bn){qr=[];for(var Ta=bn(un.text,un.sectionIndex,A0(un,ct,be,C,te,Gt,lr)),Sa=0,ti=Ta;Sa<ti.length;Sa+=1){var Da=ti[Sa],Ia=new Bs;Ia.text=Da[0],Ia.sectionIndex=Da[1],Ia.sections=un.sections,qr.push(Ia)}}else qr=gw(un,A0(un,ct,be,C,te,Gt,lr));var ui=[],qa={positionedLines:ui,text:un.toString(),top:gt[1],bottom:gt[1],left:gt[0],right:gt[0],writingMode:Rt,iconsInText:!1,verticalizable:!1};return xw(qa,C,N,te,qr,Se,Fe,tt,Rt,ct,jt,Ir),dw(ui)?!1:qa}var Ef={};Ef[9]=!0,Ef[10]=!0,Ef[11]=!0,Ef[12]=!0,Ef[13]=!0,Ef[32]=!0;var zl={};zl[10]=!0,zl[32]=!0,zl[38]=!0,zl[40]=!0,zl[41]=!0,zl[43]=!0,zl[45]=!0,zl[47]=!0,zl[173]=!0,zl[183]=!0,zl[8203]=!0,zl[8208]=!0,zl[8211]=!0,zl[8231]=!0;function xm(E,C,N,te,pe,be){if(C.imageName){var tt=te[C.imageName];return tt?tt.displaySize[0]*C.scale*bs/be+pe:0}else{var Se=N[C.fontStack],Fe=Se&&Se[E];return Fe?Fe.metrics.advance*C.scale+pe:0}}function yw(E,C,N,te,pe,be){for(var Se=0,Fe=0;Fe<E.length();Fe++){var tt=E.getSection(Fe);Se+=xm(E.getCharCode(Fe),tt,te,pe,C,be)}var ct=Math.max(1,Math.ceil(Se/N));return Se/ct}function bm(E,C,N,te){var pe=Math.pow(E-C,2);return te?E<C?pe/2:pe*2:pe+Math.abs(N)*N}function mw(E,C,N){var te=0;return E===10&&(te-=1e4),N&&(te+=150),(E===40||E===65288)&&(te+=50),(C===41||C===65289)&&(te+=50),te}function _m(E,C,N,te,pe,be){for(var Se=null,Fe=bm(C,N,pe,be),tt=0,ct=te;tt<ct.length;tt+=1){var gt=ct[tt],Rt=C-gt.x,jt=bm(Rt,N,pe,be)+gt.badness;jt<=Fe&&(Se=gt,Fe=jt)}return{index:E,x:C,priorBreak:Se,badness:Fe}}function wm(E){return E?wm(E.priorBreak).concat(E.index):[]}function A0(E,C,N,te,pe,be,Se){if(be!=="point")return[];if(!E)return[];for(var Fe=[],tt=yw(E,C,N,te,pe,Se),ct=E.text.indexOf("\u200B")>=0,gt=0,Rt=0;Rt<E.length();Rt++){var jt=E.getSection(Rt),Gt=E.getCharCode(Rt);if(Ef[Gt]||(gt+=xm(Gt,jt,te,pe,C,Se)),Rt<E.length()-1){var lr=Mr(Gt);(zl[Gt]||lr||jt.imageName)&&Fe.push(_m(Rt+1,gt,tt,Fe,mw(Gt,E.getCharCode(Rt+1),lr&&ct),!1))}}return wm(_m(E.length(),gt,tt,Fe,0,!0))}function M0(E){var C=.5,N=.5;switch(E){case"right":case"top-right":case"bottom-right":C=1;break;case"left":case"top-left":case"bottom-left":C=0;break}switch(E){case"bottom":case"bottom-right":case"bottom-left":N=1;break;case"top":case"top-right":case"top-left":N=0;break}return{horizontalAlign:C,verticalAlign:N}}function xw(E,C,N,te,pe,be,Se,Fe,tt,ct,gt,Rt){for(var jt=0,Gt=wv,lr=0,Ir=0,un=Fe==="right"?1:Fe==="left"?0:.5,qr=0,Mn=0,bn=pe;Mn<bn.length;Mn+=1){var An=bn[Mn];An.trim();var Dn=An.getMaxScale(),Xn=(Dn-1)*bs,sa={positionedGlyphs:[],lineOffset:0};E.positionedLines[qr]=sa;var na=sa.positionedGlyphs,za=0;if(!An.length()){Gt+=be,++qr;continue}for(var Ta=0;Ta<An.length();Ta++){var Sa=An.getSection(Ta),ti=An.getSectionIndex(Ta),Da=An.getCharCode(Ta),Ia=0,ui=null,qa=null,Si=null,Wi=bs,ki=!(tt===Ql.horizontal||!gt&&!Or(Da)||gt&&(Ef[Da]||fn(Da)));if(Sa.imageName){var To=te[Sa.imageName];if(!To)continue;Si=Sa.imageName,E.iconsInText=E.iconsInText||!0,qa=To.paddedRect;var Po=To.displaySize;Sa.scale=Sa.scale*bs/Rt,ui={width:Po[0],height:Po[1],left:Il,top:-dm,advance:ki?Po[1]:Po[0]};var os=bs-Po[1]*Sa.scale;Ia=Xn+os,Wi=ui.advance;var Xo=ki?Po[0]*Sa.scale-bs*Dn:Po[1]*Sa.scale-bs*Dn;Xo>0&&Xo>za&&(za=Xo)}else{var Ei=N[Sa.fontStack],wi=Ei&&Ei[Da];if(wi&&wi.rect)qa=wi.rect,ui=wi.metrics;else{var qi=C[Sa.fontStack],ao=qi&&qi[Da];if(!ao)continue;ui=ao.metrics}Ia=(Dn-Sa.scale)*bs}ki?(E.verticalizable=!0,na.push({glyph:Da,imageName:Si,x:jt,y:Gt+Ia,vertical:ki,scale:Sa.scale,fontStack:Sa.fontStack,sectionIndex:ti,metrics:ui,rect:qa}),jt+=Wi*Sa.scale+ct):(na.push({glyph:Da,imageName:Si,x:jt,y:Gt+Ia,vertical:ki,scale:Sa.scale,fontStack:Sa.fontStack,sectionIndex:ti,metrics:ui,rect:qa}),jt+=ui.advance*Sa.scale+ct)}if(na.length!==0){var Us=jt-ct;lr=Math.max(Us,lr),bw(na,0,na.length-1,un,za)}jt=0;var Hs=be*Dn+za;sa.lineOffset=Math.max(za,Xn),Gt+=Hs,Ir=Math.max(Hs,Ir),++qr}var ss=Gt-wv,el=M0(Se),tl=el.horizontalAlign,Qo=el.verticalAlign;_w(E.positionedLines,un,tl,Qo,lr,Ir,be,ss,pe.length),E.top+=-Qo*ss,E.bottom=E.top+ss,E.left+=-tl*lr,E.right=E.left+lr}function bw(E,C,N,te,pe){if(!(!te&&!pe))for(var be=E[N],Se=be.metrics.advance*be.scale,Fe=(E[N].x+Se)*te,tt=C;tt<=N;tt++)E[tt].x-=Fe,E[tt].y+=pe}function _w(E,C,N,te,pe,be,Se,Fe,tt){var ct=(C-N)*pe,gt=0;be!==Se?gt=-Fe*te-wv:gt=(-te*tt+.5)*Se;for(var Rt=0,jt=E;Rt<jt.length;Rt+=1)for(var Gt=jt[Rt],lr=0,Ir=Gt.positionedGlyphs;lr<Ir.length;lr+=1){var un=Ir[lr];un.x+=ct,un.y+=gt}}function ww(E,C,N){var te=M0(N),pe=te.horizontalAlign,be=te.verticalAlign,Se=C[0],Fe=C[1],tt=Se-E.displaySize[0]*pe,ct=tt+E.displaySize[0],gt=Fe-E.displaySize[1]*be,Rt=gt+E.displaySize[1];return{image:E,top:gt,bottom:Rt,left:tt,right:ct}}function Tm(E,C,N,te,pe,be){var Se=E.image,Fe;if(Se.content){var tt=Se.content,ct=Se.pixelRatio||1;Fe=[tt[0]/ct,tt[1]/ct,Se.displaySize[0]-tt[2]/ct,Se.displaySize[1]-tt[3]/ct]}var gt=C.left*be,Rt=C.right*be,jt,Gt,lr,Ir;N==="width"||N==="both"?(Ir=pe[0]+gt-te[3],Gt=pe[0]+Rt+te[1]):(Ir=pe[0]+(gt+Rt-Se.displaySize[0])/2,Gt=Ir+Se.displaySize[0]);var un=C.top*be,qr=C.bottom*be;return N==="height"||N==="both"?(jt=pe[1]+un-te[0],lr=pe[1]+qr+te[2]):(jt=pe[1]+(un+qr-Se.displaySize[1])/2,lr=jt+Se.displaySize[1]),{image:Se,top:jt,right:Gt,bottom:lr,left:Ir,collisionPadding:Fe}}var mh=function(E){function C(N,te,pe,be){E.call(this,N,te),this.angle=pe,be!==void 0&&(this.segment=be)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.clone=function(){return new C(this.x,this.y,this.angle,this.segment)},C}(c);Oe("Anchor",mh);var of=128;function S0(E,C){var N=C.expression;if(N.kind==="constant"){var te=N.evaluate(new si(E+1));return{kind:"constant",layoutSize:te}}else{if(N.kind==="source")return{kind:"source"};for(var pe=N.zoomStops,be=N.interpolationType,Se=0;Se<pe.length&&pe[Se]<=E;)Se++;Se=Math.max(0,Se-1);for(var Fe=Se;Fe<pe.length&&pe[Fe]<E+1;)Fe++;Fe=Math.min(pe.length-1,Fe);var tt=pe[Se],ct=pe[Fe];if(N.kind==="composite")return{kind:"composite",minZoom:tt,maxZoom:ct,interpolationType:be};var gt=N.evaluate(new si(tt)),Rt=N.evaluate(new si(ct));return{kind:"camera",minZoom:tt,maxZoom:ct,minSize:gt,maxSize:Rt,interpolationType:be}}}function Am(E,C,N){var te=C.uSize,pe=C.uSizeT,be=N.lowerSize,Se=N.upperSize;return E.kind==="source"?be/of:E.kind==="composite"?lo(be/of,Se/of,pe):te}function Mm(E,C){var N=0,te=0;if(E.kind==="constant")te=E.layoutSize;else if(E.kind!=="source"){var pe=E.interpolationType,be=E.minZoom,Se=E.maxZoom,Fe=pe?h(uo.interpolationFactor(pe,C,be,Se),0,1):0;E.kind==="camera"?te=lo(E.minSize,E.maxSize,Fe):N=Fe}return{uSizeT:N,uSize:te}}var Tw=Object.freeze({__proto__:null,getSizeData:S0,evaluateSizeForFeature:Am,evaluateSizeForZoom:Mm,SIZE_PACK_FACTOR:of});function Sm(E,C,N,te,pe){if(C.segment===void 0)return!0;for(var be=C,Se=C.segment+1,Fe=0;Fe>-N/2;){if(Se--,Se<0)return!1;Fe-=E[Se].dist(be),be=E[Se]}Fe+=E[Se].dist(E[Se+1]),Se++;for(var tt=[],ct=0;Fe<N/2;){var gt=E[Se-1],Rt=E[Se],jt=E[Se+1];if(!jt)return!1;var Gt=gt.angleTo(Rt)-Rt.angleTo(jt);for(Gt=Math.abs((Gt+3*Math.PI)%(Math.PI*2)-Math.PI),tt.push({distance:Fe,angleDelta:Gt}),ct+=Gt;Fe-tt[0].distance>te;)ct-=tt.shift().angleDelta;if(ct>pe)return!1;Se++,Fe+=Rt.dist(jt)}return!0}function km(E){for(var C=0,N=0;N<E.length-1;N++)C+=E[N].dist(E[N+1]);return C}function Em(E,C,N){return E?3/5*C*N:0}function Cm(E,C){return Math.max(E?E.right-E.left:0,C?C.right-C.left:0)}function Aw(E,C,N,te,pe,be){for(var Se=Em(N,pe,be),Fe=Cm(N,te)*be,tt=0,ct=km(E)/2,gt=0;gt<E.length-1;gt++){var Rt=E[gt],jt=E[gt+1],Gt=Rt.dist(jt);if(tt+Gt>ct){var lr=(ct-tt)/Gt,Ir=lo(Rt.x,jt.x,lr),un=lo(Rt.y,jt.y,lr),qr=new mh(Ir,un,jt.angleTo(Rt),gt);return qr._round(),!Se||Sm(E,qr,Fe,Se,C)?qr:void 0}tt+=Gt}}function Mw(E,C,N,te,pe,be,Se,Fe,tt){var ct=Em(te,be,Se),gt=Cm(te,pe),Rt=gt*Se,jt=E[0].x===0||E[0].x===tt||E[0].y===0||E[0].y===tt;C-Rt<C/4&&(C=Rt+C/4);var Gt=be*2,lr=jt?C/2*Fe%C:(gt/2+Gt)*Se*Fe%C;return Lm(E,lr,C,ct,N,Rt,jt,!1,tt)}function Lm(E,C,N,te,pe,be,Se,Fe,tt){for(var ct=be/2,gt=km(E),Rt=0,jt=C-N,Gt=[],lr=0;lr<E.length-1;lr++){for(var Ir=E[lr],un=E[lr+1],qr=Ir.dist(un),Mn=un.angleTo(Ir);jt+N<Rt+qr;){jt+=N;var bn=(jt-Rt)/qr,An=lo(Ir.x,un.x,bn),Dn=lo(Ir.y,un.y,bn);if(An>=0&&An<tt&&Dn>=0&&Dn<tt&&jt-ct>=0&&jt+ct<=gt){var Xn=new mh(An,Dn,Mn,lr);Xn._round(),(!te||Sm(E,Xn,be,te,pe))&&Gt.push(Xn)}}Rt+=qr}return!Fe&&!Gt.length&&!Se&&(Gt=Lm(E,Rt/2,N,te,pe,be,Se,!0,tt)),Gt}function Pm(E,C,N,te,pe){for(var be=[],Se=0;Se<E.length;Se++)for(var Fe=E[Se],tt=void 0,ct=0;ct<Fe.length-1;ct++){var gt=Fe[ct],Rt=Fe[ct+1];gt.x<C&&Rt.x<C||(gt.x<C?gt=new c(C,gt.y+(Rt.y-gt.y)*((C-gt.x)/(Rt.x-gt.x)))._round():Rt.x<C&&(Rt=new c(C,gt.y+(Rt.y-gt.y)*((C-gt.x)/(Rt.x-gt.x)))._round()),!(gt.y<N&&Rt.y<N)&&(gt.y<N?gt=new c(gt.x+(Rt.x-gt.x)*((N-gt.y)/(Rt.y-gt.y)),N)._round():Rt.y<N&&(Rt=new c(gt.x+(Rt.x-gt.x)*((N-gt.y)/(Rt.y-gt.y)),N)._round()),!(gt.x>=te&&Rt.x>=te)&&(gt.x>=te?gt=new c(te,gt.y+(Rt.y-gt.y)*((te-gt.x)/(Rt.x-gt.x)))._round():Rt.x>=te&&(Rt=new c(te,gt.y+(Rt.y-gt.y)*((te-gt.x)/(Rt.x-gt.x)))._round()),!(gt.y>=pe&&Rt.y>=pe)&&(gt.y>=pe?gt=new c(gt.x+(Rt.x-gt.x)*((pe-gt.y)/(Rt.y-gt.y)),pe)._round():Rt.y>=pe&&(Rt=new c(gt.x+(Rt.x-gt.x)*((pe-gt.y)/(Rt.y-gt.y)),pe)._round()),(!tt||!gt.equals(tt[tt.length-1]))&&(tt=[gt],be.push(tt)),tt.push(Rt)))))}return be}var xh=Il;function Dm(E,C,N,te){var pe=[],be=E.image,Se=be.pixelRatio,Fe=be.paddedRect.w-2*xh,tt=be.paddedRect.h-2*xh,ct=E.right-E.left,gt=E.bottom-E.top,Rt=be.stretchX||[[0,Fe]],jt=be.stretchY||[[0,tt]],Gt=function(Ei,wi){return Ei+wi[1]-wi[0]},lr=Rt.reduce(Gt,0),Ir=jt.reduce(Gt,0),un=Fe-lr,qr=tt-Ir,Mn=0,bn=lr,An=0,Dn=Ir,Xn=0,sa=un,na=0,za=qr;if(be.content&&te){var Ta=be.content;Mn=Hp(Rt,0,Ta[0]),An=Hp(jt,0,Ta[1]),bn=Hp(Rt,Ta[0],Ta[2]),Dn=Hp(jt,Ta[1],Ta[3]),Xn=Ta[0]-Mn,na=Ta[1]-An,sa=Ta[2]-Ta[0]-bn,za=Ta[3]-Ta[1]-Dn}var Sa=function(Ei,wi,qi,ao){var To=Vp(Ei.stretch-Mn,bn,ct,E.left),Po=Gp(Ei.fixed-Xn,sa,Ei.stretch,lr),os=Vp(wi.stretch-An,Dn,gt,E.top),Xo=Gp(wi.fixed-na,za,wi.stretch,Ir),Us=Vp(qi.stretch-Mn,bn,ct,E.left),Hs=Gp(qi.fixed-Xn,sa,qi.stretch,lr),ss=Vp(ao.stretch-An,Dn,gt,E.top),el=Gp(ao.fixed-na,za,ao.stretch,Ir),tl=new c(To,os),Qo=new c(Us,os),rl=new c(Us,ss),$l=new c(To,ss),Vf=new c(Po/Se,Xo/Se),sc=new c(Hs/Se,el/Se),lc=C*Math.PI/180;if(lc){var uc=Math.sin(lc),kh=Math.cos(lc),Du=[kh,-uc,uc,kh];tl._matMult(Du),Qo._matMult(Du),$l._matMult(Du),rl._matMult(Du)}var Kp=Ei.stretch+Ei.fixed,I0=qi.stretch+qi.fixed,Jp=wi.stretch+wi.fixed,z0=ao.stretch+ao.fixed,gu={x:be.paddedRect.x+xh+Kp,y:be.paddedRect.y+xh+Jp,w:I0-Kp,h:z0-Jp},Eh=sa/Se/ct,Qp=za/Se/gt;return{tl,tr:Qo,bl:$l,br:rl,tex:gu,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Vf,pixelOffsetBR:sc,minFontScaleX:Eh,minFontScaleY:Qp,isSDF:N}};if(!te||!be.stretchX&&!be.stretchY)pe.push(Sa({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Fe+1},{fixed:0,stretch:tt+1}));else for(var ti=Rm(Rt,un,lr),Da=Rm(jt,qr,Ir),Ia=0;Ia<ti.length-1;Ia++)for(var ui=ti[Ia],qa=ti[Ia+1],Si=0;Si<Da.length-1;Si++){var Wi=Da[Si],ki=Da[Si+1];pe.push(Sa(ui,Wi,qa,ki))}return pe}function Hp(E,C,N){for(var te=0,pe=0,be=E;pe<be.length;pe+=1){var Se=be[pe];te+=Math.max(C,Math.min(N,Se[1]))-Math.max(C,Math.min(N,Se[0]))}return te}function Rm(E,C,N){for(var te=[{fixed:-xh,stretch:0}],pe=0,be=E;pe<be.length;pe+=1){var Se=be[pe],Fe=Se[0],tt=Se[1],ct=te[te.length-1];te.push({fixed:Fe-ct.stretch,stretch:ct.stretch}),te.push({fixed:Fe-ct.stretch,stretch:ct.stretch+(tt-Fe)})}return te.push({fixed:C+xh,stretch:N}),te}function Vp(E,C,N,te){return E/C*N+te}function Gp(E,C,N,te){return E-C*N/te}function Sw(E,C,N,te,pe,be,Se,Fe){for(var tt=te.layout.get("text-rotate").evaluate(be,{})*Math.PI/180,ct=[],gt=0,Rt=C.positionedLines;gt<Rt.length;gt+=1)for(var jt=Rt[gt],Gt=0,lr=jt.positionedGlyphs;Gt<lr.length;Gt+=1){var Ir=lr[Gt];if(!!Ir.rect){var un=Ir.rect||{},qr=1,Mn=dm+qr,bn=!0,An=1,Dn=0,Xn=(pe||Fe)&&Ir.vertical,sa=Ir.metrics.advance*Ir.scale/2;if(Fe&&C.verticalizable){var na=(Ir.scale-1)*bs,za=(bs-Ir.metrics.width*Ir.scale)/2;Dn=jt.lineOffset/2-(Ir.imageName?-za:na)}if(Ir.imageName){var Ta=Se[Ir.imageName];bn=Ta.sdf,An=Ta.pixelRatio,Mn=Il/An}var Sa=pe?[Ir.x+sa,Ir.y]:[0,0],ti=pe?[0,0]:[Ir.x+sa+N[0],Ir.y+N[1]-Dn],Da=[0,0];Xn&&(Da=ti,ti=[0,0]);var Ia=(Ir.metrics.left-Mn)*Ir.scale-sa+ti[0],ui=(-Ir.metrics.top-Mn)*Ir.scale+ti[1],qa=Ia+un.w*Ir.scale/An,Si=ui+un.h*Ir.scale/An,Wi=new c(Ia,ui),ki=new c(qa,ui),Ei=new c(Ia,Si),wi=new c(qa,Si);if(Xn){var qi=new c(-sa,sa-wv),ao=-Math.PI/2,To=bs/2-sa,Po=Ir.imageName?To:0,os=new c(5-wv-To,-Po),Xo=new(Function.prototype.bind.apply(c,[null].concat(Da)));Wi._rotateAround(ao,qi)._add(os)._add(Xo),ki._rotateAround(ao,qi)._add(os)._add(Xo),Ei._rotateAround(ao,qi)._add(os)._add(Xo),wi._rotateAround(ao,qi)._add(os)._add(Xo)}if(tt){var Us=Math.sin(tt),Hs=Math.cos(tt),ss=[Hs,-Us,Us,Hs];Wi._matMult(ss),ki._matMult(ss),Ei._matMult(ss),wi._matMult(ss)}var el=new c(0,0),tl=new c(0,0),Qo=0,rl=0;ct.push({tl:Wi,tr:ki,bl:Ei,br:wi,tex:un,writingMode:C.writingMode,glyphOffset:Sa,sectionIndex:Ir.sectionIndex,isSDF:bn,pixelOffsetTL:el,pixelOffsetBR:tl,minFontScaleX:Qo,minFontScaleY:rl})}}return ct}var Yp=function(C,N,te,pe,be,Se,Fe,tt,ct,gt){if(this.boxStartIndex=C.length,ct){var Rt=Se.top,jt=Se.bottom,Gt=Se.collisionPadding;Gt&&(Rt-=Gt[1],jt+=Gt[3]);var lr=jt-Rt;lr>0&&(lr=Math.max(10,lr),this.circleDiameter=lr)}else{var Ir=Se.top*Fe-tt,un=Se.bottom*Fe+tt,qr=Se.left*Fe-tt,Mn=Se.right*Fe+tt,bn=Se.collisionPadding;if(bn&&(qr-=bn[0]*Fe,Ir-=bn[1]*Fe,Mn+=bn[2]*Fe,un+=bn[3]*Fe),gt){var An=new c(qr,Ir),Dn=new c(Mn,Ir),Xn=new c(qr,un),sa=new c(Mn,un),na=gt*Math.PI/180;An._rotate(na),Dn._rotate(na),Xn._rotate(na),sa._rotate(na),qr=Math.min(An.x,Dn.x,Xn.x,sa.x),Mn=Math.max(An.x,Dn.x,Xn.x,sa.x),Ir=Math.min(An.y,Dn.y,Xn.y,sa.y),un=Math.max(An.y,Dn.y,Xn.y,sa.y)}C.emplaceBack(N.x,N.y,qr,Ir,Mn,un,te,pe,be)}this.boxEndIndex=C.length},bh=function(C,N){if(C===void 0&&(C=[]),N===void 0&&(N=kw),this.data=C,this.length=this.data.length,this.compare=N,this.length>0)for(var te=(this.length>>1)-1;te>=0;te--)this._down(te)};bh.prototype.push=function(C){this.data.push(C),this.length++,this._up(this.length-1)},bh.prototype.pop=function(){if(this.length!==0){var C=this.data[0],N=this.data.pop();return this.length--,this.length>0&&(this.data[0]=N,this._down(0)),C}},bh.prototype.peek=function(){return this.data[0]},bh.prototype._up=function(C){for(var N=this,te=N.data,pe=N.compare,be=te[C];C>0;){var Se=C-1>>1,Fe=te[Se];if(pe(be,Fe)>=0)break;te[C]=Fe,C=Se}te[C]=be},bh.prototype._down=function(C){for(var N=this,te=N.data,pe=N.compare,be=this.length>>1,Se=te[C];C<be;){var Fe=(C<<1)+1,tt=te[Fe],ct=Fe+1;if(ct<this.length&&pe(te[ct],tt)<0&&(Fe=ct,tt=te[ct]),pe(tt,Se)>=0)break;te[C]=tt,C=Fe}te[C]=Se};function kw(E,C){return E<C?-1:E>C?1:0}function Ew(E,C,N){C===void 0&&(C=1),N===void 0&&(N=!1);for(var te=1/0,pe=1/0,be=-1/0,Se=-1/0,Fe=E[0],tt=0;tt<Fe.length;tt++){var ct=Fe[tt];(!tt||ct.x<te)&&(te=ct.x),(!tt||ct.y<pe)&&(pe=ct.y),(!tt||ct.x>be)&&(be=ct.x),(!tt||ct.y>Se)&&(Se=ct.y)}var gt=be-te,Rt=Se-pe,jt=Math.min(gt,Rt),Gt=jt/2,lr=new bh([],Cw);if(jt===0)return new c(te,pe);for(var Ir=te;Ir<be;Ir+=jt)for(var un=pe;un<Se;un+=jt)lr.push(new _h(Ir+Gt,un+Gt,Gt,E));for(var qr=Pw(E),Mn=lr.length;lr.length;){var bn=lr.pop();(bn.d>qr.d||!qr.d)&&(qr=bn,N&&console.log("found best %d after %d probes",Math.round(1e4*bn.d)/1e4,Mn)),!(bn.max-qr.d<=C)&&(Gt=bn.h/2,lr.push(new _h(bn.p.x-Gt,bn.p.y-Gt,Gt,E)),lr.push(new _h(bn.p.x+Gt,bn.p.y-Gt,Gt,E)),lr.push(new _h(bn.p.x-Gt,bn.p.y+Gt,Gt,E)),lr.push(new _h(bn.p.x+Gt,bn.p.y+Gt,Gt,E)),Mn+=4)}return N&&(console.log("num probes: "+Mn),console.log("best distance: "+qr.d)),qr.p}function Cw(E,C){return C.max-E.max}function _h(E,C,N,te){this.p=new c(E,C),this.h=N,this.d=Lw(this.p,te),this.max=this.d+this.h*Math.SQRT2}function Lw(E,C){for(var N=!1,te=1/0,pe=0;pe<C.length;pe++)for(var be=C[pe],Se=0,Fe=be.length,tt=Fe-1;Se<Fe;tt=Se++){var ct=be[Se],gt=be[tt];ct.y>E.y!=gt.y>E.y&&E.x<(gt.x-ct.x)*(E.y-ct.y)/(gt.y-ct.y)+ct.x&&(N=!N),te=Math.min(te,rf(E,ct,gt))}return(N?1:-1)*Math.sqrt(te)}function Pw(E){for(var C=0,N=0,te=0,pe=E[0],be=0,Se=pe.length,Fe=Se-1;be<Se;Fe=be++){var tt=pe[be],ct=pe[Fe],gt=tt.x*ct.y-ct.x*tt.y;N+=(tt.x+ct.x)*gt,te+=(tt.y+ct.y)*gt,C+=gt*3}return new _h(N/C,te/C,0,E)}var wh=7,k0=Number.POSITIVE_INFINITY;function Im(E,C){function N(pe,be){var Se=0,Fe=0;be<0&&(be=0);var tt=be/Math.sqrt(2);switch(pe){case"top-right":case"top-left":Fe=tt-wh;break;case"bottom-right":case"bottom-left":Fe=-tt+wh;break;case"bottom":Fe=-be+wh;break;case"top":Fe=be-wh;break}switch(pe){case"top-right":case"bottom-right":Se=-tt;break;case"top-left":case"bottom-left":Se=tt;break;case"left":Se=be;break;case"right":Se=-be;break}return[Se,Fe]}function te(pe,be,Se){var Fe=0,tt=0;switch(be=Math.abs(be),Se=Math.abs(Se),pe){case"top-right":case"top-left":case"top":tt=Se-wh;break;case"bottom-right":case"bottom-left":case"bottom":tt=-Se+wh;break}switch(pe){case"top-right":case"bottom-right":case"right":Fe=-be;break;case"top-left":case"bottom-left":case"left":Fe=be;break}return[Fe,tt]}return C[1]!==k0?te(E,C[0],C[1]):N(E,C[0])}function Dw(E,C,N,te,pe,be,Se){E.createArrays();var Fe=512*E.overscaling;E.tilePixelRatio=Ua/Fe,E.compareText={},E.iconsNeedLinear=!1;var tt=E.layers[0].layout,ct=E.layers[0]._unevaluatedLayout._values,gt={};if(E.textSizeData.kind==="composite"){var Rt=E.textSizeData,jt=Rt.minZoom,Gt=Rt.maxZoom;gt.compositeTextSizes=[ct["text-size"].possiblyEvaluate(new si(jt),Se),ct["text-size"].possiblyEvaluate(new si(Gt),Se)]}if(E.iconSizeData.kind==="composite"){var lr=E.iconSizeData,Ir=lr.minZoom,un=lr.maxZoom;gt.compositeIconSizes=[ct["icon-size"].possiblyEvaluate(new si(Ir),Se),ct["icon-size"].possiblyEvaluate(new si(un),Se)]}gt.layoutTextSize=ct["text-size"].possiblyEvaluate(new si(E.zoom+1),Se),gt.layoutIconSize=ct["icon-size"].possiblyEvaluate(new si(E.zoom+1),Se),gt.textMaxSize=ct["text-size"].possiblyEvaluate(new si(18));for(var qr=tt.get("text-line-height")*bs,Mn=tt.get("text-rotation-alignment")==="map"&&tt.get("symbol-placement")!=="point",bn=tt.get("text-keep-upright"),An=tt.get("text-size"),Dn=function(){var na=sa[Xn],za=tt.get("text-font").evaluate(na,{},Se).join(","),Ta=An.evaluate(na,{},Se),Sa=gt.layoutTextSize.evaluate(na,{},Se),ti=gt.layoutIconSize.evaluate(na,{},Se),Da={horizontal:{},vertical:void 0},Ia=na.text,ui=[0,0];if(Ia){var qa=Ia.toString(),Si=tt.get("text-letter-spacing").evaluate(na,{},Se)*bs,Wi=Qr(qa)?Si:0,ki=tt.get("text-anchor").evaluate(na,{},Se),Ei=tt.get("text-variable-anchor");if(!Ei){var wi=tt.get("text-radial-offset").evaluate(na,{},Se);wi?ui=Im(ki,[wi*bs,k0]):ui=tt.get("text-offset").evaluate(na,{},Se).map(function(Vf){return Vf*bs})}var qi=Mn?"center":tt.get("text-justify").evaluate(na,{},Se),ao=tt.get("symbol-placement"),To=ao==="point"?tt.get("text-max-width").evaluate(na,{},Se)*bs:0,Po=function(){E.allowVerticalPlacement&&br(qa)&&(Da.vertical=Up(Ia,C,N,pe,za,To,qr,ki,"left",Wi,ui,Ql.vertical,!0,ao,Sa,Ta))};if(!Mn&&Ei){for(var os=qi==="auto"?Ei.map(function(Vf){return E0(Vf)}):[qi],Xo=!1,Us=0;Us<os.length;Us++){var Hs=os[Us];if(!Da.horizontal[Hs])if(Xo)Da.horizontal[Hs]=Da.horizontal[0];else{var ss=Up(Ia,C,N,pe,za,To,qr,"center",Hs,Wi,ui,Ql.horizontal,!1,ao,Sa,Ta);ss&&(Da.horizontal[Hs]=ss,Xo=ss.positionedLines.length===1)}}Po()}else{qi==="auto"&&(qi=E0(ki));var el=Up(Ia,C,N,pe,za,To,qr,ki,qi,Wi,ui,Ql.horizontal,!1,ao,Sa,Ta);el&&(Da.horizontal[qi]=el),Po(),br(qa)&&Mn&&bn&&(Da.vertical=Up(Ia,C,N,pe,za,To,qr,ki,qi,Wi,ui,Ql.vertical,!1,ao,Sa,Ta))}}var tl=void 0,Qo=!1;if(na.icon&&na.icon.name){var rl=te[na.icon.name];rl&&(tl=ww(pe[na.icon.name],tt.get("icon-offset").evaluate(na,{},Se),tt.get("icon-anchor").evaluate(na,{},Se)),Qo=rl.sdf,E.sdfIcons===void 0?E.sdfIcons=rl.sdf:E.sdfIcons!==rl.sdf&&O("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(rl.pixelRatio!==E.pixelRatio||tt.get("icon-rotate").constantOr(1)!==0)&&(E.iconsNeedLinear=!0))}var $l=Fm(Da.horizontal)||Da.vertical;E.iconsInText=$l?$l.iconsInText:!1,($l||tl)&&Rw(E,na,Da,tl,te,gt,Sa,ti,ui,Qo,Se)},Xn=0,sa=E.features;Xn<sa.length;Xn+=1)Dn();be&&E.generateCollisionDebugBuffers()}function E0(E){switch(E){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Rw(E,C,N,te,pe,be,Se,Fe,tt,ct,gt){var Rt=be.textMaxSize.evaluate(C,{});Rt===void 0&&(Rt=Se);var jt=E.layers[0].layout,Gt=jt.get("icon-offset").evaluate(C,{},gt),lr=Fm(N.horizontal),Ir=24,un=Se/Ir,qr=E.tilePixelRatio*un,Mn=E.tilePixelRatio*Rt/Ir,bn=E.tilePixelRatio*Fe,An=E.tilePixelRatio*jt.get("symbol-spacing"),Dn=jt.get("text-padding")*E.tilePixelRatio,Xn=jt.get("icon-padding")*E.tilePixelRatio,sa=jt.get("text-max-angle")/180*Math.PI,na=jt.get("text-rotation-alignment")==="map"&&jt.get("symbol-placement")!=="point",za=jt.get("icon-rotation-alignment")==="map"&&jt.get("symbol-placement")!=="point",Ta=jt.get("symbol-placement"),Sa=An/2,ti=jt.get("icon-text-fit"),Da;te&&ti!=="none"&&(E.allowVerticalPlacement&&N.vertical&&(Da=Tm(te,N.vertical,ti,jt.get("icon-text-fit-padding"),Gt,un)),lr&&(te=Tm(te,lr,ti,jt.get("icon-text-fit-padding"),Gt,un)));var Ia=function(kh,Du){Du.x<0||Du.x>=Ua||Du.y<0||Du.y>=Ua||Iw(E,Du,kh,N,te,pe,Da,E.layers[0],E.collisionBoxArray,C.index,C.sourceLayerIndex,E.index,qr,Dn,na,tt,bn,Xn,za,Gt,C,be,ct,gt,Se)};if(Ta==="line")for(var ui=0,qa=Pm(C.geometry,0,0,Ua,Ua);ui<qa.length;ui+=1)for(var Si=qa[ui],Wi=Mw(Si,An,sa,N.vertical||lr,te,Ir,Mn,E.overscaling,Ua),ki=0,Ei=Wi;ki<Ei.length;ki+=1){var wi=Ei[ki],qi=lr;(!qi||!zw(E,qi.text,Sa,wi))&&Ia(Si,wi)}else if(Ta==="line-center")for(var ao=0,To=C.geometry;ao<To.length;ao+=1){var Po=To[ao];if(Po.length>1){var os=Aw(Po,sa,N.vertical||lr,te,Ir,Mn);os&&Ia(Po,os)}}else if(C.type==="Polygon")for(var Xo=0,Us=y0(C.geometry,0);Xo<Us.length;Xo+=1){var Hs=Us[Xo],ss=Ew(Hs,16);Ia(Hs[0],new mh(ss.x,ss.y,0))}else if(C.type==="LineString")for(var el=0,tl=C.geometry;el<tl.length;el+=1){var Qo=tl[el];Ia(Qo,new mh(Qo[0].x,Qo[0].y,0))}else if(C.type==="Point")for(var rl=0,$l=C.geometry;rl<$l.length;rl+=1)for(var Vf=$l[rl],sc=0,lc=Vf;sc<lc.length;sc+=1){var uc=lc[sc];Ia([uc],new mh(uc.x,uc.y,0))}}var Tv=255,ic=Tv*of;function zm(E,C,N,te,pe,be,Se,Fe,tt,ct,gt,Rt,jt,Gt,lr){var Ir=Sw(C,N,Fe,pe,be,Se,te,E.allowVerticalPlacement),un=E.textSizeData,qr=null;un.kind==="source"?(qr=[of*pe.layout.get("text-size").evaluate(Se,{})],qr[0]>ic&&O(E.layerIds[0]+': Value for "text-size" is >= '+Tv+'. Reduce your "text-size".')):un.kind==="composite"&&(qr=[of*Gt.compositeTextSizes[0].evaluate(Se,{},lr),of*Gt.compositeTextSizes[1].evaluate(Se,{},lr)],(qr[0]>ic||qr[1]>ic)&&O(E.layerIds[0]+': Value for "text-size" is >= '+Tv+'. Reduce your "text-size".')),E.addSymbols(E.text,Ir,qr,Fe,be,Se,ct,C,tt.lineStartIndex,tt.lineLength,jt,lr);for(var Mn=0,bn=gt;Mn<bn.length;Mn+=1){var An=bn[Mn];Rt[An]=E.text.placedSymbolArray.length-1}return Ir.length*4}function Fm(E){for(var C in E)return E[C];return null}function Iw(E,C,N,te,pe,be,Se,Fe,tt,ct,gt,Rt,jt,Gt,lr,Ir,un,qr,Mn,bn,An,Dn,Xn,sa,na){var za,Ta=E.addToLineVertexArray(C,N),Sa,ti,Da,Ia,ui=0,qa=0,Si=0,Wi=0,ki=-1,Ei=-1,wi={},qi=Pe(""),ao=0,To=0;if(Fe._unevaluatedLayout.getValue("text-radial-offset")===void 0?(za=Fe.layout.get("text-offset").evaluate(An,{},sa).map(function(Sv){return Sv*bs}),ao=za[0],To=za[1]):(ao=Fe.layout.get("text-radial-offset").evaluate(An,{},sa)*bs,To=k0),E.allowVerticalPlacement&&te.vertical){var Po=Fe.layout.get("text-rotate").evaluate(An,{},sa),os=Po+90,Xo=te.vertical;Da=new Yp(tt,C,ct,gt,Rt,Xo,jt,Gt,lr,os),Se&&(Ia=new Yp(tt,C,ct,gt,Rt,Se,un,qr,lr,os))}if(pe){var Us=Fe.layout.get("icon-rotate").evaluate(An,{}),Hs=Fe.layout.get("icon-text-fit")!=="none",ss=Dm(pe,Us,Xn,Hs),el=Se?Dm(Se,Us,Xn,Hs):void 0;ti=new Yp(tt,C,ct,gt,Rt,pe,un,qr,!1,Us),ui=ss.length*4;var tl=E.iconSizeData,Qo=null;tl.kind==="source"?(Qo=[of*Fe.layout.get("icon-size").evaluate(An,{})],Qo[0]>ic&&O(E.layerIds[0]+': Value for "icon-size" is >= '+Tv+'. Reduce your "icon-size".')):tl.kind==="composite"&&(Qo=[of*Dn.compositeIconSizes[0].evaluate(An,{},sa),of*Dn.compositeIconSizes[1].evaluate(An,{},sa)],(Qo[0]>ic||Qo[1]>ic)&&O(E.layerIds[0]+': Value for "icon-size" is >= '+Tv+'. Reduce your "icon-size".')),E.addSymbols(E.icon,ss,Qo,bn,Mn,An,!1,C,Ta.lineStartIndex,Ta.lineLength,-1,sa),ki=E.icon.placedSymbolArray.length-1,el&&(qa=el.length*4,E.addSymbols(E.icon,el,Qo,bn,Mn,An,Ql.vertical,C,Ta.lineStartIndex,Ta.lineLength,-1,sa),Ei=E.icon.placedSymbolArray.length-1)}for(var rl in te.horizontal){var $l=te.horizontal[rl];if(!Sa){qi=Pe($l.text);var Vf=Fe.layout.get("text-rotate").evaluate(An,{},sa);Sa=new Yp(tt,C,ct,gt,Rt,$l,jt,Gt,lr,Vf)}var sc=$l.positionedLines.length===1;if(Si+=zm(E,C,$l,be,Fe,lr,An,Ir,Ta,te.vertical?Ql.horizontal:Ql.horizontalOnly,sc?Object.keys(te.horizontal):[rl],wi,ki,Dn,sa),sc)break}te.vertical&&(Wi+=zm(E,C,te.vertical,be,Fe,lr,An,Ir,Ta,Ql.vertical,["vertical"],wi,Ei,Dn,sa));var lc=Sa?Sa.boxStartIndex:E.collisionBoxArray.length,uc=Sa?Sa.boxEndIndex:E.collisionBoxArray.length,kh=Da?Da.boxStartIndex:E.collisionBoxArray.length,Du=Da?Da.boxEndIndex:E.collisionBoxArray.length,Kp=ti?ti.boxStartIndex:E.collisionBoxArray.length,I0=ti?ti.boxEndIndex:E.collisionBoxArray.length,Jp=Ia?Ia.boxStartIndex:E.collisionBoxArray.length,z0=Ia?Ia.boxEndIndex:E.collisionBoxArray.length,gu=-1,Eh=function(Sv,$m){return Sv&&Sv.circleDiameter?Math.max(Sv.circleDiameter,$m):$m};gu=Eh(Sa,gu),gu=Eh(Da,gu),gu=Eh(ti,gu),gu=Eh(Ia,gu);var Qp=gu>-1?1:0;Qp&&(gu*=na/bs),E.glyphOffsetArray.length>=Yi.MAX_GLYPHS&&O("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),An.sortKey!==void 0&&E.addToSortKeyRanges(E.symbolInstances.length,An.sortKey),E.symbolInstances.emplaceBack(C.x,C.y,wi.right>=0?wi.right:-1,wi.center>=0?wi.center:-1,wi.left>=0?wi.left:-1,wi.vertical||-1,ki,Ei,qi,lc,uc,kh,Du,Kp,I0,Jp,z0,ct,Si,Wi,ui,qa,Qp,0,jt,ao,To,gu)}function zw(E,C,N,te){var pe=E.compareText;if(!(C in pe))pe[C]=[];else for(var be=pe[C],Se=be.length-1;Se>=0;Se--)if(te.dist(be[Se])<N)return!0;return pe[C].push(te),!1}var Fw=ph.VectorTileFeature.types,Ow=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Wp(E,C,N,te,pe,be,Se,Fe,tt,ct,gt,Rt,jt){var Gt=Fe?Math.min(ic,Math.round(Fe[0])):0,lr=Fe?Math.min(ic,Math.round(Fe[1])):0;E.emplaceBack(C,N,Math.round(te*32),Math.round(pe*32),be,Se,(Gt<<1)+(tt?1:0),lr,ct*16,gt*16,Rt*256,jt*256)}function C0(E,C,N){E.emplaceBack(C.x,C.y,N),E.emplaceBack(C.x,C.y,N),E.emplaceBack(C.x,C.y,N),E.emplaceBack(C.x,C.y,N)}function Nw(E){for(var C=0,N=E.sections;C<N.length;C+=1){var te=N[C];if(ra(te.text))return!0}return!1}var Th=function(C){this.layoutVertexArray=new Tf,this.indexArray=new tf,this.programConfigurations=C,this.segments=new Y,this.dynamicLayoutVertexArray=new iv,this.opacityVertexArray=new ov,this.placedSymbolArray=new tc};Th.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Th.prototype.upload=function(C,N,te,pe){this.isEmpty()||(te&&(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,_0.members),this.indexBuffer=C.createIndexBuffer(this.indexArray,N),this.dynamicLayoutVertexBuffer=C.createVertexBuffer(this.dynamicLayoutVertexArray,B_.members,!0),this.opacityVertexBuffer=C.createVertexBuffer(this.opacityVertexArray,Ow,!0),this.opacityVertexBuffer.itemSize=1),(te||pe)&&this.programConfigurations.upload(C))},Th.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Oe("SymbolBuffers",Th);var Av=function(C,N,te){this.layoutVertexArray=new C,this.layoutAttributes=N,this.indexArray=new te,this.segments=new Y,this.collisionVertexArray=new dl};Av.prototype.upload=function(C){this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=C.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=C.createVertexBuffer(this.collisionVertexArray,U_.members,!0)},Av.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Oe("CollisionBuffers",Av);var Yi=function(C){this.collisionBoxArray=C.collisionBoxArray,this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(tt){return tt.id}),this.index=C.index,this.pixelRatio=C.pixelRatio,this.sourceLayerIndex=C.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=uh([]),this.placementViewportMatrix=uh([]);var N=this.layers[0],te=N._unevaluatedLayout._values;this.textSizeData=S0(this.zoom,te["text-size"]),this.iconSizeData=S0(this.zoom,te["icon-size"]);var pe=this.layers[0].layout,be=pe.get("symbol-sort-key"),Se=pe.get("symbol-z-order");this.sortFeaturesByKey=Se!=="viewport-y"&&be.constantOr(1)!==void 0;var Fe=Se==="viewport-y"||Se==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=Fe&&(pe.get("text-allow-overlap")||pe.get("icon-allow-overlap")||pe.get("text-ignore-placement")||pe.get("icon-ignore-placement")),pe.get("symbol-placement")==="point"&&(this.writingModes=pe.get("text-writing-mode").map(function(tt){return Ql[tt]})),this.stateDependentLayerIds=this.layers.filter(function(tt){return tt.isStateDependent()}).map(function(tt){return tt.id}),this.sourceID=C.sourceID};Yi.prototype.createArrays=function(){this.text=new Th(new ni(_0.members,this.layers,this.zoom,function(C){return/^text/.test(C)})),this.icon=new Th(new ni(_0.members,this.layers,this.zoom,function(C){return/^icon/.test(C)})),this.glyphOffsetArray=new pu,this.lineVertexArray=new kp,this.symbolInstances=new Sp},Yi.prototype.calculateGlyphDependencies=function(C,N,te,pe,be){for(var Se=0;Se<C.length;Se++)if(N[C.charCodeAt(Se)]=!0,(te||pe)&&be){var Fe=xv[C.charAt(Se)];Fe&&(N[Fe.charCodeAt(0)]=!0)}},Yi.prototype.populate=function(C,N,te){var pe=this.layers[0],be=pe.layout,Se=be.get("text-font"),Fe=be.get("text-field"),tt=be.get("icon-image"),ct=(Fe.value.kind!=="constant"||Fe.value.value instanceof Ui&&!Fe.value.value.isEmpty()||Fe.value.value.toString().length>0)&&(Se.value.kind!=="constant"||Se.value.value.length>0),gt=tt.value.kind!=="constant"||!!tt.value.value||Object.keys(tt.parameters).length>0,Rt=be.get("symbol-sort-key");if(this.features=[],!(!ct&&!gt)){for(var jt=N.iconDependencies,Gt=N.glyphDependencies,lr=N.availableImages,Ir=new si(this.zoom),un=0,qr=C;un<qr.length;un+=1){var Mn=qr[un],bn=Mn.feature,An=Mn.id,Dn=Mn.index,Xn=Mn.sourceLayerIndex,sa=pe._featureFilter.needGeometry,na={type:bn.type,id:An,properties:bn.properties,geometry:sa?Bi(bn):[]};if(!!pe._featureFilter.filter(Ir,na,te)){sa||(na.geometry=Bi(bn));var za=void 0;if(ct){var Ta=pe.getValueAndResolveTokens("text-field",na,te,lr),Sa=Ui.factory(Ta);Nw(Sa)&&(this.hasRTLText=!0),(!this.hasRTLText||ho()==="unavailable"||this.hasRTLText&&Xa.isParsed())&&(za=G_(Sa,pe,na))}var ti=void 0;if(gt){var Da=pe.getValueAndResolveTokens("icon-image",na,te,lr);Da instanceof So?ti=Da:ti=So.fromString(Da)}if(!(!za&&!ti)){var Ia=this.sortFeaturesByKey?Rt.evaluate(na,{},te):void 0,ui={id:An,text:za,icon:ti,index:Dn,sourceLayerIndex:Xn,geometry:Bi(bn),properties:bn.properties,type:Fw[bn.type],sortKey:Ia};if(this.features.push(ui),ti&&(jt[ti.name]=!0),za){var qa=Se.evaluate(na,{},te).join(","),Si=be.get("text-rotation-alignment")==="map"&&be.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Ql.vertical)>=0;for(var Wi=0,ki=za.sections;Wi<ki.length;Wi+=1){var Ei=ki[Wi];if(Ei.image)jt[Ei.image.name]=!0;else{var wi=br(za.toString()),qi=Ei.fontStack||qa,ao=Gt[qi]=Gt[qi]||{};this.calculateGlyphDependencies(Ei.text,ao,Si,this.allowVerticalPlacement,wi)}}}}}}be.get("symbol-placement")==="line"&&(this.features=Y_(this.features)),this.sortFeaturesByKey&&this.features.sort(function(To,Po){return To.sortKey-Po.sortKey})}},Yi.prototype.update=function(C,N,te){!this.stateDependentLayers.length||(this.text.programConfigurations.updatePaintArrays(C,N,this.layers,te),this.icon.programConfigurations.updatePaintArrays(C,N,this.layers,te))},Yi.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Yi.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Yi.prototype.upload=function(C){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(C),this.iconCollisionBox.upload(C)),this.text.upload(C,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(C,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Yi.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Yi.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Yi.prototype.addToLineVertexArray=function(C,N){var te=this.lineVertexArray.length;if(C.segment!==void 0){for(var pe=C.dist(N[C.segment+1]),be=C.dist(N[C.segment]),Se={},Fe=C.segment+1;Fe<N.length;Fe++)Se[Fe]={x:N[Fe].x,y:N[Fe].y,tileUnitDistanceFromAnchor:pe},Fe<N.length-1&&(pe+=N[Fe+1].dist(N[Fe]));for(var tt=C.segment||0;tt>=0;tt--)Se[tt]={x:N[tt].x,y:N[tt].y,tileUnitDistanceFromAnchor:be},tt>0&&(be+=N[tt-1].dist(N[tt]));for(var ct=0;ct<N.length;ct++){var gt=Se[ct];this.lineVertexArray.emplaceBack(gt.x,gt.y,gt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:te,lineLength:this.lineVertexArray.length-te}},Yi.prototype.addSymbols=function(C,N,te,pe,be,Se,Fe,tt,ct,gt,Rt,jt){for(var Gt=C.indexArray,lr=C.layoutVertexArray,Ir=C.segments.prepareSegment(4*N.length,lr,Gt,Se.sortKey),un=this.glyphOffsetArray.length,qr=Ir.vertexLength,Mn=this.allowVerticalPlacement&&Fe===Ql.vertical?Math.PI/2:0,bn=Se.text&&Se.text.sections,An=0;An<N.length;An++){var Dn=N[An],Xn=Dn.tl,sa=Dn.tr,na=Dn.bl,za=Dn.br,Ta=Dn.tex,Sa=Dn.pixelOffsetTL,ti=Dn.pixelOffsetBR,Da=Dn.minFontScaleX,Ia=Dn.minFontScaleY,ui=Dn.glyphOffset,qa=Dn.isSDF,Si=Dn.sectionIndex,Wi=Ir.vertexLength,ki=ui[1];Wp(lr,tt.x,tt.y,Xn.x,ki+Xn.y,Ta.x,Ta.y,te,qa,Sa.x,Sa.y,Da,Ia),Wp(lr,tt.x,tt.y,sa.x,ki+sa.y,Ta.x+Ta.w,Ta.y,te,qa,ti.x,Sa.y,Da,Ia),Wp(lr,tt.x,tt.y,na.x,ki+na.y,Ta.x,Ta.y+Ta.h,te,qa,Sa.x,ti.y,Da,Ia),Wp(lr,tt.x,tt.y,za.x,ki+za.y,Ta.x+Ta.w,Ta.y+Ta.h,te,qa,ti.x,ti.y,Da,Ia),C0(C.dynamicLayoutVertexArray,tt,Mn),Gt.emplaceBack(Wi,Wi+1,Wi+2),Gt.emplaceBack(Wi+1,Wi+2,Wi+3),Ir.vertexLength+=4,Ir.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ui[0]),(An===N.length-1||Si!==N[An+1].sectionIndex)&&C.programConfigurations.populatePaintArrays(lr.length,Se,Se.index,{},jt,bn&&bn[Si])}C.placedSymbolArray.emplaceBack(tt.x,tt.y,un,this.glyphOffsetArray.length-un,qr,ct,gt,tt.segment,te?te[0]:0,te?te[1]:0,pe[0],pe[1],Fe,0,!1,0,Rt)},Yi.prototype._addCollisionDebugVertex=function(C,N,te,pe,be,Se){return N.emplaceBack(0,0),C.emplaceBack(te.x,te.y,pe,be,Math.round(Se.x),Math.round(Se.y))},Yi.prototype.addCollisionDebugVertices=function(C,N,te,pe,be,Se,Fe){var tt=be.segments.prepareSegment(4,be.layoutVertexArray,be.indexArray),ct=tt.vertexLength,gt=be.layoutVertexArray,Rt=be.collisionVertexArray,jt=Fe.anchorX,Gt=Fe.anchorY;this._addCollisionDebugVertex(gt,Rt,Se,jt,Gt,new c(C,N)),this._addCollisionDebugVertex(gt,Rt,Se,jt,Gt,new c(te,N)),this._addCollisionDebugVertex(gt,Rt,Se,jt,Gt,new c(te,pe)),this._addCollisionDebugVertex(gt,Rt,Se,jt,Gt,new c(C,pe)),tt.vertexLength+=4;var lr=be.indexArray;lr.emplaceBack(ct,ct+1),lr.emplaceBack(ct+1,ct+2),lr.emplaceBack(ct+2,ct+3),lr.emplaceBack(ct+3,ct),tt.primitiveLength+=4},Yi.prototype.addDebugCollisionBoxes=function(C,N,te,pe){for(var be=C;be<N;be++){var Se=this.collisionBoxArray.get(be),Fe=Se.x1,tt=Se.y1,ct=Se.x2,gt=Se.y2;this.addCollisionDebugVertices(Fe,tt,ct,gt,pe?this.textCollisionBox:this.iconCollisionBox,Se.anchorPoint,te)}},Yi.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Av(ah,fm.members,Ic),this.iconCollisionBox=new Av(ah,fm.members,Ic);for(var C=0;C<this.symbolInstances.length;C++){var N=this.symbolInstances.get(C);this.addDebugCollisionBoxes(N.textBoxStartIndex,N.textBoxEndIndex,N,!0),this.addDebugCollisionBoxes(N.verticalTextBoxStartIndex,N.verticalTextBoxEndIndex,N,!0),this.addDebugCollisionBoxes(N.iconBoxStartIndex,N.iconBoxEndIndex,N,!1),this.addDebugCollisionBoxes(N.verticalIconBoxStartIndex,N.verticalIconBoxEndIndex,N,!1)}},Yi.prototype._deserializeCollisionBoxesForSymbol=function(C,N,te,pe,be,Se,Fe,tt,ct){for(var gt={},Rt=N;Rt<te;Rt++){var jt=C.get(Rt);gt.textBox={x1:jt.x1,y1:jt.y1,x2:jt.x2,y2:jt.y2,anchorPointX:jt.anchorPointX,anchorPointY:jt.anchorPointY},gt.textFeatureIndex=jt.featureIndex;break}for(var Gt=pe;Gt<be;Gt++){var lr=C.get(Gt);gt.verticalTextBox={x1:lr.x1,y1:lr.y1,x2:lr.x2,y2:lr.y2,anchorPointX:lr.anchorPointX,anchorPointY:lr.anchorPointY},gt.verticalTextFeatureIndex=lr.featureIndex;break}for(var Ir=Se;Ir<Fe;Ir++){var un=C.get(Ir);gt.iconBox={x1:un.x1,y1:un.y1,x2:un.x2,y2:un.y2,anchorPointX:un.anchorPointX,anchorPointY:un.anchorPointY},gt.iconFeatureIndex=un.featureIndex;break}for(var qr=tt;qr<ct;qr++){var Mn=C.get(qr);gt.verticalIconBox={x1:Mn.x1,y1:Mn.y1,x2:Mn.x2,y2:Mn.y2,anchorPointX:Mn.anchorPointX,anchorPointY:Mn.anchorPointY},gt.verticalIconFeatureIndex=Mn.featureIndex;break}return gt},Yi.prototype.deserializeCollisionBoxes=function(C){this.collisionArrays=[];for(var N=0;N<this.symbolInstances.length;N++){var te=this.symbolInstances.get(N);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(C,te.textBoxStartIndex,te.textBoxEndIndex,te.verticalTextBoxStartIndex,te.verticalTextBoxEndIndex,te.iconBoxStartIndex,te.iconBoxEndIndex,te.verticalIconBoxStartIndex,te.verticalIconBoxEndIndex))}},Yi.prototype.hasTextData=function(){return this.text.segments.get().length>0},Yi.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Yi.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Yi.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Yi.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Yi.prototype.addIndicesForPlacedSymbol=function(C,N){for(var te=C.placedSymbolArray.get(N),pe=te.vertexStartIndex+te.numGlyphs*4,be=te.vertexStartIndex;be<pe;be+=4)C.indexArray.emplaceBack(be,be+1,be+2),C.indexArray.emplaceBack(be+1,be+2,be+3)},Yi.prototype.getSortedSymbolIndexes=function(C){if(this.sortedAngle===C&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var N=Math.sin(C),te=Math.cos(C),pe=[],be=[],Se=[],Fe=0;Fe<this.symbolInstances.length;++Fe){Se.push(Fe);var tt=this.symbolInstances.get(Fe);pe.push(Math.round(N*tt.anchorX+te*tt.anchorY)|0),be.push(tt.featureIndex)}return Se.sort(function(ct,gt){return pe[ct]-pe[gt]||be[gt]-be[ct]}),Se},Yi.prototype.addToSortKeyRanges=function(C,N){var te=this.sortKeyRanges[this.sortKeyRanges.length-1];te&&te.sortKey===N?te.symbolInstanceEnd=C+1:this.sortKeyRanges.push({sortKey:N,symbolInstanceStart:C,symbolInstanceEnd:C+1})},Yi.prototype.sortFeatures=function(C){var N=this;if(!!this.sortFeaturesByY&&this.sortedAngle!==C&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(C),this.sortedAngle=C,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var te=0,pe=this.symbolInstanceIndexes;te<pe.length;te+=1){var be=pe[te],Se=this.symbolInstances.get(be);this.featureSortOrder.push(Se.featureIndex),[Se.rightJustifiedTextSymbolIndex,Se.centerJustifiedTextSymbolIndex,Se.leftJustifiedTextSymbolIndex].forEach(function(Fe,tt,ct){Fe>=0&&ct.indexOf(Fe)===tt&&N.addIndicesForPlacedSymbol(N.text,Fe)}),Se.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Se.verticalPlacedTextSymbolIndex),Se.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Se.placedIconSymbolIndex),Se.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Se.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Oe("SymbolBucket",Yi,{omit:["layers","collisionBoxArray","features","compareText"]}),Yi.MAX_GLYPHS=65535,Yi.addDynamicAttributes=C0;function Bw(E,C){return C.replace(/{([^{}]+)}/g,function(N,te){return te in E?String(E[te]):""})}var Uw=new Xi({"symbol-placement":new Fa(mr.layout_symbol["symbol-placement"]),"symbol-spacing":new Fa(mr.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Fa(mr.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ja(mr.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Fa(mr.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Fa(mr.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Fa(mr.layout_symbol["icon-ignore-placement"]),"icon-optional":new Fa(mr.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Fa(mr.layout_symbol["icon-rotation-alignment"]),"icon-size":new ja(mr.layout_symbol["icon-size"]),"icon-text-fit":new Fa(mr.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Fa(mr.layout_symbol["icon-text-fit-padding"]),"icon-image":new ja(mr.layout_symbol["icon-image"]),"icon-rotate":new ja(mr.layout_symbol["icon-rotate"]),"icon-padding":new Fa(mr.layout_symbol["icon-padding"]),"icon-keep-upright":new Fa(mr.layout_symbol["icon-keep-upright"]),"icon-offset":new ja(mr.layout_symbol["icon-offset"]),"icon-anchor":new ja(mr.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Fa(mr.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Fa(mr.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Fa(mr.layout_symbol["text-rotation-alignment"]),"text-field":new ja(mr.layout_symbol["text-field"]),"text-font":new ja(mr.layout_symbol["text-font"]),"text-size":new ja(mr.layout_symbol["text-size"]),"text-max-width":new ja(mr.layout_symbol["text-max-width"]),"text-line-height":new Fa(mr.layout_symbol["text-line-height"]),"text-letter-spacing":new ja(mr.layout_symbol["text-letter-spacing"]),"text-justify":new ja(mr.layout_symbol["text-justify"]),"text-radial-offset":new ja(mr.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Fa(mr.layout_symbol["text-variable-anchor"]),"text-anchor":new ja(mr.layout_symbol["text-anchor"]),"text-max-angle":new Fa(mr.layout_symbol["text-max-angle"]),"text-writing-mode":new Fa(mr.layout_symbol["text-writing-mode"]),"text-rotate":new ja(mr.layout_symbol["text-rotate"]),"text-padding":new Fa(mr.layout_symbol["text-padding"]),"text-keep-upright":new Fa(mr.layout_symbol["text-keep-upright"]),"text-transform":new ja(mr.layout_symbol["text-transform"]),"text-offset":new ja(mr.layout_symbol["text-offset"]),"text-allow-overlap":new Fa(mr.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Fa(mr.layout_symbol["text-ignore-placement"]),"text-optional":new Fa(mr.layout_symbol["text-optional"])}),Hw=new Xi({"icon-opacity":new ja(mr.paint_symbol["icon-opacity"]),"icon-color":new ja(mr.paint_symbol["icon-color"]),"icon-halo-color":new ja(mr.paint_symbol["icon-halo-color"]),"icon-halo-width":new ja(mr.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ja(mr.paint_symbol["icon-halo-blur"]),"icon-translate":new Fa(mr.paint_symbol["icon-translate"]),"icon-translate-anchor":new Fa(mr.paint_symbol["icon-translate-anchor"]),"text-opacity":new ja(mr.paint_symbol["text-opacity"]),"text-color":new ja(mr.paint_symbol["text-color"],{runtimeType:ua,getOverride:function(E){return E.textColor},hasOverride:function(E){return!!E.textColor}}),"text-halo-color":new ja(mr.paint_symbol["text-halo-color"]),"text-halo-width":new ja(mr.paint_symbol["text-halo-width"]),"text-halo-blur":new ja(mr.paint_symbol["text-halo-blur"]),"text-translate":new Fa(mr.paint_symbol["text-translate"]),"text-translate-anchor":new Fa(mr.paint_symbol["text-translate-anchor"])}),L0={paint:Hw,layout:Uw},Ah=function(C){this.type=C.property.overrides?C.property.overrides.runtimeType:Hn,this.defaultValue=C};Ah.prototype.evaluate=function(C){if(C.formattedSection){var N=this.defaultValue.property.overrides;if(N&&N.hasOverride(C.formattedSection))return N.getOverride(C.formattedSection)}return C.feature&&C.featureState?this.defaultValue.evaluate(C.feature,C.featureState):this.defaultValue.property.specification.default},Ah.prototype.eachChild=function(C){if(!this.defaultValue.isConstant()){var N=this.defaultValue.value;C(N._styleExpression.expression)}},Ah.prototype.outputDefined=function(){return!1},Ah.prototype.serialize=function(){return null},Oe("FormatSectionOverride",Ah,{omit:["defaultValue"]});var Vw=function(E){function C(N){E.call(this,N,L0)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.recalculate=function(te,pe){if(E.prototype.recalculate.call(this,te,pe),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var be=this.layout.get("text-writing-mode");if(be){for(var Se=[],Fe=0,tt=be;Fe<tt.length;Fe+=1){var ct=tt[Fe];Se.indexOf(ct)<0&&Se.push(ct)}this.layout._values["text-writing-mode"]=Se}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},C.prototype.getValueAndResolveTokens=function(te,pe,be,Se){var Fe=this.layout.get(te).evaluate(pe,{},be,Se),tt=this._unevaluatedLayout._values[te];return!tt.isDataDriven()&&!xo(tt.value)&&Fe?Bw(pe.properties,Fe):Fe},C.prototype.createBucket=function(te){return new Yi(te)},C.prototype.queryRadius=function(){return 0},C.prototype.queryIntersectsFeature=function(){return!1},C.prototype._setPaintOverrides=function(){for(var te=0,pe=L0.paint.overridableProperties;te<pe.length;te+=1){var be=pe[te];if(!!C.hasPaintOverride(this.layout,be)){var Se=this.paint.get(be),Fe=new Ah(Se),tt=new gs(Fe,Se.property.specification),ct=null;Se.value.kind==="constant"||Se.value.kind==="source"?ct=new Su("source",tt):ct=new ys("composite",tt,Se.value.zoomStops,Se.value._interpolationType),this.paint._values[be]=new Gi(Se.property,ct,Se.parameters)}}},C.prototype._handleOverridablePaintPropertyUpdate=function(te,pe,be){return!this.layout||pe.isDataDriven()||be.isDataDriven()?!1:C.hasPaintOverride(this.layout,te)},C.hasPaintOverride=function(te,pe){var be=te.get("text-field"),Se=L0.paint.properties[pe],Fe=!1,tt=function(Rt){for(var jt=0,Gt=Rt;jt<Gt.length;jt+=1){var lr=Gt[jt];if(Se.overrides&&Se.overrides.hasOverride(lr)){Fe=!0;return}}};if(be.value.kind==="constant"&&be.value.value instanceof Ui)tt(be.value.value.sections);else if(be.value.kind==="source"){var ct=function(Rt){if(!Fe)if(Rt instanceof Ji&&Di(Rt.value)===es){var jt=Rt.value;tt(jt.sections)}else Rt instanceof us?tt(Rt.sections):Rt.eachChild(ct)},gt=be.value;gt._styleExpression&&ct(gt._styleExpression.expression)}return Fe},C}(ks),Gw=new Xi({"background-color":new Fa(mr.paint_background["background-color"]),"background-pattern":new ro(mr.paint_background["background-pattern"]),"background-opacity":new Fa(mr.paint_background["background-opacity"])}),Yw={paint:Gw},Ww=function(E){function C(N){E.call(this,N,Yw)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C}(ks),Xw=new Xi({"raster-opacity":new Fa(mr.paint_raster["raster-opacity"]),"raster-hue-rotate":new Fa(mr.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Fa(mr.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Fa(mr.paint_raster["raster-brightness-max"]),"raster-saturation":new Fa(mr.paint_raster["raster-saturation"]),"raster-contrast":new Fa(mr.paint_raster["raster-contrast"]),"raster-resampling":new Fa(mr.paint_raster["raster-resampling"]),"raster-fade-duration":new Fa(mr.paint_raster["raster-fade-duration"])}),jw={paint:Xw},Zw=function(E){function C(N){E.call(this,N,jw)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C}(ks);function Kw(E){var C=[],N=E.id;return N===void 0&&C.push({message:"layers."+N+': missing required property "id"'}),E.render===void 0&&C.push({message:"layers."+N+': missing required method "render"'}),E.renderingMode&&E.renderingMode!=="2d"&&E.renderingMode!=="3d"&&C.push({message:"layers."+N+': property "renderingMode" must be either "2d" or "3d"'}),C}var Jw=function(E){function C(N){E.call(this,N,{}),this.implementation=N}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},C.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},C.prototype.recalculate=function(){},C.prototype.updateTransitions=function(){},C.prototype.hasTransition=function(){},C.prototype.serialize=function(){},C.prototype.onAdd=function(te){this.implementation.onAdd&&this.implementation.onAdd(te,te.painter.context.gl)},C.prototype.onRemove=function(te){this.implementation.onRemove&&this.implementation.onRemove(te,te.painter.context.gl)},C}(ks),Qw={circle:S2,heatmap:L2,hillshade:R2,fill:a_,"fill-extrusion":A_,line:O_,symbol:Vw,background:Ww,raster:Zw};function $w(E){return E.type==="custom"?new Jw(E):new Qw[E.type](E)}var Om=self.HTMLImageElement,Nm=self.HTMLCanvasElement,Bm=self.HTMLVideoElement,Um=self.ImageData,Xp=self.ImageBitmap,Bc=function(C,N,te,pe){this.context=C,this.format=te,this.texture=C.gl.createTexture(),this.update(N,pe)};Bc.prototype.update=function(C,N,te){var pe=C.width,be=C.height,Se=(!this.size||this.size[0]!==pe||this.size[1]!==be)&&!te,Fe=this,tt=Fe.context,ct=tt.gl;if(this.useMipmap=Boolean(N&&N.useMipmap),ct.bindTexture(ct.TEXTURE_2D,this.texture),tt.pixelStoreUnpackFlipY.set(!1),tt.pixelStoreUnpack.set(1),tt.pixelStoreUnpackPremultiplyAlpha.set(this.format===ct.RGBA&&(!N||N.premultiply!==!1)),Se)this.size=[pe,be],C instanceof Om||C instanceof Nm||C instanceof Bm||C instanceof Um||Xp&&C instanceof Xp?ct.texImage2D(ct.TEXTURE_2D,0,this.format,this.format,ct.UNSIGNED_BYTE,C):ct.texImage2D(ct.TEXTURE_2D,0,this.format,pe,be,0,this.format,ct.UNSIGNED_BYTE,C.data);else{var gt=te||{x:0,y:0},Rt=gt.x,jt=gt.y;C instanceof Om||C instanceof Nm||C instanceof Bm||C instanceof Um||Xp&&C instanceof Xp?ct.texSubImage2D(ct.TEXTURE_2D,0,Rt,jt,ct.RGBA,ct.UNSIGNED_BYTE,C):ct.texSubImage2D(ct.TEXTURE_2D,0,Rt,jt,pe,be,ct.RGBA,ct.UNSIGNED_BYTE,C.data)}this.useMipmap&&this.isSizePowerOfTwo()&&ct.generateMipmap(ct.TEXTURE_2D)},Bc.prototype.bind=function(C,N,te){var pe=this,be=pe.context,Se=be.gl;Se.bindTexture(Se.TEXTURE_2D,this.texture),te===Se.LINEAR_MIPMAP_NEAREST&&!this.isSizePowerOfTwo()&&(te=Se.LINEAR),C!==this.filter&&(Se.texParameteri(Se.TEXTURE_2D,Se.TEXTURE_MAG_FILTER,C),Se.texParameteri(Se.TEXTURE_2D,Se.TEXTURE_MIN_FILTER,te||C),this.filter=C),N!==this.wrap&&(Se.texParameteri(Se.TEXTURE_2D,Se.TEXTURE_WRAP_S,N),Se.texParameteri(Se.TEXTURE_2D,Se.TEXTURE_WRAP_T,N),this.wrap=N)},Bc.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1===0},Bc.prototype.destroy=function(){var C=this.context,N=C.gl;N.deleteTexture(this.texture),this.texture=null};var P0=function(C){var N=this;this._callback=C,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){N._triggered=!1,N._callback()})};P0.prototype.trigger=function(){var C=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){C._triggered=!1,C._callback()},0))},P0.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Mh=function(C,N,te){this.target=C,this.parent=N,this.mapId=te,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},S(["receive","process"],this),this.invoker=new P0(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=q()?C:self};Mh.prototype.send=function(C,N,te,pe,be){var Se=this;be===void 0&&(be=!1);var Fe=Math.round(Math.random()*1e18).toString(36).substring(0,10);te&&(this.callbacks[Fe]=te);var tt=Z(this.globalScope)?void 0:[];return this.target.postMessage({id:Fe,type:C,hasCallback:!!te,targetMapId:pe,mustQueue:be,sourceMapId:this.mapId,data:Ct(N,tt)},tt),{cancel:function(){te&&delete Se.callbacks[Fe],Se.target.postMessage({id:Fe,type:"<cancel>",targetMapId:pe,sourceMapId:Se.mapId})}}},Mh.prototype.receive=function(C){var N=C.data,te=N.id;if(!!te&&!(N.targetMapId&&this.mapId!==N.targetMapId))if(N.type==="<cancel>"){delete this.tasks[te];var pe=this.cancelCallbacks[te];delete this.cancelCallbacks[te],pe&&pe()}else q()||N.mustQueue?(this.tasks[te]=N,this.taskQueue.push(te),this.invoker.trigger()):this.processTask(te,N)},Mh.prototype.process=function(){if(!!this.taskQueue.length){var C=this.taskQueue.shift(),N=this.tasks[C];delete this.tasks[C],this.taskQueue.length&&this.invoker.trigger(),N&&this.processTask(C,N)}},Mh.prototype.processTask=function(C,N){var te=this;if(N.type==="<response>"){var pe=this.callbacks[C];delete this.callbacks[C],pe&&(N.error?pe(Ut(N.error)):pe(null,Ut(N.data)))}else{var be=!1,Se=Z(this.globalScope)?void 0:[],Fe=N.hasCallback?function(jt,Gt){be=!0,delete te.cancelCallbacks[C],te.target.postMessage({id:C,type:"<response>",sourceMapId:te.mapId,error:jt?Ct(jt):null,data:Ct(Gt,Se)},Se)}:function(jt){be=!0},tt=null,ct=Ut(N.data);if(this.parent[N.type])tt=this.parent[N.type](N.sourceMapId,ct,Fe);else if(this.parent.getWorkerSource){var gt=N.type.split("."),Rt=this.parent.getWorkerSource(N.sourceMapId,gt[0],ct.source);tt=Rt[gt[1]](ct,Fe)}else Fe(new Error("Could not find function "+N.type));!be&&tt&&tt.cancel&&(this.cancelCallbacks[C]=tt.cancel)}},Mh.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};function qw(E,C,N){C=Math.pow(2,N)-C-1;var te=Hm(E*256,C*256,N),pe=Hm((E+1)*256,(C+1)*256,N);return te[0]+","+te[1]+","+pe[0]+","+pe[1]}function Hm(E,C,N){var te=2*Math.PI*6378137/256/Math.pow(2,N),pe=E*te-2*Math.PI*6378137/2,be=C*te-2*Math.PI*6378137/2;return[pe,be]}var Yo=function(C,N){C&&(N?this.setSouthWest(C).setNorthEast(N):C.length===4?this.setSouthWest([C[0],C[1]]).setNorthEast([C[2],C[3]]):this.setSouthWest(C[0]).setNorthEast(C[1]))};Yo.prototype.setNorthEast=function(C){return this._ne=C instanceof vo?new vo(C.lng,C.lat):vo.convert(C),this},Yo.prototype.setSouthWest=function(C){return this._sw=C instanceof vo?new vo(C.lng,C.lat):vo.convert(C),this},Yo.prototype.extend=function(C){var N=this._sw,te=this._ne,pe,be;if(C instanceof vo)pe=C,be=C;else if(C instanceof Yo){if(pe=C._sw,be=C._ne,!pe||!be)return this}else{if(Array.isArray(C))if(C.length===4||C.every(Array.isArray)){var Se=C;return this.extend(Yo.convert(Se))}else{var Fe=C;return this.extend(vo.convert(Fe))}return this}return!N&&!te?(this._sw=new vo(pe.lng,pe.lat),this._ne=new vo(be.lng,be.lat)):(N.lng=Math.min(pe.lng,N.lng),N.lat=Math.min(pe.lat,N.lat),te.lng=Math.max(be.lng,te.lng),te.lat=Math.max(be.lat,te.lat)),this},Yo.prototype.getCenter=function(){return new vo((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Yo.prototype.getSouthWest=function(){return this._sw},Yo.prototype.getNorthEast=function(){return this._ne},Yo.prototype.getNorthWest=function(){return new vo(this.getWest(),this.getNorth())},Yo.prototype.getSouthEast=function(){return new vo(this.getEast(),this.getSouth())},Yo.prototype.getWest=function(){return this._sw.lng},Yo.prototype.getSouth=function(){return this._sw.lat},Yo.prototype.getEast=function(){return this._ne.lng},Yo.prototype.getNorth=function(){return this._ne.lat},Yo.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Yo.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Yo.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Yo.prototype.contains=function(C){var N=vo.convert(C),te=N.lng,pe=N.lat,be=this._sw.lat<=pe&&pe<=this._ne.lat,Se=this._sw.lng<=te&&te<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Se=this._sw.lng>=te&&te>=this._ne.lng),be&&Se},Yo.convert=function(C){return!C||C instanceof Yo?C:new Yo(C)};var Vm=63710088e-1,vo=function(C,N){if(isNaN(C)||isNaN(N))throw new Error("Invalid LngLat object: ("+C+", "+N+")");if(this.lng=+C,this.lat=+N,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};vo.prototype.wrap=function(){return new vo(y(this.lng,-180,180),this.lat)},vo.prototype.toArray=function(){return[this.lng,this.lat]},vo.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},vo.prototype.distanceTo=function(C){var N=Math.PI/180,te=this.lat*N,pe=C.lat*N,be=Math.sin(te)*Math.sin(pe)+Math.cos(te)*Math.cos(pe)*Math.cos((C.lng-this.lng)*N),Se=Vm*Math.acos(Math.min(be,1));return Se},vo.prototype.toBounds=function(C){C===void 0&&(C=0);var N=40075017,te=360*C/N,pe=te/Math.cos(Math.PI/180*this.lat);return new Yo(new vo(this.lng-pe,this.lat-te),new vo(this.lng+pe,this.lat+te))},vo.convert=function(C){if(C instanceof vo)return C;if(Array.isArray(C)&&(C.length===2||C.length===3))return new vo(Number(C[0]),Number(C[1]));if(!Array.isArray(C)&&typeof C=="object"&&C!==null)return new vo(Number("lng"in C?C.lng:C.lon),Number(C.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Gm=2*Math.PI*Vm;function Ym(E){return Gm*Math.cos(E*Math.PI/180)}function Wm(E){return(180+E)/360}function Xm(E){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+E*Math.PI/360)))/360}function jm(E,C){return E/Ym(C)}function e3(E){return E*360-180}function D0(E){var C=180-E*360;return 360/Math.PI*Math.atan(Math.exp(C*Math.PI/180))-90}function t3(E,C){return E*Ym(D0(C))}function r3(E){return 1/Math.cos(E*Math.PI/180)}var Uc=function(C,N,te){te===void 0&&(te=0),this.x=+C,this.y=+N,this.z=+te};Uc.fromLngLat=function(C,N){N===void 0&&(N=0);var te=vo.convert(C);return new Uc(Wm(te.lng),Xm(te.lat),jm(N,te.lat))},Uc.prototype.toLngLat=function(){return new vo(e3(this.x),D0(this.y))},Uc.prototype.toAltitude=function(){return t3(this.z,this.y)},Uc.prototype.meterInMercatorCoordinateUnits=function(){return 1/Gm*r3(D0(this.y))};var Hc=function(C,N,te){this.z=C,this.x=N,this.y=te,this.key=Mv(0,C,C,N,te)};Hc.prototype.equals=function(C){return this.z===C.z&&this.x===C.x&&this.y===C.y},Hc.prototype.url=function(C,N){var te=qw(this.x,this.y,this.z),pe=n3(this.z,this.x,this.y);return C[(this.x+this.y)%C.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(N==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",pe).replace("{bbox-epsg-3857}",te)},Hc.prototype.getTilePoint=function(C){var N=Math.pow(2,this.z);return new c((C.x*N-this.x)*Ua,(C.y*N-this.y)*Ua)},Hc.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Zm=function(C,N){this.wrap=C,this.canonical=N,this.key=Mv(C,N.z,N.z,N.x,N.y)},Wo=function(C,N,te,pe,be){this.overscaledZ=C,this.wrap=N,this.canonical=new Hc(te,+pe,+be),this.key=Mv(N,C,te,pe,be)};Wo.prototype.equals=function(C){return this.overscaledZ===C.overscaledZ&&this.wrap===C.wrap&&this.canonical.equals(C.canonical)},Wo.prototype.scaledTo=function(C){var N=this.canonical.z-C;return C>this.canonical.z?new Wo(C,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Wo(C,this.wrap,C,this.canonical.x>>N,this.canonical.y>>N)},Wo.prototype.calculateScaledKey=function(C,N){var te=this.canonical.z-C;return C>this.canonical.z?Mv(this.wrap*+N,C,this.canonical.z,this.canonical.x,this.canonical.y):Mv(this.wrap*+N,C,C,this.canonical.x>>te,this.canonical.y>>te)},Wo.prototype.isChildOf=function(C){if(C.wrap!==this.wrap)return!1;var N=this.canonical.z-C.canonical.z;return C.overscaledZ===0||C.overscaledZ<this.overscaledZ&&C.canonical.x===this.canonical.x>>N&&C.canonical.y===this.canonical.y>>N},Wo.prototype.children=function(C){if(this.overscaledZ>=C)return[new Wo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var N=this.canonical.z+1,te=this.canonical.x*2,pe=this.canonical.y*2;return[new Wo(N,this.wrap,N,te,pe),new Wo(N,this.wrap,N,te+1,pe),new Wo(N,this.wrap,N,te,pe+1),new Wo(N,this.wrap,N,te+1,pe+1)]},Wo.prototype.isLessThan=function(C){return this.wrap<C.wrap?!0:this.wrap>C.wrap?!1:this.overscaledZ<C.overscaledZ?!0:this.overscaledZ>C.overscaledZ?!1:this.canonical.x<C.canonical.x?!0:this.canonical.x>C.canonical.x?!1:this.canonical.y<C.canonical.y},Wo.prototype.wrapped=function(){return new Wo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Wo.prototype.unwrapTo=function(C){return new Wo(this.overscaledZ,C,this.canonical.z,this.canonical.x,this.canonical.y)},Wo.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Wo.prototype.toUnwrapped=function(){return new Zm(this.wrap,this.canonical)},Wo.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Wo.prototype.getTilePoint=function(C){return this.canonical.getTilePoint(new Uc(C.x-this.wrap,C.y))};function Mv(E,C,N,te,pe){E*=2,E<0&&(E=E*-1-1);var be=1<<N;return(be*be*E+be*pe+te).toString(36)+N.toString(36)+C.toString(36)}function n3(E,C,N){for(var te="",pe,be=E;be>0;be--)pe=1<<be-1,te+=(C&pe?1:0)+(N&pe?2:0);return te}Oe("CanonicalTileID",Hc),Oe("OverscaledTileID",Wo,{omit:["posMatrix"]});var Uf=function(C,N,te){if(this.uid=C,N.height!==N.width)throw new RangeError("DEM tiles must be square");if(te&&te!=="mapbox"&&te!=="terrarium")return O('"'+te+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=N.height;var pe=this.dim=N.height-2;this.data=new Uint32Array(N.data.buffer),this.encoding=te||"mapbox";for(var be=0;be<pe;be++)this.data[this._idx(-1,be)]=this.data[this._idx(0,be)],this.data[this._idx(pe,be)]=this.data[this._idx(pe-1,be)],this.data[this._idx(be,-1)]=this.data[this._idx(be,0)],this.data[this._idx(be,pe)]=this.data[this._idx(be,pe-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(pe,-1)]=this.data[this._idx(pe-1,0)],this.data[this._idx(-1,pe)]=this.data[this._idx(0,pe-1)],this.data[this._idx(pe,pe)]=this.data[this._idx(pe-1,pe-1)]};Uf.prototype.get=function(C,N){var te=new Uint8Array(this.data.buffer),pe=this._idx(C,N)*4,be=this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox;return be(te[pe],te[pe+1],te[pe+2])},Uf.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Uf.prototype._idx=function(C,N){if(C<-1||C>=this.dim+1||N<-1||N>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(N+1)*this.stride+(C+1)},Uf.prototype._unpackMapbox=function(C,N,te){return(C*256*256+N*256+te)/10-1e4},Uf.prototype._unpackTerrarium=function(C,N,te){return C*256+N+te/256-32768},Uf.prototype.getPixels=function(){return new xl({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Uf.prototype.backfillBorder=function(C,N,te){if(this.dim!==C.dim)throw new Error("dem dimension mismatch");var pe=N*this.dim,be=N*this.dim+this.dim,Se=te*this.dim,Fe=te*this.dim+this.dim;switch(N){case-1:pe=be-1;break;case 1:be=pe+1;break}switch(te){case-1:Se=Fe-1;break;case 1:Fe=Se+1;break}for(var tt=-N*this.dim,ct=-te*this.dim,gt=Se;gt<Fe;gt++)for(var Rt=pe;Rt<be;Rt++)this.data[this._idx(Rt,gt)]=C.data[this._idx(Rt+tt,gt+ct)]},Oe("DEMData",Uf);function a3(E,C){var N={};if(!C)return N;for(var te=function(){var Se=be[pe],Fe=Se.layerIds.map(function(Rt){return C.getLayer(Rt)}).filter(Boolean);if(Fe.length!==0){Se.layers=Fe,Se.stateDependentLayerIds&&(Se.stateDependentLayers=Se.stateDependentLayerIds.map(function(Rt){return Fe.filter(function(jt){return jt.id===Rt})[0]}));for(var tt=0,ct=Fe;tt<ct.length;tt+=1){var gt=ct[tt];N[gt.id]=Se}}},pe=0,be=E;pe<be.length;pe+=1)te();return N}var jp=function(C){this._stringToNumber={},this._numberToString=[];for(var N=0;N<C.length;N++){var te=C[N];this._stringToNumber[te]=N,this._numberToString[N]=te}};jp.prototype.encode=function(C){return this._stringToNumber[C]},jp.prototype.decode=function(C){return this._numberToString[C]};var Zp=function(C,N,te,pe,be){this.type="Feature",this._vectorTileFeature=C,C._z=N,C._x=te,C._y=pe,this.properties=C.properties,this.id=be},R0={geometry:{configurable:!0}};R0.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},R0.geometry.set=function(E){this._geometry=E},Zp.prototype.toJSON=function(){var C={geometry:this.geometry};for(var N in this)N==="_geometry"||N==="_vectorTileFeature"||(C[N]=this[N]);return C},Object.defineProperties(Zp.prototype,R0);var Sh=function(){this.state={},this.stateChanges={},this.deletedStates={}};Sh.prototype.updateState=function(C,N,te){var pe=String(N);if(this.stateChanges[C]=this.stateChanges[C]||{},this.stateChanges[C][pe]=this.stateChanges[C][pe]||{},M(this.stateChanges[C][pe],te),this.deletedStates[C]===null){this.deletedStates[C]={};for(var be in this.state[C])be!==pe&&(this.deletedStates[C][be]=null)}else{var Se=this.deletedStates[C]&&this.deletedStates[C][pe]===null;if(Se){this.deletedStates[C][pe]={};for(var Fe in this.state[C][pe])te[Fe]||(this.deletedStates[C][pe][Fe]=null)}else for(var tt in te){var ct=this.deletedStates[C]&&this.deletedStates[C][pe]&&this.deletedStates[C][pe][tt]===null;ct&&delete this.deletedStates[C][pe][tt]}}},Sh.prototype.removeFeatureState=function(C,N,te){var pe=this.deletedStates[C]===null;if(!pe){var be=String(N);if(this.deletedStates[C]=this.deletedStates[C]||{},te&&N!==void 0)this.deletedStates[C][be]!==null&&(this.deletedStates[C][be]=this.deletedStates[C][be]||{},this.deletedStates[C][be][te]=null);else if(N!==void 0){var Se=this.stateChanges[C]&&this.stateChanges[C][be];if(Se){this.deletedStates[C][be]={};for(te in this.stateChanges[C][be])this.deletedStates[C][be][te]=null}else this.deletedStates[C][be]=null}else this.deletedStates[C]=null}},Sh.prototype.getState=function(C,N){var te=String(N),pe=this.state[C]||{},be=this.stateChanges[C]||{},Se=M({},pe[te],be[te]);if(this.deletedStates[C]===null)return{};if(this.deletedStates[C]){var Fe=this.deletedStates[C][N];if(Fe===null)return{};for(var tt in Fe)delete Se[tt]}return Se},Sh.prototype.initializeTileState=function(C,N){C.setFeatureState(this.state,N)},Sh.prototype.coalesceChanges=function(C,N){var te={};for(var pe in this.stateChanges){this.state[pe]=this.state[pe]||{};var be={};for(var Se in this.stateChanges[pe])this.state[pe][Se]||(this.state[pe][Se]={}),M(this.state[pe][Se],this.stateChanges[pe][Se]),be[Se]=this.state[pe][Se];te[pe]=be}for(var Fe in this.deletedStates){this.state[Fe]=this.state[Fe]||{};var tt={};if(this.deletedStates[Fe]===null)for(var ct in this.state[Fe])tt[ct]={},this.state[Fe][ct]={};else for(var gt in this.deletedStates[Fe]){var Rt=this.deletedStates[Fe][gt]===null;if(Rt)this.state[Fe][gt]={};else for(var jt=0,Gt=Object.keys(this.deletedStates[Fe][gt]);jt<Gt.length;jt+=1){var lr=Gt[jt];delete this.state[Fe][gt][lr]}tt[gt]=this.state[Fe][gt]}te[Fe]=te[Fe]||{},M(te[Fe],tt)}if(this.stateChanges={},this.deletedStates={},Object.keys(te).length!==0)for(var Ir in C){var un=C[Ir];un.setFeatureState(te,N)}};var Hf=function(C,N){this.tileID=C,this.x=C.canonical.x,this.y=C.canonical.y,this.z=C.canonical.z,this.grid=new Io(Ua,16,0),this.grid3D=new Io(Ua,16,0),this.featureIndexArray=new fv,this.promoteId=N};Hf.prototype.insert=function(C,N,te,pe,be,Se){var Fe=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(te,pe,be);for(var tt=Se?this.grid3D:this.grid,ct=0;ct<N.length;ct++){for(var gt=N[ct],Rt=[1/0,1/0,-1/0,-1/0],jt=0;jt<gt.length;jt++){var Gt=gt[jt];Rt[0]=Math.min(Rt[0],Gt.x),Rt[1]=Math.min(Rt[1],Gt.y),Rt[2]=Math.max(Rt[2],Gt.x),Rt[3]=Math.max(Rt[3],Gt.y)}Rt[0]<Ua&&Rt[1]<Ua&&Rt[2]>=0&&Rt[3]>=0&&tt.insert(Fe,Rt[0],Rt[1],Rt[2],Rt[3])}},Hf.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new ph.VectorTile(new Op(this.rawTileData)).layers,this.sourceLayerCoder=new jp(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Hf.prototype.query=function(C,N,te,pe){var be=this;this.loadVTLayers();for(var Se=C.params||{},Fe=Ua/C.tileSize/C.scale,tt=_f(Se.filter),ct=C.queryGeometry,gt=C.queryPadding*Fe,Rt=Jm(ct),jt=this.grid.query(Rt.minX-gt,Rt.minY-gt,Rt.maxX+gt,Rt.maxY+gt),Gt=Jm(C.cameraQueryGeometry),lr=this.grid3D.query(Gt.minX-gt,Gt.minY-gt,Gt.maxX+gt,Gt.maxY+gt,function(Xn,sa,na,za){return kf(C.cameraQueryGeometry,Xn-gt,sa-gt,na+gt,za+gt)}),Ir=0,un=lr;Ir<un.length;Ir+=1){var qr=un[Ir];jt.push(qr)}jt.sort(i3);for(var Mn={},bn,An=function(Xn){var sa=jt[Xn];if(sa!==bn){bn=sa;var na=be.featureIndexArray.get(sa),za=null;be.loadMatchingFeature(Mn,na.bucketIndex,na.sourceLayerIndex,na.featureIndex,tt,Se.layers,Se.availableImages,N,te,pe,function(Ta,Sa,ti){return za||(za=Bi(Ta)),Sa.queryIntersectsFeature(ct,Ta,ti,za,be.z,C.transform,Fe,C.pixelPosMatrix)})}},Dn=0;Dn<jt.length;Dn++)An(Dn);return Mn},Hf.prototype.loadMatchingFeature=function(C,N,te,pe,be,Se,Fe,tt,ct,gt,Rt){var jt=this.bucketLayerIDs[N];if(!(Se&&!R(Se,jt))){var Gt=this.sourceLayerCoder.decode(te),lr=this.vtLayers[Gt],Ir=lr.feature(pe);if(!!be.filter(new si(this.tileID.overscaledZ),Ir))for(var un=this.getId(Ir,Gt),qr=0;qr<jt.length;qr++){var Mn=jt[qr];if(!(Se&&Se.indexOf(Mn)<0)){var bn=tt[Mn];if(!!bn){var An={};un!==void 0&&gt&&(An=gt.getState(bn.sourceLayer||"_geojsonTileLayer",un));var Dn=ct[Mn];Dn.paint=Km(Dn.paint,bn.paint,Ir,An,Fe),Dn.layout=Km(Dn.layout,bn.layout,Ir,An,Fe);var Xn=!Rt||Rt(Ir,bn,An);if(!!Xn){var sa=new Zp(Ir,this.z,this.x,this.y,un);sa.layer=Dn;var na=C[Mn];na===void 0&&(na=C[Mn]=[]),na.push({featureIndex:pe,feature:sa,intersectionZ:Xn})}}}}}},Hf.prototype.lookupSymbolFeatures=function(C,N,te,pe,be,Se,Fe,tt){var ct={};this.loadVTLayers();for(var gt=_f(be),Rt=0,jt=C;Rt<jt.length;Rt+=1){var Gt=jt[Rt];this.loadMatchingFeature(ct,te,pe,Gt,gt,Se,Fe,tt,N)}return ct},Hf.prototype.hasLayer=function(C){for(var N=0,te=this.bucketLayerIDs;N<te.length;N+=1)for(var pe=te[N],be=0,Se=pe;be<Se.length;be+=1){var Fe=Se[be];if(C===Fe)return!0}return!1},Hf.prototype.getId=function(C,N){var te=C.id;if(this.promoteId){var pe=typeof this.promoteId=="string"?this.promoteId:this.promoteId[N];te=C.properties[pe],typeof te=="boolean"&&(te=Number(te))}return te},Oe("FeatureIndex",Hf,{omit:["rawTileData","sourceLayerCoder"]});function Km(E,C,N,te,pe){return P(E,function(be,Se){var Fe=C instanceof Ni?C.get(Se):null;return Fe&&Fe.evaluate?Fe.evaluate(N,te,pe):Fe})}function Jm(E){for(var C=1/0,N=1/0,te=-1/0,pe=-1/0,be=0,Se=E;be<Se.length;be+=1){var Fe=Se[be];C=Math.min(C,Fe.x),N=Math.min(N,Fe.y),te=Math.max(te,Fe.x),pe=Math.max(pe,Fe.y)}return{minX:C,minY:N,maxX:te,maxY:pe}}function i3(E,C){return C-E}var o3=3e4,is=function(C,N){this.tileID=C,this.uid=_(),this.uses=0,this.tileSize=N,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};is.prototype.registerFadeDuration=function(C){var N=C+this.timeAdded;N<Q.now()||this.fadeEndTime&&N<this.fadeEndTime||(this.fadeEndTime=N)},is.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},is.prototype.loadVectorData=function(C,N,te){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",!C){this.collisionBoxArray=new Sf;return}C.featureIndex&&(this.latestFeatureIndex=C.featureIndex,C.rawTileData?(this.latestRawTileData=C.rawTileData,this.latestFeatureIndex.rawTileData=C.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=C.collisionBoxArray,this.buckets=a3(C.buckets,N.style),this.hasSymbolBuckets=!1;for(var pe in this.buckets){var be=this.buckets[pe];if(be instanceof Yi)if(this.hasSymbolBuckets=!0,te)be.justReloaded=!0;else break}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Se in this.buckets){var Fe=this.buckets[Se];if(Fe instanceof Yi&&Fe.hasRTLText){this.hasRTLText=!0,Mi();break}}this.queryPadding=0;for(var tt in this.buckets){var ct=this.buckets[tt];this.queryPadding=Math.max(this.queryPadding,N.style.getLayer(tt).queryRadius(ct))}C.imageAtlas&&(this.imageAtlas=C.imageAtlas),C.glyphAtlasImage&&(this.glyphAtlasImage=C.glyphAtlasImage)},is.prototype.unloadVectorData=function(){for(var C in this.buckets)this.buckets[C].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},is.prototype.getBucket=function(C){return this.buckets[C.id]},is.prototype.upload=function(C){for(var N in this.buckets){var te=this.buckets[N];te.uploadPending()&&te.upload(C)}var pe=C.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Bc(C,this.imageAtlas.image,pe.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Bc(C,this.glyphAtlasImage,pe.ALPHA),this.glyphAtlasImage=null)},is.prototype.prepare=function(C){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(C,this.imageAtlasTexture)},is.prototype.queryRenderedFeatures=function(C,N,te,pe,be,Se,Fe,tt,ct,gt){return!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData?{}:this.latestFeatureIndex.query({queryGeometry:pe,cameraQueryGeometry:be,scale:Se,tileSize:this.tileSize,pixelPosMatrix:gt,transform:tt,params:Fe,queryPadding:this.queryPadding*ct},C,N,te)},is.prototype.querySourceFeatures=function(C,N){var te=this.latestFeatureIndex;if(!(!te||!te.rawTileData)){var pe=te.loadVTLayers(),be=N?N.sourceLayer:"",Se=pe._geojsonTileLayer||pe[be];if(!!Se)for(var Fe=_f(N&&N.filter),tt=this.tileID.canonical,ct=tt.z,gt=tt.x,Rt=tt.y,jt={z:ct,x:gt,y:Rt},Gt=0;Gt<Se.length;Gt++){var lr=Se.feature(Gt);if(Fe.filter(new si(this.tileID.overscaledZ),lr)){var Ir=te.getId(lr,be),un=new Zp(lr,ct,gt,Rt,Ir);un.tile=jt,C.push(un)}}}},is.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},is.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},is.prototype.setExpiryData=function(C){var N=this.expirationTime;if(C.cacheControl){var te=J(C.cacheControl);te["max-age"]&&(this.expirationTime=Date.now()+te["max-age"]*1e3)}else C.expires&&(this.expirationTime=new Date(C.expires).getTime());if(this.expirationTime){var pe=Date.now(),be=!1;if(this.expirationTime>pe)be=!1;else if(!N)be=!0;else if(this.expirationTime<N)be=!0;else{var Se=this.expirationTime-N;Se?this.expirationTime=pe+Math.max(Se,o3):be=!0}be?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},is.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},is.prototype.setFeatureState=function(C,N){if(!(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(C).length===0)){var te=this.latestFeatureIndex.loadVTLayers();for(var pe in this.buckets)if(!!N.style.hasLayer(pe)){var be=this.buckets[pe],Se=be.layers[0].sourceLayer||"_geojsonTileLayer",Fe=te[Se],tt=C[Se];if(!(!Fe||!tt||Object.keys(tt).length===0)){be.update(tt,Fe,this.imageAtlas&&this.imageAtlas.patternPositions||{});var ct=N&&N.style&&N.style.getLayer(pe);ct&&(this.queryPadding=Math.max(this.queryPadding,ct.queryRadius(be)))}}}},is.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},is.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Q.now()},is.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},is.prototype.setHoldDuration=function(C){this.symbolFadeHoldUntil=Q.now()+C},is.prototype.setDependencies=function(C,N){for(var te={},pe=0,be=N;pe<be.length;pe+=1){var Se=be[pe];te[Se]=!0}this.dependencies[C]=te},is.prototype.hasDependency=function(C,N){for(var te=0,pe=C;te<pe.length;te+=1){var be=pe[te],Se=this.dependencies[be];if(Se)for(var Fe=0,tt=N;Fe<tt.length;Fe+=1){var ct=tt[Fe];if(Se[ct])return!0}}return!1};var s3=["type","source","source-layer","minzoom","maxzoom","filter","layout"],oc=self.performance,Qm=function(C){this._marks={start:[C.url,"start"].join("#"),end:[C.url,"end"].join("#"),measure:C.url.toString()},oc.mark(this._marks.start)};Qm.prototype.finish=function(){oc.mark(this._marks.end);var C=oc.getEntriesByName(this._marks.measure);return C.length===0&&(oc.measure(this._marks.measure,this._marks.start,this._marks.end),C=oc.getEntriesByName(this._marks.measure),oc.clearMarks(this._marks.start),oc.clearMarks(this._marks.end),oc.clearMeasures(this._marks.measure)),C},e.Actor=Mh,e.AlphaImage=Nc,e.CanonicalTileID=Hc,e.CollisionBoxArray=Sf,e.Color=hi,e.DEMData=Uf,e.DataConstantProperty=Fa,e.DictionaryCoder=jp,e.EXTENT=Ua,e.ErrorEvent=yr,e.EvaluationParameters=si,e.Event=nn,e.Evented=_r,e.FeatureIndex=Hf,e.FillBucket=nf,e.FillExtrusionBucket=af,e.ImageAtlas=_v,e.ImagePosition=Bp,e.LineBucket=bl,e.LngLat=vo,e.LngLatBounds=Yo,e.MercatorCoordinate=Uc,e.ONE_EM=bs,e.OverscaledTileID=Wo,e.Point=c,e.Point$1=c,e.Properties=Xi,e.Protobuf=Op,e.RGBAImage=xl,e.RequestManager=Ne,e.RequestPerformance=Qm,e.ResourceType=dr,e.SegmentVector=Y,e.SourceFeatureState=Sh,e.StructArrayLayout1ui2=ec,e.StructArrayLayout2f1f2i16=ef,e.StructArrayLayout2i4=Pc,e.StructArrayLayout3ui6=tf,e.StructArrayLayout4i8=wf,e.SymbolBucket=Yi,e.Texture=Bc,e.Tile=is,e.Transitionable=yo,e.Uniform1f=Br,e.Uniform1i=Hr,e.Uniform2f=Jr,e.Uniform3f=hn,e.Uniform4f=kn,e.UniformColor=Nn,e.UniformMatrix4f=qn,e.UnwrappedTileID=Zm,e.ValidationError=rr,e.WritingMode=Ql,e.ZoomHistory=Wt,e.add=ch,e.addDynamicAttributes=C0,e.asyncAll=p,e.bezier=u,e.bindAll=S,e.browser=Q,e.cacheEntryPossiblyAdded=Je,e.clamp=h,e.clearTileCache=Et,e.clipLine=Pm,e.clone=Lp,e.clone$1=I,e.clone$2=l0,e.collisionCircleLayout=H_,e.config=ne,e.create=lh,e.create$1=Fc,e.create$2=zc,e.createCommonjsModule=o,e.createExpression=cu,e.createLayout=Fo,e.createStyleLayer=$w,e.cross=y2,e.deepEqual=i,e.dot=g2,e.dot$1=w2,e.ease=g,e.emitValidationErrors=go,e.endsWith=k,e.enforceCacheSizeLimit=pt,e.evaluateSizeForFeature=Am,e.evaluateSizeForZoom=Mm,e.evaluateVariableOffset=Im,e.evented=gi,e.extend=M,e.featureFilter=_f,e.filterObject=z,e.fromRotation=sh,e.getAnchorAlignment=M0,e.getAnchorJustification=E0,e.getArrayBuffer=Re,e.getImage=wr,e.getJSON=Me,e.getRTLTextPluginStatus=ho,e.getReferrer=Sr,e.getVideo=Lr,e.identity=uh,e.invert=rc,e.isChar=Xt,e.isMapboxURL=He,e.keysDifference=m,e.makeRequest=we,e.mapObject=P,e.mercatorXfromLng=Wm,e.mercatorYfromLat=Xm,e.mercatorZfromAltitude=jm,e.mul=s0,e.multiply=nc,e.mvt=ph,e.normalize=hv,e.number=lo,e.offscreenCanvasSupported=ir,e.ortho=o0,e.parseGlyphPBF=pw,e.pbf=Op,e.performSymbolLayout=Dw,e.perspective=cv,e.pick=x,e.plugin=Xa,e.polygonIntersectsPolygon=ii,e.postMapLoadEvent=St,e.postTurnstileEvent=Nt,e.potpack=gm,e.refProperties=s3,e.register=Oe,e.registerForPluginStateChange=Ii,e.rotate=Ns,e.rotateX=ml,e.rotateZ=fh,e.scale=yl,e.scale$1=_2,e.scale$2=f0,e.setCacheLimits=ar,e.setRTLTextPlugin=ha,e.sphericalToCartesian=W,e.sqrLen=M2,e.styleSpec=mr,e.sub=x2,e.symbolSize=Tw,e.transformMat3=m2,e.transformMat4=Pp,e.translate=Lo,e.triggerPluginCompletionEvent=Ra,e.uniqueId=_,e.validateCustomStyleLayer=Kw,e.validateLight=xi,e.validateStyle=_o,e.values=A,e.vectorTile=ph,e.version=a,e.warnOnce=O,e.webpSupported=ae,e.window=self,e.wrap=y}),w(["./shared"],function(e){function o(et){var we=typeof et;if(we==="number"||we==="boolean"||we==="string"||et===void 0||et===null)return JSON.stringify(et);if(Array.isArray(et)){for(var Me="[",Re=0,Xe=et;Re<Xe.length;Re+=1){var $e=Xe[Re];Me+=o($e)+","}return Me+"]"}for(var ot=Object.keys(et).sort(),st="{",yt=0;yt<ot.length;yt++)st+=JSON.stringify(ot[yt])+":"+o(et[ot[yt]])+",";return st+"}"}function a(et){for(var we="",Me=0,Re=e.refProperties;Me<Re.length;Me+=1){var Xe=Re[Me];we+="/"+o(et[Xe])}return we}function r(et,we){for(var Me={},Re=0;Re<et.length;Re++){var Xe=we&&we[et[Re].id]||a(et[Re]);we&&(we[et[Re].id]=Xe);var $e=Me[Xe];$e||($e=Me[Xe]=[]),$e.push(et[Re])}var ot=[];for(var st in Me)ot.push(Me[st]);return ot}var n=function(we){this.keyCache={},we&&this.replace(we)};n.prototype.replace=function(we){this._layerConfigs={},this._layers={},this.update(we,[])},n.prototype.update=function(we,Me){for(var Re=this,Xe=0,$e=we;Xe<$e.length;Xe+=1){var ot=$e[Xe];this._layerConfigs[ot.id]=ot;var st=this._layers[ot.id]=e.createStyleLayer(ot);st._featureFilter=e.featureFilter(st.filter),this.keyCache[ot.id]&&delete this.keyCache[ot.id]}for(var yt=0,wt=Me;yt<wt.length;yt+=1){var Vt=wt[yt];delete this.keyCache[Vt],delete this._layerConfigs[Vt],delete this._layers[Vt]}this.familiesBySource={};for(var gr=r(e.values(this._layerConfigs),this.keyCache),wr=0,Lr=gr;wr<Lr.length;wr+=1){var fr=Lr[wr],Fr=fr.map(function(Ar){return Re._layers[Ar.id]}),nn=Fr[0];if(nn.visibility!=="none"){var yr=nn.source||"",_r=this.familiesBySource[yr];_r||(_r=this.familiesBySource[yr]={});var dn=nn.sourceLayer||"_geojsonTileLayer",Yr=_r[dn];Yr||(Yr=_r[dn]=[]),Yr.push(Fr)}}};var c=1,s=function(we){var Me={},Re=[];for(var Xe in we){var $e=we[Xe],ot=Me[Xe]={};for(var st in $e){var yt=$e[+st];if(!(!yt||yt.bitmap.width===0||yt.bitmap.height===0)){var wt={x:0,y:0,w:yt.bitmap.width+2*c,h:yt.bitmap.height+2*c};Re.push(wt),ot[st]={rect:wt,metrics:yt.metrics}}}}var Vt=e.potpack(Re),gr=Vt.w,wr=Vt.h,Lr=new e.AlphaImage({width:gr||1,height:wr||1});for(var fr in we){var Fr=we[fr];for(var nn in Fr){var yr=Fr[+nn];if(!(!yr||yr.bitmap.width===0||yr.bitmap.height===0)){var _r=Me[fr][nn].rect;e.AlphaImage.copy(yr.bitmap,Lr,{x:0,y:0},{x:_r.x+c,y:_r.y+c},yr.bitmap)}}}this.image=Lr,this.positions=Me};e.register("GlyphAtlas",s);var i=function(we){this.tileID=new e.OverscaledTileID(we.tileID.overscaledZ,we.tileID.wrap,we.tileID.canonical.z,we.tileID.canonical.x,we.tileID.canonical.y),this.uid=we.uid,this.zoom=we.zoom,this.pixelRatio=we.pixelRatio,this.tileSize=we.tileSize,this.source=we.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=we.showCollisionBoxes,this.collectResourceTiming=!!we.collectResourceTiming,this.returnDependencies=!!we.returnDependencies,this.promoteId=we.promoteId};i.prototype.parse=function(we,Me,Re,Xe,$e){var ot=this;this.status="parsing",this.data=we,this.collisionBoxArray=new e.CollisionBoxArray;var st=new e.DictionaryCoder(Object.keys(we.layers).sort()),yt=new e.FeatureIndex(this.tileID,this.promoteId);yt.bucketLayerIDs=[];var wt={},Vt={featureIndex:yt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Re},gr=Me.familiesBySource[this.source];for(var wr in gr){var Lr=we.layers[wr];if(!!Lr){Lr.version===1&&e.warnOnce('Vector tile source "'+this.source+'" layer "'+wr+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var fr=st.encode(wr),Fr=[],nn=0;nn<Lr.length;nn++){var yr=Lr.feature(nn),_r=yt.getId(yr,wr);Fr.push({feature:yr,id:_r,index:nn,sourceLayerIndex:fr})}for(var dn=0,Yr=gr[wr];dn<Yr.length;dn+=1){var Ar=Yr[dn],an=Ar[0];if(!(an.minzoom&&this.zoom<Math.floor(an.minzoom))&&!(an.maxzoom&&this.zoom>=an.maxzoom)&&an.visibility!=="none"){v(Ar,this.zoom,Re);var rn=wt[an.id]=an.createBucket({index:yt.bucketLayerIDs.length,layers:Ar,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:fr,sourceID:this.source});rn.populate(Fr,Vt,this.tileID.canonical),yt.bucketLayerIDs.push(Ar.map(function(xr){return xr.id}))}}}}var Zr,at,zt,er,hr=e.mapObject(Vt.glyphDependencies,function(xr){return Object.keys(xr).map(Number)});Object.keys(hr).length?Xe.send("getGlyphs",{uid:this.uid,stacks:hr},function(xr,Wr){Zr||(Zr=xr,at=Wr,Er.call(ot))}):at={};var Vr=Object.keys(Vt.iconDependencies);Vr.length?Xe.send("getImages",{icons:Vr,source:this.source,tileID:this.tileID,type:"icons"},function(xr,Wr){Zr||(Zr=xr,zt=Wr,Er.call(ot))}):zt={};var Rr=Object.keys(Vt.patternDependencies);Rr.length?Xe.send("getImages",{icons:Rr,source:this.source,tileID:this.tileID,type:"patterns"},function(xr,Wr){Zr||(Zr=xr,er=Wr,Er.call(ot))}):er={},Er.call(this);function Er(){if(Zr)return $e(Zr);if(at&&zt&&er){var xr=new s(at),Wr=new e.ImageAtlas(zt,er);for(var Rn in wt){var En=wt[Rn];En instanceof e.SymbolBucket?(v(En.layers,this.zoom,Re),e.performSymbolLayout(En,at,xr.positions,zt,Wr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):En.hasPattern&&(En instanceof e.LineBucket||En instanceof e.FillBucket||En instanceof e.FillExtrusionBucket)&&(v(En.layers,this.zoom,Re),En.addFeatures(Vt,this.tileID.canonical,Wr.patternPositions))}this.status="done",$e(null,{buckets:e.values(wt).filter(function(ea){return!ea.isEmpty()}),featureIndex:yt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:xr.image,imageAtlas:Wr,glyphMap:this.returnDependencies?at:null,iconMap:this.returnDependencies?zt:null,glyphPositions:this.returnDependencies?xr.positions:null})}}};function v(et,we,Me){for(var Re=new e.EvaluationParameters(we),Xe=0,$e=et;Xe<$e.length;Xe+=1){var ot=$e[Xe];ot.recalculate(Re,Me)}}function u(et,we){var Me=e.getArrayBuffer(et.request,function(Re,Xe,$e,ot){Re?we(Re):Xe&&we(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf(Xe)),rawData:Xe,cacheControl:$e,expires:ot})});return function(){Me.cancel(),we()}}var g=function(we,Me,Re,Xe){this.actor=we,this.layerIndex=Me,this.availableImages=Re,this.loadVectorData=Xe||u,this.loading={},this.loaded={}};g.prototype.loadTile=function(we,Me){var Re=this,Xe=we.uid;this.loading||(this.loading={});var $e=we&&we.request&&we.request.collectResourceTiming?new e.RequestPerformance(we.request):!1,ot=this.loading[Xe]=new i(we);ot.abort=this.loadVectorData(we,function(st,yt){if(delete Re.loading[Xe],st||!yt)return ot.status="done",Re.loaded[Xe]=ot,Me(st);var wt=yt.rawData,Vt={};yt.expires&&(Vt.expires=yt.expires),yt.cacheControl&&(Vt.cacheControl=yt.cacheControl);var gr={};if($e){var wr=$e.finish();wr&&(gr.resourceTiming=JSON.parse(JSON.stringify(wr)))}ot.vectorTile=yt.vectorTile,ot.parse(yt.vectorTile,Re.layerIndex,Re.availableImages,Re.actor,function(Lr,fr){if(Lr||!fr)return Me(Lr);Me(null,e.extend({rawTileData:wt.slice(0)},fr,Vt,gr))}),Re.loaded=Re.loaded||{},Re.loaded[Xe]=ot})},g.prototype.reloadTile=function(we,Me){var Re=this,Xe=this.loaded,$e=we.uid,ot=this;if(Xe&&Xe[$e]){var st=Xe[$e];st.showCollisionBoxes=we.showCollisionBoxes;var yt=function(wt,Vt){var gr=st.reloadCallback;gr&&(delete st.reloadCallback,st.parse(st.vectorTile,ot.layerIndex,Re.availableImages,ot.actor,gr)),Me(wt,Vt)};st.status==="parsing"?st.reloadCallback=yt:st.status==="done"&&(st.vectorTile?st.parse(st.vectorTile,this.layerIndex,this.availableImages,this.actor,yt):yt())}},g.prototype.abortTile=function(we,Me){var Re=this.loading,Xe=we.uid;Re&&Re[Xe]&&Re[Xe].abort&&(Re[Xe].abort(),delete Re[Xe]),Me()},g.prototype.removeTile=function(we,Me){var Re=this.loaded,Xe=we.uid;Re&&Re[Xe]&&delete Re[Xe],Me()};var h=e.window.ImageBitmap,y=function(){this.loaded={}};y.prototype.loadTile=function(we,Me){var Re=we.uid,Xe=we.encoding,$e=we.rawImageData,ot=h&&$e instanceof h?this.getImageData($e):$e,st=new e.DEMData(Re,ot,Xe);this.loaded=this.loaded||{},this.loaded[Re]=st,Me(null,st)},y.prototype.getImageData=function(we){(!this.offscreenCanvas||!this.offscreenCanvasContext)&&(this.offscreenCanvas=new OffscreenCanvas(we.width,we.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=we.width,this.offscreenCanvas.height=we.height,this.offscreenCanvasContext.drawImage(we,0,0,we.width,we.height);var Me=this.offscreenCanvasContext.getImageData(-1,-1,we.width+2,we.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:Me.width,height:Me.height},Me.data)},y.prototype.removeTile=function(we){var Me=this.loaded,Re=we.uid;Me&&Me[Re]&&delete Me[Re]};var p=A;function A(et,we){var Me=et&&et.type,Re;if(Me==="FeatureCollection")for(Re=0;Re<et.features.length;Re++)A(et.features[Re],we);else if(Me==="GeometryCollection")for(Re=0;Re<et.geometries.length;Re++)A(et.geometries[Re],we);else if(Me==="Feature")A(et.geometry,we);else if(Me==="Polygon")m(et.coordinates,we);else if(Me==="MultiPolygon")for(Re=0;Re<et.coordinates.length;Re++)m(et.coordinates[Re],we);return et}function m(et,we){if(et.length!==0){M(et[0],we);for(var Me=1;Me<et.length;Me++)M(et[Me],!we)}}function M(et,we){for(var Me=0,Re=0,Xe=et.length,$e=Xe-1;Re<Xe;$e=Re++)Me+=(et[Re][0]-et[$e][0])*(et[$e][1]+et[Re][1]);Me>=0!=!!we&&et.reverse()}var x=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,T=function(we){this._feature=we,this.extent=e.EXTENT,this.type=we.type,this.properties=we.tags,"id"in we&&!isNaN(we.id)&&(this.id=parseInt(we.id,10))};T.prototype.loadGeometry=function(){if(this._feature.type===1){for(var we=[],Me=0,Re=this._feature.geometry;Me<Re.length;Me+=1){var Xe=Re[Me];we.push([new e.Point$1(Xe[0],Xe[1])])}return we}else{for(var $e=[],ot=0,st=this._feature.geometry;ot<st.length;ot+=1){for(var yt=st[ot],wt=[],Vt=0,gr=yt;Vt<gr.length;Vt+=1){var wr=gr[Vt];wt.push(new e.Point$1(wr[0],wr[1]))}$e.push(wt)}return $e}},T.prototype.toGeoJSON=function(we,Me,Re){return x.call(this,we,Me,Re)};var _=function(we){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=we.length,this._features=we};_.prototype.feature=function(we){return new T(this._features[we])};var f=e.vectorTile.VectorTileFeature,L=S;function S(et,we){this.options=we||{},this.features=et,this.length=et.length}S.prototype.feature=function(et){return new k(this.features[et],this.options.extent)};function k(et,we){this.id=typeof et.id=="number"?et.id:void 0,this.type=et.type,this.rawGeometry=et.type===1?[et.geometry]:et.geometry,this.properties=et.tags,this.extent=we||4096}k.prototype.loadGeometry=function(){var et=this.rawGeometry;this.geometry=[];for(var we=0;we<et.length;we++){for(var Me=et[we],Re=[],Xe=0;Xe<Me.length;Xe++)Re.push(new e.Point$1(Me[Xe][0],Me[Xe][1]));this.geometry.push(Re)}return this.geometry},k.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var et=this.geometry,we=1/0,Me=-1/0,Re=1/0,Xe=-1/0,$e=0;$e<et.length;$e++)for(var ot=et[$e],st=0;st<ot.length;st++){var yt=ot[st];we=Math.min(we,yt.x),Me=Math.max(Me,yt.x),Re=Math.min(Re,yt.y),Xe=Math.max(Xe,yt.y)}return[we,Re,Me,Xe]},k.prototype.toGeoJSON=f.prototype.toGeoJSON;var P=D,z=D,I=O,R=L;function D(et){var we=new e.pbf;return F(et,we),we.finish()}function O(et,we){we=we||{};var Me={};for(var Re in et)Me[Re]=new L(et[Re].features,we),Me[Re].name=Re,Me[Re].version=we.version,Me[Re].extent=we.extent;return D({layers:Me})}function F(et,we){for(var Me in et.layers)we.writeMessage(3,G,et.layers[Me])}function G(et,we){we.writeVarintField(15,et.version||1),we.writeStringField(1,et.name||""),we.writeVarintField(5,et.extent||4096);var Me,Re={keys:[],values:[],keycache:{},valuecache:{}};for(Me=0;Me<et.length;Me++)Re.feature=et.feature(Me),we.writeMessage(2,W,Re);var Xe=Re.keys;for(Me=0;Me<Xe.length;Me++)we.writeStringField(3,Xe[Me]);var $e=Re.values;for(Me=0;Me<$e.length;Me++)we.writeMessage(4,se,$e[Me])}function W(et,we){var Me=et.feature;Me.id!==void 0&&we.writeVarintField(1,Me.id),we.writeMessage(2,q,et),we.writeVarintField(3,Me.type),we.writeMessage(4,Z,Me)}function q(et,we){var Me=et.feature,Re=et.keys,Xe=et.values,$e=et.keycache,ot=et.valuecache;for(var st in Me.properties){var yt=$e[st];typeof yt=="undefined"&&(Re.push(st),yt=Re.length-1,$e[st]=yt),we.writeVarint(yt);var wt=Me.properties[st],Vt=typeof wt;Vt!=="string"&&Vt!=="boolean"&&Vt!=="number"&&(wt=JSON.stringify(wt));var gr=Vt+":"+wt,wr=ot[gr];typeof wr=="undefined"&&(Xe.push(wt),wr=Xe.length-1,ot[gr]=wr),we.writeVarint(wr)}}function J(et,we){return(we<<3)+(et&7)}function X(et){return et<<1^et>>31}function Z(et,we){for(var Me=et.loadGeometry(),Re=et.type,Xe=0,$e=0,ot=Me.length,st=0;st<ot;st++){var yt=Me[st],wt=1;Re===1&&(wt=yt.length),we.writeVarint(J(1,wt));for(var Vt=Re===3?yt.length-1:yt.length,gr=0;gr<Vt;gr++){gr===1&&Re!==1&&we.writeVarint(J(2,Vt-1));var wr=yt[gr].x-Xe,Lr=yt[gr].y-$e;we.writeVarint(X(wr)),we.writeVarint(X(Lr)),Xe+=wr,$e+=Lr}Re===3&&we.writeVarint(J(7,1))}}function se(et,we){var Me=typeof et;Me==="string"?we.writeStringField(1,et):Me==="boolean"?we.writeBooleanField(7,et):Me==="number"&&(et%1!==0?we.writeDoubleField(3,et):et<0?we.writeSVarintField(6,et):we.writeVarintField(5,et))}P.fromVectorTileJs=z,P.fromGeojsonVt=I,P.GeoJSONWrapper=R;function le(et,we,Me,Re,Xe,$e){if(!(Xe-Re<=Me)){var ot=Re+Xe>>1;oe(et,we,ot,Re,Xe,$e%2),le(et,we,Me,Re,ot-1,$e+1),le(et,we,Me,ot+1,Xe,$e+1)}}function oe(et,we,Me,Re,Xe,$e){for(;Xe>Re;){if(Xe-Re>600){var ot=Xe-Re+1,st=Me-Re+1,yt=Math.log(ot),wt=.5*Math.exp(2*yt/3),Vt=.5*Math.sqrt(yt*wt*(ot-wt)/ot)*(st-ot/2<0?-1:1),gr=Math.max(Re,Math.floor(Me-st*wt/ot+Vt)),wr=Math.min(Xe,Math.floor(Me+(ot-st)*wt/ot+Vt));oe(et,we,Me,gr,wr,$e)}var Lr=we[2*Me+$e],fr=Re,Fr=Xe;for(U(et,we,Re,Me),we[2*Xe+$e]>Lr&&U(et,we,Re,Xe);fr<Fr;){for(U(et,we,fr,Fr),fr++,Fr--;we[2*fr+$e]<Lr;)fr++;for(;we[2*Fr+$e]>Lr;)Fr--}we[2*Re+$e]===Lr?U(et,we,Re,Fr):(Fr++,U(et,we,Fr,Xe)),Fr<=Me&&(Re=Fr+1),Me<=Fr&&(Xe=Fr-1)}}function U(et,we,Me,Re){V(et,Me,Re),V(we,2*Me,2*Re),V(we,2*Me+1,2*Re+1)}function V(et,we,Me){var Re=et[we];et[we]=et[Me],et[Me]=Re}function re(et,we,Me,Re,Xe,$e,ot){for(var st=[0,et.length-1,0],yt=[],wt,Vt;st.length;){var gr=st.pop(),wr=st.pop(),Lr=st.pop();if(wr-Lr<=ot){for(var fr=Lr;fr<=wr;fr++)wt=we[2*fr],Vt=we[2*fr+1],wt>=Me&&wt<=Xe&&Vt>=Re&&Vt<=$e&&yt.push(et[fr]);continue}var Fr=Math.floor((Lr+wr)/2);wt=we[2*Fr],Vt=we[2*Fr+1],wt>=Me&&wt<=Xe&&Vt>=Re&&Vt<=$e&&yt.push(et[Fr]);var nn=(gr+1)%2;(gr===0?Me<=wt:Re<=Vt)&&(st.push(Lr),st.push(Fr-1),st.push(nn)),(gr===0?Xe>=wt:$e>=Vt)&&(st.push(Fr+1),st.push(wr),st.push(nn))}return yt}function ee(et,we,Me,Re,Xe,$e){for(var ot=[0,et.length-1,0],st=[],yt=Xe*Xe;ot.length;){var wt=ot.pop(),Vt=ot.pop(),gr=ot.pop();if(Vt-gr<=$e){for(var wr=gr;wr<=Vt;wr++)j(we[2*wr],we[2*wr+1],Me,Re)<=yt&&st.push(et[wr]);continue}var Lr=Math.floor((gr+Vt)/2),fr=we[2*Lr],Fr=we[2*Lr+1];j(fr,Fr,Me,Re)<=yt&&st.push(et[Lr]);var nn=(wt+1)%2;(wt===0?Me-Xe<=fr:Re-Xe<=Fr)&&(ot.push(gr),ot.push(Lr-1),ot.push(nn)),(wt===0?Me+Xe>=fr:Re+Xe>=Fr)&&(ot.push(Lr+1),ot.push(Vt),ot.push(nn))}return st}function j(et,we,Me,Re){var Xe=et-Me,$e=we-Re;return Xe*Xe+$e*$e}var Q=function(et){return et[0]},ne=function(et){return et[1]},ae=function(we,Me,Re,Xe,$e){Me===void 0&&(Me=Q),Re===void 0&&(Re=ne),Xe===void 0&&(Xe=64),$e===void 0&&($e=Float64Array),this.nodeSize=Xe,this.points=we;for(var ot=we.length<65536?Uint16Array:Uint32Array,st=this.ids=new ot(we.length),yt=this.coords=new $e(we.length*2),wt=0;wt<we.length;wt++)st[wt]=wt,yt[2*wt]=Me(we[wt]),yt[2*wt+1]=Re(we[wt]);le(st,yt,Xe,0,st.length-1,0)};ae.prototype.range=function(we,Me,Re,Xe){return re(this.ids,this.coords,we,Me,Re,Xe,this.nodeSize)},ae.prototype.within=function(we,Me,Re){return ee(this.ids,this.coords,we,Me,Re,this.nodeSize)};var ie={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(et){return et}},ue=function(we){this.options=Ge(Object.create(ie),we),this.trees=new Array(this.options.maxZoom+1)};ue.prototype.load=function(we){var Me=this.options,Re=Me.log,Xe=Me.minZoom,$e=Me.maxZoom,ot=Me.nodeSize;Re&&console.time("total time");var st="prepare "+we.length+" points";Re&&console.time(st),this.points=we;for(var yt=[],wt=0;wt<we.length;wt++)!we[wt].geometry||yt.push(he(we[wt],wt));this.trees[$e+1]=new ae(yt,_e,De,ot,Float32Array),Re&&console.timeEnd(st);for(var Vt=$e;Vt>=Xe;Vt--){var gr=+Date.now();yt=this._cluster(yt,Vt),this.trees[Vt]=new ae(yt,_e,De,ot,Float32Array),Re&&console.log("z%d: %d clusters in %dms",Vt,yt.length,+Date.now()-gr)}return Re&&console.timeEnd("total time"),this},ue.prototype.getClusters=function(we,Me){var Re=((we[0]+180)%360+360)%360-180,Xe=Math.max(-90,Math.min(90,we[1])),$e=we[2]===180?180:((we[2]+180)%360+360)%360-180,ot=Math.max(-90,Math.min(90,we[3]));if(we[2]-we[0]>=360)Re=-180,$e=180;else if(Re>$e){var st=this.getClusters([Re,Xe,180,ot],Me),yt=this.getClusters([-180,Xe,$e,ot],Me);return st.concat(yt)}for(var wt=this.trees[this._limitZoom(Me)],Vt=wt.range(ke(Re),Ae(ot),ke($e),Ae(Xe)),gr=[],wr=0,Lr=Vt;wr<Lr.length;wr+=1){var fr=Lr[wr],Fr=wt.points[fr];gr.push(Fr.numPoints?ge(Fr):this.points[Fr.index])}return gr},ue.prototype.getChildren=function(we){var Me=this._getOriginId(we),Re=this._getOriginZoom(we),Xe="No cluster with the specified id.",$e=this.trees[Re];if(!$e)throw new Error(Xe);var ot=$e.points[Me];if(!ot)throw new Error(Xe);for(var st=this.options.radius/(this.options.extent*Math.pow(2,Re-1)),yt=$e.within(ot.x,ot.y,st),wt=[],Vt=0,gr=yt;Vt<gr.length;Vt+=1){var wr=gr[Vt],Lr=$e.points[wr];Lr.parentId===we&&wt.push(Lr.numPoints?ge(Lr):this.points[Lr.index])}if(wt.length===0)throw new Error(Xe);return wt},ue.prototype.getLeaves=function(we,Me,Re){Me=Me||10,Re=Re||0;var Xe=[];return this._appendLeaves(Xe,we,Me,Re,0),Xe},ue.prototype.getTile=function(we,Me,Re){var Xe=this.trees[this._limitZoom(we)],$e=Math.pow(2,we),ot=this.options,st=ot.extent,yt=ot.radius,wt=yt/st,Vt=(Re-wt)/$e,gr=(Re+1+wt)/$e,wr={features:[]};return this._addTileFeatures(Xe.range((Me-wt)/$e,Vt,(Me+1+wt)/$e,gr),Xe.points,Me,Re,$e,wr),Me===0&&this._addTileFeatures(Xe.range(1-wt/$e,Vt,1,gr),Xe.points,$e,Re,$e,wr),Me===$e-1&&this._addTileFeatures(Xe.range(0,Vt,wt/$e,gr),Xe.points,-1,Re,$e,wr),wr.features.length?wr:null},ue.prototype.getClusterExpansionZoom=function(we){for(var Me=this._getOriginZoom(we)-1;Me<=this.options.maxZoom;){var Re=this.getChildren(we);if(Me++,Re.length!==1)break;we=Re[0].properties.cluster_id}return Me},ue.prototype._appendLeaves=function(we,Me,Re,Xe,$e){for(var ot=this.getChildren(Me),st=0,yt=ot;st<yt.length;st+=1){var wt=yt[st],Vt=wt.properties;if(Vt&&Vt.cluster?$e+Vt.point_count<=Xe?$e+=Vt.point_count:$e=this._appendLeaves(we,Vt.cluster_id,Re,Xe,$e):$e<Xe?$e++:we.push(wt),we.length===Re)break}return $e},ue.prototype._addTileFeatures=function(we,Me,Re,Xe,$e,ot){for(var st=0,yt=we;st<yt.length;st+=1){var wt=yt[st],Vt=Me[wt],gr=Vt.numPoints,wr={type:1,geometry:[[Math.round(this.options.extent*(Vt.x*$e-Re)),Math.round(this.options.extent*(Vt.y*$e-Xe))]],tags:gr?me(Vt):this.points[Vt.index].properties},Lr=void 0;gr?Lr=Vt.id:this.options.generateId?Lr=Vt.index:this.points[Vt.index].id&&(Lr=this.points[Vt.index].id),Lr!==void 0&&(wr.id=Lr),ot.features.push(wr)}},ue.prototype._limitZoom=function(we){return Math.max(this.options.minZoom,Math.min(we,this.options.maxZoom+1))},ue.prototype._cluster=function(we,Me){for(var Re=[],Xe=this.options,$e=Xe.radius,ot=Xe.extent,st=Xe.reduce,yt=$e/(ot*Math.pow(2,Me)),wt=0;wt<we.length;wt++){var Vt=we[wt];if(!(Vt.zoom<=Me)){Vt.zoom=Me;for(var gr=this.trees[Me+1],wr=gr.within(Vt.x,Vt.y,yt),Lr=Vt.numPoints||1,fr=Vt.x*Lr,Fr=Vt.y*Lr,nn=st&&Lr>1?this._map(Vt,!0):null,yr=(wt<<5)+(Me+1)+this.points.length,_r=0,dn=wr;_r<dn.length;_r+=1){var Yr=dn[_r],Ar=gr.points[Yr];if(!(Ar.zoom<=Me)){Ar.zoom=Me;var an=Ar.numPoints||1;fr+=Ar.x*an,Fr+=Ar.y*an,Lr+=an,Ar.parentId=yr,st&&(nn||(nn=this._map(Vt,!0)),st(nn,this._map(Ar)))}}Lr===1?Re.push(Vt):(Vt.parentId=yr,Re.push(xe(fr/Lr,Fr/Lr,yr,Lr,nn)))}}return Re},ue.prototype._getOriginId=function(we){return we-this.points.length>>5},ue.prototype._getOriginZoom=function(we){return(we-this.points.length)%32},ue.prototype._map=function(we,Me){if(we.numPoints)return Me?Ge({},we.properties):we.properties;var Re=this.points[we.index].properties,Xe=this.options.map(Re);return Me&&Xe===Re?Ge({},Xe):Xe};function xe(et,we,Me,Re,Xe){return{x:et,y:we,zoom:1/0,id:Me,parentId:-1,numPoints:Re,properties:Xe}}function he(et,we){var Me=et.geometry.coordinates,Re=Me[0],Xe=Me[1];return{x:ke(Re),y:Ae(Xe),zoom:1/0,index:we,parentId:-1}}function ge(et){return{type:"Feature",id:et.id,properties:me(et),geometry:{type:"Point",coordinates:[Ne(et.x),He(et.y)]}}}function me(et){var we=et.numPoints,Me=we>=1e4?Math.round(we/1e3)+"k":we>=1e3?Math.round(we/100)/10+"k":we;return Ge(Ge({},et.properties),{cluster:!0,cluster_id:et.id,point_count:we,point_count_abbreviated:Me})}function ke(et){return et/360+.5}function Ae(et){var we=Math.sin(et*Math.PI/180),Me=.5-.25*Math.log((1+we)/(1-we))/Math.PI;return Me<0?0:Me>1?1:Me}function Ne(et){return(et-.5)*360}function He(et){var we=(180-et*360)*Math.PI/180;return 360*Math.atan(Math.exp(we))/Math.PI-90}function Ge(et,we){for(var Me in we)et[Me]=we[Me];return et}function _e(et){return et.x}function De(et){return et.y}function Ye(et,we,Me,Re){for(var Xe=Re,$e=Me-we>>1,ot=Me-we,st,yt=et[we],wt=et[we+1],Vt=et[Me],gr=et[Me+1],wr=we+3;wr<Me;wr+=3){var Lr=qe(et[wr],et[wr+1],yt,wt,Vt,gr);if(Lr>Xe)st=wr,Xe=Lr;else if(Lr===Xe){var fr=Math.abs(wr-$e);fr<ot&&(st=wr,ot=fr)}}Xe>Re&&(st-we>3&&Ye(et,we,st,Re),et[st+2]=Xe,Me-st>3&&Ye(et,st,Me,Re))}function qe(et,we,Me,Re,Xe,$e){var ot=Xe-Me,st=$e-Re;if(ot!==0||st!==0){var yt=((et-Me)*ot+(we-Re)*st)/(ot*ot+st*st);yt>1?(Me=Xe,Re=$e):yt>0&&(Me+=ot*yt,Re+=st*yt)}return ot=et-Me,st=we-Re,ot*ot+st*st}function Ue(et,we,Me,Re){var Xe={id:typeof et=="undefined"?null:et,type:we,geometry:Me,tags:Re,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return Ie(Xe),Xe}function Ie(et){var we=et.geometry,Me=et.type;if(Me==="Point"||Me==="MultiPoint"||Me==="LineString")Ve(et,we);else if(Me==="Polygon"||Me==="MultiLineString")for(var Re=0;Re<we.length;Re++)Ve(et,we[Re]);else if(Me==="MultiPolygon")for(Re=0;Re<we.length;Re++)for(var Xe=0;Xe<we[Re].length;Xe++)Ve(et,we[Re][Xe])}function Ve(et,we){for(var Me=0;Me<we.length;Me+=3)et.minX=Math.min(et.minX,we[Me]),et.minY=Math.min(et.minY,we[Me+1]),et.maxX=Math.max(et.maxX,we[Me]),et.maxY=Math.max(et.maxY,we[Me+1])}function dt(et,we){var Me=[];if(et.type==="FeatureCollection")for(var Re=0;Re<et.features.length;Re++)Dt(Me,et.features[Re],we,Re);else et.type==="Feature"?Dt(Me,et,we):Dt(Me,{geometry:et},we);return Me}function Dt(et,we,Me,Re){if(!!we.geometry){var Xe=we.geometry.coordinates,$e=we.geometry.type,ot=Math.pow(Me.tolerance/((1<<Me.maxZoom)*Me.extent),2),st=[],yt=we.id;if(Me.promoteId?yt=we.properties[Me.promoteId]:Me.generateId&&(yt=Re||0),$e==="Point")Yt(Xe,st);else if($e==="MultiPoint")for(var wt=0;wt<Xe.length;wt++)Yt(Xe[wt],st);else if($e==="LineString")kt(Xe,st,ot,!1);else if($e==="MultiLineString")if(Me.lineMetrics){for(wt=0;wt<Xe.length;wt++)st=[],kt(Xe[wt],st,ot,!1),et.push(Ue(yt,"LineString",st,we.properties));return}else Ft(Xe,st,ot,!1);else if($e==="Polygon")Ft(Xe,st,ot,!0);else if($e==="MultiPolygon")for(wt=0;wt<Xe.length;wt++){var Vt=[];Ft(Xe[wt],Vt,ot,!0),st.push(Vt)}else if($e==="GeometryCollection"){for(wt=0;wt<we.geometry.geometries.length;wt++)Dt(et,{id:yt,geometry:we.geometry.geometries[wt],properties:we.properties},Me,Re);return}else throw new Error("Input data is not a valid GeoJSON object.");et.push(Ue(yt,$e,st,we.properties))}}function Yt(et,we){we.push(Nt(et[0])),we.push(Lt(et[1])),we.push(0)}function kt(et,we,Me,Re){for(var Xe,$e,ot=0,st=0;st<et.length;st++){var yt=Nt(et[st][0]),wt=Lt(et[st][1]);we.push(yt),we.push(wt),we.push(0),st>0&&(Re?ot+=(Xe*wt-yt*$e)/2:ot+=Math.sqrt(Math.pow(yt-Xe,2)+Math.pow(wt-$e,2))),Xe=yt,$e=wt}var Vt=we.length-3;we[2]=1,Ye(we,0,Vt,Me),we[Vt+2]=1,we.size=Math.abs(ot),we.start=0,we.end=we.size}function Ft(et,we,Me,Re){for(var Xe=0;Xe<et.length;Xe++){var $e=[];kt(et[Xe],$e,Me,Re),we.push($e)}}function Nt(et){return et/360+.5}function Lt(et){var we=Math.sin(et*Math.PI/180),Me=.5-.25*Math.log((1+we)/(1-we))/Math.PI;return Me<0?0:Me>1?1:Me}function St(et,we,Me,Re,Xe,$e,ot,st){if(Me/=we,Re/=we,$e>=Me&&ot<Re)return et;if(ot<Me||$e>=Re)return null;for(var yt=[],wt=0;wt<et.length;wt++){var Vt=et[wt],gr=Vt.geometry,wr=Vt.type,Lr=Xe===0?Vt.minX:Vt.minY,fr=Xe===0?Vt.maxX:Vt.maxY;if(Lr>=Me&&fr<Re){yt.push(Vt);continue}else if(fr<Me||Lr>=Re)continue;var Fr=[];if(wr==="Point"||wr==="MultiPoint")it(gr,Fr,Me,Re,Xe);else if(wr==="LineString")ht(gr,Fr,Me,Re,Xe,!1,st.lineMetrics);else if(wr==="MultiLineString")Ce(gr,Fr,Me,Re,Xe,!1);else if(wr==="Polygon")Ce(gr,Fr,Me,Re,Xe,!0);else if(wr==="MultiPolygon")for(var nn=0;nn<gr.length;nn++){var yr=[];Ce(gr[nn],yr,Me,Re,Xe,!0),yr.length&&Fr.push(yr)}if(Fr.length){if(st.lineMetrics&&wr==="LineString"){for(nn=0;nn<Fr.length;nn++)yt.push(Ue(Vt.id,wr,Fr[nn],Vt.tags));continue}(wr==="LineString"||wr==="MultiLineString")&&(Fr.length===1?(wr="LineString",Fr=Fr[0]):wr="MultiLineString"),(wr==="Point"||wr==="MultiPoint")&&(wr=Fr.length===3?"Point":"MultiPoint"),yt.push(Ue(Vt.id,wr,Fr,Vt.tags))}}return yt.length?yt:null}function it(et,we,Me,Re,Xe){for(var $e=0;$e<et.length;$e+=3){var ot=et[$e+Xe];ot>=Me&&ot<=Re&&(we.push(et[$e]),we.push(et[$e+1]),we.push(et[$e+2]))}}function ht(et,we,Me,Re,Xe,$e,ot){for(var st=Qe(et),yt=Xe===0?rt:ut,wt=et.start,Vt,gr,wr=0;wr<et.length-3;wr+=3){var Lr=et[wr],fr=et[wr+1],Fr=et[wr+2],nn=et[wr+3],yr=et[wr+4],_r=Xe===0?Lr:fr,dn=Xe===0?nn:yr,Yr=!1;ot&&(Vt=Math.sqrt(Math.pow(Lr-nn,2)+Math.pow(fr-yr,2))),_r<Me?dn>Me&&(gr=yt(st,Lr,fr,nn,yr,Me),ot&&(st.start=wt+Vt*gr)):_r>Re?dn<Re&&(gr=yt(st,Lr,fr,nn,yr,Re),ot&&(st.start=wt+Vt*gr)):je(st,Lr,fr,Fr),dn<Me&&_r>=Me&&(gr=yt(st,Lr,fr,nn,yr,Me),Yr=!0),dn>Re&&_r<=Re&&(gr=yt(st,Lr,fr,nn,yr,Re),Yr=!0),!$e&&Yr&&(ot&&(st.end=wt+Vt*gr),we.push(st),st=Qe(et)),ot&&(wt+=Vt)}var Ar=et.length-3;Lr=et[Ar],fr=et[Ar+1],Fr=et[Ar+2],_r=Xe===0?Lr:fr,_r>=Me&&_r<=Re&&je(st,Lr,fr,Fr),Ar=st.length-3,$e&&Ar>=3&&(st[Ar]!==st[0]||st[Ar+1]!==st[1])&&je(st,st[0],st[1],st[2]),st.length&&we.push(st)}function Qe(et){var we=[];return we.size=et.size,we.start=et.start,we.end=et.end,we}function Ce(et,we,Me,Re,Xe,$e){for(var ot=0;ot<et.length;ot++)ht(et[ot],we,Me,Re,Xe,$e,!1)}function je(et,we,Me,Re){et.push(we),et.push(Me),et.push(Re)}function rt(et,we,Me,Re,Xe,$e){var ot=($e-we)/(Re-we);return et.push($e),et.push(Me+(Xe-Me)*ot),et.push(1),ot}function ut(et,we,Me,Re,Xe,$e){var ot=($e-Me)/(Xe-Me);return et.push(we+(Re-we)*ot),et.push($e),et.push(1),ot}function Pt(et,we){var Me=we.buffer/we.extent,Re=et,Xe=St(et,1,-1-Me,Me,0,-1,2,we),$e=St(et,1,1-Me,2+Me,0,-1,2,we);return(Xe||$e)&&(Re=St(et,1,-Me,1+Me,0,-1,2,we)||[],Xe&&(Re=Tt(Xe,1).concat(Re)),$e&&(Re=Re.concat(Tt($e,-1)))),Re}function Tt(et,we){for(var Me=[],Re=0;Re<et.length;Re++){var Xe=et[Re],$e=Xe.type,ot;if($e==="Point"||$e==="MultiPoint"||$e==="LineString")ot=Ot(Xe.geometry,we);else if($e==="MultiLineString"||$e==="Polygon"){ot=[];for(var st=0;st<Xe.geometry.length;st++)ot.push(Ot(Xe.geometry[st],we))}else if($e==="MultiPolygon")for(ot=[],st=0;st<Xe.geometry.length;st++){for(var yt=[],wt=0;wt<Xe.geometry[st].length;wt++)yt.push(Ot(Xe.geometry[st][wt],we));ot.push(yt)}Me.push(Ue(Xe.id,$e,ot,Xe.tags))}return Me}function Ot(et,we){var Me=[];Me.size=et.size,et.start!==void 0&&(Me.start=et.start,Me.end=et.end);for(var Re=0;Re<et.length;Re+=3)Me.push(et[Re]+we,et[Re+1],et[Re+2]);return Me}function Kt(et,we){if(et.transformed)return et;var Me=1<<et.z,Re=et.x,Xe=et.y,$e,ot,st;for($e=0;$e<et.features.length;$e++){var yt=et.features[$e],wt=yt.geometry,Vt=yt.type;if(yt.geometry=[],Vt===1)for(ot=0;ot<wt.length;ot+=2)yt.geometry.push(Bt(wt[ot],wt[ot+1],we,Me,Re,Xe));else for(ot=0;ot<wt.length;ot++){var gr=[];for(st=0;st<wt[ot].length;st+=2)gr.push(Bt(wt[ot][st],wt[ot][st+1],we,Me,Re,Xe));yt.geometry.push(gr)}}return et.transformed=!0,et}function Bt(et,we,Me,Re,Xe,$e){return[Math.round(Me*(et*Re-Xe)),Math.round(Me*(we*Re-$e))]}function Zt(et,we,Me,Re,Xe){for(var $e=we===Xe.maxZoom?0:Xe.tolerance/((1<<we)*Xe.extent),ot={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Me,y:Re,z:we,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},st=0;st<et.length;st++){ot.numFeatures++,Je(ot,et[st],$e,Xe);var yt=et[st].minX,wt=et[st].minY,Vt=et[st].maxX,gr=et[st].maxY;yt<ot.minX&&(ot.minX=yt),wt<ot.minY&&(ot.minY=wt),Vt>ot.maxX&&(ot.maxX=Vt),gr>ot.maxY&&(ot.maxY=gr)}return ot}function Je(et,we,Me,Re){var Xe=we.geometry,$e=we.type,ot=[];if($e==="Point"||$e==="MultiPoint")for(var st=0;st<Xe.length;st+=3)ot.push(Xe[st]),ot.push(Xe[st+1]),et.numPoints++,et.numSimplified++;else if($e==="LineString")pt(ot,Xe,et,Me,!1,!1);else if($e==="MultiLineString"||$e==="Polygon")for(st=0;st<Xe.length;st++)pt(ot,Xe[st],et,Me,$e==="Polygon",st===0);else if($e==="MultiPolygon")for(var yt=0;yt<Xe.length;yt++){var wt=Xe[yt];for(st=0;st<wt.length;st++)pt(ot,wt[st],et,Me,!0,st===0)}if(ot.length){var Vt=we.tags||null;if($e==="LineString"&&Re.lineMetrics){Vt={};for(var gr in we.tags)Vt[gr]=we.tags[gr];Vt.mapbox_clip_start=Xe.start/Xe.size,Vt.mapbox_clip_end=Xe.end/Xe.size}var wr={geometry:ot,type:$e==="Polygon"||$e==="MultiPolygon"?3:$e==="LineString"||$e==="MultiLineString"?2:1,tags:Vt};we.id!==null&&(wr.id=we.id),et.features.push(wr)}}function pt(et,we,Me,Re,Xe,$e){var ot=Re*Re;if(Re>0&&we.size<(Xe?ot:Re)){Me.numPoints+=we.length/3;return}for(var st=[],yt=0;yt<we.length;yt+=3)(Re===0||we[yt+2]>ot)&&(Me.numSimplified++,st.push(we[yt]),st.push(we[yt+1])),Me.numPoints++;Xe&&Et(st,$e),et.push(st)}function Et(et,we){for(var Me=0,Re=0,Xe=et.length,$e=Xe-2;Re<Xe;$e=Re,Re+=2)Me+=(et[Re]-et[$e])*(et[Re+1]+et[$e+1]);if(Me>0===we)for(Re=0,Xe=et.length;Re<Xe/2;Re+=2){var ot=et[Re],st=et[Re+1];et[Re]=et[Xe-2-Re],et[Re+1]=et[Xe-1-Re],et[Xe-2-Re]=ot,et[Xe-1-Re]=st}}function ar(et,we){return new vr(et,we)}function vr(et,we){we=this.options=dr(Object.create(this.options),we);var Me=we.debug;if(Me&&console.time("preprocess data"),we.maxZoom<0||we.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(we.promoteId&&we.generateId)throw new Error("promoteId and generateId cannot be used together.");var Re=dt(et,we);this.tiles={},this.tileCoords=[],Me&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",we.indexMaxZoom,we.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Re=Pt(Re,we),Re.length&&this.splitTile(Re,0,0,0),Me&&(Re.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}vr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},vr.prototype.splitTile=function(et,we,Me,Re,Xe,$e,ot){for(var st=[et,we,Me,Re],yt=this.options,wt=yt.debug;st.length;){Re=st.pop(),Me=st.pop(),we=st.pop(),et=st.pop();var Vt=1<<we,gr=ir(we,Me,Re),wr=this.tiles[gr];if(!wr&&(wt>1&&console.time("creation"),wr=this.tiles[gr]=Zt(et,we,Me,Re,yt),this.tileCoords.push({z:we,x:Me,y:Re}),wt)){wt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",we,Me,Re,wr.numFeatures,wr.numPoints,wr.numSimplified),console.timeEnd("creation"));var Lr="z"+we;this.stats[Lr]=(this.stats[Lr]||0)+1,this.total++}if(wr.source=et,Xe){if(we===yt.maxZoom||we===Xe)continue;var fr=1<<Xe-we;if(Me!==Math.floor($e/fr)||Re!==Math.floor(ot/fr))continue}else if(we===yt.indexMaxZoom||wr.numPoints<=yt.indexMaxPoints)continue;if(wr.source=null,et.length!==0){wt>1&&console.time("clipping");var Fr=.5*yt.buffer/yt.extent,nn=.5-Fr,yr=.5+Fr,_r=1+Fr,dn,Yr,Ar,an,rn,Zr;dn=Yr=Ar=an=null,rn=St(et,Vt,Me-Fr,Me+yr,0,wr.minX,wr.maxX,yt),Zr=St(et,Vt,Me+nn,Me+_r,0,wr.minX,wr.maxX,yt),et=null,rn&&(dn=St(rn,Vt,Re-Fr,Re+yr,1,wr.minY,wr.maxY,yt),Yr=St(rn,Vt,Re+nn,Re+_r,1,wr.minY,wr.maxY,yt),rn=null),Zr&&(Ar=St(Zr,Vt,Re-Fr,Re+yr,1,wr.minY,wr.maxY,yt),an=St(Zr,Vt,Re+nn,Re+_r,1,wr.minY,wr.maxY,yt),Zr=null),wt>1&&console.timeEnd("clipping"),st.push(dn||[],we+1,Me*2,Re*2),st.push(Yr||[],we+1,Me*2,Re*2+1),st.push(Ar||[],we+1,Me*2+1,Re*2),st.push(an||[],we+1,Me*2+1,Re*2+1)}}},vr.prototype.getTile=function(et,we,Me){var Re=this.options,Xe=Re.extent,$e=Re.debug;if(et<0||et>24)return null;var ot=1<<et;we=(we%ot+ot)%ot;var st=ir(et,we,Me);if(this.tiles[st])return Kt(this.tiles[st],Xe);$e>1&&console.log("drilling down to z%d-%d-%d",et,we,Me);for(var yt=et,wt=we,Vt=Me,gr;!gr&&yt>0;)yt--,wt=Math.floor(wt/2),Vt=Math.floor(Vt/2),gr=this.tiles[ir(yt,wt,Vt)];return!gr||!gr.source?null:($e>1&&console.log("found parent tile z%d-%d-%d",yt,wt,Vt),$e>1&&console.time("drilling down"),this.splitTile(gr.source,yt,wt,Vt,et,we,Me),$e>1&&console.timeEnd("drilling down"),this.tiles[st]?Kt(this.tiles[st],Xe):null)};function ir(et,we,Me){return((1<<et)*Me+we)*32+et}function dr(et,we){for(var Me in we)et[Me]=we[Me];return et}function Pr(et,we){var Me=et.tileID.canonical;if(!this._geoJSONIndex)return we(null,null);var Re=this._geoJSONIndex.getTile(Me.z,Me.x,Me.y);if(!Re)return we(null,null);var Xe=new _(Re.features),$e=P(Xe);($e.byteOffset!==0||$e.byteLength!==$e.buffer.byteLength)&&($e=new Uint8Array($e)),we(null,{vectorTile:Xe,rawData:$e.buffer})}var Sr=function(et){function we(Me,Re,Xe,$e){et.call(this,Me,Re,Xe,Pr),$e&&(this.loadGeoJSON=$e)}return et&&(we.__proto__=et),we.prototype=Object.create(et&&et.prototype),we.prototype.constructor=we,we.prototype.loadData=function(Re,Xe){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Xe,this._pendingLoadDataParams=Re,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},we.prototype._loadData=function(){var Re=this;if(!(!this._pendingCallback||!this._pendingLoadDataParams)){var Xe=this._pendingCallback,$e=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var ot=$e&&$e.request&&$e.request.collectResourceTiming?new e.RequestPerformance($e.request):!1;this.loadGeoJSON($e,function(st,yt){if(st||!yt)return Xe(st);if(typeof yt!="object")return Xe(new Error("Input data given to '"+$e.source+"' is not a valid GeoJSON object."));p(yt,!0);try{Re._geoJSONIndex=$e.cluster?new ue(tr($e)).load(yt.features):ar(yt,$e.geojsonVtOptions)}catch(gr){return Xe(gr)}Re.loaded={};var wt={};if(ot){var Vt=ot.finish();Vt&&(wt.resourceTiming={},wt.resourceTiming[$e.source]=JSON.parse(JSON.stringify(Vt)))}Xe(null,wt)})}},we.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},we.prototype.reloadTile=function(Re,Xe){var $e=this.loaded,ot=Re.uid;return $e&&$e[ot]?et.prototype.reloadTile.call(this,Re,Xe):this.loadTile(Re,Xe)},we.prototype.loadGeoJSON=function(Re,Xe){if(Re.request)e.getJSON(Re.request,Xe);else if(typeof Re.data=="string")try{return Xe(null,JSON.parse(Re.data))}catch{return Xe(new Error("Input data given to '"+Re.source+"' is not a valid GeoJSON object."))}else return Xe(new Error("Input data given to '"+Re.source+"' is not a valid GeoJSON object."))},we.prototype.removeSource=function(Re,Xe){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Xe()},we.prototype.getClusterExpansionZoom=function(Re,Xe){try{Xe(null,this._geoJSONIndex.getClusterExpansionZoom(Re.clusterId))}catch($e){Xe($e)}},we.prototype.getClusterChildren=function(Re,Xe){try{Xe(null,this._geoJSONIndex.getChildren(Re.clusterId))}catch($e){Xe($e)}},we.prototype.getClusterLeaves=function(Re,Xe){try{Xe(null,this._geoJSONIndex.getLeaves(Re.clusterId,Re.limit,Re.offset))}catch($e){Xe($e)}},we}(g);function tr(et){var we=et.superclusterOptions,Me=et.clusterProperties;if(!Me||!we)return we;for(var Re={},Xe={},$e={accumulated:null,zoom:0},ot={properties:null},st=Object.keys(Me),yt=0,wt=st;yt<wt.length;yt+=1){var Vt=wt[yt],gr=Me[Vt],wr=gr[0],Lr=gr[1],fr=e.createExpression(Lr),Fr=e.createExpression(typeof wr=="string"?[wr,["accumulated"],["get",Vt]]:wr);Re[Vt]=fr.value,Xe[Vt]=Fr.value}return we.map=function(nn){ot.properties=nn;for(var yr={},_r=0,dn=st;_r<dn.length;_r+=1){var Yr=dn[_r];yr[Yr]=Re[Yr].evaluate($e,ot)}return yr},we.reduce=function(nn,yr){ot.properties=yr;for(var _r=0,dn=st;_r<dn.length;_r+=1){var Yr=dn[_r];$e.accumulated=nn[Yr],nn[Yr]=Xe[Yr].evaluate($e,ot)}},we}var Nr=function(we){var Me=this;this.self=we,this.actor=new e.Actor(we,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:g,geojson:Sr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Re,Xe){if(Me.workerSourceTypes[Re])throw new Error('Worker source with name "'+Re+'" already registered.');Me.workerSourceTypes[Re]=Xe},this.self.registerRTLTextPlugin=function(Re){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=Re.applyArabicShaping,e.plugin.processBidirectionalText=Re.processBidirectionalText,e.plugin.processStyledBidirectionalText=Re.processStyledBidirectionalText}};return Nr.prototype.setReferrer=function(we,Me){this.referrer=Me},Nr.prototype.setImages=function(we,Me,Re){this.availableImages[we]=Me;for(var Xe in this.workerSources[we]){var $e=this.workerSources[we][Xe];for(var ot in $e)$e[ot].availableImages=Me}Re()},Nr.prototype.setLayers=function(we,Me,Re){this.getLayerIndex(we).replace(Me),Re()},Nr.prototype.updateLayers=function(we,Me,Re){this.getLayerIndex(we).update(Me.layers,Me.removedIds),Re()},Nr.prototype.loadTile=function(we,Me,Re){this.getWorkerSource(we,Me.type,Me.source).loadTile(Me,Re)},Nr.prototype.loadDEMTile=function(we,Me,Re){this.getDEMWorkerSource(we,Me.source).loadTile(Me,Re)},Nr.prototype.reloadTile=function(we,Me,Re){this.getWorkerSource(we,Me.type,Me.source).reloadTile(Me,Re)},Nr.prototype.abortTile=function(we,Me,Re){this.getWorkerSource(we,Me.type,Me.source).abortTile(Me,Re)},Nr.prototype.removeTile=function(we,Me,Re){this.getWorkerSource(we,Me.type,Me.source).removeTile(Me,Re)},Nr.prototype.removeDEMTile=function(we,Me){this.getDEMWorkerSource(we,Me.source).removeTile(Me)},Nr.prototype.removeSource=function(we,Me,Re){if(!(!this.workerSources[we]||!this.workerSources[we][Me.type]||!this.workerSources[we][Me.type][Me.source])){var Xe=this.workerSources[we][Me.type][Me.source];delete this.workerSources[we][Me.type][Me.source],Xe.removeSource!==void 0?Xe.removeSource(Me,Re):Re()}},Nr.prototype.loadWorkerSource=function(we,Me,Re){try{this.self.importScripts(Me.url),Re()}catch(Xe){Re(Xe.toString())}},Nr.prototype.syncRTLPluginState=function(we,Me,Re){try{e.plugin.setState(Me);var Xe=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&Xe!=null){this.self.importScripts(Xe);var $e=e.plugin.isParsed(),ot=$e?void 0:new Error("RTL Text Plugin failed to import scripts from "+Xe);Re(ot,$e)}}catch(st){Re(st.toString())}},Nr.prototype.getAvailableImages=function(we){var Me=this.availableImages[we];return Me||(Me=[]),Me},Nr.prototype.getLayerIndex=function(we){var Me=this.layerIndexes[we];return Me||(Me=this.layerIndexes[we]=new n),Me},Nr.prototype.getWorkerSource=function(we,Me,Re){var Xe=this;if(this.workerSources[we]||(this.workerSources[we]={}),this.workerSources[we][Me]||(this.workerSources[we][Me]={}),!this.workerSources[we][Me][Re]){var $e={send:function(ot,st,yt){Xe.actor.send(ot,st,yt,we)}};this.workerSources[we][Me][Re]=new this.workerSourceTypes[Me]($e,this.getLayerIndex(we),this.getAvailableImages(we))}return this.workerSources[we][Me][Re]},Nr.prototype.getDEMWorkerSource=function(we,Me){return this.demWorkerSources[we]||(this.demWorkerSources[we]={}),this.demWorkerSources[we][Me]||(this.demWorkerSources[we][Me]=new y),this.demWorkerSources[we][Me]},Nr.prototype.enforceCacheSizeLimit=function(we,Me){e.enforceCacheSizeLimit(Me)},typeof WorkerGlobalScope!="undefined"&&typeof e.window!="undefined"&&e.window instanceof WorkerGlobalScope&&(e.window.worker=new Nr(e.window)),Nr}),w(["./shared"],function(e){var o=e.createCommonjsModule(function(ve){ve.exports?ve.exports=Y:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=Y,window.mapboxgl.notSupportedReason=de);function Y(Br){return!de(Br)}function de(Br){if(!$())return"not a browser";if(!ye())return"insufficent Array support";if(!Ee())return"insufficient Function support";if(!Pe())return"insufficient Object support";if(!Ze())return"insufficient JSON support";if(!ft())return"insufficient worker support";if(!Mt())return"insufficient Uint8ClampedArray support";if(!Ht())return"insufficient ArrayBuffer support";if(!$t())return"insufficient Canvas/getImageData support";if(!Tr(Br&&Br.failIfMajorPerformanceCaveat))return"insufficient WebGL support"}function $(){return typeof window!="undefined"&&typeof document!="undefined"}function ye(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function Ee(){return Function.prototype&&Function.prototype.bind}function Pe(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function Ze(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function ft(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Br=new Blob([""],{type:"text/javascript"}),Jr=URL.createObjectURL(Br),hn,kn;try{kn=new Worker(Jr),hn=!0}catch{hn=!1}return kn&&kn.terminate(),URL.revokeObjectURL(Jr),hn}function Mt(){return"Uint8ClampedArray"in window}function Ht(){return ArrayBuffer.isView}function $t(){var Br=document.createElement("canvas");Br.width=Br.height=1;var Jr=Br.getContext("2d");if(!Jr)return!1;var hn=Jr.getImageData(0,0,1,1);return hn&&hn.width===Br.width}var or={};function Tr(Br){return or[Br]===void 0&&(or[Br]=Hr(Br)),or[Br]}Y.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};function Ur(Br){var Jr=document.createElement("canvas"),hn=Object.create(Y.webGLContextAttributes);return hn.failIfMajorPerformanceCaveat=Br,Jr.probablySupportsContext?Jr.probablySupportsContext("webgl",hn)||Jr.probablySupportsContext("experimental-webgl",hn):Jr.supportsContext?Jr.supportsContext("webgl",hn)||Jr.supportsContext("experimental-webgl",hn):Jr.getContext("webgl",hn)||Jr.getContext("experimental-webgl",hn)}function Hr(Br){var Jr=Ur(Br);if(!Jr)return!1;var hn=Jr.createShader(Jr.VERTEX_SHADER);return!hn||Jr.isContextLost()?!1:(Jr.shaderSource(hn,"void main() {}"),Jr.compileShader(hn),Jr.getShaderParameter(hn,Jr.COMPILE_STATUS)===!0)}}),a={};a.create=function(ve,Y,de){var $=e.window.document.createElement(ve);return Y!==void 0&&($.className=Y),de&&de.appendChild($),$},a.createNS=function(ve,Y){var de=e.window.document.createElementNS(ve,Y);return de};var r=e.window.document.documentElement.style;function n(ve){if(!r)return ve[0];for(var Y=0;Y<ve.length;Y++)if(ve[Y]in r)return ve[Y];return ve[0]}var c=n(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),s;a.disableDrag=function(){r&&c&&(s=r[c],r[c]="none")},a.enableDrag=function(){r&&c&&(r[c]=s)};var i=n(["transform","WebkitTransform"]);a.setTransform=function(ve,Y){ve.style[i]=Y};var v=!1;try{var u=Object.defineProperty({},"passive",{get:function(){v=!0}});e.window.addEventListener("test",u,u),e.window.removeEventListener("test",u,u)}catch{v=!1}a.addEventListener=function(ve,Y,de,$){$===void 0&&($={}),"passive"in $&&v?ve.addEventListener(Y,de,$):ve.addEventListener(Y,de,$.capture)},a.removeEventListener=function(ve,Y,de,$){$===void 0&&($={}),"passive"in $&&v?ve.removeEventListener(Y,de,$):ve.removeEventListener(Y,de,$.capture)};var g=function(ve){ve.preventDefault(),ve.stopPropagation(),e.window.removeEventListener("click",g,!0)};a.suppressClick=function(){e.window.addEventListener("click",g,!0),e.window.setTimeout(function(){e.window.removeEventListener("click",g,!0)},0)},a.mousePos=function(ve,Y){var de=ve.getBoundingClientRect();return new e.Point(Y.clientX-de.left-ve.clientLeft,Y.clientY-de.top-ve.clientTop)},a.touchPos=function(ve,Y){for(var de=ve.getBoundingClientRect(),$=[],ye=0;ye<Y.length;ye++)$.push(new e.Point(Y[ye].clientX-de.left-ve.clientLeft,Y[ye].clientY-de.top-ve.clientTop));return $},a.mouseButton=function(ve){return typeof e.window.InstallTrigger!="undefined"&&ve.button===2&&ve.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:ve.button},a.remove=function(ve){ve.parentNode&&ve.parentNode.removeChild(ve)};function h(ve,Y,de){var $,ye,Ee,Pe=e.browser.devicePixelRatio>1?"@2x":"",Ze=e.getJSON(Y.transformRequest(Y.normalizeSpriteURL(ve,Pe,".json"),e.ResourceType.SpriteJSON),function(Ht,$t){Ze=null,Ee||(Ee=Ht,$=$t,Mt())}),ft=e.getImage(Y.transformRequest(Y.normalizeSpriteURL(ve,Pe,".png"),e.ResourceType.SpriteImage),function(Ht,$t){ft=null,Ee||(Ee=Ht,ye=$t,Mt())});function Mt(){if(Ee)de(Ee);else if($&&ye){var Ht=e.browser.getImageData(ye),$t={};for(var or in $){var Tr=$[or],Ur=Tr.width,Hr=Tr.height,Br=Tr.x,Jr=Tr.y,hn=Tr.sdf,kn=Tr.pixelRatio,Nn=Tr.stretchX,Kn=Tr.stretchY,qn=Tr.content,Qn=new e.RGBAImage({width:Ur,height:Hr});e.RGBAImage.copy(Ht,Qn,{x:Br,y:Jr},{x:0,y:0},{width:Ur,height:Hr}),$t[or]={data:Qn,pixelRatio:kn,sdf:hn,stretchX:Nn,stretchY:Kn,content:qn}}de(null,$t)}}return{cancel:function(){Ze&&(Ze.cancel(),Ze=null),ft&&(ft.cancel(),ft=null)}}}function y(ve){var Y=ve.userImage;if(Y&&Y.render){var de=Y.render();if(de)return ve.data.replace(new Uint8Array(Y.data.buffer)),!0}return!1}var p=1,A=function(ve){function Y(){ve.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.isLoaded=function(){return this.loaded},Y.prototype.setLoaded=function($){if(this.loaded!==$&&(this.loaded=$,$)){for(var ye=0,Ee=this.requestors;ye<Ee.length;ye+=1){var Pe=Ee[ye],Ze=Pe.ids,ft=Pe.callback;this._notify(Ze,ft)}this.requestors=[]}},Y.prototype.getImage=function($){return this.images[$]},Y.prototype.addImage=function($,ye){this._validate($,ye)&&(this.images[$]=ye)},Y.prototype._validate=function($,ye){var Ee=!0;return this._validateStretch(ye.stretchX,ye.data&&ye.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'+$+'" has invalid "stretchX" value'))),Ee=!1),this._validateStretch(ye.stretchY,ye.data&&ye.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'+$+'" has invalid "stretchY" value'))),Ee=!1),this._validateContent(ye.content,ye)||(this.fire(new e.ErrorEvent(new Error('Image "'+$+'" has invalid "content" value'))),Ee=!1),Ee},Y.prototype._validateStretch=function($,ye){if(!$)return!0;for(var Ee=0,Pe=0,Ze=$;Pe<Ze.length;Pe+=1){var ft=Ze[Pe];if(ft[0]<Ee||ft[1]<ft[0]||ye<ft[1])return!1;Ee=ft[1]}return!0},Y.prototype._validateContent=function($,ye){return $?!($.length!==4||$[0]<0||ye.data.width<$[0]||$[1]<0||ye.data.height<$[1]||$[2]<0||ye.data.width<$[2]||$[3]<0||ye.data.height<$[3]||$[2]<$[0]||$[3]<$[1]):!0},Y.prototype.updateImage=function($,ye){var Ee=this.images[$];ye.version=Ee.version+1,this.images[$]=ye,this.updatedImages[$]=!0},Y.prototype.removeImage=function($){var ye=this.images[$];delete this.images[$],delete this.patterns[$],ye.userImage&&ye.userImage.onRemove&&ye.userImage.onRemove()},Y.prototype.listImages=function(){return Object.keys(this.images)},Y.prototype.getImages=function($,ye){var Ee=!0;if(!this.isLoaded())for(var Pe=0,Ze=$;Pe<Ze.length;Pe+=1){var ft=Ze[Pe];this.images[ft]||(Ee=!1)}this.isLoaded()||Ee?this._notify($,ye):this.requestors.push({ids:$,callback:ye})},Y.prototype._notify=function($,ye){for(var Ee={},Pe=0,Ze=$;Pe<Ze.length;Pe+=1){var ft=Ze[Pe];this.images[ft]||this.fire(new e.Event("styleimagemissing",{id:ft}));var Mt=this.images[ft];Mt?Ee[ft]={data:Mt.data.clone(),pixelRatio:Mt.pixelRatio,sdf:Mt.sdf,version:Mt.version,stretchX:Mt.stretchX,stretchY:Mt.stretchY,content:Mt.content,hasRenderCallback:Boolean(Mt.userImage&&Mt.userImage.render)}:e.warnOnce('Image "'+ft+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}ye(null,Ee)},Y.prototype.getPixelSize=function(){var $=this.atlasImage,ye=$.width,Ee=$.height;return{width:ye,height:Ee}},Y.prototype.getPattern=function($){var ye=this.patterns[$],Ee=this.getImage($);if(!Ee)return null;if(ye&&ye.position.version===Ee.version)return ye.position;if(ye)ye.position.version=Ee.version;else{var Pe=Ee.data.width+p*2,Ze=Ee.data.height+p*2,ft={w:Pe,h:Ze,x:0,y:0},Mt=new e.ImagePosition(ft,Ee);this.patterns[$]={bin:ft,position:Mt}}return this._updatePatternAtlas(),this.patterns[$].position},Y.prototype.bind=function($){var ye=$.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture($,this.atlasImage,ye.RGBA),this.atlasTexture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE)},Y.prototype._updatePatternAtlas=function(){var $=[];for(var ye in this.patterns)$.push(this.patterns[ye].bin);var Ee=e.potpack($),Pe=Ee.w,Ze=Ee.h,ft=this.atlasImage;ft.resize({width:Pe||1,height:Ze||1});for(var Mt in this.patterns){var Ht=this.patterns[Mt],$t=Ht.bin,or=$t.x+p,Tr=$t.y+p,Ur=this.images[Mt].data,Hr=Ur.width,Br=Ur.height;e.RGBAImage.copy(Ur,ft,{x:0,y:0},{x:or,y:Tr},{width:Hr,height:Br}),e.RGBAImage.copy(Ur,ft,{x:0,y:Br-1},{x:or,y:Tr-1},{width:Hr,height:1}),e.RGBAImage.copy(Ur,ft,{x:0,y:0},{x:or,y:Tr+Br},{width:Hr,height:1}),e.RGBAImage.copy(Ur,ft,{x:Hr-1,y:0},{x:or-1,y:Tr},{width:1,height:Br}),e.RGBAImage.copy(Ur,ft,{x:0,y:0},{x:or+Hr,y:Tr},{width:1,height:Br})}this.dirty=!0},Y.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},Y.prototype.dispatchRenderCallbacks=function($){for(var ye=0,Ee=$;ye<Ee.length;ye+=1){var Pe=Ee[ye];if(!this.callbackDispatchedThisFrame[Pe]){this.callbackDispatchedThisFrame[Pe]=!0;var Ze=this.images[Pe],ft=y(Ze);ft&&this.updateImage(Pe,Ze)}}},Y}(e.Evented);function m(ve,Y,de,$,ye){var Ee=Y*256,Pe=Ee+255,Ze=$.transformRequest($.normalizeGlyphsURL(de).replace("{fontstack}",ve).replace("{range}",Ee+"-"+Pe),e.ResourceType.Glyphs);e.getArrayBuffer(Ze,function(ft,Mt){if(ft)ye(ft);else if(Mt){for(var Ht={},$t=0,or=e.parseGlyphPBF(Mt);$t<or.length;$t+=1){var Tr=or[$t];Ht[Tr.id]=Tr}ye(null,Ht)}})}var M=_,x=_,T=1e20;function _(ve,Y,de,$,ye,Ee){this.fontSize=ve||24,this.buffer=Y===void 0?3:Y,this.cutoff=$||.25,this.fontFamily=ye||"sans-serif",this.fontWeight=Ee||"normal",this.radius=de||8;var Pe=this.size=this.fontSize+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=Pe,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Pe*Pe),this.gridInner=new Float64Array(Pe*Pe),this.f=new Float64Array(Pe),this.d=new Float64Array(Pe),this.z=new Float64Array(Pe+1),this.v=new Int16Array(Pe),this.middle=Math.round(Pe/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}_.prototype.draw=function(ve){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(ve,this.buffer,this.middle);for(var Y=this.ctx.getImageData(0,0,this.size,this.size),de=new Uint8ClampedArray(this.size*this.size),$=0;$<this.size*this.size;$++){var ye=Y.data[$*4+3]/255;this.gridOuter[$]=ye===1?0:ye===0?T:Math.pow(Math.max(0,.5-ye),2),this.gridInner[$]=ye===1?T:ye===0?0:Math.pow(Math.max(0,ye-.5),2)}for(f(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),f(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),$=0;$<this.size*this.size;$++){var Ee=this.gridOuter[$]-this.gridInner[$];de[$]=Math.max(0,Math.min(255,Math.round(255-255*(Ee/this.radius+this.cutoff))))}return de};function f(ve,Y,de,$,ye,Ee,Pe){for(var Ze=0;Ze<Y;Ze++){for(var ft=0;ft<de;ft++)$[ft]=ve[ft*Y+Ze];for(L($,ye,Ee,Pe,de),ft=0;ft<de;ft++)ve[ft*Y+Ze]=ye[ft]}for(ft=0;ft<de;ft++){for(Ze=0;Ze<Y;Ze++)$[Ze]=ve[ft*Y+Ze];for(L($,ye,Ee,Pe,Y),Ze=0;Ze<Y;Ze++)ve[ft*Y+Ze]=Math.sqrt(ye[Ze])}}function L(ve,Y,de,$,ye){de[0]=0,$[0]=-T,$[1]=+T;for(var Ee=1,Pe=0;Ee<ye;Ee++){for(var Ze=(ve[Ee]+Ee*Ee-(ve[de[Pe]]+de[Pe]*de[Pe]))/(2*Ee-2*de[Pe]);Ze<=$[Pe];)Pe--,Ze=(ve[Ee]+Ee*Ee-(ve[de[Pe]]+de[Pe]*de[Pe]))/(2*Ee-2*de[Pe]);Pe++,de[Pe]=Ee,$[Pe]=Ze,$[Pe+1]=+T}for(Ee=0,Pe=0;Ee<ye;Ee++){for(;$[Pe+1]<Ee;)Pe++;Y[Ee]=(Ee-de[Pe])*(Ee-de[Pe])+ve[de[Pe]]}}M.default=x;var S=function(Y,de){this.requestManager=Y,this.localIdeographFontFamily=de,this.entries={}};S.prototype.setURL=function(Y){this.url=Y},S.prototype.getGlyphs=function(Y,de){var $=this,ye=[];for(var Ee in Y)for(var Pe=0,Ze=Y[Ee];Pe<Ze.length;Pe+=1){var ft=Ze[Pe];ye.push({stack:Ee,id:ft})}e.asyncAll(ye,function(Mt,Ht){var $t=Mt.stack,or=Mt.id,Tr=$.entries[$t];Tr||(Tr=$.entries[$t]={glyphs:{},requests:{},ranges:{}});var Ur=Tr.glyphs[or];if(Ur!==void 0){Ht(null,{stack:$t,id:or,glyph:Ur});return}if(Ur=$._tinySDF(Tr,$t,or),Ur){Tr.glyphs[or]=Ur,Ht(null,{stack:$t,id:or,glyph:Ur});return}var Hr=Math.floor(or/256);if(Hr*256>65535){Ht(new Error("glyphs > 65535 not supported"));return}if(Tr.ranges[Hr]){Ht(null,{stack:$t,id:or,glyph:Ur});return}var Br=Tr.requests[Hr];Br||(Br=Tr.requests[Hr]=[],S.loadGlyphRange($t,Hr,$.url,$.requestManager,function(Jr,hn){if(hn){for(var kn in hn)$._doesCharSupportLocalGlyph(+kn)||(Tr.glyphs[+kn]=hn[+kn]);Tr.ranges[Hr]=!0}for(var Nn=0,Kn=Br;Nn<Kn.length;Nn+=1){var qn=Kn[Nn];qn(Jr,hn)}delete Tr.requests[Hr]})),Br.push(function(Jr,hn){Jr?Ht(Jr):hn&&Ht(null,{stack:$t,id:or,glyph:hn[or]||null})})},function(Mt,Ht){if(Mt)de(Mt);else if(Ht){for(var $t={},or=0,Tr=Ht;or<Tr.length;or+=1){var Ur=Tr[or],Hr=Ur.stack,Br=Ur.id,Jr=Ur.glyph;($t[Hr]||($t[Hr]={}))[Br]=Jr&&{id:Jr.id,bitmap:Jr.bitmap.clone(),metrics:Jr.metrics}}de(null,$t)}})},S.prototype._doesCharSupportLocalGlyph=function(Y){return!!this.localIdeographFontFamily&&(e.isChar["CJK Unified Ideographs"](Y)||e.isChar["Hangul Syllables"](Y)||e.isChar.Hiragana(Y)||e.isChar.Katakana(Y))},S.prototype._tinySDF=function(Y,de,$){var ye=this.localIdeographFontFamily;if(!!ye&&!!this._doesCharSupportLocalGlyph($)){var Ee=Y.tinySDF;if(!Ee){var Pe="400";/bold/i.test(de)?Pe="900":/medium/i.test(de)?Pe="500":/light/i.test(de)&&(Pe="200"),Ee=Y.tinySDF=new S.TinySDF(24,3,8,.25,ye,Pe)}return{id:$,bitmap:new e.AlphaImage({width:30,height:30},Ee.draw(String.fromCharCode($))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},S.loadGlyphRange=m,S.TinySDF=M;var k=function(){this.specification=e.styleSpec.light.position};k.prototype.possiblyEvaluate=function(Y,de){return e.sphericalToCartesian(Y.expression.evaluate(de))},k.prototype.interpolate=function(Y,de,$){return{x:e.number(Y.x,de.x,$),y:e.number(Y.y,de.y,$),z:e.number(Y.z,de.z,$)}};var P=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new k,color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)}),z="-transition",I=function(ve){function Y(de){ve.call(this),this._transitionable=new e.Transitionable(P),this.setLight(de),this._transitioning=this._transitionable.untransitioned()}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getLight=function(){return this._transitionable.serialize()},Y.prototype.setLight=function($,ye){if(ye===void 0&&(ye={}),!this._validate(e.validateLight,$,ye))for(var Ee in $){var Pe=$[Ee];e.endsWith(Ee,z)?this._transitionable.setTransition(Ee.slice(0,-z.length),Pe):this._transitionable.setValue(Ee,Pe)}},Y.prototype.updateTransitions=function($){this._transitioning=this._transitionable.transitioned($,this._transitioning)},Y.prototype.hasTransition=function(){return this._transitioning.hasTransition()},Y.prototype.recalculate=function($){this.properties=this._transitioning.possiblyEvaluate($)},Y.prototype._validate=function($,ye,Ee){return Ee&&Ee.validate===!1?!1:e.emitValidationErrors(this,$.call(e.validateStyle,e.extend({value:ye,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))},Y}(e.Evented),R=function(Y,de){this.width=Y,this.height=de,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};R.prototype.getDash=function(Y,de){var $=Y.join(",")+String(de);return this.dashEntry[$]||(this.dashEntry[$]=this.addDash(Y,de)),this.dashEntry[$]},R.prototype.getDashRanges=function(Y,de,$){var ye=Y.length%2===1,Ee=[],Pe=ye?-Y[Y.length-1]*$:0,Ze=Y[0]*$,ft=!0;Ee.push({left:Pe,right:Ze,isDash:ft,zeroLength:Y[0]===0});for(var Mt=Y[0],Ht=1;Ht<Y.length;Ht++){ft=!ft;var $t=Y[Ht];Pe=Mt*$,Mt+=$t,Ze=Mt*$,Ee.push({left:Pe,right:Ze,isDash:ft,zeroLength:$t===0})}return Ee},R.prototype.addRoundDash=function(Y,de,$){for(var ye=de/2,Ee=-$;Ee<=$;Ee++)for(var Pe=this.nextRow+$+Ee,Ze=this.width*Pe,ft=0,Mt=Y[ft],Ht=0;Ht<this.width;Ht++){Ht/Mt.right>1&&(Mt=Y[++ft]);var $t=Math.abs(Ht-Mt.left),or=Math.abs(Ht-Mt.right),Tr=Math.min($t,or),Ur=void 0,Hr=Ee/$*(ye+1);if(Mt.isDash){var Br=ye-Math.abs(Hr);Ur=Math.sqrt(Tr*Tr+Br*Br)}else Ur=ye-Math.sqrt(Tr*Tr+Hr*Hr);this.data[Ze+Ht]=Math.max(0,Math.min(255,Ur+128))}},R.prototype.addRegularDash=function(Y){for(var de=Y.length-1;de>=0;--de){var $=Y[de],ye=Y[de+1];$.zeroLength?Y.splice(de,1):ye&&ye.isDash===$.isDash&&(ye.left=$.left,Y.splice(de,1))}var Ee=Y[0],Pe=Y[Y.length-1];Ee.isDash===Pe.isDash&&(Ee.left=Pe.left-this.width,Pe.right=Ee.right+this.width);for(var Ze=this.width*this.nextRow,ft=0,Mt=Y[ft],Ht=0;Ht<this.width;Ht++){Ht/Mt.right>1&&(Mt=Y[++ft]);var $t=Math.abs(Ht-Mt.left),or=Math.abs(Ht-Mt.right),Tr=Math.min($t,or),Ur=Mt.isDash?Tr:-Tr;this.data[Ze+Ht]=Math.max(0,Math.min(255,Ur+128))}},R.prototype.addDash=function(Y,de){var $=de?7:0,ye=2*$+1;if(this.nextRow+ye>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var Ee=0,Pe=0;Pe<Y.length;Pe++)Ee+=Y[Pe];if(Ee!==0){var Ze=this.width/Ee,ft=this.getDashRanges(Y,this.width,Ze);de?this.addRoundDash(ft,Ze,$):this.addRegularDash(ft)}var Mt={y:(this.nextRow+$+.5)/this.height,height:2*$/this.height,width:Ee};return this.nextRow+=ye,this.dirty=!0,Mt},R.prototype.bind=function(Y){var de=Y.gl;this.texture?(de.bindTexture(de.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,de.texSubImage2D(de.TEXTURE_2D,0,0,0,this.width,this.height,de.ALPHA,de.UNSIGNED_BYTE,this.data))):(this.texture=de.createTexture(),de.bindTexture(de.TEXTURE_2D,this.texture),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_WRAP_S,de.REPEAT),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_WRAP_T,de.REPEAT),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_MIN_FILTER,de.LINEAR),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_MAG_FILTER,de.LINEAR),de.texImage2D(de.TEXTURE_2D,0,de.ALPHA,this.width,this.height,0,de.ALPHA,de.UNSIGNED_BYTE,this.data))};var D=function ve(Y,de){this.workerPool=Y,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var $=this.workerPool.acquire(this.id),ye=0;ye<$.length;ye++){var Ee=$[ye],Pe=new ve.Actor(Ee,de,this.id);Pe.name="Worker "+ye,this.actors.push(Pe)}};D.prototype.broadcast=function(Y,de,$){$=$||function(){},e.asyncAll(this.actors,function(ye,Ee){ye.send(Y,de,Ee)},$)},D.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},D.prototype.remove=function(){this.actors.forEach(function(Y){Y.remove()}),this.actors=[],this.workerPool.release(this.id)},D.Actor=e.Actor;function O(ve,Y,de){var $=function(ye,Ee){if(ye)return de(ye);if(Ee){var Pe=e.pick(e.extend(Ee,ve),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Ee.vector_layers&&(Pe.vectorLayers=Ee.vector_layers,Pe.vectorLayerIds=Pe.vectorLayers.map(function(Ze){return Ze.id})),Pe.tiles=Y.canonicalizeTileset(Pe,ve.url),de(null,Pe)}};return ve.url?e.getJSON(Y.transformRequest(Y.normalizeSourceURL(ve.url),e.ResourceType.Source),$):e.browser.frame(function(){return $(null,ve)})}var F=function(Y,de,$){this.bounds=e.LngLatBounds.convert(this.validateBounds(Y)),this.minzoom=de||0,this.maxzoom=$||24};F.prototype.validateBounds=function(Y){return!Array.isArray(Y)||Y.length!==4?[-180,-90,180,90]:[Math.max(-180,Y[0]),Math.max(-90,Y[1]),Math.min(180,Y[2]),Math.min(90,Y[3])]},F.prototype.contains=function(Y){var de=Math.pow(2,Y.z),$={minX:Math.floor(e.mercatorXfromLng(this.bounds.getWest())*de),minY:Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*de),maxX:Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*de),maxY:Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*de)},ye=Y.x>=$.minX&&Y.x<$.maxX&&Y.y>=$.minY&&Y.y<$.maxY;return ye};var G=function(ve){function Y(de,$,ye,Ee){if(ve.call(this),this.id=de,this.dispatcher=ye,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick($,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},$),this._collectResourceTiming=$.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Ee)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(){var $=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=O(this._options,this.map._requestManager,function(ye,Ee){$._tileJSONRequest=null,$._loaded=!0,ye?$.fire(new e.ErrorEvent(ye)):Ee&&(e.extend($,Ee),Ee.bounds&&($.tileBounds=new F(Ee.bounds,$.minzoom,$.maxzoom)),e.postTurnstileEvent(Ee.tiles,$.map._requestManager._customAccessToken),e.postMapLoadEvent(Ee.tiles,$.map._getMapId(),$.map._requestManager._skuToken,$.map._requestManager._customAccessToken),$.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),$.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.hasTile=function($){return!this.tileBounds||this.tileBounds.contains($.canonical)},Y.prototype.onAdd=function($){this.map=$,this.load()},Y.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},Y.prototype.serialize=function(){return e.extend({},this._options)},Y.prototype.loadTile=function($,ye){var Ee=this.map._requestManager.normalizeTileURL($.tileID.canonical.url(this.tiles,this.scheme)),Pe={request:this.map._requestManager.transformRequest(Ee,e.ResourceType.Tile),uid:$.uid,tileID:$.tileID,zoom:$.tileID.overscaledZ,tileSize:this.tileSize*$.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};Pe.request.collectResourceTiming=this._collectResourceTiming,!$.actor||$.state==="expired"?($.actor=this.dispatcher.getActor(),$.request=$.actor.send("loadTile",Pe,Ze.bind(this))):$.state==="loading"?$.reloadCallback=ye:$.request=$.actor.send("reloadTile",Pe,Ze.bind(this));function Ze(ft,Mt){if(delete $.request,$.aborted)return ye(null);if(ft&&ft.status!==404)return ye(ft);Mt&&Mt.resourceTiming&&($.resourceTiming=Mt.resourceTiming),this.map._refreshExpiredTiles&&Mt&&$.setExpiryData(Mt),$.loadVectorData(Mt,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),ye(null),$.reloadCallback&&(this.loadTile($,$.reloadCallback),$.reloadCallback=null)}},Y.prototype.abortTile=function($){$.request&&($.request.cancel(),delete $.request),$.actor&&$.actor.send("abortTile",{uid:$.uid,type:this.type,source:this.id},void 0)},Y.prototype.unloadTile=function($){$.unloadVectorData(),$.actor&&$.actor.send("removeTile",{uid:$.uid,type:this.type,source:this.id},void 0)},Y.prototype.hasTransition=function(){return!1},Y}(e.Evented),W=function(ve){function Y(de,$,ye,Ee){ve.call(this),this.id=de,this.dispatcher=ye,this.setEventedParent(Ee),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},$),e.extend(this,e.pick($,["url","scheme","tileSize"]))}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(){var $=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=O(this._options,this.map._requestManager,function(ye,Ee){$._tileJSONRequest=null,$._loaded=!0,ye?$.fire(new e.ErrorEvent(ye)):Ee&&(e.extend($,Ee),Ee.bounds&&($.tileBounds=new F(Ee.bounds,$.minzoom,$.maxzoom)),e.postTurnstileEvent(Ee.tiles),e.postMapLoadEvent(Ee.tiles,$.map._getMapId(),$.map._requestManager._skuToken),$.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),$.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.onAdd=function($){this.map=$,this.load()},Y.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},Y.prototype.serialize=function(){return e.extend({},this._options)},Y.prototype.hasTile=function($){return!this.tileBounds||this.tileBounds.contains($.canonical)},Y.prototype.loadTile=function($,ye){var Ee=this,Pe=this.map._requestManager.normalizeTileURL($.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);$.request=e.getImage(this.map._requestManager.transformRequest(Pe,e.ResourceType.Tile),function(Ze,ft){if(delete $.request,$.aborted)$.state="unloaded",ye(null);else if(Ze)$.state="errored",ye(Ze);else if(ft){Ee.map._refreshExpiredTiles&&$.setExpiryData(ft),delete ft.cacheControl,delete ft.expires;var Mt=Ee.map.painter.context,Ht=Mt.gl;$.texture=Ee.map.painter.getTileTexture(ft.width),$.texture?$.texture.update(ft,{useMipmap:!0}):($.texture=new e.Texture(Mt,ft,Ht.RGBA,{useMipmap:!0}),$.texture.bind(Ht.LINEAR,Ht.CLAMP_TO_EDGE,Ht.LINEAR_MIPMAP_NEAREST),Mt.extTextureFilterAnisotropic&&Ht.texParameterf(Ht.TEXTURE_2D,Mt.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Mt.extTextureFilterAnisotropicMax)),$.state="loaded",e.cacheEntryPossiblyAdded(Ee.dispatcher),ye(null)}})},Y.prototype.abortTile=function($,ye){$.request&&($.request.cancel(),delete $.request),ye()},Y.prototype.unloadTile=function($,ye){$.texture&&this.map.painter.saveTileTexture($.texture),ye()},Y.prototype.hasTransition=function(){return!1},Y}(e.Evented),q=function(ve){function Y(de,$,ye,Ee){ve.call(this,de,$,ye,Ee),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},$),this.encoding=$.encoding||"mapbox"}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},Y.prototype.loadTile=function($,ye){var Ee=this.map._requestManager.normalizeTileURL($.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);$.request=e.getImage(this.map._requestManager.transformRequest(Ee,e.ResourceType.Tile),Pe.bind(this)),$.neighboringTiles=this._getNeighboringTiles($.tileID);function Pe(ft,Mt){if(delete $.request,$.aborted)$.state="unloaded",ye(null);else if(ft)$.state="errored",ye(ft);else if(Mt){this.map._refreshExpiredTiles&&$.setExpiryData(Mt),delete Mt.cacheControl,delete Mt.expires;var Ht=e.window.ImageBitmap&&Mt instanceof e.window.ImageBitmap&&e.offscreenCanvasSupported(),$t=Ht?Mt:e.browser.getImageData(Mt,1),or={uid:$.uid,coord:$.tileID,source:this.id,rawImageData:$t,encoding:this.encoding};(!$.actor||$.state==="expired")&&($.actor=this.dispatcher.getActor(),$.actor.send("loadDEMTile",or,Ze.bind(this)))}}function Ze(ft,Mt){ft&&($.state="errored",ye(ft)),Mt&&($.dem=Mt,$.needsHillshadePrepare=!0,$.state="loaded",ye(null))}},Y.prototype._getNeighboringTiles=function($){var ye=$.canonical,Ee=Math.pow(2,ye.z),Pe=(ye.x-1+Ee)%Ee,Ze=ye.x===0?$.wrap-1:$.wrap,ft=(ye.x+1+Ee)%Ee,Mt=ye.x+1===Ee?$.wrap+1:$.wrap,Ht={};return Ht[new e.OverscaledTileID($.overscaledZ,Ze,ye.z,Pe,ye.y).key]={backfilled:!1},Ht[new e.OverscaledTileID($.overscaledZ,Mt,ye.z,ft,ye.y).key]={backfilled:!1},ye.y>0&&(Ht[new e.OverscaledTileID($.overscaledZ,Ze,ye.z,Pe,ye.y-1).key]={backfilled:!1},Ht[new e.OverscaledTileID($.overscaledZ,$.wrap,ye.z,ye.x,ye.y-1).key]={backfilled:!1},Ht[new e.OverscaledTileID($.overscaledZ,Mt,ye.z,ft,ye.y-1).key]={backfilled:!1}),ye.y+1<Ee&&(Ht[new e.OverscaledTileID($.overscaledZ,Ze,ye.z,Pe,ye.y+1).key]={backfilled:!1},Ht[new e.OverscaledTileID($.overscaledZ,$.wrap,ye.z,ye.x,ye.y+1).key]={backfilled:!1},Ht[new e.OverscaledTileID($.overscaledZ,Mt,ye.z,ft,ye.y+1).key]={backfilled:!1}),Ht},Y.prototype.unloadTile=function($){$.demTexture&&this.map.painter.saveTileTexture($.demTexture),$.fbo&&($.fbo.destroy(),delete $.fbo),$.dem&&delete $.dem,delete $.neighboringTiles,$.state="unloaded",$.actor&&$.actor.send("removeDEMTile",{uid:$.uid,source:this.id})},Y}(W),J=function(ve){function Y(de,$,ye,Ee){ve.call(this),this.id=de,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=ye.getActor(),this.setEventedParent(Ee),this._data=$.data,this._options=e.extend({},$),this._collectResourceTiming=$.collectResourceTiming,this._resourceTiming=[],$.maxzoom!==void 0&&(this.maxzoom=$.maxzoom),$.type&&(this.type=$.type),$.attribution&&(this.attribution=$.attribution),this.promoteId=$.promoteId;var Pe=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:$.cluster||!1,geojsonVtOptions:{buffer:($.buffer!==void 0?$.buffer:128)*Pe,tolerance:($.tolerance!==void 0?$.tolerance:.375)*Pe,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:$.lineMetrics||!1,generateId:$.generateId||!1},superclusterOptions:{maxZoom:$.clusterMaxZoom!==void 0?Math.min($.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:e.EXTENT,radius:($.clusterRadius||50)*Pe,log:!1,generateId:$.generateId||!1},clusterProperties:$.clusterProperties},$.workerOptions)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(){var $=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(ye){if(ye){$.fire(new e.ErrorEvent(ye));return}var Ee={dataType:"source",sourceDataType:"metadata"};$._collectResourceTiming&&$._resourceTiming&&$._resourceTiming.length>0&&(Ee.resourceTiming=$._resourceTiming,$._resourceTiming=[]),$.fire(new e.Event("data",Ee))})},Y.prototype.onAdd=function($){this.map=$,this.load()},Y.prototype.setData=function($){var ye=this;return this._data=$,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(Ee){if(Ee){ye.fire(new e.ErrorEvent(Ee));return}var Pe={dataType:"source",sourceDataType:"content"};ye._collectResourceTiming&&ye._resourceTiming&&ye._resourceTiming.length>0&&(Pe.resourceTiming=ye._resourceTiming,ye._resourceTiming=[]),ye.fire(new e.Event("data",Pe))}),this},Y.prototype.getClusterExpansionZoom=function($,ye){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:$,source:this.id},ye),this},Y.prototype.getClusterChildren=function($,ye){return this.actor.send("geojson.getClusterChildren",{clusterId:$,source:this.id},ye),this},Y.prototype.getClusterLeaves=function($,ye,Ee,Pe){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:$,limit:ye,offset:Ee},Pe),this},Y.prototype._updateWorkerData=function($){var ye=this;this._loaded=!1;var Ee=e.extend({},this.workerOptions),Pe=this._data;typeof Pe=="string"?(Ee.request=this.map._requestManager.transformRequest(e.browser.resolveURL(Pe),e.ResourceType.Source),Ee.request.collectResourceTiming=this._collectResourceTiming):Ee.data=JSON.stringify(Pe),this.actor.send(this.type+".loadData",Ee,function(Ze,ft){ye._removed||ft&&ft.abandoned||(ye._loaded=!0,ft&&ft.resourceTiming&&ft.resourceTiming[ye.id]&&(ye._resourceTiming=ft.resourceTiming[ye.id].slice(0)),ye.actor.send(ye.type+".coalesce",{source:Ee.source},null),$(Ze))})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.loadTile=function($,ye){var Ee=this,Pe=$.actor?"reloadTile":"loadTile";$.actor=this.actor;var Ze={type:this.type,uid:$.uid,tileID:$.tileID,zoom:$.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};$.request=this.actor.send(Pe,Ze,function(ft,Mt){return delete $.request,$.unloadVectorData(),$.aborted?ye(null):ft?ye(ft):($.loadVectorData(Mt,Ee.map.painter,Pe==="reloadTile"),ye(null))})},Y.prototype.abortTile=function($){$.request&&($.request.cancel(),delete $.request),$.aborted=!0},Y.prototype.unloadTile=function($){$.unloadVectorData(),this.actor.send("removeTile",{uid:$.uid,type:this.type,source:this.id})},Y.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},Y.prototype.serialize=function(){return e.extend({},this._options,{type:this.type,data:this._data})},Y.prototype.hasTransition=function(){return!1},Y}(e.Evented),X=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Z=function(ve){function Y(de,$,ye,Ee){ve.call(this),this.id=de,this.dispatcher=ye,this.coordinates=$.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Ee),this.options=$}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.load=function($,ye){var Ee=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),function(Pe,Ze){Ee._loaded=!0,Pe?Ee.fire(new e.ErrorEvent(Pe)):Ze&&(Ee.image=Ze,$&&(Ee.coordinates=$),ye&&ye(),Ee._finishLoading())})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.updateImage=function($){var ye=this;return!this.image||!$.url?this:(this.options.url=$.url,this.load($.coordinates,function(){ye.texture=null}),this)},Y.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))},Y.prototype.onAdd=function($){this.map=$,this.load()},Y.prototype.setCoordinates=function($){var ye=this;this.coordinates=$;var Ee=$.map(e.MercatorCoordinate.fromLngLat);this.tileID=se(Ee),this.minzoom=this.maxzoom=this.tileID.z;var Pe=Ee.map(function(Ze){return ye.tileID.getTilePoint(Ze)._round()});return this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(Pe[0].x,Pe[0].y,0,0),this._boundsArray.emplaceBack(Pe[1].x,Pe[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(Pe[3].x,Pe[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(Pe[2].x,Pe[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this},Y.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||!this.image)){var $=this.map.painter.context,ye=$.gl;this.boundsBuffer||(this.boundsBuffer=$.createVertexBuffer(this._boundsArray,X.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture($,this.image,ye.RGBA),this.texture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE));for(var Ee in this.tiles){var Pe=this.tiles[Ee];Pe.state!=="loaded"&&(Pe.state="loaded",Pe.texture=this.texture)}}},Y.prototype.loadTile=function($,ye){this.tileID&&this.tileID.equals($.tileID.canonical)?(this.tiles[String($.tileID.wrap)]=$,$.buckets={},ye(null)):($.state="errored",ye(null))},Y.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},Y.prototype.hasTransition=function(){return!1},Y}(e.Evented);function se(ve){for(var Y=1/0,de=1/0,$=-1/0,ye=-1/0,Ee=0,Pe=ve;Ee<Pe.length;Ee+=1){var Ze=Pe[Ee];Y=Math.min(Y,Ze.x),de=Math.min(de,Ze.y),$=Math.max($,Ze.x),ye=Math.max(ye,Ze.y)}var ft=$-Y,Mt=ye-de,Ht=Math.max(ft,Mt),$t=Math.max(0,Math.floor(-Math.log(Ht)/Math.LN2)),or=Math.pow(2,$t);return new e.CanonicalTileID($t,Math.floor((Y+$)/2*or),Math.floor((de+ye)/2*or))}var le=function(ve){function Y(de,$,ye,Ee){ve.call(this,de,$,ye,Ee),this.roundZoom=!0,this.type="video",this.options=$}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(){var $=this;this._loaded=!1;var ye=this.options;this.urls=[];for(var Ee=0,Pe=ye.urls;Ee<Pe.length;Ee+=1){var Ze=Pe[Ee];this.urls.push(this.map._requestManager.transformRequest(Ze,e.ResourceType.Source).url)}e.getVideo(this.urls,function(ft,Mt){$._loaded=!0,ft?$.fire(new e.ErrorEvent(ft)):Mt&&($.video=Mt,$.video.loop=!0,$.video.addEventListener("playing",function(){$.map.triggerRepaint()}),$.map&&$.video.play(),$._finishLoading())})},Y.prototype.pause=function(){this.video&&this.video.pause()},Y.prototype.play=function(){this.video&&this.video.play()},Y.prototype.seek=function($){if(this.video){var ye=this.video.seekable;$<ye.start(0)||$>ye.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+ye.start(0)+" and "+ye.end(0)+"-second mark."))):this.video.currentTime=$}},Y.prototype.getVideo=function(){return this.video},Y.prototype.onAdd=function($){this.map||(this.map=$,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},Y.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var $=this.map.painter.context,ye=$.gl;this.boundsBuffer||(this.boundsBuffer=$.createVertexBuffer(this._boundsArray,X.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE),ye.texSubImage2D(ye.TEXTURE_2D,0,0,0,ye.RGBA,ye.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture($,this.video,ye.RGBA),this.texture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE));for(var Ee in this.tiles){var Pe=this.tiles[Ee];Pe.state!=="loaded"&&(Pe.state="loaded",Pe.texture=this.texture)}}},Y.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},Y.prototype.hasTransition=function(){return this.video&&!this.video.paused},Y}(Z),oe=function(ve){function Y(de,$,ye,Ee){ve.call(this,de,$,ye,Ee),$.coordinates?(!Array.isArray($.coordinates)||$.coordinates.length!==4||$.coordinates.some(function(Pe){return!Array.isArray(Pe)||Pe.length!==2||Pe.some(function(Ze){return typeof Ze!="number"})}))&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+de,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+de,null,'missing required property "coordinates"'))),$.animate&&typeof $.animate!="boolean"&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+de,null,'optional "animate" property must be a boolean value'))),$.canvas?typeof $.canvas!="string"&&!($.canvas instanceof e.window.HTMLCanvasElement)&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+de,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+de,null,'missing required property "canvas"'))),this.options=$,this.animate=$.animate!==void 0?$.animate:!0}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(){if(this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()){this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero.")));return}this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading()},Y.prototype.getCanvas=function(){return this.canvas},Y.prototype.onAdd=function($){this.map=$,this.load(),this.canvas&&this.animate&&this.play()},Y.prototype.onRemove=function(){this.pause()},Y.prototype.prepare=function(){var $=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,$=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,$=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var ye=this.map.painter.context,Ee=ye.gl;this.boundsBuffer||(this.boundsBuffer=ye.createVertexBuffer(this._boundsArray,X.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?($||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(ye,this.canvas,Ee.RGBA,{premultiply:!0});for(var Pe in this.tiles){var Ze=this.tiles[Pe];Ze.state!=="loaded"&&(Ze.state="loaded",Ze.texture=this.texture)}}},Y.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},Y.prototype.hasTransition=function(){return this._playing},Y.prototype._hasInvalidDimensions=function(){for(var $=0,ye=[this.canvas.width,this.canvas.height];$<ye.length;$+=1){var Ee=ye[$];if(isNaN(Ee)||Ee<=0)return!0}return!1},Y}(Z),U={vector:G,raster:W,"raster-dem":q,geojson:J,video:le,image:Z,canvas:oe},V=function(ve,Y,de,$){var ye=new U[Y.type](ve,Y,de,$);if(ye.id!==ve)throw new Error("Expected Source id to be "+ve+" instead of "+ye.id);return e.bindAll(["load","abort","unload","serialize","prepare"],ye),ye},re=function(ve){return U[ve]},ee=function(ve,Y){U[ve]=Y};function j(ve,Y){var de=e.identity([]);return e.translate(de,de,[1,1,0]),e.scale(de,de,[ve.width*.5,ve.height*.5,1]),e.multiply(de,de,ve.calculatePosMatrix(Y.toUnwrapped()))}function Q(ve,Y,de){if(ve)for(var $=0,ye=ve;$<ye.length;$+=1){var Ee=ye[$],Pe=Y[Ee];if(Pe&&Pe.source===de&&Pe.type==="fill-extrusion")return!0}else for(var Ze in Y){var ft=Y[Ze];if(ft.source===de&&ft.type==="fill-extrusion")return!0}return!1}function ne(ve,Y,de,$,ye,Ee){var Pe=Q(ye&&ye.layers,Y,ve.id),Ze=Ee.maxPitchScaleFactor(),ft=ve.tilesIn($,Ze,Pe);ft.sort(ue);for(var Mt=[],Ht=0,$t=ft;Ht<$t.length;Ht+=1){var or=$t[Ht];Mt.push({wrappedTileID:or.tileID.wrapped().key,queryResults:or.tile.queryRenderedFeatures(Y,de,ve._state,or.queryGeometry,or.cameraQueryGeometry,or.scale,ye,Ee,Ze,j(ve.transform,or.tileID))})}var Tr=xe(Mt);for(var Ur in Tr)Tr[Ur].forEach(function(Hr){var Br=Hr.feature,Jr=ve.getFeatureState(Br.layer["source-layer"],Br.id);Br.source=Br.layer.source,Br.layer["source-layer"]&&(Br.sourceLayer=Br.layer["source-layer"]),Br.state=Jr});return Tr}function ae(ve,Y,de,$,ye,Ee,Pe){for(var Ze={},ft=Ee.queryRenderedSymbols($),Mt=[],Ht=0,$t=Object.keys(ft).map(Number);Ht<$t.length;Ht+=1){var or=$t[Ht];Mt.push(Pe[or])}Mt.sort(ue);for(var Tr=function(){var hn=Hr[Ur],kn=hn.featureIndex.lookupSymbolFeatures(ft[hn.bucketInstanceId],Y,hn.bucketIndex,hn.sourceLayerIndex,ye.filter,ye.layers,ye.availableImages,ve);for(var Nn in kn){var Kn=Ze[Nn]=Ze[Nn]||[],qn=kn[Nn];qn.sort(function(xa,Ma){var Pa=hn.featureSortOrder;if(Pa){var Ga=Pa.indexOf(xa.featureIndex),ni=Pa.indexOf(Ma.featureIndex);return ni-Ga}else return Ma.featureIndex-xa.featureIndex});for(var Qn=0,va=qn;Qn<va.length;Qn+=1){var _a=va[Qn];Kn.push(_a)}}},Ur=0,Hr=Mt;Ur<Hr.length;Ur+=1)Tr();var Br=function(hn){Ze[hn].forEach(function(kn){var Nn=kn.feature,Kn=ve[hn],qn=de[Kn.source],Qn=qn.getFeatureState(Nn.layer["source-layer"],Nn.id);Nn.source=Nn.layer.source,Nn.layer["source-layer"]&&(Nn.sourceLayer=Nn.layer["source-layer"]),Nn.state=Qn})};for(var Jr in Ze)Br(Jr);return Ze}function ie(ve,Y){for(var de=ve.getRenderableIds().map(function(ft){return ve.getTileByID(ft)}),$=[],ye={},Ee=0;Ee<de.length;Ee++){var Pe=de[Ee],Ze=Pe.tileID.canonical.key;ye[Ze]||(ye[Ze]=!0,Pe.querySourceFeatures($,Y))}return $}function ue(ve,Y){var de=ve.tileID,$=Y.tileID;return de.overscaledZ-$.overscaledZ||de.canonical.y-$.canonical.y||de.wrap-$.wrap||de.canonical.x-$.canonical.x}function xe(ve){for(var Y={},de={},$=0,ye=ve;$<ye.length;$+=1){var Ee=ye[$],Pe=Ee.queryResults,Ze=Ee.wrappedTileID,ft=de[Ze]=de[Ze]||{};for(var Mt in Pe)for(var Ht=Pe[Mt],$t=ft[Mt]=ft[Mt]||{},or=Y[Mt]=Y[Mt]||[],Tr=0,Ur=Ht;Tr<Ur.length;Tr+=1){var Hr=Ur[Tr];$t[Hr.featureIndex]||($t[Hr.featureIndex]=!0,or.push(Hr))}}return Y}var he=function(Y,de){this.max=Y,this.onRemove=de,this.reset()};he.prototype.reset=function(){for(var Y in this.data)for(var de=0,$=this.data[Y];de<$.length;de+=1){var ye=$[de];ye.timeout&&clearTimeout(ye.timeout),this.onRemove(ye.value)}return this.data={},this.order=[],this},he.prototype.add=function(Y,de,$){var ye=this,Ee=Y.wrapped().key;this.data[Ee]===void 0&&(this.data[Ee]=[]);var Pe={value:de,timeout:void 0};if($!==void 0&&(Pe.timeout=setTimeout(function(){ye.remove(Y,Pe)},$)),this.data[Ee].push(Pe),this.order.push(Ee),this.order.length>this.max){var Ze=this._getAndRemoveByKey(this.order[0]);Ze&&this.onRemove(Ze)}return this},he.prototype.has=function(Y){return Y.wrapped().key in this.data},he.prototype.getAndRemove=function(Y){return this.has(Y)?this._getAndRemoveByKey(Y.wrapped().key):null},he.prototype._getAndRemoveByKey=function(Y){var de=this.data[Y].shift();return de.timeout&&clearTimeout(de.timeout),this.data[Y].length===0&&delete this.data[Y],this.order.splice(this.order.indexOf(Y),1),de.value},he.prototype.getByKey=function(Y){var de=this.data[Y];return de?de[0].value:null},he.prototype.get=function(Y){if(!this.has(Y))return null;var de=this.data[Y.wrapped().key][0];return de.value},he.prototype.remove=function(Y,de){if(!this.has(Y))return this;var $=Y.wrapped().key,ye=de===void 0?0:this.data[$].indexOf(de),Ee=this.data[$][ye];return this.data[$].splice(ye,1),Ee.timeout&&clearTimeout(Ee.timeout),this.data[$].length===0&&delete this.data[$],this.onRemove(Ee.value),this.order.splice(this.order.indexOf($),1),this},he.prototype.setMaxSize=function(Y){for(this.max=Y;this.order.length>this.max;){var de=this._getAndRemoveByKey(this.order[0]);de&&this.onRemove(de)}return this},he.prototype.filter=function(Y){var de=[];for(var $ in this.data)for(var ye=0,Ee=this.data[$];ye<Ee.length;ye+=1){var Pe=Ee[ye];Y(Pe.value)||de.push(Pe)}for(var Ze=0,ft=de;Ze<ft.length;Ze+=1){var Mt=ft[Ze];this.remove(Mt.value.tileID,Mt)}};var ge=function(Y,de,$){this.context=Y;var ye=Y.gl;this.buffer=ye.createBuffer(),this.dynamicDraw=Boolean($),this.context.unbindVAO(),Y.bindElementBuffer.set(this.buffer),ye.bufferData(ye.ELEMENT_ARRAY_BUFFER,de.arrayBuffer,this.dynamicDraw?ye.DYNAMIC_DRAW:ye.STATIC_DRAW),this.dynamicDraw||delete de.arrayBuffer};ge.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},ge.prototype.updateData=function(Y){var de=this.context.gl;this.context.unbindVAO(),this.bind(),de.bufferSubData(de.ELEMENT_ARRAY_BUFFER,0,Y.arrayBuffer)},ge.prototype.destroy=function(){var Y=this.context.gl;this.buffer&&(Y.deleteBuffer(this.buffer),delete this.buffer)};var me={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},ke=function(Y,de,$,ye){this.length=de.length,this.attributes=$,this.itemSize=de.bytesPerElement,this.dynamicDraw=ye,this.context=Y;var Ee=Y.gl;this.buffer=Ee.createBuffer(),Y.bindVertexBuffer.set(this.buffer),Ee.bufferData(Ee.ARRAY_BUFFER,de.arrayBuffer,this.dynamicDraw?Ee.DYNAMIC_DRAW:Ee.STATIC_DRAW),this.dynamicDraw||delete de.arrayBuffer};ke.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},ke.prototype.updateData=function(Y){var de=this.context.gl;this.bind(),de.bufferSubData(de.ARRAY_BUFFER,0,Y.arrayBuffer)},ke.prototype.enableAttributes=function(Y,de){for(var $=0;$<this.attributes.length;$++){var ye=this.attributes[$],Ee=de.attributes[ye.name];Ee!==void 0&&Y.enableVertexAttribArray(Ee)}},ke.prototype.setVertexAttribPointers=function(Y,de,$){for(var ye=0;ye<this.attributes.length;ye++){var Ee=this.attributes[ye],Pe=de.attributes[Ee.name];Pe!==void 0&&Y.vertexAttribPointer(Pe,Ee.components,Y[me[Ee.type]],!1,this.itemSize,Ee.offset+this.itemSize*($||0))}},ke.prototype.destroy=function(){var Y=this.context.gl;this.buffer&&(Y.deleteBuffer(this.buffer),delete this.buffer)};var Ae=function(Y){this.gl=Y.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Ae.prototype.get=function(){return this.current},Ae.prototype.set=function(Y){},Ae.prototype.getDefault=function(){return this.default},Ae.prototype.setDefault=function(){this.set(this.default)};var Ne=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return e.Color.transparent},Y.prototype.set=function($){var ye=this.current;$.r===ye.r&&$.g===ye.g&&$.b===ye.b&&$.a===ye.a&&!this.dirty||(this.gl.clearColor($.r,$.g,$.b,$.a),this.current=$,this.dirty=!1)},Y}(Ae),He=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return 1},Y.prototype.set=function($){$===this.current&&!this.dirty||(this.gl.clearDepth($),this.current=$,this.dirty=!1)},Y}(Ae),Ge=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return 0},Y.prototype.set=function($){$===this.current&&!this.dirty||(this.gl.clearStencil($),this.current=$,this.dirty=!1)},Y}(Ae),_e=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return[!0,!0,!0,!0]},Y.prototype.set=function($){var ye=this.current;$[0]===ye[0]&&$[1]===ye[1]&&$[2]===ye[2]&&$[3]===ye[3]&&!this.dirty||(this.gl.colorMask($[0],$[1],$[2],$[3]),this.current=$,this.dirty=!1)},Y}(Ae),De=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!0},Y.prototype.set=function($){$===this.current&&!this.dirty||(this.gl.depthMask($),this.current=$,this.dirty=!1)},Y}(Ae),Ye=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return 255},Y.prototype.set=function($){$===this.current&&!this.dirty||(this.gl.stencilMask($),this.current=$,this.dirty=!1)},Y}(Ae),qe=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},Y.prototype.set=function($){var ye=this.current;$.func===ye.func&&$.ref===ye.ref&&$.mask===ye.mask&&!this.dirty||(this.gl.stencilFunc($.func,$.ref,$.mask),this.current=$,this.dirty=!1)},Y}(Ae),Ue=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){var $=this.gl;return[$.KEEP,$.KEEP,$.KEEP]},Y.prototype.set=function($){var ye=this.current;$[0]===ye[0]&&$[1]===ye[1]&&$[2]===ye[2]&&!this.dirty||(this.gl.stencilOp($[0],$[1],$[2]),this.current=$,this.dirty=!1)},Y}(Ae),Ie=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function($){if(!($===this.current&&!this.dirty)){var ye=this.gl;$?ye.enable(ye.STENCIL_TEST):ye.disable(ye.STENCIL_TEST),this.current=$,this.dirty=!1}},Y}(Ae),Ve=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return[0,1]},Y.prototype.set=function($){var ye=this.current;$[0]===ye[0]&&$[1]===ye[1]&&!this.dirty||(this.gl.depthRange($[0],$[1]),this.current=$,this.dirty=!1)},Y}(Ae),dt=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function($){if(!($===this.current&&!this.dirty)){var ye=this.gl;$?ye.enable(ye.DEPTH_TEST):ye.disable(ye.DEPTH_TEST),this.current=$,this.dirty=!1}},Y}(Ae),Dt=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return this.gl.LESS},Y.prototype.set=function($){$===this.current&&!this.dirty||(this.gl.depthFunc($),this.current=$,this.dirty=!1)},Y}(Ae),Yt=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function($){if(!($===this.current&&!this.dirty)){var ye=this.gl;$?ye.enable(ye.BLEND):ye.disable(ye.BLEND),this.current=$,this.dirty=!1}},Y}(Ae),kt=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){var $=this.gl;return[$.ONE,$.ZERO]},Y.prototype.set=function($){var ye=this.current;$[0]===ye[0]&&$[1]===ye[1]&&!this.dirty||(this.gl.blendFunc($[0],$[1]),this.current=$,this.dirty=!1)},Y}(Ae),Ft=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return e.Color.transparent},Y.prototype.set=function($){var ye=this.current;$.r===ye.r&&$.g===ye.g&&$.b===ye.b&&$.a===ye.a&&!this.dirty||(this.gl.blendColor($.r,$.g,$.b,$.a),this.current=$,this.dirty=!1)},Y}(Ae),Nt=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return this.gl.FUNC_ADD},Y.prototype.set=function($){$===this.current&&!this.dirty||(this.gl.blendEquation($),this.current=$,this.dirty=!1)},Y}(Ae),Lt=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function($){if(!($===this.current&&!this.dirty)){var ye=this.gl;$?ye.enable(ye.CULL_FACE):ye.disable(ye.CULL_FACE),this.current=$,this.dirty=!1}},Y}(Ae),St=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return this.gl.BACK},Y.prototype.set=function($){$===this.current&&!this.dirty||(this.gl.cullFace($),this.current=$,this.dirty=!1)},Y}(Ae),it=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return this.gl.CCW},Y.prototype.set=function($){$===this.current&&!this.dirty||(this.gl.frontFace($),this.current=$,this.dirty=!1)},Y}(Ae),ht=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function($){$===this.current&&!this.dirty||(this.gl.useProgram($),this.current=$,this.dirty=!1)},Y}(Ae),Qe=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return this.gl.TEXTURE0},Y.prototype.set=function($){$===this.current&&!this.dirty||(this.gl.activeTexture($),this.current=$,this.dirty=!1)},Y}(Ae),Ce=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){var $=this.gl;return[0,0,$.drawingBufferWidth,$.drawingBufferHeight]},Y.prototype.set=function($){var ye=this.current;$[0]===ye[0]&&$[1]===ye[1]&&$[2]===ye[2]&&$[3]===ye[3]&&!this.dirty||(this.gl.viewport($[0],$[1],$[2],$[3]),this.current=$,this.dirty=!1)},Y}(Ae),je=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function($){if(!($===this.current&&!this.dirty)){var ye=this.gl;ye.bindFramebuffer(ye.FRAMEBUFFER,$),this.current=$,this.dirty=!1}},Y}(Ae),rt=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function($){if(!($===this.current&&!this.dirty)){var ye=this.gl;ye.bindRenderbuffer(ye.RENDERBUFFER,$),this.current=$,this.dirty=!1}},Y}(Ae),ut=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function($){if(!($===this.current&&!this.dirty)){var ye=this.gl;ye.bindTexture(ye.TEXTURE_2D,$),this.current=$,this.dirty=!1}},Y}(Ae),Pt=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function($){if(!($===this.current&&!this.dirty)){var ye=this.gl;ye.bindBuffer(ye.ARRAY_BUFFER,$),this.current=$,this.dirty=!1}},Y}(Ae),Tt=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function($){var ye=this.gl;ye.bindBuffer(ye.ELEMENT_ARRAY_BUFFER,$),this.current=$,this.dirty=!1},Y}(Ae),Ot=function(ve){function Y(de){ve.call(this,de),this.vao=de.extVertexArrayObject}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function($){!this.vao||$===this.current&&!this.dirty||(this.vao.bindVertexArrayOES($),this.current=$,this.dirty=!1)},Y}(Ae),Kt=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return 4},Y.prototype.set=function($){if(!($===this.current&&!this.dirty)){var ye=this.gl;ye.pixelStorei(ye.UNPACK_ALIGNMENT,$),this.current=$,this.dirty=!1}},Y}(Ae),Bt=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function($){if(!($===this.current&&!this.dirty)){var ye=this.gl;ye.pixelStorei(ye.UNPACK_PREMULTIPLY_ALPHA_WEBGL,$),this.current=$,this.dirty=!1}},Y}(Ae),Zt=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function($){if(!($===this.current&&!this.dirty)){var ye=this.gl;ye.pixelStorei(ye.UNPACK_FLIP_Y_WEBGL,$),this.current=$,this.dirty=!1}},Y}(Ae),Je=function(ve){function Y(de,$){ve.call(this,de),this.context=de,this.parent=$}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y}(Ae),pt=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.setDirty=function(){this.dirty=!0},Y.prototype.set=function($){if(!($===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var ye=this.gl;ye.framebufferTexture2D(ye.FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ye.TEXTURE_2D,$,0),this.current=$,this.dirty=!1}},Y}(Je),Et=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.set=function($){if(!($===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var ye=this.gl;ye.framebufferRenderbuffer(ye.FRAMEBUFFER,ye.DEPTH_ATTACHMENT,ye.RENDERBUFFER,$),this.current=$,this.dirty=!1}},Y}(Je),ar=function(Y,de,$,ye){this.context=Y,this.width=de,this.height=$;var Ee=Y.gl,Pe=this.framebuffer=Ee.createFramebuffer();this.colorAttachment=new pt(Y,Pe),ye&&(this.depthAttachment=new Et(Y,Pe))};ar.prototype.destroy=function(){var Y=this.context.gl,de=this.colorAttachment.get();if(de&&Y.deleteTexture(de),this.depthAttachment){var $=this.depthAttachment.get();$&&Y.deleteRenderbuffer($)}Y.deleteFramebuffer(this.framebuffer)};var vr=519,ir=function(Y,de,$){this.func=Y,this.mask=de,this.range=$};ir.ReadOnly=!1,ir.ReadWrite=!0,ir.disabled=new ir(vr,ir.ReadOnly,[0,1]);var dr=519,Pr=7680,Sr=function(Y,de,$,ye,Ee,Pe){this.test=Y,this.ref=de,this.mask=$,this.fail=ye,this.depthFail=Ee,this.pass=Pe};Sr.disabled=new Sr({func:dr,mask:0},0,0,Pr,Pr,Pr);var tr=0,Nr=1,et=771,we=function(Y,de,$){this.blendFunction=Y,this.blendColor=de,this.mask=$};we.Replace=[Nr,tr],we.disabled=new we(we.Replace,e.Color.transparent,[!1,!1,!1,!1]),we.unblended=new we(we.Replace,e.Color.transparent,[!0,!0,!0,!0]),we.alphaBlended=new we([Nr,et],e.Color.transparent,[!0,!0,!0,!0]);var Me=1029,Re=2305,Xe=function(Y,de,$){this.enable=Y,this.mode=de,this.frontFace=$};Xe.disabled=new Xe(!1,Me,Re),Xe.backCCW=new Xe(!0,Me,Re);var $e=function(Y){this.gl=Y,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Ne(this),this.clearDepth=new He(this),this.clearStencil=new Ge(this),this.colorMask=new _e(this),this.depthMask=new De(this),this.stencilMask=new Ye(this),this.stencilFunc=new qe(this),this.stencilOp=new Ue(this),this.stencilTest=new Ie(this),this.depthRange=new Ve(this),this.depthTest=new dt(this),this.depthFunc=new Dt(this),this.blend=new Yt(this),this.blendFunc=new kt(this),this.blendColor=new Ft(this),this.blendEquation=new Nt(this),this.cullFace=new Lt(this),this.cullFaceSide=new St(this),this.frontFace=new it(this),this.program=new ht(this),this.activeTexture=new Qe(this),this.viewport=new Ce(this),this.bindFramebuffer=new je(this),this.bindRenderbuffer=new rt(this),this.bindTexture=new ut(this),this.bindVertexBuffer=new Pt(this),this.bindElementBuffer=new Tt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Ot(this),this.pixelStoreUnpack=new Kt(this),this.pixelStoreUnpackPremultiplyAlpha=new Bt(this),this.pixelStoreUnpackFlipY=new Zt(this),this.extTextureFilterAnisotropic=Y.getExtension("EXT_texture_filter_anisotropic")||Y.getExtension("MOZ_EXT_texture_filter_anisotropic")||Y.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=Y.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=Y.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(Y.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=Y.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=Y.getExtension("EXT_disjoint_timer_query")};$e.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},$e.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},$e.prototype.createIndexBuffer=function(Y,de){return new ge(this,Y,de)},$e.prototype.createVertexBuffer=function(Y,de,$){return new ke(this,Y,de,$)},$e.prototype.createRenderbuffer=function(Y,de,$){var ye=this.gl,Ee=ye.createRenderbuffer();return this.bindRenderbuffer.set(Ee),ye.renderbufferStorage(ye.RENDERBUFFER,Y,de,$),this.bindRenderbuffer.set(null),Ee},$e.prototype.createFramebuffer=function(Y,de,$){return new ar(this,Y,de,$)},$e.prototype.clear=function(Y){var de=Y.color,$=Y.depth,ye=this.gl,Ee=0;de&&(Ee|=ye.COLOR_BUFFER_BIT,this.clearColor.set(de),this.colorMask.set([!0,!0,!0,!0])),typeof $!="undefined"&&(Ee|=ye.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set($),this.depthMask.set(!0)),ye.clear(Ee)},$e.prototype.setCullFace=function(Y){Y.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(Y.mode),this.frontFace.set(Y.frontFace))},$e.prototype.setDepthMode=function(Y){Y.func===this.gl.ALWAYS&&!Y.mask?this.depthTest.set(!1):(this.depthTest.set(!0),this.depthFunc.set(Y.func),this.depthMask.set(Y.mask),this.depthRange.set(Y.range))},$e.prototype.setStencilMode=function(Y){Y.test.func===this.gl.ALWAYS&&!Y.mask?this.stencilTest.set(!1):(this.stencilTest.set(!0),this.stencilMask.set(Y.mask),this.stencilOp.set([Y.fail,Y.depthFail,Y.pass]),this.stencilFunc.set({func:Y.test.func,ref:Y.ref,mask:Y.test.mask}))},$e.prototype.setColorMode=function(Y){e.deepEqual(Y.blendFunction,we.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(Y.blendFunction),this.blendColor.set(Y.blendColor)),this.colorMask.set(Y.mask)},$e.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ot=function(ve){function Y(de,$,ye){var Ee=this;ve.call(this),this.id=de,this.dispatcher=ye,this.on("data",function(Pe){Pe.dataType==="source"&&Pe.sourceDataType==="metadata"&&(Ee._sourceLoaded=!0),Ee._sourceLoaded&&!Ee._paused&&Pe.dataType==="source"&&Pe.sourceDataType==="content"&&(Ee.reload(),Ee.transform&&Ee.update(Ee.transform))}),this.on("error",function(){Ee._sourceErrored=!0}),this._source=V(de,$,ye,this),this._tiles={},this._cache=new he(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new e.SourceFeatureState}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.onAdd=function($){this.map=$,this._maxTileCacheSize=$?$._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd($)},Y.prototype.onRemove=function($){this._source&&this._source.onRemove&&this._source.onRemove($)},Y.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var $ in this._tiles){var ye=this._tiles[$];if(ye.state!=="loaded"&&ye.state!=="errored")return!1}return!0},Y.prototype.getSource=function(){return this._source},Y.prototype.pause=function(){this._paused=!0},Y.prototype.resume=function(){if(!!this._paused){var $=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,$&&this.reload(),this.transform&&this.update(this.transform)}},Y.prototype._loadTile=function($,ye){return this._source.loadTile($,ye)},Y.prototype._unloadTile=function($){if(this._source.unloadTile)return this._source.unloadTile($,function(){})},Y.prototype._abortTile=function($){if(this._source.abortTile)return this._source.abortTile($,function(){})},Y.prototype.serialize=function(){return this._source.serialize()},Y.prototype.prepare=function($){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(var ye in this._tiles){var Ee=this._tiles[ye];Ee.upload($),Ee.prepare(this.map.style.imageManager)}},Y.prototype.getIds=function(){return e.values(this._tiles).map(function($){return $.tileID}).sort(st).map(function($){return $.key})},Y.prototype.getRenderableIds=function($){var ye=this,Ee=[];for(var Pe in this._tiles)this._isIdRenderable(Pe,$)&&Ee.push(this._tiles[Pe]);return $?Ee.sort(function(Ze,ft){var Mt=Ze.tileID,Ht=ft.tileID,$t=new e.Point(Mt.canonical.x,Mt.canonical.y)._rotate(ye.transform.angle),or=new e.Point(Ht.canonical.x,Ht.canonical.y)._rotate(ye.transform.angle);return Mt.overscaledZ-Ht.overscaledZ||or.y-$t.y||or.x-$t.x}).map(function(Ze){return Ze.tileID.key}):Ee.map(function(Ze){return Ze.tileID}).sort(st).map(function(Ze){return Ze.key})},Y.prototype.hasRenderableParent=function($){var ye=this.findLoadedParent($,0);return ye?this._isIdRenderable(ye.tileID.key):!1},Y.prototype._isIdRenderable=function($,ye){return this._tiles[$]&&this._tiles[$].hasData()&&!this._coveredTiles[$]&&(ye||!this._tiles[$].holdingForFade())},Y.prototype.reload=function(){if(this._paused){this._shouldReloadOnResume=!0;return}this._cache.reset();for(var $ in this._tiles)this._tiles[$].state!=="errored"&&this._reloadTile($,"reloading")},Y.prototype._reloadTile=function($,ye){var Ee=this._tiles[$];!Ee||(Ee.state!=="loading"&&(Ee.state=ye),this._loadTile(Ee,this._tileLoaded.bind(this,Ee,$,ye)))},Y.prototype._tileLoaded=function($,ye,Ee,Pe){if(Pe){$.state="errored",Pe.status!==404?this._source.fire(new e.ErrorEvent(Pe,{tile:$})):this.update(this.transform);return}$.timeAdded=e.browser.now(),Ee==="expired"&&($.refreshedUponExpiration=!0),this._setTileReloadTimer(ye,$),this.getSource().type==="raster-dem"&&$.dem&&this._backfillDEM($),this._state.initializeTileState($,this.map?this.map.painter:null),this._source.fire(new e.Event("data",{dataType:"source",tile:$,coord:$.tileID}))},Y.prototype._backfillDEM=function($){for(var ye=this.getRenderableIds(),Ee=0;Ee<ye.length;Ee++){var Pe=ye[Ee];if($.neighboringTiles&&$.neighboringTiles[Pe]){var Ze=this.getTileByID(Pe);ft($,Ze),ft(Ze,$)}}function ft(Mt,Ht){Mt.needsHillshadePrepare=!0;var $t=Ht.tileID.canonical.x-Mt.tileID.canonical.x,or=Ht.tileID.canonical.y-Mt.tileID.canonical.y,Tr=Math.pow(2,Mt.tileID.canonical.z),Ur=Ht.tileID.key;$t===0&&or===0||Math.abs(or)>1||(Math.abs($t)>1&&(Math.abs($t+Tr)===1?$t+=Tr:Math.abs($t-Tr)===1&&($t-=Tr)),!(!Ht.dem||!Mt.dem)&&(Mt.dem.backfillBorder(Ht.dem,$t,or),Mt.neighboringTiles&&Mt.neighboringTiles[Ur]&&(Mt.neighboringTiles[Ur].backfilled=!0)))}},Y.prototype.getTile=function($){return this.getTileByID($.key)},Y.prototype.getTileByID=function($){return this._tiles[$]},Y.prototype._retainLoadedChildren=function($,ye,Ee,Pe){for(var Ze in this._tiles){var ft=this._tiles[Ze];if(!(Pe[Ze]||!ft.hasData()||ft.tileID.overscaledZ<=ye||ft.tileID.overscaledZ>Ee)){for(var Mt=ft.tileID;ft&&ft.tileID.overscaledZ>ye+1;){var Ht=ft.tileID.scaledTo(ft.tileID.overscaledZ-1);ft=this._tiles[Ht.key],ft&&ft.hasData()&&(Mt=Ht)}for(var $t=Mt;$t.overscaledZ>ye;)if($t=$t.scaledTo($t.overscaledZ-1),$[$t.key]){Pe[Mt.key]=Mt;break}}}},Y.prototype.findLoadedParent=function($,ye){if($.key in this._loadedParentTiles){var Ee=this._loadedParentTiles[$.key];return Ee&&Ee.tileID.overscaledZ>=ye?Ee:null}for(var Pe=$.overscaledZ-1;Pe>=ye;Pe--){var Ze=$.scaledTo(Pe),ft=this._getLoadedTile(Ze);if(ft)return ft}},Y.prototype._getLoadedTile=function($){var ye=this._tiles[$.key];if(ye&&ye.hasData())return ye;var Ee=this._cache.getByKey($.wrapped().key);return Ee},Y.prototype.updateCacheSize=function($){var ye=Math.ceil($.width/this._source.tileSize)+1,Ee=Math.ceil($.height/this._source.tileSize)+1,Pe=ye*Ee,Ze=5,ft=Math.floor(Pe*Ze),Mt=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,ft):ft;this._cache.setMaxSize(Mt)},Y.prototype.handleWrapJump=function($){var ye=this._prevLng===void 0?$:this._prevLng,Ee=$-ye,Pe=Ee/360,Ze=Math.round(Pe);if(this._prevLng=$,Ze){var ft={};for(var Mt in this._tiles){var Ht=this._tiles[Mt];Ht.tileID=Ht.tileID.unwrapTo(Ht.tileID.wrap+Ze),ft[Ht.tileID.key]=Ht}this._tiles=ft;for(var $t in this._timers)clearTimeout(this._timers[$t]),delete this._timers[$t];for(var or in this._tiles){var Tr=this._tiles[or];this._setTileReloadTimer(or,Tr)}}},Y.prototype.update=function($){var ye=this;if(this.transform=$,!(!this._sourceLoaded||this._paused)){this.updateCacheSize($),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={};var Ee;this.used?this._source.tileID?Ee=$.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(xa){return new e.OverscaledTileID(xa.canonical.z,xa.wrap,xa.canonical.z,xa.canonical.x,xa.canonical.y)}):(Ee=$.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(Ee=Ee.filter(function(xa){return ye._source.hasTile(xa)}))):Ee=[];var Pe=$.coveringZoomLevel(this._source),Ze=Math.max(Pe-Y.maxOverzooming,this._source.minzoom),ft=Math.max(Pe+Y.maxUnderzooming,this._source.minzoom),Mt=this._updateRetainedTiles(Ee,Pe);if(yt(this._source.type)){for(var Ht={},$t={},or=Object.keys(Mt),Tr=0,Ur=or;Tr<Ur.length;Tr+=1){var Hr=Ur[Tr],Br=Mt[Hr],Jr=this._tiles[Hr];if(!(!Jr||Jr.fadeEndTime&&Jr.fadeEndTime<=e.browser.now())){var hn=this.findLoadedParent(Br,Ze);hn&&(this._addTile(hn.tileID),Ht[hn.tileID.key]=hn.tileID),$t[Hr]=Br}}this._retainLoadedChildren($t,Pe,ft,Mt);for(var kn in Ht)Mt[kn]||(this._coveredTiles[kn]=!0,Mt[kn]=Ht[kn])}for(var Nn in Mt)this._tiles[Nn].clearFadeHold();for(var Kn=e.keysDifference(this._tiles,Mt),qn=0,Qn=Kn;qn<Qn.length;qn+=1){var va=Qn[qn],_a=this._tiles[va];_a.hasSymbolBuckets&&!_a.holdingForFade()?_a.setHoldDuration(this.map._fadeDuration):(!_a.hasSymbolBuckets||_a.symbolFadeFinished())&&this._removeTile(va)}this._updateLoadedParentTileCache()}},Y.prototype.releaseSymbolFadeTiles=function(){for(var $ in this._tiles)this._tiles[$].holdingForFade()&&this._removeTile($)},Y.prototype._updateRetainedTiles=function($,ye){for(var Ee={},Pe={},Ze=Math.max(ye-Y.maxOverzooming,this._source.minzoom),ft=Math.max(ye+Y.maxUnderzooming,this._source.minzoom),Mt={},Ht=0,$t=$;Ht<$t.length;Ht+=1){var or=$t[Ht],Tr=this._addTile(or);Ee[or.key]=or,!Tr.hasData()&&ye<this._source.maxzoom&&(Mt[or.key]=or)}this._retainLoadedChildren(Mt,ye,ft,Ee);for(var Ur=0,Hr=$;Ur<Hr.length;Ur+=1){var Br=Hr[Ur],Jr=this._tiles[Br.key];if(!Jr.hasData()){if(ye+1>this._source.maxzoom){var hn=Br.children(this._source.maxzoom)[0],kn=this.getTile(hn);if(!!kn&&kn.hasData()){Ee[hn.key]=hn;continue}}else{var Nn=Br.children(this._source.maxzoom);if(Ee[Nn[0].key]&&Ee[Nn[1].key]&&Ee[Nn[2].key]&&Ee[Nn[3].key])continue}for(var Kn=Jr.wasRequested(),qn=Br.overscaledZ-1;qn>=Ze;--qn){var Qn=Br.scaledTo(qn);if(Pe[Qn.key]||(Pe[Qn.key]=!0,Jr=this.getTile(Qn),!Jr&&Kn&&(Jr=this._addTile(Qn)),Jr&&(Ee[Qn.key]=Qn,Kn=Jr.wasRequested(),Jr.hasData())))break}}}return Ee},Y.prototype._updateLoadedParentTileCache=function(){this._loadedParentTiles={};for(var $ in this._tiles){for(var ye=[],Ee=void 0,Pe=this._tiles[$].tileID;Pe.overscaledZ>0;){if(Pe.key in this._loadedParentTiles){Ee=this._loadedParentTiles[Pe.key];break}ye.push(Pe.key);var Ze=Pe.scaledTo(Pe.overscaledZ-1);if(Ee=this._getLoadedTile(Ze),Ee)break;Pe=Ze}for(var ft=0,Mt=ye;ft<Mt.length;ft+=1){var Ht=Mt[ft];this._loadedParentTiles[Ht]=Ee}}},Y.prototype._addTile=function($){var ye=this._tiles[$.key];if(ye)return ye;ye=this._cache.getAndRemove($),ye&&(this._setTileReloadTimer($.key,ye),ye.tileID=$,this._state.initializeTileState(ye,this.map?this.map.painter:null),this._cacheTimers[$.key]&&(clearTimeout(this._cacheTimers[$.key]),delete this._cacheTimers[$.key],this._setTileReloadTimer($.key,ye)));var Ee=Boolean(ye);return Ee||(ye=new e.Tile($,this._source.tileSize*$.overscaleFactor()),this._loadTile(ye,this._tileLoaded.bind(this,ye,$.key,ye.state))),ye?(ye.uses++,this._tiles[$.key]=ye,Ee||this._source.fire(new e.Event("dataloading",{tile:ye,coord:ye.tileID,dataType:"source"})),ye):null},Y.prototype._setTileReloadTimer=function($,ye){var Ee=this;$ in this._timers&&(clearTimeout(this._timers[$]),delete this._timers[$]);var Pe=ye.getExpiryTimeout();Pe&&(this._timers[$]=setTimeout(function(){Ee._reloadTile($,"expired"),delete Ee._timers[$]},Pe))},Y.prototype._removeTile=function($){var ye=this._tiles[$];!ye||(ye.uses--,delete this._tiles[$],this._timers[$]&&(clearTimeout(this._timers[$]),delete this._timers[$]),!(ye.uses>0)&&(ye.hasData()&&ye.state!=="reloading"?this._cache.add(ye.tileID,ye,ye.getExpiryTimeout()):(ye.aborted=!0,this._abortTile(ye),this._unloadTile(ye))))},Y.prototype.clearTiles=function(){this._shouldReloadOnResume=!1,this._paused=!1;for(var $ in this._tiles)this._removeTile($);this._cache.reset()},Y.prototype.tilesIn=function($,ye,Ee){var Pe=this,Ze=[],ft=this.transform;if(!ft)return Ze;for(var Mt=Ee?ft.getCameraQueryGeometry($):$,Ht=$.map(function(qn){return ft.pointCoordinate(qn)}),$t=Mt.map(function(qn){return ft.pointCoordinate(qn)}),or=this.getIds(),Tr=1/0,Ur=1/0,Hr=-1/0,Br=-1/0,Jr=0,hn=$t;Jr<hn.length;Jr+=1){var kn=hn[Jr];Tr=Math.min(Tr,kn.x),Ur=Math.min(Ur,kn.y),Hr=Math.max(Hr,kn.x),Br=Math.max(Br,kn.y)}for(var Nn=function(qn){var Qn=Pe._tiles[or[qn]];if(!Qn.holdingForFade()){var va=Qn.tileID,_a=Math.pow(2,ft.zoom-Qn.tileID.overscaledZ),xa=ye*Qn.queryPadding*e.EXTENT/Qn.tileSize/_a,Ma=[va.getTilePoint(new e.MercatorCoordinate(Tr,Ur)),va.getTilePoint(new e.MercatorCoordinate(Hr,Br))];if(Ma[0].x-xa<e.EXTENT&&Ma[0].y-xa<e.EXTENT&&Ma[1].x+xa>=0&&Ma[1].y+xa>=0){var Pa=Ht.map(function(ni){return va.getTilePoint(ni)}),Ga=$t.map(function(ni){return va.getTilePoint(ni)});Ze.push({tile:Qn,tileID:va,queryGeometry:Pa,cameraQueryGeometry:Ga,scale:_a})}}},Kn=0;Kn<or.length;Kn++)Nn(Kn);return Ze},Y.prototype.getVisibleCoordinates=function($){for(var ye=this,Ee=this.getRenderableIds($).map(function(Mt){return ye._tiles[Mt].tileID}),Pe=0,Ze=Ee;Pe<Ze.length;Pe+=1){var ft=Ze[Pe];ft.posMatrix=this.transform.calculatePosMatrix(ft.toUnwrapped())}return Ee},Y.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(yt(this._source.type))for(var $ in this._tiles){var ye=this._tiles[$];if(ye.fadeEndTime!==void 0&&ye.fadeEndTime>=e.browser.now())return!0}return!1},Y.prototype.setFeatureState=function($,ye,Ee){$=$||"_geojsonTileLayer",this._state.updateState($,ye,Ee)},Y.prototype.removeFeatureState=function($,ye,Ee){$=$||"_geojsonTileLayer",this._state.removeFeatureState($,ye,Ee)},Y.prototype.getFeatureState=function($,ye){return $=$||"_geojsonTileLayer",this._state.getState($,ye)},Y.prototype.setDependencies=function($,ye,Ee){var Pe=this._tiles[$];Pe&&Pe.setDependencies(ye,Ee)},Y.prototype.reloadTilesForDependencies=function($,ye){for(var Ee in this._tiles){var Pe=this._tiles[Ee];Pe.hasDependency($,ye)&&this._reloadTile(Ee,"reloading")}this._cache.filter(function(Ze){return!Ze.hasDependency($,ye)})},Y}(e.Evented);ot.maxOverzooming=10,ot.maxUnderzooming=3;function st(ve,Y){var de=Math.abs(ve.wrap*2)-+(ve.wrap<0),$=Math.abs(Y.wrap*2)-+(Y.wrap<0);return ve.overscaledZ-Y.overscaledZ||$-de||Y.canonical.y-ve.canonical.y||Y.canonical.x-ve.canonical.x}function yt(ve){return ve==="raster"||ve==="image"||ve==="video"}function wt(){return new e.window.Worker(Cp.workerUrl)}var Vt="mapboxgl_preloaded_worker_pool",gr=function(){this.active={}};gr.prototype.acquire=function(Y){if(!this.workers)for(this.workers=[];this.workers.length<gr.workerCount;)this.workers.push(new wt);return this.active[Y]=!0,this.workers.slice()},gr.prototype.release=function(Y){delete this.active[Y],this.numActive()===0&&(this.workers.forEach(function(de){de.terminate()}),this.workers=null)},gr.prototype.isPreloaded=function(){return!!this.active[Vt]},gr.prototype.numActive=function(){return Object.keys(this.active).length};var wr=Math.floor(e.browser.hardwareConcurrency/2);gr.workerCount=Math.max(Math.min(wr,6),1);var Lr;function fr(){return Lr||(Lr=new gr),Lr}function Fr(){var ve=fr();ve.acquire(Vt)}function nn(){var ve=Lr;ve&&(ve.isPreloaded()&&ve.numActive()===1?(ve.release(Vt),Lr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))}function yr(ve,Y){var de={};for(var $ in ve)$!=="ref"&&(de[$]=ve[$]);return e.refProperties.forEach(function(ye){ye in Y&&(de[ye]=Y[ye])}),de}function _r(ve){ve=ve.slice();for(var Y=Object.create(null),de=0;de<ve.length;de++)Y[ve[de].id]=ve[de];for(var $=0;$<ve.length;$++)"ref"in ve[$]&&(ve[$]=yr(ve[$],Y[ve[$].ref]));return ve}function dn(){var ve={},Y=e.styleSpec.$version;for(var de in e.styleSpec.$root){var $=e.styleSpec.$root[de];if($.required){var ye=null;de==="version"?ye=Y:$.type==="array"?ye=[]:ye={},ye!=null&&(ve[de]=ye)}}return ve}var Yr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ar(ve,Y,de){de.push({command:Yr.addSource,args:[ve,Y[ve]]})}function an(ve,Y,de){Y.push({command:Yr.removeSource,args:[ve]}),de[ve]=!0}function rn(ve,Y,de,$){an(ve,de,$),Ar(ve,Y,de)}function Zr(ve,Y,de){var $;for($ in ve[de])if(!!ve[de].hasOwnProperty($)&&$!=="data"&&!e.deepEqual(ve[de][$],Y[de][$]))return!1;for($ in Y[de])if(!!Y[de].hasOwnProperty($)&&$!=="data"&&!e.deepEqual(ve[de][$],Y[de][$]))return!1;return!0}function at(ve,Y,de,$){ve=ve||{},Y=Y||{};var ye;for(ye in ve)!ve.hasOwnProperty(ye)||Y.hasOwnProperty(ye)||an(ye,de,$);for(ye in Y)!Y.hasOwnProperty(ye)||(ve.hasOwnProperty(ye)?e.deepEqual(ve[ye],Y[ye])||(ve[ye].type==="geojson"&&Y[ye].type==="geojson"&&Zr(ve,Y,ye)?de.push({command:Yr.setGeoJSONSourceData,args:[ye,Y[ye].data]}):rn(ye,Y,de,$)):Ar(ye,Y,de))}function zt(ve,Y,de,$,ye,Ee){ve=ve||{},Y=Y||{};var Pe;for(Pe in ve)!ve.hasOwnProperty(Pe)||e.deepEqual(ve[Pe],Y[Pe])||de.push({command:Ee,args:[$,Pe,Y[Pe],ye]});for(Pe in Y)!Y.hasOwnProperty(Pe)||ve.hasOwnProperty(Pe)||e.deepEqual(ve[Pe],Y[Pe])||de.push({command:Ee,args:[$,Pe,Y[Pe],ye]})}function er(ve){return ve.id}function hr(ve,Y){return ve[Y.id]=Y,ve}function Vr(ve,Y,de){ve=ve||[],Y=Y||[];var $=ve.map(er),ye=Y.map(er),Ee=ve.reduce(hr,{}),Pe=Y.reduce(hr,{}),Ze=$.slice(),ft=Object.create(null),Mt,Ht,$t,or,Tr,Ur,Hr;for(Mt=0,Ht=0;Mt<$.length;Mt++)$t=$[Mt],Pe.hasOwnProperty($t)?Ht++:(de.push({command:Yr.removeLayer,args:[$t]}),Ze.splice(Ze.indexOf($t,Ht),1));for(Mt=0,Ht=0;Mt<ye.length;Mt++)$t=ye[ye.length-1-Mt],Ze[Ze.length-1-Mt]!==$t&&(Ee.hasOwnProperty($t)?(de.push({command:Yr.removeLayer,args:[$t]}),Ze.splice(Ze.lastIndexOf($t,Ze.length-Ht),1)):Ht++,Ur=Ze[Ze.length-Mt],de.push({command:Yr.addLayer,args:[Pe[$t],Ur]}),Ze.splice(Ze.length-Mt,0,$t),ft[$t]=!0);for(Mt=0;Mt<ye.length;Mt++)if($t=ye[Mt],or=Ee[$t],Tr=Pe[$t],!(ft[$t]||e.deepEqual(or,Tr))){if(!e.deepEqual(or.source,Tr.source)||!e.deepEqual(or["source-layer"],Tr["source-layer"])||!e.deepEqual(or.type,Tr.type)){de.push({command:Yr.removeLayer,args:[$t]}),Ur=Ze[Ze.lastIndexOf($t)+1],de.push({command:Yr.addLayer,args:[Tr,Ur]});continue}zt(or.layout,Tr.layout,de,$t,null,Yr.setLayoutProperty),zt(or.paint,Tr.paint,de,$t,null,Yr.setPaintProperty),e.deepEqual(or.filter,Tr.filter)||de.push({command:Yr.setFilter,args:[$t,Tr.filter]}),(!e.deepEqual(or.minzoom,Tr.minzoom)||!e.deepEqual(or.maxzoom,Tr.maxzoom))&&de.push({command:Yr.setLayerZoomRange,args:[$t,Tr.minzoom,Tr.maxzoom]});for(Hr in or)!or.hasOwnProperty(Hr)||Hr==="layout"||Hr==="paint"||Hr==="filter"||Hr==="metadata"||Hr==="minzoom"||Hr==="maxzoom"||(Hr.indexOf("paint.")===0?zt(or[Hr],Tr[Hr],de,$t,Hr.slice(6),Yr.setPaintProperty):e.deepEqual(or[Hr],Tr[Hr])||de.push({command:Yr.setLayerProperty,args:[$t,Hr,Tr[Hr]]}));for(Hr in Tr)!Tr.hasOwnProperty(Hr)||or.hasOwnProperty(Hr)||Hr==="layout"||Hr==="paint"||Hr==="filter"||Hr==="metadata"||Hr==="minzoom"||Hr==="maxzoom"||(Hr.indexOf("paint.")===0?zt(or[Hr],Tr[Hr],de,$t,Hr.slice(6),Yr.setPaintProperty):e.deepEqual(or[Hr],Tr[Hr])||de.push({command:Yr.setLayerProperty,args:[$t,Hr,Tr[Hr]]}))}}function Rr(ve,Y){if(!ve)return[{command:Yr.setStyle,args:[Y]}];var de=[];try{if(!e.deepEqual(ve.version,Y.version))return[{command:Yr.setStyle,args:[Y]}];e.deepEqual(ve.center,Y.center)||de.push({command:Yr.setCenter,args:[Y.center]}),e.deepEqual(ve.zoom,Y.zoom)||de.push({command:Yr.setZoom,args:[Y.zoom]}),e.deepEqual(ve.bearing,Y.bearing)||de.push({command:Yr.setBearing,args:[Y.bearing]}),e.deepEqual(ve.pitch,Y.pitch)||de.push({command:Yr.setPitch,args:[Y.pitch]}),e.deepEqual(ve.sprite,Y.sprite)||de.push({command:Yr.setSprite,args:[Y.sprite]}),e.deepEqual(ve.glyphs,Y.glyphs)||de.push({command:Yr.setGlyphs,args:[Y.glyphs]}),e.deepEqual(ve.transition,Y.transition)||de.push({command:Yr.setTransition,args:[Y.transition]}),e.deepEqual(ve.light,Y.light)||de.push({command:Yr.setLight,args:[Y.light]});var $={},ye=[];at(ve.sources,Y.sources,ye,$);var Ee=[];ve.layers&&ve.layers.forEach(function(Pe){$[Pe.source]?de.push({command:Yr.removeLayer,args:[Pe.id]}):Ee.push(Pe)}),de=de.concat(ye),Vr(Ee,Y.layers,de)}catch(Pe){console.warn("Unable to compute style diff:",Pe),de=[{command:Yr.setStyle,args:[Y]}]}return de}var Er=function(Y,de){this.reset(Y,de)};Er.prototype.reset=function(Y,de){this.points=Y||[],this._distances=[0];for(var $=1;$<this.points.length;$++)this._distances[$]=this._distances[$-1]+this.points[$].dist(this.points[$-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(de||0,this.length*.5),this.paddedLength=this.length-this.padding*2},Er.prototype.lerp=function(Y){if(this.points.length===1)return this.points[0];Y=e.clamp(Y,0,1);for(var de=1,$=this._distances[de],ye=Y*this.paddedLength+this.padding;$<ye&&de<this._distances.length;)$=this._distances[++de];var Ee=de-1,Pe=this._distances[Ee],Ze=$-Pe,ft=Ze>0?(ye-Pe)/Ze:0;return this.points[Ee].mult(1-ft).add(this.points[de].mult(ft))};var xr=function(Y,de,$){var ye=this.boxCells=[],Ee=this.circleCells=[];this.xCellCount=Math.ceil(Y/$),this.yCellCount=Math.ceil(de/$);for(var Pe=0;Pe<this.xCellCount*this.yCellCount;Pe++)ye.push([]),Ee.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=Y,this.height=de,this.xScale=this.xCellCount/Y,this.yScale=this.yCellCount/de,this.boxUid=0,this.circleUid=0};xr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},xr.prototype.insert=function(Y,de,$,ye,Ee){this._forEachCell(de,$,ye,Ee,this._insertBoxCell,this.boxUid++),this.boxKeys.push(Y),this.bboxes.push(de),this.bboxes.push($),this.bboxes.push(ye),this.bboxes.push(Ee)},xr.prototype.insertCircle=function(Y,de,$,ye){this._forEachCell(de-ye,$-ye,de+ye,$+ye,this._insertCircleCell,this.circleUid++),this.circleKeys.push(Y),this.circles.push(de),this.circles.push($),this.circles.push(ye)},xr.prototype._insertBoxCell=function(Y,de,$,ye,Ee,Pe){this.boxCells[Ee].push(Pe)},xr.prototype._insertCircleCell=function(Y,de,$,ye,Ee,Pe){this.circleCells[Ee].push(Pe)},xr.prototype._query=function(Y,de,$,ye,Ee,Pe){if($<0||Y>this.width||ye<0||de>this.height)return Ee?!1:[];var Ze=[];if(Y<=0&&de<=0&&this.width<=$&&this.height<=ye){if(Ee)return!0;for(var ft=0;ft<this.boxKeys.length;ft++)Ze.push({key:this.boxKeys[ft],x1:this.bboxes[ft*4],y1:this.bboxes[ft*4+1],x2:this.bboxes[ft*4+2],y2:this.bboxes[ft*4+3]});for(var Mt=0;Mt<this.circleKeys.length;Mt++){var Ht=this.circles[Mt*3],$t=this.circles[Mt*3+1],or=this.circles[Mt*3+2];Ze.push({key:this.circleKeys[Mt],x1:Ht-or,y1:$t-or,x2:Ht+or,y2:$t+or})}return Pe?Ze.filter(Pe):Ze}else{var Tr={hitTest:Ee,seenUids:{box:{},circle:{}}};return this._forEachCell(Y,de,$,ye,this._queryCell,Ze,Tr,Pe),Ee?Ze.length>0:Ze}},xr.prototype._queryCircle=function(Y,de,$,ye,Ee){var Pe=Y-$,Ze=Y+$,ft=de-$,Mt=de+$;if(Ze<0||Pe>this.width||Mt<0||ft>this.height)return ye?!1:[];var Ht=[],$t={hitTest:ye,circle:{x:Y,y:de,radius:$},seenUids:{box:{},circle:{}}};return this._forEachCell(Pe,ft,Ze,Mt,this._queryCellCircle,Ht,$t,Ee),ye?Ht.length>0:Ht},xr.prototype.query=function(Y,de,$,ye,Ee){return this._query(Y,de,$,ye,!1,Ee)},xr.prototype.hitTest=function(Y,de,$,ye,Ee){return this._query(Y,de,$,ye,!0,Ee)},xr.prototype.hitTestCircle=function(Y,de,$,ye){return this._queryCircle(Y,de,$,!0,ye)},xr.prototype._queryCell=function(Y,de,$,ye,Ee,Pe,Ze,ft){var Mt=Ze.seenUids,Ht=this.boxCells[Ee];if(Ht!==null)for(var $t=this.bboxes,or=0,Tr=Ht;or<Tr.length;or+=1){var Ur=Tr[or];if(!Mt.box[Ur]){Mt.box[Ur]=!0;var Hr=Ur*4;if(Y<=$t[Hr+2]&&de<=$t[Hr+3]&&$>=$t[Hr+0]&&ye>=$t[Hr+1]&&(!ft||ft(this.boxKeys[Ur]))){if(Ze.hitTest)return Pe.push(!0),!0;Pe.push({key:this.boxKeys[Ur],x1:$t[Hr],y1:$t[Hr+1],x2:$t[Hr+2],y2:$t[Hr+3]})}}}var Br=this.circleCells[Ee];if(Br!==null)for(var Jr=this.circles,hn=0,kn=Br;hn<kn.length;hn+=1){var Nn=kn[hn];if(!Mt.circle[Nn]){Mt.circle[Nn]=!0;var Kn=Nn*3;if(this._circleAndRectCollide(Jr[Kn],Jr[Kn+1],Jr[Kn+2],Y,de,$,ye)&&(!ft||ft(this.circleKeys[Nn]))){if(Ze.hitTest)return Pe.push(!0),!0;var qn=Jr[Kn],Qn=Jr[Kn+1],va=Jr[Kn+2];Pe.push({key:this.circleKeys[Nn],x1:qn-va,y1:Qn-va,x2:qn+va,y2:Qn+va})}}}},xr.prototype._queryCellCircle=function(Y,de,$,ye,Ee,Pe,Ze,ft){var Mt=Ze.circle,Ht=Ze.seenUids,$t=this.boxCells[Ee];if($t!==null)for(var or=this.bboxes,Tr=0,Ur=$t;Tr<Ur.length;Tr+=1){var Hr=Ur[Tr];if(!Ht.box[Hr]){Ht.box[Hr]=!0;var Br=Hr*4;if(this._circleAndRectCollide(Mt.x,Mt.y,Mt.radius,or[Br+0],or[Br+1],or[Br+2],or[Br+3])&&(!ft||ft(this.boxKeys[Hr])))return Pe.push(!0),!0}}var Jr=this.circleCells[Ee];if(Jr!==null)for(var hn=this.circles,kn=0,Nn=Jr;kn<Nn.length;kn+=1){var Kn=Nn[kn];if(!Ht.circle[Kn]){Ht.circle[Kn]=!0;var qn=Kn*3;if(this._circlesCollide(hn[qn],hn[qn+1],hn[qn+2],Mt.x,Mt.y,Mt.radius)&&(!ft||ft(this.circleKeys[Kn])))return Pe.push(!0),!0}}},xr.prototype._forEachCell=function(Y,de,$,ye,Ee,Pe,Ze,ft){for(var Mt=this._convertToXCellCoord(Y),Ht=this._convertToYCellCoord(de),$t=this._convertToXCellCoord($),or=this._convertToYCellCoord(ye),Tr=Mt;Tr<=$t;Tr++)for(var Ur=Ht;Ur<=or;Ur++){var Hr=this.xCellCount*Ur+Tr;if(Ee.call(this,Y,de,$,ye,Hr,Pe,Ze,ft))return}},xr.prototype._convertToXCellCoord=function(Y){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(Y*this.xScale)))},xr.prototype._convertToYCellCoord=function(Y){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(Y*this.yScale)))},xr.prototype._circlesCollide=function(Y,de,$,ye,Ee,Pe){var Ze=ye-Y,ft=Ee-de,Mt=$+Pe;return Mt*Mt>Ze*Ze+ft*ft},xr.prototype._circleAndRectCollide=function(Y,de,$,ye,Ee,Pe,Ze){var ft=(Pe-ye)/2,Mt=Math.abs(Y-(ye+ft));if(Mt>ft+$)return!1;var Ht=(Ze-Ee)/2,$t=Math.abs(de-(Ee+Ht));if($t>Ht+$)return!1;if(Mt<=ft||$t<=Ht)return!0;var or=Mt-ft,Tr=$t-Ht;return or*or+Tr*Tr<=$*$};function Wr(ve,Y,de,$,ye){var Ee=e.create();return Y?(e.scale(Ee,Ee,[1/ye,1/ye,1]),de||e.rotateZ(Ee,Ee,$.angle)):e.multiply(Ee,$.labelPlaneMatrix,ve),Ee}function Rn(ve,Y,de,$,ye){if(Y){var Ee=e.clone(ve);return e.scale(Ee,Ee,[ye,ye,1]),de||e.rotateZ(Ee,Ee,-$.angle),Ee}else return $.glCoordMatrix}function En(ve,Y){var de=[ve.x,ve.y,0,1];ta(de,de,Y);var $=de[3];return{point:new e.Point(de[0]/$,de[1]/$),signedDistanceFromCamera:$}}function ea(ve,Y){return .5+.5*(ve/Y)}function ia(ve,Y){var de=ve[0]/ve[3],$=ve[1]/ve[3],ye=de>=-Y[0]&&de<=Y[0]&&$>=-Y[1]&&$<=Y[1];return ye}function Aa(ve,Y,de,$,ye,Ee,Pe,Ze){var ft=$?ve.textSizeData:ve.iconSizeData,Mt=e.evaluateSizeForZoom(ft,de.transform.zoom),Ht=[256/de.width*2+1,256/de.height*2+1],$t=$?ve.text.dynamicLayoutVertexArray:ve.icon.dynamicLayoutVertexArray;$t.clear();for(var or=ve.lineVertexArray,Tr=$?ve.text.placedSymbolArray:ve.icon.placedSymbolArray,Ur=de.transform.width/de.transform.height,Hr=!1,Br=0;Br<Tr.length;Br++){var Jr=Tr.get(Br);if(Jr.hidden||Jr.writingMode===e.WritingMode.vertical&&!Hr){ca(Jr.numGlyphs,$t);continue}Hr=!1;var hn=[Jr.anchorX,Jr.anchorY,0,1];if(e.transformMat4(hn,hn,Y),!ia(hn,Ht)){ca(Jr.numGlyphs,$t);continue}var kn=hn[3],Nn=ea(de.transform.cameraToCenterDistance,kn),Kn=e.evaluateSizeForFeature(ft,Mt,Jr),qn=Pe?Kn/Nn:Kn*Nn,Qn=new e.Point(Jr.anchorX,Jr.anchorY),va=En(Qn,ye).point,_a={},xa=vn(Jr,qn,!1,Ze,Y,ye,Ee,ve.glyphOffsetArray,or,$t,va,Qn,_a,Ur);Hr=xa.useVertical,(xa.notEnoughRoom||Hr||xa.needsFlipping&&vn(Jr,qn,!0,Ze,Y,ye,Ee,ve.glyphOffsetArray,or,$t,va,Qn,_a,Ur).notEnoughRoom)&&ca(Jr.numGlyphs,$t)}$?ve.text.dynamicLayoutVertexBuffer.updateData($t):ve.icon.dynamicLayoutVertexBuffer.updateData($t)}function ya(ve,Y,de,$,ye,Ee,Pe,Ze,ft,Mt,Ht){var $t=Ze.glyphStartIndex+Ze.numGlyphs,or=Ze.lineStartIndex,Tr=Ze.lineStartIndex+Ze.lineLength,Ur=Y.getoffsetX(Ze.glyphStartIndex),Hr=Y.getoffsetX($t-1),Br=Fn(ve*Ur,de,$,ye,Ee,Pe,Ze.segment,or,Tr,ft,Mt,Ht);if(!Br)return null;var Jr=Fn(ve*Hr,de,$,ye,Ee,Pe,Ze.segment,or,Tr,ft,Mt,Ht);return Jr?{first:Br,last:Jr}:null}function pr(ve,Y,de,$){if(ve===e.WritingMode.horizontal){var ye=Math.abs(de.y-Y.y),Ee=Math.abs(de.x-Y.x)*$;if(ye>Ee)return{useVertical:!0}}return(ve===e.WritingMode.vertical?Y.y<de.y:Y.x>de.x)?{needsFlipping:!0}:null}function vn(ve,Y,de,$,ye,Ee,Pe,Ze,ft,Mt,Ht,$t,or,Tr){var Ur=Y/24,Hr=ve.lineOffsetX*Ur,Br=ve.lineOffsetY*Ur,Jr;if(ve.numGlyphs>1){var hn=ve.glyphStartIndex+ve.numGlyphs,kn=ve.lineStartIndex,Nn=ve.lineStartIndex+ve.lineLength,Kn=ya(Ur,Ze,Hr,Br,de,Ht,$t,ve,ft,Ee,or);if(!Kn)return{notEnoughRoom:!0};var qn=En(Kn.first.point,Pe).point,Qn=En(Kn.last.point,Pe).point;if($&&!de){var va=pr(ve.writingMode,qn,Qn,Tr);if(va)return va}Jr=[Kn.first];for(var _a=ve.glyphStartIndex+1;_a<hn-1;_a++)Jr.push(Fn(Ur*Ze.getoffsetX(_a),Hr,Br,de,Ht,$t,ve.segment,kn,Nn,ft,Ee,or));Jr.push(Kn.last)}else{if($&&!de){var xa=En($t,ye).point,Ma=ve.lineStartIndex+ve.segment+1,Pa=new e.Point(ft.getx(Ma),ft.gety(Ma)),Ga=En(Pa,ye),ni=Ga.signedDistanceFromCamera>0?Ga.point:$r($t,Pa,xa,1,ye),Ci=pr(ve.writingMode,xa,ni,Tr);if(Ci)return Ci}var li=Fn(Ur*Ze.getoffsetX(ve.glyphStartIndex),Hr,Br,de,Ht,$t,ve.segment,ve.lineStartIndex,ve.lineStartIndex+ve.lineLength,ft,Ee,or);if(!li)return{notEnoughRoom:!0};Jr=[li]}for(var vi=0,Ua=Jr;vi<Ua.length;vi+=1){var Li=Ua[vi];e.addDynamicAttributes(Mt,Li.point,Li.angle)}return{}}function $r(ve,Y,de,$,ye){var Ee=En(ve.add(ve.sub(Y)._unit()),ye).point,Pe=de.sub(Ee);return de.add(Pe._mult($/Pe.mag()))}function Fn(ve,Y,de,$,ye,Ee,Pe,Ze,ft,Mt,Ht,$t){var or=$?ve-Y:ve+Y,Tr=or>0?1:-1,Ur=0;$&&(Tr*=-1,Ur=Math.PI),Tr<0&&(Ur+=Math.PI);for(var Hr=Tr>0?Ze+Pe:Ze+Pe+1,Br=ye,Jr=ye,hn=0,kn=0,Nn=Math.abs(or),Kn=[];hn+kn<=Nn;){if(Hr+=Tr,Hr<Ze||Hr>=ft)return null;if(Jr=Br,Kn.push(Br),Br=$t[Hr],Br===void 0){var qn=new e.Point(Mt.getx(Hr),Mt.gety(Hr)),Qn=En(qn,Ht);if(Qn.signedDistanceFromCamera>0)Br=$t[Hr]=Qn.point;else{var va=Hr-Tr,_a=hn===0?Ee:new e.Point(Mt.getx(va),Mt.gety(va));Br=$r(_a,qn,Jr,Nn-hn+1,Ht)}}hn+=kn,kn=Jr.dist(Br)}var xa=(Nn-hn)/kn,Ma=Br.sub(Jr),Pa=Ma.mult(xa)._add(Jr);Pa._add(Ma._unit()._perp()._mult(de*Tr));var Ga=Ur+Math.atan2(Br.y-Jr.y,Br.x-Jr.x);return Kn.push(Pa),{point:Pa,angle:Ga,path:Kn}}var Bn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ca(ve,Y){for(var de=0;de<ve;de++){var $=Y.length;Y.resize($+4),Y.float32.set(Bn,$*3)}}function ta(ve,Y,de){var $=Y[0],ye=Y[1];return ve[0]=de[0]*$+de[4]*ye+de[12],ve[1]=de[1]*$+de[5]*ye+de[13],ve[3]=de[3]*$+de[7]*ye+de[15],ve}var Un=100,la=function(Y,de,$){de===void 0&&(de=new xr(Y.width+2*Un,Y.height+2*Un,25)),$===void 0&&($=new xr(Y.width+2*Un,Y.height+2*Un,25)),this.transform=Y,this.grid=de,this.ignoredGrid=$,this.pitchfactor=Math.cos(Y._pitch)*Y.cameraToCenterDistance,this.screenRightBoundary=Y.width+Un,this.screenBottomBoundary=Y.height+Un,this.gridRightBoundary=Y.width+2*Un,this.gridBottomBoundary=Y.height+2*Un};la.prototype.placeCollisionBox=function(Y,de,$,ye,Ee){var Pe=this.projectAndGetPerspectiveRatio(ye,Y.anchorPointX,Y.anchorPointY),Ze=$*Pe.perspectiveRatio,ft=Y.x1*Ze+Pe.point.x,Mt=Y.y1*Ze+Pe.point.y,Ht=Y.x2*Ze+Pe.point.x,$t=Y.y2*Ze+Pe.point.y;return!this.isInsideGrid(ft,Mt,Ht,$t)||!de&&this.grid.hitTest(ft,Mt,Ht,$t,Ee)?{box:[],offscreen:!1}:{box:[ft,Mt,Ht,$t],offscreen:this.isOffscreen(ft,Mt,Ht,$t)}},la.prototype.placeCollisionCircles=function(Y,de,$,ye,Ee,Pe,Ze,ft,Mt,Ht,$t,or,Tr){var Ur=[],Hr=new e.Point(de.anchorX,de.anchorY),Br=En(Hr,Pe),Jr=ea(this.transform.cameraToCenterDistance,Br.signedDistanceFromCamera),hn=Ht?Ee/Jr:Ee*Jr,kn=hn/e.ONE_EM,Nn=En(Hr,Ze).point,Kn={},qn=de.lineOffsetX*kn,Qn=de.lineOffsetY*kn,va=ya(kn,ye,qn,Qn,!1,Nn,Hr,de,$,Ze,Kn),_a=!1,xa=!1,Ma=!0;if(va){for(var Pa=or*.5*Jr+Tr,Ga=new e.Point(-Un,-Un),ni=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),Ci=new Er,li=va.first,vi=va.last,Ua=[],Li=li.path.length-1;Li>=1;Li--)Ua.push(li.path[Li]);for(var zi=1;zi<vi.path.length;zi++)Ua.push(vi.path[zi]);var Bi=Pa*2.5;if(ft){var bi=Ua.map(function(Pu){return En(Pu,ft)});bi.some(function(Pu){return Pu.signedDistanceFromCamera<=0})?Ua=[]:Ua=bi.map(function(Pu){return Pu.point})}var Zi=[];if(Ua.length>0){for(var ii=Ua[0].clone(),_i=Ua[0].clone(),wo=1;wo<Ua.length;wo++)ii.x=Math.min(ii.x,Ua[wo].x),ii.y=Math.min(ii.y,Ua[wo].y),_i.x=Math.max(_i.x,Ua[wo].x),_i.y=Math.max(_i.y,Ua[wo].y);ii.x>=Ga.x&&_i.x<=ni.x&&ii.y>=Ga.y&&_i.y<=ni.y?Zi=[Ua]:_i.x<Ga.x||ii.x>ni.x||_i.y<Ga.y||ii.y>ni.y?Zi=[]:Zi=e.clipLine([Ua],Ga.x,Ga.y,ni.x,ni.y)}for(var Vo=0,Kl=Zi;Vo<Kl.length;Vo+=1){var Jl=Kl[Vo];Ci.reset(Jl,Pa*.25);var ku=0;Ci.length<=.5*Pa?ku=1:ku=Math.ceil(Ci.paddedLength/Bi)+1;for(var Eu=0;Eu<ku;Eu++){var rf=Eu/Math.max(ku-1,1),Cu=Ci.lerp(rf),qs=Cu.x+Un,kf=Cu.y+Un;Ur.push(qs,kf,Pa,0);var Es=qs-Pa,Rl=kf-Pa,Lu=qs+Pa,du=kf+Pa;if(Ma=Ma&&this.isOffscreen(Es,Rl,Lu,du),xa=xa||this.isInsideGrid(Es,Rl,Lu,du),!Y&&this.grid.hitTestCircle(qs,kf,Pa,$t)&&(_a=!0,!Mt))return{circles:[],offscreen:!1,collisionDetected:_a}}}}return{circles:!Mt&&_a||!xa?[]:Ur,offscreen:Ma,collisionDetected:_a}},la.prototype.queryRenderedSymbols=function(Y){if(Y.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var de=[],$=1/0,ye=1/0,Ee=-1/0,Pe=-1/0,Ze=0,ft=Y;Ze<ft.length;Ze+=1){var Mt=ft[Ze],Ht=new e.Point(Mt.x+Un,Mt.y+Un);$=Math.min($,Ht.x),ye=Math.min(ye,Ht.y),Ee=Math.max(Ee,Ht.x),Pe=Math.max(Pe,Ht.y),de.push(Ht)}for(var $t=this.grid.query($,ye,Ee,Pe).concat(this.ignoredGrid.query($,ye,Ee,Pe)),or={},Tr={},Ur=0,Hr=$t;Ur<Hr.length;Ur+=1){var Br=Hr[Ur],Jr=Br.key;if(or[Jr.bucketInstanceId]===void 0&&(or[Jr.bucketInstanceId]={}),!or[Jr.bucketInstanceId][Jr.featureIndex]){var hn=[new e.Point(Br.x1,Br.y1),new e.Point(Br.x2,Br.y1),new e.Point(Br.x2,Br.y2),new e.Point(Br.x1,Br.y2)];!e.polygonIntersectsPolygon(de,hn)||(or[Jr.bucketInstanceId][Jr.featureIndex]=!0,Tr[Jr.bucketInstanceId]===void 0&&(Tr[Jr.bucketInstanceId]=[]),Tr[Jr.bucketInstanceId].push(Jr.featureIndex))}}return Tr},la.prototype.insertCollisionBox=function(Y,de,$,ye,Ee){var Pe=de?this.ignoredGrid:this.grid,Ze={bucketInstanceId:$,featureIndex:ye,collisionGroupID:Ee};Pe.insert(Ze,Y[0],Y[1],Y[2],Y[3])},la.prototype.insertCollisionCircles=function(Y,de,$,ye,Ee){for(var Pe=de?this.ignoredGrid:this.grid,Ze={bucketInstanceId:$,featureIndex:ye,collisionGroupID:Ee},ft=0;ft<Y.length;ft+=4)Pe.insertCircle(Ze,Y[ft],Y[ft+1],Y[ft+2])},la.prototype.projectAndGetPerspectiveRatio=function(Y,de,$){var ye=[de,$,0,1];ta(ye,ye,Y);var Ee=new e.Point((ye[0]/ye[3]+1)/2*this.transform.width+Un,(-ye[1]/ye[3]+1)/2*this.transform.height+Un);return{point:Ee,perspectiveRatio:.5+.5*(this.transform.cameraToCenterDistance/ye[3])}},la.prototype.isOffscreen=function(Y,de,$,ye){return $<Un||Y>=this.screenRightBoundary||ye<Un||de>this.screenBottomBoundary},la.prototype.isInsideGrid=function(Y,de,$,ye){return $>=0&&Y<this.gridRightBoundary&&ye>=0&&de<this.gridBottomBoundary},la.prototype.getViewportMatrix=function(){var Y=e.identity([]);return e.translate(Y,Y,[-Un,-Un,0]),Y};function da(ve,Y,de){return Y*(e.EXTENT/(ve.tileSize*Math.pow(2,de-ve.tileID.overscaledZ)))}var ur=function(Y,de,$,ye){Y?this.opacity=Math.max(0,Math.min(1,Y.opacity+(Y.placed?de:-de))):this.opacity=ye&&$?1:0,this.placed=$};ur.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Dr=function(Y,de,$,ye,Ee){this.text=new ur(Y?Y.text:null,de,$,Ee),this.icon=new ur(Y?Y.icon:null,de,ye,Ee)};Dr.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var sn=function(Y,de,$){this.text=Y,this.icon=de,this.skipFade=$},tn=function(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]},mn=function(Y,de,$,ye,Ee){this.bucketInstanceId=Y,this.featureIndex=de,this.sourceLayerIndex=$,this.bucketIndex=ye,this.tileID=Ee},wn=function(Y){this.crossSourceCollisions=Y,this.maxGroupID=0,this.collisionGroups={}};wn.prototype.get=function(Y){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[Y]){var de=++this.maxGroupID;this.collisionGroups[Y]={ID:de,predicate:function($){return $.collisionGroupID===de}}}return this.collisionGroups[Y]};function gn(ve,Y,de,$,ye){var Ee=e.getAnchorAlignment(ve),Pe=Ee.horizontalAlign,Ze=Ee.verticalAlign,ft=-(Pe-.5)*Y,Mt=-(Ze-.5)*de,Ht=e.evaluateVariableOffset(ve,$);return new e.Point(ft+Ht[0]*ye,Mt+Ht[1]*ye)}function mr(ve,Y,de,$,ye,Ee){var Pe=ve.x1,Ze=ve.x2,ft=ve.y1,Mt=ve.y2,Ht=ve.anchorPointX,$t=ve.anchorPointY,or=new e.Point(Y,de);return $&&or._rotate(ye?Ee:-Ee),{x1:Pe+or.x,y1:ft+or.y,x2:Ze+or.x,y2:Mt+or.y,anchorPointX:Ht,anchorPointY:$t}}var rr=function(Y,de,$,ye){this.transform=Y.clone(),this.collisionIndex=new la(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=de,this.retainedQueryData={},this.collisionGroups=new wn($),this.collisionCircleArrays={},this.prevPlacement=ye,ye&&(ye.prevPlacement=void 0),this.placedOrientations={}};rr.prototype.getBucketParts=function(Y,de,$,ye){var Ee=$.getBucket(de),Pe=$.latestFeatureIndex;if(!(!Ee||!Pe||de.id!==Ee.layerIds[0])){var Ze=$.collisionBoxArray,ft=Ee.layers[0].layout,Mt=Math.pow(2,this.transform.zoom-$.tileID.overscaledZ),Ht=$.tileSize/e.EXTENT,$t=this.transform.calculatePosMatrix($.tileID.toUnwrapped()),or=ft.get("text-pitch-alignment")==="map",Tr=ft.get("text-rotation-alignment")==="map",Ur=da($,1,this.transform.zoom),Hr=Wr($t,or,Tr,this.transform,Ur),Br=null;if(or){var Jr=Rn($t,or,Tr,this.transform,Ur);Br=e.multiply([],this.transform.labelPlaneMatrix,Jr)}this.retainedQueryData[Ee.bucketInstanceId]=new mn(Ee.bucketInstanceId,Pe,Ee.sourceLayerIndex,Ee.index,$.tileID);var hn={bucket:Ee,layout:ft,posMatrix:$t,textLabelPlaneMatrix:Hr,labelToScreenMatrix:Br,scale:Mt,textPixelRatio:Ht,holdingForFade:$.holdingForFade(),collisionBoxArray:Ze,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(Ee.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(Ee.sourceID)};if(ye)for(var kn=0,Nn=Ee.sortKeyRanges;kn<Nn.length;kn+=1){var Kn=Nn[kn],qn=Kn.sortKey,Qn=Kn.symbolInstanceStart,va=Kn.symbolInstanceEnd;Y.push({sortKey:qn,symbolInstanceStart:Qn,symbolInstanceEnd:va,parameters:hn})}else Y.push({symbolInstanceStart:0,symbolInstanceEnd:Ee.symbolInstances.length,parameters:hn})}},rr.prototype.attemptAnchorPlacement=function(Y,de,$,ye,Ee,Pe,Ze,ft,Mt,Ht,$t,or,Tr,Ur,Hr){var Br=[or.textOffset0,or.textOffset1],Jr=gn(Y,$,ye,Br,Ee),hn=this.collisionIndex.placeCollisionBox(mr(de,Jr.x,Jr.y,Pe,Ze,this.transform.angle),$t,ft,Mt,Ht.predicate);if(Hr){var kn=this.collisionIndex.placeCollisionBox(mr(Hr,Jr.x,Jr.y,Pe,Ze,this.transform.angle),$t,ft,Mt,Ht.predicate);if(kn.box.length===0)return}if(hn.box.length>0){var Nn;return this.prevPlacement&&this.prevPlacement.variableOffsets[or.crossTileID]&&this.prevPlacement.placements[or.crossTileID]&&this.prevPlacement.placements[or.crossTileID].text&&(Nn=this.prevPlacement.variableOffsets[or.crossTileID].anchor),this.variableOffsets[or.crossTileID]={textOffset:Br,width:$,height:ye,anchor:Y,textBoxScale:Ee,prevAnchor:Nn},this.markUsedJustification(Tr,Y,or,Ur),Tr.allowVerticalPlacement&&(this.markUsedOrientation(Tr,Ur,or),this.placedOrientations[or.crossTileID]=Ur),{shift:Jr,placedGlyphBoxes:hn}}},rr.prototype.placeLayerBucketPart=function(Y,de,$){var ye=this,Ee=Y.parameters,Pe=Ee.bucket,Ze=Ee.layout,ft=Ee.posMatrix,Mt=Ee.textLabelPlaneMatrix,Ht=Ee.labelToScreenMatrix,$t=Ee.textPixelRatio,or=Ee.holdingForFade,Tr=Ee.collisionBoxArray,Ur=Ee.partiallyEvaluatedTextSize,Hr=Ee.collisionGroup,Br=Ze.get("text-optional"),Jr=Ze.get("icon-optional"),hn=Ze.get("text-allow-overlap"),kn=Ze.get("icon-allow-overlap"),Nn=Ze.get("text-rotation-alignment")==="map",Kn=Ze.get("text-pitch-alignment")==="map",qn=Ze.get("icon-text-fit")!=="none",Qn=Ze.get("symbol-z-order")==="viewport-y",va=hn&&(kn||!Pe.hasIconData()||Jr),_a=kn&&(hn||!Pe.hasTextData()||Br);!Pe.collisionArrays&&Tr&&Pe.deserializeCollisionBoxes(Tr);var xa=function(li,vi){if(!de[li.crossTileID]){if(or){ye.placements[li.crossTileID]=new sn(!1,!1,!1);return}var Ua=!1,Li=!1,zi=!0,Bi=null,bi={box:null,offscreen:null},Zi={box:null,offscreen:null},ii=null,_i=null,wo=null,Vo=0,Kl=0,Jl=0;vi.textFeatureIndex?Vo=vi.textFeatureIndex:li.useRuntimeCollisionCircles&&(Vo=li.featureIndex),vi.verticalTextFeatureIndex&&(Kl=vi.verticalTextFeatureIndex);var ku=vi.textBox;if(ku){var Eu=function(Lo){var yl=e.WritingMode.horizontal;if(Pe.allowVerticalPlacement&&!Lo&&ye.prevPlacement){var ml=ye.prevPlacement.placedOrientations[li.crossTileID];ml&&(ye.placedOrientations[li.crossTileID]=ml,yl=ml,ye.markUsedOrientation(Pe,yl,li))}return yl},rf=function(Lo,yl){if(Pe.allowVerticalPlacement&&li.numVerticalGlyphVertices>0&&vi.verticalTextBox)for(var ml=0,fh=Pe.writingModes;ml<fh.length;ml+=1){var cv=fh[ml];if(cv===e.WritingMode.vertical?(bi=yl(),Zi=bi):bi=Lo(),bi&&bi.box&&bi.box.length)break}else bi=Lo()};if(Ze.get("text-variable-anchor")){var Es=Ze.get("text-variable-anchor");if(ye.prevPlacement&&ye.prevPlacement.variableOffsets[li.crossTileID]){var Rl=ye.prevPlacement.variableOffsets[li.crossTileID];Es.indexOf(Rl.anchor)>0&&(Es=Es.filter(function(Lo){return Lo!==Rl.anchor}),Es.unshift(Rl.anchor))}var Lu=function(Lo,yl,ml){for(var fh=Lo.x2-Lo.x1,cv=Lo.y2-Lo.y1,o0=li.textBoxScale,s0=qn&&!kn?yl:null,Oc={box:[],offscreen:!1},l0=hn?Es.length*2:Es.length,ch=0;ch<l0;++ch){var u0=Es[ch%Es.length],f0=ch>=Es.length,hv=ye.attemptAnchorPlacement(u0,Lo,fh,cv,o0,Nn,Kn,$t,ft,Hr,f0,li,Pe,ml,s0);if(hv&&(Oc=hv.placedGlyphBoxes,Oc&&Oc.box&&Oc.box.length)){Ua=!0,Bi=hv.shift;break}}return Oc},du=function(){return Lu(ku,vi.iconBox,e.WritingMode.horizontal)},Pu=function(){var Lo=vi.verticalTextBox,yl=bi&&bi.box&&bi.box.length;return Pe.allowVerticalPlacement&&!yl&&li.numVerticalGlyphVertices>0&&Lo?Lu(Lo,vi.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}};rf(du,Pu),bi&&(Ua=bi.box,zi=bi.offscreen);var oh=Eu(bi&&bi.box);if(!Ua&&ye.prevPlacement){var Nf=ye.prevPlacement.variableOffsets[li.crossTileID];Nf&&(ye.variableOffsets[li.crossTileID]=Nf,ye.markUsedJustification(Pe,Nf.anchor,li,oh))}}else{var Cu=function(Lo,yl){var ml=ye.collisionIndex.placeCollisionBox(Lo,hn,$t,ft,Hr.predicate);return ml&&ml.box&&ml.box.length&&(ye.markUsedOrientation(Pe,yl,li),ye.placedOrientations[li.crossTileID]=yl),ml},qs=function(){return Cu(ku,e.WritingMode.horizontal)},kf=function(){var Lo=vi.verticalTextBox;return Pe.allowVerticalPlacement&&li.numVerticalGlyphVertices>0&&Lo?Cu(Lo,e.WritingMode.vertical):{box:null,offscreen:null}};rf(qs,kf),Eu(bi&&bi.box&&bi.box.length)}}if(ii=bi,Ua=ii&&ii.box&&ii.box.length>0,zi=ii&&ii.offscreen,li.useRuntimeCollisionCircles){var xs=Pe.text.placedSymbolArray.get(li.centerJustifiedTextSymbolIndex),zc=e.evaluateSizeForFeature(Pe.textSizeData,Ur,xs),Ns=Ze.get("text-padding"),Fc=li.collisionCircleDiameter;_i=ye.collisionIndex.placeCollisionCircles(hn,xs,Pe.lineVertexArray,Pe.glyphOffsetArray,zc,ft,Mt,Ht,$,Kn,Hr.predicate,Fc,Ns),Ua=hn||_i.circles.length>0&&!_i.collisionDetected,zi=zi&&_i.offscreen}if(vi.iconFeatureIndex&&(Jl=vi.iconFeatureIndex),vi.iconBox){var sh=function(Lo){var yl=qn&&Bi?mr(Lo,Bi.x,Bi.y,Nn,Kn,ye.transform.angle):Lo;return ye.collisionIndex.placeCollisionBox(yl,kn,$t,ft,Hr.predicate)};Zi&&Zi.box&&Zi.box.length&&vi.verticalIconBox?(wo=sh(vi.verticalIconBox),Li=wo.box.length>0):(wo=sh(vi.iconBox),Li=wo.box.length>0),zi=zi&&wo.offscreen}var lh=Br||li.numHorizontalGlyphVertices===0&&li.numVerticalGlyphVertices===0,Lp=Jr||li.numIconVertices===0;if(!lh&&!Lp?Li=Ua=Li&&Ua:Lp?lh||(Li=Li&&Ua):Ua=Li&&Ua,Ua&&ii&&ii.box&&(Zi&&Zi.box&&Kl?ye.collisionIndex.insertCollisionBox(ii.box,Ze.get("text-ignore-placement"),Pe.bucketInstanceId,Kl,Hr.ID):ye.collisionIndex.insertCollisionBox(ii.box,Ze.get("text-ignore-placement"),Pe.bucketInstanceId,Vo,Hr.ID)),Li&&wo&&ye.collisionIndex.insertCollisionBox(wo.box,Ze.get("icon-ignore-placement"),Pe.bucketInstanceId,Jl,Hr.ID),_i&&(Ua&&ye.collisionIndex.insertCollisionCircles(_i.circles,Ze.get("text-ignore-placement"),Pe.bucketInstanceId,Vo,Hr.ID),$)){var uh=Pe.bucketInstanceId,rc=ye.collisionCircleArrays[uh];rc===void 0&&(rc=ye.collisionCircleArrays[uh]=new tn);for(var nc=0;nc<_i.circles.length;nc+=4)rc.circles.push(_i.circles[nc+0]),rc.circles.push(_i.circles[nc+1]),rc.circles.push(_i.circles[nc+2]),rc.circles.push(_i.collisionDetected?1:0)}ye.placements[li.crossTileID]=new sn(Ua||va,Li||_a,zi||Pe.justReloaded),de[li.crossTileID]=!0}};if(Qn)for(var Ma=Pe.getSortedSymbolIndexes(this.transform.angle),Pa=Ma.length-1;Pa>=0;--Pa){var Ga=Ma[Pa];xa(Pe.symbolInstances.get(Ga),Pe.collisionArrays[Ga])}else for(var ni=Y.symbolInstanceStart;ni<Y.symbolInstanceEnd;ni++)xa(Pe.symbolInstances.get(ni),Pe.collisionArrays[ni]);if($&&Pe.bucketInstanceId in this.collisionCircleArrays){var Ci=this.collisionCircleArrays[Pe.bucketInstanceId];e.invert(Ci.invProjMatrix,ft),Ci.viewportMatrix=this.collisionIndex.getViewportMatrix()}Pe.justReloaded=!1},rr.prototype.markUsedJustification=function(Y,de,$,ye){var Ee={left:$.leftJustifiedTextSymbolIndex,center:$.centerJustifiedTextSymbolIndex,right:$.rightJustifiedTextSymbolIndex},Pe;ye===e.WritingMode.vertical?Pe=$.verticalPlacedTextSymbolIndex:Pe=Ee[e.getAnchorJustification(de)];for(var Ze=[$.leftJustifiedTextSymbolIndex,$.centerJustifiedTextSymbolIndex,$.rightJustifiedTextSymbolIndex,$.verticalPlacedTextSymbolIndex],ft=0,Mt=Ze;ft<Mt.length;ft+=1){var Ht=Mt[ft];Ht>=0&&(Pe>=0&&Ht!==Pe?Y.text.placedSymbolArray.get(Ht).crossTileID=0:Y.text.placedSymbolArray.get(Ht).crossTileID=$.crossTileID)}},rr.prototype.markUsedOrientation=function(Y,de,$){for(var ye=de===e.WritingMode.horizontal||de===e.WritingMode.horizontalOnly?de:0,Ee=de===e.WritingMode.vertical?de:0,Pe=[$.leftJustifiedTextSymbolIndex,$.centerJustifiedTextSymbolIndex,$.rightJustifiedTextSymbolIndex],Ze=0,ft=Pe;Ze<ft.length;Ze+=1){var Mt=ft[Ze];Y.text.placedSymbolArray.get(Mt).placedOrientation=ye}$.verticalPlacedTextSymbolIndex&&(Y.text.placedSymbolArray.get($.verticalPlacedTextSymbolIndex).placedOrientation=Ee)},rr.prototype.commit=function(Y){this.commitTime=Y,this.zoomAtLastRecencyCheck=this.transform.zoom;var de=this.prevPlacement,$=!1;this.prevZoomAdjustment=de?de.zoomAdjustment(this.transform.zoom):0;var ye=de?de.symbolFadeChange(Y):1,Ee=de?de.opacities:{},Pe=de?de.variableOffsets:{},Ze=de?de.placedOrientations:{};for(var ft in this.placements){var Mt=this.placements[ft],Ht=Ee[ft];Ht?(this.opacities[ft]=new Dr(Ht,ye,Mt.text,Mt.icon),$=$||Mt.text!==Ht.text.placed||Mt.icon!==Ht.icon.placed):(this.opacities[ft]=new Dr(null,ye,Mt.text,Mt.icon,Mt.skipFade),$=$||Mt.text||Mt.icon)}for(var $t in Ee){var or=Ee[$t];if(!this.opacities[$t]){var Tr=new Dr(or,ye,!1,!1);Tr.isHidden()||(this.opacities[$t]=Tr,$=$||or.text.placed||or.icon.placed)}}for(var Ur in Pe)!this.variableOffsets[Ur]&&this.opacities[Ur]&&!this.opacities[Ur].isHidden()&&(this.variableOffsets[Ur]=Pe[Ur]);for(var Hr in Ze)!this.placedOrientations[Hr]&&this.opacities[Hr]&&!this.opacities[Hr].isHidden()&&(this.placedOrientations[Hr]=Ze[Hr]);$?this.lastPlacementChangeTime=Y:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=de?de.lastPlacementChangeTime:Y)},rr.prototype.updateLayerOpacities=function(Y,de){for(var $={},ye=0,Ee=de;ye<Ee.length;ye+=1){var Pe=Ee[ye],Ze=Pe.getBucket(Y);Ze&&Pe.latestFeatureIndex&&Y.id===Ze.layerIds[0]&&this.updateBucketOpacities(Ze,$,Pe.collisionBoxArray)}},rr.prototype.updateBucketOpacities=function(Y,de,$){var ye=this;Y.hasTextData()&&Y.text.opacityVertexArray.clear(),Y.hasIconData()&&Y.icon.opacityVertexArray.clear(),Y.hasIconCollisionBoxData()&&Y.iconCollisionBox.collisionVertexArray.clear(),Y.hasTextCollisionBoxData()&&Y.textCollisionBox.collisionVertexArray.clear();var Ee=Y.layers[0].layout,Pe=new Dr(null,0,!1,!1,!0),Ze=Ee.get("text-allow-overlap"),ft=Ee.get("icon-allow-overlap"),Mt=Ee.get("text-variable-anchor"),Ht=Ee.get("text-rotation-alignment")==="map",$t=Ee.get("text-pitch-alignment")==="map",or=Ee.get("icon-text-fit")!=="none",Tr=new Dr(null,0,Ze&&(ft||!Y.hasIconData()||Ee.get("icon-optional")),ft&&(Ze||!Y.hasTextData()||Ee.get("text-optional")),!0);!Y.collisionArrays&&$&&(Y.hasIconCollisionBoxData()||Y.hasTextCollisionBoxData())&&Y.deserializeCollisionBoxes($);for(var Ur=function(hn,kn,Nn){for(var Kn=0;Kn<kn/4;Kn++)hn.opacityVertexArray.emplaceBack(Nn)},Hr=function(hn){var kn=Y.symbolInstances.get(hn),Nn=kn.numHorizontalGlyphVertices,Kn=kn.numVerticalGlyphVertices,qn=kn.crossTileID,Qn=de[qn],va=ye.opacities[qn];Qn?va=Pe:va||(va=Tr,ye.opacities[qn]=va),de[qn]=!0;var _a=Nn>0||Kn>0,xa=kn.numIconVertices>0,Ma=ye.placedOrientations[kn.crossTileID],Pa=Ma===e.WritingMode.vertical,Ga=Ma===e.WritingMode.horizontal||Ma===e.WritingMode.horizontalOnly;if(_a){var ni=In(va.text),Ci=Pa?Yn:ni;Ur(Y.text,Nn,Ci);var li=Ga?Yn:ni;Ur(Y.text,Kn,li);var vi=va.text.isHidden();[kn.rightJustifiedTextSymbolIndex,kn.centerJustifiedTextSymbolIndex,kn.leftJustifiedTextSymbolIndex].forEach(function(Jl){Jl>=0&&(Y.text.placedSymbolArray.get(Jl).hidden=vi||Pa?1:0)}),kn.verticalPlacedTextSymbolIndex>=0&&(Y.text.placedSymbolArray.get(kn.verticalPlacedTextSymbolIndex).hidden=vi||Ga?1:0);var Ua=ye.variableOffsets[kn.crossTileID];Ua&&ye.markUsedJustification(Y,Ua.anchor,kn,Ma);var Li=ye.placedOrientations[kn.crossTileID];Li&&(ye.markUsedJustification(Y,"left",kn,Li),ye.markUsedOrientation(Y,Li,kn))}if(xa){var zi=In(va.icon),Bi=!(or&&kn.verticalPlacedIconSymbolIndex&&Pa);if(kn.placedIconSymbolIndex>=0){var bi=Bi?zi:Yn;Ur(Y.icon,kn.numIconVertices,bi),Y.icon.placedSymbolArray.get(kn.placedIconSymbolIndex).hidden=va.icon.isHidden()}if(kn.verticalPlacedIconSymbolIndex>=0){var Zi=Bi?Yn:zi;Ur(Y.icon,kn.numVerticalIconVertices,Zi),Y.icon.placedSymbolArray.get(kn.verticalPlacedIconSymbolIndex).hidden=va.icon.isHidden()}}if(Y.hasIconCollisionBoxData()||Y.hasTextCollisionBoxData()){var ii=Y.collisionArrays[hn];if(ii){var _i=new e.Point(0,0);if(ii.textBox||ii.verticalTextBox){var wo=!0;if(Mt){var Vo=ye.variableOffsets[qn];Vo?(_i=gn(Vo.anchor,Vo.width,Vo.height,Vo.textOffset,Vo.textBoxScale),Ht&&_i._rotate($t?ye.transform.angle:-ye.transform.angle)):wo=!1}ii.textBox&&zr(Y.textCollisionBox.collisionVertexArray,va.text.placed,!wo||Pa,_i.x,_i.y),ii.verticalTextBox&&zr(Y.textCollisionBox.collisionVertexArray,va.text.placed,!wo||Ga,_i.x,_i.y)}var Kl=Boolean(!Ga&&ii.verticalIconBox);ii.iconBox&&zr(Y.iconCollisionBox.collisionVertexArray,va.icon.placed,Kl,or?_i.x:0,or?_i.y:0),ii.verticalIconBox&&zr(Y.iconCollisionBox.collisionVertexArray,va.icon.placed,!Kl,or?_i.x:0,or?_i.y:0)}}},Br=0;Br<Y.symbolInstances.length;Br++)Hr(Br);if(Y.sortFeatures(this.transform.angle),this.retainedQueryData[Y.bucketInstanceId]&&(this.retainedQueryData[Y.bucketInstanceId].featureSortOrder=Y.featureSortOrder),Y.hasTextData()&&Y.text.opacityVertexBuffer&&Y.text.opacityVertexBuffer.updateData(Y.text.opacityVertexArray),Y.hasIconData()&&Y.icon.opacityVertexBuffer&&Y.icon.opacityVertexBuffer.updateData(Y.icon.opacityVertexArray),Y.hasIconCollisionBoxData()&&Y.iconCollisionBox.collisionVertexBuffer&&Y.iconCollisionBox.collisionVertexBuffer.updateData(Y.iconCollisionBox.collisionVertexArray),Y.hasTextCollisionBoxData()&&Y.textCollisionBox.collisionVertexBuffer&&Y.textCollisionBox.collisionVertexBuffer.updateData(Y.textCollisionBox.collisionVertexArray),Y.bucketInstanceId in this.collisionCircleArrays){var Jr=this.collisionCircleArrays[Y.bucketInstanceId];Y.placementInvProjMatrix=Jr.invProjMatrix,Y.placementViewportMatrix=Jr.viewportMatrix,Y.collisionCircleArray=Jr.circles,delete this.collisionCircleArrays[Y.bucketInstanceId]}},rr.prototype.symbolFadeChange=function(Y){return this.fadeDuration===0?1:(Y-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},rr.prototype.zoomAdjustment=function(Y){return Math.max(0,(this.transform.zoom-Y)/1.5)},rr.prototype.hasTransitions=function(Y){return this.stale||Y-this.lastPlacementChangeTime<this.fadeDuration},rr.prototype.stillRecent=function(Y,de){var $=this.zoomAtLastRecencyCheck===de?1-this.zoomAdjustment(de):1;return this.zoomAtLastRecencyCheck=de,this.commitTime+this.fadeDuration*$>Y},rr.prototype.setStale=function(){this.stale=!0};function zr(ve,Y,de,$,ye){ve.emplaceBack(Y?1:0,de?1:0,$||0,ye||0),ve.emplaceBack(Y?1:0,de?1:0,$||0,ye||0),ve.emplaceBack(Y?1:0,de?1:0,$||0,ye||0),ve.emplaceBack(Y?1:0,de?1:0,$||0,ye||0)}var jr=Math.pow(2,25),Sn=Math.pow(2,24),On=Math.pow(2,17),aa=Math.pow(2,16),Zn=Math.pow(2,9),Hn=Math.pow(2,8),pn=Math.pow(2,1);function In(ve){if(ve.opacity===0&&!ve.placed)return 0;if(ve.opacity===1&&ve.placed)return 4294967295;var Y=ve.placed?1:0,de=Math.floor(ve.opacity*127);return de*jr+Y*Sn+de*On+Y*aa+de*Zn+Y*Hn+de*pn+Y}var Yn=0,ua=function(Y){this._sortAcrossTiles=Y.layout.get("symbol-z-order")!=="viewport-y"&&Y.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};ua.prototype.continuePlacement=function(Y,de,$,ye,Ee){for(var Pe=this._bucketParts;this._currentTileIndex<Y.length;){var Ze=Y[this._currentTileIndex];if(de.getBucketParts(Pe,ye,Ze,this._sortAcrossTiles),this._currentTileIndex++,Ee())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Pe.sort(function(Mt,Ht){return Mt.sortKey-Ht.sortKey}));this._currentPartIndex<Pe.length;){var ft=Pe[this._currentPartIndex];if(de.placeLayerBucketPart(ft,this._seenCrossTileIDs,$),this._currentPartIndex++,Ee())return!0}return!1};var Ha=function(Y,de,$,ye,Ee,Pe,Ze){this.placement=new rr(Y,Ee,Pe,Ze),this._currentPlacementIndex=de.length-1,this._forceFullPlacement=$,this._showCollisionBoxes=ye,this._done=!1};Ha.prototype.isDone=function(){return this._done},Ha.prototype.continuePlacement=function(Y,de,$){for(var ye=this,Ee=e.browser.now(),Pe=function(){var $t=e.browser.now()-Ee;return ye._forceFullPlacement?!1:$t>2};this._currentPlacementIndex>=0;){var Ze=Y[this._currentPlacementIndex],ft=de[Ze],Mt=this.placement.collisionIndex.transform.zoom;if(ft.type==="symbol"&&(!ft.minzoom||ft.minzoom<=Mt)&&(!ft.maxzoom||ft.maxzoom>Mt)){this._inProgressLayer||(this._inProgressLayer=new ua(ft));var Ht=this._inProgressLayer.continuePlacement($[ft.source],this.placement,this._showCollisionBoxes,ft,Pe);if(Ht)return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Ha.prototype.commit=function(Y){return this.placement.commit(Y),this.placement};var ka=512/e.EXTENT/2,Ys=function(Y,de,$){this.tileID=Y,this.indexedSymbolInstances={},this.bucketInstanceId=$;for(var ye=0;ye<de.length;ye++){var Ee=de.get(ye),Pe=Ee.key;this.indexedSymbolInstances[Pe]||(this.indexedSymbolInstances[Pe]=[]),this.indexedSymbolInstances[Pe].push({crossTileID:Ee.crossTileID,coord:this.getScaledCoordinates(Ee,Y)})}};Ys.prototype.getScaledCoordinates=function(Y,de){var $=de.canonical.z-this.tileID.canonical.z,ye=ka/Math.pow(2,$);return{x:Math.floor((de.canonical.x*e.EXTENT+Y.anchorX)*ye),y:Math.floor((de.canonical.y*e.EXTENT+Y.anchorY)*ye)}},Ys.prototype.findMatches=function(Y,de,$){for(var ye=this.tileID.canonical.z<de.canonical.z?1:Math.pow(2,this.tileID.canonical.z-de.canonical.z),Ee=0;Ee<Y.length;Ee++){var Pe=Y.get(Ee);if(!Pe.crossTileID){var Ze=this.indexedSymbolInstances[Pe.key];if(!!Ze)for(var ft=this.getScaledCoordinates(Pe,de),Mt=0,Ht=Ze;Mt<Ht.length;Mt+=1){var $t=Ht[Mt];if(Math.abs($t.coord.x-ft.x)<=ye&&Math.abs($t.coord.y-ft.y)<=ye&&!$[$t.crossTileID]){$[$t.crossTileID]=!0,Pe.crossTileID=$t.crossTileID;break}}}}};var No=function(){this.maxCrossTileID=0};No.prototype.generate=function(){return++this.maxCrossTileID};var es=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};es.prototype.handleWrapJump=function(Y){var de=Math.round((Y-this.lng)/360);if(de!==0)for(var $ in this.indexes){var ye=this.indexes[$],Ee={};for(var Pe in ye){var Ze=ye[Pe];Ze.tileID=Ze.tileID.unwrapTo(Ze.tileID.wrap+de),Ee[Ze.tileID.key]=Ze}this.indexes[$]=Ee}this.lng=Y},es.prototype.addBucket=function(Y,de,$){if(this.indexes[Y.overscaledZ]&&this.indexes[Y.overscaledZ][Y.key]){if(this.indexes[Y.overscaledZ][Y.key].bucketInstanceId===de.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(Y.overscaledZ,this.indexes[Y.overscaledZ][Y.key])}for(var ye=0;ye<de.symbolInstances.length;ye++){var Ee=de.symbolInstances.get(ye);Ee.crossTileID=0}this.usedCrossTileIDs[Y.overscaledZ]||(this.usedCrossTileIDs[Y.overscaledZ]={});var Pe=this.usedCrossTileIDs[Y.overscaledZ];for(var Ze in this.indexes){var ft=this.indexes[Ze];if(Number(Ze)>Y.overscaledZ)for(var Mt in ft){var Ht=ft[Mt];Ht.tileID.isChildOf(Y)&&Ht.findMatches(de.symbolInstances,Y,Pe)}else{var $t=Y.scaledTo(Number(Ze)),or=ft[$t.key];or&&or.findMatches(de.symbolInstances,Y,Pe)}}for(var Tr=0;Tr<de.symbolInstances.length;Tr++){var Ur=de.symbolInstances.get(Tr);Ur.crossTileID||(Ur.crossTileID=$.generate(),Pe[Ur.crossTileID]=!0)}return this.indexes[Y.overscaledZ]===void 0&&(this.indexes[Y.overscaledZ]={}),this.indexes[Y.overscaledZ][Y.key]=new Ys(Y,de.symbolInstances,de.bucketInstanceId),!0},es.prototype.removeBucketCrossTileIDs=function(Y,de){for(var $ in de.indexedSymbolInstances)for(var ye=0,Ee=de.indexedSymbolInstances[$];ye<Ee.length;ye+=1){var Pe=Ee[ye];delete this.usedCrossTileIDs[Y][Pe.crossTileID]}},es.prototype.removeStaleBuckets=function(Y){var de=!1;for(var $ in this.indexes){var ye=this.indexes[$];for(var Ee in ye)Y[ye[Ee].bucketInstanceId]||(this.removeBucketCrossTileIDs($,ye[Ee]),delete ye[Ee],de=!0)}return de};var Ls=function(){this.layerIndexes={},this.crossTileIDs=new No,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Ls.prototype.addLayer=function(Y,de,$){var ye=this.layerIndexes[Y.id];ye===void 0&&(ye=this.layerIndexes[Y.id]=new es);var Ee=!1,Pe={};ye.handleWrapJump($);for(var Ze=0,ft=de;Ze<ft.length;Ze+=1){var Mt=ft[Ze],Ht=Mt.getBucket(Y);!Ht||Y.id!==Ht.layerIds[0]||(Ht.bucketInstanceId||(Ht.bucketInstanceId=++this.maxBucketInstanceId),ye.addBucket(Mt.tileID,Ht,this.crossTileIDs)&&(Ee=!0),Pe[Ht.bucketInstanceId]=!0)}return ye.removeStaleBuckets(Pe)&&(Ee=!0),Ee},Ls.prototype.pruneUnusedLayers=function(Y){var de={};Y.forEach(function(ye){de[ye]=!0});for(var $ in this.layerIndexes)de[$]||delete this.layerIndexes[$]};var eo=function(ve,Y){return e.emitValidationErrors(ve,Y&&Y.filter(function(de){return de.identifier!=="source.canvas"}))},Pi=e.pick(Yr,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ws=e.pick(Yr,["setCenter","setZoom","setBearing","setPitch"]),Xs=dn(),ts=function(ve){function Y(de,$){var ye=this;$===void 0&&($={}),ve.call(this),this.map=de,this.dispatcher=new D(fr(),this),this.imageManager=new A,this.imageManager.setEventedParent(this),this.glyphManager=new S(de._requestManager,$.localIdeographFontFamily),this.lineAtlas=new R(256,512),this.crossTileSymbolIndex=new Ls,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());var Ee=this;this._rtlTextPluginCallback=Y.registerForPluginStateChange(function(Pe){var Ze={pluginStatus:Pe.pluginStatus,pluginURL:Pe.pluginURL};Ee.dispatcher.broadcast("syncRTLPluginState",Ze,function(ft,Mt){if(e.triggerPluginCompletionEvent(ft),Mt){var Ht=Mt.every(function(or){return or});if(Ht)for(var $t in Ee.sourceCaches)Ee.sourceCaches[$t].reload()}})}),this.on("data",function(Pe){if(!(Pe.dataType!=="source"||Pe.sourceDataType!=="metadata")){var Ze=ye.sourceCaches[Pe.sourceId];if(!!Ze){var ft=Ze.getSource();if(!(!ft||!ft.vectorLayerIds))for(var Mt in ye._layers){var Ht=ye._layers[Mt];Ht.source===ft.id&&ye._validateLayer(Ht)}}}})}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.loadURL=function($,ye){var Ee=this;ye===void 0&&(ye={}),this.fire(new e.Event("dataloading",{dataType:"style"}));var Pe=typeof ye.validate=="boolean"?ye.validate:!e.isMapboxURL($);$=this.map._requestManager.normalizeStyleURL($,ye.accessToken);var Ze=this.map._requestManager.transformRequest($,e.ResourceType.Style);this._request=e.getJSON(Ze,function(ft,Mt){Ee._request=null,ft?Ee.fire(new e.ErrorEvent(ft)):Mt&&Ee._load(Mt,Pe)})},Y.prototype.loadJSON=function($,ye){var Ee=this;ye===void 0&&(ye={}),this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame(function(){Ee._request=null,Ee._load($,ye.validate!==!1)})},Y.prototype.loadEmpty=function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Xs,!1)},Y.prototype._load=function($,ye){if(!(ye&&eo(this,e.validateStyle($)))){this._loaded=!0,this.stylesheet=$;for(var Ee in $.sources)this.addSource(Ee,$.sources[Ee],{validate:!1});$.sprite?this._loadSprite($.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL($.glyphs);var Pe=_r(this.stylesheet.layers);this._order=Pe.map(function(Ht){return Ht.id}),this._layers={},this._serializedLayers={};for(var Ze=0,ft=Pe;Ze<ft.length;Ze+=1){var Mt=ft[Ze];Mt=e.createStyleLayer(Mt),Mt.setEventedParent(this,{layer:{id:Mt.id}}),this._layers[Mt.id]=Mt,this._serializedLayers[Mt.id]=Mt.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new I(this.stylesheet.light),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}},Y.prototype._loadSprite=function($){var ye=this;this._spriteRequest=h($,this.map._requestManager,function(Ee,Pe){if(ye._spriteRequest=null,Ee)ye.fire(new e.ErrorEvent(Ee));else if(Pe)for(var Ze in Pe)ye.imageManager.addImage(Ze,Pe[Ze]);ye.imageManager.setLoaded(!0),ye._availableImages=ye.imageManager.listImages(),ye.dispatcher.broadcast("setImages",ye._availableImages),ye.fire(new e.Event("data",{dataType:"style"}))})},Y.prototype._validateLayer=function($){var ye=this.sourceCaches[$.source];if(!!ye){var Ee=$.sourceLayer;if(!!Ee){var Pe=ye.getSource();(Pe.type==="geojson"||Pe.vectorLayerIds&&Pe.vectorLayerIds.indexOf(Ee)===-1)&&this.fire(new e.ErrorEvent(new Error('Source layer "'+Ee+'" does not exist on source "'+Pe.id+'" as specified by style layer "'+$.id+'"')))}}},Y.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var $ in this.sourceCaches)if(!this.sourceCaches[$].loaded())return!1;return!!this.imageManager.isLoaded()},Y.prototype._serializeLayers=function($){for(var ye=[],Ee=0,Pe=$;Ee<Pe.length;Ee+=1){var Ze=Pe[Ee],ft=this._layers[Ze];ft.type!=="custom"&&ye.push(ft.serialize())}return ye},Y.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var $ in this.sourceCaches)if(this.sourceCaches[$].hasTransition())return!0;for(var ye in this._layers)if(this._layers[ye].hasTransition())return!0;return!1},Y.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},Y.prototype.update=function($){if(!!this._loaded){var ye=this._changed;if(this._changed){var Ee=Object.keys(this._updatedLayers),Pe=Object.keys(this._removedLayers);(Ee.length||Pe.length)&&this._updateWorkerLayers(Ee,Pe);for(var Ze in this._updatedSources){var ft=this._updatedSources[Ze];ft==="reload"?this._reloadSource(Ze):ft==="clear"&&this._clearSource(Ze)}this._updateTilesForChangedImages();for(var Mt in this._updatedPaintProps)this._layers[Mt].updateTransitions($);this.light.updateTransitions($),this._resetUpdates()}for(var Ht in this.sourceCaches)this.sourceCaches[Ht].used=!1;for(var $t=0,or=this._order;$t<or.length;$t+=1){var Tr=or[$t],Ur=this._layers[Tr];Ur.recalculate($,this._availableImages),!Ur.isHidden($.zoom)&&Ur.source&&(this.sourceCaches[Ur.source].used=!0)}this.light.recalculate($),this.z=$.zoom,ye&&this.fire(new e.Event("data",{dataType:"style"}))}},Y.prototype._updateTilesForChangedImages=function(){var $=Object.keys(this._changedImages);if($.length){for(var ye in this.sourceCaches)this.sourceCaches[ye].reloadTilesForDependencies(["icons","patterns"],$);this._changedImages={}}},Y.prototype._updateWorkerLayers=function($,ye){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers($),removedIds:ye})},Y.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},Y.prototype.setState=function($){var ye=this;if(this._checkLoaded(),eo(this,e.validateStyle($)))return!1;$=e.clone$1($),$.layers=_r($.layers);var Ee=Rr(this.serialize(),$).filter(function(Ze){return!(Ze.command in Ws)});if(Ee.length===0)return!1;var Pe=Ee.filter(function(Ze){return!(Ze.command in Pi)});if(Pe.length>0)throw new Error("Unimplemented: "+Pe.map(function(Ze){return Ze.command}).join(", ")+".");return Ee.forEach(function(Ze){Ze.command!=="setTransition"&&ye[Ze.command].apply(ye,Ze.args)}),this.stylesheet=$,!0},Y.prototype.addImage=function($,ye){if(this.getImage($))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage($,ye),this._availableImages=this.imageManager.listImages(),this._changedImages[$]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},Y.prototype.updateImage=function($,ye){this.imageManager.updateImage($,ye)},Y.prototype.getImage=function($){return this.imageManager.getImage($)},Y.prototype.removeImage=function($){if(!this.getImage($))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage($),this._availableImages=this.imageManager.listImages(),this._changedImages[$]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},Y.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},Y.prototype.addSource=function($,ye,Ee){var Pe=this;if(Ee===void 0&&(Ee={}),this._checkLoaded(),this.sourceCaches[$]!==void 0)throw new Error("There is already a source with this ID");if(!ye.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(ye).join(", ")+".");var Ze=["vector","raster","geojson","video","image"],ft=Ze.indexOf(ye.type)>=0;if(!(ft&&this._validate(e.validateStyle.source,"sources."+$,ye,null,Ee))){this.map&&this.map._collectResourceTiming&&(ye.collectResourceTiming=!0);var Mt=this.sourceCaches[$]=new ot($,ye,this.dispatcher);Mt.style=this,Mt.setEventedParent(this,function(){return{isSourceLoaded:Pe.loaded(),source:Mt.serialize(),sourceId:$}}),Mt.onAdd(this.map),this._changed=!0}},Y.prototype.removeSource=function($){if(this._checkLoaded(),this.sourceCaches[$]===void 0)throw new Error("There is no source with this ID");for(var ye in this._layers)if(this._layers[ye].source===$)return this.fire(new e.ErrorEvent(new Error('Source "'+$+'" cannot be removed while layer "'+ye+'" is using it.')));var Ee=this.sourceCaches[$];delete this.sourceCaches[$],delete this._updatedSources[$],Ee.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:$})),Ee.setEventedParent(null),Ee.clearTiles(),Ee.onRemove&&Ee.onRemove(this.map),this._changed=!0},Y.prototype.setGeoJSONSourceData=function($,ye){this._checkLoaded();var Ee=this.sourceCaches[$].getSource();Ee.setData(ye),this._changed=!0},Y.prototype.getSource=function($){return this.sourceCaches[$]&&this.sourceCaches[$].getSource()},Y.prototype.addLayer=function($,ye,Ee){Ee===void 0&&(Ee={}),this._checkLoaded();var Pe=$.id;if(this.getLayer(Pe)){this.fire(new e.ErrorEvent(new Error('Layer with id "'+Pe+'" already exists on this map')));return}var Ze;if($.type==="custom"){if(eo(this,e.validateCustomStyleLayer($)))return;Ze=e.createStyleLayer($)}else{if(typeof $.source=="object"&&(this.addSource(Pe,$.source),$=e.clone$1($),$=e.extend($,{source:Pe})),this._validate(e.validateStyle.layer,"layers."+Pe,$,{arrayIndex:-1},Ee))return;Ze=e.createStyleLayer($),this._validateLayer(Ze),Ze.setEventedParent(this,{layer:{id:Pe}}),this._serializedLayers[Ze.id]=Ze.serialize()}var ft=ye?this._order.indexOf(ye):this._order.length;if(ye&&ft===-1){this.fire(new e.ErrorEvent(new Error('Layer with id "'+ye+'" does not exist on this map.')));return}if(this._order.splice(ft,0,Pe),this._layerOrderChanged=!0,this._layers[Pe]=Ze,this._removedLayers[Pe]&&Ze.source&&Ze.type!=="custom"){var Mt=this._removedLayers[Pe];delete this._removedLayers[Pe],Mt.type!==Ze.type?this._updatedSources[Ze.source]="clear":(this._updatedSources[Ze.source]="reload",this.sourceCaches[Ze.source].pause())}this._updateLayer(Ze),Ze.onAdd&&Ze.onAdd(this.map)},Y.prototype.moveLayer=function($,ye){this._checkLoaded(),this._changed=!0;var Ee=this._layers[$];if(!Ee){this.fire(new e.ErrorEvent(new Error("The layer '"+$+"' does not exist in the map's style and cannot be moved.")));return}if($!==ye){var Pe=this._order.indexOf($);this._order.splice(Pe,1);var Ze=ye?this._order.indexOf(ye):this._order.length;if(ye&&Ze===-1){this.fire(new e.ErrorEvent(new Error('Layer with id "'+ye+'" does not exist on this map.')));return}this._order.splice(Ze,0,$),this._layerOrderChanged=!0}},Y.prototype.removeLayer=function($){this._checkLoaded();var ye=this._layers[$];if(!ye){this.fire(new e.ErrorEvent(new Error("The layer '"+$+"' does not exist in the map's style and cannot be removed.")));return}ye.setEventedParent(null);var Ee=this._order.indexOf($);this._order.splice(Ee,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[$]=ye,delete this._layers[$],delete this._serializedLayers[$],delete this._updatedLayers[$],delete this._updatedPaintProps[$],ye.onRemove&&ye.onRemove(this.map)},Y.prototype.getLayer=function($){return this._layers[$]},Y.prototype.hasLayer=function($){return $ in this._layers},Y.prototype.setLayerZoomRange=function($,ye,Ee){this._checkLoaded();var Pe=this.getLayer($);if(!Pe){this.fire(new e.ErrorEvent(new Error("The layer '"+$+"' does not exist in the map's style and cannot have zoom extent.")));return}Pe.minzoom===ye&&Pe.maxzoom===Ee||(ye!=null&&(Pe.minzoom=ye),Ee!=null&&(Pe.maxzoom=Ee),this._updateLayer(Pe))},Y.prototype.setFilter=function($,ye,Ee){Ee===void 0&&(Ee={}),this._checkLoaded();var Pe=this.getLayer($);if(!Pe){this.fire(new e.ErrorEvent(new Error("The layer '"+$+"' does not exist in the map's style and cannot be filtered.")));return}if(!e.deepEqual(Pe.filter,ye)){if(ye==null){Pe.filter=void 0,this._updateLayer(Pe);return}this._validate(e.validateStyle.filter,"layers."+Pe.id+".filter",ye,null,Ee)||(Pe.filter=e.clone$1(ye),this._updateLayer(Pe))}},Y.prototype.getFilter=function($){return e.clone$1(this.getLayer($).filter)},Y.prototype.setLayoutProperty=function($,ye,Ee,Pe){Pe===void 0&&(Pe={}),this._checkLoaded();var Ze=this.getLayer($);if(!Ze){this.fire(new e.ErrorEvent(new Error("The layer '"+$+"' does not exist in the map's style and cannot be styled.")));return}e.deepEqual(Ze.getLayoutProperty(ye),Ee)||(Ze.setLayoutProperty(ye,Ee,Pe),this._updateLayer(Ze))},Y.prototype.getLayoutProperty=function($,ye){var Ee=this.getLayer($);if(!Ee){this.fire(new e.ErrorEvent(new Error("The layer '"+$+"' does not exist in the map's style.")));return}return Ee.getLayoutProperty(ye)},Y.prototype.setPaintProperty=function($,ye,Ee,Pe){Pe===void 0&&(Pe={}),this._checkLoaded();var Ze=this.getLayer($);if(!Ze){this.fire(new e.ErrorEvent(new Error("The layer '"+$+"' does not exist in the map's style and cannot be styled.")));return}if(!e.deepEqual(Ze.getPaintProperty(ye),Ee)){var ft=Ze.setPaintProperty(ye,Ee,Pe);ft&&this._updateLayer(Ze),this._changed=!0,this._updatedPaintProps[$]=!0}},Y.prototype.getPaintProperty=function($,ye){return this.getLayer($).getPaintProperty(ye)},Y.prototype.setFeatureState=function($,ye){this._checkLoaded();var Ee=$.source,Pe=$.sourceLayer,Ze=this.sourceCaches[Ee];if(Ze===void 0){this.fire(new e.ErrorEvent(new Error("The source '"+Ee+"' does not exist in the map's style.")));return}var ft=Ze.getSource().type;if(ft==="geojson"&&Pe){this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));return}if(ft==="vector"&&!Pe){this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}$.id===void 0&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),Ze.setFeatureState(Pe,$.id,ye)},Y.prototype.removeFeatureState=function($,ye){this._checkLoaded();var Ee=$.source,Pe=this.sourceCaches[Ee];if(Pe===void 0){this.fire(new e.ErrorEvent(new Error("The source '"+Ee+"' does not exist in the map's style.")));return}var Ze=Pe.getSource().type,ft=Ze==="vector"?$.sourceLayer:void 0;if(Ze==="vector"&&!ft){this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}if(ye&&typeof $.id!="string"&&typeof $.id!="number"){this.fire(new e.ErrorEvent(new Error("A feature id is requred to remove its specific state property.")));return}Pe.removeFeatureState(ft,$.id,ye)},Y.prototype.getFeatureState=function($){this._checkLoaded();var ye=$.source,Ee=$.sourceLayer,Pe=this.sourceCaches[ye];if(Pe===void 0){this.fire(new e.ErrorEvent(new Error("The source '"+ye+"' does not exist in the map's style.")));return}var Ze=Pe.getSource().type;if(Ze==="vector"&&!Ee){this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}return $.id===void 0&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),Pe.getFeatureState(Ee,$.id)},Y.prototype.getTransition=function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},Y.prototype.serialize=function(){return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,function($){return $.serialize()}),layers:this._serializeLayers(this._order)},function($){return $!==void 0})},Y.prototype._updateLayer=function($){this._updatedLayers[$.id]=!0,$.source&&!this._updatedSources[$.source]&&this.sourceCaches[$.source].getSource().type!=="raster"&&(this._updatedSources[$.source]="reload",this.sourceCaches[$.source].pause()),this._changed=!0},Y.prototype._flattenAndSortRenderedFeatures=function($){for(var ye=this,Ee=function(Ga){return ye._layers[Ga].type==="fill-extrusion"},Pe={},Ze=[],ft=this._order.length-1;ft>=0;ft--){var Mt=this._order[ft];if(Ee(Mt)){Pe[Mt]=ft;for(var Ht=0,$t=$;Ht<$t.length;Ht+=1){var or=$t[Ht],Tr=or[Mt];if(Tr)for(var Ur=0,Hr=Tr;Ur<Hr.length;Ur+=1){var Br=Hr[Ur];Ze.push(Br)}}}}Ze.sort(function(Ga,ni){return ni.intersectionZ-Ga.intersectionZ});for(var Jr=[],hn=this._order.length-1;hn>=0;hn--){var kn=this._order[hn];if(Ee(kn))for(var Nn=Ze.length-1;Nn>=0;Nn--){var Kn=Ze[Nn].feature;if(Pe[Kn.layer.id]<hn)break;Jr.push(Kn),Ze.pop()}else for(var qn=0,Qn=$;qn<Qn.length;qn+=1){var va=Qn[qn],_a=va[kn];if(_a)for(var xa=0,Ma=_a;xa<Ma.length;xa+=1){var Pa=Ma[xa];Jr.push(Pa.feature)}}}return Jr},Y.prototype.queryRenderedFeatures=function($,ye,Ee){ye&&ye.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",ye.filter,null,ye);var Pe={};if(ye&&ye.layers){if(!Array.isArray(ye.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var Ze=0,ft=ye.layers;Ze<ft.length;Ze+=1){var Mt=ft[Ze],Ht=this._layers[Mt];if(!Ht)return this.fire(new e.ErrorEvent(new Error("The layer '"+Mt+"' does not exist in the map's style and cannot be queried for features."))),[];Pe[Ht.source]=!0}}var $t=[];ye.availableImages=this._availableImages;for(var or in this.sourceCaches)ye.layers&&!Pe[or]||$t.push(ne(this.sourceCaches[or],this._layers,this._serializedLayers,$,ye,Ee));return this.placement&&$t.push(ae(this._layers,this._serializedLayers,this.sourceCaches,$,ye,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures($t)},Y.prototype.querySourceFeatures=function($,ye){ye&&ye.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",ye.filter,null,ye);var Ee=this.sourceCaches[$];return Ee?ie(Ee,ye):[]},Y.prototype.addSourceType=function($,ye,Ee){if(Y.getSourceType($))return Ee(new Error('A source type called "'+$+'" already exists.'));if(Y.setSourceType($,ye),!ye.workerSourceURL)return Ee(null,null);this.dispatcher.broadcast("loadWorkerSource",{name:$,url:ye.workerSourceURL},Ee)},Y.prototype.getLight=function(){return this.light.getLight()},Y.prototype.setLight=function($,ye){ye===void 0&&(ye={}),this._checkLoaded();var Ee=this.light.getLight(),Pe=!1;for(var Ze in $)if(!e.deepEqual($[Ze],Ee[Ze])){Pe=!0;break}if(!!Pe){var ft={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight($,ye),this.light.updateTransitions(ft)}},Y.prototype._validate=function($,ye,Ee,Pe,Ze){return Ze===void 0&&(Ze={}),Ze&&Ze.validate===!1?!1:eo(this,$.call(e.validateStyle,e.extend({key:ye,style:this.serialize(),value:Ee,styleSpec:e.styleSpec},Pe)))},Y.prototype._remove=function(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(var $ in this._layers){var ye=this._layers[$];ye.setEventedParent(null)}for(var Ee in this.sourceCaches)this.sourceCaches[Ee].clearTiles(),this.sourceCaches[Ee].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},Y.prototype._clearSource=function($){this.sourceCaches[$].clearTiles()},Y.prototype._reloadSource=function($){this.sourceCaches[$].resume(),this.sourceCaches[$].reload()},Y.prototype._updateSources=function($){for(var ye in this.sourceCaches)this.sourceCaches[ye].update($)},Y.prototype._generateCollisionBoxes=function(){for(var $ in this.sourceCaches)this._reloadSource($)},Y.prototype._updatePlacement=function($,ye,Ee,Pe,Ze){Ze===void 0&&(Ze=!1);for(var ft=!1,Mt=!1,Ht={},$t=0,or=this._order;$t<or.length;$t+=1){var Tr=or[$t],Ur=this._layers[Tr];if(Ur.type==="symbol"){if(!Ht[Ur.source]){var Hr=this.sourceCaches[Ur.source];Ht[Ur.source]=Hr.getRenderableIds(!0).map(function(qn){return Hr.getTileByID(qn)}).sort(function(qn,Qn){return Qn.tileID.overscaledZ-qn.tileID.overscaledZ||(qn.tileID.isLessThan(Qn.tileID)?-1:1)})}var Br=this.crossTileSymbolIndex.addLayer(Ur,Ht[Ur.source],$.center.lng);ft=ft||Br}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),Ze=Ze||this._layerOrderChanged||Ee===0,(Ze||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now(),$.zoom))&&(this.pauseablePlacement=new Ha($,this._order,Ze,ye,Ee,Pe,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Ht),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.browser.now()),Mt=!0),ft&&this.pauseablePlacement.placement.setStale()),Mt||ft)for(var Jr=0,hn=this._order;Jr<hn.length;Jr+=1){var kn=hn[Jr],Nn=this._layers[kn];Nn.type==="symbol"&&this.placement.updateLayerOpacities(Nn,Ht[Nn.source])}var Kn=!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now());return Kn},Y.prototype._releaseSymbolFadeTiles=function(){for(var $ in this.sourceCaches)this.sourceCaches[$].releaseSymbolFadeTiles()},Y.prototype.getImages=function($,ye,Ee){this.imageManager.getImages(ye.icons,Ee),this._updateTilesForChangedImages();var Pe=this.sourceCaches[ye.source];Pe&&Pe.setDependencies(ye.tileID.key,ye.type,ye.icons)},Y.prototype.getGlyphs=function($,ye,Ee){this.glyphManager.getGlyphs(ye.stacks,Ee)},Y.prototype.getResource=function($,ye,Ee){return e.makeRequest(ye,Ee)},Y}(e.Evented);ts.getSourceType=re,ts.setSourceType=ee,ts.registerForPluginStateChange=e.registerForPluginStateChange;var Ml=e.createLayout([{name:"a_pos",type:"Int16",components:2}]),Nl=`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,xu=`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`,hi=`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ol="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",js=`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ui="uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}",So=`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Bl=`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`,_s="void main() {gl_FragColor=vec4(1.0);}",Di="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",Sl=`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ji=`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`,Fi=`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,io="uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}",Qi="varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}",us="attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}",sl="varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",Bu="attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}",rs="uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",Uu="attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}",Zs=`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ko=`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`,ff=`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ks=`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,Ps=`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,nu=`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,cf=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,hf=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`,ll=`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,au=`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`,Ds=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,bu=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`,kl=`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,_u="uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}",Hu=`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,iu="uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}",vf=`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ul=`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,wu=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ou=`
#define MAX_LINE_DISTANCE 32767.0
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,ws=`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ul=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`,Tu=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Vu=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`,Gu=`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,su="uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}",pf=`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Yu=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`,ns=`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,El=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`,Cl=`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Au=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`,Ts=Ri(Nl,xu),Eo=Ri(hi,ol),lu=Ri(js,Ui),Rs=Ri(So,Bl),Is=Ri(_s,Di),lo=Ri(Sl,Ji),Hl=Ri(Fi,io),Vl=Ri(Qi,us),fl=Ri(sl,Bu),As=Ri(rs,Uu),Gl=Ri(Zs,ko),Ll=Ri(ff,Ks),uu=Ri(Ps,nu),Yl=Ri(cf,hf),cl=Ri(ll,au),df=Ri(Ds,bu),fs=Ri(kl,_u),zf=Ri(Hu,iu),Mu=Ri(vf,ul),Pl=Ri(wu,ou),Wl=Ri(ws,Ul),hl=Ri(Tu,Vu),Xl=Ri(Gu,su),Wu=Ri(pf,Yu),Xu=Ri(ns,El),Ff=Ri(Cl,Au);function Ri(ve,Y){var de=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,$={};return ve=ve.replace(de,function(ye,Ee,Pe,Ze,ft){return $[ft]=!0,Ee==="define"?`
#ifndef HAS_UNIFORM_u_`+ft+`
varying `+Pe+" "+Ze+" "+ft+`;
#else
uniform `+Pe+" "+Ze+" u_"+ft+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+ft+`
    `+Pe+" "+Ze+" "+ft+" = u_"+ft+`;
#endif
`}),Y=Y.replace(de,function(ye,Ee,Pe,Ze,ft){var Mt=Ze==="float"?"vec2":"vec4",Ht=ft.match(/color/)?"color":Mt;return $[ft]?Ee==="define"?`
#ifndef HAS_UNIFORM_u_`+ft+`
uniform lowp float u_`+ft+`_t;
attribute `+Pe+" "+Mt+" a_"+ft+`;
varying `+Pe+" "+Ze+" "+ft+`;
#else
uniform `+Pe+" "+Ze+" u_"+ft+`;
#endif
`:Ht==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ft+`
    `+ft+" = a_"+ft+`;
#else
    `+Pe+" "+Ze+" "+ft+" = u_"+ft+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ft+`
    `+ft+" = unpack_mix_"+Ht+"(a_"+ft+", u_"+ft+`_t);
#else
    `+Pe+" "+Ze+" "+ft+" = u_"+ft+`;
#endif
`:Ee==="define"?`
#ifndef HAS_UNIFORM_u_`+ft+`
uniform lowp float u_`+ft+`_t;
attribute `+Pe+" "+Mt+" a_"+ft+`;
#else
uniform `+Pe+" "+Ze+" u_"+ft+`;
#endif
`:Ht==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ft+`
    `+Pe+" "+Ze+" "+ft+" = a_"+ft+`;
#else
    `+Pe+" "+Ze+" "+ft+" = u_"+ft+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ft+`
    `+Pe+" "+Ze+" "+ft+" = unpack_mix_"+Ht+"(a_"+ft+", u_"+ft+`_t);
#else
    `+Pe+" "+Ze+" "+ft+" = u_"+ft+`;
#endif
`}),{fragmentSource:ve,vertexSource:Y}}var Dl=Object.freeze({__proto__:null,prelude:Ts,background:Eo,backgroundPattern:lu,circle:Rs,clippingMask:Is,heatmap:lo,heatmapTexture:Hl,collisionBox:Vl,collisionCircle:fl,debug:As,fill:Gl,fillOutline:Ll,fillOutlinePattern:uu,fillPattern:Yl,fillExtrusion:cl,fillExtrusionPattern:df,hillshadePrepare:fs,hillshade:zf,line:Mu,lineGradient:Pl,linePattern:Wl,lineSDF:hl,raster:Xl,symbolIcon:Wu,symbolSDF:Xu,symbolTextAndIcon:Ff}),vl=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};vl.prototype.bind=function(Y,de,$,ye,Ee,Pe,Ze,ft){this.context=Y;for(var Mt=this.boundPaintVertexBuffers.length!==ye.length,Ht=0;!Mt&&Ht<ye.length;Ht++)this.boundPaintVertexBuffers[Ht]!==ye[Ht]&&(Mt=!0);var $t=!this.vao||this.boundProgram!==de||this.boundLayoutVertexBuffer!==$||Mt||this.boundIndexBuffer!==Ee||this.boundVertexOffset!==Pe||this.boundDynamicVertexBuffer!==Ze||this.boundDynamicVertexBuffer2!==ft;!Y.extVertexArrayObject||$t?this.freshBind(de,$,ye,Ee,Pe,Ze,ft):(Y.bindVertexArrayOES.set(this.vao),Ze&&Ze.bind(),Ee&&Ee.dynamicDraw&&Ee.bind(),ft&&ft.bind())},vl.prototype.freshBind=function(Y,de,$,ye,Ee,Pe,Ze){var ft,Mt=Y.numAttributes,Ht=this.context,$t=Ht.gl;if(Ht.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Ht.extVertexArrayObject.createVertexArrayOES(),Ht.bindVertexArrayOES.set(this.vao),ft=0,this.boundProgram=Y,this.boundLayoutVertexBuffer=de,this.boundPaintVertexBuffers=$,this.boundIndexBuffer=ye,this.boundVertexOffset=Ee,this.boundDynamicVertexBuffer=Pe,this.boundDynamicVertexBuffer2=Ze;else{ft=Ht.currentNumAttributes||0;for(var or=Mt;or<ft;or++)$t.disableVertexAttribArray(or)}de.enableAttributes($t,Y);for(var Tr=0,Ur=$;Tr<Ur.length;Tr+=1){var Hr=Ur[Tr];Hr.enableAttributes($t,Y)}Pe&&Pe.enableAttributes($t,Y),Ze&&Ze.enableAttributes($t,Y),de.bind(),de.setVertexAttribPointers($t,Y,Ee);for(var Br=0,Jr=$;Br<Jr.length;Br+=1){var hn=Jr[Br];hn.bind(),hn.setVertexAttribPointers($t,Y,Ee)}Pe&&(Pe.bind(),Pe.setVertexAttribPointers($t,Y,Ee)),ye&&ye.bind(),Ze&&(Ze.bind(),Ze.setVertexAttribPointers($t,Y,Ee)),Ht.currentNumAttributes=Mt},vl.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var as=function(Y,de,$,ye,Ee){var Pe=Y.gl;this.program=Pe.createProgram();var Ze=$?$.defines():[];Ee&&Ze.push("#define OVERDRAW_INSPECTOR;");var ft=Ze.concat(Ts.fragmentSource,de.fragmentSource).join(`
`),Mt=Ze.concat(Ts.vertexSource,de.vertexSource).join(`
`),Ht=Pe.createShader(Pe.FRAGMENT_SHADER);if(Pe.isContextLost()){this.failedToCreate=!0;return}Pe.shaderSource(Ht,ft),Pe.compileShader(Ht),Pe.attachShader(this.program,Ht);var $t=Pe.createShader(Pe.VERTEX_SHADER);if(Pe.isContextLost()){this.failedToCreate=!0;return}Pe.shaderSource($t,Mt),Pe.compileShader($t),Pe.attachShader(this.program,$t);for(var or=$?$.layoutAttributes:[],Tr=0;Tr<or.length;Tr++)Pe.bindAttribLocation(this.program,Tr,or[Tr].name);Pe.linkProgram(this.program),Pe.deleteShader($t),Pe.deleteShader(Ht),this.numAttributes=Pe.getProgramParameter(this.program,Pe.ACTIVE_ATTRIBUTES),this.attributes={};for(var Ur={},Hr=0;Hr<this.numAttributes;Hr++){var Br=Pe.getActiveAttrib(this.program,Hr);Br&&(this.attributes[Br.name]=Pe.getAttribLocation(this.program,Br.name))}for(var Jr=Pe.getProgramParameter(this.program,Pe.ACTIVE_UNIFORMS),hn=0;hn<Jr;hn++){var kn=Pe.getActiveUniform(this.program,hn);kn&&(Ur[kn.name]=Pe.getUniformLocation(this.program,kn.name))}this.fixedUniforms=ye(Y,Ur),this.binderUniforms=$?$.getUniforms(Y,Ur):[]};as.prototype.draw=function(Y,de,$,ye,Ee,Pe,Ze,ft,Mt,Ht,$t,or,Tr,Ur,Hr,Br){var Jr,hn=Y.gl;if(!this.failedToCreate){Y.program.set(this.program),Y.setDepthMode($),Y.setStencilMode(ye),Y.setColorMode(Ee),Y.setCullFace(Pe);for(var kn in this.fixedUniforms)this.fixedUniforms[kn].set(Ze[kn]);Ur&&Ur.setUniforms(Y,this.binderUniforms,or,{zoom:Tr});for(var Nn=(Jr={},Jr[hn.LINES]=2,Jr[hn.TRIANGLES]=3,Jr[hn.LINE_STRIP]=1,Jr)[de],Kn=0,qn=$t.get();Kn<qn.length;Kn+=1){var Qn=qn[Kn],va=Qn.vaos||(Qn.vaos={}),_a=va[ft]||(va[ft]=new vl);_a.bind(Y,this,Mt,Ur?Ur.getPaintVertexBuffers():[],Ht,Qn.vertexOffset,Hr,Br),hn.drawElements(de,Qn.primitiveLength*Nn,hn.UNSIGNED_SHORT,Qn.primitiveOffset*Nn*2)}}};function cs(ve,Y,de){var $=1/da(de,1,Y.transform.tileZoom),ye=Math.pow(2,de.tileID.overscaledZ),Ee=de.tileSize*Math.pow(2,Y.transform.tileZoom)/ye,Pe=Ee*(de.tileID.canonical.x+de.tileID.wrap*ye),Ze=Ee*de.tileID.canonical.y;return{u_image:0,u_texsize:de.imageAtlasTexture.size,u_scale:[$,ve.fromScale,ve.toScale],u_fade:ve.t,u_pixel_coord_upper:[Pe>>16,Ze>>16],u_pixel_coord_lower:[Pe&65535,Ze&65535]}}function jl(ve,Y,de,$){var ye=de.imageManager.getPattern(ve.from.toString()),Ee=de.imageManager.getPattern(ve.to.toString()),Pe=de.imageManager.getPixelSize(),Ze=Pe.width,ft=Pe.height,Mt=Math.pow(2,$.tileID.overscaledZ),Ht=$.tileSize*Math.pow(2,de.transform.tileZoom)/Mt,$t=Ht*($.tileID.canonical.x+$.tileID.wrap*Mt),or=Ht*$.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ye.tl,u_pattern_br_a:ye.br,u_pattern_tl_b:Ee.tl,u_pattern_br_b:Ee.br,u_texsize:[Ze,ft],u_mix:Y.t,u_pattern_size_a:ye.displaySize,u_pattern_size_b:Ee.displaySize,u_scale_a:Y.fromScale,u_scale_b:Y.toScale,u_tile_units_to_pixels:1/da($,1,de.transform.tileZoom),u_pixel_coord_upper:[$t>>16,or>>16],u_pixel_coord_lower:[$t&65535,or&65535]}}var uo=function(ve,Y){return{u_matrix:new e.UniformMatrix4f(ve,Y.u_matrix),u_lightpos:new e.Uniform3f(ve,Y.u_lightpos),u_lightintensity:new e.Uniform1f(ve,Y.u_lightintensity),u_lightcolor:new e.Uniform3f(ve,Y.u_lightcolor),u_vertical_gradient:new e.Uniform1f(ve,Y.u_vertical_gradient),u_opacity:new e.Uniform1f(ve,Y.u_opacity)}},ju=function(ve,Y){return{u_matrix:new e.UniformMatrix4f(ve,Y.u_matrix),u_lightpos:new e.Uniform3f(ve,Y.u_lightpos),u_lightintensity:new e.Uniform1f(ve,Y.u_lightintensity),u_lightcolor:new e.Uniform3f(ve,Y.u_lightcolor),u_vertical_gradient:new e.Uniform1f(ve,Y.u_vertical_gradient),u_height_factor:new e.Uniform1f(ve,Y.u_height_factor),u_image:new e.Uniform1i(ve,Y.u_image),u_texsize:new e.Uniform2f(ve,Y.u_texsize),u_pixel_coord_upper:new e.Uniform2f(ve,Y.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(ve,Y.u_pixel_coord_lower),u_scale:new e.Uniform3f(ve,Y.u_scale),u_fade:new e.Uniform1f(ve,Y.u_fade),u_opacity:new e.Uniform1f(ve,Y.u_opacity)}},hs=function(ve,Y,de,$){var ye=Y.style.light,Ee=ye.properties.get("position"),Pe=[Ee.x,Ee.y,Ee.z],Ze=e.create$1();ye.properties.get("anchor")==="viewport"&&e.fromRotation(Ze,-Y.transform.angle),e.transformMat3(Pe,Pe,Ze);var ft=ye.properties.get("color");return{u_matrix:ve,u_lightpos:Pe,u_lightintensity:ye.properties.get("intensity"),u_lightcolor:[ft.r,ft.g,ft.b],u_vertical_gradient:+de,u_opacity:$}},Js=function(ve,Y,de,$,ye,Ee,Pe){return e.extend(hs(ve,Y,de,$),cs(Ee,Y,Pe),{u_height_factor:-Math.pow(2,ye.overscaledZ)/Pe.tileSize/8})},Qs=function(ve,Y){return{u_matrix:new e.UniformMatrix4f(ve,Y.u_matrix)}},zs=function(ve,Y){return{u_matrix:new e.UniformMatrix4f(ve,Y.u_matrix),u_image:new e.Uniform1i(ve,Y.u_image),u_texsize:new e.Uniform2f(ve,Y.u_texsize),u_pixel_coord_upper:new e.Uniform2f(ve,Y.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(ve,Y.u_pixel_coord_lower),u_scale:new e.Uniform3f(ve,Y.u_scale),u_fade:new e.Uniform1f(ve,Y.u_fade)}},vs=function(ve,Y){return{u_matrix:new e.UniformMatrix4f(ve,Y.u_matrix),u_world:new e.Uniform2f(ve,Y.u_world)}},Hi=function(ve,Y){return{u_matrix:new e.UniformMatrix4f(ve,Y.u_matrix),u_world:new e.Uniform2f(ve,Y.u_world),u_image:new e.Uniform1i(ve,Y.u_image),u_texsize:new e.Uniform2f(ve,Y.u_texsize),u_pixel_coord_upper:new e.Uniform2f(ve,Y.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(ve,Y.u_pixel_coord_lower),u_scale:new e.Uniform3f(ve,Y.u_scale),u_fade:new e.Uniform1f(ve,Y.u_fade)}},Co=function(ve){return{u_matrix:ve}},ps=function(ve,Y,de,$){return e.extend(Co(ve),cs(de,Y,$))},Zu=function(ve,Y){return{u_matrix:ve,u_world:Y}},fu=function(ve,Y,de,$,ye){return e.extend(ps(ve,Y,de,$),{u_world:ye})},Ku=function(ve,Y){return{u_camera_to_center_distance:new e.Uniform1f(ve,Y.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(ve,Y.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(ve,Y.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(ve,Y.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(ve,Y.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(ve,Y.u_matrix)}},mt=function(ve,Y,de,$){var ye=ve.transform,Ee,Pe;if($.paint.get("circle-pitch-alignment")==="map"){var Ze=da(de,1,ye.zoom);Ee=!0,Pe=[Ze,Ze]}else Ee=!1,Pe=ye.pixelsToGLUnits;return{u_camera_to_center_distance:ye.cameraToCenterDistance,u_scale_with_map:+($.paint.get("circle-pitch-scale")==="map"),u_matrix:ve.translatePosMatrix(Y.posMatrix,de,$.paint.get("circle-translate"),$.paint.get("circle-translate-anchor")),u_pitch_with_map:+Ee,u_device_pixel_ratio:e.browser.devicePixelRatio,u_extrude_scale:Pe}},It=function(ve,Y){return{u_matrix:new e.UniformMatrix4f(ve,Y.u_matrix),u_camera_to_center_distance:new e.Uniform1f(ve,Y.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(ve,Y.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(ve,Y.u_extrude_scale),u_overscale_factor:new e.Uniform1f(ve,Y.u_overscale_factor)}},nr=function(ve,Y){return{u_matrix:new e.UniformMatrix4f(ve,Y.u_matrix),u_inv_matrix:new e.UniformMatrix4f(ve,Y.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(ve,Y.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(ve,Y.u_viewport_size)}},Jt=function(ve,Y,de){var $=da(de,1,Y.zoom),ye=Math.pow(2,Y.zoom-de.tileID.overscaledZ),Ee=de.tileID.overscaleFactor();return{u_matrix:ve,u_camera_to_center_distance:Y.cameraToCenterDistance,u_pixels_to_tile_units:$,u_extrude_scale:[Y.pixelsToGLUnits[0]/($*ye),Y.pixelsToGLUnits[1]/($*ye)],u_overscale_factor:Ee}},Cr=function(ve,Y,de){return{u_matrix:ve,u_inv_matrix:Y,u_camera_to_center_distance:de.cameraToCenterDistance,u_viewport_size:[de.width,de.height]}},on=function(ve,Y){return{u_color:new e.UniformColor(ve,Y.u_color),u_matrix:new e.UniformMatrix4f(ve,Y.u_matrix),u_overlay:new e.Uniform1i(ve,Y.u_overlay),u_overlay_scale:new e.Uniform1f(ve,Y.u_overlay_scale)}},yn=function(ve,Y,de){return de===void 0&&(de=1),{u_matrix:ve,u_color:Y,u_overlay:0,u_overlay_scale:de}},Tn=function(ve,Y){return{u_matrix:new e.UniformMatrix4f(ve,Y.u_matrix)}},Cn=function(ve){return{u_matrix:ve}},Vn=function(ve,Y){return{u_extrude_scale:new e.Uniform1f(ve,Y.u_extrude_scale),u_intensity:new e.Uniform1f(ve,Y.u_intensity),u_matrix:new e.UniformMatrix4f(ve,Y.u_matrix)}},xn=function(ve,Y){return{u_matrix:new e.UniformMatrix4f(ve,Y.u_matrix),u_world:new e.Uniform2f(ve,Y.u_world),u_image:new e.Uniform1i(ve,Y.u_image),u_color_ramp:new e.Uniform1i(ve,Y.u_color_ramp),u_opacity:new e.Uniform1f(ve,Y.u_opacity)}},zn=function(ve,Y,de,$){return{u_matrix:ve,u_extrude_scale:da(Y,1,de),u_intensity:$}},Ln=function(ve,Y,de,$){var ye=e.create();e.ortho(ye,0,ve.width,ve.height,0,0,1);var Ee=ve.context.gl;return{u_matrix:ye,u_world:[Ee.drawingBufferWidth,Ee.drawingBufferHeight],u_image:de,u_color_ramp:$,u_opacity:Y.paint.get("heatmap-opacity")}},Wn=function(ve,Y){return{u_matrix:new e.UniformMatrix4f(ve,Y.u_matrix),u_image:new e.Uniform1i(ve,Y.u_image),u_latrange:new e.Uniform2f(ve,Y.u_latrange),u_light:new e.Uniform2f(ve,Y.u_light),u_shadow:new e.UniformColor(ve,Y.u_shadow),u_highlight:new e.UniformColor(ve,Y.u_highlight),u_accent:new e.UniformColor(ve,Y.u_accent)}},$n=function(ve,Y){return{u_matrix:new e.UniformMatrix4f(ve,Y.u_matrix),u_image:new e.Uniform1i(ve,Y.u_image),u_dimension:new e.Uniform2f(ve,Y.u_dimension),u_zoom:new e.Uniform1f(ve,Y.u_zoom),u_maxzoom:new e.Uniform1f(ve,Y.u_maxzoom),u_unpack:new e.Uniform4f(ve,Y.u_unpack)}},Oa=function(ve,Y,de){var $=de.paint.get("hillshade-shadow-color"),ye=de.paint.get("hillshade-highlight-color"),Ee=de.paint.get("hillshade-accent-color"),Pe=de.paint.get("hillshade-illumination-direction")*(Math.PI/180);de.paint.get("hillshade-illumination-anchor")==="viewport"&&(Pe-=ve.transform.angle);var Ze=!ve.options.moving;return{u_matrix:ve.transform.calculatePosMatrix(Y.tileID.toUnwrapped(),Ze),u_image:0,u_latrange:Na(ve,Y.tileID),u_light:[de.paint.get("hillshade-exaggeration"),Pe],u_shadow:$,u_highlight:ye,u_accent:Ee}},La=function(ve,Y,de){var $=Y.stride,ye=e.create();return e.ortho(ye,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(ye,ye,[0,-e.EXTENT,0]),{u_matrix:ye,u_image:1,u_dimension:[$,$],u_zoom:ve.overscaledZ,u_maxzoom:de,u_unpack:Y.getUnpackVector()}};function Na(ve,Y){var de=Math.pow(2,Y.canonical.z),$=Y.canonical.y;return[new e.MercatorCoordinate(0,$/de).toLngLat().lat,new e.MercatorCoordinate(0,($+1)/de).toLngLat().lat]}var Ba=function(ve,Y){return{u_matrix:new e.UniformMatrix4f(ve,Y.u_matrix),u_ratio:new e.Uniform1f(ve,Y.u_ratio),u_device_pixel_ratio:new e.Uniform1f(ve,Y.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(ve,Y.u_units_to_pixels)}},Jn=function(ve,Y){return{u_matrix:new e.UniformMatrix4f(ve,Y.u_matrix),u_ratio:new e.Uniform1f(ve,Y.u_ratio),u_device_pixel_ratio:new e.Uniform1f(ve,Y.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(ve,Y.u_units_to_pixels),u_image:new e.Uniform1i(ve,Y.u_image)}},pa=function(ve,Y){return{u_matrix:new e.UniformMatrix4f(ve,Y.u_matrix),u_texsize:new e.Uniform2f(ve,Y.u_texsize),u_ratio:new e.Uniform1f(ve,Y.u_ratio),u_device_pixel_ratio:new e.Uniform1f(ve,Y.u_device_pixel_ratio),u_image:new e.Uniform1i(ve,Y.u_image),u_units_to_pixels:new e.Uniform2f(ve,Y.u_units_to_pixels),u_scale:new e.Uniform3f(ve,Y.u_scale),u_fade:new e.Uniform1f(ve,Y.u_fade)}},Ya=function(ve,Y){return{u_matrix:new e.UniformMatrix4f(ve,Y.u_matrix),u_ratio:new e.Uniform1f(ve,Y.u_ratio),u_device_pixel_ratio:new e.Uniform1f(ve,Y.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(ve,Y.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(ve,Y.u_patternscale_a),u_patternscale_b:new e.Uniform2f(ve,Y.u_patternscale_b),u_sdfgamma:new e.Uniform1f(ve,Y.u_sdfgamma),u_image:new e.Uniform1i(ve,Y.u_image),u_tex_y_a:new e.Uniform1f(ve,Y.u_tex_y_a),u_tex_y_b:new e.Uniform1f(ve,Y.u_tex_y_b),u_mix:new e.Uniform1f(ve,Y.u_mix)}},Qa=function(ve,Y,de){var $=ve.transform;return{u_matrix:oi(ve,Y,de),u_ratio:1/da(Y,1,$.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_units_to_pixels:[1/$.pixelsToGLUnits[0],1/$.pixelsToGLUnits[1]]}},pi=function(ve,Y,de){return e.extend(Qa(ve,Y,de),{u_image:0})},di=function(ve,Y,de,$){var ye=ve.transform,Ee=Ti(Y,ye);return{u_matrix:oi(ve,Y,de),u_texsize:Y.imageAtlasTexture.size,u_ratio:1/da(Y,1,ye.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_image:0,u_scale:[Ee,$.fromScale,$.toScale],u_fade:$.t,u_units_to_pixels:[1/ye.pixelsToGLUnits[0],1/ye.pixelsToGLUnits[1]]}},yi=function(ve,Y,de,$,ye){var Ee=ve.transform,Pe=ve.lineAtlas,Ze=Ti(Y,Ee),ft=de.layout.get("line-cap")==="round",Mt=Pe.getDash($.from,ft),Ht=Pe.getDash($.to,ft),$t=Mt.width*ye.fromScale,or=Ht.width*ye.toScale;return e.extend(Qa(ve,Y,de),{u_patternscale_a:[Ze/$t,-Mt.height/2],u_patternscale_b:[Ze/or,-Ht.height/2],u_sdfgamma:Pe.width/(Math.min($t,or)*256*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Mt.y,u_tex_y_b:Ht.y,u_mix:ye.t})};function Ti(ve,Y){return 1/da(ve,1,Y.tileZoom)}function oi(ve,Y,de){return ve.translatePosMatrix(Y.tileID.posMatrix,Y,de.paint.get("line-translate"),de.paint.get("line-translate-anchor"))}var mo=function(ve,Y){return{u_matrix:new e.UniformMatrix4f(ve,Y.u_matrix),u_tl_parent:new e.Uniform2f(ve,Y.u_tl_parent),u_scale_parent:new e.Uniform1f(ve,Y.u_scale_parent),u_buffer_scale:new e.Uniform1f(ve,Y.u_buffer_scale),u_fade_t:new e.Uniform1f(ve,Y.u_fade_t),u_opacity:new e.Uniform1f(ve,Y.u_opacity),u_image0:new e.Uniform1i(ve,Y.u_image0),u_image1:new e.Uniform1i(ve,Y.u_image1),u_brightness_low:new e.Uniform1f(ve,Y.u_brightness_low),u_brightness_high:new e.Uniform1f(ve,Y.u_brightness_high),u_saturation_factor:new e.Uniform1f(ve,Y.u_saturation_factor),u_contrast_factor:new e.Uniform1f(ve,Y.u_contrast_factor),u_spin_weights:new e.Uniform3f(ve,Y.u_spin_weights)}},to=function(ve,Y,de,$,ye){return{u_matrix:ve,u_tl_parent:Y,u_scale_parent:de,u_buffer_scale:1,u_fade_t:$.mix,u_opacity:$.opacity*ye.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:ye.paint.get("raster-brightness-min"),u_brightness_high:ye.paint.get("raster-brightness-max"),u_saturation_factor:mi(ye.paint.get("raster-saturation")),u_contrast_factor:ga(ye.paint.get("raster-contrast")),u_spin_weights:Ka(ye.paint.get("raster-hue-rotate"))}};function Ka(ve){ve*=Math.PI/180;var Y=Math.sin(ve),de=Math.cos(ve);return[(2*de+1)/3,(-Math.sqrt(3)*Y-de+1)/3,(Math.sqrt(3)*Y-de+1)/3]}function ga(ve){return ve>0?1/(1-ve):1+ve}function mi(ve){return ve>0?1-1/(1.001-ve):-ve}var fo=function(ve,Y){return{u_is_size_zoom_constant:new e.Uniform1i(ve,Y.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(ve,Y.u_is_size_feature_constant),u_size_t:new e.Uniform1f(ve,Y.u_size_t),u_size:new e.Uniform1f(ve,Y.u_size),u_camera_to_center_distance:new e.Uniform1f(ve,Y.u_camera_to_center_distance),u_pitch:new e.Uniform1f(ve,Y.u_pitch),u_rotate_symbol:new e.Uniform1i(ve,Y.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(ve,Y.u_aspect_ratio),u_fade_change:new e.Uniform1f(ve,Y.u_fade_change),u_matrix:new e.UniformMatrix4f(ve,Y.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(ve,Y.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(ve,Y.u_coord_matrix),u_is_text:new e.Uniform1i(ve,Y.u_is_text),u_pitch_with_map:new e.Uniform1i(ve,Y.u_pitch_with_map),u_texsize:new e.Uniform2f(ve,Y.u_texsize),u_texture:new e.Uniform1i(ve,Y.u_texture)}},po=function(ve,Y){return{u_is_size_zoom_constant:new e.Uniform1i(ve,Y.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(ve,Y.u_is_size_feature_constant),u_size_t:new e.Uniform1f(ve,Y.u_size_t),u_size:new e.Uniform1f(ve,Y.u_size),u_camera_to_center_distance:new e.Uniform1f(ve,Y.u_camera_to_center_distance),u_pitch:new e.Uniform1f(ve,Y.u_pitch),u_rotate_symbol:new e.Uniform1i(ve,Y.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(ve,Y.u_aspect_ratio),u_fade_change:new e.Uniform1f(ve,Y.u_fade_change),u_matrix:new e.UniformMatrix4f(ve,Y.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(ve,Y.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(ve,Y.u_coord_matrix),u_is_text:new e.Uniform1i(ve,Y.u_is_text),u_pitch_with_map:new e.Uniform1i(ve,Y.u_pitch_with_map),u_texsize:new e.Uniform2f(ve,Y.u_texsize),u_texture:new e.Uniform1i(ve,Y.u_texture),u_gamma_scale:new e.Uniform1f(ve,Y.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(ve,Y.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(ve,Y.u_is_halo)}},ds=function(ve,Y){return{u_is_size_zoom_constant:new e.Uniform1i(ve,Y.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(ve,Y.u_is_size_feature_constant),u_size_t:new e.Uniform1f(ve,Y.u_size_t),u_size:new e.Uniform1f(ve,Y.u_size),u_camera_to_center_distance:new e.Uniform1f(ve,Y.u_camera_to_center_distance),u_pitch:new e.Uniform1f(ve,Y.u_pitch),u_rotate_symbol:new e.Uniform1i(ve,Y.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(ve,Y.u_aspect_ratio),u_fade_change:new e.Uniform1f(ve,Y.u_fade_change),u_matrix:new e.UniformMatrix4f(ve,Y.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(ve,Y.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(ve,Y.u_coord_matrix),u_is_text:new e.Uniform1i(ve,Y.u_is_text),u_pitch_with_map:new e.Uniform1i(ve,Y.u_pitch_with_map),u_texsize:new e.Uniform2f(ve,Y.u_texsize),u_texsize_icon:new e.Uniform2f(ve,Y.u_texsize_icon),u_texture:new e.Uniform1i(ve,Y.u_texture),u_texture_icon:new e.Uniform1i(ve,Y.u_texture_icon),u_gamma_scale:new e.Uniform1f(ve,Y.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(ve,Y.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(ve,Y.u_is_halo)}},Fs=function(ve,Y,de,$,ye,Ee,Pe,Ze,ft,Mt){var Ht=ye.transform;return{u_is_size_zoom_constant:+(ve==="constant"||ve==="source"),u_is_size_feature_constant:+(ve==="constant"||ve==="camera"),u_size_t:Y?Y.uSizeT:0,u_size:Y?Y.uSize:0,u_camera_to_center_distance:Ht.cameraToCenterDistance,u_pitch:Ht.pitch/360*2*Math.PI,u_rotate_symbol:+de,u_aspect_ratio:Ht.width/Ht.height,u_fade_change:ye.options.fadeDuration?ye.symbolFadeChange:1,u_matrix:Ee,u_label_plane_matrix:Pe,u_coord_matrix:Ze,u_is_text:+ft,u_pitch_with_map:+$,u_texsize:Mt,u_texture:0}},Bo=function(ve,Y,de,$,ye,Ee,Pe,Ze,ft,Mt,Ht){var $t=ye.transform;return e.extend(Fs(ve,Y,de,$,ye,Ee,Pe,Ze,ft,Mt),{u_gamma_scale:$?Math.cos($t._pitch)*$t.cameraToCenterDistance:1,u_device_pixel_ratio:e.browser.devicePixelRatio,u_is_halo:+Ht})},pl=function(ve,Y,de,$,ye,Ee,Pe,Ze,ft,Mt){return e.extend(Bo(ve,Y,de,$,ye,Ee,Pe,Ze,!0,ft,!0),{u_texsize_icon:Mt,u_texture_icon:1})},Ms=function(ve,Y){return{u_matrix:new e.UniformMatrix4f(ve,Y.u_matrix),u_opacity:new e.Uniform1f(ve,Y.u_opacity),u_color:new e.UniformColor(ve,Y.u_color)}},gs=function(ve,Y){return{u_matrix:new e.UniformMatrix4f(ve,Y.u_matrix),u_opacity:new e.Uniform1f(ve,Y.u_opacity),u_image:new e.Uniform1i(ve,Y.u_image),u_pattern_tl_a:new e.Uniform2f(ve,Y.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(ve,Y.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(ve,Y.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(ve,Y.u_pattern_br_b),u_texsize:new e.Uniform2f(ve,Y.u_texsize),u_mix:new e.Uniform1f(ve,Y.u_mix),u_pattern_size_a:new e.Uniform2f(ve,Y.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(ve,Y.u_pattern_size_b),u_scale_a:new e.Uniform1f(ve,Y.u_scale_a),u_scale_b:new e.Uniform1f(ve,Y.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(ve,Y.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(ve,Y.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(ve,Y.u_tile_units_to_pixels)}},xo=function(ve,Y,de){return{u_matrix:ve,u_opacity:Y,u_color:de}},cu=function(ve,Y,de,$,ye,Ee){return e.extend(jl($,Ee,de,ye),{u_matrix:ve,u_opacity:Y})},Su={fillExtrusion:uo,fillExtrusionPattern:ju,fill:Qs,fillPattern:zs,fillOutline:vs,fillOutlinePattern:Hi,circle:Ku,collisionBox:It,collisionCircle:nr,debug:on,clippingMask:Tn,heatmap:Vn,heatmapTexture:xn,hillshade:Wn,hillshadePrepare:$n,line:Ba,lineGradient:Jn,linePattern:pa,lineSDF:Ya,raster:mo,symbolIcon:fo,symbolSDF:po,symbolTextAndIcon:ds,background:Ms,backgroundPattern:gs},ys;function Ju(ve,Y,de,$,ye,Ee,Pe){for(var Ze=ve.context,ft=Ze.gl,Mt=ve.useProgram("collisionBox"),Ht=[],$t=0,or=0,Tr=0;Tr<$.length;Tr++){var Ur=$[Tr],Hr=Y.getTile(Ur),Br=Hr.getBucket(de);if(!!Br){var Jr=Ur.posMatrix;(ye[0]!==0||ye[1]!==0)&&(Jr=ve.translatePosMatrix(Ur.posMatrix,Hr,ye,Ee));var hn=Pe?Br.textCollisionBox:Br.iconCollisionBox,kn=Br.collisionCircleArray;if(kn.length>0){var Nn=e.create(),Kn=Jr;e.mul(Nn,Br.placementInvProjMatrix,ve.transform.glCoordMatrix),e.mul(Nn,Nn,Br.placementViewportMatrix),Ht.push({circleArray:kn,circleOffset:or,transform:Kn,invTransform:Nn}),$t+=kn.length/4,or=$t}!hn||Mt.draw(Ze,ft.LINES,ir.disabled,Sr.disabled,ve.colorModeForRenderPass(),Xe.disabled,Jt(Jr,ve.transform,Hr),de.id,hn.layoutVertexBuffer,hn.indexBuffer,hn.segments,null,ve.transform.zoom,null,null,hn.collisionVertexBuffer)}}if(!(!Pe||!Ht.length)){var qn=ve.useProgram("collisionCircle"),Qn=new e.StructArrayLayout2f1f2i16;Qn.resize($t*4),Qn._trim();for(var va=0,_a=0,xa=Ht;_a<xa.length;_a+=1)for(var Ma=xa[_a],Pa=0;Pa<Ma.circleArray.length/4;Pa++){var Ga=Pa*4,ni=Ma.circleArray[Ga+0],Ci=Ma.circleArray[Ga+1],li=Ma.circleArray[Ga+2],vi=Ma.circleArray[Ga+3];Qn.emplace(va++,ni,Ci,li,vi,0),Qn.emplace(va++,ni,Ci,li,vi,1),Qn.emplace(va++,ni,Ci,li,vi,2),Qn.emplace(va++,ni,Ci,li,vi,3)}(!ys||ys.length<$t*2)&&(ys=hu($t));for(var Ua=Ze.createIndexBuffer(ys,!0),Li=Ze.createVertexBuffer(Qn,e.collisionCircleLayout.members,!0),zi=0,Bi=Ht;zi<Bi.length;zi+=1){var bi=Bi[zi],Zi=Cr(bi.transform,bi.invTransform,ve.transform);qn.draw(Ze,ft.TRIANGLES,ir.disabled,Sr.disabled,ve.colorModeForRenderPass(),Xe.disabled,Zi,de.id,Li,Ua,e.SegmentVector.simpleSegment(0,bi.circleOffset*2,bi.circleArray.length,bi.circleArray.length/2),null,ve.transform.zoom,null,null,null)}Li.destroy(),Ua.destroy()}}function hu(ve){var Y=ve*2,de=new e.StructArrayLayout3ui6;de.resize(Y),de._trim();for(var $=0;$<Y;$++){var ye=$*6;de.uint16[ye+0]=$*4+0,de.uint16[ye+1]=$*4+1,de.uint16[ye+2]=$*4+2,de.uint16[ye+3]=$*4+2,de.uint16[ye+4]=$*4+3,de.uint16[ye+5]=$*4+0}return de}var Lc=e.identity(new Float32Array(16));function gf(ve,Y,de,$,ye){if(ve.renderPass==="translucent"){var Ee=Sr.disabled,Pe=ve.colorModeForRenderPass(),Ze=de.layout.get("text-variable-anchor");Ze&&yf($,ve,de,Y,de.layout.get("text-rotation-alignment"),de.layout.get("text-pitch-alignment"),ye),de.paint.get("icon-opacity").constantOr(1)!==0&&mf(ve,Y,de,$,!1,de.paint.get("icon-translate"),de.paint.get("icon-translate-anchor"),de.layout.get("icon-rotation-alignment"),de.layout.get("icon-pitch-alignment"),de.layout.get("icon-keep-upright"),Ee,Pe),de.paint.get("text-opacity").constantOr(1)!==0&&mf(ve,Y,de,$,!0,de.paint.get("text-translate"),de.paint.get("text-translate-anchor"),de.layout.get("text-rotation-alignment"),de.layout.get("text-pitch-alignment"),de.layout.get("text-keep-upright"),Ee,Pe),Y.map.showCollisionBoxes&&(Ju(ve,Y,de,$,de.paint.get("text-translate"),de.paint.get("text-translate-anchor"),!0),Ju(ve,Y,de,$,de.paint.get("icon-translate"),de.paint.get("icon-translate-anchor"),!1))}}function Qu(ve,Y,de,$,ye,Ee){var Pe=e.getAnchorAlignment(ve),Ze=Pe.horizontalAlign,ft=Pe.verticalAlign,Mt=-(Ze-.5)*Y,Ht=-(ft-.5)*de,$t=e.evaluateVariableOffset(ve,$);return new e.Point((Mt/ye+$t[0])*Ee,(Ht/ye+$t[1])*Ee)}function yf(ve,Y,de,$,ye,Ee,Pe){for(var Ze=Y.transform,ft=ye==="map",Mt=Ee==="map",Ht=0,$t=ve;Ht<$t.length;Ht+=1){var or=$t[Ht],Tr=$.getTile(or),Ur=Tr.getBucket(de);if(!(!Ur||!Ur.text||!Ur.text.segments.get().length)){var Hr=Ur.textSizeData,Br=e.evaluateSizeForZoom(Hr,Ze.zoom),Jr=da(Tr,1,Y.transform.zoom),hn=Wr(or.posMatrix,Mt,ft,Y.transform,Jr),kn=de.layout.get("icon-text-fit")!=="none"&&Ur.hasIconData();if(Br){var Nn=Math.pow(2,Ze.zoom-Tr.tileID.overscaledZ);Os(Ur,ft,Mt,Pe,e.symbolSize,Ze,hn,or.posMatrix,Nn,Br,kn)}}}}function Os(ve,Y,de,$,ye,Ee,Pe,Ze,ft,Mt,Ht){var $t=ve.text.placedSymbolArray,or=ve.text.dynamicLayoutVertexArray,Tr=ve.icon.dynamicLayoutVertexArray,Ur={};or.clear();for(var Hr=0;Hr<$t.length;Hr++){var Br=$t.get(Hr),Jr=ve.allowVerticalPlacement&&!Br.placedOrientation,hn=!Br.hidden&&Br.crossTileID&&!Jr?$[Br.crossTileID]:null;if(!hn)ca(Br.numGlyphs,or);else{var kn=new e.Point(Br.anchorX,Br.anchorY),Nn=En(kn,de?Ze:Pe),Kn=ea(Ee.cameraToCenterDistance,Nn.signedDistanceFromCamera),qn=ye.evaluateSizeForFeature(ve.textSizeData,Mt,Br)*Kn/e.ONE_EM;de&&(qn*=ve.tilePixelRatio/ft);for(var Qn=hn.width,va=hn.height,_a=hn.anchor,xa=hn.textOffset,Ma=hn.textBoxScale,Pa=Qu(_a,Qn,va,xa,Ma,qn),Ga=de?En(kn.add(Pa),Pe).point:Nn.point.add(Y?Pa.rotate(-Ee.angle):Pa),ni=ve.allowVerticalPlacement&&Br.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,Ci=0;Ci<Br.numGlyphs;Ci++)e.addDynamicAttributes(or,Ga,ni);Ht&&Br.associatedIconIndex>=0&&(Ur[Br.associatedIconIndex]={shiftedAnchor:Ga,angle:ni})}}if(Ht){Tr.clear();for(var li=ve.icon.placedSymbolArray,vi=0;vi<li.length;vi++){var Ua=li.get(vi);if(Ua.hidden)ca(Ua.numGlyphs,Tr);else{var Li=Ur[vi];if(!Li)ca(Ua.numGlyphs,Tr);else for(var zi=0;zi<Ua.numGlyphs;zi++)e.addDynamicAttributes(Tr,Li.shiftedAnchor,Li.angle)}}ve.icon.dynamicLayoutVertexBuffer.updateData(Tr)}ve.text.dynamicLayoutVertexBuffer.updateData(or)}function Of(ve,Y,de){return de.iconsInText&&Y?"symbolTextAndIcon":ve?"symbolSDF":"symbolIcon"}function mf(ve,Y,de,$,ye,Ee,Pe,Ze,ft,Mt,Ht,$t){for(var or=ve.context,Tr=or.gl,Ur=ve.transform,Hr=Ze==="map",Br=ft==="map",Jr=Hr&&de.layout.get("symbol-placement")!=="point",hn=Hr&&!Br&&!Jr,kn=de.layout.get("symbol-sort-key").constantOr(1)!==void 0,Nn=ve.depthModeForSublayer(0,ir.ReadOnly),Kn=de.layout.get("text-variable-anchor"),qn=[],Qn=0,va=$;Qn<va.length;Qn+=1){var _a=va[Qn],xa=Y.getTile(_a),Ma=xa.getBucket(de);if(!!Ma){var Pa=ye?Ma.text:Ma.icon;if(!(!Pa||!Pa.segments.get().length)){var Ga=Pa.programConfigurations.get(de.id),ni=ye||Ma.sdfIcons,Ci=ye?Ma.textSizeData:Ma.iconSizeData,li=Br||Ur.pitch!==0,vi=ve.useProgram(Of(ni,ye,Ma),Ga),Ua=e.evaluateSizeForZoom(Ci,Ur.zoom),Li=void 0,zi=[0,0],Bi=void 0,bi=void 0,Zi=null,ii=void 0;if(ye){if(Bi=xa.glyphAtlasTexture,bi=Tr.LINEAR,Li=xa.glyphAtlasTexture.size,Ma.iconsInText){zi=xa.imageAtlasTexture.size,Zi=xa.imageAtlasTexture;var _i=Ci.kind==="composite"||Ci.kind==="camera";ii=li||ve.options.rotating||ve.options.zooming||_i?Tr.LINEAR:Tr.NEAREST}}else{var wo=de.layout.get("icon-size").constantOr(0)!==1||Ma.iconsNeedLinear;Bi=xa.imageAtlasTexture,bi=ni||ve.options.rotating||ve.options.zooming||wo||li?Tr.LINEAR:Tr.NEAREST,Li=xa.imageAtlasTexture.size}var Vo=da(xa,1,ve.transform.zoom),Kl=Wr(_a.posMatrix,Br,Hr,ve.transform,Vo),Jl=Rn(_a.posMatrix,Br,Hr,ve.transform,Vo),ku=Kn&&Ma.hasTextData(),Eu=de.layout.get("icon-text-fit")!=="none"&&ku&&Ma.hasIconData();Jr&&Aa(Ma,_a.posMatrix,ve,ye,Kl,Jl,Br,Mt);var rf=ve.translatePosMatrix(_a.posMatrix,xa,Ee,Pe),Cu=Jr||ye&&Kn||Eu?Lc:Kl,qs=ve.translatePosMatrix(Jl,xa,Ee,Pe,!0),kf=ni&&de.paint.get(ye?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Es=void 0;ni?Ma.iconsInText?Es=pl(Ci.kind,Ua,hn,Br,ve,rf,Cu,qs,Li,zi):Es=Bo(Ci.kind,Ua,hn,Br,ve,rf,Cu,qs,ye,Li,!0):Es=Fs(Ci.kind,Ua,hn,Br,ve,rf,Cu,qs,ye,Li);var Rl={program:vi,buffers:Pa,uniformValues:Es,atlasTexture:Bi,atlasTextureIcon:Zi,atlasInterpolation:bi,atlasInterpolationIcon:ii,isSDF:ni,hasHalo:kf};if(kn)for(var Lu=Pa.segments.get(),du=0,Pu=Lu;du<Pu.length;du+=1){var oh=Pu[du];qn.push({segments:new e.SegmentVector([oh]),sortKey:oh.sortKey,state:Rl})}else qn.push({segments:Pa.segments,sortKey:0,state:Rl})}}}kn&&qn.sort(function(sh,lh){return sh.sortKey-lh.sortKey});for(var Nf=0,xs=qn;Nf<xs.length;Nf+=1){var zc=xs[Nf],Ns=zc.state;if(or.activeTexture.set(Tr.TEXTURE0),Ns.atlasTexture.bind(Ns.atlasInterpolation,Tr.CLAMP_TO_EDGE),Ns.atlasTextureIcon&&(or.activeTexture.set(Tr.TEXTURE1),Ns.atlasTextureIcon&&Ns.atlasTextureIcon.bind(Ns.atlasInterpolationIcon,Tr.CLAMP_TO_EDGE)),Ns.isSDF){var Fc=Ns.uniformValues;Ns.hasHalo&&(Fc.u_is_halo=1,xf(Ns.buffers,zc.segments,de,ve,Ns.program,Nn,Ht,$t,Fc)),Fc.u_is_halo=0}xf(Ns.buffers,zc.segments,de,ve,Ns.program,Nn,Ht,$t,Ns.uniformValues)}}function xf(ve,Y,de,$,ye,Ee,Pe,Ze,ft){var Mt=$.context,Ht=Mt.gl;ye.draw(Mt,Ht.TRIANGLES,Ee,Pe,Ze,Xe.disabled,ft,de.id,ve.layoutVertexBuffer,ve.indexBuffer,Y,de.paint,$.transform.zoom,ve.programConfigurations.get(de.id),ve.dynamicLayoutVertexBuffer,ve.opacityVertexBuffer)}function Uo(ve,Y,de,$){if(ve.renderPass==="translucent"){var ye=de.paint.get("circle-opacity"),Ee=de.paint.get("circle-stroke-width"),Pe=de.paint.get("circle-stroke-opacity"),Ze=de.layout.get("circle-sort-key").constantOr(1)!==void 0;if(!(ye.constantOr(1)===0&&(Ee.constantOr(1)===0||Pe.constantOr(1)===0))){for(var ft=ve.context,Mt=ft.gl,Ht=ve.depthModeForSublayer(0,ir.ReadOnly),$t=Sr.disabled,or=ve.colorModeForRenderPass(),Tr=[],Ur=0;Ur<$.length;Ur++){var Hr=$[Ur],Br=Y.getTile(Hr),Jr=Br.getBucket(de);if(!!Jr){var hn=Jr.programConfigurations.get(de.id),kn=ve.useProgram("circle",hn),Nn=Jr.layoutVertexBuffer,Kn=Jr.indexBuffer,qn=mt(ve,Hr,Br,de),Qn={programConfiguration:hn,program:kn,layoutVertexBuffer:Nn,indexBuffer:Kn,uniformValues:qn};if(Ze)for(var va=Jr.segments.get(),_a=0,xa=va;_a<xa.length;_a+=1){var Ma=xa[_a];Tr.push({segments:new e.SegmentVector([Ma]),sortKey:Ma.sortKey,state:Qn})}else Tr.push({segments:Jr.segments,sortKey:0,state:Qn})}}Ze&&Tr.sort(function(bi,Zi){return bi.sortKey-Zi.sortKey});for(var Pa=0,Ga=Tr;Pa<Ga.length;Pa+=1){var ni=Ga[Pa],Ci=ni.state,li=Ci.programConfiguration,vi=Ci.program,Ua=Ci.layoutVertexBuffer,Li=Ci.indexBuffer,zi=Ci.uniformValues,Bi=ni.segments;vi.draw(ft,Mt.TRIANGLES,Ht,$t,or,Xe.disabled,zi,de.id,Ua,Li,Bi,de.paint,ve.transform.zoom,li)}}}}function bf(ve,Y,de,$){if(de.paint.get("heatmap-opacity")!==0)if(ve.renderPass==="offscreen"){var ye=ve.context,Ee=ye.gl,Pe=Sr.disabled,Ze=new we([Ee.ONE,Ee.ONE],e.Color.transparent,[!0,!0,!0,!0]);Jf(ye,ve,de),ye.clear({color:e.Color.transparent});for(var ft=0;ft<$.length;ft++){var Mt=$[ft];if(!Y.hasRenderableParent(Mt)){var Ht=Y.getTile(Mt),$t=Ht.getBucket(de);if(!!$t){var or=$t.programConfigurations.get(de.id),Tr=ve.useProgram("heatmap",or),Ur=ve.transform,Hr=Ur.zoom;Tr.draw(ye,Ee.TRIANGLES,ir.disabled,Pe,Ze,Xe.disabled,zn(Mt.posMatrix,Ht,Hr,de.paint.get("heatmap-intensity")),de.id,$t.layoutVertexBuffer,$t.indexBuffer,$t.segments,de.paint,ve.transform.zoom,or)}}}ye.viewport.set([0,0,ve.width,ve.height])}else ve.renderPass==="translucent"&&(ve.context.setColorMode(ve.colorModeForRenderPass()),$u(ve,de))}function Jf(ve,Y,de){var $=ve.gl;ve.activeTexture.set($.TEXTURE1),ve.viewport.set([0,0,Y.width/4,Y.height/4]);var ye=de.heatmapFbo;if(ye)$.bindTexture($.TEXTURE_2D,ye.colorAttachment.get()),ve.bindFramebuffer.set(ye.framebuffer);else{var Ee=$.createTexture();$.bindTexture($.TEXTURE_2D,Ee),$.texParameteri($.TEXTURE_2D,$.TEXTURE_WRAP_S,$.CLAMP_TO_EDGE),$.texParameteri($.TEXTURE_2D,$.TEXTURE_WRAP_T,$.CLAMP_TO_EDGE),$.texParameteri($.TEXTURE_2D,$.TEXTURE_MIN_FILTER,$.LINEAR),$.texParameteri($.TEXTURE_2D,$.TEXTURE_MAG_FILTER,$.LINEAR),ye=de.heatmapFbo=ve.createFramebuffer(Y.width/4,Y.height/4,!1),Ss(ve,Y,Ee,ye)}}function Ss(ve,Y,de,$){var ye=ve.gl,Ee=ve.extRenderToTextureHalfFloat?ve.extTextureHalfFloat.HALF_FLOAT_OES:ye.UNSIGNED_BYTE;ye.texImage2D(ye.TEXTURE_2D,0,ye.RGBA,Y.width/4,Y.height/4,0,ye.RGBA,Ee,null),$.colorAttachment.set(de)}function $u(ve,Y){var de=ve.context,$=de.gl,ye=Y.heatmapFbo;if(!!ye){de.activeTexture.set($.TEXTURE0),$.bindTexture($.TEXTURE_2D,ye.colorAttachment.get()),de.activeTexture.set($.TEXTURE1);var Ee=Y.colorRampTexture;Ee||(Ee=Y.colorRampTexture=new e.Texture(de,Y.colorRamp,$.RGBA)),Ee.bind($.LINEAR,$.CLAMP_TO_EDGE),ve.useProgram("heatmapTexture").draw(de,$.TRIANGLES,ir.disabled,Sr.disabled,ve.colorModeForRenderPass(),Xe.disabled,Ln(ve,Y,0,1),Y.id,ve.viewportBuffer,ve.quadTriangleIndexBuffer,ve.viewportSegments,Y.paint,ve.transform.zoom)}}function qu(ve,Y,de,$){if(ve.renderPass==="translucent"){var ye=de.paint.get("line-opacity"),Ee=de.paint.get("line-width");if(!(ye.constantOr(1)===0||Ee.constantOr(1)===0)){var Pe=ve.depthModeForSublayer(0,ir.ReadOnly),Ze=ve.colorModeForRenderPass(),ft=de.paint.get("line-dasharray"),Mt=de.paint.get("line-pattern"),Ht=Mt.constantOr(1),$t=de.paint.get("line-gradient"),or=de.getCrossfadeParameters(),Tr=Ht?"linePattern":ft?"lineSDF":$t?"lineGradient":"line",Ur=ve.context,Hr=Ur.gl,Br=!0;if($t){Ur.activeTexture.set(Hr.TEXTURE0);var Jr=de.gradientTexture;if(!de.gradient)return;Jr||(Jr=de.gradientTexture=new e.Texture(Ur,de.gradient,Hr.RGBA)),Jr.bind(Hr.LINEAR,Hr.CLAMP_TO_EDGE)}for(var hn=0,kn=$;hn<kn.length;hn+=1){var Nn=kn[hn],Kn=Y.getTile(Nn);if(!(Ht&&!Kn.patternsLoaded())){var qn=Kn.getBucket(de);if(!!qn){var Qn=qn.programConfigurations.get(de.id),va=ve.context.program.get(),_a=ve.useProgram(Tr,Qn),xa=Br||_a.program!==va,Ma=Mt.constantOr(null);if(Ma&&Kn.imageAtlas){var Pa=Kn.imageAtlas,Ga=Pa.patternPositions[Ma.to.toString()],ni=Pa.patternPositions[Ma.from.toString()];Ga&&ni&&Qn.setConstantPatternPositions(Ga,ni)}var Ci=Ht?di(ve,Kn,de,or):ft?yi(ve,Kn,de,ft,or):$t?pi(ve,Kn,de):Qa(ve,Kn,de);Ht?(Ur.activeTexture.set(Hr.TEXTURE0),Kn.imageAtlasTexture.bind(Hr.LINEAR,Hr.CLAMP_TO_EDGE),Qn.updatePaintBuffers(or)):ft&&(xa||ve.lineAtlas.dirty)&&(Ur.activeTexture.set(Hr.TEXTURE0),ve.lineAtlas.bind(Ur)),_a.draw(Ur,Hr.TRIANGLES,Pe,ve.stencilModeForClipping(Nn),Ze,Xe.disabled,Ci,de.id,qn.layoutVertexBuffer,qn.indexBuffer,qn.segments,de.paint,ve.transform.zoom,Qn),Br=!1}}}}}}function _f(ve,Y,de,$){var ye=de.paint.get("fill-color"),Ee=de.paint.get("fill-opacity");if(Ee.constantOr(1)!==0){var Pe=ve.colorModeForRenderPass(),Ze=de.paint.get("fill-pattern"),ft=ve.opaquePassEnabledForLayer()&&!Ze.constantOr(1)&&ye.constantOr(e.Color.transparent).a===1&&Ee.constantOr(0)===1?"opaque":"translucent";if(ve.renderPass===ft){var Mt=ve.depthModeForSublayer(1,ve.renderPass==="opaque"?ir.ReadWrite:ir.ReadOnly);ze(ve,Y,de,$,Mt,Pe,!1)}if(ve.renderPass==="translucent"&&de.paint.get("fill-antialias")){var Ht=ve.depthModeForSublayer(de.getPaintProperty("fill-outline-color")?2:0,ir.ReadOnly);ze(ve,Y,de,$,Ht,Pe,!0)}}}function ze(ve,Y,de,$,ye,Ee,Pe){var Ze=ve.context.gl,ft=de.paint.get("fill-pattern"),Mt=ft&&ft.constantOr(1),Ht=de.getCrossfadeParameters(),$t,or,Tr,Ur,Hr;Pe?(or=Mt&&!de.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",$t=Ze.LINES):(or=Mt?"fillPattern":"fill",$t=Ze.TRIANGLES);for(var Br=0,Jr=$;Br<Jr.length;Br+=1){var hn=Jr[Br],kn=Y.getTile(hn);if(!(Mt&&!kn.patternsLoaded())){var Nn=kn.getBucket(de);if(!!Nn){var Kn=Nn.programConfigurations.get(de.id),qn=ve.useProgram(or,Kn);Mt&&(ve.context.activeTexture.set(Ze.TEXTURE0),kn.imageAtlasTexture.bind(Ze.LINEAR,Ze.CLAMP_TO_EDGE),Kn.updatePaintBuffers(Ht));var Qn=ft.constantOr(null);if(Qn&&kn.imageAtlas){var va=kn.imageAtlas,_a=va.patternPositions[Qn.to.toString()],xa=va.patternPositions[Qn.from.toString()];_a&&xa&&Kn.setConstantPatternPositions(_a,xa)}var Ma=ve.translatePosMatrix(hn.posMatrix,kn,de.paint.get("fill-translate"),de.paint.get("fill-translate-anchor"));if(!Pe)Ur=Nn.indexBuffer,Hr=Nn.segments,Tr=Mt?ps(Ma,ve,Ht,kn):Co(Ma);else{Ur=Nn.indexBuffer2,Hr=Nn.segments2;var Pa=[Ze.drawingBufferWidth,Ze.drawingBufferHeight];Tr=or==="fillOutlinePattern"&&Mt?fu(Ma,ve,Ht,kn,Pa):Zu(Ma,Pa)}qn.draw(ve.context,$t,ye,ve.stencilModeForClipping(hn),Ee,Xe.disabled,Tr,de.id,Nn.layoutVertexBuffer,Ur,Hr,de.paint,ve.transform.zoom,Kn)}}}}function We(ve,Y,de,$){var ye=de.paint.get("fill-extrusion-opacity");if(ye!==0&&ve.renderPass==="translucent"){var Ee=new ir(ve.context.gl.LEQUAL,ir.ReadWrite,ve.depthRangeFor3D);if(ye===1&&!de.paint.get("fill-extrusion-pattern").constantOr(1)){var Pe=ve.colorModeForRenderPass();nt(ve,Y,de,$,Ee,Sr.disabled,Pe)}else nt(ve,Y,de,$,Ee,Sr.disabled,we.disabled),nt(ve,Y,de,$,Ee,ve.stencilModeFor3D(),ve.colorModeForRenderPass())}}function nt(ve,Y,de,$,ye,Ee,Pe){for(var Ze=ve.context,ft=Ze.gl,Mt=de.paint.get("fill-extrusion-pattern"),Ht=Mt.constantOr(1),$t=de.getCrossfadeParameters(),or=de.paint.get("fill-extrusion-opacity"),Tr=0,Ur=$;Tr<Ur.length;Tr+=1){var Hr=Ur[Tr],Br=Y.getTile(Hr),Jr=Br.getBucket(de);if(!!Jr){var hn=Jr.programConfigurations.get(de.id),kn=ve.useProgram(Ht?"fillExtrusionPattern":"fillExtrusion",hn);Ht&&(ve.context.activeTexture.set(ft.TEXTURE0),Br.imageAtlasTexture.bind(ft.LINEAR,ft.CLAMP_TO_EDGE),hn.updatePaintBuffers($t));var Nn=Mt.constantOr(null);if(Nn&&Br.imageAtlas){var Kn=Br.imageAtlas,qn=Kn.patternPositions[Nn.to.toString()],Qn=Kn.patternPositions[Nn.from.toString()];qn&&Qn&&hn.setConstantPatternPositions(qn,Qn)}var va=ve.translatePosMatrix(Hr.posMatrix,Br,de.paint.get("fill-extrusion-translate"),de.paint.get("fill-extrusion-translate-anchor")),_a=de.paint.get("fill-extrusion-vertical-gradient"),xa=Ht?Js(va,ve,_a,or,Hr,$t,Br):hs(va,ve,_a,or);kn.draw(Ze,Ze.gl.TRIANGLES,ye,Ee,Pe,Xe.backCCW,xa,de.id,Jr.layoutVertexBuffer,Jr.indexBuffer,Jr.segments,de.paint,ve.transform.zoom,hn)}}}function lt(ve,Y,de,$){if(!(ve.renderPass!=="offscreen"&&ve.renderPass!=="translucent")){for(var ye=ve.context,Ee=Y.getSource().maxzoom,Pe=ve.depthModeForSublayer(0,ir.ReadOnly),Ze=ve.colorModeForRenderPass(),ft=ve.renderPass==="translucent"?ve.stencilConfigForOverlap($):[{},$],Mt=ft[0],Ht=ft[1],$t=0,or=Ht;$t<or.length;$t+=1){var Tr=or[$t],Ur=Y.getTile(Tr);Ur.needsHillshadePrepare&&ve.renderPass==="offscreen"?xt(ve,Ur,de,Ee,Pe,Sr.disabled,Ze):ve.renderPass==="translucent"&&_t(ve,Ur,de,Pe,Mt[Tr.overscaledZ],Ze)}ye.viewport.set([0,0,ve.width,ve.height])}}function _t(ve,Y,de,$,ye,Ee){var Pe=ve.context,Ze=Pe.gl,ft=Y.fbo;if(!!ft){var Mt=ve.useProgram("hillshade");Pe.activeTexture.set(Ze.TEXTURE0),Ze.bindTexture(Ze.TEXTURE_2D,ft.colorAttachment.get());var Ht=Oa(ve,Y,de);Mt.draw(Pe,Ze.TRIANGLES,$,ye,Ee,Xe.disabled,Ht,de.id,ve.rasterBoundsBuffer,ve.quadTriangleIndexBuffer,ve.rasterBoundsSegments)}}function xt(ve,Y,de,$,ye,Ee,Pe){var Ze=ve.context,ft=Ze.gl,Mt=Y.dem;if(Mt&&Mt.data){var Ht=Mt.dim,$t=Mt.stride,or=Mt.getPixels();if(Ze.activeTexture.set(ft.TEXTURE1),Ze.pixelStoreUnpackPremultiplyAlpha.set(!1),Y.demTexture=Y.demTexture||ve.getTileTexture($t),Y.demTexture){var Tr=Y.demTexture;Tr.update(or,{premultiply:!1}),Tr.bind(ft.NEAREST,ft.CLAMP_TO_EDGE)}else Y.demTexture=new e.Texture(Ze,or,ft.RGBA,{premultiply:!1}),Y.demTexture.bind(ft.NEAREST,ft.CLAMP_TO_EDGE);Ze.activeTexture.set(ft.TEXTURE0);var Ur=Y.fbo;if(!Ur){var Hr=new e.Texture(Ze,{width:Ht,height:Ht,data:null},ft.RGBA);Hr.bind(ft.LINEAR,ft.CLAMP_TO_EDGE),Ur=Y.fbo=Ze.createFramebuffer(Ht,Ht,!0),Ur.colorAttachment.set(Hr.texture)}Ze.bindFramebuffer.set(Ur.framebuffer),Ze.viewport.set([0,0,Ht,Ht]),ve.useProgram("hillshadePrepare").draw(Ze,ft.TRIANGLES,ye,Ee,Pe,Xe.disabled,La(Y.tileID,Mt,$),de.id,ve.rasterBoundsBuffer,ve.quadTriangleIndexBuffer,ve.rasterBoundsSegments),Y.needsHillshadePrepare=!1}}function At(ve,Y,de,$){if(ve.renderPass==="translucent"&&de.paint.get("raster-opacity")!==0&&!!$.length)for(var ye=ve.context,Ee=ye.gl,Pe=Y.getSource(),Ze=ve.useProgram("raster"),ft=ve.colorModeForRenderPass(),Mt=Pe instanceof Z?[{},$]:ve.stencilConfigForOverlap($),Ht=Mt[0],$t=Mt[1],or=$t[$t.length-1].overscaledZ,Tr=!ve.options.moving,Ur=0,Hr=$t;Ur<Hr.length;Ur+=1){var Br=Hr[Ur],Jr=ve.depthModeForSublayer(Br.overscaledZ-or,de.paint.get("raster-opacity")===1?ir.ReadWrite:ir.ReadOnly,Ee.LESS),hn=Y.getTile(Br),kn=ve.transform.calculatePosMatrix(Br.toUnwrapped(),Tr);hn.registerFadeDuration(de.paint.get("raster-fade-duration"));var Nn=Y.findLoadedParent(Br,0),Kn=qt(hn,Nn,Y,de,ve.transform),qn=void 0,Qn=void 0,va=de.paint.get("raster-resampling")==="nearest"?Ee.NEAREST:Ee.LINEAR;ye.activeTexture.set(Ee.TEXTURE0),hn.texture.bind(va,Ee.CLAMP_TO_EDGE,Ee.LINEAR_MIPMAP_NEAREST),ye.activeTexture.set(Ee.TEXTURE1),Nn?(Nn.texture.bind(va,Ee.CLAMP_TO_EDGE,Ee.LINEAR_MIPMAP_NEAREST),qn=Math.pow(2,Nn.tileID.overscaledZ-hn.tileID.overscaledZ),Qn=[hn.tileID.canonical.x*qn%1,hn.tileID.canonical.y*qn%1]):hn.texture.bind(va,Ee.CLAMP_TO_EDGE,Ee.LINEAR_MIPMAP_NEAREST);var _a=to(kn,Qn||[0,0],qn||1,Kn,de);Pe instanceof Z?Ze.draw(ye,Ee.TRIANGLES,Jr,Sr.disabled,ft,Xe.disabled,_a,de.id,Pe.boundsBuffer,ve.quadTriangleIndexBuffer,Pe.boundsSegments):Ze.draw(ye,Ee.TRIANGLES,Jr,Ht[Br.overscaledZ],ft,Xe.disabled,_a,de.id,ve.rasterBoundsBuffer,ve.quadTriangleIndexBuffer,ve.rasterBoundsSegments)}}function qt(ve,Y,de,$,ye){var Ee=$.paint.get("raster-fade-duration");if(Ee>0){var Pe=e.browser.now(),Ze=(Pe-ve.timeAdded)/Ee,ft=Y?(Pe-Y.timeAdded)/Ee:-1,Mt=de.getSource(),Ht=ye.coveringZoomLevel({tileSize:Mt.tileSize,roundZoom:Mt.roundZoom}),$t=!Y||Math.abs(Y.tileID.overscaledZ-Ht)>Math.abs(ve.tileID.overscaledZ-Ht),or=$t&&ve.refreshedUponExpiration?1:e.clamp($t?Ze:1-ft,0,1);return ve.refreshedUponExpiration&&Ze>=1&&(ve.refreshedUponExpiration=!1),Y?{opacity:1,mix:1-or}:{opacity:or,mix:0}}else return{opacity:1,mix:0}}function sr(ve,Y,de){var $=de.paint.get("background-color"),ye=de.paint.get("background-opacity");if(ye!==0){var Ee=ve.context,Pe=Ee.gl,Ze=ve.transform,ft=Ze.tileSize,Mt=de.paint.get("background-pattern");if(!ve.isPatternMissing(Mt)){var Ht=!Mt&&$.a===1&&ye===1&&ve.opaquePassEnabledForLayer()?"opaque":"translucent";if(ve.renderPass===Ht){var $t=Sr.disabled,or=ve.depthModeForSublayer(0,Ht==="opaque"?ir.ReadWrite:ir.ReadOnly),Tr=ve.colorModeForRenderPass(),Ur=ve.useProgram(Mt?"backgroundPattern":"background"),Hr=Ze.coveringTiles({tileSize:ft});Mt&&(Ee.activeTexture.set(Pe.TEXTURE0),ve.imageManager.bind(ve.context));for(var Br=de.getCrossfadeParameters(),Jr=0,hn=Hr;Jr<hn.length;Jr+=1){var kn=hn[Jr],Nn=ve.transform.calculatePosMatrix(kn.toUnwrapped()),Kn=Mt?cu(Nn,ye,ve,Mt,{tileID:kn,tileSize:ft},Br):xo(Nn,ye,$);Ur.draw(Ee,Pe.TRIANGLES,or,$t,Tr,Xe.disabled,Kn,de.id,ve.tileExtentBuffer,ve.quadTriangleIndexBuffer,ve.tileExtentSegments)}}}}}var Qt=new e.Color(1,0,0,1),cr=new e.Color(0,1,0,1),kr=new e.Color(0,0,1,1),Gr=new e.Color(1,0,1,1),en=new e.Color(0,1,1,1);function _n(ve){var Y=ve.transform.padding,de=3;jn(ve,ve.transform.height-(Y.top||0),de,Qt),jn(ve,Y.bottom||0,de,cr),ma(ve,Y.left||0,de,kr),ma(ve,ve.transform.width-(Y.right||0),de,Gr);var $=ve.transform.centerPoint;Pn(ve,$.x,ve.transform.height-$.y,en)}function Pn(ve,Y,de,$){var ye=20,Ee=2;ba(ve,Y-Ee/2,de-ye/2,Ee,ye,$),ba(ve,Y-ye/2,de-Ee/2,ye,Ee,$)}function jn(ve,Y,de,$){ba(ve,0,Y+de/2,ve.transform.width,de,$)}function ma(ve,Y,de,$){ba(ve,Y-de/2,0,de,ve.transform.height,$)}function ba(ve,Y,de,$,ye,Ee){var Pe=ve.context,Ze=Pe.gl;Ze.enable(Ze.SCISSOR_TEST),Ze.scissor(Y*e.browser.devicePixelRatio,de*e.browser.devicePixelRatio,$*e.browser.devicePixelRatio,ye*e.browser.devicePixelRatio),Pe.clear({color:Ee}),Ze.disable(Ze.SCISSOR_TEST)}function Za(ve,Y,de){for(var $=0;$<de.length;$++)Wa(ve,Y,de[$])}function Wa(ve,Y,de){var $=ve.context,ye=$.gl,Ee=de.posMatrix,Pe=ve.useProgram("debug"),Ze=ir.disabled,ft=Sr.disabled,Mt=ve.colorModeForRenderPass(),Ht="$debug";$.activeTexture.set(ye.TEXTURE0),ve.emptyTexture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE),Pe.draw($,ye.LINE_STRIP,Ze,ft,Mt,Xe.disabled,yn(Ee,e.Color.red),Ht,ve.debugBuffer,ve.tileBorderIndexBuffer,ve.debugSegments);var $t=Y.getTileByID(de.key).latestRawTileData,or=$t&&$t.byteLength||0,Tr=Math.floor(or/1024),Ur=Y.getTile(de).tileSize,Hr=512/Math.min(Ur,512)*(de.overscaledZ/ve.transform.zoom)*.5,Br=de.canonical.toString();de.overscaledZ!==de.canonical.z&&(Br+=" => "+de.overscaledZ);var Jr=Br+" "+Tr+"kb";ei(ve,Jr),Pe.draw($,ye.TRIANGLES,Ze,ft,we.alphaBlended,Xe.disabled,yn(Ee,e.Color.transparent,Hr),Ht,ve.debugBuffer,ve.quadTriangleIndexBuffer,ve.debugSegments)}function ei(ve,Y){ve.initDebugOverlayCanvas();var de=ve.debugOverlayCanvas,$=ve.context.gl,ye=ve.debugOverlayCanvas.getContext("2d");ye.clearRect(0,0,de.width,de.height),ye.shadowColor="white",ye.shadowBlur=2,ye.lineWidth=1.5,ye.strokeStyle="white",ye.textBaseline="top",ye.font="bold "+36+"px Open Sans, sans-serif",ye.fillText(Y,5,5),ye.strokeText(Y,5,5),ve.debugOverlayTexture.update(de),ve.debugOverlayTexture.bind($.LINEAR,$.CLAMP_TO_EDGE)}function fi(ve,Y,de){var $=ve.context,ye=de.implementation;if(ve.renderPass==="offscreen"){var Ee=ye.prerender;Ee&&(ve.setCustomLayerDefaults(),$.setColorMode(ve.colorModeForRenderPass()),Ee.call(ye,$.gl,ve.transform.customLayerMatrix()),$.setDirty(),ve.setBaseState())}else if(ve.renderPass==="translucent"){ve.setCustomLayerDefaults(),$.setColorMode(ve.colorModeForRenderPass()),$.setStencilMode(Sr.disabled);var Pe=ye.renderingMode==="3d"?new ir(ve.context.gl.LEQUAL,ir.ReadWrite,ve.depthRangeFor3D):ve.depthModeForSublayer(0,ir.ReadOnly);$.setDepthMode(Pe),ye.render($.gl,ve.transform.customLayerMatrix()),$.setDirty(),ve.setBaseState(),$.bindFramebuffer.set(null)}}var oo={symbol:gf,circle:Uo,heatmap:bf,line:qu,fill:_f,"fill-extrusion":We,hillshade:lt,raster:At,background:sr,debug:Za,custom:fi},ri=function(Y,de){this.context=new $e(Y),this.transform=de,this._tileTextures={},this.setup(),this.numSublayers=ot.maxUnderzooming+ot.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ls,this.gpuTimers={}};ri.prototype.resize=function(Y,de){if(this.width=Y*e.browser.devicePixelRatio,this.height=de*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var $=0,ye=this.style._order;$<ye.length;$+=1){var Ee=ye[$];this.style._layers[Ee].resize()}},ri.prototype.setup=function(){var Y=this.context,de=new e.StructArrayLayout2i4;de.emplaceBack(0,0),de.emplaceBack(e.EXTENT,0),de.emplaceBack(0,e.EXTENT),de.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=Y.createVertexBuffer(de,Ml.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var $=new e.StructArrayLayout2i4;$.emplaceBack(0,0),$.emplaceBack(e.EXTENT,0),$.emplaceBack(0,e.EXTENT),$.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=Y.createVertexBuffer($,Ml.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var ye=new e.StructArrayLayout4i8;ye.emplaceBack(0,0,0,0),ye.emplaceBack(e.EXTENT,0,e.EXTENT,0),ye.emplaceBack(0,e.EXTENT,0,e.EXTENT),ye.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=Y.createVertexBuffer(ye,X.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var Ee=new e.StructArrayLayout2i4;Ee.emplaceBack(0,0),Ee.emplaceBack(1,0),Ee.emplaceBack(0,1),Ee.emplaceBack(1,1),this.viewportBuffer=Y.createVertexBuffer(Ee,Ml.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var Pe=new e.StructArrayLayout1ui2;Pe.emplaceBack(0),Pe.emplaceBack(1),Pe.emplaceBack(3),Pe.emplaceBack(2),Pe.emplaceBack(0),this.tileBorderIndexBuffer=Y.createIndexBuffer(Pe);var Ze=new e.StructArrayLayout3ui6;Ze.emplaceBack(0,1,2),Ze.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=Y.createIndexBuffer(Ze),this.emptyTexture=new e.Texture(Y,{width:1,height:1,data:new Uint8Array([0,0,0,0])},Y.gl.RGBA);var ft=this.context.gl;this.stencilClearMode=new Sr({func:ft.ALWAYS,mask:0},0,255,ft.ZERO,ft.ZERO,ft.ZERO)},ri.prototype.clearStencil=function(){var Y=this.context,de=Y.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var $=e.create();e.ortho($,0,this.width,this.height,0,0,1),e.scale($,$,[de.drawingBufferWidth,de.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(Y,de.TRIANGLES,ir.disabled,this.stencilClearMode,we.disabled,Xe.disabled,Cn($),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},ri.prototype._renderTileClippingMasks=function(Y,de){if(!(this.currentStencilSource===Y.source||!Y.isTileClipped()||!de||!de.length)){this.currentStencilSource=Y.source;var $=this.context,ye=$.gl;this.nextStencilID+de.length>256&&this.clearStencil(),$.setColorMode(we.disabled),$.setDepthMode(ir.disabled);var Ee=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Pe=0,Ze=de;Pe<Ze.length;Pe+=1){var ft=Ze[Pe],Mt=this._tileClippingMaskIDs[ft.key]=this.nextStencilID++;Ee.draw($,ye.TRIANGLES,ir.disabled,new Sr({func:ye.ALWAYS,mask:0},Mt,255,ye.KEEP,ye.KEEP,ye.REPLACE),we.disabled,Xe.disabled,Cn(ft.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},ri.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var Y=this.nextStencilID++,de=this.context.gl;return new Sr({func:de.NOTEQUAL,mask:255},Y,255,de.KEEP,de.KEEP,de.REPLACE)},ri.prototype.stencilModeForClipping=function(Y){var de=this.context.gl;return new Sr({func:de.EQUAL,mask:255},this._tileClippingMaskIDs[Y.key],0,de.KEEP,de.KEEP,de.REPLACE)},ri.prototype.stencilConfigForOverlap=function(Y){var de,$=this.context.gl,ye=Y.sort(function(Mt,Ht){return Ht.overscaledZ-Mt.overscaledZ}),Ee=ye[ye.length-1].overscaledZ,Pe=ye[0].overscaledZ-Ee+1;if(Pe>1){this.currentStencilSource=void 0,this.nextStencilID+Pe>256&&this.clearStencil();for(var Ze={},ft=0;ft<Pe;ft++)Ze[ft+Ee]=new Sr({func:$.GEQUAL,mask:255},ft+this.nextStencilID,255,$.KEEP,$.KEEP,$.REPLACE);return this.nextStencilID+=Pe,[Ze,ye]}return[(de={},de[Ee]=Sr.disabled,de),ye]},ri.prototype.colorModeForRenderPass=function(){var Y=this.context.gl;if(this._showOverdrawInspector){var de=8,$=1/de;return new we([Y.CONSTANT_COLOR,Y.ONE],new e.Color($,$,$,0),[!0,!0,!0,!0])}else return this.renderPass==="opaque"?we.unblended:we.alphaBlended},ri.prototype.depthModeForSublayer=function(Y,de,$){if(!this.opaquePassEnabledForLayer())return ir.disabled;var ye=1-((1+this.currentLayer)*this.numSublayers+Y)*this.depthEpsilon;return new ir($||this.context.gl.LEQUAL,de,[ye,ye])},ri.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},ri.prototype.render=function(Y,de){var $=this;this.style=Y,this.options=de,this.lineAtlas=Y.lineAtlas,this.imageManager=Y.imageManager,this.glyphManager=Y.glyphManager,this.symbolFadeChange=Y.placement.symbolFadeChange(e.browser.now()),this.imageManager.beginFrame();var ye=this.style._order,Ee=this.style.sourceCaches;for(var Pe in Ee){var Ze=Ee[Pe];Ze.used&&Ze.prepare(this.context)}var ft={},Mt={},Ht={};for(var $t in Ee){var or=Ee[$t];ft[$t]=or.getVisibleCoordinates(),Mt[$t]=ft[$t].slice().reverse(),Ht[$t]=or.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Tr=0;Tr<ye.length;Tr++){var Ur=ye[Tr];if(this.style._layers[Ur].is3D()){this.opaquePassCutoff=Tr;break}}this.renderPass="offscreen";for(var Hr=0,Br=ye;Hr<Br.length;Hr+=1){var Jr=Br[Hr],hn=this.style._layers[Jr];if(!(!hn.hasOffscreenPass()||hn.isHidden(this.transform.zoom))){var kn=Mt[hn.source];hn.type!=="custom"&&!kn.length||this.renderLayer(this,Ee[hn.source],hn,kn)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:de.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=de.showOverdrawInspector,this.depthRangeFor3D=[0,1-(Y._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=ye.length-1;this.currentLayer>=0;this.currentLayer--){var Nn=this.style._layers[ye[this.currentLayer]],Kn=Ee[Nn.source],qn=ft[Nn.source];this._renderTileClippingMasks(Nn,qn),this.renderLayer(this,Kn,Nn,qn)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<ye.length;this.currentLayer++){var Qn=this.style._layers[ye[this.currentLayer]],va=Ee[Qn.source],_a=(Qn.type==="symbol"?Ht:Mt)[Qn.source];this._renderTileClippingMasks(Qn,ft[Qn.source]),this.renderLayer(this,va,Qn,_a)}if(this.options.showTileBoundaries){var xa,Ma,Pa=e.values(this.style._layers);Pa.forEach(function(Ga){Ga.source&&!Ga.isHidden($.transform.zoom)&&(Ga.source!==(Ma&&Ma.id)&&(Ma=$.style.sourceCaches[Ga.source]),(!xa||xa.getSource().maxzoom<Ma.getSource().maxzoom)&&(xa=Ma))}),xa&&oo.debug(this,xa,xa.getVisibleCoordinates())}this.options.showPadding&&_n(this),this.context.setDefault()},ri.prototype.renderLayer=function(Y,de,$,ye){$.isHidden(this.transform.zoom)||$.type!=="background"&&$.type!=="custom"&&!ye.length||(this.id=$.id,this.gpuTimingStart($),oo[$.type](Y,de,$,ye,this.style.placement.variableOffsets),this.gpuTimingEnd())},ri.prototype.gpuTimingStart=function(Y){if(!!this.options.gpuTiming){var de=this.context.extTimerQuery,$=this.gpuTimers[Y.id];$||($=this.gpuTimers[Y.id]={calls:0,cpuTime:0,query:de.createQueryEXT()}),$.calls++,de.beginQueryEXT(de.TIME_ELAPSED_EXT,$.query)}},ri.prototype.gpuTimingEnd=function(){if(!!this.options.gpuTiming){var Y=this.context.extTimerQuery;Y.endQueryEXT(Y.TIME_ELAPSED_EXT)}},ri.prototype.collectGpuTimers=function(){var Y=this.gpuTimers;return this.gpuTimers={},Y},ri.prototype.queryGpuTimers=function(Y){var de={};for(var $ in Y){var ye=Y[$],Ee=this.context.extTimerQuery,Pe=Ee.getQueryObjectEXT(ye.query,Ee.QUERY_RESULT_EXT)/(1e3*1e3);Ee.deleteQueryEXT(ye.query),de[$]=Pe}return de},ri.prototype.translatePosMatrix=function(Y,de,$,ye,Ee){if(!$[0]&&!$[1])return Y;var Pe=Ee?ye==="map"?this.transform.angle:0:ye==="viewport"?-this.transform.angle:0;if(Pe){var Ze=Math.sin(Pe),ft=Math.cos(Pe);$=[$[0]*ft-$[1]*Ze,$[0]*Ze+$[1]*ft]}var Mt=[Ee?$[0]:da(de,$[0],this.transform.zoom),Ee?$[1]:da(de,$[1],this.transform.zoom),0],Ht=new Float32Array(16);return e.translate(Ht,Y,Mt),Ht},ri.prototype.saveTileTexture=function(Y){var de=this._tileTextures[Y.size[0]];de?de.push(Y):this._tileTextures[Y.size[0]]=[Y]},ri.prototype.getTileTexture=function(Y){var de=this._tileTextures[Y];return de&&de.length>0?de.pop():null},ri.prototype.isPatternMissing=function(Y){if(!Y)return!1;if(!Y.from||!Y.to)return!0;var de=this.imageManager.getPattern(Y.from.toString()),$=this.imageManager.getPattern(Y.to.toString());return!de||!$},ri.prototype.useProgram=function(Y,de){this.cache=this.cache||{};var $=""+Y+(de?de.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[$]||(this.cache[$]=new as(this.context,Dl[Y],de,Su[Y],this._showOverdrawInspector)),this.cache[$]},ri.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},ri.prototype.setBaseState=function(){var Y=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(Y.FUNC_ADD)},ri.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var Y=this.context.gl;this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,Y.RGBA)}},ri.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Vi=function(Y,de){this.points=Y,this.planes=de};Vi.fromInvProjectionMatrix=function(Y,de,$){var ye=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]],Ee=Math.pow(2,$),Pe=ye.map(function(Mt){return e.transformMat4([],Mt,Y)}).map(function(Mt){return e.scale$1([],Mt,1/Mt[3]/de*Ee)}),Ze=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],ft=Ze.map(function(Mt){var Ht=e.sub([],Pe[Mt[0]],Pe[Mt[1]]),$t=e.sub([],Pe[Mt[2]],Pe[Mt[1]]),or=e.normalize([],e.cross([],Ht,$t)),Tr=-e.dot(or,Pe[Mt[1]]);return or.concat(Tr)});return new Vi(Pe,ft)};var co=function(Y,de){this.min=Y,this.max=de,this.center=e.scale$2([],e.add([],this.min,this.max),.5)};co.prototype.quadrant=function(Y){for(var de=[Y%2===0,Y<2],$=e.clone$2(this.min),ye=e.clone$2(this.max),Ee=0;Ee<de.length;Ee++)$[Ee]=de[Ee]?this.min[Ee]:this.center[Ee],ye[Ee]=de[Ee]?this.center[Ee]:this.max[Ee];return ye[2]=this.max[2],new co($,ye)},co.prototype.distanceX=function(Y){var de=Math.max(Math.min(this.max[0],Y[0]),this.min[0]);return de-Y[0]},co.prototype.distanceY=function(Y){var de=Math.max(Math.min(this.max[1],Y[1]),this.min[1]);return de-Y[1]},co.prototype.intersects=function(Y){for(var de=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],$=!0,ye=0;ye<Y.planes.length;ye++){for(var Ee=Y.planes[ye],Pe=0,Ze=0;Ze<de.length;Ze++)Pe+=e.dot$1(Ee,de[Ze])>=0;if(Pe===0)return 0;Pe!==de.length&&($=!1)}if($)return 2;for(var ft=0;ft<3;ft++){for(var Mt=Number.MAX_VALUE,Ht=-Number.MAX_VALUE,$t=0;$t<Y.points.length;$t++){var or=Y.points[$t][ft]-this.min[ft];Mt=Math.min(Mt,or),Ht=Math.max(Ht,or)}if(Ht<0||Mt>this.max[ft]-this.min[ft])return 0}return 1};var _o=function(Y,de,$,ye){if(Y===void 0&&(Y=0),de===void 0&&(de=0),$===void 0&&($=0),ye===void 0&&(ye=0),isNaN(Y)||Y<0||isNaN(de)||de<0||isNaN($)||$<0||isNaN(ye)||ye<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=Y,this.bottom=de,this.left=$,this.right=ye};_o.prototype.interpolate=function(Y,de,$){return de.top!=null&&Y.top!=null&&(this.top=e.number(Y.top,de.top,$)),de.bottom!=null&&Y.bottom!=null&&(this.bottom=e.number(Y.bottom,de.bottom,$)),de.left!=null&&Y.left!=null&&(this.left=e.number(Y.left,de.left,$)),de.right!=null&&Y.right!=null&&(this.right=e.number(Y.right,de.right,$)),this},_o.prototype.getCenter=function(Y,de){var $=e.clamp((this.left+Y-this.right)/2,0,Y),ye=e.clamp((this.top+de-this.bottom)/2,0,de);return new e.Point($,ye)},_o.prototype.equals=function(Y){return this.top===Y.top&&this.bottom===Y.bottom&&this.left===Y.left&&this.right===Y.right},_o.prototype.clone=function(){return new _o(this.top,this.bottom,this.left,this.right)},_o.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var xi=function(Y,de,$,ye,Ee){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=Ee===void 0?!0:Ee,this._minZoom=Y||0,this._maxZoom=de||22,this._minPitch=$==null?0:$,this._maxPitch=ye==null?60:ye,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new _o,this._posMatrixCache={},this._alignedPosMatrixCache={}},Ai={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};xi.prototype.clone=function(){var Y=new xi(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return Y.tileSize=this.tileSize,Y.latRange=this.latRange,Y.width=this.width,Y.height=this.height,Y._center=this._center,Y.zoom=this.zoom,Y.angle=this.angle,Y._fov=this._fov,Y._pitch=this._pitch,Y._unmodified=this._unmodified,Y._edgeInsets=this._edgeInsets.clone(),Y._calcMatrices(),Y},Ai.minZoom.get=function(){return this._minZoom},Ai.minZoom.set=function(ve){this._minZoom!==ve&&(this._minZoom=ve,this.zoom=Math.max(this.zoom,ve))},Ai.maxZoom.get=function(){return this._maxZoom},Ai.maxZoom.set=function(ve){this._maxZoom!==ve&&(this._maxZoom=ve,this.zoom=Math.min(this.zoom,ve))},Ai.minPitch.get=function(){return this._minPitch},Ai.minPitch.set=function(ve){this._minPitch!==ve&&(this._minPitch=ve,this.pitch=Math.max(this.pitch,ve))},Ai.maxPitch.get=function(){return this._maxPitch},Ai.maxPitch.set=function(ve){this._maxPitch!==ve&&(this._maxPitch=ve,this.pitch=Math.min(this.pitch,ve))},Ai.renderWorldCopies.get=function(){return this._renderWorldCopies},Ai.renderWorldCopies.set=function(ve){ve===void 0?ve=!0:ve===null&&(ve=!1),this._renderWorldCopies=ve},Ai.worldSize.get=function(){return this.tileSize*this.scale},Ai.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Ai.size.get=function(){return new e.Point(this.width,this.height)},Ai.bearing.get=function(){return-this.angle/Math.PI*180},Ai.bearing.set=function(ve){var Y=-e.wrap(ve,-180,180)*Math.PI/180;this.angle!==Y&&(this._unmodified=!1,this.angle=Y,this._calcMatrices(),this.rotationMatrix=e.create$2(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Ai.pitch.get=function(){return this._pitch/Math.PI*180},Ai.pitch.set=function(ve){var Y=e.clamp(ve,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==Y&&(this._unmodified=!1,this._pitch=Y,this._calcMatrices())},Ai.fov.get=function(){return this._fov/Math.PI*180},Ai.fov.set=function(ve){ve=Math.max(.01,Math.min(60,ve)),this._fov!==ve&&(this._unmodified=!1,this._fov=ve/180*Math.PI,this._calcMatrices())},Ai.zoom.get=function(){return this._zoom},Ai.zoom.set=function(ve){var Y=Math.min(Math.max(ve,this.minZoom),this.maxZoom);this._zoom!==Y&&(this._unmodified=!1,this._zoom=Y,this.scale=this.zoomScale(Y),this.tileZoom=Math.floor(Y),this.zoomFraction=Y-this.tileZoom,this._constrain(),this._calcMatrices())},Ai.center.get=function(){return this._center},Ai.center.set=function(ve){ve.lat===this._center.lat&&ve.lng===this._center.lng||(this._unmodified=!1,this._center=ve,this._constrain(),this._calcMatrices())},Ai.padding.get=function(){return this._edgeInsets.toJSON()},Ai.padding.set=function(ve){this._edgeInsets.equals(ve)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,ve,1),this._calcMatrices())},Ai.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},xi.prototype.isPaddingEqual=function(Y){return this._edgeInsets.equals(Y)},xi.prototype.interpolatePadding=function(Y,de,$){this._unmodified=!1,this._edgeInsets.interpolate(Y,de,$),this._constrain(),this._calcMatrices()},xi.prototype.coveringZoomLevel=function(Y){var de=(Y.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/Y.tileSize));return Math.max(0,de)},xi.prototype.getVisibleUnwrappedCoordinates=function(Y){var de=[new e.UnwrappedTileID(0,Y)];if(this._renderWorldCopies)for(var $=this.pointCoordinate(new e.Point(0,0)),ye=this.pointCoordinate(new e.Point(this.width,0)),Ee=this.pointCoordinate(new e.Point(this.width,this.height)),Pe=this.pointCoordinate(new e.Point(0,this.height)),Ze=Math.floor(Math.min($.x,ye.x,Ee.x,Pe.x)),ft=Math.floor(Math.max($.x,ye.x,Ee.x,Pe.x)),Mt=1,Ht=Ze-Mt;Ht<=ft+Mt;Ht++)Ht!==0&&de.push(new e.UnwrappedTileID(Ht,Y));return de},xi.prototype.coveringTiles=function(Y){var de=this.coveringZoomLevel(Y),$=de;if(Y.minzoom!==void 0&&de<Y.minzoom)return[];Y.maxzoom!==void 0&&de>Y.maxzoom&&(de=Y.maxzoom);var ye=e.MercatorCoordinate.fromLngLat(this.center),Ee=Math.pow(2,de),Pe=[Ee*ye.x,Ee*ye.y,0],Ze=Vi.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,de),ft=Y.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(ft=de);var Mt=3,Ht=function(Pa){return{aabb:new co([Pa*Ee,0,0],[(Pa+1)*Ee,Ee,0]),zoom:0,x:0,y:0,wrap:Pa,fullyVisible:!1}},$t=[],or=[],Tr=de,Ur=Y.reparseOverscaled?$:de;if(this._renderWorldCopies)for(var Hr=1;Hr<=3;Hr++)$t.push(Ht(-Hr)),$t.push(Ht(Hr));for($t.push(Ht(0));$t.length>0;){var Br=$t.pop(),Jr=Br.x,hn=Br.y,kn=Br.fullyVisible;if(!kn){var Nn=Br.aabb.intersects(Ze);if(Nn===0)continue;kn=Nn===2}var Kn=Br.aabb.distanceX(Pe),qn=Br.aabb.distanceY(Pe),Qn=Math.max(Math.abs(Kn),Math.abs(qn)),va=Mt+(1<<Tr-Br.zoom)-2;if(Br.zoom===Tr||Qn>va&&Br.zoom>=ft){or.push({tileID:new e.OverscaledTileID(Br.zoom===Tr?Ur:Br.zoom,Br.wrap,Br.zoom,Jr,hn),distanceSq:e.sqrLen([Pe[0]-.5-Jr,Pe[1]-.5-hn])});continue}for(var _a=0;_a<4;_a++){var xa=(Jr<<1)+_a%2,Ma=(hn<<1)+(_a>>1);$t.push({aabb:Br.aabb.quadrant(_a),zoom:Br.zoom+1,x:xa,y:Ma,wrap:Br.wrap,fullyVisible:kn})}}return or.sort(function(Pa,Ga){return Pa.distanceSq-Ga.distanceSq}).map(function(Pa){return Pa.tileID})},xi.prototype.resize=function(Y,de){this.width=Y,this.height=de,this.pixelsToGLUnits=[2/Y,-2/de],this._constrain(),this._calcMatrices()},Ai.unmodified.get=function(){return this._unmodified},xi.prototype.zoomScale=function(Y){return Math.pow(2,Y)},xi.prototype.scaleZoom=function(Y){return Math.log(Y)/Math.LN2},xi.prototype.project=function(Y){var de=e.clamp(Y.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(Y.lng)*this.worldSize,e.mercatorYfromLat(de)*this.worldSize)},xi.prototype.unproject=function(Y){return new e.MercatorCoordinate(Y.x/this.worldSize,Y.y/this.worldSize).toLngLat()},Ai.point.get=function(){return this.project(this.center)},xi.prototype.setLocationAtPoint=function(Y,de){var $=this.pointCoordinate(de),ye=this.pointCoordinate(this.centerPoint),Ee=this.locationCoordinate(Y),Pe=new e.MercatorCoordinate(Ee.x-($.x-ye.x),Ee.y-($.y-ye.y));this.center=this.coordinateLocation(Pe),this._renderWorldCopies&&(this.center=this.center.wrap())},xi.prototype.locationPoint=function(Y){return this.coordinatePoint(this.locationCoordinate(Y))},xi.prototype.pointLocation=function(Y){return this.coordinateLocation(this.pointCoordinate(Y))},xi.prototype.locationCoordinate=function(Y){return e.MercatorCoordinate.fromLngLat(Y)},xi.prototype.coordinateLocation=function(Y){return Y.toLngLat()},xi.prototype.pointCoordinate=function(Y){var de=0,$=[Y.x,Y.y,0,1],ye=[Y.x,Y.y,1,1];e.transformMat4($,$,this.pixelMatrixInverse),e.transformMat4(ye,ye,this.pixelMatrixInverse);var Ee=$[3],Pe=ye[3],Ze=$[0]/Ee,ft=ye[0]/Pe,Mt=$[1]/Ee,Ht=ye[1]/Pe,$t=$[2]/Ee,or=ye[2]/Pe,Tr=$t===or?0:(de-$t)/(or-$t);return new e.MercatorCoordinate(e.number(Ze,ft,Tr)/this.worldSize,e.number(Mt,Ht,Tr)/this.worldSize)},xi.prototype.coordinatePoint=function(Y){var de=[Y.x*this.worldSize,Y.y*this.worldSize,0,1];return e.transformMat4(de,de,this.pixelMatrix),new e.Point(de[0]/de[3],de[1]/de[3])},xi.prototype.getBounds=function(){return new e.LngLatBounds().extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))},xi.prototype.getMaxBounds=function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])},xi.prototype.setMaxBounds=function(Y){Y?(this.lngRange=[Y.getWest(),Y.getEast()],this.latRange=[Y.getSouth(),Y.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},xi.prototype.calculatePosMatrix=function(Y,de){de===void 0&&(de=!1);var $=Y.key,ye=de?this._alignedPosMatrixCache:this._posMatrixCache;if(ye[$])return ye[$];var Ee=Y.canonical,Pe=this.worldSize/this.zoomScale(Ee.z),Ze=Ee.x+Math.pow(2,Ee.z)*Y.wrap,ft=e.identity(new Float64Array(16));return e.translate(ft,ft,[Ze*Pe,Ee.y*Pe,0]),e.scale(ft,ft,[Pe/e.EXTENT,Pe/e.EXTENT,1]),e.multiply(ft,de?this.alignedProjMatrix:this.projMatrix,ft),ye[$]=new Float32Array(ft),ye[$]},xi.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},xi.prototype._constrain=function(){if(!(!this.center||!this.width||!this.height||this._constraining)){this._constraining=!0;var Y=-90,de=90,$=-180,ye=180,Ee,Pe,Ze,ft,Mt=this.size,Ht=this._unmodified;if(this.latRange){var $t=this.latRange;Y=e.mercatorYfromLat($t[1])*this.worldSize,de=e.mercatorYfromLat($t[0])*this.worldSize,Ee=de-Y<Mt.y?Mt.y/(de-Y):0}if(this.lngRange){var or=this.lngRange;$=e.mercatorXfromLng(or[0])*this.worldSize,ye=e.mercatorXfromLng(or[1])*this.worldSize,Pe=ye-$<Mt.x?Mt.x/(ye-$):0}var Tr=this.point,Ur=Math.max(Pe||0,Ee||0);if(Ur){this.center=this.unproject(new e.Point(Pe?(ye+$)/2:Tr.x,Ee?(de+Y)/2:Tr.y)),this.zoom+=this.scaleZoom(Ur),this._unmodified=Ht,this._constraining=!1;return}if(this.latRange){var Hr=Tr.y,Br=Mt.y/2;Hr-Br<Y&&(ft=Y+Br),Hr+Br>de&&(ft=de-Br)}if(this.lngRange){var Jr=Tr.x,hn=Mt.x/2;Jr-hn<$&&(Ze=$+hn),Jr+hn>ye&&(Ze=ye-hn)}(Ze!==void 0||ft!==void 0)&&(this.center=this.unproject(new e.Point(Ze!==void 0?Ze:Tr.x,ft!==void 0?ft:Tr.y))),this._unmodified=Ht,this._constraining=!1}},xi.prototype._calcMatrices=function(){if(!!this.height){var Y=this._fov/2,de=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(Y)*this.height;var $=Math.PI/2+this._pitch,ye=this._fov*(.5+de.y/this.height),Ee=Math.sin(ye)*this.cameraToCenterDistance/Math.sin(e.clamp(Math.PI-$-ye,.01,Math.PI-.01)),Pe=this.point,Ze=Pe.x,ft=Pe.y,Mt=Math.cos(Math.PI/2-this._pitch)*Ee+this.cameraToCenterDistance,Ht=Mt*1.01,$t=this.height/50,or=new Float64Array(16);e.perspective(or,this._fov,this.width/this.height,$t,Ht),or[8]=-de.x*2/this.width,or[9]=de.y*2/this.height,e.scale(or,or,[1,-1,1]),e.translate(or,or,[0,0,-this.cameraToCenterDistance]),e.rotateX(or,or,this._pitch),e.rotateZ(or,or,this.angle),e.translate(or,or,[-Ze,-ft,0]),this.mercatorMatrix=e.scale([],or,[this.worldSize,this.worldSize,this.worldSize]),e.scale(or,or,[1,1,e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=or,this.invProjMatrix=e.invert([],this.projMatrix);var Tr=this.width%2/2,Ur=this.height%2/2,Hr=Math.cos(this.angle),Br=Math.sin(this.angle),Jr=Ze-Math.round(Ze)+Hr*Tr+Br*Ur,hn=ft-Math.round(ft)+Hr*Ur+Br*Tr,kn=new Float64Array(or);if(e.translate(kn,kn,[Jr>.5?Jr-1:Jr,hn>.5?hn-1:hn,0]),this.alignedProjMatrix=kn,or=e.create(),e.scale(or,or,[this.width/2,-this.height/2,1]),e.translate(or,or,[1,-1,0]),this.labelPlaneMatrix=or,or=e.create(),e.scale(or,or,[1,-1,1]),e.translate(or,or,[-1,-1,0]),e.scale(or,or,[2/this.width,2/this.height,1]),this.glCoordMatrix=or,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),or=e.invert(new Float64Array(16),this.pixelMatrix),!or)throw new Error("failed to invert matrix");this.pixelMatrixInverse=or,this._posMatrixCache={},this._alignedPosMatrixCache={}}},xi.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var Y=this.pointCoordinate(new e.Point(0,0)),de=[Y.x*this.worldSize,Y.y*this.worldSize,0,1],$=e.transformMat4(de,de,this.pixelMatrix);return $[3]/this.cameraToCenterDistance},xi.prototype.getCameraPoint=function(){var Y=this._pitch,de=Math.tan(Y)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,de))},xi.prototype.getCameraQueryGeometry=function(Y){var de=this.getCameraPoint();if(Y.length===1)return[Y[0],de];for(var $=de.x,ye=de.y,Ee=de.x,Pe=de.y,Ze=0,ft=Y;Ze<ft.length;Ze+=1){var Mt=ft[Ze];$=Math.min($,Mt.x),ye=Math.min(ye,Mt.y),Ee=Math.max(Ee,Mt.x),Pe=Math.max(Pe,Mt.y)}return[new e.Point($,ye),new e.Point(Ee,ye),new e.Point(Ee,Pe),new e.Point($,Pe),new e.Point($,ye)]},Object.defineProperties(xi.prototype,Ai);function ms(ve,Y){var de=!1,$=null,ye=function(){$=null,de&&(ve(),$=setTimeout(ye,Y),de=!1)};return function(){return de=!0,$||ye(),$}}var go=function(Y){this._hashName=Y&&encodeURIComponent(Y),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=ms(this._updateHashUnthrottled.bind(this),30*1e3/100)};go.prototype.addTo=function(Y){return this._map=Y,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},go.prototype.remove=function(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},go.prototype.getHashString=function(Y){var de=this._map.getCenter(),$=Math.round(this._map.getZoom()*100)/100,ye=Math.ceil(($*Math.LN2+Math.log(512/360/.5))/Math.LN10),Ee=Math.pow(10,ye),Pe=Math.round(de.lng*Ee)/Ee,Ze=Math.round(de.lat*Ee)/Ee,ft=this._map.getBearing(),Mt=this._map.getPitch(),Ht="";if(Y?Ht+="/"+Pe+"/"+Ze+"/"+$:Ht+=$+"/"+Ze+"/"+Pe,(ft||Mt)&&(Ht+="/"+Math.round(ft*10)/10),Mt&&(Ht+="/"+Math.round(Mt)),this._hashName){var $t=this._hashName,or=!1,Tr=e.window.location.hash.slice(1).split("&").map(function(Ur){var Hr=Ur.split("=")[0];return Hr===$t?(or=!0,Hr+"="+Ht):Ur}).filter(function(Ur){return Ur});return or||Tr.push($t+"="+Ht),"#"+Tr.join("&")}return"#"+Ht},go.prototype._getCurrentHash=function(){var Y=this,de=e.window.location.hash.replace("#","");if(this._hashName){var $;return de.split("&").map(function(ye){return ye.split("=")}).forEach(function(ye){ye[0]===Y._hashName&&($=ye)}),($&&$[1]||"").split("/")}return de.split("/")},go.prototype._onHashChange=function(){var Y=this._getCurrentHash();if(Y.length>=3&&!Y.some(function($){return isNaN($)})){var de=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(Y[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+Y[2],+Y[1]],zoom:+Y[0],bearing:de,pitch:+(Y[4]||0)}),!0}return!1},go.prototype._updateHashUnthrottled=function(){var Y=this.getHashString();try{e.window.history.replaceState(e.window.history.state,"",Y)}catch{}};var Io={linearity:.3,easing:e.bezier(0,0,.3,1)},jo=e.extend({deceleration:2500,maxSpeed:1400},Io),ce=e.extend({deceleration:20,maxSpeed:1400},Io),Te=e.extend({deceleration:1e3,maxSpeed:360},Io),Le=e.extend({deceleration:1e3,maxSpeed:90},Io),Be=function(Y){this._map=Y,this.clear()};Be.prototype.clear=function(){this._inertiaBuffer=[]},Be.prototype.record=function(Y){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.browser.now(),settings:Y})},Be.prototype._drainInertiaBuffer=function(){for(var Y=this._inertiaBuffer,de=e.browser.now(),$=160;Y.length>0&&de-Y[0].time>$;)Y.shift()},Be.prototype._onMoveEnd=function(Y){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var de={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0},$=0,ye=this._inertiaBuffer;$<ye.length;$+=1){var Ee=ye[$],Pe=Ee.settings;de.zoom+=Pe.zoomDelta||0,de.bearing+=Pe.bearingDelta||0,de.pitch+=Pe.pitchDelta||0,Pe.panDelta&&de.pan._add(Pe.panDelta),Pe.around&&(de.around=Pe.around),Pe.pinchAround&&(de.pinchAround=Pe.pinchAround)}var Ze=this._inertiaBuffer[this._inertiaBuffer.length-1],ft=Ze.time-this._inertiaBuffer[0].time,Mt={};if(de.pan.mag()){var Ht=Ke(de.pan.mag(),ft,e.extend({},jo,Y||{}));Mt.offset=de.pan.mult(Ht.amount/de.pan.mag()),Mt.center=this._map.transform.center,Oe(Mt,Ht)}if(de.zoom){var $t=Ke(de.zoom,ft,ce);Mt.zoom=this._map.transform.zoom+$t.amount,Oe(Mt,$t)}if(de.bearing){var or=Ke(de.bearing,ft,Te);Mt.bearing=this._map.transform.bearing+e.clamp(or.amount,-179,179),Oe(Mt,or)}if(de.pitch){var Tr=Ke(de.pitch,ft,Le);Mt.pitch=this._map.transform.pitch+Tr.amount,Oe(Mt,Tr)}if(Mt.zoom||Mt.bearing){var Ur=de.pinchAround===void 0?de.around:de.pinchAround;Mt.around=Ur?this._map.unproject(Ur):this._map.getCenter()}return this.clear(),e.extend(Mt,{noMoveStart:!0})}};function Oe(ve,Y){(!ve.duration||ve.duration<Y.duration)&&(ve.duration=Y.duration,ve.easing=Y.easing)}function Ke(ve,Y,de){var $=de.maxSpeed,ye=de.linearity,Ee=de.deceleration,Pe=e.clamp(ve*ye/(Y/1e3),-$,$),Ze=Math.abs(Pe)/(Ee*ye);return{easing:de.easing,duration:Ze*1e3,amount:Pe*(Ze/2)}}var bt=function(ve){function Y($,ye,Ee,Pe){Pe===void 0&&(Pe={});var Ze=a.mousePos(ye.getCanvasContainer(),Ee),ft=ye.unproject(Ze);ve.call(this,$,e.extend({point:Ze,lngLat:ft,originalEvent:Ee},Pe)),this._defaultPrevented=!1,this.target=ye}ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y;var de={defaultPrevented:{configurable:!0}};return Y.prototype.preventDefault=function(){this._defaultPrevented=!0},de.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Y.prototype,de),Y}(e.Event),vt=function(ve){function Y($,ye,Ee){var Pe=$==="touchend"?Ee.changedTouches:Ee.touches,Ze=a.touchPos(ye.getCanvasContainer(),Pe),ft=Ze.map(function($t){return ye.unproject($t)}),Mt=Ze.reduce(function($t,or,Tr,Ur){return $t.add(or.div(Ur.length))},new e.Point(0,0)),Ht=ye.unproject(Mt);ve.call(this,$,{points:Ze,point:Mt,lngLats:ft,lngLat:Ht,originalEvent:Ee}),this._defaultPrevented=!1}ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y;var de={defaultPrevented:{configurable:!0}};return Y.prototype.preventDefault=function(){this._defaultPrevented=!0},de.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Y.prototype,de),Y}(e.Event),Ct=function(ve){function Y($,ye,Ee){ve.call(this,$,{originalEvent:Ee}),this._defaultPrevented=!1}ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y;var de={defaultPrevented:{configurable:!0}};return Y.prototype.preventDefault=function(){this._defaultPrevented=!0},de.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Y.prototype,de),Y}(e.Event),Ut=function(Y,de){this._map=Y,this._clickTolerance=de.clickTolerance};Ut.prototype.reset=function(){delete this._mousedownPos},Ut.prototype.wheel=function(Y){return this._firePreventable(new Ct(Y.type,this._map,Y))},Ut.prototype.mousedown=function(Y,de){return this._mousedownPos=de,this._firePreventable(new bt(Y.type,this._map,Y))},Ut.prototype.mouseup=function(Y){this._map.fire(new bt(Y.type,this._map,Y))},Ut.prototype.click=function(Y,de){this._mousedownPos&&this._mousedownPos.dist(de)>=this._clickTolerance||this._map.fire(new bt(Y.type,this._map,Y))},Ut.prototype.dblclick=function(Y){return this._firePreventable(new bt(Y.type,this._map,Y))},Ut.prototype.mouseover=function(Y){this._map.fire(new bt(Y.type,this._map,Y))},Ut.prototype.mouseout=function(Y){this._map.fire(new bt(Y.type,this._map,Y))},Ut.prototype.touchstart=function(Y){return this._firePreventable(new vt(Y.type,this._map,Y))},Ut.prototype.touchmove=function(Y){this._map.fire(new vt(Y.type,this._map,Y))},Ut.prototype.touchend=function(Y){this._map.fire(new vt(Y.type,this._map,Y))},Ut.prototype.touchcancel=function(Y){this._map.fire(new vt(Y.type,this._map,Y))},Ut.prototype._firePreventable=function(Y){if(this._map.fire(Y),Y.defaultPrevented)return{}},Ut.prototype.isEnabled=function(){return!0},Ut.prototype.isActive=function(){return!1},Ut.prototype.enable=function(){},Ut.prototype.disable=function(){};var Wt=function(Y){this._map=Y};Wt.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Wt.prototype.mousemove=function(Y){this._map.fire(new bt(Y.type,this._map,Y))},Wt.prototype.mousedown=function(){this._delayContextMenu=!0},Wt.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new bt("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Wt.prototype.contextmenu=function(Y){this._delayContextMenu?this._contextMenuEvent=Y:this._map.fire(new bt(Y.type,this._map,Y)),this._map.listens("contextmenu")&&Y.preventDefault()},Wt.prototype.isEnabled=function(){return!0},Wt.prototype.isActive=function(){return!1},Wt.prototype.enable=function(){},Wt.prototype.disable=function(){};var Xt=function(Y,de){this._map=Y,this._el=Y.getCanvasContainer(),this._container=Y.getContainer(),this._clickTolerance=de.clickTolerance||1};Xt.prototype.isEnabled=function(){return!!this._enabled},Xt.prototype.isActive=function(){return!!this._active},Xt.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Xt.prototype.disable=function(){!this.isEnabled()||(this._enabled=!1)},Xt.prototype.mousedown=function(Y,de){!this.isEnabled()||!(Y.shiftKey&&Y.button===0)||(a.disableDrag(),this._startPos=this._lastPos=de,this._active=!0)},Xt.prototype.mousemoveWindow=function(Y,de){if(!!this._active){var $=de;if(!(this._lastPos.equals($)||!this._box&&$.dist(this._startPos)<this._clickTolerance)){var ye=this._startPos;this._lastPos=$,this._box||(this._box=a.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",Y));var Ee=Math.min(ye.x,$.x),Pe=Math.max(ye.x,$.x),Ze=Math.min(ye.y,$.y),ft=Math.max(ye.y,$.y);a.setTransform(this._box,"translate("+Ee+"px,"+Ze+"px)"),this._box.style.width=Pe-Ee+"px",this._box.style.height=ft-Ze+"px"}}},Xt.prototype.mouseupWindow=function(Y,de){var $=this;if(!!this._active&&Y.button===0){var ye=this._startPos,Ee=de;if(this.reset(),a.suppressClick(),ye.x===Ee.x&&ye.y===Ee.y)this._fireEvent("boxzoomcancel",Y);else return this._map.fire(new e.Event("boxzoomend",{originalEvent:Y})),{cameraAnimation:function(Pe){return Pe.fitScreenCoordinates(ye,Ee,$._map.getBearing(),{linear:!0})}}}},Xt.prototype.keydown=function(Y){!this._active||Y.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",Y))},Xt.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(a.remove(this._box),this._box=null),a.enableDrag(),delete this._startPos,delete this._lastPos},Xt.prototype._fireEvent=function(Y,de){return this._map.fire(new e.Event(Y,{originalEvent:de}))};function br(ve,Y){for(var de={},$=0;$<ve.length;$++)de[ve[$].identifier]=Y[$];return de}function Qr(ve){for(var Y=new e.Point(0,0),de=0,$=ve;de<$.length;de+=1){var ye=$[de];Y._add(ye)}return Y.div(ve.length)}var cn=500,Mr=500,Or=30,Xr=function(Y){this.reset(),this.numTouches=Y.numTouches};Xr.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Xr.prototype.touchstart=function(Y,de,$){(this.centroid||$.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=Y.timeStamp),$.length===this.numTouches&&(this.centroid=Qr(de),this.touches=br($,de)))},Xr.prototype.touchmove=function(Y,de,$){if(!(this.aborted||!this.centroid)){var ye=br($,de);for(var Ee in this.touches){var Pe=this.touches[Ee],Ze=ye[Ee];(!Ze||Ze.dist(Pe)>Or)&&(this.aborted=!0)}}},Xr.prototype.touchend=function(Y,de,$){if((!this.centroid||Y.timeStamp-this.startTime>Mr)&&(this.aborted=!0),$.length===0){var ye=!this.aborted&&this.centroid;if(this.reset(),ye)return ye}};var ln=function(Y){this.singleTap=new Xr(Y),this.numTaps=Y.numTaps,this.reset()};ln.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},ln.prototype.touchstart=function(Y,de,$){this.singleTap.touchstart(Y,de,$)},ln.prototype.touchmove=function(Y,de,$){this.singleTap.touchmove(Y,de,$)},ln.prototype.touchend=function(Y,de,$){var ye=this.singleTap.touchend(Y,de,$);if(ye){var Ee=Y.timeStamp-this.lastTime<cn,Pe=!this.lastTap||this.lastTap.dist(ye)<Or;if((!Ee||!Pe)&&this.reset(),this.count++,this.lastTime=Y.timeStamp,this.lastTap=ye,this.count===this.numTaps)return this.reset(),ye}};var fn=function(){this._zoomIn=new ln({numTouches:1,numTaps:2}),this._zoomOut=new ln({numTouches:2,numTaps:1}),this.reset()};fn.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},fn.prototype.touchstart=function(Y,de,$){this._zoomIn.touchstart(Y,de,$),this._zoomOut.touchstart(Y,de,$)},fn.prototype.touchmove=function(Y,de,$){this._zoomIn.touchmove(Y,de,$),this._zoomOut.touchmove(Y,de,$)},fn.prototype.touchend=function(Y,de,$){var ye=this,Ee=this._zoomIn.touchend(Y,de,$),Pe=this._zoomOut.touchend(Y,de,$);if(Ee)return this._active=!0,Y.preventDefault(),setTimeout(function(){return ye.reset()},0),{cameraAnimation:function(Ze){return Ze.easeTo({duration:300,zoom:Ze.getZoom()+1,around:Ze.unproject(Ee)},{originalEvent:Y})}};if(Pe)return this._active=!0,Y.preventDefault(),setTimeout(function(){return ye.reset()},0),{cameraAnimation:function(Ze){return Ze.easeTo({duration:300,zoom:Ze.getZoom()-1,around:Ze.unproject(Pe)},{originalEvent:Y})}}},fn.prototype.touchcancel=function(){this.reset()},fn.prototype.enable=function(){this._enabled=!0},fn.prototype.disable=function(){this._enabled=!1,this.reset()},fn.prototype.isEnabled=function(){return this._enabled},fn.prototype.isActive=function(){return this._active};var Kr=0,Gn=2,ra=function(Y){this.reset(),this._clickTolerance=Y.clickTolerance||1};ra.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},ra.prototype._correctButton=function(Y,de){return!1},ra.prototype._move=function(Y,de){return{}},ra.prototype.mousedown=function(Y,de){if(!this._lastPoint){var $=a.mouseButton(Y);!this._correctButton(Y,$)||(this._lastPoint=de,this._eventButton=$)}},ra.prototype.mousemoveWindow=function(Y,de){var $=this._lastPoint;if(!!$&&(Y.preventDefault(),!(!this._moved&&de.dist($)<this._clickTolerance)))return this._moved=!0,this._lastPoint=de,this._move($,de)},ra.prototype.mouseupWindow=function(Y){var de=a.mouseButton(Y);de===this._eventButton&&(this._moved&&a.suppressClick(),this.reset())},ra.prototype.enable=function(){this._enabled=!0},ra.prototype.disable=function(){this._enabled=!1,this.reset()},ra.prototype.isEnabled=function(){return this._enabled},ra.prototype.isActive=function(){return this._active};var wa=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.mousedown=function($,ye){ve.prototype.mousedown.call(this,$,ye),this._lastPoint&&(this._active=!0)},Y.prototype._correctButton=function($,ye){return ye===Kr&&!$.ctrlKey},Y.prototype._move=function($,ye){return{around:ye,panDelta:ye.sub($)}},Y}(ra),oa=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype._correctButton=function($,ye){return ye===Kr&&$.ctrlKey||ye===Gn},Y.prototype._move=function($,ye){var Ee=.8,Pe=(ye.x-$.x)*Ee;if(Pe)return this._active=!0,{bearingDelta:Pe}},Y.prototype.contextmenu=function($){$.preventDefault()},Y}(ra),Ea=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype._correctButton=function($,ye){return ye===Kr&&$.ctrlKey||ye===Gn},Y.prototype._move=function($,ye){var Ee=-.5,Pe=(ye.y-$.y)*Ee;if(Pe)return this._active=!0,{pitchDelta:Pe}},Y.prototype.contextmenu=function($){$.preventDefault()},Y}(ra),fa=function(Y){this._minTouches=1,this._clickTolerance=Y.clickTolerance||1,this.reset()};fa.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)},fa.prototype.touchstart=function(Y,de,$){return this._calculateTransform(Y,de,$)},fa.prototype.touchmove=function(Y,de,$){if(!!this._active)return Y.preventDefault(),this._calculateTransform(Y,de,$)},fa.prototype.touchend=function(Y,de,$){this._calculateTransform(Y,de,$),this._active&&$.length<this._minTouches&&this.reset()},fa.prototype.touchcancel=function(){this.reset()},fa.prototype._calculateTransform=function(Y,de,$){$.length>0&&(this._active=!0);var ye=br($,de),Ee=new e.Point(0,0),Pe=new e.Point(0,0),Ze=0;for(var ft in ye){var Mt=ye[ft],Ht=this._touches[ft];Ht&&(Ee._add(Mt),Pe._add(Mt.sub(Ht)),Ze++,ye[ft]=Mt)}if(this._touches=ye,!(Ze<this._minTouches||!Pe.mag())){var $t=Pe.div(Ze);if(this._sum._add($t),!(this._sum.mag()<this._clickTolerance)){var or=Ee.div(Ze);return{around:or,panDelta:$t}}}},fa.prototype.enable=function(){this._enabled=!0},fa.prototype.disable=function(){this._enabled=!1,this.reset()},fa.prototype.isEnabled=function(){return this._enabled},fa.prototype.isActive=function(){return this._active};var Va=function(){this.reset()};Va.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Va.prototype._start=function(Y){},Va.prototype._move=function(Y,de,$){return{}},Va.prototype.touchstart=function(Y,de,$){this._firstTwoTouches||$.length<2||(this._firstTwoTouches=[$[0].identifier,$[1].identifier],this._start([de[0],de[1]]))},Va.prototype.touchmove=function(Y,de,$){if(!!this._firstTwoTouches){Y.preventDefault();var ye=this._firstTwoTouches,Ee=ye[0],Pe=ye[1],Ze=Ra($,de,Ee),ft=Ra($,de,Pe);if(!(!Ze||!ft)){var Mt=this._aroundCenter?null:Ze.add(ft).div(2);return this._move([Ze,ft],Mt,Y)}}},Va.prototype.touchend=function(Y,de,$){if(!!this._firstTwoTouches){var ye=this._firstTwoTouches,Ee=ye[0],Pe=ye[1],Ze=Ra($,de,Ee),ft=Ra($,de,Pe);Ze&&ft||(this._active&&a.suppressClick(),this.reset())}},Va.prototype.touchcancel=function(){this.reset()},Va.prototype.enable=function(Y){this._enabled=!0,this._aroundCenter=!!Y&&Y.around==="center"},Va.prototype.disable=function(){this._enabled=!1,this.reset()},Va.prototype.isEnabled=function(){return this._enabled},Va.prototype.isActive=function(){return this._active};function Ra(ve,Y,de){for(var $=0;$<ve.length;$++)if(ve[$].identifier===de)return Y[$]}var $a=.1;function gi(ve,Y){return Math.log(ve/Y)/Math.LN2}var ho=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.reset=function(){ve.prototype.reset.call(this),delete this._distance,delete this._startDistance},Y.prototype._start=function($){this._startDistance=this._distance=$[0].dist($[1])},Y.prototype._move=function($,ye){var Ee=this._distance;if(this._distance=$[0].dist($[1]),!(!this._active&&Math.abs(gi(this._distance,this._startDistance))<$a))return this._active=!0,{zoomDelta:gi(this._distance,Ee),pinchAround:ye}},Y}(Va),Ii=25;function ha(ve,Y){return ve.angleWith(Y)*180/Math.PI}var ai=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.reset=function(){ve.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},Y.prototype._start=function($){this._startVector=this._vector=$[0].sub($[1]),this._minDiameter=$[0].dist($[1])},Y.prototype._move=function($,ye){var Ee=this._vector;if(this._vector=$[0].sub($[1]),!(!this._active&&this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:ha(this._vector,Ee),pinchAround:ye}},Y.prototype._isBelowThreshold=function($){this._minDiameter=Math.min(this._minDiameter,$.mag());var ye=Math.PI*this._minDiameter,Ee=Ii/ye*360,Pe=ha($,this._startVector);return Math.abs(Pe)<Ee},Y}(Va);function Xa(ve){return Math.abs(ve.y)>Math.abs(ve.x)}var Mi=100,si=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.reset=function(){ve.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},Y.prototype._start=function($){this._lastPoints=$,Xa($[0].sub($[1]))&&(this._valid=!1)},Y.prototype._move=function($,ye,Ee){var Pe=$[0].sub(this._lastPoints[0]),Ze=$[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Pe,Ze,Ee.timeStamp),!!this._valid){this._lastPoints=$,this._active=!0;var ft=(Pe.y+Ze.y)/2,Mt=-.5;return{pitchDelta:ft*Mt}}},Y.prototype.gestureBeginsVertically=function($,ye,Ee){if(this._valid!==void 0)return this._valid;var Pe=2,Ze=$.mag()>=Pe,ft=ye.mag()>=Pe;if(!(!Ze&&!ft)){if(!Ze||!ft)return this._firstMove===void 0&&(this._firstMove=Ee),Ee-this._firstMove<Mi?void 0:!1;var Mt=$.y>0==ye.y>0;return Xa($)&&Xa(ye)&&Mt}},Y}(Va),so={panStep:100,bearingStep:15,pitchStep:10},$i=function(){var Y=so;this._panStep=Y.panStep,this._bearingStep=Y.bearingStep,this._pitchStep=Y.pitchStep};$i.prototype.reset=function(){this._active=!1},$i.prototype.keydown=function(Y){var de=this;if(!(Y.altKey||Y.ctrlKey||Y.metaKey)){var $=0,ye=0,Ee=0,Pe=0,Ze=0;switch(Y.keyCode){case 61:case 107:case 171:case 187:$=1;break;case 189:case 109:case 173:$=-1;break;case 37:Y.shiftKey?ye=-1:(Y.preventDefault(),Pe=-1);break;case 39:Y.shiftKey?ye=1:(Y.preventDefault(),Pe=1);break;case 38:Y.shiftKey?Ee=1:(Y.preventDefault(),Ze=-1);break;case 40:Y.shiftKey?Ee=-1:(Y.preventDefault(),Ze=1);break;default:return}return{cameraAnimation:function(ft){var Mt=ft.getZoom();ft.easeTo({duration:300,easeId:"keyboardHandler",easing:yo,zoom:$?Math.round(Mt)+$*(Y.shiftKey?2:1):Mt,bearing:ft.getBearing()+ye*de._bearingStep,pitch:ft.getPitch()+Ee*de._pitchStep,offset:[-Pe*de._panStep,-Ze*de._panStep],center:ft.getCenter()},{originalEvent:Y})}}}},$i.prototype.enable=function(){this._enabled=!0},$i.prototype.disable=function(){this._enabled=!1,this.reset()},$i.prototype.isEnabled=function(){return this._enabled},$i.prototype.isActive=function(){return this._active};function yo(ve){return ve*(2-ve)}var Zo=4.000244140625,Ho=1/100,Ko=1/450,Gi=2,Ni=function(Y,de){this._map=Y,this._el=Y.getCanvasContainer(),this._handler=de,this._delta=0,this._defaultZoomRate=Ho,this._wheelZoomRate=Ko,e.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Ni.prototype.setZoomRate=function(Y){this._defaultZoomRate=Y},Ni.prototype.setWheelZoomRate=function(Y){this._wheelZoomRate=Y},Ni.prototype.isEnabled=function(){return!!this._enabled},Ni.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Ni.prototype.isZooming=function(){return!!this._zooming},Ni.prototype.enable=function(Y){this.isEnabled()||(this._enabled=!0,this._aroundCenter=Y&&Y.around==="center")},Ni.prototype.disable=function(){!this.isEnabled()||(this._enabled=!1)},Ni.prototype.wheel=function(Y){if(!!this.isEnabled()){var de=Y.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?Y.deltaY*40:Y.deltaY,$=e.browser.now(),ye=$-(this._lastWheelEventTime||0);this._lastWheelEventTime=$,de!==0&&de%Zo===0?this._type="wheel":de!==0&&Math.abs(de)<4?this._type="trackpad":ye>400?(this._type=null,this._lastValue=de,this._timeout=setTimeout(this._onTimeout,40,Y)):this._type||(this._type=Math.abs(ye*de)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,de+=this._lastValue)),Y.shiftKey&&de&&(de=de/4),this._type&&(this._lastWheelEvent=Y,this._delta-=de,this._active||this._start(Y)),Y.preventDefault()}},Ni.prototype._onTimeout=function(Y){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(Y)},Ni.prototype._start=function(Y){if(!!this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var de=a.mousePos(this._el,Y);this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(de)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Ni.prototype.renderFrame=function(){return this._onScrollFrame()},Ni.prototype._onScrollFrame=function(){var Y=this;if(!!this._frameId&&(this._frameId=null,!!this.isActive())){var de=this._map.transform;if(this._delta!==0){var $=this._type==="wheel"&&Math.abs(this._delta)>Zo?this._wheelZoomRate:this._defaultZoomRate,ye=Gi/(1+Math.exp(-Math.abs(this._delta*$)));this._delta<0&&ye!==0&&(ye=1/ye);var Ee=typeof this._targetZoom=="number"?de.zoomScale(this._targetZoom):de.scale;this._targetZoom=Math.min(de.maxZoom,Math.max(de.minZoom,de.scaleZoom(Ee*ye))),this._type==="wheel"&&(this._startZoom=de.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Pe=typeof this._targetZoom=="number"?this._targetZoom:de.zoom,Ze=this._startZoom,ft=this._easing,Mt=!1,Ht;if(this._type==="wheel"&&Ze&&ft){var $t=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1),or=ft($t);Ht=e.number(Ze,Pe,or),$t<1?this._frameId||(this._frameId=!0):Mt=!0}else Ht=Pe,Mt=!0;return this._active=!0,Mt&&(this._active=!1,this._finishTimeout=setTimeout(function(){Y._zooming=!1,Y._handler._triggerRenderFrame(),delete Y._targetZoom,delete Y._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Mt,zoomDelta:Ht-de.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Ni.prototype._smoothOutEasing=function(Y){var de=e.ease;if(this._prevEase){var $=this._prevEase,ye=(e.browser.now()-$.start)/$.duration,Ee=$.easing(ye+.01)-$.easing(ye),Pe=.27/Math.sqrt(Ee*Ee+1e-4)*.01,Ze=Math.sqrt(.27*.27-Pe*Pe);de=e.bezier(Pe,Ze,.25,1)}return this._prevEase={start:e.browser.now(),duration:Y,easing:de},de},Ni.prototype.reset=function(){this._active=!1};var Fa=function(Y,de){this._clickZoom=Y,this._tapZoom=de};Fa.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Fa.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Fa.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Fa.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var ja=function(){this.reset()};ja.prototype.reset=function(){this._active=!1},ja.prototype.dblclick=function(Y,de){return Y.preventDefault(),{cameraAnimation:function($){$.easeTo({duration:300,zoom:$.getZoom()+(Y.shiftKey?-1:1),around:$.unproject(de)},{originalEvent:Y})}}},ja.prototype.enable=function(){this._enabled=!0},ja.prototype.disable=function(){this._enabled=!1,this.reset()},ja.prototype.isEnabled=function(){return this._enabled},ja.prototype.isActive=function(){return this._active};var bo=function(){this._tap=new ln({numTouches:1,numTaps:1}),this.reset()};bo.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},bo.prototype.touchstart=function(Y,de,$){this._swipePoint||(this._tapTime&&Y.timeStamp-this._tapTime>cn&&this.reset(),this._tapTime?$.length>0&&(this._swipePoint=de[0],this._swipeTouch=$[0].identifier):this._tap.touchstart(Y,de,$))},bo.prototype.touchmove=function(Y,de,$){if(!this._tapTime)this._tap.touchmove(Y,de,$);else if(this._swipePoint){if($[0].identifier!==this._swipeTouch)return;var ye=de[0],Ee=ye.y-this._swipePoint.y;return this._swipePoint=ye,Y.preventDefault(),this._active=!0,{zoomDelta:Ee/128}}},bo.prototype.touchend=function(Y,de,$){if(this._tapTime)this._swipePoint&&$.length===0&&this.reset();else{var ye=this._tap.touchend(Y,de,$);ye&&(this._tapTime=Y.timeStamp)}},bo.prototype.touchcancel=function(){this.reset()},bo.prototype.enable=function(){this._enabled=!0},bo.prototype.disable=function(){this._enabled=!1,this.reset()},bo.prototype.isEnabled=function(){return this._enabled},bo.prototype.isActive=function(){return this._active};var ro=function(Y,de,$){this._el=Y,this._mousePan=de,this._touchPan=$};ro.prototype.enable=function(Y){this._inertiaOptions=Y||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},ro.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},ro.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},ro.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var zo=function(Y,de,$){this._pitchWithRotate=Y.pitchWithRotate,this._mouseRotate=de,this._mousePitch=$};zo.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},zo.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},zo.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},zo.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Xi=function(Y,de,$,ye){this._el=Y,this._touchZoom=de,this._touchRotate=$,this._tapDragZoom=ye,this._rotationDisabled=!1,this._enabled=!0};Xi.prototype.enable=function(Y){this._touchZoom.enable(Y),this._rotationDisabled||this._touchRotate.enable(Y),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Xi.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Xi.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Xi.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Xi.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Xi.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Jo=function(ve){return ve.zoom||ve.drag||ve.pitch||ve.rotate},ks=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y}(e.Event);function vu(ve){return ve.panDelta&&ve.panDelta.mag()||ve.zoomDelta||ve.bearingDelta||ve.pitchDelta}var ji=function(Y,de){this._map=Y,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Be(Y),this._bearingSnap=de.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(de),e.bindAll(["handleEvent","handleWindowEvent"],this);var $=this._el;this._listeners=[[$,"touchstart",{passive:!1}],[$,"touchmove",{passive:!1}],[$,"touchend",void 0],[$,"touchcancel",void 0],[$,"mousedown",void 0],[$,"mousemove",void 0],[$,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[$,"mouseover",void 0],[$,"mouseout",void 0],[$,"dblclick",void 0],[$,"click",void 0],[$,"keydown",{capture:!1}],[$,"keyup",void 0],[$,"wheel",{passive:!1}],[$,"contextmenu",void 0],[e.window,"blur",void 0]];for(var ye=0,Ee=this._listeners;ye<Ee.length;ye+=1){var Pe=Ee[ye],Ze=Pe[0],ft=Pe[1],Mt=Pe[2];a.addEventListener(Ze,ft,Ze===e.window.document?this.handleWindowEvent:this.handleEvent,Mt)}};ji.prototype.destroy=function(){for(var Y=0,de=this._listeners;Y<de.length;Y+=1){var $=de[Y],ye=$[0],Ee=$[1],Pe=$[2];a.removeEventListener(ye,Ee,ye===e.window.document?this.handleWindowEvent:this.handleEvent,Pe)}},ji.prototype._addDefaultHandlers=function(Y){var de=this._map,$=de.getCanvasContainer();this._add("mapEvent",new Ut(de,Y));var ye=de.boxZoom=new Xt(de,Y);this._add("boxZoom",ye);var Ee=new fn,Pe=new ja;de.doubleClickZoom=new Fa(Pe,Ee),this._add("tapZoom",Ee),this._add("clickZoom",Pe);var Ze=new bo;this._add("tapDragZoom",Ze);var ft=de.touchPitch=new si;this._add("touchPitch",ft);var Mt=new oa(Y),Ht=new Ea(Y);de.dragRotate=new zo(Y,Mt,Ht),this._add("mouseRotate",Mt,["mousePitch"]),this._add("mousePitch",Ht,["mouseRotate"]);var $t=new wa(Y),or=new fa(Y);de.dragPan=new ro($,$t,or),this._add("mousePan",$t),this._add("touchPan",or,["touchZoom","touchRotate"]);var Tr=new ai,Ur=new ho;de.touchZoomRotate=new Xi($,Ur,Tr,Ze),this._add("touchRotate",Tr,["touchPan","touchZoom"]),this._add("touchZoom",Ur,["touchPan","touchRotate"]);var Hr=de.scrollZoom=new Ni(de,this);this._add("scrollZoom",Hr,["mousePan"]);var Br=de.keyboard=new $i;this._add("keyboard",Br),this._add("blockableMapEvent",new Wt(de));for(var Jr=0,hn=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Jr<hn.length;Jr+=1){var kn=hn[Jr];Y.interactive&&Y[kn]&&de[kn].enable(Y[kn])}},ji.prototype._add=function(Y,de,$){this._handlers.push({handlerName:Y,handler:de,allowed:$}),this._handlersById[Y]=de},ji.prototype.stop=function(){if(!this._updatingCamera){for(var Y=0,de=this._handlers;Y<de.length;Y+=1){var $=de[Y],ye=$.handler;ye.reset()}this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},ji.prototype.isActive=function(){for(var Y=0,de=this._handlers;Y<de.length;Y+=1){var $=de[Y],ye=$.handler;if(ye.isActive())return!0}return!1},ji.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},ji.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},ji.prototype.isMoving=function(){return Boolean(Jo(this._eventsInProgress))||this.isZooming()},ji.prototype._blockedByActive=function(Y,de,$){for(var ye in Y)if(ye!==$&&(!de||de.indexOf(ye)<0))return!0;return!1},ji.prototype.handleWindowEvent=function(Y){this.handleEvent(Y,Y.type+"Window")},ji.prototype._getMapTouches=function(Y){for(var de=[],$=0,ye=Y;$<ye.length;$+=1){var Ee=ye[$],Pe=Ee.target;this._el.contains(Pe)&&de.push(Ee)}return de},ji.prototype.handleEvent=function(Y,de){if(Y.type==="blur"){this.stop();return}this._updatingCamera=!0;for(var $=Y.type==="renderFrame"?void 0:Y,ye={needsRenderFrame:!1},Ee={},Pe={},Ze=Y.touches?this._getMapTouches(Y.touches):void 0,ft=Ze?a.touchPos(this._el,Ze):a.mousePos(this._el,Y),Mt=0,Ht=this._handlers;Mt<Ht.length;Mt+=1){var $t=Ht[Mt],or=$t.handlerName,Tr=$t.handler,Ur=$t.allowed;if(!!Tr.isEnabled()){var Hr=void 0;this._blockedByActive(Pe,Ur,or)?Tr.reset():Tr[de||Y.type]&&(Hr=Tr[de||Y.type](Y,ft,Ze),this.mergeHandlerResult(ye,Ee,Hr,or,$),Hr&&Hr.needsRenderFrame&&this._triggerRenderFrame()),(Hr||Tr.isActive())&&(Pe[or]=Tr)}}var Br={};for(var Jr in this._previousActiveHandlers)Pe[Jr]||(Br[Jr]=$);this._previousActiveHandlers=Pe,(Object.keys(Br).length||vu(ye))&&(this._changes.push([ye,Ee,Br]),this._triggerRenderFrame()),(Object.keys(Pe).length||vu(ye))&&this._map._stop(!0),this._updatingCamera=!1;var hn=ye.cameraAnimation;hn&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],hn(this._map))},ji.prototype.mergeHandlerResult=function(Y,de,$,ye,Ee){if(!!$){e.extend(Y,$);var Pe={handlerName:ye,originalEvent:$.originalEvent||Ee};$.zoomDelta!==void 0&&(de.zoom=Pe),$.panDelta!==void 0&&(de.drag=Pe),$.pitchDelta!==void 0&&(de.pitch=Pe),$.bearingDelta!==void 0&&(de.rotate=Pe)}},ji.prototype._applyChanges=function(){for(var Y={},de={},$={},ye=0,Ee=this._changes;ye<Ee.length;ye+=1){var Pe=Ee[ye],Ze=Pe[0],ft=Pe[1],Mt=Pe[2];Ze.panDelta&&(Y.panDelta=(Y.panDelta||new e.Point(0,0))._add(Ze.panDelta)),Ze.zoomDelta&&(Y.zoomDelta=(Y.zoomDelta||0)+Ze.zoomDelta),Ze.bearingDelta&&(Y.bearingDelta=(Y.bearingDelta||0)+Ze.bearingDelta),Ze.pitchDelta&&(Y.pitchDelta=(Y.pitchDelta||0)+Ze.pitchDelta),Ze.around!==void 0&&(Y.around=Ze.around),Ze.pinchAround!==void 0&&(Y.pinchAround=Ze.pinchAround),Ze.noInertia&&(Y.noInertia=Ze.noInertia),e.extend(de,ft),e.extend($,Mt)}this._updateMapTransform(Y,de,$),this._changes=[]},ji.prototype._updateMapTransform=function(Y,de,$){var ye=this._map,Ee=ye.transform;if(!vu(Y))return this._fireEvents(de,$);var Pe=Y.panDelta,Ze=Y.zoomDelta,ft=Y.bearingDelta,Mt=Y.pitchDelta,Ht=Y.around,$t=Y.pinchAround;$t!==void 0&&(Ht=$t),ye._stop(!0),Ht=Ht||ye.transform.centerPoint;var or=Ee.pointLocation(Pe?Ht.sub(Pe):Ht);ft&&(Ee.bearing+=ft),Mt&&(Ee.pitch+=Mt),Ze&&(Ee.zoom+=Ze),Ee.setLocationAtPoint(or,Ht),this._map._update(),Y.noInertia||this._inertia.record(Y),this._fireEvents(de,$)},ji.prototype._fireEvents=function(Y,de){var $=this,ye=Jo(this._eventsInProgress),Ee=Jo(Y),Pe={};for(var Ze in Y){var ft=Y[Ze],Mt=ft.originalEvent;this._eventsInProgress[Ze]||(Pe[Ze+"start"]=Mt),this._eventsInProgress[Ze]=Y[Ze]}!ye&&Ee&&this._fireEvent("movestart",Ee.originalEvent);for(var Ht in Pe)this._fireEvent(Ht,Pe[Ht]);Y.rotate&&(this._bearingChanged=!0),Ee&&this._fireEvent("move",Ee.originalEvent);for(var $t in Y){var or=Y[$t],Tr=or.originalEvent;this._fireEvent($t,Tr)}var Ur={},Hr;for(var Br in this._eventsInProgress){var Jr=this._eventsInProgress[Br],hn=Jr.handlerName,kn=Jr.originalEvent;this._handlersById[hn].isActive()||(delete this._eventsInProgress[Br],Hr=de[hn]||kn,Ur[Br+"end"]=Hr)}for(var Nn in Ur)this._fireEvent(Nn,Ur[Nn]);var Kn=Jo(this._eventsInProgress);if((ye||Ee)&&!Kn){this._updatingCamera=!0;var qn=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Qn=function(va){return va!==0&&-$._bearingSnap<va&&va<$._bearingSnap};qn?(Qn(qn.bearing||this._map.getBearing())&&(qn.bearing=0),this._map.easeTo(qn,{originalEvent:Hr})):(this._map.fire(new e.Event("moveend",{originalEvent:Hr})),Qn(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},ji.prototype._fireEvent=function(Y,de){this._map.fire(new e.Event(Y,de?{originalEvent:de}:{}))},ji.prototype._triggerRenderFrame=function(){var Y=this;this._frameId===void 0&&(this._frameId=this._map._requestRenderFrame(function(de){delete Y._frameId,Y.handleEvent(new ks("renderFrame",{timeStamp:de})),Y._applyChanges()}))};var Qf=function(ve){function Y(de,$){ve.call(this),this._moving=!1,this._zooming=!1,this.transform=de,this._bearingSnap=$.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getCenter=function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)},Y.prototype.setCenter=function($,ye){return this.jumpTo({center:$},ye)},Y.prototype.panBy=function($,ye,Ee){return $=e.Point.convert($).mult(-1),this.panTo(this.transform.center,e.extend({offset:$},ye),Ee)},Y.prototype.panTo=function($,ye,Ee){return this.easeTo(e.extend({center:$},ye),Ee)},Y.prototype.getZoom=function(){return this.transform.zoom},Y.prototype.setZoom=function($,ye){return this.jumpTo({zoom:$},ye),this},Y.prototype.zoomTo=function($,ye,Ee){return this.easeTo(e.extend({zoom:$},ye),Ee)},Y.prototype.zoomIn=function($,ye){return this.zoomTo(this.getZoom()+1,$,ye),this},Y.prototype.zoomOut=function($,ye){return this.zoomTo(this.getZoom()-1,$,ye),this},Y.prototype.getBearing=function(){return this.transform.bearing},Y.prototype.setBearing=function($,ye){return this.jumpTo({bearing:$},ye),this},Y.prototype.getPadding=function(){return this.transform.padding},Y.prototype.setPadding=function($,ye){return this.jumpTo({padding:$},ye),this},Y.prototype.rotateTo=function($,ye,Ee){return this.easeTo(e.extend({bearing:$},ye),Ee)},Y.prototype.resetNorth=function($,ye){return this.rotateTo(0,e.extend({duration:1e3},$),ye),this},Y.prototype.resetNorthPitch=function($,ye){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},$),ye),this},Y.prototype.snapToNorth=function($,ye){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth($,ye):this},Y.prototype.getPitch=function(){return this.transform.pitch},Y.prototype.setPitch=function($,ye){return this.jumpTo({pitch:$},ye),this},Y.prototype.cameraForBounds=function($,ye){return $=e.LngLatBounds.convert($),this._cameraForBoxAndBearing($.getNorthWest(),$.getSouthEast(),0,ye)},Y.prototype._cameraForBoxAndBearing=function($,ye,Ee,Pe){var Ze={top:0,bottom:0,right:0,left:0};if(Pe=e.extend({padding:Ze,offset:[0,0],maxZoom:this.transform.maxZoom},Pe),typeof Pe.padding=="number"){var ft=Pe.padding;Pe.padding={top:ft,bottom:ft,right:ft,left:ft}}Pe.padding=e.extend(Ze,Pe.padding);var Mt=this.transform,Ht=Mt.padding,$t=Mt.project(e.LngLat.convert($)),or=Mt.project(e.LngLat.convert(ye)),Tr=$t.rotate(-Ee*Math.PI/180),Ur=or.rotate(-Ee*Math.PI/180),Hr=new e.Point(Math.max(Tr.x,Ur.x),Math.max(Tr.y,Ur.y)),Br=new e.Point(Math.min(Tr.x,Ur.x),Math.min(Tr.y,Ur.y)),Jr=Hr.sub(Br),hn=(Mt.width-(Ht.left+Ht.right+Pe.padding.left+Pe.padding.right))/Jr.x,kn=(Mt.height-(Ht.top+Ht.bottom+Pe.padding.top+Pe.padding.bottom))/Jr.y;if(kn<0||hn<0){e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");return}var Nn=Math.min(Mt.scaleZoom(Mt.scale*Math.min(hn,kn)),Pe.maxZoom),Kn=e.Point.convert(Pe.offset),qn=(Pe.padding.left-Pe.padding.right)/2,Qn=(Pe.padding.top-Pe.padding.bottom)/2,va=new e.Point(Kn.x+qn,Kn.y+Qn),_a=va.mult(Mt.scale/Mt.zoomScale(Nn)),xa=Mt.unproject($t.add(or).div(2).sub(_a));return{center:xa,zoom:Nn,bearing:Ee}},Y.prototype.fitBounds=function($,ye,Ee){return this._fitInternal(this.cameraForBounds($,ye),ye,Ee)},Y.prototype.fitScreenCoordinates=function($,ye,Ee,Pe,Ze){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert($)),this.transform.pointLocation(e.Point.convert(ye)),Ee,Pe),Pe,Ze)},Y.prototype._fitInternal=function($,ye,Ee){return $?(ye=e.extend($,ye),delete ye.padding,ye.linear?this.easeTo(ye,Ee):this.flyTo(ye,Ee)):this},Y.prototype.jumpTo=function($,ye){this.stop();var Ee=this.transform,Pe=!1,Ze=!1,ft=!1;return"zoom"in $&&Ee.zoom!==+$.zoom&&(Pe=!0,Ee.zoom=+$.zoom),$.center!==void 0&&(Ee.center=e.LngLat.convert($.center)),"bearing"in $&&Ee.bearing!==+$.bearing&&(Ze=!0,Ee.bearing=+$.bearing),"pitch"in $&&Ee.pitch!==+$.pitch&&(ft=!0,Ee.pitch=+$.pitch),$.padding!=null&&!Ee.isPaddingEqual($.padding)&&(Ee.padding=$.padding),this.fire(new e.Event("movestart",ye)).fire(new e.Event("move",ye)),Pe&&this.fire(new e.Event("zoomstart",ye)).fire(new e.Event("zoom",ye)).fire(new e.Event("zoomend",ye)),Ze&&this.fire(new e.Event("rotatestart",ye)).fire(new e.Event("rotate",ye)).fire(new e.Event("rotateend",ye)),ft&&this.fire(new e.Event("pitchstart",ye)).fire(new e.Event("pitch",ye)).fire(new e.Event("pitchend",ye)),this.fire(new e.Event("moveend",ye))},Y.prototype.easeTo=function($,ye){var Ee=this;this._stop(!1,$.easeId),$=e.extend({offset:[0,0],duration:500,easing:e.ease},$),($.animate===!1||!$.essential&&e.browser.prefersReducedMotion)&&($.duration=0);var Pe=this.transform,Ze=this.getZoom(),ft=this.getBearing(),Mt=this.getPitch(),Ht=this.getPadding(),$t="zoom"in $?+$.zoom:Ze,or="bearing"in $?this._normalizeBearing($.bearing,ft):ft,Tr="pitch"in $?+$.pitch:Mt,Ur="padding"in $?$.padding:Pe.padding,Hr=e.Point.convert($.offset),Br=Pe.centerPoint.add(Hr),Jr=Pe.pointLocation(Br),hn=e.LngLat.convert($.center||Jr);this._normalizeCenter(hn);var kn=Pe.project(Jr),Nn=Pe.project(hn).sub(kn),Kn=Pe.zoomScale($t-Ze),qn,Qn;$.around&&(qn=e.LngLat.convert($.around),Qn=Pe.locationPoint(qn));var va={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||$t!==Ze,this._rotating=this._rotating||ft!==or,this._pitching=this._pitching||Tr!==Mt,this._padding=!Pe.isPaddingEqual(Ur),this._easeId=$.easeId,this._prepareEase(ye,$.noMoveStart,va),clearTimeout(this._easeEndTimeoutID),this._ease(function(_a){if(Ee._zooming&&(Pe.zoom=e.number(Ze,$t,_a)),Ee._rotating&&(Pe.bearing=e.number(ft,or,_a)),Ee._pitching&&(Pe.pitch=e.number(Mt,Tr,_a)),Ee._padding&&(Pe.interpolatePadding(Ht,Ur,_a),Br=Pe.centerPoint.add(Hr)),qn)Pe.setLocationAtPoint(qn,Qn);else{var xa=Pe.zoomScale(Pe.zoom-Ze),Ma=$t>Ze?Math.min(2,Kn):Math.max(.5,Kn),Pa=Math.pow(Ma,1-_a),Ga=Pe.unproject(kn.add(Nn.mult(_a*Pa)).mult(xa));Pe.setLocationAtPoint(Pe.renderWorldCopies?Ga.wrap():Ga,Br)}Ee._fireMoveEvents(ye)},function(_a){Ee._afterEase(ye,_a)},$),this},Y.prototype._prepareEase=function($,ye,Ee){Ee===void 0&&(Ee={}),this._moving=!0,!ye&&!Ee.moving&&this.fire(new e.Event("movestart",$)),this._zooming&&!Ee.zooming&&this.fire(new e.Event("zoomstart",$)),this._rotating&&!Ee.rotating&&this.fire(new e.Event("rotatestart",$)),this._pitching&&!Ee.pitching&&this.fire(new e.Event("pitchstart",$))},Y.prototype._fireMoveEvents=function($){this.fire(new e.Event("move",$)),this._zooming&&this.fire(new e.Event("zoom",$)),this._rotating&&this.fire(new e.Event("rotate",$)),this._pitching&&this.fire(new e.Event("pitch",$))},Y.prototype._afterEase=function($,ye){if(!(this._easeId&&ye&&this._easeId===ye)){delete this._easeId;var Ee=this._zooming,Pe=this._rotating,Ze=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,Ee&&this.fire(new e.Event("zoomend",$)),Pe&&this.fire(new e.Event("rotateend",$)),Ze&&this.fire(new e.Event("pitchend",$)),this.fire(new e.Event("moveend",$))}},Y.prototype.flyTo=function($,ye){var Ee=this;if(!$.essential&&e.browser.prefersReducedMotion){var Pe=e.pick($,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Pe,ye)}this.stop(),$=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},$);var Ze=this.transform,ft=this.getZoom(),Mt=this.getBearing(),Ht=this.getPitch(),$t=this.getPadding(),or="zoom"in $?e.clamp(+$.zoom,Ze.minZoom,Ze.maxZoom):ft,Tr="bearing"in $?this._normalizeBearing($.bearing,Mt):Mt,Ur="pitch"in $?+$.pitch:Ht,Hr="padding"in $?$.padding:Ze.padding,Br=Ze.zoomScale(or-ft),Jr=e.Point.convert($.offset),hn=Ze.centerPoint.add(Jr),kn=Ze.pointLocation(hn),Nn=e.LngLat.convert($.center||kn);this._normalizeCenter(Nn);var Kn=Ze.project(kn),qn=Ze.project(Nn).sub(Kn),Qn=$.curve,va=Math.max(Ze.width,Ze.height),_a=va/Br,xa=qn.mag();if("minZoom"in $){var Ma=e.clamp(Math.min($.minZoom,ft,or),Ze.minZoom,Ze.maxZoom),Pa=va/Ze.zoomScale(Ma-ft);Qn=Math.sqrt(Pa/xa*2)}var Ga=Qn*Qn;function ni(ii){var _i=(_a*_a-va*va+(ii?-1:1)*Ga*Ga*xa*xa)/(2*(ii?_a:va)*Ga*xa);return Math.log(Math.sqrt(_i*_i+1)-_i)}function Ci(ii){return(Math.exp(ii)-Math.exp(-ii))/2}function li(ii){return(Math.exp(ii)+Math.exp(-ii))/2}function vi(ii){return Ci(ii)/li(ii)}var Ua=ni(0),Li=function(ii){return li(Ua)/li(Ua+Qn*ii)},zi=function(ii){return va*((li(Ua)*vi(Ua+Qn*ii)-Ci(Ua))/Ga)/xa},Bi=(ni(1)-Ua)/Qn;if(Math.abs(xa)<1e-6||!isFinite(Bi)){if(Math.abs(va-_a)<1e-6)return this.easeTo($,ye);var bi=_a<va?-1:1;Bi=Math.abs(Math.log(_a/va))/Qn,zi=function(){return 0},Li=function(ii){return Math.exp(bi*Qn*ii)}}if("duration"in $)$.duration=+$.duration;else{var Zi="screenSpeed"in $?+$.screenSpeed/Qn:+$.speed;$.duration=1e3*Bi/Zi}return $.maxDuration&&$.duration>$.maxDuration&&($.duration=0),this._zooming=!0,this._rotating=Mt!==Tr,this._pitching=Ur!==Ht,this._padding=!Ze.isPaddingEqual(Hr),this._prepareEase(ye,!1),this._ease(function(ii){var _i=ii*Bi,wo=1/Li(_i);Ze.zoom=ii===1?or:ft+Ze.scaleZoom(wo),Ee._rotating&&(Ze.bearing=e.number(Mt,Tr,ii)),Ee._pitching&&(Ze.pitch=e.number(Ht,Ur,ii)),Ee._padding&&(Ze.interpolatePadding($t,Hr,ii),hn=Ze.centerPoint.add(Jr));var Vo=ii===1?Nn:Ze.unproject(Kn.add(qn.mult(zi(_i))).mult(wo));Ze.setLocationAtPoint(Ze.renderWorldCopies?Vo.wrap():Vo,hn),Ee._fireMoveEvents(ye)},function(){return Ee._afterEase(ye)},$),this},Y.prototype.isEasing=function(){return!!this._easeFrameId},Y.prototype.stop=function(){return this._stop()},Y.prototype._stop=function($,ye){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var Ee=this._onEaseEnd;delete this._onEaseEnd,Ee.call(this,ye)}if(!$){var Pe=this.handlers;Pe&&Pe.stop()}return this},Y.prototype._ease=function($,ye,Ee){Ee.animate===!1||Ee.duration===0?($(1),ye()):(this._easeStart=e.browser.now(),this._easeOptions=Ee,this._onEaseFrame=$,this._onEaseEnd=ye,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},Y.prototype._renderFrameCallback=function(){var $=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing($)),$<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},Y.prototype._normalizeBearing=function($,ye){$=e.wrap($,-180,180);var Ee=Math.abs($-ye);return Math.abs($-360-ye)<Ee&&($-=360),Math.abs($+360-ye)<Ee&&($+=360),$},Y.prototype._normalizeCenter=function($){var ye=this.transform;if(!(!ye.renderWorldCopies||ye.lngRange)){var Ee=$.lng-ye.center.lng;$.lng+=Ee>180?-360:Ee<-180?360:0}},Y}(e.Evented),Zl=function(Y){Y===void 0&&(Y={}),this.options=Y,e.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Zl.prototype.getDefaultPosition=function(){return"bottom-right"},Zl.prototype.onAdd=function(Y){var de=this.options&&this.options.compact;return this._map=Y,this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=a.create("div","mapboxgl-ctrl-attrib-inner",this._container),de&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),de===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Zl.prototype.onRemove=function(){a.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Zl.prototype._updateEditLink=function(){var Y=this._editLink;Y||(Y=this._editLink=this._container.querySelector(".mapbox-improve-map"));var de=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(Y){var $=de.reduce(function(ye,Ee,Pe){return Ee.value&&(ye+=Ee.key+"="+Ee.value+(Pe<de.length-1?"&":"")),ye},"?");Y.href=e.config.FEEDBACK_URL+"/"+$+(this._map._hash?this._map._hash.getHashString(!0):""),Y.rel="noopener nofollow"}},Zl.prototype._updateData=function(Y){Y&&(Y.sourceDataType==="metadata"||Y.dataType==="style")&&(this._updateAttributions(),this._updateEditLink())},Zl.prototype._updateAttributions=function(){if(!!this._map.style){var Y=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?Y=Y.concat(this.options.customAttribution.map(function(ft){return typeof ft!="string"?"":ft})):typeof this.options.customAttribution=="string"&&Y.push(this.options.customAttribution)),this._map.style.stylesheet){var de=this._map.style.stylesheet;this.styleOwner=de.owner,this.styleId=de.id}var $=this._map.style.sourceCaches;for(var ye in $){var Ee=$[ye];if(Ee.used){var Pe=Ee.getSource();Pe.attribution&&Y.indexOf(Pe.attribution)<0&&Y.push(Pe.attribution)}}Y.sort(function(ft,Mt){return ft.length-Mt.length}),Y=Y.filter(function(ft,Mt){for(var Ht=Mt+1;Ht<Y.length;Ht++)if(Y[Ht].indexOf(ft)>=0)return!1;return!0});var Ze=Y.join(" | ");Ze!==this._attribHTML&&(this._attribHTML=Ze,Y.length?(this._innerContainer.innerHTML=Ze,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Zl.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Oi=function(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)};Oi.prototype.onAdd=function(Y){this._map=Y,this._container=a.create("div","mapboxgl-ctrl");var de=a.create("a","mapboxgl-ctrl-logo");return de.target="_blank",de.rel="noopener nofollow",de.href="https://www.mapbox.com/",de.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),de.setAttribute("rel","noopener nofollow"),this._container.appendChild(de),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Oi.prototype.onRemove=function(){a.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Oi.prototype.getDefaultPosition=function(){return"bottom-left"},Oi.prototype._updateLogo=function(Y){(!Y||Y.sourceDataType==="metadata")&&(this._container.style.display=this._logoRequired()?"block":"none")},Oi.prototype._logoRequired=function(){if(!!this._map.style){var Y=this._map.style.sourceCaches;for(var de in Y){var $=Y[de].getSource();if($.mapbox_logo)return!0}return!1}},Oi.prototype._updateCompact=function(){var Y=this._container.children;if(Y.length){var de=Y[0];this._map.getCanvasContainer().offsetWidth<250?de.classList.add("mapboxgl-compact"):de.classList.remove("mapboxgl-compact")}};var Fo=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Fo.prototype.add=function(Y){var de=++this._id,$=this._queue;return $.push({callback:Y,id:de,cancelled:!1}),de},Fo.prototype.remove=function(Y){for(var de=this._currentlyRunning,$=de?this._queue.concat(de):this._queue,ye=0,Ee=$;ye<Ee.length;ye+=1){var Pe=Ee[ye];if(Pe.id===Y){Pe.cancelled=!0;return}}},Fo.prototype.run=function(Y){Y===void 0&&(Y=0);var de=this._currentlyRunning=this._queue;this._queue=[];for(var $=0,ye=de;$<ye.length;$+=1){var Ee=ye[$];if(!Ee.cancelled&&(Ee.callback(Y),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Fo.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var i0={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},rh=e.window.HTMLImageElement,Pc=e.window.HTMLElement,wf=e.window.ImageBitmap,$f=-2,nh=22,$s=0,Tf=60,iv={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:$f,maxZoom:nh,minPitch:$s,maxPitch:Tf,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},ov=function(ve){function Y($){var ye=this;if($=e.extend({},iv,$),$.minZoom!=null&&$.maxZoom!=null&&$.minZoom>$.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if($.minPitch!=null&&$.maxPitch!=null&&$.minPitch>$.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if($.minPitch!=null&&$.minPitch<$s)throw new Error("minPitch must be greater than or equal to "+$s);if($.maxPitch!=null&&$.maxPitch>Tf)throw new Error("maxPitch must be less than or equal to "+Tf);var Ee=new xi($.minZoom,$.maxZoom,$.minPitch,$.maxPitch,$.renderWorldCopies);if(ve.call(this,Ee,$),this._interactive=$.interactive,this._maxTileCacheSize=$.maxTileCacheSize,this._failIfMajorPerformanceCaveat=$.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=$.preserveDrawingBuffer,this._antialias=$.antialias,this._trackResize=$.trackResize,this._bearingSnap=$.bearingSnap,this._refreshExpiredTiles=$.refreshExpiredTiles,this._fadeDuration=$.fadeDuration,this._crossSourceCollisions=$.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=$.collectResourceTiming,this._renderTaskQueue=new Fo,this._controls=[],this._mapId=e.uniqueId(),this._locale=e.extend({},i0,$.locale),this._requestManager=new e.RequestManager($.transformRequest,$.accessToken),typeof $.container=="string"){if(this._container=e.window.document.getElementById($.container),!this._container)throw new Error("Container '"+$.container+"' not found.")}else if($.container instanceof Pc)this._container=$.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");if($.maxBounds&&this.setMaxBounds($.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return ye._update(!1)}),this.on("moveend",function(){return ye._update(!1)}),this.on("zoom",function(){return ye._update(!0)}),typeof e.window!="undefined"&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new ji(this,$);var Pe=typeof $.hash=="string"&&$.hash||void 0;this._hash=$.hash&&new go(Pe).addTo(this),(!this._hash||!this._hash._onHashChange())&&(this.jumpTo({center:$.center,zoom:$.zoom,bearing:$.bearing,pitch:$.pitch}),$.bounds&&(this.resize(),this.fitBounds($.bounds,e.extend({},$.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=$.localIdeographFontFamily,$.style&&this.setStyle($.style,{localIdeographFontFamily:$.localIdeographFontFamily}),$.attributionControl&&this.addControl(new Zl({customAttribution:$.customAttribution})),this.addControl(new Oi,$.logoPosition),this.on("style.load",function(){ye.transform.unmodified&&ye.jumpTo(ye.style.stylesheet)}),this.on("data",function(Ze){ye._update(Ze.dataType==="style"),ye.fire(new e.Event(Ze.dataType+"data",Ze))}),this.on("dataloading",function(Ze){ye.fire(new e.Event(Ze.dataType+"dataloading",Ze))})}ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y;var de={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return Y.prototype._getMapId=function(){return this._mapId},Y.prototype.addControl=function(ye,Ee){if(Ee===void 0&&ye.getDefaultPosition&&(Ee=ye.getDefaultPosition()),Ee===void 0&&(Ee="top-right"),!ye||!ye.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Pe=ye.onAdd(this);this._controls.push(ye);var Ze=this._controlPositions[Ee];return Ee.indexOf("bottom")!==-1?Ze.insertBefore(Pe,Ze.firstChild):Ze.appendChild(Pe),this},Y.prototype.removeControl=function(ye){if(!ye||!ye.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var Ee=this._controls.indexOf(ye);return Ee>-1&&this._controls.splice(Ee,1),ye.onRemove(this),this},Y.prototype.resize=function(ye){var Ee=this._containerDimensions(),Pe=Ee[0],Ze=Ee[1];this._resizeCanvas(Pe,Ze),this.transform.resize(Pe,Ze),this.painter.resize(Pe,Ze);var ft=!this._moving;return ft&&(this.stop(),this.fire(new e.Event("movestart",ye)).fire(new e.Event("move",ye))),this.fire(new e.Event("resize",ye)),ft&&this.fire(new e.Event("moveend",ye)),this},Y.prototype.getBounds=function(){return this.transform.getBounds()},Y.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},Y.prototype.setMaxBounds=function(ye){return this.transform.setMaxBounds(e.LngLatBounds.convert(ye)),this._update()},Y.prototype.setMinZoom=function(ye){if(ye=ye==null?$f:ye,ye>=$f&&ye<=this.transform.maxZoom)return this.transform.minZoom=ye,this._update(),this.getZoom()<ye&&this.setZoom(ye),this;throw new Error("minZoom must be between "+$f+" and the current maxZoom, inclusive")},Y.prototype.getMinZoom=function(){return this.transform.minZoom},Y.prototype.setMaxZoom=function(ye){if(ye=ye==null?nh:ye,ye>=this.transform.minZoom)return this.transform.maxZoom=ye,this._update(),this.getZoom()>ye&&this.setZoom(ye),this;throw new Error("maxZoom must be greater than the current minZoom")},Y.prototype.getMaxZoom=function(){return this.transform.maxZoom},Y.prototype.setMinPitch=function(ye){if(ye=ye==null?$s:ye,ye<$s)throw new Error("minPitch must be greater than or equal to "+$s);if(ye>=$s&&ye<=this.transform.maxPitch)return this.transform.minPitch=ye,this._update(),this.getPitch()<ye&&this.setPitch(ye),this;throw new Error("minPitch must be between "+$s+" and the current maxPitch, inclusive")},Y.prototype.getMinPitch=function(){return this.transform.minPitch},Y.prototype.setMaxPitch=function(ye){if(ye=ye==null?Tf:ye,ye>Tf)throw new Error("maxPitch must be less than or equal to "+Tf);if(ye>=this.transform.minPitch)return this.transform.maxPitch=ye,this._update(),this.getPitch()>ye&&this.setPitch(ye),this;throw new Error("maxPitch must be greater than the current minPitch")},Y.prototype.getMaxPitch=function(){return this.transform.maxPitch},Y.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},Y.prototype.setRenderWorldCopies=function(ye){return this.transform.renderWorldCopies=ye,this._update()},Y.prototype.project=function(ye){return this.transform.locationPoint(e.LngLat.convert(ye))},Y.prototype.unproject=function(ye){return this.transform.pointLocation(e.Point.convert(ye))},Y.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},Y.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},Y.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},Y.prototype._createDelegatedListener=function(ye,Ee,Pe){var Ze=this,ft;if(ye==="mouseenter"||ye==="mouseover"){var Mt=!1,Ht=function(Br){var Jr=Ze.getLayer(Ee)?Ze.queryRenderedFeatures(Br.point,{layers:[Ee]}):[];Jr.length?Mt||(Mt=!0,Pe.call(Ze,new bt(ye,Ze,Br.originalEvent,{features:Jr}))):Mt=!1},$t=function(){Mt=!1};return{layer:Ee,listener:Pe,delegates:{mousemove:Ht,mouseout:$t}}}else if(ye==="mouseleave"||ye==="mouseout"){var or=!1,Tr=function(Br){var Jr=Ze.getLayer(Ee)?Ze.queryRenderedFeatures(Br.point,{layers:[Ee]}):[];Jr.length?or=!0:or&&(or=!1,Pe.call(Ze,new bt(ye,Ze,Br.originalEvent)))},Ur=function(Br){or&&(or=!1,Pe.call(Ze,new bt(ye,Ze,Br.originalEvent)))};return{layer:Ee,listener:Pe,delegates:{mousemove:Tr,mouseout:Ur}}}else{var Hr=function(Br){var Jr=Ze.getLayer(Ee)?Ze.queryRenderedFeatures(Br.point,{layers:[Ee]}):[];Jr.length&&(Br.features=Jr,Pe.call(Ze,Br),delete Br.features)};return{layer:Ee,listener:Pe,delegates:(ft={},ft[ye]=Hr,ft)}}},Y.prototype.on=function(ye,Ee,Pe){if(Pe===void 0)return ve.prototype.on.call(this,ye,Ee);var Ze=this._createDelegatedListener(ye,Ee,Pe);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[ye]=this._delegatedListeners[ye]||[],this._delegatedListeners[ye].push(Ze);for(var ft in Ze.delegates)this.on(ft,Ze.delegates[ft]);return this},Y.prototype.once=function(ye,Ee,Pe){if(Pe===void 0)return ve.prototype.once.call(this,ye,Ee);var Ze=this._createDelegatedListener(ye,Ee,Pe);for(var ft in Ze.delegates)this.once(ft,Ze.delegates[ft]);return this},Y.prototype.off=function(ye,Ee,Pe){var Ze=this;if(Pe===void 0)return ve.prototype.off.call(this,ye,Ee);var ft=function(Mt){for(var Ht=Mt[ye],$t=0;$t<Ht.length;$t++){var or=Ht[$t];if(or.layer===Ee&&or.listener===Pe){for(var Tr in or.delegates)Ze.off(Tr,or.delegates[Tr]);return Ht.splice($t,1),Ze}}};return this._delegatedListeners&&this._delegatedListeners[ye]&&ft(this._delegatedListeners),this},Y.prototype.queryRenderedFeatures=function(ye,Ee){if(!this.style)return[];Ee===void 0&&ye!==void 0&&!(ye instanceof e.Point)&&!Array.isArray(ye)&&(Ee=ye,ye=void 0),Ee=Ee||{},ye=ye||[[0,0],[this.transform.width,this.transform.height]];var Pe;if(ye instanceof e.Point||typeof ye[0]=="number")Pe=[e.Point.convert(ye)];else{var Ze=e.Point.convert(ye[0]),ft=e.Point.convert(ye[1]);Pe=[Ze,new e.Point(ft.x,Ze.y),ft,new e.Point(Ze.x,ft.y),Ze]}return this.style.queryRenderedFeatures(Pe,Ee,this.transform)},Y.prototype.querySourceFeatures=function(ye,Ee){return this.style.querySourceFeatures(ye,Ee)},Y.prototype.setStyle=function(ye,Ee){return Ee=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},Ee),Ee.diff!==!1&&Ee.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&ye?(this._diffStyle(ye,Ee),this):(this._localIdeographFontFamily=Ee.localIdeographFontFamily,this._updateStyle(ye,Ee))},Y.prototype._getUIString=function(ye){var Ee=this._locale[ye];if(Ee==null)throw new Error("Missing UI string '"+ye+"'");return Ee},Y.prototype._updateStyle=function(ye,Ee){if(this.style&&(this.style.setEventedParent(null),this.style._remove()),ye)this.style=new ts(this,Ee||{});else return delete this.style,this;return this.style.setEventedParent(this,{style:this.style}),typeof ye=="string"?this.style.loadURL(ye):this.style.loadJSON(ye),this},Y.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new ts(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},Y.prototype._diffStyle=function(ye,Ee){var Pe=this;if(typeof ye=="string"){var Ze=this._requestManager.normalizeStyleURL(ye),ft=this._requestManager.transformRequest(Ze,e.ResourceType.Style);e.getJSON(ft,function(Mt,Ht){Mt?Pe.fire(new e.ErrorEvent(Mt)):Ht&&Pe._updateDiff(Ht,Ee)})}else typeof ye=="object"&&this._updateDiff(ye,Ee)},Y.prototype._updateDiff=function(ye,Ee){try{this.style.setState(ye)&&this._update(!0)}catch(Pe){e.warnOnce("Unable to perform style diff: "+(Pe.message||Pe.error||Pe)+".  Rebuilding the style from scratch."),this._updateStyle(ye,Ee)}},Y.prototype.getStyle=function(){if(this.style)return this.style.serialize()},Y.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")},Y.prototype.addSource=function(ye,Ee){return this._lazyInitEmptyStyle(),this.style.addSource(ye,Ee),this._update(!0)},Y.prototype.isSourceLoaded=function(ye){var Ee=this.style&&this.style.sourceCaches[ye];if(Ee===void 0){this.fire(new e.ErrorEvent(new Error("There is no source with ID '"+ye+"'")));return}return Ee.loaded()},Y.prototype.areTilesLoaded=function(){var ye=this.style&&this.style.sourceCaches;for(var Ee in ye){var Pe=ye[Ee],Ze=Pe._tiles;for(var ft in Ze){var Mt=Ze[ft];if(!(Mt.state==="loaded"||Mt.state==="errored"))return!1}}return!0},Y.prototype.addSourceType=function(ye,Ee,Pe){return this._lazyInitEmptyStyle(),this.style.addSourceType(ye,Ee,Pe)},Y.prototype.removeSource=function(ye){return this.style.removeSource(ye),this._update(!0)},Y.prototype.getSource=function(ye){return this.style.getSource(ye)},Y.prototype.addImage=function(ye,Ee,Pe){Pe===void 0&&(Pe={});var Ze=Pe.pixelRatio;Ze===void 0&&(Ze=1);var ft=Pe.sdf;ft===void 0&&(ft=!1);var Mt=Pe.stretchX,Ht=Pe.stretchY,$t=Pe.content;this._lazyInitEmptyStyle();var or=0;if(Ee instanceof rh||wf&&Ee instanceof wf){var Tr=e.browser.getImageData(Ee),Ur=Tr.width,Hr=Tr.height,Br=Tr.data;this.style.addImage(ye,{data:new e.RGBAImage({width:Ur,height:Hr},Br),pixelRatio:Ze,stretchX:Mt,stretchY:Ht,content:$t,sdf:ft,version:or})}else{if(Ee.width===void 0||Ee.height===void 0)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Jr=Ee.width,hn=Ee.height,kn=Ee.data,Nn=Ee;this.style.addImage(ye,{data:new e.RGBAImage({width:Jr,height:hn},new Uint8Array(kn)),pixelRatio:Ze,stretchX:Mt,stretchY:Ht,content:$t,sdf:ft,version:or,userImage:Nn}),Nn.onAdd&&Nn.onAdd(this,ye)}},Y.prototype.updateImage=function(ye,Ee){var Pe=this.style.getImage(ye);if(!Pe)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var Ze=Ee instanceof rh||wf&&Ee instanceof wf?e.browser.getImageData(Ee):Ee,ft=Ze.width,Mt=Ze.height,Ht=Ze.data;if(ft===void 0||Mt===void 0)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(ft!==Pe.data.width||Mt!==Pe.data.height)return this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var $t=!(Ee instanceof rh||wf&&Ee instanceof wf);Pe.data.replace(Ht,$t),this.style.updateImage(ye,Pe)},Y.prototype.hasImage=function(ye){return ye?!!this.style.getImage(ye):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)},Y.prototype.removeImage=function(ye){this.style.removeImage(ye)},Y.prototype.loadImage=function(ye,Ee){e.getImage(this._requestManager.transformRequest(ye,e.ResourceType.Image),Ee)},Y.prototype.listImages=function(){return this.style.listImages()},Y.prototype.addLayer=function(ye,Ee){return this._lazyInitEmptyStyle(),this.style.addLayer(ye,Ee),this._update(!0)},Y.prototype.moveLayer=function(ye,Ee){return this.style.moveLayer(ye,Ee),this._update(!0)},Y.prototype.removeLayer=function(ye){return this.style.removeLayer(ye),this._update(!0)},Y.prototype.getLayer=function(ye){return this.style.getLayer(ye)},Y.prototype.setLayerZoomRange=function(ye,Ee,Pe){return this.style.setLayerZoomRange(ye,Ee,Pe),this._update(!0)},Y.prototype.setFilter=function(ye,Ee,Pe){return Pe===void 0&&(Pe={}),this.style.setFilter(ye,Ee,Pe),this._update(!0)},Y.prototype.getFilter=function(ye){return this.style.getFilter(ye)},Y.prototype.setPaintProperty=function(ye,Ee,Pe,Ze){return Ze===void 0&&(Ze={}),this.style.setPaintProperty(ye,Ee,Pe,Ze),this._update(!0)},Y.prototype.getPaintProperty=function(ye,Ee){return this.style.getPaintProperty(ye,Ee)},Y.prototype.setLayoutProperty=function(ye,Ee,Pe,Ze){return Ze===void 0&&(Ze={}),this.style.setLayoutProperty(ye,Ee,Pe,Ze),this._update(!0)},Y.prototype.getLayoutProperty=function(ye,Ee){return this.style.getLayoutProperty(ye,Ee)},Y.prototype.setLight=function(ye,Ee){return Ee===void 0&&(Ee={}),this._lazyInitEmptyStyle(),this.style.setLight(ye,Ee),this._update(!0)},Y.prototype.getLight=function(){return this.style.getLight()},Y.prototype.setFeatureState=function(ye,Ee){return this.style.setFeatureState(ye,Ee),this._update()},Y.prototype.removeFeatureState=function(ye,Ee){return this.style.removeFeatureState(ye,Ee),this._update()},Y.prototype.getFeatureState=function(ye){return this.style.getFeatureState(ye)},Y.prototype.getContainer=function(){return this._container},Y.prototype.getCanvasContainer=function(){return this._canvasContainer},Y.prototype.getCanvas=function(){return this._canvas},Y.prototype._containerDimensions=function(){var ye=0,Ee=0;return this._container&&(ye=this._container.clientWidth||400,Ee=this._container.clientHeight||300),[ye,Ee]},Y.prototype._detectMissingCSS=function(){var ye=e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color");ye!=="rgb(250, 128, 114)"&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},Y.prototype._setupContainer=function(){var ye=this._container;ye.classList.add("mapboxgl-map");var Ee=this._missingCSSCanary=a.create("div","mapboxgl-canary",ye);Ee.style.visibility="hidden",this._detectMissingCSS();var Pe=this._canvasContainer=a.create("div","mapboxgl-canvas-container",ye);this._interactive&&Pe.classList.add("mapboxgl-interactive"),this._canvas=a.create("canvas","mapboxgl-canvas",Pe),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var Ze=this._containerDimensions();this._resizeCanvas(Ze[0],Ze[1]);var ft=this._controlContainer=a.create("div","mapboxgl-control-container",ye),Mt=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Ht){Mt[Ht]=a.create("div","mapboxgl-ctrl-"+Ht,ft)})},Y.prototype._resizeCanvas=function(ye,Ee){var Pe=e.browser.devicePixelRatio||1;this._canvas.width=Pe*ye,this._canvas.height=Pe*Ee,this._canvas.style.width=ye+"px",this._canvas.style.height=Ee+"px"},Y.prototype._setupPainter=function(){var ye=e.extend({},o.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),Ee=this._canvas.getContext("webgl",ye)||this._canvas.getContext("experimental-webgl",ye);if(!Ee){this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")));return}this.painter=new ri(Ee,this.transform),e.webpSupported.testSupport(Ee)},Y.prototype._contextLost=function(ye){ye.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:ye}))},Y.prototype._contextRestored=function(ye){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:ye}))},Y.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},Y.prototype._update=function(ye){return this.style?(this._styleDirty=this._styleDirty||ye,this._sourcesDirty=!0,this.triggerRepaint(),this):this},Y.prototype._requestRenderFrame=function(ye){return this._update(),this._renderTaskQueue.add(ye)},Y.prototype._cancelRenderFrame=function(ye){this._renderTaskQueue.remove(ye)},Y.prototype._render=function(ye){var Ee=this,Pe,Ze=0,ft=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(Pe=ft.createQueryEXT(),ft.beginQueryEXT(ft.TIME_ELAPSED_EXT,Pe),Ze=e.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(ye),!this._removed){var Mt=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Ht=this.transform.zoom,$t=e.browser.now();this.style.zoomHistory.update(Ht,$t);var or=new e.EvaluationParameters(Ht,{now:$t,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Tr=or.crossFadingFactor();(Tr!==1||Tr!==this._crossFadingFactor)&&(Mt=!0,this._crossFadingFactor=Tr),this.style.update(or)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||Mt)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Ur=e.browser.now()-Ze;ft.endQueryEXT(ft.TIME_ELAPSED_EXT,Pe),setTimeout(function(){var Jr=ft.getQueryObjectEXT(Pe,ft.QUERY_RESULT_EXT)/1e6;ft.deleteQueryEXT(Pe),Ee.fire(new e.Event("gpu-timing-frame",{cpuTime:Ur,gpuTime:Jr}))},50)}if(this.listens("gpu-timing-layer")){var Hr=this.painter.collectGpuTimers();setTimeout(function(){var Jr=Ee.painter.queryGpuTimers(Hr);Ee.fire(new e.Event("gpu-timing-layer",{layerTimes:Jr}))},50)}var Br=this._sourcesDirty||this._styleDirty||this._placementDirty;return Br||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new e.Event("idle"))),this}},Y.prototype.remove=function(){this._hash&&this._hash.remove();for(var ye=0,Ee=this._controls;ye<Ee.length;ye+=1){var Pe=Ee[ye];Pe.onRemove(this)}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof e.window!="undefined"&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var Ze=this.painter.context.gl.getExtension("WEBGL_lose_context");Ze&&Ze.loseContext(),Dc(this._canvasContainer),Dc(this._controlContainer),Dc(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new e.Event("remove"))},Y.prototype.triggerRepaint=function(){var ye=this;this.style&&!this._frame&&(this._frame=e.browser.frame(function(Ee){ye._frame=null,ye._render(Ee)}))},Y.prototype._onWindowOnline=function(){this._update()},Y.prototype._onWindowResize=function(ye){this._trackResize&&this.resize({originalEvent:ye})._update()},de.showTileBoundaries.get=function(){return!!this._showTileBoundaries},de.showTileBoundaries.set=function($){this._showTileBoundaries!==$&&(this._showTileBoundaries=$,this._update())},de.showPadding.get=function(){return!!this._showPadding},de.showPadding.set=function($){this._showPadding!==$&&(this._showPadding=$,this._update())},de.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},de.showCollisionBoxes.set=function($){this._showCollisionBoxes!==$&&(this._showCollisionBoxes=$,$?this.style._generateCollisionBoxes():this._update())},de.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},de.showOverdrawInspector.set=function($){this._showOverdrawInspector!==$&&(this._showOverdrawInspector=$,this._update())},de.repaint.get=function(){return!!this._repaint},de.repaint.set=function($){this._repaint!==$&&(this._repaint=$,this.triggerRepaint())},de.vertices.get=function(){return!!this._vertices},de.vertices.set=function($){this._vertices=$,this._update()},Y.prototype._setCacheLimits=function(ye,Ee){e.setCacheLimits(ye,Ee)},de.version.get=function(){return e.version},Object.defineProperties(Y.prototype,de),Y}(Qf);function Dc(ve){ve.parentNode&&ve.parentNode.removeChild(ve)}var ah={showCompass:!0,showZoom:!0,visualizePitch:!1},ef=function(Y){var de=this;this.options=e.extend({},ah,Y),this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function($){return $.preventDefault()}),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function($){return de._map.zoomIn({},{originalEvent:$})}),a.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function($){return de._map.zoomOut({},{originalEvent:$})}),a.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function($){de.options.visualizePitch?de._map.resetNorthPitch({},{originalEvent:$}):de._map.resetNorth({},{originalEvent:$})}),this._compassIcon=a.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};ef.prototype._updateZoomButtons=function(){var Y=this._map.getZoom();this._zoomInButton.disabled=Y===this._map.getMaxZoom(),this._zoomOutButton.disabled=Y===this._map.getMinZoom()},ef.prototype._rotateCompassArrow=function(){var Y=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=Y},ef.prototype.onAdd=function(Y){return this._map=Y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new dl(this._map,this._compass,this.options.visualizePitch)),this._container},ef.prototype.onRemove=function(){a.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},ef.prototype._createButton=function(Y,de){var $=a.create("button",Y,this._container);return $.type="button",$.addEventListener("click",de),$},ef.prototype._setButtonTitle=function(Y,de){var $=this._map._getUIString("NavigationControl."+de);Y.title=$,Y.setAttribute("aria-label",$)};var dl=function(Y,de,$){$===void 0&&($=!1),this._clickTolerance=10,this.element=de,this.mouseRotate=new oa({clickTolerance:Y.dragRotate._mouseRotate._clickTolerance}),this.map=Y,$&&(this.mousePitch=new Ea({clickTolerance:Y.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),a.addEventListener(de,"mousedown",this.mousedown),a.addEventListener(de,"touchstart",this.touchstart,{passive:!1}),a.addEventListener(de,"touchmove",this.touchmove),a.addEventListener(de,"touchend",this.touchend),a.addEventListener(de,"touchcancel",this.reset)};dl.prototype.down=function(Y,de){this.mouseRotate.mousedown(Y,de),this.mousePitch&&this.mousePitch.mousedown(Y,de),a.disableDrag()},dl.prototype.move=function(Y,de){var $=this.map,ye=this.mouseRotate.mousemoveWindow(Y,de);if(ye&&ye.bearingDelta&&$.setBearing($.getBearing()+ye.bearingDelta),this.mousePitch){var Ee=this.mousePitch.mousemoveWindow(Y,de);Ee&&Ee.pitchDelta&&$.setPitch($.getPitch()+Ee.pitchDelta)}},dl.prototype.off=function(){var Y=this.element;a.removeEventListener(Y,"mousedown",this.mousedown),a.removeEventListener(Y,"touchstart",this.touchstart,{passive:!1}),a.removeEventListener(Y,"touchmove",this.touchmove),a.removeEventListener(Y,"touchend",this.touchend),a.removeEventListener(Y,"touchcancel",this.reset),this.offTemp()},dl.prototype.offTemp=function(){a.enableDrag(),a.removeEventListener(e.window,"mousemove",this.mousemove),a.removeEventListener(e.window,"mouseup",this.mouseup)},dl.prototype.mousedown=function(Y){this.down(e.extend({},Y,{ctrlKey:!0,preventDefault:function(){return Y.preventDefault()}}),a.mousePos(this.element,Y)),a.addEventListener(e.window,"mousemove",this.mousemove),a.addEventListener(e.window,"mouseup",this.mouseup)},dl.prototype.mousemove=function(Y){this.move(Y,a.mousePos(this.element,Y))},dl.prototype.mouseup=function(Y){this.mouseRotate.mouseupWindow(Y),this.mousePitch&&this.mousePitch.mouseupWindow(Y),this.offTemp()},dl.prototype.touchstart=function(Y){Y.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=a.touchPos(this.element,Y.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return Y.preventDefault()}},this._startPos))},dl.prototype.touchmove=function(Y){Y.targetTouches.length!==1?this.reset():(this._lastPos=a.touchPos(this.element,Y.targetTouches)[0],this.move({preventDefault:function(){return Y.preventDefault()}},this._lastPos))},dl.prototype.touchend=function(Y){Y.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},dl.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};function tf(ve,Y,de){if(ve=new e.LngLat(ve.lng,ve.lat),Y){var $=new e.LngLat(ve.lng-360,ve.lat),ye=new e.LngLat(ve.lng+360,ve.lat),Ee=de.locationPoint(ve).distSqr(Y);de.locationPoint($).distSqr(Y)<Ee?ve=$:de.locationPoint(ye).distSqr(Y)<Ee&&(ve=ye)}for(;Math.abs(ve.lng-de.center.lng)>180;){var Pe=de.locationPoint(ve);if(Pe.x>=0&&Pe.y>=0&&Pe.x<=de.width&&Pe.y<=de.height)break;ve.lng>de.center.lng?ve.lng-=360:ve.lng+=360}return ve}var Rc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ih(ve,Y,de){var $=ve.classList;for(var ye in Rc)$.remove("mapboxgl-"+de+"-anchor-"+ye);$.add("mapboxgl-"+de+"-anchor-"+Y)}var qf=function(ve){function Y(de,$){var ye=this;if(ve.call(this),(de instanceof e.window.HTMLElement||$)&&(de=e.extend({element:de},$)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=de&&de.anchor||"center",this._color=de&&de.color||"#3FB1CE",this._draggable=de&&de.draggable||!1,this._state="inactive",this._rotation=de&&de.rotation||0,this._rotationAlignment=de&&de.rotationAlignment||"auto",this._pitchAlignment=de&&de.pitchAlignment&&de.pitchAlignment!=="auto"?de.pitchAlignment:this._rotationAlignment,!de||!de.element){this._defaultMarker=!0,this._element=a.create("div"),this._element.setAttribute("aria-label","Map marker");var Ee=a.createNS("http://www.w3.org/2000/svg","svg");Ee.setAttributeNS(null,"display","block"),Ee.setAttributeNS(null,"height","41px"),Ee.setAttributeNS(null,"width","27px"),Ee.setAttributeNS(null,"viewBox","0 0 27 41");var Pe=a.createNS("http://www.w3.org/2000/svg","g");Pe.setAttributeNS(null,"stroke","none"),Pe.setAttributeNS(null,"stroke-width","1"),Pe.setAttributeNS(null,"fill","none"),Pe.setAttributeNS(null,"fill-rule","evenodd");var Ze=a.createNS("http://www.w3.org/2000/svg","g");Ze.setAttributeNS(null,"fill-rule","nonzero");var ft=a.createNS("http://www.w3.org/2000/svg","g");ft.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ft.setAttributeNS(null,"fill","#000000");for(var Mt=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}],Ht=0,$t=Mt;Ht<$t.length;Ht+=1){var or=$t[Ht],Tr=a.createNS("http://www.w3.org/2000/svg","ellipse");Tr.setAttributeNS(null,"opacity","0.04"),Tr.setAttributeNS(null,"cx","10.5"),Tr.setAttributeNS(null,"cy","5.80029008"),Tr.setAttributeNS(null,"rx",or.rx),Tr.setAttributeNS(null,"ry",or.ry),ft.appendChild(Tr)}var Ur=a.createNS("http://www.w3.org/2000/svg","g");Ur.setAttributeNS(null,"fill",this._color);var Hr=a.createNS("http://www.w3.org/2000/svg","path");Hr.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Ur.appendChild(Hr);var Br=a.createNS("http://www.w3.org/2000/svg","g");Br.setAttributeNS(null,"opacity","0.25"),Br.setAttributeNS(null,"fill","#000000");var Jr=a.createNS("http://www.w3.org/2000/svg","path");Jr.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Br.appendChild(Jr);var hn=a.createNS("http://www.w3.org/2000/svg","g");hn.setAttributeNS(null,"transform","translate(6.0, 7.0)"),hn.setAttributeNS(null,"fill","#FFFFFF");var kn=a.createNS("http://www.w3.org/2000/svg","g");kn.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Nn=a.createNS("http://www.w3.org/2000/svg","circle");Nn.setAttributeNS(null,"fill","#000000"),Nn.setAttributeNS(null,"opacity","0.25"),Nn.setAttributeNS(null,"cx","5.5"),Nn.setAttributeNS(null,"cy","5.5"),Nn.setAttributeNS(null,"r","5.4999962");var Kn=a.createNS("http://www.w3.org/2000/svg","circle");Kn.setAttributeNS(null,"fill","#FFFFFF"),Kn.setAttributeNS(null,"cx","5.5"),Kn.setAttributeNS(null,"cy","5.5"),Kn.setAttributeNS(null,"r","5.4999962"),kn.appendChild(Nn),kn.appendChild(Kn),Ze.appendChild(ft),Ze.appendChild(Ur),Ze.appendChild(Br),Ze.appendChild(hn),Ze.appendChild(kn),Ee.appendChild(Ze),this._element.appendChild(Ee),this._offset=e.Point.convert(de&&de.offset||[0,-14])}else this._element=de.element,this._offset=e.Point.convert(de&&de.offset||[0,0]);this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(qn){qn.preventDefault()}),this._element.addEventListener("mousedown",function(qn){qn.preventDefault()}),this._element.addEventListener("focus",function(){var qn=ye._map.getContainer();qn.scrollTop=0,qn.scrollLeft=0}),ih(this._element,this._anchor,"marker"),this._popup=null}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.addTo=function($){return this.remove(),this._map=$,$.getCanvasContainer().appendChild(this._element),$.on("move",this._update),$.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},Y.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),a.remove(this._element),this._popup&&this._popup.remove(),this},Y.prototype.getLngLat=function(){return this._lngLat},Y.prototype.setLngLat=function($){return this._lngLat=e.LngLat.convert($),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},Y.prototype.getElement=function(){return this._element},Y.prototype.setPopup=function($){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),$){if(!("offset"in $.options)){var ye=38.1,Ee=13.5,Pe=Math.sqrt(Math.pow(Ee,2)/2);$.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-ye],"bottom-left":[Pe,(ye-Ee+Pe)*-1],"bottom-right":[-Pe,(ye-Ee+Pe)*-1],left:[Ee,(ye-Ee)*-1],right:[-Ee,(ye-Ee)*-1]}:this._offset}this._popup=$,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},Y.prototype._onKeyPress=function($){var ye=$.code,Ee=$.charCode||$.keyCode;(ye==="Space"||ye==="Enter"||Ee===32||Ee===13)&&this.togglePopup()},Y.prototype._onMapClick=function($){var ye=$.originalEvent.target,Ee=this._element;this._popup&&(ye===Ee||Ee.contains(ye))&&this.togglePopup()},Y.prototype.getPopup=function(){return this._popup},Y.prototype.togglePopup=function(){var $=this._popup;if($)$.isOpen()?$.remove():$.addTo(this._map);else return this;return this},Y.prototype._update=function($){if(!!this._map){this._map.transform.renderWorldCopies&&(this._lngLat=tf(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var ye="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?ye="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(ye="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var Ee="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?Ee="rotateX(0deg)":this._pitchAlignment==="map"&&(Ee="rotateX("+this._map.getPitch()+"deg)"),(!$||$.type==="moveend")&&(this._pos=this._pos.round()),a.setTransform(this._element,Rc[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+Ee+" "+ye)}},Y.prototype.getOffset=function(){return this._offset},Y.prototype.setOffset=function($){return this._offset=e.Point.convert($),this._update(),this},Y.prototype._onMove=function($){this._pos=$.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))},Y.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new e.Event("dragend")),this._state="inactive"},Y.prototype._addDragHandler=function($){this._element.contains($.originalEvent.target)&&($.preventDefault(),this._positionDelta=$.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},Y.prototype.setDraggable=function($){return this._draggable=!!$,this._map&&($?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},Y.prototype.isDraggable=function(){return this._draggable},Y.prototype.setRotation=function($){return this._rotation=$||0,this._update(),this},Y.prototype.getRotation=function(){return this._rotation},Y.prototype.setRotationAlignment=function($){return this._rotationAlignment=$||"auto",this._update(),this},Y.prototype.getRotationAlignment=function(){return this._rotationAlignment},Y.prototype.setPitchAlignment=function($){return this._pitchAlignment=$&&$!=="auto"?$:this._rotationAlignment,this._update(),this},Y.prototype.getPitchAlignment=function(){return this._pitchAlignment},Y}(e.Evented),sv={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Af;function Ic(ve){Af!==void 0?ve(Af):e.window.navigator.permissions!==void 0?e.window.navigator.permissions.query({name:"geolocation"}).then(function(Y){Af=Y.state!=="denied",ve(Af)}):(Af=!!e.window.navigator.geolocation,ve(Af))}var ec=0,Mf=!1,lv=function(ve){function Y(de){ve.call(this),this.options=e.extend({},sv,de),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.onAdd=function($){return this._map=$,this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),Ic(this._setupUI),this._container},Y.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),a.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ec=0,Mf=!1},Y.prototype._isOutOfMapMaxBounds=function($){var ye=this._map.getMaxBounds(),Ee=$.coords;return ye&&(Ee.longitude<ye.getWest()||Ee.longitude>ye.getEast()||Ee.latitude<ye.getSouth()||Ee.latitude>ye.getNorth())},Y.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break}},Y.prototype._onSuccess=function($){if(!!this._map){if(this._isOutOfMapMaxBounds($)){this._setErrorState(),this.fire(new e.Event("outofmaxbounds",$)),this._updateMarker(),this._finish();return}if(this.options.trackUserLocation)switch(this._lastKnownPosition=$,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker($),(!this.options.trackUserLocation||this._watchState==="ACTIVE_LOCK")&&this._updateCamera($),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",$)),this._finish()}},Y.prototype._updateCamera=function($){var ye=new e.LngLat($.coords.longitude,$.coords.latitude),Ee=$.coords.accuracy,Pe=this._map.getBearing(),Ze=e.extend({bearing:Pe},this.options.fitBoundsOptions);this._map.fitBounds(ye.toBounds(Ee),Ze,{geolocateSource:!0})},Y.prototype._updateMarker=function($){if($){var ye=new e.LngLat($.coords.longitude,$.coords.latitude);this._accuracyCircleMarker.setLngLat(ye).addTo(this._map),this._userLocationDotMarker.setLngLat(ye).addTo(this._map),this._accuracy=$.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},Y.prototype._updateCircleRadius=function(){var $=this._map._container.clientHeight/2,ye=this._map.unproject([0,$]),Ee=this._map.unproject([1,$]),Pe=ye.distanceTo(Ee),Ze=Math.ceil(2*this._accuracy/Pe);this._circleElement.style.width=Ze+"px",this._circleElement.style.height=Ze+"px"},Y.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},Y.prototype._onError=function($){if(!!this._map){if(this.options.trackUserLocation)if($.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var ye=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=ye,this._geolocateButton.setAttribute("aria-label",ye),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if($.code===3&&Mf)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",$)),this._finish()}},Y.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},Y.prototype._setupUI=function($){var ye=this;if(this._container.addEventListener("contextmenu",function(Ze){return Ze.preventDefault()}),this._geolocateButton=a.create("button","mapboxgl-ctrl-geolocate",this._container),a.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",$===!1){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var Ee=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=Ee,this._geolocateButton.setAttribute("aria-label",Ee)}else{var Pe=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Pe,this._geolocateButton.setAttribute("aria-label",Pe)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=a.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new qf(this._dotElement),this._circleElement=a.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new qf({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(Ze){var ft=Ze.originalEvent&&Ze.originalEvent.type==="resize";!Ze.geolocateSource&&ye._watchState==="ACTIVE_LOCK"&&!ft&&(ye._watchState="BACKGROUND",ye._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),ye._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),ye.fire(new e.Event("trackuserlocationend")))})},Y.prototype.trigger=function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ec--,Mf=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"));break}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error");break}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ec++;var $;ec>1?($={maximumAge:6e5,timeout:0},Mf=!0):($=this.options.positionOptions,Mf=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,$)}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},Y.prototype._clearWatch=function(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},Y}(e.Evented),Ap={maxWidth:100,unit:"metric"},Sf=function(Y){this.options=e.extend({},Ap,Y),e.bindAll(["_onMove","setUnit"],this)};Sf.prototype.getDefaultPosition=function(){return"bottom-left"},Sf.prototype._onMove=function(){uv(this._map,this._container,this.options)},Sf.prototype.onAdd=function(Y){return this._map=Y,this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",Y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Sf.prototype.onRemove=function(){a.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Sf.prototype.setUnit=function(Y){this.options.unit=Y,uv(this._map,this._container,this.options)};function uv(ve,Y,de){var $=de&&de.maxWidth||100,ye=ve._container.clientHeight/2,Ee=ve.unproject([0,ye]),Pe=ve.unproject([$,ye]),Ze=Ee.distanceTo(Pe);if(de&&de.unit==="imperial"){var ft=3.2808*Ze;if(ft>5280){var Mt=ft/5280;tc(Y,$,Mt,ve._getUIString("ScaleControl.Miles"))}else tc(Y,$,ft,ve._getUIString("ScaleControl.Feet"))}else if(de&&de.unit==="nautical"){var Ht=Ze/1852;tc(Y,$,Ht,ve._getUIString("ScaleControl.NauticalMiles"))}else Ze>=1e3?tc(Y,$,Ze/1e3,ve._getUIString("ScaleControl.Kilometers")):tc(Y,$,Ze,ve._getUIString("ScaleControl.Meters"))}function tc(ve,Y,de,$){var ye=Sp(de),Ee=ye/de;ve.style.width=Y*Ee+"px",ve.innerHTML=ye+"&nbsp;"+$}function Mp(ve){var Y=Math.pow(10,Math.ceil(-Math.log(ve)/Math.LN10));return Math.round(ve*Y)/Y}function Sp(ve){var Y=Math.pow(10,(""+Math.floor(ve)).length-1),de=ve/Y;return de=de>=10?10:de>=5?5:de>=3?3:de>=2?2:de>=1?1:Mp(de),Y*de}var pu=function(Y){this._fullscreen=!1,Y&&Y.container&&(Y.container instanceof e.window.HTMLElement?this._container=Y.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.window.document&&(this._fullscreenchange="MSFullscreenChange")};pu.prototype.onAdd=function(Y){return this._map=Y,this._container||(this._container=this._map.getContainer()),this._controlContainer=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},pu.prototype.onRemove=function(){a.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},pu.prototype._checkFullscreenSupport=function(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)},pu.prototype._setupUI=function(){var Y=this._fullscreenButton=a.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);a.create("span","mapboxgl-ctrl-icon",Y).setAttribute("aria-hidden",!0),Y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},pu.prototype._updateTitle=function(){var Y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",Y),this._fullscreenButton.title=Y},pu.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},pu.prototype._isFullscreen=function(){return this._fullscreen},pu.prototype._changeIcon=function(){var Y=e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement;Y===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},pu.prototype._onClickFullscreen=function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.mozCancelFullScreen?e.window.document.mozCancelFullScreen():e.window.document.msExitFullscreen?e.window.document.msExitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var kp={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Ep=function(ve){function Y(de){ve.call(this),this.options=e.extend(Object.create(kp),de),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.addTo=function($){return this._map&&this.remove(),this._map=$,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this},Y.prototype.isOpen=function(){return!!this._map},Y.prototype.remove=function(){return this._content&&a.remove(this._content),this._container&&(a.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this},Y.prototype.getLngLat=function(){return this._lngLat},Y.prototype.setLngLat=function($){return this._lngLat=e.LngLat.convert($),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},Y.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},Y.prototype.getElement=function(){return this._container},Y.prototype.setText=function($){return this.setDOMContent(e.window.document.createTextNode($))},Y.prototype.setHTML=function($){var ye=e.window.document.createDocumentFragment(),Ee=e.window.document.createElement("body"),Pe;for(Ee.innerHTML=$;Pe=Ee.firstChild,!!Pe;)ye.appendChild(Pe);return this.setDOMContent(ye)},Y.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},Y.prototype.setMaxWidth=function($){return this.options.maxWidth=$,this._update(),this},Y.prototype.setDOMContent=function($){return this._createContent(),this._content.appendChild($),this._update(),this},Y.prototype.addClassName=function($){this._container&&this._container.classList.add($)},Y.prototype.removeClassName=function($){this._container&&this._container.classList.remove($)},Y.prototype.toggleClassName=function($){if(this._container)return this._container.classList.toggle($)},Y.prototype._createContent=function(){this._content&&a.remove(this._content),this._content=a.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=a.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},Y.prototype._onMouseUp=function($){this._update($.point)},Y.prototype._onMouseMove=function($){this._update($.point)},Y.prototype._onDrag=function($){this._update($.point)},Y.prototype._update=function($){var ye=this,Ee=this._lngLat||this._trackPointer;if(!(!this._map||!Ee||!this._content)&&(this._container||(this._container=a.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=a.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Tr){return ye._container.classList.add(Tr)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=tf(this._lngLat,this._pos,this._map.transform)),!(this._trackPointer&&!$))){var Pe=this._pos=this._trackPointer&&$?$:this._map.project(this._lngLat),Ze=this.options.anchor,ft=fv(this.options.offset);if(!Ze){var Mt=this._container.offsetWidth,Ht=this._container.offsetHeight,$t;Pe.y+ft.bottom.y<Ht?$t=["top"]:Pe.y>this._map.transform.height-Ht?$t=["bottom"]:$t=[],Pe.x<Mt/2?$t.push("left"):Pe.x>this._map.transform.width-Mt/2&&$t.push("right"),$t.length===0?Ze="bottom":Ze=$t.join("-")}var or=Pe.add(ft[Ze]).round();a.setTransform(this._container,Rc[Ze]+" translate("+or.x+"px,"+or.y+"px)"),ih(this._container,Ze,"popup")}},Y.prototype._onClose=function(){this.remove()},Y}(e.Evented);function fv(ve){if(ve)if(typeof ve=="number"){var Y=Math.round(Math.sqrt(.5*Math.pow(ve,2)));return{center:new e.Point(0,0),top:new e.Point(0,ve),"top-left":new e.Point(Y,Y),"top-right":new e.Point(-Y,Y),bottom:new e.Point(0,-ve),"bottom-left":new e.Point(Y,-Y),"bottom-right":new e.Point(-Y,-Y),left:new e.Point(ve,0),right:new e.Point(-ve,0)}}else if(ve instanceof e.Point||Array.isArray(ve)){var de=e.Point.convert(ve);return{center:de,top:de,"top-left":de,"top-right":de,bottom:de,"bottom-left":de,"bottom-right":de,left:de,right:de}}else return{center:e.Point.convert(ve.center||[0,0]),top:e.Point.convert(ve.top||[0,0]),"top-left":e.Point.convert(ve["top-left"]||[0,0]),"top-right":e.Point.convert(ve["top-right"]||[0,0]),bottom:e.Point.convert(ve.bottom||[0,0]),"bottom-left":e.Point.convert(ve["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(ve["bottom-right"]||[0,0]),left:e.Point.convert(ve.left||[0,0]),right:e.Point.convert(ve.right||[0,0])};else return fv(new e.Point(0,0))}var Cp={version:e.version,supported:o,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:ov,NavigationControl:ef,GeolocateControl:lv,AttributionControl:Zl,ScaleControl:Sf,FullscreenControl:pu,Popup:Ep,Marker:qf,Style:ts,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,config:e.config,prewarm:Fr,clearPrewarmedResources:nn,get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(ve){e.config.ACCESS_TOKEN=ve},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(ve){e.config.API_URL=ve},get workerCount(){return gr.workerCount},set workerCount(ve){gr.workerCount=ve},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(ve){e.config.MAX_PARALLEL_IMAGE_REQUESTS=ve},clearStorage:function(Y){e.clearTileCache(Y)},workerUrl:""};return Cp}),b})},{}],240:[function(t,B,H){B.exports=Math.log2||function(d){return Math.log(d)*Math.LOG2E}},{}],241:[function(t,B,H){B.exports=l;var d=t("mouse-event");function l(b,w){w||(w=b,b=window);var e=0,o=0,a=0,r={shift:!1,alt:!1,control:!1,meta:!1},n=!1;function c(M){var x=!1;return"altKey"in M&&(x=x||M.altKey!==r.alt,r.alt=!!M.altKey),"shiftKey"in M&&(x=x||M.shiftKey!==r.shift,r.shift=!!M.shiftKey),"ctrlKey"in M&&(x=x||M.ctrlKey!==r.control,r.control=!!M.ctrlKey),"metaKey"in M&&(x=x||M.metaKey!==r.meta,r.meta=!!M.metaKey),x}function s(M,x){var T=d.x(x),_=d.y(x);"buttons"in x&&(M=x.buttons|0),(M!==e||T!==o||_!==a||c(x))&&(e=M|0,o=T||0,a=_||0,w&&w(e,o,a,r))}function i(M){s(0,M)}function v(){(e||o||a||r.shift||r.alt||r.meta||r.control)&&(o=a=0,e=0,r.shift=r.alt=r.control=r.meta=!1,w&&w(0,0,0,r))}function u(M){c(M)&&w&&w(e,o,a,r)}function g(M){d.buttons(M)===0?s(0,M):s(e,M)}function h(M){s(e|d.buttons(M),M)}function y(M){s(e&~d.buttons(M),M)}function p(){n||(n=!0,b.addEventListener("mousemove",g),b.addEventListener("mousedown",h),b.addEventListener("mouseup",y),b.addEventListener("mouseleave",i),b.addEventListener("mouseenter",i),b.addEventListener("mouseout",i),b.addEventListener("mouseover",i),b.addEventListener("blur",v),b.addEventListener("keyup",u),b.addEventListener("keydown",u),b.addEventListener("keypress",u),b!==window&&(window.addEventListener("blur",v),window.addEventListener("keyup",u),window.addEventListener("keydown",u),window.addEventListener("keypress",u)))}function A(){!n||(n=!1,b.removeEventListener("mousemove",g),b.removeEventListener("mousedown",h),b.removeEventListener("mouseup",y),b.removeEventListener("mouseleave",i),b.removeEventListener("mouseenter",i),b.removeEventListener("mouseout",i),b.removeEventListener("mouseover",i),b.removeEventListener("blur",v),b.removeEventListener("keyup",u),b.removeEventListener("keydown",u),b.removeEventListener("keypress",u),b!==window&&(window.removeEventListener("blur",v),window.removeEventListener("keyup",u),window.removeEventListener("keydown",u),window.removeEventListener("keypress",u)))}p();var m={element:b};return Object.defineProperties(m,{enabled:{get:function(){return n},set:function(M){M?p():A()},enumerable:!0},buttons:{get:function(){return e},enumerable:!0},x:{get:function(){return o},enumerable:!0},y:{get:function(){return a},enumerable:!0},mods:{get:function(){return r},enumerable:!0}}),m}},{"mouse-event":243}],242:[function(t,B,H){var d={left:0,top:0};B.exports=l;function l(w,e,o){e=e||w.currentTarget||w.srcElement,Array.isArray(o)||(o=[0,0]);var a=w.clientX||0,r=w.clientY||0,n=b(e);return o[0]=a-n.left,o[1]=r-n.top,o}function b(w){return w===window||w===document||w===document.body?d:w.getBoundingClientRect()}},{}],243:[function(t,B,H){function d(e){if(typeof e=="object"){if("buttons"in e)return e.buttons;if("which"in e){var o=e.which;if(o===2)return 4;if(o===3)return 2;if(o>0)return 1<<o-1}else if("button"in e){var o=e.button;if(o===1)return 4;if(o===2)return 2;if(o>=0)return 1<<o}}return 0}H.buttons=d;function l(e){return e.target||e.srcElement||window}H.element=l;function b(e){if(typeof e=="object"){if("offsetX"in e)return e.offsetX;var o=l(e),a=o.getBoundingClientRect();return e.clientX-a.left}return 0}H.x=b;function w(e){if(typeof e=="object"){if("offsetY"in e)return e.offsetY;var o=l(e),a=o.getBoundingClientRect();return e.clientY-a.top}return 0}H.y=w},{}],244:[function(t,B,H){var d=t("to-px");B.exports=l;function l(b,w,e){typeof b=="function"&&(e=!!w,w=b,b=window);var o=d("ex",b),a=function(r){e&&r.preventDefault();var n=r.deltaX||0,c=r.deltaY||0,s=r.deltaZ||0,i=r.deltaMode,v=1;switch(i){case 1:v=o;break;case 2:v=window.innerHeight;break}if(n*=v,c*=v,s*=v,n||c||s)return w(n,c,s,r)};return b.addEventListener("wheel",a),a}},{"to-px":314}],245:[function(t,B,H){(function(d,l){(function(){/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/(function(w,e,o){e[w]=e[w]||o(),typeof B!="undefined"&&B.exports&&(B.exports=e[w])})("Promise",typeof d!="undefined"?d:this,function(){var w,e,o,a=Object.prototype.toString,r=typeof l!="undefined"?function(M){return l(M)}:setTimeout;try{Object.defineProperty({},"x",{}),w=function(M,x,T,_){return Object.defineProperty(M,x,{value:T,writable:!0,configurable:_!==!1})}}catch{w=function(x,T,_){return x[T]=_,x}}o=function(){var M,x,T;function _(f,L){this.fn=f,this.self=L,this.next=void 0}return{add:function(L,S){T=new _(L,S),x?x.next=T:M=T,x=T,T=void 0},drain:function(){var L=M;for(M=x=e=void 0;L;)L.fn.call(L.self),L=L.next}}}();function n(m,M){o.add(m,M),e||(e=r(o.drain))}function c(m){var M,x=typeof m;return m!=null&&(x=="object"||x=="function")&&(M=m.then),typeof M=="function"?M:!1}function s(){for(var m=0;m<this.chain.length;m++)i(this,this.state===1?this.chain[m].success:this.chain[m].failure,this.chain[m]);this.chain.length=0}function i(m,M,x){var T,_;try{M===!1?x.reject(m.msg):(M===!0?T=m.msg:T=M.call(void 0,m.msg),T===x.promise?x.reject(TypeError("Promise-chain cycle")):(_=c(T))?_.call(T,x.resolve,x.reject):x.resolve(T))}catch(f){x.reject(f)}}function v(m){var M,x=this;if(!x.triggered){x.triggered=!0,x.def&&(x=x.def);try{(M=c(m))?n(function(){var T=new h(x);try{M.call(m,function(){v.apply(T,arguments)},function(){u.apply(T,arguments)})}catch(_){u.call(T,_)}}):(x.msg=m,x.state=1,x.chain.length>0&&n(s,x))}catch(T){u.call(new h(x),T)}}}function u(m){var M=this;M.triggered||(M.triggered=!0,M.def&&(M=M.def),M.msg=m,M.state=2,M.chain.length>0&&n(s,M))}function g(m,M,x,T){for(var _=0;_<M.length;_++)(function(L){m.resolve(M[L]).then(function(k){x(L,k)},T)})(_)}function h(m){this.def=m,this.triggered=!1}function y(m){this.promise=m,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function p(m){if(typeof m!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var M=new y(this);this.then=function(T,_){var f={success:typeof T=="function"?T:!0,failure:typeof _=="function"?_:!1};return f.promise=new this.constructor(function(S,k){if(typeof S!="function"||typeof k!="function")throw TypeError("Not a function");f.resolve=S,f.reject=k}),M.chain.push(f),M.state!==0&&n(s,M),f.promise},this.catch=function(T){return this.then(void 0,T)};try{m.call(void 0,function(T){v.call(M,T)},function(T){u.call(M,T)})}catch(x){u.call(M,x)}}var A=w({},"constructor",p,!1);return p.prototype=A,w(A,"__NPO__",0,!1),w(p,"resolve",function(M){var x=this;return M&&typeof M=="object"&&M.__NPO__===1?M:new x(function(_,f){if(typeof _!="function"||typeof f!="function")throw TypeError("Not a function");_(M)})}),w(p,"reject",function(M){return new this(function(T,_){if(typeof T!="function"||typeof _!="function")throw TypeError("Not a function");_(M)})}),w(p,"all",function(M){var x=this;return a.call(M)!="[object Array]"?x.reject(TypeError("Not an array")):M.length===0?x.resolve([]):new x(function(_,f){if(typeof _!="function"||typeof f!="function")throw TypeError("Not a function");var L=M.length,S=Array(L),k=0;g(x,M,function(z,I){S[z]=I,++k===L&&_(S)},f)})}),w(p,"race",function(M){var x=this;return a.call(M)!="[object Array]"?x.reject(TypeError("Not an array")):new x(function(_,f){if(typeof _!="function"||typeof f!="function")throw TypeError("Not a function");g(x,M,function(S,k){_(k)},f)})}),p})}).call(this)}).call(this,typeof Ao!="undefined"?Ao:typeof self!="undefined"?self:typeof window!="undefined"?window:{},t("timers").setImmediate)},{timers:311}],246:[function(t,B,H){var d=Math.PI,l=r(120);B.exports=b;function b(n){for(var c,s=[],i=0,v=0,u=0,g=0,h=null,y=null,p=0,A=0,m=0,M=n.length;m<M;m++){var x=n[m],T=x[0];switch(T){case"M":u=x[1],g=x[2];break;case"A":x=o(p,A,x[1],x[2],r(x[3]),x[4],x[5],x[6],x[7]),x.unshift("C"),x.length>7&&(s.push(x.splice(0,7)),x.unshift("C"));break;case"S":var _=p,f=A;(c=="C"||c=="S")&&(_+=_-i,f+=f-v),x=["C",_,f,x[1],x[2],x[3],x[4]];break;case"T":c=="Q"||c=="T"?(h=p*2-h,y=A*2-y):(h=p,y=A),x=e(p,A,h,y,x[1],x[2]);break;case"Q":h=x[1],y=x[2],x=e(p,A,x[1],x[2],x[3],x[4]);break;case"L":x=w(p,A,x[1],x[2]);break;case"H":x=w(p,A,x[1],A);break;case"V":x=w(p,A,p,x[1]);break;case"Z":x=w(p,A,u,g);break}c=T,p=x[x.length-2],A=x[x.length-1],x.length>4?(i=x[x.length-4],v=x[x.length-3]):(i=p,v=A),s.push(x)}return s}function w(n,c,s,i){return["C",n,c,s,i,s,i]}function e(n,c,s,i,v,u){return["C",n/3+2/3*s,c/3+2/3*i,v/3+2/3*s,u/3+2/3*i,v,u]}function o(n,c,s,i,v,u,g,h,y,p){if(p)k=p[0],P=p[1],L=p[2],S=p[3];else{var A=a(n,c,-v);n=A.x,c=A.y,A=a(h,y,-v),h=A.x,y=A.y;var m=(n-h)/2,M=(c-y)/2,x=m*m/(s*s)+M*M/(i*i);x>1&&(x=Math.sqrt(x),s=x*s,i=x*i);var T=s*s,_=i*i,f=(u==g?-1:1)*Math.sqrt(Math.abs((T*_-T*M*M-_*m*m)/(T*M*M+_*m*m)));f==1/0&&(f=1);var L=f*s*M/i+(n+h)/2,S=f*-i*m/s+(c+y)/2,k=Math.asin(((c-S)/i).toFixed(9)),P=Math.asin(((y-S)/i).toFixed(9));k=n<L?d-k:k,P=h<L?d-P:P,k<0&&(k=d*2+k),P<0&&(P=d*2+P),g&&k>P&&(k=k-d*2),!g&&P>k&&(P=P-d*2)}if(Math.abs(P-k)>l){var z=P,I=h,R=y;P=k+l*(g&&P>k?1:-1),h=L+s*Math.cos(P),y=S+i*Math.sin(P);var D=o(h,y,s,i,v,0,g,I,R,[P,z,L,S])}var O=Math.tan((P-k)/4),F=4/3*s*O,G=4/3*i*O,W=[2*n-(n+F*Math.sin(k)),2*c-(c-G*Math.cos(k)),h+F*Math.sin(P),y-G*Math.cos(P),h,y];if(p)return W;D&&(W=W.concat(D));for(var q=0;q<W.length;){var J=a(W[q],W[q+1],v);W[q++]=J.x,W[q++]=J.y}return W}function a(n,c,s){return{x:n*Math.cos(s)-c*Math.sin(s),y:n*Math.sin(s)+c*Math.cos(s)}}function r(n){return n*(d/180)}},{}],247:[function(t,B,H){var d=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;function w(o){if(o==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(o)}function e(){try{if(!Object.assign)return!1;var o=new String("abc");if(o[5]="de",Object.getOwnPropertyNames(o)[0]==="5")return!1;for(var a={},r=0;r<10;r++)a["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(a).map(function(s){return a[s]});if(n.join("")!=="0123456789")return!1;var c={};return"abcdefghijklmnopqrst".split("").forEach(function(s){c[s]=s}),Object.keys(Object.assign({},c)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}B.exports=e()?Object.assign:function(o,a){for(var r,n=w(o),c,s=1;s<arguments.length;s++){r=Object(arguments[s]);for(var i in r)l.call(r,i)&&(n[i]=r[i]);if(d){c=d(r);for(var v=0;v<c.length;v++)b.call(r,c[v])&&(n[c[v]]=r[c[v]])}}return n}},{}],248:[function(t,B,H){function d(w,e){if(typeof w!="string")return[w];var o=[w];typeof e=="string"||Array.isArray(e)?e={brackets:e}:e||(e={});var a=e.brackets?Array.isArray(e.brackets)?e.brackets:[e.brackets]:["{}","[]","()"],r=e.escape||"___",n=!!e.flat;a.forEach(function(i){var v=new RegExp(["\\",i[0],"[^\\",i[0],"\\",i[1],"]*\\",i[1]].join("")),u=[];function g(h,y,p){var A=o.push(h.slice(i[0].length,-i[1].length))-1;return u.push(A),r+A+r}o.forEach(function(h,y){for(var p,A=0;h!=p;)if(p=h,h=h.replace(v,g),A++>1e4)throw Error("References have circular dependency. Please, check them.");o[y]=h}),u=u.reverse(),o=o.map(function(h){return u.forEach(function(y){h=h.replace(new RegExp("(\\"+r+y+"\\"+r+")","g"),i[0]+"$1"+i[1])}),h})});var c=new RegExp("\\"+r+"([0-9]+)\\"+r);function s(i,v,u){for(var g=[],h,y=0;h=c.exec(i);){if(y++>1e4)throw Error("Circular references in parenthesis");g.push(i.slice(0,h.index)),g.push(s(v[h[1]],v)),i=i.slice(h.index+h[0].length)}return g.push(i),g}return n?o:s(o[0],o)}function l(w,e){if(e&&e.flat){var o=e&&e.escape||"___",a=w[0],r;if(!a)return"";for(var n=new RegExp("\\"+o+"([0-9]+)\\"+o),c=0;a!=r;){if(c++>1e4)throw Error("Circular references in "+w);r=a,a=a.replace(n,s)}return a}return w.reduce(function i(v,u){return Array.isArray(u)&&(u=u.reduce(i,"")),v+u},"");function s(i,v){if(w[v]==null)throw Error("Reference "+v+"is undefined");return w[v]}}function b(w,e){return Array.isArray(w)?l(w,e):d(w,e)}b.parse=d,b.stringify=l,B.exports=b},{}],249:[function(t,B,H){var d=t("pick-by-alias");B.exports=l;function l(b){var w;return arguments.length>1&&(b=arguments),typeof b=="string"?b=b.split(/\s/).map(parseFloat):typeof b=="number"&&(b=[b]),b.length&&typeof b[0]=="number"?b.length===1?w={width:b[0],height:b[0],x:0,y:0}:b.length===2?w={width:b[0],height:b[1],x:0,y:0}:w={x:b[0],y:b[1],width:b[2]-b[0]||0,height:b[3]-b[1]||0}:b&&(b=d(b,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),w={x:b.left||0,y:b.top||0},b.width==null?b.right?w.width=b.right-w.x:w.width=0:w.width=b.width,b.height==null?b.bottom?w.height=b.bottom-w.y:w.height=0:w.height=b.height),w}},{"pick-by-alias":253}],250:[function(t,B,H){B.exports=b;var d={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},l=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function b(o){var a=[];return o.replace(l,function(r,n,c){var s=n.toLowerCase();for(c=e(c),s=="m"&&c.length>2&&(a.push([n].concat(c.splice(0,2))),s="l",n=n=="m"?"l":"L");;){if(c.length==d[s])return c.unshift(n),a.push(c);if(c.length<d[s])throw new Error("malformed path data");a.push([n].concat(c.splice(0,d[s])))}}),a}var w=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function e(o){var a=o.match(w);return a?a.map(Number):[]}},{}],251:[function(t,B,H){B.exports=function(l,b){b||(b=[0,""]),l=String(l);var w=parseFloat(l,10);return b[0]=w,b[1]=l.match(/[\d.\-\+]*\s*(.*)/)[1]||"",b}},{}],252:[function(t,B,H){(function(d){(function(){(function(){var l,b,w,e,o,a;typeof performance!="undefined"&&performance!==null&&performance.now?B.exports=function(){return performance.now()}:typeof d!="undefined"&&d!==null&&d.hrtime?(B.exports=function(){return(l()-o)/1e6},b=d.hrtime,l=function(){var r;return r=b(),r[0]*1e9+r[1]},e=l(),a=d.uptime()*1e9,o=e-a):Date.now?(B.exports=function(){return Date.now()-w},w=Date.now()):(B.exports=function(){return new Date().getTime()-w},w=new Date().getTime())}).call(this)}).call(this)}).call(this,t("_process"))},{_process:277}],253:[function(t,B,H){B.exports=function(w,e,o){var a={},r,n;if(typeof e=="string"&&(e=l(e)),Array.isArray(e)){var c={};for(n=0;n<e.length;n++)c[e[n]]=!0;e=c}for(r in e)e[r]=l(e[r]);var s={};for(r in e){var i=e[r];if(Array.isArray(i))for(n=0;n<i.length;n++){var v=i[n];if(o&&(s[v]=!0),v in w){if(a[r]=w[v],o)for(var u=n;u<i.length;u++)s[i[u]]=!0;break}}else r in w&&(e[r]&&(a[r]=w[r]),o&&(s[r]=!0))}if(o)for(r in w)s[r]||(a[r]=w[r]);return a};var d={};function l(b){return d[b]?d[b]:(typeof b=="string"&&(b=d[b]=b.split(/\s*,\s*|\s+/)),b)}},{}],254:[function(t,B,H){/*
 * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
 * @license MIT
 * @preserve Project Home: https://github.com/voidqk/polybooljs
 */var d=t("./lib/build-log"),l=t("./lib/epsilon"),b=t("./lib/intersecter"),w=t("./lib/segment-chainer"),e=t("./lib/segment-selector"),o=t("./lib/geojson"),a=!1,r=l(),n;n={buildLog:function(s){return s===!0?a=d():s===!1&&(a=!1),a===!1?!1:a.list},epsilon:function(s){return r.epsilon(s)},segments:function(s){var i=b(!0,r,a);return s.regions.forEach(i.addRegion),{segments:i.calculate(s.inverted),inverted:s.inverted}},combine:function(s,i){var v=b(!1,r,a);return{combined:v.calculate(s.segments,s.inverted,i.segments,i.inverted),inverted1:s.inverted,inverted2:i.inverted}},selectUnion:function(s){return{segments:e.union(s.combined,a),inverted:s.inverted1||s.inverted2}},selectIntersect:function(s){return{segments:e.intersect(s.combined,a),inverted:s.inverted1&&s.inverted2}},selectDifference:function(s){return{segments:e.difference(s.combined,a),inverted:s.inverted1&&!s.inverted2}},selectDifferenceRev:function(s){return{segments:e.differenceRev(s.combined,a),inverted:!s.inverted1&&s.inverted2}},selectXor:function(s){return{segments:e.xor(s.combined,a),inverted:s.inverted1!==s.inverted2}},polygon:function(s){return{regions:w(s.segments,r,a),inverted:s.inverted}},polygonFromGeoJSON:function(s){return o.toPolygon(n,s)},polygonToGeoJSON:function(s){return o.fromPolygon(n,r,s)},union:function(s,i){return c(s,i,n.selectUnion)},intersect:function(s,i){return c(s,i,n.selectIntersect)},difference:function(s,i){return c(s,i,n.selectDifference)},differenceRev:function(s,i){return c(s,i,n.selectDifferenceRev)},xor:function(s,i){return c(s,i,n.selectXor)}};function c(s,i,v){var u=n.segments(s),g=n.segments(i),h=n.combine(u,g),y=v(h);return n.polygon(y)}typeof window=="object"&&(window.PolyBool=n),B.exports=n},{"./lib/build-log":255,"./lib/epsilon":256,"./lib/geojson":257,"./lib/intersecter":258,"./lib/segment-chainer":260,"./lib/segment-selector":261}],255:[function(t,B,H){function d(){var l,b=0,w=!1;function e(o,a){return l.list.push({type:o,data:a?JSON.parse(JSON.stringify(a)):void 0}),l}return l={list:[],segmentId:function(){return b++},checkIntersection:function(o,a){return e("check",{seg1:o,seg2:a})},segmentChop:function(o,a){return e("div_seg",{seg:o,pt:a}),e("chop",{seg:o,pt:a})},statusRemove:function(o){return e("pop_seg",{seg:o})},segmentUpdate:function(o){return e("seg_update",{seg:o})},segmentNew:function(o,a){return e("new_seg",{seg:o,primary:a})},segmentRemove:function(o){return e("rem_seg",{seg:o})},tempStatus:function(o,a,r){return e("temp_status",{seg:o,above:a,below:r})},rewind:function(o){return e("rewind",{seg:o})},status:function(o,a,r){return e("status",{seg:o,above:a,below:r})},vert:function(o){return o===w?l:(w=o,e("vert",{x:o}))},log:function(o){return typeof o!="string"&&(o=JSON.stringify(o,!1,"  ")),e("log",{txt:o})},reset:function(){return e("reset")},selected:function(o){return e("selected",{segs:o})},chainStart:function(o){return e("chain_start",{seg:o})},chainRemoveHead:function(o,a){return e("chain_rem_head",{index:o,pt:a})},chainRemoveTail:function(o,a){return e("chain_rem_tail",{index:o,pt:a})},chainNew:function(o,a){return e("chain_new",{pt1:o,pt2:a})},chainMatch:function(o){return e("chain_match",{index:o})},chainClose:function(o){return e("chain_close",{index:o})},chainAddHead:function(o,a){return e("chain_add_head",{index:o,pt:a})},chainAddTail:function(o,a){return e("chain_add_tail",{index:o,pt:a})},chainConnect:function(o,a){return e("chain_con",{index1:o,index2:a})},chainReverse:function(o){return e("chain_rev",{index:o})},chainJoin:function(o,a){return e("chain_join",{index1:o,index2:a})},done:function(){return e("done")}},l}B.exports=d},{}],256:[function(t,B,H){function d(l){typeof l!="number"&&(l=1e-10);var b={epsilon:function(w){return typeof w=="number"&&(l=w),l},pointAboveOrOnLine:function(w,e,o){var a=e[0],r=e[1],n=o[0],c=o[1],s=w[0],i=w[1];return(n-a)*(i-r)-(c-r)*(s-a)>=-l},pointBetween:function(w,e,o){var a=w[1]-e[1],r=o[0]-e[0],n=w[0]-e[0],c=o[1]-e[1],s=n*r+a*c;if(s<l)return!1;var i=r*r+c*c;return!(s-i>-l)},pointsSameX:function(w,e){return Math.abs(w[0]-e[0])<l},pointsSameY:function(w,e){return Math.abs(w[1]-e[1])<l},pointsSame:function(w,e){return b.pointsSameX(w,e)&&b.pointsSameY(w,e)},pointsCompare:function(w,e){return b.pointsSameX(w,e)?b.pointsSameY(w,e)?0:w[1]<e[1]?-1:1:w[0]<e[0]?-1:1},pointsCollinear:function(w,e,o){var a=w[0]-e[0],r=w[1]-e[1],n=e[0]-o[0],c=e[1]-o[1];return Math.abs(a*c-n*r)<l},linesIntersect:function(w,e,o,a){var r=e[0]-w[0],n=e[1]-w[1],c=a[0]-o[0],s=a[1]-o[1],i=r*s-n*c;if(Math.abs(i)<l)return!1;var v=w[0]-o[0],u=w[1]-o[1],g=(c*u-s*v)/i,h=(r*u-n*v)/i,y={alongA:0,alongB:0,pt:[w[0]+g*r,w[1]+g*n]};return g<=-l?y.alongA=-2:g<l?y.alongA=-1:g-1<=-l?y.alongA=0:g-1<l?y.alongA=1:y.alongA=2,h<=-l?y.alongB=-2:h<l?y.alongB=-1:h-1<=-l?y.alongB=0:h-1<l?y.alongB=1:y.alongB=2,y},pointInsideRegion:function(w,e){for(var o=w[0],a=w[1],r=e[e.length-1][0],n=e[e.length-1][1],c=!1,s=0;s<e.length;s++){var i=e[s][0],v=e[s][1];v-a>l!=n-a>l&&(r-i)*(a-v)/(n-v)+i-o>l&&(c=!c),r=i,n=v}return c}};return b}B.exports=d},{}],257:[function(t,B,H){var d={toPolygon:function(l,b){function w(a){if(a.length<=0)return l.segments({inverted:!1,regions:[]});function r(s){var i=s.slice(0,s.length-1);return l.segments({inverted:!1,regions:[i]})}for(var n=r(a[0]),c=1;c<a.length;c++)n=l.selectDifference(l.combine(n,r(a[c])));return n}if(b.type==="Polygon")return l.polygon(w(b.coordinates));if(b.type==="MultiPolygon"){for(var e=l.segments({inverted:!1,regions:[]}),o=0;o<b.coordinates.length;o++)e=l.selectUnion(l.combine(e,w(b.coordinates[o])));return l.polygon(e)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(l,b,w){w=l.polygon(l.segments(w));function e(g,h){return b.pointInsideRegion([(g[0][0]+g[1][0])*.5,(g[0][1]+g[1][1])*.5],h)}function o(g){return{region:g,children:[]}}var a=o(null);function r(g,h){for(var y=0;y<g.children.length;y++){var p=g.children[y];if(e(h,p.region)){r(p,h);return}}for(var A=o(h),y=0;y<g.children.length;y++){var p=g.children[y];e(p.region,h)&&(A.children.push(p),g.children.splice(y,1),y--)}g.children.push(A)}for(var n=0;n<w.regions.length;n++){var c=w.regions[n];c.length<3||r(a,c)}function s(g,h){for(var y=0,p=g[g.length-1][0],A=g[g.length-1][1],m=[],M=0;M<g.length;M++){var x=g[M][0],T=g[M][1];m.push([x,T]),y+=T*p-x*A,p=x,A=T}var _=y<0;return _!==h&&m.reverse(),m.push([m[0][0],m[0][1]]),m}var i=[];function v(g){var h=[s(g.region,!1)];i.push(h);for(var y=0;y<g.children.length;y++)h.push(u(g.children[y]))}function u(g){for(var h=0;h<g.children.length;h++)v(g.children[h]);return s(g.region,!0)}for(var n=0;n<a.children.length;n++)v(a.children[n]);return i.length<=0?{type:"Polygon",coordinates:[]}:i.length==1?{type:"Polygon",coordinates:i[0]}:{type:"MultiPolygon",coordinates:i}}};B.exports=d},{}],258:[function(t,B,H){var d=t("./linked-list");function l(b,w,e){function o(y,p){return{id:e?e.segmentId():-1,start:y,end:p,myFill:{above:null,below:null},otherFill:null}}function a(y,p,A){return{id:e?e.segmentId():-1,start:y,end:p,myFill:{above:A.myFill.above,below:A.myFill.below},otherFill:null}}var r=d.create();function n(y,p,A,m,M,x){var T=w.pointsCompare(p,M);return T!==0?T:w.pointsSame(A,x)?0:y!==m?y?1:-1:w.pointAboveOrOnLine(A,m?M:x,m?x:M)?1:-1}function c(y,p){r.insertBefore(y,function(A){var m=n(y.isStart,y.pt,p,A.isStart,A.pt,A.other.pt);return m<0})}function s(y,p){var A=d.node({isStart:!0,pt:y.start,seg:y,primary:p,other:null,status:null});return c(A,y.end),A}function i(y,p,A){var m=d.node({isStart:!1,pt:p.end,seg:p,primary:A,other:y,status:null});y.other=m,c(m,y.pt)}function v(y,p){var A=s(y,p);return i(A,y,p),A}function u(y,p){e&&e.segmentChop(y.seg,p),y.other.remove(),y.seg.end=p,y.other.pt=p,c(y.other,y.pt)}function g(y,p){var A=a(p,y.seg.end,y.seg);return u(y,p),v(A,y.primary)}function h(y,p){var A=d.create();function m(D,O){var F=D.seg.start,G=D.seg.end,W=O.seg.start,q=O.seg.end;return w.pointsCollinear(F,W,q)?w.pointsCollinear(G,W,q)||w.pointAboveOrOnLine(G,W,q)?1:-1:w.pointAboveOrOnLine(F,W,q)?1:-1}function M(D){return A.findTransition(function(O){var F=m(D,O.ev);return F>0})}function x(D,O){var F=D.seg,G=O.seg,W=F.start,q=F.end,J=G.start,X=G.end;e&&e.checkIntersection(F,G);var Z=w.linesIntersect(W,q,J,X);if(Z===!1){if(!w.pointsCollinear(W,q,J)||w.pointsSame(W,X)||w.pointsSame(q,J))return!1;var se=w.pointsSame(W,J),le=w.pointsSame(q,X);if(se&&le)return O;var oe=!se&&w.pointBetween(W,J,X),U=!le&&w.pointBetween(q,J,X);if(se)return U?g(O,q):g(D,X),O;oe&&(le||(U?g(O,q):g(D,X)),g(O,W))}else Z.alongA===0&&(Z.alongB===-1?g(D,J):Z.alongB===0?g(D,Z.pt):Z.alongB===1&&g(D,X)),Z.alongB===0&&(Z.alongA===-1?g(O,W):Z.alongA===0?g(O,Z.pt):Z.alongA===1&&g(O,q));return!1}for(var T=[];!r.isEmpty();){var _=r.getHead();if(e&&e.vert(_.pt[0]),_.isStart){let D=function(){if(L){var O=x(_,L);if(O)return O}return S?x(_,S):!1};e&&e.segmentNew(_.seg,_.primary);var f=M(_),L=f.before?f.before.ev:null,S=f.after?f.after.ev:null;e&&e.tempStatus(_.seg,L?L.seg:!1,S?S.seg:!1);var k=D();if(k){if(b){var P;_.seg.myFill.below===null?P=!0:P=_.seg.myFill.above!==_.seg.myFill.below,P&&(k.seg.myFill.above=!k.seg.myFill.above)}else k.seg.otherFill=_.seg.myFill;e&&e.segmentUpdate(k.seg),_.other.remove(),_.remove()}if(r.getHead()!==_){e&&e.rewind(_.seg);continue}if(b){var P;_.seg.myFill.below===null?P=!0:P=_.seg.myFill.above!==_.seg.myFill.below,S?_.seg.myFill.below=S.seg.myFill.above:_.seg.myFill.below=y,P?_.seg.myFill.above=!_.seg.myFill.below:_.seg.myFill.above=_.seg.myFill.below}else if(_.seg.otherFill===null){var z;S?_.primary===S.primary?z=S.seg.otherFill.above:z=S.seg.myFill.above:z=_.primary?p:y,_.seg.otherFill={above:z,below:z}}e&&e.status(_.seg,L?L.seg:!1,S?S.seg:!1),_.other.status=f.insert(d.node({ev:_}))}else{var I=_.status;if(I===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(A.exists(I.prev)&&A.exists(I.next)&&x(I.prev.ev,I.next.ev),e&&e.statusRemove(I.ev.seg),I.remove(),!_.primary){var R=_.seg.myFill;_.seg.myFill=_.seg.otherFill,_.seg.otherFill=R}T.push(_.seg)}r.getHead().remove()}return e&&e.done(),T}return b?{addRegion:function(y){for(var p,A=y[y.length-1],m=0;m<y.length;m++){p=A,A=y[m];var M=w.pointsCompare(p,A);M!==0&&v(o(M<0?p:A,M<0?A:p),!0)}},calculate:function(y){return h(y,!1)}}:{calculate:function(y,p,A,m){return y.forEach(function(M){v(a(M.start,M.end,M),!0)}),A.forEach(function(M){v(a(M.start,M.end,M),!1)}),h(p,m)}}}B.exports=l},{"./linked-list":259}],259:[function(t,B,H){var d={create:function(){var l={root:{root:!0,next:null},exists:function(b){return!(b===null||b===l.root)},isEmpty:function(){return l.root.next===null},getHead:function(){return l.root.next},insertBefore:function(b,w){for(var e=l.root,o=l.root.next;o!==null;){if(w(o)){b.prev=o.prev,b.next=o,o.prev.next=b,o.prev=b;return}e=o,o=o.next}e.next=b,b.prev=e,b.next=null},findTransition:function(b){for(var w=l.root,e=l.root.next;e!==null&&!b(e);)w=e,e=e.next;return{before:w===l.root?null:w,after:e,insert:function(o){return o.prev=w,o.next=e,w.next=o,e!==null&&(e.prev=o),o}}}};return l},node:function(l){return l.prev=null,l.next=null,l.remove=function(){l.prev.next=l.next,l.next&&(l.next.prev=l.prev),l.prev=null,l.next=null},l}};B.exports=d},{}],260:[function(t,B,H){function d(l,b,w){var e=[],o=[];return l.forEach(function(a){var r=a.start,n=a.end;if(b.pointsSame(r,n)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}w&&w.chainStart(a);var c={index:0,matches_head:!1,matches_pt1:!1},s={index:0,matches_head:!1,matches_pt1:!1},i=c;function v(z,I,R){return i.index=z,i.matches_head=I,i.matches_pt1=R,i===c?(i=s,!1):(i=null,!0)}for(var u=0;u<e.length;u++){var g=e[u],h=g[0];g[1];var y=g[g.length-1];if(g[g.length-2],b.pointsSame(h,r)){if(v(u,!0,!0))break}else if(b.pointsSame(h,n)){if(v(u,!0,!1))break}else if(b.pointsSame(y,r)){if(v(u,!1,!0))break}else if(b.pointsSame(y,n)&&v(u,!1,!1))break}if(i===c){e.push([r,n]),w&&w.chainNew(r,n);return}if(i===s){w&&w.chainMatch(c.index);var p=c.index,A=c.matches_pt1?n:r,m=c.matches_head,g=e[p],M=m?g[0]:g[g.length-1],x=m?g[1]:g[g.length-2],T=m?g[g.length-1]:g[0],_=m?g[g.length-2]:g[1];if(b.pointsCollinear(x,M,A)&&(m?(w&&w.chainRemoveHead(c.index,A),g.shift()):(w&&w.chainRemoveTail(c.index,A),g.pop()),M=x),b.pointsSame(T,A)){e.splice(p,1),b.pointsCollinear(_,T,M)&&(m?(w&&w.chainRemoveTail(c.index,M),g.pop()):(w&&w.chainRemoveHead(c.index,M),g.shift())),w&&w.chainClose(c.index),o.push(g);return}m?(w&&w.chainAddHead(c.index,A),g.unshift(A)):(w&&w.chainAddTail(c.index,A),g.push(A));return}function f(z){w&&w.chainReverse(z),e[z].reverse()}function L(z,I){var R=e[z],D=e[I],O=R[R.length-1],F=R[R.length-2],G=D[0],W=D[1];b.pointsCollinear(F,O,G)&&(w&&w.chainRemoveTail(z,O),R.pop(),O=F),b.pointsCollinear(O,G,W)&&(w&&w.chainRemoveHead(I,G),D.shift()),w&&w.chainJoin(z,I),e[z]=R.concat(D),e.splice(I,1)}var S=c.index,k=s.index;w&&w.chainConnect(S,k);var P=e[S].length<e[k].length;c.matches_head?s.matches_head?P?(f(S),L(S,k)):(f(k),L(k,S)):L(k,S):s.matches_head?L(S,k):P?(f(S),L(k,S)):(f(k),L(S,k))}),o}B.exports=d},{}],261:[function(t,B,H){function d(b,w,e){var o=[];return b.forEach(function(a){var r=(a.myFill.above?8:0)+(a.myFill.below?4:0)+(a.otherFill&&a.otherFill.above?2:0)+(a.otherFill&&a.otherFill.below?1:0);w[r]!==0&&o.push({id:e?e.segmentId():-1,start:a.start,end:a.end,myFill:{above:w[r]===1,below:w[r]===2},otherFill:null})}),e&&e.selected(o),o}var l={union:function(b,w){return d(b,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],w)},intersect:function(b,w){return d(b,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],w)},difference:function(b,w){return d(b,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],w)},differenceRev:function(b,w){return d(b,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],w)},xor:function(b,w){return d(b,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],w)}};B.exports=l},{}],262:[function(t,B,H){var d=t("stream").Transform,l=t("stream-parser");function b(){d.call(this,{readableObjectMode:!0})}b.prototype=Object.create(d.prototype),b.prototype.constructor=b,l(b.prototype),H.ParserStream=b,H.sliceEq=function(e,o,a){for(var r=o,n=0;n<a.length;)if(e[r++]!==a[n++])return!1;return!0},H.str2arr=function(e,o){var a=[],r=0;if(o&&o==="hex")for(;r<e.length;)a.push(parseInt(e.slice(r,r+2),16)),r+=2;else for(;r<e.length;r++)a.push(e.charCodeAt(r)&255);return a},H.readUInt16LE=function(e,o){return e[o]|e[o+1]<<8},H.readUInt16BE=function(e,o){return e[o+1]|e[o]<<8},H.readUInt32LE=function(e,o){return e[o]|e[o+1]<<8|e[o+2]<<16|e[o+3]*16777216},H.readUInt32BE=function(e,o){return e[o+3]|e[o+2]<<8|e[o+1]<<16|e[o]*16777216};function w(e,o,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name=this.constructor.name,this.message=e,o&&(this.code=o),a&&(this.statusCode=a)}w.prototype=Object.create(Error.prototype),w.prototype.constructor=w,H.ProbeError=w},{stream:285,"stream-parser":301}],263:[function(t,B,H){function d(w,e){var o=new Error(w);return o.code=e,o}function l(w){try{return decodeURIComponent(escape(w))}catch{return w}}function b(w,e,o){this.input=w.subarray(e,o),this.start=e;var a=String.fromCharCode.apply(null,this.input.subarray(0,4));if(a!=="II*\0"&&a!=="MM\0*")throw d("invalid TIFF signature","EBADDATA");this.big_endian=a[0]==="M"}b.prototype.each=function(w){this.aborted=!1;var e=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:e}];this.ifds_to_read.length>0&&!this.aborted;){var o=this.ifds_to_read.shift();!o.offset||this.scan_ifd(o.id,o.offset,w)}},b.prototype.read_uint16=function(w){var e=this.input;if(w+2>e.length)throw d("unexpected EOF","EBADDATA");return this.big_endian?e[w]*256+e[w+1]:e[w]+e[w+1]*256},b.prototype.read_uint32=function(w){var e=this.input;if(w+4>e.length)throw d("unexpected EOF","EBADDATA");return this.big_endian?e[w]*16777216+e[w+1]*65536+e[w+2]*256+e[w+3]:e[w]+e[w+1]*256+e[w+2]*65536+e[w+3]*16777216},b.prototype.is_subifd_link=function(w,e){return w===0&&e===34665||w===0&&e===34853||w===34665&&e===40965},b.prototype.exif_format_length=function(w){switch(w){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},b.prototype.exif_format_read=function(w,e){var o;switch(w){case 1:case 2:return o=this.input[e],o;case 6:return o=this.input[e],o|(o&128)*33554430;case 3:return o=this.read_uint16(e),o;case 8:return o=this.read_uint16(e),o|(o&32768)*131070;case 4:return o=this.read_uint32(e),o;case 9:return o=this.read_uint32(e),o|0;case 5:case 10:case 11:case 12:return null;case 7:return null;default:return null}},b.prototype.scan_ifd=function(w,e,o){var a=this.read_uint16(e);e+=2;for(var r=0;r<a;r++){var n=this.read_uint16(e),c=this.read_uint16(e+2),s=this.read_uint32(e+4),i=this.exif_format_length(c),v=s*i,u=v<=4?e+8:this.read_uint32(e+8),g=!1;if(u+v>this.input.length)throw d("unexpected EOF","EBADDATA");for(var h=[],y=u,p=0;p<s;p++,y+=i){var A=this.exif_format_read(c,y);if(A===null){h=null;break}h.push(A)}Array.isArray(h)&&c===2&&(h=l(String.fromCharCode.apply(null,h)),h&&h[h.length-1]==="\0"&&(h=h.slice(0,-1))),this.is_subifd_link(w,n)&&Array.isArray(h)&&Number.isInteger(h[0])&&h[0]>0&&(this.ifds_to_read.push({id:n,offset:h[0]}),g=!0);var m={is_big_endian:this.big_endian,ifd:w,tag:n,format:c,count:s,entry_offset:e+this.start,data_length:v,data_offset:u+this.start,value:h,is_subifd_link:g};if(o(m)===!1){this.aborted=!0;return}e+=12}w===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(e)})},B.exports.ExifParser=b,B.exports.get_orientation=function(w){var e=0;try{return new b(w,0,w.length).each(function(o){if(o.ifd===0&&o.tag===274&&Array.isArray(o.value))return e=o.value[0],!1}),e}catch{return-1}}},{}],264:[function(t,B,H){var d=t("./common").readUInt16BE,l=t("./common").readUInt32BE;function b(s,i){if(s.length<4+i)return null;var v=l(s,i);return s.length<v+i||v<8?null:{boxtype:String.fromCharCode.apply(null,s.slice(i+4,i+8)),data:s.slice(i+8,i+v),end:i+v}}B.exports.unbox=b;function w(s,i){for(var v=0;;){var u=b(s,v);if(!u)break;switch(u.boxtype){case"ispe":i.sizes.push({width:l(u.data,4),height:l(u.data,8)});break;case"irot":i.transforms.push({type:"irot",value:u.data[0]&3});break;case"imir":i.transforms.push({type:"imir",value:u.data[0]&1});break}v=u.end}}function e(s,i,v){for(var u=0,g=0;g<v;g++)u=u*256+(s[i+g]||0);return u}function o(s,i){for(var v=s[4]>>4&15,u=s[4]&15,g=s[5]>>4&15,h=d(s,6),y=8,p=0;p<h;p++){var A=d(s,y);y+=2;var m=d(s,y);y+=2;var M=e(s,y,g);y+=g;var x=d(s,y);if(y+=2,m===0&&x===1){var T=e(s,y,v),_=e(s,y+v,u);i.item_loc[A]={length:_,offset:T+M}}y+=x*(v+u)}}function a(s,i){for(var v=d(s,4),u=6,g=0;g<v;g++){var h=b(s,u);if(!h)break;if(h.boxtype==="infe"){for(var y=d(h.data,4),p="",A=8;A<h.data.length&&h.data[A];A++)p+=String.fromCharCode(h.data[A]);i.item_inf[p]=y}u=h.end}}function r(s,i){for(var v=0;;){var u=b(s,v);if(!u)break;u.boxtype==="ipco"&&w(u.data,i),v=u.end}}function n(s,i){for(var v=4;;){var u=b(s,v);if(!u)break;u.boxtype==="iprp"&&r(u.data,i),u.boxtype==="iloc"&&o(u.data,i),u.boxtype==="iinf"&&a(u.data,i),v=u.end}}function c(s){var i=s.reduce(function(g,h){return g.width>h.width||g.width===h.width&&g.height>h.height?g:h}),v=s.reduce(function(g,h){return g.height>h.height||g.height===h.height&&g.width>h.width?g:h}),u;return i.width>v.height||i.width===v.height&&i.height>v.width?u=i:u=v,u}B.exports.readSizeFromMeta=function(s){var i={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(n(s,i),!!i.sizes.length){var v=c(i.sizes),u=1;i.transforms.forEach(function(h){var y={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},p={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(h.type==="imir"&&(h.value===0?u=p[u]:(u=p[u],u=y[u],u=y[u])),h.type==="irot")for(var A=0;A<h.value;A++)u=y[u]});var g=null;return i.item_inf.Exif&&(g=i.item_loc[i.item_inf.Exif]),{width:v.width,height:v.height,orientation:i.transforms.length?u:null,variants:i.sizes,exif_location:g}}},B.exports.getMimeType=function(s){var i=String.fromCharCode.apply(null,s.slice(0,4)),v={};v[i]=!0;for(var u=8;u<s.length;u+=4)v[String.fromCharCode.apply(null,s.slice(u,u+4))]=!0;if(!(!v.mif1&&!v.msf1&&!v.miaf))return i==="avif"||i==="avis"||i==="avio"?{type:"avif",mime:"image/avif"}:i==="heic"||i==="heix"?{type:"heic",mime:"image/heic"}:i==="hevc"||i==="hevx"?{type:"heic",mime:"image/heic-sequence"}:v.avif||v.avis?{type:"avif",mime:"image/avif"}:v.heic||v.heix||v.hevc||v.hevx||v.heis?v.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},{"./common":262}],265:[function(t,B,H){var d=t("../common").str2arr,l=t("../common").sliceEq,b=t("../common").readUInt32BE,w=t("../miaf_utils"),e=t("../exif_utils"),o=d("ftyp");B.exports=function(a){if(!!l(a,4,o)){var r=w.unbox(a,0);if(!!r){var n=w.getMimeType(r.data);if(!!n){for(var c,s=r.end;;){var i=w.unbox(a,s);if(!i)break;if(s=i.end,i.boxtype==="mdat")return;if(i.boxtype==="meta"){c=i.data;break}}if(!!c){var v=w.readSizeFromMeta(c);if(!!v){var u={width:v.width,height:v.height,type:n.type,mime:n.mime,wUnits:"px",hUnits:"px"};if(v.variants.length>1&&(u.variants=v.variants),v.orientation&&(u.orientation=v.orientation),v.exif_location&&v.exif_location.offset+v.exif_location.length<=a.length){var g=b(a,v.exif_location.offset),h=a.slice(v.exif_location.offset+g+4,v.exif_location.offset+v.exif_location.length),y=e.get_orientation(h);y>0&&(u.orientation=y)}return u}}}}}}},{"../common":262,"../exif_utils":263,"../miaf_utils":264}],266:[function(t,B,H){var d=t("../common").str2arr,l=t("../common").sliceEq,b=t("../common").readUInt16LE,w=d("BM");B.exports=function(e){if(!(e.length<26)&&!!l(e,0,w))return{width:b(e,18),height:b(e,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":262}],267:[function(t,B,H){var d=t("../common").str2arr,l=t("../common").sliceEq,b=t("../common").readUInt16LE,w=d("GIF87a"),e=d("GIF89a");B.exports=function(o){if(!(o.length<10)&&!(!l(o,0,w)&&!l(o,0,e)))return{width:b(o,6),height:b(o,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":262}],268:[function(t,B,H){var d=t("../common").readUInt16LE,l=0,b=1,w=16;B.exports=function(e){var o=d(e,0),a=d(e,2),r=d(e,4);if(!(o!==l||a!==b||!r)){for(var n=[],c={width:0,height:0},s=0;s<r;s++){var i=e[6+w*s]||256,v=e[6+w*s+1]||256,u={width:i,height:v};n.push(u),(i>c.width||v>c.height)&&(c=u)}return{width:c.width,height:c.height,variants:n,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},{"../common":262}],269:[function(t,B,H){var d=t("../common").readUInt16BE,l=t("../common").str2arr,b=t("../common").sliceEq,w=t("../exif_utils"),e=l("Exif\0\0");B.exports=function(o){if(!(o.length<2)&&!(o[0]!==255||o[1]!==216||o[2]!==255))for(var a=2;;){for(;;){if(o.length-a<2)return;if(o[a++]===255)break}for(var r=o[a++],n;r===255;)r=o[a++];if(208<=r&&r<=217||r===1)n=0;else if(192<=r&&r<=254){if(o.length-a<2)return;n=d(o,a)-2,a+=2}else return;if(r===217||r===218)return;var c;if(r===225&&n>=10&&b(o,a,e)&&(c=w.get_orientation(o.slice(a+6,a+n))),n>=5&&192<=r&&r<=207&&r!==196&&r!==200&&r!==204){if(o.length-a<n)return;var s={width:d(o,a+3),height:d(o,a+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return c>0&&(s.orientation=c),s}a+=n}}},{"../common":262,"../exif_utils":263}],270:[function(t,B,H){var d=t("../common").str2arr,l=t("../common").sliceEq,b=t("../common").readUInt32BE,w=d(`\x89PNG\r

`),e=d("IHDR");B.exports=function(o){if(!(o.length<24)&&!!l(o,0,w)&&!!l(o,12,e))return{width:b(o,16),height:b(o,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":262}],271:[function(t,B,H){var d=t("../common").str2arr,l=t("../common").sliceEq,b=t("../common").readUInt32BE,w=d("8BPS\0");B.exports=function(e){if(!(e.length<6+16)&&!!l(e,0,w))return{width:b(e,6+12),height:b(e,6+8),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":262}],272:[function(t,B,H){function d(i){return i===32||i===9||i===13||i===10}function l(i){return typeof i=="number"&&isFinite(i)&&i>0}function b(i){var v=0,u=i.length;for(i[0]===239&&i[1]===187&&i[2]===191&&(v=3);v<u&&d(i[v]);)v++;return v===u?!1:i[v]===60}var w=/<[-_.:a-zA-Z0-9][^>]*>/,e=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,o=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,a=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,r=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,n=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function c(i){var v=i.match(o),u=i.match(a),g=i.match(r);return{width:v&&(v[1]||v[2]),height:u&&(u[1]||u[2]),viewbox:g&&(g[1]||g[2])}}function s(i){return n.test(i)?i.match(n)[0]:"px"}B.exports=function(i){if(!!b(i)){for(var v="",u=0;u<i.length;u++)v+=String.fromCharCode(i[u]);var g=(v.match(w)||[""])[0];if(!!e.test(g)){var h=c(g),y=parseFloat(h.width),p=parseFloat(h.height);if(h.width&&h.height)return!l(y)||!l(p)?void 0:{width:y,height:p,type:"svg",mime:"image/svg+xml",wUnits:s(h.width),hUnits:s(h.height)};var A=(h.viewbox||"").split(" "),m={width:A[2],height:A[3]},M=parseFloat(m.width),x=parseFloat(m.height);if(!(!l(M)||!l(x))&&s(m.width)===s(m.height)){var T=M/x;return h.width?l(y)?{width:y,height:y/T,type:"svg",mime:"image/svg+xml",wUnits:s(h.width),hUnits:s(h.width)}:void 0:h.height?l(p)?{width:p*T,height:p,type:"svg",mime:"image/svg+xml",wUnits:s(h.height),hUnits:s(h.height)}:void 0:{width:M,height:x,type:"svg",mime:"image/svg+xml",wUnits:s(m.width),hUnits:s(m.height)}}}}}},{}],273:[function(t,B,H){var d=t("../common").str2arr,l=t("../common").sliceEq,b=t("../common").readUInt16LE,w=t("../common").readUInt16BE,e=t("../common").readUInt32LE,o=t("../common").readUInt32BE,a=d("II*\0"),r=d("MM\0*");function n(i,v,u){return u?w(i,v):b(i,v)}function c(i,v,u){return u?o(i,v):e(i,v)}function s(i,v,u){var g=n(i,v+2,u),h=c(i,v+4,u);return h!==1||g!==3&&g!==4?null:g===3?n(i,v+8,u):c(i,v+8,u)}B.exports=function(i){if(!(i.length<8)&&!(!l(i,0,a)&&!l(i,0,r))){var v=i[0]===77,u=c(i,4,v)-8;if(!(u<0)){var g=u+8;if(!(i.length-g<2)){var h=n(i,g+0,v)*12;if(!(h<=0)&&(g+=2,!(i.length-g<h))){var y,p,A,m;for(y=0;y<h;y+=12)m=n(i,g+y,v),m===256?p=s(i,g+y,v):m===257&&(A=s(i,g+y,v));if(p&&A)return{width:p,height:A,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}}}}}}},{"../common":262}],274:[function(t,B,H){var d=t("../common").str2arr,l=t("../common").sliceEq,b=t("../common").readUInt16LE,w=t("../common").readUInt32LE,e=t("../exif_utils"),o=d("RIFF"),a=d("WEBP");function r(s,i){if(!(s[i+3]!==157||s[i+4]!==1||s[i+5]!==42))return{width:b(s,i+6)&16383,height:b(s,i+8)&16383,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function n(s,i){if(s[i]===47){var v=w(s,i+1);return{width:(v&16383)+1,height:(v>>14&16383)+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function c(s,i){return{width:(s[i+6]<<16|s[i+5]<<8|s[i+4])+1,height:(s[i+9]<<i|s[i+8]<<8|s[i+7])+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}B.exports=function(s){if(!(s.length<16)&&!(!l(s,0,o)&&!l(s,8,a))){var i=12,v=null,u=0,g=w(s,4)+8;if(!(g>s.length)){for(;i+8<g;){if(s[i]===0){i++;continue}var h=String.fromCharCode.apply(null,s.slice(i,i+4)),y=w(s,i+4);h==="VP8 "&&y>=10?v=v||r(s,i+8):h==="VP8L"&&y>=9?v=v||n(s,i+8):h==="VP8X"&&y>=10?v=v||c(s,i+8):h==="EXIF"&&(u=e.get_orientation(s.slice(i+8,i+8+y)),i=1/0),i+=8+y}if(!!v)return u>0&&(v.orientation=u),v}}}},{"../common":262,"../exif_utils":263}],275:[function(t,B,H){B.exports={avif:t("./parse_sync/avif"),bmp:t("./parse_sync/bmp"),gif:t("./parse_sync/gif"),ico:t("./parse_sync/ico"),jpeg:t("./parse_sync/jpeg"),png:t("./parse_sync/png"),psd:t("./parse_sync/psd"),svg:t("./parse_sync/svg"),tiff:t("./parse_sync/tiff"),webp:t("./parse_sync/webp")}},{"./parse_sync/avif":265,"./parse_sync/bmp":266,"./parse_sync/gif":267,"./parse_sync/ico":268,"./parse_sync/jpeg":269,"./parse_sync/png":270,"./parse_sync/psd":271,"./parse_sync/svg":272,"./parse_sync/tiff":273,"./parse_sync/webp":274}],276:[function(t,B,H){var d=t("./lib/parsers_sync");function l(b){for(var w=Object.keys(d),e=0;e<w.length;e++){var o=d[w[e]](b);if(o)return o}return null}B.exports=function(w){return l(w)},B.exports.parsers=d},{"./lib/parsers_sync":275}],277:[function(t,B,H){var d=B.exports={},l,b;function w(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?l=setTimeout:l=w}catch{l=w}try{typeof clearTimeout=="function"?b=clearTimeout:b=e}catch{b=e}})();function o(h){if(l===setTimeout)return setTimeout(h,0);if((l===w||!l)&&setTimeout)return l=setTimeout,setTimeout(h,0);try{return l(h,0)}catch{try{return l.call(null,h,0)}catch{return l.call(this,h,0)}}}function a(h){if(b===clearTimeout)return clearTimeout(h);if((b===e||!b)&&clearTimeout)return b=clearTimeout,clearTimeout(h);try{return b(h)}catch{try{return b.call(null,h)}catch{return b.call(this,h)}}}var r=[],n=!1,c,s=-1;function i(){!n||!c||(n=!1,c.length?r=c.concat(r):s=-1,r.length&&v())}function v(){if(!n){var h=o(i);n=!0;for(var y=r.length;y;){for(c=r,r=[];++s<y;)c&&c[s].run();s=-1,y=r.length}c=null,n=!1,a(h)}}d.nextTick=function(h){var y=new Array(arguments.length-1);if(arguments.length>1)for(var p=1;p<arguments.length;p++)y[p-1]=arguments[p];r.push(new u(h,y)),r.length===1&&!n&&o(v)};function u(h,y){this.fun=h,this.array=y}u.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={};function g(){}d.on=g,d.addListener=g,d.once=g,d.off=g,d.removeListener=g,d.removeAllListeners=g,d.emit=g,d.prependListener=g,d.prependOnceListener=g,d.listeners=function(h){return[]},d.binding=function(h){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(h){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],278:[function(t,B,H){(function(d){(function(){for(var l=t("performance-now"),b=typeof window=="undefined"?d:window,w=["moz","webkit"],e="AnimationFrame",o=b["request"+e],a=b["cancel"+e]||b["cancelRequest"+e],r=0;!o&&r<w.length;r++)o=b[w[r]+"Request"+e],a=b[w[r]+"Cancel"+e]||b[w[r]+"CancelRequest"+e];if(!o||!a){var n=0,c=0,s=[],i=1e3/60;o=function(v){if(s.length===0){var u=l(),g=Math.max(0,i-(u-n));n=g+u,setTimeout(function(){var h=s.slice(0);s.length=0;for(var y=0;y<h.length;y++)if(!h[y].cancelled)try{h[y].callback(n)}catch(p){setTimeout(function(){throw p},0)}},Math.round(g))}return s.push({handle:++c,callback:v,cancelled:!1}),c},a=function(v){for(var u=0;u<s.length;u++)s[u].handle===v&&(s[u].cancelled=!0)}}B.exports=function(v){return o.call(b,v)},B.exports.cancel=function(){a.apply(b,arguments)},B.exports.polyfill=function(v){v||(v=b),v.requestAnimationFrame=o,v.cancelAnimationFrame=a}}).call(this)}).call(this,typeof Ao!="undefined"?Ao:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"performance-now":252}],279:[function(t,B,H){var d=t("array-bounds"),l=t("color-normalize"),b=t("update-diff"),w=t("pick-by-alias"),e=t("object-assign"),o=t("flatten-vertex-data"),a=t("to-float32"),r=a.float32,n=a.fract32;B.exports=s;var c=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]];function s(i,v){if(typeof i=="function"?(v||(v={}),v.regl=i):v=i,v.length&&(v.positions=v),i=v.regl,!i.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var u=i._gl,g,h,y,p,A,m,M={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},x=[];return p=i.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),h=i.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),y=i.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),A=i.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),m=i.buffer({usage:"static",type:"float",data:c}),L(v),g=i({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:i.prop("range"),lineWidth:i.prop("lineWidth"),capSize:i.prop("capSize"),opacity:i.prop("opacity"),scale:i.prop("scale"),translate:i.prop("translate"),scaleFract:i.prop("scaleFract"),translateFract:i.prop("translateFract"),viewport:function(k,P){return[P.viewport.x,P.viewport.y,k.viewportWidth,k.viewportHeight]}},attributes:{color:{buffer:p,offset:function(k,P){return P.offset*4},divisor:1},position:{buffer:h,offset:function(k,P){return P.offset*8},divisor:1},positionFract:{buffer:y,offset:function(k,P){return P.offset*8},divisor:1},error:{buffer:A,offset:function(k,P){return P.offset*16},divisor:1},direction:{buffer:m,stride:24,offset:0},lineOffset:{buffer:m,stride:24,offset:8},capOffset:{buffer:m,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:i.prop("viewport")},viewport:i.prop("viewport"),stencil:!1,instances:i.prop("count"),count:c.length}),e(T,{update:L,draw:_,destroy:S,regl:i,gl:u,canvas:u.canvas,groups:x}),T;function T(k){k?L(k):k===null&&S(),_()}function _(k){if(typeof k=="number")return f(k);k&&!Array.isArray(k)&&(k=[k]),i._refresh(),x.forEach(function(P,z){if(!!P){if(k&&(k[z]?P.draw=!0:P.draw=!1),!P.draw){P.draw=!0;return}f(z)}})}function f(k){typeof k=="number"&&(k=x[k]),k!=null&&(!(k&&k.count&&k.color&&k.opacity&&k.positions&&k.positions.length>1)||(k.scaleRatio=[k.scale[0]*k.viewport.width,k.scale[1]*k.viewport.height],g(k),k.after&&k.after(k)))}function L(k){if(!!k){k.length!=null?typeof k[0]=="number"&&(k=[{positions:k}]):Array.isArray(k)||(k=[k]);var P=0,z=0;if(T.groups=x=k.map(function(W,q){var J=x[q];if(W)typeof W=="function"?W={after:W}:typeof W[0]=="number"&&(W={positions:W});else return J;return W=w(W,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),J||(x[q]=J={id:q,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},W=e({},M,W)),b(J,W,[{lineWidth:function(X){return+X*.5},capSize:function(X){return+X*.5},opacity:parseFloat,errors:function(X){return X=o(X),z+=X.length,X},positions:function(X,Z){return X=o(X,"float64"),Z.count=Math.floor(X.length/2),Z.bounds=d(X,2),Z.offset=P,P+=Z.count,X}},{color:function(X,Z){var se=Z.count;if(X||(X="transparent"),!Array.isArray(X)||typeof X[0]=="number"){var le=X;X=Array(se);for(var oe=0;oe<se;oe++)X[oe]=le}if(X.length<se)throw Error("Not enough colors");for(var U=new Uint8Array(se*4),V=0;V<se;V++){var re=l(X[V],"uint8");U.set(re,V*4)}return U},range:function(X,Z,se){var le=Z.bounds;return X||(X=le),Z.scale=[1/(X[2]-X[0]),1/(X[3]-X[1])],Z.translate=[-X[0],-X[1]],Z.scaleFract=n(Z.scale),Z.translateFract=n(Z.translate),X},viewport:function(X){var Z;return Array.isArray(X)?Z={x:X[0],y:X[1],width:X[2]-X[0],height:X[3]-X[1]}:X?(Z={x:X.x||X.left||0,y:X.y||X.top||0},X.right?Z.width=X.right-Z.x:Z.width=X.w||X.width||0,X.bottom?Z.height=X.bottom-Z.y:Z.height=X.h||X.height||0):Z={x:0,y:0,width:u.drawingBufferWidth,height:u.drawingBufferHeight},Z}}]),J}),P||z){var I=x.reduce(function(W,q,J){return W+(q?q.count:0)},0),R=new Float64Array(I*2),D=new Uint8Array(I*4),O=new Float32Array(I*4);x.forEach(function(W,q){if(!!W){var J=W.positions,X=W.count,Z=W.offset,se=W.color,le=W.errors;!X||(D.set(se,Z*4),O.set(le,Z*4),R.set(J,Z*2))}});var F=r(R);h(F);var G=n(R,F);y(G),p(D),A(O)}}}function S(){h.destroy(),y.destroy(),p.destroy(),A.destroy(),m.destroy()}}},{"array-bounds":71,"color-normalize":89,"flatten-vertex-data":191,"object-assign":247,"pick-by-alias":253,"to-float32":313,"update-diff":329}],280:[function(t,B,H){var d=t("color-normalize"),l=t("array-bounds"),b=t("object-assign"),w=t("glslify"),e=t("pick-by-alias"),o=t("flatten-vertex-data"),a=t("earcut"),r=t("array-normalize"),n=t("to-float32"),c=n.float32,s=n.fract32,i=t("es6-weak-map"),v=t("parse-rect"),u=t("array-find-index");B.exports=g;function g(h,y){if(!(this instanceof g))return new g(h,y);if(typeof h=="function"?(y||(y={}),y.regl=h):y=h,y.length&&(y.positions=y),h=y.regl,!h.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=h._gl,this.regl=h,this.passes=[],this.shaders=g.shaders.has(h)?g.shaders.get(h):g.shaders.set(h,g.createShaders(h)).get(h),this.update(y)}g.dashMult=2,g.maxPatternLength=256,g.precisionThreshold=3e6,g.maxPoints=1e4,g.maxLines=2048,g.shaders=new i,g.createShaders=function(h){var y=h.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),p={primitive:"triangle strip",instances:h.prop("count"),count:4,offset:0,uniforms:{miterMode:function(x,T){return T.join==="round"?2:1},miterLimit:h.prop("miterLimit"),scale:h.prop("scale"),scaleFract:h.prop("scaleFract"),translateFract:h.prop("translateFract"),translate:h.prop("translate"),thickness:h.prop("thickness"),dashTexture:h.prop("dashTexture"),opacity:h.prop("opacity"),pixelRatio:h.context("pixelRatio"),id:h.prop("id"),dashLength:h.prop("dashLength"),viewport:function(x,T){return[T.viewport.x,T.viewport.y,x.viewportWidth,x.viewportHeight]},depth:h.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(x,T){return!T.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:h.prop("viewport")},viewport:h.prop("viewport")},A=h(b({vert:w([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`]),frag:w([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:y,divisor:0,stride:8,offset:0},lineTop:{buffer:y,divisor:0,stride:8,offset:4},aCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:h.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:h.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:h.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},p)),m;try{m=h(b({cull:{enable:!0,face:"back"},vert:w([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);

	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`]),frag:w([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:y,divisor:0,stride:8,offset:0},lineTop:{buffer:y,divisor:0,stride:8,offset:4},aColor:{buffer:h.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:h.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},p))}catch{m=A}var M=h({primitive:"triangle",elements:function(x,T){return T.triangles},offset:0,vert:w([`precision highp float;
#define GLSLIFY 1

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`]),frag:w([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`]),uniforms:{scale:h.prop("scale"),color:h.prop("fill"),scaleFract:h.prop("scaleFract"),translateFract:h.prop("translateFract"),translate:h.prop("translate"),opacity:h.prop("opacity"),pixelRatio:h.context("pixelRatio"),id:h.prop("id"),viewport:function(x,T){return[T.viewport.x,T.viewport.y,x.viewportWidth,x.viewportHeight]}},attributes:{position:{buffer:h.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:h.prop("positionFractBuffer"),stride:8,offset:8}},blend:p.blend,depth:{enable:!1},scissor:p.scissor,stencil:p.stencil,viewport:p.viewport});return{fill:M,rect:A,miter:m}},g.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},g.prototype.render=function(){for(var h,y=[],p=arguments.length;p--;)y[p]=arguments[p];y.length&&(h=this).update.apply(h,y),this.draw()},g.prototype.draw=function(){for(var h=this,y=[],p=arguments.length;p--;)y[p]=arguments[p];return(y.length?y:this.passes).forEach(function(A,m){var M;if(A&&Array.isArray(A))return(M=h).draw.apply(M,A);typeof A=="number"&&(A=h.passes[A]),A&&A.count>1&&A.opacity&&(h.regl._refresh(),A.fill&&A.triangles&&A.triangles.length>2&&h.shaders.fill(A),A.thickness&&(A.scale[0]*A.viewport.width>g.precisionThreshold||A.scale[1]*A.viewport.height>g.precisionThreshold||A.join==="rect"||!A.join&&(A.thickness<=2||A.count>=g.maxPoints)?h.shaders.rect(A):h.shaders.miter(A)))}),this},g.prototype.update=function(h){var y=this;if(!!h){h.length!=null?typeof h[0]=="number"&&(h=[{positions:h}]):Array.isArray(h)||(h=[h]);var p=this,A=p.regl,m=p.gl;if(h.forEach(function(f,L){var S=y.passes[L];if(f!==void 0){if(f===null){y.passes[L]=null;return}if(typeof f[0]=="number"&&(f={positions:f}),f=e(f,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),S||(y.passes[L]=S={id:L,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:A.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:A.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:A.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:A.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},f=b({},g.defaults,f)),f.thickness!=null&&(S.thickness=parseFloat(f.thickness)),f.opacity!=null&&(S.opacity=parseFloat(f.opacity)),f.miterLimit!=null&&(S.miterLimit=parseFloat(f.miterLimit)),f.overlay!=null&&(S.overlay=!!f.overlay,L<g.maxLines&&(S.depth=2*(g.maxLines-1-L%g.maxLines)/g.maxLines-1)),f.join!=null&&(S.join=f.join),f.hole!=null&&(S.hole=f.hole),f.fill!=null&&(S.fill=f.fill?d(f.fill,"uint8"):null),f.viewport!=null&&(S.viewport=v(f.viewport)),S.viewport||(S.viewport=v([m.drawingBufferWidth,m.drawingBufferHeight])),f.close!=null&&(S.close=f.close),f.positions===null&&(f.positions=[]),f.positions){var k,P;if(f.positions.x&&f.positions.y){var z=f.positions.x,I=f.positions.y;P=S.count=Math.max(z.length,I.length),k=new Float64Array(P*2);for(var R=0;R<P;R++)k[R*2]=z[R],k[R*2+1]=I[R]}else k=o(f.positions,"float64"),P=S.count=Math.floor(k.length/2);var D=S.bounds=l(k,2);if(S.fill){for(var O=[],F={},G=0,W=0,q=0,J=S.count;W<J;W++){var X=k[W*2],Z=k[W*2+1];isNaN(X)||isNaN(Z)||X==null||Z==null?(X=k[G*2],Z=k[G*2+1],F[W]=G):G=W,O[q++]=X,O[q++]=Z}if(f.splitNull){S.count-1 in F||(F[S.count]=S.count-1);var se=Object.keys(F).map(Number).sort(function(it,ht){return it-ht}),le=[],oe=0,U=S.hole!=null?S.hole[0]:null;if(U!=null){var V=u(se,function(it){return it>=U});se=se.slice(0,V),se.push(U)}for(var re=function(it){var ht=O.slice(oe*2,se[it]*2).concat(U?O.slice(U*2):[]),Qe=(S.hole||[]).map(function(je){return je-U+(se[it]-oe)}),Ce=a(ht,Qe);Ce=Ce.map(function(je){return je+oe+(je+oe<se[it]?0:U-se[it])}),le.push.apply(le,Ce),oe=se[it]+1},ee=0;ee<se.length;ee++)re(ee);for(var j=0,Q=le.length;j<Q;j++)F[le[j]]!=null&&(le[j]=F[le[j]]);S.triangles=le}else{for(var ne=a(O,S.hole||[]),ae=0,ie=ne.length;ae<ie;ae++)F[ne[ae]]!=null&&(ne[ae]=F[ne[ae]]);S.triangles=ne}}var ue=new Float64Array(k);r(ue,2,D);var xe=new Float64Array(P*2+6);S.close?k[0]===k[P*2-2]&&k[1]===k[P*2-1]?(xe[0]=ue[P*2-4],xe[1]=ue[P*2-3]):(xe[0]=ue[P*2-2],xe[1]=ue[P*2-1]):(xe[0]=ue[0],xe[1]=ue[1]),xe.set(ue,2),S.close?k[0]===k[P*2-2]&&k[1]===k[P*2-1]?(xe[P*2+2]=ue[2],xe[P*2+3]=ue[3],S.count-=1):(xe[P*2+2]=ue[0],xe[P*2+3]=ue[1],xe[P*2+4]=ue[2],xe[P*2+5]=ue[3]):(xe[P*2+2]=ue[P*2-2],xe[P*2+3]=ue[P*2-1],xe[P*2+4]=ue[P*2-2],xe[P*2+5]=ue[P*2-1]);var he=c(xe);S.positionBuffer(he);var ge=s(xe,he);S.positionFractBuffer(ge)}if(f.range?S.range=f.range:S.range||(S.range=S.bounds),(f.range||f.positions)&&S.count){var me=S.bounds,ke=me[2]-me[0],Ae=me[3]-me[1],Ne=S.range[2]-S.range[0],He=S.range[3]-S.range[1];S.scale=[ke/Ne,Ae/He],S.translate=[-S.range[0]/Ne+me[0]/Ne||0,-S.range[1]/He+me[1]/He||0],S.scaleFract=s(S.scale),S.translateFract=s(S.translate)}if(f.dashes){var Ge=0,_e;if(!f.dashes||f.dashes.length<2)Ge=1,_e=new Uint8Array([255,255,255,255,255,255,255,255]);else{Ge=0;for(var De=0;De<f.dashes.length;++De)Ge+=f.dashes[De];_e=new Uint8Array(Ge*g.dashMult);for(var Ye=0,qe=255,Ue=0;Ue<2;Ue++)for(var Ie=0;Ie<f.dashes.length;++Ie){for(var Ve=0,dt=f.dashes[Ie]*g.dashMult*.5;Ve<dt;++Ve)_e[Ye++]=qe;qe^=255}}S.dashLength=Ge,S.dashTexture({channels:1,data:_e,width:_e.length,height:1,mag:"linear",min:"linear"},0,0)}if(f.color){var Dt=S.count,Yt=f.color;Yt||(Yt="transparent");var kt=new Uint8Array(Dt*4+4);if(!Array.isArray(Yt)||typeof Yt[0]=="number")for(var Ft=d(Yt,"uint8"),Nt=0;Nt<Dt+1;Nt++)kt.set(Ft,Nt*4);else{for(var Lt=0;Lt<Dt;Lt++){var St=d(Yt[Lt],"uint8");kt.set(St,Lt*4)}kt.set(d(Yt[0],"uint8"),Dt*4)}S.colorBuffer({usage:"dynamic",type:"uint8",data:kt})}}}),h.length<this.passes.length){for(var M=h.length;M<this.passes.length;M++){var x=this.passes[M];!x||(x.colorBuffer.destroy(),x.positionBuffer.destroy(),x.dashTexture.destroy())}this.passes.length=h.length}for(var T=[],_=0;_<this.passes.length;_++)this.passes[_]!==null&&T.push(this.passes[_]);return this.passes=T,this}},g.prototype.destroy=function(){return this.passes.forEach(function(h){h.colorBuffer.destroy(),h.positionBuffer.destroy(),h.dashTexture.destroy()}),this.passes.length=0,this}},{"array-bounds":71,"array-find-index":72,"array-normalize":73,"color-normalize":89,earcut:129,"es6-weak-map":183,"flatten-vertex-data":191,glslify:227,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":313}],281:[function(t,B,H){function d(S,k){return w(S)||o(S,k)||a(S,k)||c()}function l(S){return b(S)||e(S)||a(S)||n()}function b(S){if(Array.isArray(S))return r(S)}function w(S){if(Array.isArray(S))return S}function e(S){if(typeof Symbol!="undefined"&&S[Symbol.iterator]!=null||S["@@iterator"]!=null)return Array.from(S)}function o(S,k){var P=S==null?null:typeof Symbol!="undefined"&&S[Symbol.iterator]||S["@@iterator"];if(P!=null){var z=[],I=!0,R=!1,D,O;try{for(P=P.call(S);!(I=(D=P.next()).done)&&(z.push(D.value),!(k&&z.length===k));I=!0);}catch(F){R=!0,O=F}finally{try{!I&&P.return!=null&&P.return()}finally{if(R)throw O}}return z}}function a(S,k){if(!!S){if(typeof S=="string")return r(S,k);var P=Object.prototype.toString.call(S).slice(8,-1);if(P==="Object"&&S.constructor&&(P=S.constructor.name),P==="Map"||P==="Set")return Array.from(S);if(P==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(P))return r(S,k)}}function r(S,k){(k==null||k>S.length)&&(k=S.length);for(var P=0,z=new Array(k);P<k;P++)z[P]=S[P];return z}function n(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=t("color-normalize"),i=t("array-bounds"),v=t("color-id"),u=t("@plotly/point-cluster"),g=t("object-assign"),h=t("glslify"),y=t("pick-by-alias"),p=t("update-diff"),A=t("flatten-vertex-data"),m=t("is-iexplorer"),M=t("to-float32"),x=t("parse-rect"),T=_;function _(S,k){var P=this;if(!(this instanceof _))return new _(S,k);typeof S=="function"?(k||(k={}),k.regl=S):(k=S,S=null),k&&k.length&&(k.positions=k),S=k.regl;var z=S._gl,I,R=[],D={},O=[],F=[null],G=[null],W=255,q=100;this.tooManyColors=m,I=S.texture({data:new Uint8Array(W*4),width:W,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),g(this,{regl:S,gl:z,groups:O,markerCache:G,markerTextures:F,palette:R,paletteIds:D,paletteTexture:I,maxColors:W,maxSize:q,canvas:z.canvas}),this.update(k);var J={uniforms:{constPointSize:!!k.constPointSize,opacity:S.prop("opacity"),paletteSize:function(le,oe){return[P.tooManyColors?0:W,I.height]},pixelRatio:S.context("pixelRatio"),scale:S.prop("scale"),scaleFract:S.prop("scaleFract"),translate:S.prop("translate"),translateFract:S.prop("translateFract"),markerTexture:S.prop("markerTexture"),paletteTexture:I},attributes:{x:function(le,oe){return oe.xAttr||{buffer:oe.positionBuffer,stride:8,offset:0}},y:function(le,oe){return oe.yAttr||{buffer:oe.positionBuffer,stride:8,offset:4}},xFract:function(le,oe){return oe.xAttr?{constant:[0,0]}:{buffer:oe.positionFractBuffer,stride:8,offset:0}},yFract:function(le,oe){return oe.yAttr?{constant:[0,0]}:{buffer:oe.positionFractBuffer,stride:8,offset:4}},size:function(le,oe){return oe.size.length?{buffer:oe.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(oe.size*255/P.maxSize)]}},borderSize:function(le,oe){return oe.borderSize.length?{buffer:oe.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(oe.borderSize*255/P.maxSize)]}},colorId:function(le,oe){return oe.color.length?{buffer:oe.colorBuffer,stride:P.tooManyColors?8:4,offset:0}:{constant:P.tooManyColors?R.slice(oe.color*4,oe.color*4+4):[oe.color]}},borderColorId:function(le,oe){return oe.borderColor.length?{buffer:oe.colorBuffer,stride:P.tooManyColors?8:4,offset:P.tooManyColors?4:2}:{constant:P.tooManyColors?R.slice(oe.borderColor*4,oe.borderColor*4+4):[oe.borderColor]}},isActive:function(le,oe){return oe.activation===!0?{constant:[1]}:oe.activation?oe.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:S.prop("viewport")},viewport:S.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:S.prop("elements"),count:S.prop("count"),offset:S.prop("offset"),primitive:"points"},X=g({},J);X.frag=h([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),X.vert=h([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}`]),this.drawMarker=S(X);var Z=g({},J);Z.frag=h([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),Z.vert=h([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),m&&(Z.frag=Z.frag.replace("smoothstep","smoothStep"),X.frag=X.frag.replace("smoothstep","smoothStep")),this.drawCircle=S(Z)}_.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},_.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},_.prototype.draw=function(){for(var S=this,k=arguments.length,P=new Array(k),z=0;z<k;z++)P[z]=arguments[z];var I=this.groups;if(P.length===1&&Array.isArray(P[0])&&(P[0][0]===null||Array.isArray(P[0][0]))&&(P=P[0]),this.regl._refresh(),P.length)for(var R=0;R<P.length;R++)this.drawItem(R,P[R]);else I.forEach(function(D,O){S.drawItem(O)});return this},_.prototype.drawItem=function(S,k){var P=this.groups,z=P[S];if(typeof k=="number"&&(S=k,z=P[k],k=null),!!(z&&z.count&&z.opacity)){z.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,z,k));for(var I=[],R=1;R<z.activation.length;R++)!z.activation[R]||z.activation[R]!==!0&&!z.activation[R].data.length||I.push.apply(I,l(this.getMarkerDrawOptions(R,z,k)));I.length&&this.drawMarker(I)}},_.prototype.getMarkerDrawOptions=function(S,k,P){var z=k.range,I=k.tree,R=k.viewport,D=k.activation,O=k.selectionBuffer,F=k.count;if(this.regl,!I)return P?[g({},k,{markerTexture:this.markerTextures[S],activation:D[S],count:P.length,elements:P,offset:0})]:[g({},k,{markerTexture:this.markerTextures[S],activation:D[S],offset:0})];var G=[],W=I.range(z,{lod:!0,px:[(z[2]-z[0])/R.width,(z[3]-z[1])/R.height]});if(P){for(var q=D[S],J=q.data,X=new Uint8Array(F),Z=0;Z<P.length;Z++){var se=P[Z];X[se]=J?J[se]:1}O.subdata(X)}for(var le=W.length;le--;){var oe=d(W[le],2),U=oe[0],V=oe[1];G.push(g({},k,{markerTexture:this.markerTextures[S],activation:P?O:D[S],offset:U,count:V-U}))}return G},_.prototype.update=function(){for(var S=this,k=arguments.length,P=new Array(k),z=0;z<k;z++)P[z]=arguments[z];if(!!P.length){P.length===1&&Array.isArray(P[0])&&(P=P[0]);var I=this.groups,R=this.gl,D=this.regl,O=this.maxSize,F=this.maxColors,G=this.palette;this.groups=I=P.map(function(W,q){var J=I[q];if(W===void 0)return J;W===null?W={positions:null}:typeof W=="function"?W={ondraw:W}:typeof W[0]=="number"&&(W={positions:W}),W=y(W,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"}),W.positions===null&&(W.positions=[]),W.tooManyColors!=null&&(S.tooManyColors=W.tooManyColors),J||(I[q]=J={id:q,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:D.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},W=g({},_.defaults,W)),W.positions&&!("marker"in W)&&(W.marker=J.marker,delete J.marker),W.marker&&!("positions"in W)&&(W.positions=J.positions,delete J.positions);var X=0,Z=0;if(p(J,W,[{snap:!0,size:function(Ae,Ne){return Ae==null&&(Ae=_.defaults.size),X+=Ae&&Ae.length?1:0,Ae},borderSize:function(Ae,Ne){return Ae==null&&(Ae=_.defaults.borderSize),X+=Ae&&Ae.length?1:0,Ae},opacity:parseFloat,color:function(Ae,Ne){return Ae==null&&(Ae=_.defaults.color),Ae=S.updateColor(Ae),Z++,Ae},borderColor:function(Ae,Ne){return Ae==null&&(Ae=_.defaults.borderColor),Ae=S.updateColor(Ae),Z++,Ae},bounds:function(Ae,Ne,He){return"range"in He||(He.range=null),Ae},positions:function(Ae,Ne,He){var Ge=Ne.snap,_e=Ne.positionBuffer,De=Ne.positionFractBuffer,Ye=Ne.selectionBuffer;if(Ae.x||Ae.y)return Ae.x.length?Ne.xAttr={buffer:D.buffer(Ae.x),offset:0,stride:4,count:Ae.x.length}:Ne.xAttr={buffer:Ae.x.buffer,offset:Ae.x.offset*4||0,stride:(Ae.x.stride||1)*4,count:Ae.x.count},Ae.y.length?Ne.yAttr={buffer:D.buffer(Ae.y),offset:0,stride:4,count:Ae.y.length}:Ne.yAttr={buffer:Ae.y.buffer,offset:Ae.y.offset*4||0,stride:(Ae.y.stride||1)*4,count:Ae.y.count},Ne.count=Math.max(Ne.xAttr.count,Ne.yAttr.count),Ae;Ae=A(Ae,"float64");var qe=Ne.count=Math.floor(Ae.length/2),Ue=Ne.bounds=qe?i(Ae,2):null;if(!He.range&&!Ne.range&&(delete Ne.range,He.range=Ue),!He.marker&&!Ne.marker&&(delete Ne.marker,He.marker=null),Ge&&(Ge===!0||qe>Ge)?Ne.tree=u(Ae,{bounds:Ue}):Ge&&Ge.length&&(Ne.tree=Ge),Ne.tree){var Ie={primitive:"points",usage:"static",data:Ne.tree,type:"uint32"};Ne.elements?Ne.elements(Ie):Ne.elements=D.elements(Ie)}var Ve=M.float32(Ae);_e({data:Ve,usage:"dynamic"});var dt=M.fract32(Ae,Ve);return De({data:dt,usage:"dynamic"}),Ye({data:new Uint8Array(qe),type:"uint8",usage:"stream"}),Ae}},{marker:function(Ae,Ne,He){var Ge=Ne.activation;if(Ge.forEach(function(dt){return dt&&dt.destroy&&dt.destroy()}),Ge.length=0,!Ae||typeof Ae[0]=="number"){var _e=S.addMarker(Ae);Ge[_e]=!0}else{for(var De=[],Ye=0,qe=Math.min(Ae.length,Ne.count);Ye<qe;Ye++){var Ue=S.addMarker(Ae[Ye]);De[Ue]||(De[Ue]=new Uint8Array(Ne.count)),De[Ue][Ye]=1}for(var Ie=0;Ie<De.length;Ie++)if(!!De[Ie]){var Ve={data:De[Ie],type:"uint8",usage:"static"};Ge[Ie]?Ge[Ie](Ve):Ge[Ie]=D.buffer(Ve),Ge[Ie].data=De[Ie]}}return Ae},range:function(Ae,Ne,He){var Ge=Ne.bounds;if(!!Ge)return Ae||(Ae=Ge),Ne.scale=[1/(Ae[2]-Ae[0]),1/(Ae[3]-Ae[1])],Ne.translate=[-Ae[0],-Ae[1]],Ne.scaleFract=M.fract(Ne.scale),Ne.translateFract=M.fract(Ne.translate),Ae},viewport:function(Ae){var Ne=x(Ae||[R.drawingBufferWidth,R.drawingBufferHeight]);return Ne}}]),X){var se=J,le=se.count,oe=se.size,U=se.borderSize,V=se.sizeBuffer,re=new Uint8Array(le*2);if(oe.length||U.length)for(var ee=0;ee<le;ee++)re[ee*2]=Math.round((oe[ee]==null?oe:oe[ee])*255/O),re[ee*2+1]=Math.round((U[ee]==null?U:U[ee])*255/O);V({data:re,usage:"dynamic"})}if(Z){var j=J,Q=j.count,ne=j.color,ae=j.borderColor,ie=j.colorBuffer,ue;if(S.tooManyColors){if(ne.length||ae.length){ue=new Uint8Array(Q*8);for(var xe=0;xe<Q;xe++){var he=ne[xe];ue[xe*8]=G[he*4],ue[xe*8+1]=G[he*4+1],ue[xe*8+2]=G[he*4+2],ue[xe*8+3]=G[he*4+3];var ge=ae[xe];ue[xe*8+4]=G[ge*4],ue[xe*8+5]=G[ge*4+1],ue[xe*8+6]=G[ge*4+2],ue[xe*8+7]=G[ge*4+3]}}}else if(ne.length||ae.length){ue=new Uint8Array(Q*4+2);for(var me=0;me<Q;me++)ne[me]!=null&&(ue[me*4]=ne[me]%F,ue[me*4+1]=Math.floor(ne[me]/F)),ae[me]!=null&&(ue[me*4+2]=ae[me]%F,ue[me*4+3]=Math.floor(ae[me]/F))}ie({data:ue||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return J})}},_.prototype.addMarker=function(S){var k=this.markerTextures,P=this.regl,z=this.markerCache,I=S==null?0:z.indexOf(S);if(I>=0)return I;var R;if(S instanceof Uint8Array||S instanceof Uint8ClampedArray)R=S;else{R=new Uint8Array(S.length);for(var D=0,O=S.length;D<O;D++)R[D]=S[D]*255}var F=Math.floor(Math.sqrt(R.length));return I=k.length,z.push(S),k.push(P.texture({channels:1,data:R,radius:F,mag:"linear",min:"linear"})),I},_.prototype.updateColor=function(S){var k=this.paletteIds,P=this.palette,z=this.maxColors;Array.isArray(S)||(S=[S]);var I=[];if(typeof S[0]=="number"){var R=[];if(Array.isArray(S))for(var D=0;D<S.length;D+=4)R.push(S.slice(D,D+4));else for(var O=0;O<S.length;O+=4)R.push(S.subarray(O,O+4));S=R}for(var F=0;F<S.length;F++){var G=S[F];G=s(G,"uint8");var W=v(G,!1);if(k[W]==null){var q=P.length;k[W]=Math.floor(q/4),P[q]=G[0],P[q+1]=G[1],P[q+2]=G[2],P[q+3]=G[3]}I[F]=k[W]}return!this.tooManyColors&&P.length>z*4&&(this.tooManyColors=!0),this.updatePalette(P),I.length===1?I[0]:I},_.prototype.updatePalette=function(S){if(!this.tooManyColors){var k=this.maxColors,P=this.paletteTexture,z=Math.ceil(S.length*.25/k);if(z>1){S=S.slice();for(var I=S.length*.25%k;I<z*k;I++)S.push(0,0,0,0)}P.height<z&&P.resize(k,z),P.subimage({width:Math.min(S.length*.25,k),height:z,data:S},0,0)}},_.prototype.destroy=function(){return this.groups.forEach(function(S){S.sizeBuffer.destroy(),S.positionBuffer.destroy(),S.positionFractBuffer.destroy(),S.colorBuffer.destroy(),S.activation.forEach(function(k){return k&&k.destroy&&k.destroy()}),S.selectionBuffer.destroy(),S.elements&&S.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(S){return S&&S.destroy&&S.destroy()}),this};var f=t("object-assign"),L=function(k,P){var z=new T(k,P),I=z.render.bind(z);return f(I,{render:I,update:z.update.bind(z),draw:z.draw.bind(z),destroy:z.destroy.bind(z),regl:z.regl,gl:z.gl,canvas:z.gl.canvas,groups:z.groups,markers:z.markerCache,palette:z.palette}),I};B.exports=L},{"@plotly/point-cluster":59,"array-bounds":71,"color-id":87,"color-normalize":89,"flatten-vertex-data":191,glslify:227,"is-iexplorer":233,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":313,"update-diff":329}],282:[function(t,B,H){var d=t("regl-scatter2d"),l=t("pick-by-alias"),b=t("array-bounds"),w=t("raf"),e=t("array-range"),o=t("parse-rect"),a=t("flatten-vertex-data");B.exports=r;function r(i,v){if(!(this instanceof r))return new r(i,v);this.traces=[],this.passes={},this.regl=i,this.scatter=d(i),this.canvas=this.scatter.canvas}r.prototype.render=function(){for(var i=this,v,u=[],g=arguments.length;g--;)u[g]=arguments[g];return u.length&&(v=this).update.apply(v,u),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=w(function(){i.draw(),i.dirty=!0,i.planned=null})):(this.draw(),this.dirty=!0,w(function(){i.dirty=!1})),this)},r.prototype.update=function(){for(var i,v=[],u=arguments.length;u--;)v[u]=arguments[u];if(!!v.length){for(var g=0;g<v.length;g++)this.updateItem(g,v[g]);this.traces=this.traces.filter(Boolean);for(var h=[],y=0,p=0;p<this.traces.length;p++){for(var A=this.traces[p],m=this.traces[p].passes,M=0;M<m.length;M++)h.push(this.passes[m[M]]);A.passOffset=y,y+=A.passes.length}return(i=this.scatter).update.apply(i,h),this}},r.prototype.updateItem=function(i,v){var u=this,g=u.regl;if(v===null)return this.traces[i]=null,this;if(!v)return this;var h=l(v,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),y=this.traces[i]||(this.traces[i]={id:i,buffer:g.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:o([g._gl.drawingBufferWidth,g._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(h.color!=null&&(y.color=h.color),h.size!=null&&(y.size=h.size),h.marker!=null&&(y.marker=h.marker),h.borderColor!=null&&(y.borderColor=h.borderColor),h.borderSize!=null&&(y.borderSize=h.borderSize),h.opacity!=null&&(y.opacity=h.opacity),h.viewport&&(y.viewport=o(h.viewport)),h.diagonal!=null&&(y.diagonal=h.diagonal),h.upper!=null&&(y.upper=h.upper),h.lower!=null&&(y.lower=h.lower),h.data){y.buffer(a(h.data)),y.columns=h.data.length,y.count=h.data[0].length,y.bounds=[];for(var p=0;p<y.columns;p++)y.bounds[p]=b(h.data[p],1)}var A;h.range&&(y.range=h.range,A=y.range&&typeof y.range[0]!="number"),h.domain&&(y.domain=h.domain);var m=!1;h.padding!=null&&(Array.isArray(h.padding)&&h.padding.length===y.columns&&typeof h.padding[h.padding.length-1]=="number"?(y.padding=h.padding.map(s),m=!0):y.padding=s(h.padding));var M=y.columns,x=y.count,T=y.viewport.width,_=y.viewport.height,f=y.viewport.x,L=y.viewport.y,S=T/M,k=_/M;y.passes=[];for(var P=0;P<M;P++)for(var z=0;z<M;z++)if(!(!y.diagonal&&z===P)&&!(!y.upper&&P>z)&&!(!y.lower&&P<z)){var I=n(y.id,P,z),R=this.passes[I]||(this.passes[I]={});if(h.data&&(h.transpose?R.positions={x:{buffer:y.buffer,offset:z,count:x,stride:M},y:{buffer:y.buffer,offset:P,count:x,stride:M}}:R.positions={x:{buffer:y.buffer,offset:z*x,count:x},y:{buffer:y.buffer,offset:P*x,count:x}},R.bounds=c(y.bounds,P,z)),h.domain||h.viewport||h.data){var D=m?c(y.padding,P,z):y.padding;if(y.domain){var O=c(y.domain,P,z),F=O[0],G=O[1],W=O[2],q=O[3];R.viewport=[f+F*T+D[0],L+G*_+D[1],f+W*T-D[2],L+q*_-D[3]]}else R.viewport=[f+z*S+S*D[0],L+P*k+k*D[1],f+(z+1)*S-S*D[2],L+(P+1)*k-k*D[3]]}h.color&&(R.color=y.color),h.size&&(R.size=y.size),h.marker&&(R.marker=y.marker),h.borderSize&&(R.borderSize=y.borderSize),h.borderColor&&(R.borderColor=y.borderColor),h.opacity&&(R.opacity=y.opacity),h.range&&(R.range=A?c(y.range,P,z):y.range||R.bounds),y.passes.push(I)}return this},r.prototype.draw=function(){for(var i,v=[],u=arguments.length;u--;)v[u]=arguments[u];if(!v.length)this.scatter.draw();else{for(var g=[],h=0;h<v.length;h++)if(typeof v[h]=="number"){var y=this.traces[v[h]],p=y.passes,A=y.passOffset;g.push.apply(g,e(A,A+p.length))}else if(v[h].length){var m=v[h],M=this.traces[h],x=M.passes,T=M.passOffset;x=x.map(function(_,f){g[T+f]=m})}(i=this.scatter).draw.apply(i,g)}return this},r.prototype.destroy=function(){return this.traces.forEach(function(i){i.buffer&&i.buffer.destroy&&i.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this};function n(i,v,u){var g=i.id!=null?i.id:i,h=v,y=u,p=g<<16|(h&255)<<8|y&255;return p}function c(i,v,u){var g,h,y,p,A=i[v],m=i[u];return A.length>2?(g=A[1],h=A[3]):A.length?(g=A[0],h=A[1]):(g=A.y,A.x+A.width,h=A.y+A.height),m.length>2?(y=m[0],p=m[2]):m.length?(y=m[0],p=m[1]):(y=m.x,p=m.x+m.width,m.y+m.height),[y,g,p,h]}function s(i){if(typeof i=="number")return[i,i,i,i];if(i.length===2)return[i[0],i[1],i[0],i[1]];var v=o(i);return[v.x,v.y,v.x+v.width,v.y+v.height]}},{"array-bounds":71,"array-range":74,"flatten-vertex-data":191,"parse-rect":249,"pick-by-alias":253,raf:278,"regl-scatter2d":281}],283:[function(t,B,H){(function(d,l){typeof H=="object"&&typeof B!="undefined"?B.exports=l():d.createREGL=l()})(this,function(){function d(Je,pt){this.id=Q++,this.type=Je,this.data=pt}function l(Je){if(Je.length===0)return[];var pt=Je.charAt(0),Et=Je.charAt(Je.length-1);if(1<Je.length&&pt===Et&&(pt==='"'||pt==="'"))return['"'+Je.substr(1,Je.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(pt=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Je))return l(Je.substr(0,pt.index)).concat(l(pt[1])).concat(l(Je.substr(pt.index+pt[0].length)));if(pt=Je.split("."),pt.length===1)return['"'+Je.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(Je=[],Et=0;Et<pt.length;++Et)Je=Je.concat(l(pt[Et]));return Je}function b(Je){return"["+l(Je).join("][")+"]"}function w(Je,pt){if(typeof Je=="function")return new d(0,Je);if(typeof Je=="number"||typeof Je=="boolean")return new d(5,Je);if(Array.isArray(Je))return new d(6,Je.map(function(Et,ar){return w(Et)}));if(Je instanceof d)return Je}function e(){var Je={"":0},pt=[""];return{id:function(Et){var ar=Je[Et];return ar||(ar=Je[Et]=pt.length,pt.push(Et),ar)},str:function(Et){return pt[Et]}}}function o(Je,pt,Et){function ar(){var dr=window.innerWidth,Pr=window.innerHeight;Je!==document.body&&(Pr=vr.getBoundingClientRect(),dr=Pr.right-Pr.left,Pr=Pr.bottom-Pr.top),vr.width=Et*dr,vr.height=Et*Pr}var vr=document.createElement("canvas");j(vr.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),Je.appendChild(vr),Je===document.body&&(vr.style.position="absolute",j(Je.style,{margin:0,padding:0}));var ir;return Je!==document.body&&typeof ResizeObserver=="function"?(ir=new ResizeObserver(function(){setTimeout(ar)}),ir.observe(Je)):window.addEventListener("resize",ar,!1),ar(),{canvas:vr,onDestroy:function(){ir?ir.disconnect():window.removeEventListener("resize",ar),Je.removeChild(vr)}}}function a(Je,pt){function Et(ar){try{return Je.getContext(ar,pt)}catch{return null}}return Et("webgl")||Et("experimental-webgl")||Et("webgl-experimental")}function r(Je){return typeof Je=="string"?Je.split():Je}function n(Je){return typeof Je=="string"?document.querySelector(Je):Je}function c(Je){var pt=Je||{},Et,ar,vr,ir;Je={};var dr=[],Pr=[],Sr=typeof window=="undefined"?1:window.devicePixelRatio,tr=!1,Nr=function(we){},et=function(){};if(typeof pt=="string"?Et=document.querySelector(pt):typeof pt=="object"&&(typeof pt.nodeName=="string"&&typeof pt.appendChild=="function"&&typeof pt.getBoundingClientRect=="function"?Et=pt:typeof pt.drawArrays=="function"||typeof pt.drawElements=="function"?(ir=pt,vr=ir.canvas):("gl"in pt?ir=pt.gl:"canvas"in pt?vr=n(pt.canvas):"container"in pt&&(ar=n(pt.container)),"attributes"in pt&&(Je=pt.attributes),"extensions"in pt&&(dr=r(pt.extensions)),"optionalExtensions"in pt&&(Pr=r(pt.optionalExtensions)),"onDone"in pt&&(Nr=pt.onDone),"profile"in pt&&(tr=!!pt.profile),"pixelRatio"in pt&&(Sr=+pt.pixelRatio))),Et&&(Et.nodeName.toLowerCase()==="canvas"?vr=Et:ar=Et),!ir){if(!vr){if(Et=o(ar||document.body,Nr,Sr),!Et)return null;vr=Et.canvas,et=Et.onDestroy}Je.premultipliedAlpha===void 0&&(Je.premultipliedAlpha=!0),ir=a(vr,Je)}return ir?{gl:ir,canvas:vr,container:ar,extensions:dr,optionalExtensions:Pr,pixelRatio:Sr,profile:tr,onDone:Nr,onDestroy:et}:(et(),Nr("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function s(Je,pt){function Et(dr){dr=dr.toLowerCase();var Pr;try{Pr=ar[dr]=Je.getExtension(dr)}catch{}return!!Pr}for(var ar={},vr=0;vr<pt.extensions.length;++vr){var ir=pt.extensions[vr];if(!Et(ir))return pt.onDestroy(),pt.onDone('"'+ir+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return pt.optionalExtensions.forEach(Et),{extensions:ar,restore:function(){Object.keys(ar).forEach(function(dr){if(ar[dr]&&!Et(dr))throw Error("(regl): error restoring extension "+dr)})}}}function i(Je,pt){for(var Et=Array(Je),ar=0;ar<Je;++ar)Et[ar]=pt(ar);return Et}function v(Je){var pt,Et;return pt=(65535<Je)<<4,Je>>>=pt,Et=(255<Je)<<3,Je>>>=Et,pt|=Et,Et=(15<Je)<<2,Je>>>=Et,pt|=Et,Et=(3<Je)<<1,pt|Et|Je>>>Et>>1}function u(){function Je(ar){e:{for(var vr=16;268435456>=vr;vr*=16)if(ar<=vr){ar=vr;break e}ar=0}return vr=Et[v(ar)>>2],0<vr.length?vr.pop():new ArrayBuffer(ar)}function pt(ar){Et[v(ar.byteLength)>>2].push(ar)}var Et=i(8,function(){return[]});return{alloc:Je,free:pt,allocType:function(ar,vr){var ir=null;switch(ar){case 5120:ir=new Int8Array(Je(vr),0,vr);break;case 5121:ir=new Uint8Array(Je(vr),0,vr);break;case 5122:ir=new Int16Array(Je(2*vr),0,vr);break;case 5123:ir=new Uint16Array(Je(2*vr),0,vr);break;case 5124:ir=new Int32Array(Je(4*vr),0,vr);break;case 5125:ir=new Uint32Array(Je(4*vr),0,vr);break;case 5126:ir=new Float32Array(Je(4*vr),0,vr);break;default:return null}return ir.length!==vr?ir.subarray(0,vr):ir},freeType:function(ar){pt(ar.buffer)}}}function g(Je){return!!Je&&typeof Je=="object"&&Array.isArray(Je.shape)&&Array.isArray(Je.stride)&&typeof Je.offset=="number"&&Je.shape.length===Je.stride.length&&(Array.isArray(Je.data)||he(Je.data))}function h(Je,pt,Et,ar,vr,ir){for(var dr=0;dr<pt;++dr)for(var Pr=Je[dr],Sr=0;Sr<Et;++Sr)for(var tr=Pr[Sr],Nr=0;Nr<ar;++Nr)vr[ir++]=tr[Nr]}function y(Je,pt,Et,ar,vr){for(var ir=1,dr=Et+1;dr<pt.length;++dr)ir*=pt[dr];var Pr=pt[Et];if(pt.length-Et===4){var Sr=pt[Et+1],tr=pt[Et+2];for(pt=pt[Et+3],dr=0;dr<Pr;++dr)h(Je[dr],Sr,tr,pt,ar,vr),vr+=ir}else for(dr=0;dr<Pr;++dr)y(Je[dr],pt,Et+1,ar,vr),vr+=ir}function p(Je){return ke[Object.prototype.toString.call(Je)]|0}function A(Je,pt){for(var Et=0;Et<pt.length;++Et)Je[Et]=pt[Et]}function m(Je,pt,Et,ar,vr,ir,dr){for(var Pr=0,Sr=0;Sr<Et;++Sr)for(var tr=0;tr<ar;++tr)Je[Pr++]=pt[vr*Sr+ir*tr+dr]}function M(Je,pt,Et,ar){function vr(et){this.id=Sr++,this.buffer=Je.createBuffer(),this.type=et,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,Et.profile&&(this.stats={size:0})}function ir(et,we,Me){et.byteLength=we.byteLength,Je.bufferData(et.type,we,Me)}function dr(et,we,Me,Re,Xe,$e){if(et.usage=Me,Array.isArray(we)){if(et.dtype=Re||5126,0<we.length)if(Array.isArray(we[0])){Xe=Ge(we);for(var ot=Re=1;ot<Xe.length;++ot)Re*=Xe[ot];et.dimension=Re,we=He(we,Xe,et.dtype),ir(et,we,Me),$e?et.persistentData=we:ue.freeType(we)}else typeof we[0]=="number"?(et.dimension=Xe,Xe=ue.allocType(et.dtype,we.length),A(Xe,we),ir(et,Xe,Me),$e?et.persistentData=Xe:ue.freeType(Xe)):he(we[0])&&(et.dimension=we[0].length,et.dtype=Re||p(we[0])||5126,we=He(we,[we.length,we[0].length],et.dtype),ir(et,we,Me),$e?et.persistentData=we:ue.freeType(we))}else if(he(we))et.dtype=Re||p(we),et.dimension=Xe,ir(et,we,Me),$e&&(et.persistentData=new Uint8Array(new Uint8Array(we.buffer)));else if(g(we)){Xe=we.shape;var st=we.stride,ot=we.offset,yt=0,wt=0,Vt=0,gr=0;Xe.length===1?(yt=Xe[0],wt=1,Vt=st[0],gr=0):Xe.length===2&&(yt=Xe[0],wt=Xe[1],Vt=st[0],gr=st[1]),et.dtype=Re||p(we.data)||5126,et.dimension=wt,Xe=ue.allocType(et.dtype,yt*wt),m(Xe,we.data,yt,wt,Vt,gr,ot),ir(et,Xe,Me),$e?et.persistentData=Xe:ue.freeType(Xe)}else we instanceof ArrayBuffer&&(et.dtype=5121,et.dimension=Xe,ir(et,we,Me),$e&&(et.persistentData=new Uint8Array(new Uint8Array(we))))}function Pr(et){pt.bufferCount--,ar(et),Je.deleteBuffer(et.buffer),et.buffer=null,delete tr[et.id]}var Sr=0,tr={};vr.prototype.bind=function(){Je.bindBuffer(this.type,this.buffer)},vr.prototype.destroy=function(){Pr(this)};var Nr=[];return Et.profile&&(pt.getTotalBufferSize=function(){var et=0;return Object.keys(tr).forEach(function(we){et+=tr[we].stats.size}),et}),{create:function(et,we,Me,Re){function Xe(ot){var st=35044,yt=null,wt=0,Vt=0,gr=1;return Array.isArray(ot)||he(ot)||g(ot)||ot instanceof ArrayBuffer?yt=ot:typeof ot=="number"?wt=ot|0:ot&&("data"in ot&&(yt=ot.data),"usage"in ot&&(st=Ne[ot.usage]),"type"in ot&&(Vt=Ae[ot.type]),"dimension"in ot&&(gr=ot.dimension|0),"length"in ot&&(wt=ot.length|0)),$e.bind(),yt?dr($e,yt,st,Vt,gr,Re):(wt&&Je.bufferData($e.type,wt,st),$e.dtype=Vt||5121,$e.usage=st,$e.dimension=gr,$e.byteLength=wt),Et.profile&&($e.stats.size=$e.byteLength*_e[$e.dtype]),Xe}pt.bufferCount++;var $e=new vr(we);return tr[$e.id]=$e,Me||Xe(et),Xe._reglType="buffer",Xe._buffer=$e,Xe.subdata=function(ot,st){var yt=(st||0)|0,wt;if($e.bind(),he(ot)||ot instanceof ArrayBuffer)Je.bufferSubData($e.type,yt,ot);else if(Array.isArray(ot)){if(0<ot.length)if(typeof ot[0]=="number"){var Vt=ue.allocType($e.dtype,ot.length);A(Vt,ot),Je.bufferSubData($e.type,yt,Vt),ue.freeType(Vt)}else(Array.isArray(ot[0])||he(ot[0]))&&(wt=Ge(ot),Vt=He(ot,wt,$e.dtype),Je.bufferSubData($e.type,yt,Vt),ue.freeType(Vt))}else if(g(ot)){wt=ot.shape;var gr=ot.stride,wr=Vt=0,Lr=0,fr=0;wt.length===1?(Vt=wt[0],wr=1,Lr=gr[0],fr=0):wt.length===2&&(Vt=wt[0],wr=wt[1],Lr=gr[0],fr=gr[1]),wt=Array.isArray(ot.data)?$e.dtype:p(ot.data),wt=ue.allocType(wt,Vt*wr),m(wt,ot.data,Vt,wr,Lr,fr,ot.offset),Je.bufferSubData($e.type,yt,wt),ue.freeType(wt)}return Xe},Et.profile&&(Xe.stats=$e.stats),Xe.destroy=function(){Pr($e)},Xe},createStream:function(et,we){var Me=Nr.pop();return Me||(Me=new vr(et)),Me.bind(),dr(Me,we,35040,0,1,!1),Me},destroyStream:function(et){Nr.push(et)},clear:function(){ge(tr).forEach(Pr),Nr.forEach(Pr)},getBuffer:function(et){return et&&et._buffer instanceof vr?et._buffer:null},restore:function(){ge(tr).forEach(function(et){et.buffer=Je.createBuffer(),Je.bindBuffer(et.type,et.buffer),Je.bufferData(et.type,et.persistentData||et.byteLength,et.usage)})},_initBuffer:dr}}function x(Je,pt,Et,ar){function vr(et){this.id=Sr++,Pr[this.id]=this,this.buffer=et,this.primType=4,this.type=this.vertCount=0}function ir(et,we,Me,Re,Xe,$e,ot){et.buffer.bind();var st;if(we?((st=ot)||he(we)&&(!g(we)||he(we.data))||(st=pt.oes_element_index_uint?5125:5123),Et._initBuffer(et.buffer,we,Me,st,3)):(Je.bufferData(34963,$e,Me),et.buffer.dtype=st||5121,et.buffer.usage=Me,et.buffer.dimension=3,et.buffer.byteLength=$e),st=ot,!ot){switch(et.buffer.dtype){case 5121:case 5120:st=5121;break;case 5123:case 5122:st=5123;break;case 5125:case 5124:st=5125}et.buffer.dtype=st}et.type=st,we=Xe,0>we&&(we=et.buffer.byteLength,st===5123?we>>=1:st===5125&&(we>>=2)),et.vertCount=we,we=Re,0>Re&&(we=4,Re=et.buffer.dimension,Re===1&&(we=0),Re===2&&(we=1),Re===3&&(we=4)),et.primType=we}function dr(et){ar.elementsCount--,delete Pr[et.id],et.buffer.destroy(),et.buffer=null}var Pr={},Sr=0,tr={uint8:5121,uint16:5123};pt.oes_element_index_uint&&(tr.uint32=5125),vr.prototype.bind=function(){this.buffer.bind()};var Nr=[];return{create:function(et,we){function Me($e){if($e)if(typeof $e=="number")Re($e),Xe.primType=4,Xe.vertCount=$e|0,Xe.type=5121;else{var ot=null,st=35044,yt=-1,wt=-1,Vt=0,gr=0;Array.isArray($e)||he($e)||g($e)?ot=$e:("data"in $e&&(ot=$e.data),"usage"in $e&&(st=Ne[$e.usage]),"primitive"in $e&&(yt=De[$e.primitive]),"count"in $e&&(wt=$e.count|0),"type"in $e&&(gr=tr[$e.type]),"length"in $e?Vt=$e.length|0:(Vt=wt,gr===5123||gr===5122?Vt*=2:(gr===5125||gr===5124)&&(Vt*=4))),ir(Xe,ot,st,yt,wt,Vt,gr)}else Re(),Xe.primType=4,Xe.vertCount=0,Xe.type=5121;return Me}var Re=Et.create(null,34963,!0),Xe=new vr(Re._buffer);return ar.elementsCount++,Me(et),Me._reglType="elements",Me._elements=Xe,Me.subdata=function($e,ot){return Re.subdata($e,ot),Me},Me.destroy=function(){dr(Xe)},Me},createStream:function(et){var we=Nr.pop();return we||(we=new vr(Et.create(null,34963,!0,!1)._buffer)),ir(we,et,35040,-1,-1,0,0),we},destroyStream:function(et){Nr.push(et)},getElements:function(et){return typeof et=="function"&&et._elements instanceof vr?et._elements:null},clear:function(){ge(Pr).forEach(dr)}}}function T(Je){for(var pt=ue.allocType(5123,Je.length),Et=0;Et<Je.length;++Et)if(isNaN(Je[Et]))pt[Et]=65535;else if(Je[Et]===1/0)pt[Et]=31744;else if(Je[Et]===-1/0)pt[Et]=64512;else{Ye[0]=Je[Et];var ir=qe[0],ar=ir>>>31<<15,vr=(ir<<1>>>24)-127,ir=ir>>13&1023;pt[Et]=-24>vr?ar:-14>vr?ar+(ir+1024>>-14-vr):15<vr?ar+31744:ar+(vr+15<<10)+ir}return pt}function _(Je){return Array.isArray(Je)||he(Je)}function f(Je){return"[object "+Je+"]"}function L(Je){return Array.isArray(Je)&&(Je.length===0||typeof Je[0]=="number")}function S(Je){return!!(Array.isArray(Je)&&Je.length!==0&&_(Je[0]))}function k(Je){return Object.prototype.toString.call(Je)}function P(Je){if(!Je)return!1;var pt=k(Je);return 0<=Lt.indexOf(pt)?!0:L(Je)||S(Je)||g(Je)}function z(Je,pt){Je.type===36193?(Je.data=T(pt),ue.freeType(pt)):Je.data=pt}function I(Je,pt,Et,ar,vr,ir){if(Je=typeof it[Je]!="undefined"?it[Je]:Ve[Je]*St[pt],ir&&(Je*=6),vr){for(ar=0;1<=Et;)ar+=Je*Et*Et,Et/=2;return ar}return Je*Et*ar}function R(Je,pt,Et,ar,vr,ir,dr){function Pr(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function Sr(pr,vn){pr.internalformat=vn.internalformat,pr.format=vn.format,pr.type=vn.type,pr.compressed=vn.compressed,pr.premultiplyAlpha=vn.premultiplyAlpha,pr.flipY=vn.flipY,pr.unpackAlignment=vn.unpackAlignment,pr.colorSpace=vn.colorSpace,pr.width=vn.width,pr.height=vn.height,pr.channels=vn.channels}function tr(pr,vn){if(typeof vn=="object"&&vn){"premultiplyAlpha"in vn&&(pr.premultiplyAlpha=vn.premultiplyAlpha),"flipY"in vn&&(pr.flipY=vn.flipY),"alignment"in vn&&(pr.unpackAlignment=vn.alignment),"colorSpace"in vn&&(pr.colorSpace=an[vn.colorSpace]),"type"in vn&&(pr.type=rn[vn.type]);var $r=pr.width,Fn=pr.height,Bn=pr.channels,ca=!1;"shape"in vn?($r=vn.shape[0],Fn=vn.shape[1],vn.shape.length===3&&(Bn=vn.shape[2],ca=!0)):("radius"in vn&&($r=Fn=vn.radius),"width"in vn&&($r=vn.width),"height"in vn&&(Fn=vn.height),"channels"in vn&&(Bn=vn.channels,ca=!0)),pr.width=$r|0,pr.height=Fn|0,pr.channels=Bn|0,$r=!1,"format"in vn&&($r=vn.format,Fn=pr.internalformat=Zr[$r],pr.format=Wr[Fn],$r in rn&&!("type"in vn)&&(pr.type=rn[$r]),$r in at&&(pr.compressed=!0),$r=!0),!ca&&$r?pr.channels=Ve[pr.format]:ca&&!$r&&pr.channels!==Ie[pr.format]&&(pr.format=pr.internalformat=Ie[pr.channels])}}function Nr(pr){Je.pixelStorei(37440,pr.flipY),Je.pixelStorei(37441,pr.premultiplyAlpha),Je.pixelStorei(37443,pr.colorSpace),Je.pixelStorei(3317,pr.unpackAlignment)}function et(){Pr.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function we(pr,vn){var $r=null;if(P(vn)?$r=vn:vn&&(tr(pr,vn),"x"in vn&&(pr.xOffset=vn.x|0),"y"in vn&&(pr.yOffset=vn.y|0),P(vn.data)&&($r=vn.data)),vn.copy){var Fn=vr.viewportWidth,Bn=vr.viewportHeight;pr.width=pr.width||Fn-pr.xOffset,pr.height=pr.height||Bn-pr.yOffset,pr.needsCopy=!0}else if(!$r)pr.width=pr.width||1,pr.height=pr.height||1,pr.channels=pr.channels||4;else if(he($r))pr.channels=pr.channels||4,pr.data=$r,"type"in vn||pr.type!==5121||(pr.type=ke[Object.prototype.toString.call($r)]|0);else if(L($r)){switch(pr.channels=pr.channels||4,Fn=$r,Bn=Fn.length,pr.type){case 5121:case 5123:case 5125:case 5126:Bn=ue.allocType(pr.type,Bn),Bn.set(Fn),pr.data=Bn;break;case 36193:pr.data=T(Fn)}pr.alignment=1,pr.needsFree=!0}else if(g($r)){Fn=$r.data,Array.isArray(Fn)||pr.type!==5121||(pr.type=ke[Object.prototype.toString.call(Fn)]|0);var Bn=$r.shape,ca=$r.stride,ta,Un,la,da;Bn.length===3?(la=Bn[2],da=ca[2]):da=la=1,ta=Bn[0],Un=Bn[1],Bn=ca[0],ca=ca[1],pr.alignment=1,pr.width=ta,pr.height=Un,pr.channels=la,pr.format=pr.internalformat=Ie[la],pr.needsFree=!0,ta=da,$r=$r.offset,la=pr.width,da=pr.height,Un=pr.channels;for(var ur=ue.allocType(pr.type===36193?5126:pr.type,la*da*Un),Dr=0,sn=0;sn<da;++sn)for(var tn=0;tn<la;++tn)for(var mn=0;mn<Un;++mn)ur[Dr++]=Fn[Bn*tn+ca*sn+ta*mn+$r];z(pr,ur)}else if(k($r)===dt||k($r)===Dt||k($r)===Yt)k($r)===dt||k($r)===Dt?pr.element=$r:pr.element=$r.canvas,pr.width=pr.element.width,pr.height=pr.element.height,pr.channels=4;else if(k($r)===kt)pr.element=$r,pr.width=$r.width,pr.height=$r.height,pr.channels=4;else if(k($r)===Ft)pr.element=$r,pr.width=$r.naturalWidth,pr.height=$r.naturalHeight,pr.channels=4;else if(k($r)===Nt)pr.element=$r,pr.width=$r.videoWidth,pr.height=$r.videoHeight,pr.channels=4;else if(S($r)){for(Fn=pr.width||$r[0].length,Bn=pr.height||$r.length,ca=pr.channels,ca=_($r[0][0])?ca||$r[0][0].length:ca||1,ta=me.shape($r),la=1,da=0;da<ta.length;++da)la*=ta[da];la=ue.allocType(pr.type===36193?5126:pr.type,la),me.flatten($r,ta,"",la),z(pr,la),pr.alignment=1,pr.width=Fn,pr.height=Bn,pr.channels=ca,pr.format=pr.internalformat=Ie[ca],pr.needsFree=!0}}function Me(pr,vn,$r,Fn,Bn){var ca=pr.element,ta=pr.data,Un=pr.internalformat,la=pr.format,da=pr.type,ur=pr.width,Dr=pr.height;Nr(pr),ca?Je.texSubImage2D(vn,Bn,$r,Fn,la,da,ca):pr.compressed?Je.compressedTexSubImage2D(vn,Bn,$r,Fn,Un,ur,Dr,ta):pr.needsCopy?(ar(),Je.copyTexSubImage2D(vn,Bn,$r,Fn,pr.xOffset,pr.yOffset,ur,Dr)):Je.texSubImage2D(vn,Bn,$r,Fn,ur,Dr,la,da,ta)}function Re(){return Rn.pop()||new et}function Xe(pr){pr.needsFree&&ue.freeType(pr.data),et.call(pr),Rn.push(pr)}function $e(){Pr.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function ot(pr,vn,$r){var Fn=pr.images[0]=Re();pr.mipmask=1,Fn.width=pr.width=vn,Fn.height=pr.height=$r,Fn.channels=pr.channels=4}function st(pr,vn){var $r=null;if(P(vn))$r=pr.images[0]=Re(),Sr($r,pr),we($r,vn),pr.mipmask=1;else if(tr(pr,vn),Array.isArray(vn.mipmap))for(var Fn=vn.mipmap,Bn=0;Bn<Fn.length;++Bn)$r=pr.images[Bn]=Re(),Sr($r,pr),$r.width>>=Bn,$r.height>>=Bn,we($r,Fn[Bn]),pr.mipmask|=1<<Bn;else $r=pr.images[0]=Re(),Sr($r,pr),we($r,vn),pr.mipmask=1;Sr(pr,pr.images[0])}function yt(pr,vn){for(var $r=pr.images,Fn=0;Fn<$r.length&&$r[Fn];++Fn){var Bn=$r[Fn],ca=vn,ta=Fn,Un=Bn.element,la=Bn.data,da=Bn.internalformat,ur=Bn.format,Dr=Bn.type,sn=Bn.width,tn=Bn.height;Nr(Bn),Un?Je.texImage2D(ca,ta,ur,ur,Dr,Un):Bn.compressed?Je.compressedTexImage2D(ca,ta,da,sn,tn,0,la):Bn.needsCopy?(ar(),Je.copyTexImage2D(ca,ta,ur,Bn.xOffset,Bn.yOffset,sn,tn,0)):Je.texImage2D(ca,ta,ur,sn,tn,0,ur,Dr,la||null)}}function wt(){var pr=En.pop()||new $e;Pr.call(pr);for(var vn=pr.mipmask=0;16>vn;++vn)pr.images[vn]=null;return pr}function Vt(pr){for(var vn=pr.images,$r=0;$r<vn.length;++$r)vn[$r]&&Xe(vn[$r]),vn[$r]=null;En.push(pr)}function gr(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function wr(pr,vn){"min"in vn&&(pr.minFilter=Ar[vn.min],0<=Ue.indexOf(pr.minFilter)&&!("faces"in vn)&&(pr.genMipmaps=!0)),"mag"in vn&&(pr.magFilter=Yr[vn.mag]);var $r=pr.wrapS,Fn=pr.wrapT;if("wrap"in vn){var Bn=vn.wrap;typeof Bn=="string"?$r=Fn=dn[Bn]:Array.isArray(Bn)&&($r=dn[Bn[0]],Fn=dn[Bn[1]])}else"wrapS"in vn&&($r=dn[vn.wrapS]),"wrapT"in vn&&(Fn=dn[vn.wrapT]);if(pr.wrapS=$r,pr.wrapT=Fn,"anisotropic"in vn&&(pr.anisotropic=vn.anisotropic),"mipmap"in vn){switch($r=!1,typeof vn.mipmap){case"string":pr.mipmapHint=_r[vn.mipmap],$r=pr.genMipmaps=!0;break;case"boolean":$r=pr.genMipmaps=vn.mipmap;break;case"object":pr.genMipmaps=!1,$r=!0}!$r||"min"in vn||(pr.minFilter=9984)}}function Lr(pr,vn){Je.texParameteri(vn,10241,pr.minFilter),Je.texParameteri(vn,10240,pr.magFilter),Je.texParameteri(vn,10242,pr.wrapS),Je.texParameteri(vn,10243,pr.wrapT),pt.ext_texture_filter_anisotropic&&Je.texParameteri(vn,34046,pr.anisotropic),pr.genMipmaps&&(Je.hint(33170,pr.mipmapHint),Je.generateMipmap(vn))}function fr(pr){Pr.call(this),this.mipmask=0,this.internalformat=6408,this.id=ea++,this.refCount=1,this.target=pr,this.texture=Je.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new gr,dr.profile&&(this.stats={size:0})}function Fr(pr){Je.activeTexture(33984),Je.bindTexture(pr.target,pr.texture)}function nn(){var pr=ya[0];pr?Je.bindTexture(pr.target,pr.texture):Je.bindTexture(3553,null)}function yr(pr){var vn=pr.texture,$r=pr.unit,Fn=pr.target;0<=$r&&(Je.activeTexture(33984+$r),Je.bindTexture(Fn,null),ya[$r]=null),Je.deleteTexture(vn),pr.texture=null,pr.params=null,pr.pixels=null,pr.refCount=0,delete ia[pr.id],ir.textureCount--}var _r={"don't care":4352,"dont care":4352,nice:4354,fast:4353},dn={repeat:10497,clamp:33071,mirror:33648},Yr={nearest:9728,linear:9729},Ar=j({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Yr),an={none:0,browser:37444},rn={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Zr={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},at={};pt.ext_srgb&&(Zr.srgb=35904,Zr.srgba=35906),pt.oes_texture_float&&(rn.float32=rn.float=5126),pt.oes_texture_half_float&&(rn.float16=rn["half float"]=36193),pt.webgl_depth_texture&&(j(Zr,{depth:6402,"depth stencil":34041}),j(rn,{uint16:5123,uint32:5125,"depth stencil":34042})),pt.webgl_compressed_texture_s3tc&&j(at,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),pt.webgl_compressed_texture_atc&&j(at,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),pt.webgl_compressed_texture_pvrtc&&j(at,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),pt.webgl_compressed_texture_etc1&&(at["rgb etc1"]=36196);var zt=Array.prototype.slice.call(Je.getParameter(34467));Object.keys(at).forEach(function(pr){var vn=at[pr];0<=zt.indexOf(vn)&&(Zr[pr]=vn)});var er=Object.keys(Zr);Et.textureFormats=er;var hr=[];Object.keys(Zr).forEach(function(pr){hr[Zr[pr]]=pr});var Vr=[];Object.keys(rn).forEach(function(pr){Vr[rn[pr]]=pr});var Rr=[];Object.keys(Yr).forEach(function(pr){Rr[Yr[pr]]=pr});var Er=[];Object.keys(Ar).forEach(function(pr){Er[Ar[pr]]=pr});var xr=[];Object.keys(dn).forEach(function(pr){xr[dn[pr]]=pr});var Wr=er.reduce(function(pr,vn){var $r=Zr[vn];return $r===6409||$r===6406||$r===6409||$r===6410||$r===6402||$r===34041||pt.ext_srgb&&($r===35904||$r===35906)?pr[$r]=$r:$r===32855||0<=vn.indexOf("rgba")?pr[$r]=6408:pr[$r]=6407,pr},{}),Rn=[],En=[],ea=0,ia={},Aa=Et.maxTextureUnits,ya=Array(Aa).map(function(){return null});return j(fr.prototype,{bind:function(){this.bindCount+=1;var pr=this.unit;if(0>pr){for(var vn=0;vn<Aa;++vn){var $r=ya[vn];if($r){if(0<$r.bindCount)continue;$r.unit=-1}ya[vn]=this,pr=vn;break}dr.profile&&ir.maxTextureUnits<pr+1&&(ir.maxTextureUnits=pr+1),this.unit=pr,Je.activeTexture(33984+pr),Je.bindTexture(this.target,this.texture)}return pr},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&yr(this)}}),dr.profile&&(ir.getTotalTextureSize=function(){var pr=0;return Object.keys(ia).forEach(function(vn){pr+=ia[vn].stats.size}),pr}),{create2D:function(pr,vn){function $r(Bn,ca){var ta=Fn.texInfo;gr.call(ta);var Un=wt();return typeof Bn=="number"?typeof ca=="number"?ot(Un,Bn|0,ca|0):ot(Un,Bn|0,Bn|0):Bn?(wr(ta,Bn),st(Un,Bn)):ot(Un,1,1),ta.genMipmaps&&(Un.mipmask=(Un.width<<1)-1),Fn.mipmask=Un.mipmask,Sr(Fn,Un),Fn.internalformat=Un.internalformat,$r.width=Un.width,$r.height=Un.height,Fr(Fn),yt(Un,3553),Lr(ta,3553),nn(),Vt(Un),dr.profile&&(Fn.stats.size=I(Fn.internalformat,Fn.type,Un.width,Un.height,ta.genMipmaps,!1)),$r.format=hr[Fn.internalformat],$r.type=Vr[Fn.type],$r.mag=Rr[ta.magFilter],$r.min=Er[ta.minFilter],$r.wrapS=xr[ta.wrapS],$r.wrapT=xr[ta.wrapT],$r}var Fn=new fr(3553);return ia[Fn.id]=Fn,ir.textureCount++,$r(pr,vn),$r.subimage=function(Bn,ca,ta,Un){ca|=0,ta|=0,Un|=0;var la=Re();return Sr(la,Fn),la.width=0,la.height=0,we(la,Bn),la.width=la.width||(Fn.width>>Un)-ca,la.height=la.height||(Fn.height>>Un)-ta,Fr(Fn),Me(la,3553,ca,ta,Un),nn(),Xe(la),$r},$r.resize=function(Bn,ca){var ta=Bn|0,Un=ca|0||ta;if(ta===Fn.width&&Un===Fn.height)return $r;$r.width=Fn.width=ta,$r.height=Fn.height=Un,Fr(Fn);for(var la=0;Fn.mipmask>>la;++la){var da=ta>>la,ur=Un>>la;if(!da||!ur)break;Je.texImage2D(3553,la,Fn.format,da,ur,0,Fn.format,Fn.type,null)}return nn(),dr.profile&&(Fn.stats.size=I(Fn.internalformat,Fn.type,ta,Un,!1,!1)),$r},$r._reglType="texture2d",$r._texture=Fn,dr.profile&&($r.stats=Fn.stats),$r.destroy=function(){Fn.decRef()},$r},createCube:function(pr,vn,$r,Fn,Bn,ca){function ta(da,ur,Dr,sn,tn,mn){var wn,gn=Un.texInfo;for(gr.call(gn),wn=0;6>wn;++wn)la[wn]=wt();if(typeof da=="number"||!da)for(da=da|0||1,wn=0;6>wn;++wn)ot(la[wn],da,da);else if(typeof da=="object")if(ur)st(la[0],da),st(la[1],ur),st(la[2],Dr),st(la[3],sn),st(la[4],tn),st(la[5],mn);else if(wr(gn,da),tr(Un,da),"faces"in da)for(da=da.faces,wn=0;6>wn;++wn)Sr(la[wn],Un),st(la[wn],da[wn]);else for(wn=0;6>wn;++wn)st(la[wn],da);for(Sr(Un,la[0]),Un.mipmask=gn.genMipmaps?(la[0].width<<1)-1:la[0].mipmask,Un.internalformat=la[0].internalformat,ta.width=la[0].width,ta.height=la[0].height,Fr(Un),wn=0;6>wn;++wn)yt(la[wn],34069+wn);for(Lr(gn,34067),nn(),dr.profile&&(Un.stats.size=I(Un.internalformat,Un.type,ta.width,ta.height,gn.genMipmaps,!0)),ta.format=hr[Un.internalformat],ta.type=Vr[Un.type],ta.mag=Rr[gn.magFilter],ta.min=Er[gn.minFilter],ta.wrapS=xr[gn.wrapS],ta.wrapT=xr[gn.wrapT],wn=0;6>wn;++wn)Vt(la[wn]);return ta}var Un=new fr(34067);ia[Un.id]=Un,ir.cubeCount++;var la=Array(6);return ta(pr,vn,$r,Fn,Bn,ca),ta.subimage=function(da,ur,Dr,sn,tn){Dr|=0,sn|=0,tn|=0;var mn=Re();return Sr(mn,Un),mn.width=0,mn.height=0,we(mn,ur),mn.width=mn.width||(Un.width>>tn)-Dr,mn.height=mn.height||(Un.height>>tn)-sn,Fr(Un),Me(mn,34069+da,Dr,sn,tn),nn(),Xe(mn),ta},ta.resize=function(da){if(da|=0,da!==Un.width){ta.width=Un.width=da,ta.height=Un.height=da,Fr(Un);for(var ur=0;6>ur;++ur)for(var Dr=0;Un.mipmask>>Dr;++Dr)Je.texImage2D(34069+ur,Dr,Un.format,da>>Dr,da>>Dr,0,Un.format,Un.type,null);return nn(),dr.profile&&(Un.stats.size=I(Un.internalformat,Un.type,ta.width,ta.height,!1,!0)),ta}},ta._reglType="textureCube",ta._texture=Un,dr.profile&&(ta.stats=Un.stats),ta.destroy=function(){Un.decRef()},ta},clear:function(){for(var pr=0;pr<Aa;++pr)Je.activeTexture(33984+pr),Je.bindTexture(3553,null),ya[pr]=null;ge(ia).forEach(yr),ir.cubeCount=0,ir.textureCount=0},getTexture:function(pr){return null},restore:function(){for(var pr=0;pr<Aa;++pr){var vn=ya[pr];vn&&(vn.bindCount=0,vn.unit=-1,ya[pr]=null)}ge(ia).forEach(function($r){$r.texture=Je.createTexture(),Je.bindTexture($r.target,$r.texture);for(var Fn=0;32>Fn;++Fn)if(($r.mipmask&1<<Fn)!==0)if($r.target===3553)Je.texImage2D(3553,Fn,$r.internalformat,$r.width>>Fn,$r.height>>Fn,0,$r.internalformat,$r.type,null);else for(var Bn=0;6>Bn;++Bn)Je.texImage2D(34069+Bn,Fn,$r.internalformat,$r.width>>Fn,$r.height>>Fn,0,$r.internalformat,$r.type,null);Lr($r.texInfo,$r.target)})},refresh:function(){for(var pr=0;pr<Aa;++pr){var vn=ya[pr];vn&&(vn.bindCount=0,vn.unit=-1,ya[pr]=null),Je.activeTexture(33984+pr),Je.bindTexture(3553,null),Je.bindTexture(34067,null)}}}}function D(Je,pt,Et,ar,vr,ir){function dr(fr,Fr,nn){this.target=fr,this.texture=Fr,this.renderbuffer=nn;var yr=fr=0;Fr?(fr=Fr.width,yr=Fr.height):nn&&(fr=nn.width,yr=nn.height),this.width=fr,this.height=yr}function Pr(fr){fr&&(fr.texture&&fr.texture._texture.decRef(),fr.renderbuffer&&fr.renderbuffer._renderbuffer.decRef())}function Sr(fr,Fr,nn){fr&&(fr.texture?fr.texture._texture.refCount+=1:fr.renderbuffer._renderbuffer.refCount+=1)}function tr(fr,Fr){Fr&&(Fr.texture?Je.framebufferTexture2D(36160,fr,Fr.target,Fr.texture._texture.texture,0):Je.framebufferRenderbuffer(36160,fr,36161,Fr.renderbuffer._renderbuffer.renderbuffer))}function Nr(fr){var Fr=3553,nn=null,yr=null,_r=fr;return typeof fr=="object"&&(_r=fr.data,"target"in fr&&(Fr=fr.target|0)),fr=_r._reglType,fr==="texture2d"||fr==="textureCube"?nn=_r:fr==="renderbuffer"&&(yr=_r,Fr=36161),new dr(Fr,nn,yr)}function et(fr,Fr,nn,yr,_r){return nn?(fr=ar.create2D({width:fr,height:Fr,format:yr,type:_r}),fr._texture.refCount=0,new dr(3553,fr,null)):(fr=vr.create({width:fr,height:Fr,format:yr}),fr._renderbuffer.refCount=0,new dr(36161,null,fr))}function we(fr){return fr&&(fr.texture||fr.renderbuffer)}function Me(fr,Fr,nn){fr&&(fr.texture?fr.texture.resize(Fr,nn):fr.renderbuffer&&fr.renderbuffer.resize(Fr,nn),fr.width=Fr,fr.height=nn)}function Re(){this.id=wr++,Lr[this.id]=this,this.framebuffer=Je.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function Xe(fr){fr.colorAttachments.forEach(Pr),Pr(fr.depthAttachment),Pr(fr.stencilAttachment),Pr(fr.depthStencilAttachment)}function $e(fr){Je.deleteFramebuffer(fr.framebuffer),fr.framebuffer=null,ir.framebufferCount--,delete Lr[fr.id]}function ot(fr){var Fr;Je.bindFramebuffer(36160,fr.framebuffer);var nn=fr.colorAttachments;for(Fr=0;Fr<nn.length;++Fr)tr(36064+Fr,nn[Fr]);for(Fr=nn.length;Fr<Et.maxColorAttachments;++Fr)Je.framebufferTexture2D(36160,36064+Fr,3553,null,0);Je.framebufferTexture2D(36160,33306,3553,null,0),Je.framebufferTexture2D(36160,36096,3553,null,0),Je.framebufferTexture2D(36160,36128,3553,null,0),tr(36096,fr.depthAttachment),tr(36128,fr.stencilAttachment),tr(33306,fr.depthStencilAttachment),Je.checkFramebufferStatus(36160),Je.isContextLost(),Je.bindFramebuffer(36160,yt.next?yt.next.framebuffer:null),yt.cur=yt.next,Je.getError()}function st(fr,Fr){function nn(_r,dn){var Yr,Ar=0,an=0,rn=!0,Zr=!0;Yr=null;var at=!0,zt="rgba",er="uint8",hr=1,Vr=null,Rr=null,Er=null,xr=!1;typeof _r=="number"?(Ar=_r|0,an=dn|0||Ar):_r?("shape"in _r?(an=_r.shape,Ar=an[0],an=an[1]):("radius"in _r&&(Ar=an=_r.radius),"width"in _r&&(Ar=_r.width),"height"in _r&&(an=_r.height)),("color"in _r||"colors"in _r)&&(Yr=_r.color||_r.colors),Yr||("colorCount"in _r&&(hr=_r.colorCount|0),"colorTexture"in _r&&(at=!!_r.colorTexture,zt="rgba4"),"colorType"in _r&&(er=_r.colorType,!at)&&(er==="half float"||er==="float16"?zt="rgba16f":(er==="float"||er==="float32")&&(zt="rgba32f")),"colorFormat"in _r&&(zt=_r.colorFormat,0<=wt.indexOf(zt)?at=!0:0<=Vt.indexOf(zt)&&(at=!1))),("depthTexture"in _r||"depthStencilTexture"in _r)&&(xr=!(!_r.depthTexture&&!_r.depthStencilTexture)),"depth"in _r&&(typeof _r.depth=="boolean"?rn=_r.depth:(Vr=_r.depth,Zr=!1)),"stencil"in _r&&(typeof _r.stencil=="boolean"?Zr=_r.stencil:(Rr=_r.stencil,rn=!1)),"depthStencil"in _r&&(typeof _r.depthStencil=="boolean"?rn=Zr=_r.depthStencil:(Er=_r.depthStencil,Zr=rn=!1))):Ar=an=1;var Wr=null,Rn=null,En=null,ea=null;if(Array.isArray(Yr))Wr=Yr.map(Nr);else if(Yr)Wr=[Nr(Yr)];else for(Wr=Array(hr),Yr=0;Yr<hr;++Yr)Wr[Yr]=et(Ar,an,at,zt,er);for(Ar=Ar||Wr[0].width,an=an||Wr[0].height,Vr?Rn=Nr(Vr):rn&&!Zr&&(Rn=et(Ar,an,xr,"depth","uint32")),Rr?En=Nr(Rr):Zr&&!rn&&(En=et(Ar,an,!1,"stencil","uint8")),Er?ea=Nr(Er):!Vr&&!Rr&&Zr&&rn&&(ea=et(Ar,an,xr,"depth stencil","depth stencil")),rn=null,Yr=0;Yr<Wr.length;++Yr)Sr(Wr[Yr]),Wr[Yr]&&Wr[Yr].texture&&(Zr=Ce[Wr[Yr].texture._texture.format]*je[Wr[Yr].texture._texture.type],rn===null&&(rn=Zr));return Sr(Rn),Sr(En),Sr(ea),Xe(yr),yr.width=Ar,yr.height=an,yr.colorAttachments=Wr,yr.depthAttachment=Rn,yr.stencilAttachment=En,yr.depthStencilAttachment=ea,nn.color=Wr.map(we),nn.depth=we(Rn),nn.stencil=we(En),nn.depthStencil=we(ea),nn.width=yr.width,nn.height=yr.height,ot(yr),nn}var yr=new Re;return ir.framebufferCount++,nn(fr,Fr),j(nn,{resize:function(_r,dn){var Yr=Math.max(_r|0,1),Ar=Math.max(dn|0||Yr,1);if(Yr===yr.width&&Ar===yr.height)return nn;for(var an=yr.colorAttachments,rn=0;rn<an.length;++rn)Me(an[rn],Yr,Ar);return Me(yr.depthAttachment,Yr,Ar),Me(yr.stencilAttachment,Yr,Ar),Me(yr.depthStencilAttachment,Yr,Ar),yr.width=nn.width=Yr,yr.height=nn.height=Ar,ot(yr),nn},_reglType:"framebuffer",_framebuffer:yr,destroy:function(){$e(yr),Xe(yr)},use:function(_r){yt.setFBO({framebuffer:nn},_r)}})}var yt={cur:null,next:null,dirty:!1,setFBO:null},wt=["rgba"],Vt=["rgba4","rgb565","rgb5 a1"];pt.ext_srgb&&Vt.push("srgba"),pt.ext_color_buffer_half_float&&Vt.push("rgba16f","rgb16f"),pt.webgl_color_buffer_float&&Vt.push("rgba32f");var gr=["uint8"];pt.oes_texture_half_float&&gr.push("half float","float16"),pt.oes_texture_float&&gr.push("float","float32");var wr=0,Lr={};return j(yt,{getFramebuffer:function(fr){return typeof fr=="function"&&fr._reglType==="framebuffer"&&(fr=fr._framebuffer,fr instanceof Re)?fr:null},create:st,createCube:function(fr){function Fr(yr){var _r,dn={color:null},Yr=0,Ar=null;_r="rgba";var an="uint8",rn=1;if(typeof yr=="number"?Yr=yr|0:yr?("shape"in yr?Yr=yr.shape[0]:("radius"in yr&&(Yr=yr.radius|0),"width"in yr?Yr=yr.width|0:"height"in yr&&(Yr=yr.height|0)),("color"in yr||"colors"in yr)&&(Ar=yr.color||yr.colors),Ar||("colorCount"in yr&&(rn=yr.colorCount|0),"colorType"in yr&&(an=yr.colorType),"colorFormat"in yr&&(_r=yr.colorFormat)),"depth"in yr&&(dn.depth=yr.depth),"stencil"in yr&&(dn.stencil=yr.stencil),"depthStencil"in yr&&(dn.depthStencil=yr.depthStencil)):Yr=1,Ar)if(Array.isArray(Ar))for(yr=[],_r=0;_r<Ar.length;++_r)yr[_r]=Ar[_r];else yr=[Ar];else for(yr=Array(rn),Ar={radius:Yr,format:_r,type:an},_r=0;_r<rn;++_r)yr[_r]=ar.createCube(Ar);for(dn.color=Array(yr.length),_r=0;_r<yr.length;++_r)rn=yr[_r],Yr=Yr||rn.width,dn.color[_r]={target:34069,data:yr[_r]};for(_r=0;6>_r;++_r){for(rn=0;rn<yr.length;++rn)dn.color[rn].target=34069+_r;0<_r&&(dn.depth=nn[0].depth,dn.stencil=nn[0].stencil,dn.depthStencil=nn[0].depthStencil),nn[_r]?nn[_r](dn):nn[_r]=st(dn)}return j(Fr,{width:Yr,height:Yr,color:yr})}var nn=Array(6);return Fr(fr),j(Fr,{faces:nn,resize:function(yr){var _r=yr|0;if(_r===Fr.width)return Fr;var dn=Fr.color;for(yr=0;yr<dn.length;++yr)dn[yr].resize(_r);for(yr=0;6>yr;++yr)nn[yr].resize(_r);return Fr.width=Fr.height=_r,Fr},_reglType:"framebufferCube",destroy:function(){nn.forEach(function(yr){yr.destroy()})}})},clear:function(){ge(Lr).forEach($e)},restore:function(){yt.cur=null,yt.next=null,yt.dirty=!0,ge(Lr).forEach(function(fr){fr.framebuffer=Je.createFramebuffer(),ot(fr)})}})}function O(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function F(Je,pt,Et,ar,vr,ir,dr){function Pr(ot){if(ot!==$e.currentVAO){var st=pt.oes_vertex_array_object;ot?st.bindVertexArrayOES(ot.vao):st.bindVertexArrayOES(null),$e.currentVAO=ot}}function Sr(ot){if(ot!==$e.currentVAO){if(ot)ot.bindAttrs();else{for(var st=pt.angle_instanced_arrays,yt=0;yt<Me.length;++yt){var wt=Me[yt];wt.buffer?(Je.enableVertexAttribArray(yt),wt.buffer.bind(),Je.vertexAttribPointer(yt,wt.size,wt.type,wt.normalized,wt.stride,wt.offfset),st&&wt.divisor&&st.vertexAttribDivisorANGLE(yt,wt.divisor)):(Je.disableVertexAttribArray(yt),Je.vertexAttrib4f(yt,wt.x,wt.y,wt.z,wt.w))}dr.elements?Je.bindBuffer(34963,dr.elements.buffer.buffer):Je.bindBuffer(34963,null)}$e.currentVAO=ot}}function tr(){ge(Xe).forEach(function(ot){ot.destroy()})}function Nr(){this.id=++Re,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var ot=pt.oes_vertex_array_object;this.vao=ot?ot.createVertexArrayOES():null,Xe[this.id]=this,this.buffers=[]}function et(){pt.oes_vertex_array_object&&ge(Xe).forEach(function(ot){ot.refresh()})}var we=Et.maxAttributes,Me=Array(we);for(Et=0;Et<we;++Et)Me[Et]=new O;var Re=0,Xe={},$e={Record:O,scope:{},state:Me,currentVAO:null,targetVAO:null,restore:pt.oes_vertex_array_object?et:function(){},createVAO:function(ot){function st(wt){var Vt;Array.isArray(wt)?(Vt=wt,yt.elements&&yt.ownsElements&&yt.elements.destroy(),yt.elements=null,yt.ownsElements=!1,yt.offset=0,yt.count=0,yt.instances=-1,yt.primitive=4):(wt.elements?(Vt=wt.elements,yt.ownsElements?(typeof Vt=="function"&&Vt._reglType==="elements"?yt.elements.destroy():yt.elements(Vt),yt.ownsElements=!1):ir.getElements(wt.elements)?(yt.elements=wt.elements,yt.ownsElements=!1):(yt.elements=ir.create(wt.elements),yt.ownsElements=!0)):(yt.elements=null,yt.ownsElements=!1),Vt=wt.attributes,yt.offset=0,yt.count=-1,yt.instances=-1,yt.primitive=4,yt.elements&&(yt.count=yt.elements._elements.vertCount,yt.primitive=yt.elements._elements.primType),"offset"in wt&&(yt.offset=wt.offset|0),"count"in wt&&(yt.count=wt.count|0),"instances"in wt&&(yt.instances=wt.instances|0),"primitive"in wt&&(yt.primitive=De[wt.primitive])),wt={};var gr=yt.attributes;gr.length=Vt.length;for(var wr=0;wr<Vt.length;++wr){var Lr=Vt[wr],fr=gr[wr]=new O,Fr=Lr.data||Lr;if(Array.isArray(Fr)||he(Fr)||g(Fr)){var nn;yt.buffers[wr]&&(nn=yt.buffers[wr],he(Fr)&&nn._buffer.byteLength>=Fr.byteLength?nn.subdata(Fr):(nn.destroy(),yt.buffers[wr]=null)),yt.buffers[wr]||(nn=yt.buffers[wr]=vr.create(Lr,34962,!1,!0)),fr.buffer=vr.getBuffer(nn),fr.size=fr.buffer.dimension|0,fr.normalized=!1,fr.type=fr.buffer.dtype,fr.offset=0,fr.stride=0,fr.divisor=0,fr.state=1,wt[wr]=1}else vr.getBuffer(Lr)?(fr.buffer=vr.getBuffer(Lr),fr.size=fr.buffer.dimension|0,fr.normalized=!1,fr.type=fr.buffer.dtype,fr.offset=0,fr.stride=0,fr.divisor=0,fr.state=1):vr.getBuffer(Lr.buffer)?(fr.buffer=vr.getBuffer(Lr.buffer),fr.size=(+Lr.size||fr.buffer.dimension)|0,fr.normalized=!!Lr.normalized||!1,fr.type="type"in Lr?Ae[Lr.type]:fr.buffer.dtype,fr.offset=(Lr.offset||0)|0,fr.stride=(Lr.stride||0)|0,fr.divisor=(Lr.divisor||0)|0,fr.state=1):"x"in Lr&&(fr.x=+Lr.x||0,fr.y=+Lr.y||0,fr.z=+Lr.z||0,fr.w=+Lr.w||0,fr.state=2)}for(nn=0;nn<yt.buffers.length;++nn)!wt[nn]&&yt.buffers[nn]&&(yt.buffers[nn].destroy(),yt.buffers[nn]=null);return yt.refresh(),st}var yt=new Nr;return ar.vaoCount+=1,st.destroy=function(){for(var wt=0;wt<yt.buffers.length;++wt)yt.buffers[wt]&&yt.buffers[wt].destroy();yt.buffers.length=0,yt.ownsElements&&(yt.elements.destroy(),yt.elements=null,yt.ownsElements=!1),yt.destroy()},st._vao=yt,st._reglType="vao",st(ot)},getVAO:function(ot){return typeof ot=="function"&&ot._vao?ot._vao:null},destroyBuffer:function(ot){for(var st=0;st<Me.length;++st){var yt=Me[st];yt.buffer===ot&&(Je.disableVertexAttribArray(st),yt.buffer=null)}},setVAO:pt.oes_vertex_array_object?Pr:Sr,clear:pt.oes_vertex_array_object?tr:function(){}};return Nr.prototype.bindAttrs=function(){for(var ot=pt.angle_instanced_arrays,st=this.attributes,yt=0;yt<st.length;++yt){var wt=st[yt];wt.buffer?(Je.enableVertexAttribArray(yt),Je.bindBuffer(34962,wt.buffer.buffer),Je.vertexAttribPointer(yt,wt.size,wt.type,wt.normalized,wt.stride,wt.offset),ot&&wt.divisor&&ot.vertexAttribDivisorANGLE(yt,wt.divisor)):(Je.disableVertexAttribArray(yt),Je.vertexAttrib4f(yt,wt.x,wt.y,wt.z,wt.w))}for(ot=st.length;ot<we;++ot)Je.disableVertexAttribArray(ot);(ot=ir.getElements(this.elements))?Je.bindBuffer(34963,ot.buffer.buffer):Je.bindBuffer(34963,null)},Nr.prototype.refresh=function(){var ot=pt.oes_vertex_array_object;ot&&(ot.bindVertexArrayOES(this.vao),this.bindAttrs(),$e.currentVAO=null,ot.bindVertexArrayOES(null))},Nr.prototype.destroy=function(){if(this.vao){var ot=pt.oes_vertex_array_object;this===$e.currentVAO&&($e.currentVAO=null,ot.bindVertexArrayOES(null)),ot.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),Xe[this.id]&&(delete Xe[this.id],--ar.vaoCount)},$e}function G(Je,pt,Et,ar){function vr(Re,Xe,$e,ot){this.name=Re,this.id=Xe,this.location=$e,this.info=ot}function ir(Re,Xe){for(var $e=0;$e<Re.length;++$e)if(Re[$e].id===Xe.id){Re[$e].location=Xe.location;return}Re.push(Xe)}function dr(Re,Xe,$e){$e=Re===35632?tr:Nr;var ot=$e[Xe];if(!ot){var st=pt.str(Xe),ot=Je.createShader(Re);Je.shaderSource(ot,st),Je.compileShader(ot),$e[Xe]=ot}return ot}function Pr(Re,Xe){this.id=Me++,this.fragId=Re,this.vertId=Xe,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,ar.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Sr(Re,Xe,$e){var ot;ot=dr(35632,Re.fragId);var st=dr(35633,Re.vertId);if(Xe=Re.program=Je.createProgram(),Je.attachShader(Xe,ot),Je.attachShader(Xe,st),$e)for(ot=0;ot<$e.length;++ot)st=$e[ot],Je.bindAttribLocation(Xe,st[0],st[1]);Je.linkProgram(Xe),st=Je.getProgramParameter(Xe,35718),ar.profile&&(Re.stats.uniformsCount=st);var yt=Re.uniforms;for(ot=0;ot<st;++ot)if($e=Je.getActiveUniform(Xe,ot)){if(1<$e.size)for(var wt=0;wt<$e.size;++wt){var Vt=$e.name.replace("[0]","["+wt+"]");ir(yt,new vr(Vt,pt.id(Vt),Je.getUniformLocation(Xe,Vt),$e))}wt=$e.name,1<$e.size&&(wt=wt.replace("[0]","")),ir(yt,new vr(wt,pt.id(wt),Je.getUniformLocation(Xe,wt),$e))}for(st=Je.getProgramParameter(Xe,35721),ar.profile&&(Re.stats.attributesCount=st),Re=Re.attributes,ot=0;ot<st;++ot)($e=Je.getActiveAttrib(Xe,ot))&&ir(Re,new vr($e.name,pt.id($e.name),Je.getAttribLocation(Xe,$e.name),$e))}var tr={},Nr={},et={},we=[],Me=0;return ar.profile&&(Et.getMaxUniformsCount=function(){var Re=0;return we.forEach(function(Xe){Xe.stats.uniformsCount>Re&&(Re=Xe.stats.uniformsCount)}),Re},Et.getMaxAttributesCount=function(){var Re=0;return we.forEach(function(Xe){Xe.stats.attributesCount>Re&&(Re=Xe.stats.attributesCount)}),Re}),{clear:function(){var Re=Je.deleteShader.bind(Je);ge(tr).forEach(Re),tr={},ge(Nr).forEach(Re),Nr={},we.forEach(function(Xe){Je.deleteProgram(Xe.program)}),we.length=0,et={},Et.shaderCount=0},program:function(Re,Xe,$e,ot){var st=et[Xe];st||(st=et[Xe]={});var yt=st[Re];if(yt&&(yt.refCount++,!ot))return yt;var wt=new Pr(Xe,Re);return Et.shaderCount++,Sr(wt,$e,ot),yt||(st[Re]=wt),we.push(wt),j(wt,{destroy:function(){if(wt.refCount--,0>=wt.refCount){Je.deleteProgram(wt.program);var Vt=we.indexOf(wt);we.splice(Vt,1),Et.shaderCount--}0>=st[wt.vertId].refCount&&(Je.deleteShader(Nr[wt.vertId]),delete Nr[wt.vertId],delete et[wt.fragId][wt.vertId]),Object.keys(et[wt.fragId]).length||(Je.deleteShader(tr[wt.fragId]),delete tr[wt.fragId],delete et[wt.fragId])}})},restore:function(){tr={},Nr={};for(var Re=0;Re<we.length;++Re)Sr(we[Re],null,we[Re].attributes.map(function(Xe){return[Xe.location,Xe.name]}))},shader:dr,frag:-1,vert:-1}}function W(Je,pt,Et,ar,vr,ir,dr){function Pr(tr){var Nr;Nr=pt.next===null?5121:pt.next.colorAttachments[0].texture._texture.type;var et=0,we=0,Me=ar.framebufferWidth,Re=ar.framebufferHeight,Xe=null;return he(tr)?Xe=tr:tr&&(et=tr.x|0,we=tr.y|0,Me=(tr.width||ar.framebufferWidth-et)|0,Re=(tr.height||ar.framebufferHeight-we)|0,Xe=tr.data||null),Et(),tr=Me*Re*4,Xe||(Nr===5121?Xe=new Uint8Array(tr):Nr===5126&&(Xe=Xe||new Float32Array(tr))),Je.pixelStorei(3333,4),Je.readPixels(et,we,Me,Re,6408,Nr,Xe),Xe}function Sr(tr){var Nr;return pt.setFBO({framebuffer:tr.framebuffer},function(){Nr=Pr(tr)}),Nr}return function(tr){return tr&&"framebuffer"in tr?Sr(tr):Pr(tr)}}function q(Je){return Array.prototype.slice.call(Je)}function J(Je){return q(Je).join("")}function X(){function Je(){var Pr=[],Sr=[];return j(function(){Pr.push.apply(Pr,q(arguments))},{def:function(){var tr="v"+Et++;return Sr.push(tr),0<arguments.length&&(Pr.push(tr,"="),Pr.push.apply(Pr,q(arguments)),Pr.push(";")),tr},toString:function(){return J([0<Sr.length?"var "+Sr.join(",")+";":"",J(Pr)])}})}function pt(){function Pr(we,Me){tr(we,Me,"=",Sr.def(we,Me),";")}var Sr=Je(),tr=Je(),Nr=Sr.toString,et=tr.toString;return j(function(){Sr.apply(Sr,q(arguments))},{def:Sr.def,entry:Sr,exit:tr,save:Pr,set:function(we,Me,Re){Pr(we,Me),Sr(we,Me,"=",Re,";")},toString:function(){return Nr()+et()}})}var Et=0,ar=[],vr=[],ir=Je(),dr={};return{global:ir,link:function(Pr){for(var Sr=0;Sr<vr.length;++Sr)if(vr[Sr]===Pr)return ar[Sr];return Sr="g"+Et++,ar.push(Sr),vr.push(Pr),Sr},block:Je,proc:function(Pr,Sr){function tr(){var Me="a"+Nr.length;return Nr.push(Me),Me}var Nr=[];Sr=Sr||0;for(var et=0;et<Sr;++et)tr();var et=pt(),we=et.toString;return dr[Pr]=j(et,{arg:tr,toString:function(){return J(["function(",Nr.join(),"){",we(),"}"])}})},scope:pt,cond:function(){var Pr=J(arguments),Sr=pt(),tr=pt(),Nr=Sr.toString,et=tr.toString;return j(Sr,{then:function(){return Sr.apply(Sr,q(arguments)),this},else:function(){return tr.apply(tr,q(arguments)),this},toString:function(){var we=et();return we&&(we="else{"+we+"}"),J(["if(",Pr,"){",Nr(),"}",we])}})},compile:function(){var Pr=['"use strict";',ir,"return {"];Object.keys(dr).forEach(function(tr){Pr.push('"',tr,'":',dr[tr].toString(),",")}),Pr.push("}");var Sr=J(Pr).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`);return Function.apply(null,ar.concat(Sr)).apply(null,vr)}}}function Z(Je){return Array.isArray(Je)||he(Je)||g(Je)}function se(Je){return Je.sort(function(pt,Et){return pt==="viewport"?-1:Et==="viewport"?1:pt<Et?-1:1})}function le(Je,pt,Et,ar){this.thisDep=Je,this.contextDep=pt,this.propDep=Et,this.append=ar}function oe(Je){return Je&&!(Je.thisDep||Je.contextDep||Je.propDep)}function U(Je){return new le(!1,!1,!1,Je)}function V(Je,pt){var Et=Je.type;if(Et===0)return Et=Je.data.length,new le(!0,1<=Et,2<=Et,pt);if(Et===4)return Et=Je.data,new le(Et.thisDep,Et.contextDep,Et.propDep,pt);if(Et===5)return new le(!1,!1,!1,pt);if(Et===6){for(var ar=Et=!1,vr=!1,ir=0;ir<Je.data.length;++ir){var dr=Je.data[ir];dr.type===1?vr=!0:dr.type===2?ar=!0:dr.type===3?Et=!0:dr.type===0?(Et=!0,dr=dr.data,1<=dr&&(ar=!0),2<=dr&&(vr=!0)):dr.type===4&&(Et=Et||dr.data.thisDep,ar=ar||dr.data.contextDep,vr=vr||dr.data.propDep)}return new le(Et,ar,vr,pt)}return new le(Et===3,Et===2,Et===1,pt)}function re(Je,pt,Et,ar,vr,ir,dr,Pr,Sr,tr,Nr,et,we,Me,Re){function Xe(ur){return ur.replace(".","_")}function $e(ur,Dr,sn){var tn=Xe(ur);Bn.push(ur),Fn[tn]=$r[tn]=!!sn,ca[tn]=Dr}function ot(ur,Dr,sn){var tn=Xe(ur);Bn.push(ur),Array.isArray(sn)?($r[tn]=sn.slice(),Fn[tn]=sn.slice()):$r[tn]=Fn[tn]=sn,ta[tn]=Dr}function st(){var ur=X(),Dr=ur.link,sn=ur.global;ur.id=da++,ur.batchId="0";var tn=Dr(Un),mn=ur.shared={props:"a0"};Object.keys(Un).forEach(function(zr){mn[zr]=sn.def(tn,".",zr)});var wn=ur.next={},gn=ur.current={};Object.keys(ta).forEach(function(zr){Array.isArray($r[zr])&&(wn[zr]=sn.def(mn.next,".",zr),gn[zr]=sn.def(mn.current,".",zr))});var mr=ur.constants={};Object.keys(la).forEach(function(zr){mr[zr]=sn.def(JSON.stringify(la[zr]))}),ur.invoke=function(zr,jr){switch(jr.type){case 0:var Sn=["this",mn.context,mn.props,ur.batchId];return zr.def(Dr(jr.data),".call(",Sn.slice(0,Math.max(jr.data.length+1,4)),")");case 1:return zr.def(mn.props,jr.data);case 2:return zr.def(mn.context,jr.data);case 3:return zr.def("this",jr.data);case 4:return jr.data.append(ur,zr),jr.data.ref;case 5:return jr.data.toString();case 6:return jr.data.map(function(On){return ur.invoke(zr,On)})}},ur.attribCache={};var rr={};return ur.scopeAttrib=function(zr){if(zr=pt.id(zr),zr in rr)return rr[zr];var jr=tr.scope[zr];return jr||(jr=tr.scope[zr]=new ia),rr[zr]=Dr(jr)},ur}function yt(ur){var Dr=ur.static;ur=ur.dynamic;var sn;if("profile"in Dr){var tn=!!Dr.profile;sn=U(function(wn,gn){return tn}),sn.enable=tn}else if("profile"in ur){var mn=ur.profile;sn=V(mn,function(wn,gn){return wn.invoke(gn,mn)})}return sn}function wt(ur,Dr){var sn=ur.static,tn=ur.dynamic;if("framebuffer"in sn){var mn=sn.framebuffer;return mn?(mn=Pr.getFramebuffer(mn),U(function(gn,mr){var rr=gn.link(mn),zr=gn.shared;return mr.set(zr.framebuffer,".next",rr),zr=zr.context,mr.set(zr,".framebufferWidth",rr+".width"),mr.set(zr,".framebufferHeight",rr+".height"),rr})):U(function(gn,mr){var rr=gn.shared;return mr.set(rr.framebuffer,".next","null"),rr=rr.context,mr.set(rr,".framebufferWidth",rr+".drawingBufferWidth"),mr.set(rr,".framebufferHeight",rr+".drawingBufferHeight"),"null"})}if("framebuffer"in tn){var wn=tn.framebuffer;return V(wn,function(gn,mr){var jr=gn.invoke(mr,wn),rr=gn.shared,zr=rr.framebuffer,jr=mr.def(zr,".getFramebuffer(",jr,")");return mr.set(zr,".next",jr),rr=rr.context,mr.set(rr,".framebufferWidth",jr+"?"+jr+".width:"+rr+".drawingBufferWidth"),mr.set(rr,".framebufferHeight",jr+"?"+jr+".height:"+rr+".drawingBufferHeight"),jr})}return null}function Vt(ur,Dr,sn){function tn(mr){if(mr in mn){var rr=mn[mr];mr=!0;var zr=rr.x|0,jr=rr.y|0,Sn,On;return"width"in rr?Sn=rr.width|0:mr=!1,"height"in rr?On=rr.height|0:mr=!1,new le(!mr&&Dr&&Dr.thisDep,!mr&&Dr&&Dr.contextDep,!mr&&Dr&&Dr.propDep,function(Zn,Hn){var pn=Zn.shared.context,In=Sn;"width"in rr||(In=Hn.def(pn,".","framebufferWidth","-",zr));var Yn=On;return"height"in rr||(Yn=Hn.def(pn,".","framebufferHeight","-",jr)),[zr,jr,In,Yn]})}if(mr in wn){var aa=wn[mr];return mr=V(aa,function(Zn,Hn){var Ha=Zn.invoke(Hn,aa),pn=Zn.shared.context,In=Hn.def(Ha,".x|0"),Yn=Hn.def(Ha,".y|0"),ua=Hn.def('"width" in ',Ha,"?",Ha,".width|0:","(",pn,".","framebufferWidth","-",In,")"),Ha=Hn.def('"height" in ',Ha,"?",Ha,".height|0:","(",pn,".","framebufferHeight","-",Yn,")");return[In,Yn,ua,Ha]}),Dr&&(mr.thisDep=mr.thisDep||Dr.thisDep,mr.contextDep=mr.contextDep||Dr.contextDep,mr.propDep=mr.propDep||Dr.propDep),mr}return Dr?new le(Dr.thisDep,Dr.contextDep,Dr.propDep,function(Zn,Hn){var pn=Zn.shared.context;return[0,0,Hn.def(pn,".","framebufferWidth"),Hn.def(pn,".","framebufferHeight")]}):null}var mn=ur.static,wn=ur.dynamic;if(ur=tn("viewport")){var gn=ur;ur=new le(ur.thisDep,ur.contextDep,ur.propDep,function(mr,rr){var zr=gn.append(mr,rr),jr=mr.shared.context;return rr.set(jr,".viewportWidth",zr[2]),rr.set(jr,".viewportHeight",zr[3]),zr})}return{viewport:ur,scissor_box:tn("scissor.box")}}function gr(ur,Dr){var sn=ur.static;if(typeof sn.frag=="string"&&typeof sn.vert=="string"){if(0<Object.keys(Dr.dynamic).length)return null;var sn=Dr.static,tn=Object.keys(sn);if(0<tn.length&&typeof sn[tn[0]]=="number"){for(var mn=[],wn=0;wn<tn.length;++wn)mn.push([sn[tn[wn]]|0,tn[wn]]);return mn}}return null}function wr(ur,Dr,sn){function tn(zr){if(zr in mn){var jr=pt.id(mn[zr]);return zr=U(function(){return jr}),zr.id=jr,zr}if(zr in wn){var Sn=wn[zr];return V(Sn,function(On,aa){var Zn=On.invoke(aa,Sn);return aa.def(On.shared.strings,".id(",Zn,")")})}return null}var mn=ur.static,wn=ur.dynamic,gn=tn("frag"),mr=tn("vert"),rr=null;return oe(gn)&&oe(mr)?(rr=Nr.program(mr.id,gn.id,null,sn),ur=U(function(zr,jr){return zr.link(rr)})):ur=new le(gn&&gn.thisDep||mr&&mr.thisDep,gn&&gn.contextDep||mr&&mr.contextDep,gn&&gn.propDep||mr&&mr.propDep,function(zr,jr){var Sn=zr.shared.shader,On;On=gn?gn.append(zr,jr):jr.def(Sn,".","frag");var aa;return aa=mr?mr.append(zr,jr):jr.def(Sn,".","vert"),jr.def(Sn+".program("+aa+","+On+")")}),{frag:gn,vert:mr,progVar:ur,program:rr}}function Lr(ur,Dr){function sn(Zn,Hn){if(Zn in tn){var pn=tn[Zn]|0;return Hn?wn.offset=pn:wn.instances=pn,U(function(Yn,ua){return Hn&&(Yn.OFFSET=pn),pn})}if(Zn in mn){var In=mn[Zn];return V(In,function(Yn,ua){var Ha=Yn.invoke(ua,In);return Hn&&(Yn.OFFSET=Ha),Ha})}if(Hn){if(rr)return U(function(Yn,ua){return Yn.OFFSET=0});if(gn)return new le(mr.thisDep,mr.contextDep,mr.propDep,function(Yn,ua){return ua.def(Yn.shared.vao+".currentVAO?"+Yn.shared.vao+".currentVAO.offset:0")})}else if(gn)return new le(mr.thisDep,mr.contextDep,mr.propDep,function(Yn,ua){return ua.def(Yn.shared.vao+".currentVAO?"+Yn.shared.vao+".currentVAO.instances:-1")});return null}var tn=ur.static,mn=ur.dynamic,wn={},gn=!1,mr=function(){if("vao"in tn){var Zn=tn.vao;return Zn!==null&&tr.getVAO(Zn)===null&&(Zn=tr.createVAO(Zn)),gn=!0,wn.vao=Zn,U(function(pn){var In=tr.getVAO(Zn);return In?pn.link(In):"null"})}if("vao"in mn){gn=!0;var Hn=mn.vao;return V(Hn,function(pn,In){var Yn=pn.invoke(In,Hn);return In.def(pn.shared.vao+".getVAO("+Yn+")")})}return null}(),rr=!1,zr=function(){if("elements"in tn){var Zn=tn.elements;if(wn.elements=Zn,Z(Zn)){var Hn=wn.elements=ir.create(Zn,!0),Zn=ir.getElements(Hn);rr=!0}else Zn&&(Zn=ir.getElements(Zn),rr=!0);return Hn=U(function(In,Yn){if(Zn){var ua=In.link(Zn);return In.ELEMENTS=ua}return In.ELEMENTS=null}),Hn.value=Zn,Hn}if("elements"in mn){rr=!0;var pn=mn.elements;return V(pn,function(In,Yn){var ua=In.shared,ka=ua.isBufferArgs,ua=ua.elements,Ys=In.invoke(Yn,pn),Ha=Yn.def("null"),ka=Yn.def(ka,"(",Ys,")"),Ys=In.cond(ka).then(Ha,"=",ua,".createStream(",Ys,");").else(Ha,"=",ua,".getElements(",Ys,");");return Yn.entry(Ys),Yn.exit(In.cond(ka).then(ua,".destroyStream(",Ha,");")),In.ELEMENTS=Ha})}return gn?new le(mr.thisDep,mr.contextDep,mr.propDep,function(In,Yn){return Yn.def(In.shared.vao+".currentVAO?"+In.shared.elements+".getElements("+In.shared.vao+".currentVAO.elements):null")}):null}(),jr=sn("offset",!0),Sn=function(){if("primitive"in tn){var Zn=tn.primitive;return wn.primitive=Zn,U(function(pn,In){return De[Zn]})}if("primitive"in mn){var Hn=mn.primitive;return V(Hn,function(pn,In){var Yn=pn.constants.primTypes,ua=pn.invoke(In,Hn);return In.def(Yn,"[",ua,"]")})}return rr?oe(zr)?zr.value?U(function(pn,In){return In.def(pn.ELEMENTS,".primType")}):U(function(){return 4}):new le(zr.thisDep,zr.contextDep,zr.propDep,function(pn,In){var Yn=pn.ELEMENTS;return In.def(Yn,"?",Yn,".primType:",4)}):gn?new le(mr.thisDep,mr.contextDep,mr.propDep,function(pn,In){return In.def(pn.shared.vao+".currentVAO?"+pn.shared.vao+".currentVAO.primitive:4")}):null}(),On=function(){if("count"in tn){var Zn=tn.count|0;return wn.count=Zn,U(function(){return Zn})}if("count"in mn){var Hn=mn.count;return V(Hn,function(pn,In){return pn.invoke(In,Hn)})}return rr?oe(zr)?zr?jr?new le(jr.thisDep,jr.contextDep,jr.propDep,function(pn,In){return In.def(pn.ELEMENTS,".vertCount-",pn.OFFSET)}):U(function(pn,In){return In.def(pn.ELEMENTS,".vertCount")}):U(function(){return-1}):new le(zr.thisDep||jr.thisDep,zr.contextDep||jr.contextDep,zr.propDep||jr.propDep,function(pn,In){var Yn=pn.ELEMENTS;return pn.OFFSET?In.def(Yn,"?",Yn,".vertCount-",pn.OFFSET,":-1"):In.def(Yn,"?",Yn,".vertCount:-1")}):gn?new le(mr.thisDep,mr.contextDep,mr.propDep,function(pn,In){return In.def(pn.shared.vao,".currentVAO?",pn.shared.vao,".currentVAO.count:-1")}):null}(),aa=sn("instances",!1);return{elements:zr,primitive:Sn,count:On,instances:aa,offset:jr,vao:mr,vaoActive:gn,elementsActive:rr,static:wn}}function fr(ur,Dr){var sn=ur.static,tn=ur.dynamic,mn={};return Bn.forEach(function(wn){function gn(rr,zr){if(wn in sn){var jr=rr(sn[wn]);mn[mr]=U(function(){return jr})}else if(wn in tn){var Sn=tn[wn];mn[mr]=V(Sn,function(On,aa){return zr(On,aa,On.invoke(aa,Sn))})}}var mr=Xe(wn);switch(wn){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return gn(function(rr){return rr},function(rr,zr,jr){return jr});case"depth.func":return gn(function(rr){return Tt[rr]},function(rr,zr,jr){return zr.def(rr.constants.compareFuncs,"[",jr,"]")});case"depth.range":return gn(function(rr){return rr},function(rr,zr,jr){return rr=zr.def("+",jr,"[0]"),zr=zr.def("+",jr,"[1]"),[rr,zr]});case"blend.func":return gn(function(rr){return[Pt["srcRGB"in rr?rr.srcRGB:rr.src],Pt["dstRGB"in rr?rr.dstRGB:rr.dst],Pt["srcAlpha"in rr?rr.srcAlpha:rr.src],Pt["dstAlpha"in rr?rr.dstAlpha:rr.dst]]},function(rr,zr,jr){function Sn(Hn,pn){return zr.def('"',Hn,pn,'" in ',jr,"?",jr,".",Hn,pn,":",jr,".",Hn)}rr=rr.constants.blendFuncs;var On=Sn("src","RGB"),Zn=Sn("dst","RGB"),On=zr.def(rr,"[",On,"]"),aa=zr.def(rr,"[",Sn("src","Alpha"),"]"),Zn=zr.def(rr,"[",Zn,"]");return rr=zr.def(rr,"[",Sn("dst","Alpha"),"]"),[On,Zn,aa,rr]});case"blend.equation":return gn(function(rr){if(typeof rr=="string")return[Aa[rr],Aa[rr]];if(typeof rr=="object")return[Aa[rr.rgb],Aa[rr.alpha]]},function(rr,zr,jr){var Sn=rr.constants.blendEquations,On=zr.def(),aa=zr.def();return rr=rr.cond("typeof ",jr,'==="string"'),rr.then(On,"=",aa,"=",Sn,"[",jr,"];"),rr.else(On,"=",Sn,"[",jr,".rgb];",aa,"=",Sn,"[",jr,".alpha];"),zr(rr),[On,aa]});case"blend.color":return gn(function(rr){return i(4,function(zr){return+rr[zr]})},function(rr,zr,jr){return i(4,function(Sn){return zr.def("+",jr,"[",Sn,"]")})});case"stencil.mask":return gn(function(rr){return rr|0},function(rr,zr,jr){return zr.def(jr,"|0")});case"stencil.func":return gn(function(rr){return[Tt[rr.cmp||"keep"],rr.ref||0,"mask"in rr?rr.mask:-1]},function(rr,zr,jr){rr=zr.def('"cmp" in ',jr,"?",rr.constants.compareFuncs,"[",jr,".cmp]",":",7680);var Sn=zr.def(jr,".ref|0");return zr=zr.def('"mask" in ',jr,"?",jr,".mask|0:-1"),[rr,Sn,zr]});case"stencil.opFront":case"stencil.opBack":return gn(function(rr){return[wn==="stencil.opBack"?1029:1028,Ot[rr.fail||"keep"],Ot[rr.zfail||"keep"],Ot[rr.zpass||"keep"]]},function(rr,zr,jr){function Sn(aa){return zr.def('"',aa,'" in ',jr,"?",On,"[",jr,".",aa,"]:",7680)}var On=rr.constants.stencilOps;return[wn==="stencil.opBack"?1029:1028,Sn("fail"),Sn("zfail"),Sn("zpass")]});case"polygonOffset.offset":return gn(function(rr){return[rr.factor|0,rr.units|0]},function(rr,zr,jr){return rr=zr.def(jr,".factor|0"),zr=zr.def(jr,".units|0"),[rr,zr]});case"cull.face":return gn(function(rr){var zr=0;return rr==="front"?zr=1028:rr==="back"&&(zr=1029),zr},function(rr,zr,jr){return zr.def(jr,'==="front"?',1028,":",1029)});case"lineWidth":return gn(function(rr){return rr},function(rr,zr,jr){return jr});case"frontFace":return gn(function(rr){return Kt[rr]},function(rr,zr,jr){return zr.def(jr+'==="cw"?2304:2305')});case"colorMask":return gn(function(rr){return rr.map(function(zr){return!!zr})},function(rr,zr,jr){return i(4,function(Sn){return"!!"+jr+"["+Sn+"]"})});case"sample.coverage":return gn(function(rr){return["value"in rr?rr.value:1,!!rr.invert]},function(rr,zr,jr){return rr=zr.def('"value" in ',jr,"?+",jr,".value:1"),zr=zr.def("!!",jr,".invert"),[rr,zr]})}}),mn}function Fr(ur,Dr){var sn=ur.static,tn=ur.dynamic,mn={};return Object.keys(sn).forEach(function(wn){var gn=sn[wn],mr;if(typeof gn=="number"||typeof gn=="boolean")mr=U(function(){return gn});else if(typeof gn=="function"){var rr=gn._reglType;rr==="texture2d"||rr==="textureCube"?mr=U(function(zr){return zr.link(gn)}):(rr==="framebuffer"||rr==="framebufferCube")&&(mr=U(function(zr){return zr.link(gn.color[0])}))}else _(gn)&&(mr=U(function(zr){return zr.global.def("[",i(gn.length,function(jr){return gn[jr]}),"]")}));mr.value=gn,mn[wn]=mr}),Object.keys(tn).forEach(function(wn){var gn=tn[wn];mn[wn]=V(gn,function(mr,rr){return mr.invoke(rr,gn)})}),mn}function nn(ur,Dr){var sn=ur.static,tn=ur.dynamic,mn={};return Object.keys(sn).forEach(function(wn){var gn=sn[wn],mr=pt.id(wn),rr=new ia;if(Z(gn))rr.state=1,rr.buffer=vr.getBuffer(vr.create(gn,34962,!1,!0)),rr.type=0;else{var zr=vr.getBuffer(gn);if(zr)rr.state=1,rr.buffer=zr,rr.type=0;else if("constant"in gn){var jr=gn.constant;rr.buffer="null",rr.state=2,typeof jr=="number"?rr.x=jr:rt.forEach(function(pn,In){In<jr.length&&(rr[pn]=jr[In])})}else{var zr=Z(gn.buffer)?vr.getBuffer(vr.create(gn.buffer,34962,!1,!0)):vr.getBuffer(gn.buffer),Sn=gn.offset|0,On=gn.stride|0,aa=gn.size|0,Zn=!!gn.normalized,Hn=0;"type"in gn&&(Hn=Ae[gn.type]),gn=gn.divisor|0,rr.buffer=zr,rr.state=1,rr.size=aa,rr.normalized=Zn,rr.type=Hn||zr.dtype,rr.offset=Sn,rr.stride=On,rr.divisor=gn}}mn[wn]=U(function(pn,In){var Yn=pn.attribCache;if(mr in Yn)return Yn[mr];var ua={isStream:!1};return Object.keys(rr).forEach(function(Ha){ua[Ha]=rr[Ha]}),rr.buffer&&(ua.buffer=pn.link(rr.buffer),ua.type=ua.type||ua.buffer+".dtype"),Yn[mr]=ua})}),Object.keys(tn).forEach(function(wn){var gn=tn[wn];mn[wn]=V(gn,function(mr,rr){function zr(Yn){rr(Zn[Yn],"=",jr,".",Yn,"|0;")}var jr=mr.invoke(rr,gn),aa=mr.shared,Sn=mr.constants,On=aa.isBufferArgs,aa=aa.buffer,Zn={isStream:rr.def(!1)},Hn=new ia;Hn.state=1,Object.keys(Hn).forEach(function(Yn){Zn[Yn]=rr.def(""+Hn[Yn])});var pn=Zn.buffer,In=Zn.type;return rr("if(",On,"(",jr,")){",Zn.isStream,"=true;",pn,"=",aa,".createStream(",34962,",",jr,");",In,"=",pn,".dtype;","}else{",pn,"=",aa,".getBuffer(",jr,");","if(",pn,"){",In,"=",pn,".dtype;",'}else if("constant" in ',jr,"){",Zn.state,"=",2,";","if(typeof "+jr+'.constant === "number"){',Zn[rt[0]],"=",jr,".constant;",rt.slice(1).map(function(Yn){return Zn[Yn]}).join("="),"=0;","}else{",rt.map(function(Yn,ua){return Zn[Yn]+"="+jr+".constant.length>"+ua+"?"+jr+".constant["+ua+"]:0;"}).join(""),"}}else{","if(",On,"(",jr,".buffer)){",pn,"=",aa,".createStream(",34962,",",jr,".buffer);","}else{",pn,"=",aa,".getBuffer(",jr,".buffer);","}",In,'="type" in ',jr,"?",Sn.glTypes,"[",jr,".type]:",pn,".dtype;",Zn.normalized,"=!!",jr,".normalized;"),zr("size"),zr("offset"),zr("stride"),zr("divisor"),rr("}}"),rr.exit("if(",Zn.isStream,"){",aa,".destroyStream(",pn,");","}"),Zn})}),mn}function yr(ur){var Dr=ur.static,sn=ur.dynamic,tn={};return Object.keys(Dr).forEach(function(mn){var wn=Dr[mn];tn[mn]=U(function(gn,mr){return typeof wn=="number"||typeof wn=="boolean"?""+wn:gn.link(wn)})}),Object.keys(sn).forEach(function(mn){var wn=sn[mn];tn[mn]=V(wn,function(gn,mr){return gn.invoke(mr,wn)})}),tn}function _r(ur,Dr,sn,tn,mn){function wn(Hn){var pn=mr[Hn];pn&&(zr[Hn]=pn)}var gn=gr(ur,Dr),On=wt(ur),mr=Vt(ur,On),rr=Lr(ur),zr=fr(ur),jr=wr(ur,mn,gn);wn("viewport"),wn(Xe("scissor.box"));var Sn=0<Object.keys(zr).length,On={framebuffer:On,draw:rr,shader:jr,state:zr,dirty:Sn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(On.profile=yt(ur),On.uniforms=Fr(sn),On.drawVAO=On.scopeVAO=rr.vao,!On.drawVAO&&jr.program&&!gn&&Et.angle_instanced_arrays&&rr.static.elements){var aa=!0;if(ur=jr.program.attributes.map(function(Hn){return Hn=Dr.static[Hn],aa=aa&&!!Hn,Hn}),aa&&0<ur.length){var Zn=tr.getVAO(tr.createVAO({attributes:ur,elements:rr.static.elements}));On.drawVAO=new le(null,null,null,function(Hn,pn){return Hn.link(Zn)}),On.useVAO=!0}}return gn?On.useVAO=!0:On.attributes=nn(Dr),On.context=yr(tn),On}function dn(ur,Dr,sn){var tn=ur.shared.context,mn=ur.scope();Object.keys(sn).forEach(function(wn){Dr.save(tn,"."+wn);var gn=sn[wn].append(ur,Dr);Array.isArray(gn)?mn(tn,".",wn,"=[",gn.join(),"];"):mn(tn,".",wn,"=",gn,";")}),Dr(mn)}function Yr(ur,Dr,sn,tn){var mr=ur.shared,mn=mr.gl,wn=mr.framebuffer,gn;pr&&(gn=Dr.def(mr.extensions,".webgl_draw_buffers"));var rr=ur.constants,mr=rr.drawBuffer,rr=rr.backBuffer;ur=sn?sn.append(ur,Dr):Dr.def(wn,".next"),tn||Dr("if(",ur,"!==",wn,".cur){"),Dr("if(",ur,"){",mn,".bindFramebuffer(",36160,",",ur,".framebuffer);"),pr&&Dr(gn,".drawBuffersWEBGL(",mr,"[",ur,".colorAttachments.length]);"),Dr("}else{",mn,".bindFramebuffer(",36160,",null);"),pr&&Dr(gn,".drawBuffersWEBGL(",rr,");"),Dr("}",wn,".cur=",ur,";"),tn||Dr("}")}function Ar(ur,Dr,sn){var tn=ur.shared,mn=tn.gl,wn=ur.current,gn=ur.next,mr=tn.current,rr=tn.next,zr=ur.cond(mr,".dirty");Bn.forEach(function(jr){if(jr=Xe(jr),!(jr in sn.state)){var Sn,On;if(jr in gn){Sn=gn[jr],On=wn[jr];var aa=i($r[jr].length,function(Zn){return zr.def(Sn,"[",Zn,"]")});zr(ur.cond(aa.map(function(Zn,Hn){return Zn+"!=="+On+"["+Hn+"]"}).join("||")).then(mn,".",ta[jr],"(",aa,");",aa.map(function(Zn,Hn){return On+"["+Hn+"]="+Zn}).join(";"),";"))}else Sn=zr.def(rr,".",jr),aa=ur.cond(Sn,"!==",mr,".",jr),zr(aa),jr in ca?aa(ur.cond(Sn).then(mn,".enable(",ca[jr],");").else(mn,".disable(",ca[jr],");"),mr,".",jr,"=",Sn,";"):aa(mn,".",ta[jr],"(",Sn,");",mr,".",jr,"=",Sn,";")}}),Object.keys(sn.state).length===0&&zr(mr,".dirty=false;"),Dr(zr)}function an(ur,Dr,sn,tn){var mn=ur.shared,wn=ur.current,gn=mn.current,mr=mn.gl;se(Object.keys(sn)).forEach(function(rr){var zr=sn[rr];if(!tn||tn(zr)){var jr=zr.append(ur,Dr);if(ca[rr]){var Sn=ca[rr];oe(zr)?jr?Dr(mr,".enable(",Sn,");"):Dr(mr,".disable(",Sn,");"):Dr(ur.cond(jr).then(mr,".enable(",Sn,");").else(mr,".disable(",Sn,");")),Dr(gn,".",rr,"=",jr,";")}else if(_(jr)){var On=wn[rr];Dr(mr,".",ta[rr],"(",jr,");",jr.map(function(aa,Zn){return On+"["+Zn+"]="+aa}).join(";"),";")}else Dr(mr,".",ta[rr],"(",jr,");",gn,".",rr,"=",jr,";")}})}function rn(ur,Dr){ya&&(ur.instancing=Dr.def(ur.shared.extensions,".angle_instanced_arrays"))}function Zr(ur,Dr,sn,tn,mn){function wn(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}function gn(Hn){aa=Dr.def(),Hn(aa,"=",wn(),";"),typeof mn=="string"?Hn(jr,".count+=",mn,";"):Hn(jr,".count++;"),Me&&(tn?(Zn=Dr.def(),Hn(Zn,"=",On,".getNumPendingQueries();")):Hn(On,".beginQuery(",jr,");"))}function mr(Hn){Hn(jr,".cpuTime+=",wn(),"-",aa,";"),Me&&(tn?Hn(On,".pushScopeStats(",Zn,",",On,".getNumPendingQueries(),",jr,");"):Hn(On,".endQuery();"))}function rr(Hn){var pn=Dr.def(Sn,".profile");Dr(Sn,".profile=",Hn,";"),Dr.exit(Sn,".profile=",pn,";")}var zr=ur.shared,jr=ur.stats,Sn=zr.current,On=zr.timer;sn=sn.profile;var aa,Zn;if(sn){if(oe(sn)){sn.enable?(gn(Dr),mr(Dr.exit),rr("true")):rr("false");return}sn=sn.append(ur,Dr),rr(sn)}else sn=Dr.def(Sn,".profile");zr=ur.block(),gn(zr),Dr("if(",sn,"){",zr,"}"),ur=ur.block(),mr(ur),Dr.exit("if(",sn,"){",ur,"}")}function at(ur,Dr,sn,tn,mn){function wn(rr){switch(rr){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function gn(rr,zr,jr){function Sn(){Dr("if(!",Hn,".buffer){",aa,".enableVertexAttribArray(",Zn,");}");var ua=jr.type,Ha;Ha=jr.size?Dr.def(jr.size,"||",zr):zr,Dr("if(",Hn,".type!==",ua,"||",Hn,".size!==",Ha,"||",Yn.map(function(ka){return Hn+"."+ka+"!=="+jr[ka]}).join("||"),"){",aa,".bindBuffer(",34962,",",pn,".buffer);",aa,".vertexAttribPointer(",[Zn,Ha,ua,jr.normalized,jr.stride,jr.offset],");",Hn,".type=",ua,";",Hn,".size=",Ha,";",Yn.map(function(ka){return Hn+"."+ka+"="+jr[ka]+";"}).join(""),"}"),ya&&(ua=jr.divisor,Dr("if(",Hn,".divisor!==",ua,"){",ur.instancing,".vertexAttribDivisorANGLE(",[Zn,ua],");",Hn,".divisor=",ua,";}"))}function On(){Dr("if(",Hn,".buffer){",aa,".disableVertexAttribArray(",Zn,");",Hn,".buffer=null;","}if(",rt.map(function(ua,Ha){return Hn+"."+ua+"!=="+In[Ha]}).join("||"),"){",aa,".vertexAttrib4f(",Zn,",",In,");",rt.map(function(ua,Ha){return Hn+"."+ua+"="+In[Ha]+";"}).join(""),"}")}var aa=mr.gl,Zn=Dr.def(rr,".location"),Hn=Dr.def(mr.attributes,"[",Zn,"]");rr=jr.state;var pn=jr.buffer,In=[jr.x,jr.y,jr.z,jr.w],Yn=["buffer","normalized","offset","stride"];rr===1?Sn():rr===2?On():(Dr("if(",rr,"===",1,"){"),Sn(),Dr("}else{"),On(),Dr("}"))}var mr=ur.shared;tn.forEach(function(rr){var zr=rr.name,jr=sn.attributes[zr],Sn;if(jr){if(!mn(jr))return;Sn=jr.append(ur,Dr)}else{if(!mn(Bt))return;var On=ur.scopeAttrib(zr);Sn={},Object.keys(new ia).forEach(function(aa){Sn[aa]=Dr.def(On,".",aa)})}gn(ur.link(rr),wn(rr.info.type),Sn)})}function zt(ur,Dr,sn,tn,mn,wn){for(var gn=ur.shared,mr=gn.gl,rr={},zr,jr=0;jr<tn.length;++jr){var pn=tn[jr],Sn=pn.name,On=pn.info.type,aa=pn.info.size,Zn=sn.uniforms[Sn];if(1<aa){if(!Zn)continue;var Hn=Sn.replace("[0]","");if(rr[Hn])continue;rr[Hn]=1}var pn=ur.link(pn)+".location",In;if(Zn){if(!mn(Zn))continue;if(oe(Zn)){if(Sn=Zn.value,On===35678||On===35680)On=ur.link(Sn._texture||Sn.color[0]._texture),Dr(mr,".uniform1i(",pn,",",On+".bind());"),Dr.exit(On,".unbind();");else if(On===35674||On===35675||On===35676)aa=ur.global.def("new Float32Array(["+Array.prototype.slice.call(Sn)+"])"),Sn=2,On===35675?Sn=3:On===35676&&(Sn=4),Dr(mr,".uniformMatrix",Sn,"fv(",pn,",false,",aa,");");else{switch(On){case 5126:zr="1f";break;case 35664:zr="2f";break;case 35665:zr="3f";break;case 35666:zr="4f";break;case 35670:zr="1i";break;case 5124:zr="1i";break;case 35671:zr="2i";break;case 35667:zr="2i";break;case 35672:zr="3i";break;case 35668:zr="3i";break;case 35673:zr="4i";break;case 35669:zr="4i"}1<aa?(zr+="v",Sn=ur.global.def("["+Array.prototype.slice.call(Sn)+"]")):Sn=_(Sn)?Array.prototype.slice.call(Sn):Sn,Dr(mr,".uniform",zr,"(",pn,",",Sn,");")}continue}else In=Zn.append(ur,Dr)}else{if(!mn(Bt))continue;In=Dr.def(gn.uniforms,"[",pt.id(Sn),"]")}switch(On===35678?Dr("if(",In,"&&",In,'._reglType==="framebuffer"){',In,"=",In,".color[0];","}"):On===35680&&Dr("if(",In,"&&",In,'._reglType==="framebufferCube"){',In,"=",In,".color[0];","}"),Sn=1,On){case 35678:case 35680:On=Dr.def(In,"._texture"),Dr(mr,".uniform1i(",pn,",",On,".bind());"),Dr.exit(On,".unbind();");continue;case 5124:case 35670:zr="1i";break;case 35667:case 35671:zr="2i",Sn=2;break;case 35668:case 35672:zr="3i",Sn=3;break;case 35669:case 35673:zr="4i",Sn=4;break;case 5126:zr="1f";break;case 35664:zr="2f",Sn=2;break;case 35665:zr="3f",Sn=3;break;case 35666:zr="4f",Sn=4;break;case 35674:zr="Matrix2fv";break;case 35675:zr="Matrix3fv";break;case 35676:zr="Matrix4fv"}if(zr.indexOf("Matrix")===-1&&1<aa&&(zr+="v",Sn=1),zr.charAt(0)==="M"){Dr(mr,".uniform",zr,"(",pn,",");var pn=Math.pow(On-35674+2,2),Yn=ur.global.def("new Float32Array(",pn,")");Array.isArray(In)?Dr("false,(",i(pn,function(ka){return Yn+"["+ka+"]="+In[ka]}),",",Yn,")"):Dr("false,(Array.isArray(",In,")||",In," instanceof Float32Array)?",In,":(",i(pn,function(ka){return Yn+"["+ka+"]="+In+"["+ka+"]"}),",",Yn,")"),Dr(");")}else{if(1<Sn){for(var On=[],ua=[],aa=0;aa<Sn;++aa)Array.isArray(In)?ua.push(In[aa]):ua.push(Dr.def(In+"["+aa+"]")),wn&&On.push(Dr.def());wn&&Dr("if(!",ur.batchId,"||",On.map(function(Ha,ka){return Ha+"!=="+ua[ka]}).join("||"),"){",On.map(function(Ha,ka){return Ha+"="+ua[ka]+";"}).join("")),Dr(mr,".uniform",zr,"(",pn,",",ua.join(","),");")}else wn&&(On=Dr.def(),Dr("if(!",ur.batchId,"||",On,"!==",In,"){",On,"=",In,";")),Dr(mr,".uniform",zr,"(",pn,",",In,");");wn&&Dr("}")}}}function er(ur,Dr,sn,tn){function mn(ua){var Ha=jr[ua];return Ha?Ha.contextDep&&tn.contextDynamic||Ha.propDep?Ha.append(ur,sn):Ha.append(ur,Dr):Dr.def(zr,".",ua)}function wn(){function ua(){sn(pn,".drawElementsInstancedANGLE(",[On,Zn,In,aa+"<<(("+In+"-5121)>>1)",Hn],");")}function Ha(){sn(pn,".drawArraysInstancedANGLE(",[On,aa,Zn,Hn],");")}Sn&&Sn!=="null"?Yn?ua():(sn("if(",Sn,"){"),ua(),sn("}else{"),Ha(),sn("}")):Ha()}function gn(){function ua(){sn(rr+".drawElements("+[On,Zn,In,aa+"<<(("+In+"-5121)>>1)"]+");")}function Ha(){sn(rr+".drawArrays("+[On,aa,Zn]+");")}Sn&&Sn!=="null"?Yn?ua():(sn("if(",Sn,"){"),ua(),sn("}else{"),Ha(),sn("}")):Ha()}var mr=ur.shared,rr=mr.gl,zr=mr.draw,jr=tn.draw,Sn=function(){var ua=jr.elements,Ha=Dr;return ua?((ua.contextDep&&tn.contextDynamic||ua.propDep)&&(Ha=sn),ua=ua.append(ur,Ha),jr.elementsActive&&Ha("if("+ua+")"+rr+".bindBuffer(34963,"+ua+".buffer.buffer);")):(ua=Ha.def(),Ha(ua,"=",zr,".","elements",";","if(",ua,"){",rr,".bindBuffer(",34963,",",ua,".buffer.buffer);}","else if(",mr.vao,".currentVAO){",ua,"=",ur.shared.elements+".getElements("+mr.vao,".currentVAO.elements);",vn?"":"if("+ua+")"+rr+".bindBuffer(34963,"+ua+".buffer.buffer);","}")),ua}(),On=mn("primitive"),aa=mn("offset"),Zn=function(){var ua=jr.count,Ha=Dr;return ua?((ua.contextDep&&tn.contextDynamic||ua.propDep)&&(Ha=sn),ua=ua.append(ur,Ha)):ua=Ha.def(zr,".","count"),ua}();if(typeof Zn=="number"){if(Zn===0)return}else sn("if(",Zn,"){"),sn.exit("}");var Hn,pn;ya&&(Hn=mn("instances"),pn=ur.instancing);var In=Sn+".type",Yn=jr.elements&&oe(jr.elements)&&!jr.vaoActive;ya&&(typeof Hn!="number"||0<=Hn)?typeof Hn=="string"?(sn("if(",Hn,">0){"),wn(),sn("}else if(",Hn,"<0){"),gn(),sn("}")):wn():gn()}function hr(ur,Dr,sn,tn,mn){return Dr=st(),mn=Dr.proc("body",mn),ya&&(Dr.instancing=mn.def(Dr.shared.extensions,".angle_instanced_arrays")),ur(Dr,mn,sn,tn),Dr.compile().body}function Vr(ur,Dr,sn,tn){rn(ur,Dr),sn.useVAO?sn.drawVAO?Dr(ur.shared.vao,".setVAO(",sn.drawVAO.append(ur,Dr),");"):Dr(ur.shared.vao,".setVAO(",ur.shared.vao,".targetVAO);"):(Dr(ur.shared.vao,".setVAO(null);"),at(ur,Dr,sn,tn.attributes,function(){return!0})),zt(ur,Dr,sn,tn.uniforms,function(){return!0},!1),er(ur,Dr,Dr,sn)}function Rr(ur,Dr){var sn=ur.proc("draw",1);rn(ur,sn),dn(ur,sn,Dr.context),Yr(ur,sn,Dr.framebuffer),Ar(ur,sn,Dr),an(ur,sn,Dr.state),Zr(ur,sn,Dr,!1,!0);var tn=Dr.shader.progVar.append(ur,sn);if(sn(ur.shared.gl,".useProgram(",tn,".program);"),Dr.shader.program)Vr(ur,sn,Dr,Dr.shader.program);else{sn(ur.shared.vao,".setVAO(null);");var mn=ur.global.def("{}"),wn=sn.def(tn,".id"),gn=sn.def(mn,"[",wn,"]");sn(ur.cond(gn).then(gn,".call(this,a0);").else(gn,"=",mn,"[",wn,"]=",ur.link(function(mr){return hr(Vr,ur,Dr,mr,1)}),"(",tn,");",gn,".call(this,a0);"))}0<Object.keys(Dr.state).length&&sn(ur.shared.current,".dirty=true;"),ur.shared.vao&&sn(ur.shared.vao,".setVAO(null);")}function Er(ur,Dr,sn,tn){function mn(){return!0}ur.batchId="a1",rn(ur,Dr),at(ur,Dr,sn,tn.attributes,mn),zt(ur,Dr,sn,tn.uniforms,mn,!1),er(ur,Dr,Dr,sn)}function xr(ur,Dr,sn,tn){function mn(Sn){return Sn.contextDep&&gn||Sn.propDep}function wn(Sn){return!mn(Sn)}rn(ur,Dr);var gn=sn.contextDep,mr=Dr.def(),rr=Dr.def();ur.shared.props=rr,ur.batchId=mr;var zr=ur.scope(),jr=ur.scope();Dr(zr.entry,"for(",mr,"=0;",mr,"<","a1",";++",mr,"){",rr,"=","a0","[",mr,"];",jr,"}",zr.exit),sn.needsContext&&dn(ur,jr,sn.context),sn.needsFramebuffer&&Yr(ur,jr,sn.framebuffer),an(ur,jr,sn.state,mn),sn.profile&&mn(sn.profile)&&Zr(ur,jr,sn,!1,!0),tn?(sn.useVAO?sn.drawVAO?mn(sn.drawVAO)?jr(ur.shared.vao,".setVAO(",sn.drawVAO.append(ur,jr),");"):zr(ur.shared.vao,".setVAO(",sn.drawVAO.append(ur,zr),");"):zr(ur.shared.vao,".setVAO(",ur.shared.vao,".targetVAO);"):(zr(ur.shared.vao,".setVAO(null);"),at(ur,zr,sn,tn.attributes,wn),at(ur,jr,sn,tn.attributes,mn)),zt(ur,zr,sn,tn.uniforms,wn,!1),zt(ur,jr,sn,tn.uniforms,mn,!0),er(ur,zr,jr,sn)):(Dr=ur.global.def("{}"),tn=sn.shader.progVar.append(ur,jr),rr=jr.def(tn,".id"),zr=jr.def(Dr,"[",rr,"]"),jr(ur.shared.gl,".useProgram(",tn,".program);","if(!",zr,"){",zr,"=",Dr,"[",rr,"]=",ur.link(function(Sn){return hr(Er,ur,sn,Sn,2)}),"(",tn,");}",zr,".call(this,a0[",mr,"],",mr,");"))}function Wr(ur,Dr){function sn(zr){return zr.contextDep&&mn||zr.propDep}var tn=ur.proc("batch",2);ur.batchId="0",rn(ur,tn);var mn=!1,wn=!0;Object.keys(Dr.context).forEach(function(zr){mn=mn||Dr.context[zr].propDep}),mn||(dn(ur,tn,Dr.context),wn=!1);var gn=Dr.framebuffer,mr=!1;if(gn?(gn.propDep?mn=mr=!0:gn.contextDep&&mn&&(mr=!0),mr||Yr(ur,tn,gn)):Yr(ur,tn,null),Dr.state.viewport&&Dr.state.viewport.propDep&&(mn=!0),Ar(ur,tn,Dr),an(ur,tn,Dr.state,function(zr){return!sn(zr)}),Dr.profile&&sn(Dr.profile)||Zr(ur,tn,Dr,!1,"a1"),Dr.contextDep=mn,Dr.needsContext=wn,Dr.needsFramebuffer=mr,wn=Dr.shader.progVar,wn.contextDep&&mn||wn.propDep)xr(ur,tn,Dr,null);else if(wn=wn.append(ur,tn),tn(ur.shared.gl,".useProgram(",wn,".program);"),Dr.shader.program)xr(ur,tn,Dr,Dr.shader.program);else{tn(ur.shared.vao,".setVAO(null);");var gn=ur.global.def("{}"),mr=tn.def(wn,".id"),rr=tn.def(gn,"[",mr,"]");tn(ur.cond(rr).then(rr,".call(this,a0,a1);").else(rr,"=",gn,"[",mr,"]=",ur.link(function(Sn){return hr(xr,ur,Dr,Sn,2)}),"(",wn,");",rr,".call(this,a0,a1);"))}0<Object.keys(Dr.state).length&&tn(ur.shared.current,".dirty=true;"),ur.shared.vao&&tn(ur.shared.vao,".setVAO(null);")}function Rn(ur,Dr){function sn(gn){var mr=Dr.shader[gn];mr&&tn.set(mn.shader,"."+gn,mr.append(ur,tn))}var tn=ur.proc("scope",3);ur.batchId="a2";var mn=ur.shared,wn=mn.current;dn(ur,tn,Dr.context),Dr.framebuffer&&Dr.framebuffer.append(ur,tn),se(Object.keys(Dr.state)).forEach(function(gn){var mr=Dr.state[gn].append(ur,tn);_(mr)?mr.forEach(function(rr,zr){tn.set(ur.next[gn],"["+zr+"]",rr)}):tn.set(mn.next,"."+gn,mr)}),Zr(ur,tn,Dr,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(gn){var mr=Dr.draw[gn];mr&&tn.set(mn.draw,"."+gn,""+mr.append(ur,tn))}),Object.keys(Dr.uniforms).forEach(function(gn){var mr=Dr.uniforms[gn].append(ur,tn);Array.isArray(mr)&&(mr="["+mr.join()+"]"),tn.set(mn.uniforms,"["+pt.id(gn)+"]",mr)}),Object.keys(Dr.attributes).forEach(function(gn){var mr=Dr.attributes[gn].append(ur,tn),rr=ur.scopeAttrib(gn);Object.keys(new ia).forEach(function(zr){tn.set(rr,"."+zr,mr[zr])})}),Dr.scopeVAO&&tn.set(mn.vao,".targetVAO",Dr.scopeVAO.append(ur,tn)),sn("vert"),sn("frag"),0<Object.keys(Dr.state).length&&(tn(wn,".dirty=true;"),tn.exit(wn,".dirty=true;")),tn("a1(",ur.shared.context,",a0,",ur.batchId,");")}function En(ur){if(typeof ur=="object"&&!_(ur)){for(var Dr=Object.keys(ur),sn=0;sn<Dr.length;++sn)if(ne.isDynamic(ur[Dr[sn]]))return!0;return!1}}function ea(ur,Dr,sn){function tn(Sn,On){gn.forEach(function(aa){var Zn=mn[aa];ne.isDynamic(Zn)&&(Zn=Sn.invoke(On,Zn),On(jr,".",aa,"=",Zn,";"))})}var mn=Dr.static[sn];if(mn&&En(mn)){var wn=ur.global,gn=Object.keys(mn),mr=!1,rr=!1,zr=!1,jr=ur.global.def("{}");gn.forEach(function(Sn){var On=mn[Sn];if(ne.isDynamic(On))typeof On=="function"&&(On=mn[Sn]=ne.unbox(On)),Sn=V(On,null),mr=mr||Sn.thisDep,zr=zr||Sn.propDep,rr=rr||Sn.contextDep;else{switch(wn(jr,".",Sn,"="),typeof On){case"number":wn(On);break;case"string":wn('"',On,'"');break;case"object":Array.isArray(On)&&wn("[",On.join(),"]");break;default:wn(ur.link(On))}wn(";")}}),Dr.dynamic[sn]=new ne.DynamicVariable(4,{thisDep:mr,contextDep:rr,propDep:zr,ref:jr,append:tn}),delete Dr.static[sn]}}var ia=tr.Record,Aa={add:32774,subtract:32778,"reverse subtract":32779};Et.ext_blend_minmax&&(Aa.min=32775,Aa.max=32776);var ya=Et.angle_instanced_arrays,pr=Et.webgl_draw_buffers,vn=Et.oes_vertex_array_object,$r={dirty:!0,profile:Re.profile},Fn={},Bn=[],ca={},ta={};$e("dither",3024),$e("blend.enable",3042),ot("blend.color","blendColor",[0,0,0,0]),ot("blend.equation","blendEquationSeparate",[32774,32774]),ot("blend.func","blendFuncSeparate",[1,0,1,0]),$e("depth.enable",2929,!0),ot("depth.func","depthFunc",513),ot("depth.range","depthRange",[0,1]),ot("depth.mask","depthMask",!0),ot("colorMask","colorMask",[!0,!0,!0,!0]),$e("cull.enable",2884),ot("cull.face","cullFace",1029),ot("frontFace","frontFace",2305),ot("lineWidth","lineWidth",1),$e("polygonOffset.enable",32823),ot("polygonOffset.offset","polygonOffset",[0,0]),$e("sample.alpha",32926),$e("sample.enable",32928),ot("sample.coverage","sampleCoverage",[1,!1]),$e("stencil.enable",2960),ot("stencil.mask","stencilMask",-1),ot("stencil.func","stencilFunc",[519,0,-1]),ot("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),ot("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),$e("scissor.enable",3089),ot("scissor.box","scissor",[0,0,Je.drawingBufferWidth,Je.drawingBufferHeight]),ot("viewport","viewport",[0,0,Je.drawingBufferWidth,Je.drawingBufferHeight]);var Un={gl:Je,context:we,strings:pt,next:Fn,current:$r,draw:et,elements:ir,buffer:vr,shader:Nr,attributes:tr.state,vao:tr,uniforms:Sr,framebuffer:Pr,extensions:Et,timer:Me,isBufferArgs:Z},la={primTypes:De,compareFuncs:Tt,blendFuncs:Pt,blendEquations:Aa,stencilOps:Ot,glTypes:Ae,orientationType:Kt};pr&&(la.backBuffer=[1029],la.drawBuffer=i(ar.maxDrawbuffers,function(ur){return ur===0?[0]:i(ur,function(Dr){return 36064+Dr})}));var da=0;return{next:Fn,current:$r,procs:function(){var ur=st(),Dr=ur.proc("poll"),sn=ur.proc("refresh"),tn=ur.block();Dr(tn),sn(tn);var mn=ur.shared,wn=mn.gl,gn=mn.next,mr=mn.current;tn(mr,".dirty=false;"),Yr(ur,Dr),Yr(ur,sn,null,!0);var rr;ya&&(rr=ur.link(ya)),Et.oes_vertex_array_object&&sn(ur.link(Et.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var zr=0;zr<ar.maxAttributes;++zr){var jr=sn.def(mn.attributes,"[",zr,"]"),Sn=ur.cond(jr,".buffer");Sn.then(wn,".enableVertexAttribArray(",zr,");",wn,".bindBuffer(",34962,",",jr,".buffer.buffer);",wn,".vertexAttribPointer(",zr,",",jr,".size,",jr,".type,",jr,".normalized,",jr,".stride,",jr,".offset);").else(wn,".disableVertexAttribArray(",zr,");",wn,".vertexAttrib4f(",zr,",",jr,".x,",jr,".y,",jr,".z,",jr,".w);",jr,".buffer=null;"),sn(Sn),ya&&sn(rr,".vertexAttribDivisorANGLE(",zr,",",jr,".divisor);")}return sn(ur.shared.vao,".currentVAO=null;",ur.shared.vao,".setVAO(",ur.shared.vao,".targetVAO);"),Object.keys(ca).forEach(function(On){var aa=ca[On],Zn=tn.def(gn,".",On),Hn=ur.block();Hn("if(",Zn,"){",wn,".enable(",aa,")}else{",wn,".disable(",aa,")}",mr,".",On,"=",Zn,";"),sn(Hn),Dr("if(",Zn,"!==",mr,".",On,"){",Hn,"}")}),Object.keys(ta).forEach(function(On){var aa=ta[On],Zn=$r[On],Hn,pn,In=ur.block();In(wn,".",aa,"("),_(Zn)?(aa=Zn.length,Hn=ur.global.def(gn,".",On),pn=ur.global.def(mr,".",On),In(i(aa,function(Yn){return Hn+"["+Yn+"]"}),");",i(aa,function(Yn){return pn+"["+Yn+"]="+Hn+"["+Yn+"];"}).join("")),Dr("if(",i(aa,function(Yn){return Hn+"["+Yn+"]!=="+pn+"["+Yn+"]"}).join("||"),"){",In,"}")):(Hn=tn.def(gn,".",On),pn=tn.def(mr,".",On),In(Hn,");",mr,".",On,"=",Hn,";"),Dr("if(",Hn,"!==",pn,"){",In,"}")),sn(In)}),ur.compile()}(),compile:function(ur,Dr,sn,tn,mn){var wn=st();wn.stats=wn.link(mn),Object.keys(Dr.static).forEach(function(mr){ea(wn,Dr,mr)}),ut.forEach(function(mr){ea(wn,ur,mr)});var gn=_r(ur,Dr,sn,tn,wn);return Rr(wn,gn),Rn(wn,gn),Wr(wn,gn),j(wn.compile(),{destroy:function(){gn.shader.program.destroy()}})}}}function ee(Je,pt){for(var Et=0;Et<Je.length;++Et)if(Je[Et]===pt)return Et;return-1}var j=function(Je,pt){for(var Et=Object.keys(pt),ar=0;ar<Et.length;++ar)Je[Et[ar]]=pt[Et[ar]];return Je},Q=0,ne={DynamicVariable:d,define:function(Je,pt){return new d(Je,b(pt+""))},isDynamic:function(Je){return typeof Je=="function"&&!Je._reglType||Je instanceof d},unbox:w,accessor:b},ae={next:typeof requestAnimationFrame=="function"?function(Je){return requestAnimationFrame(Je)}:function(Je){return setTimeout(Je,16)},cancel:typeof cancelAnimationFrame=="function"?function(Je){return cancelAnimationFrame(Je)}:clearTimeout},ie=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date},ue=u();ue.zero=u();var xe=function(Je,pt){var Et=1;pt.ext_texture_filter_anisotropic&&(Et=Je.getParameter(34047));var ar=1,vr=1;pt.webgl_draw_buffers&&(ar=Je.getParameter(34852),vr=Je.getParameter(36063));var ir=!!pt.oes_texture_float;if(ir){ir=Je.createTexture(),Je.bindTexture(3553,ir),Je.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var dr=Je.createFramebuffer();if(Je.bindFramebuffer(36160,dr),Je.framebufferTexture2D(36160,36064,3553,ir,0),Je.bindTexture(3553,null),Je.checkFramebufferStatus(36160)!==36053)ir=!1;else{Je.viewport(0,0,1,1),Je.clearColor(1,0,0,1),Je.clear(16384);var Pr=ue.allocType(5126,4);Je.readPixels(0,0,1,1,6408,5126,Pr),Je.getError()?ir=!1:(Je.deleteFramebuffer(dr),Je.deleteTexture(ir),ir=Pr[0]===1),ue.freeType(Pr)}}return Pr=!0,typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(Pr=Je.createTexture(),dr=ue.allocType(5121,36),Je.activeTexture(33984),Je.bindTexture(34067,Pr),Je.texImage2D(34069,0,6408,3,3,0,6408,5121,dr),ue.freeType(dr),Je.bindTexture(34067,null),Je.deleteTexture(Pr),Pr=!Je.getError()),{colorBits:[Je.getParameter(3410),Je.getParameter(3411),Je.getParameter(3412),Je.getParameter(3413)],depthBits:Je.getParameter(3414),stencilBits:Je.getParameter(3415),subpixelBits:Je.getParameter(3408),extensions:Object.keys(pt).filter(function(Sr){return!!pt[Sr]}),maxAnisotropic:Et,maxDrawbuffers:ar,maxColorAttachments:vr,pointSizeDims:Je.getParameter(33901),lineWidthDims:Je.getParameter(33902),maxViewportDims:Je.getParameter(3386),maxCombinedTextureUnits:Je.getParameter(35661),maxCubeMapSize:Je.getParameter(34076),maxRenderbufferSize:Je.getParameter(34024),maxTextureUnits:Je.getParameter(34930),maxTextureSize:Je.getParameter(3379),maxAttributes:Je.getParameter(34921),maxVertexUniforms:Je.getParameter(36347),maxVertexTextureUnits:Je.getParameter(35660),maxVaryingVectors:Je.getParameter(36348),maxFragmentUniforms:Je.getParameter(36349),glsl:Je.getParameter(35724),renderer:Je.getParameter(7937),vendor:Je.getParameter(7936),version:Je.getParameter(7938),readFloat:ir,npotTextureCube:Pr}},he=function(Je){return Je instanceof Uint8Array||Je instanceof Uint16Array||Je instanceof Uint32Array||Je instanceof Int8Array||Je instanceof Int16Array||Je instanceof Int32Array||Je instanceof Float32Array||Je instanceof Float64Array||Je instanceof Uint8ClampedArray},ge=function(Je){return Object.keys(Je).map(function(pt){return Je[pt]})},me={shape:function(Je){for(var pt=[];Je.length;Je=Je[0])pt.push(Je.length);return pt},flatten:function(Je,pt,Et,ar){var vr=1;if(pt.length)for(var ir=0;ir<pt.length;++ir)vr*=pt[ir];else vr=0;switch(Et=ar||ue.allocType(Et,vr),pt.length){case 0:break;case 1:for(ar=pt[0],pt=0;pt<ar;++pt)Et[pt]=Je[pt];break;case 2:for(ar=pt[0],pt=pt[1],ir=vr=0;ir<ar;++ir)for(var dr=Je[ir],Pr=0;Pr<pt;++Pr)Et[vr++]=dr[Pr];break;case 3:h(Je,pt[0],pt[1],pt[2],Et,0);break;default:y(Je,pt,0,Et,0)}return Et}},ke={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Ae={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Ne={dynamic:35048,stream:35040,static:35044},He=me.flatten,Ge=me.shape,_e=[];_e[5120]=1,_e[5122]=2,_e[5124]=4,_e[5121]=1,_e[5123]=2,_e[5125]=4,_e[5126]=4;var De={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Ye=new Float32Array(1),qe=new Uint32Array(Ye.buffer),Ue=[9984,9986,9985,9987],Ie=[0,6409,6410,6407,6408],Ve={};Ve[6409]=Ve[6406]=Ve[6402]=1,Ve[34041]=Ve[6410]=2,Ve[6407]=Ve[35904]=3,Ve[6408]=Ve[35906]=4;var dt=f("HTMLCanvasElement"),Dt=f("OffscreenCanvas"),Yt=f("CanvasRenderingContext2D"),kt=f("ImageBitmap"),Ft=f("HTMLImageElement"),Nt=f("HTMLVideoElement"),Lt=Object.keys(ke).concat([dt,Dt,Yt,kt,Ft,Nt]),St=[];St[5121]=1,St[5126]=4,St[36193]=2,St[5123]=2,St[5125]=4;var it=[];it[32854]=2,it[32855]=2,it[36194]=2,it[34041]=4,it[33776]=.5,it[33777]=.5,it[33778]=1,it[33779]=1,it[35986]=.5,it[35987]=1,it[34798]=1,it[35840]=.5,it[35841]=.25,it[35842]=.5,it[35843]=.25,it[36196]=.5;var ht=[];ht[32854]=2,ht[32855]=2,ht[36194]=2,ht[33189]=2,ht[36168]=1,ht[34041]=4,ht[35907]=4,ht[34836]=16,ht[34842]=8,ht[34843]=6;var Qe=function(Je,pt,Et,ar,vr){function ir(et){this.id=tr++,this.refCount=1,this.renderbuffer=et,this.format=32854,this.height=this.width=0,vr.profile&&(this.stats={size:0})}function dr(et){var we=et.renderbuffer;Je.bindRenderbuffer(36161,null),Je.deleteRenderbuffer(we),et.renderbuffer=null,et.refCount=0,delete Nr[et.id],ar.renderbufferCount--}var Pr={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};pt.ext_srgb&&(Pr.srgba=35907),pt.ext_color_buffer_half_float&&(Pr.rgba16f=34842,Pr.rgb16f=34843),pt.webgl_color_buffer_float&&(Pr.rgba32f=34836);var Sr=[];Object.keys(Pr).forEach(function(et){Sr[Pr[et]]=et});var tr=0,Nr={};return ir.prototype.decRef=function(){0>=--this.refCount&&dr(this)},vr.profile&&(ar.getTotalRenderbufferSize=function(){var et=0;return Object.keys(Nr).forEach(function(we){et+=Nr[we].stats.size}),et}),{create:function(et,we){function Me(Xe,$e){var ot=0,st=0,yt=32854;if(typeof Xe=="object"&&Xe?("shape"in Xe?(st=Xe.shape,ot=st[0]|0,st=st[1]|0):("radius"in Xe&&(ot=st=Xe.radius|0),"width"in Xe&&(ot=Xe.width|0),"height"in Xe&&(st=Xe.height|0)),"format"in Xe&&(yt=Pr[Xe.format])):typeof Xe=="number"?(ot=Xe|0,st=typeof $e=="number"?$e|0:ot):Xe||(ot=st=1),ot!==Re.width||st!==Re.height||yt!==Re.format)return Me.width=Re.width=ot,Me.height=Re.height=st,Re.format=yt,Je.bindRenderbuffer(36161,Re.renderbuffer),Je.renderbufferStorage(36161,yt,ot,st),vr.profile&&(Re.stats.size=ht[Re.format]*Re.width*Re.height),Me.format=Sr[Re.format],Me}var Re=new ir(Je.createRenderbuffer());return Nr[Re.id]=Re,ar.renderbufferCount++,Me(et,we),Me.resize=function(Xe,$e){var ot=Xe|0,st=$e|0||ot;return ot===Re.width&&st===Re.height||(Me.width=Re.width=ot,Me.height=Re.height=st,Je.bindRenderbuffer(36161,Re.renderbuffer),Je.renderbufferStorage(36161,Re.format,ot,st),vr.profile&&(Re.stats.size=ht[Re.format]*Re.width*Re.height)),Me},Me._reglType="renderbuffer",Me._renderbuffer=Re,vr.profile&&(Me.stats=Re.stats),Me.destroy=function(){Re.decRef()},Me},clear:function(){ge(Nr).forEach(dr)},restore:function(){ge(Nr).forEach(function(et){et.renderbuffer=Je.createRenderbuffer(),Je.bindRenderbuffer(36161,et.renderbuffer),Je.renderbufferStorage(36161,et.format,et.width,et.height)}),Je.bindRenderbuffer(36161,null)}}},Ce=[];Ce[6408]=4,Ce[6407]=3;var je=[];je[5121]=1,je[5126]=4,je[36193]=2;var rt=["x","y","z","w"],ut="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Pt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Tt={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Ot={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Kt={cw:2304,ccw:2305},Bt=new le(!1,!1,!1,function(){}),Zt=function(Je,pt){function Et(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function ar(Nr,et,we){var Me=dr.pop()||new Et;Me.startQueryIndex=Nr,Me.endQueryIndex=et,Me.sum=0,Me.stats=we,Pr.push(Me)}if(!pt.ext_disjoint_timer_query)return null;var vr=[],ir=[],dr=[],Pr=[],Sr=[],tr=[];return{beginQuery:function(Nr){var et=vr.pop()||pt.ext_disjoint_timer_query.createQueryEXT();pt.ext_disjoint_timer_query.beginQueryEXT(35007,et),ir.push(et),ar(ir.length-1,ir.length,Nr)},endQuery:function(){pt.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:ar,update:function(){var Nr,et;if(Nr=ir.length,Nr!==0){tr.length=Math.max(tr.length,Nr+1),Sr.length=Math.max(Sr.length,Nr+1),Sr[0]=0;var we=tr[0]=0;for(et=Nr=0;et<ir.length;++et){var Me=ir[et];pt.ext_disjoint_timer_query.getQueryObjectEXT(Me,34919)?(we+=pt.ext_disjoint_timer_query.getQueryObjectEXT(Me,34918),vr.push(Me)):ir[Nr++]=Me,Sr[et+1]=we,tr[et+1]=Nr}for(ir.length=Nr,et=Nr=0;et<Pr.length;++et){var we=Pr[et],Re=we.startQueryIndex,Me=we.endQueryIndex;we.sum+=Sr[Me]-Sr[Re],Re=tr[Re],Me=tr[Me],Me===Re?(we.stats.gpuTime+=we.sum/1e6,dr.push(we)):(we.startQueryIndex=Re,we.endQueryIndex=Me,Pr[Nr++]=we)}Pr.length=Nr}},getNumPendingQueries:function(){return ir.length},clear:function(){vr.push.apply(vr,ir);for(var Nr=0;Nr<vr.length;Nr++)pt.ext_disjoint_timer_query.deleteQueryEXT(vr[Nr]);ir.length=0,vr.length=0},restore:function(){ir.length=0,vr.length=0}}};return function(Je){function pt(){if(Zr.length===0)st&&st.update(),hr=null;else{hr=ae.next(pt),Nr();for(var Rr=Zr.length-1;0<=Rr;--Rr){var Er=Zr[Rr];Er&&Er(Vt,null,0)}Me.flush(),st&&st.update()}}function Et(){!hr&&0<Zr.length&&(hr=ae.next(pt))}function ar(){hr&&(ae.cancel(pt),hr=null)}function vr(Rr){Rr.preventDefault(),ar(),at.forEach(function(Er){Er()})}function ir(Rr){Me.getError(),Xe.restore(),nn.restore(),Lr.restore(),yr.restore(),_r.restore(),dn.restore(),Fr.restore(),st&&st.restore(),Yr.procs.refresh(),Et(),zt.forEach(function(Er){Er()})}function dr(Rr){function Er($r,Fn){var Bn={},ca={};return Object.keys($r).forEach(function(ta){var Un=$r[ta];if(ne.isDynamic(Un))ca[ta]=ne.unbox(Un,ta);else{if(Fn&&Array.isArray(Un)){for(var la=0;la<Un.length;++la)if(ne.isDynamic(Un[la])){ca[ta]=ne.unbox(Un,ta);return}}Bn[ta]=Un}}),{dynamic:ca,static:Bn}}function xr($r){for(;vn.length<$r;)vn.push(null);return vn}var Wr=Er(Rr.context||{},!0),Rn=Er(Rr.uniforms||{},!0),En=Er(Rr.attributes||{},!1);Rr=Er(function($r){function Fn(ca){if(ca in Bn){var ta=Bn[ca];delete Bn[ca],Object.keys(ta).forEach(function(Un){Bn[ca+"."+Un]=ta[Un]})}}var Bn=j({},$r);return delete Bn.uniforms,delete Bn.attributes,delete Bn.context,delete Bn.vao,"stencil"in Bn&&Bn.stencil.op&&(Bn.stencil.opBack=Bn.stencil.opFront=Bn.stencil.op,delete Bn.stencil.op),Fn("blend"),Fn("depth"),Fn("cull"),Fn("stencil"),Fn("polygonOffset"),Fn("scissor"),Fn("sample"),"vao"in $r&&(Bn.vao=$r.vao),Bn}(Rr),!1);var ea={gpuTime:0,cpuTime:0,count:0},ia=Yr.compile(Rr,En,Rn,Wr,ea),Aa=ia.draw,ya=ia.batch,pr=ia.scope,vn=[];return j(function($r,Fn){var Bn;if(typeof $r=="function")return pr.call(this,null,$r,0);if(typeof Fn=="function")if(typeof $r=="number")for(Bn=0;Bn<$r;++Bn)pr.call(this,null,Fn,Bn);else if(Array.isArray($r))for(Bn=0;Bn<$r.length;++Bn)pr.call(this,$r[Bn],Fn,Bn);else return pr.call(this,$r,Fn,0);else if(typeof $r=="number"){if(0<$r)return ya.call(this,xr($r|0),$r|0)}else if(Array.isArray($r)){if($r.length)return ya.call(this,$r,$r.length)}else return Aa.call(this,$r)},{stats:ea,destroy:function(){ia.destroy()}})}function Pr(Rr,Er){var xr=0;Yr.procs.poll();var Wr=Er.color;Wr&&(Me.clearColor(+Wr[0]||0,+Wr[1]||0,+Wr[2]||0,+Wr[3]||0),xr|=16384),"depth"in Er&&(Me.clearDepth(+Er.depth),xr|=256),"stencil"in Er&&(Me.clearStencil(Er.stencil|0),xr|=1024),Me.clear(xr)}function Sr(Rr){return Zr.push(Rr),Et(),{cancel:function(){function Er(){var Wr=ee(Zr,Er);Zr[Wr]=Zr[Zr.length-1],--Zr.length,0>=Zr.length&&ar()}var xr=ee(Zr,Rr);Zr[xr]=Er}}}function tr(){var Rr=an.viewport,Er=an.scissor_box;Rr[0]=Rr[1]=Er[0]=Er[1]=0,Vt.viewportWidth=Vt.framebufferWidth=Vt.drawingBufferWidth=Rr[2]=Er[2]=Me.drawingBufferWidth,Vt.viewportHeight=Vt.framebufferHeight=Vt.drawingBufferHeight=Rr[3]=Er[3]=Me.drawingBufferHeight}function Nr(){Vt.tick+=1,Vt.time=we(),tr(),Yr.procs.poll()}function et(){yr.refresh(),tr(),Yr.procs.refresh(),st&&st.update()}function we(){return(ie()-yt)/1e3}if(Je=c(Je),!Je)return null;var Me=Je.gl,Re=Me.getContextAttributes();Me.isContextLost();var Xe=s(Me,Je);if(!Xe)return null;var Ar=e(),$e={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},ot=Xe.extensions,st=Zt(Me,ot),yt=ie(),gr=Me.drawingBufferWidth,wt=Me.drawingBufferHeight,Vt={tick:0,time:0,viewportWidth:gr,viewportHeight:wt,framebufferWidth:gr,framebufferHeight:wt,drawingBufferWidth:gr,drawingBufferHeight:wt,pixelRatio:Je.pixelRatio},gr={elements:null,primitive:4,count:-1,offset:0,instances:-1},wr=xe(Me,ot),Lr=M(Me,$e,Je,function(Rr){return Fr.destroyBuffer(Rr)}),fr=x(Me,ot,Lr,$e),Fr=F(Me,ot,wr,$e,Lr,fr,gr),nn=G(Me,Ar,$e,Je),yr=R(Me,ot,wr,function(){Yr.procs.poll()},Vt,$e,Je),_r=Qe(Me,ot,wr,$e,Je),dn=D(Me,ot,wr,yr,_r,$e),Yr=re(Me,Ar,ot,wr,Lr,fr,yr,dn,{},Fr,nn,gr,Vt,st,Je),Ar=W(Me,dn,Yr.procs.poll,Vt),an=Yr.next,rn=Me.canvas,Zr=[],at=[],zt=[],er=[Je.onDestroy],hr=null;rn&&(rn.addEventListener("webglcontextlost",vr,!1),rn.addEventListener("webglcontextrestored",ir,!1));var Vr=dn.setFBO=dr({framebuffer:ne.define.call(null,1,"framebuffer")});return et(),Re=j(dr,{clear:function(Rr){if("framebuffer"in Rr)if(Rr.framebuffer&&Rr.framebuffer_reglType==="framebufferCube")for(var Er=0;6>Er;++Er)Vr(j({framebuffer:Rr.framebuffer.faces[Er]},Rr),Pr);else Vr(Rr,Pr);else Pr(null,Rr)},prop:ne.define.bind(null,1),context:ne.define.bind(null,2),this:ne.define.bind(null,3),draw:dr({}),buffer:function(Rr){return Lr.create(Rr,34962,!1,!1)},elements:function(Rr){return fr.create(Rr,!1)},texture:yr.create2D,cube:yr.createCube,renderbuffer:_r.create,framebuffer:dn.create,framebufferCube:dn.createCube,vao:Fr.createVAO,attributes:Re,frame:Sr,on:function(Rr,Er){var xr;switch(Rr){case"frame":return Sr(Er);case"lost":xr=at;break;case"restore":xr=zt;break;case"destroy":xr=er}return xr.push(Er),{cancel:function(){for(var Wr=0;Wr<xr.length;++Wr)if(xr[Wr]===Er){xr[Wr]=xr[xr.length-1],xr.pop();break}}}},limits:wr,hasExtension:function(Rr){return 0<=wr.extensions.indexOf(Rr.toLowerCase())},read:Ar,destroy:function(){Zr.length=0,ar(),rn&&(rn.removeEventListener("webglcontextlost",vr),rn.removeEventListener("webglcontextrestored",ir)),nn.clear(),dn.clear(),_r.clear(),Fr.clear(),yr.clear(),fr.clear(),Lr.clear(),st&&st.clear(),er.forEach(function(Rr){Rr()})},_gl:Me,_refresh:et,poll:function(){Nr(),st&&st.update()},now:we,stats:$e}),Je.onDone(null,Re),Re}})},{}],284:[function(t,B,H){var d=t("buffer"),l=d.Buffer;function b(e,o){for(var a in e)o[a]=e[a]}l.from&&l.alloc&&l.allocUnsafe&&l.allocUnsafeSlow?B.exports=d:(b(d,H),H.Buffer=w);function w(e,o,a){return l(e,o,a)}w.prototype=Object.create(l.prototype),b(l,w),w.from=function(e,o,a){if(typeof e=="number")throw new TypeError("Argument must not be a number");return l(e,o,a)},w.alloc=function(e,o,a){if(typeof e!="number")throw new TypeError("Argument must be a number");var r=l(e);return o!==void 0?typeof a=="string"?r.fill(o,a):r.fill(o):r.fill(0),r},w.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return l(e)},w.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return d.SlowBuffer(e)}},{buffer:85}],285:[function(t,B,H){B.exports=b;var d=t("events").EventEmitter,l=t("inherits");l(b,d),b.Readable=t("readable-stream/lib/_stream_readable.js"),b.Writable=t("readable-stream/lib/_stream_writable.js"),b.Duplex=t("readable-stream/lib/_stream_duplex.js"),b.Transform=t("readable-stream/lib/_stream_transform.js"),b.PassThrough=t("readable-stream/lib/_stream_passthrough.js"),b.finished=t("readable-stream/lib/internal/streams/end-of-stream.js"),b.pipeline=t("readable-stream/lib/internal/streams/pipeline.js"),b.Stream=b;function b(){d.call(this)}b.prototype.pipe=function(w,e){var o=this;function a(u){w.writable&&w.write(u)===!1&&o.pause&&o.pause()}o.on("data",a);function r(){o.readable&&o.resume&&o.resume()}w.on("drain",r),!w._isStdio&&(!e||e.end!==!1)&&(o.on("end",c),o.on("close",s));var n=!1;function c(){n||(n=!0,w.end())}function s(){n||(n=!0,typeof w.destroy=="function"&&w.destroy())}function i(u){if(v(),d.listenerCount(this,"error")===0)throw u}o.on("error",i),w.on("error",i);function v(){o.removeListener("data",a),w.removeListener("drain",r),o.removeListener("end",c),o.removeListener("close",s),o.removeListener("error",i),w.removeListener("error",i),o.removeListener("end",v),o.removeListener("close",v),w.removeListener("close",v)}return o.on("end",v),o.on("close",v),w.on("close",v),w.emit("pipe",o),w}},{events:84,inherits:231,"readable-stream/lib/_stream_duplex.js":287,"readable-stream/lib/_stream_passthrough.js":288,"readable-stream/lib/_stream_readable.js":289,"readable-stream/lib/_stream_transform.js":290,"readable-stream/lib/_stream_writable.js":291,"readable-stream/lib/internal/streams/end-of-stream.js":295,"readable-stream/lib/internal/streams/pipeline.js":297}],286:[function(t,B,H){function d(r,n){r.prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n}var l={};function b(r,n,c){c||(c=Error);function s(v,u,g){return typeof n=="string"?n:n(v,u,g)}var i=function(v){d(u,v);function u(g,h,y){return v.call(this,s(g,h,y))||this}return u}(c);i.prototype.name=c.name,i.prototype.code=r,l[r]=i}function w(r,n){if(Array.isArray(r)){var c=r.length;return r=r.map(function(s){return String(s)}),c>2?"one of ".concat(n," ").concat(r.slice(0,c-1).join(", "),", or ")+r[c-1]:c===2?"one of ".concat(n," ").concat(r[0]," or ").concat(r[1]):"of ".concat(n," ").concat(r[0])}else return"of ".concat(n," ").concat(String(r))}function e(r,n,c){return r.substr(!c||c<0?0:+c,n.length)===n}function o(r,n,c){return(c===void 0||c>r.length)&&(c=r.length),r.substring(c-n.length,c)===n}function a(r,n,c){return typeof c!="number"&&(c=0),c+n.length>r.length?!1:r.indexOf(n,c)!==-1}b("ERR_INVALID_OPT_VALUE",function(r,n){return'The value "'+n+'" is invalid for option "'+r+'"'},TypeError),b("ERR_INVALID_ARG_TYPE",function(r,n,c){var s;typeof n=="string"&&e(n,"not ")?(s="must not be",n=n.replace(/^not /,"")):s="must be";var i;if(o(r," argument"))i="The ".concat(r," ").concat(s," ").concat(w(n,"type"));else{var v=a(r,".")?"property":"argument";i='The "'.concat(r,'" ').concat(v," ").concat(s," ").concat(w(n,"type"))}return i+=". Received type ".concat(typeof c),i},TypeError),b("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),b("ERR_METHOD_NOT_IMPLEMENTED",function(r){return"The "+r+" method is not implemented"}),b("ERR_STREAM_PREMATURE_CLOSE","Premature close"),b("ERR_STREAM_DESTROYED",function(r){return"Cannot call "+r+" after a stream was destroyed"}),b("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),b("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),b("ERR_STREAM_WRITE_AFTER_END","write after end"),b("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),b("ERR_UNKNOWN_ENCODING",function(r){return"Unknown encoding: "+r},TypeError),b("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),B.exports.codes=l},{}],287:[function(t,B,H){(function(d){(function(){var l=Object.keys||function(s){var i=[];for(var v in s)i.push(v);return i};B.exports=r;var b=t("./_stream_readable"),w=t("./_stream_writable");t("inherits")(r,b);for(var e=l(w.prototype),o=0;o<e.length;o++){var a=e[o];r.prototype[a]||(r.prototype[a]=w.prototype[a])}function r(s){if(!(this instanceof r))return new r(s);b.call(this,s),w.call(this,s),this.allowHalfOpen=!0,s&&(s.readable===!1&&(this.readable=!1),s.writable===!1&&(this.writable=!1),s.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",n)))}Object.defineProperty(r.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(r.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function n(){this._writableState.ended||d.nextTick(c,this)}function c(s){s.end()}Object.defineProperty(r.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(i){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=i,this._writableState.destroyed=i)}})}).call(this)}).call(this,t("_process"))},{"./_stream_readable":289,"./_stream_writable":291,_process:277,inherits:231}],288:[function(t,B,H){B.exports=l;var d=t("./_stream_transform");t("inherits")(l,d);function l(b){if(!(this instanceof l))return new l(b);d.call(this,b)}l.prototype._transform=function(b,w,e){e(null,b)}},{"./_stream_transform":290,inherits:231}],289:[function(t,B,H){(function(d,l){(function(){B.exports=k;var b;k.ReadableState=S,t("events").EventEmitter;var w=function(ne,ae){return ne.listeners(ae).length},e=t("./internal/streams/stream"),o=t("buffer").Buffer,a=l.Uint8Array||function(){};function r(Q){return o.from(Q)}function n(Q){return o.isBuffer(Q)||Q instanceof a}var c=t("util"),s;c&&c.debuglog?s=c.debuglog("stream"):s=function(){};var i=t("./internal/streams/buffer_list"),v=t("./internal/streams/destroy"),u=t("./internal/streams/state"),g=u.getHighWaterMark,h=t("../errors").codes,y=h.ERR_INVALID_ARG_TYPE,p=h.ERR_STREAM_PUSH_AFTER_EOF,A=h.ERR_METHOD_NOT_IMPLEMENTED,m=h.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,M,x,T;t("inherits")(k,e);var _=v.errorOrDestroy,f=["error","close","destroy","pause","resume"];function L(Q,ne,ae){if(typeof Q.prependListener=="function")return Q.prependListener(ne,ae);!Q._events||!Q._events[ne]?Q.on(ne,ae):Array.isArray(Q._events[ne])?Q._events[ne].unshift(ae):Q._events[ne]=[ae,Q._events[ne]]}function S(Q,ne,ae){b=b||t("./_stream_duplex"),Q=Q||{},typeof ae!="boolean"&&(ae=ne instanceof b),this.objectMode=!!Q.objectMode,ae&&(this.objectMode=this.objectMode||!!Q.readableObjectMode),this.highWaterMark=g(this,Q,"readableHighWaterMark",ae),this.buffer=new i,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Q.emitClose!==!1,this.autoDestroy=!!Q.autoDestroy,this.destroyed=!1,this.defaultEncoding=Q.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Q.encoding&&(M||(M=t("string_decoder/").StringDecoder),this.decoder=new M(Q.encoding),this.encoding=Q.encoding)}function k(Q){if(b=b||t("./_stream_duplex"),!(this instanceof k))return new k(Q);var ne=this instanceof b;this._readableState=new S(Q,this,ne),this.readable=!0,Q&&(typeof Q.read=="function"&&(this._read=Q.read),typeof Q.destroy=="function"&&(this._destroy=Q.destroy)),e.call(this)}Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(ne){!this._readableState||(this._readableState.destroyed=ne)}}),k.prototype.destroy=v.destroy,k.prototype._undestroy=v.undestroy,k.prototype._destroy=function(Q,ne){ne(Q)},k.prototype.push=function(Q,ne){var ae=this._readableState,ie;return ae.objectMode?ie=!0:typeof Q=="string"&&(ne=ne||ae.defaultEncoding,ne!==ae.encoding&&(Q=o.from(Q,ne),ne=""),ie=!0),P(this,Q,ne,!1,ie)},k.prototype.unshift=function(Q){return P(this,Q,null,!0,!1)};function P(Q,ne,ae,ie,ue){s("readableAddChunk",ne);var xe=Q._readableState;if(ne===null)xe.reading=!1,F(Q,xe);else{var he;if(ue||(he=I(xe,ne)),he)_(Q,he);else if(xe.objectMode||ne&&ne.length>0)if(typeof ne!="string"&&!xe.objectMode&&Object.getPrototypeOf(ne)!==o.prototype&&(ne=r(ne)),ie)xe.endEmitted?_(Q,new m):z(Q,xe,ne,!0);else if(xe.ended)_(Q,new p);else{if(xe.destroyed)return!1;xe.reading=!1,xe.decoder&&!ae?(ne=xe.decoder.write(ne),xe.objectMode||ne.length!==0?z(Q,xe,ne,!1):q(Q,xe)):z(Q,xe,ne,!1)}else ie||(xe.reading=!1,q(Q,xe))}return!xe.ended&&(xe.length<xe.highWaterMark||xe.length===0)}function z(Q,ne,ae,ie){ne.flowing&&ne.length===0&&!ne.sync?(ne.awaitDrain=0,Q.emit("data",ae)):(ne.length+=ne.objectMode?1:ae.length,ie?ne.buffer.unshift(ae):ne.buffer.push(ae),ne.needReadable&&G(Q)),q(Q,ne)}function I(Q,ne){var ae;return!n(ne)&&typeof ne!="string"&&ne!==void 0&&!Q.objectMode&&(ae=new y("chunk",["string","Buffer","Uint8Array"],ne)),ae}k.prototype.isPaused=function(){return this._readableState.flowing===!1},k.prototype.setEncoding=function(Q){M||(M=t("string_decoder/").StringDecoder);var ne=new M(Q);this._readableState.decoder=ne,this._readableState.encoding=this._readableState.decoder.encoding;for(var ae=this._readableState.buffer.head,ie="";ae!==null;)ie+=ne.write(ae.data),ae=ae.next;return this._readableState.buffer.clear(),ie!==""&&this._readableState.buffer.push(ie),this._readableState.length=ie.length,this};var R=1073741824;function D(Q){return Q>=R?Q=R:(Q--,Q|=Q>>>1,Q|=Q>>>2,Q|=Q>>>4,Q|=Q>>>8,Q|=Q>>>16,Q++),Q}function O(Q,ne){return Q<=0||ne.length===0&&ne.ended?0:ne.objectMode?1:Q!==Q?ne.flowing&&ne.length?ne.buffer.head.data.length:ne.length:(Q>ne.highWaterMark&&(ne.highWaterMark=D(Q)),Q<=ne.length?Q:ne.ended?ne.length:(ne.needReadable=!0,0))}k.prototype.read=function(Q){s("read",Q),Q=parseInt(Q,10);var ne=this._readableState,ae=Q;if(Q!==0&&(ne.emittedReadable=!1),Q===0&&ne.needReadable&&((ne.highWaterMark!==0?ne.length>=ne.highWaterMark:ne.length>0)||ne.ended))return s("read: emitReadable",ne.length,ne.ended),ne.length===0&&ne.ended?re(this):G(this),null;if(Q=O(Q,ne),Q===0&&ne.ended)return ne.length===0&&re(this),null;var ie=ne.needReadable;s("need readable",ie),(ne.length===0||ne.length-Q<ne.highWaterMark)&&(ie=!0,s("length less than watermark",ie)),ne.ended||ne.reading?(ie=!1,s("reading or ended",ie)):ie&&(s("do read"),ne.reading=!0,ne.sync=!0,ne.length===0&&(ne.needReadable=!0),this._read(ne.highWaterMark),ne.sync=!1,ne.reading||(Q=O(ae,ne)));var ue;return Q>0?ue=V(Q,ne):ue=null,ue===null?(ne.needReadable=ne.length<=ne.highWaterMark,Q=0):(ne.length-=Q,ne.awaitDrain=0),ne.length===0&&(ne.ended||(ne.needReadable=!0),ae!==Q&&ne.ended&&re(this)),ue!==null&&this.emit("data",ue),ue};function F(Q,ne){if(s("onEofChunk"),!ne.ended){if(ne.decoder){var ae=ne.decoder.end();ae&&ae.length&&(ne.buffer.push(ae),ne.length+=ne.objectMode?1:ae.length)}ne.ended=!0,ne.sync?G(Q):(ne.needReadable=!1,ne.emittedReadable||(ne.emittedReadable=!0,W(Q)))}}function G(Q){var ne=Q._readableState;s("emitReadable",ne.needReadable,ne.emittedReadable),ne.needReadable=!1,ne.emittedReadable||(s("emitReadable",ne.flowing),ne.emittedReadable=!0,d.nextTick(W,Q))}function W(Q){var ne=Q._readableState;s("emitReadable_",ne.destroyed,ne.length,ne.ended),!ne.destroyed&&(ne.length||ne.ended)&&(Q.emit("readable"),ne.emittedReadable=!1),ne.needReadable=!ne.flowing&&!ne.ended&&ne.length<=ne.highWaterMark,U(Q)}function q(Q,ne){ne.readingMore||(ne.readingMore=!0,d.nextTick(J,Q,ne))}function J(Q,ne){for(;!ne.reading&&!ne.ended&&(ne.length<ne.highWaterMark||ne.flowing&&ne.length===0);){var ae=ne.length;if(s("maybeReadMore read 0"),Q.read(0),ae===ne.length)break}ne.readingMore=!1}k.prototype._read=function(Q){_(this,new A("_read()"))},k.prototype.pipe=function(Q,ne){var ae=this,ie=this._readableState;switch(ie.pipesCount){case 0:ie.pipes=Q;break;case 1:ie.pipes=[ie.pipes,Q];break;default:ie.pipes.push(Q);break}ie.pipesCount+=1,s("pipe count=%d opts=%j",ie.pipesCount,ne);var ue=(!ne||ne.end!==!1)&&Q!==d.stdout&&Q!==d.stderr,xe=ue?ge:De;ie.endEmitted?d.nextTick(xe):ae.once("end",xe),Q.on("unpipe",he);function he(Ye,qe){s("onunpipe"),Ye===ae&&qe&&qe.hasUnpiped===!1&&(qe.hasUnpiped=!0,Ae())}function ge(){s("onend"),Q.end()}var me=X(ae);Q.on("drain",me);var ke=!1;function Ae(){s("cleanup"),Q.removeListener("close",Ge),Q.removeListener("finish",_e),Q.removeListener("drain",me),Q.removeListener("error",He),Q.removeListener("unpipe",he),ae.removeListener("end",ge),ae.removeListener("end",De),ae.removeListener("data",Ne),ke=!0,ie.awaitDrain&&(!Q._writableState||Q._writableState.needDrain)&&me()}ae.on("data",Ne);function Ne(Ye){s("ondata");var qe=Q.write(Ye);s("dest.write",qe),qe===!1&&((ie.pipesCount===1&&ie.pipes===Q||ie.pipesCount>1&&j(ie.pipes,Q)!==-1)&&!ke&&(s("false write response, pause",ie.awaitDrain),ie.awaitDrain++),ae.pause())}function He(Ye){s("onerror",Ye),De(),Q.removeListener("error",He),w(Q,"error")===0&&_(Q,Ye)}L(Q,"error",He);function Ge(){Q.removeListener("finish",_e),De()}Q.once("close",Ge);function _e(){s("onfinish"),Q.removeListener("close",Ge),De()}Q.once("finish",_e);function De(){s("unpipe"),ae.unpipe(Q)}return Q.emit("pipe",ae),ie.flowing||(s("pipe resume"),ae.resume()),Q};function X(Q){return function(){var ae=Q._readableState;s("pipeOnDrain",ae.awaitDrain),ae.awaitDrain&&ae.awaitDrain--,ae.awaitDrain===0&&w(Q,"data")&&(ae.flowing=!0,U(Q))}}k.prototype.unpipe=function(Q){var ne=this._readableState,ae={hasUnpiped:!1};if(ne.pipesCount===0)return this;if(ne.pipesCount===1)return Q&&Q!==ne.pipes?this:(Q||(Q=ne.pipes),ne.pipes=null,ne.pipesCount=0,ne.flowing=!1,Q&&Q.emit("unpipe",this,ae),this);if(!Q){var ie=ne.pipes,ue=ne.pipesCount;ne.pipes=null,ne.pipesCount=0,ne.flowing=!1;for(var xe=0;xe<ue;xe++)ie[xe].emit("unpipe",this,{hasUnpiped:!1});return this}var he=j(ne.pipes,Q);return he===-1?this:(ne.pipes.splice(he,1),ne.pipesCount-=1,ne.pipesCount===1&&(ne.pipes=ne.pipes[0]),Q.emit("unpipe",this,ae),this)},k.prototype.on=function(Q,ne){var ae=e.prototype.on.call(this,Q,ne),ie=this._readableState;return Q==="data"?(ie.readableListening=this.listenerCount("readable")>0,ie.flowing!==!1&&this.resume()):Q==="readable"&&!ie.endEmitted&&!ie.readableListening&&(ie.readableListening=ie.needReadable=!0,ie.flowing=!1,ie.emittedReadable=!1,s("on readable",ie.length,ie.reading),ie.length?G(this):ie.reading||d.nextTick(se,this)),ae},k.prototype.addListener=k.prototype.on,k.prototype.removeListener=function(Q,ne){var ae=e.prototype.removeListener.call(this,Q,ne);return Q==="readable"&&d.nextTick(Z,this),ae},k.prototype.removeAllListeners=function(Q){var ne=e.prototype.removeAllListeners.apply(this,arguments);return(Q==="readable"||Q===void 0)&&d.nextTick(Z,this),ne};function Z(Q){var ne=Q._readableState;ne.readableListening=Q.listenerCount("readable")>0,ne.resumeScheduled&&!ne.paused?ne.flowing=!0:Q.listenerCount("data")>0&&Q.resume()}function se(Q){s("readable nexttick read 0"),Q.read(0)}k.prototype.resume=function(){var Q=this._readableState;return Q.flowing||(s("resume"),Q.flowing=!Q.readableListening,le(this,Q)),Q.paused=!1,this};function le(Q,ne){ne.resumeScheduled||(ne.resumeScheduled=!0,d.nextTick(oe,Q,ne))}function oe(Q,ne){s("resume",ne.reading),ne.reading||Q.read(0),ne.resumeScheduled=!1,Q.emit("resume"),U(Q),ne.flowing&&!ne.reading&&Q.read(0)}k.prototype.pause=function(){return s("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(s("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function U(Q){var ne=Q._readableState;for(s("flow",ne.flowing);ne.flowing&&Q.read()!==null;);}k.prototype.wrap=function(Q){var ne=this,ae=this._readableState,ie=!1;Q.on("end",function(){if(s("wrapped end"),ae.decoder&&!ae.ended){var he=ae.decoder.end();he&&he.length&&ne.push(he)}ne.push(null)}),Q.on("data",function(he){if(s("wrapped data"),ae.decoder&&(he=ae.decoder.write(he)),!(ae.objectMode&&he==null)&&!(!ae.objectMode&&(!he||!he.length))){var ge=ne.push(he);ge||(ie=!0,Q.pause())}});for(var ue in Q)this[ue]===void 0&&typeof Q[ue]=="function"&&(this[ue]=function(ge){return function(){return Q[ge].apply(Q,arguments)}}(ue));for(var xe=0;xe<f.length;xe++)Q.on(f[xe],this.emit.bind(this,f[xe]));return this._read=function(he){s("wrapped _read",he),ie&&(ie=!1,Q.resume())},this},typeof Symbol=="function"&&(k.prototype[Symbol.asyncIterator]=function(){return x===void 0&&(x=t("./internal/streams/async_iterator")),x(this)}),Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(k.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(k.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ne){this._readableState&&(this._readableState.flowing=ne)}}),k._fromList=V,Object.defineProperty(k.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function V(Q,ne){if(ne.length===0)return null;var ae;return ne.objectMode?ae=ne.buffer.shift():!Q||Q>=ne.length?(ne.decoder?ae=ne.buffer.join(""):ne.buffer.length===1?ae=ne.buffer.first():ae=ne.buffer.concat(ne.length),ne.buffer.clear()):ae=ne.buffer.consume(Q,ne.decoder),ae}function re(Q){var ne=Q._readableState;s("endReadable",ne.endEmitted),ne.endEmitted||(ne.ended=!0,d.nextTick(ee,ne,Q))}function ee(Q,ne){if(s("endReadableNT",Q.endEmitted,Q.length),!Q.endEmitted&&Q.length===0&&(Q.endEmitted=!0,ne.readable=!1,ne.emit("end"),Q.autoDestroy)){var ae=ne._writableState;(!ae||ae.autoDestroy&&ae.finished)&&ne.destroy()}}typeof Symbol=="function"&&(k.from=function(Q,ne){return T===void 0&&(T=t("./internal/streams/from")),T(k,Q,ne)});function j(Q,ne){for(var ae=0,ie=Q.length;ae<ie;ae++)if(Q[ae]===ne)return ae;return-1}}).call(this)}).call(this,t("_process"),typeof Ao!="undefined"?Ao:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../errors":286,"./_stream_duplex":287,"./internal/streams/async_iterator":292,"./internal/streams/buffer_list":293,"./internal/streams/destroy":294,"./internal/streams/from":296,"./internal/streams/state":298,"./internal/streams/stream":299,_process:277,buffer:85,events:84,inherits:231,"string_decoder/":300,util:83}],290:[function(t,B,H){B.exports=r;var d=t("../errors").codes,l=d.ERR_METHOD_NOT_IMPLEMENTED,b=d.ERR_MULTIPLE_CALLBACK,w=d.ERR_TRANSFORM_ALREADY_TRANSFORMING,e=d.ERR_TRANSFORM_WITH_LENGTH_0,o=t("./_stream_duplex");t("inherits")(r,o);function a(s,i){var v=this._transformState;v.transforming=!1;var u=v.writecb;if(u===null)return this.emit("error",new b);v.writechunk=null,v.writecb=null,i!=null&&this.push(i),u(s);var g=this._readableState;g.reading=!1,(g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}function r(s){if(!(this instanceof r))return new r(s);o.call(this,s),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,s&&(typeof s.transform=="function"&&(this._transform=s.transform),typeof s.flush=="function"&&(this._flush=s.flush)),this.on("prefinish",n)}function n(){var s=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(i,v){c(s,i,v)}):c(this,null,null)}r.prototype.push=function(s,i){return this._transformState.needTransform=!1,o.prototype.push.call(this,s,i)},r.prototype._transform=function(s,i,v){v(new l("_transform()"))},r.prototype._write=function(s,i,v){var u=this._transformState;if(u.writecb=v,u.writechunk=s,u.writeencoding=i,!u.transforming){var g=this._readableState;(u.needTransform||g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}},r.prototype._read=function(s){var i=this._transformState;i.writechunk!==null&&!i.transforming?(i.transforming=!0,this._transform(i.writechunk,i.writeencoding,i.afterTransform)):i.needTransform=!0},r.prototype._destroy=function(s,i){o.prototype._destroy.call(this,s,function(v){i(v)})};function c(s,i,v){if(i)return s.emit("error",i);if(v!=null&&s.push(v),s._writableState.length)throw new e;if(s._transformState.transforming)throw new w;return s.push(null)}},{"../errors":286,"./_stream_duplex":287,inherits:231}],291:[function(t,B,H){(function(d,l){(function(){B.exports=S;function b(U){var V=this;this.next=null,this.entry=null,this.finish=function(){oe(V,U)}}var w;S.WritableState=f;var e={deprecate:t("util-deprecate")},o=t("./internal/streams/stream"),a=t("buffer").Buffer,r=l.Uint8Array||function(){};function n(U){return a.from(U)}function c(U){return a.isBuffer(U)||U instanceof r}var s=t("./internal/streams/destroy"),i=t("./internal/streams/state"),v=i.getHighWaterMark,u=t("../errors").codes,g=u.ERR_INVALID_ARG_TYPE,h=u.ERR_METHOD_NOT_IMPLEMENTED,y=u.ERR_MULTIPLE_CALLBACK,p=u.ERR_STREAM_CANNOT_PIPE,A=u.ERR_STREAM_DESTROYED,m=u.ERR_STREAM_NULL_VALUES,M=u.ERR_STREAM_WRITE_AFTER_END,x=u.ERR_UNKNOWN_ENCODING,T=s.errorOrDestroy;t("inherits")(S,o);function _(){}function f(U,V,re){w=w||t("./_stream_duplex"),U=U||{},typeof re!="boolean"&&(re=V instanceof w),this.objectMode=!!U.objectMode,re&&(this.objectMode=this.objectMode||!!U.writableObjectMode),this.highWaterMark=v(this,U,"writableHighWaterMark",re),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ee=U.decodeStrings===!1;this.decodeStrings=!ee,this.defaultEncoding=U.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(j){F(V,j)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=U.emitClose!==!1,this.autoDestroy=!!U.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new b(this)}f.prototype.getBuffer=function(){for(var V=this.bufferedRequest,re=[];V;)re.push(V),V=V.next;return re},function(){try{Object.defineProperty(f.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var L;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(L=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(V){return L.call(this,V)?!0:this!==S?!1:V&&V._writableState instanceof f}})):L=function(V){return V instanceof this};function S(U){w=w||t("./_stream_duplex");var V=this instanceof w;if(!V&&!L.call(S,this))return new S(U);this._writableState=new f(U,this,V),this.writable=!0,U&&(typeof U.write=="function"&&(this._write=U.write),typeof U.writev=="function"&&(this._writev=U.writev),typeof U.destroy=="function"&&(this._destroy=U.destroy),typeof U.final=="function"&&(this._final=U.final)),o.call(this)}S.prototype.pipe=function(){T(this,new p)};function k(U,V){var re=new M;T(U,re),d.nextTick(V,re)}function P(U,V,re,ee){var j;return re===null?j=new m:typeof re!="string"&&!V.objectMode&&(j=new g("chunk",["string","Buffer"],re)),j?(T(U,j),d.nextTick(ee,j),!1):!0}S.prototype.write=function(U,V,re){var ee=this._writableState,j=!1,Q=!ee.objectMode&&c(U);return Q&&!a.isBuffer(U)&&(U=n(U)),typeof V=="function"&&(re=V,V=null),Q?V="buffer":V||(V=ee.defaultEncoding),typeof re!="function"&&(re=_),ee.ending?k(this,re):(Q||P(this,ee,U,re))&&(ee.pendingcb++,j=I(this,ee,Q,U,V,re)),j},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var U=this._writableState;U.corked&&(U.corked--,!U.writing&&!U.corked&&!U.bufferProcessing&&U.bufferedRequest&&q(this,U))},S.prototype.setDefaultEncoding=function(V){if(typeof V=="string"&&(V=V.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((V+"").toLowerCase())>-1))throw new x(V);return this._writableState.defaultEncoding=V,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function z(U,V,re){return!U.objectMode&&U.decodeStrings!==!1&&typeof V=="string"&&(V=a.from(V,re)),V}Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function I(U,V,re,ee,j,Q){if(!re){var ne=z(V,ee,j);ee!==ne&&(re=!0,j="buffer",ee=ne)}var ae=V.objectMode?1:ee.length;V.length+=ae;var ie=V.length<V.highWaterMark;if(ie||(V.needDrain=!0),V.writing||V.corked){var ue=V.lastBufferedRequest;V.lastBufferedRequest={chunk:ee,encoding:j,isBuf:re,callback:Q,next:null},ue?ue.next=V.lastBufferedRequest:V.bufferedRequest=V.lastBufferedRequest,V.bufferedRequestCount+=1}else R(U,V,!1,ae,ee,j,Q);return ie}function R(U,V,re,ee,j,Q,ne){V.writelen=ee,V.writecb=ne,V.writing=!0,V.sync=!0,V.destroyed?V.onwrite(new A("write")):re?U._writev(j,V.onwrite):U._write(j,Q,V.onwrite),V.sync=!1}function D(U,V,re,ee,j){--V.pendingcb,re?(d.nextTick(j,ee),d.nextTick(se,U,V),U._writableState.errorEmitted=!0,T(U,ee)):(j(ee),U._writableState.errorEmitted=!0,T(U,ee),se(U,V))}function O(U){U.writing=!1,U.writecb=null,U.length-=U.writelen,U.writelen=0}function F(U,V){var re=U._writableState,ee=re.sync,j=re.writecb;if(typeof j!="function")throw new y;if(O(re),V)D(U,re,ee,V,j);else{var Q=J(re)||U.destroyed;!Q&&!re.corked&&!re.bufferProcessing&&re.bufferedRequest&&q(U,re),ee?d.nextTick(G,U,re,Q,j):G(U,re,Q,j)}}function G(U,V,re,ee){re||W(U,V),V.pendingcb--,ee(),se(U,V)}function W(U,V){V.length===0&&V.needDrain&&(V.needDrain=!1,U.emit("drain"))}function q(U,V){V.bufferProcessing=!0;var re=V.bufferedRequest;if(U._writev&&re&&re.next){var ee=V.bufferedRequestCount,j=new Array(ee),Q=V.corkedRequestsFree;Q.entry=re;for(var ne=0,ae=!0;re;)j[ne]=re,re.isBuf||(ae=!1),re=re.next,ne+=1;j.allBuffers=ae,R(U,V,!0,V.length,j,"",Q.finish),V.pendingcb++,V.lastBufferedRequest=null,Q.next?(V.corkedRequestsFree=Q.next,Q.next=null):V.corkedRequestsFree=new b(V),V.bufferedRequestCount=0}else{for(;re;){var ie=re.chunk,ue=re.encoding,xe=re.callback,he=V.objectMode?1:ie.length;if(R(U,V,!1,he,ie,ue,xe),re=re.next,V.bufferedRequestCount--,V.writing)break}re===null&&(V.lastBufferedRequest=null)}V.bufferedRequest=re,V.bufferProcessing=!1}S.prototype._write=function(U,V,re){re(new h("_write()"))},S.prototype._writev=null,S.prototype.end=function(U,V,re){var ee=this._writableState;return typeof U=="function"?(re=U,U=null,V=null):typeof V=="function"&&(re=V,V=null),U!=null&&this.write(U,V),ee.corked&&(ee.corked=1,this.uncork()),ee.ending||le(this,ee,re),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function J(U){return U.ending&&U.length===0&&U.bufferedRequest===null&&!U.finished&&!U.writing}function X(U,V){U._final(function(re){V.pendingcb--,re&&T(U,re),V.prefinished=!0,U.emit("prefinish"),se(U,V)})}function Z(U,V){!V.prefinished&&!V.finalCalled&&(typeof U._final=="function"&&!V.destroyed?(V.pendingcb++,V.finalCalled=!0,d.nextTick(X,U,V)):(V.prefinished=!0,U.emit("prefinish")))}function se(U,V){var re=J(V);if(re&&(Z(U,V),V.pendingcb===0&&(V.finished=!0,U.emit("finish"),V.autoDestroy))){var ee=U._readableState;(!ee||ee.autoDestroy&&ee.endEmitted)&&U.destroy()}return re}function le(U,V,re){V.ending=!0,se(U,V),re&&(V.finished?d.nextTick(re):U.once("finish",re)),V.ended=!0,U.writable=!1}function oe(U,V,re){var ee=U.entry;for(U.entry=null;ee;){var j=ee.callback;V.pendingcb--,j(re),ee=ee.next}V.corkedRequestsFree.next=U}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(V){!this._writableState||(this._writableState.destroyed=V)}}),S.prototype.destroy=s.destroy,S.prototype._undestroy=s.undestroy,S.prototype._destroy=function(U,V){V(U)}}).call(this)}).call(this,t("_process"),typeof Ao!="undefined"?Ao:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../errors":286,"./_stream_duplex":287,"./internal/streams/destroy":294,"./internal/streams/state":298,"./internal/streams/stream":299,_process:277,buffer:85,inherits:231,"util-deprecate":330}],292:[function(t,B,H){(function(d){(function(){var l;function b(A,m,M){return m in A?Object.defineProperty(A,m,{value:M,enumerable:!0,configurable:!0,writable:!0}):A[m]=M,A}var w=t("./end-of-stream"),e=Symbol("lastResolve"),o=Symbol("lastReject"),a=Symbol("error"),r=Symbol("ended"),n=Symbol("lastPromise"),c=Symbol("handlePromise"),s=Symbol("stream");function i(A,m){return{value:A,done:m}}function v(A){var m=A[e];if(m!==null){var M=A[s].read();M!==null&&(A[n]=null,A[e]=null,A[o]=null,m(i(M,!1)))}}function u(A){d.nextTick(v,A)}function g(A,m){return function(M,x){A.then(function(){if(m[r]){M(i(void 0,!0));return}m[c](M,x)},x)}}var h=Object.getPrototypeOf(function(){}),y=Object.setPrototypeOf((l={get stream(){return this[s]},next:function(){var m=this,M=this[a];if(M!==null)return Promise.reject(M);if(this[r])return Promise.resolve(i(void 0,!0));if(this[s].destroyed)return new Promise(function(f,L){d.nextTick(function(){m[a]?L(m[a]):f(i(void 0,!0))})});var x=this[n],T;if(x)T=new Promise(g(x,this));else{var _=this[s].read();if(_!==null)return Promise.resolve(i(_,!1));T=new Promise(this[c])}return this[n]=T,T}},b(l,Symbol.asyncIterator,function(){return this}),b(l,"return",function(){var m=this;return new Promise(function(M,x){m[s].destroy(null,function(T){if(T){x(T);return}M(i(void 0,!0))})})}),l),h),p=function(m){var M,x=Object.create(y,(M={},b(M,s,{value:m,writable:!0}),b(M,e,{value:null,writable:!0}),b(M,o,{value:null,writable:!0}),b(M,a,{value:null,writable:!0}),b(M,r,{value:m._readableState.endEmitted,writable:!0}),b(M,c,{value:function(_,f){var L=x[s].read();L?(x[n]=null,x[e]=null,x[o]=null,_(i(L,!1))):(x[e]=_,x[o]=f)},writable:!0}),M));return x[n]=null,w(m,function(T){if(T&&T.code!=="ERR_STREAM_PREMATURE_CLOSE"){var _=x[o];_!==null&&(x[n]=null,x[e]=null,x[o]=null,_(T)),x[a]=T;return}var f=x[e];f!==null&&(x[n]=null,x[e]=null,x[o]=null,f(i(void 0,!0))),x[r]=!0}),m.on("readable",u.bind(null,x)),x};B.exports=p}).call(this)}).call(this,t("_process"))},{"./end-of-stream":295,_process:277}],293:[function(t,B,H){function d(v,u){var g=Object.keys(v);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(v);u&&(h=h.filter(function(y){return Object.getOwnPropertyDescriptor(v,y).enumerable})),g.push.apply(g,h)}return g}function l(v){for(var u=1;u<arguments.length;u++){var g=arguments[u]!=null?arguments[u]:{};u%2?d(Object(g),!0).forEach(function(h){b(v,h,g[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(g)):d(Object(g)).forEach(function(h){Object.defineProperty(v,h,Object.getOwnPropertyDescriptor(g,h))})}return v}function b(v,u,g){return u in v?Object.defineProperty(v,u,{value:g,enumerable:!0,configurable:!0,writable:!0}):v[u]=g,v}function w(v,u){if(!(v instanceof u))throw new TypeError("Cannot call a class as a function")}function e(v,u){for(var g=0;g<u.length;g++){var h=u[g];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(v,h.key,h)}}function o(v,u,g){return u&&e(v.prototype,u),g&&e(v,g),v}var a=t("buffer"),r=a.Buffer,n=t("util"),c=n.inspect,s=c&&c.custom||"inspect";function i(v,u,g){r.prototype.copy.call(v,u,g)}B.exports=function(){function v(){w(this,v),this.head=null,this.tail=null,this.length=0}return o(v,[{key:"push",value:function(g){var h={data:g,next:null};this.length>0?this.tail.next=h:this.head=h,this.tail=h,++this.length}},{key:"unshift",value:function(g){var h={data:g,next:this.head};this.length===0&&(this.tail=h),this.head=h,++this.length}},{key:"shift",value:function(){if(this.length!==0){var g=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,g}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(g){if(this.length===0)return"";for(var h=this.head,y=""+h.data;h=h.next;)y+=g+h.data;return y}},{key:"concat",value:function(g){if(this.length===0)return r.alloc(0);for(var h=r.allocUnsafe(g>>>0),y=this.head,p=0;y;)i(y.data,h,p),p+=y.data.length,y=y.next;return h}},{key:"consume",value:function(g,h){var y;return g<this.head.data.length?(y=this.head.data.slice(0,g),this.head.data=this.head.data.slice(g)):g===this.head.data.length?y=this.shift():y=h?this._getString(g):this._getBuffer(g),y}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(g){var h=this.head,y=1,p=h.data;for(g-=p.length;h=h.next;){var A=h.data,m=g>A.length?A.length:g;if(m===A.length?p+=A:p+=A.slice(0,g),g-=m,g===0){m===A.length?(++y,h.next?this.head=h.next:this.head=this.tail=null):(this.head=h,h.data=A.slice(m));break}++y}return this.length-=y,p}},{key:"_getBuffer",value:function(g){var h=r.allocUnsafe(g),y=this.head,p=1;for(y.data.copy(h),g-=y.data.length;y=y.next;){var A=y.data,m=g>A.length?A.length:g;if(A.copy(h,h.length-g,0,m),g-=m,g===0){m===A.length?(++p,y.next?this.head=y.next:this.head=this.tail=null):(this.head=y,y.data=A.slice(m));break}++p}return this.length-=p,h}},{key:s,value:function(g,h){return c(this,l({},h,{depth:0,customInspect:!1}))}}]),v}()},{buffer:85,util:83}],294:[function(t,B,H){(function(d){(function(){function l(r,n){var c=this,s=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return s||i?(n?n(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,d.nextTick(o,this,r)):d.nextTick(o,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(v){!n&&v?c._writableState?c._writableState.errorEmitted?d.nextTick(w,c):(c._writableState.errorEmitted=!0,d.nextTick(b,c,v)):d.nextTick(b,c,v):n?(d.nextTick(w,c),n(v)):d.nextTick(w,c)}),this)}function b(r,n){o(r,n),w(r)}function w(r){r._writableState&&!r._writableState.emitClose||r._readableState&&!r._readableState.emitClose||r.emit("close")}function e(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function o(r,n){r.emit("error",n)}function a(r,n){var c=r._readableState,s=r._writableState;c&&c.autoDestroy||s&&s.autoDestroy?r.destroy(n):r.emit("error",n)}B.exports={destroy:l,undestroy:e,errorOrDestroy:a}}).call(this)}).call(this,t("_process"))},{_process:277}],295:[function(t,B,H){var d=t("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function l(o){var a=!1;return function(){if(!a){a=!0;for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];o.apply(this,n)}}}function b(){}function w(o){return o.setHeader&&typeof o.abort=="function"}function e(o,a,r){if(typeof a=="function")return e(o,null,a);a||(a={}),r=l(r||b);var n=a.readable||a.readable!==!1&&o.readable,c=a.writable||a.writable!==!1&&o.writable,s=function(){o.writable||v()},i=o._writableState&&o._writableState.finished,v=function(){c=!1,i=!0,n||r.call(o)},u=o._readableState&&o._readableState.endEmitted,g=function(){n=!1,u=!0,c||r.call(o)},h=function(m){r.call(o,m)},y=function(){var m;if(n&&!u)return(!o._readableState||!o._readableState.ended)&&(m=new d),r.call(o,m);if(c&&!i)return(!o._writableState||!o._writableState.ended)&&(m=new d),r.call(o,m)},p=function(){o.req.on("finish",v)};return w(o)?(o.on("complete",v),o.on("abort",y),o.req?p():o.on("request",p)):c&&!o._writableState&&(o.on("end",s),o.on("close",s)),o.on("end",g),o.on("finish",v),a.error!==!1&&o.on("error",h),o.on("close",y),function(){o.removeListener("complete",v),o.removeListener("abort",y),o.removeListener("request",p),o.req&&o.req.removeListener("finish",v),o.removeListener("end",s),o.removeListener("close",s),o.removeListener("finish",v),o.removeListener("end",g),o.removeListener("error",h),o.removeListener("close",y)}}B.exports=e},{"../../../errors":286}],296:[function(t,B,H){B.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],297:[function(t,B,H){var d;function l(v){var u=!1;return function(){u||(u=!0,v.apply(void 0,arguments))}}var b=t("../../../errors").codes,w=b.ERR_MISSING_ARGS,e=b.ERR_STREAM_DESTROYED;function o(v){if(v)throw v}function a(v){return v.setHeader&&typeof v.abort=="function"}function r(v,u,g,h){h=l(h);var y=!1;v.on("close",function(){y=!0}),d===void 0&&(d=t("./end-of-stream")),d(v,{readable:u,writable:g},function(A){if(A)return h(A);y=!0,h()});var p=!1;return function(A){if(!y&&!p){if(p=!0,a(v))return v.abort();if(typeof v.destroy=="function")return v.destroy();h(A||new e("pipe"))}}}function n(v){v()}function c(v,u){return v.pipe(u)}function s(v){return!v.length||typeof v[v.length-1]!="function"?o:v.pop()}function i(){for(var v=arguments.length,u=new Array(v),g=0;g<v;g++)u[g]=arguments[g];var h=s(u);if(Array.isArray(u[0])&&(u=u[0]),u.length<2)throw new w("streams");var y,p=u.map(function(A,m){var M=m<u.length-1,x=m>0;return r(A,M,x,function(T){y||(y=T),T&&p.forEach(n),!M&&(p.forEach(n),h(y))})});return u.reduce(c)}B.exports=i},{"../../../errors":286,"./end-of-stream":295}],298:[function(t,B,H){var d=t("../../../errors").codes.ERR_INVALID_OPT_VALUE;function l(w,e,o){return w.highWaterMark!=null?w.highWaterMark:e?w[o]:null}function b(w,e,o,a){var r=l(e,a,o);if(r!=null){if(!(isFinite(r)&&Math.floor(r)===r)||r<0){var n=a?o:"highWaterMark";throw new d(n,r)}return Math.floor(r)}return w.objectMode?16:16*1024}B.exports={getHighWaterMark:b}},{"../../../errors":286}],299:[function(t,B,H){B.exports=t("events").EventEmitter},{events:84}],300:[function(t,B,H){var d=t("safe-buffer").Buffer,l=d.isEncoding||function(p){switch(p=""+p,p&&p.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function b(p){if(!p)return"utf8";for(var A;;)switch(p){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return p;default:if(A)return;p=(""+p).toLowerCase(),A=!0}}function w(p){var A=b(p);if(typeof A!="string"&&(d.isEncoding===l||!l(p)))throw new Error("Unknown encoding: "+p);return A||p}H.StringDecoder=e;function e(p){this.encoding=w(p);var A;switch(this.encoding){case"utf16le":this.text=i,this.end=v,A=4;break;case"utf8":this.fillLast=n,A=4;break;case"base64":this.text=u,this.end=g,A=3;break;default:this.write=h,this.end=y;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=d.allocUnsafe(A)}e.prototype.write=function(p){if(p.length===0)return"";var A,m;if(this.lastNeed){if(A=this.fillLast(p),A===void 0)return"";m=this.lastNeed,this.lastNeed=0}else m=0;return m<p.length?A?A+this.text(p,m):this.text(p,m):A||""},e.prototype.end=s,e.prototype.text=c,e.prototype.fillLast=function(p){if(this.lastNeed<=p.length)return p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,p.length),this.lastNeed-=p.length};function o(p){return p<=127?0:p>>5===6?2:p>>4===14?3:p>>3===30?4:p>>6===2?-1:-2}function a(p,A,m){var M=A.length-1;if(M<m)return 0;var x=o(A[M]);return x>=0?(x>0&&(p.lastNeed=x-1),x):--M<m||x===-2?0:(x=o(A[M]),x>=0?(x>0&&(p.lastNeed=x-2),x):--M<m||x===-2?0:(x=o(A[M]),x>=0?(x>0&&(x===2?x=0:p.lastNeed=x-3),x):0))}function r(p,A,m){if((A[0]&192)!==128)return p.lastNeed=0,"\uFFFD";if(p.lastNeed>1&&A.length>1){if((A[1]&192)!==128)return p.lastNeed=1,"\uFFFD";if(p.lastNeed>2&&A.length>2&&(A[2]&192)!==128)return p.lastNeed=2,"\uFFFD"}}function n(p){var A=this.lastTotal-this.lastNeed,m=r(this,p);if(m!==void 0)return m;if(this.lastNeed<=p.length)return p.copy(this.lastChar,A,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);p.copy(this.lastChar,A,0,p.length),this.lastNeed-=p.length}function c(p,A){var m=a(this,p,A);if(!this.lastNeed)return p.toString("utf8",A);this.lastTotal=m;var M=p.length-(m-this.lastNeed);return p.copy(this.lastChar,0,M),p.toString("utf8",A,M)}function s(p){var A=p&&p.length?this.write(p):"";return this.lastNeed?A+"\uFFFD":A}function i(p,A){if((p.length-A)%2===0){var m=p.toString("utf16le",A);if(m){var M=m.charCodeAt(m.length-1);if(M>=55296&&M<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1],m.slice(0,-1)}return m}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=p[p.length-1],p.toString("utf16le",A,p.length-1)}function v(p){var A=p&&p.length?this.write(p):"";if(this.lastNeed){var m=this.lastTotal-this.lastNeed;return A+this.lastChar.toString("utf16le",0,m)}return A}function u(p,A){var m=(p.length-A)%3;return m===0?p.toString("base64",A):(this.lastNeed=3-m,this.lastTotal=3,m===1?this.lastChar[0]=p[p.length-1]:(this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1]),p.toString("base64",A,p.length-m))}function g(p){var A=p&&p.length?this.write(p):"";return this.lastNeed?A+this.lastChar.toString("base64",0,3-this.lastNeed):A}function h(p){return p.toString(this.encoding)}function y(p){return p&&p.length?this.write(p):""}},{"safe-buffer":284}],301:[function(t,B,H){(function(d,l){(function(){var b=t("assert"),w=t("debug")("stream-parser");B.exports=n;var e=-1,o=0,a=1,r=2;function n(m){var M=m&&typeof m._transform=="function",x=m&&typeof m._write=="function";if(!M&&!x)throw new Error("must pass a Writable or Transform stream in");w("extending Parser into stream"),m._bytes=s,m._skipBytes=i,M&&(m._passthrough=v),M?m._transform=g:m._write=u}function c(m){w("initializing parser stream"),m._parserBytesLeft=0,m._parserBuffers=[],m._parserBuffered=0,m._parserState=e,m._parserCallback=null,typeof m.push=="function"&&(m._parserOutput=m.push.bind(m)),m._parserInit=!0}function s(m,M){b(!this._parserCallback,'there is already a "callback" set!'),b(isFinite(m)&&m>0,'can only buffer a finite number of bytes > 0, got "'+m+'"'),this._parserInit||c(this),w("buffering %o bytes",m),this._parserBytesLeft=m,this._parserCallback=M,this._parserState=o}function i(m,M){b(!this._parserCallback,'there is already a "callback" set!'),b(m>0,'can only skip > 0 bytes, got "'+m+'"'),this._parserInit||c(this),w("skipping %o bytes",m),this._parserBytesLeft=m,this._parserCallback=M,this._parserState=a}function v(m,M){b(!this._parserCallback,'There is already a "callback" set!'),b(m>0,'can only pass through > 0 bytes, got "'+m+'"'),this._parserInit||c(this),w("passing through %o bytes",m),this._parserBytesLeft=m,this._parserCallback=M,this._parserState=r}function u(m,M,x){this._parserInit||c(this),w("write(%o bytes)",m.length),typeof M=="function"&&(x=M),p(this,m,null,x)}function g(m,M,x){this._parserInit||c(this),w("transform(%o bytes)",m.length),typeof M!="function"&&(M=this._parserOutput),p(this,m,M,x)}function h(m,M,x,T){return m._parserBytesLeft<=0?T(new Error("got data but not currently parsing anything")):M.length<=m._parserBytesLeft?function(){return y(m,M,x,T)}:function(){var _=M.slice(0,m._parserBytesLeft);return y(m,_,x,function(f){if(f)return T(f);if(M.length>_.length)return function(){return h(m,M.slice(_.length),x,T)}})}}function y(m,M,x,T){if(m._parserBytesLeft-=M.length,w("%o bytes left for stream piece",m._parserBytesLeft),m._parserState===o?(m._parserBuffers.push(M),m._parserBuffered+=M.length):m._parserState===r&&x(M),m._parserBytesLeft===0){var _=m._parserCallback;if(_&&m._parserState===o&&m._parserBuffers.length>1&&(M=l.concat(m._parserBuffers,m._parserBuffered)),m._parserState!==o&&(M=null),m._parserCallback=null,m._parserBuffered=0,m._parserState=e,m._parserBuffers.splice(0),_){var f=[];M&&f.push(M),x&&f.push(x);var L=_.length>f.length;L&&f.push(A(T));var S=_.apply(m,f);if(!L||T===S)return T}}else return T}var p=A(h);function A(m){return function(){for(var M=m.apply(this,arguments);typeof M=="function";)M=M();return M}}}).call(this)}).call(this,t("_process"),t("buffer").Buffer)},{_process:277,assert:75,buffer:85,debug:302}],302:[function(t,B,H){(function(d){(function(){H=B.exports=t("./debug"),H.log=w,H.formatArgs=b,H.save=e,H.load=o,H.useColors=l,H.storage=typeof chrome!="undefined"&&typeof chrome.storage!="undefined"?chrome.storage.local:a(),H.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function l(){return typeof window!="undefined"&&window.process&&window.process.type==="renderer"?!0:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}H.formatters.j=function(r){try{return JSON.stringify(r)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}};function b(r){var n=this.useColors;if(r[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+r[0]+(n?"%c ":" ")+"+"+H.humanize(this.diff),!!n){var c="color: "+this.color;r.splice(1,0,c,"color: inherit");var s=0,i=0;r[0].replace(/%[a-zA-Z%]/g,function(v){v!=="%%"&&(s++,v==="%c"&&(i=s))}),r.splice(i,0,c)}}function w(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function e(r){try{r==null?H.storage.removeItem("debug"):H.storage.debug=r}catch{}}function o(){var r;try{r=H.storage.debug}catch{}return!r&&typeof d!="undefined"&&"env"in d&&(r={}.DEBUG),r}H.enable(o());function a(){try{return window.localStorage}catch{}}}).call(this)}).call(this,t("_process"))},{"./debug":303,_process:277}],303:[function(t,B,H){H=B.exports=b.debug=b.default=b,H.coerce=a,H.disable=e,H.enable=w,H.enabled=o,H.humanize=t("ms"),H.names=[],H.skips=[],H.formatters={};var d;function l(r){var n=0,c;for(c in r)n=(n<<5)-n+r.charCodeAt(c),n|=0;return H.colors[Math.abs(n)%H.colors.length]}function b(r){function n(){if(!!n.enabled){var c=n,s=+new Date,i=s-(d||s);c.diff=i,c.prev=d,c.curr=s,d=s;for(var v=new Array(arguments.length),u=0;u<v.length;u++)v[u]=arguments[u];v[0]=H.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");var g=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,function(y,p){if(y==="%%")return y;g++;var A=H.formatters[p];if(typeof A=="function"){var m=v[g];y=A.call(c,m),v.splice(g,1),g--}return y}),H.formatArgs.call(c,v);var h=n.log||H.log||console.log.bind(console);h.apply(c,v)}}return n.namespace=r,n.enabled=H.enabled(r),n.useColors=H.useColors(),n.color=l(r),typeof H.init=="function"&&H.init(n),n}function w(r){H.save(r),H.names=[],H.skips=[];for(var n=(typeof r=="string"?r:"").split(/[\s,]+/),c=n.length,s=0;s<c;s++)!n[s]||(r=n[s].replace(/\*/g,".*?"),r[0]==="-"?H.skips.push(new RegExp("^"+r.substr(1)+"$")):H.names.push(new RegExp("^"+r+"$")))}function e(){H.enable("")}function o(r){var n,c;for(n=0,c=H.skips.length;n<c;n++)if(H.skips[n].test(r))return!1;for(n=0,c=H.names.length;n<c;n++)if(H.names[n].test(r))return!0;return!1}function a(r){return r instanceof Error?r.stack||r.message:r}},{ms:304}],304:[function(t,B,H){var d=1e3,l=d*60,b=l*60,w=b*24,e=w*365.25;B.exports=function(c,s){s=s||{};var i=typeof c;if(i==="string"&&c.length>0)return o(c);if(i==="number"&&isNaN(c)===!1)return s.long?r(c):a(c);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(c))};function o(c){if(c=String(c),!(c.length>100)){var s=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(c);if(!!s){var i=parseFloat(s[1]),v=(s[2]||"ms").toLowerCase();switch(v){case"years":case"year":case"yrs":case"yr":case"y":return i*e;case"days":case"day":case"d":return i*w;case"hours":case"hour":case"hrs":case"hr":case"h":return i*b;case"minutes":case"minute":case"mins":case"min":case"m":return i*l;case"seconds":case"second":case"secs":case"sec":case"s":return i*d;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}function a(c){return c>=w?Math.round(c/w)+"d":c>=b?Math.round(c/b)+"h":c>=l?Math.round(c/l)+"m":c>=d?Math.round(c/d)+"s":c+"ms"}function r(c){return n(c,w,"day")||n(c,b,"hour")||n(c,l,"minute")||n(c,d,"second")||c+" ms"}function n(c,s,i){if(!(c<s))return c<s*1.5?Math.floor(c/s)+" "+i:Math.ceil(c/s)+" "+i+"s"}},{}],305:[function(t,B,H){var d=t("parenthesis");B.exports=function(b,w,e){if(b==null)throw Error("First argument should be a string");if(w==null)throw Error("Separator should be a string or a RegExp");e?(typeof e=="string"||Array.isArray(e))&&(e={ignore:e}):e={},e.escape==null&&(e.escape=!0),e.ignore==null?e.ignore=["[]","()","{}","<>",'""',"''","``","\u201C\u201D","\xAB\xBB"]:(typeof e.ignore=="string"&&(e.ignore=[e.ignore]),e.ignore=e.ignore.map(function(v){return v.length===1&&(v=v+v),v}));var o=d.parse(b,{flat:!0,brackets:e.ignore}),a=o[0],r=a.split(w);if(e.escape){for(var n=[],c=0;c<r.length;c++){var s=r[c],i=r[c+1];s[s.length-1]==="\\"&&s[s.length-2]!=="\\"?(n.push(s+w+i),c++):n.push(s)}r=n}for(var c=0;c<r.length;c++)o[0]=r[c],r[c]=d.stringify(o,{flat:!0});return r}},{parenthesis:248}],306:[function(t,B,H){B.exports=d;function d(l){for(var b=l.length,w=new Array(b),e=new Array(b),o=new Array(b),a=new Array(b),r=new Array(b),n=new Array(b),c=0;c<b;++c)w[c]=-1,e[c]=0,o[c]=!1,a[c]=0,r[c]=-1,n[c]=[];var s=0,i=[],v=[];function u(p){var A=[p],m=[p];for(w[p]=e[p]=s,o[p]=!0,s+=1;m.length>0;){p=m[m.length-1];var M=l[p];if(a[p]<M.length){for(var x=a[p];x<M.length;++x){var T=M[x];if(w[T]<0){w[T]=e[T]=s,o[T]=!0,s+=1,A.push(T),m.push(T);break}else o[T]&&(e[p]=Math.min(e[p],e[T])|0);r[T]>=0&&n[p].push(r[T])}a[p]=x}else{if(e[p]===w[p]){for(var _=[],f=[],L=0,x=A.length-1;x>=0;--x){var S=A[x];if(o[S]=!1,_.push(S),f.push(n[S]),L+=n[S].length,r[S]=i.length,S===p){A.length=x;break}}i.push(_);for(var k=new Array(L),x=0;x<f.length;x++)for(var P=0;P<f[x].length;P++)k[--L]=f[x][P];v.push(k)}m.pop()}}}for(var c=0;c<b;++c)w[c]<0&&u(c);for(var g,c=0;c<v.length;c++){var h=v[c];if(h.length!==0){h.sort(function(A,m){return A-m}),g=[h[0]];for(var y=1;y<h.length;y++)h[y]!==h[y-1]&&g.push(h[y]);v[c]=g}}return{components:i,adjacencyList:v}}},{}],307:[function(t,B,H){Object.defineProperty(H,"__esModule",{value:!0});var d=function(){function r(n,c){var s=[],i=!0,v=!1,u=void 0;try{for(var g=n[Symbol.iterator](),h;!(i=(h=g.next()).done)&&(s.push(h.value),!(c&&s.length===c));i=!0);}catch(y){v=!0,u=y}finally{try{!i&&g.return&&g.return()}finally{if(v)throw u}}return s}return function(n,c){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return r(n,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=Math.PI*2,b=function(n,c,s,i,v,u,g){var h=n.x,y=n.y;h*=c,y*=s;var p=i*h-v*y,A=v*h+i*y;return{x:p+u,y:A+g}},w=function(n,c){var s=c===1.5707963267948966?.551915024494:c===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(c/4),i=Math.cos(n),v=Math.sin(n),u=Math.cos(n+c),g=Math.sin(n+c);return[{x:i-v*s,y:v+i*s},{x:u+g*s,y:g-u*s},{x:u,y:g}]},e=function(n,c,s,i){var v=n*i-c*s<0?-1:1,u=n*s+c*i;return u>1&&(u=1),u<-1&&(u=-1),v*Math.acos(u)},o=function(n,c,s,i,v,u,g,h,y,p,A,m){var M=Math.pow(v,2),x=Math.pow(u,2),T=Math.pow(A,2),_=Math.pow(m,2),f=M*x-M*_-x*T;f<0&&(f=0),f/=M*_+x*T,f=Math.sqrt(f)*(g===h?-1:1);var L=f*v/u*m,S=f*-u/v*A,k=p*L-y*S+(n+s)/2,P=y*L+p*S+(c+i)/2,z=(A-L)/v,I=(m-S)/u,R=(-A-L)/v,D=(-m-S)/u,O=e(1,0,z,I),F=e(z,I,R,D);return h===0&&F>0&&(F-=l),h===1&&F<0&&(F+=l),[k,P,O,F]},a=function(n){var c=n.px,s=n.py,i=n.cx,v=n.cy,u=n.rx,g=n.ry,h=n.xAxisRotation,y=h===void 0?0:h,p=n.largeArcFlag,A=p===void 0?0:p,m=n.sweepFlag,M=m===void 0?0:m,x=[];if(u===0||g===0)return[];var T=Math.sin(y*l/360),_=Math.cos(y*l/360),f=_*(c-i)/2+T*(s-v)/2,L=-T*(c-i)/2+_*(s-v)/2;if(f===0&&L===0)return[];u=Math.abs(u),g=Math.abs(g);var S=Math.pow(f,2)/Math.pow(u,2)+Math.pow(L,2)/Math.pow(g,2);S>1&&(u*=Math.sqrt(S),g*=Math.sqrt(S));var k=o(c,s,i,v,u,g,A,M,T,_,f,L),P=d(k,4),z=P[0],I=P[1],R=P[2],D=P[3],O=Math.abs(D)/(l/4);Math.abs(1-O)<1e-7&&(O=1);var F=Math.max(Math.ceil(O),1);D/=F;for(var G=0;G<F;G++)x.push(w(R,D)),R+=D;return x.map(function(W){var q=b(W[0],u,g,_,T,z,I),J=q.x,X=q.y,Z=b(W[1],u,g,_,T,z,I),se=Z.x,le=Z.y,oe=b(W[2],u,g,_,T,z,I),U=oe.x,V=oe.y;return{x1:J,y1:X,x2:se,y2:le,x:U,y:V}})};H.default=a,B.exports=H.default},{}],308:[function(t,B,H){var d=t("parse-svg-path"),l=t("abs-svg-path"),b=t("normalize-svg-path"),w=t("is-svg-path"),e=t("assert");B.exports=o;function o(a){if(Array.isArray(a)&&a.length===1&&typeof a[0]=="string"&&(a=a[0]),typeof a=="string"&&(e(w(a),"String is not an SVG path."),a=d(a)),e(Array.isArray(a),"Argument should be a string or an array of path segments."),a=l(a),a=b(a),!a.length)return[0,0,0,0];for(var r=[1/0,1/0,-1/0,-1/0],n=0,c=a.length;n<c;n++)for(var s=a[n].slice(1),i=0;i<s.length;i+=2)s[i+0]<r[0]&&(r[0]=s[i+0]),s[i+1]<r[1]&&(r[1]=s[i+1]),s[i+0]>r[2]&&(r[2]=s[i+0]),s[i+1]>r[3]&&(r[3]=s[i+1]);return r}},{"abs-svg-path":70,assert:75,"is-svg-path":238,"normalize-svg-path":309,"parse-svg-path":250}],309:[function(t,B,H){B.exports=l;var d=t("svg-arc-to-cubic-bezier");function l(e){for(var o,a=[],r=0,n=0,c=0,s=0,i=null,v=null,u=0,g=0,h=0,y=e.length;h<y;h++){var p=e[h],A=p[0];switch(A){case"M":c=p[1],s=p[2];break;case"A":var m=d({px:u,py:g,cx:p[6],cy:p[7],rx:p[1],ry:p[2],xAxisRotation:p[3],largeArcFlag:p[4],sweepFlag:p[5]});if(!m.length)continue;for(var M=0,x;M<m.length;M++)x=m[M],p=["C",x.x1,x.y1,x.x2,x.y2,x.x,x.y],M<m.length-1&&a.push(p);break;case"S":var T=u,_=g;(o=="C"||o=="S")&&(T+=T-r,_+=_-n),p=["C",T,_,p[1],p[2],p[3],p[4]];break;case"T":o=="Q"||o=="T"?(i=u*2-i,v=g*2-v):(i=u,v=g),p=w(u,g,i,v,p[1],p[2]);break;case"Q":i=p[1],v=p[2],p=w(u,g,p[1],p[2],p[3],p[4]);break;case"L":p=b(u,g,p[1],p[2]);break;case"H":p=b(u,g,p[1],g);break;case"V":p=b(u,g,u,p[1]);break;case"Z":p=b(u,g,c,s);break}o=A,u=p[p.length-2],g=p[p.length-1],p.length>4?(r=p[p.length-4],n=p[p.length-3]):(r=u,n=g),a.push(p)}return a}function b(e,o,a,r){return["C",e,o,a,r,a,r]}function w(e,o,a,r,n,c){return["C",e/3+2/3*a,o/3+2/3*r,n/3+2/3*a,c/3+2/3*r,n,c]}},{"svg-arc-to-cubic-bezier":307}],310:[function(t,B,H){var d=t("svg-path-bounds"),l=t("parse-svg-path"),b=t("draw-svg-path"),w=t("is-svg-path"),e=t("bitmap-sdf"),o=document.createElement("canvas"),a=o.getContext("2d");B.exports=r;function r(s,i){if(!w(s))throw Error("Argument should be valid svg path string");i||(i={});var v,u;i.shape?(v=i.shape[0],u=i.shape[1]):(v=o.width=i.w||i.width||200,u=o.height=i.h||i.height||200);var g=Math.min(v,u),h=i.stroke||0,y=i.viewbox||i.viewBox||d(s),p=[v/(y[2]-y[0]),u/(y[3]-y[1])],A=Math.min(p[0]||0,p[1]||0)/2;if(a.fillStyle="black",a.fillRect(0,0,v,u),a.fillStyle="white",h&&(typeof h!="number"&&(h=1),h>0?a.strokeStyle="white":a.strokeStyle="black",a.lineWidth=Math.abs(h)),a.translate(v*.5,u*.5),a.scale(A,A),c()){var m=new Path2D(s);a.fill(m),h&&a.stroke(m)}else{var M=l(s);b(a,M),a.fill(),h&&a.stroke()}a.setTransform(1,0,0,1,0,0);var x=e(a,{cutoff:i.cutoff!=null?i.cutoff:.5,radius:i.radius!=null?i.radius:g*.5});return x}var n;function c(){if(n!=null)return n;var s=document.createElement("canvas").getContext("2d");if(s.canvas.width=s.canvas.height=1,!window.Path2D)return n=!1;var i=new Path2D("M0,0h1v1h-1v-1Z");s.fillStyle="black",s.fill(i);var v=s.getImageData(0,0,1,1);return n=v&&v.data&&v.data[3]===255}},{"bitmap-sdf":82,"draw-svg-path":126,"is-svg-path":238,"parse-svg-path":250,"svg-path-bounds":308}],311:[function(t,B,H){(function(d,l){(function(){var b=t("process/browser.js").nextTick,w=Function.prototype.apply,e=Array.prototype.slice,o={},a=0;H.setTimeout=function(){return new r(w.call(setTimeout,window,arguments),clearTimeout)},H.setInterval=function(){return new r(w.call(setInterval,window,arguments),clearInterval)},H.clearTimeout=H.clearInterval=function(n){n.close()};function r(n,c){this._id=n,this._clearFn=c}r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},H.enroll=function(n,c){clearTimeout(n._idleTimeoutId),n._idleTimeout=c},H.unenroll=function(n){clearTimeout(n._idleTimeoutId),n._idleTimeout=-1},H._unrefActive=H.active=function(n){clearTimeout(n._idleTimeoutId);var c=n._idleTimeout;c>=0&&(n._idleTimeoutId=setTimeout(function(){n._onTimeout&&n._onTimeout()},c))},H.setImmediate=typeof d=="function"?d:function(n){var c=a++,s=arguments.length<2?!1:e.call(arguments,1);return o[c]=!0,b(function(){o[c]&&(s?n.apply(null,s):n.call(null),H.clearImmediate(c))}),c},H.clearImmediate=typeof l=="function"?l:function(n){delete o[n]}}).call(this)}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":277,timers:311}],312:[function(t,B,H){(function(d){var l=/^\s+/,b=/\s+$/,w=0,e=d.round,o=d.min,a=d.max,r=d.random;function n(j,Q){if(j=j||"",Q=Q||{},j instanceof n)return j;if(!(this instanceof n))return new n(j,Q);var ne=c(j);this._originalInput=j,this._r=ne.r,this._g=ne.g,this._b=ne.b,this._a=ne.a,this._roundA=e(100*this._a)/100,this._format=Q.format||ne.format,this._gradientType=Q.gradientType,this._r<1&&(this._r=e(this._r)),this._g<1&&(this._g=e(this._g)),this._b<1&&(this._b=e(this._b)),this._ok=ne.ok,this._tc_id=w++}n.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var j=this.toRgb();return(j.r*299+j.g*587+j.b*114)/1e3},getLuminance:function(){var j=this.toRgb(),Q,ne,ae,ie,ue,xe;return Q=j.r/255,ne=j.g/255,ae=j.b/255,Q<=.03928?ie=Q/12.92:ie=d.pow((Q+.055)/1.055,2.4),ne<=.03928?ue=ne/12.92:ue=d.pow((ne+.055)/1.055,2.4),ae<=.03928?xe=ae/12.92:xe=d.pow((ae+.055)/1.055,2.4),.2126*ie+.7152*ue+.0722*xe},setAlpha:function(j){return this._a=F(j),this._roundA=e(100*this._a)/100,this},toHsv:function(){var j=u(this._r,this._g,this._b);return{h:j.h*360,s:j.s,v:j.v,a:this._a}},toHsvString:function(){var j=u(this._r,this._g,this._b),Q=e(j.h*360),ne=e(j.s*100),ae=e(j.v*100);return this._a==1?"hsv("+Q+", "+ne+"%, "+ae+"%)":"hsva("+Q+", "+ne+"%, "+ae+"%, "+this._roundA+")"},toHsl:function(){var j=i(this._r,this._g,this._b);return{h:j.h*360,s:j.s,l:j.l,a:this._a}},toHslString:function(){var j=i(this._r,this._g,this._b),Q=e(j.h*360),ne=e(j.s*100),ae=e(j.l*100);return this._a==1?"hsl("+Q+", "+ne+"%, "+ae+"%)":"hsla("+Q+", "+ne+"%, "+ae+"%, "+this._roundA+")"},toHex:function(j){return h(this._r,this._g,this._b,j)},toHexString:function(j){return"#"+this.toHex(j)},toHex8:function(j){return y(this._r,this._g,this._b,this._a,j)},toHex8String:function(j){return"#"+this.toHex8(j)},toRgb:function(){return{r:e(this._r),g:e(this._g),b:e(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+e(this._r)+", "+e(this._g)+", "+e(this._b)+")":"rgba("+e(this._r)+", "+e(this._g)+", "+e(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:e(G(this._r,255)*100)+"%",g:e(G(this._g,255)*100)+"%",b:e(G(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+e(G(this._r,255)*100)+"%, "+e(G(this._g,255)*100)+"%, "+e(G(this._b,255)*100)+"%)":"rgba("+e(G(this._r,255)*100)+"%, "+e(G(this._g,255)*100)+"%, "+e(G(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:D[h(this._r,this._g,this._b,!0)]||!1},toFilter:function(j){var Q="#"+p(this._r,this._g,this._b,this._a),ne=Q,ae=this._gradientType?"GradientType = 1, ":"";if(j){var ie=n(j);ne="#"+p(ie._r,ie._g,ie._b,ie._a)}return"progid:DXImageTransform.Microsoft.gradient("+ae+"startColorstr="+Q+",endColorstr="+ne+")"},toString:function(j){var Q=!!j;j=j||this._format;var ne=!1,ae=this._a<1&&this._a>=0,ie=!Q&&ae&&(j==="hex"||j==="hex6"||j==="hex3"||j==="hex4"||j==="hex8"||j==="name");return ie?j==="name"&&this._a===0?this.toName():this.toRgbString():(j==="rgb"&&(ne=this.toRgbString()),j==="prgb"&&(ne=this.toPercentageRgbString()),(j==="hex"||j==="hex6")&&(ne=this.toHexString()),j==="hex3"&&(ne=this.toHexString(!0)),j==="hex4"&&(ne=this.toHex8String(!0)),j==="hex8"&&(ne=this.toHex8String()),j==="name"&&(ne=this.toName()),j==="hsl"&&(ne=this.toHslString()),j==="hsv"&&(ne=this.toHsvString()),ne||this.toHexString())},clone:function(){return n(this.toString())},_applyModification:function(j,Q){var ne=j.apply(null,[this].concat([].slice.call(Q)));return this._r=ne._r,this._g=ne._g,this._b=ne._b,this.setAlpha(ne._a),this},lighten:function(){return this._applyModification(x,arguments)},brighten:function(){return this._applyModification(T,arguments)},darken:function(){return this._applyModification(_,arguments)},desaturate:function(){return this._applyModification(A,arguments)},saturate:function(){return this._applyModification(m,arguments)},greyscale:function(){return this._applyModification(M,arguments)},spin:function(){return this._applyModification(f,arguments)},_applyCombination:function(j,Q){return j.apply(null,[this].concat([].slice.call(Q)))},analogous:function(){return this._applyCombination(z,arguments)},complement:function(){return this._applyCombination(L,arguments)},monochromatic:function(){return this._applyCombination(I,arguments)},splitcomplement:function(){return this._applyCombination(P,arguments)},triad:function(){return this._applyCombination(S,arguments)},tetrad:function(){return this._applyCombination(k,arguments)}},n.fromRatio=function(j,Q){if(typeof j=="object"){var ne={};for(var ae in j)j.hasOwnProperty(ae)&&(ae==="a"?ne[ae]=j[ae]:ne[ae]=se(j[ae]));j=ne}return n(j,Q)};function c(j){var Q={r:0,g:0,b:0},ne=1,ae=null,ie=null,ue=null,xe=!1,he=!1;return typeof j=="string"&&(j=re(j)),typeof j=="object"&&(V(j.r)&&V(j.g)&&V(j.b)?(Q=s(j.r,j.g,j.b),xe=!0,he=String(j.r).substr(-1)==="%"?"prgb":"rgb"):V(j.h)&&V(j.s)&&V(j.v)?(ae=se(j.s),ie=se(j.v),Q=g(j.h,ae,ie),xe=!0,he="hsv"):V(j.h)&&V(j.s)&&V(j.l)&&(ae=se(j.s),ue=se(j.l),Q=v(j.h,ae,ue),xe=!0,he="hsl"),j.hasOwnProperty("a")&&(ne=j.a)),ne=F(ne),{ok:xe,format:j.format||he,r:o(255,a(Q.r,0)),g:o(255,a(Q.g,0)),b:o(255,a(Q.b,0)),a:ne}}function s(j,Q,ne){return{r:G(j,255)*255,g:G(Q,255)*255,b:G(ne,255)*255}}function i(j,Q,ne){j=G(j,255),Q=G(Q,255),ne=G(ne,255);var ae=a(j,Q,ne),ie=o(j,Q,ne),ue,xe,he=(ae+ie)/2;if(ae==ie)ue=xe=0;else{var ge=ae-ie;switch(xe=he>.5?ge/(2-ae-ie):ge/(ae+ie),ae){case j:ue=(Q-ne)/ge+(Q<ne?6:0);break;case Q:ue=(ne-j)/ge+2;break;case ne:ue=(j-Q)/ge+4;break}ue/=6}return{h:ue,s:xe,l:he}}function v(j,Q,ne){var ae,ie,ue;j=G(j,360),Q=G(Q,100),ne=G(ne,100);function xe(me,ke,Ae){return Ae<0&&(Ae+=1),Ae>1&&(Ae-=1),Ae<1/6?me+(ke-me)*6*Ae:Ae<1/2?ke:Ae<2/3?me+(ke-me)*(2/3-Ae)*6:me}if(Q===0)ae=ie=ue=ne;else{var he=ne<.5?ne*(1+Q):ne+Q-ne*Q,ge=2*ne-he;ae=xe(ge,he,j+1/3),ie=xe(ge,he,j),ue=xe(ge,he,j-1/3)}return{r:ae*255,g:ie*255,b:ue*255}}function u(j,Q,ne){j=G(j,255),Q=G(Q,255),ne=G(ne,255);var ae=a(j,Q,ne),ie=o(j,Q,ne),ue,xe,he=ae,ge=ae-ie;if(xe=ae===0?0:ge/ae,ae==ie)ue=0;else{switch(ae){case j:ue=(Q-ne)/ge+(Q<ne?6:0);break;case Q:ue=(ne-j)/ge+2;break;case ne:ue=(j-Q)/ge+4;break}ue/=6}return{h:ue,s:xe,v:he}}function g(j,Q,ne){j=G(j,360)*6,Q=G(Q,100),ne=G(ne,100);var ae=d.floor(j),ie=j-ae,ue=ne*(1-Q),xe=ne*(1-ie*Q),he=ne*(1-(1-ie)*Q),ge=ae%6,me=[ne,xe,ue,ue,he,ne][ge],ke=[he,ne,ne,xe,ue,ue][ge],Ae=[ue,ue,he,ne,ne,xe][ge];return{r:me*255,g:ke*255,b:Ae*255}}function h(j,Q,ne,ae){var ie=[Z(e(j).toString(16)),Z(e(Q).toString(16)),Z(e(ne).toString(16))];return ae&&ie[0].charAt(0)==ie[0].charAt(1)&&ie[1].charAt(0)==ie[1].charAt(1)&&ie[2].charAt(0)==ie[2].charAt(1)?ie[0].charAt(0)+ie[1].charAt(0)+ie[2].charAt(0):ie.join("")}function y(j,Q,ne,ae,ie){var ue=[Z(e(j).toString(16)),Z(e(Q).toString(16)),Z(e(ne).toString(16)),Z(le(ae))];return ie&&ue[0].charAt(0)==ue[0].charAt(1)&&ue[1].charAt(0)==ue[1].charAt(1)&&ue[2].charAt(0)==ue[2].charAt(1)&&ue[3].charAt(0)==ue[3].charAt(1)?ue[0].charAt(0)+ue[1].charAt(0)+ue[2].charAt(0)+ue[3].charAt(0):ue.join("")}function p(j,Q,ne,ae){var ie=[Z(le(ae)),Z(e(j).toString(16)),Z(e(Q).toString(16)),Z(e(ne).toString(16))];return ie.join("")}n.equals=function(j,Q){return!j||!Q?!1:n(j).toRgbString()==n(Q).toRgbString()},n.random=function(){return n.fromRatio({r:r(),g:r(),b:r()})};function A(j,Q){Q=Q===0?0:Q||10;var ne=n(j).toHsl();return ne.s-=Q/100,ne.s=W(ne.s),n(ne)}function m(j,Q){Q=Q===0?0:Q||10;var ne=n(j).toHsl();return ne.s+=Q/100,ne.s=W(ne.s),n(ne)}function M(j){return n(j).desaturate(100)}function x(j,Q){Q=Q===0?0:Q||10;var ne=n(j).toHsl();return ne.l+=Q/100,ne.l=W(ne.l),n(ne)}function T(j,Q){Q=Q===0?0:Q||10;var ne=n(j).toRgb();return ne.r=a(0,o(255,ne.r-e(255*-(Q/100)))),ne.g=a(0,o(255,ne.g-e(255*-(Q/100)))),ne.b=a(0,o(255,ne.b-e(255*-(Q/100)))),n(ne)}function _(j,Q){Q=Q===0?0:Q||10;var ne=n(j).toHsl();return ne.l-=Q/100,ne.l=W(ne.l),n(ne)}function f(j,Q){var ne=n(j).toHsl(),ae=(ne.h+Q)%360;return ne.h=ae<0?360+ae:ae,n(ne)}function L(j){var Q=n(j).toHsl();return Q.h=(Q.h+180)%360,n(Q)}function S(j){var Q=n(j).toHsl(),ne=Q.h;return[n(j),n({h:(ne+120)%360,s:Q.s,l:Q.l}),n({h:(ne+240)%360,s:Q.s,l:Q.l})]}function k(j){var Q=n(j).toHsl(),ne=Q.h;return[n(j),n({h:(ne+90)%360,s:Q.s,l:Q.l}),n({h:(ne+180)%360,s:Q.s,l:Q.l}),n({h:(ne+270)%360,s:Q.s,l:Q.l})]}function P(j){var Q=n(j).toHsl(),ne=Q.h;return[n(j),n({h:(ne+72)%360,s:Q.s,l:Q.l}),n({h:(ne+216)%360,s:Q.s,l:Q.l})]}function z(j,Q,ne){Q=Q||6,ne=ne||30;var ae=n(j).toHsl(),ie=360/ne,ue=[n(j)];for(ae.h=(ae.h-(ie*Q>>1)+720)%360;--Q;)ae.h=(ae.h+ie)%360,ue.push(n(ae));return ue}function I(j,Q){Q=Q||6;for(var ne=n(j).toHsv(),ae=ne.h,ie=ne.s,ue=ne.v,xe=[],he=1/Q;Q--;)xe.push(n({h:ae,s:ie,v:ue})),ue=(ue+he)%1;return xe}n.mix=function(j,Q,ne){ne=ne===0?0:ne||50;var ae=n(j).toRgb(),ie=n(Q).toRgb(),ue=ne/100,xe={r:(ie.r-ae.r)*ue+ae.r,g:(ie.g-ae.g)*ue+ae.g,b:(ie.b-ae.b)*ue+ae.b,a:(ie.a-ae.a)*ue+ae.a};return n(xe)},n.readability=function(j,Q){var ne=n(j),ae=n(Q);return(d.max(ne.getLuminance(),ae.getLuminance())+.05)/(d.min(ne.getLuminance(),ae.getLuminance())+.05)},n.isReadable=function(j,Q,ne){var ae=n.readability(j,Q),ie,ue;switch(ue=!1,ie=ee(ne),ie.level+ie.size){case"AAsmall":case"AAAlarge":ue=ae>=4.5;break;case"AAlarge":ue=ae>=3;break;case"AAAsmall":ue=ae>=7;break}return ue},n.mostReadable=function(j,Q,ne){var ae=null,ie=0,ue,xe,he,ge;ne=ne||{},xe=ne.includeFallbackColors,he=ne.level,ge=ne.size;for(var me=0;me<Q.length;me++)ue=n.readability(j,Q[me]),ue>ie&&(ie=ue,ae=n(Q[me]));return n.isReadable(j,ae,{level:he,size:ge})||!xe?ae:(ne.includeFallbackColors=!1,n.mostReadable(j,["#fff","#000"],ne))};var R=n.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},D=n.hexNames=O(R);function O(j){var Q={};for(var ne in j)j.hasOwnProperty(ne)&&(Q[j[ne]]=ne);return Q}function F(j){return j=parseFloat(j),(isNaN(j)||j<0||j>1)&&(j=1),j}function G(j,Q){J(j)&&(j="100%");var ne=X(j);return j=o(Q,a(0,parseFloat(j))),ne&&(j=parseInt(j*Q,10)/100),d.abs(j-Q)<1e-6?1:j%Q/parseFloat(Q)}function W(j){return o(1,a(0,j))}function q(j){return parseInt(j,16)}function J(j){return typeof j=="string"&&j.indexOf(".")!=-1&&parseFloat(j)===1}function X(j){return typeof j=="string"&&j.indexOf("%")!=-1}function Z(j){return j.length==1?"0"+j:""+j}function se(j){return j<=1&&(j=j*100+"%"),j}function le(j){return d.round(parseFloat(j)*255).toString(16)}function oe(j){return q(j)/255}var U=function(){var j="[-\\+]?\\d+%?",Q="[-\\+]?\\d*\\.\\d+%?",ne="(?:"+Q+")|(?:"+j+")",ae="[\\s|\\(]+("+ne+")[,|\\s]+("+ne+")[,|\\s]+("+ne+")\\s*\\)?",ie="[\\s|\\(]+("+ne+")[,|\\s]+("+ne+")[,|\\s]+("+ne+")[,|\\s]+("+ne+")\\s*\\)?";return{CSS_UNIT:new RegExp(ne),rgb:new RegExp("rgb"+ae),rgba:new RegExp("rgba"+ie),hsl:new RegExp("hsl"+ae),hsla:new RegExp("hsla"+ie),hsv:new RegExp("hsv"+ae),hsva:new RegExp("hsva"+ie),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function V(j){return!!U.CSS_UNIT.exec(j)}function re(j){j=j.replace(l,"").replace(b,"").toLowerCase();var Q=!1;if(R[j])j=R[j],Q=!0;else if(j=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var ne;return(ne=U.rgb.exec(j))?{r:ne[1],g:ne[2],b:ne[3]}:(ne=U.rgba.exec(j))?{r:ne[1],g:ne[2],b:ne[3],a:ne[4]}:(ne=U.hsl.exec(j))?{h:ne[1],s:ne[2],l:ne[3]}:(ne=U.hsla.exec(j))?{h:ne[1],s:ne[2],l:ne[3],a:ne[4]}:(ne=U.hsv.exec(j))?{h:ne[1],s:ne[2],v:ne[3]}:(ne=U.hsva.exec(j))?{h:ne[1],s:ne[2],v:ne[3],a:ne[4]}:(ne=U.hex8.exec(j))?{r:q(ne[1]),g:q(ne[2]),b:q(ne[3]),a:oe(ne[4]),format:Q?"name":"hex8"}:(ne=U.hex6.exec(j))?{r:q(ne[1]),g:q(ne[2]),b:q(ne[3]),format:Q?"name":"hex"}:(ne=U.hex4.exec(j))?{r:q(ne[1]+""+ne[1]),g:q(ne[2]+""+ne[2]),b:q(ne[3]+""+ne[3]),a:oe(ne[4]+""+ne[4]),format:Q?"name":"hex8"}:(ne=U.hex3.exec(j))?{r:q(ne[1]+""+ne[1]),g:q(ne[2]+""+ne[2]),b:q(ne[3]+""+ne[3]),format:Q?"name":"hex"}:!1}function ee(j){var Q,ne;return j=j||{level:"AA",size:"small"},Q=(j.level||"AA").toUpperCase(),ne=(j.size||"small").toLowerCase(),Q!=="AA"&&Q!=="AAA"&&(Q="AA"),ne!=="small"&&ne!=="large"&&(ne="small"),{level:Q,size:ne}}typeof B!="undefined"&&B.exports?B.exports=n:window.tinycolor=n})(Math)},{}],313:[function(t,B,H){B.exports=b,B.exports.float32=B.exports.float=b,B.exports.fract32=B.exports.fract=l;var d=new Float32Array(1);function l(w,e){if(w.length){if(w instanceof Float32Array)return new Float32Array(w.length);e instanceof Float32Array||(e=b(w));for(var o=0,a=e.length;o<a;o++)e[o]=w[o]-e[o];return e}return b(w-b(w))}function b(w){return w.length?w instanceof Float32Array?w:new Float32Array(w):(d[0]=w,d[0])}},{}],314:[function(t,B,H){var d=t("parse-unit");B.exports=e;var l=96;function b(o,a){var r=d(getComputedStyle(o).getPropertyValue(a));return r[0]*e(r[1],o)}function w(o,a){var r=document.createElement("div");r.style["font-size"]="128"+o,a.appendChild(r);var n=b(r,"font-size")/128;return a.removeChild(r),n}function e(o,a){switch(a=a||document.body,o=(o||"px").trim().toLowerCase(),(a===window||a===document)&&(a=document.body),o){case"%":return a.clientHeight/100;case"ch":case"ex":return w(o,a);case"em":return b(a,"font-size");case"rem":return b(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return l;case"cm":return l/2.54;case"mm":return l/25.4;case"pt":return l/72;case"pc":return l/6}return 1}},{"parse-unit":251}],315:[function(t,B,H){(function(d,l){typeof H=="object"&&typeof B!="undefined"?l(H):(d=d||self,l(d.topojson=d.topojson||{}))})(this,function(d){function l(m){return m}function b(m){if(m==null)return l;var M,x,T=m.scale[0],_=m.scale[1],f=m.translate[0],L=m.translate[1];return function(S,k){k||(M=x=0);var P=2,z=S.length,I=new Array(z);for(I[0]=(M+=S[0])*T+f,I[1]=(x+=S[1])*_+L;P<z;)I[P]=S[P],++P;return I}}function w(m){var M=b(m.transform),x,T=1/0,_=T,f=-T,L=-T;function S(P){P=M(P),P[0]<T&&(T=P[0]),P[0]>f&&(f=P[0]),P[1]<_&&(_=P[1]),P[1]>L&&(L=P[1])}function k(P){switch(P.type){case"GeometryCollection":P.geometries.forEach(k);break;case"Point":S(P.coordinates);break;case"MultiPoint":P.coordinates.forEach(S);break}}m.arcs.forEach(function(P){for(var z=-1,I=P.length,R;++z<I;)R=M(P[z],z),R[0]<T&&(T=R[0]),R[0]>f&&(f=R[0]),R[1]<_&&(_=R[1]),R[1]>L&&(L=R[1])});for(x in m.objects)k(m.objects[x]);return[T,_,f,L]}function e(m,M){for(var x,T=m.length,_=T-M;_<--T;)x=m[_],m[_++]=m[T],m[T]=x}function o(m,M){return typeof M=="string"&&(M=m.objects[M]),M.type==="GeometryCollection"?{type:"FeatureCollection",features:M.geometries.map(function(x){return a(m,x)})}:a(m,M)}function a(m,M){var x=M.id,T=M.bbox,_=M.properties==null?{}:M.properties,f=r(m,M);return x==null&&T==null?{type:"Feature",properties:_,geometry:f}:T==null?{type:"Feature",id:x,properties:_,geometry:f}:{type:"Feature",id:x,bbox:T,properties:_,geometry:f}}function r(m,M){var x=b(m.transform),T=m.arcs;function _(z,I){I.length&&I.pop();for(var R=T[z<0?~z:z],D=0,O=R.length;D<O;++D)I.push(x(R[D],D));z<0&&e(I,O)}function f(z){return x(z)}function L(z){for(var I=[],R=0,D=z.length;R<D;++R)_(z[R],I);return I.length<2&&I.push(I[0]),I}function S(z){for(var I=L(z);I.length<4;)I.push(I[0]);return I}function k(z){return z.map(S)}function P(z){var I=z.type,R;switch(I){case"GeometryCollection":return{type:I,geometries:z.geometries.map(P)};case"Point":R=f(z.coordinates);break;case"MultiPoint":R=z.coordinates.map(f);break;case"LineString":R=L(z.arcs);break;case"MultiLineString":R=z.arcs.map(L);break;case"Polygon":R=k(z.arcs);break;case"MultiPolygon":R=z.arcs.map(k);break;default:return null}return{type:I,coordinates:R}}return P(M)}function n(m,M){var x={},T={},_={},f=[],L=-1;M.forEach(function(P,z){var I=m.arcs[P<0?~P:P],R;I.length<3&&!I[1][0]&&!I[1][1]&&(R=M[++L],M[L]=P,M[z]=R)}),M.forEach(function(P){var z=S(P),I=z[0],R=z[1],D,O;if(D=_[I])if(delete _[D.end],D.push(P),D.end=R,O=T[R]){delete T[O.start];var F=O===D?D:D.concat(O);T[F.start=D.start]=_[F.end=O.end]=F}else T[D.start]=_[D.end]=D;else if(D=T[R])if(delete T[D.start],D.unshift(P),D.start=I,O=_[I]){delete _[O.end];var G=O===D?D:O.concat(D);T[G.start=O.start]=_[G.end=D.end]=G}else T[D.start]=_[D.end]=D;else D=[P],T[D.start=I]=_[D.end=R]=D});function S(P){var z=m.arcs[P<0?~P:P],I=z[0],R;return m.transform?(R=[0,0],z.forEach(function(D){R[0]+=D[0],R[1]+=D[1]})):R=z[z.length-1],P<0?[R,I]:[I,R]}function k(P,z){for(var I in P){var R=P[I];delete z[R.start],delete R.start,delete R.end,R.forEach(function(D){x[D<0?~D:D]=1}),f.push(R)}}return k(_,T),k(T,_),M.forEach(function(P){x[P<0?~P:P]||f.push([P])}),f}function c(m){return r(m,s.apply(this,arguments))}function s(m,M,x){var T,_,f;if(arguments.length>1)T=i(m,M,x);else for(_=0,T=new Array(f=m.arcs.length);_<f;++_)T[_]=_;return{type:"MultiLineString",arcs:n(m,T)}}function i(m,M,x){var T=[],_=[],f;function L(I){var R=I<0?~I:I;(_[R]||(_[R]=[])).push({i:I,g:f})}function S(I){I.forEach(L)}function k(I){I.forEach(S)}function P(I){I.forEach(k)}function z(I){switch(f=I,I.type){case"GeometryCollection":I.geometries.forEach(z);break;case"LineString":S(I.arcs);break;case"MultiLineString":case"Polygon":k(I.arcs);break;case"MultiPolygon":P(I.arcs);break}}return z(M),_.forEach(x==null?function(I){T.push(I[0].i)}:function(I){x(I[0].g,I[I.length-1].g)&&T.push(I[0].i)}),T}function v(m){for(var M=-1,x=m.length,T,_=m[x-1],f=0;++M<x;)T=_,_=m[M],f+=T[0]*_[1]-T[1]*_[0];return Math.abs(f)}function u(m){return r(m,g.apply(this,arguments))}function g(m,M){var x={},T=[],_=[];M.forEach(f);function f(k){switch(k.type){case"GeometryCollection":k.geometries.forEach(f);break;case"Polygon":L(k.arcs);break;case"MultiPolygon":k.arcs.forEach(L);break}}function L(k){k.forEach(function(P){P.forEach(function(z){(x[z=z<0?~z:z]||(x[z]=[])).push(k)})}),T.push(k)}function S(k){return v(r(m,{type:"Polygon",arcs:[k]}).coordinates[0])}return T.forEach(function(k){if(!k._){var P=[],z=[k];for(k._=1,_.push(P);k=z.pop();)P.push(k),k.forEach(function(I){I.forEach(function(R){x[R<0?~R:R].forEach(function(D){D._||(D._=1,z.push(D))})})})}}),T.forEach(function(k){delete k._}),{type:"MultiPolygon",arcs:_.map(function(k){var P=[],z;if(k.forEach(function(F){F.forEach(function(G){G.forEach(function(W){x[W<0?~W:W].length<2&&P.push(W)})})}),P=n(m,P),(z=P.length)>1)for(var I=1,R=S(P[0]),D,O;I<z;++I)(D=S(P[I]))>R&&(O=P[0],P[0]=P[I],P[I]=O,R=D);return P}).filter(function(k){return k.length>0})}}function h(m,M){for(var x=0,T=m.length;x<T;){var _=x+T>>>1;m[_]<M?x=_+1:T=_}return x}function y(m){var M={},x=m.map(function(){return[]});function T(F,G){F.forEach(function(W){W<0&&(W=~W);var q=M[W];q?q.push(G):M[W]=[G]})}function _(F,G){F.forEach(function(W){T(W,G)})}function f(F,G){F.type==="GeometryCollection"?F.geometries.forEach(function(W){f(W,G)}):F.type in L&&L[F.type](F.arcs,G)}var L={LineString:T,MultiLineString:_,Polygon:_,MultiPolygon:function(F,G){F.forEach(function(W){_(W,G)})}};m.forEach(f);for(var S in M)for(var k=M[S],P=k.length,z=0;z<P;++z)for(var I=z+1;I<P;++I){var R=k[z],D=k[I],O;(O=x[R])[S=h(O,D)]!==D&&O.splice(S,0,D),(O=x[D])[S=h(O,R)]!==R&&O.splice(S,0,R)}return x}function p(m){if(m==null)return l;var M,x,T=m.scale[0],_=m.scale[1],f=m.translate[0],L=m.translate[1];return function(S,k){k||(M=x=0);var P=2,z=S.length,I=new Array(z),R=Math.round((S[0]-f)/T),D=Math.round((S[1]-L)/_);for(I[0]=R-M,M=R,I[1]=D-x,x=D;P<z;)I[P]=S[P],++P;return I}}function A(m,M){if(m.transform)throw new Error("already quantized");if(!M||!M.scale){if(!((L=Math.floor(M))>=2))throw new Error("n must be \u22652");k=m.bbox||w(m);var x=k[0],T=k[1],_=k[2],f=k[3],L;M={scale:[_-x?(_-x)/(L-1):1,f-T?(f-T)/(L-1):1],translate:[x,T]}}else k=m.bbox;var S=p(M),k,P,z=m.objects,I={};function R(F){return S(F)}function D(F){var G;switch(F.type){case"GeometryCollection":G={type:"GeometryCollection",geometries:F.geometries.map(D)};break;case"Point":G={type:"Point",coordinates:R(F.coordinates)};break;case"MultiPoint":G={type:"MultiPoint",coordinates:F.coordinates.map(R)};break;default:return F}return F.id!=null&&(G.id=F.id),F.bbox!=null&&(G.bbox=F.bbox),F.properties!=null&&(G.properties=F.properties),G}function O(F){var G=0,W=1,q=F.length,J,X=new Array(q);for(X[0]=S(F[0],0);++G<q;)((J=S(F[G],G))[0]||J[1])&&(X[W++]=J);return W===1&&(X[W++]=[0,0]),X.length=W,X}for(P in z)I[P]=D(z[P]);return{type:"Topology",bbox:k,transform:M,objects:I,arcs:m.arcs.map(O)}}d.bbox=w,d.feature=o,d.merge=u,d.mergeArcs=g,d.mesh=c,d.meshArcs=s,d.neighbors=y,d.quantize=A,d.transform=b,d.untransform=p,Object.defineProperty(d,"__esModule",{value:!0})})},{}],316:[function(t,B,H){var d=t("../prototype/is");B.exports=function(l){if(typeof l!="function"||!hasOwnProperty.call(l,"length"))return!1;try{if(typeof l.length!="number"||typeof l.call!="function"||typeof l.apply!="function")return!1}catch{return!1}return!d(l)}},{"../prototype/is":323}],317:[function(t,B,H){var d=t("../value/is"),l=t("../object/is"),b=t("../string/coerce"),w=t("./to-short-string"),e=function(o,a){return o.replace("%v",w(a))};B.exports=function(o,a,r){if(!l(r))throw new TypeError(e(a,o));if(!d(o)){if("default"in r)return r.default;if(r.isOptional)return null}var n=b(r.errorMessage);throw d(n)||(n=a),new TypeError(e(n,o))}},{"../object/is":320,"../string/coerce":324,"../value/is":326,"./to-short-string":319}],318:[function(t,B,H){B.exports=function(d){try{return d.toString()}catch{try{return String(d)}catch{return null}}}},{}],319:[function(t,B,H){var d=t("./safe-to-string"),l=/[\n\r\u2028\u2029]/g;B.exports=function(b){var w=d(b);return w===null?"<Non-coercible to string value>":(w.length>100&&(w=w.slice(0,99)+"\u2026"),w=w.replace(l,function(e){switch(e){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}),w)}},{"./safe-to-string":318}],320:[function(t,B,H){var d=t("../value/is"),l={object:!0,function:!0,undefined:!0};B.exports=function(b){return d(b)?hasOwnProperty.call(l,typeof b):!1}},{"../value/is":326}],321:[function(t,B,H){var d=t("../lib/resolve-exception"),l=t("./is");B.exports=function(b){return l(b)?b:d(b,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":317,"./is":322}],322:[function(t,B,H){var d=t("../function/is"),l=/^\s*class[\s{/}]/,b=Function.prototype.toString;B.exports=function(w){return!(!d(w)||l.test(b.call(w)))}},{"../function/is":316}],323:[function(t,B,H){var d=t("../object/is");B.exports=function(l){if(!d(l))return!1;try{return l.constructor?l.constructor.prototype===l:!1}catch{return!1}}},{"../object/is":320}],324:[function(t,B,H){var d=t("../value/is"),l=t("../object/is"),b=Object.prototype.toString;B.exports=function(w){if(!d(w))return null;if(l(w)){var e=w.toString;if(typeof e!="function"||e===b)return null}try{return""+w}catch{return null}}},{"../object/is":320,"../value/is":326}],325:[function(t,B,H){var d=t("../lib/resolve-exception"),l=t("./is");B.exports=function(b){return l(b)?b:d(b,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":317,"./is":326}],326:[function(t,B,H){var d=void 0;B.exports=function(l){return l!==d&&l!==null}},{}],327:[function(t,B,H){(function(d){(function(){var l=t("bit-twiddle"),b=t("dup"),w=t("buffer").Buffer;d.__TYPEDARRAY_POOL||(d.__TYPEDARRAY_POOL={UINT8:b([32,0]),UINT16:b([32,0]),UINT32:b([32,0]),BIGUINT64:b([32,0]),INT8:b([32,0]),INT16:b([32,0]),INT32:b([32,0]),BIGINT64:b([32,0]),FLOAT:b([32,0]),DOUBLE:b([32,0]),DATA:b([32,0]),UINT8C:b([32,0]),BUFFER:b([32,0])});var e=typeof Uint8ClampedArray!="undefined",o=typeof BigUint64Array!="undefined",a=typeof BigInt64Array!="undefined",r=d.__TYPEDARRAY_POOL;r.UINT8C||(r.UINT8C=b([32,0])),r.BIGUINT64||(r.BIGUINT64=b([32,0])),r.BIGINT64||(r.BIGINT64=b([32,0])),r.BUFFER||(r.BUFFER=b([32,0]));var n=r.DATA,c=r.BUFFER;H.free=function(k){if(w.isBuffer(k))c[l.log2(k.length)].push(k);else{if(Object.prototype.toString.call(k)!=="[object ArrayBuffer]"&&(k=k.buffer),!k)return;var P=k.length||k.byteLength,z=l.log2(P)|0;n[z].push(k)}};function s(S){if(!!S){var k=S.length||S.byteLength,P=l.log2(k);n[P].push(S)}}function i(S){s(S.buffer)}H.freeUint8=H.freeUint16=H.freeUint32=H.freeBigUint64=H.freeInt8=H.freeInt16=H.freeInt32=H.freeBigInt64=H.freeFloat32=H.freeFloat=H.freeFloat64=H.freeDouble=H.freeUint8Clamped=H.freeDataView=i,H.freeArrayBuffer=s,H.freeBuffer=function(k){c[l.log2(k.length)].push(k)},H.malloc=function(k,P){if(P===void 0||P==="arraybuffer")return v(k);switch(P){case"uint8":return u(k);case"uint16":return g(k);case"uint32":return h(k);case"int8":return y(k);case"int16":return p(k);case"int32":return A(k);case"float":case"float32":return m(k);case"double":case"float64":return M(k);case"uint8_clamped":return x(k);case"bigint64":return _(k);case"biguint64":return T(k);case"buffer":return L(k);case"data":case"dataview":return f(k);default:return null}return null};function v(k){var k=l.nextPow2(k),P=l.log2(k),z=n[P];return z.length>0?z.pop():new ArrayBuffer(k)}H.mallocArrayBuffer=v;function u(S){return new Uint8Array(v(S),0,S)}H.mallocUint8=u;function g(S){return new Uint16Array(v(2*S),0,S)}H.mallocUint16=g;function h(S){return new Uint32Array(v(4*S),0,S)}H.mallocUint32=h;function y(S){return new Int8Array(v(S),0,S)}H.mallocInt8=y;function p(S){return new Int16Array(v(2*S),0,S)}H.mallocInt16=p;function A(S){return new Int32Array(v(4*S),0,S)}H.mallocInt32=A;function m(S){return new Float32Array(v(4*S),0,S)}H.mallocFloat32=H.mallocFloat=m;function M(S){return new Float64Array(v(8*S),0,S)}H.mallocFloat64=H.mallocDouble=M;function x(S){return e?new Uint8ClampedArray(v(S),0,S):u(S)}H.mallocUint8Clamped=x;function T(S){return o?new BigUint64Array(v(8*S),0,S):null}H.mallocBigUint64=T;function _(S){return a?new BigInt64Array(v(8*S),0,S):null}H.mallocBigInt64=_;function f(S){return new DataView(v(S),0,S)}H.mallocDataView=f;function L(S){S=l.nextPow2(S);var k=l.log2(S),P=c[k];return P.length>0?P.pop():new w(S)}H.mallocBuffer=L,H.clearCache=function(){for(var k=0;k<32;++k)r.UINT8[k].length=0,r.UINT16[k].length=0,r.UINT32[k].length=0,r.INT8[k].length=0,r.INT16[k].length=0,r.INT32[k].length=0,r.FLOAT[k].length=0,r.DOUBLE[k].length=0,r.BIGUINT64[k].length=0,r.BIGINT64[k].length=0,r.UINT8C[k].length=0,n[k].length=0,c[k].length=0}}).call(this)}).call(this,typeof Ao!="undefined"?Ao:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"bit-twiddle":81,buffer:85,dup:128}],328:[function(t,B,H){var d=/[\'\"]/;B.exports=function(b){return b?(d.test(b.charAt(0))&&(b=b.substr(1)),d.test(b.charAt(b.length-1))&&(b=b.substr(0,b.length-1)),b):""}},{}],329:[function(t,B,H){B.exports=function(l,b,w){Array.isArray(w)||(w=[].slice.call(arguments,2));for(var e=0,o=w.length;e<o;e++){var a=w[e];for(var r in a)if(!(b[r]!==void 0&&!Array.isArray(b[r])&&l[r]===b[r])&&r in b){var n;if(a[r]===!0)n=b[r];else{if(a[r]===!1)continue;if(typeof a[r]=="function"&&(n=a[r](b[r],l,b),n===void 0))continue}l[r]=n}}return l}},{}],330:[function(t,B,H){(function(d){(function(){B.exports=l;function l(w,e){if(b("noDeprecation"))return w;var o=!1;function a(){if(!o){if(b("throwDeprecation"))throw new Error(e);b("traceDeprecation")?console.trace(e):console.warn(e),o=!0}return w.apply(this,arguments)}return a}function b(w){try{if(!d.localStorage)return!1}catch{return!1}var e=d.localStorage[w];return e==null?!1:String(e).toLowerCase()==="true"}}).call(this)}).call(this,typeof Ao!="undefined"?Ao:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],331:[function(t,B,H){var d=t("get-canvas-context");B.exports=function(b){return d("webgl",b)}},{"get-canvas-context":194}],332:[function(t,B,H){var d=t("../main"),l=t("object-assign"),b=d.instance();function w(v){this.local=this.regionalOptions[v||""]||this.regionalOptions[""]}w.prototype=new d.baseCalendar,l(w.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(v,u){if(typeof v=="string"){var g=v.match(o);return g?g[0]:""}var h=this._validateYear(v),y=v.month(),p=""+this.toChineseMonth(h,y);return u&&p.length<2&&(p="0"+p),this.isIntercalaryMonth(h,y)&&(p+="i"),p},monthNames:function(v){if(typeof v=="string"){var u=v.match(a);return u?u[0]:""}var g=this._validateYear(v),h=v.month(),y=this.toChineseMonth(g,h),p=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"][y-1];return this.isIntercalaryMonth(g,h)&&(p="\u95F0"+p),p},monthNamesShort:function(v){if(typeof v=="string"){var u=v.match(r);return u?u[0]:""}var g=this._validateYear(v),h=v.month(),y=this.toChineseMonth(g,h),p=["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"][y-1];return this.isIntercalaryMonth(g,h)&&(p="\u95F0"+p),p},parseMonth:function(v,u){v=this._validateYear(v);var g=parseInt(u),h;if(isNaN(g))u[0]==="\u95F0"&&(h=!0,u=u.substring(1)),u[u.length-1]==="\u6708"&&(u=u.substring(0,u.length-1)),g=1+["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"].indexOf(u);else{var y=u[u.length-1];h=y==="i"||y==="I"}var p=this.toMonthIndex(v,g,h);return p},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(v,u){if(v.year&&(v=v.year()),typeof v!="number"||v<1888||v>2111)throw u.replace(/\{0\}/,this.local.name);return v},toMonthIndex:function(v,u,g){var h=this.intercalaryMonth(v),y=g&&u!==h;if(y||u<1||u>12)throw d.local.invalidMonth.replace(/\{0\}/,this.local.name);var p;return h?!g&&u<=h?p=u-1:p=u:p=u-1,p},toChineseMonth:function(v,u){v.year&&(v=v.year(),u=v.month());var g=this.intercalaryMonth(v),h=g?12:11;if(u<0||u>h)throw d.local.invalidMonth.replace(/\{0\}/,this.local.name);var y;return g?u<g?y=u+1:y=u:y=u+1,y},intercalaryMonth:function(v){v=this._validateYear(v);var u=n[v-n[0]],g=u>>13;return g},isIntercalaryMonth:function(v,u){v.year&&(v=v.year(),u=v.month());var g=this.intercalaryMonth(v);return!!g&&g===u},leapYear:function(v){return this.intercalaryMonth(v)!==0},weekOfYear:function(v,u,g){var h=this._validateYear(v,d.local.invalidyear),y=c[h-c[0]],p=y>>9&4095,A=y>>5&15,m=y&31,M;M=b.newDate(p,A,m),M.add(4-(M.dayOfWeek()||7),"d");var x=this.toJD(v,u,g)-M.toJD();return 1+Math.floor(x/7)},monthsInYear:function(v){return this.leapYear(v)?13:12},daysInMonth:function(v,u){v.year&&(u=v.month(),v=v.year()),v=this._validateYear(v);var g=n[v-n[0]],h=g>>13,y=h?12:11;if(u>y)throw d.local.invalidMonth.replace(/\{0\}/,this.local.name);var p=g&1<<12-u?30:29;return p},weekDay:function(v,u,g){return(this.dayOfWeek(v,u,g)||7)<6},toJD:function(v,u,g){var h=this._validate(v,p,g,d.local.invalidDate);v=this._validateYear(h.year()),u=h.month(),g=h.day();var y=this.isIntercalaryMonth(v,u),p=this.toChineseMonth(v,u),A=i(v,p,g,y);return b.toJD(A.year,A.month,A.day)},fromJD:function(v){var u=b.fromJD(v),g=s(u.year(),u.month(),u.day()),h=this.toMonthIndex(g.year,g.month,g.isIntercalary);return this.newDate(g.year,h,g.day)},fromString:function(v){var u=v.match(e),g=this._validateYear(+u[1]),h=+u[2],y=!!u[3],p=this.toMonthIndex(g,h,y),A=+u[4];return this.newDate(g,p,A)},add:function(v,u,g){var h=v.year(),y=v.month(),p=this.isIntercalaryMonth(h,y),A=this.toChineseMonth(h,y),m=Object.getPrototypeOf(w.prototype).add.call(this,v,u,g);if(g==="y"){var M=m.year(),x=m.month(),T=this.isIntercalaryMonth(M,A),_=p&&T?this.toMonthIndex(M,A,!0):this.toMonthIndex(M,A,!1);_!==x&&m.month(_)}return m}});var e=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,o=/^\d?\d[iI]?/m,a=/^闰?十?[一二三四五六七八九]?月/m,r=/^闰?十?[一二三四五六七八九]?/m;d.calendars.chinese=w;var n=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],c=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function s(v,u,g,h){var y,p;if(typeof v=="object")y=v,p=u||{};else{var A=typeof v=="number"&&v>=1888&&v<=2111;if(!A)throw new Error("Solar year outside range 1888-2111");var m=typeof u=="number"&&u>=1&&u<=12;if(!m)throw new Error("Solar month outside range 1 - 12");var M=typeof g=="number"&&g>=1&&g<=31;if(!M)throw new Error("Solar day outside range 1 - 31");y={year:v,month:u,day:g},p=h||{}}var x=c[y.year-c[0]],T=y.year<<9|y.month<<5|y.day;p.year=T>=x?y.year:y.year-1,x=c[p.year-c[0]];var _=x>>9&4095,f=x>>5&15,L=x&31,S,k=new Date(_,f-1,L),P=new Date(y.year,y.month-1,y.day);S=Math.round((P-k)/(24*3600*1e3));var z=n[p.year-n[0]],I;for(I=0;I<13;I++){var R=z&1<<12-I?30:29;if(S<R)break;S-=R}var D=z>>13;return!D||I<D?(p.isIntercalary=!1,p.month=1+I):I===D?(p.isIntercalary=!0,p.month=I):(p.isIntercalary=!1,p.month=I),p.day=1+S,p}function i(v,u,g,h,y){var p,A;if(typeof v=="object")A=v,p=u||{};else{var m=typeof v=="number"&&v>=1888&&v<=2111;if(!m)throw new Error("Lunar year outside range 1888-2111");var M=typeof u=="number"&&u>=1&&u<=12;if(!M)throw new Error("Lunar month outside range 1 - 12");var x=typeof g=="number"&&g>=1&&g<=30;if(!x)throw new Error("Lunar day outside range 1 - 30");var T;typeof h=="object"?(T=!1,p=h):(T=!!h,p=y||{}),A={year:v,month:u,day:g,isIntercalary:T}}var _;_=A.day-1;var f=n[A.year-n[0]],L=f>>13,S;L&&(A.month>L||A.isIntercalary)?S=A.month:S=A.month-1;for(var k=0;k<S;k++){var P=f&1<<12-k?30:29;_+=P}var z=c[A.year-c[0]],I=z>>9&4095,R=z>>5&15,D=z&31,O=new Date(I,R-1,D+_);return p.year=O.getFullYear(),p.month=1+O.getMonth(),p.day=O.getDate(),p}},{"../main":346,"object-assign":247}],333:[function(t,B,H){var d=t("../main"),l=t("object-assign");function b(w){this.local=this.regionalOptions[w||""]||this.regionalOptions[""]}b.prototype=new d.baseCalendar,l(b.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(o){var e=this._validate(o,this.minMonth,this.minDay,d.local.invalidYear),o=e.year()+(e.year()<0?1:0);return o%4===3||o%4===-1},monthsInYear:function(w){return this._validate(w,this.minMonth,this.minDay,d.local.invalidYear||d.regionalOptions[""].invalidYear),13},weekOfYear:function(w,e,o){var a=this.newDate(w,e,o);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(w,e){var o=this._validate(w,e,this.minDay,d.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(o.month()===13&&this.leapYear(o.year())?1:0)},weekDay:function(w,e,o){return(this.dayOfWeek(w,e,o)||7)<6},toJD:function(w,e,o){var a=this._validate(w,e,o,d.local.invalidDate);return w=a.year(),w<0&&w++,a.day()+(a.month()-1)*30+(w-1)*365+Math.floor(w/4)+this.jdEpoch-1},fromJD:function(w){var e=Math.floor(w)+.5-this.jdEpoch,o=Math.floor((e-Math.floor((e+366)/1461))/365)+1;o<=0&&o--,e=Math.floor(w)+.5-this.newDate(o,1,1).toJD();var a=Math.floor(e/30)+1,r=e-(a-1)*30+1;return this.newDate(o,a,r)}}),d.calendars.coptic=b},{"../main":346,"object-assign":247}],334:[function(t,B,H){var d=t("../main"),l=t("object-assign");function b(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}b.prototype=new d.baseCalendar,l(b.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,d.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,d.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,d.local.invalidYear),400},weekOfYear:function(e,o,a){var r=this.newDate(e,o,a);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/8)+1},daysInMonth:function(e,o){var a=this._validate(e,o,this.minDay,d.local.invalidMonth);return this.daysPerMonth[a.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,o,a){var r=this._validate(e,o,a,d.local.invalidDate);return(r.day()+1)%8},weekDay:function(e,o,a){var r=this.dayOfWeek(e,o,a);return r>=2&&r<=6},extraInfo:function(e,o,a){var r=this._validate(e,o,a,d.local.invalidDate);return{century:w[Math.floor((r.year()-1)/100)+1]||""}},toJD:function(e,o,a){var r=this._validate(e,o,a,d.local.invalidDate);return e=r.year()+(r.year()<0?1:0),o=r.month(),a=r.day(),a+(o>1?16:0)+(o>2?(o-2)*32:0)+(e-1)*400+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var o=Math.floor(e/400)+1;e-=(o-1)*400,e+=e>15?16:0;var a=Math.floor(e/32)+1,r=e-(a-1)*32+1;return this.newDate(o<=0?o-1:o,a,r)}});var w={20:"Fruitbat",21:"Anchovy"};d.calendars.discworld=b},{"../main":346,"object-assign":247}],335:[function(t,B,H){var d=t("../main"),l=t("object-assign");function b(w){this.local=this.regionalOptions[w||""]||this.regionalOptions[""]}b.prototype=new d.baseCalendar,l(b.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(o){var e=this._validate(o,this.minMonth,this.minDay,d.local.invalidYear),o=e.year()+(e.year()<0?1:0);return o%4===3||o%4===-1},monthsInYear:function(w){return this._validate(w,this.minMonth,this.minDay,d.local.invalidYear||d.regionalOptions[""].invalidYear),13},weekOfYear:function(w,e,o){var a=this.newDate(w,e,o);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(w,e){var o=this._validate(w,e,this.minDay,d.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(o.month()===13&&this.leapYear(o.year())?1:0)},weekDay:function(w,e,o){return(this.dayOfWeek(w,e,o)||7)<6},toJD:function(w,e,o){var a=this._validate(w,e,o,d.local.invalidDate);return w=a.year(),w<0&&w++,a.day()+(a.month()-1)*30+(w-1)*365+Math.floor(w/4)+this.jdEpoch-1},fromJD:function(w){var e=Math.floor(w)+.5-this.jdEpoch,o=Math.floor((e-Math.floor((e+366)/1461))/365)+1;o<=0&&o--,e=Math.floor(w)+.5-this.newDate(o,1,1).toJD();var a=Math.floor(e/30)+1,r=e-(a-1)*30+1;return this.newDate(o,a,r)}}),d.calendars.ethiopian=b},{"../main":346,"object-assign":247}],336:[function(t,B,H){var d=t("../main"),l=t("object-assign");function b(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}b.prototype=new d.baseCalendar,l(b.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,d.local.invalidYear);return this._leapYear(o.year())},_leapYear:function(e){return e=e<0?e+1:e,w(e*7+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,d.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,o,a){var r=this.newDate(e,o,a);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,d.local.invalidYear);return e=o.year(),this.toJD(e===-1?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,o){return e.year&&(o=e.month(),e=e.year()),this._validate(e,o,this.minDay,d.local.invalidMonth),o===12&&this.leapYear(e)||o===8&&w(this.daysInYear(e),10)===5?30:o===9&&w(this.daysInYear(e),10)===3?29:this.daysPerMonth[o-1]},weekDay:function(e,o,a){return this.dayOfWeek(e,o,a)!==6},extraInfo:function(e,o,a){var r=this._validate(e,o,a,d.local.invalidDate);return{yearType:(this.leapYear(r)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(r)%10-3]}},toJD:function(e,o,a){var r=this._validate(e,o,a,d.local.invalidDate);e=r.year(),o=r.month(),a=r.day();var n=e<=0?e+1:e,c=this.jdEpoch+this._delay1(n)+this._delay2(n)+a+1;if(o<7){for(var s=7;s<=this.monthsInYear(e);s++)c+=this.daysInMonth(e,s);for(var s=1;s<o;s++)c+=this.daysInMonth(e,s)}else for(var s=7;s<o;s++)c+=this.daysInMonth(e,s);return c},_delay1:function(e){var o=Math.floor((235*e-234)/19),a=12084+13753*o,r=o*29+Math.floor(a/25920);return w(3*(r+1),7)<3&&r++,r},_delay2:function(e){var o=this._delay1(e-1),a=this._delay1(e),r=this._delay1(e+1);return r-a===356?2:a-o===382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var o=Math.floor((e-this.jdEpoch)*98496/35975351)-1;e>=this.toJD(o===-1?1:o+1,7,1);)o++;for(var a=e<this.toJD(o,1,1)?7:1;e>this.toJD(o,a,this.daysInMonth(o,a));)a++;var r=e-this.toJD(o,a,1)+1;return this.newDate(o,a,r)}});function w(e,o){return e-o*Math.floor(e/o)}d.calendars.hebrew=b},{"../main":346,"object-assign":247}],337:[function(t,B,H){var d=t("../main"),l=t("object-assign");function b(w){this.local=this.regionalOptions[w||""]||this.regionalOptions[""]}b.prototype=new d.baseCalendar,l(b.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012Bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(w){var e=this._validate(w,this.minMonth,this.minDay,d.local.invalidYear);return(e.year()*11+14)%30<11},weekOfYear:function(w,e,o){var a=this.newDate(w,e,o);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(w){return this.leapYear(w)?355:354},daysInMonth:function(w,e){var o=this._validate(w,e,this.minDay,d.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(o.month()===12&&this.leapYear(o.year())?1:0)},weekDay:function(w,e,o){return this.dayOfWeek(w,e,o)!==5},toJD:function(w,e,o){var a=this._validate(w,e,o,d.local.invalidDate);return w=a.year(),e=a.month(),o=a.day(),w=w<=0?w+1:w,o+Math.ceil(29.5*(e-1))+(w-1)*354+Math.floor((3+11*w)/30)+this.jdEpoch-1},fromJD:function(w){w=Math.floor(w)+.5;var e=Math.floor((30*(w-this.jdEpoch)+10646)/10631);e=e<=0?e-1:e;var o=Math.min(12,Math.ceil((w-29-this.toJD(e,1,1))/29.5)+1),a=w-this.toJD(e,o,1)+1;return this.newDate(e,o,a)}}),d.calendars.islamic=b},{"../main":346,"object-assign":247}],338:[function(t,B,H){var d=t("../main"),l=t("object-assign");function b(w){this.local=this.regionalOptions[w||""]||this.regionalOptions[""]}b.prototype=new d.baseCalendar,l(b.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(o){var e=this._validate(o,this.minMonth,this.minDay,d.local.invalidYear),o=e.year()<0?e.year()+1:e.year();return o%4===0},weekOfYear:function(w,e,o){var a=this.newDate(w,e,o);return a.add(4-(a.dayOfWeek()||7),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(w,e){var o=this._validate(w,e,this.minDay,d.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(o.month()===2&&this.leapYear(o.year())?1:0)},weekDay:function(w,e,o){return(this.dayOfWeek(w,e,o)||7)<6},toJD:function(w,e,o){var a=this._validate(w,e,o,d.local.invalidDate);return w=a.year(),e=a.month(),o=a.day(),w<0&&w++,e<=2&&(w--,e+=12),Math.floor(365.25*(w+4716))+Math.floor(30.6001*(e+1))+o-1524.5},fromJD:function(w){var e=Math.floor(w+.5),o=e+1524,a=Math.floor((o-122.1)/365.25),r=Math.floor(365.25*a),n=Math.floor((o-r)/30.6001),c=n-Math.floor(n<14?1:13),s=a-Math.floor(c>2?4716:4715),i=o-r-Math.floor(30.6001*n);return s<=0&&s--,this.newDate(s,c,i)}}),d.calendars.julian=b},{"../main":346,"object-assign":247}],339:[function(t,B,H){var d=t("../main"),l=t("object-assign");function b(o){this.local=this.regionalOptions[o||""]||this.regionalOptions[""]}b.prototype=new d.baseCalendar,l(b.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(o){return this._validate(o,this.minMonth,this.minDay,d.local.invalidYear),!1},formatYear:function(o){var a=this._validate(o,this.minMonth,this.minDay,d.local.invalidYear);o=a.year();var r=Math.floor(o/400);o=o%400,o+=o<0?400:0;var n=Math.floor(o/20);return r+"."+n+"."+o%20},forYear:function(o){if(o=o.split("."),o.length<3)throw"Invalid Mayan year";for(var a=0,r=0;r<o.length;r++){var n=parseInt(o[r],10);if(Math.abs(n)>19||r>0&&n<0)throw"Invalid Mayan year";a=a*20+n}return a},monthsInYear:function(o){return this._validate(o,this.minMonth,this.minDay,d.local.invalidYear),18},weekOfYear:function(o,a,r){return this._validate(o,a,r,d.local.invalidDate),0},daysInYear:function(o){return this._validate(o,this.minMonth,this.minDay,d.local.invalidYear),360},daysInMonth:function(o,a){return this._validate(o,a,this.minDay,d.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(o,a,r){var n=this._validate(o,a,r,d.local.invalidDate);return n.day()},weekDay:function(o,a,r){return this._validate(o,a,r,d.local.invalidDate),!0},extraInfo:function(o,a,r){var n=this._validate(o,a,r,d.local.invalidDate),c=n.toJD(),s=this._toHaab(c),i=this._toTzolkin(c);return{haabMonthName:this.local.haabMonths[s[0]-1],haabMonth:s[0],haabDay:s[1],tzolkinDayName:this.local.tzolkinMonths[i[0]-1],tzolkinDay:i[0],tzolkinTrecena:i[1]}},_toHaab:function(o){o-=this.jdEpoch;var a=w(o+8+(18-1)*20,365);return[Math.floor(a/20)+1,w(a,20)]},_toTzolkin:function(o){return o-=this.jdEpoch,[e(o+20,20),e(o+4,13)]},toJD:function(o,a,r){var n=this._validate(o,a,r,d.local.invalidDate);return n.day()+n.month()*20+n.year()*360+this.jdEpoch},fromJD:function(o){o=Math.floor(o)+.5-this.jdEpoch;var a=Math.floor(o/360);o=o%360,o+=o<0?360:0;var r=Math.floor(o/20),n=o%20;return this.newDate(a,r,n)}});function w(o,a){return o-a*Math.floor(o/a)}function e(o,a){return w(o-1,a)+1}d.calendars.mayan=b},{"../main":346,"object-assign":247}],340:[function(t,B,H){var d=t("../main"),l=t("object-assign");function b(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}b.prototype=new d.baseCalendar;var w=d.instance("gregorian");l(b.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,d.local.invalidYear||d.regionalOptions[""].invalidYear);return w.leapYear(o.year()+(o.year()<1?1:0)+1469)},weekOfYear:function(e,o,a){var r=this.newDate(e,o,a);return r.add(1-(r.dayOfWeek()||7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(e,o){var a=this._validate(e,o,this.minDay,d.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===12&&this.leapYear(a.year())?1:0)},weekDay:function(e,o,a){return(this.dayOfWeek(e,o,a)||7)<6},toJD:function(n,o,a){var r=this._validate(n,o,a,d.local.invalidMonth),n=r.year();n<0&&n++;for(var c=r.day(),s=1;s<r.month();s++)c+=this.daysPerMonth[s-1];return c+w.toJD(n+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var o=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(o+1,1,1);)o++;for(var a=e-Math.floor(this.toJD(o,1,1)+.5)+1,r=1;a>this.daysInMonth(o,r);)a-=this.daysInMonth(o,r),r++;return this.newDate(o,r,a)}}),d.calendars.nanakshahi=b},{"../main":346,"object-assign":247}],341:[function(t,B,H){var d=t("../main"),l=t("object-assign");function b(w){this.local=this.regionalOptions[w||""]||this.regionalOptions[""]}b.prototype=new d.baseCalendar,l(b.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(w){return this.daysInYear(w)!==this.daysPerYear},weekOfYear:function(w,e,o){var a=this.newDate(w,e,o);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(w){var e=this._validate(w,this.minMonth,this.minDay,d.local.invalidYear);if(w=e.year(),typeof this.NEPALI_CALENDAR_DATA[w]=="undefined")return this.daysPerYear;for(var o=0,a=this.minMonth;a<=12;a++)o+=this.NEPALI_CALENDAR_DATA[w][a];return o},daysInMonth:function(w,e){return w.year&&(e=w.month(),w=w.year()),this._validate(w,e,this.minDay,d.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[w]=="undefined"?this.daysPerMonth[e-1]:this.NEPALI_CALENDAR_DATA[w][e]},weekDay:function(w,e,o){return this.dayOfWeek(w,e,o)!==6},toJD:function(w,e,o){var a=this._validate(w,e,o,d.local.invalidDate);w=a.year(),e=a.month(),o=a.day();var r=d.instance(),n=0,c=e,s=w;this._createMissingCalendarData(w);var i=w-(c>9||c===9&&o>=this.NEPALI_CALENDAR_DATA[s][0]?56:57);for(e!==9&&(n=o,c--);c!==9;)c<=0&&(c=12,s--),n+=this.NEPALI_CALENDAR_DATA[s][c],c--;return e===9?(n+=o-this.NEPALI_CALENDAR_DATA[s][0],n<0&&(n+=r.daysInYear(i))):n+=this.NEPALI_CALENDAR_DATA[s][9]-this.NEPALI_CALENDAR_DATA[s][0],r.newDate(i,1,1).add(n,"d").toJD()},fromJD:function(w){var e=d.instance(),o=e.fromJD(w),a=o.year(),r=o.dayOfYear(),n=a+56;this._createMissingCalendarData(n);for(var c=9,s=this.NEPALI_CALENDAR_DATA[n][0],i=this.NEPALI_CALENDAR_DATA[n][c]-s+1;r>i;)c++,c>12&&(c=1,n++),i+=this.NEPALI_CALENDAR_DATA[n][c];var v=this.NEPALI_CALENDAR_DATA[n][c]-(i-r);return this.newDate(n,c,v)},_createMissingCalendarData:function(w){var e=this.daysPerMonth.slice(0);e.unshift(17);for(var o=w-1;o<w+2;o++)typeof this.NEPALI_CALENDAR_DATA[o]=="undefined"&&(this.NEPALI_CALENDAR_DATA[o]=e)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),d.calendars.nepali=b},{"../main":346,"object-assign":247}],342:[function(t,B,H){var d=t("../main"),l=t("object-assign");function b(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}b.prototype=new d.baseCalendar,l(b.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xE6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xE6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,d.local.invalidYear);return((o.year()-(o.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(e,o,a){var r=this.newDate(e,o,a);return r.add(-((r.dayOfWeek()+1)%7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(e,o){var a=this._validate(e,o,this.minDay,d.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===12&&this.leapYear(a.year())?1:0)},weekDay:function(e,o,a){return this.dayOfWeek(e,o,a)!==5},toJD:function(e,o,a){var r=this._validate(e,o,a,d.local.invalidDate);e=r.year(),o=r.month(),a=r.day();var n=e-(e>=0?474:473),c=474+w(n,2820);return a+(o<=7?(o-1)*31:(o-1)*30+6)+Math.floor((c*682-110)/2816)+(c-1)*365+Math.floor(n/2820)*1029983+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var o=e-this.toJD(475,1,1),a=Math.floor(o/1029983),r=w(o,1029983),n=2820;if(r!==1029982){var c=Math.floor(r/366),s=w(r,366);n=Math.floor((2134*c+2816*s+2815)/1028522)+c+1}var i=n+2820*a+474;i=i<=0?i-1:i;var v=e-this.toJD(i,1,1)+1,u=v<=186?Math.ceil(v/31):Math.ceil((v-6)/30),g=e-this.toJD(i,u,1)+1;return this.newDate(i,u,g)}});function w(e,o){return e-o*Math.floor(e/o)}d.calendars.persian=b,d.calendars.jalali=b},{"../main":346,"object-assign":247}],343:[function(t,B,H){var d=t("../main"),l=t("object-assign"),b=d.instance();function w(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}w.prototype=new d.baseCalendar,l(w.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(a){var o=this._validate(a,this.minMonth,this.minDay,d.local.invalidYear),a=this._t2gYear(o.year());return b.leapYear(a)},weekOfYear:function(n,o,a){var r=this._validate(n,this.minMonth,this.minDay,d.local.invalidYear),n=this._t2gYear(r.year());return b.weekOfYear(n,r.month(),r.day())},daysInMonth:function(e,o){var a=this._validate(e,o,this.minDay,d.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===2&&this.leapYear(a.year())?1:0)},weekDay:function(e,o,a){return(this.dayOfWeek(e,o,a)||7)<6},toJD:function(n,o,a){var r=this._validate(n,o,a,d.local.invalidDate),n=this._t2gYear(r.year());return b.toJD(n,r.month(),r.day())},fromJD:function(e){var o=b.fromJD(e),a=this._g2tYear(o.year());return this.newDate(a,o.month(),o.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}}),d.calendars.taiwan=w},{"../main":346,"object-assign":247}],344:[function(t,B,H){var d=t("../main"),l=t("object-assign"),b=d.instance();function w(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}w.prototype=new d.baseCalendar,l(w.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var o=this._validate(a,this.minMonth,this.minDay,d.local.invalidYear),a=this._t2gYear(o.year());return b.leapYear(a)},weekOfYear:function(n,o,a){var r=this._validate(n,this.minMonth,this.minDay,d.local.invalidYear),n=this._t2gYear(r.year());return b.weekOfYear(n,r.month(),r.day())},daysInMonth:function(e,o){var a=this._validate(e,o,this.minDay,d.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===2&&this.leapYear(a.year())?1:0)},weekDay:function(e,o,a){return(this.dayOfWeek(e,o,a)||7)<6},toJD:function(n,o,a){var r=this._validate(n,o,a,d.local.invalidDate),n=this._t2gYear(r.year());return b.toJD(n,r.month(),r.day())},fromJD:function(e){var o=b.fromJD(e),a=this._g2tYear(o.year());return this.newDate(a,o.month(),o.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}}),d.calendars.thai=w},{"../main":346,"object-assign":247}],345:[function(t,B,H){var d=t("../main"),l=t("object-assign");function b(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}b.prototype=new d.baseCalendar,l(b.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012Bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,d.local.invalidYear);return this.daysInYear(o.year())===355},weekOfYear:function(e,o,a){var r=this.newDate(e,o,a);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var o=0,a=1;a<=12;a++)o+=this.daysInMonth(e,a);return o},daysInMonth:function(e,o){for(var a=this._validate(e,o,this.minDay,d.local.invalidMonth),r=a.toJD()-24e5+.5,n=0,c=0;c<w.length;c++){if(w[c]>r)return w[n]-w[n-1];n++}return 30},weekDay:function(e,o,a){return this.dayOfWeek(e,o,a)!==5},toJD:function(e,o,a){var r=this._validate(e,o,a,d.local.invalidDate),n=12*(r.year()-1)+r.month()-15292,c=r.day()+w[n-1]-1;return c+24e5-.5},fromJD:function(e){for(var o=e-24e5+.5,a=0,r=0;r<w.length&&!(w[r]>o);r++)a++;var n=a+15292,c=Math.floor((n-1)/12),s=c+1,i=n-12*c,v=o-w[a-1]+1;return this.newDate(s,i,v)},isValid:function(e,o,a){var r=d.baseCalendar.prototype.isValid.apply(this,arguments);return r&&(e=e.year!=null?e.year:e,r=e>=1276&&e<=1500),r},_validate:function(e,o,a,r){var n=d.baseCalendar.prototype._validate.apply(this,arguments);if(n.year<1276||n.year>1500)throw r.replace(/\{0\}/,this.local.name);return n}}),d.calendars.ummalqura=b;var w=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":346,"object-assign":247}],346:[function(t,B,H){var d=t("object-assign");function l(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}d(l.prototype,{instance:function(r,n){r=(r||"gregorian").toLowerCase(),n=n||"";var c=this._localCals[r+"-"+n];if(!c&&this.calendars[r]&&(c=new this.calendars[r](n),this._localCals[r+"-"+n]=c),!c)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,r);return c},newDate:function(r,n,c,s,i){return s=(r!=null&&r.year?r.calendar():typeof s=="string"?this.instance(s,i):s)||this.instance(),s.newDate(r,n,c)},substituteDigits:function(r){return function(n){return(n+"").replace(/[0-9]/g,function(c){return r[c]})}},substituteChineseDigits:function(r,n){return function(c){for(var s="",i=0;c>0;){var v=c%10;s=(v===0?"":r[v]+n[i])+s,i++,c=Math.floor(c/10)}return s.indexOf(r[1]+n[1])===0&&(s=s.substr(1)),s||r[0]}}});function b(r,n,c,s){if(this._calendar=r,this._year=n,this._month=c,this._day=s,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(a.local.invalidDate||a.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function w(r,n){return r=""+r,"000000".substring(0,n-r.length)+r}d(b.prototype,{newDate:function(r,n,c){return this._calendar.newDate(r==null?this:r,n,c)},year:function(r){return arguments.length===0?this._year:this.set(r,"y")},month:function(r){return arguments.length===0?this._month:this.set(r,"m")},day:function(r){return arguments.length===0?this._day:this.set(r,"d")},date:function(r,n,c){if(!this._calendar.isValid(r,n,c))throw(a.local.invalidDate||a.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=r,this._month=n,this._day=c,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(r,n){return this._calendar.add(this,r,n)},set:function(r,n){return this._calendar.set(this,r,n)},compareTo:function(r){if(this._calendar.name!==r._calendar.name)throw(a.local.differentCalendars||a.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,r._calendar.local.name);var n=this._year!==r._year?this._year-r._year:this._month!==r._month?this.monthOfYear()-r.monthOfYear():this._day-r._day;return n===0?0:n<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(r){return this._calendar.fromJD(r)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(r){return this._calendar.fromJSDate(r)},toString:function(){return(this.year()<0?"-":"")+w(Math.abs(this.year()),4)+"-"+w(this.month(),2)+"-"+w(this.day(),2)}});function e(){this.shortYearCutoff="+10"}d(e.prototype,{_validateLevel:0,newDate:function(r,n,c){return r==null?this.today():(r.year&&(this._validate(r,n,c,a.local.invalidDate||a.regionalOptions[""].invalidDate),c=r.day(),n=r.month(),r=r.year()),new b(this,r,n,c))},today:function(){return this.fromJSDate(new Date)},epoch:function(r){var n=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear);return n.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(r){var n=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear);return(n.year()<0?"-":"")+w(Math.abs(n.year()),4)},monthsInYear:function(r){return this._validate(r,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear),12},monthOfYear:function(r,n){var c=this._validate(r,n,this.minDay,a.local.invalidMonth||a.regionalOptions[""].invalidMonth);return(c.month()+this.monthsInYear(c)-this.firstMonth)%this.monthsInYear(c)+this.minMonth},fromMonthOfYear:function(r,n){var c=(n+this.firstMonth-2*this.minMonth)%this.monthsInYear(r)+this.minMonth;return this._validate(r,c,this.minDay,a.local.invalidMonth||a.regionalOptions[""].invalidMonth),c},daysInYear:function(r){var n=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear);return this.leapYear(n)?366:365},dayOfYear:function(r,n,c){var s=this._validate(r,n,c,a.local.invalidDate||a.regionalOptions[""].invalidDate);return s.toJD()-this.newDate(s.year(),this.fromMonthOfYear(s.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(r,n,c){var s=this._validate(r,n,c,a.local.invalidDate||a.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(s))+2)%this.daysInWeek()},extraInfo:function(r,n,c){return this._validate(r,n,c,a.local.invalidDate||a.regionalOptions[""].invalidDate),{}},add:function(r,n,c){return this._validate(r,this.minMonth,this.minDay,a.local.invalidDate||a.regionalOptions[""].invalidDate),this._correctAdd(r,this._add(r,n,c),n,c)},_add:function(r,n,c){if(this._validateLevel++,c==="d"||c==="w"){var s=r.toJD()+n*(c==="w"?this.daysInWeek():1),i=r.calendar().fromJD(s);return this._validateLevel--,[i.year(),i.month(),i.day()]}try{var v=r.year()+(c==="y"?n:0),u=r.monthOfYear()+(c==="m"?n:0),i=r.day(),g=function(p){for(;u<p.minMonth;)v--,u+=p.monthsInYear(v);for(var A=p.monthsInYear(v);u>A-1+p.minMonth;)v++,u-=A,A=p.monthsInYear(v)};c==="y"?(r.month()!==this.fromMonthOfYear(v,u)&&(u=this.newDate(v,r.month(),this.minDay).monthOfYear()),u=Math.min(u,this.monthsInYear(v)),i=Math.min(i,this.daysInMonth(v,this.fromMonthOfYear(v,u)))):c==="m"&&(g(this),i=Math.min(i,this.daysInMonth(v,this.fromMonthOfYear(v,u))));var h=[v,this.fromMonthOfYear(v,u),i];return this._validateLevel--,h}catch(y){throw this._validateLevel--,y}},_correctAdd:function(r,n,c,s){if(!this.hasYearZero&&(s==="y"||s==="m")&&(n[0]===0||r.year()>0!=n[0]>0)){var i={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[s],v=c<0?-1:1;n=this._add(r,c*i[0]+v*i[1],i[2])}return r.date(n[0],n[1],n[2])},set:function(r,n,c){this._validate(r,this.minMonth,this.minDay,a.local.invalidDate||a.regionalOptions[""].invalidDate);var s=c==="y"?n:r.year(),i=c==="m"?n:r.month(),v=c==="d"?n:r.day();return(c==="y"||c==="m")&&(v=Math.min(v,this.daysInMonth(s,i))),r.date(s,i,v)},isValid:function(r,n,c){this._validateLevel++;var s=this.hasYearZero||r!==0;if(s){var i=this.newDate(r,n,this.minDay);s=n>=this.minMonth&&n-this.minMonth<this.monthsInYear(i)&&c>=this.minDay&&c-this.minDay<this.daysInMonth(i)}return this._validateLevel--,s},toJSDate:function(r,n,c){var s=this._validate(r,n,c,a.local.invalidDate||a.regionalOptions[""].invalidDate);return a.instance().fromJD(this.toJD(s)).toJSDate()},fromJSDate:function(r){return this.fromJD(a.instance().fromJSDate(r).toJD())},_validate:function(r,n,c,s){if(r.year){if(this._validateLevel===0&&this.name!==r.calendar().name)throw(a.local.differentCalendars||a.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,r.calendar().local.name);return r}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(r,n,c))throw s.replace(/\{0\}/,this.local.name);var i=this.newDate(r,n,c);return this._validateLevel--,i}catch(v){throw this._validateLevel--,v}}});function o(r){this.local=this.regionalOptions[r]||this.regionalOptions[""]}o.prototype=new e,d(o.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(c){var n=this._validate(c,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear),c=n.year()+(n.year()<0?1:0);return c%4===0&&(c%100!==0||c%400===0)},weekOfYear:function(r,n,c){var s=this.newDate(r,n,c);return s.add(4-(s.dayOfWeek()||7),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(r,n){var c=this._validate(r,n,this.minDay,a.local.invalidMonth||a.regionalOptions[""].invalidMonth);return this.daysPerMonth[c.month()-1]+(c.month()===2&&this.leapYear(c.year())?1:0)},weekDay:function(r,n,c){return(this.dayOfWeek(r,n,c)||7)<6},toJD:function(r,n,c){var s=this._validate(r,n,c,a.local.invalidDate||a.regionalOptions[""].invalidDate);r=s.year(),n=s.month(),c=s.day(),r<0&&r++,n<3&&(n+=12,r--);var i=Math.floor(r/100),v=2-i+Math.floor(i/4);return Math.floor(365.25*(r+4716))+Math.floor(30.6001*(n+1))+c+v-1524.5},fromJD:function(r){var n=Math.floor(r+.5),c=Math.floor((n-186721625e-2)/36524.25);c=n+1+c-Math.floor(c/4);var s=c+1524,i=Math.floor((s-122.1)/365.25),v=Math.floor(365.25*i),u=Math.floor((s-v)/30.6001),g=s-v-Math.floor(u*30.6001),h=u-(u>13.5?13:1),y=i-(h>2.5?4716:4715);return y<=0&&y--,this.newDate(y,h,g)},toJSDate:function(r,n,c){var s=this._validate(r,n,c,a.local.invalidDate||a.regionalOptions[""].invalidDate),i=new Date(s.year(),s.month()-1,s.day());return i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),i.setHours(i.getHours()>12?i.getHours()+2:0),i},fromJSDate:function(r){return this.newDate(r.getFullYear(),r.getMonth()+1,r.getDate())}});var a=B.exports=new l;a.cdate=b,a.baseCalendar=e,a.calendars.gregorian=o},{"object-assign":247}],347:[function(t,B,H){var d=t("object-assign"),l=t("./main");d(l.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),l.local=l.regionalOptions[""],d(l.cdate.prototype,{formatDate:function(b,w){return typeof b!="string"&&(w=b,b=""),this._calendar.formatDate(b||"",this,w)}}),d(l.baseCalendar.prototype,{UNIX_EPOCH:l.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:24*60*60,TICKS_EPOCH:l.instance().jdEpoch,TICKS_PER_DAY:24*60*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(b,w,e){if(typeof b!="string"&&(e=w,w=b,b=""),!w)return"";if(w.calendar()!==this)throw l.local.invalidFormat||l.regionalOptions[""].invalidFormat;b=b||this.local.dateFormat,e=e||{};var o=e.dayNamesShort||this.local.dayNamesShort,a=e.dayNames||this.local.dayNames,r=e.monthNumbers||this.local.monthNumbers,n=e.monthNamesShort||this.local.monthNamesShort,c=e.monthNames||this.local.monthNames;e.calculateWeek||this.local.calculateWeek;for(var s=function(x,T){for(var _=1;M+_<b.length&&b.charAt(M+_)===x;)_++;return M+=_-1,Math.floor(_/(T||1))>1},i=function(x,T,_,f){var L=""+T;if(s(x,f))for(;L.length<_;)L="0"+L;return L},v=function(x,T,_,f){return s(x)?f[T]:_[T]},u=this,g=function(x){return typeof r=="function"?r.call(u,x,s("m")):p(i("m",x.month(),2))},h=function(x,T){return T?typeof c=="function"?c.call(u,x):c[x.month()-u.minMonth]:typeof n=="function"?n.call(u,x):n[x.month()-u.minMonth]},y=this.local.digits,p=function(x){return e.localNumbers&&y?y(x):x},A="",m=!1,M=0;M<b.length;M++)if(m)b.charAt(M)==="'"&&!s("'")?m=!1:A+=b.charAt(M);else switch(b.charAt(M)){case"d":A+=p(i("d",w.day(),2));break;case"D":A+=v("D",w.dayOfWeek(),o,a);break;case"o":A+=i("o",w.dayOfYear(),3);break;case"w":A+=i("w",w.weekOfYear(),2);break;case"m":A+=g(w);break;case"M":A+=h(w,s("M"));break;case"y":A+=s("y",2)?w.year():(w.year()%100<10?"0":"")+w.year()%100;break;case"Y":s("Y",2),A+=w.formatYear();break;case"J":A+=w.toJD();break;case"@":A+=(w.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":A+=(w.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":s("'")?A+="'":m=!0;break;default:A+=b.charAt(M)}return A},parseDate:function(b,w,e){if(w==null)throw l.local.invalidArguments||l.regionalOptions[""].invalidArguments;if(w=typeof w=="object"?w.toString():w+"",w==="")return null;b=b||this.local.dateFormat,e=e||{};var o=e.shortYearCutoff||this.shortYearCutoff;o=typeof o!="string"?o:this.today().year()%100+parseInt(o,10);for(var a=e.dayNamesShort||this.local.dayNamesShort,r=e.dayNames||this.local.dayNames,n=e.parseMonth||this.local.parseMonth,c=e.monthNumbers||this.local.monthNumbers,s=e.monthNamesShort||this.local.monthNamesShort,i=e.monthNames||this.local.monthNames,v=-1,u=-1,g=-1,h=-1,y=-1,p=!1,A=!1,m=function(I,R){for(var D=1;k+D<b.length&&b.charAt(k+D)===I;)D++;return k+=D-1,Math.floor(D/(R||1))>1},M=function(I,R){var D=m(I,R),O=[2,3,D?4:2,D?4:2,10,11,20]["oyYJ@!".indexOf(I)+1],F=new RegExp("^-?\\d{1,"+O+"}"),G=w.substring(S).match(F);if(!G)throw(l.local.missingNumberAt||l.regionalOptions[""].missingNumberAt).replace(/\{0\}/,S);return S+=G[0].length,parseInt(G[0],10)},x=this,T=function(){if(typeof c=="function"){m("m");var I=c.call(x,w.substring(S));return S+=I.length,I}return M("m")},_=function(I,R,D,O){for(var F=m(I,O)?D:R,G=0;G<F.length;G++)if(w.substr(S,F[G].length).toLowerCase()===F[G].toLowerCase())return S+=F[G].length,G+x.minMonth;throw(l.local.unknownNameAt||l.regionalOptions[""].unknownNameAt).replace(/\{0\}/,S)},f=function(){if(typeof i=="function"){var I=m("M")?i.call(x,w.substring(S)):s.call(x,w.substring(S));return S+=I.length,I}return _("M",s,i)},L=function(){if(w.charAt(S)!==b.charAt(k))throw(l.local.unexpectedLiteralAt||l.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,S);S++},S=0,k=0;k<b.length;k++)if(A)b.charAt(k)==="'"&&!m("'")?A=!1:L();else switch(b.charAt(k)){case"d":h=M("d");break;case"D":_("D",a,r);break;case"o":y=M("o");break;case"w":M("w");break;case"m":g=T();break;case"M":g=f();break;case"y":var P=k;p=!m("y",2),k=P,u=M("y",2);break;case"Y":u=M("Y",2);break;case"J":v=M("J")+.5,w.charAt(S)==="."&&(S++,M("J"));break;case"@":v=M("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":v=M("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":S=w.length;break;case"'":m("'")?L():A=!0;break;default:L()}if(S<w.length)throw l.local.unexpectedText||l.regionalOptions[""].unexpectedText;if(u===-1?u=this.today().year():u<100&&p&&(u+=o===-1?1900:this.today().year()-this.today().year()%100-(u<=o?0:100)),typeof g=="string"&&(g=n.call(this,u,g)),y>-1){g=1,h=y;for(var z=this.daysInMonth(u,g);h>z;z=this.daysInMonth(u,g))g++,h-=z}return v>-1?this.fromJD(v):this.newDate(u,g,h)},determineDate:function(b,w,e,o,a){e&&typeof e!="object"&&(a=o,o=e,e=null),typeof o!="string"&&(a=o,o="");var r=this,n=function(c){try{return r.parseDate(o,c,a)}catch{}c=c.toLowerCase();for(var s=(c.match(/^c/)&&e?e.newDate():null)||r.today(),i=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,v=i.exec(c);v;)s.add(parseInt(v[1],10),v[2]||"d"),v=i.exec(c);return s};return w=w?w.newDate():null,b=b==null?w:typeof b=="string"?n(b):typeof b=="number"?isNaN(b)||b===1/0||b===-1/0?w:r.today().add(b,"d"):r.newDate(b),b}})},{"./main":346,"object-assign":247}],348:[function(t,B,H){B.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],349:[function(t,B,H){var d=t("./arrow_paths"),l=t("../../plots/font_attributes"),b=t("../../plots/cartesian/constants"),w=t("../../plot_api/plot_template").templatedArray;t("../../constants/axis_placeable_objects"),B.exports=w("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:l({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:d.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:d.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",b.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",b.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",b.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",b.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:l({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":472,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561,"../../plots/font_attributes":585,"./arrow_paths":348}],350:[function(t,B,H){var d=t("../../lib"),l=t("../../plots/cartesian/axes"),b=t("./draw").draw;B.exports=function(a){var r=a._fullLayout,n=d.filterVisible(r.annotations);if(n.length&&a._fullData.length)return d.syncOrAsync([b,w],a)};function w(o){var a=o._fullLayout;d.filterVisible(a.annotations).forEach(function(r){var n=l.getFromId(o,r.xref),c=l.getFromId(o,r.yref),s=l.getRefType(r.xref),i=l.getRefType(r.yref);r._extremes={},s==="range"&&e(r,n),i==="range"&&e(r,c)})}function e(o,a){var r=a._id,n=r.charAt(0),c=o[n],s=o["a"+n],i=o[n+"ref"],v=o["a"+n+"ref"],u=o["_"+n+"padplus"],g=o["_"+n+"padminus"],h={x:1,y:-1}[n]*o[n+"shift"],y=3*o.arrowsize*o.arrowwidth||0,p=y+h,A=y-h,m=3*o.startarrowsize*o.arrowwidth||0,M=m+h,x=m-h,T;if(v===i){var _=l.findExtremes(a,[a.r2c(c)],{ppadplus:p,ppadminus:A}),f=l.findExtremes(a,[a.r2c(s)],{ppadplus:Math.max(u,M),ppadminus:Math.max(g,x)});T={min:[_.min[0],f.min[0]],max:[_.max[0],f.max[0]]}}else M=s?M+s:M,x=s?x-s:x,T=l.findExtremes(a,[a.r2c(c)],{ppadplus:Math.max(u,p,M),ppadminus:Math.max(g,A,x)});o._extremes[r]=T}},{"../../lib":503,"../../plots/cartesian/axes":554,"./draw":355}],351:[function(t,B,H){var d=t("../../lib"),l=t("../../registry"),b=t("../../plot_api/plot_template").arrayEditor;B.exports={hasClickToShow:w,onClick:e};function w(r,n){var c=o(r,n);return c.on.length>0||c.explicitOff.length>0}function e(r,n){var c=o(r,n),s=c.on,i=c.off.concat(c.explicitOff),v={},u=r._fullLayout.annotations,g,h;if(!!(s.length||i.length)){for(g=0;g<s.length;g++)h=b(r.layout,"annotations",u[s[g]]),h.modifyItem("visible",!0),d.extendFlat(v,h.getUpdateObj());for(g=0;g<i.length;g++)h=b(r.layout,"annotations",u[i[g]]),h.modifyItem("visible",!1),d.extendFlat(v,h.getUpdateObj());return l.call("update",r,{},v)}}function o(r,n){var c=r._fullLayout.annotations,s=[],i=[],v=[],u=(n||[]).length,g,h,y,p,A,m,M,x;for(g=0;g<c.length;g++)if(y=c[g],p=y.clicktoshow,p){for(h=0;h<u;h++)if(A=n[h],m=A.xaxis,M=A.yaxis,m._id===y.xref&&M._id===y.yref&&m.d2r(A.x)===a(y._xclick,m)&&M.d2r(A.y)===a(y._yclick,M)){y.visible?p==="onout"?x=i:x=v:x=s,x.push(g);break}h===u&&y.visible&&p==="onout"&&i.push(g)}return{on:s,off:i,explicitOff:v}}function a(r,n){return n.type==="log"?n.l2r(r):n.d2r(r)}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638}],352:[function(t,B,H){var d=t("../../lib"),l=t("../color");B.exports=function(w,e,o,a){a("opacity");var r=a("bgcolor"),n=a("bordercolor"),c=l.opacity(n);a("borderpad");var s=a("borderwidth"),i=a("showarrow");a("text",i?" ":o._dfltTitle.annotation),a("textangle"),d.coerceFont(a,"font",o.font),a("width"),a("align");var v=a("height");if(v&&a("valign"),i){var u=a("arrowside"),g,h;u.indexOf("end")!==-1&&(g=a("arrowhead"),h=a("arrowsize")),u.indexOf("start")!==-1&&(a("startarrowhead",g),a("startarrowsize",h)),a("arrowcolor",c?e.bordercolor:l.defaultLine),a("arrowwidth",(c&&s||1)*2),a("standoff"),a("startstandoff")}var y=a("hovertext"),p=o.hoverlabel||{};if(y){var A=a("hoverlabel.bgcolor",p.bgcolor||(l.opacity(r)?l.rgb(r):l.defaultLine)),m=a("hoverlabel.bordercolor",p.bordercolor||l.contrast(A));d.coerceFont(a,"hoverlabel.font",{family:p.font.family,size:p.font.size,color:p.font.color||m})}a("captureevents",!!y)}},{"../../lib":503,"../color":366}],353:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../lib/to_log_range");B.exports=function(w,e,o,a){e=e||{};var r=o==="log"&&e.type==="linear",n=o==="linear"&&e.type==="log";if(!(r||n))return;var c=w._fullLayout.annotations,s=e._id.charAt(0),i,v;function u(h){var y=i[h],p=null;r?p=l(y,e.range):p=Math.pow(10,y),d(p)||(p=null),a(v+h,p)}for(var g=0;g<c.length;g++)i=c[g],v="annotations["+g+"].",i[s+"ref"]===e._id&&u(s),i["a"+s+"ref"]===e._id&&u("a"+s)}},{"../../lib/to_log_range":531,"fast-isnumeric":190}],354:[function(t,B,H){var d=t("../../lib"),l=t("../../plots/cartesian/axes"),b=t("../../plots/array_container_defaults"),w=t("./common_defaults"),e=t("./attributes");B.exports=function(r,n){b(r,n,{name:"annotations",handleItemDefaults:o})};function o(a,r,n){function c(L,S){return d.coerce(a,r,e,L,S)}var s=c("visible"),i=c("clicktoshow");if(!!(s||i)){w(a,r,n,c);for(var v=r.showarrow,u=["x","y"],g=[-10,-30],h={_fullLayout:n},y=0;y<2;y++){var p=u[y],A=l.coerceRef(a,r,h,p,"","paper");if(A!=="paper"){var m=l.getFromId(h,A);m._annIndices.push(r._index)}if(l.coercePosition(r,h,c,A,p,.5),v){var M="a"+p,x=l.coerceRef(a,r,h,M,"pixel",["pixel","paper"]);x!=="pixel"&&x!==A&&(x=r[M]="pixel");var T=x==="pixel"?g[y]:.4;l.coercePosition(r,h,c,x,M,T)}c(p+"anchor"),c(p+"shift")}if(d.noneOrAll(a,r,["x","y"]),v&&d.noneOrAll(a,r,["ax","ay"]),i){var _=c("xclick"),f=c("yclick");r._xclick=_===void 0?r.x:l.cleanPosition(_,h,r.xref),r._yclick=f===void 0?r.y:l.cleanPosition(f,h,r.yref)}}}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":349,"./common_defaults":352}],355:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../registry"),b=t("../../plots/plots"),w=t("../../lib"),e=w.strTranslate,o=t("../../plots/cartesian/axes"),a=t("../color"),r=t("../drawing"),n=t("../fx"),c=t("../../lib/svg_text_utils"),s=t("../../lib/setcursor"),i=t("../dragelement"),v=t("../../plot_api/plot_template").arrayEditor,u=t("./draw_arrow_head");B.exports={draw:g,drawOne:h,drawRaw:p};function g(A){var m=A._fullLayout;m._infolayer.selectAll(".annotation").remove();for(var M=0;M<m.annotations.length;M++)m.annotations[M].visible&&h(A,M);return b.previousPromises(A)}function h(A,m){var M=A._fullLayout,x=M.annotations[m]||{},T=o.getFromId(A,x.xref),_=o.getFromId(A,x.yref);T&&T.setScale(),_&&_.setScale(),p(A,x,m,!1,T,_)}function y(A,m,M,x,T){var _=T[M],f=T[M+"ref"],L=M.indexOf("y")!==-1,S=o.getRefType(f)==="domain",k=L?x.h:x.w;return A?S?_+(L?-m:m)/A._length:A.p2r(A.r2p(_)+m):_+(L?-m:m)/k}function p(A,m,M,x,T,_){var f=A._fullLayout,L=A._fullLayout._size,S=A._context.edits,k,P;x?(k="annotation-"+x,P=x+".annotations"):(k="annotation",P="annotations");var z=v(A.layout,P,m),I=z.modifyBase,R=z.modifyItem,D=z.getUpdateObj;f._infolayer.selectAll("."+k+'[data-index="'+M+'"]').remove();var O="clip"+f._uid+"_ann"+M;if(!m._input||m.visible===!1){d.selectAll("#"+O).remove();return}var F={x:{},y:{}},G=+m.textangle||0,W=f._infolayer.append("g").classed(k,!0).attr("data-index",String(M)).style("opacity",m.opacity),q=W.append("g").classed("annotation-text-g",!0),J=S[m.showarrow?"annotationTail":"annotationPosition"],X=m.captureevents||S.annotationText||J;function Z(ue){var xe={index:M,annotation:m._input,fullAnnotation:m,event:ue};return x&&(xe.subplotId=x),xe}var se=q.append("g").style("pointer-events",X?"all":null).call(s,"pointer").on("click",function(){A._dragging=!1,A.emit("plotly_clickannotation",Z(d.event))});m.hovertext&&se.on("mouseover",function(){var ue=m.hoverlabel,xe=ue.font,he=this.getBoundingClientRect(),ge=A.getBoundingClientRect();n.loneHover({x0:he.left-ge.left,x1:he.right-ge.left,y:(he.top+he.bottom)/2-ge.top,text:m.hovertext,color:ue.bgcolor,borderColor:ue.bordercolor,fontFamily:xe.family,fontSize:xe.size,fontColor:xe.color},{container:f._hoverlayer.node(),outerContainer:f._paper.node(),gd:A})}).on("mouseout",function(){n.loneUnhover(f._hoverlayer.node())});var le=m.borderwidth,oe=m.borderpad,U=le+oe,V=se.append("rect").attr("class","bg").style("stroke-width",le+"px").call(a.stroke,m.bordercolor).call(a.fill,m.bgcolor),re=m.width||m.height,ee=f._topclips.selectAll("#"+O).data(re?[0]:[]);ee.enter().append("clipPath").classed("annclip",!0).attr("id",O).append("rect"),ee.exit().remove();var j=m.font,Q=f._meta?w.templateString(m.text,f._meta):m.text,ne=se.append("text").classed("annotation-text",!0).text(Q);function ae(ue){return ue.call(r.font,j).attr({"text-anchor":{left:"start",right:"end"}[m.align]||"middle"}),c.convertToTspans(ue,A,ie),ue}function ie(){var ue=ne.selectAll("a");if(ue.size()===1&&ue.text()===ne.text()){var xe=se.insert("a",":first-child").attr({"xlink:xlink:href":ue.attr("xlink:href"),"xlink:xlink:show":ue.attr("xlink:show")}).style({cursor:"pointer"});xe.node().appendChild(V.node())}var he=se.select(".annotation-text-math-group"),ge=!he.empty(),me=r.bBox((ge?he:ne).node()),ke=me.width,Ae=me.height,Ne=m.width||ke,He=m.height||Ae,Ge=Math.round(Ne+2*U),_e=Math.round(He+2*U);function De(Pr,Sr){return Sr==="auto"&&(Pr<1/3?Sr="left":Pr>2/3?Sr="right":Sr="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[Sr]}for(var Ye=!1,qe=["x","y"],Ue=0;Ue<qe.length;Ue++){var Ie=qe[Ue],Ve=m[Ie+"ref"]||Ie,dt=m["a"+Ie+"ref"],Dt={x:T,y:_}[Ie],Yt=(G+(Ie==="x"?0:-90))*Math.PI/180,kt=Ge*Math.cos(Yt),Ft=_e*Math.sin(Yt),Nt=Math.abs(kt)+Math.abs(Ft),Lt=m[Ie+"anchor"],St=m[Ie+"shift"]*(Ie==="x"?1:-1),it=F[Ie],ht,Qe,Ce,je,rt,ut=o.getRefType(Ve);if(Dt&&ut!=="domain"){var Pt=Dt.r2fraction(m[Ie]);(Pt<0||Pt>1)&&(dt===Ve?(Pt=Dt.r2fraction(m["a"+Ie]),(Pt<0||Pt>1)&&(Ye=!0)):Ye=!0),ht=Dt._offset+Dt.r2p(m[Ie]),je=.5}else{var Tt=ut==="domain";Ie==="x"?(Ce=m[Ie],ht=Tt?Dt._offset+Dt._length*Ce:ht=L.l+L.w*Ce):(Ce=1-m[Ie],ht=Tt?Dt._offset+Dt._length*Ce:ht=L.t+L.h*Ce),je=m.showarrow?.5:Ce}if(m.showarrow){it.head=ht;var Ot=m["a"+Ie];if(rt=kt*De(.5,m.xanchor)-Ft*De(.5,m.yanchor),dt===Ve){var Kt=o.getRefType(dt);Kt==="domain"?(Ie==="y"&&(Ot=1-Ot),it.tail=Dt._offset+Dt._length*Ot):Kt==="paper"?Ie==="y"?(Ot=1-Ot,it.tail=L.t+L.h*Ot):it.tail=L.l+L.w*Ot:it.tail=Dt._offset+Dt.r2p(Ot),Qe=rt}else it.tail=ht+Ot,Qe=rt+Ot;it.text=it.tail+rt;var Bt=f[Ie==="x"?"width":"height"];if(Ve==="paper"&&(it.head=w.constrain(it.head,1,Bt-1)),dt==="pixel"){var Zt=-Math.max(it.tail-3,it.text),Je=Math.min(it.tail+3,it.text)-Bt;Zt>0?(it.tail+=Zt,it.text+=Zt):Je>0&&(it.tail-=Je,it.text-=Je)}it.tail+=St,it.head+=St}else rt=Nt*De(je,Lt),Qe=rt,it.text=ht+rt;it.text+=St,rt+=St,Qe+=St,m["_"+Ie+"padplus"]=Nt/2+Qe,m["_"+Ie+"padminus"]=Nt/2-Qe,m["_"+Ie+"size"]=Nt,m["_"+Ie+"shift"]=rt}if(Ye){se.remove();return}var pt=0,Et=0;if(m.align!=="left"&&(pt=(Ne-ke)*(m.align==="center"?.5:1)),m.valign!=="top"&&(Et=(He-Ae)*(m.valign==="middle"?.5:1)),ge)he.select("svg").attr({x:U+pt-1,y:U+Et}).call(r.setClipUrl,re?O:null,A);else{var ar=U+Et-me.top,vr=U+pt-me.left;ne.call(c.positionText,vr,ar).call(r.setClipUrl,re?O:null,A)}ee.select("rect").call(r.setRect,U,U,Ne,He),V.call(r.setRect,le/2,le/2,Ge-le,_e-le),se.call(r.setTranslate,Math.round(F.x.text-Ge/2),Math.round(F.y.text-_e/2)),q.attr({transform:"rotate("+G+","+F.x.text+","+F.y.text+")"});var ir=function(Pr,Sr){W.selectAll(".annotation-arrow-g").remove();var tr=F.x.head,Nr=F.y.head,et=F.x.tail+Pr,we=F.y.tail+Sr,Me=F.x.text+Pr,Re=F.y.text+Sr,Xe=w.rotationXYMatrix(G,Me,Re),$e=w.apply2DTransform(Xe),ot=w.apply2DTransform2(Xe),st=+V.attr("width"),yt=+V.attr("height"),wt=Me-.5*st,Vt=wt+st,gr=Re-.5*yt,wr=gr+yt,Lr=[[wt,gr,wt,wr],[wt,wr,Vt,wr],[Vt,wr,Vt,gr],[Vt,gr,wt,gr]].map(ot);if(!Lr.reduce(function(at,zt){return at^!!w.segmentsIntersect(tr,Nr,tr+1e6,Nr+1e6,zt[0],zt[1],zt[2],zt[3])},!1)){Lr.forEach(function(at){var zt=w.segmentsIntersect(et,we,tr,Nr,at[0],at[1],at[2],at[3]);zt&&(et=zt.x,we=zt.y)});var fr=m.arrowwidth,Fr=m.arrowcolor,nn=m.arrowside,yr=W.append("g").style({opacity:a.opacity(Fr)}).classed("annotation-arrow-g",!0),_r=yr.append("path").attr("d","M"+et+","+we+"L"+tr+","+Nr).style("stroke-width",fr+"px").call(a.stroke,a.rgb(Fr));if(u(_r,nn,m),S.annotationPosition&&_r.node().parentNode&&!x){var dn=tr,Yr=Nr;if(m.standoff){var Ar=Math.sqrt(Math.pow(tr-et,2)+Math.pow(Nr-we,2));dn+=m.standoff*(et-tr)/Ar,Yr+=m.standoff*(we-Nr)/Ar}var an=yr.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(et-dn)+","+(we-Yr),transform:e(dn,Yr)}).style("stroke-width",fr+6+"px").call(a.stroke,"rgba(0,0,0,0)").call(a.fill,"rgba(0,0,0,0)"),rn,Zr;i.init({element:an.node(),gd:A,prepFn:function(){var at=r.getTranslate(se);rn=at.x,Zr=at.y,T&&T.autorange&&I(T._name+".autorange",!0),_&&_.autorange&&I(_._name+".autorange",!0)},moveFn:function(at,zt){var er=$e(rn,Zr),hr=er[0]+at,Vr=er[1]+zt;se.call(r.setTranslate,hr,Vr),R("x",y(T,at,"x",L,m)),R("y",y(_,zt,"y",L,m)),m.axref===m.xref&&R("ax",y(T,at,"ax",L,m)),m.ayref===m.yref&&R("ay",y(_,zt,"ay",L,m)),yr.attr("transform",e(at,zt)),q.attr({transform:"rotate("+G+","+hr+","+Vr+")"})},doneFn:function(){l.call("_guiRelayout",A,D());var at=document.querySelector(".js-notes-box-panel");at&&at.redraw(at.selectedObj)}})}}};if(m.showarrow&&ir(0,0),J){var dr;i.init({element:se.node(),gd:A,prepFn:function(){dr=q.attr("transform")},moveFn:function(Pr,Sr){var tr="pointer";if(m.showarrow)m.axref===m.xref?R("ax",y(T,Pr,"ax",L,m)):R("ax",m.ax+Pr),m.ayref===m.yref?R("ay",y(_,Sr,"ay",L.w,m)):R("ay",m.ay+Sr),ir(Pr,Sr);else{if(x)return;var Nr,et;if(T)Nr=y(T,Pr,"x",L,m);else{var we=m._xsize/L.w,Me=m.x+(m._xshift-m.xshift)/L.w-we/2;Nr=i.align(Me+Pr/L.w,we,0,1,m.xanchor)}if(_)et=y(_,Sr,"y",L,m);else{var Re=m._ysize/L.h,Xe=m.y-(m._yshift+m.yshift)/L.h-Re/2;et=i.align(Xe-Sr/L.h,Re,0,1,m.yanchor)}R("x",Nr),R("y",et),(!T||!_)&&(tr=i.getCursor(T?.5:Nr,_?.5:et,m.xanchor,m.yanchor))}q.attr({transform:e(Pr,Sr)+dr}),s(se,tr)},clickFn:function(Pr,Sr){m.captureevents&&A.emit("plotly_clickannotation",Z(Sr))},doneFn:function(){s(se),l.call("_guiRelayout",A,D());var Pr=document.querySelector(".js-notes-box-panel");Pr&&Pr.redraw(Pr.selectedObj)}})}}S.annotationText?ne.call(c.makeEditable,{delegate:se,gd:A}).call(ae).on("edit",function(ue){m.text=ue,this.call(ae),R("text",ue),T&&T.autorange&&I(T._name+".autorange",!0),_&&_.autorange&&I(_._name+".autorange",!0),l.call("_guiRelayout",A,D())}):ne.call(ae)}},{"../../lib":503,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/cartesian/axes":554,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../fx":406,"./draw_arrow_head":356,"@plotly/d3":58}],356:[function(t,B,H){var d=t("@plotly/d3"),l=t("../color"),b=t("./arrow_paths"),w=t("../../lib"),e=w.strScale,o=w.strRotate,a=w.strTranslate;B.exports=function(n,c,s){var i=n.node(),v=b[s.arrowhead||0],u=b[s.startarrowhead||0],g=(s.arrowwidth||1)*(s.arrowsize||1),h=(s.arrowwidth||1)*(s.startarrowsize||1),y=c.indexOf("start")>=0,p=c.indexOf("end")>=0,A=v.backoff*g+s.standoff,m=u.backoff*h+s.startstandoff,M,x,T,_;if(i.nodeName==="line"){M={x:+n.attr("x1"),y:+n.attr("y1")},x={x:+n.attr("x2"),y:+n.attr("y2")};var f=M.x-x.x,L=M.y-x.y;if(T=Math.atan2(L,f),_=T+Math.PI,A&&m&&A+m>Math.sqrt(f*f+L*L)){q();return}if(A){if(A*A>f*f+L*L){q();return}var S=A*Math.cos(T),k=A*Math.sin(T);x.x+=S,x.y+=k,n.attr({x2:x.x,y2:x.y})}if(m){if(m*m>f*f+L*L){q();return}var P=m*Math.cos(T),z=m*Math.sin(T);M.x-=P,M.y-=z,n.attr({x1:M.x,y1:M.y})}}else if(i.nodeName==="path"){var I=i.getTotalLength(),R="";if(I<A+m){q();return}var D=i.getPointAtLength(0),O=i.getPointAtLength(.1);T=Math.atan2(D.y-O.y,D.x-O.x),M=i.getPointAtLength(Math.min(m,I)),R="0px,"+m+"px,";var F=i.getPointAtLength(I),G=i.getPointAtLength(I-.1);_=Math.atan2(F.y-G.y,F.x-G.x),x=i.getPointAtLength(Math.max(0,I-A));var W=R?m+A:A;R+=I-W+"px,"+I+"px",n.style("stroke-dasharray",R)}function q(){n.style("stroke-dasharray","0px,100px")}function J(X,Z,se,le){!X.path||(X.noRotate&&(se=0),d.select(i.parentNode).append("path").attr({class:n.attr("class"),d:X.path,transform:a(Z.x,Z.y)+o(se*180/Math.PI)+e(le)}).style({fill:l.rgb(s.arrowcolor),"stroke-width":0}))}y&&J(u,M,T,h),p&&J(v,x,_,g)}},{"../../lib":503,"../color":366,"./arrow_paths":348,"@plotly/d3":58}],357:[function(t,B,H){var d=t("./draw"),l=t("./click");B.exports={moduleType:"component",name:"annotations",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("annotations"),calcAutorange:t("./calc_autorange"),draw:d.draw,drawOne:d.drawOne,drawRaw:d.drawRaw,hasClickToShow:l.hasClickToShow,onClick:l.onClick,convertCoords:t("./convert_coords")}},{"../../plots/cartesian/include_components":567,"./attributes":349,"./calc_autorange":350,"./click":351,"./convert_coords":353,"./defaults":354,"./draw":355}],358:[function(t,B,H){var d=t("../annotations/attributes"),l=t("../../plot_api/edit_types").overrideAll,b=t("../../plot_api/plot_template").templatedArray;B.exports=l(b("annotation",{visible:d.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:d.xanchor,xshift:d.xshift,yanchor:d.yanchor,yshift:d.yshift,text:d.text,textangle:d.textangle,font:d.font,width:d.width,height:d.height,opacity:d.opacity,align:d.align,valign:d.valign,bgcolor:d.bgcolor,bordercolor:d.bordercolor,borderpad:d.borderpad,borderwidth:d.borderwidth,showarrow:d.showarrow,arrowcolor:d.arrowcolor,arrowhead:d.arrowhead,startarrowhead:d.startarrowhead,arrowside:d.arrowside,arrowsize:d.arrowsize,startarrowsize:d.startarrowsize,arrowwidth:d.arrowwidth,standoff:d.standoff,startstandoff:d.startstandoff,hovertext:d.hovertext,hoverlabel:d.hoverlabel,captureevents:d.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../annotations/attributes":349}],359:[function(t,B,H){var d=t("../../lib"),l=t("../../plots/cartesian/axes");B.exports=function(e){for(var o=e.fullSceneLayout,a=o.annotations,r=0;r<a.length;r++)b(a[r],e);e.fullLayout._infolayer.selectAll(".annotation-"+e.id).remove()};function b(w,e){var o=e.fullSceneLayout,a=o.domain,r=e.fullLayout._size,n={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};w._xa={},d.extendFlat(w._xa,n),l.setConvert(w._xa),w._xa._offset=r.l+a.x[0]*r.w,w._xa.l2p=function(){return .5*(1+w._pdata[0]/w._pdata[3])*r.w*(a.x[1]-a.x[0])},w._ya={},d.extendFlat(w._ya,n),l.setConvert(w._ya),w._ya._offset=r.t+(1-a.y[1])*r.h,w._ya.l2p=function(){return .5*(1-w._pdata[1]/w._pdata[3])*r.h*(a.y[1]-a.y[0])}}},{"../../lib":503,"../../plots/cartesian/axes":554}],360:[function(t,B,H){var d=t("../../lib"),l=t("../../plots/cartesian/axes"),b=t("../../plots/array_container_defaults"),w=t("../annotations/common_defaults"),e=t("./attributes");B.exports=function(r,n,c){b(r,n,{name:"annotations",handleItemDefaults:o,fullLayout:c.fullLayout})};function o(a,r,n,c){function s(u,g){return d.coerce(a,r,e,u,g)}function i(u){var g=u+"axis",h={_fullLayout:{}};return h._fullLayout[g]=n[g],l.coercePosition(r,h,s,u,u,.5)}var v=s("visible");!v||(w(a,r,c.fullLayout,s),i("x"),i("y"),i("z"),d.noneOrAll(a,r,["x","y","z"]),r.xref="x",r.yref="y",r.zref="z",s("xanchor"),s("yanchor"),s("xshift"),s("yshift"),r.showarrow&&(r.axref="pixel",r.ayref="pixel",s("ax",-10),s("ay",-30),d.noneOrAll(a,r,["ax","ay"])))}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"../annotations/common_defaults":352,"./attributes":358}],361:[function(t,B,H){var d=t("../annotations/draw").drawRaw,l=t("../../plots/gl3d/project"),b=["x","y","z"];B.exports=function(e){for(var o=e.fullSceneLayout,a=e.dataScale,r=o.annotations,n=0;n<r.length;n++){for(var c=r[n],s=!1,i=0;i<3;i++){var v=b[i],u=c[v],g=o[v+"axis"],h=g.r2fraction(u);if(h<0||h>1){s=!0;break}}s?e.fullLayout._infolayer.select(".annotation-"+e.id+'[data-index="'+n+'"]').remove():(c._pdata=l(e.glplot.cameraParams,[o.xaxis.r2l(c.x)*a[0],o.yaxis.r2l(c.y)*a[1],o.zaxis.r2l(c.z)*a[2]]),d(e.graphDiv,c,n,e.id,c._xa,c._ya))}}},{"../../plots/gl3d/project":607,"../annotations/draw":355}],362:[function(t,B,H){var d=t("../../registry"),l=t("../../lib");B.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:t("./attributes")}}},layoutAttributes:t("./attributes"),handleDefaults:t("./defaults"),includeBasePlot:b,convert:t("./convert"),draw:t("./draw")};function b(w,e){var o=d.subplotsRegistry.gl3d;if(!!o)for(var a=o.attrRegex,r=Object.keys(w),n=0;n<r.length;n++){var c=r[n];a.test(c)&&(w[c].annotations||[]).length&&(l.pushUnique(e._basePlotModules,o),l.pushUnique(e._subplots.gl3d,c))}}},{"../../lib":503,"../../registry":638,"./attributes":358,"./convert":359,"./defaults":360,"./draw":361}],363:[function(t,B,H){B.exports=t("world-calendars/dist/main"),t("world-calendars/dist/plus"),t("world-calendars/dist/calendars/chinese"),t("world-calendars/dist/calendars/coptic"),t("world-calendars/dist/calendars/discworld"),t("world-calendars/dist/calendars/ethiopian"),t("world-calendars/dist/calendars/hebrew"),t("world-calendars/dist/calendars/islamic"),t("world-calendars/dist/calendars/julian"),t("world-calendars/dist/calendars/mayan"),t("world-calendars/dist/calendars/nanakshahi"),t("world-calendars/dist/calendars/nepali"),t("world-calendars/dist/calendars/persian"),t("world-calendars/dist/calendars/taiwan"),t("world-calendars/dist/calendars/thai"),t("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":332,"world-calendars/dist/calendars/coptic":333,"world-calendars/dist/calendars/discworld":334,"world-calendars/dist/calendars/ethiopian":335,"world-calendars/dist/calendars/hebrew":336,"world-calendars/dist/calendars/islamic":337,"world-calendars/dist/calendars/julian":338,"world-calendars/dist/calendars/mayan":339,"world-calendars/dist/calendars/nanakshahi":340,"world-calendars/dist/calendars/nepali":341,"world-calendars/dist/calendars/persian":342,"world-calendars/dist/calendars/taiwan":343,"world-calendars/dist/calendars/thai":344,"world-calendars/dist/calendars/ummalqura":345,"world-calendars/dist/main":346,"world-calendars/dist/plus":347}],364:[function(t,B,H){var d=t("./calendars"),l=t("../../lib"),b=t("../../constants/numerical"),w=b.EPOCHJD,e=b.ONEDAY,o={valType:"enumerated",values:l.sortObjectKeys(d.calendars),editType:"calc",dflt:"gregorian"},a=function(T,_,f,L){var S={};return S[f]=o,l.coerce(T,_,S,f,L)},r=function(T,_,f,L){for(var S=0;S<f.length;S++)a(T,_,f[S]+"calendar",L.calendar)},n={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},c={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},s={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},i="##",v={d:{"0":"dd","-":"d"},e:{"0":"d","-":"d"},a:{"0":"D","-":"D"},A:{"0":"DD","-":"DD"},j:{"0":"oo","-":"o"},W:{"0":"ww","-":"w"},m:{"0":"mm","-":"m"},b:{"0":"M","-":"M"},B:{"0":"MM","-":"MM"},y:{"0":"yy","-":"yy"},Y:{"0":"yyyy","-":"yyyy"},U:i,w:i,c:{"0":"D M d %X yyyy","-":"D M d %X yyyy"},x:{"0":"mm/dd/yyyy","-":"mm/dd/yyyy"}};function u(T,_,f){for(var L=Math.floor((_+.05)/e)+w,S=h(f).fromJD(L),k=0,P,z,I,R,D;(k=T.indexOf("%",k))!==-1;)P=T.charAt(k+1),P==="0"||P==="-"||P==="_"?(I=3,z=T.charAt(k+2),P==="_"&&(P="-")):(z=P,P="0",I=2),R=v[z],R?(R===i?D=i:D=S.formatDate(R[P]),T=T.substr(0,k)+D+T.substr(k+I),k+=D.length):k+=I;return T}var g={};function h(T){var _=g[T];return _||(_=g[T]=d.instance(T),_)}function y(T){return l.extendFlat({},o,{description:T})}function p(T){return"Sets the calendar system to use with `"+T+"` date data."}var A={xcalendar:y(p("x"))},m=l.extendFlat({},A,{ycalendar:y(p("y"))}),M=l.extendFlat({},m,{zcalendar:y(p("z"))}),x=y(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));B.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:m,bar:m,box:m,heatmap:m,contour:m,histogram:m,histogram2d:m,histogram2dcontour:m,scatter3d:M,surface:M,mesh3d:M,scattergl:m,ohlc:A,candlestick:A},layout:{calendar:y(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:x},yaxis:{calendar:x},scene:{xaxis:{calendar:x},yaxis:{calendar:x},zaxis:{calendar:x}},polar:{radialaxis:{calendar:x}}},transforms:{filter:{valuecalendar:y(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:y(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:o,handleDefaults:a,handleTraceDefaults:r,CANONICAL_SUNDAY:c,CANONICAL_TICK:n,DFLTRANGE:s,getCal:h,worldCalFmt:u}},{"../../constants/numerical":479,"../../lib":503,"./calendars":363}],365:[function(t,B,H){H.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],H.defaultLine="#444",H.lightLine="#eee",H.background="#fff",H.borderLine="#BEC8D9",H.lightFraction=100*(14-4)/(15-4)},{}],366:[function(t,B,H){var d=t("tinycolor2"),l=t("fast-isnumeric"),b=t("../../lib/array").isTypedArray,w=B.exports={},e=t("./attributes");w.defaults=e.defaults;var o=w.defaultLine=e.defaultLine;w.lightLine=e.lightLine;var a=w.background=e.background;w.tinyRGB=function(n){var c=n.toRgb();return"rgb("+Math.round(c.r)+", "+Math.round(c.g)+", "+Math.round(c.b)+")"},w.rgb=function(n){return w.tinyRGB(d(n))},w.opacity=function(n){return n?d(n).getAlpha():0},w.addOpacity=function(n,c){var s=d(n).toRgb();return"rgba("+Math.round(s.r)+", "+Math.round(s.g)+", "+Math.round(s.b)+", "+c+")"},w.combine=function(n,c){var s=d(n).toRgb();if(s.a===1)return d(n).toRgbString();var i=d(c||a).toRgb(),v=i.a===1?i:{r:255*(1-i.a)+i.r*i.a,g:255*(1-i.a)+i.g*i.a,b:255*(1-i.a)+i.b*i.a},u={r:v.r*(1-s.a)+s.r*s.a,g:v.g*(1-s.a)+s.g*s.a,b:v.b*(1-s.a)+s.b*s.a};return d(u).toRgbString()},w.contrast=function(n,c,s){var i=d(n);i.getAlpha()!==1&&(i=d(w.combine(n,a)));var v=i.isDark()?c?i.lighten(c):a:s?i.darken(s):o;return v.toString()},w.stroke=function(n,c){var s=d(c);n.style({stroke:w.tinyRGB(s),"stroke-opacity":s.getAlpha()})},w.fill=function(n,c){var s=d(c);n.style({fill:w.tinyRGB(s),"fill-opacity":s.getAlpha()})},w.clean=function(n){if(!(!n||typeof n!="object")){var c=Object.keys(n),s,i,v,u;for(s=0;s<c.length;s++)if(v=c[s],u=n[v],v.substr(v.length-5)==="color")if(Array.isArray(u))for(i=0;i<u.length;i++)u[i]=r(u[i]);else n[v]=r(u);else if(v.substr(v.length-10)==="colorscale"&&Array.isArray(u))for(i=0;i<u.length;i++)Array.isArray(u[i])&&(u[i][1]=r(u[i][1]));else if(Array.isArray(u)){var g=u[0];if(!Array.isArray(g)&&g&&typeof g=="object")for(i=0;i<u.length;i++)w.clean(u[i])}else u&&typeof u=="object"&&!b(u)&&w.clean(u)}};function r(n){if(l(n)||typeof n!="string")return n;var c=n.trim();if(c.substr(0,3)!=="rgb")return n;var s=c.match(/^rgba?\s*\(([^()]*)\)$/);if(!s)return n;var i=s[1].trim().split(/\s*[\s,]\s*/),v=c.charAt(3)==="a"&&i.length===4;if(!v&&i.length!==3)return n;for(var u=0;u<i.length;u++){if(!i[u].length||(i[u]=Number(i[u]),!(i[u]>=0)))return n;if(u===3)i[u]>1&&(i[u]=1);else if(i[u]>=1)return n}var g=Math.round(i[0]*255)+", "+Math.round(i[1]*255)+", "+Math.round(i[2]*255);return v?"rgba("+g+", "+i[3]+")":"rgb("+g+")"}},{"../../lib/array":485,"./attributes":365,"fast-isnumeric":190,tinycolor2:312}],367:[function(t,B,H){var d=t("../../plots/cartesian/layout_attributes"),l=t("../../plots/font_attributes"),b=t("../../lib/extend").extendFlat,w=t("../../plot_api/edit_types").overrideAll;B.exports=w({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:d.linecolor,outlinewidth:d.linewidth,bordercolor:d.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:d.tickmode,nticks:d.nticks,tick0:d.tick0,dtick:d.dtick,tickvals:d.tickvals,ticktext:d.ticktext,ticks:b({},d.ticks,{dflt:""}),ticklabeloverflow:b({},d.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:d.ticklen,tickwidth:d.tickwidth,tickcolor:d.tickcolor,ticklabelstep:d.ticklabelstep,showticklabels:d.showticklabels,tickfont:l({}),tickangle:d.tickangle,tickformat:d.tickformat,tickformatstops:d.tickformatstops,tickprefix:d.tickprefix,showtickprefix:d.showtickprefix,ticksuffix:d.ticksuffix,showticksuffix:d.showticksuffix,separatethousands:d.separatethousands,exponentformat:d.exponentformat,minexponent:d.minexponent,showexponent:d.showexponent,title:{text:{valType:"string"},font:l({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:l({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/layout_attributes":569,"../../plots/font_attributes":585}],368:[function(t,B,H){B.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],369:[function(t,B,H){var d=t("../../lib"),l=t("../../plot_api/plot_template"),b=t("../../plots/cartesian/tick_value_defaults"),w=t("../../plots/cartesian/tick_mark_defaults"),e=t("../../plots/cartesian/tick_label_defaults"),o=t("../../plots/cartesian/prefix_suffix_defaults"),a=t("./attributes");B.exports=function(n,c,s){var i=l.newContainer(c,"colorbar"),v=n.colorbar||{};function u(S,k){return d.coerce(v,i,a,S,k)}var g=s.margin||{t:0,b:0,l:0,r:0},h=s.width-g.l-g.r,y=s.height-g.t-g.b,p=u("orientation"),A=p==="v",m=u("thicknessmode");u("thickness",m==="fraction"?30/(A?h:y):30);var M=u("lenmode");u("len",M==="fraction"?1:A?y:h),u("x",A?1.02:.5),u("xanchor",A?"left":"center"),u("xpad"),u("y",A?.5:1.02),u("yanchor",A?"middle":"bottom"),u("ypad"),d.noneOrAll(v,i,["x","y"]),u("outlinecolor"),u("outlinewidth"),u("bordercolor"),u("borderwidth"),u("bgcolor");var x=d.coerce(v,i,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:A?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");u("ticklabeloverflow",x.indexOf("inside")!==-1?"hide past domain":"hide past div"),b(v,i,u,"linear");var T=s.font,_={outerTicks:!1,font:T};x.indexOf("inside")!==-1&&(_.bgColor="black"),o(v,i,u,"linear",_),e(v,i,u,"linear",_),w(v,i,u,"linear",_),u("title.text",s._dfltTitle.colorbar);var f=i.tickfont,L=d.extendFlat({},f,{color:T.color,size:d.bigFont(f.size)});d.coerceFont(u,"title.font",L),u("title.side",A?"top":"right")}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_mark_defaults":579,"../../plots/cartesian/tick_value_defaults":580,"./attributes":367}],370:[function(t,B,H){var d=t("@plotly/d3"),l=t("tinycolor2"),b=t("../../plots/plots"),w=t("../../registry"),e=t("../../plots/cartesian/axes"),o=t("../dragelement"),a=t("../../lib"),r=a.strTranslate,n=t("../../lib/extend").extendFlat,c=t("../../lib/setcursor"),s=t("../drawing"),i=t("../color"),v=t("../titles"),u=t("../../lib/svg_text_utils"),g=t("../colorscale/helpers").flipScale,h=t("../../plots/cartesian/axis_defaults"),y=t("../../plots/cartesian/position_defaults"),p=t("../../plots/cartesian/layout_attributes"),A=t("../../constants/alignment"),m=A.LINE_SPACING,M=A.FROM_TL,x=A.FROM_BR,T=t("./constants").cn;function _(z){var I=z._fullLayout,R=I._infolayer.selectAll("g."+T.colorbar).data(f(z),function(D){return D._id});R.enter().append("g").attr("class",function(D){return D._id}).classed(T.colorbar,!0),R.each(function(D){var O=d.select(this);a.ensureSingle(O,"rect",T.cbbg),a.ensureSingle(O,"g",T.cbfills),a.ensureSingle(O,"g",T.cblines),a.ensureSingle(O,"g",T.cbaxis,function(G){G.classed(T.crisp,!0)}),a.ensureSingle(O,"g",T.cbtitleunshift,function(G){G.append("g").classed(T.cbtitle,!0)}),a.ensureSingle(O,"rect",T.cboutline);var F=L(O,D,z);F&&F.then&&(z._promises||[]).push(F),z._context.edits.colorbarPosition&&S(O,D,z)}),R.exit().each(function(D){b.autoMargin(z,D._id)}).remove(),R.order()}function f(z){var I=z._fullLayout,R=z.calcdata,D=[],O,F,G,W;function q(j){return n(j,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function J(){typeof W.calc=="function"?W.calc(z,G,O):(O._fillgradient=F.reversescale?g(F.colorscale):F.colorscale,O._zrange=[F[W.min],F[W.max]])}for(var X=0;X<R.length;X++){var Z=R[X];G=Z[0].trace;var se=G._module.colorbar;if(G.visible===!0&&se)for(var le=Array.isArray(se),oe=le?se:[se],U=0;U<oe.length;U++){W=oe[U];var V=W.container;F=V?G[V]:G,F&&F.showscale&&(O=q(F.colorbar),O._id="cb"+G.uid+(le&&V?"-"+V:""),O._traceIndex=G.index,O._propPrefix=(V?V+".":"")+"colorbar.",O._meta=G._meta,J(),D.push(O))}}for(var re in I._colorAxes)if(F=I[re],F.showscale){var ee=I._colorAxes[re];O=q(F.colorbar),O._id="cb"+re,O._propPrefix=re+".colorbar.",O._meta=I._meta,W={min:"cmin",max:"cmax"},ee[0]!=="heatmap"&&(G=ee[1],W.calc=G._module.colorbar.calc),J(),D.push(O)}return D}function L(z,I,R){var D=I.orientation==="v",O=I.len,F=I.lenmode,G=I.thickness,W=I.thicknessmode,q=I.outlinewidth,J=I.borderwidth,X=I.bgcolor,Z=I.xanchor,se=I.yanchor,le=I.xpad,oe=I.ypad,U=I.x,V=D?I.y:1-I.y,re=R._fullLayout,ee=re._size,j=I._fillcolor,Q=I._line,ne=I.title,ae=ne.side,ie=I._zrange||d.extent((typeof j=="function"?j:Q.color).domain()),ue=typeof Q.color=="function"?Q.color:function(){return Q.color},xe=typeof j=="function"?j:function(){return j},he=I._levels,ge=k(R,I,ie),me=ge.fill,ke=ge.line,Ae=Math.round(G*(W==="fraction"?D?ee.w:ee.h:1)),Ne=Ae/(D?ee.w:ee.h),He=Math.round(O*(F==="fraction"?D?ee.h:ee.w:1)),Ge=He/(D?ee.h:ee.w),_e=Math.round(D?U*ee.w+le:V*ee.h+oe),De={center:.5,right:1}[Z]||0,Ye={top:1,middle:.5}[se]||0,qe=D?U-De*Ne:V-Ye*Ne,Ue=D?V-Ye*Ge:U-De*Ge,Ie=Math.round(D?ee.h*(1-Ue):ee.w*Ue);I._lenFrac=Ge,I._thickFrac=Ne,I._uFrac=qe,I._vFrac=Ue;var Ve=I._axis=P(R,I,ie);Ve.position=Ne+(D?U+le/ee.w:V+oe/ee.h);var dt=["top","bottom"].indexOf(ae)!==-1;if(D&&dt&&(Ve.title.side=ae,Ve.titlex=U+le/ee.w,Ve.titley=Ue+(ne.side==="top"?Ge-oe/ee.h:oe/ee.h)),!D&&!dt&&(Ve.title.side=ae,Ve.titley=V+oe/ee.h,Ve.titlex=Ue+le/ee.w),Q.color&&I.tickmode==="auto"){Ve.tickmode="linear",Ve.tick0=he.start;var Dt=he.size,Yt=a.constrain(He/50,4,15)+1,kt=(ie[1]-ie[0])/((I.nticks||Yt)*Dt);if(kt>1){var Ft=Math.pow(10,Math.floor(Math.log(kt)/Math.LN10));Dt*=Ft*a.roundUp(kt/Ft,[2,5,10]),(Math.abs(he.start)/he.size+1e-6)%1<2e-6&&(Ve.tick0=0)}Ve.dtick=Dt}Ve.domain=D?[Ue+oe/ee.h,Ue+Ge-oe/ee.h]:[Ue+le/ee.w,Ue+Ge-le/ee.w],Ve.setScale(),z.attr("transform",r(Math.round(ee.l),Math.round(ee.t)));var Nt=z.select("."+T.cbtitleunshift).attr("transform",r(-Math.round(ee.l),-Math.round(ee.t))),Lt=Ve.ticklabelposition,St=Ve.title.font.size,it=z.select("."+T.cbaxis),ht,Qe=0,Ce=0;function je(Ot,Kt){var Bt={propContainer:Ve,propName:I._propPrefix+"title",traceIndex:I._traceIndex,_meta:I._meta,placeholder:re._dfltTitle.colorbar,containerGroup:z.select("."+T.cbtitle)},Zt=Ot.charAt(0)==="h"?Ot.substr(1):"h"+Ot;z.selectAll("."+Zt+",."+Zt+"-math-group").remove(),v.draw(R,Ot,n(Bt,Kt||{}))}function rt(){if(D&&dt||!D&&!dt){var Ot,Kt;ae==="top"&&(Ot=le+ee.l+ee.w*U,Kt=oe+ee.t+ee.h*(1-Ue-Ge)+3+St*.75),ae==="bottom"&&(Ot=le+ee.l+ee.w*U,Kt=oe+ee.t+ee.h*(1-Ue)-3-St*.25),ae==="right"&&(Kt=oe+ee.t+ee.h*V+3+St*.75,Ot=le+ee.l+ee.w*Ue),je(Ve._id+"title",{attributes:{x:Ot,y:Kt,"text-anchor":D?"start":"middle"}})}}function ut(){if(D&&!dt||!D&&dt){var Ot=Ve.position||0,Kt=Ve._offset+Ve._length/2,Bt,Zt;if(ae==="right")Zt=Kt,Bt=ee.l+ee.w*Ot+10+St*(Ve.showticklabels?1:.5);else if(Bt=Kt,ae==="bottom"&&(Zt=ee.t+ee.h*Ot+10+(Lt.indexOf("inside")===-1?Ve.tickfont.size:0)+(Ve.ticks!=="intside"&&I.ticklen||0)),ae==="top"){var Je=ne.text.split("<br>").length;Zt=ee.t+ee.h*Ot+10-Ae-m*St*Je}je((D?"h":"v")+Ve._id+"title",{avoid:{selection:d.select(R).selectAll("g."+Ve._id+"tick"),side:ae,offsetTop:D?0:ee.t,offsetLeft:D?ee.l:0,maxShift:D?re.width:re.height},attributes:{x:Bt,y:Zt,"text-anchor":"middle"},transform:{rotate:D?-90:0,offset:0}})}}function Pt(){if(!D&&!dt||D&&dt){var Ot=z.select("."+T.cbtitle),Kt=Ot.select("text"),Bt=[-q/2,q/2],Zt=Ot.select(".h"+Ve._id+"title-math-group").node(),Je=15.6;Kt.node()&&(Je=parseInt(Kt.node().style.fontSize,10)*m);var pt;if(Zt?(pt=s.bBox(Zt),Ce=pt.width,Qe=pt.height,Qe>Je&&(Bt[1]-=(Qe-Je)/2)):Kt.node()&&!Kt.classed(T.jsPlaceholder)&&(pt=s.bBox(Kt.node()),Ce=pt.width,Qe=pt.height),D){if(Qe){if(Qe+=5,ae==="top")Ve.domain[1]-=Qe/ee.h,Bt[1]*=-1;else{Ve.domain[0]+=Qe/ee.h;var Et=u.lineCount(Kt);Bt[1]+=(1-Et)*Je}Ot.attr("transform",r(Bt[0],Bt[1])),Ve.setScale()}}else Ce&&(ae==="right"&&(Ve.domain[0]+=(Ce+St/2)/ee.w),Ot.attr("transform",r(Bt[0],Bt[1])),Ve.setScale())}z.selectAll("."+T.cbfills+",."+T.cblines).attr("transform",D?r(0,Math.round(ee.h*(1-Ve.domain[1]))):r(Math.round(ee.w*Ve.domain[0]),0)),it.attr("transform",D?r(0,Math.round(-ee.t)):r(Math.round(-ee.l),0));var ar=z.select("."+T.cbfills).selectAll("rect."+T.cbfill).attr("style","").data(me);ar.enter().append("rect").classed(T.cbfill,!0).style("stroke","none"),ar.exit().remove();var vr=ie.map(Ve.c2p).map(Math.round).sort(function(tr,Nr){return tr-Nr});ar.each(function(tr,Nr){var et=[Nr===0?ie[0]:(me[Nr]+me[Nr-1])/2,Nr===me.length-1?ie[1]:(me[Nr]+me[Nr+1])/2].map(Ve.c2p).map(Math.round);D&&(et[1]=a.constrain(et[1]+(et[1]>et[0])?1:-1,vr[0],vr[1]));var we=d.select(this).attr(D?"x":"y",_e).attr(D?"y":"x",d.min(et)).attr(D?"width":"height",Math.max(Ae,2)).attr(D?"height":"width",Math.max(d.max(et)-d.min(et),2));if(I._fillgradient)s.gradient(we,R,I._id,D?"vertical":"horizontalreversed",I._fillgradient,"fill");else{var Me=xe(tr).replace("e-","");we.attr("fill",l(Me).toHexString())}});var ir=z.select("."+T.cblines).selectAll("path."+T.cbline).data(Q.color&&Q.width?ke:[]);ir.enter().append("path").classed(T.cbline,!0),ir.exit().remove(),ir.each(function(tr){var Nr=_e,et=Math.round(Ve.c2p(tr))+Q.width/2%1;d.select(this).attr("d","M"+(D?Nr+","+et:et+","+Nr)+(D?"h":"v")+Ae).call(s.lineGroupStyle,Q.width,ue(tr),Q.dash)}),it.selectAll("g."+Ve._id+"tick,path").remove();var dr=_e+Ae+(q||0)/2-(I.ticks==="outside"?1:0),Pr=e.calcTicks(Ve),Sr=e.getTickSigns(Ve)[2];return e.drawTicks(R,Ve,{vals:Ve.ticks==="inside"?e.clipEnds(Ve,Pr):Pr,layer:it,path:e.makeTickPath(Ve,dr,Sr),transFn:e.makeTransTickFn(Ve)}),e.drawLabels(R,Ve,{vals:Pr,layer:it,transFn:e.makeTransTickLabelFn(Ve),labelFns:e.makeLabelFns(Ve,dr)})}function Tt(){var Ot,Kt=Ae+q/2;Lt.indexOf("inside")===-1&&(Ot=s.bBox(it.node()),Kt+=D?Ot.width:Ot.height),ht=Nt.select("text");var Bt=0,Zt=D&&ae==="top",Je=!D&&ae==="right",pt=0;if(ht.node()&&!ht.classed(T.jsPlaceholder)){var Et,ar=Nt.select(".h"+Ve._id+"title-math-group").node();ar&&(D&&dt||!D&&!dt)?(Ot=s.bBox(ar),Bt=Ot.width,Et=Ot.height):(Ot=s.bBox(Nt.node()),Bt=Ot.right-ee.l-(D?_e:Ie),Et=Ot.bottom-ee.t-(D?Ie:_e),!D&&ae==="top"&&(Kt+=Ot.height,pt=Ot.height)),Je&&(ht.attr("transform",r(Bt/2+St/2,0)),Bt*=2),Kt=Math.max(Kt,D?Bt:Et)}var vr=(D?le:oe)*2+Kt+J+q/2,ir=0;!D&&ne.text&&se==="bottom"&&V<=0&&(ir=vr/2,vr+=ir,pt+=ir),re._hColorbarMoveTitle=ir,re._hColorbarMoveCBTitle=pt;var dr=J+q;z.select("."+T.cbbg).attr("x",(D?_e:Ie)-dr/2-(D?le:0)).attr("y",(D?Ie:_e)-(D?He:oe+pt-ir)).attr(D?"width":"height",Math.max(vr-ir,2)).attr(D?"height":"width",Math.max(He+dr,2)).call(i.fill,X).call(i.stroke,I.bordercolor).style("stroke-width",J);var Pr=Je?Math.max(Bt-10,0):0;if(z.selectAll("."+T.cboutline).attr("x",(D?_e:Ie+le)+Pr).attr("y",(D?Ie+oe-He:_e)+(Zt?Qe:0)).attr(D?"width":"height",Math.max(Ae,2)).attr(D?"height":"width",Math.max(He-(D?2*oe+Qe:2*le+Pr),2)).call(i.stroke,I.outlinecolor).style({fill:"none","stroke-width":q}),z.attr("transform",r(ee.l-(D?De*vr:0),ee.t-(D?0:(1-Ye)*vr-pt))),!D&&(J||l(X).getAlpha()&&!l.equals(re.paper_bgcolor,X))){var Sr=it.selectAll("text"),tr=Sr[0].length,Nr=z.select("."+T.cbbg).node(),et=s.bBox(Nr),we=s.getTranslate(z),Me=2;Sr.each(function(wt,Vt){var gr=0,wr=tr-1;if(Vt===gr||Vt===wr){var Lr=s.bBox(this),fr=s.getTranslate(this),Fr;if(Vt===wr){var nn=Lr.right+fr.x,yr=et.right+we.x+Ie-J-Me+U;Fr=yr-nn,Fr>0&&(Fr=0)}else if(Vt===gr){var _r=Lr.left+fr.x,dn=et.left+we.x+Ie+J+Me;Fr=dn-_r,Fr<0&&(Fr=0)}Fr&&(tr<3?this.setAttribute("transform","translate("+Fr+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Re={},Xe=M[Z],$e=x[Z],ot=M[se],st=x[se],yt=vr-Ae;D?(F==="pixels"?(Re.y=V,Re.t=He*ot,Re.b=He*st):(Re.t=Re.b=0,Re.yt=V+O*ot,Re.yb=V-O*st),W==="pixels"?(Re.x=U,Re.l=vr*Xe,Re.r=vr*$e):(Re.l=yt*Xe,Re.r=yt*$e,Re.xl=U-G*Xe,Re.xr=U+G*$e)):(F==="pixels"?(Re.x=U,Re.l=He*Xe,Re.r=He*$e):(Re.l=Re.r=0,Re.xl=U+O*Xe,Re.xr=U-O*$e),W==="pixels"?(Re.y=1-V,Re.t=vr*ot,Re.b=vr*st):(Re.t=yt*ot,Re.b=yt*st,Re.yt=V-G*ot,Re.yb=V+G*st)),b.autoMargin(R,I._id,Re)}return a.syncOrAsync([b.previousPromises,rt,Pt,ut,b.previousPromises,Tt],R)}function S(z,I,R){var D=I.orientation==="v",O=R._fullLayout,F=O._size,G,W,q;o.init({element:z.node(),gd:R,prepFn:function(){G=z.attr("transform"),c(z)},moveFn:function(J,X){z.attr("transform",G+r(J,X)),W=o.align((D?I._uFrac:I._vFrac)+J/F.w,D?I._thickFrac:I._lenFrac,0,1,I.xanchor),q=o.align((D?I._vFrac:1-I._uFrac)-X/F.h,D?I._lenFrac:I._thickFrac,0,1,I.yanchor);var Z=o.getCursor(W,q,I.xanchor,I.yanchor);c(z,Z)},doneFn:function(){if(c(z),W!==void 0&&q!==void 0){var J={};J[I._propPrefix+"x"]=W,J[I._propPrefix+"y"]=q,I._traceIndex!==void 0?w.call("_guiRestyle",R,J,I._traceIndex):w.call("_guiRelayout",R,J)}}})}function k(z,I,R){var D=I._levels,O=[],F=[],G,W,q=D.end+D.size/100,J=D.size,X=1.001*R[0]-.001*R[1],Z=1.001*R[1]-.001*R[0];for(W=0;W<1e5&&(G=D.start+W*J,!(J>0?G>=q:G<=q));W++)G>X&&G<Z&&O.push(G);if(I._fillgradient)F=[0];else if(typeof I._fillcolor=="function"){var se=I._filllevels;if(se)for(q=se.end+se.size/100,J=se.size,W=0;W<1e5&&(G=se.start+W*J,!(J>0?G>=q:G<=q));W++)G>R[0]&&G<R[1]&&F.push(G);else F=O.map(function(le){return le-D.size/2}),F.push(F[F.length-1]+D.size)}else I._fillcolor&&typeof I._fillcolor=="string"&&(F=[0]);return D.size<0&&(O.reverse(),F.reverse()),{line:O,fill:F}}function P(z,I,R){var D=z._fullLayout,O=I.orientation==="v",F={type:"linear",range:R,tickmode:I.tickmode,nticks:I.nticks,tick0:I.tick0,dtick:I.dtick,tickvals:I.tickvals,ticktext:I.ticktext,ticks:I.ticks,ticklen:I.ticklen,tickwidth:I.tickwidth,tickcolor:I.tickcolor,showticklabels:I.showticklabels,ticklabelposition:I.ticklabelposition,ticklabeloverflow:I.ticklabeloverflow,ticklabelstep:I.ticklabelstep,tickfont:I.tickfont,tickangle:I.tickangle,tickformat:I.tickformat,exponentformat:I.exponentformat,minexponent:I.minexponent,separatethousands:I.separatethousands,showexponent:I.showexponent,showtickprefix:I.showtickprefix,tickprefix:I.tickprefix,showticksuffix:I.showticksuffix,ticksuffix:I.ticksuffix,title:I.title,showline:!0,anchor:"free",side:O?"right":"bottom",position:1},G=O?"y":"x",W={type:"linear",_id:G+I._id},q={letter:G,font:D.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:D.calendar};function J(X,Z){return a.coerce(F,W,p,X,Z)}return h(F,W,J,q,D),y(F,W,J,q),W}B.exports={draw:_}},{"../../constants/alignment":471,"../../lib":503,"../../lib/extend":493,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_defaults":556,"../../plots/cartesian/layout_attributes":569,"../../plots/cartesian/position_defaults":572,"../../plots/plots":619,"../../registry":638,"../color":366,"../colorscale/helpers":377,"../dragelement":385,"../drawing":388,"../titles":464,"./constants":368,"@plotly/d3":58,tinycolor2:312}],371:[function(t,B,H){var d=t("../../lib");B.exports=function(b){return d.isPlainObject(b.colorbar)}},{"../../lib":503}],372:[function(t,B,H){B.exports={moduleType:"component",name:"colorbar",attributes:t("./attributes"),supplyDefaults:t("./defaults"),draw:t("./draw").draw,hasColorbar:t("./has_colorbar")}},{"./attributes":367,"./defaults":369,"./draw":370,"./has_colorbar":371}],373:[function(t,B,H){var d=t("../colorbar/attributes"),l=t("../../lib/regex").counter,b=t("../../lib/sort_object_keys"),w=t("./scales.js").scales;b(w),B.exports=function(o,a){o=o||"",a=a||{};var r=a.cLetter||"c";"onlyIfNumerical"in a?a.onlyIfNumerical:Boolean(o);var n="noScale"in a?a.noScale:o==="marker.line",c="showScaleDflt"in a?a.showScaleDflt:r==="z",s=typeof a.colorscaleDflt=="string"?w[a.colorscaleDflt]:null,i=a.editTypeOverride||"",v;"colorAttr"in a?v=a.colorAttr:v={z:"z",c:"color"}[r];var u=r+"auto",g=r+"min",h=r+"max",y=r+"mid",p={};p[g]=p[h]=void 0;var A={};A[u]=!1;var m={};return v==="color"&&(m.color={valType:"color",arrayOk:!0,editType:i||"style"},a.anim&&(m.color.anim=!0)),m[u]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:p},m[g]={valType:"number",dflt:null,editType:i||"plot",impliedEdits:A},m[h]={valType:"number",dflt:null,editType:i||"plot",impliedEdits:A},m[y]={valType:"number",dflt:null,editType:"calc",impliedEdits:p},m.colorscale={valType:"colorscale",editType:"calc",dflt:s,impliedEdits:{autocolorscale:!1}},m.autocolorscale={valType:"boolean",dflt:a.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},m.reversescale={valType:"boolean",dflt:!1,editType:"plot"},n||(m.showscale={valType:"boolean",dflt:c,editType:"calc"},m.colorbar=d),a.noColorAxis||(m.coloraxis={valType:"subplotid",regex:l("coloraxis"),dflt:null,editType:"calc"}),m}},{"../../lib/regex":520,"../../lib/sort_object_keys":526,"../colorbar/attributes":367,"./scales.js":381}],374:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../lib"),b=t("./helpers").extractOpts;B.exports=function(e,o,a){var r=e._fullLayout,n=a.vals,c=a.containerStr,s=c?l.nestedProperty(o,c).get():o,i=b(s),v=i.auto!==!1,u=i.min,g=i.max,h=i.mid,y=function(){return l.aggNums(Math.min,null,n)},p=function(){return l.aggNums(Math.max,null,n)};if(u===void 0?u=y():v&&(s._colorAx&&d(u)?u=Math.min(u,y()):u=y()),g===void 0?g=p():v&&(s._colorAx&&d(g)?g=Math.max(g,p()):g=p()),v&&h!==void 0&&(g-h>h-u?u=h-(g-h):g-h<h-u&&(g=h+(h-u))),u===g&&(u-=.5,g+=.5),i._sync("min",u),i._sync("max",g),i.autocolorscale){var A;u*g<0?A=r.colorscale.diverging:u>=0?A=r.colorscale.sequential:A=r.colorscale.sequentialminus,i._sync("colorscale",A)}}},{"../../lib":503,"./helpers":377,"fast-isnumeric":190}],375:[function(t,B,H){var d=t("../../lib"),l=t("./helpers").hasColorscale,b=t("./helpers").extractOpts;B.exports=function(e,o){function a(u,g){var h=u["_"+g];h!==void 0&&(u[g]=h)}function r(u,g){var h=g.container?d.nestedProperty(u,g.container).get():u;if(h)if(h.coloraxis)h._colorAx=o[h.coloraxis];else{var y=b(h),p=y.auto;(p||y.min===void 0)&&a(h,g.min),(p||y.max===void 0)&&a(h,g.max),y.autocolorscale&&a(h,"colorscale")}}for(var n=0;n<e.length;n++){var c=e[n],s=c._module.colorbar;if(s)if(Array.isArray(s))for(var i=0;i<s.length;i++)r(c,s[i]);else r(c,s);l(c,"marker.line")&&r(c,{container:"marker.line",min:"cmin",max:"cmax"})}for(var v in o._colorAxes)r(o[v],{min:"cmin",max:"cmax"})}},{"../../lib":503,"./helpers":377}],376:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../lib"),b=t("../colorbar/has_colorbar"),w=t("../colorbar/defaults"),e=t("./scales").isValid,o=t("../../registry").traceIs;function a(r,n){var c=n.slice(0,n.length-1);return n?l.nestedProperty(r,c).get()||{}:r}B.exports=function r(n,c,s,i,v){var u=v.prefix,g=v.cLetter,h="_module"in c,y=a(n,u),p=a(c,u),A=a(c._template||{},u)||{},m=function(){return delete n.coloraxis,delete c.coloraxis,r(n,c,s,i,v)};if(h){var M=s._colorAxes||{},x=i(u+"coloraxis");if(x){var T=o(c,"contour")&&l.nestedProperty(c,"contours.coloring").get()||"heatmap",_=M[x];_?(_[2].push(m),_[0]!==T&&(_[0]=!1,l.warn(["Ignoring coloraxis:",x,"setting","as it is linked to incompatible colorscales."].join(" ")))):M[x]=[T,c,[m]];return}}var f=y[g+"min"],L=y[g+"max"],S=d(f)&&d(L)&&f<L,k=i(u+g+"auto",!S);k?i(u+g+"mid"):(i(u+g+"min"),i(u+g+"max"));var P=y.colorscale,z=A.colorscale,I;if(P!==void 0&&(I=!e(P)),z!==void 0&&(I=!e(z)),i(u+"autocolorscale",I),i(u+"colorscale"),i(u+"reversescale"),u!=="marker.line."){var R;u&&h&&(R=b(y));var D=i(u+"showscale",R);D&&(u&&A&&(p._template=A),w(y,p,s))}}},{"../../lib":503,"../../registry":638,"../colorbar/defaults":369,"../colorbar/has_colorbar":371,"./scales":381,"fast-isnumeric":190}],377:[function(t,B,H){var d=t("@plotly/d3"),l=t("tinycolor2"),b=t("fast-isnumeric"),w=t("../../lib"),e=t("../color"),o=t("./scales").isValid;function a(h,y,p){var A=y?w.nestedProperty(h,y).get()||{}:h,m=A[p||"color"],M=!1;if(w.isArrayOrTypedArray(m)){for(var x=0;x<m.length;x++)if(b(m[x])){M=!0;break}}return w.isPlainObject(A)&&(M||A.showscale===!0||b(A.cmin)&&b(A.cmax)||o(A.colorscale)||w.isPlainObject(A.colorbar))}var r=["showscale","autocolorscale","colorscale","reversescale","colorbar"],n=["min","max","mid","auto"];function c(h){var y=h._colorAx,p=y||h,A={},m,M,x;for(M=0;M<r.length;M++)x=r[M],A[x]=p[x];if(y)for(m="c",M=0;M<n.length;M++)x=n[M],A[x]=p["c"+x];else{var T;for(M=0;M<n.length;M++){if(x=n[M],T="c"+x,T in p){A[x]=p[T];continue}T="z"+x,T in p&&(A[x]=p[T])}m=T.charAt(0)}return A._sync=function(_,f){var L=n.indexOf(_)!==-1?m+_:_;p[L]=p["_"+L]=f},A}function s(h){for(var y=c(h),p=y.min,A=y.max,m=y.reversescale?i(y.colorscale):y.colorscale,M=m.length,x=new Array(M),T=new Array(M),_=0;_<M;_++){var f=m[_];x[_]=p+f[0]*(A-p),T[_]=f[1]}return{domain:x,range:T}}function i(h){for(var y=h.length,p=new Array(y),A=y-1,m=0;A>=0;A--,m++){var M=h[A];p[m]=[1-M[0],M[1]]}return p}function v(h,y){y=y||{};for(var p=h.domain,A=h.range,m=A.length,M=new Array(m),x=0;x<m;x++){var T=l(A[x]).toRgb();M[x]=[T.r,T.g,T.b,T.a]}var _=d.scale.linear().domain(p).range(M).clamp(!0),f=y.noNumericCheck,L=y.returnArray,S;return f&&L?S=_:f?S=function(k){return g(_(k))}:L?S=function(k){return b(k)?_(k):l(k).isValid()?k:e.defaultLine}:S=function(k){return b(k)?g(_(k)):l(k).isValid()?k:e.defaultLine},S.domain=_.domain,S.range=function(){return A},S}function u(h,y){return v(s(h),y)}function g(h){var y={r:h[0],g:h[1],b:h[2],a:h[3]};return l(y).toRgbString()}B.exports={hasColorscale:a,extractOpts:c,extractScale:s,flipScale:i,makeColorScaleFunc:v,makeColorScaleFuncFromTrace:u}},{"../../lib":503,"../color":366,"./scales":381,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],378:[function(t,B,H){var d=t("./scales"),l=t("./helpers");B.exports={moduleType:"component",name:"colorscale",attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyLayoutDefaults:t("./layout_defaults"),handleDefaults:t("./defaults"),crossTraceDefaults:t("./cross_trace_defaults"),calc:t("./calc"),scales:d.scales,defaultScale:d.defaultScale,getScale:d.get,isValidScale:d.isValid,hasColorscale:l.hasColorscale,extractOpts:l.extractOpts,extractScale:l.extractScale,flipScale:l.flipScale,makeColorScaleFunc:l.makeColorScaleFunc,makeColorScaleFuncFromTrace:l.makeColorScaleFuncFromTrace}},{"./attributes":373,"./calc":374,"./cross_trace_defaults":375,"./defaults":376,"./helpers":377,"./layout_attributes":379,"./layout_defaults":380,"./scales":381}],379:[function(t,B,H){var d=t("../../lib/extend").extendFlat,l=t("./attributes"),b=t("./scales").scales;B.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:b.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:b.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:b.RdBu,editType:"calc"}},coloraxis:d({_isSubplotObj:!0,editType:"calc"},l("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":493,"./attributes":373,"./scales":381}],380:[function(t,B,H){var d=t("../../lib"),l=t("../../plot_api/plot_template"),b=t("./layout_attributes"),w=t("./defaults");B.exports=function(o,a){function r(h,y){return d.coerce(o,a,b,h,y)}r("colorscale.sequential"),r("colorscale.sequentialminus"),r("colorscale.diverging");var n=a._colorAxes,c,s;function i(h,y){return d.coerce(c,s,b.coloraxis,h,y)}for(var v in n){var u=n[v];if(u[0])c=o[v]||{},s=l.newContainer(a,v,"coloraxis"),s._name=v,w(c,s,a,i,{prefix:"",cLetter:"c"});else{for(var g=0;g<u[2].length;g++)u[2][g]();delete a._colorAxes[v]}}}},{"../../lib":503,"../../plot_api/plot_template":543,"./defaults":376,"./layout_attributes":379}],381:[function(t,B,H){var d=t("tinycolor2"),l={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},b=l.RdBu;function w(a,r){if(r||(r=b),!a)return r;function n(){try{a=l[a]||JSON.parse(a)}catch{a=r}}return typeof a=="string"&&(n(),typeof a=="string"&&n()),e(a)?a:r}function e(a){var r=0;if(!Array.isArray(a)||a.length<2||!a[0]||!a[a.length-1]||+a[0][0]!=0||+a[a.length-1][0]!=1)return!1;for(var n=0;n<a.length;n++){var c=a[n];if(c.length!==2||+c[0]<r||!d(c[1]).isValid())return!1;r=+c[0]}return!0}function o(a){return l[a]!==void 0?!0:e(a)}B.exports={scales:l,defaultScale:b,get:w,isValid:o}},{tinycolor2:312}],382:[function(t,B,H){B.exports=function(l,b,w,e,o){var a=(l-w)/(e-w),r=a+b/(e-w),n=(a+r)/2;return o==="left"||o==="bottom"?a:o==="center"||o==="middle"?n:o==="right"||o==="top"?r:a<2/3-n?a:r>4/3-n?r:n}},{}],383:[function(t,B,H){var d=t("../../lib"),l=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];B.exports=function(w,e,o,a){return o==="left"?w=0:o==="center"?w=1:o==="right"?w=2:w=d.constrain(Math.floor(w*3),0,2),a==="bottom"?e=0:a==="middle"?e=1:a==="top"?e=2:e=d.constrain(Math.floor(e*3),0,2),l[e][w]}},{"../../lib":503}],384:[function(t,B,H){H.selectMode=function(d){return d==="lasso"||d==="select"},H.drawMode=function(d){return d==="drawclosedpath"||d==="drawopenpath"||d==="drawline"||d==="drawrect"||d==="drawcircle"},H.openMode=function(d){return d==="drawline"||d==="drawopenpath"},H.rectMode=function(d){return d==="select"||d==="drawline"||d==="drawrect"||d==="drawcircle"},H.freeMode=function(d){return d==="lasso"||d==="drawclosedpath"||d==="drawopenpath"},H.selectingOrDrawing=function(d){return H.freeMode(d)||H.rectMode(d)}},{}],385:[function(t,B,H){var d=t("mouse-event-offset"),l=t("has-hover"),b=t("has-passive-events"),w=t("../../lib").removeElement,e=t("../../plots/cartesian/constants"),o=B.exports={};o.align=t("./align"),o.getCursor=t("./cursor");var a=t("./unhover");o.unhover=a.wrapped,o.unhoverRaw=a.raw,o.init=function(s){var i=s.gd,v=1,u=i._context.doubleClickDelay,g=s.element,h,y,p,A,m,M,x,T;i._mouseDownTime||(i._mouseDownTime=0),g.style.pointerEvents="all",g.onmousedown=L,b?(g._ontouchstart&&g.removeEventListener("touchstart",g._ontouchstart),g._ontouchstart=L,g.addEventListener("touchstart",L,{passive:!1})):g.ontouchstart=L;function _(P,z,I){return Math.abs(P)<I&&(P=0),Math.abs(z)<I&&(z=0),[P,z]}var f=s.clampFn||_;function L(P){i._dragged=!1,i._dragging=!0;var z=n(P);h=z[0],y=z[1],x=P.target,M=P,T=P.buttons===2||P.ctrlKey,typeof P.clientX=="undefined"&&typeof P.clientY=="undefined"&&(P.clientX=h,P.clientY=y),p=new Date().getTime(),p-i._mouseDownTime<u?v+=1:(v=1,i._mouseDownTime=p),s.prepFn&&s.prepFn(P,h,y),l&&!T?(m=r(),m.style.cursor=window.getComputedStyle(g).cursor):l||(m=document,A=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(g).cursor),document.addEventListener("mouseup",k),document.addEventListener("touchend",k),s.dragmode!==!1&&(P.preventDefault(),document.addEventListener("mousemove",S),document.addEventListener("touchmove",S,{passive:!1}))}function S(P){P.preventDefault();var z=n(P),I=s.minDrag||e.MINDRAG,R=f(z[0]-h,z[1]-y,I),D=R[0],O=R[1];(D||O)&&(i._dragged=!0,o.unhover(i,P)),i._dragged&&s.moveFn&&!T&&(i._dragdata={element:g,dx:D,dy:O},s.moveFn(D,O))}function k(P){if(delete i._dragdata,s.dragmode!==!1&&(P.preventDefault(),document.removeEventListener("mousemove",S),document.removeEventListener("touchmove",S)),document.removeEventListener("mouseup",k),document.removeEventListener("touchend",k),l?w(m):A&&(m.documentElement.style.cursor=A,A=null),!i._dragging){i._dragged=!1;return}if(i._dragging=!1,new Date().getTime()-i._mouseDownTime>u&&(v=Math.max(v-1,1)),i._dragged)s.doneFn&&s.doneFn();else if(s.clickFn&&s.clickFn(v,M),!T){var z;try{z=new MouseEvent("click",P)}catch{var I=n(P);z=document.createEvent("MouseEvents"),z.initMouseEvent("click",P.bubbles,P.cancelable,P.view,P.detail,P.screenX,P.screenY,I[0],I[1],P.ctrlKey,P.altKey,P.shiftKey,P.metaKey,P.button,P.relatedTarget)}x.dispatchEvent(z)}i._dragging=!1,i._dragged=!1}};function r(){var c=document.createElement("div");c.className="dragcover";var s=c.style;return s.position="fixed",s.left=0,s.right=0,s.top=0,s.bottom=0,s.zIndex=999999999,s.background="none",document.body.appendChild(c),c}o.coverSlip=r;function n(c){return d(c.changedTouches?c.changedTouches[0]:c,document.body)}},{"../../lib":503,"../../plots/cartesian/constants":561,"./align":382,"./cursor":383,"./unhover":386,"has-hover":228,"has-passive-events":229,"mouse-event-offset":242}],386:[function(t,B,H){var d=t("../../lib/events"),l=t("../../lib/throttle"),b=t("../../lib/dom").getGraphDiv,w=t("../fx/constants"),e=B.exports={};e.wrapped=function(o,a,r){o=b(o),o._fullLayout&&l.clear(o._fullLayout._uid+w.HOVERID),e.raw(o,a,r)},e.raw=function(a,r){var n=a._fullLayout,c=a._hoverdata;r||(r={}),!(r.target&&!a._dragged&&d.triggerHandler(a,"plotly_beforehover",r)===!1)&&(n._hoverlayer.selectAll("g").remove(),n._hoverlayer.selectAll("line").remove(),n._hoverlayer.selectAll("circle").remove(),a._hoverdata=void 0,r.target&&c&&a.emit("plotly_unhover",{event:r,points:c}))}},{"../../lib/dom":491,"../../lib/events":492,"../../lib/throttle":530,"../fx/constants":400}],387:[function(t,B,H){H.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},H.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],388:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib"),b=l.numberFormat,w=t("fast-isnumeric"),e=t("tinycolor2"),o=t("../../registry"),a=t("../color"),r=t("../colorscale"),n=l.strTranslate,c=t("../../lib/svg_text_utils"),s=t("../../constants/xmlns_namespaces"),i=t("../../constants/alignment"),v=i.LINE_SPACING,u=t("../../constants/interactions").DESELECTDIM,g=t("../../traces/scatter/subtypes"),h=t("../../traces/scatter/make_bubble_size_func"),y=t("../../components/fx/helpers").appendArrayPointValue,p=B.exports={};p.font=function(Z,se,le,oe){l.isPlainObject(se)&&(oe=se.color,le=se.size,se=se.family),se&&Z.style("font-family",se),le+1&&Z.style("font-size",le+"px"),oe&&Z.call(a.fill,oe)},p.setPosition=function(Z,se,le){Z.attr("x",se).attr("y",le)},p.setSize=function(Z,se,le){Z.attr("width",se).attr("height",le)},p.setRect=function(Z,se,le,oe,U){Z.call(p.setPosition,se,le).call(p.setSize,oe,U)},p.translatePoint=function(Z,se,le,oe){var U=le.c2p(Z.x),V=oe.c2p(Z.y);if(w(U)&&w(V)&&se.node())se.node().nodeName==="text"?se.attr("x",U).attr("y",V):se.attr("transform",n(U,V));else return!1;return!0},p.translatePoints=function(Z,se,le){Z.each(function(oe){var U=d.select(this);p.translatePoint(oe,U,se,le)})},p.hideOutsideRangePoint=function(Z,se,le,oe,U,V){se.attr("display",le.isPtWithinRange(Z,U)&&oe.isPtWithinRange(Z,V)?null:"none")},p.hideOutsideRangePoints=function(Z,se){if(!!se._hasClipOnAxisFalse){var le=se.xaxis,oe=se.yaxis;Z.each(function(U){var V=U[0].trace,re=V.xcalendar,ee=V.ycalendar,j=o.traceIs(V,"bar-like")?".bartext":".point,.textpoint";Z.selectAll(j).each(function(Q){p.hideOutsideRangePoint(Q,d.select(this),le,oe,re,ee)})})}},p.crispRound=function(Z,se,le){return!se||!w(se)?le||0:Z._context.staticPlot?se:se<1?1:Math.round(se)},p.singleLineStyle=function(Z,se,le,oe,U){se.style("fill","none");var V=(((Z||[])[0]||{}).trace||{}).line||{},re=le||V.width||0,ee=U||V.dash||"";a.stroke(se,oe||V.color),p.dashLine(se,ee,re)},p.lineGroupStyle=function(Z,se,le,oe){Z.style("fill","none").each(function(U){var V=(((U||[])[0]||{}).trace||{}).line||{},re=se||V.width||0,ee=oe||V.dash||"";d.select(this).call(a.stroke,le||V.color).call(p.dashLine,ee,re)})},p.dashLine=function(Z,se,le){le=+le||0,se=p.dashStyle(se,le),Z.style({"stroke-dasharray":se,"stroke-width":le+"px"})},p.dashStyle=function(Z,se){se=+se||1;var le=Math.max(se,3);return Z==="solid"?Z="":Z==="dot"?Z=le+"px,"+le+"px":Z==="dash"?Z=3*le+"px,"+3*le+"px":Z==="longdash"?Z=5*le+"px,"+5*le+"px":Z==="dashdot"?Z=3*le+"px,"+le+"px,"+le+"px,"+le+"px":Z==="longdashdot"&&(Z=5*le+"px,"+2*le+"px,"+le+"px,"+2*le+"px"),Z};function A(Z,se,le){var oe=se.fillpattern,U=oe&&p.getPatternAttr(oe.shape,0,"");if(U){var V=p.getPatternAttr(oe.bgcolor,0,null),re=p.getPatternAttr(oe.fgcolor,0,null),ee=oe.fgopacity,j=p.getPatternAttr(oe.size,0,8),Q=p.getPatternAttr(oe.solidity,0,.3),ne=se.uid;p.pattern(Z,"point",le,ne,U,j,Q,void 0,oe.fillmode,V,re,ee)}else se.fillcolor&&Z.call(a.fill,se.fillcolor)}p.singleFillStyle=function(Z,se){var le=d.select(Z.node()),oe=le.data(),U=((oe[0]||[])[0]||{}).trace||{};A(Z,U,se)},p.fillGroupStyle=function(Z,se){Z.style("stroke-width",0).each(function(le){var oe=d.select(this);le[0].trace&&A(oe,le[0].trace,se)})};var m=t("./symbol_defs");p.symbolNames=[],p.symbolFuncs=[],p.symbolNeedLines={},p.symbolNoDot={},p.symbolNoFill={},p.symbolList=[],Object.keys(m).forEach(function(Z){var se=m[Z],le=se.n;p.symbolList.push(le,String(le),Z,le+100,String(le+100),Z+"-open"),p.symbolNames[le]=Z,p.symbolFuncs[le]=se.f,se.needLine&&(p.symbolNeedLines[le]=!0),se.noDot?p.symbolNoDot[le]=!0:p.symbolList.push(le+200,String(le+200),Z+"-dot",le+300,String(le+300),Z+"-open-dot"),se.noFill&&(p.symbolNoFill[le]=!0)});var M=p.symbolNames.length,x="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";p.symbolNumber=function(Z){if(w(Z))Z=+Z;else if(typeof Z=="string"){var se=0;Z.indexOf("-open")>0&&(se=100,Z=Z.replace("-open","")),Z.indexOf("-dot")>0&&(se+=200,Z=Z.replace("-dot","")),Z=p.symbolNames.indexOf(Z),Z>=0&&(Z+=se)}return Z%100>=M||Z>=400?0:Math.floor(Math.max(Z,0))};function T(Z,se){var le=Z%100;return p.symbolFuncs[le](se)+(Z>=200?x:"")}var _={x1:1,x2:0,y1:0,y2:0},f={x1:0,x2:0,y1:1,y2:0},L=b("~f"),S={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:_},horizontalreversed:{node:"linearGradient",attrs:_,reversed:!0},vertical:{node:"linearGradient",attrs:f},verticalreversed:{node:"linearGradient",attrs:f,reversed:!0}};p.gradient=function(Z,se,le,oe,U,V){for(var re=U.length,ee=S[oe],j=new Array(re),Q=0;Q<re;Q++)ee.reversed?j[re-1-Q]=[L((1-U[Q][0])*100),U[Q][1]]:j[Q]=[L(U[Q][0]*100),U[Q][1]];var ne=se._fullLayout,ae="g"+ne._uid+"-"+le,ie=ne._defs.select(".gradients").selectAll("#"+ae).data([oe+j.join(";")],l.identity);ie.exit().remove(),ie.enter().append(ee.node).each(function(){var ue=d.select(this);ee.attrs&&ue.attr(ee.attrs),ue.attr("id",ae);var xe=ue.selectAll("stop").data(j);xe.exit().remove(),xe.enter().append("stop"),xe.each(function(he){var ge=e(he[1]);d.select(this).attr({offset:he[0]+"%","stop-color":a.tinyRGB(ge),"stop-opacity":ge.getAlpha()})})}),Z.style(V,q(ae,se)).style(V+"-opacity",null),Z.classed("gradient_filled",!0)},p.pattern=function(Z,se,le,oe,U,V,re,ee,j,Q,ne,ae){var ie=se==="legend";ee&&(j==="overlay"?(Q=ee,ne=a.contrast(Q)):(Q=void 0,ne=ee));var ue=le._fullLayout,xe="p"+ue._uid+"-"+oe,he,ge,me=function(Ye,qe,Ue,Ie,Ve){return Ie+(Ve-Ie)*(Ye-qe)/(Ue-qe)},ke,Ae,Ne,He,Ge={};switch(U){case"/":he=V*Math.sqrt(2),ge=V*Math.sqrt(2),ke="M-"+he/4+","+ge/4+"l"+he/2+",-"+ge/2+"M0,"+ge+"L"+he+",0M"+he/4*3+","+ge/4*5+"l"+he/2+",-"+ge/2,Ae=re*V,He="path",Ge={d:ke,opacity:ae,stroke:ne,"stroke-width":Ae+"px"};break;case"\\":he=V*Math.sqrt(2),ge=V*Math.sqrt(2),ke="M"+he/4*3+",-"+ge/4+"l"+he/2+","+ge/2+"M0,0L"+he+","+ge+"M-"+he/4+","+ge/4*3+"l"+he/2+","+ge/2,Ae=re*V,He="path",Ge={d:ke,opacity:ae,stroke:ne,"stroke-width":Ae+"px"};break;case"x":he=V*Math.sqrt(2),ge=V*Math.sqrt(2),ke="M-"+he/4+","+ge/4+"l"+he/2+",-"+ge/2+"M0,"+ge+"L"+he+",0M"+he/4*3+","+ge/4*5+"l"+he/2+",-"+ge/2+"M"+he/4*3+",-"+ge/4+"l"+he/2+","+ge/2+"M0,0L"+he+","+ge+"M-"+he/4+","+ge/4*3+"l"+he/2+","+ge/2,Ae=V-V*Math.sqrt(1-re),He="path",Ge={d:ke,opacity:ae,stroke:ne,"stroke-width":Ae+"px"};break;case"|":he=V,ge=V,He="path",ke="M"+he/2+",0L"+he/2+","+ge,Ae=re*V,He="path",Ge={d:ke,opacity:ae,stroke:ne,"stroke-width":Ae+"px"};break;case"-":he=V,ge=V,He="path",ke="M0,"+ge/2+"L"+he+","+ge/2,Ae=re*V,He="path",Ge={d:ke,opacity:ae,stroke:ne,"stroke-width":Ae+"px"};break;case"+":he=V,ge=V,He="path",ke="M"+he/2+",0L"+he/2+","+ge+"M0,"+ge/2+"L"+he+","+ge/2,Ae=V-V*Math.sqrt(1-re),He="path",Ge={d:ke,opacity:ae,stroke:ne,"stroke-width":Ae+"px"};break;case".":he=V,ge=V,re<Math.PI/4?Ne=Math.sqrt(re*V*V/Math.PI):Ne=me(re,Math.PI/4,1,V/2,V/Math.sqrt(2)),He="circle",Ge={cx:he/2,cy:ge/2,r:Ne,opacity:ae,fill:ne};break}var _e=[U||"noSh",Q||"noBg",ne||"noFg",V,re].join(";"),De=ue._defs.select(".patterns").selectAll("#"+xe).data([_e],l.identity);De.exit().remove(),De.enter().append("pattern").each(function(){var Ye=d.select(this);if(Ye.attr({id:xe,width:he+"px",height:ge+"px",patternUnits:"userSpaceOnUse",patternTransform:ie?"scale(0.8)":""}),Q){var qe=Ye.selectAll("rect").data([0]);qe.exit().remove(),qe.enter().append("rect").attr({width:he+"px",height:ge+"px",fill:Q})}var Ue=Ye.selectAll(He).data([0]);Ue.exit().remove(),Ue.enter().append(He).attr(Ge)}),Z.style("fill",q(xe,le)).style("fill-opacity",null),Z.classed("pattern_filled",!0)},p.initGradients=function(Z){var se=Z._fullLayout,le=l.ensureSingle(se._defs,"g","gradients");le.selectAll("linearGradient,radialGradient").remove(),d.select(Z).selectAll(".gradient_filled").classed("gradient_filled",!1)},p.initPatterns=function(Z){var se=Z._fullLayout,le=l.ensureSingle(se._defs,"g","patterns");le.selectAll("pattern").remove(),d.select(Z).selectAll(".pattern_filled").classed("pattern_filled",!1)},p.getPatternAttr=function(Z,se,le){return Z&&l.isArrayOrTypedArray(Z)?se<Z.length?Z[se]:le:Z},p.pointStyle=function(Z,se,le){if(!!Z.size()){var oe=p.makePointStyleFns(se);Z.each(function(U){p.singlePointStyle(U,d.select(this),se,oe,le)})}},p.singlePointStyle=function(Z,se,le,oe,U){var V=le.marker,re=V.line;if(se.style("opacity",oe.selectedOpacityFn?oe.selectedOpacityFn(Z):Z.mo===void 0?V.opacity:Z.mo),oe.ms2mrc){var ee;Z.ms==="various"||V.size==="various"?ee=3:ee=oe.ms2mrc(Z.ms),Z.mrc=ee,oe.selectedSizeFn&&(ee=Z.mrc=oe.selectedSizeFn(Z));var j=p.symbolNumber(Z.mx||V.symbol)||0;Z.om=j%200>=100,se.attr("d",T(j,ee))}var Q=!1,ne,ae,ie;if(Z.so)ie=re.outlierwidth,ae=re.outliercolor,ne=V.outliercolor;else{var ue=(re||{}).width;ie=(Z.mlw+1||ue+1||(Z.trace?(Z.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in Z?ae=Z.mlcc=oe.lineScale(Z.mlc):l.isArrayOrTypedArray(re.color)?ae=a.defaultLine:ae=re.color,l.isArrayOrTypedArray(V.color)&&(ne=a.defaultLine,Q=!0),"mc"in Z?ne=Z.mcc=oe.markerScale(Z.mc):ne=V.color||"rgba(0,0,0,0)",oe.selectedColorFn&&(ne=oe.selectedColorFn(Z))}if(Z.om)se.call(a.stroke,ne).style({"stroke-width":(ie||1)+"px",fill:"none"});else{se.style("stroke-width",(Z.isBlank?0:ie)+"px");var xe=V.gradient,he=Z.mgt;he?Q=!0:he=xe&&xe.type,l.isArrayOrTypedArray(he)&&(he=he[0],S[he]||(he=0));var ge=V.pattern,me=ge&&p.getPatternAttr(ge.shape,Z.i,"");if(he&&he!=="none"){var ke=Z.mgc;ke?Q=!0:ke=xe.color;var Ae=le.uid;Q&&(Ae+="-"+Z.i),p.gradient(se,U,Ae,he,[[0,ke],[1,ne]],"fill")}else if(me){var Ne=p.getPatternAttr(ge.bgcolor,Z.i,null),He=p.getPatternAttr(ge.fgcolor,Z.i,null),Ge=ge.fgopacity,_e=p.getPatternAttr(ge.size,Z.i,8),De=p.getPatternAttr(ge.solidity,Z.i,.3),Ye=Z.mcc||l.isArrayOrTypedArray(ge.shape)||l.isArrayOrTypedArray(ge.bgcolor)||l.isArrayOrTypedArray(ge.size)||l.isArrayOrTypedArray(ge.solidity),qe=le.uid;Ye&&(qe+="-"+Z.i),p.pattern(se,"point",U,qe,me,_e,De,Z.mcc,ge.fillmode,Ne,He,Ge)}else a.fill(se,ne);ie&&a.stroke(se,ae)}},p.makePointStyleFns=function(Z){var se={},le=Z.marker;return se.markerScale=p.tryColorscale(le,""),se.lineScale=p.tryColorscale(le,"line"),o.traceIs(Z,"symbols")&&(se.ms2mrc=g.isBubble(Z)?h(Z):function(){return(le.size||6)/2}),Z.selectedpoints&&l.extendFlat(se,p.makeSelectedPointStyleFns(Z)),se},p.makeSelectedPointStyleFns=function(Z){var se={},le=Z.selected||{},oe=Z.unselected||{},U=Z.marker||{},V=le.marker||{},re=oe.marker||{},ee=U.opacity,j=V.opacity,Q=re.opacity,ne=j!==void 0,ae=Q!==void 0;(l.isArrayOrTypedArray(ee)||ne||ae)&&(se.selectedOpacityFn=function(Ne){var He=Ne.mo===void 0?U.opacity:Ne.mo;return Ne.selected?ne?j:He:ae?Q:u*He});var ie=U.color,ue=V.color,xe=re.color;(ue||xe)&&(se.selectedColorFn=function(Ne){var He=Ne.mcc||ie;return Ne.selected?ue||He:xe||He});var he=U.size,ge=V.size,me=re.size,ke=ge!==void 0,Ae=me!==void 0;return o.traceIs(Z,"symbols")&&(ke||Ae)&&(se.selectedSizeFn=function(Ne){var He=Ne.mrc||he/2;return Ne.selected?ke?ge/2:He:Ae?me/2:He}),se},p.makeSelectedTextStyleFns=function(Z){var se={},le=Z.selected||{},oe=Z.unselected||{},U=Z.textfont||{},V=le.textfont||{},re=oe.textfont||{},ee=U.color,j=V.color,Q=re.color;return se.selectedTextColorFn=function(ne){var ae=ne.tc||ee;return ne.selected?j||ae:Q||(j?ae:a.addOpacity(ae,u))},se},p.selectedPointStyle=function(Z,se){if(!(!Z.size()||!se.selectedpoints)){var le=p.makeSelectedPointStyleFns(se),oe=se.marker||{},U=[];le.selectedOpacityFn&&U.push(function(V,re){V.style("opacity",le.selectedOpacityFn(re))}),le.selectedColorFn&&U.push(function(V,re){a.fill(V,le.selectedColorFn(re))}),le.selectedSizeFn&&U.push(function(V,re){var ee=re.mx||oe.symbol||0,j=le.selectedSizeFn(re);V.attr("d",T(p.symbolNumber(ee),j)),re.mrc2=j}),U.length&&Z.each(function(V){for(var re=d.select(this),ee=0;ee<U.length;ee++)U[ee](re,V)})}},p.tryColorscale=function(Z,se){var le=se?l.nestedProperty(Z,se).get():Z;if(le){var oe=le.color;if((le.colorscale||le._colorAx)&&l.isArrayOrTypedArray(oe))return r.makeColorScaleFuncFromTrace(le)}return l.identity};var k={start:1,end:-1,middle:0,bottom:1,top:-1};function P(Z,se,le,oe,U){var V=d.select(Z.node().parentNode),re=se.indexOf("top")!==-1?"top":se.indexOf("bottom")!==-1?"bottom":"middle",ee=se.indexOf("left")!==-1?"end":se.indexOf("right")!==-1?"start":"middle",j=oe?oe/.8+1:0,Q=(c.lineCount(Z)-1)*v+1,ne=k[ee]*j,ae=le*.75+k[re]*j+(k[re]-1)*Q*le/2;Z.attr("text-anchor",ee),U||V.attr("transform",n(ne,ae))}function z(Z,se){var le=Z.ts||se.textfont.size;return w(le)&&le>0?le:0}p.textPointStyle=function(Z,se,le){if(!!Z.size()){var oe;if(se.selectedpoints){var U=p.makeSelectedTextStyleFns(se);oe=U.selectedTextColorFn}var V=se.texttemplate,re=le._fullLayout;Z.each(function(ee){var j=d.select(this),Q=V?l.extractOption(ee,se,"txt","texttemplate"):l.extractOption(ee,se,"tx","text");if(!Q&&Q!==0){j.remove();return}if(V){var ne=se._module.formatLabels,ae=ne?ne(ee,se,re):{},ie={};y(ie,se,ee.i);var ue=se._meta||{};Q=l.texttemplateString(Q,ae,re._d3locale,ie,ee,ue)}var xe=ee.tp||se.textposition,he=z(ee,se),ge=oe?oe(ee):ee.tc||se.textfont.color;j.call(p.font,ee.tf||se.textfont.family,he,ge).text(Q).call(c.convertToTspans,le).call(P,xe,he,ee.mrc)})}},p.selectedTextStyle=function(Z,se){if(!(!Z.size()||!se.selectedpoints)){var le=p.makeSelectedTextStyleFns(se);Z.each(function(oe){var U=d.select(this),V=le.selectedTextColorFn(oe),re=oe.tp||se.textposition,ee=z(oe,se);a.fill(U,V);var j=o.traceIs(se,"bar-like");P(U,re,ee,oe.mrc2||oe.mrc,j)})}};var I=.5;p.smoothopen=function(Z,se){if(Z.length<3)return"M"+Z.join("L");var le="M"+Z[0],oe=[],U;for(U=1;U<Z.length-1;U++)oe.push(R(Z[U-1],Z[U],Z[U+1],se));for(le+="Q"+oe[0][0]+" "+Z[1],U=2;U<Z.length-1;U++)le+="C"+oe[U-2][1]+" "+oe[U-1][0]+" "+Z[U];return le+="Q"+oe[Z.length-3][1]+" "+Z[Z.length-1],le},p.smoothclosed=function(Z,se){if(Z.length<3)return"M"+Z.join("L")+"Z";var le="M"+Z[0],oe=Z.length-1,U=[R(Z[oe],Z[0],Z[1],se)],V;for(V=1;V<oe;V++)U.push(R(Z[V-1],Z[V],Z[V+1],se));for(U.push(R(Z[oe-1],Z[oe],Z[0],se)),V=1;V<=oe;V++)le+="C"+U[V-1][1]+" "+U[V][0]+" "+Z[V];return le+="C"+U[oe][1]+" "+U[0][0]+" "+Z[0]+"Z",le};function R(Z,se,le,oe){var U=Z[0]-se[0],V=Z[1]-se[1],re=le[0]-se[0],ee=le[1]-se[1],j=Math.pow(U*U+V*V,I/2),Q=Math.pow(re*re+ee*ee,I/2),ne=(Q*Q*U-j*j*re)*oe,ae=(Q*Q*V-j*j*ee)*oe,ie=3*Q*(j+Q),ue=3*j*(j+Q);return[[d.round(se[0]+(ie&&ne/ie),2),d.round(se[1]+(ie&&ae/ie),2)],[d.round(se[0]-(ue&&ne/ue),2),d.round(se[1]-(ue&&ae/ue),2)]]}var D={hv:function(Z,se){return"H"+d.round(se[0],2)+"V"+d.round(se[1],2)},vh:function(Z,se){return"V"+d.round(se[1],2)+"H"+d.round(se[0],2)},hvh:function(Z,se){return"H"+d.round((Z[0]+se[0])/2,2)+"V"+d.round(se[1],2)+"H"+d.round(se[0],2)},vhv:function(Z,se){return"V"+d.round((Z[1]+se[1])/2,2)+"H"+d.round(se[0],2)+"V"+d.round(se[1],2)}},O=function(Z,se){return"L"+d.round(se[0],2)+","+d.round(se[1],2)};p.steps=function(Z){var se=D[Z]||O;return function(le){for(var oe="M"+d.round(le[0][0],2)+","+d.round(le[0][1],2),U=1;U<le.length;U++)oe+=se(le[U-1],le[U]);return oe}},p.makeTester=function(){var Z=l.ensureSingleById(d.select("body"),"svg","js-plotly-tester",function(le){le.attr(s.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),se=l.ensureSingle(Z,"path","js-reference-point",function(le){le.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});p.tester=Z,p.testref=se},p.savedBBoxes={};var F=0,G=1e4;p.bBox=function(Z,se,le){le||(le=W(Z));var oe;if(le){if(oe=p.savedBBoxes[le],oe)return l.extendFlat({},oe)}else if(Z.childNodes.length===1){var U=Z.childNodes[0];if(le=W(U),le){var V=+U.getAttribute("x")||0,re=+U.getAttribute("y")||0,ee=U.getAttribute("transform");if(!ee){var j=p.bBox(U,!1,le);return V&&(j.left+=V,j.right+=V),re&&(j.top+=re,j.bottom+=re),j}if(le+="~"+V+"~"+re+"~"+ee,oe=p.savedBBoxes[le],oe)return l.extendFlat({},oe)}}var Q,ne;se?Q=Z:(ne=p.tester.node(),Q=Z.cloneNode(!0),ne.appendChild(Q)),d.select(Q).attr("transform",null).call(c.positionText,0,0);var ae=Q.getBoundingClientRect(),ie=p.testref.node().getBoundingClientRect();se||ne.removeChild(Q);var ue={height:ae.height,width:ae.width,left:ae.left-ie.left,top:ae.top-ie.top,right:ae.right-ie.left,bottom:ae.bottom-ie.top};return F>=G&&(p.savedBBoxes={},F=0),le&&(p.savedBBoxes[le]=ue),F++,l.extendFlat({},ue)};function W(Z){var se=Z.getAttribute("data-unformatted");if(se!==null)return se+Z.getAttribute("data-math")+Z.getAttribute("text-anchor")+Z.getAttribute("style")}p.setClipUrl=function(Z,se,le){Z.attr("clip-path",q(se,le))};function q(Z,se){if(!Z)return null;var le=se._context,oe=le._exportedPlot?"":le._baseUrl||"";return oe?"url('"+oe+"#"+Z+"')":"url(#"+Z+")"}p.getTranslate=function(Z){var se=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,le=Z.attr?"attr":"getAttribute",oe=Z[le]("transform")||"",U=oe.replace(se,function(V,re,ee){return[re,ee].join(" ")}).split(" ");return{x:+U[0]||0,y:+U[1]||0}},p.setTranslate=function(Z,se,le){var oe=/(\btranslate\(.*?\);?)/,U=Z.attr?"attr":"getAttribute",V=Z.attr?"attr":"setAttribute",re=Z[U]("transform")||"";return se=se||0,le=le||0,re=re.replace(oe,"").trim(),re+=n(se,le),re=re.trim(),Z[V]("transform",re),re},p.getScale=function(Z){var se=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,le=Z.attr?"attr":"getAttribute",oe=Z[le]("transform")||"",U=oe.replace(se,function(V,re,ee){return[re,ee].join(" ")}).split(" ");return{x:+U[0]||1,y:+U[1]||1}},p.setScale=function(Z,se,le){var oe=/(\bscale\(.*?\);?)/,U=Z.attr?"attr":"getAttribute",V=Z.attr?"attr":"setAttribute",re=Z[U]("transform")||"";return se=se||1,le=le||1,re=re.replace(oe,"").trim(),re+="scale("+se+","+le+")",re=re.trim(),Z[V]("transform",re),re};var J=/\s*sc.*/;p.setPointGroupScale=function(Z,se,le){if(se=se||1,le=le||1,!!Z){var oe=se===1&&le===1?"":"scale("+se+","+le+")";Z.each(function(){var U=(this.getAttribute("transform")||"").replace(J,"");U+=oe,U=U.trim(),this.setAttribute("transform",U)})}};var X=/translate\([^)]*\)\s*$/;p.setTextPointsScale=function(Z,se,le){!Z||Z.each(function(){var oe,U=d.select(this),V=U.select("text");if(!!V.node()){var re=parseFloat(V.attr("x")||0),ee=parseFloat(V.attr("y")||0),j=(U.attr("transform")||"").match(X);se===1&&le===1?oe=[]:oe=[n(re,ee),"scale("+se+","+le+")",n(-re,-ee)],j&&oe.push(j),U.attr("transform",oe.join(""))}})}},{"../../components/fx/helpers":402,"../../constants/alignment":471,"../../constants/interactions":478,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../registry":638,"../../traces/scatter/make_bubble_size_func":943,"../../traces/scatter/subtypes":951,"../color":366,"../colorscale":378,"./symbol_defs":389,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],389:[function(t,B,H){var d=t("@plotly/d3");B.exports={circle:{n:0,f:function(l){var b=d.round(l,2);return"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z"}},square:{n:1,f:function(l){var b=d.round(l,2);return"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z"}},diamond:{n:2,f:function(l){var b=d.round(l*1.3,2);return"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"Z"}},cross:{n:3,f:function(l){var b=d.round(l*.4,2),w=d.round(l*1.2,2);return"M"+w+","+b+"H"+b+"V"+w+"H-"+b+"V"+b+"H-"+w+"V-"+b+"H-"+b+"V-"+w+"H"+b+"V-"+b+"H"+w+"Z"}},x:{n:4,f:function(l){var b=d.round(l*.8/Math.sqrt(2),2),w="l"+b+","+b,e="l"+b+",-"+b,o="l-"+b+",-"+b,a="l-"+b+","+b;return"M0,"+b+w+e+o+e+o+a+o+a+w+a+w+"Z"}},"triangle-up":{n:5,f:function(l){var b=d.round(l*2/Math.sqrt(3),2),w=d.round(l/2,2),e=d.round(l,2);return"M-"+b+","+w+"H"+b+"L0,-"+e+"Z"}},"triangle-down":{n:6,f:function(l){var b=d.round(l*2/Math.sqrt(3),2),w=d.round(l/2,2),e=d.round(l,2);return"M-"+b+",-"+w+"H"+b+"L0,"+e+"Z"}},"triangle-left":{n:7,f:function(l){var b=d.round(l*2/Math.sqrt(3),2),w=d.round(l/2,2),e=d.round(l,2);return"M"+w+",-"+b+"V"+b+"L-"+e+",0Z"}},"triangle-right":{n:8,f:function(l){var b=d.round(l*2/Math.sqrt(3),2),w=d.round(l/2,2),e=d.round(l,2);return"M-"+w+",-"+b+"V"+b+"L"+e+",0Z"}},"triangle-ne":{n:9,f:function(l){var b=d.round(l*.6,2),w=d.round(l*1.2,2);return"M-"+w+",-"+b+"H"+b+"V"+w+"Z"}},"triangle-se":{n:10,f:function(l){var b=d.round(l*.6,2),w=d.round(l*1.2,2);return"M"+b+",-"+w+"V"+b+"H-"+w+"Z"}},"triangle-sw":{n:11,f:function(l){var b=d.round(l*.6,2),w=d.round(l*1.2,2);return"M"+w+","+b+"H-"+b+"V-"+w+"Z"}},"triangle-nw":{n:12,f:function(l){var b=d.round(l*.6,2),w=d.round(l*1.2,2);return"M-"+b+","+w+"V-"+b+"H"+w+"Z"}},pentagon:{n:13,f:function(l){var b=d.round(l*.951,2),w=d.round(l*.588,2),e=d.round(-l,2),o=d.round(l*-.309,2),a=d.round(l*.809,2);return"M"+b+","+o+"L"+w+","+a+"H-"+w+"L-"+b+","+o+"L0,"+e+"Z"}},hexagon:{n:14,f:function(l){var b=d.round(l,2),w=d.round(l/2,2),e=d.round(l*Math.sqrt(3)/2,2);return"M"+e+",-"+w+"V"+w+"L0,"+b+"L-"+e+","+w+"V-"+w+"L0,-"+b+"Z"}},hexagon2:{n:15,f:function(l){var b=d.round(l,2),w=d.round(l/2,2),e=d.round(l*Math.sqrt(3)/2,2);return"M-"+w+","+e+"H"+w+"L"+b+",0L"+w+",-"+e+"H-"+w+"L-"+b+",0Z"}},octagon:{n:16,f:function(l){var b=d.round(l*.924,2),w=d.round(l*.383,2);return"M-"+w+",-"+b+"H"+w+"L"+b+",-"+w+"V"+w+"L"+w+","+b+"H-"+w+"L-"+b+","+w+"V-"+w+"Z"}},star:{n:17,f:function(l){var b=l*1.4,w=d.round(b*.225,2),e=d.round(b*.951,2),o=d.round(b*.363,2),a=d.round(b*.588,2),r=d.round(-b,2),n=d.round(b*-.309,2),c=d.round(b*.118,2),s=d.round(b*.809,2),i=d.round(b*.382,2);return"M"+w+","+n+"H"+e+"L"+o+","+c+"L"+a+","+s+"L0,"+i+"L-"+a+","+s+"L-"+o+","+c+"L-"+e+","+n+"H-"+w+"L0,"+r+"Z"}},hexagram:{n:18,f:function(l){var b=d.round(l*.66,2),w=d.round(l*.38,2),e=d.round(l*.76,2);return"M-"+e+",0l-"+w+",-"+b+"h"+e+"l"+w+",-"+b+"l"+w+","+b+"h"+e+"l-"+w+","+b+"l"+w+","+b+"h-"+e+"l-"+w+","+b+"l-"+w+",-"+b+"h-"+e+"Z"}},"star-triangle-up":{n:19,f:function(l){var b=d.round(l*Math.sqrt(3)*.8,2),w=d.round(l*.8,2),e=d.round(l*1.6,2),o=d.round(l*4,2),a="A "+o+","+o+" 0 0 1 ";return"M-"+b+","+w+a+b+","+w+a+"0,-"+e+a+"-"+b+","+w+"Z"}},"star-triangle-down":{n:20,f:function(l){var b=d.round(l*Math.sqrt(3)*.8,2),w=d.round(l*.8,2),e=d.round(l*1.6,2),o=d.round(l*4,2),a="A "+o+","+o+" 0 0 1 ";return"M"+b+",-"+w+a+"-"+b+",-"+w+a+"0,"+e+a+b+",-"+w+"Z"}},"star-square":{n:21,f:function(l){var b=d.round(l*1.1,2),w=d.round(l*2,2),e="A "+w+","+w+" 0 0 1 ";return"M-"+b+",-"+b+e+"-"+b+","+b+e+b+","+b+e+b+",-"+b+e+"-"+b+",-"+b+"Z"}},"star-diamond":{n:22,f:function(l){var b=d.round(l*1.4,2),w=d.round(l*1.9,2),e="A "+w+","+w+" 0 0 1 ";return"M-"+b+",0"+e+"0,"+b+e+b+",0"+e+"0,-"+b+e+"-"+b+",0Z"}},"diamond-tall":{n:23,f:function(l){var b=d.round(l*.7,2),w=d.round(l*1.4,2);return"M0,"+w+"L"+b+",0L0,-"+w+"L-"+b+",0Z"}},"diamond-wide":{n:24,f:function(l){var b=d.round(l*1.4,2),w=d.round(l*.7,2);return"M0,"+w+"L"+b+",0L0,-"+w+"L-"+b+",0Z"}},hourglass:{n:25,f:function(l){var b=d.round(l,2);return"M"+b+","+b+"H-"+b+"L"+b+",-"+b+"H-"+b+"Z"},noDot:!0},bowtie:{n:26,f:function(l){var b=d.round(l,2);return"M"+b+","+b+"V-"+b+"L-"+b+","+b+"V-"+b+"Z"},noDot:!0},"circle-cross":{n:27,f:function(l){var b=d.round(l,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(l){var b=d.round(l,2),w=d.round(l/Math.sqrt(2),2);return"M"+w+","+w+"L-"+w+",-"+w+"M"+w+",-"+w+"L-"+w+","+w+"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(l){var b=d.round(l,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(l){var b=d.round(l,2);return"M"+b+","+b+"L-"+b+",-"+b+"M"+b+",-"+b+"L-"+b+","+b+"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(l){var b=d.round(l*1.3,2);return"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"ZM0,-"+b+"V"+b+"M-"+b+",0H"+b},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(l){var b=d.round(l*1.3,2),w=d.round(l*.65,2);return"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"ZM-"+w+",-"+w+"L"+w+","+w+"M-"+w+","+w+"L"+w+",-"+w},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(l){var b=d.round(l*1.4,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(l){var b=d.round(l,2);return"M"+b+","+b+"L-"+b+",-"+b+"M"+b+",-"+b+"L-"+b+","+b},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(l){var b=d.round(l*1.2,2),w=d.round(l*.85,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+w+","+w+"L-"+w+",-"+w+"M"+w+",-"+w+"L-"+w+","+w},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(l){var b=d.round(l/2,2),w=d.round(l,2);return"M"+b+","+w+"V-"+w+"m-"+w+",0V"+w+"M"+w+","+b+"H-"+w+"m0,-"+w+"H"+w},needLine:!0,noFill:!0},"y-up":{n:37,f:function(l){var b=d.round(l*1.2,2),w=d.round(l*1.6,2),e=d.round(l*.8,2);return"M-"+b+","+e+"L0,0M"+b+","+e+"L0,0M0,-"+w+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(l){var b=d.round(l*1.2,2),w=d.round(l*1.6,2),e=d.round(l*.8,2);return"M-"+b+",-"+e+"L0,0M"+b+",-"+e+"L0,0M0,"+w+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(l){var b=d.round(l*1.2,2),w=d.round(l*1.6,2),e=d.round(l*.8,2);return"M"+e+","+b+"L0,0M"+e+",-"+b+"L0,0M-"+w+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(l){var b=d.round(l*1.2,2),w=d.round(l*1.6,2),e=d.round(l*.8,2);return"M-"+e+","+b+"L0,0M-"+e+",-"+b+"L0,0M"+w+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(l){var b=d.round(l*1.4,2);return"M"+b+",0H-"+b},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(l){var b=d.round(l*1.4,2);return"M0,"+b+"V-"+b},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(l){var b=d.round(l,2);return"M"+b+",-"+b+"L-"+b+","+b},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(l){var b=d.round(l,2);return"M"+b+","+b+"L-"+b+",-"+b},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(l){var b=d.round(l,2),w=d.round(l*2,2);return"M0,0L-"+b+","+w+"H"+b+"Z"},noDot:!0},"arrow-down":{n:46,f:function(l){var b=d.round(l,2),w=d.round(l*2,2);return"M0,0L-"+b+",-"+w+"H"+b+"Z"},noDot:!0},"arrow-left":{n:47,f:function(l){var b=d.round(l*2,2),w=d.round(l,2);return"M0,0L"+b+",-"+w+"V"+w+"Z"},noDot:!0},"arrow-right":{n:48,f:function(l){var b=d.round(l*2,2),w=d.round(l,2);return"M0,0L-"+b+",-"+w+"V"+w+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(l){var b=d.round(l,2),w=d.round(l*2,2);return"M-"+b+",0H"+b+"M0,0L-"+b+","+w+"H"+b+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(l){var b=d.round(l,2),w=d.round(l*2,2);return"M-"+b+",0H"+b+"M0,0L-"+b+",-"+w+"H"+b+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(l){var b=d.round(l*2,2),w=d.round(l,2);return"M0,-"+w+"V"+w+"M0,0L"+b+",-"+w+"V"+w+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(l){var b=d.round(l*2,2),w=d.round(l,2);return"M0,-"+w+"V"+w+"M0,0L-"+b+",-"+w+"V"+w+"Z"},needLine:!0,noDot:!0}}},{"@plotly/d3":58}],390:[function(t,B,H){B.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],391:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../registry"),b=t("../../plots/cartesian/axes"),w=t("../../lib"),e=t("./compute_error");B.exports=function(r){for(var n=r.calcdata,c=0;c<n.length;c++){var s=n[c],i=s[0].trace;if(i.visible===!0&&l.traceIs(i,"errorBarsOK")){var v=b.getFromId(r,i.xaxis),u=b.getFromId(r,i.yaxis);o(s,i,v,"x"),o(s,i,u,"y")}}};function o(a,r,n,c){var s=r["error_"+c]||{},i=s.visible&&["linear","log"].indexOf(n.type)!==-1,v=[];if(!!i){for(var u=e(s),g=0;g<a.length;g++){var h=a[g],y=h.i;if(y===void 0)y=g;else if(y===null)continue;var p=h[c];if(!!d(n.c2l(p))){var A=u(p,y);if(d(A[0])&&d(A[1])){var m=h[c+"s"]=p-A[0],M=h[c+"h"]=p+A[1];v.push(m,M)}}}var x=n._id,T=r._extremes[x],_=b.findExtremes(n,v,w.extendFlat({tozero:T.opts.tozero},{padded:!0}));T.min=T.min.concat(_.min),T.max=T.max.concat(_.max)}}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./compute_error":392,"fast-isnumeric":190}],392:[function(t,B,H){B.exports=function(b){var w=b.type,e=b.symmetric;if(w==="data"){var o=b.array||[];if(e)return function(s,i){var v=+o[i];return[v,v]};var a=b.arrayminus||[];return function(s,i){var v=+o[i],u=+a[i];return!isNaN(v)||!isNaN(u)?[u||0,v||0]:[NaN,NaN]}}else{var r=d(w,b.value),n=d(w,b.valueminus);return e||b.valueminus===void 0?function(s){var i=r(s);return[i,i]}:function(s){return[n(s),r(s)]}}};function d(l,b){if(l==="percent")return function(w){return Math.abs(w*b/100)};if(l==="constant")return function(){return Math.abs(b)};if(l==="sqrt")return function(w){return Math.sqrt(Math.abs(w))}}},{}],393:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../registry"),b=t("../../lib"),w=t("../../plot_api/plot_template"),e=t("./attributes");B.exports=function(o,a,r,n){var c="error_"+n.axis,s=w.newContainer(a,c),i=o[c]||{};function v(m,M){return b.coerce(i,s,e,m,M)}var u=i.array!==void 0||i.value!==void 0||i.type==="sqrt",g=v("visible",u);if(g!==!1){var h=v("type","array"in i?"data":"percent"),y=!0;h!=="sqrt"&&(y=v("symmetric",!((h==="data"?"arrayminus":"valueminus")in i))),h==="data"?(v("array"),v("traceref"),y||(v("arrayminus"),v("tracerefminus"))):(h==="percent"||h==="constant")&&(v("value"),y||v("valueminus"));var p="copy_"+n.inherit+"style";if(n.inherit){var A=a["error_"+n.inherit];(A||{}).visible&&v(p,!(i.color||d(i.thickness)||d(i.width)))}(!n.inherit||!s[p])&&(v("color",r),v("thickness"),v("width",l.traceIs(a,"gl3d")?0:4))}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"./attributes":390,"fast-isnumeric":190}],394:[function(t,B,H){var d=t("../../lib"),l=t("../../plot_api/edit_types").overrideAll,b=t("./attributes"),w={error_x:d.extendFlat({},b),error_y:d.extendFlat({},b)};delete w.error_x.copy_zstyle,delete w.error_y.copy_zstyle,delete w.error_y.copy_ystyle;var e={error_x:d.extendFlat({},b),error_y:d.extendFlat({},b),error_z:d.extendFlat({},b)};delete e.error_x.copy_ystyle,delete e.error_y.copy_ystyle,delete e.error_z.copy_ystyle,delete e.error_z.copy_zstyle,B.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:w,bar:w,histogram:w,scatter3d:l(e,"calc","nested"),scattergl:l(w,"calc","nested")}},supplyDefaults:t("./defaults"),calc:t("./calc"),makeComputeError:t("./compute_error"),plot:t("./plot"),style:t("./style"),hoverInfo:o};function o(a,r,n){(r.error_y||{}).visible&&(n.yerr=a.yh-a.y,r.error_y.symmetric||(n.yerrneg=a.y-a.ys)),(r.error_x||{}).visible&&(n.xerr=a.xh-a.x,r.error_x.symmetric||(n.xerrneg=a.x-a.xs))}},{"../../lib":503,"../../plot_api/edit_types":536,"./attributes":390,"./calc":391,"./compute_error":392,"./defaults":393,"./plot":395,"./style":396}],395:[function(t,B,H){var d=t("@plotly/d3"),l=t("fast-isnumeric"),b=t("../drawing"),w=t("../../traces/scatter/subtypes");B.exports=function(a,r,n,c){var s,i=n.xaxis,v=n.yaxis,u=c&&c.duration>0;r.each(function(g){var h=g[0].trace,y=h.error_x||{},p=h.error_y||{},A;h.ids&&(A=function(T){return T.id});var m=w.hasMarkers(h)&&h.marker.maxdisplayed>0;!p.visible&&!y.visible&&(g=[]);var M=d.select(this).selectAll("g.errorbar").data(g,A);if(M.exit().remove(),!!g.length){y.visible||M.selectAll("path.xerror").remove(),p.visible||M.selectAll("path.yerror").remove(),M.style("opacity",1);var x=M.enter().append("g").classed("errorbar",!0);u&&x.style("opacity",0).transition().duration(c.duration).style("opacity",1),b.setClipUrl(M,n.layerClipId,a),M.each(function(T){var _=d.select(this),f=e(T,i,v);if(!(m&&!T.vis)){var L,S=_.select("path.yerror");if(p.visible&&l(f.x)&&l(f.yh)&&l(f.ys)){var k=p.width;L="M"+(f.x-k)+","+f.yh+"h"+2*k+"m-"+k+",0V"+f.ys,f.noYS||(L+="m-"+k+",0h"+2*k),s=!S.size(),s?S=_.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):u&&(S=S.transition().duration(c.duration).ease(c.easing)),S.attr("d",L)}else S.remove();var P=_.select("path.xerror");if(y.visible&&l(f.y)&&l(f.xh)&&l(f.xs)){var z=(y.copy_ystyle?p:y).width;L="M"+f.xh+","+(f.y-z)+"v"+2*z+"m0,-"+z+"H"+f.xs,f.noXS||(L+="m0,-"+z+"v"+2*z),s=!P.size(),s?P=_.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):u&&(P=P.transition().duration(c.duration).ease(c.easing)),P.attr("d",L)}else P.remove()}})}})};function e(o,a,r){var n={x:a.c2p(o.x),y:r.c2p(o.y)};return o.yh!==void 0&&(n.yh=r.c2p(o.yh),n.ys=r.c2p(o.ys),l(n.ys)||(n.noYS=!0,n.ys=r.c2p(o.ys,!0))),o.xh!==void 0&&(n.xh=a.c2p(o.xh),n.xs=a.c2p(o.xs),l(n.xs)||(n.noXS=!0,n.xs=a.c2p(o.xs,!0))),n}},{"../../traces/scatter/subtypes":951,"../drawing":388,"@plotly/d3":58,"fast-isnumeric":190}],396:[function(t,B,H){var d=t("@plotly/d3"),l=t("../color");B.exports=function(w){w.each(function(e){var o=e[0].trace,a=o.error_y||{},r=o.error_x||{},n=d.select(this);n.selectAll("path.yerror").style("stroke-width",a.thickness+"px").call(l.stroke,a.color),r.copy_ystyle&&(r=a),n.selectAll("path.xerror").style("stroke-width",r.thickness+"px").call(l.stroke,r.color)})}},{"../color":366,"@plotly/d3":58}],397:[function(t,B,H){var d=t("../../plots/font_attributes"),l=t("./layout_attributes").hoverlabel,b=t("../../lib/extend").extendFlat;B.exports={hoverlabel:{bgcolor:b({},l.bgcolor,{arrayOk:!0}),bordercolor:b({},l.bordercolor,{arrayOk:!0}),font:d({arrayOk:!0,editType:"none"}),align:b({},l.align,{arrayOk:!0}),namelength:b({},l.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":493,"../../plots/font_attributes":585,"./layout_attributes":407}],398:[function(t,B,H){var d=t("../../lib"),l=t("../../registry");B.exports=function(e){var o=e.calcdata,a=e._fullLayout;function r(v){return function(u){return d.coerceHoverinfo({hoverinfo:u},{_module:v._module},a)}}for(var n=0;n<o.length;n++){var c=o[n],s=c[0].trace;if(!l.traceIs(s,"pie-like")){var i=l.traceIs(s,"2dMap")?b:d.fillArray;i(s.hoverinfo,c,"hi",r(s)),s.hovertemplate&&i(s.hovertemplate,c,"ht"),s.hoverlabel&&(i(s.hoverlabel.bgcolor,c,"hbg"),i(s.hoverlabel.bordercolor,c,"hbc"),i(s.hoverlabel.font.size,c,"hts"),i(s.hoverlabel.font.color,c,"htc"),i(s.hoverlabel.font.family,c,"htf"),i(s.hoverlabel.namelength,c,"hnl"),i(s.hoverlabel.align,c,"hta"))}}};function b(w,e,o,a){a=a||d.identity,Array.isArray(w)&&(e[0][o]=a(w))}},{"../../lib":503,"../../registry":638}],399:[function(t,B,H){var d=t("../../registry"),l=t("./hover").hover;B.exports=function(w,e,o){var a=d.getComponentMethod("annotations","onClick")(w,w._hoverdata);o!==void 0&&l(w,e,o,!0);function r(){w.emit("plotly_click",{points:w._hoverdata,event:e})}w._hoverdata&&e&&e.target&&(a&&a.then?a.then(r):r(),e.stopImmediatePropagation&&e.stopImmediatePropagation())}},{"../../registry":638,"./hover":403}],400:[function(t,B,H){B.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],401:[function(t,B,H){var d=t("../../lib"),l=t("./attributes"),b=t("./hoverlabel_defaults");B.exports=function(e,o,a,r){function n(s,i){return d.coerce(e,o,l,s,i)}var c=d.extendFlat({},r.hoverlabel);o.hovertemplate&&(c.namelength=-1),b(e,o,n,c)}},{"../../lib":503,"./attributes":397,"./hoverlabel_defaults":404}],402:[function(t,B,H){var d=t("../../lib");H.getSubplot=function(a){return a.subplot||a.xaxis+a.yaxis||a.geo},H.isTraceInSubplots=function(a,r){if(a.type==="splom"){for(var n=a.xaxes||[],c=a.yaxes||[],s=0;s<n.length;s++)for(var i=0;i<c.length;i++)if(r.indexOf(n[s]+c[i])!==-1)return!0;return!1}return r.indexOf(H.getSubplot(a))!==-1},H.flat=function(a,r){for(var n=new Array(a.length),c=0;c<a.length;c++)n[c]=r;return n},H.p2c=function(a,r){for(var n=new Array(a.length),c=0;c<a.length;c++)n[c]=a[c].p2c(r);return n},H.getDistanceFunction=function(a,r,n,c){return a==="closest"?c||H.quadrature(r,n):a.charAt(0)==="x"?r:n},H.getClosest=function(a,r,n){if(n.index!==!1)n.index>=0&&n.index<a.length?n.distance=0:n.index=!1;else for(var c=0;c<a.length;c++){var s=r(a[c]);s<=n.distance&&(n.index=c,n.distance=s)}return n},H.inbox=function(a,r,n){return a*r<0||a===0?n:1/0},H.quadrature=function(a,r){return function(n){var c=a(n),s=r(n);return Math.sqrt(c*c+s*s)}},H.makeEventData=function(a,r,n){var c="index"in a?a.index:a.pointNumber,s={data:r._input,fullData:r,curveNumber:r.index,pointNumber:c};if(r._indexToPoints){var i=r._indexToPoints[c];i.length===1?s.pointIndex=i[0]:s.pointIndices=i}else s.pointIndex=c;return r._module.eventData?s=r._module.eventData(s,a,r,n,c):("xVal"in a?s.x=a.xVal:"x"in a&&(s.x=a.x),"yVal"in a?s.y=a.yVal:"y"in a&&(s.y=a.y),a.xa&&(s.xaxis=a.xa),a.ya&&(s.yaxis=a.ya),a.zLabelVal!==void 0&&(s.z=a.zLabelVal)),H.appendArrayPointValue(s,r,c),s},H.appendArrayPointValue=function(a,r,n){var c=r._arrayAttrs;if(!!c)for(var s=0;s<c.length;s++){var i=c[s],v=b(i);if(a[v]===void 0){var u=d.nestedProperty(r,i).get(),g=w(u,n);g!==void 0&&(a[v]=g)}}},H.appendArrayMultiPointValues=function(a,r,n){var c=r._arrayAttrs;if(!!c)for(var s=0;s<c.length;s++){var i=c[s],v=b(i);if(a[v]===void 0){for(var u=d.nestedProperty(r,i).get(),g=new Array(n.length),h=0;h<n.length;h++)g[h]=w(u,n[h]);a[v]=g}}};var l={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function b(a){return l[a]||a}function w(a,r){if(Array.isArray(r)){if(Array.isArray(a)&&Array.isArray(a[r[0]]))return a[r[0]][r[1]]}else return a[r]}var e={x:!0,y:!0},o={"x unified":!0,"y unified":!0};H.isUnifiedHover=function(a){return typeof a!="string"?!1:!!o[a]},H.isXYhover=function(a){return typeof a!="string"?!1:!!e[a]}},{"../../lib":503}],403:[function(t,B,H){var d=t("@plotly/d3"),l=t("fast-isnumeric"),b=t("tinycolor2"),w=t("../../lib"),e=w.strTranslate,o=w.strRotate,a=t("../../lib/events"),r=t("../../lib/svg_text_utils"),n=t("../../lib/override_cursor"),c=t("../drawing"),s=t("../color"),i=t("../dragelement"),v=t("../../plots/cartesian/axes"),u=t("../../registry"),g=t("./helpers"),h=t("./constants"),y=t("../legend/defaults"),p=t("../legend/draw"),A=h.YANGLE,m=Math.PI*A/180,M=1/Math.sin(m),x=Math.cos(m),T=Math.sin(m),_=h.HOVERARROWSIZE,f=h.HOVERTEXTPAD,L={box:!0,ohlc:!0,violin:!0,candlestick:!0},S={scatter:!0,scattergl:!0,splom:!0};H.hover=function(V,re,ee,j){V=w.getGraphDiv(V);var Q=re.target;w.throttle(V._fullLayout._uid+h.HOVERID,h.HOVERMINTIME,function(){k(V,re,ee,j,Q)})},H.loneHover=function(V,re){var ee=!0;Array.isArray(V)||(ee=!1,V=[V]);var j=re.gd,Q=se(j),ne=le(j),ae=V.map(function(Ae){var Ne=Ae._x0||Ae.x0||Ae.x||0,He=Ae._x1||Ae.x1||Ae.x||0,Ge=Ae._y0||Ae.y0||Ae.y||0,_e=Ae._y1||Ae.y1||Ae.y||0,De=Ae.eventData;if(De){var Ye=Math.min(Ne,He),qe=Math.max(Ne,He),Ue=Math.min(Ge,_e),Ie=Math.max(Ge,_e),Ve=Ae.trace;if(u.traceIs(Ve,"gl3d")){var dt=j._fullLayout[Ve.scene]._scene.container,Dt=dt.offsetLeft,Yt=dt.offsetTop;Ye+=Dt,qe+=Dt,Ue+=Yt,Ie+=Yt}De.bbox={x0:Ye+ne,x1:qe+ne,y0:Ue+Q,y1:Ie+Q},re.inOut_bbox&&re.inOut_bbox.push(De.bbox)}else De=!1;return{color:Ae.color||s.defaultLine,x0:Ae.x0||Ae.x||0,x1:Ae.x1||Ae.x||0,y0:Ae.y0||Ae.y||0,y1:Ae.y1||Ae.y||0,xLabel:Ae.xLabel,yLabel:Ae.yLabel,zLabel:Ae.zLabel,text:Ae.text,name:Ae.name,idealAlign:Ae.idealAlign,borderColor:Ae.borderColor,fontFamily:Ae.fontFamily,fontSize:Ae.fontSize,fontColor:Ae.fontColor,nameLength:Ae.nameLength,textAlign:Ae.textAlign,trace:Ae.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:Ae.hovertemplate||!1,hovertemplateLabels:Ae.hovertemplateLabels||!1,eventData:De}}),ie=!1,ue=I(ae,{gd:j,hovermode:"closest",rotateLabels:ie,bgColor:re.bgColor||s.background,container:d.select(re.container),outerContainer:re.outerContainer||re.container}),xe=5,he=0,ge=0;ue.sort(function(Ae,Ne){return Ae.y0-Ne.y0}).each(function(Ae,Ne){var He=Ae.y0-Ae.by/2;He-xe<he?Ae.offset=he-He+xe:Ae.offset=0,he=He+Ae.by+Ae.offset,Ne===re.anchorIndex&&(ge=Ae.offset)}).each(function(Ae){Ae.offset-=ge});var me=j._fullLayout._invScaleX,ke=j._fullLayout._invScaleY;return O(ue,ie,me,ke),ee?ue:ue.node()};function k(U,V,re,ee,j){re||(re="xy");var Q=Array.isArray(re)?re:[re],ne=U._fullLayout,ae=ne._plots||[],ie=ae[re],ue=ne._has("cartesian");if(ie){var xe=ie.overlays.map(function(hr){return hr.id});Q=Q.concat(xe)}for(var he=Q.length,ge=new Array(he),me=new Array(he),ke=!1,Ae=0;Ae<he;Ae++){var Ne=Q[Ae];if(ae[Ne])ke=!0,ge[Ae]=ae[Ne].xaxis,me[Ae]=ae[Ne].yaxis;else if(ne[Ne]&&ne[Ne]._subplot){var He=ne[Ne]._subplot;ge[Ae]=He.xaxis,me[Ae]=He.yaxis}else{w.warn("Unrecognized subplot: "+Ne);return}}var Ge=V.hovermode||ne.hovermode;if(Ge&&!ke&&(Ge="closest"),["x","y","closest","x unified","y unified"].indexOf(Ge)===-1||!U.calcdata||U.querySelector(".zoombox")||U._dragging)return i.unhoverRaw(U,V);var _e=ne.hoverdistance;_e===-1&&(_e=1/0);var De=ne.spikedistance;De===-1&&(De=1/0);var Ye=[],qe=[],Ue,Ie,Ve,dt,Dt,Yt,kt,Ft,Nt,Lt,St,it,ht,Qe={hLinePoint:null,vLinePoint:null},Ce=!1;if(Array.isArray(V))for(Ge="array",Ve=0;Ve<V.length;Ve++)Dt=U.calcdata[V[Ve].curveNumber||0],Dt&&(Yt=Dt[0].trace,Dt[0].trace.hoverinfo!=="skip"&&(qe.push(Dt),Yt.orientation==="h"&&(Ce=!0)));else{for(dt=0;dt<U.calcdata.length;dt++)Dt=U.calcdata[dt],Yt=Dt[0].trace,Yt.hoverinfo!=="skip"&&g.isTraceInSubplots(Yt,Q)&&(qe.push(Dt),Yt.orientation==="h"&&(Ce=!0));var je=!j,rt,ut;if(je)"xpx"in V?rt=V.xpx:rt=ge[0]._length/2,"ypx"in V?ut=V.ypx:ut=me[0]._length/2;else{if(a.triggerHandler(U,"plotly_beforehover",V)===!1)return;var Pt=j.getBoundingClientRect();rt=V.clientX-Pt.left,ut=V.clientY-Pt.top,ne._calcInverseTransform(U);var Tt=w.apply3DTransform(ne._invTransform)(rt,ut);if(rt=Tt[0],ut=Tt[1],rt<0||rt>ge[0]._length||ut<0||ut>me[0]._length)return i.unhoverRaw(U,V)}if(V.pointerX=rt+ge[0]._offset,V.pointerY=ut+me[0]._offset,"xval"in V?Ue=g.flat(Q,V.xval):Ue=g.p2c(ge,rt),"yval"in V?Ie=g.flat(Q,V.yval):Ie=g.p2c(me,ut),!l(Ue[0])||!l(Ie[0]))return w.warn("Fx.hover failed",V,U),i.unhoverRaw(U,V)}var Ot=1/0;function Kt(hr,Vr){for(dt=0;dt<qe.length;dt++)if(Dt=qe[dt],!(!Dt||!Dt[0]||!Dt[0].trace)&&(Yt=Dt[0].trace,!(Yt.visible!==!0||Yt._length===0)&&["carpet","contourcarpet"].indexOf(Yt._module.name)===-1)){if(Yt.type==="splom"?(Ft=0,kt=Q[Ft]):(kt=g.getSubplot(Yt),Ft=Q.indexOf(kt)),Nt=Ge,g.isUnifiedHover(Nt)&&(Nt=Nt.charAt(0)),it={cd:Dt,trace:Yt,xa:ge[Ft],ya:me[Ft],maxHoverDistance:_e,maxSpikeDistance:De,index:!1,distance:Math.min(Ot,_e),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:s.defaultLine,name:Yt.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},ne[kt]&&(it.subplot=ne[kt]._subplot),ne._splomScenes&&ne._splomScenes[Yt.uid]&&(it.scene=ne._splomScenes[Yt.uid]),ht=Ye.length,Nt==="array"){var Rr=V[dt];"pointNumber"in Rr?(it.index=Rr.pointNumber,Nt="closest"):(Nt="","xval"in Rr&&(Lt=Rr.xval,Nt="x"),"yval"in Rr&&(St=Rr.yval,Nt=Nt?"closest":"y"))}else hr!==void 0&&Vr!==void 0?(Lt=hr,St=Vr):(Lt=Ue[Ft],St=Ie[Ft]);if(_e!==0)if(Yt._module&&Yt._module.hoverPoints){var Er=Yt._module.hoverPoints(it,Lt,St,Nt,{finiteRange:!0,hoverLayer:ne._hoverlayer});if(Er)for(var xr,Wr=0;Wr<Er.length;Wr++)xr=Er[Wr],l(xr.x0)&&l(xr.y0)&&Ye.push(F(xr,Ge))}else w.log("Unrecognized trace type in hover:",Yt);if(Ge==="closest"&&Ye.length>ht&&(Ye.splice(0,ht),Ot=Ye[0].distance),ue&&De!==0&&Ye.length===0){it.distance=De,it.index=!1;var Rn=Yt._module.hoverPoints(it,Lt,St,"closest",{hoverLayer:ne._hoverlayer});if(Rn&&(Rn=Rn.filter(function(pr){return pr.spikeDistance<=De})),Rn&&Rn.length){var En,ea=Rn.filter(function(pr){return pr.xa.showspikes&&pr.xa.spikesnap!=="hovered data"});if(ea.length){var ia=ea[0];l(ia.x0)&&l(ia.y0)&&(En=Zt(ia),(!Qe.vLinePoint||Qe.vLinePoint.spikeDistance>En.spikeDistance)&&(Qe.vLinePoint=En))}var Aa=Rn.filter(function(pr){return pr.ya.showspikes&&pr.ya.spikesnap!=="hovered data"});if(Aa.length){var ya=Aa[0];l(ya.x0)&&l(ya.y0)&&(En=Zt(ya),(!Qe.hLinePoint||Qe.hLinePoint.spikeDistance>En.spikeDistance)&&(Qe.hLinePoint=En))}}}}}Kt();function Bt(hr,Vr,Rr){for(var Er=null,xr=1/0,Wr,Rn=0;Rn<hr.length;Rn++)Wr=hr[Rn].spikeDistance,Rr&&Rn===0&&(Wr=-1/0),Wr<=xr&&Wr<=Vr&&(Er=hr[Rn],xr=Wr);return Er}function Zt(hr){return hr?{xa:hr.xa,ya:hr.ya,x:hr.xSpike!==void 0?hr.xSpike:(hr.x0+hr.x1)/2,y:hr.ySpike!==void 0?hr.ySpike:(hr.y0+hr.y1)/2,distance:hr.distance,spikeDistance:hr.spikeDistance,curveNumber:hr.trace.index,color:hr.color,pointNumber:hr.index}:null}var Je={fullLayout:ne,container:ne._hoverlayer,event:V},pt=U._spikepoints,Et={vLinePoint:Qe.vLinePoint,hLinePoint:Qe.hLinePoint};U._spikepoints=Et;var ar=function(){Ye.sort(function(hr,Vr){return hr.distance-Vr.distance}),Ye=X(Ye,Ge)};ar();var vr=Ge.charAt(0),ir=(vr==="x"||vr==="y")&&Ye[0]&&S[Ye[0].trace.type];if(ue&&De!==0&&Ye.length!==0){var dr=Ye.filter(function(hr){return hr.ya.showspikes}),Pr=Bt(dr,De,ir);Qe.hLinePoint=Zt(Pr);var Sr=Ye.filter(function(hr){return hr.xa.showspikes}),tr=Bt(Sr,De,ir);Qe.vLinePoint=Zt(tr)}if(Ye.length===0){var Nr=i.unhoverRaw(U,V);return ue&&(Qe.hLinePoint!==null||Qe.vLinePoint!==null)&&q(pt)&&G(U,Qe,Je),Nr}if(ue&&q(pt)&&G(U,Qe,Je),g.isXYhover(Nt)&&Ye[0].length!==0&&Ye[0].trace.type!=="splom"){var et=Ye[0];L[et.trace.type]?Ye=Ye.filter(function(hr){return hr.trace.index===et.trace.index}):Ye=[et];var we=Ye.length,Me=Z("x",et,ne),Re=Z("y",et,ne);Kt(Me,Re);var Xe=[],$e={},ot=0,st=function(hr){var Vr=L[hr.trace.type]?P(hr):hr.trace.index;if(!$e[Vr])ot++,$e[Vr]=ot,Xe.push(hr);else{var Rr=$e[Vr]-1,Er=Xe[Rr];Rr>0&&Math.abs(hr.distance)<Math.abs(Er.distance)&&(Xe[Rr]=hr)}},yt;for(yt=0;yt<we;yt++)st(Ye[yt]);for(yt=Ye.length-1;yt>we-1;yt--)st(Ye[yt]);Ye=Xe,ar()}var wt=U._hoverdata,Vt=[],gr=se(U),wr=le(U);for(Ve=0;Ve<Ye.length;Ve++){var Lr=Ye[Ve],fr=g.makeEventData(Lr,Lr.trace,Lr.cd);if(Lr.hovertemplate!==!1){var Fr=!1;Lr.cd[Lr.index]&&Lr.cd[Lr.index].ht&&(Fr=Lr.cd[Lr.index].ht),Lr.hovertemplate=Fr||Lr.trace.hovertemplate||!1}if(Lr.xa&&Lr.ya){var nn=Lr.x0+Lr.xa._offset,yr=Lr.x1+Lr.xa._offset,_r=Lr.y0+Lr.ya._offset,dn=Lr.y1+Lr.ya._offset,Yr=Math.min(nn,yr),Ar=Math.max(nn,yr),an=Math.min(_r,dn),rn=Math.max(_r,dn);fr.bbox={x0:Yr+wr,x1:Ar+wr,y0:an+gr,y1:rn+gr}}Lr.eventData=[fr],Vt.push(fr)}U._hoverdata=Vt;var Zr=Ge==="y"&&(qe.length>1||Ye.length>1)||Ge==="closest"&&Ce&&Ye.length>1,at=s.combine(ne.plot_bgcolor||s.background,ne.paper_bgcolor),zt=I(Ye,{gd:U,hovermode:Ge,rotateLabels:Zr,bgColor:at,container:ne._hoverlayer,outerContainer:ne._paper.node(),commonLabelOpts:ne.hoverlabel,hoverdistance:ne.hoverdistance});if(g.isUnifiedHover(Ge)||(D(zt,Zr?"xa":"ya",ne),O(zt,Zr,ne._invScaleX,ne._invScaleY)),j&&j.tagName){var er=u.getComponentMethod("annotations","hasClickToShow")(U,Vt);n(d.select(j),er?"pointer":"")}!j||ee||!W(U,V,wt)||(wt&&U.emit("plotly_unhover",{event:V,points:wt}),U.emit("plotly_hover",{event:V,points:U._hoverdata,xaxes:ge,yaxes:me,xvals:Ue,yvals:Ie}))}function P(U){return[U.trace.index,U.index,U.x0,U.y0,U.name,U.attr,U.xa?U.xa._id:"",U.ya?U.ya._id:""].join(",")}var z=/<extra>([\s\S]*)<\/extra>/;function I(U,V){var re=V.gd,ee=re._fullLayout,j=V.hovermode,Q=V.rotateLabels,ne=V.bgColor,ae=V.container,ie=V.outerContainer,ue=V.commonLabelOpts||{};if(U.length===0)return[[]];var xe=V.fontFamily||h.HOVERFONT,he=V.fontSize||h.HOVERFONTSIZE,ge=U[0],me=ge.xa,ke=ge.ya,Ae=j.charAt(0),Ne=ge[Ae+"Label"],He=oe(re,ie),Ge=He.top,_e=He.width,De=He.height,Ye=Ne!==void 0&&ge.distance<=V.hoverdistance&&(j==="x"||j==="y");if(Ye){var qe=!0,Ue,Ie;for(Ue=0;Ue<U.length;Ue++)if(qe&&U[Ue].zLabel===void 0&&(qe=!1),Ie=U[Ue].hoverinfo||U[Ue].trace.hoverinfo,Ie){var Ve=Array.isArray(Ie)?Ie:Ie.split("+");if(Ve.indexOf("all")===-1&&Ve.indexOf(j)===-1){Ye=!1;break}}qe&&(Ye=!1)}var dt=ae.selectAll("g.axistext").data(Ye?[0]:[]);if(dt.enter().append("g").classed("axistext",!0),dt.exit().remove(),dt.each(function(){var tr=d.select(this),Nr=w.ensureSingle(tr,"path","",function(dn){dn.style({"stroke-width":"1px"})}),et=w.ensureSingle(tr,"text","",function(dn){dn.attr("data-notex",1)}),we=ue.bgcolor||s.defaultLine,Me=ue.bordercolor||s.contrast(we),Re=s.contrast(we),Xe={family:ue.font.family||xe,size:ue.font.size||he,color:ue.font.color||Re};Nr.style({fill:we,stroke:Me}),et.text(Ne).call(c.font,Xe).call(r.positionText,0,0).call(r.convertToTspans,re),tr.attr("transform","");var $e=oe(re,et.node()),ot,st;if(j==="x"){var yt=me.side==="top"?"-":"";et.attr("text-anchor","middle").call(r.positionText,0,me.side==="top"?Ge-$e.bottom-_-f:Ge-$e.top+_+f),ot=me._offset+(ge.x0+ge.x1)/2,st=ke._offset+(me.side==="top"?0:ke._length);var wt=$e.width/2+f;ot<wt?(ot=wt,Nr.attr("d","M-"+(wt-_)+",0L-"+(wt-_*2)+","+yt+_+"H"+(f+$e.width/2)+"v"+yt+(f*2+$e.height)+"H-"+wt+"V"+yt+_+"Z")):ot>ee.width-wt?(ot=ee.width-wt,Nr.attr("d","M"+(wt-_)+",0L"+wt+","+yt+_+"v"+yt+(f*2+$e.height)+"H-"+wt+"V"+yt+_+"H"+(wt-_*2)+"Z")):Nr.attr("d","M0,0L"+_+","+yt+_+"H"+(f+$e.width/2)+"v"+yt+(f*2+$e.height)+"H-"+(f+$e.width/2)+"V"+yt+_+"H-"+_+"Z")}else{var Vt,gr,wr;ke.side==="right"?(Vt="start",gr=1,wr="",ot=me._offset+me._length):(Vt="end",gr=-1,wr="-",ot=me._offset),st=ke._offset+(ge.y0+ge.y1)/2,et.attr("text-anchor",Vt),Nr.attr("d","M0,0L"+wr+_+","+_+"V"+(f+$e.height/2)+"h"+wr+(f*2+$e.width)+"V-"+(f+$e.height/2)+"H"+wr+_+"V-"+_+"Z");var Lr=$e.height/2,fr=Ge-$e.top-Lr,Fr="clip"+ee._uid+"commonlabel"+ke._id,nn;if(ot<$e.width+2*f+_){nn="M-"+(_+f)+"-"+Lr+"h-"+($e.width-f)+"V"+Lr+"h"+($e.width-f)+"Z";var yr=$e.width-ot+f;r.positionText(et,yr,fr),Vt==="end"&&et.selectAll("tspan").each(function(){var dn=d.select(this),Yr=c.tester.append("text").text(dn.text()).call(c.font,Xe),Ar=oe(re,Yr.node());Math.round(Ar.width)<Math.round($e.width)&&dn.attr("x",yr-Ar.width),Yr.remove()})}else r.positionText(et,gr*(f+_),fr),nn=null;var _r=ee._topclips.selectAll("#"+Fr).data(nn?[0]:[]);_r.enter().append("clipPath").attr("id",Fr).append("path"),_r.exit().remove(),_r.select("path").attr("d",nn),c.setClipUrl(et,nn?Fr:null,re)}tr.attr("transform",e(ot,st))}),g.isUnifiedHover(j)){ae.selectAll("g.hovertext").remove();var Dt=U.filter(function(tr){return tr.hoverinfo!=="none"});if(Dt.length===0)return;var Yt=ee.hoverlabel,kt=Yt.font,Ft={showlegend:!0,legend:{title:{text:Ne,font:kt},font:kt,bgcolor:Yt.bgcolor,bordercolor:Yt.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:ee.legend?ee.legend.traceorder:void 0,orientation:"v"}},Nt={font:kt};y(Ft,Nt,re._fullData);var Lt=Nt.legend;Lt.entries=[];for(var St=0;St<Dt.length;St++){var it=Dt[St];if(it.hoverinfo!=="none"){var ht=R(it,!0,j,ee,Ne),Qe=ht[0],Ce=ht[1];it.name=Ce,Ce!==""?it.text=Ce+" : "+Qe:it.text=Qe;var je=it.cd[it.index];je&&(je.mc&&(it.mc=je.mc),je.mcc&&(it.mc=je.mcc),je.mlc&&(it.mlc=je.mlc),je.mlcc&&(it.mlc=je.mlcc),je.mlw&&(it.mlw=je.mlw),je.mrc&&(it.mrc=je.mrc),je.dir&&(it.dir=je.dir)),it._distinct=!0,Lt.entries.push([it])}}Lt.entries.sort(function(tr,Nr){return tr[0].trace.index-Nr[0].trace.index}),Lt.layer=ae,Lt._inHover=!0,Lt._groupTitleFont=Yt.grouptitlefont,p(re,Lt);var rt=ae.select("g.legend"),ut=oe(re,rt.node()),Pt=ut.width+2*f,Tt=ut.height+2*f,Ot=Dt[0],Kt=(Ot.x0+Ot.x1)/2,Bt=(Ot.y0+Ot.y1)/2,Zt=!(u.traceIs(Ot.trace,"bar-like")||u.traceIs(Ot.trace,"box-violin")),Je,pt;Ae==="y"?Zt?(pt=Bt-f,Je=Bt+f):(pt=Math.min.apply(null,Dt.map(function(tr){return Math.min(tr.y0,tr.y1)})),Je=Math.max.apply(null,Dt.map(function(tr){return Math.max(tr.y0,tr.y1)}))):pt=Je=w.mean(Dt.map(function(tr){return(tr.y0+tr.y1)/2}))-Tt/2;var Et,ar;Ae==="x"?Zt?(Et=Kt+f,ar=Kt-f):(Et=Math.max.apply(null,Dt.map(function(tr){return Math.max(tr.x0,tr.x1)})),ar=Math.min.apply(null,Dt.map(function(tr){return Math.min(tr.x0,tr.x1)}))):Et=ar=w.mean(Dt.map(function(tr){return(tr.x0+tr.x1)/2}))-Pt/2;var vr=me._offset,ir=ke._offset;Je+=ir,Et+=vr,ar+=vr-Pt,pt+=ir-Tt;var dr,Pr;return Et+Pt<_e&&Et>=0?dr=Et:ar+Pt<_e&&ar>=0?dr=ar:vr+Pt<_e?dr=vr:Et-Kt<Kt-ar+Pt?dr=_e-Pt:dr=0,dr+=f,Je+Tt<De&&Je>=0?Pr=Je:pt+Tt<De&&pt>=0?Pr=pt:ir+Tt<De?Pr=ir:Je-Bt<Bt-pt+Tt?Pr=De-Tt:Pr=0,Pr+=f,rt.attr("transform",e(dr-1,Pr-1)),rt}var Sr=ae.selectAll("g.hovertext").data(U,function(tr){return P(tr)});return Sr.enter().append("g").classed("hovertext",!0).each(function(){var tr=d.select(this);tr.append("rect").call(s.fill,s.addOpacity(ne,.8)),tr.append("text").classed("name",!0),tr.append("path").style("stroke-width","1px"),tr.append("text").classed("nums",!0).call(c.font,xe,he)}),Sr.exit().remove(),Sr.each(function(tr){var Nr=d.select(this).attr("transform",""),et=tr.color;Array.isArray(et)&&(et=et[tr.eventData[0].pointNumber]);var we=tr.bgcolor||et,Me=s.combine(s.opacity(we)?we:s.defaultLine,ne),Re=s.combine(s.opacity(et)?et:s.defaultLine,ne),Xe=tr.borderColor||s.contrast(Me),$e=R(tr,Ye,j,ee,Ne,Nr),ot=$e[0],st=$e[1],yt=Nr.select("text.nums").call(c.font,tr.fontFamily||xe,tr.fontSize||he,tr.fontColor||Xe).text(ot).attr("data-notex",1).call(r.positionText,0,0).call(r.convertToTspans,re),wt=Nr.select("text.name"),Vt=0,gr=0;if(st&&st!==ot){wt.call(c.font,tr.fontFamily||xe,tr.fontSize||he,Re).text(st).attr("data-notex",1).call(r.positionText,0,0).call(r.convertToTspans,re);var wr=oe(re,wt.node());Vt=wr.width+2*f,gr=wr.height+2*f}else wt.remove(),Nr.select("rect").remove();Nr.select("path").style({fill:Me,stroke:Xe});var Lr=tr.xa._offset+(tr.x0+tr.x1)/2,fr=tr.ya._offset+(tr.y0+tr.y1)/2,Fr=Math.abs(tr.x1-tr.x0),nn=Math.abs(tr.y1-tr.y0),yr=oe(re,yt.node()),_r=yr.width/ee._invScaleX,dn=yr.height/ee._invScaleY;tr.ty0=(Ge-yr.top)/ee._invScaleY,tr.bx=_r+2*f,tr.by=Math.max(dn+2*f,gr),tr.anchor="start",tr.txwidth=_r,tr.tx2width=Vt,tr.offset=0;var Yr=(_r+_+f+Vt)*ee._invScaleX,Ar,an;if(Q)tr.pos=Lr,Ar=fr+nn/2+Yr<=De,an=fr-nn/2-Yr>=0,(tr.idealAlign==="top"||!Ar)&&an?(fr-=nn/2,tr.anchor="end"):Ar?(fr+=nn/2,tr.anchor="start"):tr.anchor="middle";else if(tr.pos=fr,Ar=Lr+Fr/2+Yr<=_e,an=Lr-Fr/2-Yr>=0,(tr.idealAlign==="left"||!Ar)&&an)Lr-=Fr/2,tr.anchor="end";else if(Ar)Lr+=Fr/2,tr.anchor="start";else{tr.anchor="middle";var rn=Yr/2,Zr=Lr+rn-_e,at=Lr-rn;Zr>0&&(Lr-=Zr),at<0&&(Lr+=-at)}yt.attr("text-anchor",tr.anchor),Vt&&wt.attr("text-anchor",tr.anchor),Nr.attr("transform",e(Lr,fr)+(Q?o(A):""))}),Sr}function R(U,V,re,ee,j,Q){var ne="",ae="";U.nameOverride!==void 0&&(U.name=U.nameOverride),U.name&&(U.trace._meta&&(U.name=w.templateString(U.name,U.trace._meta)),ne=J(U.name,U.nameLength));var ie=re.charAt(0),ue=ie==="x"?"y":"x";U.zLabel!==void 0?(U.xLabel!==void 0&&(ae+="x: "+U.xLabel+"<br>"),U.yLabel!==void 0&&(ae+="y: "+U.yLabel+"<br>"),U.trace.type!=="choropleth"&&U.trace.type!=="choroplethmapbox"&&(ae+=(ae?"z: ":"")+U.zLabel)):V&&U[ie+"Label"]===j?ae=U[ue+"Label"]||"":U.xLabel===void 0?U.yLabel!==void 0&&U.trace.type!=="scattercarpet"&&(ae=U.yLabel):U.yLabel===void 0?ae=U.xLabel:ae="("+U.xLabel+", "+U.yLabel+")",(U.text||U.text===0)&&!Array.isArray(U.text)&&(ae+=(ae?"<br>":"")+U.text),U.extraText!==void 0&&(ae+=(ae?"<br>":"")+U.extraText),Q&&ae===""&&!U.hovertemplate&&(ne===""&&Q.remove(),ae=ne);var xe=U.hovertemplate||!1;if(xe){var he=U.hovertemplateLabels||U;U[ie+"Label"]!==j&&(he[ie+"other"]=he[ie+"Val"],he[ie+"otherLabel"]=he[ie+"Label"]),ae=w.hovertemplateString(xe,he,ee._d3locale,U.eventData[0]||{},U.trace._meta),ae=ae.replace(z,function(ge,me){return ne=J(me,U.nameLength),""})}return[ae,ne]}function D(U,V,re){var ee=0,j=1,Q=U.size(),ne=new Array(Q),ae=0;U.each(function(Ue){var Ie=Ue[V],Ve=Ie._id.charAt(0)==="x",dt=Ie.range;ae===0&&dt&&dt[0]>dt[1]!==Ve&&(j=-1),ne[ae++]=[{datum:Ue,traceIndex:Ue.trace.index,dp:0,pos:Ue.pos,posref:Ue.posref,size:Ue.by*(Ve?M:1)/2,pmin:0,pmax:Ve?re.width:re.height}]}),ne.sort(function(Ue,Ie){return Ue[0].posref-Ie[0].posref||j*(Ie[0].traceIndex-Ue[0].traceIndex)});var ie,ue,xe,he,ge,me,ke;function Ae(Ue){var Ie=Ue[0],Ve=Ue[Ue.length-1];if(ue=Ie.pmin-Ie.pos-Ie.dp+Ie.size,xe=Ve.pos+Ve.dp+Ve.size-Ie.pmax,ue>.01){for(ge=Ue.length-1;ge>=0;ge--)Ue[ge].dp+=ue;ie=!1}if(!(xe<.01)){if(ue<-.01){for(ge=Ue.length-1;ge>=0;ge--)Ue[ge].dp-=xe;ie=!1}if(!!ie){var dt=0;for(he=0;he<Ue.length;he++)me=Ue[he],me.pos+me.dp+me.size>Ie.pmax&&dt++;for(he=Ue.length-1;he>=0&&!(dt<=0);he--)me=Ue[he],me.pos>Ie.pmax-1&&(me.del=!0,dt--);for(he=0;he<Ue.length&&!(dt<=0);he++)if(me=Ue[he],me.pos<Ie.pmin+1)for(me.del=!0,dt--,xe=me.size*2,ge=Ue.length-1;ge>=0;ge--)Ue[ge].dp-=xe;for(he=Ue.length-1;he>=0&&!(dt<=0);he--)me=Ue[he],me.pos+me.dp+me.size>Ie.pmax&&(me.del=!0,dt--)}}}for(;!ie&&ee<=Q;){for(ee++,ie=!0,he=0;he<ne.length-1;){var Ne=ne[he],He=ne[he+1],Ge=Ne[Ne.length-1],_e=He[0];if(ue=Ge.pos+Ge.dp+Ge.size-_e.pos-_e.dp+_e.size,ue>.01&&Ge.pmin===_e.pmin&&Ge.pmax===_e.pmax){for(ge=He.length-1;ge>=0;ge--)He[ge].dp+=ue;for(Ne.push.apply(Ne,He),ne.splice(he+1,1),ke=0,ge=Ne.length-1;ge>=0;ge--)ke+=Ne[ge].dp;for(xe=ke/Ne.length,ge=Ne.length-1;ge>=0;ge--)Ne[ge].dp-=xe;ie=!1}else he++}ne.forEach(Ae)}for(he=ne.length-1;he>=0;he--){var De=ne[he];for(ge=De.length-1;ge>=0;ge--){var Ye=De[ge],qe=Ye.datum;qe.offset=Ye.dp,qe.del=Ye.del}}}function O(U,V,re,ee){var j=function(ne){return ne*re},Q=function(ne){return ne*ee};U.each(function(ne){var ae=d.select(this);if(ne.del)return ae.remove();var ie=ae.select("text.nums"),ue=ne.anchor,xe=ue==="end"?-1:1,he={start:1,end:-1,middle:0}[ue],ge=he*(_+f),me=ge+he*(ne.txwidth+f),ke=0,Ae=ne.offset,Ne=ue==="middle";Ne&&(ge-=ne.tx2width/2,me+=ne.txwidth/2+f),V&&(Ae*=-T,ke=ne.offset*x),ae.select("path").attr("d",Ne?"M-"+j(ne.bx/2+ne.tx2width/2)+","+Q(Ae-ne.by/2)+"h"+j(ne.bx)+"v"+Q(ne.by)+"h-"+j(ne.bx)+"Z":"M0,0L"+j(xe*_+ke)+","+Q(_+Ae)+"v"+Q(ne.by/2-_)+"h"+j(xe*ne.bx)+"v-"+Q(ne.by)+"H"+j(xe*_+ke)+"V"+Q(Ae-_)+"Z");var He=ke+ge,Ge=Ae+ne.ty0-ne.by/2+f,_e=ne.textAlign||"auto";_e!=="auto"&&(_e==="left"&&ue!=="start"?(ie.attr("text-anchor","start"),He=Ne?-ne.bx/2-ne.tx2width/2+f:-ne.bx-f):_e==="right"&&ue!=="end"&&(ie.attr("text-anchor","end"),He=Ne?ne.bx/2-ne.tx2width/2-f:ne.bx+f)),ie.call(r.positionText,j(He),Q(Ge)),ne.tx2width&&(ae.select("text.name").call(r.positionText,j(me+he*f+ke),Q(Ae+ne.ty0-ne.by/2+f)),ae.select("rect").call(c.setRect,j(me+(he-1)*ne.tx2width/2+ke),Q(Ae-ne.by/2-1),j(ne.tx2width),Q(ne.by+2)))})}function F(U,V){var re=U.index,ee=U.trace||{},j=U.cd[0],Q=U.cd[re]||{};function ne(ge){return ge||l(ge)&&ge===0}var ae=Array.isArray(re)?function(ge,me){var ke=w.castOption(j,re,ge);return ne(ke)?ke:w.extractOption({},ee,"",me)}:function(ge,me){return w.extractOption(Q,ee,ge,me)};function ie(ge,me,ke){var Ae=ae(me,ke);ne(Ae)&&(U[ge]=Ae)}if(ie("hoverinfo","hi","hoverinfo"),ie("bgcolor","hbg","hoverlabel.bgcolor"),ie("borderColor","hbc","hoverlabel.bordercolor"),ie("fontFamily","htf","hoverlabel.font.family"),ie("fontSize","hts","hoverlabel.font.size"),ie("fontColor","htc","hoverlabel.font.color"),ie("nameLength","hnl","hoverlabel.namelength"),ie("textAlign","hta","hoverlabel.align"),U.posref=V==="y"||V==="closest"&&ee.orientation==="h"?U.xa._offset+(U.x0+U.x1)/2:U.ya._offset+(U.y0+U.y1)/2,U.x0=w.constrain(U.x0,0,U.xa._length),U.x1=w.constrain(U.x1,0,U.xa._length),U.y0=w.constrain(U.y0,0,U.ya._length),U.y1=w.constrain(U.y1,0,U.ya._length),U.xLabelVal!==void 0&&(U.xLabel="xLabel"in U?U.xLabel:v.hoverLabelText(U.xa,U.xLabelVal,ee.xhoverformat),U.xVal=U.xa.c2d(U.xLabelVal)),U.yLabelVal!==void 0&&(U.yLabel="yLabel"in U?U.yLabel:v.hoverLabelText(U.ya,U.yLabelVal,ee.yhoverformat),U.yVal=U.ya.c2d(U.yLabelVal)),U.zLabelVal!==void 0&&U.zLabel===void 0&&(U.zLabel=String(U.zLabelVal)),!isNaN(U.xerr)&&!(U.xa.type==="log"&&U.xerr<=0)){var ue=v.tickText(U.xa,U.xa.c2l(U.xerr),"hover").text;U.xerrneg!==void 0?U.xLabel+=" +"+ue+" / -"+v.tickText(U.xa,U.xa.c2l(U.xerrneg),"hover").text:U.xLabel+=" \xB1 "+ue,V==="x"&&(U.distance+=1)}if(!isNaN(U.yerr)&&!(U.ya.type==="log"&&U.yerr<=0)){var xe=v.tickText(U.ya,U.ya.c2l(U.yerr),"hover").text;U.yerrneg!==void 0?U.yLabel+=" +"+xe+" / -"+v.tickText(U.ya,U.ya.c2l(U.yerrneg),"hover").text:U.yLabel+=" \xB1 "+xe,V==="y"&&(U.distance+=1)}var he=U.hoverinfo||U.trace.hoverinfo;return he&&he!=="all"&&(he=Array.isArray(he)?he:he.split("+"),he.indexOf("x")===-1&&(U.xLabel=void 0),he.indexOf("y")===-1&&(U.yLabel=void 0),he.indexOf("z")===-1&&(U.zLabel=void 0),he.indexOf("text")===-1&&(U.text=void 0),he.indexOf("name")===-1&&(U.name=void 0)),U}function G(U,V,re){var ee=re.container,j=re.fullLayout,Q=j._size,ne=re.event,ae=!!V.hLinePoint,ie=!!V.vLinePoint,ue,xe;if(ee.selectAll(".spikeline").remove(),!!(ie||ae)){var he=s.combine(j.plot_bgcolor,j.paper_bgcolor);if(ae){var ge=V.hLinePoint,me,ke;ue=ge&&ge.xa,xe=ge&&ge.ya;var Ae=xe.spikesnap;Ae==="cursor"?(me=ne.pointerX,ke=ne.pointerY):(me=ue._offset+ge.x,ke=xe._offset+ge.y);var Ne=b.readability(ge.color,he)<1.5?s.contrast(he):ge.color,He=xe.spikemode,Ge=xe.spikethickness,_e=xe.spikecolor||Ne,De=v.getPxPosition(U,xe),Ye,qe;if(He.indexOf("toaxis")!==-1||He.indexOf("across")!==-1){if(He.indexOf("toaxis")!==-1&&(Ye=De,qe=me),He.indexOf("across")!==-1){var Ue=xe._counterDomainMin,Ie=xe._counterDomainMax;xe.anchor==="free"&&(Ue=Math.min(Ue,xe.position),Ie=Math.max(Ie,xe.position)),Ye=Q.l+Ue*Q.w,qe=Q.l+Ie*Q.w}ee.insert("line",":first-child").attr({x1:Ye,x2:qe,y1:ke,y2:ke,"stroke-width":Ge,stroke:_e,"stroke-dasharray":c.dashStyle(xe.spikedash,Ge)}).classed("spikeline",!0).classed("crisp",!0),ee.insert("line",":first-child").attr({x1:Ye,x2:qe,y1:ke,y2:ke,"stroke-width":Ge+2,stroke:he}).classed("spikeline",!0).classed("crisp",!0)}He.indexOf("marker")!==-1&&ee.insert("circle",":first-child").attr({cx:De+(xe.side!=="right"?Ge:-Ge),cy:ke,r:Ge,fill:_e}).classed("spikeline",!0)}if(ie){var Ve=V.vLinePoint,dt,Dt;ue=Ve&&Ve.xa,xe=Ve&&Ve.ya;var Yt=ue.spikesnap;Yt==="cursor"?(dt=ne.pointerX,Dt=ne.pointerY):(dt=ue._offset+Ve.x,Dt=xe._offset+Ve.y);var kt=b.readability(Ve.color,he)<1.5?s.contrast(he):Ve.color,Ft=ue.spikemode,Nt=ue.spikethickness,Lt=ue.spikecolor||kt,St=v.getPxPosition(U,ue),it,ht;if(Ft.indexOf("toaxis")!==-1||Ft.indexOf("across")!==-1){if(Ft.indexOf("toaxis")!==-1&&(it=St,ht=Dt),Ft.indexOf("across")!==-1){var Qe=ue._counterDomainMin,Ce=ue._counterDomainMax;ue.anchor==="free"&&(Qe=Math.min(Qe,ue.position),Ce=Math.max(Ce,ue.position)),it=Q.t+(1-Ce)*Q.h,ht=Q.t+(1-Qe)*Q.h}ee.insert("line",":first-child").attr({x1:dt,x2:dt,y1:it,y2:ht,"stroke-width":Nt,stroke:Lt,"stroke-dasharray":c.dashStyle(ue.spikedash,Nt)}).classed("spikeline",!0).classed("crisp",!0),ee.insert("line",":first-child").attr({x1:dt,x2:dt,y1:it,y2:ht,"stroke-width":Nt+2,stroke:he}).classed("spikeline",!0).classed("crisp",!0)}Ft.indexOf("marker")!==-1&&ee.insert("circle",":first-child").attr({cx:dt,cy:St-(ue.side!=="top"?Nt:-Nt),r:Nt,fill:Lt}).classed("spikeline",!0)}}}function W(U,V,re){if(!re||re.length!==U._hoverdata.length)return!0;for(var ee=re.length-1;ee>=0;ee--){var j=re[ee],Q=U._hoverdata[ee];if(j.curveNumber!==Q.curveNumber||String(j.pointNumber)!==String(Q.pointNumber)||String(j.pointNumbers)!==String(Q.pointNumbers))return!0}return!1}function q(U,V){return!V||V.vLinePoint!==U._spikepoints.vLinePoint||V.hLinePoint!==U._spikepoints.hLinePoint}function J(U,V){return r.plainText(U||"",{len:V,allowedTags:["br","sub","sup","b","i","em"]})}function X(U,V){for(var re=V.charAt(0),ee=[],j=[],Q=[],ne=0;ne<U.length;ne++){var ae=U[ne];u.traceIs(ae.trace,"bar-like")||u.traceIs(ae.trace,"box-violin")?Q.push(ae):ae.trace[re+"period"]?j.push(ae):ee.push(ae)}return ee.concat(j).concat(Q)}function Z(U,V,re){var ee=V[U+"a"],j=V[U+"Val"],Q=V.cd[0];if(ee.type==="category")j=ee._categoriesMap[j];else if(ee.type==="date"){var ne=V.trace[U+"periodalignment"];if(ne){var ae=V.cd[V.index],ie=ae[U+"Start"];ie===void 0&&(ie=ae[U]);var ue=ae[U+"End"];ue===void 0&&(ue=ae[U]);var xe=ue-ie;ne==="end"?j+=xe:ne==="middle"&&(j+=xe/2)}j=ee.d2c(j)}return Q&&Q.t&&Q.t.posLetter===ee._id&&(re.boxmode==="group"||re.violinmode==="group")&&(j+=Q.t.dPos),j}function se(U){return U.offsetTop+U.clientTop}function le(U){return U.offsetLeft+U.clientLeft}function oe(U,V){var re=U._fullLayout,ee=V.getBoundingClientRect(),j=ee.x,Q=ee.y,ne=j+ee.width,ae=Q+ee.height,ie=w.apply3DTransform(re._invTransform)(j,Q),ue=w.apply3DTransform(re._invTransform)(ne,ae),xe=ie[0],he=ie[1],ge=ue[0],me=ue[1];return{x:xe,y:he,width:ge-xe,height:me-he,top:Math.min(he,me),left:Math.min(xe,ge),right:Math.max(xe,ge),bottom:Math.max(he,me)}}},{"../../lib":503,"../../lib/events":492,"../../lib/override_cursor":514,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../legend/defaults":418,"../legend/draw":419,"./constants":400,"./helpers":402,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],404:[function(t,B,H){var d=t("../../lib"),l=t("../color"),b=t("./helpers").isUnifiedHover;B.exports=function(e,o,a,r){r=r||{};var n=o.legend;function c(s){r.font[s]||(r.font[s]=n?o.legend.font[s]:o.font[s])}o&&b(o.hovermode)&&(r.font||(r.font={}),c("size"),c("family"),c("color"),n?(r.bgcolor||(r.bgcolor=l.combine(o.legend.bgcolor,o.paper_bgcolor)),r.bordercolor||(r.bordercolor=o.legend.bordercolor)):r.bgcolor||(r.bgcolor=o.paper_bgcolor)),a("hoverlabel.bgcolor",r.bgcolor),a("hoverlabel.bordercolor",r.bordercolor),a("hoverlabel.namelength",r.namelength),d.coerceFont(a,"hoverlabel.font",r.font),a("hoverlabel.align",r.align)}},{"../../lib":503,"../color":366,"./helpers":402}],405:[function(t,B,H){var d=t("../../lib"),l=t("./layout_attributes");B.exports=function(w,e){function o(a,r){return e[a]!==void 0?e[a]:d.coerce(w,e,l,a,r)}return o("clickmode"),o("hovermode")}},{"../../lib":503,"./layout_attributes":407}],406:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib"),b=t("../dragelement"),w=t("./helpers"),e=t("./layout_attributes"),o=t("./hover");B.exports={moduleType:"component",name:"fx",constants:t("./constants"),schema:{layout:e},attributes:t("./attributes"),layoutAttributes:e,supplyLayoutGlobalDefaults:t("./layout_global_defaults"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),getDistanceFunction:w.getDistanceFunction,getClosest:w.getClosest,inbox:w.inbox,quadrature:w.quadrature,appendArrayPointValue:w.appendArrayPointValue,castHoverOption:r,castHoverinfo:n,hover:o.hover,unhover:b.unhover,loneHover:o.loneHover,loneUnhover:a,click:t("./click")};function a(c){var s=l.isD3Selection(c)?c:d.select(c);s.selectAll("g.hovertext").remove(),s.selectAll(".spikeline").remove()}function r(c,s,i){return l.castOption(c,s,"hoverlabel."+i)}function n(c,s,i){function v(u){return l.coerceHoverinfo({hoverinfo:u},{_module:c._module},s)}return l.castOption(c,i,"hoverinfo",v)}},{"../../lib":503,"../dragelement":385,"./attributes":397,"./calc":398,"./click":399,"./constants":400,"./defaults":401,"./helpers":402,"./hover":403,"./layout_attributes":407,"./layout_defaults":408,"./layout_global_defaults":409,"@plotly/d3":58}],407:[function(t,B,H){var d=t("./constants"),l=t("../../plots/font_attributes"),b=l({editType:"none"});b.family.dflt=d.HOVERFONT,b.size.dflt=d.HOVERFONTSIZE,B.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:b,grouptitlefont:l({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":585,"./constants":400}],408:[function(t,B,H){var d=t("../../lib"),l=t("./layout_attributes"),b=t("./hovermode_defaults"),w=t("./hoverlabel_defaults");B.exports=function(o,a){function r(u,g){return d.coerce(o,a,l,u,g)}var n=b(o,a);n&&(r("hoverdistance"),r("spikedistance"));var c=r("dragmode");c==="select"&&r("selectdirection");var s=a._has("mapbox"),i=a._has("geo"),v=a._basePlotModules.length;a.dragmode==="zoom"&&((s||i)&&v===1||s&&i&&v===2)&&(a.dragmode="pan"),w(o,a,r),d.coerceFont(r,"hoverlabel.grouptitlefont",a.hoverlabel.font)}},{"../../lib":503,"./hoverlabel_defaults":404,"./hovermode_defaults":405,"./layout_attributes":407}],409:[function(t,B,H){var d=t("../../lib"),l=t("./hoverlabel_defaults"),b=t("./layout_attributes");B.exports=function(e,o){function a(r,n){return d.coerce(e,o,b,r,n)}l(e,o,a)}},{"../../lib":503,"./hoverlabel_defaults":404,"./layout_attributes":407}],410:[function(t,B,H){var d=t("../../lib"),l=t("../../lib/regex").counter,b=t("../../plots/domain").attributes,w=t("../../plots/cartesian/constants").idRegex,e=t("../../plot_api/plot_template"),o={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[l("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[w.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[w.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:b({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function a(i,v,u){var g=v[u+"axes"],h=Object.keys((i._splomAxes||{})[u]||{});if(Array.isArray(g))return g;if(h.length)return h}function r(i,v){var u=i.grid||{},g=a(v,u,"x"),h=a(v,u,"y");if(!i.grid&&!g&&!h)return;var y=Array.isArray(u.subplots)&&Array.isArray(u.subplots[0]),p=Array.isArray(g),A=Array.isArray(h),m=p&&g!==u.xaxes&&A&&h!==u.yaxes,M,x;y?(M=u.subplots.length,x=u.subplots[0].length):(A&&(M=h.length),p&&(x=g.length));var T=e.newContainer(v,"grid");function _(O,F){return d.coerce(u,T,o,O,F)}var f=_("rows",M),L=_("columns",x);if(!(f*L>1)){delete v.grid;return}if(!y&&!p&&!A){var S=_("pattern")==="independent";S&&(y=!0)}T._hasSubplotGrid=y;var k=_("roworder"),P=k==="top to bottom",z=y?.2:.1,I=y?.3:.1,R,D;m&&v._splomGridDflt&&(R=v._splomGridDflt.xside,D=v._splomGridDflt.yside),T._domains={x:n("x",_,z,R,L),y:n("y",_,I,D,f,P)}}function n(i,v,u,g,h,y){var p=v(i+"gap",u),A=v("domain."+i);v(i+"side",g);for(var m=new Array(h),M=A[0],x=(A[1]-M)/(h-p),T=x*(1-p),_=0;_<h;_++){var f=M+x*_;m[y?h-1-_:_]=[f,f+T]}return m}function c(i,v){var u=v.grid;if(!(!u||!u._domains)){var g=i.grid||{},h=v._subplots,y=u._hasSubplotGrid,p=u.rows,A=u.columns,m=u.pattern==="independent",M,x,T,_,f,L,S,k=u._axisMap={};if(y){var P=g.subplots||[];L=u.subplots=new Array(p);var z=1;for(M=0;M<p;M++){var I=L[M]=new Array(A),R=P[M]||[];for(x=0;x<A;x++)if(m?(f=z===1?"xy":"x"+z+"y"+z,z++):f=R[x],I[x]="",h.cartesian.indexOf(f)!==-1){if(S=f.indexOf("y"),T=f.slice(0,S),_=f.slice(S),k[T]!==void 0&&k[T]!==x||k[_]!==void 0&&k[_]!==M)continue;I[x]=f,k[T]=x,k[_]=M}}}else{var D=a(v,g,"x"),O=a(v,g,"y");u.xaxes=s(D,h.xaxis,A,k,"x"),u.yaxes=s(O,h.yaxis,p,k,"y")}var F=u._anchors={},G=u.roworder==="top to bottom";for(var W in k){var q=W.charAt(0),J=u[q+"side"],X,Z,se;if(J.length<8)F[W]="free";else if(q==="x"){if(J.charAt(0)==="t"===G?(X=0,Z=1,se=p):(X=p-1,Z=-1,se=-1),y){var le=k[W];for(M=X;M!==se;M+=Z)if(f=L[M][le],!!f&&(S=f.indexOf("y"),f.slice(0,S)===W)){F[W]=f.slice(S);break}}else for(M=X;M!==se;M+=Z)if(_=u.yaxes[M],h.cartesian.indexOf(W+_)!==-1){F[W]=_;break}}else if(J.charAt(0)==="l"?(X=0,Z=1,se=A):(X=A-1,Z=-1,se=-1),y){var oe=k[W];for(M=X;M!==se;M+=Z)if(f=L[oe][M],!!f&&(S=f.indexOf("y"),f.slice(S)===W)){F[W]=f.slice(0,S);break}}else for(M=X;M!==se;M+=Z)if(T=u.xaxes[M],h.cartesian.indexOf(T+W)!==-1){F[W]=T;break}}}}function s(i,v,u,g,h){var y=new Array(u),p;function A(m,M){v.indexOf(M)!==-1&&g[M]===void 0?(y[m]=M,g[M]=m):y[m]=""}if(Array.isArray(i))for(p=0;p<u;p++)A(p,i[p]);else for(A(0,h),p=1;p<u;p++)A(p,h+(p+1));return y}B.exports={moduleType:"component",name:"grid",schema:{layout:{grid:o}},layoutAttributes:o,sizeDefaults:r,contentDefaults:c}},{"../../lib":503,"../../lib/regex":520,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561,"../../plots/domain":584}],411:[function(t,B,H){var d=t("../../plots/cartesian/constants"),l=t("../../plot_api/plot_template").templatedArray;t("../../constants/axis_placeable_objects"),B.exports=l("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",d.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",d.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":472,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561}],412:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../lib/to_log_range");B.exports=function(w,e,o,a){e=e||{};var r=o==="log"&&e.type==="linear",n=o==="linear"&&e.type==="log";if(!!(r||n)){for(var c=w._fullLayout.images,s=e._id.charAt(0),i,v,u=0;u<c.length;u++)if(i=c[u],v="images["+u+"].",i[s+"ref"]===e._id){var g=i[s],h=i["size"+s],y=null,p=null;if(r){y=l(g,e.range);var A=h/Math.pow(10,y)/2;p=2*Math.log(A+Math.sqrt(1+A*A))/Math.LN10}else y=Math.pow(10,g),p=y*(Math.pow(10,h/2)-Math.pow(10,-h/2));d(y)?d(p)||(p=null):(y=null,p=null),a(v+s,y),a(v+"size"+s,p)}}}},{"../../lib/to_log_range":531,"fast-isnumeric":190}],413:[function(t,B,H){var d=t("../../lib"),l=t("../../plots/cartesian/axes"),b=t("../../plots/array_container_defaults"),w=t("./attributes"),e="images";B.exports=function(r,n){var c={name:e,handleItemDefaults:o};b(r,n,c)};function o(a,r,n){function c(A,m){return d.coerce(a,r,w,A,m)}var s=c("source"),i=c("visible",!!s);if(!i)return r;c("layer"),c("xanchor"),c("yanchor"),c("sizex"),c("sizey"),c("sizing"),c("opacity");for(var v={_fullLayout:n},u=["x","y"],g=0;g<2;g++){var h=u[g],y=l.coerceRef(a,r,v,h,"paper",void 0);if(y!=="paper"){var p=l.getFromId(v,y);p._imgIndices.push(r._index)}l.coercePosition(r,v,c,y,h,0)}return r}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":411}],414:[function(t,B,H){var d=t("@plotly/d3"),l=t("../drawing"),b=t("../../plots/cartesian/axes"),w=t("../../plots/cartesian/axis_ids"),e=t("../../constants/xmlns_namespaces");B.exports=function(a){var r=a._fullLayout,n=[],c={},s=[],i,v;for(v=0;v<r.images.length;v++){var u=r.images[v];if(u.visible)if(u.layer==="below"&&u.xref!=="paper"&&u.yref!=="paper"){i=w.ref2id(u.xref)+w.ref2id(u.yref);var g=r._plots[i];if(!g){s.push(u);continue}g.mainplot&&(i=g.mainplot.id),c[i]||(c[i]=[]),c[i].push(u)}else u.layer==="above"?n.push(u):s.push(u)}var h={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function y(_){var f=d.select(this);if(this._imgSrc!==_.source)if(f.attr("xmlns",e.svg),_.source&&_.source.slice(0,5)==="data:")f.attr("xlink:href",_.source),this._imgSrc=_.source;else{var L=new Promise(function(S){var k=new Image;this.img=k,k.setAttribute("crossOrigin","anonymous"),k.onerror=P,k.onload=function(){var z=document.createElement("canvas");z.width=this.width,z.height=this.height;var I=z.getContext("2d");I.drawImage(this,0,0);var R=z.toDataURL("image/png");f.attr("xlink:href",R),S()},f.on("error",P),k.src=_.source,this._imgSrc=_.source;function P(){f.remove(),S()}}.bind(this));a._promises.push(L)}}function p(_){var f=d.select(this),L=b.getFromId(a,_.xref),S=b.getFromId(a,_.yref),k=b.getRefType(_.xref)==="domain",P=b.getRefType(_.yref)==="domain",z=r._size,I,R;L!==void 0?I=typeof _.xref=="string"&&k?L._length*_.sizex:Math.abs(L.l2p(_.sizex)-L.l2p(0)):I=_.sizex*z.w,S!==void 0?R=typeof _.yref=="string"&&P?S._length*_.sizey:Math.abs(S.l2p(_.sizey)-S.l2p(0)):R=_.sizey*z.h;var D=I*h.x[_.xanchor].offset,O=R*h.y[_.yanchor].offset,F=h.x[_.xanchor].sizing+h.y[_.yanchor].sizing,G,W;switch(L!==void 0?G=typeof _.xref=="string"&&k?L._length*_.x+L._offset:L.r2p(_.x)+L._offset:G=_.x*z.w+z.l,G+=D,S!==void 0?W=typeof _.yref=="string"&&P?S._length*(1-_.y)+S._offset:S.r2p(_.y)+S._offset:W=z.h-_.y*z.h+z.t,W+=O,_.sizing){case"fill":F+=" slice";break;case"stretch":F="none";break}f.attr({x:G,y:W,width:I,height:R,preserveAspectRatio:F,opacity:_.opacity});var q=L&&b.getRefType(_.xref)!=="domain"?L._id:"",J=S&&b.getRefType(_.yref)!=="domain"?S._id:"",X=q+J;l.setClipUrl(f,X?"clip"+r._uid+X:null,a)}var A=r._imageLowerLayer.selectAll("image").data(s),m=r._imageUpperLayer.selectAll("image").data(n);A.enter().append("image"),m.enter().append("image"),A.exit().remove(),m.exit().remove(),A.each(function(_){y.bind(this)(_),p.bind(this)(_)}),m.each(function(_){y.bind(this)(_),p.bind(this)(_)});var M=Object.keys(r._plots);for(v=0;v<M.length;v++){i=M[v];var x=r._plots[i];if(!!x.imagelayer){var T=x.imagelayer.selectAll("image").data(c[i]||[]);T.enter().append("image"),T.exit().remove(),T.each(function(_){y.bind(this)(_),p.bind(this)(_)})}}}},{"../../constants/xmlns_namespaces":480,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_ids":558,"../drawing":388,"@plotly/d3":58}],415:[function(t,B,H){B.exports={moduleType:"component",name:"images",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("images"),draw:t("./draw"),convertCoords:t("./convert_coords")}},{"../../plots/cartesian/include_components":567,"./attributes":411,"./convert_coords":412,"./defaults":413,"./draw":414}],416:[function(t,B,H){var d=t("../../plots/font_attributes"),l=t("../color/attributes");B.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:l.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:d({editType:"legend"}),grouptitlefont:d({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:d({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":585,"../color/attributes":365}],417:[function(t,B,H){B.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],418:[function(t,B,H){var d=t("../../registry"),l=t("../../lib"),b=t("../../plot_api/plot_template"),w=t("../../plots/attributes"),e=t("./attributes"),o=t("../../plots/layout_attributes"),a=t("./helpers");B.exports=function(n,c,s){var i=n.legend||{},v=b.newContainer(c,"legend");function u(R,D){return l.coerce(i,v,e,R,D)}for(var g,h=function(R,D){var O=g._input,F=g;return l.coerce(O,F,w,R,D)},y=c.font||{},p=l.coerceFont(u,"grouptitlefont",l.extendFlat({},y,{size:Math.round(y.size*1.1)})),A=0,m=!1,M="normal",x=0;x<s.length;x++)g=s[x],g.visible&&((g.showlegend||g._dfltShowLegend&&!(g._module&&g._module.attributes&&g._module.attributes.showlegend&&g._module.attributes.showlegend.dflt===!1))&&(A++,g.showlegend&&(m=!0,(d.traceIs(g,"pie-like")||g._input.showlegend===!0)&&A++),l.coerceFont(h,"legendgrouptitle.font",p)),(d.traceIs(g,"bar")&&c.barmode==="stack"||["tonextx","tonexty"].indexOf(g.fill)!==-1)&&(M=a.isGrouped({traceorder:M})?"grouped+reversed":"reversed"),g.legendgroup!==void 0&&g.legendgroup!==""&&(M=a.isReversed({traceorder:M})?"reversed+grouped":"grouped"));var T=l.coerce(n,c,o,"showlegend",m&&A>1);if(T===!1&&(c.legend=void 0),!(T===!1&&!i.uirevision)&&(u("uirevision",c.uirevision),T!==!1)){u("bgcolor",c.paper_bgcolor),u("bordercolor"),u("borderwidth");var _=l.coerceFont(u,"font",c.font),f=u("orientation"),L=f==="h",S,k,P;L?(S=0,d.getComponentMethod("rangeslider","isVisible")(n.xaxis)?(k=1.1,P="bottom"):(k=-.1,P="top")):(S=1.02,k=1,P="auto"),u("traceorder",M),a.isGrouped(c.legend)&&u("tracegroupgap"),u("itemsizing"),u("itemwidth"),u("itemclick"),u("itemdoubleclick"),u("groupclick"),u("x",S),u("xanchor"),u("y",k),u("yanchor",P),u("valign"),l.noneOrAll(i,v,["x","y"]);var z=u("title.text");if(z){u("title.side",L?"left":"top");var I=l.extendFlat({},_,{size:l.bigFont(_.size)});l.coerceFont(u,"title.font",I)}}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/attributes":550,"../../plots/layout_attributes":610,"../../registry":638,"./attributes":416,"./helpers":422}],419:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib"),b=t("../../plots/plots"),w=t("../../registry"),e=t("../../lib/events"),o=t("../dragelement"),a=t("../drawing"),r=t("../color"),n=t("../../lib/svg_text_utils"),c=t("./handle_click"),s=t("./constants"),i=t("../../constants/alignment"),v=i.LINE_SPACING,u=i.FROM_TL,g=i.FROM_BR,h=t("./get_legend_data"),y=t("./style"),p=t("./helpers"),A=1;B.exports=function(D,O){return O||(O=D._fullLayout.legend||{}),m(D,O)};function m(R,D){var O=R._fullLayout,F="legend"+O._uid,G,W=D._inHover;if(W?(G=D.layer,F+="-hover"):G=O._infolayer,!!G){R._legendMouseDownTime||(R._legendMouseDownTime=0);var q;if(W){if(!D.entries)return;q=h(D.entries,D)}else{if(!R.calcdata)return;q=O.showlegend&&h(R.calcdata,D)}var J=O.hiddenlabels||[];if(!W&&(!O.showlegend||!q.length))return G.selectAll(".legend").remove(),O._topdefs.select("#"+F).remove(),b.autoMargin(R,"legend");var X=l.ensureSingle(G,"g","legend",function(j){W||j.attr("pointer-events","all")}),Z=l.ensureSingleById(O._topdefs,"clipPath",F,function(j){j.append("rect")}),se=l.ensureSingle(X,"rect","bg",function(j){j.attr("shape-rendering","crispEdges")});se.call(r.stroke,D.bordercolor).call(r.fill,D.bgcolor).style("stroke-width",D.borderwidth+"px");var le=l.ensureSingle(X,"g","scrollbox"),oe=D.title;if(D._titleWidth=0,D._titleHeight=0,oe.text){var U=l.ensureSingle(le,"text","legendtitletext");U.attr("text-anchor","start").call(a.font,oe.font).text(oe.text),f(U,le,R,D,A)}else le.selectAll(".legendtitletext").remove();var V=l.ensureSingle(X,"rect","scrollbar",function(j){j.attr(s.scrollBarEnterAttrs).call(r.fill,s.scrollBarColor)}),re=le.selectAll("g.groups").data(q);re.enter().append("g").attr("class","groups"),re.exit().remove();var ee=re.selectAll("g.traces").data(l.identity);ee.enter().append("g").attr("class","traces"),ee.exit().remove(),ee.style("opacity",function(j){var Q=j[0].trace;return w.traceIs(Q,"pie-like")?J.indexOf(j[0].label)!==-1?.5:1:Q.visible==="legendonly"?.5:1}).each(function(){d.select(this).call(x,R,D)}).call(y,R,D).each(function(){W||d.select(this).call(_,R)}),l.syncOrAsync([b.previousPromises,function(){return k(R,re,ee,D)},function(){var j=O._size,Q=D.borderwidth;if(!W){var ne=P(R);if(ne)return;var ae=j.l+j.w*D.x-u[z(D)]*D._width,ie=j.t+j.h*(1-D.y)-u[I(D)]*D._effHeight;if(O.margin.autoexpand){var ue=ae,xe=ie;ae=l.constrain(ae,0,O.width-D._width),ie=l.constrain(ie,0,O.height-D._effHeight),ae!==ue&&l.log("Constrain legend.x to make legend fit inside graph"),ie!==xe&&l.log("Constrain legend.y to make legend fit inside graph")}a.setTranslate(X,ae,ie)}if(V.on(".drag",null),X.on("wheel",null),W||D._height<=D._maxHeight||R._context.staticPlot){var he=D._effHeight;W&&(he=D._height),se.attr({width:D._width-Q,height:he-Q,x:Q/2,y:Q/2}),a.setTranslate(le,0,0),Z.select("rect").attr({width:D._width-2*Q,height:he-2*Q,x:Q,y:Q}),a.setClipUrl(le,F,R),a.setRect(V,0,0,0,0),delete D._scrollY}else{var ge=Math.max(s.scrollBarMinHeight,D._effHeight*D._effHeight/D._height),me=D._effHeight-ge-2*s.scrollBarMargin,ke=D._height-D._effHeight,Ae=me/ke,Ne=Math.min(D._scrollY||0,ke);se.attr({width:D._width-2*Q+s.scrollBarWidth+s.scrollBarMargin,height:D._effHeight-Q,x:Q/2,y:Q/2}),Z.select("rect").attr({width:D._width-2*Q+s.scrollBarWidth+s.scrollBarMargin,height:D._effHeight-2*Q,x:Q,y:Q+Ne}),a.setClipUrl(le,F,R),Ie(Ne,ge,Ae),X.on("wheel",function(){Ne=l.constrain(D._scrollY+d.event.deltaY/me*ke,0,ke),Ie(Ne,ge,Ae),Ne!==0&&Ne!==ke&&d.event.preventDefault()});var He,Ge,_e,De=function(kt,Ft,Nt){var Lt=(Nt-Ft)/Ae+kt;return l.constrain(Lt,0,ke)},Ye=function(kt,Ft,Nt){var Lt=(Ft-Nt)/Ae+kt;return l.constrain(Lt,0,ke)},qe=d.behavior.drag().on("dragstart",function(){var kt=d.event.sourceEvent;kt.type==="touchstart"?He=kt.changedTouches[0].clientY:He=kt.clientY,_e=Ne}).on("drag",function(){var kt=d.event.sourceEvent;kt.buttons===2||kt.ctrlKey||(kt.type==="touchmove"?Ge=kt.changedTouches[0].clientY:Ge=kt.clientY,Ne=De(_e,He,Ge),Ie(Ne,ge,Ae))});V.call(qe);var Ue=d.behavior.drag().on("dragstart",function(){var kt=d.event.sourceEvent;kt.type==="touchstart"&&(He=kt.changedTouches[0].clientY,_e=Ne)}).on("drag",function(){var kt=d.event.sourceEvent;kt.type==="touchmove"&&(Ge=kt.changedTouches[0].clientY,Ne=Ye(_e,He,Ge),Ie(Ne,ge,Ae))});le.call(Ue)}function Ie(kt,Ft,Nt){D._scrollY=R._fullLayout.legend._scrollY=kt,a.setTranslate(le,0,-kt),a.setRect(V,D._width,s.scrollBarMargin+kt*Nt,s.scrollBarWidth,Ft),Z.select("rect").attr("y",Q+kt)}if(R._context.edits.legendPosition){var Ve,dt,Dt,Yt;X.classed("cursor-move",!0),o.init({element:X.node(),gd:R,prepFn:function(){var kt=a.getTranslate(X);Dt=kt.x,Yt=kt.y},moveFn:function(kt,Ft){var Nt=Dt+kt,Lt=Yt+Ft;a.setTranslate(X,Nt,Lt),Ve=o.align(Nt,0,j.l,j.l+j.w,D.xanchor),dt=o.align(Lt,0,j.t+j.h,j.t,D.yanchor)},doneFn:function(){Ve!==void 0&&dt!==void 0&&w.call("_guiRelayout",R,{"legend.x":Ve,"legend.y":dt})},clickFn:function(kt,Ft){var Nt=G.selectAll("g.traces").filter(function(){var Lt=this.getBoundingClientRect();return Ft.clientX>=Lt.left&&Ft.clientX<=Lt.right&&Ft.clientY>=Lt.top&&Ft.clientY<=Lt.bottom});Nt.size()>0&&M(R,X,Nt,kt,Ft)}})}}],R)}}function M(R,D,O,F,G){var W=O.data()[0][0].trace,q={event:G,node:O.node(),curveNumber:W.index,expandedIndex:W._expandedIndex,data:R.data,layout:R.layout,frames:R._transitionData._frames,config:R._context,fullData:R._fullData,fullLayout:R._fullLayout};W._group&&(q.group=W._group),w.traceIs(W,"pie-like")&&(q.label=O.datum()[0].label);var J=e.triggerHandler(R,"plotly_legendclick",q);if(J!==!1){if(F===1)D._clickTimeout=setTimeout(function(){!R._fullLayout||c(O,R,F)},R._context.doubleClickDelay);else if(F===2){D._clickTimeout&&clearTimeout(D._clickTimeout),R._legendMouseDownTime=0;var X=e.triggerHandler(R,"plotly_legenddoubleclick",q);X!==!1&&c(O,R,F)}}}function x(R,D,O){var F=R.data()[0][0],G=F.trace,W=w.traceIs(G,"pie-like"),q=!O._inHover&&D._context.edits.legendText&&!W,J=O._maxNameLength,X,Z;F.groupTitle?(X=F.groupTitle.text,Z=F.groupTitle.font):(Z=O.font,O.entries?X=F.text:(X=W?F.label:G.name,G._meta&&(X=l.templateString(X,G._meta))));var se=l.ensureSingle(R,"text","legendtext");se.attr("text-anchor","start").call(a.font,Z).text(q?T(X,J):X);var le=O.itemwidth+s.itemGap*2;n.positionText(se,le,0),q?se.call(n.makeEditable,{gd:D,text:X}).call(f,R,D,O).on("edit",function(oe){this.text(T(oe,J)).call(f,R,D,O);var U=F.trace._fullInput||{},V={};if(w.hasTransform(U,"groupby")){var re=w.getTransformIndices(U,"groupby"),ee=re[re.length-1],j=l.keyedContainer(U,"transforms["+ee+"].styles","target","value.name");j.set(F.trace._group,oe),V=j.constructUpdate()}else V.name=oe;return w.call("_guiRestyle",D,V,G.index)}):f(se,R,D,O)}function T(R,D){var O=Math.max(4,D);if(R&&R.trim().length>=O/2)return R;R=R||"";for(var F=O-R.length;F>0;F--)R+=" ";return R}function _(R,D){var O=D._context.doubleClickDelay,F,G=1,W=l.ensureSingle(R,"rect","legendtoggle",function(q){D._context.staticPlot||q.style("cursor","pointer").attr("pointer-events","all"),q.call(r.fill,"rgba(0,0,0,0)")});D._context.staticPlot||(W.on("mousedown",function(){F=new Date().getTime(),F-D._legendMouseDownTime<O?G+=1:(G=1,D._legendMouseDownTime=F)}),W.on("mouseup",function(){if(!(D._dragged||D._editing)){var q=D._fullLayout.legend;new Date().getTime()-D._legendMouseDownTime>O&&(G=Math.max(G-1,1)),M(D,q,R,G,d.event)}}))}function f(R,D,O,F,G){F._inHover&&R.attr("data-notex",!0),n.convertToTspans(R,O,function(){L(D,O,F,G)})}function L(R,D,O,F){var G=R.data()[0][0];if(!O._inHover&&G&&!G.trace.showlegend){R.remove();return}var W=R.select("g[class*=math-group]"),q=W.node();O||(O=D._fullLayout.legend);var J=O.borderwidth,X;F===A?X=O.title.font:G.groupTitle?X=G.groupTitle.font:X=O.font;var Z=X.size*v,se,le;if(q){var oe=a.bBox(q);se=oe.height,le=oe.width,F===A?a.setTranslate(W,J,J+se*.75):a.setTranslate(W,0,se*.25)}else{var U=R.select(F===A?".legendtitletext":".legendtext"),V=n.lineCount(U),re=U.node();if(se=Z*V,le=re?a.bBox(re).width:0,F===A)O.title.side==="left"&&(le+=s.itemGap*2),n.positionText(U,J+s.titlePad,J+Z);else{var ee=s.itemGap*2+O.itemwidth;G.groupTitle&&(ee=s.itemGap,le-=O.itemwidth),n.positionText(U,ee,-Z*((V-1)/2-.3))}}F===A?(O._titleWidth=le,O._titleHeight=se):(G.lineHeight=Z,G.height=Math.max(se,16)+3,G.width=le)}function S(R){var D=0,O=0,F=R.title.side;return F&&(F.indexOf("left")!==-1&&(D=R._titleWidth),F.indexOf("top")!==-1&&(O=R._titleHeight)),[D,O]}function k(R,D,O,F){var G=R._fullLayout;F||(F=G.legend);var W=G._size,q=p.isVertical(F),J=p.isGrouped(F),X=F.borderwidth,Z=2*X,se=s.itemGap,le=F.itemwidth+se*2,oe=2*(X+se),U=I(F),V=F.y<0||F.y===0&&U==="top",re=F.y>1||F.y===1&&U==="bottom",ee=F.tracegroupgap;F._maxHeight=Math.max(V||re?G.height/2:W.h,30);var j=0;F._width=0,F._height=0;var Q=S(F);if(q)O.each(function(Ve){var dt=Ve[0].height;a.setTranslate(this,X+Q[0],X+Q[1]+F._height+dt/2+se),F._height+=dt,F._width=Math.max(F._width,Ve[0].width)}),j=le+F._width,F._width+=se+le+Z,F._height+=oe,J&&(D.each(function(Ve,dt){a.setTranslate(this,0,dt*F.tracegroupgap)}),F._height+=(F._lgroupsLength-1)*F.tracegroupgap);else{var ne=z(F),ae=F.x<0||F.x===0&&ne==="right",ie=F.x>1||F.x===1&&ne==="left",ue=re||V,xe=G.width/2;F._maxWidth=Math.max(ae?ue&&ne==="left"?W.l+W.w:xe:ie?ue&&ne==="right"?W.r+W.w:xe:W.w,2*le);var he=0,ge=0;O.each(function(Ve){var dt=Ve[0].width+le;he=Math.max(he,dt),ge+=dt}),j=null;var me=0;if(J){var ke=0,Ae=0,Ne=0;D.each(function(){var Ve=0,dt=0;d.select(this).selectAll("g.traces").each(function(Yt){var kt=Yt[0].width,Ft=Yt[0].height;a.setTranslate(this,Q[0],Q[1]+X+se+Ft/2+dt),dt+=Ft,Ve=Math.max(Ve,le+kt)});var Dt=Ve+se;Ae>0&&Dt+X+Ae>F._maxWidth?(me=Math.max(me,Ae),Ae=0,Ne+=ke+ee,ke=dt):ke=Math.max(ke,dt),a.setTranslate(this,Ae,Ne),Ae+=Dt}),F._width=Math.max(me,Ae)+X,F._height=Ne+ke+oe}else{var He=O.size(),Ge=ge+Z+(He-1)*se<F._maxWidth,_e=0,De=0,Ye=0,qe=0;O.each(function(Ve){var dt=Ve[0].height,Dt=le+Ve[0].width,Yt=(Ge?Dt:he)+se;Yt+X+De-se>=F._maxWidth&&(me=Math.max(me,qe),De=0,Ye+=_e,F._height+=_e,_e=0),a.setTranslate(this,Q[0]+X+De,Q[1]+X+Ye+dt/2+se),qe=De+Dt+se,De+=Yt,_e=Math.max(_e,dt)}),Ge?(F._width=De+Z,F._height=_e+oe):(F._width=Math.max(me,qe)+Z,F._height+=_e+oe)}}F._width=Math.ceil(Math.max(F._width+Q[0],F._titleWidth+2*(X+s.titlePad))),F._height=Math.ceil(Math.max(F._height+Q[1],F._titleHeight+2*(X+s.itemGap))),F._effHeight=Math.min(F._height,F._maxHeight);var Ue=R._context.edits,Ie=Ue.legendText||Ue.legendPosition;O.each(function(Ve){var dt=d.select(this).select(".legendtoggle"),Dt=Ve[0].height,Yt=Ie?le:j||le+Ve[0].width;q||(Yt+=se/2),a.setRect(dt,0,-Dt/2,Yt,Dt)})}function P(R){var D=R._fullLayout,O=D.legend,F=z(O),G=I(O);return b.autoMargin(R,"legend",{x:O.x,y:O.y,l:O._width*u[F],r:O._width*g[F],b:O._effHeight*g[G],t:O._effHeight*u[G]})}function z(R){return l.isRightAnchor(R)?"right":l.isCenterAnchor(R)?"center":"left"}function I(R){return l.isBottomAnchor(R)?"bottom":l.isMiddleAnchor(R)?"middle":"top"}},{"../../constants/alignment":471,"../../lib":503,"../../lib/events":492,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"./constants":417,"./get_legend_data":420,"./handle_click":421,"./helpers":422,"./style":424,"@plotly/d3":58}],420:[function(t,B,H){var d=t("../../registry"),l=t("./helpers");B.exports=function(w,e){var o=e._inHover,a=l.isGrouped(e),r=l.isReversed(e),n={},c=[],s=!1,i={},v=0,u=0,g,h;function y(O,F){if(O===""||!l.isGrouped(e)){var G="~~i"+v;c.push(G),n[G]=[F],v++}else c.indexOf(O)===-1?(c.push(O),s=!0,n[O]=[F]):n[O].push(F)}for(g=0;g<w.length;g++){var p=w[g],A=p[0],m=A.trace,M=m.legendgroup;if(!(!o&&(!m.visible||!m.showlegend)))if(d.traceIs(m,"pie-like"))for(i[M]||(i[M]={}),h=0;h<p.length;h++){var x=p[h].label;i[M][x]||(y(M,{label:x,color:p[h].color,i:p[h].i,trace:m,pts:p[h].pts}),i[M][x]=!0,u=Math.max(u,(x||"").length))}else y(M,A),u=Math.max(u,(m.name||"").length)}if(!c.length)return[];var T=!s||!a,_=[];for(g=0;g<c.length;g++){var f=n[c[g]];T?_.push(f[0]):_.push(f)}for(T&&(_=[_]),g=0;g<_.length;g++){var L=1/0;for(h=0;h<_[g].length;h++){var S=_[g][h].trace.legendrank;L>S&&(L=S)}_[g][0]._groupMinRank=L,_[g][0]._preGroupSort=g}var k=function(O,F){return O[0]._groupMinRank-F[0]._groupMinRank||O[0]._preGroupSort-F[0]._preGroupSort},P=function(O,F){return O.trace.legendrank-F.trace.legendrank||O._preSort-F._preSort};for(_.forEach(function(O,F){O[0]._preGroupSort=F}),_.sort(k),g=0;g<_.length;g++){_[g].forEach(function(O,F){O._preSort=F}),_[g].sort(P);var z=_[g][0].trace,I=null;for(h=0;h<_[g].length;h++){var R=_[g][h].trace.legendgrouptitle;if(R&&R.text){I=R,o&&(R.font=e._groupTitleFont);break}}if(r&&_[g].reverse(),I){var D=!1;for(h=0;h<_[g].length;h++)if(d.traceIs(_[g][h].trace,"pie-like")){D=!0;break}_[g].unshift({i:-1,groupTitle:I,noClick:D,trace:{showlegend:z.showlegend,legendgroup:z.legendgroup,visible:e.groupclick==="toggleitem"?!0:z.visible}})}for(h=0;h<_[g].length;h++)_[g][h]=[_[g][h]]}return e._lgroupsLength=_.length,e._maxNameLength=u,_}},{"../../registry":638,"./helpers":422}],421:[function(t,B,H){var d=t("../../lib"),l=t("../../registry"),b=!0;B.exports=function(e,o,a){var r=o._fullLayout;if(o._dragged||o._editing)return;var n=r.legend.itemclick,c=r.legend.itemdoubleclick,s=r.legend.groupclick;a===1&&n==="toggle"&&c==="toggleothers"&&b&&o.data&&o._context.showTips&&d.notifier(d._(o,"Double-click on legend to isolate one trace"),"long"),b=!1;var i;if(a===1?i=n:a===2&&(i=c),!i)return;var v=s==="togglegroup",u=r.hiddenlabels?r.hiddenlabels.slice():[],g=e.data()[0][0];if(g.groupTitle&&g.noClick)return;var h=o._fullData,y=g.trace,p=y.legendgroup,A,m,M,x,T,_,f={},L=[],S=[],k=[];function P(oe,U,V){var re=L.indexOf(oe),ee=f[U];return ee||(ee=f[U]=[]),L.indexOf(oe)===-1&&(L.push(oe),re=L.length-1),ee[re]=V,re}function z(oe,U){if(!(g.groupTitle&&!v)){var V=oe._fullInput;if(l.hasTransform(V,"groupby")){var re=S[V.index];if(!re){var ee=l.getTransformIndices(V,"groupby"),j=ee[ee.length-1];re=d.keyedContainer(V,"transforms["+j+"].styles","target","value.visible"),S[V.index]=re}var Q=re.get(oe._group);Q===void 0&&(Q=!0),Q!==!1&&re.set(oe._group,U),k[V.index]=P(V.index,"visible",V.visible!==!1)}else{var ne=V.visible===!1?!1:U;P(V.index,"visible",ne)}}}if(l.traceIs(y,"pie-like")){var I=g.label,R=u.indexOf(I);i==="toggle"?R===-1?u.push(I):u.splice(R,1):i==="toggleothers"&&(u=[],o.calcdata[0].forEach(function(oe){I!==oe.label&&u.push(oe.label)}),o._fullLayout.hiddenlabels&&o._fullLayout.hiddenlabels.length===u.length&&R===-1&&(u=[])),l.call("_guiRelayout",o,"hiddenlabels",u)}else{var D=p&&p.length,O=[],F;if(D)for(A=0;A<h.length;A++)F=h[A],!!F.visible&&F.legendgroup===p&&O.push(A);if(i==="toggle"){var G;switch(y.visible){case!0:G="legendonly";break;case!1:G=!1;break;case"legendonly":G=!0;break}if(D)if(v)for(A=0;A<h.length;A++)h[A].visible!==!1&&h[A].legendgroup===p&&z(h[A],G);else z(y,G);else z(y,G)}else if(i==="toggleothers"){var W,q,J,X,Z=!0;for(A=0;A<h.length;A++)if(W=h[A]===y,J=h[A].showlegend!==!0,!(W||J)&&(q=D&&h[A].legendgroup===p,!q&&h[A].visible===!0&&!l.traceIs(h[A],"notLegendIsolatable"))){Z=!1;break}for(A=0;A<h.length;A++)if(h[A].visible!==!1&&!l.traceIs(h[A],"notLegendIsolatable"))switch(y.visible){case"legendonly":z(h[A],!0);break;case!0:X=Z?!0:"legendonly",W=h[A]===y,J=h[A].showlegend!==!0&&!h[A].legendgroup,q=W||D&&h[A].legendgroup===p,z(h[A],q||J?!0:X);break}}for(A=0;A<S.length;A++)if(M=S[A],!!M){var se=M.constructUpdate(),le=Object.keys(se);for(m=0;m<le.length;m++)x=le[m],_=f[x]=f[x]||[],_[k[A]]=se[x]}for(T=Object.keys(f),A=0;A<T.length;A++)for(x=T[A],m=0;m<L.length;m++)f[x].hasOwnProperty(m)||(f[x][m]=void 0);l.call("_guiRestyle",o,f,L)}}},{"../../lib":503,"../../registry":638}],422:[function(t,B,H){H.isGrouped=function(l){return(l.traceorder||"").indexOf("grouped")!==-1},H.isVertical=function(l){return l.orientation!=="h"},H.isReversed=function(l){return(l.traceorder||"").indexOf("reversed")!==-1}},{}],423:[function(t,B,H){B.exports={moduleType:"component",name:"legend",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),draw:t("./draw"),style:t("./style")}},{"./attributes":416,"./defaults":418,"./draw":419,"./style":424}],424:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../registry"),b=t("../../lib"),w=b.strTranslate,e=t("../drawing"),o=t("../color"),a=t("../colorscale/helpers").extractOpts,r=t("../../traces/scatter/subtypes"),n=t("../../traces/pie/style_one"),c=t("../../traces/pie/helpers").castOption,s=t("./constants"),i=12,v=5,u=2,g=10,h=5;B.exports=function(M,x,T){var _=x._fullLayout;T||(T=_.legend);var f=T.itemsizing==="constant",L=T.itemwidth,S=(L+s.itemGap*2)/2,k=w(S,0),P=function(le,oe,U,V){var re;if(le+1)re=le;else if(oe&&oe.width>0)re=oe.width;else return 0;return f?V:Math.min(re,U)};M.each(function(le){var oe=d.select(this),U=b.ensureSingle(oe,"g","layers");U.style("opacity",le[0].trace.opacity);var V=T.valign,re=le[0].lineHeight,ee=le[0].height;if(V==="middle"||!re||!ee)U.attr("transform",null);else{var j={top:1,bottom:-1}[V],Q=j*(.5*(re-ee+3));U.attr("transform",w(0,Q))}var ne=U.selectAll("g.legendfill").data([le]);ne.enter().append("g").classed("legendfill",!0);var ae=U.selectAll("g.legendlines").data([le]);ae.enter().append("g").classed("legendlines",!0);var ie=U.selectAll("g.legendsymbols").data([le]);ie.enter().append("g").classed("legendsymbols",!0),ie.selectAll("g.legendpoints").data([le]).enter().append("g").classed("legendpoints",!0)}).each(se).each(R).each(O).each(D).each(G).each(X).each(J).each(z).each(I).each(W).each(q);function z(le){var oe=p(le),U=oe.showFill,V=oe.showLine,re=oe.showGradientLine,ee=oe.showGradientFill,j=oe.anyFill,Q=oe.anyLine,ne=le[0],ae=ne.trace,ie,ue,xe=a(ae),he=xe.colorscale,ge=xe.reversescale,me=function(De){if(De.size())if(U)e.fillGroupStyle(De,x);else{var Ye="legendfill-"+ae.uid;e.gradient(De,x,Ye,y(ge),he,"fill")}},ke=function(De){if(De.size()){var Ye="legendline-"+ae.uid;e.lineGroupStyle(De),e.gradient(De,x,Ye,y(ge),he,"stroke")}},Ae=r.hasMarkers(ae)||!j?"M5,0":Q?"M5,-2":"M5,-3",Ne=d.select(this),He=Ne.select(".legendfill").selectAll("path").data(U||ee?[le]:[]);if(He.enter().append("path").classed("js-fill",!0),He.exit().remove(),He.attr("d",Ae+"h"+L+"v6h-"+L+"z").call(me),V||re){var Ge=P(void 0,ae.line,g,v);ue=b.minExtend(ae,{line:{width:Ge}}),ie=[b.minExtend(ne,{trace:ue})]}var _e=Ne.select(".legendlines").selectAll("path").data(V||re?[ie]:[]);_e.enter().append("path").classed("js-line",!0),_e.exit().remove(),_e.attr("d",Ae+(re?"l"+L+",0.0001":"h"+L)).call(V?e.lineGroupStyle:ke)}function I(le){var oe=p(le),U=oe.anyFill,V=oe.anyLine,re=oe.showLine,ee=oe.showMarker,j=le[0],Q=j.trace,ne=!ee&&!V&&!U&&r.hasText(Q),ae,ie;function ue(He,Ge,_e,De){var Ye=b.nestedProperty(Q,He).get(),qe=b.isArrayOrTypedArray(Ye)&&Ge?Ge(Ye):Ye;if(f&&qe&&De!==void 0&&(qe=De),_e){if(qe<_e[0])return _e[0];if(qe>_e[1])return _e[1]}return qe}function xe(He){return j._distinct&&j.index&&He[j.index]?He[j.index]:He[0]}if(ee||ne||re){var he={},ge={};if(ee){he.mc=ue("marker.color",xe),he.mx=ue("marker.symbol",xe),he.mo=ue("marker.opacity",b.mean,[.2,1]),he.mlc=ue("marker.line.color",xe),he.mlw=ue("marker.line.width",b.mean,[0,5],u),ge.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var me=ue("marker.size",b.mean,[2,16],i);he.ms=me,ge.marker.size=me}re&&(ge.line={width:ue("line.width",xe,[0,10],v)}),ne&&(he.tx="Aa",he.tp=ue("textposition",xe),he.ts=10,he.tc=ue("textfont.color",xe),he.tf=ue("textfont.family",xe)),ae=[b.minExtend(j,he)],ie=b.minExtend(Q,ge),ie.selectedpoints=null,ie.texttemplate=null}var ke=d.select(this).select("g.legendpoints"),Ae=ke.selectAll("path.scatterpts").data(ee?ae:[]);Ae.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",k),Ae.exit().remove(),Ae.call(e.pointStyle,ie,x),ee&&(ae[0].mrc=3);var Ne=ke.selectAll("g.pointtext").data(ne?ae:[]);Ne.enter().append("g").classed("pointtext",!0).append("text").attr("transform",k),Ne.exit().remove(),Ne.selectAll("text").call(e.textPointStyle,ie,x)}function R(le){var oe=le[0].trace,U=oe.type==="waterfall";if(le[0]._distinct&&U){var V=le[0].trace[le[0].dir].marker;return le[0].mc=V.color,le[0].mlw=V.line.width,le[0].mlc=V.line.color,F(le,this,"waterfall")}var re=[];oe.visible&&U&&(re=le[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var ee=d.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(re);ee.enter().append("path").classed("legendwaterfall",!0).attr("transform",k).style("stroke-miterlimit",1),ee.exit().remove(),ee.each(function(j){var Q=d.select(this),ne=oe[j[0]].marker,ae=P(void 0,ne.line,h,u);Q.attr("d",j[1]).style("stroke-width",ae+"px").call(o.fill,ne.color),ae&&Q.call(o.stroke,ne.line.color)})}function D(le){F(le,this)}function O(le){F(le,this,"funnel")}function F(le,oe,U){var V=le[0].trace,re=V.marker||{},ee=re.line||{},j=U?V.visible&&V.type===U:l.traceIs(V,"bar"),Q=d.select(oe).select("g.legendpoints").selectAll("path.legend"+U).data(j?[le]:[]);Q.enter().append("path").classed("legend"+U,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",k),Q.exit().remove(),Q.each(function(ne){var ae=d.select(this),ie=ne[0],ue=P(ie.mlw,re.line,h,u);ae.style("stroke-width",ue+"px");var xe=ie.mcc;if(!T._inHover&&"mc"in ie){var he=a(re),ge=he.mid;ge===void 0&&(ge=(he.max+he.min)/2),xe=e.tryColorscale(re,"")(ge)}var me=xe||ie.mc||re.color,ke=re.pattern,Ae=ke&&e.getPatternAttr(ke.shape,0,"");if(Ae){var Ne=e.getPatternAttr(ke.bgcolor,0,null),He=e.getPatternAttr(ke.fgcolor,0,null),Ge=ke.fgopacity,_e=A(ke.size,8,10),De=A(ke.solidity,.5,1),Ye="legend-"+V.uid;ae.call(e.pattern,"legend",x,Ye,Ae,_e,De,xe,ke.fillmode,Ne,He,Ge)}else ae.call(o.fill,me);ue&&o.stroke(ae,ie.mlc||ee.color)})}function G(le){var oe=le[0].trace,U=d.select(this).select("g.legendpoints").selectAll("path.legendbox").data(oe.visible&&l.traceIs(oe,"box-violin")?[le]:[]);U.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",k),U.exit().remove(),U.each(function(){var V=d.select(this);if((oe.boxpoints==="all"||oe.points==="all")&&o.opacity(oe.fillcolor)===0&&o.opacity((oe.line||{}).color)===0){var re=b.minExtend(oe,{marker:{size:f?i:b.constrain(oe.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});U.call(e.pointStyle,re,x)}else{var ee=P(void 0,oe.line,h,u);V.style("stroke-width",ee+"px").call(o.fill,oe.fillcolor),ee&&o.stroke(V,oe.line.color)}})}function W(le){var oe=le[0].trace,U=d.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(oe.visible&&oe.type==="candlestick"?[le,le]:[]);U.enter().append("path").classed("legendcandle",!0).attr("d",function(V,re){return re?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",k).style("stroke-miterlimit",1),U.exit().remove(),U.each(function(V,re){var ee=d.select(this),j=oe[re?"increasing":"decreasing"],Q=P(void 0,j.line,h,u);ee.style("stroke-width",Q+"px").call(o.fill,j.fillcolor),Q&&o.stroke(ee,j.line.color)})}function q(le){var oe=le[0].trace,U=d.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(oe.visible&&oe.type==="ohlc"?[le,le]:[]);U.enter().append("path").classed("legendohlc",!0).attr("d",function(V,re){return re?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",k).style("stroke-miterlimit",1),U.exit().remove(),U.each(function(V,re){var ee=d.select(this),j=oe[re?"increasing":"decreasing"],Q=P(void 0,j.line,h,u);ee.style("fill","none").call(e.dashLine,j.line.dash,Q),Q&&o.stroke(ee,j.line.color)})}function J(le){Z(le,this,"pie")}function X(le){Z(le,this,"funnelarea")}function Z(le,oe,U){var V=le[0],re=V.trace,ee=U?re.visible&&re.type===U:l.traceIs(re,U),j=d.select(oe).select("g.legendpoints").selectAll("path.legend"+U).data(ee?[le]:[]);if(j.enter().append("path").classed("legend"+U,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",k),j.exit().remove(),j.size()){var Q=(re.marker||{}).line,ne=P(c(Q.width,V.pts),Q,h,u),ae=b.minExtend(re,{marker:{line:{width:ne}}});ae.marker.line.color=Q.color;var ie=b.minExtend(V,{trace:ae});n(j,ie,ae)}}function se(le){var oe=le[0].trace,U,V=[];if(oe.visible)switch(oe.type){case"histogram2d":case"heatmap":V=[["M-15,-2V4H15V-2Z"]],U=!0;break;case"choropleth":case"choroplethmapbox":V=[["M-6,-6V6H6V-6Z"]],U=!0;break;case"densitymapbox":V=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],U="radial";break;case"cone":V=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],U=!1;break;case"streamtube":V=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],U=!1;break;case"surface":V=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],U=!0;break;case"mesh3d":V=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],U=!1;break;case"volume":V=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],U=!0;break;case"isosurface":V=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],U=!1;break}var re=d.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(V);re.enter().append("path").classed("legend3dandfriends",!0).attr("transform",k).style("stroke-miterlimit",1),re.exit().remove(),re.each(function(ee,j){var Q=d.select(this),ne=a(oe),ae=ne.colorscale,ie=ne.reversescale,ue=function(me){if(me.size()){var ke="legendfill-"+oe.uid;e.gradient(me,x,ke,y(ie,U==="radial"),ae,"fill")}},xe;if(ae){if(!U){var ge=ae.length;xe=j===0?ae[ie?ge-1:0][1]:j===1?ae[ie?0:ge-1][1]:ae[Math.floor((ge-1)/2)][1]}}else{var he=oe.vertexcolor||oe.facecolor||oe.color;xe=b.isArrayOrTypedArray(he)?he[j]||he[0]:he}Q.attr("d",ee[0]),xe?Q.call(o.fill,xe):Q.call(ue)})}};function y(m,M){var x=M?"radial":"horizontal";return x+(m?"":"reversed")}function p(m){var M=m[0].trace,x=M.contours,T=r.hasLines(M),_=r.hasMarkers(M),f=M.visible&&M.fill&&M.fill!=="none",L=!1,S=!1;if(x){var k=x.coloring;k==="lines"?L=!0:T=k==="none"||k==="heatmap"||x.showlines,x.type==="constraint"?f=x._operation!=="=":(k==="fill"||k==="heatmap")&&(S=!0)}return{showMarker:_,showLine:T,showFill:f,showGradientLine:L,showGradientFill:S,anyLine:T||L,anyFill:f||S}}function A(m,M,x){return m&&b.isArrayOrTypedArray(m)?M:m>x?x:m}},{"../../lib":503,"../../registry":638,"../../traces/pie/helpers":905,"../../traces/pie/style_one":911,"../../traces/scatter/subtypes":951,"../color":366,"../colorscale/helpers":377,"../drawing":388,"./constants":417,"@plotly/d3":58}],425:[function(t,B,H){t("./constants"),B.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":427}],426:[function(t,B,H){var d=t("../../registry"),l=t("../../plots/plots"),b=t("../../plots/cartesian/axis_ids"),w=t("../../fonts/ploticon"),e=t("../shapes/draw").eraseActiveShape,o=t("../../lib"),a=o._,r=B.exports={};r.toImage={name:"toImage",title:function(m){var M=m._context.toImageButtonOptions||{},x=M.format||"png";return x==="png"?a(m,"Download plot as a png"):a(m,"Download plot")},icon:w.camera,click:function(m){var M=m._context.toImageButtonOptions,x={format:M.format||"png"};o.notifier(a(m,"Taking snapshot - this may take a few seconds"),"long"),x.format!=="svg"&&o.isIE()&&(o.notifier(a(m,"IE only supports svg.  Changing format to svg."),"long"),x.format="svg"),["filename","width","height","scale"].forEach(function(T){T in M&&(x[T]=M[T])}),d.call("downloadImage",m,x).then(function(T){o.notifier(a(m,"Snapshot succeeded")+" - "+T,"long")}).catch(function(){o.notifier(a(m,"Sorry, there was a problem downloading your snapshot!"),"long")})}},r.sendDataToCloud={name:"sendDataToCloud",title:function(m){return a(m,"Edit in Chart Studio")},icon:w.disk,click:function(m){l.sendDataToCloud(m)}},r.editInChartStudio={name:"editInChartStudio",title:function(m){return a(m,"Edit in Chart Studio")},icon:w.pencil,click:function(m){l.sendDataToCloud(m)}},r.zoom2d={name:"zoom2d",_cat:"zoom",title:function(m){return a(m,"Zoom")},attr:"dragmode",val:"zoom",icon:w.zoombox,click:n},r.pan2d={name:"pan2d",_cat:"pan",title:function(m){return a(m,"Pan")},attr:"dragmode",val:"pan",icon:w.pan,click:n},r.select2d={name:"select2d",_cat:"select",title:function(m){return a(m,"Box Select")},attr:"dragmode",val:"select",icon:w.selectbox,click:n},r.lasso2d={name:"lasso2d",_cat:"lasso",title:function(m){return a(m,"Lasso Select")},attr:"dragmode",val:"lasso",icon:w.lasso,click:n},r.drawclosedpath={name:"drawclosedpath",title:function(m){return a(m,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:w.drawclosedpath,click:n},r.drawopenpath={name:"drawopenpath",title:function(m){return a(m,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:w.drawopenpath,click:n},r.drawline={name:"drawline",title:function(m){return a(m,"Draw line")},attr:"dragmode",val:"drawline",icon:w.drawline,click:n},r.drawrect={name:"drawrect",title:function(m){return a(m,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:w.drawrect,click:n},r.drawcircle={name:"drawcircle",title:function(m){return a(m,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:w.drawcircle,click:n},r.eraseshape={name:"eraseshape",title:function(m){return a(m,"Erase active shape")},icon:w.eraseshape,click:e},r.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(m){return a(m,"Zoom in")},attr:"zoom",val:"in",icon:w.zoom_plus,click:n},r.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(m){return a(m,"Zoom out")},attr:"zoom",val:"out",icon:w.zoom_minus,click:n},r.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(m){return a(m,"Autoscale")},attr:"zoom",val:"auto",icon:w.autoscale,click:n},r.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(m){return a(m,"Reset axes")},attr:"zoom",val:"reset",icon:w.home,click:n},r.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(m){return a(m,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:w.tooltip_basic,gravity:"ne",click:n},r.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(m){return a(m,"Compare data on hover")},attr:"hovermode",val:function(m){return m._fullLayout._isHoriz?"y":"x"},icon:w.tooltip_compare,gravity:"ne",click:n};function n(m,M){var x=M.currentTarget,T=x.getAttribute("data-attr"),_=x.getAttribute("data-val")||!0,f=m._fullLayout,L={},S=b.list(m,null,!0),k=f._cartesianSpikesEnabled,P,z;if(T==="zoom"){var I=_==="in"?.5:2,R=(1+I)/2,D=(1-I)/2,O;for(z=0;z<S.length;z++)if(P=S[z],!P.fixedrange)if(O=P._name,_==="auto")L[O+".autorange"]=!0;else if(_==="reset"){if(P._rangeInitial===void 0)L[O+".autorange"]=!0;else{var F=P._rangeInitial.slice();L[O+".range[0]"]=F[0],L[O+".range[1]"]=F[1]}P._showSpikeInitial!==void 0&&(L[O+".showspikes"]=P._showSpikeInitial,k==="on"&&!P._showSpikeInitial&&(k="off"))}else{var G=[P.r2l(P.range[0]),P.r2l(P.range[1])],W=[R*G[0]+D*G[1],R*G[1]+D*G[0]];L[O+".range[0]"]=P.l2r(W[0]),L[O+".range[1]"]=P.l2r(W[1])}}else T==="hovermode"&&(_==="x"||_==="y")&&(_=f._isHoriz?"y":"x",x.setAttribute("data-val",_)),L[T]=_;f._cartesianSpikesEnabled=k,d.call("_guiRelayout",m,L)}r.zoom3d={name:"zoom3d",_cat:"zoom",title:function(m){return a(m,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:w.zoombox,click:c},r.pan3d={name:"pan3d",_cat:"pan",title:function(m){return a(m,"Pan")},attr:"scene.dragmode",val:"pan",icon:w.pan,click:c},r.orbitRotation={name:"orbitRotation",title:function(m){return a(m,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:w["3d_rotate"],click:c},r.tableRotation={name:"tableRotation",title:function(m){return a(m,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:w["z-axis"],click:c};function c(m,M){for(var x=M.currentTarget,T=x.getAttribute("data-attr"),_=x.getAttribute("data-val")||!0,f=m._fullLayout._subplots.gl3d||[],L={},S=T.split("."),k=0;k<f.length;k++)L[f[k]+"."+S[1]]=_;var P=_==="pan"?_:"zoom";L.dragmode=P,d.call("_guiRelayout",m,L)}r.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(m){return a(m,"Reset camera to default")},attr:"resetDefault",icon:w.home,click:s},r.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(m){return a(m,"Reset camera to last save")},attr:"resetLastSave",icon:w.movie,click:s};function s(m,M){for(var x=M.currentTarget,T=x.getAttribute("data-attr"),_=T==="resetLastSave",f=T==="resetDefault",L=m._fullLayout,S=L._subplots.gl3d||[],k={},P=0;P<S.length;P++){var z=S[P],I=z+".camera",R=z+".aspectratio",D=z+".aspectmode",O=L[z]._scene,F;_?(k[I+".up"]=O.viewInitial.up,k[I+".eye"]=O.viewInitial.eye,k[I+".center"]=O.viewInitial.center,F=!0):f&&(k[I+".up"]=null,k[I+".eye"]=null,k[I+".center"]=null,F=!0),F&&(k[R+".x"]=O.viewInitial.aspectratio.x,k[R+".y"]=O.viewInitial.aspectratio.y,k[R+".z"]=O.viewInitial.aspectratio.z,k[D]=O.viewInitial.aspectmode)}d.call("_guiRelayout",m,k)}r.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(m){return a(m,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:w.tooltip_basic,gravity:"ne",click:v};function i(m,M){var x=M.currentTarget,T=x._previousVal,_=m._fullLayout,f=_._subplots.gl3d||[],L=["xaxis","yaxis","zaxis"],S={},k={};if(T)k=T,x._previousVal=null;else{for(var P=0;P<f.length;P++){var z=f[P],I=_[z],R=z+".hovermode";S[R]=I.hovermode,k[R]=!1;for(var D=0;D<3;D++){var O=L[D],F=z+"."+O+".showspikes";k[F]=!1,S[F]=I[O].showspikes}}x._previousVal=S}return k}function v(m,M){var x=i(m,M);d.call("_guiRelayout",m,x)}r.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(m){return a(m,"Zoom in")},attr:"zoom",val:"in",icon:w.zoom_plus,click:u},r.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(m){return a(m,"Zoom out")},attr:"zoom",val:"out",icon:w.zoom_minus,click:u},r.resetGeo={name:"resetGeo",_cat:"reset",title:function(m){return a(m,"Reset")},attr:"reset",val:null,icon:w.autoscale,click:u},r.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(m){return a(m,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:w.tooltip_basic,gravity:"ne",click:h};function u(m,M){for(var x=M.currentTarget,T=x.getAttribute("data-attr"),_=x.getAttribute("data-val")||!0,f=m._fullLayout,L=f._subplots.geo||[],S=0;S<L.length;S++){var k=L[S],P=f[k];if(T==="zoom"){var z=P.projection.scale,I=_==="in"?2*z:.5*z;d.call("_guiRelayout",m,k+".projection.scale",I)}}T==="reset"&&A(m,"geo")}r.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(m){return a(m,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:w.tooltip_basic,gravity:"ne",click:h},r.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(m){return a(m,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:w.tooltip_basic,gravity:"ne",click:h};function g(m){var M=m._fullLayout;return M.hovermode?!1:M._has("cartesian")?M._isHoriz?"y":"x":"closest"}function h(m){var M=g(m);d.call("_guiRelayout",m,"hovermode",M)}r.resetViewSankey={name:"resetSankeyGroup",title:function(m){return a(m,"Reset view")},icon:w.home,click:function(m){for(var M={"node.groups":[],"node.x":[],"node.y":[]},x=0;x<m._fullData.length;x++){var T=m._fullData[x]._viewInitial;M["node.groups"].push(T.node.groups.slice()),M["node.x"].push(T.node.x.slice()),M["node.y"].push(T.node.y.slice())}d.call("restyle",m,M)}},r.toggleHover={name:"toggleHover",title:function(m){return a(m,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:w.tooltip_basic,gravity:"ne",click:function(m,M){var x=i(m,M);x.hovermode=g(m),d.call("_guiRelayout",m,x)}},r.resetViews={name:"resetViews",title:function(m){return a(m,"Reset views")},icon:w.home,click:function(m,M){var x=M.currentTarget;x.setAttribute("data-attr","zoom"),x.setAttribute("data-val","reset"),n(m,M),x.setAttribute("data-attr","resetLastSave"),s(m,M),A(m,"geo"),A(m,"mapbox")}},r.toggleSpikelines={name:"toggleSpikelines",title:function(m){return a(m,"Toggle Spike Lines")},icon:w.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(m){var M=m._fullLayout,x=M._cartesianSpikesEnabled;M._cartesianSpikesEnabled=x==="on"?"off":"on",d.call("_guiRelayout",m,y(m))}};function y(m){for(var M=m._fullLayout,x=M._cartesianSpikesEnabled==="on",T=b.list(m,null,!0),_={},f=0;f<T.length;f++){var L=T[f];_[L._name+".showspikes"]=x?!0:L._showSpikeInitial}return _}r.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(m){return a(m,"Reset view")},attr:"reset",icon:w.home,click:function(m){A(m,"mapbox")}},r.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(m){return a(m,"Zoom in")},attr:"zoom",val:"in",icon:w.zoom_plus,click:p},r.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(m){return a(m,"Zoom out")},attr:"zoom",val:"out",icon:w.zoom_minus,click:p};function p(m,M){for(var x=M.currentTarget,T=x.getAttribute("data-val"),_=m._fullLayout,f=_._subplots.mapbox||[],L=1.05,S={},k=0;k<f.length;k++){var P=f[k],z=_[P].zoom,I=T==="in"?L*z:z/L;S[P+".zoom"]=I}d.call("_guiRelayout",m,S)}function A(m,M){for(var x=m._fullLayout,T=x._subplots[M]||[],_={},f=0;f<T.length;f++)for(var L=T[f],S=x[L]._subplot,k=S.viewInitial,P=Object.keys(k),z=0;z<P.length;z++){var I=P[z];_[L+"."+I]=k[I]}d.call("_guiRelayout",m,_)}},{"../../fonts/ploticon":482,"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../shapes/draw":450}],427:[function(t,B,H){var d=t("./buttons"),l=Object.keys(d),b=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],w=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(b),e=[],o=function(a){if(w.indexOf(a._cat||a.name)===-1){var r=a.name,n=(a._cat||a.name).toLowerCase();e.indexOf(r)===-1&&e.push(r),e.indexOf(n)===-1&&e.push(n)}};l.forEach(function(a){o(d[a])}),e.sort(),B.exports={DRAW_MODES:b,backButtons:w,foreButtons:e}},{"./buttons":426}],428:[function(t,B,H){var d=t("../../lib"),l=t("../color"),b=t("../../plot_api/plot_template"),w=t("./attributes");B.exports=function(o,a){var r=o.modebar||{},n=b.newContainer(a,"modebar");function c(i,v){return d.coerce(r,n,w,i,v)}c("orientation"),c("bgcolor",l.addOpacity(a.paper_bgcolor,.5));var s=l.contrast(l.rgb(a.modebar.bgcolor));c("color",l.addOpacity(s,.3)),c("activecolor",l.addOpacity(s,.7)),c("uirevision",a.uirevision),c("add"),c("remove")}},{"../../lib":503,"../../plot_api/plot_template":543,"../color":366,"./attributes":425}],429:[function(t,B,H){B.exports={moduleType:"component",name:"modebar",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),manage:t("./manage")}},{"./attributes":425,"./defaults":428,"./manage":430}],430:[function(t,B,H){var d=t("../../plots/cartesian/axis_ids"),l=t("../../traces/scatter/subtypes"),b=t("../../registry"),w=t("../fx/helpers").isUnifiedHover,e=t("./modebar"),o=t("./buttons"),a=t("./constants").DRAW_MODES;B.exports=function(g){var h=g._fullLayout,y=g._context,p=h._modeBar;if(!y.displayModeBar&&!y.watermark){p&&(p.destroy(),delete h._modeBar);return}if(!Array.isArray(y.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(y.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var A=y.modeBarButtons,m;Array.isArray(A)&&A.length?m=v(A):!y.displayModeBar&&y.watermark?m=[]:m=r(g),p?p.update(g,m):h._modeBar=e(g,m)};function r(u){var g=u._fullLayout,h=u._fullData,y=u._context;function p(ee,j){if(typeof j=="string"){if(j.toLowerCase()===ee.toLowerCase())return!0}else{var Q=j.name,ne=j._cat||j.name;if(Q===ee||ne===ee.toLowerCase())return!0}return!1}var A=g.modebar.add;typeof A=="string"&&(A=[A]);var m=g.modebar.remove;typeof m=="string"&&(m=[m]);var M=y.modeBarButtonsToAdd.concat(A.filter(function(ee){for(var j=0;j<y.modeBarButtonsToRemove.length;j++)if(p(ee,y.modeBarButtonsToRemove[j]))return!1;return!0})),x=y.modeBarButtonsToRemove.concat(m.filter(function(ee){for(var j=0;j<y.modeBarButtonsToAdd.length;j++)if(p(ee,y.modeBarButtonsToAdd[j]))return!1;return!0})),T=g._has("cartesian"),_=g._has("gl3d"),f=g._has("geo"),L=g._has("pie"),S=g._has("funnelarea"),k=g._has("gl2d"),P=g._has("ternary"),z=g._has("mapbox"),I=g._has("polar"),R=g._has("smith"),D=g._has("sankey"),O=n(g),F=w(g.hovermode),G=[];function W(ee){if(!!ee.length){for(var j=[],Q=0;Q<ee.length;Q++){for(var ne=ee[Q],ae=o[ne],ie=ae.name.toLowerCase(),ue=(ae._cat||ae.name).toLowerCase(),xe=!1,he=0;he<x.length;he++){var ge=x[he].toLowerCase();if(ge===ie||ge===ue){xe=!0;break}}xe||j.push(o[ne])}G.push(j)}}var q=["toImage"];y.showEditInChartStudio?q.push("editInChartStudio"):y.showSendToCloud&&q.push("sendDataToCloud"),W(q);var J=[],X=[],Z=[],se=[];(T||k||L||S||P)+f+_+z+I+R>1?(X=["toggleHover"],Z=["resetViews"]):f?(J=["zoomInGeo","zoomOutGeo"],X=["hoverClosestGeo"],Z=["resetGeo"]):_?(X=["hoverClosest3d"],Z=["resetCameraDefault3d","resetCameraLastSave3d"]):z?(J=["zoomInMapbox","zoomOutMapbox"],X=["toggleHover"],Z=["resetViewMapbox"]):k?X=["hoverClosestGl2d"]:L?X=["hoverClosestPie"]:D?(X=["hoverClosestCartesian","hoverCompareCartesian"],Z=["resetViewSankey"]):X=["toggleHover"],T&&(X=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(s(h)||F)&&(X=[]),(T||k)&&!O&&(J=["zoomIn2d","zoomOut2d","autoScale2d"],Z[0]!=="resetViews"&&(Z=["resetScale2d"])),_?se=["zoom3d","pan3d","orbitRotation","tableRotation"]:(T||k)&&!O||P?se=["zoom2d","pan2d"]:z||f?se=["pan2d"]:I&&(se=["zoom2d"]),c(h)&&se.push("select2d","lasso2d");var le=[],oe=function(ee){le.indexOf(ee)===-1&&X.indexOf(ee)!==-1&&le.push(ee)};if(Array.isArray(M)){for(var U=[],V=0;V<M.length;V++){var re=M[V];typeof re=="string"?(re=re.toLowerCase(),a.indexOf(re)!==-1?(g._has("mapbox")||g._has("cartesian"))&&se.push(re):re==="togglespikelines"?oe("toggleSpikelines"):re==="togglehover"?oe("toggleHover"):re==="hovercompare"?oe("hoverCompareCartesian"):re==="hoverclosest"?(oe("hoverClosestCartesian"),oe("hoverClosestGeo"),oe("hoverClosest3d"),oe("hoverClosestGl2d"),oe("hoverClosestPie")):re==="v1hovermode"&&(oe("toggleHover"),oe("hoverClosestCartesian"),oe("hoverCompareCartesian"),oe("hoverClosestGeo"),oe("hoverClosest3d"),oe("hoverClosestGl2d"),oe("hoverClosestPie"))):U.push(re)}M=U}return W(se),W(J.concat(Z)),W(le),i(G,M)}function n(u){for(var g=d.list({_fullLayout:u},null,!0),h=0;h<g.length;h++)if(!g[h].fixedrange)return!1;return!0}function c(u){for(var g=!1,h=0;h<u.length&&!g;h++){var y=u[h];!y._module||!y._module.selectPoints||(b.traceIs(y,"scatter-like")?(l.hasMarkers(y)||l.hasText(y))&&(g=!0):b.traceIs(y,"box-violin")?(y.boxpoints==="all"||y.points==="all")&&(g=!0):g=!0)}return g}function s(u){for(var g=0;g<u.length;g++)if(!b.traceIs(u[g],"noHover"))return!1;return!0}function i(u,g){if(g.length)if(Array.isArray(g[0]))for(var h=0;h<g.length;h++)u.push(g[h]);else u.push(g);return u}function v(u){for(var g=0;g<u.length;g++)for(var h=u[g],y=0;y<h.length;y++){var p=h[y];if(typeof p=="string")if(o[p]!==void 0)u[g][y]=o[p];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return u}},{"../../plots/cartesian/axis_ids":558,"../../registry":638,"../../traces/scatter/subtypes":951,"../fx/helpers":402,"./buttons":426,"./constants":427,"./modebar":431}],431:[function(t,B,H){var d=t("@plotly/d3"),l=t("fast-isnumeric"),b=t("../../lib"),w=t("../../fonts/ploticon"),e=t("../../version").version,o=new DOMParser;function a(s){this.container=s.container,this.element=document.createElement("div"),this.update(s.graphInfo,s.buttons),this.container.appendChild(this.element)}var r=a.prototype;r.update=function(s,i){this.graphInfo=s;var v=this.graphInfo._context,u=this.graphInfo._fullLayout,g="modebar-"+u._uid;this.element.setAttribute("id",g),this._uid=g,this.element.className="modebar",v.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),u.modebar.orientation==="v"&&(this.element.className+=" vertical",i=i.reverse());var h=u.modebar,y=v.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";b.deleteRelatedStyleRule(g),b.addRelatedStyleRule(g,y+"#"+g+" .modebar-group","background-color: "+h.bgcolor),b.addRelatedStyleRule(g,"#"+g+" .modebar-btn .icon path","fill: "+h.color),b.addRelatedStyleRule(g,"#"+g+" .modebar-btn:hover .icon path","fill: "+h.activecolor),b.addRelatedStyleRule(g,"#"+g+" .modebar-btn.active .icon path","fill: "+h.activecolor);var p=!this.hasButtons(i),A=this.hasLogo!==v.displaylogo,m=this.locale!==v.locale;if(this.locale=v.locale,(p||A||m)&&(this.removeAllButtons(),this.updateButtons(i),v.watermark||v.displaylogo)){var M=this.getLogo();v.watermark&&(M.className=M.className+" watermark"),u.modebar.orientation==="v"?this.element.insertBefore(M,this.element.childNodes[0]):this.element.appendChild(M),this.hasLogo=!0}this.updateActiveButton()},r.updateButtons=function(s){var i=this;this.buttons=s,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(v){var u=i.createGroup();v.forEach(function(g){var h=g.name;if(!h)throw new Error("must provide button 'name' in button config");if(i.buttonsNames.indexOf(h)!==-1)throw new Error("button name '"+h+"' is taken");i.buttonsNames.push(h);var y=i.createButton(g);i.buttonElements.push(y),u.appendChild(y)}),i.element.appendChild(u)})},r.createGroup=function(){var s=document.createElement("div");return s.className="modebar-group",s},r.createButton=function(s){var i=this,v=document.createElement("a");v.setAttribute("rel","tooltip"),v.className="modebar-btn";var u=s.title;u===void 0?u=s.name:typeof u=="function"&&(u=u(this.graphInfo)),(u||u===0)&&v.setAttribute("data-title",u),s.attr!==void 0&&v.setAttribute("data-attr",s.attr);var g=s.val;g!==void 0&&(typeof g=="function"&&(g=g(this.graphInfo)),v.setAttribute("data-val",g));var h=s.click;if(typeof h!="function")throw new Error("must provide button 'click' function in button config");v.addEventListener("click",function(p){s.click(i.graphInfo,p),i.updateActiveButton(p.currentTarget)}),v.setAttribute("data-toggle",s.toggle||!1),s.toggle&&d.select(v).classed("active",!0);var y=s.icon;return typeof y=="function"?v.appendChild(y()):v.appendChild(this.createIcon(y||w.question)),v.setAttribute("data-gravity",s.gravity||"n"),v},r.createIcon=function(s){var i=l(s.height)?Number(s.height):s.ascent-s.descent,v="http://www.w3.org/2000/svg",u;if(s.path){u=document.createElementNS(v,"svg"),u.setAttribute("viewBox",[0,0,s.width,i].join(" ")),u.setAttribute("class","icon");var g=document.createElementNS(v,"path");g.setAttribute("d",s.path),s.transform?g.setAttribute("transform",s.transform):s.ascent!==void 0&&g.setAttribute("transform","matrix(1 0 0 -1 0 "+s.ascent+")"),u.appendChild(g)}if(s.svg){var h=o.parseFromString(s.svg,"application/xml");u=h.childNodes[0]}return u.setAttribute("height","1em"),u.setAttribute("width","1em"),u},r.updateActiveButton=function(s){var i=this.graphInfo._fullLayout,v=s!==void 0?s.getAttribute("data-attr"):null;this.buttonElements.forEach(function(u){var g=u.getAttribute("data-val")||!0,h=u.getAttribute("data-attr"),y=u.getAttribute("data-toggle")==="true",p=d.select(u);if(y)h===v&&p.classed("active",!p.classed("active"));else{var A=h===null?h:b.nestedProperty(i,h).get();p.classed("active",A===g)}})},r.hasButtons=function(s){var i=this.buttons;if(!i||s.length!==i.length)return!1;for(var v=0;v<s.length;++v){if(s[v].length!==i[v].length)return!1;for(var u=0;u<s[v].length;u++)if(s[v][u].name!==i[v][u].name)return!1}return!0};function n(s){return s+" (v"+e+")"}r.getLogo=function(){var s=this.createGroup(),i=document.createElement("a");return i.href="https://plotly.com/",i.target="_blank",i.setAttribute("data-title",n(b._(this.graphInfo,"Produced with Plotly.js"))),i.className="modebar-btn plotlyjsicon modebar-btn--logo",i.appendChild(this.createIcon(w.newplotlylogo)),s.appendChild(i),s},r.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},r.destroy=function(){b.removeElement(this.container.querySelector(".modebar")),b.deleteRelatedStyleRule(this._uid)};function c(s,i){var v=s._fullLayout,u=new a({graphInfo:s,container:v._modebardiv.node(),buttons:i});return v._privateplot&&d.select(u.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),u}B.exports=c},{"../../fonts/ploticon":482,"../../lib":503,"../../version":1119,"@plotly/d3":58,"fast-isnumeric":190}],432:[function(t,B,H){var d=t("../../plots/font_attributes"),l=t("../color/attributes"),b=t("../../plot_api/plot_template").templatedArray,w=b("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});B.exports={visible:{valType:"boolean",editType:"plot"},buttons:w,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:d({editType:"plot"}),bgcolor:{valType:"color",dflt:l.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:l.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":543,"../../plots/font_attributes":585,"../color/attributes":365}],433:[function(t,B,H){B.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],434:[function(t,B,H){var d=t("../../lib"),l=t("../color"),b=t("../../plot_api/plot_template"),w=t("../../plots/array_container_defaults"),e=t("./attributes"),o=t("./constants");B.exports=function(c,s,i,v,u){var g=c.rangeselector||{},h=b.newContainer(s,"rangeselector");function y(x,T){return d.coerce(g,h,e,x,T)}var p=w(g,h,{name:"buttons",handleItemDefaults:a,calendar:u}),A=y("visible",p.length>0);if(A){var m=r(s,i,v);y("x",m[0]),y("y",m[1]),d.noneOrAll(c,s,["x","y"]),y("xanchor"),y("yanchor"),d.coerceFont(y,"font",i.font);var M=y("bgcolor");y("activecolor",l.contrast(M,o.lightAmount,o.darkAmount)),y("bordercolor"),y("borderwidth")}};function a(n,c,s,i){var v=i.calendar;function u(y,p){return d.coerce(n,c,e.buttons,y,p)}var g=u("visible");if(g){var h=u("step");h!=="all"&&(v&&v!=="gregorian"&&(h==="month"||h==="year")?c.stepmode="backward":u("stepmode"),u("count")),u("label")}}function r(n,c,s){for(var i=s.filter(function(h){return c[h].anchor===n._id}),v=0,u=0;u<i.length;u++){var g=c[i[u]].domain;g&&(v=Math.max(g[1],v))}return[n.domain[0],v+o.yPad]}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../color":366,"./attributes":432,"./constants":433}],435:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../registry"),b=t("../../plots/plots"),w=t("../color"),e=t("../drawing"),o=t("../../lib"),a=o.strTranslate,r=t("../../lib/svg_text_utils"),n=t("../../plots/cartesian/axis_ids"),c=t("../../constants/alignment"),s=c.LINE_SPACING,i=c.FROM_TL,v=c.FROM_BR,u=t("./constants"),g=t("./get_update_object");B.exports=function(f){var L=f._fullLayout,S=L._infolayer.selectAll(".rangeselector").data(h(f),y);S.enter().append("g").classed("rangeselector",!0),S.exit().remove(),S.style({cursor:"pointer","pointer-events":"all"}),S.each(function(k){var P=d.select(this),z=k,I=z.rangeselector,R=P.selectAll("g.button").data(o.filterVisible(I.buttons));R.enter().append("g").classed("button",!0),R.exit().remove(),R.each(function(D){var O=d.select(this),F=g(z,D);D._isActive=p(z,D,F),O.call(A,I,D),O.call(M,I,D,f),O.on("click",function(){f._dragged||l.call("_guiRelayout",f,F)}),O.on("mouseover",function(){D._isHovered=!0,O.call(A,I,D)}),O.on("mouseout",function(){D._isHovered=!1,O.call(A,I,D)})}),T(f,R,I,z._name,P)})};function h(_){for(var f=n.list(_,"x",!0),L=[],S=0;S<f.length;S++){var k=f[S];k.rangeselector&&k.rangeselector.visible&&L.push(k)}return L}function y(_){return _._id}function p(_,f,L){if(f.step==="all")return _.autorange===!0;var S=Object.keys(L);return _.range[0]===L[S[0]]&&_.range[1]===L[S[1]]}function A(_,f,L){var S=o.ensureSingle(_,"rect","selector-rect",function(k){k.attr("shape-rendering","crispEdges")});S.attr({rx:u.rx,ry:u.ry}),S.call(w.stroke,f.bordercolor).call(w.fill,m(f,L)).style("stroke-width",f.borderwidth+"px")}function m(_,f){return f._isActive||f._isHovered?_.activecolor:_.bgcolor}function M(_,f,L,S){function k(z){r.convertToTspans(z,S)}var P=o.ensureSingle(_,"text","selector-text",function(z){z.attr("text-anchor","middle")});P.call(e.font,f.font).text(x(L,S._fullLayout._meta)).call(k)}function x(_,f){return _.label?f?o.templateString(_.label,f):_.label:_.step==="all"?"all":_.count+_.step.charAt(0)}function T(_,f,L,S,k){var P=0,z=0,I=L.borderwidth;f.each(function(){var W=d.select(this),q=W.select(".selector-text"),J=L.font.size*s,X=Math.max(J*r.lineCount(q),16)+3;z=Math.max(z,X)}),f.each(function(){var W=d.select(this),q=W.select(".selector-rect"),J=W.select(".selector-text"),X=J.node()&&e.bBox(J.node()).width,Z=L.font.size*s,se=r.lineCount(J),le=Math.max(X+10,u.minButtonWidth);W.attr("transform",a(I+P,I)),q.attr({x:0,y:0,width:le,height:z}),r.positionText(J,le/2,z/2-(se-1)*Z/2+3),P+=le+5});var R=_._fullLayout._size,D=R.l+R.w*L.x,O=R.t+R.h*(1-L.y),F="left";o.isRightAnchor(L)&&(D-=P,F="right"),o.isCenterAnchor(L)&&(D-=P/2,F="center");var G="top";o.isBottomAnchor(L)&&(O-=z,G="bottom"),o.isMiddleAnchor(L)&&(O-=z/2,G="middle"),P=Math.ceil(P),z=Math.ceil(z),D=Math.round(D),O=Math.round(O),b.autoMargin(_,S+"-range-selector",{x:L.x,y:L.y,l:P*i[F],r:P*v[F],b:z*v[G],t:z*i[G]}),k.attr("transform",a(D,O))}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../color":366,"../drawing":388,"./constants":433,"./get_update_object":436,"@plotly/d3":58}],436:[function(t,B,H){var d=t("d3-time"),l=t("../../lib").titleCase;B.exports=function(e,o){var a=e._name,r={};if(o.step==="all")r[a+".autorange"]=!0;else{var n=b(e,o);r[a+".range[0]"]=n[0],r[a+".range[1]"]=n[1]}return r};function b(w,e){var o=w.range,a=new Date(w.r2l(o[1])),r=e.step,n=d["utc"+l(r)],c=e.count,s;switch(e.stepmode){case"backward":s=w.l2r(+n.offset(a,-c));break;case"todate":var i=n.offset(a,-c);s=w.l2r(+n.ceil(i));break}var v=o[1];return[s,v]}},{"../../lib":503,"d3-time":122}],437:[function(t,B,H){B.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:t("./attributes")}}},layoutAttributes:t("./attributes"),handleDefaults:t("./defaults"),draw:t("./draw")}},{"./attributes":432,"./defaults":434,"./draw":435}],438:[function(t,B,H){var d=t("../color/attributes");B.exports={bgcolor:{valType:"color",dflt:d.background,editType:"plot"},bordercolor:{valType:"color",dflt:d.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":365}],439:[function(t,B,H){var d=t("../../plots/cartesian/axis_ids").list,l=t("../../plots/cartesian/autorange").getAutoRange,b=t("./constants");B.exports=function(e){for(var o=d(e,"x",!0),a=0;a<o.length;a++){var r=o[a],n=r[b.name];n&&n.visible&&n.autorange&&(n._input.autorange=!0,n._input.range=n.range=l(e,r))}}},{"../../plots/cartesian/autorange":553,"../../plots/cartesian/axis_ids":558,"./constants":440}],440:[function(t,B,H){B.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],441:[function(t,B,H){var d=t("../../lib"),l=t("../../plot_api/plot_template"),b=t("../../plots/cartesian/axis_ids"),w=t("./attributes"),e=t("./oppaxis_attributes");B.exports=function(a,r,n){var c=a[n],s=r[n];if(!(c.rangeslider||r._requestRangeslider[s._id]))return;d.isPlainObject(c.rangeslider)||(c.rangeslider={});var i=c.rangeslider,v=l.newContainer(s,"rangeslider");function u(S,k){return d.coerce(i,v,w,S,k)}var g,h;function y(S,k){return d.coerce(g,h,e,S,k)}var p=u("visible");if(!!p){u("bgcolor",r.plot_bgcolor),u("bordercolor"),u("borderwidth"),u("thickness"),u("autorange",!s.isValidRange(i.range)),u("range");var A=r._subplots;if(A)for(var m=A.cartesian.filter(function(S){return S.substr(0,S.indexOf("y"))===b.name2id(n)}).map(function(S){return S.substr(S.indexOf("y"),S.length)}),M=d.simpleMap(m,b.id2name),x=0;x<M.length;x++){var T=M[x];g=i[T]||{},h=l.newContainer(v,T,"yaxis");var _=r[T],f;g.range&&_.isValidRange(g.range)&&(f="fixed");var L=y("rangemode",f);L!=="match"&&y("range",_.range.slice())}v._input=i}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_ids":558,"./attributes":438,"./oppaxis_attributes":445}],442:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../registry"),b=t("../../plots/plots"),w=t("../../lib"),e=w.strTranslate,o=t("../drawing"),a=t("../color"),r=t("../titles"),n=t("../../plots/cartesian"),c=t("../../plots/cartesian/axis_ids"),s=t("../dragelement"),i=t("../../lib/setcursor"),v=t("./constants");B.exports=function(_){for(var f=_._fullLayout,L=f._rangeSliderData,S=0;S<L.length;S++){var k=L[S][v.name];k._clipId=k._id+"-"+f._uid}function P(I){return I._name}var z=f._infolayer.selectAll("g."+v.containerClassName).data(L,P);z.exit().each(function(I){var R=I[v.name];f._topdefs.select("#"+R._clipId).remove()}).remove(),L.length!==0&&(z.enter().append("g").classed(v.containerClassName,!0).attr("pointer-events","all"),z.each(function(I){var R=d.select(this),D=I[v.name],O=f[c.id2name(I.anchor)],F=D[c.id2name(I.anchor)];if(D.range){var G=w.simpleMap(D.range,I.r2l),W=w.simpleMap(I.range,I.r2l),q;W[0]<W[1]?q=[Math.min(G[0],W[0]),Math.max(G[1],W[1])]:q=[Math.max(G[0],W[0]),Math.min(G[1],W[1])],D.range=D._input.range=w.simpleMap(q,I.l2r)}I.cleanRange("rangeslider.range");var J=f._size,X=I.domain;D._width=J.w*(X[1]-X[0]);var Z=Math.round(J.l+J.w*X[0]),se=Math.round(J.t+J.h*(1-I._counterDomainMin)+(I.side==="bottom"?I._depth:0)+D._offsetShift+v.extraPad);R.attr("transform",e(Z,se)),D._rl=w.simpleMap(D.range,I.r2l);var le=D._rl[0],oe=D._rl[1],U=oe-le;if(D.p2d=function(xe){return xe/D._width*U+le},D.d2p=function(xe){return(xe-le)/U*D._width},I.rangebreaks){var V=I.locateBreaks(le,oe);if(V.length){var re,ee,j=0;for(re=0;re<V.length;re++)ee=V[re],j+=ee.max-ee.min;var Q=D._width/(oe-le-j),ne=[-Q*le];for(re=0;re<V.length;re++)ee=V[re],ne.push(ne[ne.length-1]-Q*(ee.max-ee.min));for(D.d2p=function(xe){for(var he=ne[0],ge=0;ge<V.length;ge++){var me=V[ge];if(xe>=me.max)he=ne[ge+1];else if(xe<me.min)break}return he+Q*xe},re=0;re<V.length;re++)ee=V[re],ee.pmin=D.d2p(ee.min),ee.pmax=D.d2p(ee.max);D.p2d=function(xe){for(var he=ne[0],ge=0;ge<V.length;ge++){var me=V[ge];if(xe>=me.pmax)he=ne[ge+1];else if(xe<me.pmin)break}return(xe-he)/Q}}}if(F.rangemode!=="match"){var ae=O.r2l(F.range[0]),ie=O.r2l(F.range[1]),ue=ie-ae;D.d2pOppAxis=function(xe){return(xe-ae)/ue*D._height}}R.call(y,_,I,D).call(p,_,I,D).call(A,_,I,D).call(M,_,I,D,F).call(x,_,I,D).call(T,_,I,D),u(R,_,I,D),h(R,_,I,D,O,F),I.side==="bottom"&&r.draw(_,I._id+"title",{propContainer:I,propName:I._name+".title",placeholder:f._dfltTitle.x,attributes:{x:I._offset+I._length/2,y:se+D._height+D._offsetShift+10+1.5*I.title.font.size,"text-anchor":"middle"}})}))};function u(_,f,L,S){if(f._context.staticPlot)return;var k=_.select("rect."+v.slideBoxClassName).node(),P=_.select("rect."+v.grabAreaMinClassName).node(),z=_.select("rect."+v.grabAreaMaxClassName).node();function I(){var R=d.event,D=R.target,O=R.clientX||R.touches[0].clientX,F=O-_.node().getBoundingClientRect().left,G=S.d2p(L._rl[0]),W=S.d2p(L._rl[1]),q=s.coverSlip();this.addEventListener("touchmove",J),this.addEventListener("touchend",X),q.addEventListener("mousemove",J),q.addEventListener("mouseup",X);function J(Z){var se=Z.clientX||Z.touches[0].clientX,le=+se-O,oe,U,V;switch(D){case k:V="ew-resize",oe=G+le,U=W+le;break;case P:V="col-resize",oe=G+le,U=W;break;case z:V="col-resize",oe=G,U=W+le;break;default:V="ew-resize",oe=F,U=F+le;break}if(U<oe){var re=U;U=oe,oe=re}S._pixelMin=oe,S._pixelMax=U,i(d.select(q),V),g(_,f,L,S)}function X(){q.removeEventListener("mousemove",J),q.removeEventListener("mouseup",X),this.removeEventListener("touchmove",J),this.removeEventListener("touchend",X),w.removeElement(q)}}_.on("mousedown",I),_.on("touchstart",I)}function g(_,f,L,S){function k(I){return L.l2r(w.constrain(I,S._rl[0],S._rl[1]))}var P=k(S.p2d(S._pixelMin)),z=k(S.p2d(S._pixelMax));window.requestAnimationFrame(function(){l.call("_guiRelayout",f,L._name+".range",[P,z])})}function h(_,f,L,S,k,P){var z=v.handleWidth/2;function I(Z){return w.constrain(Z,0,S._width)}function R(Z){return w.constrain(Z,0,S._height)}function D(Z){return w.constrain(Z,-z,S._width+z)}var O=I(S.d2p(L._rl[0])),F=I(S.d2p(L._rl[1]));if(_.select("rect."+v.slideBoxClassName).attr("x",O).attr("width",F-O),_.select("rect."+v.maskMinClassName).attr("width",O),_.select("rect."+v.maskMaxClassName).attr("x",F).attr("width",S._width-F),P.rangemode!=="match"){var G=S._height-R(S.d2pOppAxis(k._rl[1])),W=S._height-R(S.d2pOppAxis(k._rl[0]));_.select("rect."+v.maskMinOppAxisClassName).attr("x",O).attr("height",G).attr("width",F-O),_.select("rect."+v.maskMaxOppAxisClassName).attr("x",O).attr("y",W).attr("height",S._height-W).attr("width",F-O),_.select("rect."+v.slideBoxClassName).attr("y",G).attr("height",W-G)}var q=.5,J=Math.round(D(O-z))-q,X=Math.round(D(F-z))+q;_.select("g."+v.grabberMinClassName).attr("transform",e(J,q)),_.select("g."+v.grabberMaxClassName).attr("transform",e(X,q))}function y(_,f,L,S){var k=w.ensureSingle(_,"rect",v.bgClassName,function(R){R.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),P=S.borderwidth%2===0?S.borderwidth:S.borderwidth-1,z=-S._offsetShift,I=o.crispRound(f,S.borderwidth);k.attr({width:S._width+P,height:S._height+P,transform:e(z,z),fill:S.bgcolor,stroke:S.bordercolor,"stroke-width":I})}function p(_,f,L,S){var k=f._fullLayout,P=w.ensureSingleById(k._topdefs,"clipPath",S._clipId,function(z){z.append("rect").attr({x:0,y:0})});P.select("rect").attr({width:S._width,height:S._height})}function A(_,f,L,S){var k=f.calcdata,P=_.selectAll("g."+v.rangePlotClassName).data(L._subplotsWith,w.identity);P.enter().append("g").attr("class",function(I){return v.rangePlotClassName+" "+I}).call(o.setClipUrl,S._clipId,f),P.order(),P.exit().remove();var z;P.each(function(I,R){var D=d.select(this),O=R===0,F=c.getFromId(f,I,"y"),G=F._name,W=S[G],q={data:[],layout:{xaxis:{type:L.type,domain:[0,1],range:S.range.slice(),calendar:L.calendar},width:S._width,height:S._height,margin:{t:0,b:0,l:0,r:0}},_context:f._context};L.rangebreaks&&(q.layout.xaxis.rangebreaks=L.rangebreaks),q.layout[G]={type:F.type,domain:[0,1],range:W.rangemode!=="match"?W.range.slice():F.range.slice(),calendar:F.calendar},F.rangebreaks&&(q.layout[G].rangebreaks=F.rangebreaks),b.supplyDefaults(q);var J=q._fullLayout.xaxis,X=q._fullLayout[G];J.clearCalc(),J.setScale(),X.clearCalc(),X.setScale();var Z={id:I,plotgroup:D,xaxis:J,yaxis:X,isRangePlot:!0};O?z=Z:(Z.mainplot="xy",Z.mainplotinfo=z),n.rangePlot(f,Z,m(k,I))})}function m(_,f){for(var L=[],S=0;S<_.length;S++){var k=_[S],P=k[0].trace;P.xaxis+P.yaxis===f&&L.push(k)}return L}function M(_,f,L,S,k){var P=w.ensureSingle(_,"rect",v.maskMinClassName,function(D){D.attr({x:0,y:0,"shape-rendering":"crispEdges"})});P.attr("height",S._height).call(a.fill,v.maskColor);var z=w.ensureSingle(_,"rect",v.maskMaxClassName,function(D){D.attr({y:0,"shape-rendering":"crispEdges"})});if(z.attr("height",S._height).call(a.fill,v.maskColor),k.rangemode!=="match"){var I=w.ensureSingle(_,"rect",v.maskMinOppAxisClassName,function(D){D.attr({y:0,"shape-rendering":"crispEdges"})});I.attr("width",S._width).call(a.fill,v.maskOppAxisColor);var R=w.ensureSingle(_,"rect",v.maskMaxOppAxisClassName,function(D){D.attr({y:0,"shape-rendering":"crispEdges"})});R.attr("width",S._width).style("border-top",v.maskOppBorder).call(a.fill,v.maskOppAxisColor)}}function x(_,f,L,S){if(!f._context.staticPlot){var k=w.ensureSingle(_,"rect",v.slideBoxClassName,function(P){P.attr({y:0,cursor:v.slideBoxCursor,"shape-rendering":"crispEdges"})});k.attr({height:S._height,fill:v.slideBoxFill})}}function T(_,f,L,S){var k=w.ensureSingle(_,"g",v.grabberMinClassName),P=w.ensureSingle(_,"g",v.grabberMaxClassName),z={x:0,width:v.handleWidth,rx:v.handleRadius,fill:a.background,stroke:a.defaultLine,"stroke-width":v.handleStrokeWidth,"shape-rendering":"crispEdges"},I={y:Math.round(S._height/4),height:Math.round(S._height/2)},R=w.ensureSingle(k,"rect",v.handleMinClassName,function(W){W.attr(z)});R.attr(I);var D=w.ensureSingle(P,"rect",v.handleMaxClassName,function(W){W.attr(z)});D.attr(I);var O={width:v.grabAreaWidth,x:0,y:0,fill:v.grabAreaFill,cursor:f._context.staticPlot?void 0:v.grabAreaCursor},F=w.ensureSingle(k,"rect",v.grabAreaMinClassName,function(W){W.attr(O)});F.attr("height",S._height);var G=w.ensureSingle(P,"rect",v.grabAreaMaxClassName,function(W){W.attr(O)});G.attr("height",S._height)}},{"../../lib":503,"../../lib/setcursor":524,"../../plots/cartesian":568,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../titles":464,"./constants":440,"@plotly/d3":58}],443:[function(t,B,H){var d=t("../../plots/cartesian/axis_ids"),l=t("../../lib/svg_text_utils"),b=t("./constants"),w=t("../../constants/alignment").LINE_SPACING,e=b.name;function o(a){var r=a&&a[e];return r&&r.visible}H.isVisible=o,H.makeData=function(a){var r=d.list({_fullLayout:a},"x",!0),n=a.margin,c=[];if(!a._has("gl2d"))for(var s=0;s<r.length;s++){var i=r[s];if(o(i)){c.push(i);var v=i[e];v._id=e+i._id,v._height=(a.height-n.b-n.t)*v.thickness,v._offsetShift=Math.floor(v.borderwidth/2)}}a._rangeSliderData=c},H.autoMarginOpts=function(a,r){var n=a._fullLayout,c=r[e],s=r._id.charAt(0),i=0,v=0;if(r.side==="bottom"&&(i=r._depth,r.title.text!==n._dfltTitle[s])){v=1.5*r.title.font.size+10+c._offsetShift;var u=(r.title.text.match(l.BR_TAG_ALL)||[]).length;v+=u*r.title.font.size*w}return{x:0,y:r._counterDomainMin,l:0,r:0,t:0,b:c._height+i+Math.max(n.margin.b,v),pad:b.extraPad+c._offsetShift*2}}},{"../../constants/alignment":471,"../../lib/svg_text_utils":529,"../../plots/cartesian/axis_ids":558,"./constants":440}],444:[function(t,B,H){var d=t("../../lib"),l=t("./attributes"),b=t("./oppaxis_attributes"),w=t("./helpers");B.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:d.extendFlat({},l,{yaxis:b})}}},layoutAttributes:t("./attributes"),handleDefaults:t("./defaults"),calcAutorange:t("./calc_autorange"),draw:t("./draw"),isVisible:w.isVisible,makeData:w.makeData,autoMarginOpts:w.autoMarginOpts}},{"../../lib":503,"./attributes":438,"./calc_autorange":439,"./defaults":441,"./draw":442,"./helpers":443,"./oppaxis_attributes":445}],445:[function(t,B,H){B.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],446:[function(t,B,H){var d=t("../annotations/attributes"),l=t("../../traces/scatter/attributes").line,b=t("../drawing/attributes").dash,w=t("../../lib/extend").extendFlat,e=t("../../plot_api/plot_template").templatedArray;t("../../constants/axis_placeable_objects"),B.exports=e("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:w({},d.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:w({},d.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:w({},l.color,{editType:"arraydraw"}),width:w({},l.width,{editType:"calc+arraydraw"}),dash:w({},b,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":472,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../traces/scatter/attributes":926,"../annotations/attributes":349,"../drawing/attributes":387}],447:[function(t,B,H){var d=t("../../lib"),l=t("../../plots/cartesian/axes"),b=t("./constants"),w=t("./helpers");B.exports=function(c){var s=c._fullLayout,i=d.filterVisible(s.shapes);if(!(!i.length||!c._fullData.length))for(var v=0;v<i.length;v++){var u=i[v];u._extremes={};var g,h,y=l.getRefType(u.xref),p=l.getRefType(u.yref);if(u.xref!=="paper"&&y!=="domain"){var A=u.xsizemode==="pixel"?u.xanchor:u.x0,m=u.xsizemode==="pixel"?u.xanchor:u.x1;g=l.getFromId(c,u.xref),h=r(g,A,m,u.path,b.paramIsX),h&&(u._extremes[g._id]=l.findExtremes(g,h,e(u)))}if(u.yref!=="paper"&&p!=="domain"){var M=u.ysizemode==="pixel"?u.yanchor:u.y0,x=u.ysizemode==="pixel"?u.yanchor:u.y1;g=l.getFromId(c,u.yref),h=r(g,M,x,u.path,b.paramIsY),h&&(u._extremes[g._id]=l.findExtremes(g,h,o(u)))}}};function e(n){return a(n.line.width,n.xsizemode,n.x0,n.x1,n.path,!1)}function o(n){return a(n.line.width,n.ysizemode,n.y0,n.y1,n.path,!0)}function a(n,c,s,i,v,u){var g=n/2,h=u;if(c==="pixel"){var y=v?w.extractPathCoords(v,u?b.paramIsY:b.paramIsX):[s,i],p=d.aggNums(Math.max,null,y),A=d.aggNums(Math.min,null,y),m=A<0?Math.abs(A)+g:g,M=p>0?p+g:g;return{ppad:g,ppadplus:h?m:M,ppadminus:h?M:m}}else return{ppad:g}}function r(n,c,s,i,v){var u=n.type==="category"||n.type==="multicategory"?n.r2c:n.d2c;if(c!==void 0)return[u(c),u(s)];if(!!i){var g=1/0,h=-1/0,y=i.match(b.segmentRE),p,A,m,M,x;for(n.type==="date"&&(u=w.decodeDate(u)),p=0;p<y.length;p++)A=y[p],m=v[A.charAt(0)].drawn,m!==void 0&&(M=y[p].substr(1).match(b.paramRE),!(!M||M.length<m)&&(x=u(M[m]),x<g&&(g=x),x>h&&(h=x)));if(h>=g)return[g,h]}}},{"../../lib":503,"../../plots/cartesian/axes":554,"./constants":448,"./helpers":457}],448:[function(t,B,H){B.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],449:[function(t,B,H){var d=t("../../lib"),l=t("../../plots/cartesian/axes"),b=t("../../plots/array_container_defaults"),w=t("./attributes"),e=t("./helpers");B.exports=function(r,n){b(r,n,{name:"shapes",handleItemDefaults:o})};function o(a,r,n){function c(G,W){return d.coerce(a,r,w,G,W)}var s=c("visible");if(!!s){var i=c("path"),v=i?"path":"rect",u=c("type",v);r.type!=="path"&&delete r.path,c("editable"),c("layer"),c("opacity"),c("fillcolor"),c("fillrule");var g=c("line.width");g&&(c("line.color"),c("line.dash"));for(var h=c("xsizemode"),y=c("ysizemode"),p=["x","y"],A=0;A<2;A++){var m=p[A],M=m+"anchor",x=m==="x"?h:y,T={_fullLayout:n},_,f,L,S=l.coerceRef(a,r,T,m,void 0,"paper"),k=l.getRefType(S);if(k==="range"?(_=l.getFromId(T,S),_._shapeIndices.push(r._index),L=e.rangeToShapePosition(_),f=e.shapePositionToRange(_)):f=L=d.identity,u!=="path"){var P=.25,z=.75,I=m+"0",R=m+"1",D=a[I],O=a[R];a[I]=f(a[I],!0),a[R]=f(a[R],!0),x==="pixel"?(c(I,0),c(R,10)):(l.coercePosition(r,T,c,S,I,P),l.coercePosition(r,T,c,S,R,z)),r[I]=L(r[I]),r[R]=L(r[R]),a[I]=D,a[R]=O}if(x==="pixel"){var F=a[M];a[M]=f(a[M],!0),l.coercePosition(r,T,c,S,M,.25),r[M]=L(r[M]),a[M]=F}}u==="path"?c("path"):d.noneOrAll(a,r,["x0","x1","y0","y1"])}}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":446,"./helpers":457}],450:[function(t,B,H){var d=t("../../registry"),l=t("../../lib"),b=t("../../plots/cartesian/axes"),w=t("./draw_newshape/helpers").readPaths,e=t("./draw_newshape/display_outlines"),o=t("../../plots/cartesian/handle_outline").clearOutlineControllers,a=t("../color"),r=t("../drawing"),n=t("../../plot_api/plot_template").arrayEditor,c=t("../dragelement"),s=t("../../lib/setcursor"),i=t("./constants"),v=t("./helpers");B.exports={draw:u,drawOne:y,eraseActiveShape:f};function u(L){var S=L._fullLayout;S._shapeUpperLayer.selectAll("path").remove(),S._shapeLowerLayer.selectAll("path").remove();for(var k in S._plots){var P=S._plots[k].shapelayer;P&&P.selectAll("path").remove()}for(var z=0;z<S.shapes.length;z++)S.shapes[z].visible&&y(L,z)}function g(L){return!!L._fullLayout._drawing}function h(L){return!L._context.edits.shapePosition}function y(L,S){L._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+S+'"]').remove();var k=v.makeOptionsAndPlotinfo(L,S),P=k.options,z=k.plotinfo;if(!P._input||P.visible===!1)return;if(P.layer!=="below")R(L._fullLayout._shapeUpperLayer);else if(P.xref==="paper"||P.yref==="paper")R(L._fullLayout._shapeLowerLayer);else if(z._hadPlotinfo){var I=z.mainplotinfo||z;R(I.shapelayer)}else R(L._fullLayout._shapeLowerLayer);function R(D){var O=m(L,P),F={"data-index":S,"fill-rule":P.fillrule,d:O},G=P.opacity,W=P.fillcolor,q=P.line.width?P.line.color:"rgba(0,0,0,0)",J=P.line.width,X=P.line.dash;!J&&P.editable===!0&&(J=5,X="solid");var Z=O[O.length-1]!=="Z",se=h(L)&&P.editable&&L._fullLayout._activeShapeIndex===S;se&&(W=Z?"rgba(0,0,0,0)":L._fullLayout.activeshape.fillcolor,G=L._fullLayout.activeshape.opacity);var le=D.append("path").attr(F).style("opacity",G).call(a.stroke,q).call(a.fill,W).call(r.dashLine,X,J);p(le,L,P);var oe;if((se||L._context.edits.shapePosition)&&(oe=n(L.layout,"shapes",P)),se){le.style({cursor:"move"});var U={element:le.node(),plotinfo:z,gd:L,editHelpers:oe,isActiveShape:!0},V=w(O,L);e(V,le,U)}else L._context.edits.shapePosition?A(L,le,P,S,D,oe):P.editable===!0&&le.style("pointer-events",Z||a.opacity(W)*G<=.5?"stroke":"all");le.node().addEventListener("click",function(){return T(L,le)})}}function p(L,S,k){var P=(k.xref+k.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");r.setClipUrl(L,P?"clip"+S._fullLayout._uid+P:null,S)}function A(L,S,k,P,z,I){var R=10,D=10,O=k.xsizemode==="pixel",F=k.ysizemode==="pixel",G=k.type==="line",W=k.type==="path",q=I.modifyItem,J,X,Z,se,le,oe,U,V,re,ee,j,Q,ne,ae,ie,ue=b.getFromId(L,k.xref),xe=b.getRefType(k.xref),he=b.getFromId(L,k.yref),ge=b.getRefType(k.yref),me=v.getDataToPixel(L,ue,!1,xe),ke=v.getDataToPixel(L,he,!0,ge),Ae=v.getPixelToData(L,ue,!1,xe),Ne=v.getPixelToData(L,he,!0,ge),He=De(),Ge={element:He.node(),gd:L,prepFn:Ue,doneFn:Ie,clickFn:Ve},_e;c.init(Ge),He.node().onmousemove=qe;function De(){return G?Ye():S}function Ye(){var Nt=10,Lt=Math.max(k.line.width,Nt),St=z.append("g").attr("data-index",P);St.append("path").attr("d",S.attr("d")).style({cursor:"move","stroke-width":Lt,"stroke-opacity":"0"});var it={"fill-opacity":"0"},ht=Math.max(Lt/2,Nt);return St.append("circle").attr({"data-line-point":"start-point",cx:O?me(k.xanchor)+k.x0:me(k.x0),cy:F?ke(k.yanchor)-k.y0:ke(k.y0),r:ht}).style(it).classed("cursor-grab",!0),St.append("circle").attr({"data-line-point":"end-point",cx:O?me(k.xanchor)+k.x1:me(k.x1),cy:F?ke(k.yanchor)-k.y1:ke(k.y1),r:ht}).style(it).classed("cursor-grab",!0),St}function qe(Nt){if(g(L)){_e=null;return}if(G)Nt.target.tagName==="path"?_e="move":_e=Nt.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var Lt=Ge.element.getBoundingClientRect(),St=Lt.right-Lt.left,it=Lt.bottom-Lt.top,ht=Nt.clientX-Lt.left,Qe=Nt.clientY-Lt.top,Ce=!W&&St>R&&it>D&&!Nt.shiftKey?c.getCursor(ht/St,1-Qe/it):"move";s(S,Ce),_e=Ce.split("-")[0]}}function Ue(Nt){g(L)||(O&&(le=me(k.xanchor)),F&&(oe=ke(k.yanchor)),k.type==="path"?ie=k.path:(J=O?k.x0:me(k.x0),X=F?k.y0:ke(k.y0),Z=O?k.x1:me(k.x1),se=F?k.y1:ke(k.y1)),J<Z?(re=J,ne="x0",ee=Z,ae="x1"):(re=Z,ne="x1",ee=J,ae="x0"),!F&&X<se||F&&X>se?(U=X,j="y0",V=se,Q="y1"):(U=se,j="y1",V=X,Q="y0"),qe(Nt),Yt(z,k),Ft(S,k,L),Ge.moveFn=_e==="move"?dt:Dt,Ge.altKey=Nt.altKey)}function Ie(){g(L)||(s(S),kt(z),p(S,L,k),d.call("_guiRelayout",L,I.getUpdateObj()))}function Ve(){g(L)||kt(z)}function dt(Nt,Lt){if(k.type==="path"){var St=function(Qe){return Qe},it=St,ht=St;O?q("xanchor",k.xanchor=Ae(le+Nt)):(it=function(Ce){return Ae(me(Ce)+Nt)},ue&&ue.type==="date"&&(it=v.encodeDate(it))),F?q("yanchor",k.yanchor=Ne(oe+Lt)):(ht=function(Ce){return Ne(ke(Ce)+Lt)},he&&he.type==="date"&&(ht=v.encodeDate(ht))),q("path",k.path=x(ie,it,ht))}else O?q("xanchor",k.xanchor=Ae(le+Nt)):(q("x0",k.x0=Ae(J+Nt)),q("x1",k.x1=Ae(Z+Nt))),F?q("yanchor",k.yanchor=Ne(oe+Lt)):(q("y0",k.y0=Ne(X+Lt)),q("y1",k.y1=Ne(se+Lt)));S.attr("d",m(L,k)),Yt(z,k)}function Dt(Nt,Lt){if(W){var St=function(Et){return Et},it=St,ht=St;O?q("xanchor",k.xanchor=Ae(le+Nt)):(it=function(ar){return Ae(me(ar)+Nt)},ue&&ue.type==="date"&&(it=v.encodeDate(it))),F?q("yanchor",k.yanchor=Ne(oe+Lt)):(ht=function(ar){return Ne(ke(ar)+Lt)},he&&he.type==="date"&&(ht=v.encodeDate(ht))),q("path",k.path=x(ie,it,ht))}else if(G){if(_e==="resize-over-start-point"){var Qe=J+Nt,Ce=F?X-Lt:X+Lt;q("x0",k.x0=O?Qe:Ae(Qe)),q("y0",k.y0=F?Ce:Ne(Ce))}else if(_e==="resize-over-end-point"){var je=Z+Nt,rt=F?se-Lt:se+Lt;q("x1",k.x1=O?je:Ae(je)),q("y1",k.y1=F?rt:Ne(rt))}}else{var ut=function(Et){return _e.indexOf(Et)!==-1},Pt=ut("n"),Tt=ut("s"),Ot=ut("w"),Kt=ut("e"),Bt=Pt?U+Lt:U,Zt=Tt?V+Lt:V,Je=Ot?re+Nt:re,pt=Kt?ee+Nt:ee;F&&(Pt&&(Bt=U-Lt),Tt&&(Zt=V-Lt)),(!F&&Zt-Bt>D||F&&Bt-Zt>D)&&(q(j,k[j]=F?Bt:Ne(Bt)),q(Q,k[Q]=F?Zt:Ne(Zt))),pt-Je>R&&(q(ne,k[ne]=O?Je:Ae(Je)),q(ae,k[ae]=O?pt:Ae(pt)))}S.attr("d",m(L,k)),Yt(z,k)}function Yt(Nt,Lt){(O||F)&&St();function St(){var it=Lt.type!=="path",ht=Nt.selectAll(".visual-cue").data([0]),Qe=1;ht.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":Qe}).classed("visual-cue",!0);var Ce=me(O?Lt.xanchor:l.midRange(it?[Lt.x0,Lt.x1]:v.extractPathCoords(Lt.path,i.paramIsX))),je=ke(F?Lt.yanchor:l.midRange(it?[Lt.y0,Lt.y1]:v.extractPathCoords(Lt.path,i.paramIsY)));if(Ce=v.roundPositionForSharpStrokeRendering(Ce,Qe),je=v.roundPositionForSharpStrokeRendering(je,Qe),O&&F){var rt="M"+(Ce-1-Qe)+","+(je-1-Qe)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";ht.attr("d",rt)}else if(O){var ut="M"+(Ce-1-Qe)+","+(je-9-Qe)+"v18 h2 v-18 Z";ht.attr("d",ut)}else{var Pt="M"+(Ce-9-Qe)+","+(je-1-Qe)+"h18 v2 h-18 Z";ht.attr("d",Pt)}}}function kt(Nt){Nt.selectAll(".visual-cue").remove()}function Ft(Nt,Lt,St){var it=Lt.xref,ht=Lt.yref,Qe=b.getFromId(St,it),Ce=b.getFromId(St,ht),je="";it!=="paper"&&!Qe.autorange&&(je+=it),ht!=="paper"&&!Ce.autorange&&(je+=ht),r.setClipUrl(Nt,je?"clip"+St._fullLayout._uid+je:null,St)}}function m(L,S){var k=S.type,P=b.getRefType(S.xref),z=b.getRefType(S.yref),I=b.getFromId(L,S.xref),R=b.getFromId(L,S.yref),D=L._fullLayout._size,O,F,G,W,q,J,X,Z;if(I?P==="domain"?F=function(ne){return I._offset+I._length*ne}:(O=v.shapePositionToRange(I),F=function(ne){return I._offset+I.r2p(O(ne,!0))}):F=function(ne){return D.l+D.w*ne},R?z==="domain"?W=function(ne){return R._offset+R._length*(1-ne)}:(G=v.shapePositionToRange(R),W=function(ne){return R._offset+R.r2p(G(ne,!0))}):W=function(ne){return D.t+D.h*(1-ne)},k==="path")return I&&I.type==="date"&&(F=v.decodeDate(F)),R&&R.type==="date"&&(W=v.decodeDate(W)),M(S,F,W);if(S.xsizemode==="pixel"){var se=F(S.xanchor);q=se+S.x0,J=se+S.x1}else q=F(S.x0),J=F(S.x1);if(S.ysizemode==="pixel"){var le=W(S.yanchor);X=le-S.y0,Z=le-S.y1}else X=W(S.y0),Z=W(S.y1);if(k==="line")return"M"+q+","+X+"L"+J+","+Z;if(k==="rect")return"M"+q+","+X+"H"+J+"V"+Z+"H"+q+"Z";var oe=(q+J)/2,U=(X+Z)/2,V=Math.abs(oe-q),re=Math.abs(U-X),ee="A"+V+","+re,j=oe+V+","+U,Q=oe+","+(U-re);return"M"+j+ee+" 0 1,1 "+Q+ee+" 0 0,1 "+j+"Z"}function M(L,S,k){var P=L.path,z=L.xsizemode,I=L.ysizemode,R=L.xanchor,D=L.yanchor;return P.replace(i.segmentRE,function(O){var F=0,G=O.charAt(0),W=i.paramIsX[G],q=i.paramIsY[G],J=i.numParams[G],X=O.substr(1).replace(i.paramRE,function(Z){return W[F]?z==="pixel"?Z=S(R)+Number(Z):Z=S(Z):q[F]&&(I==="pixel"?Z=k(D)-Number(Z):Z=k(Z)),F++,F>J&&(Z="X"),Z});return F>J&&(X=X.replace(/[\s,]*X.*/,""),l.log("Ignoring extra params in segment "+O)),G+X})}function x(L,S,k){return L.replace(i.segmentRE,function(P){var z=0,I=P.charAt(0),R=i.paramIsX[I],D=i.paramIsY[I],O=i.numParams[I],F=P.substr(1).replace(i.paramRE,function(G){return z>=O||(R[z]?G=S(G):D[z]&&(G=k(G)),z++),G});return I+F})}function T(L,S){if(!!h(L)){var k=S.node(),P=+k.getAttribute("data-index");if(P>=0){if(P===L._fullLayout._activeShapeIndex){_(L);return}L._fullLayout._activeShapeIndex=P,L._fullLayout._deactivateShape=_,u(L)}}}function _(L){if(!!h(L)){var S=L._fullLayout._activeShapeIndex;S>=0&&(o(L),delete L._fullLayout._activeShapeIndex,u(L))}}function f(L){if(!!h(L)){o(L);var S=L._fullLayout._activeShapeIndex,k=(L.layout||{}).shapes||[];if(S<k.length){for(var P=[],z=0;z<k.length;z++)z!==S&&P.push(k[z]);delete L._fullLayout._activeShapeIndex,d.call("_guiRelayout",L,{shapes:P})}}}},{"../../lib":503,"../../lib/setcursor":524,"../../plot_api/plot_template":543,"../../plots/cartesian/axes":554,"../../plots/cartesian/handle_outline":565,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"./constants":448,"./draw_newshape/display_outlines":454,"./draw_newshape/helpers":455,"./helpers":457}],451:[function(t,B,H){var d=t("../../drawing/attributes").dash,l=t("../../../lib/extend").extendFlat;B.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:l({},d,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":493,"../../drawing/attributes":387}],452:[function(t,B,H){var d=32;B.exports={CIRCLE_SIDES:d,i000:0,i090:d/4,i180:d/2,i270:d/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],453:[function(t,B,H){var d=t("../../color");B.exports=function(b,w,e){e("newshape.drawdirection"),e("newshape.layer"),e("newshape.fillcolor"),e("newshape.fillrule"),e("newshape.opacity");var o=e("newshape.line.width");if(o){var a=(b||{}).plot_bgcolor||"#FFF";e("newshape.line.color",d.contrast(a)),e("newshape.line.dash")}e("activeshape.fillcolor"),e("activeshape.opacity")}},{"../../color":366}],454:[function(t,B,H){var d=t("../../dragelement"),l=t("../../dragelement/helpers"),b=l.drawMode,w=t("../../../registry"),e=t("./constants"),o=e.i000,a=e.i090,r=e.i180,n=e.i270,c=t("../../../plots/cartesian/handle_outline"),s=c.clearOutlineControllers,i=t("./helpers"),v=i.pointsShapeRectangle,u=i.pointsShapeEllipse,g=i.writePaths,h=t("./newshapes");B.exports=function p(A,m,M,x){x||(x=0);var T=M.gd;function _(){p(A,m,M,x++),u(A[0])&&f({redrawing:!0})}function f(ee){M.isActiveShape=!1;var j=h(m,M);Object.keys(j).length&&w.call((ee||{}).redrawing?"relayout":"_guiRelayout",T,j)}var L=M.isActiveShape,S=T._fullLayout,k=S._zoomlayer,P=M.dragmode,z=b(P);z?T._fullLayout._drawing=!0:T._fullLayout._activeShapeIndex>=0&&s(T),m.attr("d",g(A));var I,R,D,O,F;if(L&&!x){F=y([],A);var G=k.append("g").attr("class","outline-controllers");se(G),re()}function W(ee){D=+ee.srcElement.getAttribute("data-i"),O=+ee.srcElement.getAttribute("data-j"),I[D][O].moveFn=q}function q(ee,j){if(!!A.length){var Q=F[D][O][1],ne=F[D][O][2],ae=A[D],ie=ae.length;if(v(ae)){for(var ue=0;ue<ie;ue++)if(ue!==O){var xe=ae[ue];xe[1]===ae[O][1]&&(xe[1]=Q+ee),xe[2]===ae[O][2]&&(xe[2]=ne+j)}if(ae[O][1]=Q+ee,ae[O][2]=ne+j,!v(ae))for(var he=0;he<ie;he++)for(var ge=0;ge<ae[he].length;ge++)ae[he][ge]=F[D][he][ge]}else ae[O][1]=Q+ee,ae[O][2]=ne+j;_()}}function J(){f()}function X(){if(!!A.length&&!!A[D]&&!!A[D].length){for(var ee=[],j=0;j<A[D].length;j++)j!==O&&ee.push(A[D][j]);ee.length>1&&!(ee.length===2&&ee[1][0]==="Z")&&(O===0&&(ee[0][0]="M"),A[D]=ee,_(),f())}}function Z(ee,j){if(ee===2){D=+j.srcElement.getAttribute("data-i"),O=+j.srcElement.getAttribute("data-j");var Q=A[D];!v(Q)&&!u(Q)&&X()}}function se(ee){I=[];for(var j=0;j<A.length;j++){var Q=A[j],ne=v(Q),ae=!ne&&u(Q);I[j]=[];for(var ie=0;ie<Q.length;ie++)if(Q[ie][0]!=="Z"&&!(ae&&ie!==o&&ie!==a&&ie!==r&&ie!==n)){var ue=Q[ie][1],xe=Q[ie][2],he=ee.append("circle").classed("cursor-grab",!0).attr("data-i",j).attr("data-j",ie).attr("cx",ue).attr("cy",xe).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});I[j][ie]={element:he.node(),gd:T,prepFn:W,doneFn:J,clickFn:Z},d.init(I[j][ie])}}}function le(ee,j){if(!!A.length)for(var Q=0;Q<A.length;Q++)for(var ne=0;ne<A[Q].length;ne++)for(var ae=0;ae+2<A[Q][ne].length;ae+=2)A[Q][ne][ae+1]=F[Q][ne][ae+1]+ee,A[Q][ne][ae+2]=F[Q][ne][ae+2]+j}function oe(ee,j){le(ee,j),_()}function U(ee){D=+ee.srcElement.getAttribute("data-i"),D||(D=0),R[D].moveFn=oe}function V(){f()}function re(){if(R=[],!!A.length){var ee=0;R[ee]={element:m[0][0],gd:T,prepFn:U,doneFn:V},d.init(R[ee])}}};function y(p,A){for(var m=0;m<A.length;m++){var M=A[m];p[m]=[];for(var x=0;x<M.length;x++){p[m][x]=[];for(var T=0;T<M[x].length;T++)p[m][x][T]=M[x][T]}}return p}},{"../../../plots/cartesian/handle_outline":565,"../../../registry":638,"../../dragelement":385,"../../dragelement/helpers":384,"./constants":452,"./helpers":455,"./newshapes":456}],455:[function(t,B,H){var d=t("parse-svg-path"),l=t("./constants"),b=l.CIRCLE_SIDES,w=l.SQRT2,e=t("../../../plots/cartesian/helpers"),o=e.p2r,a=e.r2p,r=[0,3,4,5,6,1,2],n=[0,3,4,1,2];H.writePaths=function(i){var v=i.length;if(!v)return"M0,0Z";for(var u="",g=0;g<v;g++)for(var h=i[g].length,y=0;y<h;y++){var p=i[g][y][0];if(p==="Z")u+="Z";else for(var A=i[g][y].length,m=0;m<A;m++){var M=m;p==="Q"||p==="S"?M=n[m]:p==="C"&&(M=r[m]),u+=i[g][y][M],m>0&&m<A-1&&(u+=",")}}return u},H.readPaths=function(i,v,u,g){var h=d(i),y=[],p=-1,A=function(){p++,y[p]=[]},m,M=0,x=0,T,_,f=function(){T=M,_=x};f();for(var L=0;L<h.length;L++){var S=[],k,P,z,I,R=h[L][0],D=R;switch(R){case"M":A(),M=+h[L][1],x=+h[L][2],S.push([D,M,x]),f();break;case"Q":case"S":k=+h[L][1],z=+h[L][2],M=+h[L][3],x=+h[L][4],S.push([D,M,x,k,z]);break;case"C":k=+h[L][1],z=+h[L][2],P=+h[L][3],I=+h[L][4],M=+h[L][5],x=+h[L][6],S.push([D,M,x,k,z,P,I]);break;case"T":case"L":M=+h[L][1],x=+h[L][2],S.push([D,M,x]);break;case"H":D="L",M=+h[L][1],S.push([D,M,x]);break;case"V":D="L",x=+h[L][1],S.push([D,M,x]);break;case"A":D="L";var O=+h[L][1],F=+h[L][2];+h[L][4]||(O=-O,F=-F);var G=M-O,W=x;for(m=1;m<=b/2;m++){var q=2*Math.PI*m/b;S.push([D,G+O*Math.cos(q),W+F*Math.sin(q)])}break;case"Z":(M!==T||x!==_)&&(M=T,x=_,S.push([D,M,x]));break}for(var J=(u||{}).domain,X=v._fullLayout._size,Z=u&&u.xsizemode==="pixel",se=u&&u.ysizemode==="pixel",le=g===!1,oe=0;oe<S.length;oe++){for(m=0;m+2<7;m+=2){var U=S[oe][m+1],V=S[oe][m+2];U===void 0||V===void 0||(M=U,x=V,u&&(u.xaxis&&u.xaxis.p2r?(le&&(U-=u.xaxis._offset),Z?U=a(u.xaxis,u.xanchor)+U:U=o(u.xaxis,U)):(le&&(U-=X.l),J?U=J.x[0]+U/X.w:U=U/X.w),u.yaxis&&u.yaxis.p2r?(le&&(V-=u.yaxis._offset),se?V=a(u.yaxis,u.yanchor)-V:V=o(u.yaxis,V)):(le&&(V-=X.t),J?V=J.y[1]-V/X.h:V=1-V/X.h)),S[oe][m+1]=U,S[oe][m+2]=V)}y[p].push(S[oe].slice())}}return y};function c(i,v){return Math.abs(i-v)<=1e-6}function s(i,v){var u=v[1]-i[1],g=v[2]-i[2];return Math.sqrt(u*u+g*g)}H.pointsShapeRectangle=function(i){var v=i.length;if(v!==5)return!1;for(var u=1;u<3;u++){var g=i[0][u]-i[1][u],h=i[3][u]-i[2][u];if(!c(g,h))return!1;var y=i[0][u]-i[3][u],p=i[1][u]-i[2][u];if(!c(y,p))return!1}return!c(i[0][1],i[1][1])&&!c(i[0][1],i[3][1])?!1:!!(s(i[0],i[1])*s(i[0],i[3]))},H.pointsShapeEllipse=function(i){var v=i.length;if(v!==b+1)return!1;v=b;for(var u=0;u<v;u++){var g=(v*2-u)%v,h=(v/2+g)%v,y=(v/2+u)%v;if(!c(s(i[u],i[y]),s(i[g],i[h])))return!1}return!0},H.handleEllipse=function(i,v,u){if(!i)return[v,u];var g=H.ellipseOver({x0:v[0],y0:v[1],x1:u[0],y1:u[1]}),h=(g.x1+g.x0)/2,y=(g.y1+g.y0)/2,p=(g.x1-g.x0)/2,A=(g.y1-g.y0)/2;p||(p=A=A/w),A||(A=p=p/w);for(var m=[],M=0;M<b;M++){var x=M*2*Math.PI/b;m.push([h+p*Math.cos(x),y+A*Math.sin(x)])}return m},H.ellipseOver=function(i){var v=i.x0,u=i.y0,g=i.x1,h=i.y1,y=g-v,p=h-u;v-=y,u-=p;var A=(v+g)/2,m=(u+h)/2,M=w;return y*=M,p*=M,{x0:A-y,y0:m-p,x1:A+y,y1:m+p}}},{"../../../plots/cartesian/helpers":566,"./constants":452,"parse-svg-path":250}],456:[function(t,B,H){var d=t("../../dragelement/helpers"),l=d.drawMode,b=d.openMode,w=t("./constants"),e=w.i000,o=w.i090,a=w.i180,r=w.i270,n=w.cos45,c=w.sin45,s=t("../../../plots/cartesian/helpers"),i=s.p2r,v=s.r2p,u=t("../../../plots/cartesian/handle_outline"),g=u.clearSelect,h=t("./helpers"),y=h.readPaths,p=h.writePaths,A=h.ellipseOver;B.exports=function(x,T){if(!!x.length){var _=x[0][0];if(!!_){var f=_.getAttribute("d"),L=T.gd,S=L._fullLayout.newshape,k=T.plotinfo,P=k.xaxis,z=k.yaxis,I=!!k.domain||!k.xaxis,R=!!k.domain||!k.yaxis,D=T.isActiveShape,O=T.dragmode,F=(L.layout||{}).shapes||[];if(!l(O)&&D!==void 0){var G=L._fullLayout._activeShapeIndex;if(G<F.length)switch(L._fullLayout.shapes[G].type){case"rect":O="drawrect";break;case"circle":O="drawcircle";break;case"line":O="drawline";break;case"path":var W=F[G].path||"";W[W.length-1]==="Z"?O="drawclosedpath":O="drawopenpath";break}}var q=b(O),J=y(f,L,k,D),X={editable:!0,xref:I?"paper":P._id,yref:R?"paper":z._id,layer:S.layer,opacity:S.opacity,line:{color:S.line.color,width:S.line.width,dash:S.line.dash}};q||(X.fillcolor=S.fillcolor,X.fillrule=S.fillrule);var Z;if(J.length===1&&(Z=J[0]),Z&&O==="drawrect")X.type="rect",X.x0=Z[0][1],X.y0=Z[0][2],X.x1=Z[2][1],X.y1=Z[2][2];else if(Z&&O==="drawline")X.type="line",X.x0=Z[0][1],X.y0=Z[0][2],X.x1=Z[1][1],X.y1=Z[1][2];else if(Z&&O==="drawcircle"){X.type="circle";var se=Z[e][1],le=Z[o][1],oe=Z[a][1],U=Z[r][1],V=Z[e][2],re=Z[o][2],ee=Z[a][2],j=Z[r][2],Q=k.xaxis&&(k.xaxis.type==="date"||k.xaxis.type==="log"),ne=k.yaxis&&(k.yaxis.type==="date"||k.yaxis.type==="log");Q&&(se=v(k.xaxis,se),le=v(k.xaxis,le),oe=v(k.xaxis,oe),U=v(k.xaxis,U)),ne&&(V=v(k.yaxis,V),re=v(k.yaxis,re),ee=v(k.yaxis,ee),j=v(k.yaxis,j));var ae=(le+U)/2,ie=(V+ee)/2,ue=(U-le+oe-se)/2,xe=(j-re+ee-V)/2,he=A({x0:ae,y0:ie,x1:ae+ue*n,y1:ie+xe*c});Q&&(he.x0=i(k.xaxis,he.x0),he.x1=i(k.xaxis,he.x1)),ne&&(he.y0=i(k.yaxis,he.y0),he.y1=i(k.yaxis,he.y1)),X.x0=he.x0,X.y0=he.y0,X.x1=he.x1,X.y1=he.y1}else X.type="path",P&&z&&m(J,P,z),X.path=p(J),Z=null;g(L);for(var ge=T.editHelpers,me=(ge||{}).modifyItem,ke=[],Ae=0;Ae<F.length;Ae++){var Ne=L._fullLayout.shapes[Ae];if(ke[Ae]=Ne._input,D!==void 0&&Ae===L._fullLayout._activeShapeIndex){var He=X;switch(Ne.type){case"line":case"rect":case"circle":me("x0",He.x0),me("x1",He.x1),me("y0",He.y0),me("y1",He.y1);break;case"path":me("path",He.path);break}}}return D===void 0?(ke.push(X),ke):ge?ge.getUpdateObj():{}}}};function m(M,x,T){var _=x.type==="date",f=T.type==="date";if(!_&&!f)return M;for(var L=0;L<M.length;L++)for(var S=0;S<M[L].length;S++)for(var k=0;k+2<M[L][S].length;k+=2)_&&(M[L][S][k+1]=M[L][S][k+1].replace(" ","_")),f&&(M[L][S][k+2]=M[L][S][k+2].replace(" ","_"));return M}},{"../../../plots/cartesian/handle_outline":565,"../../../plots/cartesian/helpers":566,"../../dragelement/helpers":384,"./constants":452,"./helpers":455}],457:[function(t,B,H){var d=t("./constants"),l=t("../../lib");H.rangeToShapePosition=function(b){return b.type==="log"?b.r2d:function(w){return w}},H.shapePositionToRange=function(b){return b.type==="log"?b.d2r:function(w){return w}},H.decodeDate=function(b){return function(w){return w.replace&&(w=w.replace("_"," ")),b(w)}},H.encodeDate=function(b){return function(w){return b(w).replace(" ","_")}},H.extractPathCoords=function(b,w){var e=[],o=b.match(d.segmentRE);return o.forEach(function(a){var r=w[a.charAt(0)].drawn;if(r!==void 0){var n=a.substr(1).match(d.paramRE);!n||n.length<r||e.push(l.cleanNumber(n[r]))}}),e},H.getDataToPixel=function(b,w,e,o){var a=b._fullLayout._size,r;if(w)if(o==="domain")r=function(c){return w._length*(e?1-c:c)+w._offset};else{var n=H.shapePositionToRange(w);r=function(c){return w._offset+w.r2p(n(c,!0))},w.type==="date"&&(r=H.decodeDate(r))}else e?r=function(c){return a.t+a.h*(1-c)}:r=function(c){return a.l+a.w*c};return r},H.getPixelToData=function(b,w,e,o){var a=b._fullLayout._size,r;if(w)if(o==="domain")r=function(c){var s=(c-w._offset)/w._length;return e?1-s:s};else{var n=H.rangeToShapePosition(w);r=function(c){return n(w.p2r(c-w._offset))}}else e?r=function(c){return 1-(c-a.t)/a.h}:r=function(c){return(c-a.l)/a.w};return r},H.roundPositionForSharpStrokeRendering=function(b,w){var e=Math.round(w%2)===1,o=Math.round(b);return e?o+.5:o},H.makeOptionsAndPlotinfo=function(b,w){var e=b._fullLayout.shapes[w]||{},o=b._fullLayout._plots[e.xref+e.yref],a=!!o;return a?o._hadPlotinfo=!0:(o={},e.xref&&e.xref!=="paper"&&(o.xaxis=b._fullLayout[e.xref+"axis"]),e.yref&&e.yref!=="paper"&&(o.yaxis=b._fullLayout[e.yref+"axis"])),o.xsizemode=e.xsizemode,o.ysizemode=e.ysizemode,o.xanchor=e.xanchor,o.yanchor=e.yanchor,{options:e,plotinfo:o}}},{"../../lib":503,"./constants":448}],458:[function(t,B,H){var d=t("./draw");B.exports={moduleType:"component",name:"shapes",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),supplyDrawNewShapeDefaults:t("./draw_newshape/defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("shapes"),calcAutorange:t("./calc_autorange"),draw:d.draw,drawOne:d.drawOne}},{"../../plots/cartesian/include_components":567,"./attributes":446,"./calc_autorange":447,"./defaults":449,"./draw":450,"./draw_newshape/defaults":453}],459:[function(t,B,H){var d=t("../../plots/font_attributes"),l=t("../../plots/pad_attributes"),b=t("../../lib/extend").extendDeepAll,w=t("../../plot_api/edit_types").overrideAll,e=t("../../plots/animation_attributes"),o=t("../../plot_api/plot_template").templatedArray,a=t("./constants"),r=o("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});B.exports=w(o("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:r,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:b(l({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:e.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:d({})},font:d({}),activebgcolor:{valType:"color",dflt:a.gripBgActiveColor},bgcolor:{valType:"color",dflt:a.railBgColor},bordercolor:{valType:"color",dflt:a.railBorderColor},borderwidth:{valType:"number",min:0,dflt:a.railBorderWidth},ticklen:{valType:"number",min:0,dflt:a.tickLength},tickcolor:{valType:"color",dflt:a.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:a.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/animation_attributes":548,"../../plots/font_attributes":585,"../../plots/pad_attributes":618,"./constants":460}],460:[function(t,B,H){B.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],461:[function(t,B,H){var d=t("../../lib"),l=t("../../plots/array_container_defaults"),b=t("./attributes"),w=t("./constants"),e=w.name,o=b.steps;B.exports=function(c,s){l(c,s,{name:e,handleItemDefaults:a})};function a(n,c,s){function i(m,M){return d.coerce(n,c,b,m,M)}for(var v=l(n,c,{name:"steps",handleItemDefaults:r}),u=0,g=0;g<v.length;g++)v[g].visible&&u++;var h;if(u<2?h=c.visible=!1:h=i("visible"),!!h){c._stepCount=u;var y=c._visibleSteps=d.filterVisible(v),p=i("active");(v[p]||{}).visible||(c.active=y[0]._index),i("x"),i("y"),d.noneOrAll(n,c,["x","y"]),i("xanchor"),i("yanchor"),i("len"),i("lenmode"),i("pad.t"),i("pad.r"),i("pad.b"),i("pad.l"),d.coerceFont(i,"font",s.font);var A=i("currentvalue.visible");A&&(i("currentvalue.xanchor"),i("currentvalue.prefix"),i("currentvalue.suffix"),i("currentvalue.offset"),d.coerceFont(i,"currentvalue.font",c.font)),i("transition.duration"),i("transition.easing"),i("bgcolor"),i("activebgcolor"),i("bordercolor"),i("borderwidth"),i("ticklen"),i("tickwidth"),i("tickcolor"),i("minorticklen")}}function r(n,c){function s(u,g){return d.coerce(n,c,o,u,g)}var i;if(n.method!=="skip"&&!Array.isArray(n.args)?i=c.visible=!1:i=s("visible"),i){s("method"),s("args");var v=s("label","step-"+c._index);s("value",v),s("execute")}}},{"../../lib":503,"../../plots/array_container_defaults":549,"./attributes":459,"./constants":460}],462:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../plots/plots"),b=t("../color"),w=t("../drawing"),e=t("../../lib"),o=e.strTranslate,a=t("../../lib/svg_text_utils"),r=t("../../plot_api/plot_template").arrayEditor,n=t("./constants"),c=t("../../constants/alignment"),s=c.LINE_SPACING,i=c.FROM_TL,v=c.FROM_BR;B.exports=function(O){var F=O._fullLayout,G=g(F,O),W=F._infolayer.selectAll("g."+n.containerClassName).data(G.length>0?[0]:[]);W.enter().append("g").classed(n.containerClassName,!0).style("cursor","ew-resize");function q(se){se._commandObserver&&(se._commandObserver.remove(),delete se._commandObserver),l.autoMargin(O,u(se))}if(W.exit().each(function(){d.select(this).selectAll("g."+n.groupClassName).each(q)}).remove(),G.length!==0){var J=W.selectAll("g."+n.groupClassName).data(G,h);J.enter().append("g").classed(n.groupClassName,!0),J.exit().each(q).remove();for(var X=0;X<G.length;X++){var Z=G[X];y(O,Z)}J.each(function(se){var le=d.select(this);S(se),l.manageCommandObserver(O,se,se._visibleSteps,function(oe){var U=le.data()[0];U.active!==oe.index&&(U._dragging||_(O,le,U,oe.index,!1,!0))}),p(O,d.select(this),se)})}};function u(D){return n.autoMarginIdRoot+D._index}function g(D,O){for(var F=D[n.name],G=[],W=0;W<F.length;W++){var q=F[W];!q.visible||(q._gd=O,G.push(q))}return G}function h(D){return D._index}function y(D,O){var F=w.tester.selectAll("g."+n.labelGroupClass).data(O._visibleSteps);F.enter().append("g").classed(n.labelGroupClass,!0);var G=0,W=0;F.each(function(re){var ee=d.select(this),j=M(ee,{step:re},O),Q=j.node();if(Q){var ne=w.bBox(Q);W=Math.max(W,ne.height),G=Math.max(G,ne.width)}}),F.remove();var q=O._dims={};q.inputAreaWidth=Math.max(n.railWidth,n.gripHeight);var J=D._fullLayout._size;q.lx=J.l+J.w*O.x,q.ly=J.t+J.h*(1-O.y),O.lenmode==="fraction"?q.outerLength=Math.round(J.w*O.len):q.outerLength=O.len,q.inputAreaStart=0,q.inputAreaLength=Math.round(q.outerLength-O.pad.l-O.pad.r);var X=q.inputAreaLength-2*n.stepInset,Z=X/(O._stepCount-1),se=G+n.labelPadding;if(q.labelStride=Math.max(1,Math.ceil(se/Z)),q.labelHeight=W,q.currentValueMaxWidth=0,q.currentValueHeight=0,q.currentValueTotalHeight=0,q.currentValueMaxLines=1,O.currentvalue.visible){var le=w.tester.append("g");F.each(function(re){var ee=A(le,O,re.label),j=ee.node()&&w.bBox(ee.node())||{width:0,height:0},Q=a.lineCount(ee);q.currentValueMaxWidth=Math.max(q.currentValueMaxWidth,Math.ceil(j.width)),q.currentValueHeight=Math.max(q.currentValueHeight,Math.ceil(j.height)),q.currentValueMaxLines=Math.max(q.currentValueMaxLines,Q)}),q.currentValueTotalHeight=q.currentValueHeight+O.currentvalue.offset,le.remove()}q.height=q.currentValueTotalHeight+n.tickOffset+O.ticklen+n.labelOffset+q.labelHeight+O.pad.t+O.pad.b;var oe="left";e.isRightAnchor(O)&&(q.lx-=q.outerLength,oe="right"),e.isCenterAnchor(O)&&(q.lx-=q.outerLength/2,oe="center");var U="top";e.isBottomAnchor(O)&&(q.ly-=q.height,U="bottom"),e.isMiddleAnchor(O)&&(q.ly-=q.height/2,U="middle"),q.outerLength=Math.ceil(q.outerLength),q.height=Math.ceil(q.height),q.lx=Math.round(q.lx),q.ly=Math.round(q.ly);var V={y:O.y,b:q.height*v[U],t:q.height*i[U]};O.lenmode==="fraction"?(V.l=0,V.xl=O.x-O.len*i[oe],V.r=0,V.xr=O.x+O.len*v[oe]):(V.x=O.x,V.l=q.outerLength*i[oe],V.r=q.outerLength*v[oe]),l.autoMargin(D,u(O),V)}function p(D,O,F){(F.steps[F.active]||{}).visible||(F.active=F._visibleSteps[0]._index),O.call(A,F).call(R,F).call(x,F).call(L,F).call(I,D,F).call(m,D,F);var G=F._dims;w.setTranslate(O,G.lx+F.pad.l,G.ly+F.pad.t),O.call(k,F,!1),O.call(A,F)}function A(D,O,F){if(!!O.currentvalue.visible){var G=O._dims,W,q;switch(O.currentvalue.xanchor){case"right":W=G.inputAreaLength-n.currentValueInset-G.currentValueMaxWidth,q="left";break;case"center":W=G.inputAreaLength*.5,q="middle";break;default:W=n.currentValueInset,q="left"}var J=e.ensureSingle(D,"text",n.labelClass,function(U){U.attr({"text-anchor":q,"data-notex":1})}),X=O.currentvalue.prefix?O.currentvalue.prefix:"";if(typeof F=="string")X+=F;else{var Z=O.steps[O.active].label,se=O._gd._fullLayout._meta;se&&(Z=e.templateString(Z,se)),X+=Z}O.currentvalue.suffix&&(X+=O.currentvalue.suffix),J.call(w.font,O.currentvalue.font).text(X).call(a.convertToTspans,O._gd);var le=a.lineCount(J),oe=(G.currentValueMaxLines+1-le)*O.currentvalue.font.size*s;return a.positionText(J,W,oe),J}}function m(D,O,F){var G=e.ensureSingle(D,"rect",n.gripRectClass,function(W){W.call(f,O,D,F).style("pointer-events","all")});G.attr({width:n.gripWidth,height:n.gripHeight,rx:n.gripRadius,ry:n.gripRadius}).call(b.stroke,F.bordercolor).call(b.fill,F.bgcolor).style("stroke-width",F.borderwidth+"px")}function M(D,O,F){var G=e.ensureSingle(D,"text",n.labelClass,function(J){J.attr({"text-anchor":"middle","data-notex":1})}),W=O.step.label,q=F._gd._fullLayout._meta;return q&&(W=e.templateString(W,q)),G.call(w.font,F.font).text(W).call(a.convertToTspans,F._gd),G}function x(D,O){var F=e.ensureSingle(D,"g",n.labelsClass),G=O._dims,W=F.selectAll("g."+n.labelGroupClass).data(G.labelSteps);W.enter().append("g").classed(n.labelGroupClass,!0),W.exit().remove(),W.each(function(q){var J=d.select(this);J.call(M,q,O),w.setTranslate(J,P(O,q.fraction),n.tickOffset+O.ticklen+O.font.size*s+n.labelOffset+G.currentValueTotalHeight)})}function T(D,O,F,G,W){var q=Math.round(G*(F._stepCount-1)),J=F._visibleSteps[q]._index;J!==F.active&&_(D,O,F,J,!0,W)}function _(D,O,F,G,W,q){var J=F.active;F.active=G,r(D.layout,n.name,F).applyUpdate("active",G);var X=F.steps[F.active];O.call(k,F,q),O.call(A,F),D.emit("plotly_sliderchange",{slider:F,step:F.steps[F.active],interaction:W,previousActive:J}),X&&X.method&&W&&(O._nextMethod?(O._nextMethod.step=X,O._nextMethod.doCallback=W,O._nextMethod.doTransition=q):(O._nextMethod={step:X,doCallback:W,doTransition:q},O._nextMethodRaf=window.requestAnimationFrame(function(){var Z=O._nextMethod.step;!Z.method||(Z.execute&&l.executeAPICommand(D,Z.method,Z.args),O._nextMethod=null,O._nextMethodRaf=null)})))}function f(D,O,F){var G=F.node(),W=d.select(O);function q(){return F.data()[0]}function J(){var X=q();O.emit("plotly_sliderstart",{slider:X});var Z=F.select("."+n.gripRectClass);d.event.stopPropagation(),d.event.preventDefault(),Z.call(b.fill,X.activebgcolor);var se=z(X,d.mouse(G)[0]);T(O,F,X,se,!0),X._dragging=!0;function le(){var U=q(),V=z(U,d.mouse(G)[0]);T(O,F,U,V,!1)}W.on("mousemove",le),W.on("touchmove",le);function oe(){var U=q();U._dragging=!1,Z.call(b.fill,U.bgcolor),W.on("mouseup",null),W.on("mousemove",null),W.on("touchend",null),W.on("touchmove",null),O.emit("plotly_sliderend",{slider:U,step:U.steps[U.active]})}W.on("mouseup",oe),W.on("touchend",oe)}D.on("mousedown",J),D.on("touchstart",J)}function L(D,O){var F=D.selectAll("rect."+n.tickRectClass).data(O._visibleSteps),G=O._dims;F.enter().append("rect").classed(n.tickRectClass,!0),F.exit().remove(),F.attr({width:O.tickwidth+"px","shape-rendering":"crispEdges"}),F.each(function(W,q){var J=q%G.labelStride===0,X=d.select(this);X.attr({height:J?O.ticklen:O.minorticklen}).call(b.fill,O.tickcolor),w.setTranslate(X,P(O,q/(O._stepCount-1))-.5*O.tickwidth,(J?n.tickOffset:n.minorTickOffset)+G.currentValueTotalHeight)})}function S(D){var O=D._dims;O.labelSteps=[];for(var F=D._stepCount,G=0;G<F;G+=O.labelStride)O.labelSteps.push({fraction:G/(F-1),step:D._visibleSteps[G]})}function k(D,O,F){for(var G=D.select("rect."+n.gripRectClass),W=0,q=0;q<O._stepCount;q++)if(O._visibleSteps[q]._index===O.active){W=q;break}var J=P(O,W/(O._stepCount-1));if(!O._invokingCommand){var X=G;F&&O.transition.duration>0&&(X=X.transition().duration(O.transition.duration).ease(O.transition.easing)),X.attr("transform",o(J-n.gripWidth*.5,O._dims.currentValueTotalHeight))}}function P(D,O){var F=D._dims;return F.inputAreaStart+n.stepInset+(F.inputAreaLength-2*n.stepInset)*Math.min(1,Math.max(0,O))}function z(D,O){var F=D._dims;return Math.min(1,Math.max(0,(O-n.stepInset-F.inputAreaStart)/(F.inputAreaLength-2*n.stepInset-2*F.inputAreaStart)))}function I(D,O,F){var G=F._dims,W=e.ensureSingle(D,"rect",n.railTouchRectClass,function(q){q.call(f,O,D,F).style("pointer-events","all")});W.attr({width:G.inputAreaLength,height:Math.max(G.inputAreaWidth,n.tickOffset+F.ticklen+G.labelHeight)}).call(b.fill,F.bgcolor).attr("opacity",0),w.setTranslate(W,0,G.currentValueTotalHeight)}function R(D,O){var F=O._dims,G=F.inputAreaLength-n.railInset*2,W=e.ensureSingle(D,"rect",n.railRectClass);W.attr({width:G,height:n.railWidth,rx:n.railRadius,ry:n.railRadius,"shape-rendering":"crispEdges"}).call(b.stroke,O.bordercolor).call(b.fill,O.bgcolor).style("stroke-width",O.borderwidth+"px"),w.setTranslate(W,n.railInset,(F.inputAreaWidth-n.railWidth)*.5+F.currentValueTotalHeight)}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/plots":619,"../color":366,"../drawing":388,"./constants":460,"@plotly/d3":58}],463:[function(t,B,H){var d=t("./constants");B.exports={moduleType:"component",name:d.name,layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),draw:t("./draw")}},{"./attributes":459,"./constants":460,"./defaults":461,"./draw":462}],464:[function(t,B,H){var d=t("@plotly/d3"),l=t("fast-isnumeric"),b=t("../../plots/plots"),w=t("../../registry"),e=t("../../lib"),o=e.strTranslate,a=t("../drawing"),r=t("../color"),n=t("../../lib/svg_text_utils"),c=t("../../constants/interactions"),s=t("../../constants/alignment").OPPOSITE_SIDE,i=/ [XY][0-9]* /;function v(u,g,h){var y=h.propContainer,p=h.propName,A=h.placeholder,m=h.traceIndex,M=h.avoid||{},x=h.attributes,T=h.transform,_=h.containerGroup,f=u._fullLayout,L=1,S=!1,k=y.title,P=(k&&k.text?k.text:"").trim(),z=k&&k.font?k.font:{},I=z.family,R=z.size,D=z.color,O;p==="title.text"?O="titleText":p.indexOf("axis")!==-1?O="axisTitleText":p.indexOf("colorbar"!==-1)&&(O="colorbarTitleText");var F=u._context.edits[O];P===""?L=0:P.replace(i," % ")===A.replace(i," % ")&&(L=.2,S=!0,F||(P="")),h._meta?P=e.templateString(P,h._meta):f._meta&&(P=e.templateString(P,f._meta));var G=P||F,W;_||(_=e.ensureSingle(f._infolayer,"g","g-"+g),W=f._hColorbarMoveTitle);var q=_.selectAll("text").data(G?[0]:[]);if(q.enter().append("text"),q.text(P).attr("class",g),q.exit().remove(),!G)return _;function J(le){e.syncOrAsync([X,Z],le)}function X(le){var oe;return!T&&W&&(T={}),T?(oe="",T.rotate&&(oe+="rotate("+[T.rotate,x.x,x.y]+")"),(T.offset||W)&&(oe+=o(0,(T.offset||0)-(W||0)))):oe=null,le.attr("transform",oe),le.style({"font-family":I,"font-size":d.round(R,2)+"px",fill:r.rgb(D),opacity:L*r.opacity(D),"font-weight":b.fontWeight}).attr(x).call(n.convertToTspans,u),b.previousPromises(u)}function Z(le){var oe=d.select(le.node().parentNode);if(M&&M.selection&&M.side&&P){oe.attr("transform",null);var U=s[M.side],V=M.side==="left"||M.side==="top"?-1:1,re=l(M.pad)?M.pad:2,ee=a.bBox(oe.node()),j={left:0,top:0,right:f.width,bottom:f.height},Q=M.maxShift||V*(j[M.side]-ee[M.side]),ne=0;if(Q<0)ne=Q;else{var ae=M.offsetLeft||0,ie=M.offsetTop||0;ee.left-=ae,ee.right-=ae,ee.top-=ie,ee.bottom-=ie,M.selection.each(function(){var xe=a.bBox(this);e.bBoxIntersect(ee,xe,re)&&(ne=Math.max(ne,V*(xe[M.side]-ee[U])+re))}),ne=Math.min(Q,ne)}if(ne>0||Q<0){var ue={left:[-ne,0],right:[ne,0],top:[0,-ne],bottom:[0,ne]}[M.side];oe.attr("transform",o(ue[0],ue[1]))}}}q.call(J);function se(){L=0,S=!0,q.text(A).on("mouseover.opacity",function(){d.select(this).transition().duration(c.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){d.select(this).transition().duration(c.HIDE_PLACEHOLDER).style("opacity",0)})}return F&&(P?q.on(".opacity",null):se(),q.call(n.makeEditable,{gd:u}).on("edit",function(le){m!==void 0?w.call("_guiRestyle",u,p,le,m):w.call("_guiRelayout",u,p,le)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(J)}).on("input",function(le){this.text(le||" ").call(n.positionText,x.x,x.y)})),q.classed("js-placeholder",S),_}B.exports={draw:v}},{"../../constants/alignment":471,"../../constants/interactions":478,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"../color":366,"../drawing":388,"@plotly/d3":58,"fast-isnumeric":190}],465:[function(t,B,H){var d=t("../../plots/font_attributes"),l=t("../color/attributes"),b=t("../../lib/extend").extendFlat,w=t("../../plot_api/edit_types").overrideAll,e=t("../../plots/pad_attributes"),o=t("../../plot_api/plot_template").templatedArray,a=o("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});B.exports=w(o("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:a,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:b(e({editType:"arraydraw"}),{}),font:d({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:l.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/font_attributes":585,"../../plots/pad_attributes":618,"../color/attributes":365}],466:[function(t,B,H){B.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25C4",right:"\u25BA",up:"\u25B2",down:"\u25BC"}}},{}],467:[function(t,B,H){var d=t("../../lib"),l=t("../../plots/array_container_defaults"),b=t("./attributes"),w=t("./constants"),e=w.name,o=b.buttons;B.exports=function(c,s){var i={name:e,handleItemDefaults:a};l(c,s,i)};function a(n,c,s){function i(g,h){return d.coerce(n,c,b,g,h)}var v=l(n,c,{name:"buttons",handleItemDefaults:r}),u=i("visible",v.length>0);!u||(i("active"),i("direction"),i("type"),i("showactive"),i("x"),i("y"),d.noneOrAll(n,c,["x","y"]),i("xanchor"),i("yanchor"),i("pad.t"),i("pad.r"),i("pad.b"),i("pad.l"),d.coerceFont(i,"font",s.font),i("bgcolor",s.paper_bgcolor),i("bordercolor"),i("borderwidth"))}function r(n,c){function s(v,u){return d.coerce(n,c,o,v,u)}var i=s("visible",n.method==="skip"||Array.isArray(n.args));i&&(s("method"),s("args"),s("args2"),s("label"),s("execute"))}},{"../../lib":503,"../../plots/array_container_defaults":549,"./attributes":465,"./constants":466}],468:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../plots/plots"),b=t("../color"),w=t("../drawing"),e=t("../../lib"),o=t("../../lib/svg_text_utils"),a=t("../../plot_api/plot_template").arrayEditor,r=t("../../constants/alignment").LINE_SPACING,n=t("./constants"),c=t("./scrollbox");B.exports=function(z){var I=z._fullLayout,R=e.filterVisible(I[n.name]);function D(Z){l.autoMargin(z,L(Z))}var O=I._menulayer.selectAll("g."+n.containerClassName).data(R.length>0?[0]:[]);if(O.enter().append("g").classed(n.containerClassName,!0).style("cursor","pointer"),O.exit().each(function(){d.select(this).selectAll("g."+n.headerGroupClassName).each(D)}).remove(),R.length!==0){var F=O.selectAll("g."+n.headerGroupClassName).data(R,s);F.enter().append("g").classed(n.headerGroupClassName,!0);for(var G=e.ensureSingle(O,"g",n.dropdownButtonGroupClassName,function(Z){Z.style("pointer-events","all")}),W=0;W<R.length;W++){var q=R[W];f(z,q)}var J="updatemenus"+I._uid,X=new c(z,G,J);F.enter().size()&&(G.node().parentNode.appendChild(G.node()),G.call(k)),F.exit().each(function(Z){G.call(k),D(Z)}).remove(),F.each(function(Z){var se=d.select(this),le=Z.type==="dropdown"?G:null;l.manageCommandObserver(z,Z,Z.buttons,function(oe){u(z,Z,Z.buttons[oe.index],se,le,X,oe.index,!0)}),Z.type==="dropdown"?(g(z,se,G,X,Z),v(G,Z)&&h(z,se,G,X,Z)):h(z,se,null,null,Z)})}};function s(P){return P._index}function i(P){return+P.attr(n.menuIndexAttrName)==-1}function v(P,z){return+P.attr(n.menuIndexAttrName)===z._index}function u(P,z,I,R,D,O,F,G){z.active=F,a(P.layout,n.name,z).applyUpdate("active",F),z.type==="buttons"?h(P,R,null,null,z):z.type==="dropdown"&&(D.attr(n.menuIndexAttrName,"-1"),g(P,R,D,O,z),G||h(P,R,D,O,z))}function g(P,z,I,R,D){var O=e.ensureSingle(z,"g",n.headerClassName,function(Z){Z.style("pointer-events","all")}),F=D._dims,G=D.active,W=D.buttons[G]||n.blankHeaderOpts,q={y:D.pad.t,yPad:0,x:D.pad.l,xPad:0,index:0},J={width:F.headerWidth,height:F.headerHeight};O.call(A,D,W,P).call(S,D,q,J);var X=e.ensureSingle(z,"text",n.headerArrowClassName,function(Z){Z.attr("text-anchor","end").call(w.font,D.font).text(n.arrowSymbol[D.direction])});X.attr({x:F.headerWidth-n.arrowOffsetX+D.pad.l,y:F.headerHeight/2+n.textOffsetY+D.pad.t}),O.on("click",function(){I.call(k,String(v(I,D)?-1:D._index)),h(P,z,I,R,D)}),O.on("mouseover",function(){O.call(T)}),O.on("mouseout",function(){O.call(_,D)}),w.setTranslate(z,F.lx,F.ly)}function h(P,z,I,R,D){I||(I=z,I.attr("pointer-events","all"));var O=!i(I)||D.type==="buttons"?D.buttons:[],F=D.type==="dropdown"?n.dropdownButtonClassName:n.buttonClassName,G=I.selectAll("g."+F).data(e.filterVisible(O)),W=G.enter().append("g").classed(F,!0),q=G.exit();D.type==="dropdown"?(W.attr("opacity","0").transition().attr("opacity","1"),q.transition().attr("opacity","0").remove()):q.remove();var J=0,X=0,Z=D._dims,se=["up","down"].indexOf(D.direction)!==-1;D.type==="dropdown"&&(se?X=Z.headerHeight+n.gapButtonHeader:J=Z.headerWidth+n.gapButtonHeader),D.type==="dropdown"&&D.direction==="up"&&(X=-n.gapButtonHeader+n.gapButton-Z.openHeight),D.type==="dropdown"&&D.direction==="left"&&(J=-n.gapButtonHeader+n.gapButton-Z.openWidth);var le={x:Z.lx+J+D.pad.l,y:Z.ly+X+D.pad.t,yPad:n.gapButton,xPad:n.gapButton,index:0},oe={l:le.x+D.borderwidth,t:le.y+D.borderwidth};G.each(function(U,V){var re=d.select(this);re.call(A,D,U,P).call(S,D,le),re.on("click",function(){d.event.defaultPrevented||(U.execute&&(U.args2&&D.active===V?(u(P,D,U,z,I,R,-1),l.executeAPICommand(P,U.method,U.args2)):(u(P,D,U,z,I,R,V),l.executeAPICommand(P,U.method,U.args))),P.emit("plotly_buttonclicked",{menu:D,button:U,active:D.active}))}),re.on("mouseover",function(){re.call(T)}),re.on("mouseout",function(){re.call(_,D),G.call(x,D)})}),G.call(x,D),se?(oe.w=Math.max(Z.openWidth,Z.headerWidth),oe.h=le.y-oe.t):(oe.w=le.x-oe.l,oe.h=Math.max(Z.openHeight,Z.headerHeight)),oe.direction=D.direction,R&&(G.size()?y(P,z,I,R,D,oe):p(R))}function y(P,z,I,R,D,O){var F=D.direction,G=F==="up"||F==="down",W=D._dims,q=D.active,J,X,Z;if(G)for(X=0,Z=0;Z<q;Z++)X+=W.heights[Z]+n.gapButton;else for(J=0,Z=0;Z<q;Z++)J+=W.widths[Z]+n.gapButton;R.enable(O,J,X),R.hbar&&R.hbar.attr("opacity","0").transition().attr("opacity","1"),R.vbar&&R.vbar.attr("opacity","0").transition().attr("opacity","1")}function p(P){var z=!!P.hbar,I=!!P.vbar;z&&P.hbar.transition().attr("opacity","0").each("end",function(){z=!1,I||P.disable()}),I&&P.vbar.transition().attr("opacity","0").each("end",function(){I=!1,z||P.disable()})}function A(P,z,I,R){P.call(m,z).call(M,z,I,R)}function m(P,z){var I=e.ensureSingle(P,"rect",n.itemRectClassName,function(R){R.attr({rx:n.rx,ry:n.ry,"shape-rendering":"crispEdges"})});I.call(b.stroke,z.bordercolor).call(b.fill,z.bgcolor).style("stroke-width",z.borderwidth+"px")}function M(P,z,I,R){var D=e.ensureSingle(P,"text",n.itemTextClassName,function(G){G.attr({"text-anchor":"start","data-notex":1})}),O=I.label,F=R._fullLayout._meta;F&&(O=e.templateString(O,F)),D.call(w.font,z.font).text(O).call(o.convertToTspans,R)}function x(P,z){var I=z.active;P.each(function(R,D){var O=d.select(this);D===I&&z.showactive&&O.select("rect."+n.itemRectClassName).call(b.fill,n.activeColor)})}function T(P){P.select("rect."+n.itemRectClassName).call(b.fill,n.hoverColor)}function _(P,z){P.select("rect."+n.itemRectClassName).call(b.fill,z.bgcolor)}function f(P,z){var I=z._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},R=w.tester.selectAll("g."+n.dropdownButtonClassName).data(e.filterVisible(z.buttons));R.enter().append("g").classed(n.dropdownButtonClassName,!0);var D=["up","down"].indexOf(z.direction)!==-1;R.each(function(J,X){var Z=d.select(this);Z.call(A,z,J,P);var se=Z.select("."+n.itemTextClassName),le=se.node()&&w.bBox(se.node()).width,oe=Math.max(le+n.textPadX,n.minWidth),U=z.font.size*r,V=o.lineCount(se),re=Math.max(U*V,n.minHeight)+n.textOffsetY;re=Math.ceil(re),oe=Math.ceil(oe),I.widths[X]=oe,I.heights[X]=re,I.height1=Math.max(I.height1,re),I.width1=Math.max(I.width1,oe),D?(I.totalWidth=Math.max(I.totalWidth,oe),I.openWidth=I.totalWidth,I.totalHeight+=re+n.gapButton,I.openHeight+=re+n.gapButton):(I.totalWidth+=oe+n.gapButton,I.openWidth+=oe+n.gapButton,I.totalHeight=Math.max(I.totalHeight,re),I.openHeight=I.totalHeight)}),D?I.totalHeight-=n.gapButton:I.totalWidth-=n.gapButton,I.headerWidth=I.width1+n.arrowPadX,I.headerHeight=I.height1,z.type==="dropdown"&&(D?(I.width1+=n.arrowPadX,I.totalHeight=I.height1):I.totalWidth=I.width1,I.totalWidth+=n.arrowPadX),R.remove();var O=I.totalWidth+z.pad.l+z.pad.r,F=I.totalHeight+z.pad.t+z.pad.b,G=P._fullLayout._size;I.lx=G.l+G.w*z.x,I.ly=G.t+G.h*(1-z.y);var W="left";e.isRightAnchor(z)&&(I.lx-=O,W="right"),e.isCenterAnchor(z)&&(I.lx-=O/2,W="center");var q="top";e.isBottomAnchor(z)&&(I.ly-=F,q="bottom"),e.isMiddleAnchor(z)&&(I.ly-=F/2,q="middle"),I.totalWidth=Math.ceil(I.totalWidth),I.totalHeight=Math.ceil(I.totalHeight),I.lx=Math.round(I.lx),I.ly=Math.round(I.ly),l.autoMargin(P,L(z),{x:z.x,y:z.y,l:O*({right:1,center:.5}[W]||0),r:O*({left:1,center:.5}[W]||0),b:F*({top:1,middle:.5}[q]||0),t:F*({bottom:1,middle:.5}[q]||0)})}function L(P){return n.autoMarginIdRoot+P._index}function S(P,z,I,R){R=R||{};var D=P.select("."+n.itemRectClassName),O=P.select("."+n.itemTextClassName),F=z.borderwidth,G=I.index,W=z._dims;w.setTranslate(P,F+I.x,F+I.y);var q=["up","down"].indexOf(z.direction)!==-1,J=R.height||(q?W.heights[G]:W.height1);D.attr({x:0,y:0,width:R.width||(q?W.width1:W.widths[G]),height:J});var X=z.font.size*r,Z=o.lineCount(O),se=(Z-1)*X/2;o.positionText(O,n.textOffsetX,J/2-se+n.textOffsetY),q?I.y+=W.heights[G]+I.yPad:I.x+=W.widths[G]+I.xPad,I.index++}function k(P,z){P.attr(n.menuIndexAttrName,z||"-1").selectAll("g."+n.dropdownButtonClassName).remove()}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/plots":619,"../color":366,"../drawing":388,"./constants":466,"./scrollbox":470,"@plotly/d3":58}],469:[function(t,B,H){arguments[4][463][0].apply(H,arguments)},{"./attributes":465,"./constants":466,"./defaults":467,"./draw":468,dup:463}],470:[function(t,B,H){B.exports=e;var d=t("@plotly/d3"),l=t("../color"),b=t("../drawing"),w=t("../../lib");function e(o,a,r){this.gd=o,this.container=a,this.id=r,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}e.barWidth=2,e.barLength=20,e.barRadius=2,e.barPad=1,e.barColor="#808BA4",e.prototype.enable=function(a,r,n){var c=this.gd._fullLayout,s=c.width,i=c.height;this.position=a;var v=this.position.l,u=this.position.w,g=this.position.t,h=this.position.h,y=this.position.direction,p=y==="down",A=y==="left",m=y==="right",M=y==="up",x=u,T=h,_,f,L,S;!p&&!A&&!m&&!M&&(this.position.direction="down",p=!0);var k=p||M;k?(_=v,f=_+x,p?(L=g,S=Math.min(L+T,i),T=S-L):(S=g+T,L=Math.max(S-T,0),T=S-L)):(L=g,S=L+T,A?(f=v+x,_=Math.max(f-x,0),x=f-_):(_=v,f=Math.min(_+x,s),x=f-_)),this._box={l:_,t:L,w:x,h:T};var P=u>x,z=e.barLength+2*e.barPad,I=e.barWidth+2*e.barPad,R=v,D=g+h;D+I>i&&(D=i-I);var O=this.container.selectAll("rect.scrollbar-horizontal").data(P?[0]:[]);O.exit().on(".drag",null).remove(),O.enter().append("rect").classed("scrollbar-horizontal",!0).call(l.fill,e.barColor),P?(this.hbar=O.attr({rx:e.barRadius,ry:e.barRadius,x:R,y:D,width:z,height:I}),this._hbarXMin=R+z/2,this._hbarTranslateMax=x-z):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var F=h>T,G=e.barWidth+2*e.barPad,W=e.barLength+2*e.barPad,q=v+u,J=g;q+G>s&&(q=s-G);var X=this.container.selectAll("rect.scrollbar-vertical").data(F?[0]:[]);X.exit().on(".drag",null).remove(),X.enter().append("rect").classed("scrollbar-vertical",!0).call(l.fill,e.barColor),F?(this.vbar=X.attr({rx:e.barRadius,ry:e.barRadius,x:q,y:J,width:G,height:W}),this._vbarYMin=J+W/2,this._vbarTranslateMax=T-W):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var Z=this.id,se=_-.5,le=F?f+G+.5:f+.5,oe=L-.5,U=P?S+I+.5:S+.5,V=c._topdefs.selectAll("#"+Z).data(P||F?[0]:[]);if(V.exit().remove(),V.enter().append("clipPath").attr("id",Z).append("rect"),P||F?(this._clipRect=V.select("rect").attr({x:Math.floor(se),y:Math.floor(oe),width:Math.ceil(le)-Math.floor(se),height:Math.ceil(U)-Math.floor(oe)}),this.container.call(b.setClipUrl,Z,this.gd),this.bg.attr({x:v,y:g,width:u,height:h})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(b.setClipUrl,null),delete this._clipRect),P||F){var re=d.behavior.drag().on("dragstart",function(){d.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(re);var ee=d.behavior.drag().on("dragstart",function(){d.event.sourceEvent.preventDefault(),d.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));P&&this.hbar.on(".drag",null).call(ee),F&&this.vbar.on(".drag",null).call(ee)}this.setTranslate(r,n)},e.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(b.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},e.prototype._onBoxDrag=function(){var a=this.translateX,r=this.translateY;this.hbar&&(a-=d.event.dx),this.vbar&&(r-=d.event.dy),this.setTranslate(a,r)},e.prototype._onBoxWheel=function(){var a=this.translateX,r=this.translateY;this.hbar&&(a+=d.event.deltaY),this.vbar&&(r+=d.event.deltaY),this.setTranslate(a,r)},e.prototype._onBarDrag=function(){var a=this.translateX,r=this.translateY;if(this.hbar){var n=a+this._hbarXMin,c=n+this._hbarTranslateMax,s=w.constrain(d.event.x,n,c),i=(s-n)/(c-n),v=this.position.w-this._box.w;a=i*v}if(this.vbar){var u=r+this._vbarYMin,g=u+this._vbarTranslateMax,h=w.constrain(d.event.y,u,g),y=(h-u)/(g-u),p=this.position.h-this._box.h;r=y*p}this.setTranslate(a,r)},e.prototype.setTranslate=function(a,r){var n=this.position.w-this._box.w,c=this.position.h-this._box.h;if(a=w.constrain(a||0,0,n),r=w.constrain(r||0,0,c),this.translateX=a,this.translateY=r,this.container.call(b.setTranslate,this._box.l-this.position.l-a,this._box.t-this.position.t-r),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+a-.5),y:Math.floor(this.position.t+r-.5)}),this.hbar){var s=a/n;this.hbar.call(b.setTranslate,a+s*this._hbarTranslateMax,r)}if(this.vbar){var i=r/c;this.vbar.call(b.setTranslate,a,r+i*this._vbarTranslateMax)}}},{"../../lib":503,"../color":366,"../drawing":388,"@plotly/d3":58}],471:[function(t,B,H){B.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],472:[function(t,B,H){B.exports={axisRefDescription:function(d,l,b){return["If set to a",d,"axis id (e.g. *"+d+"* or","*"+d+"2*), the `"+d+"` position refers to a",d,"coordinate. If set to *paper*, the `"+d+"`","position refers to the distance from the",l,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",l,"("+b+"). If set to a",d,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",l,"of the domain of that axis: e.g.,","*"+d+"2 domain* refers to the domain of the second",d," axis and a",d,"position of 0.5 refers to the","point between the",l,"and the",b,"of the domain of the","second",d,"axis."].join(" ")}}},{}],473:[function(t,B,H){B.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25B2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25BC"}}},{}],474:[function(t,B,H){B.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},{}],475:[function(t,B,H){B.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],476:[function(t,B,H){B.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],477:[function(t,B,H){B.exports={circle:"\u25CF","circle-open":"\u25CB",square:"\u25A0","square-open":"\u25A1",diamond:"\u25C6","diamond-open":"\u25C7",cross:"+",x:"\u274C"}},{}],478:[function(t,B,H){B.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],479:[function(t,B,H){B.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],480:[function(t,B,H){H.xmlns="http://www.w3.org/2000/xmlns/",H.svg="http://www.w3.org/2000/svg",H.xlink="http://www.w3.org/1999/xlink",H.svgAttrs={xmlns:H.svg,"xmlns:xlink":H.xlink}},{}],481:[function(t,B,H){H.version=t("./version").version,t("native-promise-only"),t("../build/plotcss");for(var d=t("./registry"),l=H.register=d.register,b=t("./plot_api"),w=Object.keys(b),e=0;e<w.length;e++){var o=w[e];o.charAt(0)!=="_"&&(H[o]=b[o]),l({moduleType:"apiMethod",name:o,fn:b[o]})}l(t("./traces/scatter")),l([t("./components/legend"),t("./components/fx"),t("./components/annotations"),t("./components/annotations3d"),t("./components/shapes"),t("./components/images"),t("./components/updatemenus"),t("./components/sliders"),t("./components/rangeslider"),t("./components/rangeselector"),t("./components/grid"),t("./components/errorbars"),t("./components/colorscale"),t("./components/colorbar"),t("./components/modebar")]),l([t("./locale-en"),t("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(l(window.PlotlyLocales),delete window.PlotlyLocales),H.Icons=t("./fonts/ploticon");var a=t("./components/fx"),r=t("./plots/plots");H.Plots={resize:r.resize,graphJson:r.graphJson,sendDataToCloud:r.sendDataToCloud},H.Fx={hover:a.hover,unhover:a.unhover,loneHover:a.loneHover,loneUnhover:a.loneUnhover},H.Snapshot=t("./snapshot"),H.PlotSchema=t("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":357,"./components/annotations3d":362,"./components/colorbar":372,"./components/colorscale":378,"./components/errorbars":394,"./components/fx":406,"./components/grid":410,"./components/images":415,"./components/legend":423,"./components/modebar":429,"./components/rangeselector":437,"./components/rangeslider":444,"./components/shapes":458,"./components/sliders":463,"./components/updatemenus":469,"./fonts/ploticon":482,"./locale-en":534,"./locale-en-us":533,"./plot_api":538,"./plot_api/plot_schema":542,"./plots/plots":619,"./registry":638,"./snapshot":643,"./traces/scatter":938,"./version":1119,"native-promise-only":245}],482:[function(t,B,H){B.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],483:[function(t,B,H){H.isLeftAnchor=function(l){return l.xanchor==="left"||l.xanchor==="auto"&&l.x<=1/3},H.isCenterAnchor=function(l){return l.xanchor==="center"||l.xanchor==="auto"&&l.x>1/3&&l.x<2/3},H.isRightAnchor=function(l){return l.xanchor==="right"||l.xanchor==="auto"&&l.x>=2/3},H.isTopAnchor=function(l){return l.yanchor==="top"||l.yanchor==="auto"&&l.y>=2/3},H.isMiddleAnchor=function(l){return l.yanchor==="middle"||l.yanchor==="auto"&&l.y>1/3&&l.y<2/3},H.isBottomAnchor=function(l){return l.yanchor==="bottom"||l.yanchor==="auto"&&l.y<=1/3}},{}],484:[function(t,B,H){var d=t("./mod"),l=d.mod,b=d.modHalf,w=Math.PI,e=2*w;function o(y){return y/180*w}function a(y){return y/w*180}function r(y){return Math.abs(y[1]-y[0])>e-1e-14}function n(y,p){return b(p-y,e)}function c(y,p){return Math.abs(n(y,p))}function s(y,p){if(r(p))return!0;var A,m;p[0]<p[1]?(A=p[0],m=p[1]):(A=p[1],m=p[0]),A=l(A,e),m=l(m,e),A>m&&(m+=e);var M=l(y,e),x=M+e;return M>=A&&M<=m||x>=A&&x<=m}function i(y,p,A,m){if(!s(p,m))return!1;var M,x;return A[0]<A[1]?(M=A[0],x=A[1]):(M=A[1],x=A[0]),y>=M&&y<=x}function v(y,p,A,m,M,x,T){M=M||0,x=x||0;var _=r([A,m]),f,L,S,k,P;_?(f=0,L=w,S=e):A<m?(f=A,S=m):(f=m,S=A),y<p?(k=y,P=p):(k=p,P=y);function z(O,F){return[O*Math.cos(F)+M,x-O*Math.sin(F)]}var I=Math.abs(S-f)<=w?0:1;function R(O,F,G){return"A"+[O,O]+" "+[0,I,G]+" "+z(O,F)}var D;return _?k===null?D="M"+z(P,f)+R(P,L,0)+R(P,S,0)+"Z":D="M"+z(k,f)+R(k,L,0)+R(k,S,0)+"ZM"+z(P,f)+R(P,L,1)+R(P,S,1)+"Z":k===null?(D="M"+z(P,f)+R(P,S,0),T&&(D+="L0,0Z")):D="M"+z(k,f)+"L"+z(P,f)+R(P,S,0)+"L"+z(k,S)+R(k,f,1)+"Z",D}function u(y,p,A,m,M){return v(null,y,p,A,m,M,0)}function g(y,p,A,m,M){return v(null,y,p,A,m,M,1)}function h(y,p,A,m,M,x){return v(y,p,A,m,M,x,1)}B.exports={deg2rad:o,rad2deg:a,angleDelta:n,angleDist:c,isFullCircle:r,isAngleInsideSector:s,isPtInsideSector:i,pathArc:u,pathSector:g,pathAnnulus:h}},{"./mod":510}],485:[function(t,B,H){var d=Array.isArray,l=ArrayBuffer,b=DataView;function w(r){return l.isView(r)&&!(r instanceof b)}H.isTypedArray=w;function e(r){return d(r)||w(r)}H.isArrayOrTypedArray=e;function o(r){return!e(r[0])}H.isArray1D=o,H.ensureArray=function(r,n){return d(r)||(r=[]),r.length=n,r},H.concat=function(){var r=[],n=!0,c=0,s,i,v,u,g,h,y,p;for(v=0;v<arguments.length;v++)u=arguments[v],h=u.length,h&&(i?r.push(u):(i=u,g=h),d(u)?s=!1:(n=!1,c?s!==u.constructor&&(s=!1):s=u.constructor),c+=h);if(!c)return[];if(!r.length)return i;if(n)return i.concat.apply(i,r);if(s){for(y=new s(c),y.set(i),v=0;v<r.length;v++)u=r[v],y.set(u,g),g+=u.length;return y}for(y=new Array(c),p=0;p<i.length;p++)y[p]=i[p];for(v=0;v<r.length;v++){for(u=r[v],p=0;p<u.length;p++)y[g+p]=u[p];g+=p}return y},H.maxRowLength=function(r){return a(r,Math.max,0)},H.minRowLength=function(r){return a(r,Math.min,1/0)};function a(r,n,c){if(e(r))if(e(r[0])){for(var s=c,i=0;i<r.length;i++)s=n(s,r[i].length);return s}else return r.length;return 0}},{}],486:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../constants/numerical").BADNUM,b=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;B.exports=function(e){return typeof e=="string"&&(e=e.replace(b,"")),d(e)?Number(e):l}},{"../constants/numerical":479,"fast-isnumeric":190}],487:[function(t,B,H){B.exports=function(l){var b=l._fullLayout;b._glcanvas&&b._glcanvas.size()&&b._glcanvas.each(function(w){w.regl&&w.regl.clear({color:!0,depth:!0})})}},{}],488:[function(t,B,H){B.exports=function(l){l._responsiveChartHandler&&(window.removeEventListener("resize",l._responsiveChartHandler),delete l._responsiveChartHandler)}},{}],489:[function(t,B,H){var d=t("fast-isnumeric"),l=t("tinycolor2"),b=t("../plots/attributes"),w=t("../components/colorscale/scales"),e=t("../components/color"),o=t("../constants/interactions").DESELECTDIM,a=t("./nested_property"),r=t("./regex").counter,n=t("./mod").modHalf,c=t("./array").isArrayOrTypedArray;H.valObjectMeta={data_array:{coerceFunction:function(i,v,u){c(i)?v.set(i):u!==void 0&&v.set(u)}},enumerated:{coerceFunction:function(i,v,u,g){g.coerceNumber&&(i=+i),g.values.indexOf(i)===-1?v.set(u):v.set(i)},validateFunction:function(i,v){v.coerceNumber&&(i=+i);for(var u=v.values,g=0;g<u.length;g++){var h=String(u[g]);if(h.charAt(0)==="/"&&h.charAt(h.length-1)==="/"){var y=new RegExp(h.substr(1,h.length-2));if(y.test(i))return!0}else if(i===u[g])return!0}return!1}},boolean:{coerceFunction:function(i,v,u){i===!0||i===!1?v.set(i):v.set(u)}},number:{coerceFunction:function(i,v,u,g){!d(i)||g.min!==void 0&&i<g.min||g.max!==void 0&&i>g.max?v.set(u):v.set(+i)}},integer:{coerceFunction:function(i,v,u,g){i%1||!d(i)||g.min!==void 0&&i<g.min||g.max!==void 0&&i>g.max?v.set(u):v.set(+i)}},string:{coerceFunction:function(i,v,u,g){if(typeof i!="string"){var h=typeof i=="number";g.strict===!0||!h?v.set(u):v.set(String(i))}else g.noBlank&&!i?v.set(u):v.set(i)}},color:{coerceFunction:function(i,v,u){l(i).isValid()?v.set(i):v.set(u)}},colorlist:{coerceFunction:function(i,v,u){function g(h){return l(h).isValid()}!Array.isArray(i)||!i.length?v.set(u):i.every(g)?v.set(i):v.set(u)}},colorscale:{coerceFunction:function(i,v,u){v.set(w.get(i,u))}},angle:{coerceFunction:function(i,v,u){i==="auto"?v.set("auto"):d(i)?v.set(n(+i,360)):v.set(u)}},subplotid:{coerceFunction:function(i,v,u,g){var h=g.regex||r(u);if(typeof i=="string"&&h.test(i)){v.set(i);return}v.set(u)},validateFunction:function(i,v){var u=v.dflt;return i===u?!0:typeof i!="string"?!1:!!r(u).test(i)}},flaglist:{coerceFunction:function(i,v,u,g){if(typeof i!="string"){v.set(u);return}if((g.extras||[]).indexOf(i)!==-1){v.set(i);return}for(var h=i.split("+"),y=0;y<h.length;){var p=h[y];g.flags.indexOf(p)===-1||h.indexOf(p)<y?h.splice(y,1):y++}h.length?v.set(h.join("+")):v.set(u)}},any:{coerceFunction:function(i,v,u){i===void 0?v.set(u):v.set(i)}},info_array:{coerceFunction:function(i,v,u,g){function h(z,I,R){var D,O={set:function(F){D=F}};return R===void 0&&(R=I.dflt),H.valObjectMeta[I.valType].coerceFunction(z,O,R,I),D}var y=g.dimensions===2||g.dimensions==="1-2"&&Array.isArray(i)&&Array.isArray(i[0]);if(!Array.isArray(i)){v.set(u);return}var p=g.items,A=[],m=Array.isArray(p),M=m&&y&&Array.isArray(p[0]),x=y&&m&&!M,T=m&&!x?p.length:i.length,_,f,L,S,k,P;if(u=Array.isArray(u)?u:[],y)for(_=0;_<T;_++)for(A[_]=[],L=Array.isArray(i[_])?i[_]:[],x?k=p.length:m?k=p[_].length:k=L.length,f=0;f<k;f++)x?S=p[f]:m?S=p[_][f]:S=p,P=h(L[f],S,(u[_]||[])[f]),P!==void 0&&(A[_][f]=P);else for(_=0;_<T;_++)P=h(i[_],m?p[_]:p,u[_]),P!==void 0&&(A[_]=P);v.set(A)},validateFunction:function(i,v){if(!Array.isArray(i))return!1;var u=v.items,g=Array.isArray(u),h=v.dimensions===2;if(!v.freeLength&&i.length!==u.length)return!1;for(var y=0;y<i.length;y++)if(h){if(!Array.isArray(i[y])||!v.freeLength&&i[y].length!==u[y].length)return!1;for(var p=0;p<i[y].length;p++)if(!s(i[y][p],g?u[y][p]:u))return!1}else if(!s(i[y],g?u[y]:u))return!1;return!0}}},H.coerce=function(i,v,u,g,h){var y=a(u,g).get(),p=a(i,g),A=a(v,g),m=p.get(),M=v._template;if(m===void 0&&M&&(m=a(M,g).get(),M=0),h===void 0&&(h=y.dflt),y.arrayOk&&c(m))return A.set(m),m;var x=H.valObjectMeta[y.valType].coerceFunction;x(m,A,h,y);var T=A.get();return M&&T===h&&!s(m,y)&&(m=a(M,g).get(),x(m,A,h,y),T=A.get()),T},H.coerce2=function(i,v,u,g,h){var y=a(i,g),p=H.coerce(i,v,u,g,h),A=y.get();return A!=null?p:!1},H.coerceFont=function(i,v,u){var g={};return u=u||{},g.family=i(v+".family",u.family),g.size=i(v+".size",u.size),g.color=i(v+".color",u.color),g},H.coercePattern=function(i,v,u,g){var h=i(v+".shape");if(h){i(v+".solidity"),i(v+".size");var y=i(v+".fillmode"),p=y==="overlay";if(!g){var A=i(v+".bgcolor",p?u:void 0);i(v+".fgcolor",p?e.contrast(A):u)}i(v+".fgopacity",p?.5:1)}},H.coerceHoverinfo=function(i,v,u){var g=v._module.attributes,h=g.hoverinfo?g:b,y=h.hoverinfo,p;if(u._dataLength===1){var A=y.dflt==="all"?y.flags.slice():y.dflt.split("+");A.splice(A.indexOf("name"),1),p=A.join("+")}return H.coerce(i,v,h,"hoverinfo",p)},H.coerceSelectionMarkerOpacity=function(i,v){if(!!i.marker){var u=i.marker.opacity;if(u!==void 0){var g,h;!c(u)&&!i.selected&&!i.unselected&&(g=u,h=o*u),v("selected.marker.opacity",g),v("unselected.marker.opacity",h)}}};function s(i,v){var u=H.valObjectMeta[v.valType];if(v.arrayOk&&c(i))return!0;if(u.validateFunction)return u.validateFunction(i,v);var g={},h=g,y={set:function(p){h=p}};return u.coerceFunction(i,y,g,v),h!==g}H.validate=s},{"../components/color":366,"../components/colorscale/scales":381,"../constants/interactions":478,"../plots/attributes":550,"./array":485,"./mod":510,"./nested_property":511,"./regex":520,"fast-isnumeric":190,tinycolor2:312}],490:[function(t,B,H){var d=t("d3-time-format").timeFormat,l=t("fast-isnumeric"),b=t("./loggers"),w=t("./mod").mod,e=t("../constants/numerical"),o=e.BADNUM,a=e.ONEDAY,r=e.ONEHOUR,n=e.ONEMIN,c=e.ONESEC,s=e.EPOCHJD,i=t("../registry"),v=t("d3-time-format").utcFormat,u=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,g=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,h=new Date().getFullYear()-70;function y(D){return D&&i.componentsRegistry.calendars&&typeof D=="string"&&D!=="gregorian"}H.dateTick0=function(D,O){var F=p(D,!!O);if(O<2)return F;var G=H.dateTime2ms(F,D);return G+=a*(O-1),H.ms2DateTime(G,0,D)};function p(D,O){return y(D)?O?i.getComponentMethod("calendars","CANONICAL_SUNDAY")[D]:i.getComponentMethod("calendars","CANONICAL_TICK")[D]:O?"2000-01-02":"2000-01-01"}H.dfltRange=function(D){return y(D)?i.getComponentMethod("calendars","DFLTRANGE")[D]:["2000-01-01","2001-01-01"]},H.isJSDate=function(D){return typeof D=="object"&&D!==null&&typeof D.getTime=="function"};var A,m;H.dateTime2ms=function(D,O){if(H.isJSDate(D)){var F=D.getTimezoneOffset()*n,G=(D.getUTCMinutes()-D.getMinutes())*n+(D.getUTCSeconds()-D.getSeconds())*c+(D.getUTCMilliseconds()-D.getMilliseconds());if(G){var W=3*n;F=F-W/2+w(G-F+W/2,W)}return D=Number(D)-F,D>=A&&D<=m?D:o}if(typeof D!="string"&&typeof D!="number")return o;D=String(D);var q=y(O),J=D.charAt(0);q&&(J==="G"||J==="g")&&(D=D.substr(1),O="");var X=q&&O.substr(0,7)==="chinese",Z=D.match(X?g:u);if(!Z)return o;var se=Z[1],le=Z[3]||"1",oe=Number(Z[5]||1),U=Number(Z[7]||0),V=Number(Z[9]||0),re=Number(Z[11]||0);if(q){if(se.length===2)return o;se=Number(se);var ee;try{var j=i.getComponentMethod("calendars","getCal")(O);if(X){var Q=le.charAt(le.length-1)==="i";le=parseInt(le,10),ee=j.newDate(se,j.toMonthIndex(se,le,Q),oe)}else ee=j.newDate(se,Number(le),oe)}catch{return o}return ee?(ee.toJD()-s)*a+U*r+V*n+re*c:o}se.length===2?se=(Number(se)+2e3-h)%100+h:se=Number(se),le-=1;var ne=new Date(Date.UTC(2e3,le,oe,U,V));return ne.setUTCFullYear(se),ne.getUTCMonth()!==le||ne.getUTCDate()!==oe?o:ne.getTime()+re*c},A=H.MIN_MS=H.dateTime2ms("-9999"),m=H.MAX_MS=H.dateTime2ms("9999-12-31 23:59:59.9999"),H.isDateTime=function(D,O){return H.dateTime2ms(D,O)!==o};function M(D,O){return String(D+Math.pow(10,O)).substr(1)}var x=90*a,T=3*r,_=5*n;H.ms2DateTime=function(D,O,F){if(typeof D!="number"||!(D>=A&&D<=m))return o;O||(O=0);var G=Math.floor(w(D+.05,1)*10),W=Math.round(D-G/10),q,J,X,Z,se,le;if(y(F)){var oe=Math.floor(W/a)+s,U=Math.floor(w(D,a));try{q=i.getComponentMethod("calendars","getCal")(F).fromJD(oe).formatDate("yyyy-mm-dd")}catch{q=v("G%Y-%m-%d")(new Date(W))}if(q.charAt(0)==="-")for(;q.length<11;)q="-0"+q.substr(1);else for(;q.length<10;)q="0"+q;J=O<x?Math.floor(U/r):0,X=O<x?Math.floor(U%r/n):0,Z=O<T?Math.floor(U%n/c):0,se=O<_?U%c*10+G:0}else le=new Date(W),q=v("%Y-%m-%d")(le),J=O<x?le.getUTCHours():0,X=O<x?le.getUTCMinutes():0,Z=O<T?le.getUTCSeconds():0,se=O<_?le.getUTCMilliseconds()*10+G:0;return f(q,J,X,Z,se)},H.ms2DateTimeLocal=function(D){if(!(D>=A+a&&D<=m-a))return o;var O=Math.floor(w(D+.05,1)*10),F=new Date(Math.round(D-O/10)),G=d("%Y-%m-%d")(F),W=F.getHours(),q=F.getMinutes(),J=F.getSeconds(),X=F.getUTCMilliseconds()*10+O;return f(G,W,q,J,X)};function f(D,O,F,G,W){if((O||F||G||W)&&(D+=" "+M(O,2)+":"+M(F,2),(G||W)&&(D+=":"+M(G,2),W))){for(var q=4;W%10===0;)q-=1,W/=10;D+="."+M(W,q)}return D}H.cleanDate=function(D,O,F){if(D===o)return O;if(H.isJSDate(D)||typeof D=="number"&&isFinite(D)){if(y(F))return b.error("JS Dates and milliseconds are incompatible with world calendars",D),O;if(D=H.ms2DateTimeLocal(+D),!D&&O!==void 0)return O}else if(!H.isDateTime(D,F))return b.error("unrecognized date",D),O;return D};var L=/%\d?f/g,S=/%h/g,k={"1":"1","2":"1","3":"2","4":"2"};function P(D,O,F,G){D=D.replace(L,function(q){var J=Math.min(+q.charAt(1)||6,6),X=(O/1e3%1+2).toFixed(J).substr(2).replace(/0+$/,"")||"0";return X});var W=new Date(Math.floor(O+.05));if(D=D.replace(S,function(){return k[F("%q")(W)]}),y(G))try{D=i.getComponentMethod("calendars","worldCalFmt")(D,O,G)}catch{return"Invalid"}return F(D)(W)}var z=[59,59.9,59.99,59.999,59.9999];function I(D,O){var F=w(D+.05,a),G=M(Math.floor(F/r),2)+":"+M(w(Math.floor(F/n),60),2);if(O!=="M"){l(O)||(O=0);var W=Math.min(w(D/c,60),z[O]),q=(100+W).toFixed(O).substr(1);O>0&&(q=q.replace(/0+$/,"").replace(/[\.]$/,"")),G+=":"+q}return G}H.formatDate=function(D,O,F,G,W,q){if(W=y(W)&&W,!O)if(F==="y")O=q.year;else if(F==="m")O=q.month;else if(F==="d")O=q.dayMonth+`
`+q.year;else return I(D,F)+`
`+P(q.dayMonthYear,D,G,W);return P(O,D,G,W)};var R=3*a;H.incrementMonth=function(D,O,F){F=y(F)&&F;var G=w(D,a);if(D=Math.round(D-G),F)try{var W=Math.round(D/a)+s,q=i.getComponentMethod("calendars","getCal")(F),J=q.fromJD(W);return O%12?q.add(J,O,"m"):q.add(J,O/12,"y"),(J.toJD()-s)*a+G}catch{b.error("invalid ms "+D+" in calendar "+F)}var X=new Date(D+R);return X.setUTCMonth(X.getUTCMonth()+O)+G-R},H.findExactDates=function(D,O){for(var F=0,G=0,W=0,q=0,J,X,Z=y(O)&&i.getComponentMethod("calendars","getCal")(O),se=0;se<D.length;se++){if(X=D[se],!l(X)){q++;continue}if(!(X%a))if(Z)try{J=Z.fromJD(X/a+s),J.day()===1?J.month()===1?F++:G++:W++}catch{}else J=new Date(X),J.getUTCDate()===1?J.getUTCMonth()===0?F++:G++:W++}G+=F,W+=G;var le=D.length-q;return{exactYears:F/le,exactMonths:G/le,exactDays:W/le}}},{"../constants/numerical":479,"../registry":638,"./loggers":507,"./mod":510,"d3-time-format":120,"fast-isnumeric":190}],491:[function(t,B,H){var d=t("@plotly/d3"),l=t("./loggers"),b=t("./matrix"),w=t("gl-mat4");function e(h){var y;if(typeof h=="string"){if(y=document.getElementById(h),y===null)throw new Error("No DOM element with id '"+h+"' exists on the page.");return y}else if(h==null)throw new Error("DOM element provided is null or undefined");return h}function o(h){var y=d.select(h);return y.node()instanceof HTMLElement&&y.size()&&y.classed("js-plotly-plot")}function a(h){var y=h&&h.parentNode;y&&y.removeChild(h)}function r(h,y){n("global",h,y)}function n(h,y,p){var A="plotly.js-style-"+h,m=document.getElementById(A);m||(m=document.createElement("style"),m.setAttribute("id",A),m.appendChild(document.createTextNode("")),document.head.appendChild(m));var M=m.sheet;M.insertRule?M.insertRule(y+"{"+p+"}",0):M.addRule?M.addRule(y,p,0):l.warn("addStyleRule failed")}function c(h){var y="plotly.js-style-"+h,p=document.getElementById(y);p&&a(p)}function s(h){var y=v(h),p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return y.forEach(function(A){var m=i(A);if(m){var M=b.convertCssMatrix(m);p=w.multiply(p,p,M)}}),p}function i(h){var y=window.getComputedStyle(h,null),p=y.getPropertyValue("-webkit-transform")||y.getPropertyValue("-moz-transform")||y.getPropertyValue("-ms-transform")||y.getPropertyValue("-o-transform")||y.getPropertyValue("transform");return p==="none"?null:p.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(A){return+A})}function v(h){for(var y=[];u(h);)y.push(h),h=h.parentNode;return y}function u(h){return h&&(h instanceof Element||h instanceof HTMLElement)}function g(h,y){return h&&y&&h.x===y.x&&h.y===y.y&&h.top===y.top&&h.left===y.left&&h.right===y.right&&h.bottom===y.bottom}B.exports={getGraphDiv:e,isPlotDiv:o,removeElement:a,addStyleRule:r,addRelatedStyleRule:n,deleteRelatedStyleRule:c,getFullTransformMatrix:s,getElementTransformMatrix:i,getElementAndAncestors:v,equalDomRects:g}},{"./loggers":507,"./matrix":509,"@plotly/d3":58,"gl-mat4":210}],492:[function(t,B,H){var d=t("events").EventEmitter,l={init:function(b){if(b._ev instanceof d)return b;var w=new d,e=new d;return b._ev=w,b._internalEv=e,b.on=w.on.bind(w),b.once=w.once.bind(w),b.removeListener=w.removeListener.bind(w),b.removeAllListeners=w.removeAllListeners.bind(w),b._internalOn=e.on.bind(e),b._internalOnce=e.once.bind(e),b._removeInternalListener=e.removeListener.bind(e),b._removeAllInternalListeners=e.removeAllListeners.bind(e),b.emit=function(o,a){typeof jQuery!="undefined"&&jQuery(b).trigger(o,a),w.emit(o,a),e.emit(o,a)},b},triggerHandler:function(b,w,e){var o,a;typeof jQuery!="undefined"&&(o=jQuery(b).triggerHandler(w,e));var r=b._ev;if(!r)return o;var n=r._events[w];if(!n)return o;function c(i){if(i.listener){if(r.removeListener(w,i.listener),!i.fired)return i.fired=!0,i.listener.apply(r,[e])}else return i.apply(r,[e])}n=Array.isArray(n)?n:[n];var s;for(s=0;s<n.length-1;s++)c(n[s]);return a=c(n[s]),o!==void 0?o:a},purge:function(b){return delete b._ev,delete b.on,delete b.once,delete b.removeListener,delete b.removeAllListeners,delete b.emit,delete b._ev,delete b._internalEv,delete b._internalOn,delete b._internalOnce,delete b._removeInternalListener,delete b._removeAllInternalListeners,b}};B.exports=l},{events:84}],493:[function(t,B,H){var d=t("./is_plain_object.js"),l=Array.isArray;function b(e,o){var a,r;for(a=0;a<e.length;a++){if(r=e[a],r!==null&&typeof r=="object")return!1;r!==void 0&&(o[a]=r)}return!0}H.extendFlat=function(){return w(arguments,!1,!1,!1)},H.extendDeep=function(){return w(arguments,!0,!1,!1)},H.extendDeepAll=function(){return w(arguments,!0,!0,!1)},H.extendDeepNoArrays=function(){return w(arguments,!0,!1,!0)};function w(e,o,a,r){var n=e[0],c=e.length,s,i,v,u,g,h,y;if(c===2&&l(n)&&l(e[1])&&n.length===0){if(y=b(e[1],n),y)return n;n.splice(0,n.length)}for(var p=1;p<c;p++){s=e[p];for(i in s)v=n[i],u=s[i],r&&l(u)?n[i]=u:o&&u&&(d(u)||(g=l(u)))?(g?(g=!1,h=v&&l(v)?v:[]):h=v&&d(v)?v:{},n[i]=w([h,u],o,a,r)):(typeof u!="undefined"||a)&&(n[i]=u)}return n}},{"./is_plain_object.js":504}],494:[function(t,B,H){B.exports=function(l){for(var b={},w=[],e=0,o=0;o<l.length;o++){var a=l[o];b[a]!==1&&(b[a]=1,w[e++]=a)}return w}},{}],495:[function(t,B,H){B.exports=function(e){for(var o=b(e)?l:d,a=[],r=0;r<e.length;r++){var n=e[r];o(n)&&a.push(n)}return a};function d(w){return w.visible===!0}function l(w){var e=w[0].trace;return e.visible===!0&&e._length!==0}function b(w){return Array.isArray(w)&&Array.isArray(w[0])&&w[0][0]&&w[0][0].trace}},{}],496:[function(t,B,H){var d=t("@plotly/d3"),l=t("country-regex"),b=t("@turf/area"),w=t("@turf/centroid"),e=t("@turf/bbox"),o=t("./identity"),a=t("./loggers"),r=t("./is_plain_object"),n=t("./nested_property"),c=t("./polygon"),s=Object.keys(l),i={"ISO-3":o,"USA-states":o,"country names":v};function v(M){for(var x=0;x<s.length;x++){var T=s[x],_=new RegExp(l[T]);if(_.test(M.trim().toLowerCase()))return T}return a.log("Unrecognized country name: "+M+"."),!1}function u(M,x,T){if(!x||typeof x!="string")return!1;var _=i[M](x),f,L,S;if(_){if(M==="USA-states")for(f=[],S=0;S<T.length;S++)L=T[S],L.properties&&L.properties.gu&&L.properties.gu==="USA"&&f.push(L);else f=T;for(S=0;S<f.length;S++)if(L=f[S],L.id===_)return L;a.log(["Location with id",_,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}function g(M){var x=M.geometry,T=x.coordinates,_=M.id,f=[],L,S,k,P;function z(I){for(var R=0;R<I.length-1;R++)if(I[R][0]>0&&I[R+1][0]<0)return R;return null}switch(_==="RUS"||_==="FJI"?L=function(I){var R;if(z(I)===null)R=I;else for(R=new Array(I.length),P=0;P<I.length;P++)R[P]=[I[P][0]<0?I[P][0]+360:I[P][0],I[P][1]];f.push(c.tester(R))}:_==="ATA"?L=function(I){var R=z(I);if(R===null)return f.push(c.tester(I));var D=new Array(I.length+1),O=0;for(P=0;P<I.length;P++)P>R?D[O++]=[I[P][0]+360,I[P][1]]:P===R?(D[O++]=I[P],D[O++]=[I[P][0],-90]):D[O++]=I[P];var F=c.tester(D);F.pts.pop(),f.push(F)}:L=function(I){f.push(c.tester(I))},x.type){case"MultiPolygon":for(S=0;S<T.length;S++)for(k=0;k<T[S].length;k++)L(T[S][k]);break;case"Polygon":for(S=0;S<T.length;S++)L(T[S]);break}return f}function h(M){var x=M.geojson,T=window.PlotlyGeoAssets||{},_=typeof x=="string"?T[x]:x;return r(_)?_:(a.error("Oops ... something went wrong when fetching "+x),!1)}function y(M){var x=M[0].trace,T=h(x);if(!T)return!1;var _={},f=[],L;for(L=0;L<x._length;L++){var S=M[L];(S.loc||S.loc===0)&&(_[S.loc]=S)}function k(I){var R=n(I,x.featureidkey||"id").get(),D=_[R];if(D){var O=I.geometry;if(O.type==="Polygon"||O.type==="MultiPolygon"){var F={type:"Feature",id:R,geometry:O,properties:{}};F.properties.ct=p(F),D.fIn=I,D.fOut=F,f.push(F)}else a.log(["Location",D.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete _[R]}switch(T.type){case"FeatureCollection":var P=T.features;for(L=0;L<P.length;L++)k(P[L]);break;case"Feature":k(T);break;default:return a.warn(["Invalid GeoJSON type",(T.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var z in _)a.log(["Location *"+z+"*","does not have a matching feature with id-key","*"+x.featureidkey+"*."].join(" "));return f}function p(M){var x=M.geometry,T;if(x.type==="MultiPolygon")for(var _=x.coordinates,f=0,L=0;L<_.length;L++){var S={type:"Polygon",coordinates:_[L]},k=b.default(S);k>f&&(f=k,T=S)}else T=x;return w.default(T).geometry.coordinates}function A(M){var x=window.PlotlyGeoAssets||{},T=[];function _(P){return new Promise(function(z,I){d.json(P,function(R,D){if(R){delete x[P];var O=R.status===404?'GeoJSON at URL "'+P+'" does not exist.':"Unexpected error while fetching from "+P;return I(new Error(O))}return x[P]=D,z(D)})})}function f(P){return new Promise(function(z,I){var R=0,D=setInterval(function(){if(x[P]&&x[P]!=="pending")return clearInterval(D),z(x[P]);if(R>100)return clearInterval(D),I("Unexpected error while fetching from "+P);R++},50)})}for(var L=0;L<M.length;L++){var S=M[L][0].trace,k=S.geojson;typeof k=="string"&&(x[k]?x[k]==="pending"&&T.push(f(k)):(x[k]="pending",T.push(_(k))))}return T}function m(M){return e.default(M)}B.exports={locationToFeature:u,feature2polygons:g,getTraceGeojson:h,extractTraceFeature:y,fetchTraceGeoData:A,computeBbox:m}},{"./identity":501,"./is_plain_object":504,"./loggers":507,"./nested_property":511,"./polygon":515,"@plotly/d3":58,"@turf/area":61,"@turf/bbox":64,"@turf/centroid":67,"country-regex":94}],497:[function(t,B,H){var d=t("../constants/numerical").BADNUM;H.calcTraceToLineCoords=function(l){for(var b=l[0].trace,w=b.connectgaps,e=[],o=[],a=0;a<l.length;a++){var r=l[a],n=r.lonlat;n[0]!==d?o.push(n):!w&&o.length>0&&(e.push(o),o=[])}return o.length>0&&e.push(o),e},H.makeLine=function(l){return l.length===1?{type:"LineString",coordinates:l[0]}:{type:"MultiLineString",coordinates:l}},H.makePolygon=function(l){if(l.length===1)return{type:"Polygon",coordinates:l};for(var b=new Array(l.length),w=0;w<l.length;w++)b[w]=[l[w]];return{type:"MultiPolygon",coordinates:b}},H.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":479}],498:[function(t,B,H){var d=t("./mod").mod;H.segmentsIntersect=l;function l(a,r,n,c,s,i,v,u){var g=n-a,h=s-a,y=v-s,p=c-r,A=i-r,m=u-i,M=g*m-y*p;if(M===0)return null;var x=(h*m-y*A)/M,T=(h*p-g*A)/M;return T<0||T>1||x<0||x>1?null:{x:a+g*x,y:r+p*x}}H.segmentDistance=function(r,n,c,s,i,v,u,g){if(l(r,n,c,s,i,v,u,g))return 0;var h=c-r,y=s-n,p=u-i,A=g-v,m=h*h+y*y,M=p*p+A*A,x=Math.min(b(h,y,m,i-r,v-n),b(h,y,m,u-r,g-n),b(p,A,M,r-i,n-v),b(p,A,M,c-i,s-v));return Math.sqrt(x)};function b(a,r,n,c,s){var i=c*a+s*r;if(i<0)return c*c+s*s;if(i>n){var v=c-a,u=s-r;return v*v+u*u}else{var g=c*r-s*a;return g*g/n}}var w,e,o;H.getTextLocation=function(r,n,c,s){if((r!==e||s!==o)&&(w={},e=r,o=s),w[c])return w[c];var i=r.getPointAtLength(d(c-s/2,n)),v=r.getPointAtLength(d(c+s/2,n)),u=Math.atan((v.y-i.y)/(v.x-i.x)),g=r.getPointAtLength(d(c,n)),h=(g.x*4+i.x+v.x)/6,y=(g.y*4+i.y+v.y)/6,p={x:h,y,theta:u};return w[c]=p,p},H.clearLocationCache=function(){e=null},H.getVisibleSegment=function(r,n,c){var s=n.left,i=n.right,v=n.top,u=n.bottom,g=0,h=r.getTotalLength(),y=h,p,A;function m(x){var T=r.getPointAtLength(x);x===0?p=T:x===h&&(A=T);var _=T.x<s?s-T.x:T.x>i?T.x-i:0,f=T.y<v?v-T.y:T.y>u?T.y-u:0;return Math.sqrt(_*_+f*f)}for(var M=m(g);M;){if(g+=M+c,g>y)return;M=m(g)}for(M=m(y);M;){if(y-=M+c,g>y)return;M=m(y)}return{min:g,max:y,len:y-g,total:h,isClosed:g===0&&y===h&&Math.abs(p.x-A.x)<.1&&Math.abs(p.y-A.y)<.1}},H.findPointOnPath=function(r,n,c,s){s=s||{};for(var i=s.pathLength||r.getTotalLength(),v=s.tolerance||.001,u=s.iterationLimit||30,g=r.getPointAtLength(0)[c]>r.getPointAtLength(i)[c]?-1:1,h=0,y=0,p=i,A,m,M;h<u;){if(A=(y+p)/2,m=r.getPointAtLength(A),M=m[c]-n,Math.abs(M)<v)return m;g*M>0?p=A:y=A,h++}return m}},{"./mod":510}],499:[function(t,B,H){var d=t("fast-isnumeric"),l=t("tinycolor2"),b=t("color-normalize"),w=t("../components/colorscale"),e=t("../components/color/attributes").defaultLine,o=t("./array").isArrayOrTypedArray,a=b(e),r=1;function n(u,g){var h=u;return h[3]*=g,h}function c(u){if(d(u))return a;var g=b(u);return g.length?g:a}function s(u){return d(u)?u:r}function i(u,g,h){var y=u.color,p=o(y),A=o(g),m=w.extractOpts(u),M=[],x,T,_,f,L;if(m.colorscale!==void 0?x=w.makeColorScaleFuncFromTrace(u):x=c,p?T=function(k,P){return k[P]===void 0?a:b(x(k[P]))}:T=c,A?_=function(k,P){return k[P]===void 0?r:s(k[P])}:_=s,p||A)for(var S=0;S<h;S++)f=T(y,S),L=_(g,S),M[S]=n(f,L);else M=n(b(y),g);return M}function v(u){var g=w.extractOpts(u),h=g.colorscale;return g.reversescale&&(h=w.flipScale(g.colorscale)),h.map(function(y){var p=y[0],A=l(y[1]),m=A.toRgb();return{index:p,rgb:[m.r,m.g,m.b,m.a]}})}B.exports={formatColor:i,parseColorScale:v}},{"../components/color/attributes":365,"../components/colorscale":378,"./array":485,"color-normalize":89,"fast-isnumeric":190,tinycolor2:312}],500:[function(t,B,H){var d=t("./identity");function l(b){return[b]}B.exports={keyFun:function(b){return b.key},repeat:l,descend:d,wrap:l,unwrap:function(b){return b[0]}}},{"./identity":501}],501:[function(t,B,H){B.exports=function(l){return l}},{}],502:[function(t,B,H){B.exports=function(l,b){if(!b)return l;var w=1/Math.abs(b),e=w>1?(w*l+w*b)/w:l+b,o=String(e).length;if(o>16){var a=String(b).length,r=String(l).length;if(o>=r+a){var n=parseFloat(e).toPrecision(12);n.indexOf("e+")===-1&&(e=+n)}}return e}},{}],503:[function(t,B,H){var d=t("@plotly/d3"),l=t("d3-time-format").utcFormat,b=t("d3-format").format,w=t("fast-isnumeric"),e=t("../constants/numerical"),o=e.FP_SAFE,a=-o,r=e.BADNUM,n=B.exports={};n.adjustFormat=function(le){return!le||/^\d[.]\df/.test(le)||/[.]\d%/.test(le)?le:le==="0.f"?"~f":/^\d%/.test(le)?"~%":/^\ds/.test(le)?"~s":!/^[~,.0$]/.test(le)&&/[&fps]/.test(le)?"~"+le:le};var c={};n.warnBadFormat=function(se){var le=String(se);c[le]||(c[le]=1,n.warn('encountered bad format: "'+le+'"'))},n.noFormat=function(se){return String(se)},n.numberFormat=function(se){var le;try{le=b(n.adjustFormat(se))}catch{return n.warnBadFormat(se),n.noFormat}return le},n.nestedProperty=t("./nested_property"),n.keyedContainer=t("./keyed_container"),n.relativeAttr=t("./relative_attr"),n.isPlainObject=t("./is_plain_object"),n.toLogRange=t("./to_log_range"),n.relinkPrivateKeys=t("./relink_private");var s=t("./array");n.isTypedArray=s.isTypedArray,n.isArrayOrTypedArray=s.isArrayOrTypedArray,n.isArray1D=s.isArray1D,n.ensureArray=s.ensureArray,n.concat=s.concat,n.maxRowLength=s.maxRowLength,n.minRowLength=s.minRowLength;var i=t("./mod");n.mod=i.mod,n.modHalf=i.modHalf;var v=t("./coerce");n.valObjectMeta=v.valObjectMeta,n.coerce=v.coerce,n.coerce2=v.coerce2,n.coerceFont=v.coerceFont,n.coercePattern=v.coercePattern,n.coerceHoverinfo=v.coerceHoverinfo,n.coerceSelectionMarkerOpacity=v.coerceSelectionMarkerOpacity,n.validate=v.validate;var u=t("./dates");n.dateTime2ms=u.dateTime2ms,n.isDateTime=u.isDateTime,n.ms2DateTime=u.ms2DateTime,n.ms2DateTimeLocal=u.ms2DateTimeLocal,n.cleanDate=u.cleanDate,n.isJSDate=u.isJSDate,n.formatDate=u.formatDate,n.incrementMonth=u.incrementMonth,n.dateTick0=u.dateTick0,n.dfltRange=u.dfltRange,n.findExactDates=u.findExactDates,n.MIN_MS=u.MIN_MS,n.MAX_MS=u.MAX_MS;var g=t("./search");n.findBin=g.findBin,n.sorterAsc=g.sorterAsc,n.sorterDes=g.sorterDes,n.distinctVals=g.distinctVals,n.roundUp=g.roundUp,n.sort=g.sort,n.findIndexOfMin=g.findIndexOfMin,n.sortObjectKeys=t("./sort_object_keys");var h=t("./stats");n.aggNums=h.aggNums,n.len=h.len,n.mean=h.mean,n.median=h.median,n.midRange=h.midRange,n.variance=h.variance,n.stdev=h.stdev,n.interp=h.interp;var y=t("./matrix");n.init2dArray=y.init2dArray,n.transposeRagged=y.transposeRagged,n.dot=y.dot,n.translationMatrix=y.translationMatrix,n.rotationMatrix=y.rotationMatrix,n.rotationXYMatrix=y.rotationXYMatrix,n.apply3DTransform=y.apply3DTransform,n.apply2DTransform=y.apply2DTransform,n.apply2DTransform2=y.apply2DTransform2,n.convertCssMatrix=y.convertCssMatrix,n.inverseTransformMatrix=y.inverseTransformMatrix;var p=t("./angles");n.deg2rad=p.deg2rad,n.rad2deg=p.rad2deg,n.angleDelta=p.angleDelta,n.angleDist=p.angleDist,n.isFullCircle=p.isFullCircle,n.isAngleInsideSector=p.isAngleInsideSector,n.isPtInsideSector=p.isPtInsideSector,n.pathArc=p.pathArc,n.pathSector=p.pathSector,n.pathAnnulus=p.pathAnnulus;var A=t("./anchor_utils");n.isLeftAnchor=A.isLeftAnchor,n.isCenterAnchor=A.isCenterAnchor,n.isRightAnchor=A.isRightAnchor,n.isTopAnchor=A.isTopAnchor,n.isMiddleAnchor=A.isMiddleAnchor,n.isBottomAnchor=A.isBottomAnchor;var m=t("./geometry2d");n.segmentsIntersect=m.segmentsIntersect,n.segmentDistance=m.segmentDistance,n.getTextLocation=m.getTextLocation,n.clearLocationCache=m.clearLocationCache,n.getVisibleSegment=m.getVisibleSegment,n.findPointOnPath=m.findPointOnPath;var M=t("./extend");n.extendFlat=M.extendFlat,n.extendDeep=M.extendDeep,n.extendDeepAll=M.extendDeepAll,n.extendDeepNoArrays=M.extendDeepNoArrays;var x=t("./loggers");n.log=x.log,n.warn=x.warn,n.error=x.error;var T=t("./regex");n.counterRegex=T.counter;var _=t("./throttle");n.throttle=_.throttle,n.throttleDone=_.done,n.clearThrottle=_.clear;var f=t("./dom");n.getGraphDiv=f.getGraphDiv,n.isPlotDiv=f.isPlotDiv,n.removeElement=f.removeElement,n.addStyleRule=f.addStyleRule,n.addRelatedStyleRule=f.addRelatedStyleRule,n.deleteRelatedStyleRule=f.deleteRelatedStyleRule,n.getFullTransformMatrix=f.getFullTransformMatrix,n.getElementTransformMatrix=f.getElementTransformMatrix,n.getElementAndAncestors=f.getElementAndAncestors,n.equalDomRects=f.equalDomRects,n.clearResponsive=t("./clear_responsive"),n.preserveDrawingBuffer=t("./preserve_drawing_buffer"),n.makeTraceGroups=t("./make_trace_groups"),n._=t("./localize"),n.notifier=t("./notifier"),n.filterUnique=t("./filter_unique"),n.filterVisible=t("./filter_visible"),n.pushUnique=t("./push_unique"),n.increment=t("./increment"),n.cleanNumber=t("./clean_number"),n.ensureNumber=function(le){return w(le)?(le=Number(le),le>o||le<a?r:le):r},n.isIndex=function(se,le){return le!==void 0&&se>=le?!1:w(se)&&se>=0&&se%1===0},n.noop=t("./noop"),n.identity=t("./identity"),n.repeat=function(se,le){for(var oe=new Array(le),U=0;U<le;U++)oe[U]=se;return oe},n.swapAttrs=function(se,le,oe,U){oe||(oe="x"),U||(U="y");for(var V=0;V<le.length;V++){var re=le[V],ee=n.nestedProperty(se,re.replace("?",oe)),j=n.nestedProperty(se,re.replace("?",U)),Q=ee.get();ee.set(j.get()),j.set(Q)}},n.raiseToTop=function(le){le.parentNode.appendChild(le)},n.cancelTransition=function(se){return se.transition().duration(0)},n.constrain=function(se,le,oe){return le>oe?Math.max(oe,Math.min(le,se)):Math.max(le,Math.min(oe,se))},n.bBoxIntersect=function(se,le,oe){return oe=oe||0,se.left<=le.right+oe&&le.left<=se.right+oe&&se.top<=le.bottom+oe&&le.top<=se.bottom+oe},n.simpleMap=function(se,le,oe,U,V){for(var re=se.length,ee=new Array(re),j=0;j<re;j++)ee[j]=le(se[j],oe,U,V);return ee},n.randstr=function se(le,oe,U,V){if(U||(U=16),oe===void 0&&(oe=24),oe<=0)return"0";var re=Math.log(Math.pow(2,oe))/Math.log(U),ee="",j,Q,ne;for(j=2;re===1/0;j*=2)re=Math.log(Math.pow(2,oe/j))/Math.log(U)*j;var ae=re-Math.floor(re);for(j=0;j<Math.floor(re);j++)ne=Math.floor(Math.random()*U).toString(U),ee=ne+ee;ae&&(Q=Math.pow(U,ae),ne=Math.floor(Math.random()*Q).toString(U),ee=ne+ee);var ie=parseInt(ee,U);return le&&le[ee]||ie!==1/0&&ie>=Math.pow(2,oe)?V>10?(n.warn("randstr failed uniqueness"),ee):se(le,oe,U,(V||0)+1):ee},n.OptionControl=function(se,le){se||(se={}),le||(le="opt");var oe={};return oe.optionList=[],oe._newoption=function(U){U[le]=se,oe[U.name]=U,oe.optionList.push(U)},oe["_"+le]=se,oe},n.smooth=function(se,le){if(le=Math.round(le)||0,le<2)return se;var oe=se.length,U=2*oe,V=2*le-1,re=new Array(V),ee=new Array(oe),j,Q,ne,ae;for(j=0;j<V;j++)re[j]=(1-Math.cos(Math.PI*(j+1)/le))/(2*le);for(j=0;j<oe;j++){for(ae=0,Q=0;Q<V;Q++)ne=j+Q+1-le,ne<-oe?ne-=U*Math.round(ne/U):ne>=U&&(ne-=U*Math.floor(ne/U)),ne<0?ne=-1-ne:ne>=oe&&(ne=U-1-ne),ae+=se[ne]*re[Q];ee[j]=ae}return ee},n.syncOrAsync=function(se,le,oe){var U,V;function re(){return n.syncOrAsync(se,le,oe)}for(;se.length;)if(V=se.splice(0,1)[0],U=V(le),U&&U.then)return U.then(re);return oe&&oe(le)},n.stripTrailingSlash=function(se){return se.substr(-1)==="/"?se.substr(0,se.length-1):se},n.noneOrAll=function(se,le,oe){if(!!se){var U=!1,V=!0,re,ee;for(re=0;re<oe.length;re++)ee=se[oe[re]],ee!=null?U=!0:V=!1;if(U&&!V)for(re=0;re<oe.length;re++)se[oe[re]]=le[oe[re]]}},n.mergeArray=function(se,le,oe,U){var V=typeof U=="function";if(n.isArrayOrTypedArray(se))for(var re=Math.min(se.length,le.length),ee=0;ee<re;ee++){var j=se[ee];le[ee][oe]=V?U(j):j}},n.mergeArrayCastPositive=function(se,le,oe){return n.mergeArray(se,le,oe,function(U){var V=+U;return isFinite(V)&&V>0?V:0})},n.fillArray=function(se,le,oe,U){if(U=U||n.identity,n.isArrayOrTypedArray(se))for(var V=0;V<le.length;V++)le[V][oe]=U(se[V])},n.castOption=function(se,le,oe,U){U=U||n.identity;var V=n.nestedProperty(se,oe).get();return n.isArrayOrTypedArray(V)?Array.isArray(le)&&n.isArrayOrTypedArray(V[le[0]])?U(V[le[0]][le[1]]):U(V[le]):V},n.extractOption=function(se,le,oe,U){if(oe in se)return se[oe];var V=n.nestedProperty(le,U).get();if(!Array.isArray(V))return V};function L(se){var le={};for(var oe in se)for(var U=se[oe],V=0;V<U.length;V++)le[U[V]]=+oe;return le}n.tagSelected=function(se,le,oe){var U=le.selectedpoints,V=le._indexToPoints,re;V&&(re=L(V));function ee(ie){return ie!==void 0&&ie<se.length}for(var j=0;j<U.length;j++){var Q=U[j];if(n.isIndex(Q)||n.isArrayOrTypedArray(Q)&&n.isIndex(Q[0])&&n.isIndex(Q[1])){var ne=re?re[Q]:Q,ae=oe?oe[ne]:ne;ee(ae)&&(se[ae].selected=1)}}},n.selIndices2selPoints=function(se){var le=se.selectedpoints,oe=se._indexToPoints;if(oe){for(var U=L(oe),V=[],re=0;re<le.length;re++){var ee=le[re];if(n.isIndex(ee)){var j=U[ee];n.isIndex(j)&&V.push(j)}}return V}else return le},n.getTargetArray=function(se,le){var oe=le.target;if(typeof oe=="string"&&oe){var U=n.nestedProperty(se,oe).get();return Array.isArray(U)?U:!1}else if(Array.isArray(oe))return oe;return!1},n.minExtend=function(se,le){var oe={};typeof le!="object"&&(le={});var U=3,V=Object.keys(se),re,ee,j;for(re=0;re<V.length;re++)ee=V[re],j=se[ee],!(ee.charAt(0)==="_"||typeof j=="function")&&(ee==="module"?oe[ee]=j:Array.isArray(j)?ee==="colorscale"?oe[ee]=j.slice():oe[ee]=j.slice(0,U):n.isTypedArray(j)?oe[ee]=j.subarray(0,U):j&&typeof j=="object"?oe[ee]=n.minExtend(se[ee],le[ee]):oe[ee]=j);for(V=Object.keys(le),re=0;re<V.length;re++)ee=V[re],j=le[ee],(typeof j!="object"||!(ee in oe)||typeof oe[ee]!="object")&&(oe[ee]=j);return oe},n.titleCase=function(se){return se.charAt(0).toUpperCase()+se.substr(1)},n.containsAny=function(se,le){for(var oe=0;oe<le.length;oe++)if(se.indexOf(le[oe])!==-1)return!0;return!1},n.isIE=function(){return typeof window.navigator.msSaveBlob!="undefined"};var S=/Version\/[\d\.]+.*Safari/;n.isSafari=function(){return S.test(window.navigator.userAgent)};var k=/iPad|iPhone|iPod/;n.isIOS=function(){return k.test(window.navigator.userAgent)};var P=/Firefox\/(\d+)\.\d+/;n.getFirefoxVersion=function(){var se=P.exec(window.navigator.userAgent);if(se&&se.length===2){var le=parseInt(se[1]);if(!isNaN(le))return le}return null},n.isD3Selection=function(se){return se instanceof d.selection},n.ensureSingle=function(se,le,oe,U){var V=se.select(le+(oe?"."+oe:""));if(V.size())return V;var re=se.append(le);return oe&&re.classed(oe,!0),U&&re.call(U),re},n.ensureSingleById=function(se,le,oe,U){var V=se.select(le+"#"+oe);if(V.size())return V;var re=se.append(le).attr("id",oe);return U&&re.call(U),re},n.objectFromPath=function(se,le){for(var oe=se.split("."),U,V=U={},re=0;re<oe.length;re++){var ee=oe[re],j=null,Q=oe[re].match(/(.*)\[([0-9]+)\]/);Q?(ee=Q[1],j=Q[2],U=U[ee]=[],re===oe.length-1?U[j]=le:U[j]={},U=U[j]):(re===oe.length-1?U[ee]=le:U[ee]={},U=U[ee])}return V};var z=/^([^\[\.]+)\.(.+)?/,I=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;n.expandObjectPaths=function(se){var le,oe,U,V,re,ee,j;if(typeof se=="object"&&!Array.isArray(se))for(oe in se)se.hasOwnProperty(oe)&&((le=oe.match(z))?(V=se[oe],U=le[1],delete se[oe],se[U]=n.extendDeepNoArrays(se[U]||{},n.objectFromPath(oe,n.expandObjectPaths(V))[U])):(le=oe.match(I))?(V=se[oe],U=le[1],re=parseInt(le[2]),delete se[oe],se[U]=se[U]||[],le[3]==="."?(j=le[4],ee=se[U][re]=se[U][re]||{},n.extendDeepNoArrays(ee,n.objectFromPath(j,n.expandObjectPaths(V)))):se[U][re]=n.expandObjectPaths(V)):se[oe]=n.expandObjectPaths(se[oe]));return se},n.numSeparate=function(se,le,oe){if(oe||(oe=!1),typeof le!="string"||le.length===0)throw new Error("Separator string required for formatting!");typeof se=="number"&&(se=String(se));var U=/(\d+)(\d{3})/,V=le.charAt(0),re=le.charAt(1),ee=se.split("."),j=ee[0],Q=ee.length>1?V+ee[1]:"";if(re&&(ee.length>1||j.length>4||oe))for(;U.test(j);)j=j.replace(U,"$1"+re+"$2");return j+Q},n.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var R=/^\w*$/;n.templateString=function(se,le){var oe={};return se.replace(n.TEMPLATE_STRING_REGEX,function(U,V){var re;return R.test(V)?re=le[V]:(oe[V]=oe[V]||n.nestedProperty(le,V).get,re=oe[V]()),n.isValidTextValue(re)?re:""})};var D={max:10,count:0,name:"hovertemplate"};n.hovertemplateString=function(){return G.apply(D,arguments)};var O={max:10,count:0,name:"texttemplate"};n.texttemplateString=function(){return G.apply(O,arguments)};var F=/^[:|\|]/;function G(se,le,oe){var U=this,V=arguments;le||(le={});var re={};return se.replace(n.TEMPLATE_STRING_REGEX,function(ee,j,Q){var ne=j==="xother"||j==="yother",ae=j==="_xother"||j==="_yother",ie=j==="_xother_"||j==="_yother_",ue=j==="xother_"||j==="yother_",xe=ne||ae||ue||ie,he=j;(ae||ie)&&(he=he.substring(1)),(ue||ie)&&(he=he.substring(0,he.length-1));var ge;if(xe){if(ge=le[he],ge===void 0)return""}else{var me,ke;for(ke=3;ke<V.length;ke++)if(me=V[ke],!!me){if(me.hasOwnProperty(he)){ge=me[he];break}if(R.test(he)||(ge=n.nestedProperty(me,he).get(),ge=re[he]||n.nestedProperty(me,he).get(),ge&&(re[he]=ge)),ge!==void 0)break}}if(ge===void 0&&U)return U.count<U.max&&(n.warn("Variable '"+he+"' in "+U.name+" could not be found!"),ge=ee),U.count===U.max&&n.warn("Too many "+U.name+" warnings - additional warnings will be suppressed"),U.count++,ee;if(Q){var Ae;if(Q[0]===":"&&(Ae=oe?oe.numberFormat:n.numberFormat,ge=Ae(Q.replace(F,""))(ge)),Q[0]==="|"){Ae=oe?oe.timeFormat:l;var Ne=n.dateTime2ms(ge);ge=n.formatDate(Ne,Q.replace(F,""),!1,Ae)}}else{var He=he+"Label";le.hasOwnProperty(He)&&(ge=le[He])}return xe&&(ge="("+ge+")",(ae||ie)&&(ge=" "+ge),(ue||ie)&&(ge=ge+" ")),ge})}var W=48,q=57;n.subplotSort=function(se,le){for(var oe=Math.min(se.length,le.length)+1,U=0,V=0,re=0;re<oe;re++){var ee=se.charCodeAt(re)||0,j=le.charCodeAt(re)||0,Q=ee>=W&&ee<=q,ne=j>=W&&j<=q;if(Q&&(U=10*U+ee-W),ne&&(V=10*V+j-W),!Q||!ne){if(U!==V)return U-V;if(ee!==j)return ee-j}}return V-U};var J=2e9;n.seedPseudoRandom=function(){J=2e9},n.pseudoRandom=function(){var se=J;return J=(69069*J+1)%4294967296,Math.abs(J-se)<429496729?n.pseudoRandom():J/4294967296},n.fillText=function(se,le,oe){var U=Array.isArray(oe)?function(ee){oe.push(ee)}:function(ee){oe.text=ee},V=n.extractOption(se,le,"htx","hovertext");if(n.isValidTextValue(V))return U(V);var re=n.extractOption(se,le,"tx","text");if(n.isValidTextValue(re))return U(re)},n.isValidTextValue=function(se){return se||se===0},n.formatPercent=function(se,le){le=le||0;for(var oe=(Math.round(100*se*Math.pow(10,le))*Math.pow(.1,le)).toFixed(le)+"%",U=0;U<le;U++)oe.indexOf(".")!==-1&&(oe=oe.replace("0%","%"),oe=oe.replace(".%","%"));return oe},n.isHidden=function(se){var le=window.getComputedStyle(se).display;return!le||le==="none"},n.strTranslate=function(se,le){return se||le?"translate("+se+","+le+")":""},n.strRotate=function(se){return se?"rotate("+se+")":""},n.strScale=function(se){return se!==1?"scale("+se+")":""},n.getTextTransform=function(se){var le=se.noCenter,oe=se.textX,U=se.textY,V=se.targetX,re=se.targetY,ee=se.anchorX||0,j=se.anchorY||0,Q=se.rotate,ne=se.scale;return ne?ne>1&&(ne=1):ne=0,n.strTranslate(V-ne*(oe+ee),re-ne*(U+j))+n.strScale(ne)+(Q?"rotate("+Q+(le?"":" "+oe+" "+U)+")":"")},n.ensureUniformFontSize=function(se,le){var oe=n.extendFlat({},le);return oe.size=Math.max(le.size,se._fullLayout.uniformtext.minsize||0),oe},n.join2=function(se,le,oe){var U=se.length;return U>1?se.slice(0,-1).join(le)+oe+se[U-1]:se.join(le)},n.bigFont=function(se){return Math.round(1.2*se)};var X=n.getFirefoxVersion(),Z=X!==null&&X<86;n.getPositionFromD3Event=function(){return Z?[d.event.layerX,d.event.layerY]:[d.event.offsetX,d.event.offsetY]}},{"../constants/numerical":479,"./anchor_utils":483,"./angles":484,"./array":485,"./clean_number":486,"./clear_responsive":488,"./coerce":489,"./dates":490,"./dom":491,"./extend":493,"./filter_unique":494,"./filter_visible":495,"./geometry2d":498,"./identity":501,"./increment":502,"./is_plain_object":504,"./keyed_container":505,"./localize":506,"./loggers":507,"./make_trace_groups":508,"./matrix":509,"./mod":510,"./nested_property":511,"./noop":512,"./notifier":513,"./preserve_drawing_buffer":517,"./push_unique":518,"./regex":520,"./relative_attr":521,"./relink_private":522,"./search":523,"./sort_object_keys":526,"./stats":527,"./throttle":530,"./to_log_range":531,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],504:[function(t,B,H){B.exports=function(l){return window&&window.process&&window.process.versions?Object.prototype.toString.call(l)==="[object Object]":Object.prototype.toString.call(l)==="[object Object]"&&Object.getPrototypeOf(l).hasOwnProperty("hasOwnProperty")}},{}],505:[function(t,B,H){var d=t("./nested_property"),l=/^\w*$/,b=0,w=1,e=2,o=3,a=4;B.exports=function(n,c,s,i){s=s||"name",i=i||"value";var v,u,g,h={};c&&c.length?(g=d(n,c),u=g.get()):u=n,c=c||"";var y={};if(u)for(v=0;v<u.length;v++)y[u[v][s]]=v;var p=l.test(i),A={set:function(m,M){var x=M===null?a:b;if(!u){if(!g||x===a)return;u=[],g.set(u)}var T=y[m];if(T===void 0){if(x===a)return;x=x|o,T=u.length,y[m]=T}else M!==(p?u[T][i]:d(u[T],i).get())&&(x=x|e);var _=u[T]=u[T]||{};return _[s]=m,p?_[i]=M:d(_,i).set(M),M!==null&&(x=x&~a),h[T]=h[T]|x,A},get:function(m){if(!!u){var M=y[m];if(M!==void 0)return p?u[M][i]:d(u[M],i).get()}},rename:function(m,M){var x=y[m];return x===void 0||(h[x]=h[x]|w,y[M]=x,delete y[m],u[x][s]=M),A},remove:function(m){var M=y[m];if(M===void 0)return A;var x=u[M];if(Object.keys(x).length>2)return h[M]=h[M]|e,A.set(m,null);if(p){for(v=M;v<u.length;v++)h[v]=h[v]|o;for(v=M;v<u.length;v++)y[u[v][s]]--;u.splice(M,1),delete y[m]}else d(x,i).set(null),h[M]=h[M]|e|a;return A},constructUpdate:function(){for(var m,M,x={},T=Object.keys(h),_=0;_<T.length;_++)M=T[_],m=c+"["+M+"]",u[M]?(h[M]&w&&(x[m+"."+s]=u[M][s]),h[M]&e&&(p?x[m+"."+i]=h[M]&a?null:u[M][i]:x[m+"."+i]=h[M]&a?null:d(u[M],i).get())):x[m]=null;return x}};return A}},{"./nested_property":511}],506:[function(t,B,H){var d=t("../registry");B.exports=function(b,w){for(var e=b._context.locale,o=0;o<2;o++){for(var a=b._context.locales,r=0;r<2;r++){var n=(a[e]||{}).dictionary;if(n){var c=n[w];if(c)return c}a=d.localeRegistry}var s=e.split("-")[0];if(s===e)break;e=s}return w}},{"../registry":638}],507:[function(t,B,H){var d=t("../plot_api/plot_config").dfltConfig,l=t("./notifier"),b=B.exports={};b.log=function(){var w;if(d.logging>1){var e=["LOG:"];for(w=0;w<arguments.length;w++)e.push(arguments[w]);console.trace.apply(console,e)}if(d.notifyOnLogging>1){var o=[];for(w=0;w<arguments.length;w++)o.push(arguments[w]);l(o.join("<br>"),"long")}},b.warn=function(){var w;if(d.logging>0){var e=["WARN:"];for(w=0;w<arguments.length;w++)e.push(arguments[w]);console.trace.apply(console,e)}if(d.notifyOnLogging>0){var o=[];for(w=0;w<arguments.length;w++)o.push(arguments[w]);l(o.join("<br>"),"stick")}},b.error=function(){var w;if(d.logging>0){var e=["ERROR:"];for(w=0;w<arguments.length;w++)e.push(arguments[w]);console.error.apply(console,e)}if(d.notifyOnLogging>0){var o=[];for(w=0;w<arguments.length;w++)o.push(arguments[w]);l(o.join("<br>"),"stick")}}},{"../plot_api/plot_config":541,"./notifier":513}],508:[function(t,B,H){var d=t("@plotly/d3");B.exports=function(b,w,e){var o=b.selectAll("g."+e.replace(/\s/g,".")).data(w,function(r){return r[0].trace.uid});o.exit().remove(),o.enter().append("g").attr("class",e),o.order();var a=b.classed("rangeplot")?"nodeRangePlot3":"node3";return o.each(function(r){r[0][a]=d.select(this)}),o}},{"@plotly/d3":58}],509:[function(t,B,H){var d=t("gl-mat4");H.init2dArray=function(l,b){for(var w=new Array(l),e=0;e<l;e++)w[e]=new Array(b);return w},H.transposeRagged=function(l){var b=0,w=l.length,e,o;for(e=0;e<w;e++)b=Math.max(b,l[e].length);var a=new Array(b);for(e=0;e<b;e++)for(a[e]=new Array(w),o=0;o<w;o++)a[e][o]=l[o][e];return a},H.dot=function(l,b){if(!(l.length&&b.length)||l.length!==b.length)return null;var w=l.length,e,o;if(l[0].length)for(e=new Array(w),o=0;o<w;o++)e[o]=H.dot(l[o],b);else if(b[0].length){var a=H.transposeRagged(b);for(e=new Array(a.length),o=0;o<a.length;o++)e[o]=H.dot(l,a[o])}else for(e=0,o=0;o<w;o++)e+=l[o]*b[o];return e},H.translationMatrix=function(l,b){return[[1,0,l],[0,1,b],[0,0,1]]},H.rotationMatrix=function(l){var b=l*Math.PI/180;return[[Math.cos(b),-Math.sin(b),0],[Math.sin(b),Math.cos(b),0],[0,0,1]]},H.rotationXYMatrix=function(l,b,w){return H.dot(H.dot(H.translationMatrix(b,w),H.rotationMatrix(l)),H.translationMatrix(-b,-w))},H.apply3DTransform=function(l){return function(){var b=arguments,w=arguments.length===1?b[0]:[b[0],b[1],b[2]||0];return H.dot(l,[w[0],w[1],w[2],1]).slice(0,3)}},H.apply2DTransform=function(l){return function(){var b=arguments;b.length===3&&(b=b[0]);var w=arguments.length===1?b[0]:[b[0],b[1]];return H.dot(l,[w[0],w[1],1]).slice(0,2)}},H.apply2DTransform2=function(l){var b=H.apply2DTransform(l);return function(w){return b(w.slice(0,2)).concat(b(w.slice(2,4)))}},H.convertCssMatrix=function(l){if(l){var b=l.length;if(b===16)return l;if(b===6)return[l[0],l[1],0,0,l[2],l[3],0,0,0,0,1,0,l[4],l[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},H.inverseTransformMatrix=function(l){var b=[];return d.invert(b,l),[[b[0],b[1],b[2],b[3]],[b[4],b[5],b[6],b[7]],[b[8],b[9],b[10],b[11]],[b[12],b[13],b[14],b[15]]]}},{"gl-mat4":210}],510:[function(t,B,H){function d(b,w){var e=b%w;return e<0?e+w:e}function l(b,w){return Math.abs(b)>w/2?b-Math.round(b/w)*w:b}B.exports={mod:d,modHalf:l}},{}],511:[function(t,B,H){var d=t("fast-isnumeric"),l=t("./array").isArrayOrTypedArray;B.exports=function(i,v){if(d(v))v=String(v);else if(typeof v!="string"||v.substr(v.length-4)==="[-1]")throw"bad property string";for(var u=0,g=v.split("."),h,y,p;u<g.length;){if(h=String(g[u]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),h){if(h[1])g[u]=h[1];else if(u===0)g.splice(0,1);else throw"bad property string";for(y=h[2].substr(1,h[2].length-2).split("]["),p=0;p<y.length;p++)u++,g.splice(u,0,Number(y[p]))}u++}return typeof i!="object"?c(i,v,g):{set:o(i,g,v),get:b(i,g),astr:v,parts:g,obj:i}};function b(s,i){return function(){var v=s,u,g,h,y,p;for(y=0;y<i.length-1;y++){if(u=i[y],u===-1){for(g=!0,h=[],p=0;p<v.length;p++)h[p]=b(v[p],i.slice(y+1))(),h[p]!==h[0]&&(g=!1);return g?h[0]:h}if(typeof u=="number"&&!l(v)||(v=v[u],typeof v!="object"||v===null))return}if(!(typeof v!="object"||v===null)&&(h=v[i[y]],h!==null))return h}}var w=/(^|\.)args\[/;function e(s,i){return s===void 0||s===null&&!i.match(w)}function o(s,i,v){return function(u){var g=s,h="",y=e(u,v),p,A;for(A=0;A<i.length-1;A++){if(p=i[A],typeof p=="number"&&!l(g))throw"array index but container is not an array";if(p===-1){if(y=!r(g,i.slice(A+1),u,v),y)break;return}if(!n(g,p,i[A+1],y))break;if(g=g[p],typeof g!="object"||g===null)throw"container is not an object";h=a(h,p)}if(y){if(A===i.length-1&&(delete g[i[A]],Array.isArray(g)&&+i[A]===g.length-1))for(;g.length&&g[g.length-1]===void 0;)g.pop()}else g[i[A]]=u}}function a(s,i){var v=i;return d(i)?v="["+i+"]":s&&(v="."+i),s+v}function r(s,i,v,u){var g=l(v),h=!0,y=v,p=u.replace("-1",0),A=g?!1:e(v,p),m=i[0],M;for(M=0;M<s.length;M++)p=u.replace("-1",M),g&&(y=v[M%v.length],A=e(y,p)),A&&(h=!1),n(s,M,m,A)&&o(s[M],i,u.replace("-1",M))(y);return h}function n(s,i,v,u){if(s[i]===void 0){if(u)return!1;typeof v=="number"?s[i]=[]:s[i]={}}return!0}function c(s,i,v){return{set:function(){throw"bad container"},get:function(){},astr:i,parts:v,obj:s}}},{"./array":485,"fast-isnumeric":190}],512:[function(t,B,H){B.exports=function(){}},{}],513:[function(t,B,H){var d=t("@plotly/d3"),l=t("fast-isnumeric"),b=[];B.exports=function(w,e){if(b.indexOf(w)!==-1)return;b.push(w);var o=1e3;l(e)?o=e:e==="long"&&(o=3e3);var a=d.select("body").selectAll(".plotly-notifier").data([0]);a.enter().append("div").classed("plotly-notifier",!0);var r=a.selectAll(".notifier-note").data(b);function n(c){c.duration(700).style("opacity",0).each("end",function(s){var i=b.indexOf(s);i!==-1&&b.splice(i,1),d.select(this).remove()})}r.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(c){var s=d.select(this);s.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){s.transition().call(n)});for(var i=s.append("p"),v=c.split(/<br\s*\/?>/g),u=0;u<v.length;u++)u&&i.append("br"),i.append("span").text(v[u]);e==="stick"?s.transition().duration(350).style("opacity",1):s.transition().duration(700).style("opacity",1).transition().delay(o).call(n)})}},{"@plotly/d3":58,"fast-isnumeric":190}],514:[function(t,B,H){var d=t("./setcursor"),l="data-savedcursor",b="!!";B.exports=function(e,o){var a=e.attr(l);if(o){if(!a){for(var r=(e.attr("class")||"").split(" "),n=0;n<r.length;n++){var c=r[n];c.indexOf("cursor-")===0&&e.attr(l,c.substr(7)).classed(c,!1)}e.attr(l)||e.attr(l,b)}d(e,o)}else a&&(e.attr(l,null),a===b?d(e):d(e,a))}},{"./setcursor":524}],515:[function(t,B,H){var d=t("./matrix").dot,l=t("../constants/numerical").BADNUM,b=B.exports={};b.tester=function(e){var o=e.slice(),a=o[0][0],r=a,n=o[0][1],c=n,s;for(o.push(o[0]),s=1;s<o.length;s++)a=Math.min(a,o[s][0]),r=Math.max(r,o[s][0]),n=Math.min(n,o[s][1]),c=Math.max(c,o[s][1]);var i=!1,v;o.length===5&&(o[0][0]===o[1][0]?o[2][0]===o[3][0]&&o[0][1]===o[3][1]&&o[1][1]===o[2][1]&&(i=!0,v=function(p){return p[0]===o[0][0]}):o[0][1]===o[1][1]&&o[2][1]===o[3][1]&&o[0][0]===o[3][0]&&o[1][0]===o[2][0]&&(i=!0,v=function(p){return p[1]===o[0][1]}));function u(p,A){var m=p[0],M=p[1];return!(m===l||m<a||m>r||M===l||M<n||M>c||A&&v(p))}function g(p,A){var m=p[0],M=p[1];if(m===l||m<a||m>r||M===l||M<n||M>c)return!1;var x=o.length,T=o[0][0],_=o[0][1],f=0,L,S,k,P,z;for(L=1;L<x;L++)if(S=T,k=_,T=o[L][0],_=o[L][1],P=Math.min(S,T),!(m<P||m>Math.max(S,T)||M>Math.max(k,_)))if(M<Math.min(k,_))m!==P&&f++;else{if(T===S?z=M:z=k+(m-S)*(_-k)/(T-S),M===z)return!(L===1&&A);M<=z&&m!==P&&f++}return f%2===1}var h=!0,y=o[0];for(s=1;s<o.length;s++)if(y[0]!==o[s][0]||y[1]!==o[s][1]){h=!1;break}return{xmin:a,xmax:r,ymin:n,ymax:c,pts:o,contains:i?u:g,isRect:i,degenerate:h}},b.isSegmentBent=function(e,o,a,r){var n=e[o],c=[e[a][0]-n[0],e[a][1]-n[1]],s=d(c,c),i=Math.sqrt(s),v=[-c[1]/i,c[0]/i],u,g,h;for(u=o+1;u<a;u++)if(g=[e[u][0]-n[0],e[u][1]-n[1]],h=d(g,c),h<0||h>s||Math.abs(d(g,v))>r)return!0;return!1},b.filter=function(e,o){var a=[e[0]],r=0,n=0;function c(i){e.push(i);var v=a.length,u=r;a.splice(n+1);for(var g=u+1;g<e.length;g++)(g===e.length-1||b.isSegmentBent(e,u,g+1,o))&&(a.push(e[g]),a.length<v-2&&(r=g,n=a.length-1),u=g)}if(e.length>1){var s=e.pop();c(s)}return{addPt:c,raw:e,filtered:a}}},{"../constants/numerical":479,"./matrix":509}],516:[function(t,B,H){(function(d){(function(){var l=t("./show_no_webgl_msg"),b=t("regl");B.exports=function(e,o){var a=e._fullLayout,r=!0;return a._glcanvas.each(function(n){if(!n.regl&&!(n.pick&&!a._has("parcoords"))){try{n.regl=b({canvas:this,attributes:{antialias:!n.pick,preserveDrawingBuffer:!0},pixelRatio:e._context.plotGlPixelRatio||d.devicePixelRatio,extensions:o||[]})}catch{r=!1}n.regl||(r=!1),r&&this.addEventListener("webglcontextlost",function(c){e&&e.emit&&e.emit("plotly_webglcontextlost",{event:c,layer:n.key})},!1)}}),r||l({container:a._glcontainer.node()}),r}}).call(this)}).call(this,typeof Ao!="undefined"?Ao:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./show_no_webgl_msg":525,regl:283}],517:[function(t,B,H){var d=t("fast-isnumeric"),l=t("is-mobile");B.exports=function(e){var o;if(e&&e.hasOwnProperty("userAgent")?o=e.userAgent:o=b(),typeof o!="string")return!0;var a=l({ua:{headers:{"user-agent":o}},tablet:!0,featureDetect:!1});if(!a)for(var r=o.split(" "),n=1;n<r.length;n++){var c=r[n];if(c.indexOf("Safari")!==-1)for(var s=n-1;s>-1;s--){var i=r[s];if(i.substr(0,8)==="Version/"){var v=i.substr(8).split(".")[0];if(d(v)&&(v=+v),v>=13)return!0}}}return a};function b(){var w;return typeof navigator!="undefined"&&(w=navigator.userAgent),w&&w.headers&&typeof w.headers["user-agent"]=="string"&&(w=w.headers["user-agent"]),w}},{"fast-isnumeric":190,"is-mobile":234}],518:[function(t,B,H){B.exports=function(l,b){if(b instanceof RegExp){for(var w=b.toString(),e=0;e<l.length;e++)if(l[e]instanceof RegExp&&l[e].toString()===w)return l;l.push(b)}else(b||b===0)&&l.indexOf(b)===-1&&l.push(b);return l}},{}],519:[function(t,B,H){var d=t("../lib"),l=t("../plot_api/plot_config").dfltConfig;function b(e,o){for(var a=[],r,n=0;n<o.length;n++)r=o[n],r===e?a[n]=r:typeof r=="object"?a[n]=Array.isArray(r)?d.extendDeep([],r):d.extendDeepAll({},r):a[n]=r;return a}var w={};w.add=function(e,o,a,r,n){var c,s;if(e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},s=e.undoQueue.index,e.autoplay){e.undoQueue.inSequence||(e.autoplay=!1);return}!e.undoQueue.sequence||e.undoQueue.beginSequence?(c={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},e.undoQueue.queue.splice(s,e.undoQueue.queue.length-s,c),e.undoQueue.index+=1):c=e.undoQueue.queue[s-1],e.undoQueue.beginSequence=!1,c&&(c.undo.calls.unshift(o),c.undo.args.unshift(a),c.redo.calls.push(r),c.redo.args.push(n)),e.undoQueue.queue.length>l.queueLength&&(e.undoQueue.queue.shift(),e.undoQueue.index--)},w.startSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!0,e.undoQueue.beginSequence=!0},w.stopSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!1,e.undoQueue.beginSequence=!1},w.undo=function(o){var a,r;if(!(o.undoQueue===void 0||isNaN(o.undoQueue.index)||o.undoQueue.index<=0)){for(o.undoQueue.index--,a=o.undoQueue.queue[o.undoQueue.index],o.undoQueue.inSequence=!0,r=0;r<a.undo.calls.length;r++)w.plotDo(o,a.undo.calls[r],a.undo.args[r]);o.undoQueue.inSequence=!1,o.autoplay=!1}},w.redo=function(o){var a,r;if(!(o.undoQueue===void 0||isNaN(o.undoQueue.index)||o.undoQueue.index>=o.undoQueue.queue.length)){for(a=o.undoQueue.queue[o.undoQueue.index],o.undoQueue.inSequence=!0,r=0;r<a.redo.calls.length;r++)w.plotDo(o,a.redo.calls[r],a.redo.args[r]);o.undoQueue.inSequence=!1,o.autoplay=!1,o.undoQueue.index++}},w.plotDo=function(e,o,a){e.autoplay=!0,a=b(e,a),o.apply(null,a)},B.exports=w},{"../lib":503,"../plot_api/plot_config":541}],520:[function(t,B,H){H.counter=function(d,l,b,w){var e=(l||"")+(b?"":"$"),o=w===!1?"":"^";return d==="xy"?new RegExp(o+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+e):new RegExp(o+d+"([2-9]|[1-9][0-9]+)?"+e)}},{}],521:[function(t,B,H){var d=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,l=/^[^\.\[\]]+$/;B.exports=function(b,w){for(;w;){var e=b.match(d);if(e)b=e[1];else if(b.match(l))b="";else throw new Error("bad relativeAttr call:"+[b,w]);if(w.charAt(0)==="^")w=w.slice(1);else break}return b&&w.charAt(0)!=="["?b+"."+w:b+w}},{}],522:[function(t,B,H){var d=t("./array").isArrayOrTypedArray,l=t("./is_plain_object");B.exports=function b(w,e){for(var o in e){var a=e[o],r=w[o];if(r!==a)if(o.charAt(0)==="_"||typeof a=="function"){if(o in w)continue;w[o]=a}else if(d(a)&&d(r)&&l(a[0])){if(o==="customdata"||o==="ids")continue;for(var n=Math.min(a.length,r.length),c=0;c<n;c++)r[c]!==a[c]&&l(a[c])&&l(r[c])&&b(r[c],a[c])}else l(a)&&l(r)&&(b(r,a),Object.keys(r).length||delete w[o])}}},{"./array":485,"./is_plain_object":504}],523:[function(t,B,H){var d=t("fast-isnumeric"),l=t("./loggers"),b=t("./identity"),w=t("../constants/numerical").BADNUM,e=1e-9;H.findBin=function(c,s,i){if(d(s.start))return i?Math.ceil((c-s.start)/s.size-e)-1:Math.floor((c-s.start)/s.size+e);var v=0,u=s.length,g=0,h=u>1?(s[u-1]-s[0])/(u-1):1,y,p;for(h>=0?p=i?o:a:p=i?n:r,c+=h*e*(i?-1:1)*(h>=0?1:-1);v<u&&g++<100;)y=Math.floor((v+u)/2),p(s[y],c)?v=y+1:u=y;return g>90&&l.log("Long binary search..."),v-1};function o(c,s){return c<s}function a(c,s){return c<=s}function r(c,s){return c>s}function n(c,s){return c>=s}H.sorterAsc=function(c,s){return c-s},H.sorterDes=function(c,s){return s-c},H.distinctVals=function(c){var s=c.slice();s.sort(H.sorterAsc);var i;for(i=s.length-1;i>-1&&s[i]===w;i--);for(var v=s[i]-s[0]||1,u=v/(i||1)/1e4,g=[],h,y=0;y<=i;y++){var p=s[y],A=p-h;h===void 0?(g.push(p),h=p):A>u&&(v=Math.min(v,A),g.push(p),h=p)}return{vals:g,minDiff:v}},H.roundUp=function(c,s,i){for(var v=0,u=s.length-1,g,h=0,y=i?0:1,p=i?1:0,A=i?Math.ceil:Math.floor;v<u&&h++<100;)g=A((v+u)/2),s[g]<=c?v=g+y:u=g-p;return s[v]},H.sort=function(c,s){for(var i=0,v=0,u=1;u<c.length;u++){var g=s(c[u],c[u-1]);if(g<0?i=1:g>0&&(v=1),i&&v)return c.sort(s)}return v?c:c.reverse()},H.findIndexOfMin=function(c,s){s=s||b;for(var i=1/0,v,u=0;u<c.length;u++){var g=s(c[u]);g<i&&(i=g,v=u)}return v}},{"../constants/numerical":479,"./identity":501,"./loggers":507,"fast-isnumeric":190}],524:[function(t,B,H){B.exports=function(l,b){(l.attr("class")||"").split(" ").forEach(function(w){w.indexOf("cursor-")===0&&l.classed(w,!1)}),b&&l.classed("cursor-"+b,!0)}},{}],525:[function(t,B,H){var d=t("../components/color"),l=function(){};B.exports=function(w){for(var e in w)typeof w[e]=="function"&&(w[e]=l);w.destroy=function(){w.container.parentNode.removeChild(w.container)};var o=document.createElement("div");o.className="no-webgl",o.style.cursor="pointer",o.style.fontSize="24px",o.style.color=d.defaults[0],o.style.position="absolute",o.style.left=o.style.top="0px",o.style.width=o.style.height="100%",o.style["background-color"]=d.lightLine,o.style["z-index"]=30;var a=document.createElement("p");return a.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",a.style.position="relative",a.style.top="50%",a.style.left="50%",a.style.height="30%",a.style.width="50%",a.style.margin="-15% 0 0 -25%",o.appendChild(a),w.container.appendChild(o),w.container.style.background="#FFFFFF",w.container.onclick=function(){window.open("https://get.webgl.org")},!1}},{"../components/color":366}],526:[function(t,B,H){B.exports=function(l){return Object.keys(l).sort()}},{}],527:[function(t,B,H){var d=t("fast-isnumeric"),l=t("./array").isArrayOrTypedArray;H.aggNums=function(b,w,e,o){var a,r;if((!o||o>e.length)&&(o=e.length),d(w)||(w=!1),l(e[0])){for(r=new Array(o),a=0;a<o;a++)r[a]=H.aggNums(b,w,e[a]);e=r}for(a=0;a<o;a++)d(w)?d(e[a])&&(w=b(+w,+e[a])):w=e[a];return w},H.len=function(b){return H.aggNums(function(w){return w+1},0,b)},H.mean=function(b,w){return w||(w=H.len(b)),H.aggNums(function(e,o){return e+o},0,b)/w},H.midRange=function(b){if(!(b===void 0||b.length===0))return(H.aggNums(Math.max,null,b)+H.aggNums(Math.min,null,b))/2},H.variance=function(b,w,e){return w||(w=H.len(b)),d(e)||(e=H.mean(b,w)),H.aggNums(function(o,a){return o+Math.pow(a-e,2)},0,b)/w},H.stdev=function(b,w,e){return Math.sqrt(H.variance(b,w,e))},H.median=function(b){var w=b.slice().sort();return H.interp(w,.5)},H.interp=function(b,w){if(!d(w))throw"n should be a finite number";if(w=w*b.length-.5,w<0)return b[0];if(w>b.length-1)return b[b.length-1];var e=w%1;return e*b[Math.ceil(w)]+(1-e)*b[Math.floor(w)]}},{"./array":485,"fast-isnumeric":190}],528:[function(t,B,H){var d=t("color-normalize");function l(b){return b?d(b):[0,0,0,1]}B.exports=l},{"color-normalize":89}],529:[function(t,B,H){var d=t("@plotly/d3"),l=t("../lib"),b=l.strTranslate,w=t("../constants/xmlns_namespaces"),e=t("../constants/alignment").LINE_SPACING,o=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;H.convertToTspans=function(F,G,W){var q=F.text(),J=!F.attr("data-notex")&&G&&G._context.typesetMath&&typeof MathJax!="undefined"&&q.match(o),X=d.select(F.node().parentNode);if(X.empty())return;var Z=F.attr("class")?F.attr("class").split(" ")[0]:"text";Z+="-math",X.selectAll("svg."+Z).remove(),X.selectAll("g."+Z+"-group").remove(),F.style("display",null).attr({"data-unformatted":q,"data-math":"N"});function se(){X.empty()||(Z=F.attr("class")+"-math",X.select("svg."+Z).remove()),F.text("").style("white-space","pre");var le=I(F.node(),q);le&&F.style("pointer-events","all"),H.positionText(F),W&&W.call(F)}return J?(G&&G._promises||[]).push(new Promise(function(le){F.style("display","none");var oe=parseInt(F.node().style.fontSize,10),U={fontSize:oe};s(J[2],U,function(V,re,ee){X.selectAll("svg."+Z).remove(),X.selectAll("g."+Z+"-group").remove();var j=V&&V.select("svg");if(!j||!j.node()){se(),le();return}var Q=X.append("g").classed(Z+"-group",!0).attr({"pointer-events":"none","data-unformatted":q,"data-math":"Y"});Q.node().appendChild(j.node()),re&&re.node()&&j.node().insertBefore(re.node().cloneNode(!0),j.node().firstChild);var ne=ee.width,ae=ee.height;j.attr({class:Z,height:ae,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var ie=F.node().style.fill||"black",ue=j.select("g");ue.attr({fill:ie,stroke:ie});var xe=ue.node().getBoundingClientRect(),he=xe.width,ge=xe.height;(he>ne||ge>ae)&&(j.style("overflow","hidden"),xe=j.node().getBoundingClientRect(),he=xe.width,ge=xe.height);var me=+F.attr("x"),ke=+F.attr("y"),Ae=oe||F.node().getBoundingClientRect().height,Ne=-Ae/4;if(Z[0]==="y")Q.attr({transform:"rotate("+[-90,me,ke]+")"+b(-he/2,Ne-ge/2)});else if(Z[0]==="l")ke=Ne-ge/2;else if(Z[0]==="a"&&Z.indexOf("atitle")!==0)me=0,ke=Ne;else{var He=F.attr("text-anchor");me=me-he*(He==="middle"?.5:He==="end"?1:0),ke=ke+Ne-ge/2}j.attr({x:me,y:ke}),W&&W.call(F,Q),le(Q)})})):se(),F};var a=/(<|&lt;|&#60;)/g,r=/(>|&gt;|&#62;)/g;function n(F){return F.replace(a,"\\lt ").replace(r,"\\gt ")}var c=[["$","$"],["\\(","\\)"]];function s(F,G,W){var q=parseInt((MathJax.version||"").split(".")[0]);if(q!==2&&q!==3){l.warn("No MathJax version:",MathJax.version);return}var J,X,Z,se,le=function(){return X=l.extendDeepAll({},MathJax.Hub.config),Z=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:c},displayAlign:"left"})},oe=function(){X=l.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=c},U=function(){if(J=MathJax.Hub.config.menuSettings.renderer,J!=="SVG")return MathJax.Hub.setRenderer("SVG")},V=function(){J=MathJax.config.startup.output,J!=="svg"&&(MathJax.config.startup.output="svg")},re=function(){var ie="math-output-"+l.randstr({},64);se=d.select("body").append("div").attr({id:ie}).style({visibility:"hidden",position:"absolute","font-size":G.fontSize+"px"}).text(n(F));var ue=se.node();return q===2?MathJax.Hub.Typeset(ue):MathJax.typeset([ue])},ee=function(){var ie=se.select(q===2?".MathJax_SVG":".MathJax"),ue=!ie.empty()&&se.select("svg").node();if(!ue)l.log("There was an error in the tex syntax.",F),W();else{var xe=ue.getBoundingClientRect(),he;q===2?he=d.select("body").select("#MathJax_SVG_glyphs"):he=ie.select("defs"),W(ie,he,xe)}se.remove()},j=function(){if(J!=="SVG")return MathJax.Hub.setRenderer(J)},Q=function(){J!=="svg"&&(MathJax.config.startup.output=J)},ne=function(){return Z!==void 0&&(MathJax.Hub.processSectionDelay=Z),MathJax.Hub.Config(X)},ae=function(){MathJax.config=X};q===2?MathJax.Hub.Queue(le,U,re,ee,j,ne):q===3&&(oe(),V(),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){re(),ee(),Q(),ae()}))}var i={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},v={sub:"0.3em",sup:"-0.6em"},u={sub:"-0.21em",sup:"0.42em"},g="\u200B",h=["http:","https:","mailto:","",void 0,":"],y=H.NEWLINES=/(\r\n?|\n)/g,p=/(<[^<>]*>)/,A=/<(\/?)([^ >]*)(\s+(.*))?>/i,m=/<br(\s+.*)?>/i;H.BR_TAG_ALL=/<br(\s+.*)?>/gi;var M=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,x=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,T=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,_=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function f(F,G){if(!F)return null;var W=F.match(G),q=W&&(W[3]||W[4]);return q&&P(q)}var L=/(^|;)\s*color:/;H.plainText=function(F,G){G=G||{};for(var W=G.len!==void 0&&G.len!==-1?G.len:1/0,q=G.allowedTags!==void 0?G.allowedTags:["br"],J="...",X=J.length,Z=F.split(p),se=[],le="",oe=0,U=0;U<Z.length;U++){var V=Z[U],re=V.match(A),ee=re&&re[2].toLowerCase();if(ee)q.indexOf(ee)!==-1&&(se.push(V),le=ee);else{var j=V.length;if(oe+j<W)se.push(V),oe+=j;else if(oe<W){var Q=W-oe;le&&(le!=="br"||Q<=X||j<=X)&&se.pop(),W>X?se.push(V.substr(0,Q-X)+J):se.push(V.substr(0,Q));break}le=""}}return se.join("")};var S={mu:"\u03BC",amp:"&",lt:"<",gt:">",nbsp:"\xA0",times:"\xD7",plusmn:"\xB1",deg:"\xB0"},k=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function P(F){return F.replace(k,function(G,W){var q;return W.charAt(0)==="#"?q=z(W.charAt(1)==="x"?parseInt(W.substr(2),16):parseInt(W.substr(1),10)):q=S[W],q||G})}H.convertEntities=P;function z(F){if(!(F>1114111)){var G=String.fromCodePoint;if(G)return G(F);var W=String.fromCharCode;return F<=65535?W(F):W((F>>10)+55232,F%1024+56320)}}function I(F,G){G=G.replace(y," ");var W=!1,q=[],J,X=-1;function Z(){X++;var ge=document.createElementNS(w.svg,"tspan");d.select(ge).attr({class:"line",dy:X*e+"em"}),F.appendChild(ge),J=ge;var me=q;if(q=[{node:ge}],me.length>1)for(var ke=1;ke<me.length;ke++)se(me[ke])}function se(ge){var me=ge.type,ke={},Ae;if(me==="a"){Ae="a";var Ne=ge.target,He=ge.href,Ge=ge.popup;He&&(ke={"xlink:xlink:show":Ne==="_blank"||Ne.charAt(0)!=="_"?"new":"replace",target:Ne,"xlink:xlink:href":He},Ge&&(ke.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Ge+'");return false;'))}else Ae="tspan";ge.style&&(ke.style=ge.style);var _e=document.createElementNS(w.svg,Ae);if(me==="sup"||me==="sub"){le(J,g),J.appendChild(_e);var De=document.createElementNS(w.svg,"tspan");le(De,g),d.select(De).attr("dy",u[me]),ke.dy=v[me],J.appendChild(_e),J.appendChild(De)}else J.appendChild(_e);d.select(_e).attr(ke),J=ge.node=_e,q.push(ge)}function le(ge,me){ge.appendChild(document.createTextNode(me))}function oe(ge){if(q.length===1){l.log("Ignoring unexpected end tag </"+ge+">.",G);return}var me=q.pop();ge!==me.type&&l.log("Start tag <"+me.type+"> doesnt match end tag <"+ge+">. Pretending it did match.",G),J=q[q.length-1].node}var U=m.test(G);U?Z():(J=F,q=[{node:F}]);for(var V=G.split(p),re=0;re<V.length;re++){var ee=V[re],j=ee.match(A),Q=j&&j[2].toLowerCase(),ne=i[Q];if(Q==="br")Z();else if(ne===void 0)le(J,P(ee));else if(j[1])oe(Q);else{var ae=j[4],ie={type:Q},ue=f(ae,M);if(ue?(ue=ue.replace(L,"$1 fill:"),ne&&(ue+=";"+ne)):ne&&(ue=ne),ue&&(ie.style=ue),Q==="a"){W=!0;var xe=f(ae,x);if(xe){var he=R(xe);he&&(ie.href=he,ie.target=f(ae,T)||"_blank",ie.popup=f(ae,_))}}se(ie)}}return W}function R(F){var G=encodeURI(decodeURI(F)),W=document.createElement("a"),q=document.createElement("a");W.href=F,q.href=G;var J=W.protocol,X=q.protocol;return h.indexOf(J)!==-1&&h.indexOf(X)!==-1?G:""}H.sanitizeHTML=function(G){G=G.replace(y," ");for(var W=document.createElement("p"),q=W,J=[],X=G.split(p),Z=0;Z<X.length;Z++){var se=X[Z],le=se.match(A),oe=le&&le[2].toLowerCase();if(oe in i)if(le[1])J.length&&(q=J.pop());else{var U=le[4],V=f(U,M),re=V?{style:V}:{};if(oe==="a"){var ee=f(U,x);if(ee){var j=R(ee);if(j){re.href=j;var Q=f(U,T);Q&&(re.target=Q)}}}var ne=document.createElement(oe);q.appendChild(ne),d.select(ne).attr(re),q=ne,J.push(ne)}else q.appendChild(document.createTextNode(P(se)))}var ae="innerHTML";return W[ae]},H.lineCount=function(G){return G.selectAll("tspan.line").size()||1},H.positionText=function(G,W,q){return G.each(function(){var J=d.select(this);function X(le,oe){return oe===void 0?(oe=J.attr(le),oe===null&&(J.attr(le,0),oe=0)):J.attr(le,oe),oe}var Z=X("x",W),se=X("y",q);this.nodeName==="text"&&J.selectAll("tspan.line").attr({x:Z,y:se})})};function D(F,G,W){var q=W.horizontalAlign,J=W.verticalAlign||"top",X=F.node().getBoundingClientRect(),Z=G.node().getBoundingClientRect(),se,le,oe;return J==="bottom"?le=function(){return X.bottom-se.height}:J==="middle"?le=function(){return X.top+(X.height-se.height)/2}:le=function(){return X.top},q==="right"?oe=function(){return X.right-se.width}:q==="center"?oe=function(){return X.left+(X.width-se.width)/2}:oe=function(){return X.left},function(){se=this.node().getBoundingClientRect();var U=oe()-Z.left,V=le()-Z.top,re=W.gd||{};if(W.gd){re._fullLayout._calcInverseTransform(re);var ee=l.apply3DTransform(re._fullLayout._invTransform)(U,V);U=ee[0],V=ee[1]}return this.style({top:V+"px",left:U+"px","z-index":1e3}),this}}var O="1px ";H.makeTextShadow=function(F){var G=O,W=O,q=O;return G+W+q+F+", -"+G+"-"+W+q+F+", "+G+"-"+W+q+F+", -"+G+W+q+F},H.makeEditable=function(F,G){var W=G.gd,q=G.delegate,J=d.dispatch("edit","input","cancel"),X=q||F;if(F.style({"pointer-events":q?"none":"all"}),F.size()!==1)throw new Error("boo");function Z(){le(),F.style({opacity:0});var oe=X.attr("class"),U;oe?U="."+oe.split(" ")[0]+"-math-group":U="[class*=-math-group]",U&&d.select(F.node().parentNode).select(U).style({opacity:0})}function se(oe){var U=oe.node(),V=document.createRange();V.selectNodeContents(U);var re=window.getSelection();re.removeAllRanges(),re.addRange(V),U.focus()}function le(){var oe=d.select(W),U=oe.select(".svg-container"),V=U.append("div"),re=F.node().style,ee=parseFloat(re.fontSize||12),j=G.text;j===void 0&&(j=F.attr("data-unformatted")),V.classed("plugin-editable editable",!0).style({position:"absolute","font-family":re.fontFamily||"Arial","font-size":ee,color:G.fill||re.fill||"black",opacity:1,"background-color":G.background||"transparent",outline:"#ffffff33 1px solid",margin:[-ee/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(j).call(D(F,U,G)).on("blur",function(){W._editing=!1,F.text(this.textContent).style({opacity:1});var Q=d.select(this).attr("class"),ne;Q?ne="."+Q.split(" ")[0]+"-math-group":ne="[class*=-math-group]",ne&&d.select(F.node().parentNode).select(ne).style({opacity:0});var ae=this.textContent;d.select(this).transition().duration(0).remove(),d.select(document).on("mouseup",null),J.edit.call(F,ae)}).on("focus",function(){var Q=this;W._editing=!0,d.select(document).on("mouseup",function(){if(d.event.target===Q)return!1;document.activeElement===V.node()&&V.node().blur()})}).on("keyup",function(){d.event.which===27?(W._editing=!1,F.style({opacity:1}),d.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),J.cancel.call(F,this.textContent)):(J.input.call(F,this.textContent),d.select(this).call(D(F,U,G)))}).on("keydown",function(){d.event.which===13&&this.blur()}).call(se)}return G.immediate?Z():X.on("click",Z),d.rebind(F,J,"on")}},{"../constants/alignment":471,"../constants/xmlns_namespaces":480,"../lib":503,"@plotly/d3":58}],530:[function(t,B,H){var d={};H.throttle=function(w,e,o){var a=d[w],r=Date.now();if(!a){for(var n in d)d[n].ts<r-6e4&&delete d[n];a=d[w]={ts:0,timer:null}}l(a);function c(){o(),a.ts=Date.now(),a.onDone&&(a.onDone(),a.onDone=null)}if(r>a.ts+e){c();return}a.timer=setTimeout(function(){c(),a.timer=null},e)},H.done=function(b){var w=d[b];return!w||!w.timer?Promise.resolve():new Promise(function(e){var o=w.onDone;w.onDone=function(){o&&o(),e(),w.onDone=null}})},H.clear=function(b){if(b)l(d[b]),delete d[b];else for(var w in d)H.clear(w)};function l(b){b&&b.timer!==null&&(clearTimeout(b.timer),b.timer=null)}},{}],531:[function(t,B,H){var d=t("fast-isnumeric");B.exports=function(b,w){if(b>0)return Math.log(b)/Math.LN10;var e=Math.log(Math.min(w[0],w[1]))/Math.LN10;return d(e)||(e=Math.log(Math.max(w[0],w[1]))/Math.LN10-6),e}},{"fast-isnumeric":190}],532:[function(t,B,H){var d=B.exports={},l=t("../plots/geo/constants").locationmodeToLayer,b=t("topojson-client").feature;d.getTopojsonName=function(w){return[w.scope.replace(/ /g,"-"),"_",w.resolution.toString(),"m"].join("")},d.getTopojsonPath=function(w,e){return w+e+".json"},d.getTopojsonFeatures=function(w,e){var o=l[w.locationmode],a=e.objects[o];return b(e,a).features}},{"../plots/geo/constants":587,"topojson-client":315}],533:[function(t,B,H){B.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],534:[function(t,B,H){B.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],535:[function(t,B,H){var d=t("../registry");B.exports=function(b){for(var w=d.layoutArrayContainers,e=d.layoutArrayRegexes,o=b.split("[")[0],a,r,n=0;n<e.length;n++)if(r=b.match(e[n]),r&&r.index===0){a=r[0];break}if(a||(a=w[w.indexOf(o)]),!a)return!1;var c=b.substr(a.length);return c?(r=c.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),r?{array:a,index:Number(r[1]),property:r[3]||""}:!1):{array:a,index:"",property:""}}},{"../registry":638}],536:[function(t,B,H){var d=t("../lib"),l=d.extendFlat,b=d.isPlainObject,w={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},e={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},o=w.flags.slice().concat(["fullReplot"]),a=e.flags.slice().concat("layoutReplot");B.exports={traces:w,layout:e,traceFlags:function(){return r(o)},layoutFlags:function(){return r(a)},update:function(s,i){var v=i.editType;if(v&&v!=="none")for(var u=v.split("+"),g=0;g<u.length;g++)s[u[g]]=!0},overrideAll:n};function r(s){for(var i={},v=0;v<s.length;v++)i[s[v]]=!1;return i}function n(s,i,v){var u=l({},s);for(var g in u){var h=u[g];b(h)&&(u[g]=c(h,i,v,g))}return v==="from-root"&&(u.editType=i),u}function c(s,i,v,u){if(s.valType){var g=l({},s);if(g.editType=i,Array.isArray(s.items)){g.items=new Array(s.items.length);for(var h=0;h<s.items.length;h++)g.items[h]=c(s.items[h],i)}return g}else return n(s,i,u.charAt(0)==="_"?"nested":"from-root")}},{"../lib":503}],537:[function(t,B,H){var d=t("fast-isnumeric"),l=t("gl-mat4/fromQuat"),b=t("../registry"),w=t("../lib"),e=t("../plots/plots"),o=t("../plots/cartesian/axis_ids"),a=t("../components/color"),r=o.cleanId,n=o.getFromTrace,c=b.traceIs;H.clearPromiseQueue=function(m){Array.isArray(m._promises)&&m._promises.length>0&&w.log("Clearing previous rejected promises from queue."),m._promises=[]},H.cleanLayout=function(m){var M,x;m||(m={}),m.xaxis1&&(m.xaxis||(m.xaxis=m.xaxis1),delete m.xaxis1),m.yaxis1&&(m.yaxis||(m.yaxis=m.yaxis1),delete m.yaxis1),m.scene1&&(m.scene||(m.scene=m.scene1),delete m.scene1);var T=(e.subplotsRegistry.cartesian||{}).attrRegex,_=(e.subplotsRegistry.polar||{}).attrRegex,f=(e.subplotsRegistry.ternary||{}).attrRegex,L=(e.subplotsRegistry.gl3d||{}).attrRegex,S=Object.keys(m);for(M=0;M<S.length;M++){var k=S[M];if(T&&T.test(k)){var P=m[k];P.anchor&&P.anchor!=="free"&&(P.anchor=r(P.anchor)),P.overlaying&&(P.overlaying=r(P.overlaying)),P.type||(P.isdate?P.type="date":P.islog?P.type="log":P.isdate===!1&&P.islog===!1&&(P.type="linear")),(P.autorange==="withzero"||P.autorange==="tozero")&&(P.autorange=!0,P.rangemode="tozero"),delete P.islog,delete P.isdate,delete P.categories,h(P,"domain")&&delete P.domain,P.autotick!==void 0&&(P.tickmode===void 0&&(P.tickmode=P.autotick?"auto":"linear"),delete P.autotick),i(P)}else if(_&&_.test(k)){var z=m[k];i(z.radialaxis)}else if(f&&f.test(k)){var I=m[k];i(I.aaxis),i(I.baxis),i(I.caxis)}else if(L&&L.test(k)){var R=m[k],D=R.cameraposition;if(Array.isArray(D)&&D[0].length===4){var O=D[0],F=D[1],G=D[2],W=l([],O),q=[];for(x=0;x<3;++x)q[x]=F[x]+G*W[2+4*x];R.camera={eye:{x:q[0],y:q[1],z:q[2]},center:{x:F[0],y:F[1],z:F[2]},up:{x:0,y:0,z:1}},delete R.cameraposition}i(R.xaxis),i(R.yaxis),i(R.zaxis)}}var J=Array.isArray(m.annotations)?m.annotations.length:0;for(M=0;M<J;M++){var X=m.annotations[M];!w.isPlainObject(X)||(X.ref&&(X.ref==="paper"?(X.xref="paper",X.yref="paper"):X.ref==="data"&&(X.xref="x",X.yref="y"),delete X.ref),s(X,"xref"),s(X,"yref"))}var Z=Array.isArray(m.shapes)?m.shapes.length:0;for(M=0;M<Z;M++){var se=m.shapes[M];!w.isPlainObject(se)||(s(se,"xref"),s(se,"yref"))}var le=Array.isArray(m.images)?m.images.length:0;for(M=0;M<le;M++){var oe=m.images[M];!w.isPlainObject(oe)||(s(oe,"xref"),s(oe,"yref"))}var U=m.legend;return U&&(U.x>3?(U.x=1.02,U.xanchor="left"):U.x<-2&&(U.x=-.02,U.xanchor="right"),U.y>3?(U.y=1.02,U.yanchor="bottom"):U.y<-2&&(U.y=-.02,U.yanchor="top")),i(m),m.dragmode==="rotate"&&(m.dragmode="orbit"),a.clean(m),m.template&&m.template.layout&&H.cleanLayout(m.template.layout),m};function s(m,M){var x=m[M],T=M.charAt(0);x&&x!=="paper"&&(m[M]=r(x,T,!0))}function i(m){m&&((typeof m.title=="string"||typeof m.title=="number")&&(m.title={text:m.title}),M("titlefont","font"),M("titleposition","position"),M("titleside","side"),M("titleoffset","offset"));function M(x,T){var _=m[x],f=m.title&&m.title[T];_&&!f&&(m.title||(m.title={}),m.title[T]=m[x],delete m[x])}}H.cleanData=function(m){for(var M=0;M<m.length;M++){var x=m[M],T;if(x.type==="histogramy"&&"xbins"in x&&!("ybins"in x)&&(x.ybins=x.xbins,delete x.xbins),x.error_y&&"opacity"in x.error_y){var _=a.defaults,f=x.error_y.color||(c(x,"bar")?a.defaultLine:_[M%_.length]);x.error_y.color=a.addOpacity(a.rgb(f),a.opacity(f)*x.error_y.opacity),delete x.error_y.opacity}if("bardir"in x&&(x.bardir==="h"&&(c(x,"bar")||x.type.substr(0,9)==="histogram")&&(x.orientation="h",H.swapXYData(x)),delete x.bardir),x.type==="histogramy"&&H.swapXYData(x),(x.type==="histogramx"||x.type==="histogramy")&&(x.type="histogram"),"scl"in x&&!("colorscale"in x)&&(x.colorscale=x.scl,delete x.scl),"reversescl"in x&&!("reversescale"in x)&&(x.reversescale=x.reversescl,delete x.reversescl),x.xaxis&&(x.xaxis=r(x.xaxis,"x")),x.yaxis&&(x.yaxis=r(x.yaxis,"y")),c(x,"gl3d")&&x.scene&&(x.scene=e.subplotsRegistry.gl3d.cleanId(x.scene)),!c(x,"pie-like")&&!c(x,"bar-like"))if(Array.isArray(x.textposition))for(T=0;T<x.textposition.length;T++)x.textposition[T]=g(x.textposition[T]);else x.textposition&&(x.textposition=g(x.textposition));var L=b.getModule(x);if(L&&L.colorbar){var S=L.colorbar.container,k=S?x[S]:x;k&&k.colorscale&&(k.colorscale==="YIGnBu"&&(k.colorscale="YlGnBu"),k.colorscale==="YIOrRd"&&(k.colorscale="YlOrRd"))}if(x.type==="surface"&&w.isPlainObject(x.contours)){var P=["x","y","z"];for(T=0;T<P.length;T++){var z=x.contours[P[T]];!w.isPlainObject(z)||(z.highlightColor&&(z.highlightcolor=z.highlightColor,delete z.highlightColor),z.highlightWidth&&(z.highlightwidth=z.highlightWidth,delete z.highlightWidth))}}if(x.type==="candlestick"||x.type==="ohlc"){var I=(x.increasing||{}).showlegend!==!1,R=(x.decreasing||{}).showlegend!==!1,D=v(x.increasing),O=v(x.decreasing);if(D!==!1&&O!==!1){var F=u(D,O,I,R);F&&(x.name=F)}else(D||O)&&!x.name&&(x.name=D||O)}if(Array.isArray(x.transforms)){var G=x.transforms;for(T=0;T<G.length;T++){var W=G[T];if(!!w.isPlainObject(W))switch(W.type){case"filter":W.filtersrc&&(W.target=W.filtersrc,delete W.filtersrc),W.calendar&&(W.valuecalendar||(W.valuecalendar=W.calendar),delete W.calendar);break;case"groupby":if(W.styles=W.styles||W.style,W.styles&&!Array.isArray(W.styles)){var q=W.styles,J=Object.keys(q);W.styles=[];for(var X=0;X<J.length;X++)W.styles.push({target:J[X],value:q[J[X]]})}break}}}h(x,"line")&&delete x.line,"marker"in x&&(h(x.marker,"line")&&delete x.marker.line,h(x,"marker")&&delete x.marker),a.clean(x),x.autobinx&&(delete x.autobinx,delete x.xbins),x.autobiny&&(delete x.autobiny,delete x.ybins),i(x),x.colorbar&&i(x.colorbar),x.marker&&x.marker.colorbar&&i(x.marker.colorbar),x.line&&x.line.colorbar&&i(x.line.colorbar),x.aaxis&&i(x.aaxis),x.baxis&&i(x.baxis)}};function v(m){if(!w.isPlainObject(m))return!1;var M=m.name;return delete m.name,delete m.showlegend,(typeof M=="string"||typeof M=="number")&&String(M)}function u(m,M,x,T){if(x&&!T)return m;if(T&&!x||!m.trim())return M;if(!M.trim())return m;var _=Math.min(m.length,M.length),f;for(f=0;f<_&&m.charAt(f)===M.charAt(f);f++);var L=m.substr(0,f);return L.trim()}function g(m){var M="middle",x="center";return typeof m=="string"&&(m.indexOf("top")!==-1?M="top":m.indexOf("bottom")!==-1&&(M="bottom"),m.indexOf("left")!==-1?x="left":m.indexOf("right")!==-1&&(x="right")),M+" "+x}function h(m,M){return M in m&&typeof m[M]=="object"&&Object.keys(m[M]).length===0}H.swapXYData=function(m){var M;if(w.swapAttrs(m,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(m.z)&&Array.isArray(m.z[0])&&(m.transpose?delete m.transpose:m.transpose=!0),m.error_x&&m.error_y){var x=m.error_y,T="copy_ystyle"in x?x.copy_ystyle:!(x.color||x.thickness||x.width);w.swapAttrs(m,["error_?.copy_ystyle"]),T&&w.swapAttrs(m,["error_?.color","error_?.thickness","error_?.width"])}if(typeof m.hoverinfo=="string"){var _=m.hoverinfo.split("+");for(M=0;M<_.length;M++)_[M]==="x"?_[M]="y":_[M]==="y"&&(_[M]="x");m.hoverinfo=_.join("+")}},H.coerceTraceIndices=function(m,M){if(d(M))return[M];if(!Array.isArray(M)||!M.length)return m.data.map(function(_,f){return f});if(Array.isArray(M)){for(var x=[],T=0;T<M.length;T++)w.isIndex(M[T],m.data.length)?x.push(M[T]):w.warn("trace index (",M[T],") is not a number or is out of bounds");return x}return M},H.manageArrayContainers=function(m,M,x){var T=m.obj,_=m.parts,f=_.length,L=_[f-1],S=d(L);if(S&&M===null){var k=_.slice(0,f-1).join("."),P=w.nestedProperty(T,k).get();P.splice(L,1)}else S&&m.get()===void 0&&m.get()===void 0&&(x[m.astr]=null),m.set(M)};var y=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function p(m){var M=m.search(y);if(M>0)return m.substr(0,M)}H.hasParent=function(m,M){for(var x=p(M);x;){if(x in m)return!0;x=p(x)}return!1};var A=["x","y","z"];H.clearAxisTypes=function(m,M,x){for(var T=0;T<M.length;T++)for(var _=m._fullData[T],f=0;f<3;f++){var L=n(m,_,A[f]);if(L&&L.type!=="log"){var S=L._name,k=L._id.substr(1);if(k.substr(0,5)==="scene"){if(x[k]!==void 0)continue;S=k+"."+S}var P=S+".type";x[S]===void 0&&x[P]===void 0&&w.nestedProperty(m.layout,P).set(null)}}}},{"../components/color":366,"../lib":503,"../plots/cartesian/axis_ids":558,"../plots/plots":619,"../registry":638,"fast-isnumeric":190,"gl-mat4/fromQuat":200}],538:[function(t,B,H){var d=t("./plot_api");H._doPlot=d._doPlot,H.newPlot=d.newPlot,H.restyle=d.restyle,H.relayout=d.relayout,H.redraw=d.redraw,H.update=d.update,H._guiRestyle=d._guiRestyle,H._guiRelayout=d._guiRelayout,H._guiUpdate=d._guiUpdate,H._storeDirectGUIEdit=d._storeDirectGUIEdit,H.react=d.react,H.extendTraces=d.extendTraces,H.prependTraces=d.prependTraces,H.addTraces=d.addTraces,H.deleteTraces=d.deleteTraces,H.moveTraces=d.moveTraces,H.purge=d.purge,H.addFrames=d.addFrames,H.deleteFrames=d.deleteFrames,H.animate=d.animate,H.setPlotConfig=d.setPlotConfig,H.toImage=t("./to_image"),H.validate=t("./validate"),H.downloadImage=t("../snapshot/download");var l=t("./template_api");H.makeTemplate=l.makeTemplate,H.validateTemplate=l.validateTemplate},{"../snapshot/download":640,"./plot_api":540,"./template_api":545,"./to_image":546,"./validate":547}],539:[function(t,B,H){var d=t("../lib/is_plain_object"),l=t("../lib/noop"),b=t("../lib/loggers"),w=t("../lib/search").sorterAsc,e=t("../registry");H.containerArrayMatch=t("./container_array_match");var o=H.isAddVal=function(n){return n==="add"||d(n)},a=H.isRemoveVal=function(n){return n===null||n==="remove"};H.applyContainerArrayChanges=function(n,c,s,i,v){var u=c.astr,g=e.getComponentMethod(u,"supplyLayoutDefaults"),h=e.getComponentMethod(u,"draw"),y=e.getComponentMethod(u,"drawOne"),p=i.replot||i.recalc||g===l||h===l,A=n.layout,m=n._fullLayout;if(s[""]){Object.keys(s).length>1&&b.warn("Full array edits are incompatible with other edits",u);var M=s[""][""];if(a(M))c.set(null);else if(Array.isArray(M))c.set(M);else return b.warn("Unrecognized full array edit value",u,M),!0;return p?!1:(g(A,m),h(n),!0)}var x=Object.keys(s).map(Number).sort(w),T=c.get(),_=T||[],f=v(m,u).get(),L=[],S=-1,k=_.length,P,z,I,R,D,O,F,G;for(P=0;P<x.length;P++){if(I=x[P],R=s[I],D=Object.keys(R),O=R[""],F=o(O),I<0||I>_.length-(F?0:1)){b.warn("index out of range",u,I);continue}if(O!==void 0)D.length>1&&b.warn("Insertion & removal are incompatible with edits to the same index.",u,I),a(O)?L.push(I):F?(O==="add"&&(O={}),_.splice(I,0,O),f&&f.splice(I,0,{})):b.warn("Unrecognized full object edit value",u,I,O),S===-1&&(S=I);else for(z=0;z<D.length;z++)G=u+"["+I+"].",v(_[I],D[z],G).set(R[D[z]])}for(P=L.length-1;P>=0;P--)_.splice(L[P],1),f&&f.splice(L[P],1);if(_.length?T||c.set(_):c.set(null),p)return!1;if(g(A,m),y!==l){var W;if(S===-1)W=x;else{for(k=Math.max(_.length,k),W=[],P=0;P<x.length&&(I=x[P],!(I>=S));P++)W.push(I);for(P=S;P<k;P++)W.push(P)}for(P=0;P<W.length;P++)y(n,W[P])}else h(n);return!0}},{"../lib/is_plain_object":504,"../lib/loggers":507,"../lib/noop":512,"../lib/search":523,"../registry":638,"./container_array_match":535}],540:[function(t,B,H){var d=t("@plotly/d3"),l=t("fast-isnumeric"),b=t("has-hover"),w=t("../lib"),e=w.nestedProperty,o=t("../lib/events"),a=t("../lib/queue"),r=t("../registry"),n=t("./plot_schema"),c=t("../plots/plots"),s=t("../plots/cartesian/axes"),i=t("../components/drawing"),v=t("../components/color"),u=t("../plots/cartesian/graph_interact").initInteractions,g=t("../constants/xmlns_namespaces"),h=t("../plots/cartesian/select").clearSelect,y=t("./plot_config").dfltConfig,p=t("./manage_arrays"),A=t("./helpers"),m=t("./subroutines"),M=t("./edit_types"),x=t("../plots/cartesian/constants").AX_NAME_PATTERN,T=0,_=5;function f(Ce,je,rt,ut){var Pt;if(Ce=w.getGraphDiv(Ce),o.init(Ce),w.isPlainObject(je)){var Tt=je;je=Tt.data,rt=Tt.layout,ut=Tt.config,Pt=Tt.frames}var Ot=o.triggerHandler(Ce,"plotly_beforeplot",[je,rt,ut]);if(Ot===!1)return Promise.reject();!je&&!rt&&!w.isPlotDiv(Ce)&&w.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",Ce);function Kt(){if(Pt)return H.addFrames(Ce,Pt)}z(Ce,ut),rt||(rt={}),d.select(Ce).classed("js-plotly-plot",!0),i.makeTester(),Array.isArray(Ce._promises)||(Ce._promises=[]);var Bt=(Ce.data||[]).length===0&&Array.isArray(je);Array.isArray(je)&&(A.cleanData(je),Bt?Ce.data=je:Ce.data.push.apply(Ce.data,je),Ce.empty=!1),(!Ce.layout||Bt)&&(Ce.layout=A.cleanLayout(rt)),c.supplyDefaults(Ce);var Zt=Ce._fullLayout,Je=Zt._has("cartesian");Zt._replotting=!0,(Bt||Zt._shouldCreateBgLayer)&&(Qe(Ce),Zt._shouldCreateBgLayer&&delete Zt._shouldCreateBgLayer),i.initGradients(Ce),i.initPatterns(Ce),Bt&&s.saveShowSpikeInitial(Ce);var pt=!Ce.calcdata||Ce.calcdata.length!==(Ce._fullData||[]).length;pt&&c.doCalcdata(Ce);for(var Et=0;Et<Ce.calcdata.length;Et++)Ce.calcdata[Et][0].trace=Ce._fullData[Et];Ce._context.responsive?Ce._responsiveChartHandler||(Ce._responsiveChartHandler=function(){w.isHidden(Ce)||c.resize(Ce)},window.addEventListener("resize",Ce._responsiveChartHandler)):w.clearResponsive(Ce);var ar=w.extendFlat({},Zt._size),vr=0;function ir(){for(var Re=Zt._basePlotModules,Xe=0;Xe<Re.length;Xe++)Re[Xe].drawFramework&&Re[Xe].drawFramework(Ce);!Zt._glcanvas&&Zt._has("gl")&&(Zt._glcanvas=Zt._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(yt){return yt.key}),Zt._glcanvas.enter().append("canvas").attr("class",function(yt){return"gl-canvas gl-canvas-"+yt.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var $e=Ce._context.plotGlPixelRatio;if(Zt._glcanvas){Zt._glcanvas.attr("width",Zt.width*$e).attr("height",Zt.height*$e).style("width",Zt.width+"px").style("height",Zt.height+"px");var ot=Zt._glcanvas.data()[0].regl;if(ot&&(Math.floor(Zt.width*$e)!==ot._gl.drawingBufferWidth||Math.floor(Zt.height*$e)!==ot._gl.drawingBufferHeight)){var st="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(vr)w.error(st);else return w.log(st+" Clearing graph and plotting again."),c.cleanPlot([],{},Ce._fullData,Zt),c.supplyDefaults(Ce),Zt=Ce._fullLayout,c.doCalcdata(Ce),vr++,ir()}}return Zt.modebar.orientation==="h"?Zt._modebardiv.style("height",null).style("width","100%"):Zt._modebardiv.style("width",null).style("height",Zt.height+"px"),c.previousPromises(Ce)}function dr(){if(c.clearAutoMarginIds(Ce),m.drawMarginPushers(Ce),s.allowAutoMargin(Ce),Zt._has("pie"))for(var Re=Ce._fullData,Xe=0;Xe<Re.length;Xe++){var $e=Re[Xe];$e.type==="pie"&&$e.automargin&&c.allowAutoMargin(Ce,"pie."+$e.uid+".automargin")}return c.doAutoMargin(Ce),c.previousPromises(Ce)}function Pr(){if(!!c.didMarginChange(ar,Zt._size))return w.syncOrAsync([dr,m.layoutStyles],Ce)}function Sr(){if(!pt){tr();return}return w.syncOrAsync([r.getComponentMethod("shapes","calcAutorange"),r.getComponentMethod("annotations","calcAutorange"),tr],Ce)}function tr(){Ce._transitioning||(m.doAutoRangeAndConstraints(Ce),Bt&&s.saveRangeInitial(Ce),r.getComponentMethod("rangeslider","calcAutorange")(Ce))}function Nr(){return s.draw(Ce,Bt?"":"redraw")}var et=[c.previousPromises,Kt,ir,dr,Pr];Je&&et.push(Sr),et.push(m.layoutStyles),Je&&et.push(Nr,function(Xe){Xe._fullLayout._insideTickLabelsAutorange&&ie(Xe,Xe._fullLayout._insideTickLabelsAutorange).then(function(){Xe._fullLayout._insideTickLabelsAutorange=void 0})}),et.push(m.drawData,m.finalDraw,u,c.addLinks,c.rehover,c.redrag,c.doAutoMargin,we,c.previousPromises);function we(Re){Re._fullLayout._insideTickLabelsAutorange&&Bt&&s.saveRangeInitial(Re,!0)}var Me=w.syncOrAsync(et,Ce);return(!Me||!Me.then)&&(Me=Promise.resolve()),Me.then(function(){return L(Ce),Ce})}function L(Ce){var je=Ce._fullLayout;je._redrawFromAutoMarginCount?je._redrawFromAutoMarginCount--:Ce.emit("plotly_afterplot")}function S(Ce){return w.extendFlat(y,Ce)}function k(Ce,je){try{Ce._fullLayout._paper.style("background",je)}catch(rt){w.error(rt)}}function P(Ce,je){var rt=v.combine(je,"white");k(Ce,rt)}function z(Ce,je){if(!Ce._context){Ce._context=w.extendDeep({},y);var rt=d.select("base");Ce._context._baseUrl=rt.size()&&rt.attr("href")?window.location.href.split("#")[0]:""}var ut=Ce._context,Pt,Tt,Ot;if(je){for(Tt=Object.keys(je),Pt=0;Pt<Tt.length;Pt++)Ot=Tt[Pt],!(Ot==="editable"||Ot==="edits")&&Ot in ut&&(Ot==="setBackground"&&je[Ot]==="opaque"?ut[Ot]=P:ut[Ot]=je[Ot]);je.plot3dPixelRatio&&!ut.plotGlPixelRatio&&(ut.plotGlPixelRatio=ut.plot3dPixelRatio);var Kt=je.editable;if(Kt!==void 0)for(ut.editable=Kt,Tt=Object.keys(ut.edits),Pt=0;Pt<Tt.length;Pt++)ut.edits[Tt[Pt]]=Kt;if(je.edits)for(Tt=Object.keys(je.edits),Pt=0;Pt<Tt.length;Pt++)Ot=Tt[Pt],Ot in ut.edits&&(ut.edits[Ot]=je.edits[Ot]);ut._exportedPlot=je._exportedPlot}ut.staticPlot&&(ut.editable=!1,ut.edits={},ut.autosizable=!1,ut.scrollZoom=!1,ut.doubleClick=!1,ut.showTips=!1,ut.showLink=!1,ut.displayModeBar=!1),ut.displayModeBar==="hover"&&!b&&(ut.displayModeBar=!0),(ut.setBackground==="transparent"||typeof ut.setBackground!="function")&&(ut.setBackground=k),ut._hasZeroHeight=ut._hasZeroHeight||Ce.clientHeight===0,ut._hasZeroWidth=ut._hasZeroWidth||Ce.clientWidth===0;var Bt=ut.scrollZoom,Zt=ut._scrollZoom={};if(Bt===!0)Zt.cartesian=1,Zt.gl3d=1,Zt.geo=1,Zt.mapbox=1;else if(typeof Bt=="string"){var Je=Bt.split("+");for(Pt=0;Pt<Je.length;Pt++)Zt[Je[Pt]]=1}else Bt!==!1&&(Zt.gl3d=1,Zt.geo=1,Zt.mapbox=1)}function I(Ce){if(Ce=w.getGraphDiv(Ce),!w.isPlotDiv(Ce))throw new Error("This element is not a Plotly plot: "+Ce);return A.cleanData(Ce.data),A.cleanLayout(Ce.layout),Ce.calcdata=void 0,H._doPlot(Ce).then(function(){return Ce.emit("plotly_redraw"),Ce})}function R(Ce,je,rt,ut){return Ce=w.getGraphDiv(Ce),c.cleanPlot([],{},Ce._fullData||[],Ce._fullLayout||{}),c.purge(Ce),H._doPlot(Ce,je,rt,ut)}function D(Ce,je){var rt=je+1,ut=[],Pt,Tt;for(Pt=0;Pt<Ce.length;Pt++)Tt=Ce[Pt],Tt<0?ut.push(rt+Tt):ut.push(Tt);return ut}function O(Ce,je,rt){var ut,Pt;for(ut=0;ut<je.length;ut++){if(Pt=je[ut],Pt!==parseInt(Pt,10))throw new Error("all values in "+rt+" must be integers");if(Pt>=Ce.data.length||Pt<-Ce.data.length)throw new Error(rt+" must be valid indices for gd.data.");if(je.indexOf(Pt,ut+1)>-1||Pt>=0&&je.indexOf(-Ce.data.length+Pt)>-1||Pt<0&&je.indexOf(Ce.data.length+Pt)>-1)throw new Error("each index in "+rt+" must be unique.")}}function F(Ce,je,rt){if(!Array.isArray(Ce.data))throw new Error("gd.data must be an array.");if(typeof je=="undefined")throw new Error("currentIndices is a required argument.");if(Array.isArray(je)||(je=[je]),O(Ce,je,"currentIndices"),typeof rt!="undefined"&&!Array.isArray(rt)&&(rt=[rt]),typeof rt!="undefined"&&O(Ce,rt,"newIndices"),typeof rt!="undefined"&&je.length!==rt.length)throw new Error("current and new indices must be of equal length.")}function G(Ce,je,rt){var ut,Pt;if(!Array.isArray(Ce.data))throw new Error("gd.data must be an array.");if(typeof je=="undefined")throw new Error("traces must be defined.");for(Array.isArray(je)||(je=[je]),ut=0;ut<je.length;ut++)if(Pt=je[ut],typeof Pt!="object"||Array.isArray(Pt)||Pt===null)throw new Error("all values in traces array must be non-array objects");if(typeof rt!="undefined"&&!Array.isArray(rt)&&(rt=[rt]),typeof rt!="undefined"&&rt.length!==je.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function W(Ce,je,rt,ut){var Pt=w.isPlainObject(ut);if(!Array.isArray(Ce.data))throw new Error("gd.data must be an array");if(!w.isPlainObject(je))throw new Error("update must be a key:value object");if(typeof rt=="undefined")throw new Error("indices must be an integer or array of integers");O(Ce,rt,"indices");for(var Tt in je){if(!Array.isArray(je[Tt])||je[Tt].length!==rt.length)throw new Error("attribute "+Tt+" must be an array of length equal to indices array length");if(Pt&&(!(Tt in ut)||!Array.isArray(ut[Tt])||ut[Tt].length!==je[Tt].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function q(Ce,je,rt,ut){var Pt=w.isPlainObject(ut),Tt=[],Ot,Kt,Bt,Zt,Je;Array.isArray(rt)||(rt=[rt]),rt=D(rt,Ce.data.length-1);for(var pt in je)for(var Et=0;Et<rt.length;Et++){if(Ot=Ce.data[rt[Et]],Bt=e(Ot,pt),Kt=Bt.get(),Zt=je[pt][Et],!w.isArrayOrTypedArray(Zt))throw new Error("attribute: "+pt+" index: "+Et+" must be an array");if(!w.isArrayOrTypedArray(Kt))throw new Error("cannot extend missing or non-array attribute: "+pt);if(Kt.constructor!==Zt.constructor)throw new Error("cannot extend array with an array of a different type: "+pt);Je=Pt?ut[pt][Et]:ut,l(Je)||(Je=-1),Tt.push({prop:Bt,target:Kt,insert:Zt,maxp:Math.floor(Je)})}return Tt}function J(Ce,je,rt,ut,Pt){W(Ce,je,rt,ut);for(var Tt=q(Ce,je,rt,ut),Ot={},Kt={},Bt=0;Bt<Tt.length;Bt++){var Zt=Tt[Bt].prop,Je=Tt[Bt].maxp,pt=Pt(Tt[Bt].target,Tt[Bt].insert,Je);Zt.set(pt[0]),Array.isArray(Ot[Zt.astr])||(Ot[Zt.astr]=[]),Ot[Zt.astr].push(pt[1]),Array.isArray(Kt[Zt.astr])||(Kt[Zt.astr]=[]),Kt[Zt.astr].push(Tt[Bt].target.length)}return{update:Ot,maxPoints:Kt}}function X(Ce,je){var rt=new Ce.constructor(Ce.length+je.length);return rt.set(Ce),rt.set(je,Ce.length),rt}function Z(Ce,je,rt,ut){Ce=w.getGraphDiv(Ce);function Pt(Bt,Zt,Je){var pt,Et;if(w.isTypedArray(Bt))if(Je<0){var ar=new Bt.constructor(0),vr=X(Bt,Zt);Je<0?(pt=vr,Et=ar):(pt=ar,Et=vr)}else if(pt=new Bt.constructor(Je),Et=new Bt.constructor(Bt.length+Zt.length-Je),Je===Zt.length)pt.set(Zt),Et.set(Bt);else if(Je<Zt.length){var ir=Zt.length-Je;pt.set(Zt.subarray(ir)),Et.set(Bt),Et.set(Zt.subarray(0,ir),Bt.length)}else{var dr=Je-Zt.length,Pr=Bt.length-dr;pt.set(Bt.subarray(Pr)),pt.set(Zt,dr),Et.set(Bt.subarray(0,Pr))}else pt=Bt.concat(Zt),Et=Je>=0&&Je<pt.length?pt.splice(0,pt.length-Je):[];return[pt,Et]}var Tt=J(Ce,je,rt,ut,Pt),Ot=H.redraw(Ce),Kt=[Ce,Tt.update,rt,Tt.maxPoints];return a.add(Ce,H.prependTraces,Kt,Z,arguments),Ot}function se(Ce,je,rt,ut){Ce=w.getGraphDiv(Ce);function Pt(Bt,Zt,Je){var pt,Et;if(w.isTypedArray(Bt))if(Je<=0){var ar=new Bt.constructor(0),vr=X(Zt,Bt);Je<0?(pt=vr,Et=ar):(pt=ar,Et=vr)}else if(pt=new Bt.constructor(Je),Et=new Bt.constructor(Bt.length+Zt.length-Je),Je===Zt.length)pt.set(Zt),Et.set(Bt);else if(Je<Zt.length){var ir=Zt.length-Je;pt.set(Zt.subarray(0,ir)),Et.set(Zt.subarray(ir)),Et.set(Bt,ir)}else{var dr=Je-Zt.length;pt.set(Zt),pt.set(Bt.subarray(0,dr),Zt.length),Et.set(Bt.subarray(dr))}else pt=Zt.concat(Bt),Et=Je>=0&&Je<pt.length?pt.splice(Je,pt.length):[];return[pt,Et]}var Tt=J(Ce,je,rt,ut,Pt),Ot=H.redraw(Ce),Kt=[Ce,Tt.update,rt,Tt.maxPoints];return a.add(Ce,H.extendTraces,Kt,se,arguments),Ot}function le(Ce,je,rt){Ce=w.getGraphDiv(Ce);var ut=[],Pt=H.deleteTraces,Tt=le,Ot=[Ce,ut],Kt=[Ce,je],Bt,Zt;for(G(Ce,je,rt),Array.isArray(je)||(je=[je]),je=je.map(function(Je){return w.extendFlat({},Je)}),A.cleanData(je),Bt=0;Bt<je.length;Bt++)Ce.data.push(je[Bt]);for(Bt=0;Bt<je.length;Bt++)ut.push(-je.length+Bt);if(typeof rt=="undefined")return Zt=H.redraw(Ce),a.add(Ce,Pt,Ot,Tt,Kt),Zt;Array.isArray(rt)||(rt=[rt]);try{F(Ce,ut,rt)}catch(Je){throw Ce.data.splice(Ce.data.length-je.length,je.length),Je}return a.startSequence(Ce),a.add(Ce,Pt,Ot,Tt,Kt),Zt=H.moveTraces(Ce,ut,rt),a.stopSequence(Ce),Zt}function oe(Ce,je){Ce=w.getGraphDiv(Ce);var rt=[],ut=H.addTraces,Pt=oe,Tt=[Ce,rt,je],Ot=[Ce,je],Kt,Bt;if(typeof je=="undefined")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(je)||(je=[je]),O(Ce,je,"indices"),je=D(je,Ce.data.length-1),je.sort(w.sorterDes),Kt=0;Kt<je.length;Kt+=1)Bt=Ce.data.splice(je[Kt],1)[0],rt.push(Bt);var Zt=H.redraw(Ce);return a.add(Ce,ut,Tt,Pt,Ot),Zt}function U(Ce,je,rt){Ce=w.getGraphDiv(Ce);var ut=[],Pt=[],Tt=U,Ot=U,Kt=[Ce,rt,je],Bt=[Ce,je,rt],Zt;if(F(Ce,je,rt),je=Array.isArray(je)?je:[je],typeof rt=="undefined")for(rt=[],Zt=0;Zt<je.length;Zt++)rt.push(-je.length+Zt);for(rt=Array.isArray(rt)?rt:[rt],je=D(je,Ce.data.length-1),rt=D(rt,Ce.data.length-1),Zt=0;Zt<Ce.data.length;Zt++)je.indexOf(Zt)===-1&&ut.push(Ce.data[Zt]);for(Zt=0;Zt<je.length;Zt++)Pt.push({newIndex:rt[Zt],trace:Ce.data[je[Zt]]});for(Pt.sort(function(pt,Et){return pt.newIndex-Et.newIndex}),Zt=0;Zt<Pt.length;Zt+=1)ut.splice(Pt[Zt].newIndex,0,Pt[Zt].trace);Ce.data=ut;var Je=H.redraw(Ce);return a.add(Ce,Tt,Kt,Ot,Bt),Je}function V(Ce,je,rt,ut){Ce=w.getGraphDiv(Ce),A.clearPromiseQueue(Ce);var Pt={};if(typeof je=="string")Pt[je]=rt;else if(w.isPlainObject(je))Pt=w.extendFlat({},je),ut===void 0&&(ut=rt);else return w.warn("Restyle fail.",je,rt,ut),Promise.reject();Object.keys(Pt).length&&(Ce.changed=!0);var Tt=A.coerceTraceIndices(Ce,ut),Ot=ne(Ce,Pt,Tt),Kt=Ot.flags;Kt.calc&&(Ce.calcdata=void 0),Kt.clearAxisTypes&&A.clearAxisTypes(Ce,Tt,{});var Bt=[];Kt.fullReplot?Bt.push(H._doPlot):(Bt.push(c.previousPromises),c.supplyDefaults(Ce),Kt.markerSize&&(c.doCalcdata(Ce),xe(Bt)),Kt.style&&Bt.push(m.doTraceStyle),Kt.colorbars&&Bt.push(m.doColorBars),Bt.push(L)),Bt.push(c.rehover,c.redrag),a.add(Ce,V,[Ce,Ot.undoit,Ot.traces],V,[Ce,Ot.redoit,Ot.traces]);var Zt=w.syncOrAsync(Bt,Ce);return(!Zt||!Zt.then)&&(Zt=Promise.resolve()),Zt.then(function(){return Ce.emit("plotly_restyle",Ot.eventData),Ce})}function re(Ce){return Ce===void 0?null:Ce}function ee(Ce,je){return je?function(rt,ut,Pt){var Tt=e(rt,ut),Ot=Tt.set;return Tt.set=function(Kt){var Bt=(Pt||"")+ut;j(Bt,Tt.get(),Kt,Ce),Ot(Kt)},Tt}:e}function j(Ce,je,rt,ut){if(Array.isArray(je)||Array.isArray(rt))for(var Pt=Array.isArray(je)?je:[],Tt=Array.isArray(rt)?rt:[],Ot=Math.max(Pt.length,Tt.length),Kt=0;Kt<Ot;Kt++)j(Ce+"["+Kt+"]",Pt[Kt],Tt[Kt],ut);else if(w.isPlainObject(je)||w.isPlainObject(rt)){var Bt=w.isPlainObject(je)?je:{},Zt=w.isPlainObject(rt)?rt:{},Je=w.extendFlat({},Bt,Zt);for(var pt in Je)j(Ce+"."+pt,Bt[pt],Zt[pt],ut)}else ut[Ce]===void 0&&(ut[Ce]=re(je))}function Q(Ce,je,rt){for(var ut in rt){var Pt=e(Ce,ut);j(ut,Pt.get(),rt[ut],je)}}function ne(Ce,je,rt){var ut=Ce._fullLayout,Pt=Ce._fullData,Tt=Ce.data,Ot=ut._guiEditing,Kt=ee(ut._preGUI,Ot),Bt=w.extendDeepAll({},je),Zt;ae(je);var Je=M.traceFlags(),pt={},Et={},ar;function vr(){return rt.map(function(){})}function ir(er){var hr=s.id2name(er);ar.indexOf(hr)===-1&&ar.push(hr)}function dr(er){return"LAYOUT"+er+".autorange"}function Pr(er){return"LAYOUT"+er+".range"}function Sr(er){for(var hr=er;hr<Pt.length;hr++)if(Pt[hr]._input===Tt[er])return Pt[hr]}function tr(er,hr,Vr){if(Array.isArray(er)){er.forEach(function(Wr){tr(Wr,hr,Vr)});return}if(!(er in je||A.hasParent(je,er))){var Rr;if(er.substr(0,6)==="LAYOUT")Rr=Kt(Ce.layout,er.replace("LAYOUT",""));else{var Er=rt[Vr],xr=ut._tracePreGUI[Sr(Er)._fullInput.uid];Rr=ee(xr,Ot)(Tt[Er],er)}er in Et||(Et[er]=vr()),Et[er][Vr]===void 0&&(Et[er][Vr]=re(Rr.get())),hr!==void 0&&Rr.set(hr)}}function Nr(er){return function(hr){return Pt[hr][er]}}function et(er){return function(hr,Vr){return hr===!1?Pt[rt[Vr]][er]:null}}for(var we in je){if(A.hasParent(je,we))throw new Error("cannot set "+we+" and a parent attribute simultaneously");var Me=je[we],Re,Xe,$e,ot,st,yt;if((we==="autobinx"||we==="autobiny")&&(we=we.charAt(we.length-1)+"bins",Array.isArray(Me)?Me=Me.map(et(we)):Me===!1?Me=rt.map(Nr(we)):Me=null),pt[we]=Me,we.substr(0,6)==="LAYOUT"){$e=Kt(Ce.layout,we.replace("LAYOUT","")),Et[we]=[re($e.get())],$e.set(Array.isArray(Me)?Me[0]:Me),Je.calc=!0;continue}for(Et[we]=vr(),Zt=0;Zt<rt.length;Zt++){Re=Tt[rt[Zt]],Xe=Sr(rt[Zt]);var wt=ut._tracePreGUI[Xe._fullInput.uid];if($e=ee(wt,Ot)(Re,we),ot=$e.get(),st=Array.isArray(Me)?Me[Zt%Me.length]:Me,st!==void 0){var Vt=$e.parts[$e.parts.length-1],gr=we.substr(0,we.length-Vt.length-1),wr=gr?gr+".":"",Lr=gr?e(Xe,gr).get():Xe;if(yt=n.getTraceValObject(Xe,$e.parts),yt&&yt.impliedEdits&&st!==null)for(var fr in yt.impliedEdits)tr(w.relativeAttr(we,fr),yt.impliedEdits[fr],Zt);else if((Vt==="thicknessmode"||Vt==="lenmode")&&ot!==st&&(st==="fraction"||st==="pixels")&&Lr){var Fr=ut._size,nn=Lr.orient,yr=nn==="top"||nn==="bottom";if(Vt==="thicknessmode"){var _r=yr?Fr.h:Fr.w;tr(wr+"thickness",Lr.thickness*(st==="fraction"?1/_r:_r),Zt)}else{var dn=yr?Fr.w:Fr.h;tr(wr+"len",Lr.len*(st==="fraction"?1/dn:dn),Zt)}}else if(we==="type"&&(st==="pie"!=(ot==="pie")||st==="funnelarea"!=(ot==="funnelarea"))){var Yr="x",Ar="y";(st==="bar"||ot==="bar")&&Re.orientation==="h"&&(Yr="y",Ar="x"),w.swapAttrs(Re,["?","?src"],"labels",Yr),w.swapAttrs(Re,["d?","?0"],"label",Yr),w.swapAttrs(Re,["?","?src"],"values",Ar),ot==="pie"||ot==="funnelarea"?(e(Re,"marker.color").set(e(Re,"marker.colors").get()),ut._pielayer.selectAll("g.trace").remove()):r.traceIs(Re,"cartesian")&&e(Re,"marker.colors").set(e(Re,"marker.color").get())}Et[we][Zt]=re(ot);var an=["swapxy","swapxyaxes","orientation","orientationaxes"];if(an.indexOf(we)!==-1){if(we==="orientation"){$e.set(st);var rn=Re.x&&!Re.y?"h":"v";if(($e.get()||rn)===Xe.orientation)continue}else we==="orientationaxes"&&(Re.orientation={v:"h",h:"v"}[Xe.orientation]);A.swapXYData(Re),Je.calc=Je.clearAxisTypes=!0}else c.dataArrayContainers.indexOf($e.parts[0])!==-1?(A.manageArrayContainers($e,st,Et),Je.calc=!0):(yt?yt.arrayOk&&!r.traceIs(Xe,"regl")&&(w.isArrayOrTypedArray(st)||w.isArrayOrTypedArray(ot))?Je.calc=!0:M.update(Je,yt):Je.calc=!0,$e.set(st))}}if(["swapxyaxes","orientationaxes"].indexOf(we)!==-1&&s.swap(Ce,rt),we==="orientationaxes"){var Zr=e(Ce.layout,"hovermode"),at=Zr.get();at==="x"?Zr.set("y"):at==="y"?Zr.set("x"):at==="x unified"?Zr.set("y unified"):at==="y unified"&&Zr.set("x unified")}if(["orientation","type"].indexOf(we)!==-1){for(ar=[],Zt=0;Zt<rt.length;Zt++){var zt=Tt[rt[Zt]];r.traceIs(zt,"cartesian")&&(ir(zt.xaxis||"x"),ir(zt.yaxis||"y"))}tr(ar.map(dr),!0,0),tr(ar.map(Pr),[0,1],0)}}return(Je.calc||Je.plot)&&(Je.fullReplot=!0),{flags:Je,undoit:Et,redoit:pt,traces:rt,eventData:w.extendDeepNoArrays([],[Bt,rt])}}function ae(Ce){var je=w.counterRegex("axis",".title",!1,!1),rt=/colorbar\.title$/,ut=Object.keys(Ce),Pt,Tt,Ot;for(Pt=0;Pt<ut.length;Pt++)Tt=ut[Pt],Ot=Ce[Tt],(Tt==="title"||je.test(Tt)||rt.test(Tt))&&(typeof Ot=="string"||typeof Ot=="number")?Kt(Tt,Tt.replace("title","title.text")):Tt.indexOf("titlefont")>-1&&Tt.indexOf("grouptitlefont")===-1?Kt(Tt,Tt.replace("titlefont","title.font")):Tt.indexOf("titleposition")>-1?Kt(Tt,Tt.replace("titleposition","title.position")):Tt.indexOf("titleside")>-1?Kt(Tt,Tt.replace("titleside","title.side")):Tt.indexOf("titleoffset")>-1&&Kt(Tt,Tt.replace("titleoffset","title.offset"));function Kt(Bt,Zt){Ce[Zt]=Ce[Bt],delete Ce[Bt]}}function ie(Ce,je,rt){Ce=w.getGraphDiv(Ce),A.clearPromiseQueue(Ce);var ut={};if(typeof je=="string")ut[je]=rt;else if(w.isPlainObject(je))ut=w.extendFlat({},je);else return w.warn("Relayout fail.",je,rt),Promise.reject();Object.keys(ut).length&&(Ce.changed=!0);var Pt=ke(Ce,ut),Tt=Pt.flags;Tt.calc&&(Ce.calcdata=void 0);var Ot=[c.previousPromises];Tt.layoutReplot?Ot.push(m.layoutReplot):Object.keys(ut).length&&(ue(Ce,Tt,Pt)||c.supplyDefaults(Ce),Tt.legend&&Ot.push(m.doLegend),Tt.layoutstyle&&Ot.push(m.layoutStyles),Tt.axrange&&xe(Ot,Pt.rangesAltered),Tt.ticks&&Ot.push(m.doTicksRelayout),Tt.modebar&&Ot.push(m.doModeBar),Tt.camera&&Ot.push(m.doCamera),Tt.colorbars&&Ot.push(m.doColorBars),Ot.push(L)),Ot.push(c.rehover,c.redrag),a.add(Ce,ie,[Ce,Pt.undoit],ie,[Ce,Pt.redoit]);var Kt=w.syncOrAsync(Ot,Ce);return(!Kt||!Kt.then)&&(Kt=Promise.resolve(Ce)),Kt.then(function(){return Ce.emit("plotly_relayout",Pt.eventData),Ce})}function ue(Ce,je,rt){var ut=Ce._fullLayout;if(!je.axrange)return!1;for(var Pt in je)if(Pt!=="axrange"&&je[Pt])return!1;for(var Tt in rt.rangesAltered){var Ot=s.id2name(Tt),Kt=Ce.layout[Ot],Bt=ut[Ot];if(Bt.autorange=Kt.autorange,Kt.range&&(Bt.range=Kt.range.slice()),Bt.cleanRange(),Bt._matchGroup){for(var Zt in Bt._matchGroup)if(Zt!==Tt){var Je=ut[s.id2name(Zt)];Je.autorange=Bt.autorange,Je.range=Bt.range.slice(),Je._input.range=Bt.range.slice()}}}return!0}function xe(Ce,je){var rt=je?function(ut){var Pt=[],Tt=!0;for(var Ot in je){var Kt=s.getFromId(ut,Ot);if(Pt.push(Ot),(Kt.ticklabelposition||"").indexOf("inside")!==-1&&Kt._anchorAxis&&Pt.push(Kt._anchorAxis._id),Kt._matchGroup)for(var Bt in Kt._matchGroup)je[Bt]||Pt.push(Bt);Kt.automargin&&(Tt=!1)}return s.draw(ut,Pt,{skipTitle:Tt})}:function(ut){return s.draw(ut,"redraw")};Ce.push(h,m.doAutoRangeAndConstraints,rt,m.drawData,m.finalDraw)}var he=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,ge=/^[xyz]axis[0-9]*\.autorange$/,me=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function ke(Ce,je){var rt=Ce.layout,ut=Ce._fullLayout,Pt=ut._guiEditing,Tt=ee(ut._preGUI,Pt),Ot=Object.keys(je),Kt=s.list(Ce),Bt=w.extendDeepAll({},je),Zt={},Je,pt,Et;for(ae(je),Ot=Object.keys(je),pt=0;pt<Ot.length;pt++)if(Ot[pt].indexOf("allaxes")===0){for(Et=0;Et<Kt.length;Et++){var ar=Kt[Et]._id.substr(1),vr=ar.indexOf("scene")!==-1?ar+".":"",ir=Ot[pt].replace("allaxes",vr+Kt[Et]._name);je[ir]||(je[ir]=je[Ot[pt]])}delete je[Ot[pt]]}var dr=M.layoutFlags(),Pr={},Sr={};function tr(Er,xr){if(Array.isArray(Er)){Er.forEach(function(Rn){tr(Rn,xr)});return}if(!(Er in je||A.hasParent(je,Er))){var Wr=Tt(rt,Er);Er in Sr||(Sr[Er]=re(Wr.get())),xr!==void 0&&Wr.set(xr)}}var Nr={},et;function we(Er){var xr=s.name2id(Er.split(".")[0]);return Nr[xr]=1,xr}for(var Me in je){if(A.hasParent(je,Me))throw new Error("cannot set "+Me+" and a parent attribute simultaneously");for(var Re=Tt(rt,Me),Xe=je[Me],$e=Re.parts.length,ot=$e-1;ot>0&&typeof Re.parts[ot]!="string";)ot--;var st=Re.parts[ot],yt=Re.parts[ot-1]+"."+st,wt=Re.parts.slice(0,ot).join("."),Vt=e(Ce.layout,wt).get(),gr=e(ut,wt).get(),wr=Re.get();if(Xe!==void 0){Pr[Me]=Xe,Sr[Me]=st==="reverse"?Xe:re(wr);var Lr=n.getLayoutValObject(ut,Re.parts);if(Lr&&Lr.impliedEdits&&Xe!==null)for(var fr in Lr.impliedEdits)tr(w.relativeAttr(Me,fr),Lr.impliedEdits[fr]);if(["width","height"].indexOf(Me)!==-1)if(Xe){tr("autosize",null);var Fr=Me==="height"?"width":"height";tr(Fr,ut[Fr])}else ut[Me]=Ce._initialAutoSize[Me];else if(Me==="autosize")tr("width",Xe?null:ut.width),tr("height",Xe?null:ut.height);else if(yt.match(he))we(yt),e(ut,wt+"._inputRange").set(null);else if(yt.match(ge)){we(yt),e(ut,wt+"._inputRange").set(null);var nn=e(ut,wt).get();nn._inputDomain&&(nn._input.domain=nn._inputDomain.slice())}else yt.match(me)&&e(ut,wt+"._inputDomain").set(null);if(st==="type"){et=Vt;var yr=gr.type==="linear"&&Xe==="log",_r=gr.type==="log"&&Xe==="linear";if(yr||_r){if(!et||!et.range)tr(wt+".autorange",!0);else if(gr.autorange)yr&&(et.range=et.range[1]>et.range[0]?[1,2]:[2,1]);else{var dn=et.range[0],Yr=et.range[1];yr?(dn<=0&&Yr<=0&&tr(wt+".autorange",!0),dn<=0?dn=Yr/1e6:Yr<=0&&(Yr=dn/1e6),tr(wt+".range[0]",Math.log(dn)/Math.LN10),tr(wt+".range[1]",Math.log(Yr)/Math.LN10)):(tr(wt+".range[0]",Math.pow(10,dn)),tr(wt+".range[1]",Math.pow(10,Yr)))}Array.isArray(ut._subplots.polar)&&ut._subplots.polar.length&&ut[Re.parts[0]]&&Re.parts[1]==="radialaxis"&&delete ut[Re.parts[0]]._subplot.viewInitial["radialaxis.range"],r.getComponentMethod("annotations","convertCoords")(Ce,gr,Xe,tr),r.getComponentMethod("images","convertCoords")(Ce,gr,Xe,tr)}else tr(wt+".autorange",!0),tr(wt+".range",null);e(ut,wt+"._inputRange").set(null)}else if(st.match(x)){var Ar=e(ut,Me).get(),an=(Xe||{}).type;(!an||an==="-")&&(an="linear"),r.getComponentMethod("annotations","convertCoords")(Ce,Ar,an,tr),r.getComponentMethod("images","convertCoords")(Ce,Ar,an,tr)}var rn=p.containerArrayMatch(Me);if(rn){Je=rn.array,pt=rn.index;var Zr=rn.property,at=Lr||{editType:"calc"};pt!==""&&Zr===""&&(p.isAddVal(Xe)?Sr[Me]=null:p.isRemoveVal(Xe)?Sr[Me]=(e(rt,Je).get()||[])[pt]:w.warn("unrecognized full object value",je)),M.update(dr,at),Zt[Je]||(Zt[Je]={});var zt=Zt[Je][pt];zt||(zt=Zt[Je][pt]={}),zt[Zr]=Xe,delete je[Me]}else st==="reverse"?(Vt.range?Vt.range.reverse():(tr(wt+".autorange",!0),Vt.range=[1,0]),gr.autorange?dr.calc=!0:dr.plot=!0):(ut._has("scatter-like")&&ut._has("regl")&&Me==="dragmode"&&(Xe==="lasso"||Xe==="select")&&!(wr==="lasso"||wr==="select")||ut._has("gl2d")?dr.plot=!0:Lr?M.update(dr,Lr):dr.calc=!0,Re.set(Xe))}}for(Je in Zt){var er=p.applyContainerArrayChanges(Ce,Tt(rt,Je),Zt[Je],dr,Tt);er||(dr.plot=!0)}for(var hr in Nr){et=s.getFromId(Ce,hr);var Vr=et&&et._constraintGroup;if(Vr){dr.calc=!0;for(var Rr in Vr)Nr[Rr]||(s.getFromId(Ce,Rr)._constraintShrinkable=!0)}}return(Ae(Ce)||je.height||je.width)&&(dr.plot=!0),(dr.plot||dr.calc)&&(dr.layoutReplot=!0),{flags:dr,rangesAltered:Nr,undoit:Sr,redoit:Pr,eventData:Bt}}function Ae(Ce){var je=Ce._fullLayout,rt=je.width,ut=je.height;return Ce.layout.autosize&&c.plotAutoSize(Ce,Ce.layout,je),je.width!==rt||je.height!==ut}function Ne(Ce,je,rt,ut){Ce=w.getGraphDiv(Ce),A.clearPromiseQueue(Ce),w.isPlainObject(je)||(je={}),w.isPlainObject(rt)||(rt={}),Object.keys(je).length&&(Ce.changed=!0),Object.keys(rt).length&&(Ce.changed=!0);var Pt=A.coerceTraceIndices(Ce,ut),Tt=ne(Ce,w.extendFlat({},je),Pt),Ot=Tt.flags,Kt=ke(Ce,w.extendFlat({},rt)),Bt=Kt.flags;(Ot.calc||Bt.calc)&&(Ce.calcdata=void 0),Ot.clearAxisTypes&&A.clearAxisTypes(Ce,Pt,rt);var Zt=[];Bt.layoutReplot?Zt.push(m.layoutReplot):Ot.fullReplot?Zt.push(H._doPlot):(Zt.push(c.previousPromises),ue(Ce,Bt,Kt)||c.supplyDefaults(Ce),Ot.style&&Zt.push(m.doTraceStyle),(Ot.colorbars||Bt.colorbars)&&Zt.push(m.doColorBars),Bt.legend&&Zt.push(m.doLegend),Bt.layoutstyle&&Zt.push(m.layoutStyles),Bt.axrange&&xe(Zt,Kt.rangesAltered),Bt.ticks&&Zt.push(m.doTicksRelayout),Bt.modebar&&Zt.push(m.doModeBar),Bt.camera&&Zt.push(m.doCamera),Zt.push(L)),Zt.push(c.rehover,c.redrag),a.add(Ce,Ne,[Ce,Tt.undoit,Kt.undoit,Tt.traces],Ne,[Ce,Tt.redoit,Kt.redoit,Tt.traces]);var Je=w.syncOrAsync(Zt,Ce);return(!Je||!Je.then)&&(Je=Promise.resolve(Ce)),Je.then(function(){return Ce.emit("plotly_update",{data:Tt.eventData,layout:Kt.eventData}),Ce})}function He(Ce){return function(rt){rt._fullLayout._guiEditing=!0;var ut=Ce.apply(null,arguments);return rt._fullLayout._guiEditing=!1,ut}}var Ge=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],_e=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function De(Ce,je){for(var rt=0;rt<je.length;rt++){var ut=je[rt],Pt=Ce.match(ut.pattern);if(Pt){var Tt=Pt[1]||"";return{head:Tt,tail:Ce.substr(Tt.length+1),attr:ut.attr}}}}function Ye(Ce,je){var rt=e(je,Ce).get();if(rt!==void 0)return rt;var ut=Ce.split(".");for(ut.pop();ut.length>1;)if(ut.pop(),rt=e(je,ut.join(".")+".uirevision").get(),rt!==void 0)return rt;return je.uirevision}function qe(Ce,je){for(var rt=0;rt<je.length;rt++)if(je[rt]._fullInput.uid===Ce)return rt;return-1}function Ue(Ce,je,rt){for(var ut=0;ut<je.length;ut++)if(je[ut].uid===Ce)return ut;return!je[rt]||je[rt].uid?-1:rt}function Ie(Ce,je){var rt=w.isPlainObject(Ce),ut=Array.isArray(Ce);return rt||ut?(rt&&w.isPlainObject(je)||ut&&Array.isArray(je))&&JSON.stringify(Ce)===JSON.stringify(je):Ce===je}function Ve(Ce,je,rt,ut){var Pt=ut._preGUI,Tt,Ot,Kt,Bt,Zt,Je,pt,Et,ar,vr,ir=[],dr={},Pr={};for(Tt in Pt){if(Zt=De(Tt,Ge),Zt){if(ar=Zt.head,vr=Zt.tail,Ot=Zt.attr||ar+".uirevision",Kt=e(ut,Ot).get(),Bt=Kt&&Ye(Ot,je),Bt&&Bt===Kt){if(Je=Pt[Tt],Je===null&&(Je=void 0),pt=e(je,Tt),Et=pt.get(),Ie(Et,Je)){Et===void 0&&vr==="autorange"&&ir.push(ar),pt.set(re(e(ut,Tt).get()));continue}else if(vr==="autorange"||vr.substr(0,6)==="range["){var Sr=Pt[ar+".range[0]"],tr=Pt[ar+".range[1]"],Nr=Pt[ar+".autorange"];if(Nr||Nr===null&&Sr===null&&tr===null){if(!(ar in dr)){var et=e(je,ar).get();dr[ar]=et&&(et.autorange||et.autorange!==!1&&(!et.range||et.range.length!==2))}if(dr[ar]){pt.set(re(e(ut,Tt).get()));continue}}}}}else w.warn("unrecognized GUI edit: "+Tt);delete Pt[Tt],Zt&&Zt.tail.substr(0,6)==="range["&&(Pr[Zt.head]=1)}for(var we=0;we<ir.length;we++){var Me=ir[we];if(Pr[Me]){var Re=e(je,Me).get();Re&&delete Re.autorange}}var Xe=ut._tracePreGUI;for(var $e in Xe){var ot=Xe[$e],st=null,yt;for(Tt in ot){if(!st){var wt=qe($e,rt);if(wt<0){delete Xe[$e];break}var Vt=rt[wt];yt=Vt._fullInput;var gr=Ue($e,Ce,yt.index);if(gr<0){delete Xe[$e];break}st=Ce[gr]}if(Zt=De(Tt,_e),Zt){if(Zt.attr?(Kt=e(ut,Zt.attr).get(),Bt=Kt&&Ye(Zt.attr,je)):(Kt=yt.uirevision,Bt=st.uirevision,Bt===void 0&&(Bt=je.uirevision)),Bt&&Bt===Kt&&(Je=ot[Tt],Je===null&&(Je=void 0),pt=e(st,Tt),Et=pt.get(),Ie(Et,Je))){pt.set(re(e(yt,Tt).get()));continue}}else w.warn("unrecognized GUI edit: "+Tt+" in trace uid "+$e);delete ot[Tt]}}}function dt(Ce,je,rt,ut){var Pt,Tt;function Ot(){return H.addFrames(Ce,Pt)}Ce=w.getGraphDiv(Ce),A.clearPromiseQueue(Ce);var Kt=Ce._fullData,Bt=Ce._fullLayout;if(!w.isPlotDiv(Ce)||!Kt||!Bt)Tt=H.newPlot(Ce,je,rt,ut);else{if(w.isPlainObject(je)){var Zt=je;je=Zt.data,rt=Zt.layout,ut=Zt.config,Pt=Zt.frames}var Je=!1;if(ut){var pt=w.extendDeep({},Ce._context);Ce._context=void 0,z(Ce,ut),Je=Ft(pt,Ce._context)}Ce.data=je||[],A.cleanData(Ce.data),Ce.layout=rt||{},A.cleanLayout(Ce.layout),Ve(Ce.data,Ce.layout,Kt,Bt),c.supplyDefaults(Ce,{skipUpdateCalc:!0});var Et=Ce._fullData,ar=Ce._fullLayout,vr=ar.datarevision===void 0,ir=ar.transition,dr=Yt(Ce,Bt,ar,vr,ir),Pr=dr.newDataRevision,Sr=Dt(Ce,Kt,Et,vr,ir,Pr);if(Ae(Ce)&&(dr.layoutReplot=!0),Sr.calc||dr.calc){Ce.calcdata=void 0;for(var tr=Object.getOwnPropertyNames(ar),Nr=0;Nr<tr.length;Nr++){var et=tr[Nr],we=et.substring(0,5);if(we==="xaxis"||we==="yaxis"){var Me=ar[et]._emptyCategories;Me&&Me()}}}else c.supplyDefaultsUpdateCalc(Ce.calcdata,Et);var Re=[];if(Pt&&(Ce._transitionData={},c.createTransitionData(Ce),Re.push(Ot)),ar.transition&&!Je&&(Sr.anim||dr.anim))dr.ticks&&Re.push(m.doTicksRelayout),c.doCalcdata(Ce),m.doAutoRangeAndConstraints(Ce),Re.push(function(){return c.transitionFromReact(Ce,Sr,dr,Bt)});else if(Sr.fullReplot||dr.layoutReplot||Je)Ce._fullLayout._skipDefaults=!0,Re.push(H._doPlot);else{for(var Xe in dr.arrays){var $e=dr.arrays[Xe];if($e.length){var ot=r.getComponentMethod(Xe,"drawOne");if(ot!==w.noop)for(var st=0;st<$e.length;st++)ot(Ce,$e[st]);else{var yt=r.getComponentMethod(Xe,"draw");if(yt===w.noop)throw new Error("cannot draw components: "+Xe);yt(Ce)}}}Re.push(c.previousPromises),Sr.style&&Re.push(m.doTraceStyle),(Sr.colorbars||dr.colorbars)&&Re.push(m.doColorBars),dr.legend&&Re.push(m.doLegend),dr.layoutstyle&&Re.push(m.layoutStyles),dr.axrange&&xe(Re),dr.ticks&&Re.push(m.doTicksRelayout),dr.modebar&&Re.push(m.doModeBar),dr.camera&&Re.push(m.doCamera),Re.push(L)}Re.push(c.rehover,c.redrag),Tt=w.syncOrAsync(Re,Ce),(!Tt||!Tt.then)&&(Tt=Promise.resolve(Ce))}return Tt.then(function(){return Ce.emit("plotly_react",{data:je,layout:rt}),Ce})}function Dt(Ce,je,rt,ut,Pt,Tt){var Ot=je.length===rt.length;if(!Pt&&!Ot)return{fullReplot:!0,calc:!0};var Kt=M.traceFlags();Kt.arrays={},Kt.nChanges=0,Kt.nChangesAnim=0;var Bt,Zt;function Je(ar){var vr=n.getTraceValObject(Zt,ar);return!Zt._module.animatable&&vr.anim&&(vr.anim=!1),vr}var pt={getValObject:Je,flags:Kt,immutable:ut,transition:Pt,newDataRevision:Tt,gd:Ce},Et={};for(Bt=0;Bt<je.length;Bt++)if(rt[Bt]){if(Zt=rt[Bt]._fullInput,c.hasMakesDataTransform(Zt)&&(Zt=rt[Bt]),Et[Zt.uid])continue;Et[Zt.uid]=1,kt(je[Bt]._fullInput,Zt,[],pt)}return(Kt.calc||Kt.plot)&&(Kt.fullReplot=!0),Pt&&Kt.nChanges&&Kt.nChangesAnim&&(Kt.anim=Kt.nChanges===Kt.nChangesAnim&&Ot?"all":"some"),Kt}function Yt(Ce,je,rt,ut,Pt){var Tt=M.layoutFlags();Tt.arrays={},Tt.rangesAltered={},Tt.nChanges=0,Tt.nChangesAnim=0;function Ot(Bt){return n.getLayoutValObject(rt,Bt)}var Kt={getValObject:Ot,flags:Tt,immutable:ut,transition:Pt,gd:Ce};return kt(je,rt,[],Kt),(Tt.plot||Tt.calc)&&(Tt.layoutReplot=!0),Pt&&Tt.nChanges&&Tt.nChangesAnim&&(Tt.anim=Tt.nChanges===Tt.nChangesAnim?"all":"some"),Tt}function kt(Ce,je,rt,ut){var Pt,Tt,Ot,Kt=ut.getValObject,Bt=ut.flags,Zt=ut.immutable,Je=ut.inArray,pt=ut.arrayIndex;function Et(){var wt=Pt.editType;if(Je&&wt.indexOf("arraydraw")!==-1){w.pushUnique(Bt.arrays[Je],pt);return}M.update(Bt,Pt),wt!=="none"&&Bt.nChanges++,ut.transition&&Pt.anim&&Bt.nChangesAnim++,(he.test(Ot)||ge.test(Ot))&&(Bt.rangesAltered[rt[0]]=1),me.test(Ot)&&e(je,"_inputDomain").set(null),Tt==="datarevision"&&(Bt.newDataRevision=1)}function ar(wt){return wt.valType==="data_array"||wt.arrayOk}for(Tt in Ce){if(Bt.calc&&!ut.transition)return;var vr=Ce[Tt],ir=je[Tt],dr=rt.concat(Tt);if(Ot=dr.join("."),!(Tt.charAt(0)==="_"||typeof vr=="function"||vr===ir)){if((Tt==="tick0"||Tt==="dtick")&&rt[0]!=="geo"){var Pr=je.tickmode;if(Pr==="auto"||Pr==="array"||!Pr)continue}if(!(Tt==="range"&&je.autorange)&&!((Tt==="zmin"||Tt==="zmax")&&je.type==="contourcarpet")&&(Pt=Kt(dr),!!Pt&&!(Pt._compareAsJSON&&JSON.stringify(vr)===JSON.stringify(ir)))){var Sr=Pt.valType,tr,Nr=ar(Pt),et=Array.isArray(vr),we=Array.isArray(ir);if(et&&we){var Me="_input_"+Tt,Re=Ce[Me],Xe=je[Me];if(Array.isArray(Re)&&Re===Xe)continue}if(ir===void 0)Nr&&et?Bt.calc=!0:Et();else if(Pt._isLinkedToArray){var $e=[],ot=!1;Je||(Bt.arrays[Tt]=$e);var st=Math.min(vr.length,ir.length),yt=Math.max(vr.length,ir.length);if(st!==yt)if(Pt.editType==="arraydraw")ot=!0;else{Et();continue}for(tr=0;tr<st;tr++)kt(vr[tr],ir[tr],dr.concat(tr),w.extendFlat({inArray:Tt,arrayIndex:tr},ut));if(ot)for(tr=st;tr<yt;tr++)$e.push(tr)}else!Sr&&w.isPlainObject(vr)?kt(vr,ir,dr,ut):Nr?et&&we?(Zt&&(Bt.calc=!0),(Zt||ut.newDataRevision)&&Et()):et!==we?Bt.calc=!0:Et():et&&we?(vr.length!==ir.length||String(vr)!==String(ir))&&Et():Et()}}}for(Tt in je)if(!(Tt in Ce||Tt.charAt(0)==="_"||typeof je[Tt]=="function"))if(Pt=Kt(rt.concat(Tt)),ar(Pt)&&Array.isArray(je[Tt])){Bt.calc=!0;return}else Et()}function Ft(Ce,je){var rt;for(rt in Ce)if(rt.charAt(0)!=="_"){var ut=Ce[rt],Pt=je[rt];if(ut!==Pt)if(w.isPlainObject(ut)&&w.isPlainObject(Pt)){if(Ft(ut,Pt))return!0}else if(Array.isArray(ut)&&Array.isArray(Pt)){if(ut.length!==Pt.length)return!0;for(var Tt=0;Tt<ut.length;Tt++)if(ut[Tt]!==Pt[Tt])if(w.isPlainObject(ut[Tt])&&w.isPlainObject(Pt[Tt])){if(Ft(ut[Tt],Pt[Tt]))return!0}else return!0}else return!0}}function Nt(Ce,je,rt){if(Ce=w.getGraphDiv(Ce),!w.isPlotDiv(Ce))throw new Error("This element is not a Plotly plot: "+Ce+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var ut=Ce._transitionData;ut._frameQueue||(ut._frameQueue=[]),rt=c.supplyAnimationDefaults(rt);var Pt=rt.transition,Tt=rt.frame;ut._frameWaitingCnt===void 0&&(ut._frameWaitingCnt=0);function Ot(Zt){return Array.isArray(Pt)?Zt>=Pt.length?Pt[0]:Pt[Zt]:Pt}function Kt(Zt){return Array.isArray(Tt)?Zt>=Tt.length?Tt[0]:Tt[Zt]:Tt}function Bt(Zt,Je){var pt=0;return function(){if(Zt&&++pt===Je)return Zt()}}return new Promise(function(Zt,Je){function pt(){if(ut._frameQueue.length!==0){for(;ut._frameQueue.length;){var st=ut._frameQueue.pop();st.onInterrupt&&st.onInterrupt()}Ce.emit("plotly_animationinterrupted",[])}}function Et(st){if(st.length!==0){for(var yt=0;yt<st.length;yt++){var wt;st[yt].type==="byname"?wt=c.computeFrame(Ce,st[yt].name):wt=st[yt].data;var Vt=Kt(yt),gr=Ot(yt);gr.duration=Math.min(gr.duration,Vt.duration);var wr={frame:wt,name:st[yt].name,frameOpts:Vt,transitionOpts:gr};yt===st.length-1&&(wr.onComplete=Bt(Zt,2),wr.onInterrupt=Je),ut._frameQueue.push(wr)}rt.mode==="immediate"&&(ut._lastFrameAt=-1/0),ut._animationRaf||ir()}}function ar(){Ce.emit("plotly_animated"),window.cancelAnimationFrame(ut._animationRaf),ut._animationRaf=null}function vr(){ut._currentFrame&&ut._currentFrame.onComplete&&ut._currentFrame.onComplete();var st=ut._currentFrame=ut._frameQueue.shift();if(st){var yt=st.name?st.name.toString():null;Ce._fullLayout._currentFrame=yt,ut._lastFrameAt=Date.now(),ut._timeToNext=st.frameOpts.duration,c.transition(Ce,st.frame.data,st.frame.layout,A.coerceTraceIndices(Ce,st.frame.traces),st.frameOpts,st.transitionOpts).then(function(){st.onComplete&&st.onComplete()}),Ce.emit("plotly_animatingframe",{name:yt,frame:st.frame,animation:{frame:st.frameOpts,transition:st.transitionOpts}})}else ar()}function ir(){Ce.emit("plotly_animating"),ut._lastFrameAt=-1/0,ut._timeToNext=0,ut._runningTransitions=0,ut._currentFrame=null;var st=function(){ut._animationRaf=window.requestAnimationFrame(st),Date.now()-ut._lastFrameAt>ut._timeToNext&&vr()};st()}var dr=0;function Pr(st){return Array.isArray(Pt)?dr>=Pt.length?st.transitionOpts=Pt[dr]:st.transitionOpts=Pt[0]:st.transitionOpts=Pt,dr++,st}var Sr,tr,Nr=[],et=je==null,we=Array.isArray(je),Me=!et&&!we&&w.isPlainObject(je);if(Me)Nr.push({type:"object",data:Pr(w.extendFlat({},je))});else if(et||["string","number"].indexOf(typeof je)!==-1)for(Sr=0;Sr<ut._frames.length;Sr++)tr=ut._frames[Sr],!!tr&&(et||String(tr.group)===String(je))&&Nr.push({type:"byname",name:String(tr.name),data:Pr({name:tr.name})});else if(we)for(Sr=0;Sr<je.length;Sr++){var Re=je[Sr];["number","string"].indexOf(typeof Re)!==-1?(Re=String(Re),Nr.push({type:"byname",name:Re,data:Pr({name:Re})})):w.isPlainObject(Re)&&Nr.push({type:"object",data:Pr(w.extendFlat({},Re))})}for(Sr=0;Sr<Nr.length;Sr++)if(tr=Nr[Sr],tr.type==="byname"&&!ut._frameHash[tr.data.name]){w.warn('animate failure: frame not found: "'+tr.data.name+'"'),Je();return}["next","immediate"].indexOf(rt.mode)!==-1&&pt(),rt.direction==="reverse"&&Nr.reverse();var Xe=Ce._fullLayout._currentFrame;if(Xe&&rt.fromcurrent){var $e=-1;for(Sr=0;Sr<Nr.length;Sr++)if(tr=Nr[Sr],tr.type==="byname"&&tr.name===Xe){$e=Sr;break}if($e>0&&$e<Nr.length-1){var ot=[];for(Sr=0;Sr<Nr.length;Sr++)tr=Nr[Sr],(Nr[Sr].type!=="byname"||Sr>$e)&&ot.push(tr);Nr=ot}}Nr.length>0?Et(Nr):(Ce.emit("plotly_animated"),Zt())})}function Lt(Ce,je,rt){if(Ce=w.getGraphDiv(Ce),je==null)return Promise.resolve();if(!w.isPlotDiv(Ce))throw new Error("This element is not a Plotly plot: "+Ce+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var ut,Pt,Tt,Ot,Kt=Ce._transitionData._frames,Bt=Ce._transitionData._frameHash;if(!Array.isArray(je))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+je);var Zt=Kt.length+je.length*2,Je=[],pt={};for(ut=je.length-1;ut>=0;ut--)if(!!w.isPlainObject(je[ut])){var Et=je[ut].name,ar=(Bt[Et]||pt[Et]||{}).name,vr=je[ut].name,ir=Bt[ar]||pt[ar];ar&&vr&&typeof vr=="number"&&ir&&T<_&&(T++,w.warn('addFrames: overwriting frame "'+(Bt[ar]||pt[ar]).name+'" with a frame whose name of type "number" also equates to "'+ar+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),T===_&&w.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),pt[Et]={name:Et},Je.push({frame:c.supplyFrameDefaults(je[ut]),index:rt&&rt[ut]!==void 0&&rt[ut]!==null?rt[ut]:Zt+ut})}Je.sort(function(Me,Re){return Me.index>Re.index?-1:Me.index<Re.index?1:0});var dr=[],Pr=[],Sr=Kt.length;for(ut=Je.length-1;ut>=0;ut--){if(Pt=Je[ut].frame,typeof Pt.name=="number"&&w.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Pt.name)for(;Bt[Pt.name="frame "+Ce._transitionData._counter++];);if(Bt[Pt.name]){for(Tt=0;Tt<Kt.length&&(Kt[Tt]||{}).name!==Pt.name;Tt++);dr.push({type:"replace",index:Tt,value:Pt}),Pr.unshift({type:"replace",index:Tt,value:Kt[Tt]})}else Ot=Math.max(0,Math.min(Je[ut].index,Sr)),dr.push({type:"insert",index:Ot,value:Pt}),Pr.unshift({type:"delete",index:Ot}),Sr++}var tr=c.modifyFrames,Nr=c.modifyFrames,et=[Ce,Pr],we=[Ce,dr];return a&&a.add(Ce,tr,et,Nr,we),c.modifyFrames(Ce,dr)}function St(Ce,je){if(Ce=w.getGraphDiv(Ce),!w.isPlotDiv(Ce))throw new Error("This element is not a Plotly plot: "+Ce);var rt,ut,Pt=Ce._transitionData._frames,Tt=[],Ot=[];if(!je)for(je=[],rt=0;rt<Pt.length;rt++)je.push(rt);for(je=je.slice(),je.sort(),rt=je.length-1;rt>=0;rt--)ut=je[rt],Tt.push({type:"delete",index:ut}),Ot.unshift({type:"insert",index:ut,value:Pt[ut]});var Kt=c.modifyFrames,Bt=c.modifyFrames,Zt=[Ce,Ot],Je=[Ce,Tt];return a&&a.add(Ce,Kt,Zt,Bt,Je),c.modifyFrames(Ce,Tt)}function it(Ce){Ce=w.getGraphDiv(Ce);var je=Ce._fullLayout||{},rt=Ce._fullData||[];return c.cleanPlot([],{},rt,je),c.purge(Ce),o.purge(Ce),je._container&&je._container.remove(),delete Ce._context,Ce}function ht(Ce){var je=Ce._fullLayout,rt=Ce.getBoundingClientRect();if(!w.equalDomRects(rt,je._lastBBox)){var ut=je._invTransform=w.inverseTransformMatrix(w.getFullTransformMatrix(Ce));je._invScaleX=Math.sqrt(ut[0][0]*ut[0][0]+ut[0][1]*ut[0][1]+ut[0][2]*ut[0][2]),je._invScaleY=Math.sqrt(ut[1][0]*ut[1][0]+ut[1][1]*ut[1][1]+ut[1][2]*ut[1][2]),je._lastBBox=rt}}function Qe(Ce){var je=d.select(Ce),rt=Ce._fullLayout;if(rt._calcInverseTransform=ht,rt._calcInverseTransform(Ce),rt._container=je.selectAll(".plot-container").data([0]),rt._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),rt._paperdiv=rt._container.selectAll(".svg-container").data([0]),rt._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),rt._glcontainer=rt._paperdiv.selectAll(".gl-container").data([{}]),rt._glcontainer.enter().append("div").classed("gl-container",!0),rt._paperdiv.selectAll(".main-svg").remove(),rt._paperdiv.select(".modebar-container").remove(),rt._paper=rt._paperdiv.insert("svg",":first-child").classed("main-svg",!0),rt._toppaper=rt._paperdiv.append("svg").classed("main-svg",!0),rt._modebardiv=rt._paperdiv.append("div"),delete rt._modeBar,rt._hoverpaper=rt._paperdiv.append("svg").classed("main-svg",!0),!rt._uid){var ut={};d.selectAll("defs").each(function(){this.id&&(ut[this.id.split("-")[1]]=1)}),rt._uid=w.randstr(ut)}rt._paperdiv.selectAll(".main-svg").attr(g.svgAttrs),rt._defs=rt._paper.append("defs").attr("id","defs-"+rt._uid),rt._clips=rt._defs.append("g").classed("clips",!0),rt._topdefs=rt._toppaper.append("defs").attr("id","topdefs-"+rt._uid),rt._topclips=rt._topdefs.append("g").classed("clips",!0),rt._bgLayer=rt._paper.append("g").classed("bglayer",!0),rt._draggers=rt._paper.append("g").classed("draglayer",!0);var Pt=rt._paper.append("g").classed("layer-below",!0);rt._imageLowerLayer=Pt.append("g").classed("imagelayer",!0),rt._shapeLowerLayer=Pt.append("g").classed("shapelayer",!0),rt._cartesianlayer=rt._paper.append("g").classed("cartesianlayer",!0),rt._polarlayer=rt._paper.append("g").classed("polarlayer",!0),rt._smithlayer=rt._paper.append("g").classed("smithlayer",!0),rt._ternarylayer=rt._paper.append("g").classed("ternarylayer",!0),rt._geolayer=rt._paper.append("g").classed("geolayer",!0),rt._funnelarealayer=rt._paper.append("g").classed("funnelarealayer",!0),rt._pielayer=rt._paper.append("g").classed("pielayer",!0),rt._iciclelayer=rt._paper.append("g").classed("iciclelayer",!0),rt._treemaplayer=rt._paper.append("g").classed("treemaplayer",!0),rt._sunburstlayer=rt._paper.append("g").classed("sunburstlayer",!0),rt._indicatorlayer=rt._toppaper.append("g").classed("indicatorlayer",!0),rt._glimages=rt._paper.append("g").classed("glimages",!0);var Tt=rt._toppaper.append("g").classed("layer-above",!0);rt._imageUpperLayer=Tt.append("g").classed("imagelayer",!0),rt._shapeUpperLayer=Tt.append("g").classed("shapelayer",!0),rt._infolayer=rt._toppaper.append("g").classed("infolayer",!0),rt._menulayer=rt._toppaper.append("g").classed("menulayer",!0),rt._zoomlayer=rt._toppaper.append("g").classed("zoomlayer",!0),rt._hoverlayer=rt._hoverpaper.append("g").classed("hoverlayer",!0),rt._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),Ce.emit("plotly_framework")}H.animate=Nt,H.addFrames=Lt,H.deleteFrames=St,H.addTraces=le,H.deleteTraces=oe,H.extendTraces=Z,H.moveTraces=U,H.prependTraces=se,H.newPlot=R,H._doPlot=f,H.purge=it,H.react=dt,H.redraw=I,H.relayout=ie,H.restyle=V,H.setPlotConfig=S,H.update=Ne,H._guiRelayout=He(ie),H._guiRestyle=He(V),H._guiUpdate=He(Ne),H._storeDirectGUIEdit=Q},{"../components/color":366,"../components/drawing":388,"../constants/xmlns_namespaces":480,"../lib":503,"../lib/events":492,"../lib/queue":519,"../plots/cartesian/axes":554,"../plots/cartesian/constants":561,"../plots/cartesian/graph_interact":564,"../plots/cartesian/select":575,"../plots/plots":619,"../registry":638,"./edit_types":536,"./helpers":537,"./manage_arrays":539,"./plot_config":541,"./plot_schema":542,"./subroutines":544,"@plotly/d3":58,"fast-isnumeric":190,"has-hover":228}],541:[function(t,B,H){var d={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},l={};function b(w,e){for(var o in w){var a=w[o];a.valType?e[o]=a.dflt:(e[o]||(e[o]={}),b(a,e[o]))}}b(d,l),B.exports={configAttributes:d,dfltConfig:l}},{}],542:[function(t,B,H){var d=t("../registry"),l=t("../lib"),b=t("../plots/attributes"),w=t("../plots/layout_attributes"),e=t("../plots/frame_attributes"),o=t("../plots/animation_attributes"),a=t("./plot_config").configAttributes,r=t("./edit_types"),n=l.extendDeepAll,c=l.isPlainObject,s=l.isArrayOrTypedArray,i=l.nestedProperty,v=l.valObjectMeta,u="_isSubplotObj",g="_isLinkedToArray",h="_arrayAttrRegexps",y="_deprecated",p=[u,g,h,y];H.IS_SUBPLOT_OBJ=u,H.IS_LINKED_TO_ARRAY=g,H.DEPRECATED=y,H.UNDERSCORE_ATTRS=p,H.get=function(){var R={};d.allTypes.forEach(function(O){R[O]=x(O)});var D={};return Object.keys(d.transformsRegistry).forEach(function(O){D[O]=_(O)}),{defs:{valObjects:v,metaKeys:p.concat(["description","role","editType","impliedEdits"]),editType:{traces:r.traces,layout:r.layout},impliedEdits:{}},traces:R,layout:T(),transforms:D,frames:f(),animation:L(o),config:L(a)}},H.crawl=function(R,D,O,F){var G=O||0;F=F||"",Object.keys(R).forEach(function(W){var q=R[W];if(p.indexOf(W)===-1){var J=(F?F+".":"")+W;D(q,W,R,G,J),!H.isValObject(q)&&c(q)&&W!=="impliedEdits"&&H.crawl(q,D,G+1,J)}})},H.isValObject=function(R){return R&&R.valType!==void 0},H.findArrayAttributes=function(R){var D=[],O=[],F=[],G,W;function q(oe,U,V,re){O=O.slice(0,re).concat([U]),F=F.slice(0,re).concat([oe&&oe._isLinkedToArray]);var ee=oe&&(oe.valType==="data_array"||oe.arrayOk===!0)&&!(O[re-1]==="colorbar"&&(U==="ticktext"||U==="tickvals"));!ee||J(G,0,"")}function J(oe,U,V){var re=oe[O[U]],ee=V+O[U];if(U===O.length-1)s(re)&&D.push(W+ee);else if(F[U]){if(Array.isArray(re))for(var j=0;j<re.length;j++)c(re[j])&&J(re[j],U+1,ee+"["+j+"].")}else c(re)&&J(re,U+1,ee+".")}G=R,W="",H.crawl(b,q),R._module&&R._module.attributes&&H.crawl(R._module.attributes,q);var X=R.transforms;if(X)for(var Z=0;Z<X.length;Z++){var se=X[Z],le=se._module;le&&(W="transforms["+Z+"].",G=se,H.crawl(le.attributes,q))}return D},H.getTraceValObject=function(R,D){var O=D[0],F=1,G,W;if(O==="transforms"){if(D.length===1)return b.transforms;var q=R.transforms;if(!Array.isArray(q)||!q.length)return!1;var J=D[1];if(!M(J)||J>=q.length)return!1;G=(d.transformsRegistry[q[J].type]||{}).attributes,W=G&&G[D[2]],F=3}else{var X=R._module;if(X||(X=(d.modules[R.type||b.type.dflt]||{})._module),!X)return!1;if(G=X.attributes,W=G&&G[O],!W){var Z=X.basePlotModule;Z&&Z.attributes&&(W=Z.attributes[O])}W||(W=b[O])}return m(W,D,F)},H.getLayoutValObject=function(R,D){var O=A(R,D[0]);return m(O,D,1)};function A(R,D){var O,F,G,W,q=R._basePlotModules;if(q){var J;for(O=0;O<q.length;O++){if(G=q[O],G.attrRegex&&G.attrRegex.test(D)){if(G.layoutAttrOverrides)return G.layoutAttrOverrides;!J&&G.layoutAttributes&&(J=G.layoutAttributes)}var X=G.baseLayoutAttrOverrides;if(X&&D in X)return X[D]}if(J)return J}var Z=R._modules;if(Z){for(O=0;O<Z.length;O++)if(W=Z[O].layoutAttributes,W&&D in W)return W[D]}for(F in d.componentsRegistry){if(G=d.componentsRegistry[F],G.name==="colorscale"&&D.indexOf("coloraxis")===0)return G.layoutAttributes[D];if(!G.schema&&D===G.name)return G.layoutAttributes}return D in w?w[D]:!1}function m(R,D,O){if(!R)return!1;if(R._isLinkedToArray){if(M(D[O]))O++;else if(O<D.length)return!1}for(;O<D.length;O++){var F=R[D[O]];if(c(F))R=F;else break;if(O===D.length-1)break;if(R._isLinkedToArray){if(O++,!M(D[O]))return!1}else if(R.valType==="info_array"){O++;var G=D[O];if(!M(G))return!1;var W=R.items;if(Array.isArray(W)){if(G>=W.length)return!1;if(R.dimensions===2){if(O++,D.length===O)return R;var q=D[O];if(!M(q))return!1;R=W[G][q]}else R=W[G]}else R=W}}return R}function M(R){return R===Math.round(R)&&R>=0}function x(R){var D,O;D=d.modules[R]._module,O=D.basePlotModule;var F={};F.type=null;var G=n({},b),W=n({},D.attributes);H.crawl(W,function(X,Z,se,le,oe){i(G,oe).set(void 0),X===void 0&&i(W,oe).set(void 0)}),n(F,G),d.traceIs(R,"noOpacity")&&delete F.opacity,d.traceIs(R,"showLegend")||(delete F.showlegend,delete F.legendgroup),d.traceIs(R,"noHover")&&(delete F.hoverinfo,delete F.hoverlabel),D.selectPoints||delete F.selectedpoints,n(F,W),O.attributes&&n(F,O.attributes),F.type=R;var q={meta:D.meta||{},categories:D.categories||{},animatable:Boolean(D.animatable),type:R,attributes:L(F)};if(D.layoutAttributes){var J={};n(J,D.layoutAttributes),q.layoutAttributes=L(J)}return D.animatable||H.crawl(q,function(X){H.isValObject(X)&&"anim"in X&&delete X.anim}),q}function T(){var R={},D,O;n(R,w);for(D in d.subplotsRegistry)if(O=d.subplotsRegistry[D],!!O.layoutAttributes)if(Array.isArray(O.attr))for(var F=0;F<O.attr.length;F++)z(R,O,O.attr[F]);else{var G=O.attr==="subplot"?O.name:O.attr;z(R,O,G)}for(D in d.componentsRegistry){O=d.componentsRegistry[D];var W=O.schema;if(W&&(W.subplots||W.layout)){var q=W.subplots;if(q&&q.xaxis&&!q.yaxis)for(var J in q.xaxis)delete R.yaxis[J]}else O.name==="colorscale"?n(R,O.layoutAttributes):O.layoutAttributes&&I(R,O.layoutAttributes,O.name)}return{layoutAttributes:L(R)}}function _(R){var D=d.transformsRegistry[R],O=n({},D.attributes);return Object.keys(d.componentsRegistry).forEach(function(F){var G=d.componentsRegistry[F];G.schema&&G.schema.transforms&&G.schema.transforms[R]&&Object.keys(G.schema.transforms[R]).forEach(function(W){I(O,G.schema.transforms[R][W],W)})}),{attributes:L(O)}}function f(){var R={frames:n({},e)};return L(R),R.frames}function L(R){return S(R),k(R),P(R),R}function S(R){function D(F){return{valType:"string",editType:"none"}}function O(F,G,W){H.isValObject(F)?(F.arrayOk===!0||F.valType==="data_array")&&(W[G+"src"]=D()):c(F)&&(F.role="object")}H.crawl(R,O)}function k(R){function D(O,F,G){if(!!O){var W=O[g];!W||(delete O[g],G[F]={items:{}},G[F].items[W]=O,G[F].role="object")}}H.crawl(R,D)}function P(R){function D(O){for(var F in O)if(c(O[F]))D(O[F]);else if(Array.isArray(O[F]))for(var G=0;G<O[F].length;G++)D(O[F][G]);else O[F]instanceof RegExp&&(O[F]=O[F].toString())}D(R)}function z(R,D,O){var F=i(R,O),G=n({},D.layoutAttributes);G[u]=!0,F.set(G)}function I(R,D,O){var F=i(R,O);F.set(n(F.get()||{},D))}},{"../lib":503,"../plots/animation_attributes":548,"../plots/attributes":550,"../plots/frame_attributes":586,"../plots/layout_attributes":610,"../registry":638,"./edit_types":536,"./plot_config":541}],543:[function(t,B,H){var d=t("../lib"),l=t("../plots/attributes"),b="templateitemname",w={name:{valType:"string",editType:"none"}};w[b]={valType:"string",editType:"calc"},H.templatedArray=function(a,r){return r._isLinkedToArray=a,r.name=w.name,r[b]=w[b],r},H.traceTemplater=function(a){var r={},n,c;for(n in a)c=a[n],Array.isArray(c)&&c.length&&(r[n]=0);function s(i){n=d.coerce(i,{},l,"type");var v={type:n,_template:null};if(n in r){c=a[n];var u=r[n]%c.length;r[n]++,v._template=c[u]}return v}return{newTrace:s}},H.newContainer=function(a,r,n){var c=a._template,s=c&&(c[r]||n&&c[n]);d.isPlainObject(s)||(s=null);var i=a[r]={_template:s};return i},H.arrayTemplater=function(a,r,n){var c=a._template,s=c&&c[o(r)],i=c&&c[r];(!Array.isArray(i)||!i.length)&&(i=[]);var v={};function u(h){var y={name:h.name,_input:h},p=y[b]=h[b];if(!e(p))return y._template=s,y;for(var A=0;A<i.length;A++){var m=i[A];if(m.name===p)return v[p]=1,y._template=m,y}return y[n]=h[n]||!1,y._template=!1,y}function g(){for(var h=[],y=0;y<i.length;y++){var p=i[y],A=p.name;if(e(A)&&!v[A]){var m={_template:p,name:A,_input:{_templateitemname:A}};m[b]=p[b],h.push(m),v[A]=1}}return h}return{newItem:u,defaultItems:g}};function e(a){return a&&typeof a=="string"}function o(a){var r=a.length-1;return a.charAt(r)!=="s"&&d.warn("bad argument to arrayDefaultKey: "+a),a.substr(0,a.length-1)+"defaults"}H.arrayDefaultKey=o,H.arrayEditor=function(a,r,n){var c=(d.nestedProperty(a,r).get()||[]).length,s=n._index,i=s>=c&&(n._input||{})._templateitemname;i&&(s=c);var v=r+"["+s+"]",u;function g(){u={},i&&(u[v]={},u[v][b]=i)}g();function h(m,M){u[m]=M}function y(m,M){i?d.nestedProperty(u[v],m).set(M):u[v+"."+m]=M}function p(){var m=u;return g(),m}function A(m,M){m&&y(m,M);var x=p();for(var T in x)d.nestedProperty(a,T).set(x[T])}return{modifyBase:h,modifyItem:y,getUpdateObj:p,applyUpdate:A}}},{"../lib":503,"../plots/attributes":550}],544:[function(t,B,H){var d=t("@plotly/d3"),l=t("../registry"),b=t("../plots/plots"),w=t("../lib"),e=t("../lib/clear_gl_canvases"),o=t("../components/color"),a=t("../components/drawing"),r=t("../components/titles"),n=t("../components/modebar"),c=t("../plots/cartesian/axes"),s=t("../constants/alignment"),i=t("../plots/cartesian/constraints"),v=i.enforce,u=i.clean,g=t("../plots/cartesian/autorange").doAutoRange,h="start",y="middle",p="end";H.layoutStyles=function(k){return w.syncOrAsync([b.doAutoMargin,m],k)};function A(k,P,z){for(var I=0;I<z.length;I++){var R=z[I][0],D=z[I][1];if(!(R[0]>=k[1]||R[1]<=k[0])&&D[0]<P[1]&&D[1]>P[0])return!0}return!1}function m(k){var P=k._fullLayout,z=P._size,I=z.p,R=c.list(k,"",!0),D,O,F,G,W,q;if(P._paperdiv.style({width:k._context.responsive&&P.autosize&&!k._context._hasZeroWidth&&!k.layout.width?"100%":P.width+"px",height:k._context.responsive&&P.autosize&&!k._context._hasZeroHeight&&!k.layout.height?"100%":P.height+"px"}).selectAll(".main-svg").call(a.setSize,P.width,P.height),k._context.setBackground(k,P.paper_bgcolor),H.drawMainTitle(k),n.manage(k),!P._has("cartesian"))return b.previousPromises(k);function J(Ft,Nt,Lt){var St=Ft._lw/2;if(Ft._id.charAt(0)==="x"){if(Nt){if(Lt==="top")return Nt._offset-I-St}else return z.t+z.h*(1-(Ft.position||0))+St%1;return Nt._offset+Nt._length+I+St}if(Nt){if(Lt==="right")return Nt._offset+Nt._length+I+St}else return z.l+z.w*(Ft.position||0)+St%1;return Nt._offset-I-St}for(D=0;D<R.length;D++){G=R[D];var X=G._anchorAxis;G._linepositions={},G._lw=a.crispRound(k,G.linewidth,1),G._mainLinePosition=J(G,X,G.side),G._mainMirrorPosition=G.mirror&&X?J(G,X,s.OPPOSITE_SIDE[G.side]):null}var Z=[],se=[],le=[],oe=o.opacity(P.paper_bgcolor)===1&&o.opacity(P.plot_bgcolor)===1&&P.paper_bgcolor===P.plot_bgcolor;for(O in P._plots)if(F=P._plots[O],F.mainplot)F.bg&&F.bg.remove(),F.bg=void 0;else{var U=F.xaxis.domain,V=F.yaxis.domain,re=F.plotgroup;if(A(U,V,le)){var ee=re.node(),j=F.bg=w.ensureSingle(re,"rect","bg");ee.insertBefore(j.node(),ee.childNodes[0]),se.push(O)}else re.select("rect.bg").remove(),le.push([U,V]),oe||(Z.push(O),se.push(O))}var Q=P._bgLayer.selectAll(".bg").data(Z);for(Q.enter().append("rect").classed("bg",!0),Q.exit().remove(),Q.each(function(Ft){P._plots[Ft].bg=d.select(this)}),D=0;D<se.length;D++)F=P._plots[se[D]],W=F.xaxis,q=F.yaxis,F.bg&&W._offset!==void 0&&q._offset!==void 0&&F.bg.call(a.setRect,W._offset-I,q._offset-I,W._length+2*I,q._length+2*I).call(o.fill,P.plot_bgcolor).style("stroke-width",0);if(!P._hasOnlyLargeSploms)for(O in P._plots){F=P._plots[O],W=F.xaxis,q=F.yaxis;var ne=F.clipId="clip"+P._uid+O+"plot",ae=w.ensureSingleById(P._clips,"clipPath",ne,function(Ft){Ft.classed("plotclip",!0).append("rect")});F.clipRect=ae.select("rect").attr({width:W._length,height:q._length}),a.setTranslate(F.plot,W._offset,q._offset);var ie,ue;F._hasClipOnAxisFalse?(ie=null,ue=ne):(ie=ne,ue=null),a.setClipUrl(F.plot,ie,k),F.layerClipId=ue}var xe,he,ge,me,ke,Ae,Ne,He,Ge,_e,De,Ye,qe;function Ue(Ft){return"M"+xe+","+Ft+"H"+he}function Ie(Ft){return"M"+W._offset+","+Ft+"h"+W._length}function Ve(Ft){return"M"+Ft+","+He+"V"+Ne}function dt(Ft){return"M"+Ft+","+q._offset+"v"+q._length}function Dt(Ft,Nt,Lt){if(!Ft.showline||O!==Ft._mainSubplot)return"";if(!Ft._anchorAxis)return Lt(Ft._mainLinePosition);var St=Nt(Ft._mainLinePosition);return Ft.mirror&&(St+=Nt(Ft._mainMirrorPosition)),St}for(O in P._plots){F=P._plots[O],W=F.xaxis,q=F.yaxis;var Yt="M0,0";M(W,O)&&(ke=T(W,"left",q,R),xe=W._offset-(ke?I+ke:0),Ae=T(W,"right",q,R),he=W._offset+W._length+(Ae?I+Ae:0),ge=J(W,q,"bottom"),me=J(W,q,"top"),qe=!W._anchorAxis||O!==W._mainSubplot,qe&&(W.mirror==="allticks"||W.mirror==="all")&&(W._linepositions[O]=[ge,me]),Yt=Dt(W,Ue,Ie),qe&&W.showline&&(W.mirror==="all"||W.mirror==="allticks")&&(Yt+=Ue(ge)+Ue(me)),F.xlines.style("stroke-width",W._lw+"px").call(o.stroke,W.showline?W.linecolor:"rgba(0,0,0,0)")),F.xlines.attr("d",Yt);var kt="M0,0";M(q,O)&&(De=T(q,"bottom",W,R),Ne=q._offset+q._length+(De?I:0),Ye=T(q,"top",W,R),He=q._offset-(Ye?I:0),Ge=J(q,W,"left"),_e=J(q,W,"right"),qe=!q._anchorAxis||O!==q._mainSubplot,qe&&(q.mirror==="allticks"||q.mirror==="all")&&(q._linepositions[O]=[Ge,_e]),kt=Dt(q,Ve,dt),qe&&q.showline&&(q.mirror==="all"||q.mirror==="allticks")&&(kt+=Ve(Ge)+Ve(_e)),F.ylines.style("stroke-width",q._lw+"px").call(o.stroke,q.showline?q.linecolor:"rgba(0,0,0,0)")),F.ylines.attr("d",kt)}return c.makeClipPaths(k),b.previousPromises(k)}function M(k,P){return(k.ticks||k.showline)&&(P===k._mainSubplot||k.mirror==="all"||k.mirror==="allticks")}function x(k,P,z){if(!z.showline||!z._lw)return!1;if(z.mirror==="all"||z.mirror==="allticks")return!0;var I=z._anchorAxis;if(!I)return!1;var R=s.FROM_BL[P];return z.side===P?I.domain[R]===k.domain[R]:z.mirror&&I.domain[1-R]===k.domain[1-R]}function T(k,P,z,I){if(x(k,P,z))return z._lw;for(var R=0;R<I.length;R++){var D=I[R];if(D._mainAxis===z._mainAxis&&x(k,P,D))return D._lw}return 0}H.drawMainTitle=function(k){var P=k._fullLayout,z=L(P),I=S(P);r.draw(k,"gtitle",{propContainer:P,propName:"title.text",placeholder:P._dfltTitle.plot,attributes:{x:_(P,z),y:f(P,I),"text-anchor":z,dy:I}})};function _(k,P){var z=k.title,I=k._size,R=0;switch(P===h?R=z.pad.l:P===p&&(R=-z.pad.r),z.xref){case"paper":return I.l+I.w*z.x+R;case"container":default:return k.width*z.x+R}}function f(k,P){var z=k.title,I=k._size,R=0;if(P==="0em"||!P?R=-z.pad.b:P===s.CAP_SHIFT+"em"&&(R=z.pad.t),z.y==="auto")return I.t/2;switch(z.yref){case"paper":return I.t+I.h-I.h*z.y+R;case"container":default:return k.height-k.height*z.y+R}}function L(k){var P=k.title,z=y;return w.isRightAnchor(P)?z=p:w.isLeftAnchor(P)&&(z=h),z}function S(k){var P=k.title,z="0em";return w.isTopAnchor(P)?z=s.CAP_SHIFT+"em":w.isMiddleAnchor(P)&&(z=s.MID_SHIFT+"em"),z}H.doTraceStyle=function(k){var P=k.calcdata,z=[],I;for(I=0;I<P.length;I++){var R=P[I],D=R[0]||{},O=D.trace||{},F=O._module||{},G=F.arraysToCalcdata;G&&G(R,O);var W=F.editStyle;W&&z.push({fn:W,cd0:D})}if(z.length){for(I=0;I<z.length;I++){var q=z[I];q.fn(k,q.cd0)}e(k),H.redrawReglTraces(k)}return b.style(k),l.getComponentMethod("legend","draw")(k),b.previousPromises(k)},H.doColorBars=function(k){return l.getComponentMethod("colorbar","draw")(k),b.previousPromises(k)},H.layoutReplot=function(k){var P=k.layout;return k.layout=void 0,l.call("_doPlot",k,"",P)},H.doLegend=function(k){return l.getComponentMethod("legend","draw")(k),b.previousPromises(k)},H.doTicksRelayout=function(k){return c.draw(k,"redraw"),k._fullLayout._hasOnlyLargeSploms&&(l.subplotsRegistry.splom.updateGrid(k),e(k),H.redrawReglTraces(k)),H.drawMainTitle(k),b.previousPromises(k)},H.doModeBar=function(k){var P=k._fullLayout;n.manage(k);for(var z=0;z<P._basePlotModules.length;z++){var I=P._basePlotModules[z].updateFx;I&&I(k)}return b.previousPromises(k)},H.doCamera=function(k){for(var P=k._fullLayout,z=P._subplots.gl3d,I=0;I<z.length;I++){var R=P[z[I]],D=R._scene;D.setViewport(R)}},H.drawData=function(k){var P=k._fullLayout;e(k);for(var z=P._basePlotModules,I=0;I<z.length;I++)z[I].plot(k);return H.redrawReglTraces(k),b.style(k),l.getComponentMethod("shapes","draw")(k),l.getComponentMethod("annotations","draw")(k),l.getComponentMethod("images","draw")(k),P._replotting=!1,b.previousPromises(k)},H.redrawReglTraces=function(k){var P=k._fullLayout;if(P._has("regl")){var z=k._fullData,I=[],R=[],D,O;for(P._hasOnlyLargeSploms&&P._splomGrid.draw(),D=0;D<z.length;D++){var F=z[D];F.visible===!0&&F._length!==0&&(F.type==="splom"?P._splomScenes[F.uid].draw():F.type==="scattergl"?w.pushUnique(I,F.xaxis+F.yaxis):F.type==="scatterpolargl"&&w.pushUnique(R,F.subplot))}for(D=0;D<I.length;D++)O=P._plots[I[D]],O._scene&&O._scene.draw();for(D=0;D<R.length;D++)O=P[R[D]]._subplot,O._scene&&O._scene.draw()}},H.doAutoRangeAndConstraints=function(k){for(var P=c.list(k,"",!0),z,I={},R=0;R<P.length;R++)if(z=P[R],!I[z._id]){I[z._id]=1,u(k,z),g(k,z);var D=z._matchGroup;if(D)for(var O in D){var F=c.getFromId(k,O);g(k,F,z.range),I[O]=1}}v(k)},H.finalDraw=function(k){l.getComponentMethod("rangeslider","draw")(k),l.getComponentMethod("rangeselector","draw")(k)},H.drawMarginPushers=function(k){l.getComponentMethod("legend","draw")(k),l.getComponentMethod("rangeselector","draw")(k),l.getComponentMethod("sliders","draw")(k),l.getComponentMethod("updatemenus","draw")(k),l.getComponentMethod("colorbar","draw")(k)}},{"../components/color":366,"../components/drawing":388,"../components/modebar":429,"../components/titles":464,"../constants/alignment":471,"../lib":503,"../lib/clear_gl_canvases":487,"../plots/cartesian/autorange":553,"../plots/cartesian/axes":554,"../plots/cartesian/constraints":562,"../plots/plots":619,"../registry":638,"@plotly/d3":58}],545:[function(t,B,H){var d=t("../lib"),l=d.isPlainObject,b=t("./plot_schema"),w=t("../plots/plots"),e=t("../plots/attributes"),o=t("./plot_template"),a=t("./plot_config").dfltConfig;H.makeTemplate=function(h){h=d.isPlainObject(h)?h:d.getGraphDiv(h),h=d.extendDeep({_context:a},{data:h.data,layout:h.layout}),w.supplyDefaults(h);var y=h.data||[],p=h.layout||{};p._basePlotModules=h._fullLayout._basePlotModules,p._modules=h._fullLayout._modules;var A={data:{},layout:{}};y.forEach(function(P){var z={};c(P,z,i.bind(null,P));var I=d.coerce(P,{},e,"type"),R=A.data[I];R||(R=A.data[I]=[]),R.push(z)}),c(p,A.layout,s.bind(null,p)),delete A.layout.template;var m=p.template;if(l(m)){var M=m.layout,x,T,_,f,L,S;l(M)&&r(M,A.layout);var k=m.data;if(l(k)){for(T in A.data)if(_=k[T],Array.isArray(_)){for(L=A.data[T],S=L.length,f=_.length,x=0;x<S;x++)r(_[x%f],L[x]);for(x=S;x<f;x++)L.push(d.extendDeep({},_[x]))}for(T in k)T in A.data||(A.data[T]=d.extendDeep([],k[T]))}}return A};function r(h,y){h=d.extendDeep({},h);var p=Object.keys(h).sort(),A,m;function M(L,S,k){if(l(S)&&l(L))r(L,S);else if(Array.isArray(S)&&Array.isArray(L)){var P=o.arrayTemplater({_template:h},k);for(m=0;m<S.length;m++){var z=S[m],I=P.newItem(z)._template;I&&r(I,z)}var R=P.defaultItems();for(m=0;m<R.length;m++)S.push(R[m]._template);for(m=0;m<S.length;m++)delete S[m].templateitemname}}for(A=0;A<p.length;A++){var x=p[A],T=h[x];if(x in y?M(T,y[x],x):y[x]=T,n(x)===x)for(var _ in y){var f=n(_);_!==f&&f===x&&!(_ in h)&&M(T,y[_],x)}}}function n(h){return h.replace(/[0-9]+$/,"")}function c(h,y,p,A,m){var M=m&&p(m);for(var x in h){var T=h[x],_=v(h,x,A),f=v(h,x,m),L=p(f);if(!L){var S=n(x);S!==x&&(f=v(h,S,m),L=p(f))}if(!(M&&M===L)&&!(!L||L._noTemplating||L.valType==="data_array"||L.arrayOk&&Array.isArray(T)))if(!L.valType&&l(T))c(T,y,p,_,f);else if(L._isLinkedToArray&&Array.isArray(T))for(var k=!1,P=0,z={},I=0;I<T.length;I++){var R=T[I];if(l(R)){var D=R.name;if(D)z[D]||(c(R,y,p,v(T,P,_),v(T,P,f)),P++,z[D]=1);else if(!k){var O=o.arrayDefaultKey(x),F=v(h,O,A),G=v(T,P,_);c(R,y,p,G,v(T,P,f));var W=d.nestedProperty(y,G),q=d.nestedProperty(y,F);q.set(W.get()),W.set(null),k=!0}}}else{var J=d.nestedProperty(y,_);J.set(T)}}}function s(h,y){return b.getLayoutValObject(h,d.nestedProperty({},y).parts)}function i(h,y){return b.getTraceValObject(h,d.nestedProperty({},y).parts)}function v(h,y,p){var A;return p?Array.isArray(h)?A=p+"["+y+"]":A=p+"."+y:A=y,A}H.validateTemplate=function(h,y){var p=d.extendDeep({},{_context:a,data:h.data,layout:h.layout}),A=p.layout||{};l(y)||(y=A.template||{});var m=y.layout,M=y.data,x=[];p.layout=A,p.layout.template=y,w.supplyDefaults(p);var T=p._fullLayout,_=p._fullData,f={};function L(F,G){for(var W in F)if(W.charAt(0)!=="_"&&l(F[W])){var q=n(W),J=[],X;for(X=0;X<G.length;X++)J.push(v(F,W,G[X])),q!==W&&J.push(v(F,q,G[X]));for(X=0;X<J.length;X++)f[J[X]]=1;L(F[W],J)}}function S(F,G){for(var W in F)if(W.indexOf("defaults")===-1&&l(F[W])){var q=v(F,W,G);f[q]?S(F[W],q):x.push({code:"unused",path:q})}}if(l(m)?(L(T,["layout"]),S(m,"layout")):x.push({code:"layout"}),!l(M))x.push({code:"data"});else{for(var k={},P,z=0;z<_.length;z++){var I=_[z];P=I.type,k[P]=(k[P]||0)+1,I._fullInput._template||x.push({code:"missing",index:I._fullInput.index,traceType:P})}for(P in M){var R=M[P].length,D=k[P]||0;R>D?x.push({code:"unused",traceType:P,templateCount:R,dataCount:D}):D>R&&x.push({code:"reused",traceType:P,templateCount:R,dataCount:D})}}function O(F,G){for(var W in F)if(W.charAt(0)!=="_"){var q=F[W],J=v(F,W,G);l(q)?(Array.isArray(F)&&q._template===!1&&q.templateitemname&&x.push({code:"missing",path:J,templateitemname:q.templateitemname}),O(q,J)):Array.isArray(q)&&u(q)&&O(q,J)}}if(O({data:_,layout:T},""),x.length)return x.map(g)};function u(h){for(var y=0;y<h.length;y++)if(l(h[y]))return!0}function g(h){var y;switch(h.code){case"data":y="The template has no key data.";break;case"layout":y="The template has no key layout.";break;case"missing":h.path?y="There are no templates for item "+h.path+" with name "+h.templateitemname:y="There are no templates for trace "+h.index+", of type "+h.traceType+".";break;case"unused":h.path?y="The template item at "+h.path+" was not used in constructing the plot.":h.dataCount?y="Some of the templates of type "+h.traceType+" were not used. The template has "+h.templateCount+" traces, the data only has "+h.dataCount+" of this type.":y="The template has "+h.templateCount+" traces of type "+h.traceType+" but there are none in the data.";break;case"reused":y="Some of the templates of type "+h.traceType+" were used more than once. The template has "+h.templateCount+" traces, the data has "+h.dataCount+" of this type.";break}return h.msg=y,h}},{"../lib":503,"../plots/attributes":550,"../plots/plots":619,"./plot_config":541,"./plot_schema":542,"./plot_template":543}],546:[function(t,B,H){var d=t("fast-isnumeric"),l=t("./plot_api"),b=t("../plots/plots"),w=t("../lib"),e=t("../snapshot/helpers"),o=t("../snapshot/tosvg"),a=t("../snapshot/svgtoimg"),r=t("../version").version,n={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function c(s,i){i=i||{};var v,u,g,h;w.isPlainObject(s)?(v=s.data||[],u=s.layout||{},g=s.config||{},h={}):(s=w.getGraphDiv(s),v=w.extendDeep([],s.data),u=w.extendDeep({},s.layout),g=s._context,h=s._fullLayout||{});function y(D){return!(D in i)||w.validate(i[D],n[D])}if(!y("width")&&i.width!==null||!y("height")&&i.height!==null)throw new Error("Height and width should be pixel values.");if(!y("format"))throw new Error("Export format is not "+w.join2(n.format.values,", "," or ")+".");var p={};function A(D,O){return w.coerce(i,p,n,D,O)}var m=A("format"),M=A("width"),x=A("height"),T=A("scale"),_=A("setBackground"),f=A("imageDataOnly"),L=document.createElement("div");L.style.position="absolute",L.style.left="-5000px",document.body.appendChild(L);var S=w.extendFlat({},u);M?S.width=M:i.width===null&&d(h.width)&&(S.width=h.width),x?S.height=x:i.height===null&&d(h.height)&&(S.height=h.height);var k=w.extendFlat({},g,{_exportedPlot:!0,staticPlot:!0,setBackground:_}),P=e.getRedrawFunc(L);function z(){return new Promise(function(D){setTimeout(D,e.getDelay(L._fullLayout))})}function I(){return new Promise(function(D,O){var F=o(L,m,T),G=L._fullLayout.width,W=L._fullLayout.height;function q(){l.purge(L),document.body.removeChild(L)}if(m==="full-json"){var J=b.graphJson(L,!1,"keepdata","object",!0,!0);return J.version=r,J=JSON.stringify(J),q(),D(f?J:e.encodeJSON(J))}if(q(),m==="svg")return D(f?F:e.encodeSVG(F));var X=document.createElement("canvas");X.id=w.randstr(),a({format:m,width:G,height:W,scale:T,canvas:X,svg:F,promise:!0}).then(D).catch(O)})}function R(D){return f?D.replace(e.IMAGE_URL_PREFIX,""):D}return new Promise(function(D,O){l.newPlot(L,v,S,k).then(P).then(z).then(I).then(function(F){D(R(F))}).catch(function(F){O(F)})})}B.exports=c},{"../lib":503,"../plots/plots":619,"../snapshot/helpers":642,"../snapshot/svgtoimg":644,"../snapshot/tosvg":646,"../version":1119,"./plot_api":540,"fast-isnumeric":190}],547:[function(t,B,H){var d=t("../lib"),l=t("../plots/plots"),b=t("./plot_schema"),w=t("./plot_config").dfltConfig,e=d.isPlainObject,o=Array.isArray,a=d.isArrayOrTypedArray;B.exports=function(A,m){A===void 0&&(A=[]),m===void 0&&(m={});var M=b.get(),x=[],T={_context:d.extendFlat({},w)},_,f;o(A)?(T.data=d.extendDeep([],A),_=A):(T.data=[],_=[],x.push(i("array","data"))),e(m)?(T.layout=d.extendDeep({},m),f=m):(T.layout={},f={},arguments.length>1&&x.push(i("object","layout"))),l.supplyDefaults(T);for(var L=T._fullData,S=_.length,k=0;k<S;k++){var P=_[k],z=["data",k];if(!e(P)){x.push(i("object",z));continue}var I=L[k],R=I.type,D=M.traces[R].attributes;D.type={valType:"enumerated",values:[R]},I.visible===!1&&P.visible!==!1&&x.push(i("invisible",z)),r(P,I,D,x,z);var O=P.transforms,F=I.transforms;if(O){o(O)||x.push(i("array",z,["transforms"])),z.push("transforms");for(var G=0;G<O.length;G++){var W=["transforms",G],q=O[G].type;if(!e(O[G])){x.push(i("object",z,W));continue}var J=M.transforms[q]?M.transforms[q].attributes:{};J.type={valType:"enumerated",values:Object.keys(M.transforms)},r(O[G],F[G],J,x,z,W)}}}var X=T._fullLayout,Z=n(M,L);return r(f,X,Z,x,"layout"),x.length===0?void 0:x};function r(p,A,m,M,x,T){T=T||[];for(var _=Object.keys(p),f=0;f<_.length;f++){var L=_[f];if(L!=="transforms"){var S=T.slice();S.push(L);var k=p[L],P=A[L],z=u(m,L),I=(z||{}).valType,R=I==="info_array",D=I==="colorscale",O=(z||{}).items;if(!v(m,L))M.push(i("schema",x,S));else if(e(k)&&e(P)&&I!=="any")r(k,P,z,M,x,S);else if(R&&o(k)){k.length>P.length&&M.push(i("unused",x,S.concat(P.length)));var F=P.length,G=Array.isArray(O);G&&(F=Math.min(F,O.length));var W,q,J,X,Z;if(z.dimensions===2)for(q=0;q<F;q++)if(o(k[q])){k[q].length>P[q].length&&M.push(i("unused",x,S.concat(q,P[q].length)));var se=P[q].length;for(W=0;W<(G?Math.min(se,O[q].length):se);W++)J=G?O[q][W]:O,X=k[q][W],Z=P[q][W],d.validate(X,J)?Z!==X&&Z!==+X&&M.push(i("dynamic",x,S.concat(q,W),X,Z)):M.push(i("value",x,S.concat(q,W),X))}else M.push(i("array",x,S.concat(q),k[q]));else for(q=0;q<F;q++)J=G?O[q]:O,X=k[q],Z=P[q],d.validate(X,J)?Z!==X&&Z!==+X&&M.push(i("dynamic",x,S.concat(q),X,Z)):M.push(i("value",x,S.concat(q),X))}else if(z.items&&!R&&o(k)){var le=O[Object.keys(O)[0]],oe=[],U,V;for(U=0;U<P.length;U++){var re=P[U]._index||U;if(V=S.slice(),V.push(re),e(k[re])&&e(P[U])){oe.push(re);var ee=k[re],j=P[U];e(ee)&&ee.visible!==!1&&j.visible===!1?M.push(i("invisible",x,V)):r(ee,j,le,M,x,V)}}for(U=0;U<k.length;U++)V=S.slice(),V.push(U),e(k[U])?oe.indexOf(U)===-1&&M.push(i("unused",x,V)):M.push(i("object",x,V,k[U]))}else!e(k)&&e(P)?M.push(i("object",x,S,k)):!a(k)&&a(P)&&!R&&!D?M.push(i("array",x,S,k)):L in A?d.validate(k,z)?z.valType==="enumerated"&&(z.coerceNumber&&k!==+P||k!==P)&&M.push(i("dynamic",x,S,k,P)):M.push(i("value",x,S,k)):M.push(i("unused",x,S,k))}}return M}function n(p,A){for(var m=p.layout.layoutAttributes,M=0;M<A.length;M++){var x=A[M],T=p.traces[x.type],_=T.layoutAttributes;_&&(x.subplot?d.extendFlat(m[T.attributes.subplot.dflt],_):d.extendFlat(m,_))}return m}var c={object:function(p,A){var m;return p==="layout"&&A===""?m="The layout argument":p[0]==="data"&&A===""?m="Trace "+p[1]+" in the data argument":m=s(p)+"key "+A,m+" must be linked to an object container"},array:function(p,A){var m;return p==="data"?m="The data argument":m=s(p)+"key "+A,m+" must be linked to an array container"},schema:function(p,A){return s(p)+"key "+A+" is not part of the schema"},unused:function(p,A,m){var M=e(m)?"container":"key";return s(p)+M+" "+A+" did not get coerced"},dynamic:function(p,A,m,M){return[s(p)+"key",A,"(set to '"+m+"')","got reset to","'"+M+"'","during defaults."].join(" ")},invisible:function(p,A){return(A?s(p)+"item "+A:"Trace "+p[1])+" got defaulted to be not visible"},value:function(p,A,m){return[s(p)+"key "+A,"is set to an invalid value ("+m+")"].join(" ")}};function s(p){return o(p)?"In data trace "+p[1]+", ":"In "+p+", "}function i(p,A,m,M,x){m=m||"";var T,_;o(A)?(T=A[0],_=A[1]):(T=A,_=null);var f=y(m),L=c[p](A,f,M,x);return d.log(L),{code:p,container:T,trace:_,path:m,astr:f,msg:L}}function v(p,A){var m=h(A),M=m.keyMinusId,x=m.id;return M in p&&p[M]._isSubplotObj&&x?!0:A in p}function u(p,A){if(A in p)return p[A];var m=h(A);return p[m.keyMinusId]}var g=d.counterRegex("([a-z]+)");function h(p){var A=p.match(g);return{keyMinusId:A&&A[1],id:A&&A[2]}}function y(p){if(!o(p))return String(p);for(var A="",m=0;m<p.length;m++){var M=p[m];typeof M=="number"?A=A.substr(0,A.length-1)+"["+M+"]":A+=M,m<p.length-1&&(A+=".")}return A}},{"../lib":503,"../plots/plots":619,"./plot_config":541,"./plot_schema":542}],548:[function(t,B,H){B.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],549:[function(t,B,H){var d=t("../lib"),l=t("../plot_api/plot_template");B.exports=function(w,e,o){var a=o.name,r=o.inclusionAttr||"visible",n=e[a],c=d.isArrayOrTypedArray(w[a])?w[a]:[],s=e[a]=[],i=l.arrayTemplater(e,a,r),v,u;for(v=0;v<c.length;v++){var g=c[v];d.isPlainObject(g)?u=i.newItem(g):(u=i.newItem({}),u[r]=!1),u._index=v,u[r]!==!1&&o.handleItemDefaults(g,u,e,o),s.push(u)}var h=i.defaultItems();for(v=0;v<h.length;v++)u=h[v],u._index=s.length,o.handleItemDefaults({},u,e,o,{}),s.push(u);if(d.isArrayOrTypedArray(n)){var y=Math.min(n.length,s.length);for(v=0;v<y;v++)d.relinkPrivateKeys(s[v],n[v])}return s}},{"../lib":503,"../plot_api/plot_template":543}],550:[function(t,B,H){var d=t("./font_attributes"),l=t("../components/fx/attributes");B.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:d({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:l.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":397,"./font_attributes":585}],551:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../lib"),b=l.dateTime2ms,w=l.incrementMonth,e=t("../../constants/numerical"),o=e.ONEAVGMONTH;B.exports=function(r,n,c,s){if(n.type!=="date")return{vals:s};var i=r[c+"periodalignment"];if(!i)return{vals:s};var v=r[c+"period"],u;if(d(v)){if(v=+v,v<=0)return{vals:s}}else if(typeof v=="string"&&v.charAt(0)==="M"){var g=+v.substring(1);if(g>0&&Math.round(g)===g)u=g;else return{vals:s}}for(var h=n.calendar,y=i==="start",p=i==="end",A=r[c+"period0"],m=b(A,h)||0,M=[],x=[],T=[],_=s.length,f=0;f<_;f++){var L=s[f],S,k,P;if(u){for(S=Math.round((L-m)/(u*o)),P=w(m,u*S,h);P>L;)P=w(P,-u,h);for(;P<=L;)P=w(P,u,h);k=w(P,-u,h)}else{for(S=Math.round((L-m)/v),P=m+S*v;P>L;)P-=v;for(;P<=L;)P+=v;k=P-v}M[f]=y?k:p?P:(k+P)/2,x[f]=k,T[f]=P}return{vals:M,starts:x,ends:T}}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],552:[function(t,B,H){B.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],553:[function(t,B,H){var d=t("@plotly/d3"),l=t("fast-isnumeric"),b=t("../../lib"),w=t("../../constants/numerical").FP_SAFE,e=t("../../registry"),o=t("../../components/drawing"),a=t("./axis_ids"),r=a.getFromId,n=a.isLinked;B.exports={getAutoRange:c,makePadFn:i,doAutoRange:h,findExtremes:y,concatExtremes:g};function c(_,f){var L,S,k=[],P=_._fullLayout,z=i(P,f,0),I=i(P,f,1),R=g(_,f),D=R.min,O=R.max;if(D.length===0||O.length===0)return b.simpleMap(f.range,f.r2l);var F=D[0].val,G=O[0].val;for(L=1;L<D.length&&F===G;L++)F=Math.min(F,D[L].val);for(L=1;L<O.length&&F===G;L++)G=Math.max(G,O[L].val);var W=!1;if(f.range){var q=b.simpleMap(f.range,f.r2l);W=q[1]<q[0]}f.autorange==="reversed"&&(W=!0,f.autorange=!0);var J=f.rangemode,X=J==="tozero",Z=J==="nonnegative",se=f._length,le=se/10,oe=0,U,V,re,ee,j,Q;for(L=0;L<D.length;L++)for(U=D[L],S=0;S<O.length;S++)V=O[S],Q=V.val-U.val-s(f,U.val,V.val),Q>0&&(j=se-z(U)-I(V),j>le?Q/j>oe&&(re=U,ee=V,oe=Q/j):Q/se>oe&&(re={val:U.val,nopad:1},ee={val:V.val,nopad:1},oe=Q/se));function ne(he,ge){return Math.max(he,I(ge))}if(F===G){var ae=F-1,ie=F+1;if(X)if(F===0)k=[0,1];else{var ue=(F>0?O:D).reduce(ne,0),xe=F/(1-Math.min(.5,ue/se));k=F>0?[0,xe]:[xe,0]}else Z?k=[Math.max(0,ae),Math.max(1,ie)]:k=[ae,ie]}else X?(re.val>=0&&(re={val:0,nopad:1}),ee.val<=0&&(ee={val:0,nopad:1})):Z&&(re.val-oe*z(re)<0&&(re={val:0,nopad:1}),ee.val<=0&&(ee={val:1,nopad:1})),oe=(ee.val-re.val-s(f,U.val,V.val))/(se-z(re)-I(ee)),k=[re.val-oe*z(re),ee.val+oe*I(ee)];return W&&k.reverse(),b.simpleMap(k,f.l2r||Number)}function s(_,f,L){var S=0;if(_.rangebreaks)for(var k=_.locateBreaks(f,L),P=0;P<k.length;P++){var z=k[P];S+=z.max-z.min}return S}function i(_,f,L){var S=.05*f._length,k=f._anchorAxis||{};if((f.ticklabelposition||"").indexOf("inside")!==-1||(k.ticklabelposition||"").indexOf("inside")!==-1){var P=f.autorange==="reversed";if(!P){var z=b.simpleMap(f.range,f.r2l);P=z[1]<z[0]}P&&(L=!L)}var I=0;return n(_,f._id)||(I=u(_,f,L)),S=Math.max(I,S),f.constrain==="domain"&&f._inputDomain&&(S*=(f._inputDomain[1]-f._inputDomain[0])/(f.domain[1]-f.domain[0])),function(D){return D.nopad?0:D.pad+(D.extrapad?S:I)}}var v=3;function u(_,f,L){var S=0,k=f._id.charAt(0)==="x";for(var P in _._plots){var z=_._plots[P];if(!(f._id!==z.xaxis._id&&f._id!==z.yaxis._id)){var I=(k?z.yaxis:z.xaxis)||{};if((I.ticklabelposition||"").indexOf("inside")!==-1&&(!L&&(I.side==="left"||I.side==="bottom")||L&&(I.side==="top"||I.side==="right"))){if(I._vals){var R=b.deg2rad(I._tickAngles[I._id+"tick"]||0),D=Math.abs(Math.cos(R)),O=Math.abs(Math.sin(R));if(!I._vals[0].bb){var F=I._id+"tick",G=I._selections[F];G.each(function(se){var le=d.select(this),oe=le.select(".text-math-group");oe.empty()&&(se.bb=o.bBox(le.node()))})}for(var W=0;W<I._vals.length;W++){var q=I._vals[W],J=q.bb;if(J){var X=2*v+J.width,Z=2*v+J.height;S=Math.max(S,k?Math.max(X*D,Z*O):Math.max(Z*D,X*O))}}}I.ticks==="inside"&&I.ticklabelposition==="inside"&&(S+=I.ticklen||0)}}}return S}function g(_,f,L){var S=f._id,k=_._fullData,P=_._fullLayout,z=[],I=[],R,D,O;function F(X,Z){for(R=0;R<Z.length;R++){var se=X[Z[R]],le=(se._extremes||{})[S];if(se.visible===!0&&le){for(D=0;D<le.min.length;D++)O=le.min[D],p(z,O.val,O.pad,{extrapad:O.extrapad});for(D=0;D<le.max.length;D++)O=le.max[D],A(I,O.val,O.pad,{extrapad:O.extrapad})}}}if(F(k,f._traceIndices),F(P.annotations||[],f._annIndices||[]),F(P.shapes||[],f._shapeIndices||[]),f._matchGroup&&!L){for(var G in f._matchGroup)if(G!==f._id){var W=r(_,G),q=g(_,W,!0),J=f._length/W._length;for(D=0;D<q.min.length;D++)O=q.min[D],p(z,O.val,O.pad*J,{extrapad:O.extrapad});for(D=0;D<q.max.length;D++)O=q.max[D],A(I,O.val,O.pad*J,{extrapad:O.extrapad})}}return{min:z,max:I}}function h(_,f,L){if(f.setScale(),f.autorange){f.range=L?L.slice():c(_,f),f._r=f.range.slice(),f._rl=b.simpleMap(f._r,f.r2l);var S=f._input,k={};k[f._attr+".range"]=f.range,k[f._attr+".autorange"]=f.autorange,e.call("_storeDirectGUIEdit",_.layout,_._fullLayout._preGUI,k),S.range=f.range.slice(),S.autorange=f.autorange}var P=f._anchorAxis;if(P&&P.rangeslider){var z=P.rangeslider[f._name];z&&z.rangemode==="auto"&&(z.range=c(_,f)),P._input.rangeslider[f._name]=b.extendFlat({},z)}}function y(_,f,L){L||(L={}),_._m||_.setScale();var S=[],k=[],P=f.length,z=L.padded||!1,I=L.tozero&&(_.type==="linear"||_.type==="-"),R=_.type==="log",D=!1,O=L.vpadLinearized||!1,F,G,W,q,J,X,Z,se,le;function oe(ae){if(Array.isArray(ae))return D=!0,function(ue){return Math.max(Number(ae[ue]||0),0)};var ie=Math.max(Number(ae||0),0);return function(){return ie}}var U=oe((_._m>0?L.ppadplus:L.ppadminus)||L.ppad||0),V=oe((_._m>0?L.ppadminus:L.ppadplus)||L.ppad||0),re=oe(L.vpadplus||L.vpad),ee=oe(L.vpadminus||L.vpad);if(!D){if(se=1/0,le=-1/0,R)for(F=0;F<P;F++)G=f[F],G<se&&G>0&&(se=G),G>le&&G<w&&(le=G);else for(F=0;F<P;F++)G=f[F],G<se&&G>-w&&(se=G),G>le&&G<w&&(le=G);f=[se,le],P=2}var j={tozero:I,extrapad:z};function Q(ae){W=f[ae],l(W)&&(X=U(ae),Z=V(ae),O?(q=_.c2l(W)-ee(ae),J=_.c2l(W)+re(ae)):(se=W-ee(ae),le=W+re(ae),R&&se<le/10&&(se=le/10),q=_.c2l(se),J=_.c2l(le)),I&&(q=Math.min(0,q),J=Math.max(0,J)),M(q)&&p(S,q,Z,j),M(J)&&A(k,J,X,j))}var ne=Math.min(6,P);for(F=0;F<ne;F++)Q(F);for(F=P-1;F>=ne;F--)Q(F);return{min:S,max:k,opts:L}}function p(_,f,L,S){m(_,f,L,S,x)}function A(_,f,L,S){m(_,f,L,S,T)}function m(_,f,L,S,k){for(var P=S.tozero,z=S.extrapad,I=!0,R=0;R<_.length&&I;R++){var D=_[R];if(k(D.val,f)&&D.pad>=L&&(D.extrapad||!z)){I=!1;break}else k(f,D.val)&&D.pad<=L&&(z||!D.extrapad)&&(_.splice(R,1),R--)}if(I){var O=P&&f===0;_.push({val:f,pad:O?0:L,extrapad:O?!1:z})}}function M(_){return l(_)&&Math.abs(_)<w}function x(_,f){return _<=f}function T(_,f){return _>=f}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../../registry":638,"./axis_ids":558,"@plotly/d3":58,"fast-isnumeric":190}],554:[function(t,B,H){var d=t("@plotly/d3"),l=t("fast-isnumeric"),b=t("../../plots/plots"),w=t("../../registry"),e=t("../../lib"),o=e.strTranslate,a=t("../../lib/svg_text_utils"),r=t("../../components/titles"),n=t("../../components/color"),c=t("../../components/drawing"),s=t("./layout_attributes"),i=t("./clean_ticks"),v=t("../../constants/numerical"),u=v.ONEMAXYEAR,g=v.ONEAVGYEAR,h=v.ONEMINYEAR,y=v.ONEMAXQUARTER,p=v.ONEAVGQUARTER,A=v.ONEMINQUARTER,m=v.ONEMAXMONTH,M=v.ONEAVGMONTH,x=v.ONEMINMONTH,T=v.ONEWEEK,_=v.ONEDAY,f=_/2,L=v.ONEHOUR,S=v.ONEMIN,k=v.ONESEC,P=v.MINUS_SIGN,z=v.BADNUM,I={K:"zeroline"},R={K:"gridline",L:"path"},D={K:"tick",L:"path"},O={K:"tick",L:"text"},F=t("../../constants/alignment"),G=F.MID_SHIFT,W=F.CAP_SHIFT,q=F.LINE_SPACING,J=F.OPPOSITE_SIDE,X=3,Z=B.exports={};Z.setConvert=t("./set_convert");var se=t("./axis_autotype"),le=t("./axis_ids"),oe=le.idSort,U=le.isLinked;Z.id2name=le.id2name,Z.name2id=le.name2id,Z.cleanId=le.cleanId,Z.list=le.list,Z.listIds=le.listIds,Z.getFromId=le.getFromId,Z.getFromTrace=le.getFromTrace;var V=t("./autorange");Z.getAutoRange=V.getAutoRange,Z.findExtremes=V.findExtremes;var re=1e-4;function ee(we){var Me=(we[1]-we[0])*re;return[we[0]-Me,we[1]+Me]}Z.coerceRef=function(we,Me,Re,Xe,$e,ot){var st=Xe.charAt(Xe.length-1),yt=Re._fullLayout._subplots[st+"axis"],wt=Xe+"ref",Vt={};return $e||($e=yt[0]||(typeof ot=="string"?ot:ot[0])),ot||(ot=$e),yt=yt.concat(yt.map(function(gr){return gr+" domain"})),Vt[wt]={valType:"enumerated",values:yt.concat(ot?typeof ot=="string"?[ot]:ot:[]),dflt:$e},e.coerce(we,Me,Vt,wt)},Z.getRefType=function(we){return we===void 0?we:we==="paper"?"paper":we==="pixel"?"pixel":/( domain)$/.test(we)?"domain":"range"},Z.coercePosition=function(we,Me,Re,Xe,$e,ot){var st,yt,wt=Z.getRefType(Xe);if(wt!=="range")st=e.ensureNumber,yt=Re($e,ot);else{var Vt=Z.getFromId(Me,Xe);ot=Vt.fraction2r(ot),yt=Re($e,ot),st=Vt.cleanPos}we[$e]=st(yt)},Z.cleanPosition=function(we,Me,Re){var Xe=Re==="paper"||Re==="pixel"?e.ensureNumber:Z.getFromId(Me,Re).cleanPos;return Xe(we)},Z.redrawComponents=function(we,Me){Me=Me||Z.listIds(we);var Re=we._fullLayout;function Xe($e,ot,st,yt){for(var wt=w.getComponentMethod($e,ot),Vt={},gr=0;gr<Me.length;gr++)for(var wr=Re[Z.id2name(Me[gr])],Lr=wr[st],fr=0;fr<Lr.length;fr++){var Fr=Lr[fr];if(!Vt[Fr]&&(wt(we,Fr),Vt[Fr]=1,yt))return}}Xe("annotations","drawOne","_annIndices"),Xe("shapes","drawOne","_shapeIndices"),Xe("images","draw","_imgIndices",!0)};var j=Z.getDataConversions=function(we,Me,Re,Xe){var $e,ot=Re==="x"||Re==="y"||Re==="z"?Re:Xe;if(Array.isArray(ot)){if($e={type:se(Xe,void 0,{autotypenumbers:we._fullLayout.autotypenumbers}),_categories:[]},Z.setConvert($e),$e.type==="category")for(var st=0;st<Xe.length;st++)$e.d2c(Xe[st])}else $e=Z.getFromTrace(we,Me,ot);return $e?{d2c:$e.d2c,c2d:$e.c2d}:ot==="ids"?{d2c:ne,c2d:ne}:{d2c:Q,c2d:Q}};function Q(we){return+we}function ne(we){return String(we)}Z.getDataToCoordFunc=function(we,Me,Re,Xe){return j(we,Me,Re,Xe).d2c},Z.counterLetter=function(we){var Me=we.charAt(0);if(Me==="x")return"y";if(Me==="y")return"x"},Z.minDtick=function(we,Me,Re,Xe){["log","category","multicategory"].indexOf(we.type)!==-1||!Xe?we._minDtick=0:we._minDtick===void 0?(we._minDtick=Me,we._forceTick0=Re):we._minDtick&&((we._minDtick/Me+1e-6)%1<2e-6&&((Re-we._forceTick0)/Me%1+1.000001)%1<2e-6?(we._minDtick=Me,we._forceTick0=Re):((Me/we._minDtick+1e-6)%1>2e-6||((Re-we._forceTick0)/we._minDtick%1+1.000001)%1>2e-6)&&(we._minDtick=0))},Z.saveRangeInitial=function(we,Me){for(var Re=Z.list(we,"",!0),Xe=!1,$e=0;$e<Re.length;$e++){var ot=Re[$e],st=ot._rangeInitial===void 0,yt=st||!(ot.range[0]===ot._rangeInitial[0]&&ot.range[1]===ot._rangeInitial[1]);(st&&ot.autorange===!1||Me&&yt)&&(ot._rangeInitial=ot.range.slice(),Xe=!0)}return Xe},Z.saveShowSpikeInitial=function(we,Me){for(var Re=Z.list(we,"",!0),Xe=!1,$e="on",ot=0;ot<Re.length;ot++){var st=Re[ot],yt=st._showSpikeInitial===void 0,wt=yt||st.showspikes!==st._showspikes;(yt||Me&&wt)&&(st._showSpikeInitial=st.showspikes,Xe=!0),$e==="on"&&!st.showspikes&&($e="off")}return we._fullLayout._cartesianSpikesEnabled=$e,Xe},Z.autoBin=function(we,Me,Re,Xe,$e,ot){var st=e.aggNums(Math.min,null,we),yt=e.aggNums(Math.max,null,we);if(Me.type==="category"||Me.type==="multicategory")return{start:st-.5,end:yt+.5,size:Math.max(1,Math.round(ot)||1),_dataSpan:yt-st};$e||($e=Me.calendar);var wt;if(Me.type==="log"?wt={type:"linear",range:[st,yt]}:wt={type:Me.type,range:e.simpleMap([st,yt],Me.c2r,0,$e),calendar:$e},Z.setConvert(wt),ot=ot&&i.dtick(ot,wt.type),ot)wt.dtick=ot,wt.tick0=i.tick0(void 0,wt.type,$e);else{var Vt;if(Re)Vt=(yt-st)/Re;else{var gr=e.distinctVals(we),wr=Math.pow(10,Math.floor(Math.log(gr.minDiff)/Math.LN10)),Lr=wr*e.roundUp(gr.minDiff/wr,[.9,1.9,4.9,9.9],!0);Vt=Math.max(Lr,2*e.stdev(we)/Math.pow(we.length,Xe?.25:.4)),l(Vt)||(Vt=1)}Z.autoTicks(wt,Vt)}var fr=wt.dtick,Fr=Z.tickIncrement(Z.tickFirst(wt),fr,"reverse",$e),nn,yr;if(typeof fr=="number")Fr=ae(Fr,we,wt,st,yt),yr=1+Math.floor((yt-Fr)/fr),nn=Fr+yr*fr;else for(wt.dtick.charAt(0)==="M"&&(Fr=ie(Fr,we,fr,st,$e)),nn=Fr,yr=0;nn<=yt;)nn=Z.tickIncrement(nn,fr,!1,$e),yr++;return{start:Me.c2r(Fr,0,$e),end:Me.c2r(nn,0,$e),size:fr,_dataSpan:yt-st}};function ae(we,Me,Re,Xe,$e){var ot=0,st=0,yt=0,wt=0;function Vt(fr){return(1+(fr-we)*100/Re.dtick)%100<2}for(var gr=0;gr<Me.length;gr++)Me[gr]%1===0?yt++:l(Me[gr])||wt++,Vt(Me[gr])&&ot++,Vt(Me[gr]+Re.dtick/2)&&st++;var wr=Me.length-wt;if(yt===wr&&Re.type!=="date")Re.dtick<1?we=Xe-.5*Re.dtick:(we-=.5,we+Re.dtick<Xe&&(we+=Re.dtick));else if(st<wr*.1&&(ot>wr*.3||Vt(Xe)||Vt($e))){var Lr=Re.dtick/2;we+=we+Lr<Xe?Lr:-Lr}return we}function ie(we,Me,Re,Xe,$e){var ot=e.findExactDates(Me,$e),st=.8;if(ot.exactDays>st){var yt=Number(Re.substr(1));ot.exactYears>st&&yt%12===0?we=Z.tickIncrement(we,"M6","reverse")+_*1.5:ot.exactMonths>st?we=Z.tickIncrement(we,"M1","reverse")+_*15.5:we-=f;var wt=Z.tickIncrement(we,Re);if(wt<=Xe)return wt}return we}Z.prepTicks=function(we,Me){var Re=e.simpleMap(we.range,we.r2l,void 0,void 0,Me);if(we._dtickInit=we.dtick,we._tick0Init=we.tick0,we.tickmode==="auto"||!we.dtick){var Xe=we.nticks,$e;Xe||(we.type==="category"||we.type==="multicategory"?($e=we.tickfont?e.bigFont(we.tickfont.size||12):15,Xe=we._length/$e):($e=we._id.charAt(0)==="y"?40:80,Xe=e.constrain(we._length/$e,4,9)+1),we._name==="radialaxis"&&(Xe*=2)),we.tickmode==="array"&&(Xe*=100),we._roughDTick=Math.abs(Re[1]-Re[0])/Xe,Z.autoTicks(we,we._roughDTick),we._minDtick>0&&we.dtick<we._minDtick*2&&(we.dtick=we._minDtick,we.tick0=we.l2r(we._forceTick0))}we.ticklabelmode==="period"&&xe(we),we.tick0||(we.tick0=we.type==="date"?"2000-01-01":0),we.type==="date"&&we.dtick<.1&&(we.dtick=.1),Ye(we)};function ue(we){return+we.substring(1)}function xe(we){var Me;function Re(){return!(l(we.dtick)||we.dtick.charAt(0)!=="M")}var Xe=Re(),$e=Z.getTickFormat(we);if($e){var ot=we._dtickInit!==we.dtick;/%[fLQsSMX]/.test($e)||(/%[HI]/.test($e)?(Me=L,ot&&!Xe&&we.dtick<L&&(we.dtick=L)):/%p/.test($e)?(Me=f,ot&&!Xe&&we.dtick<f&&(we.dtick=f)):/%[Aadejuwx]/.test($e)?(Me=_,ot&&!Xe&&we.dtick<_&&(we.dtick=_)):/%[UVW]/.test($e)?(Me=T,ot&&!Xe&&we.dtick<T&&(we.dtick=T)):/%[Bbm]/.test($e)?(Me=M,ot&&(Xe?ue(we.dtick)<1:we.dtick<x)&&(we.dtick="M1")):/%[q]/.test($e)?(Me=p,ot&&(Xe?ue(we.dtick)<3:we.dtick<A)&&(we.dtick="M3")):/%[Yy]/.test($e)&&(Me=g,ot&&(Xe?ue(we.dtick)<12:we.dtick<h)&&(we.dtick="M12")))}Xe=Re(),Xe&&we.tick0===we._dowTick0&&(we.tick0=we._rawTick0),we._definedDelta=Me}function he(we,Me,Re){for(var Xe=0;Xe<we.length;Xe++){var $e=we[Xe].value,ot=Xe,st=Xe+1;Xe<we.length-1?(ot=Xe,st=Xe+1):Xe>0?(ot=Xe-1,st=Xe):(ot=Xe,st=Xe);var yt=we[ot].value,wt=we[st].value,Vt=Math.abs(wt-yt),gr=Re||Vt,wr=0;gr>=h?Vt>=h&&Vt<=u?wr=Vt:wr=g:Re===p&&gr>=A?Vt>=A&&Vt<=y?wr=Vt:wr=p:gr>=x?Vt>=x&&Vt<=m?wr=Vt:wr=M:Re===T&&gr>=T?wr=T:gr>=_?wr=_:Re===f&&gr>=f?wr=f:Re===L&&gr>=L&&(wr=L);var Lr;wr>=Vt&&(wr=Vt,Lr=!0);var fr=$e+wr;if(Me.rangebreaks&&wr>0){for(var Fr=84,nn=0,yr=0;yr<Fr;yr++){var _r=(yr+.5)/Fr;Me.maskBreaks($e*(1-_r)+_r*fr)!==z&&nn++}wr*=nn/Fr,wr||(we[Xe].drop=!0),Lr&&Vt>T&&(wr=Vt)}(wr>0||Xe===0)&&(we[Xe].periodX=$e+wr/2)}}Z.calcTicks=function(Me,Re){Z.prepTicks(Me,Re);var Xe=e.simpleMap(Me.range,Me.r2l,void 0,void 0,Re);if(Me.tickmode==="array")return ge(Me);var $e=ee(Xe),ot=$e[0],st=$e[1],yt=Xe[1]<Xe[0],wt=Math.min(Xe[0],Xe[1]),Vt=Math.max(Xe[0],Xe[1]),gr=l(Me.dtick),wr=Me.type==="log"&&!(gr||Me.dtick.charAt(0)==="L"),Lr=Me.ticklabelmode==="period";if(Me._tmin=Z.tickFirst(Me,Re),Me._tmin<ot!==yt)return[];(Me.type==="category"||Me.type==="multicategory")&&(st=yt?Math.max(-.5,st):Math.min(Me._categories.length-.5,st));var fr=Me._tmin;Me.rangebreaks&&Me._tick0Init!==Me.tick0&&(fr=tr(fr,Me),yt||(fr=Z.tickIncrement(fr,Me.dtick,!yt,Me.calendar))),Lr&&(fr=Z.tickIncrement(fr,Me.dtick,!yt,Me.calendar));var Fr=Me.ticklabelstep,nn=Math.max(1e3,Me._length||0),yr=[],_r=null,dn;gr?dn=Me.dtick:Me.type==="date"?typeof Me.dtick=="string"&&Me.dtick.charAt(0)==="M"&&(dn=M*Me.dtick.substring(1)):dn=Me._roughDTick;for(var Yr=Math.round((Me.r2l(fr)-Me.r2l(Me.tick0))/dn)-1;yt?fr>=st:fr<=st;fr=Z.tickIncrement(fr,Me.dtick,yt,Me.calendar)){if(Yr++,Me.rangebreaks&&!yt){if(fr<ot)continue;if(Me.maskBreaks(fr)===z&&tr(fr,Me)>=Vt)break}if(yr.length>nn||fr===_r)break;_r=fr;var Ar=!1;wr&&fr!==(fr|0)&&(Ar=!0);var an={minor:Ar,value:fr};Fr>1&&Yr%Fr&&(an.skipLabel=!0),yr.push(an)}Lr&&he(yr,Me,Me._definedDelta);var rn;if(Me.rangebreaks){var Zr=Me._id.charAt(0)==="y",at=1;Me.tickmode==="auto"&&(at=Me.tickfont?Me.tickfont.size:12);var zt=NaN;for(rn=yr.length-1;rn>-1;rn--){if(yr[rn].drop){yr.splice(rn,1);continue}yr[rn].value=tr(yr[rn].value,Me);var er=Me.c2p(yr[rn].value);(Zr?zt>er-at:zt<er+at)?yr.splice(yt?rn+1:rn,1):zt=er}}Sr(Me)&&Math.abs(Xe[1]-Xe[0])===360&&yr.pop(),Me._tmax=(yr[yr.length-1]||{}).value,Me._prevDateHead="",Me._inCalcTicks=!0;var hr,Vr=function(En){En.text=" ",Me._prevDateHead=hr},Rr=[],Er,xr;for(rn=0;rn<yr.length;rn++){var Wr=yr[rn].minor,Rn=yr[rn].value;hr=Me._prevDateHead,Er=Z.tickText(Me,Rn,!1,Wr),xr=yr[rn].periodX,xr!==void 0&&(Er.periodX=xr,(xr>Vt||xr<wt)&&(xr>Vt&&(Er.periodX=Vt),xr<wt&&(Er.periodX=wt),Vr(Er))),yr[rn].skipLabel&&Vr(Er),Rr.push(Er)}return Me._inCalcTicks=!1,Rr};function ge(we){var Me=we.tickvals,Re=we.ticktext,Xe=new Array(Me.length),$e=e.simpleMap(we.range,we.r2l),ot=ee($e),st=Math.min(ot[0],ot[1]),yt=Math.max(ot[0],ot[1]),wt=0;Array.isArray(Re)||(Re=[]);var Vt=we.type==="category"?we.d2l_noadd:we.d2l;we.type==="log"&&String(we.dtick).charAt(0)!=="L"&&(we.dtick="L"+Math.pow(10,Math.floor(Math.min(we.range[0],we.range[1]))-1));for(var gr=0;gr<Me.length;gr++){var wr=Vt(Me[gr]);wr>st&&wr<yt&&(Re[gr]===void 0?Xe[wt]=Z.tickText(we,wr):Xe[wt]=qe(we,wr,String(Re[gr])),wt++)}return wt<Me.length&&Xe.splice(wt,Me.length-wt),we.rangebreaks&&(Xe=Xe.filter(function(Lr){return we.maskBreaks(Lr.x)!==z})),Xe}var me=[2,5,10],ke=[1,2,3,6,12],Ae=[1,2,5,10,15,30],Ne=[1,2,3,7,14],He=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Ge=[-.301,0,.301,.699,1],_e=[15,30,45,90,180];function De(we,Me,Re){return Me*e.roundUp(we/Me,Re)}Z.autoTicks=function(we,Me){var Re;function Xe(gr){return Math.pow(gr,Math.floor(Math.log(Me)/Math.LN10))}if(we.type==="date"){we.tick0=e.dateTick0(we.calendar,0);var $e=2*Me;if($e>g)Me/=g,Re=Xe(10),we.dtick="M"+12*De(Me,Re,me);else if($e>M)Me/=M,we.dtick="M"+De(Me,1,ke);else if($e>_){we.dtick=De(Me,_,we._hasDayOfWeekBreaks?[1,2,7,14]:Ne);var ot=Z.getTickFormat(we),st=we.ticklabelmode==="period";st&&(we._rawTick0=we.tick0),/%[uVW]/.test(ot)?we.tick0=e.dateTick0(we.calendar,2):we.tick0=e.dateTick0(we.calendar,1),st&&(we._dowTick0=we.tick0)}else $e>L?we.dtick=De(Me,L,ke):$e>S?we.dtick=De(Me,S,Ae):$e>k?we.dtick=De(Me,k,Ae):(Re=Xe(10),we.dtick=De(Me,Re,me))}else if(we.type==="log"){we.tick0=0;var yt=e.simpleMap(we.range,we.r2l);if(Me>.7)we.dtick=Math.ceil(Me);else if(Math.abs(yt[1]-yt[0])<1){var wt=1.5*Math.abs((yt[1]-yt[0])/Me);Me=Math.abs(Math.pow(10,yt[1])-Math.pow(10,yt[0]))/wt,Re=Xe(10),we.dtick="L"+De(Me,Re,me)}else we.dtick=Me>.3?"D2":"D1"}else we.type==="category"||we.type==="multicategory"?(we.tick0=0,we.dtick=Math.ceil(Math.max(Me,1))):Sr(we)?(we.tick0=0,Re=1,we.dtick=De(Me,Re,_e)):(we.tick0=0,Re=Xe(10),we.dtick=De(Me,Re,me));if(we.dtick===0&&(we.dtick=1),!l(we.dtick)&&typeof we.dtick!="string"){var Vt=we.dtick;throw we.dtick=1,"ax.dtick error: "+String(Vt)}};function Ye(we){var Me=we.dtick;if(we._tickexponent=0,!l(Me)&&typeof Me!="string"&&(Me=1),(we.type==="category"||we.type==="multicategory")&&(we._tickround=null),we.type==="date"){var Re=we.r2l(we.tick0),Xe=we.l2r(Re).replace(/(^-|i)/g,""),$e=Xe.length;if(String(Me).charAt(0)==="M")$e>10||Xe.substr(5)!=="01-01"?we._tickround="d":we._tickround=+Me.substr(1)%12===0?"y":"m";else if(Me>=_&&$e<=10||Me>=_*15)we._tickround="d";else if(Me>=S&&$e<=16||Me>=L)we._tickround="M";else if(Me>=k&&$e<=19||Me>=S)we._tickround="S";else{var ot=we.l2r(Re+Me).replace(/^-/,"").length;we._tickround=Math.max($e,ot)-20,we._tickround<0&&(we._tickround=4)}}else if(l(Me)||Me.charAt(0)==="L"){var st=we.range.map(we.r2d||Number);l(Me)||(Me=Number(Me.substr(1))),we._tickround=2-Math.floor(Math.log(Me)/Math.LN10+.01);var yt=Math.max(Math.abs(st[0]),Math.abs(st[1])),wt=Math.floor(Math.log(yt)/Math.LN10+.01),Vt=we.minexponent===void 0?3:we.minexponent;Math.abs(wt)>Vt&&(Nt(we.exponentformat)&&!Lt(wt)?we._tickexponent=3*Math.round((wt-1)/3):we._tickexponent=wt)}else we._tickround=null}Z.tickIncrement=function(we,Me,Re,Xe){var $e=Re?-1:1;if(l(Me))return e.increment(we,$e*Me);var ot=Me.charAt(0),st=$e*Number(Me.substr(1));if(ot==="M")return e.incrementMonth(we,st,Xe);if(ot==="L")return Math.log(Math.pow(10,we)+st)/Math.LN10;if(ot==="D"){var yt=Me==="D2"?Ge:He,wt=we+$e*.01,Vt=e.roundUp(e.mod(wt,1),yt,Re);return Math.floor(wt)+Math.log(d.round(Math.pow(10,Vt),1))/Math.LN10}throw"unrecognized dtick "+String(Me)},Z.tickFirst=function(we,Me){var Re=we.r2l||Number,Xe=e.simpleMap(we.range,Re,void 0,void 0,Me),$e=Xe[1]<Xe[0],ot=$e?Math.floor:Math.ceil,st=ee(Xe)[0],yt=we.dtick,wt=Re(we.tick0);if(l(yt)){var Vt=ot((st-wt)/yt)*yt+wt;return(we.type==="category"||we.type==="multicategory")&&(Vt=e.constrain(Vt,0,we._categories.length-1)),Vt}var gr=yt.charAt(0),wr=Number(yt.substr(1));if(gr==="M"){for(var Lr=0,fr=wt,Fr,nn,yr;Lr<10;){if(Fr=Z.tickIncrement(fr,yt,$e,we.calendar),(Fr-st)*(fr-st)<=0)return $e?Math.min(fr,Fr):Math.max(fr,Fr);nn=(st-(fr+Fr)/2)/(Fr-fr),yr=gr+(Math.abs(Math.round(nn))||1)*wr,fr=Z.tickIncrement(fr,yr,nn<0?!$e:$e,we.calendar),Lr++}return e.error("tickFirst did not converge",we),fr}else{if(gr==="L")return Math.log(ot((Math.pow(10,st)-wt)/wr)*wr+wt)/Math.LN10;if(gr==="D"){var _r=yt==="D2"?Ge:He,dn=e.roundUp(e.mod(st,1),_r,$e);return Math.floor(st)+Math.log(d.round(Math.pow(10,dn),1))/Math.LN10}else throw"unrecognized dtick "+String(yt)}},Z.tickText=function(we,Me,Re,Xe){var $e=qe(we,Me),ot=we.tickmode==="array",st=Re||ot,yt=we.type,wt=yt==="category"?we.d2l_noadd:we.d2l,Vt;if(ot&&Array.isArray(we.ticktext)){var gr=e.simpleMap(we.range,we.r2l),wr=(Math.abs(gr[1]-gr[0])-(we._lBreaks||0))/1e4;for(Vt=0;Vt<we.ticktext.length&&!(Math.abs(Me-wt(we.tickvals[Vt]))<wr);Vt++);if(Vt<we.ticktext.length)return $e.text=String(we.ticktext[Vt]),$e}function Lr(nn){if(nn===void 0)return!0;if(Re)return nn==="none";var yr={first:we._tmin,last:we._tmax}[nn];return nn!=="all"&&Me!==yr}var fr=Re?"never":we.exponentformat!=="none"&&Lr(we.showexponent)?"hide":"";if(yt==="date"?Ue(we,$e,Re,st):yt==="log"?Ie(we,$e,Re,st,fr):yt==="category"?Ve(we,$e):yt==="multicategory"?dt(we,$e,Re):Sr(we)?Yt(we,$e,Re,st,fr):Dt(we,$e,Re,st,fr),Xe||(we.tickprefix&&!Lr(we.showtickprefix)&&($e.text=we.tickprefix+$e.text),we.ticksuffix&&!Lr(we.showticksuffix)&&($e.text+=we.ticksuffix)),we.tickson==="boundaries"||we.showdividers){var Fr=function(nn){var yr=we.l2p(nn);return yr>=0&&yr<=we._length?nn:null};$e.xbnd=[Fr($e.x-.5),Fr($e.x+we.dtick-.5)]}return $e},Z.hoverLabelText=function(we,Me,Re){Re&&(we=e.extendFlat({},we,{hoverformat:Re}));var Xe=Array.isArray(Me)?Me[0]:Me,$e=Array.isArray(Me)?Me[1]:void 0;if($e!==void 0&&$e!==Xe)return Z.hoverLabelText(we,Xe,Re)+" - "+Z.hoverLabelText(we,$e,Re);var ot=we.type==="log"&&Xe<=0,st=Z.tickText(we,we.c2l(ot?-Xe:Xe),"hover").text;return ot?Xe===0?"0":P+st:st};function qe(we,Me,Re){var Xe=we.tickfont||{};return{x:Me,dx:0,dy:0,text:Re||"",fontSize:Xe.size,font:Xe.family,fontColor:Xe.color}}function Ue(we,Me,Re,Xe){var $e=we._tickround,ot=Re&&we.hoverformat||Z.getTickFormat(we);Xe&&(l($e)?$e=4:$e={y:"m",m:"d",d:"M",M:"S",S:4}[$e]);var st=e.formatDate(Me.x,ot,$e,we._dateFormat,we.calendar,we._extraFormat),yt,wt=st.indexOf(`
`);if(wt!==-1&&(yt=st.substr(wt+1),st=st.substr(0,wt)),Xe&&(st==="00:00:00"||st==="00:00"?(st=yt,yt=""):st.length===8&&(st=st.replace(/:00$/,""))),yt)if(Re)$e==="d"?st+=", "+yt:st=yt+(st?", "+st:"");else if(!we._inCalcTicks||we._prevDateHead!==yt)we._prevDateHead=yt,st+="<br>"+yt;else{var Vt=Nr(we),gr=we._trueSide||we.side;(!Vt&&gr==="top"||Vt&&gr==="bottom")&&(st+="<br> ")}Me.text=st}function Ie(we,Me,Re,Xe,$e){var ot=we.dtick,st=Me.x,yt=we.tickformat,wt=typeof ot=="string"&&ot.charAt(0);if($e==="never"&&($e=""),Xe&&wt!=="L"&&(ot="L3",wt="L"),yt||wt==="L")Me.text=St(Math.pow(10,st),we,$e,Xe);else if(l(ot)||wt==="D"&&e.mod(st+.01,1)<.1){var Vt=Math.round(st),gr=Math.abs(Vt),wr=we.exponentformat;wr==="power"||Nt(wr)&&Lt(Vt)?(Vt===0?Me.text=1:Vt===1?Me.text="10":Me.text="10<sup>"+(Vt>1?"":P)+gr+"</sup>",Me.fontSize*=1.25):(wr==="e"||wr==="E")&&gr>2?Me.text="1"+wr+(Vt>0?"+":P)+gr:(Me.text=St(Math.pow(10,st),we,"","fakehover"),ot==="D1"&&we._id.charAt(0)==="y"&&(Me.dy-=Me.fontSize/6))}else if(wt==="D")Me.text=String(Math.round(Math.pow(10,e.mod(st,1)))),Me.fontSize*=.75;else throw"unrecognized dtick "+String(ot);if(we.dtick==="D1"){var Lr=String(Me.text).charAt(0);(Lr==="0"||Lr==="1")&&(we._id.charAt(0)==="y"?Me.dx-=Me.fontSize/4:(Me.dy+=Me.fontSize/2,Me.dx+=(we.range[1]>we.range[0]?1:-1)*Me.fontSize*(st<0?.5:.25)))}}function Ve(we,Me){var Re=we._categories[Math.round(Me.x)];Re===void 0&&(Re=""),Me.text=String(Re)}function dt(we,Me,Re){var Xe=Math.round(Me.x),$e=we._categories[Xe]||[],ot=$e[1]===void 0?"":String($e[1]),st=$e[0]===void 0?"":String($e[0]);Re?Me.text=st+" - "+ot:(Me.text=ot,Me.text2=st)}function Dt(we,Me,Re,Xe,$e){$e==="never"?$e="":we.showexponent==="all"&&Math.abs(Me.x/we.dtick)<1e-6&&($e="hide"),Me.text=St(Me.x,we,$e,Xe)}function Yt(we,Me,Re,Xe,$e){if(we.thetaunit==="radians"&&!Re){var ot=Me.x/180;if(ot===0)Me.text="0";else{var st=kt(ot);if(st[1]>=100)Me.text=St(e.deg2rad(Me.x),we,$e,Xe);else{var yt=Me.x<0;st[1]===1?st[0]===1?Me.text="\u03C0":Me.text=st[0]+"\u03C0":Me.text=["<sup>",st[0],"</sup>","\u2044","<sub>",st[1],"</sub>","\u03C0"].join(""),yt&&(Me.text=P+Me.text)}}}else Me.text=St(Me.x,we,$e,Xe)}function kt(we){function Me(yt,wt){return Math.abs(yt-wt)<=1e-6}function Re(yt,wt){return Me(wt,0)?yt:Re(wt,yt%wt)}function Xe(yt){for(var wt=1;!Me(Math.round(yt*wt)/wt,yt);)wt*=10;return wt}var $e=Xe(we),ot=we*$e,st=Math.abs(Re(ot,$e));return[Math.round(ot/st),Math.round($e/st)]}var Ft=["f","p","n","\u03BC","m","","k","M","G","T"];function Nt(we){return we==="SI"||we==="B"}function Lt(we){return we>14||we<-15}function St(we,Me,Re,Xe){var $e=we<0,ot=Me._tickround,st=Re||Me.exponentformat||"B",yt=Me._tickexponent,wt=Z.getTickFormat(Me),Vt=Me.separatethousands;if(Xe){var gr={exponentformat:st,minexponent:Me.minexponent,dtick:Me.showexponent==="none"?Me.dtick:l(we)&&Math.abs(we)||1,range:Me.showexponent==="none"?Me.range.map(Me.r2d):[0,we||1]};Ye(gr),ot=(Number(gr._tickround)||0)+4,yt=gr._tickexponent,Me.hoverformat&&(wt=Me.hoverformat)}if(wt)return Me._numFormat(wt)(we).replace(/-/g,P);var wr=Math.pow(10,-ot)/2;if(st==="none"&&(yt=0),we=Math.abs(we),we<wr)we="0",$e=!1;else{if(we+=wr,yt&&(we*=Math.pow(10,-yt),ot+=yt),ot===0)we=String(Math.floor(we));else if(ot<0){we=String(Math.round(we)),we=we.substr(0,we.length+ot);for(var Lr=ot;Lr<0;Lr++)we+="0"}else{we=String(we);var fr=we.indexOf(".")+1;fr&&(we=we.substr(0,fr+ot).replace(/\.?0+$/,""))}we=e.numSeparate(we,Me._separators,Vt)}if(yt&&st!=="hide"){Nt(st)&&Lt(yt)&&(st="power");var Fr;yt<0?Fr=P+-yt:st!=="power"?Fr="+"+yt:Fr=String(yt),st==="e"||st==="E"?we+=st+Fr:st==="power"?we+="\xD710<sup>"+Fr+"</sup>":st==="B"&&yt===9?we+="B":Nt(st)&&(we+=Ft[yt/3+5])}return $e?P+we:we}Z.getTickFormat=function(we){var Me;function Re(wt){return typeof wt!="string"?wt:Number(wt.replace("M",""))*M}function Xe(wt,Vt){var gr=["L","D"];if(typeof wt==typeof Vt){if(typeof wt=="number")return wt-Vt;var wr=gr.indexOf(wt.charAt(0)),Lr=gr.indexOf(Vt.charAt(0));return wr===Lr?Number(wt.replace(/(L|D)/g,""))-Number(Vt.replace(/(L|D)/g,"")):wr-Lr}else return typeof wt=="number"?1:-1}function $e(wt,Vt,gr){var wr=gr||function(Fr){return Fr},Lr=Vt[0],fr=Vt[1];return(!Lr&&typeof Lr!="number"||wr(Lr)<=wr(wt))&&(!fr&&typeof fr!="number"||wr(fr)>=wr(wt))}function ot(wt,Vt){var gr=Vt[0]===null,wr=Vt[1]===null,Lr=Xe(wt,Vt[0])>=0,fr=Xe(wt,Vt[1])<=0;return(gr||Lr)&&(wr||fr)}var st,yt;if(we.tickformatstops&&we.tickformatstops.length>0)switch(we.type){case"date":case"linear":{for(Me=0;Me<we.tickformatstops.length;Me++)if(yt=we.tickformatstops[Me],yt.enabled&&$e(we.dtick,yt.dtickrange,Re)){st=yt;break}break}case"log":{for(Me=0;Me<we.tickformatstops.length;Me++)if(yt=we.tickformatstops[Me],yt.enabled&&ot(we.dtick,yt.dtickrange)){st=yt;break}break}}return st?st.value:we.tickformat},Z.getSubplots=function(we,Me){var Re=we._fullLayout._subplots,Xe=Re.cartesian.concat(Re.gl2d||[]),$e=Me?Z.findSubplotsWithAxis(Xe,Me):Xe;return $e.sort(function(ot,st){var yt=ot.substr(1).split("y"),wt=st.substr(1).split("y");return yt[0]===wt[0]?+yt[1]-+wt[1]:+yt[0]-+wt[0]}),$e},Z.findSubplotsWithAxis=function(we,Me){for(var Re=new RegExp(Me._id.charAt(0)==="x"?"^"+Me._id+"y":Me._id+"$"),Xe=[],$e=0;$e<we.length;$e++){var ot=we[$e];Re.test(ot)&&Xe.push(ot)}return Xe},Z.makeClipPaths=function(we){var Me=we._fullLayout;if(!Me._hasOnlyLargeSploms){var Re={_offset:0,_length:Me.width,_id:""},Xe={_offset:0,_length:Me.height,_id:""},$e=Z.list(we,"x",!0),ot=Z.list(we,"y",!0),st=[],yt,wt;for(yt=0;yt<$e.length;yt++)for(st.push({x:$e[yt],y:Xe}),wt=0;wt<ot.length;wt++)yt===0&&st.push({x:Re,y:ot[wt]}),st.push({x:$e[yt],y:ot[wt]});var Vt=Me._clips.selectAll(".axesclip").data(st,function(gr){return gr.x._id+gr.y._id});Vt.enter().append("clipPath").classed("axesclip",!0).attr("id",function(gr){return"clip"+Me._uid+gr.x._id+gr.y._id}).append("rect"),Vt.exit().remove(),Vt.each(function(gr){d.select(this).select("rect").attr({x:gr.x._offset||0,y:gr.y._offset||0,width:gr.x._length||1,height:gr.y._length||1})})}},Z.draw=function(we,Me,Re){var Xe=we._fullLayout;Me==="redraw"&&Xe._paper.selectAll("g.subplot").each(function(ot){var st=ot[0],yt=Xe._plots[st];if(yt){var wt=yt.xaxis,Vt=yt.yaxis;yt.xaxislayer.selectAll("."+wt._id+"tick").remove(),yt.yaxislayer.selectAll("."+Vt._id+"tick").remove(),yt.xaxislayer.selectAll("."+wt._id+"tick2").remove(),yt.yaxislayer.selectAll("."+Vt._id+"tick2").remove(),yt.xaxislayer.selectAll("."+wt._id+"divider").remove(),yt.yaxislayer.selectAll("."+Vt._id+"divider").remove(),yt.gridlayer&&yt.gridlayer.selectAll("path").remove(),yt.zerolinelayer&&yt.zerolinelayer.selectAll("path").remove(),Xe._infolayer.select(".g-"+wt._id+"title").remove(),Xe._infolayer.select(".g-"+Vt._id+"title").remove()}});var $e=!Me||Me==="redraw"?Z.listIds(we):Me;return e.syncOrAsync($e.map(function(ot){return function(){if(!!ot){var st=Z.getFromId(we,ot),yt=Z.drawOne(we,st,Re);return st._r=st.range.slice(),st._rl=e.simpleMap(st._r,st.r2l),yt}}}))},Z.drawOne=function(we,Me,Re){Re=Re||{};var Xe,$e,ot;Me.setScale();var st=we._fullLayout,yt=Me._id,wt=yt.charAt(0),Vt=Z.counterLetter(yt),gr=st._plots[Me._mainSubplot];if(!gr)return;var wr=gr[wt+"axislayer"],Lr=Me._mainLinePosition,fr=Me._mainMirrorPosition,Fr=Me._vals=Z.calcTicks(Me),nn=[Me.mirror,Lr,fr].join("_");for(Xe=0;Xe<Fr.length;Xe++)Fr[Xe].axInfo=nn;Me._selections={},Me._tickAngles&&(Me._prevTickAngles=Me._tickAngles),Me._tickAngles={},Me._depth=null;var yr={};function _r(ca){var ta=yt+(ca||"tick");return yr[ta]||(yr[ta]=Ce(Me,ta)),yr[ta]}if(!!Me.visible){var dn=Z.makeTransTickFn(Me),Yr=Z.makeTransTickLabelFn(Me),Ar,an,rn=Me.ticks==="inside",Zr=Me.ticks==="outside";if(Me.tickson==="boundaries"){var at=it(Me,Fr);an=Z.clipEnds(Me,at),Ar=rn?an:at}else an=Z.clipEnds(Me,Fr),Ar=rn&&Me.ticklabelmode!=="period"?an:Fr;var zt=Me._gridVals=an,er=Qe(Me,Fr);if(!st._hasOnlyLargeSploms){var hr=Me._subplotsWith,Vr={};for(Xe=0;Xe<hr.length;Xe++){$e=hr[Xe],ot=st._plots[$e];var Rr=ot[Vt+"axis"],Er=Rr._mainAxis._id;if(!Vr[Er]){Vr[Er]=1;var xr=wt==="x"?"M0,"+Rr._offset+"v"+Rr._length:"M"+Rr._offset+",0h"+Rr._length;Z.drawGrid(we,Me,{vals:zt,counterAxis:Rr,layer:ot.gridlayer.select("."+yt),path:xr,transFn:dn}),Z.drawZeroLine(we,Me,{counterAxis:Rr,layer:ot.zerolinelayer,path:xr,transFn:dn})}}}var Wr=Z.getTickSigns(Me),Rn=[];if(Me.ticks){var En=Z.makeTickPath(Me,Lr,Wr[2]),ea,ia;Me._anchorAxis&&Me.mirror&&Me.mirror!==!0?(ea=Z.makeTickPath(Me,fr,Wr[3]),ia=En+ea):(ea="",ia=En);var Aa;if(Me.showdividers&&Zr&&Me.tickson==="boundaries"){var ya={};for(Xe=0;Xe<er.length;Xe++)ya[er[Xe].x]=1;Aa=function(ca){return ya[ca.x]?ea:ia}}else Aa=ia;Z.drawTicks(we,Me,{vals:Ar,layer:wr,path:Aa,transFn:dn}),Me.mirror==="allticks"&&(Rn=Object.keys(Me._linepositions||{}))}for(Xe=0;Xe<Rn.length;Xe++){$e=Rn[Xe],ot=st._plots[$e];var pr=Me._linepositions[$e]||[],vn=Z.makeTickPath(Me,pr[0],Wr[0])+Z.makeTickPath(Me,pr[1],Wr[1]);Z.drawTicks(we,Me,{vals:Ar,layer:ot[wt+"axislayer"],path:vn,transFn:dn})}var $r=[];if($r.push(function(){return Z.drawLabels(we,Me,{vals:Fr,layer:wr,plotinfo:ot,transFn:Yr,labelFns:Z.makeLabelFns(Me,Lr)})}),Me.type==="multicategory"){var Fn={x:2,y:10}[wt];$r.push(function(){var ca={x:"height",y:"width"}[wt],ta=_r()[ca]+Fn+(Me._tickAngles[yt+"tick"]?Me.tickfont.size*q:0);return Z.drawLabels(we,Me,{vals:ht(Me,Fr),layer:wr,cls:yt+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:dn,labelFns:Z.makeLabelFns(Me,Lr+ta*Wr[4])})}),$r.push(function(){return Me._depth=Wr[4]*(_r("tick2")[Me.side]-Lr),Pt(we,Me,{vals:er,layer:wr,path:Z.makeTickPath(Me,Lr,Wr[4],Me._depth),transFn:dn})})}else Me.title.hasOwnProperty("standoff")&&$r.push(function(){Me._depth=Wr[4]*(_r()[Me.side]-Lr)});var Bn=w.getComponentMethod("rangeslider","isVisible")(Me);return $r.push(function(){var ca=Me.side.charAt(0),ta=J[Me.side].charAt(0),Un=Z.getPxPosition(we,Me),la=Zr?Me.ticklen:0,da,ur,Dr,sn;if((Me.automargin||Bn)&&(Me.type==="multicategory"?da=_r("tick2"):(da=_r(),wt==="x"&&ca==="b"&&(Me._depth=Math.max(da.width>0?da.bottom-Un:0,la)))),Me.automargin){ur={x:0,y:0,r:0,l:0,t:0,b:0};var tn=[0,1];if(wt==="x"){if(ca==="b"?ur[ca]=Me._depth:(ur[ca]=Me._depth=Math.max(da.width>0?Un-da.top:0,la),tn.reverse()),da.width>0){var mn=da.right-(Me._offset+Me._length);mn>0&&(ur.xr=1,ur.r=mn);var wn=Me._offset-da.left;wn>0&&(ur.xl=0,ur.l=wn)}}else if(ca==="l"?ur[ca]=Me._depth=Math.max(da.height>0?Un-da.left:0,la):(ur[ca]=Me._depth=Math.max(da.height>0?da.right-Un:0,la),tn.reverse()),da.height>0){var gn=da.bottom-(Me._offset+Me._length);gn>0&&(ur.yb=0,ur.b=gn);var mr=Me._offset-da.top;mr>0&&(ur.yt=1,ur.t=mr)}ur[Vt]=Me.anchor==="free"?Me.position:Me._anchorAxis.domain[tn[0]],Me.title.text!==st._dfltTitle[wt]&&(ur[ca]+=Tt(Me)+(Me.title.standoff||0)),Me.mirror&&Me.anchor!=="free"&&(Dr={x:0,y:0,r:0,l:0,t:0,b:0},Dr[ta]=Me.linewidth,Me.mirror&&Me.mirror!==!0&&(Dr[ta]+=la),Me.mirror===!0||Me.mirror==="ticks"?Dr[Vt]=Me._anchorAxis.domain[tn[1]]:(Me.mirror==="all"||Me.mirror==="allticks")&&(Dr[Vt]=[Me._counterDomainMin,Me._counterDomainMax][tn[1]]))}Bn&&(sn=w.getComponentMethod("rangeslider","autoMarginOpts")(we,Me)),b.autoMargin(we,pt(Me),ur),b.autoMargin(we,Et(Me),Dr),b.autoMargin(we,ar(Me),sn)}),!Re.skipTitle&&!(Bn&&Me.side==="bottom")&&$r.push(function(){return Ot(we,Me)}),e.syncOrAsync($r)}};function it(we,Me){var Re=[],Xe,$e=function(ot,st){var yt=ot.xbnd[st];yt!==null&&Re.push(e.extendFlat({},ot,{x:yt}))};if(Me.length){for(Xe=0;Xe<Me.length;Xe++)$e(Me[Xe],0);$e(Me[Xe-1],1)}return Re}function ht(we,Me){for(var Re=[],Xe={},$e=0;$e<Me.length;$e++){var ot=Me[$e];Xe[ot.text2]?Xe[ot.text2].push(ot.x):Xe[ot.text2]=[ot.x]}for(var st in Xe)Re.push(qe(we,e.interp(Xe[st],.5),st));return Re}function Qe(we,Me){var Re=[],Xe,$e,ot=Me.length&&Me[Me.length-1].x<Me[0].x,st=function(wt,Vt){var gr=wt.xbnd[Vt];gr!==null&&Re.push(e.extendFlat({},wt,{x:gr}))};if(we.showdividers&&Me.length){for(Xe=0;Xe<Me.length;Xe++){var yt=Me[Xe];yt.text2!==$e&&st(yt,ot?1:0),$e=yt.text2}st(Me[Xe-1],ot?0:1)}return Re}function Ce(we,Me){var Re,Xe,$e,ot;return we._selections[Me].size()?(Re=1/0,Xe=-1/0,$e=1/0,ot=-1/0,we._selections[Me].each(function(){var st=Je(this),yt=c.bBox(st.node().parentNode);Re=Math.min(Re,yt.top),Xe=Math.max(Xe,yt.bottom),$e=Math.min($e,yt.left),ot=Math.max(ot,yt.right)})):(Re=0,Xe=0,$e=0,ot=0),{top:Re,bottom:Xe,left:$e,right:ot,height:Xe-Re,width:ot-$e}}Z.getTickSigns=function(we){var Me=we._id.charAt(0),Re={x:"top",y:"right"}[Me],Xe=we.side===Re?1:-1,$e=[-1,1,Xe,-Xe];return we.ticks!=="inside"==(Me==="x")&&($e=$e.map(function(ot){return-ot})),we.side&&$e.push({l:-1,t:-1,r:1,b:1}[we.side.charAt(0)]),$e},Z.makeTransTickFn=function(we){return we._id.charAt(0)==="x"?function(Me){return o(we._offset+we.l2p(Me.x),0)}:function(Me){return o(0,we._offset+we.l2p(Me.x))}},Z.makeTransTickLabelFn=function(we){var Me=rt(we),Re=Me[0],Xe=Me[1];return we._id.charAt(0)==="x"?function($e){return o(Re+we._offset+we.l2p(je($e)),Xe)}:function($e){return o(Xe,Re+we._offset+we.l2p(je($e)))}};function je(we){return we.periodX!==void 0?we.periodX:we.x}function rt(we){var Me=we.ticklabelposition||"",Re=function(fr){return Me.indexOf(fr)!==-1},Xe=Re("top"),$e=Re("left"),ot=Re("right"),st=Re("bottom"),yt=Re("inside"),wt=st||$e||Xe||ot;if(!wt&&!yt)return[0,0];var Vt=we.side,gr=wt?(we.tickwidth||0)/2:0,wr=X,Lr=we.tickfont?we.tickfont.size:12;return(st||Xe)&&(gr+=Lr*W,wr+=(we.linewidth||0)/2),($e||ot)&&(gr+=(we.linewidth||0)/2,wr+=X),yt&&Vt==="top"&&(wr-=Lr*(1-W)),($e||Xe)&&(gr=-gr),(Vt==="bottom"||Vt==="right")&&(wr=-wr),[wt?gr:0,yt?wr:0]}Z.makeTickPath=function(we,Me,Re,Xe){Xe=Xe!==void 0?Xe:we.ticklen;var $e=we._id.charAt(0),ot=(we.linewidth||1)/2;return $e==="x"?"M0,"+(Me+ot*Re)+"v"+Xe*Re:"M"+(Me+ot*Re)+",0h"+Xe*Re},Z.makeLabelFns=function(we,Me,Re){var Xe=we.ticklabelposition||"",$e=function(Vr){return Xe.indexOf(Vr)!==-1},ot=$e("top"),st=$e("left"),yt=$e("right"),wt=$e("bottom"),Vt=wt||st||ot||yt,gr=$e("inside"),wr=Xe==="inside"&&we.ticks==="inside"||!gr&&we.ticks==="outside"&&we.tickson!=="boundaries",Lr=0,fr=0,Fr=wr?we.ticklen:0;if(gr?Fr*=-1:Vt&&(Fr=0),wr&&(Lr+=Fr,Re)){var nn=e.deg2rad(Re);Lr=Fr*Math.cos(nn)+1,fr=Fr*Math.sin(nn)}we.showticklabels&&(wr||we.showline)&&(Lr+=.2*we.tickfont.size),Lr+=(we.linewidth||1)/2*(gr?-1:1);var yr={labelStandoff:Lr,labelShift:fr},_r,dn,Yr,Ar,an=0,rn=we.side,Zr=we._id.charAt(0),at=we.tickangle,zt;if(Zr==="x")zt=!gr&&rn==="bottom"||gr&&rn==="top",Ar=zt?1:-1,gr&&(Ar*=-1),_r=fr*Ar,dn=Me+Lr*Ar,Yr=zt?1:-.2,Math.abs(at)===90&&(gr?Yr+=G:at===-90&&rn==="bottom"?Yr=W:at===90&&rn==="top"?Yr=G:Yr=.5,an=G/2*(at/90)),yr.xFn=function(Vr){return Vr.dx+_r+an*Vr.fontSize},yr.yFn=function(Vr){return Vr.dy+dn+Vr.fontSize*Yr},yr.anchorFn=function(Vr,Rr){if(Vt){if(st)return"end";if(yt)return"start"}return!l(Rr)||Rr===0||Rr===180?"middle":Rr*Ar<0!==gr?"end":"start"},yr.heightFn=function(Vr,Rr,Er){return Rr<-60||Rr>60?-.5*Er:we.side==="top"!==gr?-Er:0};else if(Zr==="y"){if(zt=!gr&&rn==="left"||gr&&rn==="right",Ar=zt?1:-1,gr&&(Ar*=-1),_r=Lr,dn=fr*Ar,Yr=0,!gr&&Math.abs(at)===90&&(at===-90&&rn==="left"||at===90&&rn==="right"?Yr=W:Yr=.5),gr){var er=l(at)?+at:0;if(er!==0){var hr=e.deg2rad(er);an=Math.abs(Math.sin(hr))*W*Ar,Yr=0}}yr.xFn=function(Vr){return Vr.dx+Me-(_r+Vr.fontSize*Yr)*Ar+an*Vr.fontSize},yr.yFn=function(Vr){return Vr.dy+dn+Vr.fontSize*G},yr.anchorFn=function(Vr,Rr){return l(Rr)&&Math.abs(Rr)===90?"middle":zt?"end":"start"},yr.heightFn=function(Vr,Rr,Er){return we.side==="right"&&(Rr*=-1),Rr<-30?-Er:Rr<30?-.5*Er:0}}return yr};function ut(we){return[we.text,we.x,we.axInfo,we.font,we.fontSize,we.fontColor].join("_")}Z.drawTicks=function(we,Me,Re){Re=Re||{};var Xe=Me._id+"tick",$e=Re.vals;Me.ticklabelmode==="period"&&($e=$e.slice(),$e.shift());var ot=Re.layer.selectAll("path."+Xe).data(Me.ticks?$e:[],ut);ot.exit().remove(),ot.enter().append("path").classed(Xe,1).classed("ticks",1).classed("crisp",Re.crisp!==!1).call(n.stroke,Me.tickcolor).style("stroke-width",c.crispRound(we,Me.tickwidth,1)+"px").attr("d",Re.path).style("display",null),et(Me,[D]),ot.attr("transform",Re.transFn)},Z.drawGrid=function(we,Me,Re){Re=Re||{};var Xe=Me._id+"grid",$e=Re.vals,ot=Re.counterAxis;if(Me.showgrid===!1)$e=[];else if(ot&&Z.shouldShowZeroLine(we,Me,ot))for(var st=Me.tickmode==="array",yt=0;yt<$e.length;yt++){var wt=$e[yt].x;if(st?!wt:Math.abs(wt)<Me.dtick/100)if($e=$e.slice(0,yt).concat($e.slice(yt+1)),st)yt--;else break}var Vt=Re.layer.selectAll("path."+Xe).data($e,ut);Vt.exit().remove(),Vt.enter().append("path").classed(Xe,1).classed("crisp",Re.crisp!==!1),Me._gw=c.crispRound(we,Me.gridwidth,1),Vt.attr("transform",Re.transFn).attr("d",Re.path).call(n.stroke,Me.gridcolor||"#ddd").style("stroke-width",Me._gw+"px").style("display",null),et(Me,[R]),typeof Re.path=="function"&&Vt.attr("d",Re.path)},Z.drawZeroLine=function(we,Me,Re){Re=Re||Re;var Xe=Me._id+"zl",$e=Z.shouldShowZeroLine(we,Me,Re.counterAxis),ot=Re.layer.selectAll("path."+Xe).data($e?[{x:0,id:Me._id}]:[]);ot.exit().remove(),ot.enter().append("path").classed(Xe,1).classed("zl",1).classed("crisp",Re.crisp!==!1).each(function(){Re.layer.selectAll("path").sort(function(st,yt){return oe(st.id,yt.id)})}),ot.attr("transform",Re.transFn).attr("d",Re.path).call(n.stroke,Me.zerolinecolor||n.defaultLine).style("stroke-width",c.crispRound(we,Me.zerolinewidth,Me._gw||1)+"px").style("display",null),et(Me,[I])},Z.drawLabels=function(we,Me,Re){Re=Re||{};var Xe=we._fullLayout,$e=Me._id,ot=$e.charAt(0),st=Re.cls||$e+"tick",yt=Re.vals,wt=Re.labelFns,Vt=Re.secondary?0:Me.tickangle,gr=(Me._prevTickAngles||{})[st],wr=Re.layer.selectAll("g."+st).data(Me.showticklabels?yt:[],ut),Lr=[];wr.enter().append("g").classed(st,1).append("text").attr("text-anchor","middle").each(function(Ar){var an=d.select(this),rn=we._promises.length;an.call(a.positionText,wt.xFn(Ar),wt.yFn(Ar)).call(c.font,Ar.font,Ar.fontSize,Ar.fontColor).text(Ar.text).call(a.convertToTspans,we),we._promises[rn]?Lr.push(we._promises.pop().then(function(){fr(an,Vt)})):fr(an,Vt)}),et(Me,[O]),wr.exit().remove(),Re.repositionOnUpdate&&wr.each(function(Ar){d.select(this).select("text").call(a.positionText,wt.xFn(Ar),wt.yFn(Ar))});function fr(Ar,an){Ar.each(function(rn){var Zr=d.select(this),at=Zr.select(".text-math-group"),zt=wt.anchorFn(rn,an),er=Re.transFn.call(Zr.node(),rn)+(l(an)&&+an!=0?" rotate("+an+","+wt.xFn(rn)+","+(wt.yFn(rn)-rn.fontSize/2)+")":""),hr=a.lineCount(Zr),Vr=q*rn.fontSize,Rr=wt.heightFn(rn,l(an)?+an:0,(hr-1)*Vr);if(Rr&&(er+=o(0,Rr)),at.empty()){var Er=Zr.select("text");Er.attr({transform:er,"text-anchor":zt}),Er.style("opacity",1),Me._adjustTickLabelsOverflow&&Me._adjustTickLabelsOverflow()}else{var xr=c.bBox(at.node()).width,Wr=xr*{end:-.5,start:.5}[zt];at.attr("transform",er+o(Wr,0))}})}Me._adjustTickLabelsOverflow=function(){var Ar=Me.ticklabeloverflow;if(!(!Ar||Ar==="allow")){var an=Ar.indexOf("hide")!==-1,rn=Me._id.charAt(0)==="x",Zr=0,at=rn?we._fullLayout.width:we._fullLayout.height;if(Ar.indexOf("domain")!==-1){var zt=e.simpleMap(Me.range,Me.r2l);Zr=Me.l2p(zt[0])+Me._offset,at=Me.l2p(zt[1])+Me._offset}var er=Math.min(Zr,at),hr=Math.max(Zr,at),Vr=Me.side,Rr=1/0,Er=-1/0;wr.each(function(En){var ea=d.select(this),ia=ea.select(".text-math-group");if(ia.empty()){var Aa=c.bBox(ea.node()),ya=0;rn?(Aa.right>hr||Aa.left<er)&&(ya=1):(Aa.bottom>hr||Aa.top+(Me.tickangle?0:En.fontSize/4)<er)&&(ya=1);var pr=ea.select("text");ya?an&&pr.style("opacity",0):(pr.style("opacity",1),Vr==="bottom"||Vr==="right"?Rr=Math.min(Rr,rn?Aa.top:Aa.left):Rr=-1/0,Vr==="top"||Vr==="left"?Er=Math.max(Er,rn?Aa.bottom:Aa.right):Er=1/0)}});for(var xr in Xe._plots){var Wr=Xe._plots[xr];if(!(Me._id!==Wr.xaxis._id&&Me._id!==Wr.yaxis._id)){var Rn=rn?Wr.yaxis:Wr.xaxis;Rn&&(Rn["_visibleLabelMin_"+Me._id]=Rr,Rn["_visibleLabelMax_"+Me._id]=Er)}}}},Me._hideCounterAxisInsideTickLabels=function(Ar){var an=Me._id.charAt(0)==="x",rn=[];for(var Zr in Xe._plots){var at=Xe._plots[Zr];Me._id!==at.xaxis._id&&Me._id!==at.yaxis._id||rn.push(an?at.yaxis:at.xaxis)}rn.forEach(function(zt,er){zt&&Nr(zt)&&(Ar||[I,R,D,O]).forEach(function(hr){var Vr=hr.K==="tick"&&hr.L==="text"&&Me.ticklabelmode==="period",Rr=Xe._plots[Me._mainSubplot],Er;hr.K===I.K?Er=Rr.zerolinelayer.selectAll("."+Me._id+"zl"):hr.K===R.K?Er=Rr.gridlayer.selectAll("."+Me._id):Er=Rr[Me._id.charAt(0)+"axislayer"],Er.each(function(){var xr=d.select(this);hr.L&&(xr=xr.selectAll(hr.L)),xr.each(function(Wr){var Rn=Me.l2p(Vr?je(Wr):Wr.x)+Me._offset,En=d.select(this);Rn<Me["_visibleLabelMax_"+zt._id]&&Rn>Me["_visibleLabelMin_"+zt._id]?En.style("display","none"):hr.K==="tick"&&!er&&En.style("display",null)})})})})},fr(wr,gr+1?gr:Vt);function Fr(){return Lr.length&&Promise.all(Lr)}var nn=null;function yr(){if(fr(wr,Vt),yt.length&&ot==="x"&&!l(Vt)&&(Me.type!=="log"||String(Me.dtick).charAt(0)!=="D")){nn=0;var Ar=0,an=[],rn;if(wr.each(function(Aa){Ar=Math.max(Ar,Aa.fontSize);var ya=Me.l2p(Aa.x),pr=Je(this),vn=c.bBox(pr.node());an.push({top:0,bottom:10,height:10,left:ya-vn.width/2,right:ya+vn.width/2+2,width:vn.width+2})}),(Me.tickson==="boundaries"||Me.showdividers)&&!Re.secondary){var Zr=2;for(Me.ticks&&(Zr+=Me.tickwidth/2),rn=0;rn<an.length;rn++){var at=yt[rn].xbnd,zt=an[rn];if(at[0]!==null&&zt.left-Me.l2p(at[0])<Zr||at[1]!==null&&Me.l2p(at[1])-zt.right<Zr){nn=90;break}}}else{var er=yt.length,hr=Math.abs((yt[er-1].x-yt[0].x)*Me._m)/(er-1),Vr=Me.ticklabelposition||"",Rr=function(Aa){return Vr.indexOf(Aa)!==-1},Er=Rr("top"),xr=Rr("left"),Wr=Rr("right"),Rn=Rr("bottom"),En=Rn||xr||Er||Wr,ea=En?(Me.tickwidth||0)+2*X:0,ia=hr<Ar*2.5||Me.type==="multicategory"||Me._name==="realaxis";for(rn=0;rn<an.length-1;rn++)if(e.bBoxIntersect(an[rn],an[rn+1],ea)){nn=ia?90:30;break}}nn&&fr(wr,nn)}}Me._selections&&(Me._selections[st]=wr);var _r=[Fr];Me.automargin&&Xe._redrawFromAutoMarginCount&&gr===90?(nn=90,_r.push(function(){fr(wr,gr)})):_r.push(yr),Me._tickAngles&&_r.push(function(){Me._tickAngles[st]=nn===null?l(Vt)?Vt:0:nn});var dn=Me._anchorAxis;dn&&dn.autorange&&Nr(Me)&&!U(Xe,Me._id)&&(Xe._insideTickLabelsAutorange||(Xe._insideTickLabelsAutorange={}),Xe._insideTickLabelsAutorange[dn._name+".autorange"]=dn.autorange,_r.push(function(){wr.each(function(an,rn){var Zr=Je(this),at=Zr.select(".text-math-group");at.empty()&&(Me._vals[rn].bb=c.bBox(Zr.node()))})}));var Yr=e.syncOrAsync(_r);return Yr&&Yr.then&&we._promises.push(Yr),Yr};function Pt(we,Me,Re){var Xe=Me._id+"divider",$e=Re.vals,ot=Re.layer.selectAll("path."+Xe).data($e,ut);ot.exit().remove(),ot.enter().insert("path",":first-child").classed(Xe,1).classed("crisp",1).call(n.stroke,Me.dividercolor).style("stroke-width",c.crispRound(we,Me.dividerwidth,1)+"px"),ot.attr("transform",Re.transFn).attr("d",Re.path)}Z.getPxPosition=function(we,Me){var Re=we._fullLayout._size,Xe=Me._id.charAt(0),$e=Me.side,ot;if(Me.anchor!=="free"?ot=Me._anchorAxis:Xe==="x"?ot={_offset:Re.t+(1-(Me.position||0))*Re.h,_length:0}:Xe==="y"&&(ot={_offset:Re.l+(Me.position||0)*Re.w,_length:0}),$e==="top"||$e==="left")return ot._offset;if($e==="bottom"||$e==="right")return ot._offset+ot._length};function Tt(we){var Me=we.title.font.size,Re=(we.title.text.match(a.BR_TAG_ALL)||[]).length;return we.title.hasOwnProperty("standoff")?Re?Me*(W+Re*q):Me*W:Re?Me*(Re+1)*q:Me}function Ot(we,Me){var Re=we._fullLayout,Xe=Me._id,$e=Xe.charAt(0),ot=Me.title.font.size,st;if(Me.title.hasOwnProperty("standoff"))st=Me._depth+Me.title.standoff+Tt(Me);else{var yt=Nr(Me);if(Me.type==="multicategory")st=Me._depth;else{var wt=1.5*ot;yt&&(wt=.5*ot,Me.ticks==="outside"&&(wt+=Me.ticklen)),st=10+wt+(Me.linewidth?Me.linewidth-1:0)}yt||($e==="x"?st+=Me.side==="top"?ot*(Me.showticklabels?1:0):ot*(Me.showticklabels?1.5:.5):st+=Me.side==="right"?ot*(Me.showticklabels?1:.5):ot*(Me.showticklabels?.5:0))}var Vt=Z.getPxPosition(we,Me),gr,wr,Lr;$e==="x"?(wr=Me._offset+Me._length/2,Lr=Me.side==="top"?Vt-st:Vt+st):(Lr=Me._offset+Me._length/2,wr=Me.side==="right"?Vt+st:Vt-st,gr={rotate:"-90",offset:0});var fr;if(Me.type!=="multicategory"){var Fr=Me._selections[Me._id+"tick"];if(fr={selection:Fr,side:Me.side},Fr&&Fr.node()&&Fr.node().parentNode){var nn=c.getTranslate(Fr.node().parentNode);fr.offsetLeft=nn.x,fr.offsetTop=nn.y}Me.title.hasOwnProperty("standoff")&&(fr.pad=0)}return r.draw(we,Xe+"title",{propContainer:Me,propName:Me._name+".title.text",placeholder:Re._dfltTitle[$e],avoid:fr,transform:gr,attributes:{x:wr,y:Lr,"text-anchor":"middle"}})}Z.shouldShowZeroLine=function(we,Me,Re){var Xe=e.simpleMap(Me.range,Me.r2l);return Xe[0]*Xe[1]<=0&&Me.zeroline&&(Me.type==="linear"||Me.type==="-")&&!(Me.rangebreaks&&Me.maskBreaks(0)===z)&&(Kt(Me,0)||!Bt(we,Me,Re,Xe)||Zt(we,Me))},Z.clipEnds=function(we,Me){return Me.filter(function(Re){return Kt(we,Re.x)})};function Kt(we,Me){var Re=we.l2p(Me);return Re>1&&Re<we._length-1}function Bt(we,Me,Re,Xe){var $e=Re._mainAxis;if(!$e)return;var ot=we._fullLayout,st=Me._id.charAt(0),yt=Z.counterLetter(Me._id),wt=Me._offset+(Math.abs(Xe[0])<Math.abs(Xe[1])==(st==="x")?0:Me._length);function Vt(Fr){if(!Fr.showline||!Fr.linewidth)return!1;var nn=Math.max((Fr.linewidth+Me.zerolinewidth)/2,1);function yr(Yr){return typeof Yr=="number"&&Math.abs(Yr-wt)<nn}if(yr(Fr._mainLinePosition)||yr(Fr._mainMirrorPosition))return!0;var _r=Fr._linepositions||{};for(var dn in _r)if(yr(_r[dn][0])||yr(_r[dn][1]))return!0}var gr=ot._plots[Re._mainSubplot];if(!(gr.mainplotinfo||gr).overlays.length)return Vt(Re);for(var wr=Z.list(we,yt),Lr=0;Lr<wr.length;Lr++){var fr=wr[Lr];if(fr._mainAxis===$e&&Vt(fr))return!0}}function Zt(we,Me){for(var Re=we._fullData,Xe=Me._mainSubplot,$e=Me._id.charAt(0),ot=0;ot<Re.length;ot++){var st=Re[ot];if(st.visible===!0&&st.xaxis+st.yaxis===Xe&&(w.traceIs(st,"bar-like")&&st.orientation==={x:"h",y:"v"}[$e]||st.fill&&st.fill.charAt(st.fill.length-1)===$e))return!0}return!1}function Je(we){var Me=d.select(we),Re=Me.select(".text-math-group");return Re.empty()?Me.select("text"):Re}Z.allowAutoMargin=function(we){for(var Me=Z.list(we,"",!0),Re=0;Re<Me.length;Re++){var Xe=Me[Re];Xe.automargin&&(b.allowAutoMargin(we,pt(Xe)),Xe.mirror&&b.allowAutoMargin(we,Et(Xe))),w.getComponentMethod("rangeslider","isVisible")(Xe)&&b.allowAutoMargin(we,ar(Xe))}};function pt(we){return we._id+".automargin"}function Et(we){return pt(we)+".mirror"}function ar(we){return we._id+".rangeslider"}Z.swap=function(we,Me){for(var Re=vr(we,Me),Xe=0;Xe<Re.length;Xe++)dr(we,Re[Xe].x,Re[Xe].y)};function vr(we,Me){var Re=[],Xe,$e;for(Xe=0;Xe<Me.length;Xe++){var ot=[],st=we._fullData[Me[Xe]].xaxis,yt=we._fullData[Me[Xe]].yaxis;if(!(!st||!yt)){for($e=0;$e<Re.length;$e++)(Re[$e].x.indexOf(st)!==-1||Re[$e].y.indexOf(yt)!==-1)&&ot.push($e);if(!ot.length){Re.push({x:[st],y:[yt]});continue}var wt=Re[ot[0]],Vt;if(ot.length>1)for($e=1;$e<ot.length;$e++)Vt=Re[ot[$e]],ir(wt.x,Vt.x),ir(wt.y,Vt.y);ir(wt.x,[st]),ir(wt.y,[yt])}}return Re}function ir(we,Me){for(var Re=0;Re<Me.length;Re++)we.indexOf(Me[Re])===-1&&we.push(Me[Re])}function dr(we,Me,Re){var Xe=[],$e=[],ot=we.layout,st,yt;for(st=0;st<Me.length;st++)Xe.push(Z.getFromId(we,Me[st]));for(st=0;st<Re.length;st++)$e.push(Z.getFromId(we,Re[st]));var wt=Object.keys(s),Vt=["anchor","domain","overlaying","position","side","tickangle","editType"],gr=["linear","log"];for(st=0;st<wt.length;st++){var wr=wt[st],Lr=Xe[0][wr],fr=$e[0][wr],Fr=!0,nn=!1,yr=!1;if(!(wr.charAt(0)==="_"||typeof Lr=="function"||Vt.indexOf(wr)!==-1)){for(yt=1;yt<Xe.length&&Fr;yt++){var _r=Xe[yt][wr];wr==="type"&&gr.indexOf(Lr)!==-1&&gr.indexOf(_r)!==-1&&Lr!==_r?nn=!0:_r!==Lr&&(Fr=!1)}for(yt=1;yt<$e.length&&Fr;yt++){var dn=$e[yt][wr];wr==="type"&&gr.indexOf(fr)!==-1&&gr.indexOf(dn)!==-1&&fr!==dn?yr=!0:$e[yt][wr]!==fr&&(Fr=!1)}Fr&&(nn&&(ot[Xe[0]._name].type="linear"),yr&&(ot[$e[0]._name].type="linear"),Pr(ot,wr,Xe,$e,we._fullLayout._dfltTitle))}}for(st=0;st<we._fullLayout.annotations.length;st++){var Yr=we._fullLayout.annotations[st];Me.indexOf(Yr.xref)!==-1&&Re.indexOf(Yr.yref)!==-1&&e.swapAttrs(ot.annotations[st],["?"])}}function Pr(we,Me,Re,Xe,$e){var ot=e.nestedProperty,st=ot(we[Re[0]._name],Me).get(),yt=ot(we[Xe[0]._name],Me).get(),wt;for(Me==="title"&&(st&&st.text===$e.x&&(st.text=$e.y),yt&&yt.text===$e.y&&(yt.text=$e.x)),wt=0;wt<Re.length;wt++)ot(we,Re[wt]._name+"."+Me).set(yt);for(wt=0;wt<Xe.length;wt++)ot(we,Xe[wt]._name+"."+Me).set(st)}function Sr(we){return we._id==="angularaxis"}function tr(we,Me){for(var Re=Me._rangebreaks.length,Xe=0;Xe<Re;Xe++){var $e=Me._rangebreaks[Xe];if(we>=$e.min&&we<$e.max)return $e.max}return we}function Nr(we){return(we.ticklabelposition||"").indexOf("inside")!==-1}function et(we,Me){Nr(we._anchorAxis||{})&&we._hideCounterAxisInsideTickLabels&&we._hideCounterAxisInsideTickLabels(Me)}},{"../../components/color":366,"../../components/drawing":388,"../../components/titles":464,"../../constants/alignment":471,"../../constants/numerical":479,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"./autorange":553,"./axis_autotype":555,"./axis_ids":558,"./clean_ticks":560,"./layout_attributes":569,"./set_convert":576,"@plotly/d3":58,"fast-isnumeric":190}],555:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../lib"),b=t("../../constants/numerical").BADNUM,w=l.isArrayOrTypedArray,e=l.isDateTime,o=l.cleanNumber,a=Math.round;B.exports=function(g,h,y){var p=g,A=y.noMultiCategory;if(w(p)&&!p.length)return"-";if(!A&&v(p))return"multicategory";if(A&&Array.isArray(p[0])){for(var m=[],M=0;M<p.length;M++)if(w(p[M]))for(var x=0;x<p[M].length;x++)m.push(p[M][x]);p=m}if(c(p,h))return"date";var T=y.autotypenumbers!=="strict";return i(p,T)?"category":n(p,T)?"linear":"-"};function r(u,g){return g?d(u):typeof u=="number"}function n(u,g){for(var h=u.length,y=0;y<h;y++)if(r(u[y],g))return!0;return!1}function c(u,g){for(var h=u.length,y=s(h),p=0,A=0,m={},M=0;M<h;M+=y){var x=a(M),T=u[x],_=String(T);m[_]||(m[_]=1,e(T,g)&&p++,d(T)&&A++)}return p>A*2}function s(u){return Math.max(1,(u-1)/1e3)}function i(u,g){for(var h=u.length,y=s(h),p=0,A=0,m={},M=0;M<h;M+=y){var x=a(M),T=u[x],_=String(T);if(!m[_]){m[_]=1;var f=typeof T;f==="boolean"?A++:(g?o(T)!==b:f==="number")?p++:f==="string"&&A++}}return A>p*2}function v(u){return w(u[0])&&w(u[1])}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],556:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../registry"),b=t("../../lib"),w=t("../array_container_defaults"),e=t("./layout_attributes"),o=t("./tick_value_defaults"),a=t("./tick_mark_defaults"),r=t("./tick_label_defaults"),n=t("./prefix_suffix_defaults"),c=t("./category_order_defaults"),s=t("./line_grid_defaults"),i=t("./set_convert"),v=t("./constants").WEEKDAY_PATTERN,u=t("./constants").HOUR_PATTERN;B.exports=function(A,m,M,x,T){var _=x.letter,f=x.font||{},L=x.splomStash||{},S=M("visible",!x.visibleDflt),k=m._template||{},P=m.type||k.type||"-",z;if(P==="date"){var I=l.getComponentMethod("calendars","handleDefaults");I(A,m,"calendar",x.calendar),x.noTicklabelmode||(z=M("ticklabelmode"))}var R="";(!x.noTicklabelposition||P==="multicategory")&&(R=b.coerce(A,m,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:z==="period"?["outside","inside"]:_==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),x.noTicklabeloverflow||M("ticklabeloverflow",R.indexOf("inside")!==-1?"hide past domain":P==="category"||P==="multicategory"?"allow":"hide past div"),i(m,T);var D=!m.isValidRange(A.range);D&&x.reverseDflt&&(D="reversed");var O=M("autorange",D);O&&(P==="linear"||P==="-")&&M("rangemode"),M("range"),m.cleanRange(),c(A,m,M,x),P!=="category"&&!x.noHover&&M("hoverformat");var F=M("color"),G=F!==e.color.dflt?F:f.color,W=L.label||T._dfltTitle[_];if(n(A,m,M,P,x),!S)return m;M("title.text",W),b.coerceFont(M,"title.font",{family:f.family,size:b.bigFont(f.size),color:G}),o(A,m,M,P),r(A,m,M,P,x),a(A,m,M,x),s(A,m,M,{dfltColor:F,bgColor:x.bgColor,showGrid:x.showGrid,attributes:e}),(m.showline||m.ticks)&&M("mirror"),x.automargin&&M("automargin");var q=P==="multicategory";if(!x.noTickson&&(P==="category"||q)&&(m.ticks||m.showgrid)){var J;q&&(J="boundaries");var X=M("tickson",J);X==="boundaries"&&delete m.ticklabelposition}if(q){var Z=M("showdividers");Z&&(M("dividercolor"),M("dividerwidth"))}if(P==="date")if(w(A,m,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:g}),!m.rangebreaks.length)delete m.rangebreaks;else{for(var se=0;se<m.rangebreaks.length;se++)if(m.rangebreaks[se].pattern===v){m._hasDayOfWeekBreaks=!0;break}if(i(m,T),T._has("scattergl")||T._has("splom"))for(var le=0;le<x.data.length;le++){var oe=x.data[le];(oe.type==="scattergl"||oe.type==="splom")&&(oe.visible=!1,b.warn(oe.type+" traces do not work on axes with rangebreaks. Setting trace "+oe.index+" to `visible: false`."))}}return m};function g(p,A,m){function M(z,I){return b.coerce(p,A,e.rangebreaks,z,I)}var x=M("enabled");if(x){var T=M("bounds");if(T&&T.length>=2){var _="",f,L;if(T.length===2){for(f=0;f<2;f++)if(L=y(T[f]),L){_=v;break}}var S=M("pattern",_);if(S===v)for(f=0;f<2;f++)L=y(T[f]),L&&(A.bounds[f]=T[f]=L-1);if(S)for(f=0;f<2;f++)switch(L=T[f],S){case v:if(!d(L)){A.enabled=!1;return}if(L=+L,L!==Math.floor(L)||L<0||L>=7){A.enabled=!1;return}A.bounds[f]=T[f]=L;break;case u:if(!d(L)){A.enabled=!1;return}if(L=+L,L<0||L>24){A.enabled=!1;return}A.bounds[f]=T[f]=L;break}if(m.autorange===!1){var k=m.range;if(k[0]<k[1]){if(T[0]<k[0]&&T[1]>k[1]){A.enabled=!1;return}}else if(T[0]>k[0]&&T[1]<k[1]){A.enabled=!1;return}}}else{var P=M("values");if(P&&P.length)M("dvalue");else{A.enabled=!1;return}}}}var h={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function y(p){if(typeof p=="string")return h[p.substr(0,3).toLowerCase()]}},{"../../lib":503,"../../registry":638,"../array_container_defaults":549,"./category_order_defaults":559,"./constants":561,"./layout_attributes":569,"./line_grid_defaults":571,"./prefix_suffix_defaults":573,"./set_convert":576,"./tick_label_defaults":578,"./tick_mark_defaults":579,"./tick_value_defaults":580,"fast-isnumeric":190}],557:[function(t,B,H){var d=t("../../constants/docs"),l=d.FORMAT_LINK,b=d.DATE_FORMAT_LINK;function w(a,r){return{valType:"string",dflt:"",editType:"none",description:(r?e:o)("hover text",a)+["By default the values are formatted using "+(r?"generic number format":"`"+a+"axis.hoverformat`")+"."].join(" ")}}function e(a,r){return["Sets the "+a+" formatting rule"+(r?"for `"+r+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+l+"."].join(" ")}function o(a,r){return e(a,r)+[" And for dates see: "+b+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}B.exports={axisHoverFormat:w,descriptionOnlyNumbers:e,descriptionWithDates:o}},{"../../constants/docs":474}],558:[function(t,B,H){var d=t("../../registry"),l=t("./constants");H.id2name=function(e){if(!(typeof e!="string"||!e.match(l.AX_ID_PATTERN))){var o=e.split(" ")[0].substr(1);return o==="1"&&(o=""),e.charAt(0)+"axis"+o}},H.name2id=function(e){if(!!e.match(l.AX_NAME_PATTERN)){var o=e.substr(5);return o==="1"&&(o=""),e.charAt(0)+o}},H.cleanId=function(e,o,a){var r=/( domain)$/.test(e);if(!(typeof e!="string"||!e.match(l.AX_ID_PATTERN))&&!(o&&e.charAt(0)!==o)&&!(r&&!a)){var n=e.split(" ")[0].substr(1).replace(/^0+/,"");return n==="1"&&(n=""),e.charAt(0)+n+(r&&a?" domain":"")}},H.list=function(w,e,o){var a=w._fullLayout;if(!a)return[];var r=H.listIds(w,e),n=new Array(r.length),c;for(c=0;c<r.length;c++){var s=r[c];n[c]=a[s.charAt(0)+"axis"+s.substr(1)]}if(!o){var i=a._subplots.gl3d||[];for(c=0;c<i.length;c++){var v=a[i[c]];e?n.push(v[e+"axis"]):n.push(v.xaxis,v.yaxis,v.zaxis)}}return n},H.listIds=function(w,e){var o=w._fullLayout;if(!o)return[];var a=o._subplots;return e?a[e+"axis"]:a.xaxis.concat(a.yaxis)},H.getFromId=function(w,e,o){var a=w._fullLayout;return e=e===void 0||typeof e!="string"?e:e.replace(" domain",""),o==="x"?e=e.replace(/y[0-9]*/,""):o==="y"&&(e=e.replace(/x[0-9]*/,"")),a[H.id2name(e)]},H.getFromTrace=function(w,e,o){var a=w._fullLayout,r=null;if(d.traceIs(e,"gl3d")){var n=e.scene;n.substr(0,5)==="scene"&&(r=a[n][o+"axis"])}else r=H.getFromId(w,e[o+"axis"]||o);return r},H.idSort=function(w,e){var o=w.charAt(0),a=e.charAt(0);return o!==a?o>a?1:-1:+(w.substr(1)||1)-+(e.substr(1)||1)},H.ref2id=function(w){return/^[xyz]/.test(w)?w.split(" ")[0]:!1};function b(w,e){if(e&&e.length){for(var o=0;o<e.length;o++)if(e[o][w])return!0}return!1}H.isLinked=function(w,e){return b(e,w._axisMatchGroups)||b(e,w._axisConstraintGroups)}},{"../../registry":638,"./constants":561}],559:[function(t,B,H){function d(l,b){var w=b.dataAttr||l._id.charAt(0),e={},o,a,r;if(b.axData)o=b.axData;else for(o=[],a=0;a<b.data.length;a++){var n=b.data[a];n[w+"axis"]===l._id&&o.push(n)}for(a=0;a<o.length;a++){var c=o[a][w];for(r=0;r<c.length;r++){var s=c[r];s!=null&&(e[s]=1)}}return Object.keys(e)}B.exports=function(b,w,e,o){if(w.type==="category"){var a=b.categoryarray,r=Array.isArray(a)&&a.length>0,n;r&&(n="array");var c=e("categoryorder",n),s;c==="array"&&(s=e("categoryarray")),!r&&c==="array"&&(c=w.categoryorder="trace"),c==="trace"?w._initialCategories=[]:c==="array"?w._initialCategories=s.slice():(s=d(w,o).sort(),c==="category ascending"?w._initialCategories=s:c==="category descending"&&(w._initialCategories=s.reverse()))}}},{}],560:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../lib"),b=t("../../constants/numerical"),w=b.ONEDAY,e=b.ONEWEEK;H.dtick=function(o,a){var r=a==="log",n=a==="date",c=a==="category",s=n?w:1;if(!o)return s;if(d(o))return o=Number(o),o<=0?s:c?Math.max(1,Math.round(o)):n?Math.max(.1,o):o;if(typeof o!="string"||!(n||r))return s;var i=o.charAt(0),v=o.substr(1);return v=d(v)?Number(v):0,v<=0||!(n&&i==="M"&&v===Math.round(v)||r&&i==="L"||r&&i==="D"&&(v===1||v===2))?s:o},H.tick0=function(o,a,r,n){if(a==="date")return l.cleanDate(o,l.dateTick0(r,n%e===0?1:0));if(!(n==="D1"||n==="D2"))return d(o)?Number(o):0}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],561:[function(t,B,H){var d=t("../../lib/regex").counter;B.exports={idRegex:{x:d("x","( domain)?"),y:d("y","( domain)?")},attrRegex:d("[xy]axis"),xAxisMatch:d("xaxis"),yAxisMatch:d("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":520}],562:[function(t,B,H){var d=t("../../lib"),l=t("./autorange"),b=t("./axis_ids").id2name,w=t("./layout_attributes"),e=t("./scale_zoom"),o=t("./set_convert"),a=t("../../constants/numerical").ALMOST_EQUAL,r=t("../../constants/alignment").FROM_BL;H.handleDefaults=function(h,y,p){var A=p.axIds,m=p.axHasImage,M=y._axisConstraintGroups=[],x=y._axisMatchGroups=[],T,_,f,L,S,k,P,z;for(T=0;T<A.length;T++)L=b(A[T]),S=h[L],k=y[L],n(S,k,{axIds:A,layoutOut:y,hasImage:m[L]});function I(X,Z){for(T=0;T<X.length;T++){_=X[T];for(f in _)y[b(f)][Z]=_}}for(I(x,"_matchGroup"),T=0;T<M.length;T++){_=M[T];for(f in _)if(k=y[b(f)],k.fixedrange){for(var R in _){var D=b(R);(h[D]||{}).fixedrange===!1&&d.warn("fixedrange was specified as false for axis "+D+" but was overridden because another axis in its constraint group has fixedrange true"),y[D].fixedrange=!0}break}}for(T=0;T<M.length;){_=M[T];for(f in _){k=y[b(f)],k._matchGroup&&Object.keys(k._matchGroup).length===Object.keys(_).length&&(M.splice(T,1),T--);break}T++}I(M,"_constraintGroup");var O=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],F=!1,G=!1;function W(){z=k[P],P==="rangebreaks"&&(G=k._hasDayOfWeekBreaks)}for(T=0;T<x.length;T++){_=x[T];for(var q=0;q<O.length;q++){P=O[q],z=null;var J;for(f in _)if(L=b(f),S=h[L],k=y[L],P in k){if(!k.matches&&(J=k,P in S)){W();break}z===null&&P in S&&W()}if(P==="range"&&z&&(F=!0),P==="autorange"&&z===null&&F&&(z=!1),z===null&&P in J&&(z=J[P]),z!==null)for(f in _)k=y[b(f)],k[P]=P==="range"?z.slice():z,P==="rangebreaks"&&(k._hasDayOfWeekBreaks=G,o(k,y))}}};function n(h,y,p){var A=p.axIds,m=p.layoutOut,M=p.hasImage,x=m._axisConstraintGroups,T=m._axisMatchGroups,_=y._id,f=_.charAt(0),L=((m._splomAxes||{})[f]||{})[_]||{},S=y._id,k=S.charAt(0)==="x";y._matchGroup=null,y._constraintGroup=null;function P(oe,U){return d.coerce(h,y,w,oe,U)}P("constrain",M?"domain":"range"),d.coerce(h,y,{constraintoward:{valType:"enumerated",values:k?["left","center","right"]:["bottom","middle","top"],dflt:k?"center":"middle"}},"constraintoward");var z=y.type,I,R,D=[];for(I=0;I<A.length;I++)if(R=A[I],R!==S){var O=m[b(R)];O.type===z&&D.push(R)}var F=s(x,S);if(F){var G=[];for(I=0;I<D.length;I++)R=D[I],F[R]||G.push(R);D=G}var W=D.length,q,J;W&&(h.matches||L.matches)&&(q=d.coerce(h,y,{matches:{valType:"enumerated",values:D,dflt:D.indexOf(L.matches)!==-1?L.matches:void 0}},"matches"));var X=M&&!k?y.anchor:void 0;if(W&&!q&&(h.scaleanchor||X)&&(J=d.coerce(h,y,{scaleanchor:{valType:"enumerated",values:D}},"scaleanchor",X)),q){y._matchGroup=i(T,S,q,1);var Z=m[b(q)],se=c(m,y)/c(m,Z);k!==(q.charAt(0)==="x")&&(se=(k?"x":"y")+se),i(x,S,q,se)}else h.matches&&A.indexOf(h.matches)!==-1&&d.warn("ignored "+y._name+'.matches: "'+h.matches+'" to avoid an infinite loop');if(J){var le=P("scaleratio");le||(le=y.scaleratio=1),i(x,S,J,le)}else h.scaleanchor&&A.indexOf(h.scaleanchor)!==-1&&d.warn("ignored "+y._name+'.scaleanchor: "'+h.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function c(h,y){var p=y.domain;return p||(p=h[b(y.overlaying)].domain),p[1]-p[0]}function s(h,y){for(var p=0;p<h.length;p++)if(h[p][y])return h[p];return null}function i(h,y,p,A){var m,M,x,T,_,f=s(h,y);f===null?(f={},f[y]=1,_=h.length,h.push(f)):_=h.indexOf(f);var L=Object.keys(f);for(m=0;m<h.length;m++)if(x=h[m],m!==_&&x[p]){var S=x[p];for(M=0;M<L.length;M++)T=L[M],x[T]=v(S,v(A,f[T]));h.splice(_,1);return}if(A!==1)for(M=0;M<L.length;M++){var k=L[M];f[k]=v(A,f[k])}f[p]=1}function v(h,y){var p="",A="",m,M;typeof h=="string"&&(p=h.match(/^[xy]*/)[0],m=p.length,h=+h.substr(m)),typeof y=="string"&&(A=y.match(/^[xy]*/)[0],M=A.length,y=+y.substr(M));var x=h*y;return!m&&!M?x:!m||!M||p.charAt(0)===A.charAt(0)?p+A+h*y:m===M?x:(m>M?p.substr(M):A.substr(m))+x}function u(h,y){for(var p=y._size,A=p.h/p.w,m={},M=Object.keys(h),x=0;x<M.length;x++){var T=M[x],_=h[T];if(typeof _=="string"){var f=_.match(/^[xy]*/)[0],L=f.length;_=+_.substr(L);for(var S=f.charAt(0)==="y"?A:1/A,k=0;k<L;k++)_*=S}m[T]=_}return m}H.enforce=function(y){var p=y._fullLayout,A=p._axisConstraintGroups||[],m,M,x,T,_,f,L,S;for(m=0;m<A.length;m++){x=u(A[m],p);var k=Object.keys(x),P=1/0,z=0,I=1/0,R={},D={},O=!1;for(M=0;M<k.length;M++)T=k[M],D[T]=_=p[b(T)],_._inputDomain?_.domain=_._inputDomain.slice():_._inputDomain=_.domain.slice(),_._inputRange||(_._inputRange=_.range.slice()),_.setScale(),R[T]=f=Math.abs(_._m)/x[T],P=Math.min(P,f),(_.constrain==="domain"||!_._constraintShrinkable)&&(I=Math.min(I,f)),delete _._constraintShrinkable,z=Math.max(z,f),_.constrain==="domain"&&(O=!0);if(!(P>a*z&&!O)){for(M=0;M<k.length;M++)if(T=k[M],f=R[T],_=D[T],L=_.constrain,f!==I||L==="domain")if(S=f/I,L==="range")e(_,S);else{var F=_._inputDomain,G=(_.domain[1]-_.domain[0])/(F[1]-F[0]),W=(_.r2l(_.range[1])-_.r2l(_.range[0]))/(_.r2l(_._inputRange[1])-_.r2l(_._inputRange[0]));if(S/=G,S*W<1){_.domain=_._input.domain=F.slice(),e(_,S);continue}if(W<1&&(_.range=_._input.range=_._inputRange.slice(),S*=W),_.autorange){var q=_.r2l(_.range[0]),J=_.r2l(_.range[1]),X=(q+J)/2,Z=X,se=X,le=Math.abs(J-X),oe=X-le*S*1.0001,U=X+le*S*1.0001,V=l.makePadFn(p,_,0),re=l.makePadFn(p,_,1);g(_,S);var ee=Math.abs(_._m),j=l.concatExtremes(y,_),Q=j.min,ne=j.max,ae,ie;for(ie=0;ie<Q.length;ie++)ae=Q[ie].val-V(Q[ie])/ee,ae>oe&&ae<Z&&(Z=ae);for(ie=0;ie<ne.length;ie++)ae=ne[ie].val+re(ne[ie])/ee,ae<U&&ae>se&&(se=ae);var ue=(se-Z)/(2*le);S/=ue,Z=_.l2r(Z),se=_.l2r(se),_.range=_._input.range=q<J?[Z,se]:[se,Z]}g(_,S)}}}},H.getAxisGroup=function(y,p){for(var A=y._axisMatchGroups,m=0;m<A.length;m++){var M=A[m];if(M[p])return"g"+m}return p},H.clean=function(y,p){if(p._inputDomain){for(var A=!1,m=p._id,M=y._fullLayout._axisConstraintGroups,x=0;x<M.length;x++)if(M[x][m]){A=!0;break}(!A||p.constrain!=="domain")&&(p._input.domain=p.domain=p._inputDomain,delete p._inputDomain)}};function g(h,y){var p=h._inputDomain,A=r[h.constraintoward],m=p[0]+(p[1]-p[0])*A;h.domain=h._input.domain=[m+(p[0]-m)/y,m+(p[1]-m)/y],h.setScale()}},{"../../constants/alignment":471,"../../constants/numerical":479,"../../lib":503,"./autorange":553,"./axis_ids":558,"./layout_attributes":569,"./scale_zoom":574,"./set_convert":576}],563:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib"),b=l.numberFormat,w=t("tinycolor2"),e=t("has-passive-events"),o=t("../../registry"),a=l.strTranslate,r=t("../../lib/svg_text_utils"),n=t("../../components/color"),c=t("../../components/drawing"),s=t("../../components/fx"),i=t("./axes"),v=t("../../lib/setcursor"),u=t("../../components/dragelement"),g=t("../../components/dragelement/helpers"),h=g.selectingOrDrawing,y=g.freeMode,p=t("../../constants/alignment").FROM_TL,A=t("../../lib/clear_gl_canvases"),m=t("../../plot_api/subroutines").redrawReglTraces,M=t("../plots"),x=t("./axis_ids").getFromId,T=t("./select").prepSelect,_=t("./select").clearSelect,f=t("./select").selectOnClick,L=t("./scale_zoom"),S=t("./constants"),k=S.MINDRAG,P=S.MINZOOM,z=!0;function I(ae,ie,ue,xe,he,ge,me,ke){var Ae=ae._fullLayout._zoomlayer,Ne=me+ke==="nsew",He=(me+ke).length===1,Ge,_e,De,Ye,qe,Ue,Ie,Ve,dt,Dt,Yt,kt,Ft,Nt,Lt,St,it,ht,Qe,Ce,je,rt,ut;function Pt(){if(Ge=ie.xaxis,_e=ie.yaxis,dt=Ge._length,Dt=_e._length,Ie=Ge._offset,Ve=_e._offset,De={},De[Ge._id]=Ge,Ye={},Ye[_e._id]=_e,me&&ke)for(var yr=ie.overlays,_r=0;_r<yr.length;_r++){var dn=yr[_r].xaxis;De[dn._id]=dn;var Yr=yr[_r].yaxis;Ye[Yr._id]=Yr}qe=ne(De),Ue=ne(Ye),Ft=O(qe,ke),Nt=O(Ue,me),Lt=!Nt&&!Ft,kt=j(ae,ae._fullLayout._axisMatchGroups,De,Ye),Yt=j(ae,ae._fullLayout._axisConstraintGroups,De,Ye,kt);var Ar=Yt.isSubplotConstrained||kt.isSubplotConstrained;St=ke||Ar,it=me||Ar;var an=ae._fullLayout;ht=an._has("scattergl"),Qe=an._has("splom"),Ce=an._has("svg")}Pt();var Tt=J(Nt+Ft,ae._fullLayout.dragmode,Ne),Ot=D(ie,me+ke+"drag",Tt,ue,xe,he,ge);if(Lt&&!Ne)return Ot.onmousedown=null,Ot.style.pointerEvents="none",Ot;var Kt={element:Ot,gd:ae,plotinfo:ie};Kt.prepFn=function(yr,_r,dn){var Yr=Kt.dragmode,Ar=ae._fullLayout.dragmode;Ar!==Yr&&(Kt.dragmode=Ar),Pt(),rt=ae._fullLayout._invScaleX,ut=ae._fullLayout._invScaleY,Lt||(Ne?yr.shiftKey?Ar==="pan"?Ar="zoom":h(Ar)||(Ar="pan"):yr.ctrlKey&&(Ar="pan"):Ar="pan"),y(Ar)?Kt.minDrag=1:Kt.minDrag=void 0,h(Ar)?(Kt.xaxes=qe,Kt.yaxes=Ue,T(yr,_r,dn,Kt,Ar)):(Kt.clickFn=Zt,h(Yr)&&Bt(),Lt||(Ar==="zoom"?(Kt.moveFn=et,Kt.doneFn=Me,Kt.minDrag=1,Nr(yr,_r,dn)):Ar==="pan"&&(Kt.moveFn=yt,Kt.doneFn=wr))),ae._fullLayout._redrag=function(){var an=ae._dragdata;if(an&&an.element===Ot){var rn=ae._fullLayout.dragmode;h(rn)||(Pt(),Lr([0,0,dt,Dt]),Kt.moveFn(an.dx,an.dy))}}};function Bt(){Kt.plotinfo.selection=!1,_(ae)}function Zt(yr,_r){var dn=Kt.gd;if(dn._fullLayout._activeShapeIndex>=0){dn._fullLayout._deactivateShape(dn);return}var Yr=dn._fullLayout.clickmode;if(oe(dn),yr===2&&!He&&gr(),Ne)Yr.indexOf("select")>-1&&f(_r,dn,qe,Ue,ie.id,Kt),Yr.indexOf("event")>-1&&s.click(dn,_r,ie.id);else if(yr===1&&He){var Ar=me?_e:Ge,an=me==="s"||ke==="w"?0:1,rn=Ar._name+".range["+an+"]",Zr=F(Ar,an),at="left",zt="middle";if(Ar.fixedrange)return;me?(zt=me==="n"?"top":"bottom",Ar.side==="right"&&(at="right")):ke==="e"&&(at="right"),dn._context.showAxisRangeEntryBoxes&&d.select(Ot).call(r.makeEditable,{gd:dn,immediate:!0,background:dn._fullLayout.paper_bgcolor,text:String(Zr),fill:Ar.tickfont?Ar.tickfont.color:"#444",horizontalAlign:at,verticalAlign:zt}).on("edit",function(er){var hr=Ar.d2r(er);hr!==void 0&&o.call("_guiRelayout",dn,rn,hr)})}}u.init(Kt);var Je,pt,Et,ar,vr,ir,dr,Pr,Sr,tr;function Nr(yr,_r,dn){var Yr=Ot.getBoundingClientRect();Je=_r-Yr.left,pt=dn-Yr.top,ae._fullLayout._calcInverseTransform(ae);var Ar=l.apply3DTransform(ae._fullLayout._invTransform)(Je,pt);Je=Ar[0],pt=Ar[1],Et={l:Je,r:Je,w:0,t:pt,b:pt,h:0},ar=ae._hmpixcount?ae._hmlumcount/ae._hmpixcount:w(ae._fullLayout.plot_bgcolor).getLuminance(),vr="M0,0H"+dt+"V"+Dt+"H0V0",ir=!1,dr="xy",tr=!1,Pr=X(Ae,ar,Ie,Ve,vr),Sr=Z(Ae,Ie,Ve)}function et(yr,_r){if(ae._transitioningWithDuration)return!1;var dn=Math.max(0,Math.min(dt,rt*yr+Je)),Yr=Math.max(0,Math.min(Dt,ut*_r+pt)),Ar=Math.abs(dn-Je),an=Math.abs(Yr-pt);Et.l=Math.min(Je,dn),Et.r=Math.max(Je,dn),Et.t=Math.min(pt,Yr),Et.b=Math.max(pt,Yr);function rn(){dr="",Et.r=Et.l,Et.t=Et.b,Sr.attr("d","M0,0Z")}if(Yt.isSubplotConstrained)Ar>P||an>P?(dr="xy",Ar/dt>an/Dt?(an=Ar*Dt/dt,pt>Yr?Et.t=pt-an:Et.b=pt+an):(Ar=an*dt/Dt,Je>dn?Et.l=Je-Ar:Et.r=Je+Ar),Sr.attr("d",ee(Et))):rn();else if(kt.isSubplotConstrained)if(Ar>P||an>P){dr="xy";var Zr=Math.min(Et.l/dt,(Dt-Et.b)/Dt),at=Math.max(Et.r/dt,(Dt-Et.t)/Dt);Et.l=Zr*dt,Et.r=at*dt,Et.b=(1-Zr)*Dt,Et.t=(1-at)*Dt,Sr.attr("d",ee(Et))}else rn();else!Nt||an<Math.min(Math.max(Ar*.6,k),P)?Ar<k||!Ft?rn():(Et.t=0,Et.b=Dt,dr="x",Sr.attr("d",V(Et,pt))):!Ft||Ar<Math.min(an*.6,P)?(Et.l=0,Et.r=dt,dr="y",Sr.attr("d",re(Et,Je))):(dr="xy",Sr.attr("d",ee(Et)));Et.w=Et.r-Et.l,Et.h=Et.b-Et.t,dr&&(tr=!0),ae._dragged=tr,se(Pr,Sr,Et,vr,ir,ar),we(),ae.emit("plotly_relayouting",je),ir=!0}function we(){je={},(dr==="xy"||dr==="x")&&(G(qe,Et.l/dt,Et.r/dt,je,Yt.xaxes),wt("x",je)),(dr==="xy"||dr==="y")&&(G(Ue,(Dt-Et.b)/Dt,(Dt-Et.t)/Dt,je,Yt.yaxes),wt("y",je))}function Me(){we(),oe(ae),wr(),U(ae)}var Re=[0,0,dt,Dt],Xe=null,$e=S.REDRAWDELAY,ot=ie.mainplot?ae._fullLayout._plots[ie.mainplot]:ie;function st(yr){if(!ae._context._scrollZoom.cartesian&&!ae._fullLayout._enablescrollzoom)return;if(Bt(),ae._transitioningWithDuration){yr.preventDefault(),yr.stopPropagation();return}Pt(),clearTimeout(Xe);var _r=-yr.deltaY;if(isFinite(_r)||(_r=yr.wheelDelta/10),!isFinite(_r)){l.log("Did not find wheel motion attributes: ",yr);return}var dn=Math.exp(-Math.min(Math.max(_r,-20),20)/200),Yr=ot.draglayer.select(".nsewdrag").node().getBoundingClientRect(),Ar=(yr.clientX-Yr.left)/Yr.width,an=(Yr.bottom-yr.clientY)/Yr.height,rn;function Zr(at,zt,er){if(at.fixedrange)return;var hr=l.simpleMap(at.range,at.r2l),Vr=hr[0]+(hr[1]-hr[0])*zt;function Rr(Er){return at.l2r(Vr+(Er-Vr)*er)}at.range=hr.map(Rr)}if(St){for(ke||(Ar=.5),rn=0;rn<qe.length;rn++)Zr(qe[rn],Ar,dn);wt("x"),Re[2]*=dn,Re[0]+=Re[2]*Ar*(1/dn-1)}if(it){for(me||(an=.5),rn=0;rn<Ue.length;rn++)Zr(Ue[rn],an,dn);wt("y"),Re[3]*=dn,Re[1]+=Re[3]*(1-an)*(1/dn-1)}Lr(Re),Vt(),ae.emit("plotly_relayouting",je),Xe=setTimeout(function(){!ae._fullLayout||(Re=[0,0,dt,Dt],wr())},$e),yr.preventDefault()}me.length*ke.length!==1&&Q(Ot,st);function yt(yr,_r){if(yr=yr*rt,_r=_r*ut,ae._transitioningWithDuration)return;if(ae._fullLayout._replotting=!0,Ft==="ew"||Nt==="ns"){var dn=Ft?-yr:0,Yr=Nt?-_r:0;if(kt.isSubplotConstrained){if(Ft&&Nt){var Ar=(yr/dt-_r/Dt)/2;yr=Ar*dt,_r=-Ar*Dt,dn=-yr,Yr=-_r}Nt?dn=-Yr*dt/Dt:Yr=-dn*Dt/dt}Ft&&(W(qe,yr),wt("x")),Nt&&(W(Ue,_r),wt("y")),Lr([dn,Yr,dt,Dt]),Vt(),ae.emit("plotly_relayouting",je);return}function an(Rr,Er,xr){for(var Wr=1-Er,Rn,En,ea=0;ea<Rr.length;ea++){var ia=Rr[ea];if(!ia.fixedrange){Rn=ia,En=ia._rl[Wr]+(ia._rl[Er]-ia._rl[Wr])/q(xr/ia._length);var Aa=ia.l2r(En);Aa!==!1&&Aa!==void 0&&(ia.range[Er]=Aa)}}return Rn._length*(Rn._rl[Er]-En)/(Rn._rl[Er]-Rn._rl[Wr])}var rn=Ft==="w"==(Nt==="n")?1:-1;if(Ft&&Nt&&(Yt.isSubplotConstrained||kt.isSubplotConstrained)){var Zr=(yr/dt+rn*_r/Dt)/2;yr=Zr*dt,_r=rn*Zr*Dt}var at,zt;if(Ft==="w"?yr=an(qe,0,yr):Ft==="e"?yr=an(qe,1,-yr):Ft||(yr=0),Nt==="n"?_r=an(Ue,1,_r):Nt==="s"?_r=an(Ue,0,-_r):Nt||(_r=0),at=Ft==="w"?yr:0,zt=Nt==="n"?_r:0,Yt.isSubplotConstrained&&!kt.isSubplotConstrained||kt.isSubplotConstrained&&Ft&&Nt&&rn>0){var er;if(kt.isSubplotConstrained||!Ft&&Nt.length===1){for(er=0;er<qe.length;er++)qe[er].range=qe[er]._r.slice(),L(qe[er],1-_r/Dt);yr=_r*dt/Dt,at=yr/2}if(kt.isSubplotConstrained||!Nt&&Ft.length===1){for(er=0;er<Ue.length;er++)Ue[er].range=Ue[er]._r.slice(),L(Ue[er],1-yr/dt);_r=yr*Dt/dt,zt=_r/2}}(!kt.isSubplotConstrained||!Nt)&&wt("x"),(!kt.isSubplotConstrained||!Ft)&&wt("y");var hr=dt-yr,Vr=Dt-_r;kt.isSubplotConstrained&&!(Ft&&Nt)&&(Ft?(zt=at?0:yr*Dt/dt,Vr=hr*Dt/dt):(at=zt?0:_r*dt/Dt,hr=Vr*dt/Dt)),Lr([at,zt,hr,Vr]),Vt(),ae.emit("plotly_relayouting",je)}function wt(yr,_r){for(var dn=kt.isSubplotConstrained?{x:Ue,y:qe}[yr]:kt[yr+"axes"],Yr=kt.isSubplotConstrained?{x:qe,y:Ue}[yr]:[],Ar=0;Ar<dn.length;Ar++){var an=dn[Ar],rn=an._id,Zr=kt.xLinks[rn]||kt.yLinks[rn],at=Yr[0]||De[Zr]||Ye[Zr];at&&(_r?(_r[an._name+".range[0]"]=_r[at._name+".range[0]"],_r[an._name+".range[1]"]=_r[at._name+".range[1]"]):an.range=at.range.slice())}}function Vt(){var yr=[],_r;function dn(an){for(_r=0;_r<an.length;_r++)an[_r].fixedrange||yr.push(an[_r]._id)}for(St&&(dn(qe),dn(Yt.xaxes),dn(kt.xaxes)),it&&(dn(Ue),dn(Yt.yaxes),dn(kt.yaxes)),je={},_r=0;_r<yr.length;_r++){var Yr=yr[_r],Ar=x(ae,Yr);i.drawOne(ae,Ar,{skipTitle:!0}),je[Ar._name+".range[0]"]=Ar.range[0],je[Ar._name+".range[1]"]=Ar.range[1]}i.redrawComponents(ae,yr)}function gr(){if(!ae._transitioningWithDuration){var yr=ae._context.doubleClick,_r=[];Ft&&(_r=_r.concat(qe)),Nt&&(_r=_r.concat(Ue)),kt.xaxes&&(_r=_r.concat(kt.xaxes)),kt.yaxes&&(_r=_r.concat(kt.yaxes));var dn={},Yr,Ar,an;if(yr==="reset+autosize"){for(yr="autosize",Ar=0;Ar<_r.length;Ar++)if(Yr=_r[Ar],Yr._rangeInitial&&(Yr.range[0]!==Yr._rangeInitial[0]||Yr.range[1]!==Yr._rangeInitial[1])||!Yr._rangeInitial&&!Yr.autorange){yr="reset";break}}if(yr==="autosize")for(Ar=0;Ar<_r.length;Ar++)Yr=_r[Ar],Yr.fixedrange||(dn[Yr._name+".autorange"]=!0);else if(yr==="reset")for((Ft||Yt.isSubplotConstrained)&&(_r=_r.concat(Yt.xaxes)),Nt&&!Yt.isSubplotConstrained&&(_r=_r.concat(Yt.yaxes)),Yt.isSubplotConstrained&&(Ft?Nt||(_r=_r.concat(Ue)):_r=_r.concat(qe)),Ar=0;Ar<_r.length;Ar++)Yr=_r[Ar],Yr.fixedrange||(Yr._rangeInitial?(an=Yr._rangeInitial,dn[Yr._name+".range[0]"]=an[0],dn[Yr._name+".range[1]"]=an[1]):dn[Yr._name+".autorange"]=!0);ae.emit("plotly_doubleclick",null),o.call("_guiRelayout",ae,dn)}}function wr(){Lr([0,0,dt,Dt]),l.syncOrAsync([M.previousPromises,function(){ae._fullLayout._replotting=!1,o.call("_guiRelayout",ae,je)}],ae)}function Lr(yr){var _r=ae._fullLayout,dn=_r._plots,Yr=_r._subplots.cartesian,Ar,an,rn,Zr;if(Qe&&o.subplotsRegistry.splom.drag(ae),ht){for(Ar=0;Ar<Yr.length;Ar++)if(an=dn[Yr[Ar]],rn=an.xaxis,Zr=an.yaxis,an._scene){var at=l.simpleMap(rn.range,rn.r2l),zt=l.simpleMap(Zr.range,Zr.r2l);an._scene.update({range:[at[0],zt[0],at[1],zt[1]]})}}if((Qe||ht)&&(A(ae),m(ae)),Ce){var er=yr[2]/Ge._length,hr=yr[3]/_e._length;for(Ar=0;Ar<Yr.length;Ar++){an=dn[Yr[Ar]],rn=an.xaxis,Zr=an.yaxis;var Vr=(St||kt.isSubplotConstrained)&&!rn.fixedrange&&De[rn._id],Rr=(it||kt.isSubplotConstrained)&&!Zr.fixedrange&&Ye[Zr._id],Er,xr,Wr,Rn;if(Vr?(Er=er,Wr=ke||kt.isSubplotConstrained?yr[0]:nn(rn,Er)):kt.xaHash[rn._id]?(Er=er,Wr=yr[0]*rn._length/Ge._length):kt.yaHash[rn._id]?(Er=hr,Wr=Nt==="ns"?-yr[1]*rn._length/_e._length:nn(rn,Er,{n:"top",s:"bottom"}[Nt])):(Er=fr(rn,er,hr),Wr=Fr(rn,Er)),Rr?(xr=hr,Rn=me||kt.isSubplotConstrained?yr[1]:nn(Zr,xr)):kt.yaHash[Zr._id]?(xr=hr,Rn=yr[1]*Zr._length/_e._length):kt.xaHash[Zr._id]?(xr=er,Rn=Ft==="ew"?-yr[0]*Zr._length/Ge._length:nn(Zr,xr,{e:"right",w:"left"}[Ft])):(xr=fr(Zr,er,hr),Rn=Fr(Zr,xr)),!(!Er&&!xr)){Er||(Er=1),xr||(xr=1);var En=rn._offset-Wr/Er,ea=Zr._offset-Rn/xr;an.clipRect.call(c.setTranslate,Wr,Rn).call(c.setScale,Er,xr),an.plot.call(c.setTranslate,En,ea).call(c.setScale,1/Er,1/xr),(Er!==an.xScaleFactor||xr!==an.yScaleFactor)&&(c.setPointGroupScale(an.zoomScalePts,Er,xr),c.setTextPointsScale(an.zoomScaleTxt,Er,xr)),c.hideOutsideRangePoints(an.clipOnAxisFalseTraces,an),an.xScaleFactor=Er,an.yScaleFactor=xr}}}}function fr(yr,_r,dn){return yr.fixedrange?0:St&&Yt.xaHash[yr._id]?_r:it&&(Yt.isSubplotConstrained?Yt.xaHash:Yt.yaHash)[yr._id]?dn:0}function Fr(yr,_r){return _r?(yr.range=yr._r.slice(),L(yr,_r),nn(yr,_r)):0}function nn(yr,_r,dn){return yr._length*(1-_r)*p[dn||yr.constraintoward||"middle"]}return Ot}function R(ae,ie,ue,xe){var he=l.ensureSingle(ae.draglayer,ie,ue,function(ge){ge.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",ae.id)});return he.call(v,xe),he.node()}function D(ae,ie,ue,xe,he,ge,me){var ke=R(ae,"rect",ie,ue);return d.select(ke).call(c.setRect,xe,he,ge,me),ke}function O(ae,ie){for(var ue=0;ue<ae.length;ue++)if(!ae[ue].fixedrange)return ie;return""}function F(ae,ie){var ue=ae.range[ie],xe=Math.abs(ue-ae.range[1-ie]),he;return ae.type==="date"?ue:ae.type==="log"?(he=Math.ceil(Math.max(0,-Math.log(xe)/Math.LN10))+3,b("."+he+"g")(Math.pow(10,ue))):(he=Math.floor(Math.log(Math.abs(ue))/Math.LN10)-Math.floor(Math.log(xe)/Math.LN10)+4,b("."+String(he)+"g")(ue))}function G(ae,ie,ue,xe,he){for(var ge=0;ge<ae.length;ge++){var me=ae[ge];if(!me.fixedrange)if(me.rangebreaks){var ke=me._id.charAt(0)==="y",Ae=ke?1-ie:ie,Ne=ke?1-ue:ue;xe[me._name+".range[0]"]=me.l2r(me.p2l(Ae*me._length)),xe[me._name+".range[1]"]=me.l2r(me.p2l(Ne*me._length))}else{var He=me._rl[0],Ge=me._rl[1]-He;xe[me._name+".range[0]"]=me.l2r(He+Ge*ie),xe[me._name+".range[1]"]=me.l2r(He+Ge*ue)}}if(he&&he.length){var _e=(ie+(1-ue))/2;G(he,_e,1-_e,xe,[])}}function W(ae,ie){for(var ue=0;ue<ae.length;ue++){var xe=ae[ue];if(!xe.fixedrange)if(xe.rangebreaks){var he=0,ge=xe._length,me=xe.p2l(he+ie)-xe.p2l(he),ke=xe.p2l(ge+ie)-xe.p2l(ge),Ae=(me+ke)/2;xe.range=[xe.l2r(xe._rl[0]-Ae),xe.l2r(xe._rl[1]-Ae)]}else xe.range=[xe.l2r(xe._rl[0]-ie/xe._m),xe.l2r(xe._rl[1]-ie/xe._m)]}}function q(ae){return 1-(ae>=0?Math.min(ae,.9):1/(1/Math.max(ae,-.3)+3.222))}function J(ae,ie,ue){return ae?ae==="nsew"?ue?"":ie==="pan"?"move":"crosshair":ae.toLowerCase()+"-resize":"pointer"}function X(ae,ie,ue,xe,he){return ae.append("path").attr("class","zoombox").style({fill:ie>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",a(ue,xe)).attr("d",he+"Z")}function Z(ae,ie,ue){return ae.append("path").attr("class","zoombox-corners").style({fill:n.background,stroke:n.defaultLine,"stroke-width":1,opacity:0}).attr("transform",a(ie,ue)).attr("d","M0,0Z")}function se(ae,ie,ue,xe,he,ge){ae.attr("d",xe+"M"+ue.l+","+ue.t+"v"+ue.h+"h"+ue.w+"v-"+ue.h+"h-"+ue.w+"Z"),le(ae,ie,he,ge)}function le(ae,ie,ue,xe){ue||(ae.transition().style("fill",xe>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ie.transition().style("opacity",1).duration(200))}function oe(ae){d.select(ae).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function U(ae){z&&ae.data&&ae._context.showTips&&(l.notifier(l._(ae,"Double-click to zoom back out"),"long"),z=!1)}function V(ae,ie){return"M"+(ae.l-.5)+","+(ie-P-.5)+"h-3v"+(2*P+1)+"h3ZM"+(ae.r+.5)+","+(ie-P-.5)+"h3v"+(2*P+1)+"h-3Z"}function re(ae,ie){return"M"+(ie-P-.5)+","+(ae.t-.5)+"v-3h"+(2*P+1)+"v3ZM"+(ie-P-.5)+","+(ae.b+.5)+"v3h"+(2*P+1)+"v-3Z"}function ee(ae){var ie=Math.floor(Math.min(ae.b-ae.t,ae.r-ae.l,P)/2);return"M"+(ae.l-3.5)+","+(ae.t-.5+ie)+"h3v"+-ie+"h"+ie+"v-3h-"+(ie+3)+"ZM"+(ae.r+3.5)+","+(ae.t-.5+ie)+"h-3v"+-ie+"h"+-ie+"v-3h"+(ie+3)+"ZM"+(ae.r+3.5)+","+(ae.b+.5-ie)+"h-3v"+ie+"h"+-ie+"v3h"+(ie+3)+"ZM"+(ae.l-3.5)+","+(ae.b+.5-ie)+"h3v"+ie+"h"+ie+"v3h-"+(ie+3)+"Z"}function j(ae,ie,ue,xe,he){for(var ge=!1,me={},ke={},Ae,Ne,He,Ge,_e=(he||{}).xaHash,De=(he||{}).yaHash,Ye=0;Ye<ie.length;Ye++){var qe=ie[Ye];for(Ae in ue)if(qe[Ae]){for(He in qe)!(he&&(_e[He]||De[He]))&&!(He.charAt(0)==="x"?ue:xe)[He]&&(me[He]=Ae);for(Ne in xe)!(he&&(_e[Ne]||De[Ne]))&&qe[Ne]&&(ge=!0)}for(Ne in xe)if(qe[Ne])for(Ge in qe)!(he&&(_e[Ge]||De[Ge]))&&!(Ge.charAt(0)==="x"?ue:xe)[Ge]&&(ke[Ge]=Ne)}ge&&(l.extendFlat(me,ke),ke={});var Ue={},Ie=[];for(He in me){var Ve=x(ae,He);Ie.push(Ve),Ue[Ve._id]=Ve}var dt={},Dt=[];for(Ge in ke){var Yt=x(ae,Ge);Dt.push(Yt),dt[Yt._id]=Yt}return{xaHash:Ue,yaHash:dt,xaxes:Ie,yaxes:Dt,xLinks:me,yLinks:ke,isSubplotConstrained:ge}}function Q(ae,ie){if(!e)ae.onwheel!==void 0?ae.onwheel=ie:ae.onmousewheel!==void 0?ae.onmousewheel=ie:ae.isAddedWheelEvent||(ae.isAddedWheelEvent=!0,ae.addEventListener("wheel",ie,{passive:!1}));else{var ue=ae.onwheel!==void 0?"wheel":"mousewheel";ae._onwheel&&ae.removeEventListener(ue,ae._onwheel),ae._onwheel=ie,ae.addEventListener(ue,ie,{passive:!1})}}function ne(ae){var ie=[];for(var ue in ae)ie.push(ae[ue]);return ie}B.exports={makeDragBox:I,makeDragger:R,makeRectDragger:D,makeZoombox:X,makeCorners:Z,updateZoombox:se,xyCorners:ee,transitionZoombox:le,removeZoombox:oe,showDoubleClickNotifier:U,attachWheelEventHandler:Q}},{"../../components/color":366,"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../constants/alignment":471,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plot_api/subroutines":544,"../../registry":638,"../plots":619,"./axes":554,"./axis_ids":558,"./constants":561,"./scale_zoom":574,"./select":575,"@plotly/d3":58,"has-passive-events":229,tinycolor2:312}],564:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../components/fx"),b=t("../../components/dragelement"),w=t("../../lib/setcursor"),e=t("./dragbox").makeDragBox,o=t("./constants").DRAGGERSIZE;H.initInteractions=function(r){var n=r._fullLayout;if(r._context.staticPlot){d.select(r).selectAll(".drag").remove();return}if(!(!n._has("cartesian")&&!n._has("splom"))){var c=Object.keys(n._plots||{}).sort(function(i,v){if((n._plots[i].mainplot&&!0)===(n._plots[v].mainplot&&!0)){var u=i.split("y"),g=v.split("y");return u[0]===g[0]?Number(u[1]||1)-Number(g[1]||1):Number(u[0]||1)-Number(g[0]||1)}return n._plots[i].mainplot?1:-1});c.forEach(function(i){var v=n._plots[i],u=v.xaxis,g=v.yaxis;if(!v.mainplot){var h=e(r,v,u._offset,g._offset,u._length,g._length,"ns","ew");h.onmousemove=function(A){r._fullLayout._rehover=function(){r._fullLayout._hoversubplot===i&&r._fullLayout._plots[i]&&l.hover(r,A,i)},l.hover(r,A,i),r._fullLayout._lasthover=h,r._fullLayout._hoversubplot=i},h.onmouseout=function(A){r._dragging||(r._fullLayout._hoversubplot=null,b.unhover(r,A))},r._context.showAxisDragHandles&&(e(r,v,u._offset-o,g._offset-o,o,o,"n","w"),e(r,v,u._offset+u._length,g._offset-o,o,o,"n","e"),e(r,v,u._offset-o,g._offset+g._length,o,o,"s","w"),e(r,v,u._offset+u._length,g._offset+g._length,o,o,"s","e"))}if(r._context.showAxisDragHandles){if(i===u._mainSubplot){var y=u._mainLinePosition;u.side==="top"&&(y-=o),e(r,v,u._offset+u._length*.1,y,u._length*.8,o,"","ew"),e(r,v,u._offset,y,u._length*.1,o,"","w"),e(r,v,u._offset+u._length*.9,y,u._length*.1,o,"","e")}if(i===g._mainSubplot){var p=g._mainLinePosition;g.side!=="right"&&(p-=o),e(r,v,p,g._offset+g._length*.1,o,g._length*.8,"ns",""),e(r,v,p,g._offset+g._length*.9,o,g._length*.1,"s",""),e(r,v,p,g._offset,o,g._length*.1,"n","")}}});var s=n._hoverlayer.node();s.onmousemove=function(i){i.target=r._fullLayout._lasthover,l.hover(r,i,n._hoversubplot)},s.onclick=function(i){i.target=r._fullLayout._lasthover,l.click(r,i)},s.onmousedown=function(i){r._fullLayout._lasthover.onmousedown(i)},H.updateFx(r)}},H.updateFx=function(a){var r=a._fullLayout,n=r.dragmode==="pan"?"move":"crosshair";w(r._draggers,n)}},{"../../components/dragelement":385,"../../components/fx":406,"../../lib/setcursor":524,"./constants":561,"./dragbox":563,"@plotly/d3":58}],565:[function(t,B,H){function d(b){var w=b._fullLayout._zoomlayer;w&&w.selectAll(".outline-controllers").remove()}function l(b){var w=b._fullLayout._zoomlayer;w&&w.selectAll(".select-outline").remove(),b._fullLayout._drawing=!1}B.exports={clearOutlineControllers:d,clearSelect:l}},{}],566:[function(t,B,H){var d=t("../../lib").strTranslate;function l(o,a){switch(o.type){case"log":return o.p2d(a);case"date":return o.p2r(a,0,o.calendar);default:return o.p2r(a)}}function b(o,a){switch(o.type){case"log":return o.d2p(a);case"date":return o.r2p(a,0,o.calendar);default:return o.r2p(a)}}function w(o){var a=o._id.charAt(0)==="y"?1:0;return function(r){return l(o,r[a])}}function e(o){return d(o.xaxis._offset,o.yaxis._offset)}B.exports={p2r:l,r2p:b,axValue:w,getTransform:e}},{"../../lib":503}],567:[function(t,B,H){var d=t("../../registry"),l=t("../../lib"),b=t("./axis_ids");B.exports=function(e){return function(a,r){var n=a[e];if(!!Array.isArray(n))for(var c=d.subplotsRegistry.cartesian,s=c.idRegex,i=r._subplots,v=i.xaxis,u=i.yaxis,g=i.cartesian,h=r._has("cartesian")||r._has("gl2d"),y=0;y<n.length;y++){var p=n[y];if(!!l.isPlainObject(p)){var A=b.cleanId(p.xref,"x",!1),m=b.cleanId(p.yref,"y",!1),M=s.x.test(A),x=s.y.test(m);if(M||x){h||l.pushUnique(r._basePlotModules,c);var T=!1;M&&v.indexOf(A)===-1&&(v.push(A),T=!0),x&&u.indexOf(m)===-1&&(u.push(m),T=!0),T&&M&&x&&g.push(A+m)}}}}}},{"../../lib":503,"../../registry":638,"./axis_ids":558}],568:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../registry"),b=t("../../lib"),w=t("../plots"),e=t("../../components/drawing"),o=t("../get_data").getModuleCalcData,a=t("./axis_ids"),r=t("./constants"),n=t("../../constants/xmlns_namespaces"),c=b.ensureSingle;function s(y,p,A){return b.ensureSingle(y,p,A,function(m){m.datum(A)})}H.name="cartesian",H.attr=["xaxis","yaxis"],H.idRoot=["x","y"],H.idRegex=r.idRegex,H.attrRegex=r.attrRegex,H.attributes=t("./attributes"),H.layoutAttributes=t("./layout_attributes"),H.supplyLayoutDefaults=t("./layout_defaults"),H.transitionAxes=t("./transition_axes"),H.finalizeSubplots=function(y,p){var A=p._subplots,m=A.xaxis,M=A.yaxis,x=A.cartesian,T=x.concat(A.gl2d||[]),_={},f={},L,S,k;for(L=0;L<T.length;L++){var P=T[L].split("y");_[P[0]]=1,f["y"+P[1]]=1}for(L=0;L<m.length;L++)S=m[L],_[S]||(k=(y[a.id2name(S)]||{}).anchor,r.idRegex.y.test(k)||(k="y"),x.push(S+k),T.push(S+k),f[k]||(f[k]=1,b.pushUnique(M,k)));for(L=0;L<M.length;L++)k=M[L],f[k]||(S=(y[a.id2name(k)]||{}).anchor,r.idRegex.x.test(S)||(S="x"),x.push(S+k),T.push(S+k),_[S]||(_[S]=1,b.pushUnique(m,S)));if(!T.length){S="",k="";for(var z in y)if(r.attrRegex.test(z)){var I=z.charAt(0);I==="x"?(!S||+z.substr(5)<+S.substr(5))&&(S=z):(!k||+z.substr(5)<+k.substr(5))&&(k=z)}S=S?a.name2id(S):"x",k=k?a.name2id(k):"y",m.push(S),M.push(k),x.push(S+k)}},H.plot=function(y,p,A,m){var M=y._fullLayout,x=M._subplots.cartesian,T=y.calcdata,_;if(!Array.isArray(p))for(p=[],_=0;_<T.length;_++)p.push(_);for(_=0;_<x.length;_++){for(var f=x[_],L=M._plots[f],S=[],k,P=0;P<T.length;P++){var z=T[P],I=z[0].trace;I.xaxis+I.yaxis===f&&((p.indexOf(I.index)!==-1||I.carpet)&&(k&&k[0].trace.xaxis+k[0].trace.yaxis===f&&["tonextx","tonexty","tonext"].indexOf(I.fill)!==-1&&S.indexOf(k)===-1&&S.push(k),S.push(z)),k=z)}i(y,L,S,A,m)}};function i(y,p,A,m,M){for(var x=r.traceLayerClasses,T=y._fullLayout,_=T._modules,f,L,S,k=[],P=[],z=0;z<_.length;z++){f=_[z];var I=f.name,R=l.modules[I].categories;if(R.svg){var D=f.layerName||I+"layer",O=f.plot;L=o(A,O),S=L[0],A=L[1],S.length&&k.push({i:x.indexOf(D),className:D,plotMethod:O,cdModule:S}),R.zoomScale&&P.push("."+D)}}k.sort(function(W,q){return W.i-q.i});var F=p.plot.selectAll("g.mlayer").data(k,function(W){return W.className});if(F.enter().append("g").attr("class",function(W){return W.className}).classed("mlayer",!0).classed("rangeplot",p.isRangePlot),F.exit().remove(),F.order(),F.each(function(W){var q=d.select(this),J=W.className;W.plotMethod(y,p,W.cdModule,q,m,M),r.clipOnAxisFalseQuery.indexOf("."+J)===-1&&e.setClipUrl(q,p.layerClipId,y)}),T._has("scattergl")&&(f=l.getModule("scattergl"),S=o(A,f)[0],f.plot(y,p,S)),!y._context.staticPlot&&(p._hasClipOnAxisFalse&&(p.clipOnAxisFalseTraces=p.plot.selectAll(r.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),P.length)){var G=p.plot.selectAll(P.join(",")).selectAll(".trace");p.zoomScalePts=G.selectAll("path.point"),p.zoomScaleTxt=G.selectAll(".textpoint")}}H.clean=function(y,p,A,m){var M=m._plots||{},x=p._plots||{},T=m._subplots||{},_,f,L;if(m._hasOnlyLargeSploms&&!p._hasOnlyLargeSploms)for(L in M)_=M[L],_.plotgroup&&_.plotgroup.remove();var S=m._has&&m._has("gl"),k=p._has&&p._has("gl");if(S&&!k)for(L in M)_=M[L],_._scene&&_._scene.destroy();if(T.xaxis&&T.yaxis){var P=a.listIds({_fullLayout:m});for(f=0;f<P.length;f++){var z=P[f];p[a.id2name(z)]||m._infolayer.selectAll(".g-"+z+"title").remove()}}var I=m._has&&m._has("cartesian"),R=p._has&&p._has("cartesian");if(I&&!R)g(m._cartesianlayer.selectAll(".subplot"),m),m._defs.selectAll(".axesclip").remove(),delete m._axisConstraintGroups,delete m._axisMatchGroups;else if(T.cartesian)for(f=0;f<T.cartesian.length;f++){var D=T.cartesian[f];if(!x[D]){var O="."+D+",."+D+"-x,."+D+"-y";m._cartesianlayer.selectAll(O).remove(),h(D,m)}}},H.drawFramework=function(y){var p=y._fullLayout,A=v(y),m=p._cartesianlayer.selectAll(".subplot").data(A,String);m.enter().append("g").attr("class",function(M){return"subplot "+M[0]}),m.order(),m.exit().call(g,p),m.each(function(M){var x=M[0],T=p._plots[x];T.plotgroup=d.select(this),u(y,T),T.draglayer=c(p._draggers,"g",x)})},H.rangePlot=function(y,p,A){u(y,p),i(y,p,A),w.style(y)};function v(y){var p=y._fullLayout,A=p._subplots.cartesian,m=A.length,M,x,T,_,f,L,S=[],k=[];for(M=0;M<m;M++){T=A[M],_=p._plots[T],f=_.xaxis,L=_.yaxis;var P=f._mainAxis,z=L._mainAxis,I=P._id+z._id,R=p._plots[I];_.overlays=[],I!==T&&R?(_.mainplot=I,_.mainplotinfo=R,k.push(T)):(_.mainplot=void 0,_.mainplotinfo=void 0,S.push(T))}for(M=0;M<k.length;M++)T=k[M],_=p._plots[T],_.mainplotinfo.overlays.push(_);var D=S.concat(k),O=new Array(m);for(M=0;M<m;M++){T=D[M],_=p._plots[T],f=_.xaxis,L=_.yaxis;var F=[T,f.layer,L.layer,f.overlaying||"",L.overlaying||""];for(x=0;x<_.overlays.length;x++)F.push(_.overlays[x].id);O[M]=F}return O}function u(y,p){var A=p.plotgroup,m=p.id,M=r.layerValue2layerClass[p.xaxis.layer],x=r.layerValue2layerClass[p.yaxis.layer],T=y._fullLayout._hasOnlyLargeSploms;if(p.mainplot){var f=p.mainplotinfo,L=f.plotgroup,S=m+"-x",k=m+"-y";p.gridlayer=f.gridlayer,p.zerolinelayer=f.zerolinelayer,c(f.overlinesBelow,"path",S),c(f.overlinesBelow,"path",k),c(f.overaxesBelow,"g",S),c(f.overaxesBelow,"g",k),p.plot=c(f.overplot,"g",m),c(f.overlinesAbove,"path",S),c(f.overlinesAbove,"path",k),c(f.overaxesAbove,"g",S),c(f.overaxesAbove,"g",k),p.xlines=L.select(".overlines-"+M).select("."+S),p.ylines=L.select(".overlines-"+x).select("."+k),p.xaxislayer=L.select(".overaxes-"+M).select("."+S),p.yaxislayer=L.select(".overaxes-"+x).select("."+k)}else if(T)p.xlines=c(A,"path","xlines-above"),p.ylines=c(A,"path","ylines-above"),p.xaxislayer=c(A,"g","xaxislayer-above"),p.yaxislayer=c(A,"g","yaxislayer-above");else{var _=c(A,"g","layer-subplot");p.shapelayer=c(_,"g","shapelayer"),p.imagelayer=c(_,"g","imagelayer"),p.gridlayer=c(A,"g","gridlayer"),p.zerolinelayer=c(A,"g","zerolinelayer"),c(A,"path","xlines-below"),c(A,"path","ylines-below"),p.overlinesBelow=c(A,"g","overlines-below"),c(A,"g","xaxislayer-below"),c(A,"g","yaxislayer-below"),p.overaxesBelow=c(A,"g","overaxes-below"),p.plot=c(A,"g","plot"),p.overplot=c(A,"g","overplot"),p.xlines=c(A,"path","xlines-above"),p.ylines=c(A,"path","ylines-above"),p.overlinesAbove=c(A,"g","overlines-above"),c(A,"g","xaxislayer-above"),c(A,"g","yaxislayer-above"),p.overaxesAbove=c(A,"g","overaxes-above"),p.xlines=A.select(".xlines-"+M),p.ylines=A.select(".ylines-"+x),p.xaxislayer=A.select(".xaxislayer-"+M),p.yaxislayer=A.select(".yaxislayer-"+x)}T||(s(p.gridlayer,"g",p.xaxis._id),s(p.gridlayer,"g",p.yaxis._id),p.gridlayer.selectAll("g").map(function(P){return P[0]}).sort(a.idSort)),p.xlines.style("fill","none").classed("crisp",!0),p.ylines.style("fill","none").classed("crisp",!0)}function g(y,p){if(!!y){var A={};y.each(function(f){var L=f[0],S=d.select(this);S.remove(),h(L,p),A[L]=!0});for(var m in p._plots)for(var M=p._plots[m],x=M.overlays||[],T=0;T<x.length;T++){var _=x[T];A[_.id]&&_.plot.selectAll(".trace").remove()}}}function h(y,p){p._draggers.selectAll("g."+y).remove(),p._defs.select("#clip"+p._uid+y+"plot").remove()}H.toSVG=function(y){var p=y._fullLayout._glimages,A=d.select(y).selectAll(".svg-container"),m=A.filter(function(x,T){return T===A.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function M(){var x=this,T=x.toDataURL("image/png"),_=p.append("svg:image");_.attr({xmlns:n.svg,"xlink:href":T,preserveAspectRatio:"none",x:0,y:0,width:x.style.width,height:x.style.height})}m.each(M)},H.updateFx=t("./graph_interact").updateFx},{"../../components/drawing":388,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../registry":638,"../get_data":593,"../plots":619,"./attributes":552,"./axis_ids":558,"./constants":561,"./graph_interact":564,"./layout_attributes":569,"./layout_defaults":570,"./transition_axes":581,"@plotly/d3":58}],569:[function(t,B,H){var d=t("../font_attributes"),l=t("../../components/color/attributes"),b=t("../../components/drawing/attributes").dash,w=t("../../lib/extend").extendFlat,e=t("../../plot_api/plot_template").templatedArray,o=t("../../plots/cartesian/axis_format_attributes").descriptionWithDates,a=t("../../constants/numerical").ONEDAY,r=t("./constants"),n=r.HOUR_PATTERN,c=r.WEEKDAY_PATTERN;B.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:l.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:d({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[r.idRegex.x.toString(),r.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[r.idRegex.x.toString(),r.idRegex.y.toString()],editType:"calc"},rangebreaks:e("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[c,n,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:a},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:l.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:w({},b,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:d({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:o("tick label")},tickformatstops:e("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:o("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:l.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:l.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:l.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:l.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",r.idRegex.x.toString(),r.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",r.idRegex.x.toString(),r.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:d({editType:"ticks"})}}},{"../../components/color/attributes":365,"../../components/drawing/attributes":387,"../../constants/numerical":479,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../font_attributes":585,"./constants":561}],570:[function(t,B,H){var d=t("../../lib"),l=t("../../components/color"),b=t("../../components/fx/helpers").isUnifiedHover,w=t("../../components/fx/hovermode_defaults"),e=t("../../plot_api/plot_template"),o=t("../layout_attributes"),a=t("./layout_attributes"),r=t("./type_defaults"),n=t("./axis_defaults"),c=t("./constraints"),s=t("./position_defaults"),i=t("./axis_ids"),v=i.id2name,u=i.name2id,g=t("./constants").AX_ID_PATTERN,h=t("../../registry"),y=h.traceIs,p=h.getComponentMethod;function A(m,M,x){Array.isArray(m[M])?m[M].push(x):m[M]=[x]}B.exports=function(M,x,T){var _=x.autotypenumbers,f={},L={},S={},k={},P={},z={},I={},R={},D={},O={},F,G;for(F=0;F<T.length;F++){var W=T[F];if(!(!y(W,"cartesian")&&!y(W,"gl2d"))){var q;if(W.xaxis)q=v(W.xaxis),A(f,q,W);else if(W.xaxes)for(G=0;G<W.xaxes.length;G++)A(f,v(W.xaxes[G]),W);var J;if(W.yaxis)J=v(W.yaxis),A(f,J,W);else if(W.yaxes)for(G=0;G<W.yaxes.length;G++)A(f,v(W.yaxes[G]),W);if(W.type==="funnel"?W.orientation==="h"?(q&&(L[q]=!0),J&&(I[J]=!0)):J&&(S[J]=!0):W.type==="image"?(J&&(R[J]=!0),q&&(R[q]=!0)):(J&&(P[J]=!0,z[J]=!0),(!y(W,"carpet")||W.type==="carpet"&&!W._cheater)&&q&&(k[q]=!0)),W.type==="carpet"&&W._cheater&&q&&(L[q]=!0),y(W,"2dMap")&&(D[q]=!0,D[J]=!0),y(W,"oriented")){var X=W.orientation==="h"?J:q;O[X]=!0}}}var Z=x._subplots,se=Z.xaxis,le=Z.yaxis,oe=d.simpleMap(se,v),U=d.simpleMap(le,v),V=oe.concat(U),re=l.background;se.length&&le.length&&(re=d.coerce(M,x,o,"plot_bgcolor"));var ee=l.combine(re,x.paper_bgcolor),j,Q,ne,ae,ie;function ue(){var Qe=f[j]||[];ie._traceIndices=Qe.map(function(Ce){return Ce._expandedIndex}),ie._annIndices=[],ie._shapeIndices=[],ie._imgIndices=[],ie._subplotsWith=[],ie._counterAxes=[],ie._name=ie._attr=j,ie._id=Q}function xe(Qe,Ce){return d.coerce(ae,ie,a,Qe,Ce)}function he(Qe,Ce){return d.coerce2(ae,ie,a,Qe,Ce)}function ge(Qe){return Qe==="x"?le:se}function me(Qe,Ce){for(var je=Qe==="x"?oe:U,rt=[],ut=0;ut<je.length;ut++){var Pt=je[ut];Pt!==Ce&&!(M[Pt]||{}).overlaying&&rt.push(u(Pt))}return rt}var ke={x:ge("x"),y:ge("y")},Ae=ke.x.concat(ke.y),Ne={},He=[];function Ge(){var Qe=ae.matches;g.test(Qe)&&Ae.indexOf(Qe)===-1&&(Ne[Qe]=ae.type,He=Object.keys(Ne))}var _e=w(M,x),De=b(_e);for(F=0;F<V.length;F++){j=V[F],Q=u(j),ne=j.charAt(0),d.isPlainObject(M[j])||(M[j]={}),ae=M[j],ie=e.newContainer(x,j,ne+"axis"),ue();var Ye=ne==="x"&&!k[j]&&L[j]||ne==="y"&&!P[j]&&S[j],qe=ne==="y"&&(!z[j]&&I[j]||R[j]),Ue={letter:ne,font:x.font,outerTicks:D[j],showGrid:!O[j],data:f[j]||[],bgColor:ee,calendar:x.calendar,automargin:!0,visibleDflt:Ye,reverseDflt:qe,autotypenumbersDflt:_,splomStash:((x._splomAxes||{})[ne]||{})[Q]};xe("uirevision",x.uirevision),r(ae,ie,xe,Ue),n(ae,ie,xe,Ue,x);var Ie=De&&ne===_e.charAt(0),Ve=he("spikecolor",De?ie.color:void 0),dt=he("spikethickness",De?1.5:void 0),Dt=he("spikedash",De?"dot":void 0),Yt=he("spikemode",De?"across":void 0),kt=he("spikesnap"),Ft=xe("showspikes",!!Ie||!!Ve||!!dt||!!Dt||!!Yt||!!kt);Ft||(delete ie.spikecolor,delete ie.spikethickness,delete ie.spikedash,delete ie.spikemode,delete ie.spikesnap),s(ae,ie,xe,{letter:ne,counterAxes:ke[ne],overlayableAxes:me(ne,j),grid:x.grid}),xe("title.standoff"),Ge(),ie._input=ae}for(F=0;F<He.length;){Q=He[F++],j=v(Q),ne=j.charAt(0),d.isPlainObject(M[j])||(M[j]={}),ae=M[j],ie=e.newContainer(x,j,ne+"axis"),ue();var Nt={letter:ne,font:x.font,outerTicks:D[j],showGrid:!O[j],data:[],bgColor:ee,calendar:x.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:_,splomStash:((x._splomAxes||{})[ne]||{})[Q]};xe("uirevision",x.uirevision),ie.type=Ne[Q]||"linear",n(ae,ie,xe,Nt,x),s(ae,ie,xe,{letter:ne,counterAxes:ke[ne],overlayableAxes:me(ne,j),grid:x.grid}),xe("fixedrange"),Ge(),ie._input=ae}var Lt=p("rangeslider","handleDefaults"),St=p("rangeselector","handleDefaults");for(F=0;F<oe.length;F++)j=oe[F],ae=M[j],ie=x[j],Lt(M,x,j),ie.type==="date"&&St(ae,ie,x,U,ie.calendar),xe("fixedrange");for(F=0;F<U.length;F++){j=U[F],ae=M[j],ie=x[j];var it=x[v(ie.anchor)],ht=p("rangeslider","isVisible")(it);xe("fixedrange",ht)}c.handleDefaults(M,x,{axIds:Ae.concat(He).sort(i.idSort),axHasImage:R})}},{"../../components/color":366,"../../components/fx/helpers":402,"../../components/fx/hovermode_defaults":405,"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"../layout_attributes":610,"./axis_defaults":556,"./axis_ids":558,"./constants":561,"./constraints":562,"./layout_attributes":569,"./position_defaults":572,"./type_defaults":582}],571:[function(t,B,H){var d=t("tinycolor2").mix,l=t("../../components/color/attributes").lightFraction,b=t("../../lib");B.exports=function(e,o,a,r){r=r||{};var n=r.dfltColor;function c(M,x){return b.coerce2(e,o,r.attributes,M,x)}var s=c("linecolor",n),i=c("linewidth"),v=a("showline",r.showLine||!!s||!!i);v||(delete o.linecolor,delete o.linewidth);var u=d(n,r.bgColor,r.blend||l).toRgbString(),g=c("gridcolor",u),h=c("gridwidth"),y=a("showgrid",r.showGrid||!!g||!!h);if(y||(delete o.gridcolor,delete o.gridwidth),!r.noZeroLine){var p=c("zerolinecolor",n),A=c("zerolinewidth"),m=a("zeroline",r.showGrid||!!p||!!A);m||(delete o.zerolinecolor,delete o.zerolinewidth)}}},{"../../components/color/attributes":365,"../../lib":503,tinycolor2:312}],572:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../lib");B.exports=function(w,e,o,a){var r=a.counterAxes||[],n=a.overlayableAxes||[],c=a.letter,s=a.grid,i,v,u,g;s&&(v=s._domains[c][s._axisMap[e._id]],i=s._anchors[e._id],v&&(u=s[c+"side"].split(" ")[0],g=s.domain[c][u==="right"||u==="top"?1:0])),v=v||[0,1],i=i||(d(w.position)?"free":r[0]||"free"),u=u||(c==="x"?"bottom":"left"),g=g||0;var h=l.coerce(w,e,{anchor:{valType:"enumerated",values:["free"].concat(r),dflt:i}},"anchor");h==="free"&&o("position",g),l.coerce(w,e,{side:{valType:"enumerated",values:c==="x"?["bottom","top"]:["left","right"],dflt:u}},"side");var y=!1;if(n.length&&(y=l.coerce(w,e,{overlaying:{valType:"enumerated",values:[!1].concat(n),dflt:!1}},"overlaying")),!y){var p=o("domain",v);p[0]>p[1]-1/4096&&(e.domain=v),l.noneOrAll(w.domain,e.domain,v)}return o("layer"),e}},{"../../lib":503,"fast-isnumeric":190}],573:[function(t,B,H){var d=t("./show_dflt");B.exports=function(b,w,e,o,a){a||(a={});var r=a.tickSuffixDflt,n=d(b),c=e("tickprefix");c&&e("showtickprefix",n);var s=e("ticksuffix",r);s&&e("showticksuffix",n)}},{"./show_dflt":577}],574:[function(t,B,H){var d=t("../../constants/alignment").FROM_BL;B.exports=function(b,w,e){e===void 0&&(e=d[b.constraintoward||"center"]);var o=[b.r2l(b.range[0]),b.r2l(b.range[1])],a=o[0]+(o[1]-o[0])*e;b.range=b._input.range=[b.l2r(a+(o[0]-a)*w),b.l2r(a+(o[1]-a)*w)],b.setScale()}},{"../../constants/alignment":471}],575:[function(t,B,H){var d=t("polybooljs"),l=t("../../registry"),b=t("../../components/drawing").dashStyle,w=t("../../components/color"),e=t("../../components/fx"),o=t("../../components/fx/helpers").makeEventData,a=t("../../components/dragelement/helpers"),r=a.freeMode,n=a.rectMode,c=a.drawMode,s=a.openMode,i=a.selectMode,v=t("../../components/shapes/draw_newshape/display_outlines"),u=t("../../components/shapes/draw_newshape/helpers").handleEllipse,g=t("../../components/shapes/draw_newshape/newshapes"),h=t("../../lib"),y=t("../../lib/polygon"),p=t("../../lib/throttle"),A=t("./axis_ids").getFromId,m=t("../../lib/clear_gl_canvases"),M=t("../../plot_api/subroutines").redrawReglTraces,x=t("./constants"),T=x.MINSELECT,_=y.filter,f=y.tester,L=t("./handle_outline").clearSelect,S=t("./helpers"),k=S.p2r,P=S.axValue,z=S.getTransform;function I(j,Q,ne,ae,ie){var ue=r(ie),xe=n(ie),he=s(ie),ge=c(ie),me=i(ie),ke=ie==="drawline",Ae=ie==="drawcircle",Ne=ke||Ae,He=ae.gd,Ge=He._fullLayout,_e=Ge._zoomlayer,De=ae.element.getBoundingClientRect(),Ye=ae.plotinfo,qe=z(Ye),Ue=Q-De.left,Ie=ne-De.top;Ge._calcInverseTransform(He);var Ve=h.apply3DTransform(Ge._invTransform)(Ue,Ie);Ue=Ve[0],Ie=Ve[1];var dt=Ge._invScaleX,Dt=Ge._invScaleY,Yt=Ue,kt=Ie,Ft="M"+Ue+","+Ie,Nt=ae.xaxes[0]._length,Lt=ae.yaxes[0]._length,St=ae.xaxes.concat(ae.yaxes),it=j.altKey&&!(c(ie)&&he),ht,Qe,Ce,je,rt,ut,Pt;W(j,He,ae),ue&&(ht=_([[Ue,Ie]],x.BENDPX));var Tt=_e.selectAll("path.select-outline-"+Ye.id).data(ge?[0]:[1,2]),Ot=Ge.newshape;Tt.enter().append("path").attr("class",function(ar){return"select-outline select-outline-"+ar+" select-outline-"+Ye.id}).style(ge?{opacity:Ot.opacity/2,fill:he?void 0:Ot.fillcolor,stroke:Ot.line.color,"stroke-dasharray":b(Ot.line.dash,Ot.line.width),"stroke-width":Ot.line.width+"px"}:{}).attr("fill-rule",Ot.fillrule).classed("cursor-move",!!ge).attr("transform",qe).attr("d",Ft+"Z");var Kt=_e.append("path").attr("class","zoombox-corners").style({fill:w.background,stroke:w.defaultLine,"stroke-width":1}).attr("transform",qe).attr("d","M0,0Z"),Bt=Ge._uid+x.SELECTID,Zt=[],Je=J(He,ae.xaxes,ae.yaxes,ae.subplot);function pt(ar,vr){return ar-vr}var Et;Ye.fillRangeItems?Et=Ye.fillRangeItems:xe?Et=function(ar,vr){var ir=ar.range={};for(rt=0;rt<St.length;rt++){var dr=St[rt],Pr=dr._id.charAt(0);ir[dr._id]=[k(dr,vr[Pr+"min"]),k(dr,vr[Pr+"max"])].sort(pt)}}:Et=function(ar,vr,ir){var dr=ar.lassoPoints={};for(rt=0;rt<St.length;rt++){var Pr=St[rt];dr[Pr._id]=ir.filtered.map(P(Pr))}},ae.moveFn=function(ar,vr){Yt=Math.max(0,Math.min(Nt,dt*ar+Ue)),kt=Math.max(0,Math.min(Lt,Dt*vr+Ie));var ir=Math.abs(Yt-Ue),dr=Math.abs(kt-Ie);if(xe){var Pr,Sr,tr;if(me){var Nr=Ge.selectdirection;switch(Nr==="any"?dr<Math.min(ir*.6,T)?Pr="h":ir<Math.min(dr*.6,T)?Pr="v":Pr="d":Pr=Nr,Pr){case"h":Sr=Ae?Lt/2:0,tr=Lt;break;case"v":Sr=Ae?Nt/2:0,tr=Nt;break}}if(ge)switch(Ge.newshape.drawdirection){case"vertical":Pr="h",Sr=Ae?Lt/2:0,tr=Lt;break;case"horizontal":Pr="v",Sr=Ae?Nt/2:0,tr=Nt;break;case"ortho":ir<dr?(Pr="h",Sr=Ie,tr=kt):(Pr="v",Sr=Ue,tr=Yt);break;default:Pr="d"}Pr==="h"?(je=Ne?u(Ae,[Yt,Sr],[Yt,tr]):[[Ue,Sr],[Ue,tr],[Yt,tr],[Yt,Sr]],je.xmin=Ne?Yt:Math.min(Ue,Yt),je.xmax=Ne?Yt:Math.max(Ue,Yt),je.ymin=Math.min(Sr,tr),je.ymax=Math.max(Sr,tr),Kt.attr("d","M"+je.xmin+","+(Ie-T)+"h-4v"+2*T+"h4ZM"+(je.xmax-1)+","+(Ie-T)+"h4v"+2*T+"h-4Z")):Pr==="v"?(je=Ne?u(Ae,[Sr,kt],[tr,kt]):[[Sr,Ie],[Sr,kt],[tr,kt],[tr,Ie]],je.xmin=Math.min(Sr,tr),je.xmax=Math.max(Sr,tr),je.ymin=Ne?kt:Math.min(Ie,kt),je.ymax=Ne?kt:Math.max(Ie,kt),Kt.attr("d","M"+(Ue-T)+","+je.ymin+"v-4h"+2*T+"v4ZM"+(Ue-T)+","+(je.ymax-1)+"v4h"+2*T+"v-4Z")):Pr==="d"&&(je=Ne?u(Ae,[Ue,Ie],[Yt,kt]):[[Ue,Ie],[Ue,kt],[Yt,kt],[Yt,Ie]],je.xmin=Math.min(Ue,Yt),je.xmax=Math.max(Ue,Yt),je.ymin=Math.min(Ie,kt),je.ymax=Math.max(Ie,kt),Kt.attr("d","M0,0Z"))}else ue&&(ht.addPt([Yt,kt]),je=ht.filtered);ae.selectionDefs&&ae.selectionDefs.length?(Ce=V(ae.mergedPolygons,je,it),je.subtract=it,Qe=G(ae.selectionDefs.concat([je]))):(Ce=[je],Qe=f(je)),v(ee(Ce,he),Tt,ae),me&&p.throttle(Bt,x.SELECTDELAY,function(){Zt=[];var et,we;for(rt=0;rt<Je.length;rt++)if(ut=Je[rt],we=ut._module.selectPoints(ut,Qe),et=re(we,ut),Zt.length)for(var Me=0;Me<et.length;Me++)Zt.push(et[Me]);else Zt=et;Pt={points:Zt},U(He,Je,Pt),Et(Pt,je,ht),ae.gd.emit("plotly_selecting",Pt)})},ae.clickFn=function(ar,vr){if(Kt.remove(),He._fullLayout._activeShapeIndex>=0){He._fullLayout._deactivateShape(He);return}if(!ge){var ir=Ge.clickmode;p.done(Bt).then(function(){if(p.clear(Bt),ar===2){for(Tt.remove(),rt=0;rt<Je.length;rt++)ut=Je[rt],ut._module.selectPoints(ut,!1);U(He,Je),q(ae),He.emit("plotly_deselect",null)}else ir.indexOf("select")>-1&&R(vr,He,ae.xaxes,ae.yaxes,ae.subplot,ae,Tt),ir==="event"&&He.emit("plotly_selected",void 0);e.click(He,vr)}).catch(h.error)}},ae.doneFn=function(){Kt.remove(),p.done(Bt).then(function(){p.clear(Bt),ae.gd.emit("plotly_selected",Pt),je&&ae.selectionDefs&&(je.subtract=it,ae.selectionDefs.push(je),ae.mergedPolygons.length=0,[].push.apply(ae.mergedPolygons,Ce)),ae.doneFnCompleted&&ae.doneFnCompleted(Zt)}).catch(h.error),ge&&q(ae)}}function R(j,Q,ne,ae,ie,ue,xe){var he=Q._hoverdata,ge=Q._fullLayout,me=ge.clickmode,ke=me.indexOf("event")>-1,Ae=[],Ne,He,Ge,_e,De,Ye,qe,Ue,Ie,Ve;if(X(he)){W(j,Q,ue),Ne=J(Q,ne,ae,ie);var dt=Z(he,Ne),Dt=dt.pointNumbers.length>0;if(Dt?le(Ne,dt):oe(Ne)&&(qe=se(dt))){for(xe&&xe.remove(),Ve=0;Ve<Ne.length;Ve++)He=Ne[Ve],He._module.selectPoints(He,!1);U(Q,Ne),q(ue),ke&&Q.emit("plotly_deselect",null)}else{Ue=j.shiftKey&&(qe!==void 0?qe:se(dt)),Ge=D(dt.pointNumber,dt.searchInfo,Ue);var Yt=ue.selectionDefs.concat([Ge]);for(_e=G(Yt),Ve=0;Ve<Ne.length;Ve++)if(De=Ne[Ve]._module.selectPoints(Ne[Ve],_e),Ye=re(De,Ne[Ve]),Ae.length)for(var kt=0;kt<Ye.length;kt++)Ae.push(Ye[kt]);else Ae=Ye;if(Ie={points:Ae},U(Q,Ne,Ie),Ge&&ue&&ue.selectionDefs.push(Ge),xe){var Ft=ue.mergedPolygons,Nt=s(ue.dragmode);v(ee(Ft,Nt),xe,ue)}ke&&Q.emit("plotly_selected",Ie)}}}function D(j,Q,ne){return{pointNumber:j,searchInfo:Q,subtract:ne}}function O(j){return"pointNumber"in j&&"searchInfo"in j}function F(j){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(Q,ne,ae,ie){var ue=j.searchInfo.cd[0].trace._expandedIndex,xe=ie.cd[0].trace._expandedIndex;return xe===ue&&ae===j.pointNumber},isRect:!1,degenerate:!1,subtract:j.subtract}}function G(j){for(var Q=[],ne=O(j[0])?0:j[0][0][0],ae=ne,ie=O(j[0])?0:j[0][0][1],ue=ie,xe=0;xe<j.length;xe++)if(O(j[xe]))Q.push(F(j[xe]));else{var he=y.tester(j[xe]);he.subtract=j[xe].subtract,Q.push(he),ne=Math.min(ne,he.xmin),ae=Math.max(ae,he.xmax),ie=Math.min(ie,he.ymin),ue=Math.max(ue,he.ymax)}function ge(me,ke,Ae,Ne){for(var He=!1,Ge=0;Ge<Q.length;Ge++)Q[Ge].contains(me,ke,Ae,Ne)&&(He=Q[Ge].subtract===!1);return He}return{xmin:ne,xmax:ae,ymin:ie,ymax:ue,pts:[],contains:ge,isRect:!1,degenerate:!1}}function W(j,Q,ne){Q._fullLayout._drawing=!1;var ae=Q._fullLayout,ie=ne.plotinfo,ue=ne.dragmode,xe=ae._lastSelectedSubplot&&ae._lastSelectedSubplot===ie.id,he=(j.shiftKey||j.altKey)&&!(c(ue)&&s(ue));xe&&he&&ie.selection&&ie.selection.selectionDefs&&!ne.selectionDefs?(ne.selectionDefs=ie.selection.selectionDefs,ne.mergedPolygons=ie.selection.mergedPolygons):(!he||!ie.selection)&&q(ne),xe||(L(Q),ae._lastSelectedSubplot=ie.id)}function q(j){var Q=j.dragmode,ne=j.plotinfo,ae=j.gd;if(ae._fullLayout._activeShapeIndex>=0&&ae._fullLayout._deactivateShape(ae),c(Q)){var ie=ae._fullLayout,ue=ie._zoomlayer,xe=ue.selectAll(".select-outline-"+ne.id);if(xe&&ae._fullLayout._drawing){var he=g(xe,j);he&&l.call("_guiRelayout",ae,{shapes:he}),ae._fullLayout._drawing=!1}}ne.selection={},ne.selection.selectionDefs=j.selectionDefs=[],ne.selection.mergedPolygons=j.mergedPolygons=[]}function J(j,Q,ne,ae){var ie=[],ue=Q.map(function(He){return He._id}),xe=ne.map(function(He){return He._id}),he,ge,me;for(me=0;me<j.calcdata.length;me++)if(he=j.calcdata[me],ge=he[0].trace,!(ge.visible!==!0||!ge._module||!ge._module.selectPoints))if(ae&&(ge.subplot===ae||ge.geo===ae))ie.push(Ne(ge._module,he,Q[0],ne[0]));else if(ge.type==="splom"&&ge._xaxes[ue[0]]&&ge._yaxes[xe[0]]){var ke=Ne(ge._module,he,Q[0],ne[0]);ke.scene=j._fullLayout._splomScenes[ge.uid],ie.push(ke)}else if(ge.type==="sankey"){var Ae=Ne(ge._module,he,Q[0],ne[0]);ie.push(Ae)}else{if(ue.indexOf(ge.xaxis)===-1||xe.indexOf(ge.yaxis)===-1)continue;ie.push(Ne(ge._module,he,A(j,ge.xaxis),A(j,ge.yaxis)))}return ie;function Ne(He,Ge,_e,De){return{_module:He,cd:Ge,xaxis:_e,yaxis:De}}}function X(j){return j&&Array.isArray(j)&&j[0].hoverOnBox!==!0}function Z(j,Q){var ne=j[0],ae=-1,ie=[],ue,xe;for(xe=0;xe<Q.length;xe++)if(ue=Q[xe],ne.fullData._expandedIndex===ue.cd[0].trace._expandedIndex){if(ne.hoverOnBox===!0)break;ne.pointNumber!==void 0?ae=ne.pointNumber:ne.binNumber!==void 0&&(ae=ne.binNumber,ie=ne.pointNumbers);break}return{pointNumber:ae,pointNumbers:ie,searchInfo:ue}}function se(j){var Q=j.searchInfo.cd[0].trace,ne=j.pointNumber,ae=j.pointNumbers,ie=ae.length>0,ue=ie?ae[0]:ne;return Q.selectedpoints?Q.selectedpoints.indexOf(ue)>-1:!1}function le(j,Q){var ne=[],ae,ie,ue,xe;for(xe=0;xe<j.length;xe++)ae=j[xe],ae.cd[0].trace.selectedpoints&&ae.cd[0].trace.selectedpoints.length>0&&ne.push(ae);if(ne.length===1&&(ue=ne[0]===Q.searchInfo,ue&&(ie=Q.searchInfo.cd[0].trace,ie.selectedpoints.length===Q.pointNumbers.length))){for(xe=0;xe<Q.pointNumbers.length;xe++)if(ie.selectedpoints.indexOf(Q.pointNumbers[xe])<0)return!1;return!0}return!1}function oe(j){var Q=0,ne,ae,ie;for(ie=0;ie<j.length;ie++)if(ne=j[ie],ae=ne.cd[0].trace,ae.selectedpoints&&(ae.selectedpoints.length>1||(Q+=ae.selectedpoints.length,Q>1)))return!1;return Q===1}function U(j,Q,ne){var ae,ie,ue,xe;for(ae=0;ae<Q.length;ae++){var he=Q[ae].cd[0].trace._fullInput,ge=j._fullLayout._tracePreGUI[he.uid]||{};ge.selectedpoints===void 0&&(ge.selectedpoints=he._input.selectedpoints||null)}if(ne){var me=ne.points||[];for(ae=0;ae<Q.length;ae++)xe=Q[ae].cd[0].trace,xe._input.selectedpoints=xe._fullInput.selectedpoints=[],xe._fullInput!==xe&&(xe.selectedpoints=[]);for(ae=0;ae<me.length;ae++){var ke=me[ae],Ae=ke.data,Ne=ke.fullData;ke.pointIndices?([].push.apply(Ae.selectedpoints,ke.pointIndices),xe._fullInput!==xe&&[].push.apply(Ne.selectedpoints,ke.pointIndices)):(Ae.selectedpoints.push(ke.pointIndex),xe._fullInput!==xe&&Ne.selectedpoints.push(ke.pointIndex))}}else for(ae=0;ae<Q.length;ae++)xe=Q[ae].cd[0].trace,delete xe.selectedpoints,delete xe._input.selectedpoints,xe._fullInput!==xe&&delete xe._fullInput.selectedpoints;var He=!1;for(ae=0;ae<Q.length;ae++){ie=Q[ae],ue=ie.cd,xe=ue[0].trace,l.traceIs(xe,"regl")&&(He=!0);var Ge=ie._module,_e=Ge.styleOnSelect||Ge.style;_e&&(_e(j,ue,ue[0].node3),ue[0].nodeRangePlot3&&_e(j,ue,ue[0].nodeRangePlot3))}He&&(m(j),M(j))}function V(j,Q,ne){var ae;return ne?(ae=d.difference({regions:j,inverted:!1},{regions:[Q],inverted:!1}),ae.regions):(ae=d.union({regions:j,inverted:!1},{regions:[Q],inverted:!1}),ae.regions)}function re(j,Q){if(Array.isArray(j))for(var ne=Q.cd,ae=Q.cd[0].trace,ie=0;ie<j.length;ie++)j[ie]=o(j[ie],ae,ne);return j}function ee(j,Q){for(var ne=[],ae=0;ae<j.length;ae++){ne[ae]=[];for(var ie=0;ie<j[ae].length;ie++){ne[ae][ie]=[],ne[ae][ie][0]=ie?"L":"M";for(var ue=0;ue<j[ae][ie].length;ue++)ne[ae][ie].push(j[ae][ie][ue])}Q||ne[ae].push(["Z",ne[ae][0][1],ne[ae][0][2]])}return ne}B.exports={prepSelect:I,clearSelect:L,clearSelectionsCache:q,selectOnClick:R}},{"../../components/color":366,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../components/fx/helpers":402,"../../components/shapes/draw_newshape/display_outlines":454,"../../components/shapes/draw_newshape/helpers":455,"../../components/shapes/draw_newshape/newshapes":456,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/polygon":515,"../../lib/throttle":530,"../../plot_api/subroutines":544,"../../registry":638,"./axis_ids":558,"./constants":561,"./handle_outline":565,"./helpers":566,polybooljs:254}],576:[function(t,B,H){var d=t("@plotly/d3"),l=t("d3-time-format").utcFormat,b=t("../../lib"),w=b.numberFormat,e=t("fast-isnumeric"),o=b.cleanNumber,a=b.ms2DateTime,r=b.dateTime2ms,n=b.ensureNumber,c=b.isArrayOrTypedArray,s=t("../../constants/numerical"),i=s.FP_SAFE,v=s.BADNUM,u=s.LOG_CLIP,g=s.ONEWEEK,h=s.ONEDAY,y=s.ONEHOUR,p=s.ONEMIN,A=s.ONESEC,m=t("./axis_ids"),M=t("./constants"),x=M.HOUR_PATTERN,T=M.WEEKDAY_PATTERN;function _(L){return Math.pow(10,L)}function f(L){return L!=null}B.exports=function(S,k){k=k||{};var P=S._id||"x",z=P.charAt(0);function I(V,re){if(V>0)return Math.log(V)/Math.LN10;if(V<=0&&re&&S.range&&S.range.length===2){var ee=S.range[0],j=S.range[1];return .5*(ee+j-2*u*Math.abs(ee-j))}else return v}function R(V,re,ee,j){if((j||{}).msUTC&&e(V))return+V;var Q=r(V,ee||S.calendar);if(Q===v)if(e(V)){V=+V;var ne=Math.floor(b.mod(V+.05,1)*10),ae=Math.round(V-ne/10);Q=r(new Date(ae))+ne/10}else return v;return Q}function D(V,re,ee){return a(V,re,ee||S.calendar)}function O(V){return S._categories[Math.round(V)]}function F(V){if(f(V)){if(S._categoriesMap===void 0&&(S._categoriesMap={}),S._categoriesMap[V]!==void 0)return S._categoriesMap[V];S._categories.push(typeof V=="number"?String(V):V);var re=S._categories.length-1;return S._categoriesMap[V]=re,re}return v}function G(V,re){for(var ee=new Array(re),j=0;j<re;j++){var Q=(V[0]||[])[j],ne=(V[1]||[])[j];ee[j]=W([Q,ne])}return ee}function W(V){if(S._categoriesMap)return S._categoriesMap[V]}function q(V){var re=W(V);if(re!==void 0)return re;if(e(V))return+V}function J(V){return e(V)?+V:W(V)}function X(V,re,ee){return d.round(ee+re*V,2)}function Z(V,re,ee){return(V-ee)/re}var se=function(re){return e(re)?X(re,S._m,S._b):v},le=function(V){return Z(V,S._m,S._b)};if(S.rangebreaks){var oe=z==="y";se=function(V){if(!e(V))return v;var re=S._rangebreaks.length;if(!re)return X(V,S._m,S._b);var ee=oe;S.range[0]>S.range[1]&&(ee=!ee);for(var j=ee?-1:1,Q=j*V,ne=0,ae=0;ae<re;ae++){var ie=j*S._rangebreaks[ae].min,ue=j*S._rangebreaks[ae].max;if(Q<ie)break;if(Q>ue)ne=ae+1;else{ne=Q<(ie+ue)/2?ae:ae+1;break}}var xe=S._B[ne]||0;return isFinite(xe)?X(V,S._m2,xe):0},le=function(V){var re=S._rangebreaks.length;if(!re)return Z(V,S._m,S._b);for(var ee=0,j=0;j<re&&!(V<S._rangebreaks[j].pmin);j++)V>S._rangebreaks[j].pmax&&(ee=j+1);return Z(V,S._m2,S._B[ee])}}S.c2l=S.type==="log"?I:n,S.l2c=S.type==="log"?_:n,S.l2p=se,S.p2l=le,S.c2p=S.type==="log"?function(V,re){return se(I(V,re))}:se,S.p2c=S.type==="log"?function(V){return _(le(V))}:le,["linear","-"].indexOf(S.type)!==-1?(S.d2r=S.r2d=S.d2c=S.r2c=S.d2l=S.r2l=o,S.c2d=S.c2r=S.l2d=S.l2r=n,S.d2p=S.r2p=function(V){return S.l2p(o(V))},S.p2d=S.p2r=le,S.cleanPos=n):S.type==="log"?(S.d2r=S.d2l=function(V,re){return I(o(V),re)},S.r2d=S.r2c=function(V){return _(o(V))},S.d2c=S.r2l=o,S.c2d=S.l2r=n,S.c2r=I,S.l2d=_,S.d2p=function(V,re){return S.l2p(S.d2r(V,re))},S.p2d=function(V){return _(le(V))},S.r2p=function(V){return S.l2p(o(V))},S.p2r=le,S.cleanPos=n):S.type==="date"?(S.d2r=S.r2d=b.identity,S.d2c=S.r2c=S.d2l=S.r2l=R,S.c2d=S.c2r=S.l2d=S.l2r=D,S.d2p=S.r2p=function(V,re,ee){return S.l2p(R(V,0,ee))},S.p2d=S.p2r=function(V,re,ee){return D(le(V),re,ee)},S.cleanPos=function(V){return b.cleanDate(V,v,S.calendar)}):S.type==="category"?(S.d2c=S.d2l=F,S.r2d=S.c2d=S.l2d=O,S.d2r=S.d2l_noadd=q,S.r2c=function(V){var re=J(V);return re!==void 0?re:S.fraction2r(.5)},S.l2r=S.c2r=n,S.r2l=J,S.d2p=function(V){return S.l2p(S.r2c(V))},S.p2d=function(V){return O(le(V))},S.r2p=S.d2p,S.p2r=le,S.cleanPos=function(V){return typeof V=="string"&&V!==""?V:n(V)}):S.type==="multicategory"&&(S.r2d=S.c2d=S.l2d=O,S.d2r=S.d2l_noadd=q,S.r2c=function(V){var re=q(V);return re!==void 0?re:S.fraction2r(.5)},S.r2c_just_indices=W,S.l2r=S.c2r=n,S.r2l=q,S.d2p=function(V){return S.l2p(S.r2c(V))},S.p2d=function(V){return O(le(V))},S.r2p=S.d2p,S.p2r=le,S.cleanPos=function(V){return Array.isArray(V)||typeof V=="string"&&V!==""?V:n(V)},S.setupMultiCategory=function(V){var re=S._traceIndices,ee,j,Q=S._matchGroup;if(Q&&S._categories.length===0){for(var ne in Q)if(ne!==P){var ae=k[m.id2name(ne)];re=re.concat(ae._traceIndices)}}var ie=[[0,{}],[0,{}]],ue=[];for(ee=0;ee<re.length;ee++){var xe=V[re[ee]];if(z in xe){var he=xe[z],ge=xe._length||b.minRowLength(he);if(c(he[0])&&c(he[1]))for(j=0;j<ge;j++){var me=he[0][j],ke=he[1][j];f(me)&&f(ke)&&(ue.push([me,ke]),me in ie[0][1]||(ie[0][1][me]=ie[0][0]++),ke in ie[1][1]||(ie[1][1][ke]=ie[1][0]++))}}}for(ue.sort(function(Ae,Ne){var He=ie[0][1],Ge=He[Ae[0]]-He[Ne[0]];if(Ge)return Ge;var _e=ie[1][1];return _e[Ae[1]]-_e[Ne[1]]}),ee=0;ee<ue.length;ee++)F(ue[ee])}),S.fraction2r=function(V){var re=S.r2l(S.range[0]),ee=S.r2l(S.range[1]);return S.l2r(re+V*(ee-re))},S.r2fraction=function(V){var re=S.r2l(S.range[0]),ee=S.r2l(S.range[1]);return(S.r2l(V)-re)/(ee-re)},S.cleanRange=function(V,re){re||(re={}),V||(V="range");var ee=b.nestedProperty(S,V).get(),j,Q;if(S.type==="date"?Q=b.dfltRange(S.calendar):z==="y"?Q=M.DFLTRANGEY:S._name==="realaxis"?Q=[0,1]:Q=re.dfltRange||M.DFLTRANGEX,Q=Q.slice(),(S.rangemode==="tozero"||S.rangemode==="nonnegative")&&(Q[0]=0),!ee||ee.length!==2){b.nestedProperty(S,V).set(Q);return}for(S.type==="date"&&!S.autorange&&(ee[0]=b.cleanDate(ee[0],v,S.calendar),ee[1]=b.cleanDate(ee[1],v,S.calendar)),j=0;j<2;j++)if(S.type==="date"){if(!b.isDateTime(ee[j],S.calendar)){S[V]=Q;break}if(S.r2l(ee[0])===S.r2l(ee[1])){var ne=b.constrain(S.r2l(ee[0]),b.MIN_MS+1e3,b.MAX_MS-1e3);ee[0]=S.l2r(ne-1e3),ee[1]=S.l2r(ne+1e3);break}}else{if(!e(ee[j]))if(e(ee[1-j]))ee[j]=ee[1-j]*(j?10:.1);else{S[V]=Q;break}if(ee[j]<-i?ee[j]=-i:ee[j]>i&&(ee[j]=i),ee[0]===ee[1]){var ae=Math.max(1,Math.abs(ee[0]*1e-6));ee[0]-=ae,ee[1]+=ae}}},S.setScale=function(V){var re=k._size;if(S.overlaying){var ee=m.getFromId({_fullLayout:k},S.overlaying);S.domain=ee.domain}var j=V&&S._r?"_r":"range",Q=S.calendar;S.cleanRange(j);var ne=S.r2l(S[j][0],Q),ae=S.r2l(S[j][1],Q),ie=z==="y";if(ie?(S._offset=re.t+(1-S.domain[1])*re.h,S._length=re.h*(S.domain[1]-S.domain[0]),S._m=S._length/(ne-ae),S._b=-S._m*ae):(S._offset=re.l+S.domain[0]*re.w,S._length=re.w*(S.domain[1]-S.domain[0]),S._m=S._length/(ae-ne),S._b=-S._m*ne),S._rangebreaks=[],S._lBreaks=0,S._m2=0,S._B=[],S.rangebreaks){var ue,xe;if(S._rangebreaks=S.locateBreaks(Math.min(ne,ae),Math.max(ne,ae)),S._rangebreaks.length){for(ue=0;ue<S._rangebreaks.length;ue++)xe=S._rangebreaks[ue],S._lBreaks+=Math.abs(xe.max-xe.min);var he=ie;ne>ae&&(he=!he),he&&S._rangebreaks.reverse();var ge=he?-1:1;for(S._m2=ge*S._length/(Math.abs(ae-ne)-S._lBreaks),S._B.push(-S._m2*(ie?ae:ne)),ue=0;ue<S._rangebreaks.length;ue++)xe=S._rangebreaks[ue],S._B.push(S._B[S._B.length-1]-ge*S._m2*(xe.max-xe.min));for(ue=0;ue<S._rangebreaks.length;ue++)xe=S._rangebreaks[ue],xe.pmin=se(xe.min),xe.pmax=se(xe.max)}}if(!isFinite(S._m)||!isFinite(S._b)||S._length<0)throw k._replotting=!1,new Error("Something went wrong with axis scaling")},S.maskBreaks=function(V){var re=S.rangebreaks||[],ee,j,Q,ne,ae;re._cachedPatterns||(re._cachedPatterns=re.map(function(He){return He.enabled&&He.bounds?b.simpleMap(He.bounds,He.pattern?o:S.d2c):null})),re._cachedValues||(re._cachedValues=re.map(function(He){return He.enabled&&He.values?b.simpleMap(He.values,S.d2c).sort(b.sorterAsc):null}));for(var ie=0;ie<re.length;ie++){var ue=re[ie];if(ue.enabled){if(ue.bounds){var xe=ue.pattern;switch(ee=re._cachedPatterns[ie],j=ee[0],Q=ee[1],xe){case T:ae=new Date(V),ne=ae.getUTCDay(),j>Q&&(Q+=7,ne<j&&(ne+=7));break;case x:ae=new Date(V);var he=ae.getUTCHours(),ge=ae.getUTCMinutes(),me=ae.getUTCSeconds(),ke=ae.getUTCMilliseconds();ne=he+(ge/60+me/3600+ke/36e5),j>Q&&(Q+=24,ne<j&&(ne+=24));break;case"":ne=V;break}if(ne>=j&&ne<Q)return v}else for(var Ae=re._cachedValues[ie],Ne=0;Ne<Ae.length;Ne++)if(j=Ae[Ne],Q=j+ue.dvalue,V>=j&&V<Q)return v}}return V},S.locateBreaks=function(V,re){var ee,j,Q,ne,ae=[];if(!S.rangebreaks)return ae;var ie=S.rangebreaks.slice().sort(function(_e,De){return _e.pattern===T&&De.pattern===x?-1:De.pattern===T&&_e.pattern===x?1:0}),ue=function(_e,De){if(_e=b.constrain(_e,V,re),De=b.constrain(De,V,re),_e!==De){for(var Ye=!0,qe=0;qe<ae.length;qe++){var Ue=ae[qe];_e<Ue.max&&De>=Ue.min&&(_e<Ue.min&&(Ue.min=_e),De>Ue.max&&(Ue.max=De),Ye=!1)}Ye&&ae.push({min:_e,max:De})}};for(ee=0;ee<ie.length;ee++){var xe=ie[ee];if(xe.enabled)if(xe.bounds){var he=V,ge=re;xe.pattern&&(he=Math.floor(he)),j=b.simpleMap(xe.bounds,xe.pattern?o:S.r2l),Q=j[0],ne=j[1];var me=new Date(he),ke,Ae;switch(xe.pattern){case T:Ae=g,ke=((ne<Q?7:0)+(ne-Q))*h,he+=Q*h-(me.getUTCDay()*h+me.getUTCHours()*y+me.getUTCMinutes()*p+me.getUTCSeconds()*A+me.getUTCMilliseconds());break;case x:Ae=h,ke=((ne<Q?24:0)+(ne-Q))*y,he+=Q*y-(me.getUTCHours()*y+me.getUTCMinutes()*p+me.getUTCSeconds()*A+me.getUTCMilliseconds());break;default:he=Math.min(j[0],j[1]),ge=Math.max(j[0],j[1]),Ae=ge-he,ke=Ae}for(var Ne=he;Ne<ge;Ne+=Ae)ue(Ne,Ne+ke)}else for(var He=b.simpleMap(xe.values,S.d2c),Ge=0;Ge<He.length;Ge++)Q=He[Ge],ne=Q+xe.dvalue,ue(Q,ne)}return ae.sort(function(_e,De){return _e.min-De.min}),ae},S.makeCalcdata=function(V,re,ee){var j,Q,ne,ae,ie=S.type,ue=ie==="date"&&V[re+"calendar"];if(re in V){if(j=V[re],ae=V._length||b.minRowLength(j),b.isTypedArray(j)&&(ie==="linear"||ie==="log")){if(ae===j.length)return j;if(j.subarray)return j.subarray(0,ae)}if(ie==="multicategory")return G(j,ae);for(Q=new Array(ae),ne=0;ne<ae;ne++)Q[ne]=S.d2c(j[ne],0,ue,ee)}else{var xe=re+"0"in V?S.d2c(V[re+"0"],0,ue):0,he=V["d"+re]?Number(V["d"+re]):1;for(j=V[{x:"y",y:"x"}[re]],ae=V._length||j.length,Q=new Array(ae),ne=0;ne<ae;ne++)Q[ne]=xe+ne*he}if(S.rangebreaks)for(ne=0;ne<ae;ne++)Q[ne]=S.maskBreaks(Q[ne]);return Q},S.isValidRange=function(V){return Array.isArray(V)&&V.length===2&&e(S.r2l(V[0]))&&e(S.r2l(V[1]))},S.isPtWithinRange=function(V,re){var ee=S.c2l(V[z],null,re),j=S.r2l(S.range[0]),Q=S.r2l(S.range[1]);return j<Q?j<=ee&&ee<=Q:Q<=ee&&ee<=j},S._emptyCategories=function(){S._categories=[],S._categoriesMap={}},S.clearCalc=function(){var V=S._matchGroup;if(V){var re=null,ee=null;for(var j in V){var Q=k[m.id2name(j)];if(Q._categories){re=Q._categories,ee=Q._categoriesMap;break}}re&&ee?(S._categories=re,S._categoriesMap=ee):S._emptyCategories()}else S._emptyCategories();if(S._initialCategories)for(var ne=0;ne<S._initialCategories.length;ne++)F(S._initialCategories[ne])},S.sortByInitialCategories=function(){var V=[];if(S._emptyCategories(),S._initialCategories)for(var re=0;re<S._initialCategories.length;re++)F(S._initialCategories[re]);V=V.concat(S._traceIndices);var ee=S._matchGroup;for(var j in ee)if(P!==j){var Q=k[m.id2name(j)];Q._categories=S._categories,Q._categoriesMap=S._categoriesMap,V=V.concat(Q._traceIndices)}return V};var U=k._d3locale;S.type==="date"&&(S._dateFormat=U?U.timeFormat:l,S._extraFormat=k._extraFormat),S._separators=k.separators,S._numFormat=U?U.numberFormat:w,delete S._minDtick,delete S._forceTick0}},{"../../constants/numerical":479,"../../lib":503,"./axis_ids":558,"./constants":561,"@plotly/d3":58,"d3-time-format":120,"fast-isnumeric":190}],577:[function(t,B,H){B.exports=function(l){var b=["showexponent","showtickprefix","showticksuffix"],w=b.filter(function(o){return l[o]!==void 0}),e=function(o){return l[o]===l[w[0]]};if(w.every(e)||w.length===1)return l[w[0]]}},{}],578:[function(t,B,H){var d=t("../../lib"),l=t("../../components/color").contrast,b=t("./layout_attributes"),w=t("./show_dflt"),e=t("../array_container_defaults");B.exports=function(r,n,c,s,i){i||(i={});var v=w(r),u=c("showticklabels");if(u){var g=i.font||{},h=n.color,y=n.ticklabelposition||"",p=y.indexOf("inside")!==-1?l(i.bgColor):h&&h!==b.color.dflt?h:g.color;if(d.coerceFont(c,"tickfont",{family:g.family,size:g.size,color:p}),!i.noTicklabelstep&&s!=="multicategory"&&s!=="log"&&c("ticklabelstep"),i.noAng||c("tickangle"),s!=="category"){var A=c("tickformat");e(r,n,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:o}),n.tickformatstops.length||delete n.tickformatstops,!i.noExp&&!A&&s!=="date"&&(c("showexponent",v),c("exponentformat"),c("minexponent"),c("separatethousands"))}}};function o(a,r){function n(s,i){return d.coerce(a,r,b.tickformatstops,s,i)}var c=n("enabled");c&&(n("dtickrange"),n("value"))}},{"../../components/color":366,"../../lib":503,"../array_container_defaults":549,"./layout_attributes":569,"./show_dflt":577}],579:[function(t,B,H){var d=t("../../lib"),l=t("./layout_attributes");B.exports=function(w,e,o,a){var r=d.coerce2(w,e,l,"ticklen"),n=d.coerce2(w,e,l,"tickwidth"),c=d.coerce2(w,e,l,"tickcolor",e.color),s=o("ticks",a.outerTicks||r||n||c?"outside":"");s||(delete e.ticklen,delete e.tickwidth,delete e.tickcolor)}},{"../../lib":503,"./layout_attributes":569}],580:[function(t,B,H){var d=t("./clean_ticks"),l=t("../../lib").isArrayOrTypedArray;B.exports=function(w,e,o,a){function r(h){var y=w[h];return y!==void 0?y:(e._template||{})[h]}var n=r("tick0"),c=r("dtick"),s=r("tickvals"),i=l(s)?"array":c?"linear":"auto",v=o("tickmode",i);if(v==="auto")o("nticks");else if(v==="linear"){var u=e.dtick=d.dtick(c,a);e.tick0=d.tick0(n,a,e.calendar,u)}else if(a!=="multicategory"){var g=o("tickvals");g===void 0?e.tickmode="auto":o("ticktext")}}},{"../../lib":503,"./clean_ticks":560}],581:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../registry"),b=t("../../lib"),w=t("../../components/drawing"),e=t("./axes");B.exports=function(a,r,n,c){var s=a._fullLayout;if(r.length===0){e.redrawComponents(a);return}function i(x){var T=x.xaxis,_=x.yaxis;s._defs.select("#"+x.clipId+"> rect").call(w.setTranslate,0,0).call(w.setScale,1,1),x.plot.call(w.setTranslate,T._offset,_._offset).call(w.setScale,1,1);var f=x.plot.selectAll(".scatterlayer .trace");f.selectAll(".point").call(w.setPointGroupScale,1,1),f.selectAll(".textpoint").call(w.setTextPointsScale,1,1),f.call(w.hideOutsideRangePoints,x)}function v(x,T){var _=x.plotinfo,f=_.xaxis,L=_.yaxis,S=f._length,k=L._length,P=!!x.xr1,z=!!x.yr1,I=[];if(P){var R=b.simpleMap(x.xr0,f.r2l),D=b.simpleMap(x.xr1,f.r2l),O=R[1]-R[0],F=D[1]-D[0];I[0]=(R[0]*(1-T)+T*D[0]-R[0])/(R[1]-R[0])*S,I[2]=S*(1-T+T*F/O),f.range[0]=f.l2r(R[0]*(1-T)+T*D[0]),f.range[1]=f.l2r(R[1]*(1-T)+T*D[1])}else I[0]=0,I[2]=S;if(z){var G=b.simpleMap(x.yr0,L.r2l),W=b.simpleMap(x.yr1,L.r2l),q=G[1]-G[0],J=W[1]-W[0];I[1]=(G[1]*(1-T)+T*W[1]-G[1])/(G[0]-G[1])*k,I[3]=k*(1-T+T*J/q),L.range[0]=f.l2r(G[0]*(1-T)+T*W[0]),L.range[1]=L.l2r(G[1]*(1-T)+T*W[1])}else I[1]=0,I[3]=k;e.drawOne(a,f,{skipTitle:!0}),e.drawOne(a,L,{skipTitle:!0}),e.redrawComponents(a,[f._id,L._id]);var X=P?S/I[2]:1,Z=z?k/I[3]:1,se=P?I[0]:0,le=z?I[1]:0,oe=P?I[0]/I[2]*S:0,U=z?I[1]/I[3]*k:0,V=f._offset-oe,re=L._offset-U;_.clipRect.call(w.setTranslate,se,le).call(w.setScale,1/X,1/Z),_.plot.call(w.setTranslate,V,re).call(w.setScale,X,Z),w.setPointGroupScale(_.zoomScalePts,1/X,1/Z),w.setTextPointsScale(_.zoomScaleTxt,1/X,1/Z)}var u;c&&(u=c());function g(){for(var x={},T=0;T<r.length;T++){var _=r[T],f=_.plotinfo.xaxis,L=_.plotinfo.yaxis;_.xr1&&(x[f._name+".range"]=_.xr1.slice()),_.yr1&&(x[L._name+".range"]=_.yr1.slice())}return u&&u(),l.call("relayout",a,x).then(function(){for(var S=0;S<r.length;S++)i(r[S].plotinfo)})}function h(){for(var x={},T=0;T<r.length;T++){var _=r[T],f=_.plotinfo.xaxis,L=_.plotinfo.yaxis;_.xr0&&(x[f._name+".range"]=_.xr0.slice()),_.yr0&&(x[L._name+".range"]=_.yr0.slice())}return l.call("relayout",a,x).then(function(){for(var S=0;S<r.length;S++)i(r[S].plotinfo)})}var y,p,A,m=d.ease(n.easing);a._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(A),A=null,h()});function M(){p=Date.now();for(var x=Math.min(1,(p-y)/n.duration),T=m(x),_=0;_<r.length;_++)v(r[_],T);p-y>n.duration?(g(),A=window.cancelAnimationFrame(M)):A=window.requestAnimationFrame(M)}return y=Date.now(),A=window.requestAnimationFrame(M),Promise.resolve()}},{"../../components/drawing":388,"../../lib":503,"../../registry":638,"./axes":554,"@plotly/d3":58}],582:[function(t,B,H){var d=t("../../registry").traceIs,l=t("./axis_autotype");B.exports=function(r,n,c,s){c("autotypenumbers",s.autotypenumbersDflt);var i=c("type",(s.splomStash||{}).type);i==="-"&&(b(n,s.data),n.type==="-"?n.type="linear":r.type=n.type)};function b(a,r){if(a.type==="-"){var n=a._id,c=n.charAt(0),s;n.indexOf("scene")!==-1&&(n=c);var i=w(r,n,c);if(!!i){if(i.type==="histogram"&&c==={v:"y",h:"x"}[i.orientation||"v"]){a.type="linear";return}var v=c+"calendar",u=i[v],g={noMultiCategory:!d(i,"cartesian")||d(i,"noMultiCategory")};if(i.type==="box"&&i._hasPreCompStats&&c==={h:"x",v:"y"}[i.orientation||"v"]&&(g.noMultiCategory=!0),g.autotypenumbers=a.autotypenumbers,o(i,c)){var h=e(i),y=[];for(s=0;s<r.length;s++){var p=r[s];!d(p,"box-violin")||(p[c+"axis"]||c)!==n||(p[h]!==void 0?y.push(p[h][0]):p.name!==void 0?y.push(p.name):y.push("text"),p[v]!==u&&(u=void 0))}a.type=l(y,u,g)}else if(i.type==="splom"){var A=i.dimensions,m=A[i._axesDim[n]];m.visible&&(a.type=l(m.values,u,g))}else a.type=l(i[c]||[i[c+"0"]],u,g)}}}function w(a,r,n){for(var c=0;c<a.length;c++){var s=a[c];if(s.type==="splom"&&s._length>0&&(s["_"+n+"axes"]||{})[r])return s;if((s[n+"axis"]||n)===r){if(o(s,n))return s;if((s[n]||[]).length||s[n+"0"])return s}}}function e(a){return{v:"x",h:"y"}[a.orientation||"v"]}function o(a,r){var n=e(a),c=d(a,"box-violin"),s=d(a._fullInput||{},"candlestick");return c&&!s&&r===n&&a[n]===void 0&&a[n+"0"]===void 0}},{"../../registry":638,"./axis_autotype":555}],583:[function(t,B,H){var d=t("../registry"),l=t("../lib");H.manageCommandObserver=function(r,n,c,s){var i={},v=!0;n&&n._commandObserver&&(i=n._commandObserver),i.cache||(i.cache={}),i.lookupTable={};var u=H.hasSimpleAPICommandBindings(r,c,i.lookupTable);if(n&&n._commandObserver){if(u)return i;if(n._commandObserver.remove)return n._commandObserver.remove(),n._commandObserver=null,i}if(u){b(r,u,i.cache),i.check=function(){if(!!v){var p=b(r,u,i.cache);return p.changed&&s&&i.lookupTable[p.value]!==void 0&&(i.disable(),Promise.resolve(s({value:p.value,type:u.type,prop:u.prop,traces:u.traces,index:i.lookupTable[p.value]})).then(i.enable,i.enable)),p.changed}};for(var g=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],h=0;h<g.length;h++)r._internalOn(g[h],i.check);i.remove=function(){for(var y=0;y<g.length;y++)r._removeInternalListener(g[y],i.check)}}else l.log("Unable to automatically bind plot updates to API command"),i.lookupTable={},i.remove=function(){};return i.disable=function(){v=!1},i.enable=function(){v=!0},n&&(n._commandObserver=i),i},H.hasSimpleAPICommandBindings=function(r,n,c){var s,i=n.length,v;for(s=0;s<i;s++){var u,g=n[s],h=g.method,y=g.args;if(Array.isArray(y)||(y=[]),!h)return!1;var p=H.computeAPICommandBindings(r,h,y);if(p.length!==1)return!1;if(!v)v=p[0],Array.isArray(v.traces)&&v.traces.sort();else{if(u=p[0],u.type!==v.type||u.prop!==v.prop)return!1;if(Array.isArray(v.traces))if(Array.isArray(u.traces)){u.traces.sort();for(var A=0;A<v.traces.length;A++)if(v.traces[A]!==u.traces[A])return!1}else return!1;else if(u.prop!==v.prop)return!1}u=p[0];var m=u.value;if(Array.isArray(m))if(m.length===1)m=m[0];else return!1;c&&(c[m]=s)}return v};function b(r,n,c){var s,i,v,u=!1;if(n.type==="data")s=r._fullData[n.traces!==null?n.traces[0]:0];else if(n.type==="layout")s=r._fullLayout;else return!1;return i=l.nestedProperty(s,n.prop).get(),v=c[n.type]=c[n.type]||{},v.hasOwnProperty(n.prop)&&v[n.prop]!==i&&(u=!0),v[n.prop]=i,{changed:u,value:i}}H.executeAPICommand=function(r,n,c){if(n==="skip")return Promise.resolve();var s=d.apiMethodRegistry[n],i=[r];Array.isArray(c)||(c=[]);for(var v=0;v<c.length;v++)i.push(c[v]);return s.apply(null,i).catch(function(u){return l.warn("API call to Plotly."+n+" rejected.",u),Promise.reject(u)})},H.computeAPICommandBindings=function(r,n,c){var s;switch(Array.isArray(c)||(c=[]),n){case"restyle":s=o(r,c);break;case"relayout":s=e(r,c);break;case"update":s=o(r,[c[0],c[2]]).concat(e(r,[c[1]]));break;case"animate":s=w(r,c);break;default:s=[]}return s};function w(r,n){return Array.isArray(n[0])&&n[0].length===1&&["string","number"].indexOf(typeof n[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:n[0][0].toString()}]:[]}function e(r,n){var c=[],s=n[0],i={};if(typeof s=="string")i[s]=n[1];else if(l.isPlainObject(s))i=s;else return c;return a(i,function(v,u,g){c.push({type:"layout",prop:v,value:g})},"",0),c}function o(r,n){var c,s,i,v,u=[];if(s=n[0],i=n[1],c=n[2],v={},typeof s=="string")v[s]=i;else if(l.isPlainObject(s))v=s,c===void 0&&(c=i);else return u;return c===void 0&&(c=null),a(v,function(g,h,y){var p,A;if(Array.isArray(y)){A=y.slice();var m=Math.min(A.length,r.data.length);c&&(m=Math.min(m,c.length)),p=[];for(var M=0;M<m;M++)p[M]=c?c[M]:M}else A=y,p=c?c.slice():null;if(p===null)Array.isArray(A)&&(A=A[0]);else if(Array.isArray(p)){if(!Array.isArray(A)){var x=A;A=[];for(var T=0;T<p.length;T++)A[T]=x}A.length=Math.min(p.length,A.length)}u.push({type:"data",prop:g,traces:p,value:A})},"",0),u}function a(r,n,c,s){Object.keys(r).forEach(function(i){var v=r[i];if(i[0]!=="_"){var u=c+(s>0?".":"")+i;l.isPlainObject(v)?a(v,n,u,s+1):n(u,i,v)}})}},{"../lib":503,"../registry":638}],584:[function(t,B,H){var d=t("../lib/extend").extendFlat;H.attributes=function(l,b){l=l||{},b=b||{};var w={valType:"info_array",editType:l.editType,items:[{valType:"number",min:0,max:1,editType:l.editType},{valType:"number",min:0,max:1,editType:l.editType}],dflt:[0,1]};l.name&&l.name+"",l.trace,b.description&&""+b.description;var e={x:d({},w,{}),y:d({},w,{}),editType:l.editType};return l.noGridCell||(e.row={valType:"integer",min:0,dflt:0,editType:l.editType},e.column={valType:"integer",min:0,dflt:0,editType:l.editType}),e},H.defaults=function(l,b,w,e){var o=e&&e.x||[0,1],a=e&&e.y||[0,1],r=b.grid;if(r){var n=w("domain.column");n!==void 0&&(n<r.columns?o=r._domains.x[n]:delete l.domain.column);var c=w("domain.row");c!==void 0&&(c<r.rows?a=r._domains.y[c]:delete l.domain.row)}var s=w("domain.x",o),i=w("domain.y",a);s[0]<s[1]||(l.domain.x=o.slice()),i[0]<i[1]||(l.domain.y=a.slice())}},{"../lib/extend":493}],585:[function(t,B,H){B.exports=function(d){var l=d.editType,b=d.colorEditType;b===void 0&&(b=l);var w={family:{valType:"string",noBlank:!0,strict:!0,editType:l},size:{valType:"number",min:1,editType:l},color:{valType:"color",editType:b},editType:l};return d.autoSize&&(w.size.dflt="auto"),d.autoColor&&(w.color.dflt="auto"),d.arrayOk&&(w.family.arrayOk=!0,w.size.arrayOk=!0,w.color.arrayOk=!0),w}},{}],586:[function(t,B,H){B.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],587:[function(t,B,H){H.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},H.axesNames=["lonaxis","lataxis"],H.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},H.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},H.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},H.clipPad=.001,H.precision=.1,H.landColor="#F0DC82",H.waterColor="#3399FF",H.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},H.sphereSVG={type:"Sphere"},H.fillLayers={ocean:1,land:1,lakes:1},H.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},H.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],H.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],H.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],588:[function(t,B,H){var d=t("@plotly/d3"),l=t("d3-geo"),b=l.geoPath,w=l.geoDistance,e=t("d3-geo-projection"),o=t("../../registry"),a=t("../../lib"),r=a.strTranslate,n=t("../../components/color"),c=t("../../components/drawing"),s=t("../../components/fx"),i=t("../plots"),v=t("../cartesian/axes"),u=t("../cartesian/autorange").getAutoRange,g=t("../../components/dragelement"),h=t("../cartesian/select").prepSelect,y=t("../cartesian/select").clearSelect,p=t("../cartesian/select").selectOnClick,A=t("./zoom"),m=t("./constants"),M=t("../../lib/geo_location_utils"),x=t("../../lib/topojson_utils"),T=t("topojson-client").feature;function _(P){this.id=P.id,this.graphDiv=P.graphDiv,this.container=P.container,this.topojsonURL=P.topojsonURL,this.isStatic=P.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var f=_.prototype;B.exports=function(z){return new _(z)},f.plot=function(P,z,I){var R=this,D=z[this.id],O=[],F=!1;for(var G in m.layerNameToAdjective)if(G!=="frame"&&D["show"+G]){F=!0;break}for(var W=0;W<P.length;W++)if(P[0][0].trace.locationmode){F=!0;break}if(F){var q=x.getTopojsonName(D);(R.topojson===null||q!==R.topojsonName)&&(R.topojsonName=q,PlotlyGeoAssets.topojson[R.topojsonName]===void 0&&O.push(R.fetchTopojson()))}O=O.concat(M.fetchTraceGeoData(P)),I.push(new Promise(function(J,X){Promise.all(O).then(function(){R.topojson=PlotlyGeoAssets.topojson[R.topojsonName],R.update(P,z),J()}).catch(X)}))},f.fetchTopojson=function(){var P=this,z=x.getTopojsonPath(P.topojsonURL,P.topojsonName);return new Promise(function(I,R){d.json(z,function(D,O){if(D)return D.status===404?R(new Error(["plotly.js could not find topojson file at",z,".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):R(new Error(["unexpected error while fetching topojson file at",z].join(" ")));PlotlyGeoAssets.topojson[P.topojsonName]=O,I()})})},f.update=function(P,z){var I=z[this.id];this.hasChoropleth=!1;for(var R=0;R<P.length;R++){var D=P[R],O=D[0].trace;O.type==="choropleth"&&(this.hasChoropleth=!0),O.visible===!0&&O._length>0&&O._module.calcGeoJSON(D,z)}var F=this.updateProjection(P,z);if(!F){(!this.viewInitial||this.scope!==I.scope)&&this.saveViewInitial(I),this.scope=I.scope,this.updateBaseLayers(z,I),this.updateDims(z,I),this.updateFx(z,I),i.generalUpdatePerTraceModule(this.graphDiv,this,P,I);var G=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=G.selectAll(".point"),this.dataPoints.text=G.selectAll("text"),this.dataPaths.line=G.selectAll(".js-line");var W=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=W.selectAll("path"),this.render()}},f.updateProjection=function(P,z){var I=this.graphDiv,R=z[this.id],D=z._size,O=R.domain,F=R.projection,G=R.lonaxis,W=R.lataxis,q=G._ax,J=W._ax,X=this.projection=L(R),Z=[[D.l+D.w*O.x[0],D.t+D.h*(1-O.y[1])],[D.l+D.w*O.x[1],D.t+D.h*(1-O.y[0])]],se=R.center||{},le=F.rotation||{},oe=G.range||[],U=W.range||[];if(R.fitbounds){q._length=Z[1][0]-Z[0][0],J._length=Z[1][1]-Z[0][1],q.range=u(I,q),J.range=u(I,J);var V=(q.range[0]+q.range[1])/2,re=(J.range[0]+J.range[1])/2;if(R._isScoped)se={lon:V,lat:re};else if(R._isClipped){se={lon:V,lat:re},le={lon:V,lat:re,roll:le.roll};var ee=F.type,j=m.lonaxisSpan[ee]/2||180,Q=m.lataxisSpan[ee]/2||90;oe=[V-j,V+j],U=[re-Q,re+Q]}else se={lon:V,lat:re},le={lon:V,lat:le.lat,roll:le.roll}}X.center([se.lon-le.lon,se.lat-le.lat]).rotate([-le.lon,-le.lat,le.roll]).parallels(F.parallels);var ne=k(oe,U);X.fitExtent(Z,ne);var ae=this.bounds=X.getBounds(ne),ie=this.fitScale=X.scale(),ue=X.translate();if(R.fitbounds){var xe=X.getBounds(k(q.range,J.range)),he=Math.min((ae[1][0]-ae[0][0])/(xe[1][0]-xe[0][0]),(ae[1][1]-ae[0][1])/(xe[1][1]-xe[0][1]));isFinite(he)?X.scale(he*ie):a.warn("Something went wrong during"+this.id+"fitbounds computations.")}else X.scale(F.scale*ie);var ge=this.midPt=[(ae[0][0]+ae[1][0])/2,(ae[0][1]+ae[1][1])/2];if(X.translate([ue[0]+(ge[0]-ue[0]),ue[1]+(ge[1]-ue[1])]).clipExtent(ae),R._isAlbersUsa){var me=X([se.lon,se.lat]),ke=X.translate();X.translate([ke[0]-(me[0]-ke[0]),ke[1]-(me[1]-ke[1])])}},f.updateBaseLayers=function(P,z){var I=this,R=I.topojson,D=I.layers,O=I.basePaths;function F(Z){return Z==="lonaxis"||Z==="lataxis"}function G(Z){return Boolean(m.lineLayers[Z])}function W(Z){return Boolean(m.fillLayers[Z])}var q=this.hasChoropleth?m.layersForChoropleth:m.layers,J=q.filter(function(Z){return G(Z)||W(Z)?z["show"+Z]:F(Z)?z[Z].showgrid:!0}),X=I.framework.selectAll(".layer").data(J,String);X.exit().each(function(Z){delete D[Z],delete O[Z],d.select(this).remove()}),X.enter().append("g").attr("class",function(Z){return"layer "+Z}).each(function(Z){var se=D[Z]=d.select(this);Z==="bg"?I.bgRect=se.append("rect").style("pointer-events","all"):F(Z)?O[Z]=se.append("path").style("fill","none"):Z==="backplot"?se.append("g").classed("choroplethlayer",!0):Z==="frontplot"?se.append("g").classed("scatterlayer",!0):G(Z)?O[Z]=se.append("path").style("fill","none").style("stroke-miterlimit",2):W(Z)&&(O[Z]=se.append("path").style("stroke","none"))}),X.order(),X.each(function(Z){var se=O[Z],le=m.layerNameToAdjective[Z];Z==="frame"?se.datum(m.sphereSVG):G(Z)||W(Z)?se.datum(T(R,R.objects[Z])):F(Z)&&se.datum(S(Z,z,P)).call(n.stroke,z[Z].gridcolor).call(c.dashLine,"",z[Z].gridwidth),G(Z)?se.call(n.stroke,z[le+"color"]).call(c.dashLine,"",z[le+"width"]):W(Z)&&se.call(n.fill,z[le+"color"])})},f.updateDims=function(P,z){var I=this.bounds,R=(z.framewidth||0)/2,D=I[0][0]-R,O=I[0][1]-R,F=I[1][0]-D+R,G=I[1][1]-O+R;c.setRect(this.clipRect,D,O,F,G),this.bgRect.call(c.setRect,D,O,F,G).call(n.fill,z.bgcolor),this.xaxis._offset=D,this.xaxis._length=F,this.yaxis._offset=O,this.yaxis._length=G},f.updateFx=function(P,z){var I=this,R=I.graphDiv,D=I.bgRect,O=P.dragmode,F=P.clickmode;if(I.isStatic)return;function G(){var X=I.viewInitial,Z={};for(var se in X)Z[I.id+"."+se]=X[se];o.call("_guiRelayout",R,Z),R.emit("plotly_doubleclick",null)}function W(X){return I.projection.invert([X[0]+I.xaxis._offset,X[1]+I.yaxis._offset])}var q;O==="select"?q=function(X,Z){var se=X.range={};se[I.id]=[W([Z.xmin,Z.ymin]),W([Z.xmax,Z.ymax])]}:O==="lasso"&&(q=function(X,Z,se){var le=X.lassoPoints={};le[I.id]=se.filtered.map(W)});var J={element:I.bgRect.node(),gd:R,plotinfo:{id:I.id,xaxis:I.xaxis,yaxis:I.yaxis,fillRangeItems:q},xaxes:[I.xaxis],yaxes:[I.yaxis],subplot:I.id,clickFn:function(X){X===2&&y(R)}};O==="pan"?(D.node().onmousedown=null,D.call(A(I,z)),D.on("dblclick.zoom",G),R._context._scrollZoom.geo||D.on("wheel.zoom",null)):(O==="select"||O==="lasso")&&(D.on(".zoom",null),J.prepFn=function(X,Z,se){h(X,Z,se,J,O)},g.init(J)),D.on("mousemove",function(){var X=I.projection.invert(a.getPositionFromD3Event());if(!X)return g.unhover(R,d.event);I.xaxis.p2c=function(){return X[0]},I.yaxis.p2c=function(){return X[1]},s.hover(R,d.event,I.id)}),D.on("mouseout",function(){R._dragging||g.unhover(R,d.event)}),D.on("click",function(){O!=="select"&&O!=="lasso"&&(F.indexOf("select")>-1&&p(d.event,R,[I.xaxis],[I.yaxis],I.id,J),F.indexOf("event")>-1&&s.click(R,d.event))})},f.makeFramework=function(){var P=this,z=P.graphDiv,I=z._fullLayout,R="clip"+I._uid+P.id;P.clipDef=I._clips.append("clipPath").attr("id",R),P.clipRect=P.clipDef.append("rect"),P.framework=d.select(P.container).append("g").attr("class","geo "+P.id).call(c.setClipUrl,R,z),P.project=function(D){var O=P.projection(D);return O?[O[0]-P.xaxis._offset,O[1]-P.yaxis._offset]:[null,null]},P.xaxis={_id:"x",c2p:function(D){return P.project(D)[0]}},P.yaxis={_id:"y",c2p:function(D){return P.project(D)[1]}},P.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},v.setConvert(P.mockAxis,I)},f.saveViewInitial=function(P){var z=P.center||{},I=P.projection,R=I.rotation||{};this.viewInitial={fitbounds:P.fitbounds,"projection.scale":I.scale};var D;P._isScoped?D={"center.lon":z.lon,"center.lat":z.lat}:P._isClipped?D={"projection.rotation.lon":R.lon,"projection.rotation.lat":R.lat}:D={"center.lon":z.lon,"center.lat":z.lat,"projection.rotation.lon":R.lon},a.extendFlat(this.viewInitial,D)},f.render=function(){var P=this.projection,z=P.getPath(),I;function R(O){var F=P(O.lonlat);return F?r(F[0],F[1]):null}function D(O){return P.isLonLatOverEdges(O.lonlat)?"none":null}for(I in this.basePaths)this.basePaths[I].attr("d",z);for(I in this.dataPaths)this.dataPaths[I].attr("d",function(O){return z(O.geojson)});for(I in this.dataPoints)this.dataPoints[I].attr("display",D).attr("transform",R)};function L(P){var z=P.projection,I=z.type,R=m.projNames[I];R="geo"+a.titleCase(R);for(var D=l[R]||e[R],O=D(),F=P._isSatellite?Math.acos(1/z.distance)*180/Math.PI:P._isClipped?m.lonaxisSpan[I]/2:null,G=["center","rotate","parallels","clipExtent"],W=function(X){return X?O:[]},q=0;q<G.length;q++){var J=G[q];typeof O[J]!="function"&&(O[J]=W)}return O.isLonLatOverEdges=function(X){if(O(X)===null)return!0;if(F){var Z=O.rotate(),se=w(X,[-Z[0],-Z[1]]),le=F*Math.PI/180;return se>le}else return!1},O.getPath=function(){return b().projection(O)},O.getBounds=function(X){return O.getPath().bounds(X)},O.precision(m.precision),P._isSatellite&&O.tilt(z.tilt).distance(z.distance),F&&O.clipAngle(F-m.clipPad),O}function S(P,z,I){var R=1e-6,D=2.5,O=z[P],F=m.scopeDefaults[z.scope],G,W,q;P==="lonaxis"?(G=F.lonaxisRange,W=F.lataxisRange,q=function(re,ee){return[re,ee]}):P==="lataxis"&&(G=F.lataxisRange,W=F.lonaxisRange,q=function(re,ee){return[ee,re]});var J={type:"linear",range:[G[0],G[1]-R],tick0:O.tick0,dtick:O.dtick};v.setConvert(J,I);var X=v.calcTicks(J);!z.isScoped&&P==="lonaxis"&&X.pop();for(var Z=X.length,se=new Array(Z),le=0;le<Z;le++)for(var oe=X[le].x,U=se[le]=[],V=W[0];V<W[1]+D;V+=D)U.push(q(oe,V));return{type:"MultiLineString",coordinates:se}}function k(P,z){var I=m.clipPad,R=P[0]+I,D=P[1]-I,O=z[0]+I,F=z[1]-I;R>0&&D<0&&(D+=360);var G=(D-R)/4;return{type:"Polygon",coordinates:[[[R,O],[R,F],[R+G,F],[R+2*G,F],[R+3*G,F],[D,F],[D,O],[D-G,O],[D-2*G,O],[D-3*G,O],[R,O]]]}}},{"../../components/color":366,"../../components/dragelement":385,"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/topojson_utils":532,"../../registry":638,"../cartesian/autorange":553,"../cartesian/axes":554,"../cartesian/select":575,"../plots":619,"./constants":587,"./zoom":592,"@plotly/d3":58,"d3-geo":114,"d3-geo-projection":113,"topojson-client":315}],589:[function(t,B,H){var d=t("../../plots/get_data").getSubplotCalcData,l=t("../../lib").counterRegex,b=t("./geo"),w="geo",e=l(w),o={};o[w]={valType:"subplotid",dflt:w,editType:"calc"};function a(c){for(var s=c._fullLayout,i=c.calcdata,v=s._subplots[w],u=0;u<v.length;u++){var g=v[u],h=d(i,w,g),y=s[g],p=y._subplot;p||(p=b({id:g,graphDiv:c,container:s._geolayer.node(),topojsonURL:c._context.topojsonURL,staticPlot:c._context.staticPlot}),s[g]._subplot=p),p.plot(h,s,c._promises)}}function r(c,s,i,v){for(var u=v._subplots[w]||[],g=0;g<u.length;g++){var h=u[g],y=v[h]._subplot;!s[h]&&!!y&&(y.framework.remove(),y.clipDef.remove())}}function n(c){for(var s=c._fullLayout,i=s._subplots[w],v=0;v<i.length;v++){var u=s[i[v]],g=u._subplot;g.updateFx(s,u)}}B.exports={attr:w,name:w,idRoot:w,idRegex:e,attrRegex:e,attributes:o,layoutAttributes:t("./layout_attributes"),supplyLayoutDefaults:t("./layout_defaults"),plot:a,updateFx:n,clean:r}},{"../../lib":503,"../../plots/get_data":593,"./geo":588,"./layout_attributes":590,"./layout_defaults":591}],590:[function(t,B,H){var d=t("../../components/color/attributes"),l=t("../domain").attributes,b=t("./constants"),w=t("../../plot_api/edit_types").overrideAll,e=t("../../lib/sort_object_keys"),o={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:d.lightLine},gridwidth:{valType:"number",min:0,dflt:1}},a=B.exports=w({domain:l({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:e(b.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:e(b.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:d.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:b.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:b.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:b.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:b.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:d.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:d.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:d.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:d.background},lonaxis:o,lataxis:o},"plot","from-root");a.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":365,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../domain":584,"./constants":587}],591:[function(t,B,H){var d=t("../../lib"),l=t("../subplot_defaults"),b=t("../get_data").getSubplotData,w=t("./constants"),e=t("./layout_attributes"),o=w.axesNames;B.exports=function(n,c,s){l(n,c,s,{type:"geo",attributes:e,handleDefaults:a,fullData:s,partition:"y"})};function a(r,n,c,s){var i=b(s.fullData,"geo",s.id),v=i.map(function(U){return U._expandedIndex}),u=c("resolution"),g=c("scope"),h=w.scopeDefaults[g],y=c("projection.type",h.projType),p=n._isAlbersUsa=y==="albers usa";p&&(g=n.scope="usa");var A=n._isScoped=g!=="world",m=n._isSatellite=y==="satellite",M=n._isConic=y.indexOf("conic")!==-1||y==="albers",x=n._isClipped=!!w.lonaxisSpan[y];if(r.visible===!1){var T=d.extendDeep({},n._template);T.showcoastlines=!1,T.showcountries=!1,T.showframe=!1,T.showlakes=!1,T.showland=!1,T.showocean=!1,T.showrivers=!1,T.showsubunits=!1,T.lonaxis&&(T.lonaxis.showgrid=!1),T.lataxis&&(T.lataxis.showgrid=!1),n._template=T}for(var _=c("visible"),f,L=0;L<o.length;L++){var S=o[L],k=[30,10][L],P;if(A)P=h[S+"Range"];else{var z=w[S+"Span"],I=(z[y]||z["*"])/2,R=c("projection.rotation."+S.substr(0,3),h.projRotate[L]);P=[R-I,R+I]}var D=c(S+".range",P);c(S+".tick0"),c(S+".dtick",k),f=c(S+".showgrid",_?void 0:!1),f&&(c(S+".gridcolor"),c(S+".gridwidth")),n[S]._ax={type:"linear",_id:S.slice(0,3),_traceIndices:v,setScale:d.identity,c2l:d.identity,r2l:d.identity,autorange:!0,range:D.slice(),_m:1,_input:{}}}var O=n.lonaxis.range,F=n.lataxis.range,G=O[0],W=O[1];G>0&&W<0&&(W+=360);var q=(G+W)/2,J;if(!p){var X=A?h.projRotate:[q,0,0];J=c("projection.rotation.lon",X[0]),c("projection.rotation.lat",X[1]),c("projection.rotation.roll",X[2]),f=c("showcoastlines",!A&&_),f&&(c("coastlinecolor"),c("coastlinewidth")),f=c("showocean",_?void 0:!1),f&&c("oceancolor")}var Z,se;if(p?(Z=-96.6,se=38.7):(Z=A?q:J,se=(F[0]+F[1])/2),c("center.lon",Z),c("center.lat",se),m&&(c("projection.tilt"),c("projection.distance")),M){var le=h.projParallels||[0,60];c("projection.parallels",le)}c("projection.scale"),f=c("showland",_?void 0:!1),f&&c("landcolor"),f=c("showlakes",_?void 0:!1),f&&c("lakecolor"),f=c("showrivers",_?void 0:!1),f&&(c("rivercolor"),c("riverwidth")),f=c("showcountries",A&&g!=="usa"&&_),f&&(c("countrycolor"),c("countrywidth")),(g==="usa"||g==="north america"&&u===50)&&(c("showsubunits",_),c("subunitcolor"),c("subunitwidth")),A||(f=c("showframe",_),f&&(c("framecolor"),c("framewidth"))),c("bgcolor");var oe=c("fitbounds");oe&&(delete n.projection.scale,A?(delete n.center.lon,delete n.center.lat):x?(delete n.center.lon,delete n.center.lat,delete n.projection.rotation.lon,delete n.projection.rotation.lat,delete n.lonaxis.range,delete n.lataxis.range):(delete n.center.lon,delete n.center.lat,delete n.projection.rotation.lon))}},{"../../lib":503,"../get_data":593,"../subplot_defaults":632,"./constants":587,"./layout_attributes":590}],592:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib"),b=t("../../registry"),w=Math.PI/180,e=180/Math.PI,o={cursor:"pointer"},a={cursor:"auto"};function r(S,k){var P=S.projection,z;return k._isScoped?z=s:k._isClipped?z=v:z=i,z(S,P)}B.exports=r;function n(S,k){return d.behavior.zoom().translate(k.translate()).scale(k.scale())}function c(S,k,P){var z=S.id,I=S.graphDiv,R=I.layout,D=R[z],O=I._fullLayout,F=O[z],G={},W={};function q(J,X){G[z+"."+J]=l.nestedProperty(D,J).get(),b.call("_storeDirectGUIEdit",R,O._preGUI,G);var Z=l.nestedProperty(F,J);Z.get()!==X&&(Z.set(X),l.nestedProperty(D,J).set(X),W[z+"."+J]=X)}P(q),q("projection.scale",k.scale()/S.fitScale),q("fitbounds",!1),I.emit("plotly_relayout",W)}function s(S,k){var P=n(S,k);function z(){d.select(this).style(o)}function I(){k.scale(d.event.scale).translate(d.event.translate),S.render();var O=k.invert(S.midPt);S.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":k.scale()/S.fitScale,"geo.center.lon":O[0],"geo.center.lat":O[1]})}function R(O){var F=k.invert(S.midPt);O("center.lon",F[0]),O("center.lat",F[1])}function D(){d.select(this).style(a),c(S,k,R)}return P.on("zoomstart",z).on("zoom",I).on("zoomend",D),P}function i(S,k){var P=n(S,k),z=2,I,R,D,O,F,G,W,q,J;function X(V){return k.invert(V)}function Z(V){var re=X(V);if(!re)return!0;var ee=k(re);return Math.abs(ee[0]-V[0])>z||Math.abs(ee[1]-V[1])>z}function se(){d.select(this).style(o),I=d.mouse(this),R=k.rotate(),D=k.translate(),O=R,F=X(I)}function le(){if(G=d.mouse(this),Z(I)){P.scale(k.scale()),P.translate(k.translate());return}k.scale(d.event.scale),k.translate([D[0],d.event.translate[1]]),F?X(G)&&(q=X(G),W=[O[0]+(q[0]-F[0]),R[1],R[2]],k.rotate(W),O=W):(I=G,F=X(I)),J=!0,S.render();var V=k.rotate(),re=k.invert(S.midPt);S.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":k.scale()/S.fitScale,"geo.center.lon":re[0],"geo.center.lat":re[1],"geo.projection.rotation.lon":-V[0]})}function oe(){d.select(this).style(a),J&&c(S,k,U)}function U(V){var re=k.rotate(),ee=k.invert(S.midPt);V("projection.rotation.lon",-re[0]),V("center.lon",ee[0]),V("center.lat",ee[1])}return P.on("zoomstart",se).on("zoom",le).on("zoomend",oe),P}function v(S,k){k.rotate(),k.scale();var P=n(S,k),z=L(P,"zoomstart","zoom","zoomend"),I=0,R=P.on,D;P.on("zoomstart",function(){d.select(this).style(o);var q=d.mouse(this),J=k.rotate(),X=J,Z=k.translate(),se=g(J);D=u(k,q),R.call(P,"zoom",function(){var le=d.mouse(this);if(k.scale(d.event.scale),!D)q=le,D=u(k,q);else if(u(k,le)){k.rotate(J).translate(Z);var oe=u(k,le),U=y(D,oe),V=x(h(se,U)),re=p(V,D,X);(!isFinite(re[0])||!isFinite(re[1])||!isFinite(re[2]))&&(re=X),k.rotate(re),X=re}F(z.of(this,arguments))}),O(z.of(this,arguments))}).on("zoomend",function(){d.select(this).style(a),R.call(P,"zoom",null),G(z.of(this,arguments)),c(S,k,W)}).on("zoom.redraw",function(){S.render();var q=k.rotate();S.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":k.scale()/S.fitScale,"geo.projection.rotation.lon":-q[0],"geo.projection.rotation.lat":-q[1]})});function O(q){I++||q({type:"zoomstart"})}function F(q){q({type:"zoom"})}function G(q){--I||q({type:"zoomend"})}function W(q){var J=k.rotate();q("projection.rotation.lon",-J[0]),q("projection.rotation.lat",-J[1])}return d.rebind(P,z,"on")}function u(S,k){var P=S.invert(k);return P&&isFinite(P[0])&&isFinite(P[1])&&T(P)}function g(S){var k=.5*S[0]*w,P=.5*S[1]*w,z=.5*S[2]*w,I=Math.sin(k),R=Math.cos(k),D=Math.sin(P),O=Math.cos(P),F=Math.sin(z),G=Math.cos(z);return[R*O*G+I*D*F,I*O*G-R*D*F,R*D*G+I*O*F,R*O*F-I*D*G]}function h(S,k){var P=S[0],z=S[1],I=S[2],R=S[3],D=k[0],O=k[1],F=k[2],G=k[3];return[P*D-z*O-I*F-R*G,P*O+z*D+I*G-R*F,P*F-z*G+I*D+R*O,P*G+z*F-I*O+R*D]}function y(S,k){if(!(!S||!k)){var P=f(S,k),z=Math.sqrt(_(P,P)),I=.5*Math.acos(Math.max(-1,Math.min(1,_(S,k)))),R=Math.sin(I)/z;return z&&[Math.cos(I),P[2]*R,-P[1]*R,P[0]*R]}}function p(S,k,P){var z=M(k,2,S[0]);z=M(z,1,S[1]),z=M(z,0,S[2]-P[2]);var I=k[0],R=k[1],D=k[2],O=z[0],F=z[1],G=z[2],W=Math.atan2(R,I)*e,q=Math.sqrt(I*I+R*R),J,X;Math.abs(F)>q?(X=(F>0?90:-90)-W,J=0):(X=Math.asin(F/q)*e-W,J=Math.sqrt(q*q-F*F));var Z=180-X-2*W,se=(Math.atan2(G,O)-Math.atan2(D,J))*e,le=(Math.atan2(G,O)-Math.atan2(D,-J))*e,oe=A(P[0],P[1],X,se),U=A(P[0],P[1],Z,le);return oe<=U?[X,se,P[2]]:[Z,le,P[2]]}function A(S,k,P,z){var I=m(P-S),R=m(z-k);return Math.sqrt(I*I+R*R)}function m(S){return(S%360+540)%360-180}function M(S,k,P){var z=P*w,I=S.slice(),R=k===0?1:0,D=k===2?1:2,O=Math.cos(z),F=Math.sin(z);return I[R]=S[R]*O-S[D]*F,I[D]=S[D]*O+S[R]*F,I}function x(S){return[Math.atan2(2*(S[0]*S[1]+S[2]*S[3]),1-2*(S[1]*S[1]+S[2]*S[2]))*e,Math.asin(Math.max(-1,Math.min(1,2*(S[0]*S[2]-S[3]*S[1]))))*e,Math.atan2(2*(S[0]*S[3]+S[1]*S[2]),1-2*(S[2]*S[2]+S[3]*S[3]))*e]}function T(S){var k=S[0]*w,P=S[1]*w,z=Math.cos(P);return[z*Math.cos(k),z*Math.sin(k),Math.sin(P)]}function _(S,k){for(var P=0,z=0,I=S.length;z<I;++z)P+=S[z]*k[z];return P}function f(S,k){return[S[1]*k[2]-S[2]*k[1],S[2]*k[0]-S[0]*k[2],S[0]*k[1]-S[1]*k[0]]}function L(S){for(var k=0,P=arguments.length,z=[];++k<P;)z.push(arguments[k]);var I=d.dispatch.apply(null,z);return I.of=function(R,D){return function(O){var F;try{F=O.sourceEvent=d.event,O.target=S,d.event=O,I[O.type].apply(R,D)}finally{d.event=F}}},I}},{"../../lib":503,"../../registry":638,"@plotly/d3":58}],593:[function(t,B,H){var d=t("../registry"),l=t("./cartesian/constants").SUBPLOT_PATTERN;H.getSubplotCalcData=function(b,w,e){var o=d.subplotsRegistry[w];if(!o)return[];for(var a=o.attr,r=[],n=0;n<b.length;n++){var c=b[n],s=c[0].trace;s[a]===e&&r.push(c)}return r},H.getModuleCalcData=function(b,w){var e=[],o=[],a;if(typeof w=="string"?a=d.getModule(w).plot:typeof w=="function"?a=w:a=w.plot,!a)return[e,b];for(var r=0;r<b.length;r++){var n=b[r],c=n[0].trace;c.visible!==!0||c._length===0||(c._module.plot===a?e.push(n):o.push(n))}return[e,o]},H.getSubplotData=function(w,e,o){if(!d.subplotsRegistry[e])return[];var a=d.subplotsRegistry[e].attr,r=[],n,c,s;if(e==="gl2d"){var i=o.match(l);c="x"+i[1],s="y"+i[2]}for(var v=0;v<w.length;v++)n=w[v],e==="gl2d"&&d.traceIs(n,"gl2d")?n[a[0]]===c&&n[a[1]]===s&&r.push(n):n[a]===o&&r.push(n);return r}},{"../registry":638,"./cartesian/constants":561}],594:[function(t,B,H){var d=t("mouse-change"),l=t("mouse-wheel"),b=t("mouse-event-offset"),w=t("../cartesian/constants"),e=t("has-passive-events");B.exports=a;function o(r,n){this.element=r,this.plot=n,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}function a(r){var n=r.mouseContainer,c=r.glplot,s=new o(n,c);function i(){r.xaxis.autorange=!1,r.yaxis.autorange=!1}function v(){for(var g=r.graphDiv._fullLayout._axisConstraintGroups,h=r.xaxis._id,y=r.yaxis._id,p=0;p<g.length;p++)if(g[p][h]!==-1){if(g[p][y]!==-1)return!0;break}return!1}s.mouseListener=d(n,u),n.addEventListener("touchstart",function(g){var h=b(g.changedTouches[0],n);u(0,h[0],h[1]),u(1,h[0],h[1]),g.preventDefault()},e?{passive:!1}:!1),n.addEventListener("touchmove",function(g){g.preventDefault();var h=b(g.changedTouches[0],n);u(1,h[0],h[1]),g.preventDefault()},e?{passive:!1}:!1),n.addEventListener("touchend",function(g){u(0,s.lastPos[0],s.lastPos[1]),g.preventDefault()},e?{passive:!1}:!1);function u(g,h,y){var p=r.calcDataBox(),A=c.viewBox,m=s.lastPos[0],M=s.lastPos[1],x=w.MINDRAG*c.pixelRatio,T=w.MINZOOM*c.pixelRatio,_,f;h*=c.pixelRatio,y*=c.pixelRatio,y=A[3]-A[1]-y;function L(R,D,O){var F=Math.min(D,O),G=Math.max(D,O);F!==G?(p[R]=F,p[R+2]=G,s.dataBox=p,r.setRanges(p)):(r.selectBox.selectBox=[0,0,1,1],r.glplot.setDirty())}switch(r.fullLayout.dragmode){case"zoom":if(g){var S=h/(A[2]-A[0])*(p[2]-p[0])+p[0],k=y/(A[3]-A[1])*(p[3]-p[1])+p[1];s.boxInited||(s.boxStart[0]=S,s.boxStart[1]=k,s.dragStart[0]=h,s.dragStart[1]=y),s.boxEnd[0]=S,s.boxEnd[1]=k,s.boxInited=!0,!s.boxEnabled&&(s.boxStart[0]!==s.boxEnd[0]||s.boxStart[1]!==s.boxEnd[1])&&(s.boxEnabled=!0);var P=Math.abs(s.dragStart[0]-h)<T,z=Math.abs(s.dragStart[1]-y)<T;if(v()&&!(P&&z)){_=s.boxEnd[0]-s.boxStart[0],f=s.boxEnd[1]-s.boxStart[1];var I=(p[3]-p[1])/(p[2]-p[0]);Math.abs(_*I)>Math.abs(f)?(s.boxEnd[1]=s.boxStart[1]+Math.abs(_)*I*(f>=0?1:-1),s.boxEnd[1]<p[1]?(s.boxEnd[1]=p[1],s.boxEnd[0]=s.boxStart[0]+(p[1]-s.boxStart[1])/Math.abs(I)):s.boxEnd[1]>p[3]&&(s.boxEnd[1]=p[3],s.boxEnd[0]=s.boxStart[0]+(p[3]-s.boxStart[1])/Math.abs(I))):(s.boxEnd[0]=s.boxStart[0]+Math.abs(f)/I*(_>=0?1:-1),s.boxEnd[0]<p[0]?(s.boxEnd[0]=p[0],s.boxEnd[1]=s.boxStart[1]+(p[0]-s.boxStart[0])*Math.abs(I)):s.boxEnd[0]>p[2]&&(s.boxEnd[0]=p[2],s.boxEnd[1]=s.boxStart[1]+(p[2]-s.boxStart[0])*Math.abs(I)))}else P&&(s.boxEnd[0]=s.boxStart[0]),z&&(s.boxEnd[1]=s.boxStart[1])}else s.boxEnabled?(_=s.boxStart[0]!==s.boxEnd[0],f=s.boxStart[1]!==s.boxEnd[1],_||f?(_&&(L(0,s.boxStart[0],s.boxEnd[0]),r.xaxis.autorange=!1),f&&(L(1,s.boxStart[1],s.boxEnd[1]),r.yaxis.autorange=!1),r.relayoutCallback()):r.glplot.setDirty(),s.boxEnabled=!1,s.boxInited=!1):s.boxInited&&(s.boxInited=!1);break;case"pan":s.boxEnabled=!1,s.boxInited=!1,g?(s.panning||(s.dragStart[0]=h,s.dragStart[1]=y),Math.abs(s.dragStart[0]-h)<x&&(h=s.dragStart[0]),Math.abs(s.dragStart[1]-y)<x&&(y=s.dragStart[1]),_=(m-h)*(p[2]-p[0])/(c.viewBox[2]-c.viewBox[0]),f=(M-y)*(p[3]-p[1])/(c.viewBox[3]-c.viewBox[1]),p[0]+=_,p[2]+=_,p[1]+=f,p[3]+=f,r.setRanges(p),s.panning=!0,s.lastInputTime=Date.now(),i(),r.cameraChanged(),r.handleAnnotations()):s.panning&&(s.panning=!1,r.relayoutCallback());break}s.lastPos[0]=h,s.lastPos[1]=y}return s.wheelListener=l(n,function(g,h){if(!r.scrollZoom)return!1;var y=r.calcDataBox(),p=c.viewBox,A=s.lastPos[0],m=s.lastPos[1],M=Math.exp(5*h/(p[3]-p[1])),x=A/(p[2]-p[0])*(y[2]-y[0])+y[0],T=m/(p[3]-p[1])*(y[3]-y[1])+y[1];return y[0]=(y[0]-x)*M+x,y[2]=(y[2]-x)*M+x,y[1]=(y[1]-T)*M+T,y[3]=(y[3]-T)*M+T,r.setRanges(y),s.lastInputTime=Date.now(),i(),r.cameraChanged(),r.handleAnnotations(),r.relayoutCallback(),!0},!0),s}},{"../cartesian/constants":561,"has-passive-events":229,"mouse-change":241,"mouse-event-offset":242,"mouse-wheel":244}],595:[function(t,B,H){var d=t("../cartesian/axes"),l=t("../../lib/str2rgbarray");function b(a){this.scene=a,this.gl=a.gl,this.pixelRatio=a.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var w=b.prototype,e=["xaxis","yaxis"];w.merge=function(a){this.titleEnable=!1,this.backgroundColor=l(a.plot_bgcolor);var r,n,c,s,i,v,u,g,h,y,p;for(y=0;y<2;++y){r=e[y];var A=r.charAt(0);for(n=a[this.scene[r]._name],c=n.title.text===this.scene.fullLayout._dfltTitle[A]?"":n.title.text,p=0;p<=2;p+=2)this.labelEnable[y+p]=!1,this.labels[y+p]=c,this.labelColor[y+p]=l(n.title.font.color),this.labelFont[y+p]=n.title.font.family,this.labelSize[y+p]=n.title.font.size,this.labelPad[y+p]=this.getLabelPad(r,n),this.tickEnable[y+p]=!1,this.tickColor[y+p]=l((n.tickfont||{}).color),this.tickAngle[y+p]=n.tickangle==="auto"?0:Math.PI*-n.tickangle/180,this.tickPad[y+p]=this.getTickPad(n),this.tickMarkLength[y+p]=0,this.tickMarkWidth[y+p]=n.tickwidth||0,this.tickMarkColor[y+p]=l(n.tickcolor),this.borderLineEnable[y+p]=!1,this.borderLineColor[y+p]=l(n.linecolor),this.borderLineWidth[y+p]=n.linewidth||0;u=this.hasSharedAxis(n),i=this.hasAxisInDfltPos(r,n)&&!u,v=this.hasAxisInAltrPos(r,n)&&!u,s=n.mirror||!1,g=u?String(s).indexOf("all")!==-1:!!s,h=u?s==="allticks":String(s).indexOf("ticks")!==-1,i?this.labelEnable[y]=!0:v&&(this.labelEnable[y+2]=!0),i?this.tickEnable[y]=n.showticklabels:v&&(this.tickEnable[y+2]=n.showticklabels),(i||g)&&(this.borderLineEnable[y]=n.showline),(v||g)&&(this.borderLineEnable[y+2]=n.showline),(i||h)&&(this.tickMarkLength[y]=this.getTickMarkLength(n)),(v||h)&&(this.tickMarkLength[y+2]=this.getTickMarkLength(n)),this.gridLineEnable[y]=n.showgrid,this.gridLineColor[y]=l(n.gridcolor),this.gridLineWidth[y]=n.gridwidth,this.zeroLineEnable[y]=n.zeroline,this.zeroLineColor[y]=l(n.zerolinecolor),this.zeroLineWidth[y]=n.zerolinewidth}},w.hasSharedAxis=function(a){var r=this.scene,n=r.fullLayout._subplots.gl2d,c=d.findSubplotsWithAxis(n,a);return c.indexOf(r.id)!==0},w.hasAxisInDfltPos=function(a,r){var n=r.side;if(a==="xaxis")return n==="bottom";if(a==="yaxis")return n==="left"},w.hasAxisInAltrPos=function(a,r){var n=r.side;if(a==="xaxis")return n==="top";if(a==="yaxis")return n==="right"},w.getLabelPad=function(a,r){var n=1.5,c=r.title.font.size,s=r.showticklabels;if(a==="xaxis")return r.side==="top"?-10+c*(n+(s?1:0)):-10+c*(n+(s?.5:0));if(a==="yaxis")return r.side==="right"?10+c*(n+(s?1:.5)):10+c*(n+(s?.5:0))},w.getTickPad=function(a){return a.ticks==="outside"?10+a.ticklen:15},w.getTickMarkLength=function(a){if(!a.ticks)return 0;var r=a.ticklen;return a.ticks==="inside"?-r:r};function o(a){return new b(a)}B.exports=o},{"../../lib/str2rgbarray":528,"../cartesian/axes":554}],596:[function(t,B,H){var d=t("../../plot_api/edit_types").overrideAll,l=t("./scene2d"),b=t("../layout_attributes"),w=t("../../constants/xmlns_namespaces"),e=t("../cartesian/constants"),o=t("../cartesian"),a=t("../../components/fx/layout_attributes"),r=t("../get_data").getSubplotData;H.name="gl2d",H.attr=["xaxis","yaxis"],H.idRoot=["x","y"],H.idRegex=e.idRegex,H.attrRegex=e.attrRegex,H.attributes=t("../cartesian/attributes"),H.supplyLayoutDefaults=function(n,c,s){c._has("cartesian")||o.supplyLayoutDefaults(n,c,s)},H.layoutAttrOverrides=d(o.layoutAttributes,"plot","from-root"),H.baseLayoutAttrOverrides=d({plot_bgcolor:b.plot_bgcolor,hoverlabel:a.hoverlabel},"plot","nested"),H.plot=function(c){for(var s=c._fullLayout,i=c._fullData,v=s._subplots.gl2d,u=0;u<v.length;u++){var g=v[u],h=s._plots[g],y=r(i,"gl2d",g),p=h._scene2d;p===void 0&&(p=new l({id:g,graphDiv:c,container:c.querySelector(".gl-container"),staticPlot:c._context.staticPlot,plotGlPixelRatio:c._context.plotGlPixelRatio},s),h._scene2d=p),p.plot(y,c.calcdata,s,c.layout)}},H.clean=function(n,c,s,i){for(var v=i._subplots.gl2d||[],u=0;u<v.length;u++){var g=v[u],h=i._plots[g];if(!!h._scene2d){var y=r(n,"gl2d",g);y.length===0&&(h._scene2d.destroy(),delete i._plots[g])}}o.clean.apply(this,arguments)},H.drawFramework=function(n){n._context.staticPlot||o.drawFramework(n)},H.toSVG=function(n){for(var c=n._fullLayout,s=c._subplots.gl2d,i=0;i<s.length;i++){var v=c._plots[s[i]],u=v._scene2d,g=u.toImage("png"),h=c._glimages.append("svg:image");h.attr({xmlns:w.svg,"xlink:href":g,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),u.destroy()}},H.updateFx=function(n){for(var c=n._fullLayout,s=c._subplots.gl2d,i=0;i<s.length;i++){var v=c._plots[s[i]]._scene2d;v.updateFx(c.dragmode)}}},{"../../components/fx/layout_attributes":407,"../../constants/xmlns_namespaces":480,"../../plot_api/edit_types":536,"../cartesian":568,"../cartesian/attributes":552,"../cartesian/constants":561,"../get_data":593,"../layout_attributes":610,"./scene2d":597}],597:[function(t,B,H){var d=t("../../registry"),l=t("../../plots/cartesian/axes"),b=t("../../components/fx"),w=t("../../../stackgl_modules").gl_plot2d,e=t("../../../stackgl_modules").gl_spikes2d,o=t("../../../stackgl_modules").gl_select_box,a=t("webgl-context"),r=t("./convert"),n=t("./camera"),c=t("../../lib/show_no_webgl_msg"),s=t("../cartesian/constraints"),i=s.enforce,v=s.clean,u=t("../cartesian/autorange").doAutoRange,g=t("../../components/dragelement/helpers"),h=g.drawMode,y=g.selectMode,p=["xaxis","yaxis"],A,m,M=t("../cartesian/constants").SUBPLOT_PATTERN;function x(f,L){this.container=f.container,this.graphDiv=f.graphDiv,this.pixelRatio=f.plotGlPixelRatio||window.devicePixelRatio,this.id=f.id,this.staticPlot=!!f.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(L),this.makeFramework(),!this.stopped&&(this.glplotOptions=r(this),this.glplotOptions.merge(L),this.glplot=w(this.glplotOptions),this.camera=n(this),this.traces={},this.spikes=e(this.glplot),this.selectBox=o(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}B.exports=x;var T=x.prototype;T.makeFramework=function(){if(this.staticPlot){if(!m&&(A=document.createElement("canvas"),m=a({canvas:A,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!m))throw new Error("Error creating static canvas/context for image server");this.canvas=A,this.gl=m}else{var f=this.container.querySelector(".gl-canvas-focus"),L=a({canvas:f,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!L){c(this),this.stopped=!0;return}this.canvas=f,this.gl=L}var S=this.canvas;S.style.width="100%",S.style.height="100%",S.style.position="absolute",S.style.top="0px",S.style.left="0px",S.style["pointer-events"]="none",this.updateSize(S);var k=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");k.style.position="absolute",k.style.top=k.style.left="0px",k.style.width=k.style.height="100%",k.style["z-index"]=20,k.style["pointer-events"]="none";var P=this.mouseContainer=document.createElement("div");P.style.position="absolute",P.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var z=this.container;z.appendChild(k),z.appendChild(P);var I=this;P.addEventListener("mouseout",function(){I.isMouseOver=!1,I.unhover()}),P.addEventListener("mouseover",function(){I.isMouseOver=!0})},T.toImage=function(f){f||(f="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(A),this.updateSize(this.canvas);var L=this.glplot.gl,S=L.drawingBufferWidth,k=L.drawingBufferHeight;L.clearColor(1,1,1,0),L.clear(L.COLOR_BUFFER_BIT|L.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),L.bindFramebuffer(L.FRAMEBUFFER,null);var P=new Uint8Array(S*k*4);L.readPixels(0,0,S,k,L.RGBA,L.UNSIGNED_BYTE,P);for(var z=0,I=k-1;z<I;++z,--I)for(var R=0;R<S;++R)for(var D=0;D<4;++D){var O=P[4*(S*z+R)+D];P[4*(S*z+R)+D]=P[4*(S*I+R)+D],P[4*(S*I+R)+D]=O}var F=document.createElement("canvas");F.width=S,F.height=k;var G=F.getContext("2d"),W=G.createImageData(S,k);W.data.set(P),G.putImageData(W,0,0);var q;switch(f){case"jpeg":q=F.toDataURL("image/jpeg");break;case"webp":q=F.toDataURL("image/webp");break;default:q=F.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(A),q},T.updateSize=function(f){f||(f=this.canvas);var L=this.pixelRatio,S=this.fullLayout,k=S.width,P=S.height,z=Math.ceil(L*k)|0,I=Math.ceil(L*P)|0;return(f.width!==z||f.height!==I)&&(f.width=z,f.height=I),f},T.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var f=[l.calcTicks(this.xaxis),l.calcTicks(this.yaxis)],L=0;L<2;++L)for(var S=0;S<f[L].length;++S)f[L][S].text=f[L][S].text+"";return f};function _(f,L){for(var S=0;S<2;++S){var k=f[S],P=L[S];if(k.length!==P.length)return!0;for(var z=0;z<k.length;++z)if(k[z].x!==P[z].x)return!0}return!1}T.updateRefs=function(f){this.fullLayout=f;var L=this.id.match(M),S="xaxis"+L[1],k="yaxis"+L[2];this.xaxis=this.fullLayout[S],this.yaxis=this.fullLayout[k]},T.relayoutCallback=function(){var f=this.graphDiv,L=this.xaxis,S=this.yaxis,k=f.layout,P={},z=P[L._name+".range"]=L.range.slice(),I=P[S._name+".range"]=S.range.slice();P[L._name+".autorange"]=L.autorange,P[S._name+".autorange"]=S.autorange,d.call("_storeDirectGUIEdit",f.layout,f._fullLayout._preGUI,P);var R=k[L._name];R.range=z,R.autorange=L.autorange;var D=k[S._name];D.range=I,D.autorange=S.autorange,P.lastInputTime=this.camera.lastInputTime,f.emit("plotly_relayout",P)},T.cameraChanged=function(){var f=this.camera;this.glplot.setDataBox(this.calcDataBox());var L=this.computeTickMarks(),S=this.glplotOptions.ticks;_(L,S)&&(this.glplotOptions.ticks=L,this.glplotOptions.dataBox=f.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},T.handleAnnotations=function(){for(var f=this.graphDiv,L=this.fullLayout.annotations,S=0;S<L.length;S++){var k=L[S];k.xref===this.xaxis._id&&k.yref===this.yaxis._id&&d.getComponentMethod("annotations","drawOne")(f,S)}},T.destroy=function(){if(!!this.glplot){var f=this.traces;f&&Object.keys(f).map(function(L){f[L].dispose(),delete f[L]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},T.plot=function(f,L,S){var k=this.glplot;this.updateRefs(S),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(f,L),this.updateFx(S.dragmode);var P=S.width,z=S.height;this.updateSize(this.canvas);var I=this.glplotOptions;I.merge(S),I.screenBox=[0,0,P,z];var R={_fullLayout:{_axisConstraintGroups:S._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:S._size}};v(R,this.xaxis),v(R,this.yaxis);var D=S._size,O=this.xaxis.domain,F=this.yaxis.domain;I.viewBox=[D.l+O[0]*D.w,D.b+F[0]*D.h,P-D.r-(1-O[1])*D.w,z-D.t-(1-F[1])*D.h],this.mouseContainer.style.width=D.w*(O[1]-O[0])+"px",this.mouseContainer.style.height=D.h*(F[1]-F[0])+"px",this.mouseContainer.height=D.h*(F[1]-F[0]),this.mouseContainer.style.left=D.l+O[0]*D.w+"px",this.mouseContainer.style.top=D.t+(1-F[1])*D.h+"px";var G,W;for(W=0;W<2;++W)G=this[p[W]],G._length=I.viewBox[W+2]-I.viewBox[W],u(this.graphDiv,G),G.setScale();i(R),I.ticks=this.computeTickMarks(),I.dataBox=this.calcDataBox(),I.merge(S),k.update(I),this.glplot.draw()},T.calcDataBox=function(){var f=this.xaxis,L=this.yaxis,S=f.range,k=L.range,P=f.r2l,z=L.r2l;return[P(S[0]),z(k[0]),P(S[1]),z(k[1])]},T.setRanges=function(f){var L=this.xaxis,S=this.yaxis,k=L.l2r,P=S.l2r;L.range=[k(f[0]),k(f[2])],S.range=[P(f[1]),P(f[3])]},T.updateTraces=function(f,L){var S=Object.keys(this.traces),k,P,z;this.fullData=f;e:for(k=0;k<S.length;k++){var I=S[k],R=this.traces[I];for(P=0;P<f.length;P++)if(z=f[P],z.uid===I&&z.type===R.type)continue e;R.dispose(),delete this.traces[I]}for(k=0;k<f.length;k++){z=f[k];var D=L[k],O=this.traces[z.uid];O?O.update(z,D):(O=z._module.plot(this,z,D),this.traces[z.uid]=O)}this.glplot.objects.sort(function(F,G){return F._trace.index-G._trace.index})},T.updateFx=function(f){y(f)||h(f)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),f==="pan"?this.mouseContainer.style.cursor="move":f==="zoom"?this.mouseContainer.style.cursor="crosshair":this.mouseContainer.style.cursor=null},T.emitPointAction=function(f,L){for(var S=f.trace.uid,k=f.pointIndex,P,z=0;z<this.fullData.length;z++)this.fullData[z].uid===S&&(P=this.fullData[z]);var I={x:f.traceCoord[0],y:f.traceCoord[1],curveNumber:P.index,pointNumber:k,data:P._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};b.appendArrayPointValue(I,P,k),this.graphDiv.emit(L,{points:[I]})},T.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var f=this.glplot,L=this.camera,S=L.mouseListener,k=this.lastButtonState===1&&S.buttons===0,P=this.fullLayout;this.lastButtonState=S.buttons,this.cameraChanged();var z=S.x*f.pixelRatio,I=this.canvas.height-f.pixelRatio*S.y,R;if(L.boxEnabled&&P.dragmode==="zoom"){this.selectBox.enabled=!0;for(var D=this.selectBox.selectBox=[Math.min(L.boxStart[0],L.boxEnd[0]),Math.min(L.boxStart[1],L.boxEnd[1]),Math.max(L.boxStart[0],L.boxEnd[0]),Math.max(L.boxStart[1],L.boxEnd[1])],O=0;O<2;O++)L.boxStart[O]===L.boxEnd[O]&&(D[O]=f.dataBox[O],D[O+2]=f.dataBox[O+2]);f.setDirty()}else if(!L.panning&&this.isMouseOver){this.selectBox.enabled=!1;var F=P._size,G=this.xaxis.domain,W=this.yaxis.domain;R=f.pick(z/f.pixelRatio+F.l+G[0]*F.w,I/f.pixelRatio-(F.t+(1-W[1])*F.h));var q=R&&R.object._trace.handlePick(R);if(q&&k&&this.emitPointAction(q,"plotly_click"),R&&R.object._trace.hoverinfo!=="skip"&&P.hovermode&&q&&(!this.lastPickResult||this.lastPickResult.traceUid!==q.trace.uid||this.lastPickResult.dataCoord[0]!==q.dataCoord[0]||this.lastPickResult.dataCoord[1]!==q.dataCoord[1])){var J=q;this.lastPickResult={traceUid:q.trace?q.trace.uid:null,dataCoord:q.dataCoord.slice()},this.spikes.update({center:R.dataCoord}),J.screenCoord=[((f.viewBox[2]-f.viewBox[0])*(R.dataCoord[0]-f.dataBox[0])/(f.dataBox[2]-f.dataBox[0])+f.viewBox[0])/f.pixelRatio,(this.canvas.height-(f.viewBox[3]-f.viewBox[1])*(R.dataCoord[1]-f.dataBox[1])/(f.dataBox[3]-f.dataBox[1])-f.viewBox[1])/f.pixelRatio],this.emitPointAction(q,"plotly_hover");var X=this.fullData[J.trace.index]||{},Z=J.pointIndex,se=b.castHoverinfo(X,P,Z);if(se&&se!=="all"){var le=se.split("+");le.indexOf("x")===-1&&(J.traceCoord[0]=void 0),le.indexOf("y")===-1&&(J.traceCoord[1]=void 0),le.indexOf("z")===-1&&(J.traceCoord[2]=void 0),le.indexOf("text")===-1&&(J.textLabel=void 0),le.indexOf("name")===-1&&(J.name=void 0)}b.loneHover({x:J.screenCoord[0],y:J.screenCoord[1],xLabel:this.hoverFormatter("xaxis",J.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",J.traceCoord[1]),zLabel:J.traceCoord[2],text:J.textLabel,name:J.name,color:b.castHoverOption(X,Z,"bgcolor")||J.color,borderColor:b.castHoverOption(X,Z,"bordercolor"),fontFamily:b.castHoverOption(X,Z,"font.family"),fontSize:b.castHoverOption(X,Z,"font.size"),fontColor:b.castHoverOption(X,Z,"font.color"),nameLength:b.castHoverOption(X,Z,"namelength"),textAlign:b.castHoverOption(X,Z,"align")},{container:this.svgContainer,gd:this.graphDiv})}}R||this.unhover(),f.draw()}},T.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),b.loneUnhover(this.svgContainer))},T.hoverFormatter=function(f,L){if(L!==void 0){var S=this[f];return l.tickText(S,S.c2l(L),"hover").text}}},{"../../../stackgl_modules":1120,"../../components/dragelement/helpers":384,"../../components/fx":406,"../../lib/show_no_webgl_msg":525,"../../plots/cartesian/axes":554,"../../registry":638,"../cartesian/autorange":553,"../cartesian/constants":561,"../cartesian/constraints":562,"./camera":594,"./convert":595,"webgl-context":331}],598:[function(t,B,H){var d=t("../../plot_api/edit_types").overrideAll,l=t("../../components/fx/layout_attributes"),b=t("./scene"),w=t("../get_data").getSubplotData,e=t("../../lib"),o=t("../../constants/xmlns_namespaces"),a="gl3d",r="scene";H.name=a,H.attr=r,H.idRoot=r,H.idRegex=H.attrRegex=e.counterRegex("scene"),H.attributes=t("./layout/attributes"),H.layoutAttributes=t("./layout/layout_attributes"),H.baseLayoutAttrOverrides=d({hoverlabel:l.hoverlabel},"plot","nested"),H.supplyLayoutDefaults=t("./layout/defaults"),H.plot=function(c){for(var s=c._fullLayout,i=c._fullData,v=s._subplots[a],u=0;u<v.length;u++){var g=v[u],h=w(i,a,g),y=s[g],p=y.camera,A=y._scene;A||(A=new b({id:g,graphDiv:c,container:c.querySelector(".gl-container"),staticPlot:c._context.staticPlot,plotGlPixelRatio:c._context.plotGlPixelRatio,camera:p},s),y._scene=A),A.viewInitial||(A.viewInitial={up:{x:p.up.x,y:p.up.y,z:p.up.z},eye:{x:p.eye.x,y:p.eye.y,z:p.eye.z},center:{x:p.center.x,y:p.center.y,z:p.center.z}}),A.plot(h,s,c.layout)}},H.clean=function(n,c,s,i){for(var v=i._subplots[a]||[],u=0;u<v.length;u++){var g=v[u];!c[g]&&!!i[g]._scene&&(i[g]._scene.destroy(),i._infolayer&&i._infolayer.selectAll(".annotation-"+g).remove())}},H.toSVG=function(n){for(var c=n._fullLayout,s=c._subplots[a],i=c._size,v=0;v<s.length;v++){var u=c[s[v]],g=u.domain,h=u._scene,y=h.toImage("png"),p=c._glimages.append("svg:image");p.attr({xmlns:o.svg,"xlink:href":y,x:i.l+i.w*g.x[0],y:i.t+i.h*(1-g.y[1]),width:i.w*(g.x[1]-g.x[0]),height:i.h*(g.y[1]-g.y[0]),preserveAspectRatio:"none"}),h.destroy()}},H.cleanId=function(c){if(!!c.match(/^scene[0-9]*$/)){var s=c.substr(5);return s==="1"&&(s=""),r+s}},H.updateFx=function(n){for(var c=n._fullLayout,s=c._subplots[a],i=0;i<s.length;i++){var v=c[s[i]]._scene;v.updateFx(c.dragmode,c.hovermode)}}},{"../../components/fx/layout_attributes":407,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../plot_api/edit_types":536,"../get_data":593,"./layout/attributes":599,"./layout/defaults":603,"./layout/layout_attributes":604,"./scene":608}],599:[function(t,B,H){B.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],600:[function(t,B,H){var d=t("../../../components/color"),l=t("../../cartesian/layout_attributes"),b=t("../../../lib/extend").extendFlat,w=t("../../../plot_api/edit_types").overrideAll;B.exports=w({visible:l.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:d.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:l.color,categoryorder:l.categoryorder,categoryarray:l.categoryarray,title:{text:l.title.text,font:l.title.font},type:b({},l.type,{values:["-","linear","log","date","category"]}),autotypenumbers:l.autotypenumbers,autorange:l.autorange,rangemode:l.rangemode,range:b({},l.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:l.tickmode,nticks:l.nticks,tick0:l.tick0,dtick:l.dtick,tickvals:l.tickvals,ticktext:l.ticktext,ticks:l.ticks,mirror:l.mirror,ticklen:l.ticklen,tickwidth:l.tickwidth,tickcolor:l.tickcolor,showticklabels:l.showticklabels,tickfont:l.tickfont,tickangle:l.tickangle,tickprefix:l.tickprefix,showtickprefix:l.showtickprefix,ticksuffix:l.ticksuffix,showticksuffix:l.showticksuffix,showexponent:l.showexponent,exponentformat:l.exponentformat,minexponent:l.minexponent,separatethousands:l.separatethousands,tickformat:l.tickformat,tickformatstops:l.tickformatstops,hoverformat:l.hoverformat,showline:l.showline,linecolor:l.linecolor,linewidth:l.linewidth,showgrid:l.showgrid,gridcolor:b({},l.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:l.gridwidth,zeroline:l.zeroline,zerolinecolor:l.zerolinecolor,zerolinewidth:l.zerolinewidth,_deprecated:{title:l._deprecated.title,titlefont:l._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":366,"../../../lib/extend":493,"../../../plot_api/edit_types":536,"../../cartesian/layout_attributes":569}],601:[function(t,B,H){var d=t("tinycolor2").mix,l=t("../../../lib"),b=t("../../../plot_api/plot_template"),w=t("./axis_attributes"),e=t("../../cartesian/type_defaults"),o=t("../../cartesian/axis_defaults"),a=["xaxis","yaxis","zaxis"],r=100*(204-68)/(255-68);B.exports=function(c,s,i){var v,u;function g(p,A){return l.coerce(v,u,w,p,A)}for(var h=0;h<a.length;h++){var y=a[h];v=c[y]||{},u=b.newContainer(s,y),u._id=y[0]+i.scene,u._name=y,e(v,u,g,i),o(v,u,g,{font:i.font,letter:y[0],data:i.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:i.bgColor,calendar:i.calendar},i.fullLayout),g("gridcolor",d(u.color,i.bgColor,r).toRgbString()),g("title.text",y[0]),u.setScale=l.noop,g("showspikes")&&(g("spikesides"),g("spikethickness"),g("spikecolor",u.color)),g("showaxeslabels"),g("showbackground")&&g("backgroundcolor")}}},{"../../../lib":503,"../../../plot_api/plot_template":543,"../../cartesian/axis_defaults":556,"../../cartesian/type_defaults":582,"./axis_attributes":600,tinycolor2:312}],602:[function(t,B,H){var d=t("../../../lib/str2rgbarray"),l=t("../../../lib"),b=["xaxis","yaxis","zaxis"];function w(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}var e=w.prototype;e.merge=function(a,r){for(var n=this,c=0;c<3;++c){var s=r[b[c]];if(!s.visible){n.tickEnable[c]=!1,n.labelEnable[c]=!1,n.lineEnable[c]=!1,n.lineTickEnable[c]=!1,n.gridEnable[c]=!1,n.zeroEnable[c]=!1,n.backgroundEnable[c]=!1;continue}n.labels[c]=a._meta?l.templateString(s.title.text,a._meta):s.title.text,"font"in s.title&&(s.title.font.color&&(n.labelColor[c]=d(s.title.font.color)),s.title.font.family&&(n.labelFont[c]=s.title.font.family),s.title.font.size&&(n.labelSize[c]=s.title.font.size)),"showline"in s&&(n.lineEnable[c]=s.showline),"linecolor"in s&&(n.lineColor[c]=d(s.linecolor)),"linewidth"in s&&(n.lineWidth[c]=s.linewidth),"showgrid"in s&&(n.gridEnable[c]=s.showgrid),"gridcolor"in s&&(n.gridColor[c]=d(s.gridcolor)),"gridwidth"in s&&(n.gridWidth[c]=s.gridwidth),s.type==="log"?n.zeroEnable[c]=!1:"zeroline"in s&&(n.zeroEnable[c]=s.zeroline),"zerolinecolor"in s&&(n.zeroLineColor[c]=d(s.zerolinecolor)),"zerolinewidth"in s&&(n.zeroLineWidth[c]=s.zerolinewidth),"ticks"in s&&!!s.ticks?n.lineTickEnable[c]=!0:n.lineTickEnable[c]=!1,"ticklen"in s&&(n.lineTickLength[c]=n._defaultLineTickLength[c]=s.ticklen),"tickcolor"in s&&(n.lineTickColor[c]=d(s.tickcolor)),"tickwidth"in s&&(n.lineTickWidth[c]=s.tickwidth),"tickangle"in s&&(n.tickAngle[c]=s.tickangle==="auto"?-3600:Math.PI*-s.tickangle/180),"showticklabels"in s&&(n.tickEnable[c]=s.showticklabels),"tickfont"in s&&(s.tickfont.color&&(n.tickColor[c]=d(s.tickfont.color)),s.tickfont.family&&(n.tickFont[c]=s.tickfont.family),s.tickfont.size&&(n.tickSize[c]=s.tickfont.size)),"mirror"in s?["ticks","all","allticks"].indexOf(s.mirror)!==-1?(n.lineTickMirror[c]=!0,n.lineMirror[c]=!0):s.mirror===!0?(n.lineTickMirror[c]=!1,n.lineMirror[c]=!0):(n.lineTickMirror[c]=!1,n.lineMirror[c]=!1):n.lineMirror[c]=!1,"showbackground"in s&&s.showbackground!==!1?(n.backgroundEnable[c]=!0,n.backgroundColor[c]=d(s.backgroundcolor)):n.backgroundEnable[c]=!1}};function o(a,r){var n=new w;return n.merge(a,r),n}B.exports=o},{"../../../lib":503,"../../../lib/str2rgbarray":528}],603:[function(t,B,H){var d=t("../../../lib"),l=t("../../../components/color"),b=t("../../../registry"),w=t("../../subplot_defaults"),e=t("./axis_defaults"),o=t("./layout_attributes"),a=t("../../get_data").getSubplotData,r="gl3d";B.exports=function(s,i,v){var u=i._basePlotModules.length>1;function g(h){if(!u){var y=d.validate(s[h],o[h]);if(y)return s[h]}}w(s,i,v,{type:r,attributes:o,handleDefaults:n,fullLayout:i,font:i.font,fullData:v,getDfltFromLayout:g,autotypenumbersDflt:i.autotypenumbers,paper_bgcolor:i.paper_bgcolor,calendar:i.calendar})};function n(c,s,i,v){for(var u=i("bgcolor"),g=l.combine(u,v.paper_bgcolor),h=["up","center","eye"],y=0;y<h.length;y++)i("camera."+h[y]+".x"),i("camera."+h[y]+".y"),i("camera."+h[y]+".z");i("camera.projection.type");var p=!!i("aspectratio.x")&&!!i("aspectratio.y")&&!!i("aspectratio.z"),A=p?"manual":"auto",m=i("aspectmode",A);p||(c.aspectratio=s.aspectratio={x:1,y:1,z:1},m==="manual"&&(s.aspectmode="auto"),c.aspectmode=s.aspectmode);var M=a(v.fullData,r,v.id);e(c,s,{font:v.font,scene:v.id,data:M,bgColor:g,calendar:v.calendar,autotypenumbersDflt:v.autotypenumbersDflt,fullLayout:v.fullLayout}),b.getComponentMethod("annotations3d","handleDefaults")(c,s,v);var x=v.getDfltFromLayout("dragmode");if(x!==!1&&!x)if(x="orbit",c.camera&&c.camera.up){var T=c.camera.up.x,_=c.camera.up.y,f=c.camera.up.z;f!==0&&(!T||!_||!f||f/Math.sqrt(T*T+_*_+f*f)>.999)&&(x="turntable")}else x="turntable";i("dragmode",x),i("hovermode",v.getDfltFromLayout("hovermode"))}},{"../../../components/color":366,"../../../lib":503,"../../../registry":638,"../../get_data":593,"../../subplot_defaults":632,"./axis_defaults":601,"./layout_attributes":604}],604:[function(t,B,H){var d=t("./axis_attributes"),l=t("../../domain").attributes,b=t("../../../lib/extend").extendFlat,w=t("../../../lib").counterRegex;function e(o,a,r){return{x:{valType:"number",dflt:o,editType:"camera"},y:{valType:"number",dflt:a,editType:"camera"},z:{valType:"number",dflt:r,editType:"camera"},editType:"camera"}}B.exports={_arrayAttrRegexps:[w("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:b(e(0,0,1),{}),center:b(e(0,0,0),{}),eye:b(e(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:l({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:d,yaxis:d,zaxis:d,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":503,"../../../lib/extend":493,"../../domain":584,"./axis_attributes":600}],605:[function(t,B,H){var d=t("../../../lib/str2rgbarray"),l=["xaxis","yaxis","zaxis"];function b(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}var w=b.prototype;w.merge=function(o){for(var a=0;a<3;++a){var r=o[l[a]];if(!r.visible){this.enabled[a]=!1,this.drawSides[a]=!1;continue}this.enabled[a]=r.showspikes,this.colors[a]=d(r.spikecolor),this.drawSides[a]=r.spikesides,this.lineWidth[a]=r.spikethickness}};function e(o){var a=new b;return a.merge(o),a}B.exports=e},{"../../../lib/str2rgbarray":528}],606:[function(t,B,H){B.exports=o;var d=t("../../cartesian/axes"),l=t("../../../lib"),b=["xaxis","yaxis","zaxis"],w=[0,0,0];function e(a){for(var r=new Array(3),n=0;n<3;++n){for(var c=a[n],s=new Array(c.length),i=0;i<c.length;++i)s[i]=c[i].x;r[n]=s}return r}function o(a){for(var r=a.axesOptions,n=a.glplot.axesPixels,c=a.fullSceneLayout,s=[[],[],[]],i=0;i<3;++i){var v=c[b[i]];if(v._length=(n[i].hi-n[i].lo)*n[i].pixelsPerDataUnit/a.dataScale[i],Math.abs(v._length)===1/0||isNaN(v._length))s[i]=[];else{v._input_range=v.range.slice(),v.range[0]=n[i].lo/a.dataScale[i],v.range[1]=n[i].hi/a.dataScale[i],v._m=1/(a.dataScale[i]*n[i].pixelsPerDataUnit),v.range[0]===v.range[1]&&(v.range[0]-=1,v.range[1]+=1);var u=v.tickmode;if(v.tickmode==="auto"){v.tickmode="linear";var g=v.nticks||l.constrain(v._length/40,4,9);d.autoTicks(v,Math.abs(v.range[1]-v.range[0])/g)}for(var h=d.calcTicks(v,{msUTC:!0}),y=0;y<h.length;++y)h[y].x=h[y].x*a.dataScale[i],v.type==="date"&&(h[y].text=h[y].text.replace(/\<br\>/g," "));s[i]=h,v.tickmode=u}}r.ticks=s;for(var i=0;i<3;++i){w[i]=.5*(a.glplot.bounds[0][i]+a.glplot.bounds[1][i]);for(var y=0;y<2;++y)r.bounds[y][i]=a.glplot.bounds[y][i]}a.contourLevels=e(s)}},{"../../../lib":503,"../../cartesian/axes":554}],607:[function(t,B,H){function d(b,w){var e=[0,0,0,0],o,a;for(o=0;o<4;++o)for(a=0;a<4;++a)e[a]+=b[4*o+a]*w[o];return e}function l(b,w){var e=d(b.projection,d(b.view,d(b.model,[w[0],w[1],w[2],1])));return e}B.exports=l},{}],608:[function(t,B,H){var d=t("../../../stackgl_modules").gl_plot3d,l=d.createCamera,b=d.createScene,w=t("webgl-context"),e=t("has-passive-events"),o=t("../../registry"),a=t("../../lib"),r=a.preserveDrawingBuffer(),n=t("../../plots/cartesian/axes"),c=t("../../components/fx"),s=t("../../lib/str2rgbarray"),i=t("../../lib/show_no_webgl_msg"),v=t("./project"),u=t("./layout/convert"),g=t("./layout/spikes"),h=t("./layout/tick_marks"),y,p;function A(P,z){var I=document.createElement("div"),R=P.container;this.graphDiv=P.graphDiv;var D=document.createElementNS("http://www.w3.org/2000/svg","svg");D.style.position="absolute",D.style.top=D.style.left="0px",D.style.width=D.style.height="100%",D.style["z-index"]=20,D.style["pointer-events"]="none",I.appendChild(D),this.svgContainer=D,I.id=P.id,I.style.position="absolute",I.style.top=I.style.left="0px",I.style.width=I.style.height="100%",R.appendChild(I),this.fullLayout=z,this.id=P.id||"scene",this.fullSceneLayout=z[this.id],this.plotArgs=[[],{},{}],this.axesOptions=u(z,z[this.id]),this.spikeOptions=g(z[this.id]),this.container=I,this.staticMode=!!P.staticPlot,this.pixelRatio=this.pixelRatio||P.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=o.getComponentMethod("annotations3d","convert"),this.drawAnnotations=o.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var m=A.prototype;m.prepareOptions=function(){var P=this,z={canvas:P.canvas,gl:P.gl,glOptions:{preserveDrawingBuffer:r,premultipliedAlpha:!0,antialias:!0},container:P.container,axes:P.axesOptions,spikes:P.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:P.camera,pixelRatio:P.pixelRatio};if(P.staticMode){if(!p&&(y=document.createElement("canvas"),p=w({canvas:y,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!p))throw new Error("error creating static canvas/context for image server");z.gl=p,z.canvas=y}return z};var M=!0;m.tryCreatePlot=function(){var P=this,z=P.prepareOptions(),I=!0;try{P.glplot=b(z)}catch{if(P.staticMode||!M||r)I=!1;else{a.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{r=z.glOptions.preserveDrawingBuffer=!0,P.glplot=b(z)}catch{r=z.glOptions.preserveDrawingBuffer=!1,I=!1}}}return M=!1,I},m.initializeGLCamera=function(){var P=this,z=P.fullSceneLayout.camera,I=z.projection.type==="orthographic";P.camera=l(P.container,{center:[z.center.x,z.center.y,z.center.z],eye:[z.eye.x,z.eye.y,z.eye.z],up:[z.up.x,z.up.y,z.up.z],_ortho:I,zoomMin:.01,zoomMax:100,mode:"orbit"})},m.initializeGLPlot=function(){var P=this;P.initializeGLCamera();var z=P.tryCreatePlot();if(!z)return i(P);P.traces={},P.make4thDimension();var I=P.graphDiv,R=I.layout,D=function(){var F={};return P.isCameraChanged(R)&&(F[P.id+".camera"]=P.getCamera()),P.isAspectChanged(R)&&(F[P.id+".aspectratio"]=P.glplot.getAspectratio(),R[P.id].aspectmode!=="manual"&&(P.fullSceneLayout.aspectmode=R[P.id].aspectmode=F[P.id+".aspectmode"]="manual")),F},O=function(F){if(F.fullSceneLayout.dragmode!==!1){var G=D();F.saveLayout(R),F.graphDiv.emit("plotly_relayout",G)}};return P.glplot.canvas&&(P.glplot.canvas.addEventListener("mouseup",function(){O(P)}),P.glplot.canvas.addEventListener("wheel",function(F){if(I._context._scrollZoom.gl3d){if(P.camera._ortho){var G=F.deltaX>F.deltaY?1.1:.9090909090909091,W=P.glplot.getAspectratio();P.glplot.setAspectratio({x:G*W.x,y:G*W.y,z:G*W.z})}O(P)}},e?{passive:!1}:!1),P.glplot.canvas.addEventListener("mousemove",function(){if(P.fullSceneLayout.dragmode!==!1&&P.camera.mouseListener.buttons!==0){var F=D();P.graphDiv.emit("plotly_relayouting",F)}}),P.staticMode||P.glplot.canvas.addEventListener("webglcontextlost",function(F){I&&I.emit&&I.emit("plotly_webglcontextlost",{event:F,layer:P.id})},!1)),P.glplot.oncontextloss=function(){P.recoverContext()},P.glplot.onrender=function(){P.render()},!0},m.render=function(){var P=this,z=P.graphDiv,I,R=P.svgContainer,D=P.container.getBoundingClientRect();z._fullLayout._calcInverseTransform(z);var O=z._fullLayout._invScaleX,F=z._fullLayout._invScaleY,G=D.width*O,W=D.height*F;R.setAttributeNS(null,"viewBox","0 0 "+G+" "+W),R.setAttributeNS(null,"width",G),R.setAttributeNS(null,"height",W),h(P),P.glplot.axes.update(P.axesOptions);for(var q=Object.keys(P.traces),J=null,X=P.glplot.selection,Z=0;Z<q.length;++Z)I=P.traces[q[Z]],I.data.hoverinfo!=="skip"&&I.handlePick(X)&&(J=I),I.setContourLevels&&I.setContourLevels();function se(xe,he,ge){var me=P.fullSceneLayout[xe+"axis"];return me.type!=="log"&&(he=me.d2l(he)),n.hoverLabelText(me,he,ge)}if(J!==null){var le=v(P.glplot.cameraParams,X.dataCoordinate);I=J.data;var oe=z._fullData[I.index],U=X.index,V={xLabel:se("x",X.traceCoordinate[0],I.xhoverformat),yLabel:se("y",X.traceCoordinate[1],I.yhoverformat),zLabel:se("z",X.traceCoordinate[2],I.zhoverformat)},re=c.castHoverinfo(oe,P.fullLayout,U),ee=(re||"").split("+"),j=re&&re==="all";!oe.hovertemplate&&!j&&(ee.indexOf("x")===-1&&(V.xLabel=void 0),ee.indexOf("y")===-1&&(V.yLabel=void 0),ee.indexOf("z")===-1&&(V.zLabel=void 0),ee.indexOf("text")===-1&&(X.textLabel=void 0),ee.indexOf("name")===-1&&(J.name=void 0));var Q,ne=[];I.type==="cone"||I.type==="streamtube"?(V.uLabel=se("x",X.traceCoordinate[3],I.uhoverformat),(j||ee.indexOf("u")!==-1)&&ne.push("u: "+V.uLabel),V.vLabel=se("y",X.traceCoordinate[4],I.vhoverformat),(j||ee.indexOf("v")!==-1)&&ne.push("v: "+V.vLabel),V.wLabel=se("z",X.traceCoordinate[5],I.whoverformat),(j||ee.indexOf("w")!==-1)&&ne.push("w: "+V.wLabel),V.normLabel=X.traceCoordinate[6].toPrecision(3),(j||ee.indexOf("norm")!==-1)&&ne.push("norm: "+V.normLabel),I.type==="streamtube"&&(V.divergenceLabel=X.traceCoordinate[7].toPrecision(3),(j||ee.indexOf("divergence")!==-1)&&ne.push("divergence: "+V.divergenceLabel)),X.textLabel&&ne.push(X.textLabel),Q=ne.join("<br>")):I.type==="isosurface"||I.type==="volume"?(V.valueLabel=n.hoverLabelText(P._mockAxis,P._mockAxis.d2l(X.traceCoordinate[3]),I.valuehoverformat),ne.push("value: "+V.valueLabel),X.textLabel&&ne.push(X.textLabel),Q=ne.join("<br>")):Q=X.textLabel;var ae={x:X.traceCoordinate[0],y:X.traceCoordinate[1],z:X.traceCoordinate[2],data:oe._input,fullData:oe,curveNumber:oe.index,pointNumber:U};c.appendArrayPointValue(ae,oe,U),I._module.eventData&&(ae=oe._module.eventData(ae,X,oe,{},U));var ie={points:[ae]};if(P.fullSceneLayout.hovermode){var ue=[];c.loneHover({trace:oe,x:(.5+.5*le[0]/le[3])*G,y:(.5-.5*le[1]/le[3])*W,xLabel:V.xLabel,yLabel:V.yLabel,zLabel:V.zLabel,text:Q,name:J.name,color:c.castHoverOption(oe,U,"bgcolor")||J.color,borderColor:c.castHoverOption(oe,U,"bordercolor"),fontFamily:c.castHoverOption(oe,U,"font.family"),fontSize:c.castHoverOption(oe,U,"font.size"),fontColor:c.castHoverOption(oe,U,"font.color"),nameLength:c.castHoverOption(oe,U,"namelength"),textAlign:c.castHoverOption(oe,U,"align"),hovertemplate:a.castOption(oe,U,"hovertemplate"),hovertemplateLabels:a.extendFlat({},ae,V),eventData:[ae]},{container:R,gd:z,inOut_bbox:ue}),ae.bbox=ue[0]}X.buttons&&X.distance<5?z.emit("plotly_click",ie):z.emit("plotly_hover",ie),this.oldEventData=ie}else c.loneUnhover(R),this.oldEventData&&z.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;P.drawAnnotations(P)},m.recoverContext=function(){var P=this;P.glplot.dispose();var z=function(){if(P.glplot.gl.isContextLost()){requestAnimationFrame(z);return}if(!P.initializeGLPlot()){a.error("Catastrophic and unrecoverable WebGL error. Context lost.");return}P.plot.apply(P,P.plotArgs)};requestAnimationFrame(z)};var x=["xaxis","yaxis","zaxis"];function T(P,z,I){for(var R=P.fullSceneLayout,D=0;D<3;D++){var O=x[D],F=O.charAt(0),G=R[O],W=z[F],q=z[F+"calendar"],J=z["_"+F+"length"];if(!a.isArrayOrTypedArray(W))I[0][D]=Math.min(I[0][D],0),I[1][D]=Math.max(I[1][D],J-1);else for(var X,Z=0;Z<(J||W.length);Z++)if(a.isArrayOrTypedArray(W[Z]))for(var se=0;se<W[Z].length;++se)X=G.d2l(W[Z][se],0,q),!isNaN(X)&&isFinite(X)&&(I[0][D]=Math.min(I[0][D],X),I[1][D]=Math.max(I[1][D],X));else X=G.d2l(W[Z],0,q),!isNaN(X)&&isFinite(X)&&(I[0][D]=Math.min(I[0][D],X),I[1][D]=Math.max(I[1][D],X))}}function _(P,z){for(var I=P.fullSceneLayout,R=I.annotations||[],D=0;D<3;D++)for(var O=x[D],F=O.charAt(0),G=I[O],W=0;W<R.length;W++){var q=R[W];if(q.visible){var J=G.r2l(q[F]);!isNaN(J)&&isFinite(J)&&(z[0][D]=Math.min(z[0][D],J),z[1][D]=Math.max(z[1][D],J))}}}m.plot=function(P,z,I){var R=this;if(R.plotArgs=[P,z,I],R.glplot.contextLost)return;var D,O,F,G,W,q,J=z[R.id],X=I[R.id];R.fullLayout=z,R.fullSceneLayout=J,R.axesOptions.merge(z,J),R.spikeOptions.merge(J),R.setViewport(J),R.updateFx(J.dragmode,J.hovermode),R.camera.enableWheel=R.graphDiv._context._scrollZoom.gl3d,R.glplot.setClearColor(s(J.bgcolor)),R.setConvert(W),P?Array.isArray(P)||(P=[P]):P=[];var Z=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(F=0;F<P.length;++F)D=P[F],!(D.visible!==!0||D._length===0)&&T(this,D,Z);_(this,Z);var se=[1,1,1];for(G=0;G<3;++G)Z[1][G]===Z[0][G]?se[G]=1:se[G]=1/(Z[1][G]-Z[0][G]);for(R.dataScale=se,R.convertAnnotations(this),F=0;F<P.length;++F)D=P[F],!(D.visible!==!0||D._length===0)&&(O=R.traces[D.uid],O?O.data.type===D.type?O.update(D):(O.dispose(),O=D._module.plot(this,D),R.traces[D.uid]=O):(O=D._module.plot(this,D),R.traces[D.uid]=O),O.name=D.name);var le=Object.keys(R.traces);e:for(F=0;F<le.length;++F){for(G=0;G<P.length;++G)if(P[G].uid===le[F]&&P[G].visible===!0&&P[G]._length!==0)continue e;O=R.traces[le[F]],O.dispose(),delete R.traces[le[F]]}R.glplot.objects.sort(function(Ye,qe){return Ye._trace.data.index-qe._trace.data.index});var oe=[[0,0,0],[0,0,0]],U=[],V={};for(F=0;F<3;++F){if(W=J[x[F]],q=W.type,q in V?(V[q].acc*=se[F],V[q].count+=1):V[q]={acc:se[F],count:1},W.autorange){oe[0][F]=1/0,oe[1][F]=-1/0;var re=R.glplot.objects,ee=R.fullSceneLayout.annotations||[],j=W._name.charAt(0);for(G=0;G<re.length;G++){var Q=re[G],ne=Q.bounds,ae=Q._trace.data._pad||0;Q.constructor.name==="ErrorBars"&&W._lowerLogErrorBound?oe[0][F]=Math.min(oe[0][F],W._lowerLogErrorBound):oe[0][F]=Math.min(oe[0][F],ne[0][F]/se[F]-ae),oe[1][F]=Math.max(oe[1][F],ne[1][F]/se[F]+ae)}for(G=0;G<ee.length;G++){var ie=ee[G];if(ie.visible){var ue=W.r2l(ie[j]);oe[0][F]=Math.min(oe[0][F],ue),oe[1][F]=Math.max(oe[1][F],ue)}}if("rangemode"in W&&W.rangemode==="tozero"&&(oe[0][F]=Math.min(oe[0][F],0),oe[1][F]=Math.max(oe[1][F],0)),oe[0][F]>oe[1][F])oe[0][F]=-1,oe[1][F]=1;else{var xe=oe[1][F]-oe[0][F];oe[0][F]-=xe/32,oe[1][F]+=xe/32}if(W.autorange==="reversed"){var he=oe[0][F];oe[0][F]=oe[1][F],oe[1][F]=he}}else{var ge=W.range;oe[0][F]=W.r2l(ge[0]),oe[1][F]=W.r2l(ge[1])}oe[0][F]===oe[1][F]&&(oe[0][F]-=1,oe[1][F]+=1),U[F]=oe[1][F]-oe[0][F],R.glplot.setBounds(F,{min:oe[0][F]*se[F],max:oe[1][F]*se[F]})}var me,ke=J.aspectmode;if(ke==="cube")me=[1,1,1];else if(ke==="manual"){var Ae=J.aspectratio;me=[Ae.x,Ae.y,Ae.z]}else if(ke==="auto"||ke==="data"){var Ne=[1,1,1];for(F=0;F<3;++F){W=J[x[F]],q=W.type;var He=V[q];Ne[F]=Math.pow(He.acc,1/He.count)/se[F]}ke==="data"||Math.max.apply(null,Ne)/Math.min.apply(null,Ne)<=4?me=Ne:me=[1,1,1]}else throw new Error("scene.js aspectRatio was not one of the enumerated types");J.aspectratio.x=X.aspectratio.x=me[0],J.aspectratio.y=X.aspectratio.y=me[1],J.aspectratio.z=X.aspectratio.z=me[2],R.glplot.setAspectratio(J.aspectratio),R.viewInitial.aspectratio||(R.viewInitial.aspectratio={x:J.aspectratio.x,y:J.aspectratio.y,z:J.aspectratio.z}),R.viewInitial.aspectmode||(R.viewInitial.aspectmode=J.aspectmode);var Ge=J.domain||null,_e=z._size||null;if(Ge&&_e){var De=R.container.style;De.position="absolute",De.left=_e.l+Ge.x[0]*_e.w+"px",De.top=_e.t+(1-Ge.y[1])*_e.h+"px",De.width=_e.w*(Ge.x[1]-Ge.x[0])+"px",De.height=_e.h*(Ge.y[1]-Ge.y[0])+"px"}R.glplot.redraw()},m.destroy=function(){var P=this;!P.glplot||(P.camera.mouseListener.enabled=!1,P.container.removeEventListener("wheel",P.camera.wheelListener),P.camera=null,P.glplot.dispose(),P.container.parentNode.removeChild(P.container),P.glplot=null)};function f(P){return[[P.eye.x,P.eye.y,P.eye.z],[P.center.x,P.center.y,P.center.z],[P.up.x,P.up.y,P.up.z]]}function L(P){return{up:{x:P.up[0],y:P.up[1],z:P.up[2]},center:{x:P.center[0],y:P.center[1],z:P.center[2]},eye:{x:P.eye[0],y:P.eye[1],z:P.eye[2]},projection:{type:P._ortho===!0?"orthographic":"perspective"}}}m.getCamera=function(){var P=this;return P.camera.view.recalcMatrix(P.camera.view.lastT()),L(P.camera)},m.setViewport=function(P){var z=this,I=P.camera;z.camera.lookAt.apply(this,f(I)),z.glplot.setAspectratio(P.aspectratio);var R=I.projection.type==="orthographic",D=z.camera._ortho;R!==D&&(z.glplot.redraw(),z.glplot.clearRGBA(),z.glplot.dispose(),z.initializeGLPlot())},m.isCameraChanged=function(P){var z=this,I=z.getCamera(),R=a.nestedProperty(P,z.id+".camera"),D=R.get();function O(q,J,X,Z){var se=["up","center","eye"],le=["x","y","z"];return J[se[X]]&&q[se[X]][le[Z]]===J[se[X]][le[Z]]}var F=!1;if(D===void 0)F=!0;else{for(var G=0;G<3;G++)for(var W=0;W<3;W++)if(!O(I,D,G,W)){F=!0;break}(!D.projection||I.projection&&I.projection.type!==D.projection.type)&&(F=!0)}return F},m.isAspectChanged=function(P){var z=this,I=z.glplot.getAspectratio(),R=a.nestedProperty(P,z.id+".aspectratio"),D=R.get();return D===void 0||D.x!==I.x||D.y!==I.y||D.z!==I.z},m.saveLayout=function(P){var z=this,I=z.fullLayout,R,D,O,F,G,W,q=z.isCameraChanged(P),J=z.isAspectChanged(P),X=q||J;if(X){var Z={};if(q&&(R=z.getCamera(),D=a.nestedProperty(P,z.id+".camera"),O=D.get(),Z[z.id+".camera"]=O),J&&(F=z.glplot.getAspectratio(),G=a.nestedProperty(P,z.id+".aspectratio"),W=G.get(),Z[z.id+".aspectratio"]=W),o.call("_storeDirectGUIEdit",P,I._preGUI,Z),q){D.set(R);var se=a.nestedProperty(I,z.id+".camera");se.set(R)}if(J){G.set(F);var le=a.nestedProperty(I,z.id+".aspectratio");le.set(F),z.glplot.redraw()}}return X},m.updateFx=function(P,z){var I=this,R=I.camera;if(R)if(P==="orbit")R.mode="orbit",R.keyBindingMode="rotate";else if(P==="turntable"){R.up=[0,0,1],R.mode="turntable",R.keyBindingMode="rotate";var D=I.graphDiv,O=D._fullLayout,F=I.fullSceneLayout.camera,G=F.up.x,W=F.up.y,q=F.up.z;if(q/Math.sqrt(G*G+W*W+q*q)<.999){var J=I.id+".camera.up",X={x:0,y:0,z:1},Z={};Z[J]=X;var se=D.layout;o.call("_storeDirectGUIEdit",se,O._preGUI,Z),F.up=X,a.nestedProperty(se,J).set(X)}}else R.keyBindingMode=P;I.fullSceneLayout.hovermode=z};function S(P,z,I){for(var R=0,D=I-1;R<D;++R,--D)for(var O=0;O<z;++O)for(var F=0;F<4;++F){var G=4*(z*R+O)+F,W=4*(z*D+O)+F,q=P[G];P[G]=P[W],P[W]=q}}function k(P,z,I){for(var R=0;R<I;++R)for(var D=0;D<z;++D){var O=4*(z*R+D),F=P[O+3];if(F>0)for(var G=255/F,W=0;W<3;++W)P[O+W]=Math.min(G*P[O+W],255)}}m.toImage=function(P){var z=this;P||(P="png"),z.staticMode&&z.container.appendChild(y),z.glplot.redraw();var I=z.glplot.gl,R=I.drawingBufferWidth,D=I.drawingBufferHeight;I.bindFramebuffer(I.FRAMEBUFFER,null);var O=new Uint8Array(R*D*4);I.readPixels(0,0,R,D,I.RGBA,I.UNSIGNED_BYTE,O),S(O,R,D),k(O,R,D);var F=document.createElement("canvas");F.width=R,F.height=D;var G=F.getContext("2d"),W=G.createImageData(R,D);W.data.set(O),G.putImageData(W,0,0);var q;switch(P){case"jpeg":q=F.toDataURL("image/jpeg");break;case"webp":q=F.toDataURL("image/webp");break;default:q=F.toDataURL("image/png")}return z.staticMode&&z.container.removeChild(y),q},m.setConvert=function(){for(var P=this,z=0;z<3;z++){var I=P.fullSceneLayout[x[z]];n.setConvert(I,P.fullLayout),I.setScale=a.noop}},m.make4thDimension=function(){var P=this,z=P.graphDiv,I=z._fullLayout;P._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},n.setConvert(P._mockAxis,I)},B.exports=A},{"../../../stackgl_modules":1120,"../../components/fx":406,"../../lib":503,"../../lib/show_no_webgl_msg":525,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554,"../../registry":638,"./layout/convert":602,"./layout/spikes":605,"./layout/tick_marks":606,"./project":607,"has-passive-events":229,"webgl-context":331}],609:[function(t,B,H){B.exports=function(l,b,w,e){e=e||l.length;for(var o=new Array(e),a=0;a<e;a++)o[a]=[l[a],b[a],w[a]];return o}},{}],610:[function(t,B,H){var d=t("./font_attributes"),l=t("./animation_attributes"),b=t("../components/color/attributes"),w=t("../components/shapes/draw_newshape/attributes"),e=t("./pad_attributes"),o=t("../lib/extend").extendFlat,a=d({editType:"calc"});a.family.dflt='"Open Sans", verdana, arial, sans-serif',a.size.dflt=12,a.color.dflt=b.defaultLine,B.exports={font:a,title:{text:{valType:"string",editType:"layoutstyle"},font:d({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:o(e({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:b.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:b.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:b.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:w.newshape,activeshape:w.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:o({},l.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:d({editType:"layoutstyle"})}}},{"../components/color/attributes":365,"../components/shapes/draw_newshape/attributes":451,"../lib/extend":493,"./animation_attributes":548,"./font_attributes":585,"./pad_attributes":618}],611:[function(t,B,H){var d=t("../../lib/sort_object_keys"),l="1.10.1",b='\xA9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',w=['\xA9 <a target="_blank" href="https://carto.com/">Carto</a>',b].join(" "),e=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),o=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),a={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:b,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:w,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:w,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:e,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:e,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:o,tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},r=d(a);B.exports={requiredVersion:l,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:a,styleValuesNonMapbox:r,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@"+l+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",r.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},{"../../lib/sort_object_keys":526}],612:[function(t,B,H){var d=t("../../lib");B.exports=function(b,w){var e=b.split(" "),o=e[0],a=e[1],r=d.isArrayOrTypedArray(w)?d.mean(w):w,n=.5+r/100,c=1.5+r/100,s=["",""],i=[0,0];switch(o){case"top":s[0]="top",i[1]=-c;break;case"bottom":s[0]="bottom",i[1]=c;break}switch(a){case"left":s[1]="right",i[0]=-n;break;case"right":s[1]="left",i[0]=n;break}var v;return s[0]&&s[1]?v=s.join("-"):s[0]?v=s[0]:s[1]?v=s[1]:v="center",{anchor:v,offset:i}}},{"../../lib":503}],613:[function(t,B,H){var d=t("mapbox-gl/dist/mapbox-gl-unminified"),l=t("../../lib"),b=l.strTranslate,w=l.strScale,e=t("../../plots/get_data").getSubplotCalcData,o=t("../../constants/xmlns_namespaces"),a=t("@plotly/d3"),r=t("../../components/drawing"),n=t("../../lib/svg_text_utils"),c=t("./mapbox"),s="mapbox",i=H.constants=t("./constants");H.name=s,H.attr="subplot",H.idRoot=s,H.idRegex=H.attrRegex=l.counterRegex(s),H.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},H.layoutAttributes=t("./layout_attributes"),H.supplyLayoutDefaults=t("./layout_defaults"),H.plot=function(h){var y=h._fullLayout,p=h.calcdata,A=y._subplots[s];if(d.version!==i.requiredVersion)throw new Error(i.wrongVersionErrorMsg);var m=v(h,A);d.accessToken=m;for(var M=0;M<A.length;M++){var x=A[M],T=e(p,s,x),_=y[x],f=_._subplot;f||(f=new c(h,x),y[x]._subplot=f),f.viewInitial||(f.viewInitial={center:l.extendFlat({},_.center),zoom:_.zoom,bearing:_.bearing,pitch:_.pitch}),f.plot(T,y,h._promises)}},H.clean=function(g,h,y,p){for(var A=p._subplots[s]||[],m=0;m<A.length;m++){var M=A[m];!h[M]&&!!p[M]._subplot&&p[M]._subplot.destroy()}},H.toSVG=function(g){for(var h=g._fullLayout,y=h._subplots[s],p=h._size,A=0;A<y.length;A++){var m=h[y[A]],M=m.domain,x=m._subplot,T=x.toImage("png"),_=h._glimages.append("svg:image");_.attr({xmlns:o.svg,"xlink:href":T,x:p.l+p.w*M.x[0],y:p.t+p.h*(1-M.y[1]),width:p.w*(M.x[1]-M.x[0]),height:p.h*(M.y[1]-M.y[0]),preserveAspectRatio:"none"});var f=a.select(m._subplot.div),L=f.select(".mapboxgl-ctrl-logo").node().offsetParent===null;if(!L){var S=h._glimages.append("g");S.attr("transform",b(p.l+p.w*M.x[0]+10,p.t+p.h*(1-M.y[0])-31)),S.append("path").attr("d",i.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),S.append("path").attr("d",i.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),S.append("path").attr("d",i.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),S.append("polygon").attr("points",i.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var k=f.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),P=h._glimages.append("g"),z=P.append("text");z.text(k).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":k});var I=r.bBox(z.node()),R=p.w*(M.x[1]-M.x[0]);if(I.width>R/2){var D=k.split("|").join("<br>");z.text(D).attr("data-unformatted",D).call(n.convertToTspans,g),I=r.bBox(z.node())}z.attr("transform",b(-3,-I.height+8)),P.insert("rect",".static-attribution").attr({x:-I.width-6,y:-I.height-3,width:I.width+6,height:I.height+3,fill:"rgba(255, 255, 255, 0.75)"});var O=1;I.width+6>R&&(O=R/(I.width+6));var F=[p.l+p.w*M.x[1],p.t+p.h*(1-M.y[0])];P.attr("transform",b(F[0],F[1])+w(O))}};function v(g,h){var y=g._fullLayout,p=g._context;if(p.mapboxAccessToken==="")return"";for(var A=[],m=[],M=!1,x=!1,T=0;T<h.length;T++){var _=y[h[T]],f=_.accesstoken;u(_.style)&&(f?l.pushUnique(A,f):(u(_._input.style)&&(l.error("Uses Mapbox map style, but did not set an access token."),M=!0),x=!0)),f&&l.pushUnique(m,f)}if(x){var L=M?i.noAccessTokenErrorMsg:i.missingStyleErrorMsg;throw l.error(L),new Error(L)}return A.length?(A.length>1&&l.warn(i.multipleTokensErrorMsg),A[0]):(m.length&&l.log(["Listed mapbox access token(s)",m.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}function u(g){return typeof g=="string"&&(i.styleValuesMapbox.indexOf(g)!==-1||g.indexOf("mapbox://")===0)}H.updateFx=function(g){for(var h=g._fullLayout,y=h._subplots[s],p=0;p<y.length;p++){var A=h[y[p]]._subplot;A.updateFx(h)}}},{"../../components/drawing":388,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/get_data":593,"./constants":611,"./layout_attributes":615,"./layout_defaults":616,"./mapbox":617,"@plotly/d3":58,"mapbox-gl/dist/mapbox-gl-unminified":239}],614:[function(t,B,H){var d=t("../../lib"),l=t("../../lib/svg_text_utils").sanitizeHTML,b=t("./convert_text_opts"),w=t("./constants");function e(c,s){this.subplot=c,this.uid=c.uid+"-"+s,this.index=s,this.idSource="source-"+this.uid,this.idLayer=w.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var o=e.prototype;o.update=function(s){this.visible?this.needsNewImage(s)?this.updateImage(s):this.needsNewSource(s)?(this.removeLayer(),this.updateSource(s),this.updateLayer(s)):this.needsNewLayer(s)?this.updateLayer(s):this.updateStyle(s):(this.updateSource(s),this.updateLayer(s)),this.visible=a(s)},o.needsNewImage=function(c){var s=this.subplot.map;return s.getSource(this.idSource)&&this.sourceType==="image"&&c.sourcetype==="image"&&(this.source!==c.source||JSON.stringify(this.coordinates)!==JSON.stringify(c.coordinates))},o.needsNewSource=function(c){return this.sourceType!==c.sourcetype||JSON.stringify(this.source)!==JSON.stringify(c.source)||this.layerType!==c.type},o.needsNewLayer=function(c){return this.layerType!==c.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},o.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},o.updateImage=function(c){var s=this.subplot.map;s.getSource(this.idSource).updateImage({url:c.source,coordinates:c.coordinates});var i=this.findFollowingMapboxLayerId(this.lookupBelow());i!==null&&this.subplot.map.moveLayer(this.idLayer,i)},o.updateSource=function(c){var s=this.subplot.map;if(s.getSource(this.idSource)&&s.removeSource(this.idSource),this.sourceType=c.sourcetype,this.source=c.source,!!a(c)){var i=n(c);s.addSource(this.idSource,i)}},o.findFollowingMapboxLayerId=function(c){if(c==="traces")for(var s=this.subplot.getMapLayers(),i=0;i<s.length;i++){var v=s[i].id;if(typeof v=="string"&&v.indexOf(w.traceLayerPrefix)===0){c=v;break}}return c},o.updateLayer=function(c){var s=this.subplot,i=r(c),v=this.lookupBelow(),u=this.findFollowingMapboxLayerId(v);this.removeLayer(),a(c)&&s.addLayer({id:this.idLayer,source:this.idSource,"source-layer":c.sourcelayer||"",type:c.type,minzoom:c.minzoom,maxzoom:c.maxzoom,layout:i.layout,paint:i.paint},u),this.layerType=c.type,this.below=v},o.updateStyle=function(c){if(a(c)){var s=r(c);this.subplot.setOptions(this.idLayer,"setLayoutProperty",s.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",s.paint)}},o.removeLayer=function(){var c=this.subplot.map;c.getLayer(this.idLayer)&&c.removeLayer(this.idLayer)},o.dispose=function(){var c=this.subplot.map;c.getLayer(this.idLayer)&&c.removeLayer(this.idLayer),c.getSource(this.idSource)&&c.removeSource(this.idSource)};function a(c){if(!c.visible)return!1;var s=c.source;if(Array.isArray(s)&&s.length>0){for(var i=0;i<s.length;i++)if(typeof s[i]!="string"||s[i].length===0)return!1;return!0}return d.isPlainObject(s)||typeof s=="string"&&s.length>0}function r(c){var s={},i={};switch(c.type){case"circle":d.extendFlat(i,{"circle-radius":c.circle.radius,"circle-color":c.color,"circle-opacity":c.opacity});break;case"line":d.extendFlat(i,{"line-width":c.line.width,"line-color":c.color,"line-opacity":c.opacity,"line-dasharray":c.line.dash});break;case"fill":d.extendFlat(i,{"fill-color":c.color,"fill-outline-color":c.fill.outlinecolor,"fill-opacity":c.opacity});break;case"symbol":var v=c.symbol,u=b(v.textposition,v.iconsize);d.extendFlat(s,{"icon-image":v.icon+"-15","icon-size":v.iconsize/10,"text-field":v.text,"text-size":v.textfont.size,"text-anchor":u.anchor,"text-offset":u.offset,"symbol-placement":v.placement}),d.extendFlat(i,{"icon-color":c.color,"text-color":v.textfont.color,"text-opacity":c.opacity});break;case"raster":d.extendFlat(i,{"raster-fade-duration":0,"raster-opacity":c.opacity});break}return{layout:s,paint:i}}function n(c){var s=c.sourcetype,i=c.source,v={type:s},u;return s==="geojson"?u="data":s==="vector"?u=typeof i=="string"?"url":"tiles":s==="raster"?(u="tiles",v.tileSize=256):s==="image"&&(u="url",v.coordinates=c.coordinates),v[u]=i,c.sourceattribution&&(v.attribution=l(c.sourceattribution)),v}B.exports=function(s,i,v){var u=new e(s,i);return u.update(v),u}},{"../../lib":503,"../../lib/svg_text_utils":529,"./constants":611,"./convert_text_opts":612}],615:[function(t,B,H){var d=t("../../lib"),l=t("../../components/color").defaultLine,b=t("../domain").attributes,w=t("../font_attributes"),e=t("../../traces/scatter/attributes").textposition,o=t("../../plot_api/edit_types").overrideAll,a=t("../../plot_api/plot_template").templatedArray,r=t("./constants"),n=w({});n.family.dflt="Open Sans Regular, Arial Unicode MS Regular";var c=B.exports=o({_arrayAttrRegexps:[d.counterRegex("mapbox",".layers",!0)],domain:b({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:r.styleValuesMapbox.concat(r.styleValuesNonMapbox),dflt:r.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:a("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:l},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:l}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:n,textposition:d.extendFlat({},e,{arrayOk:!1})}})},"plot","from-root");c.uirevision={valType:"any",editType:"none"}},{"../../components/color":366,"../../lib":503,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../traces/scatter/attributes":926,"../domain":584,"../font_attributes":585,"./constants":611}],616:[function(t,B,H){var d=t("../../lib"),l=t("../subplot_defaults"),b=t("../array_container_defaults"),w=t("./layout_attributes");B.exports=function(r,n,c){l(r,n,c,{type:"mapbox",attributes:w,handleDefaults:e,partition:"y",accessToken:n._mapboxAccessToken})};function e(a,r,n,c){n("accesstoken",c.accessToken),n("style"),n("center.lon"),n("center.lat"),n("zoom"),n("bearing"),n("pitch"),b(a,r,{name:"layers",handleItemDefaults:o}),r._input=a}function o(a,r){function n(g,h){return d.coerce(a,r,w.layers,g,h)}var c=n("visible");if(c){var s=n("sourcetype"),i=s==="raster"||s==="image";n("source"),n("sourceattribution"),s==="vector"&&n("sourcelayer"),s==="image"&&n("coordinates");var v;i&&(v="raster");var u=n("type",v);i&&u!=="raster"&&(u=r.type="raster",d.log("Source types *raster* and *image* must drawn *raster* layer type.")),n("below"),n("color"),n("opacity"),n("minzoom"),n("maxzoom"),u==="circle"&&n("circle.radius"),u==="line"&&(n("line.width"),n("line.dash")),u==="fill"&&n("fill.outlinecolor"),u==="symbol"&&(n("symbol.icon"),n("symbol.iconsize"),n("symbol.text"),d.coerceFont(n,"symbol.textfont"),n("symbol.textposition"),n("symbol.placement"))}}},{"../../lib":503,"../array_container_defaults":549,"../subplot_defaults":632,"./layout_attributes":615}],617:[function(t,B,H){var d=t("mapbox-gl/dist/mapbox-gl-unminified"),l=t("../../lib"),b=t("../../lib/geo_location_utils"),w=t("../../registry"),e=t("../cartesian/axes"),o=t("../../components/dragelement"),a=t("../../components/fx"),r=t("../../components/dragelement/helpers"),n=r.rectMode,c=r.drawMode,s=r.selectMode,i=t("../cartesian/select").prepSelect,v=t("../cartesian/select").clearSelect,u=t("../cartesian/select").clearSelectionsCache,g=t("../cartesian/select").selectOnClick,h=t("./constants"),y=t("./layers");function p(_,f){this.id=f,this.gd=_;var L=_._fullLayout,S=_._context;this.container=L._glcontainer.node(),this.isStatic=S.staticPlot,this.uid=L._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(L),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var A=p.prototype;A.plot=function(_,f,L){var S=this,k=f[S.id];S.map&&k.accesstoken!==S.accessToken&&(S.map.remove(),S.map=null,S.styleObj=null,S.traceHash={},S.layerList=[]);var P;S.map?P=new Promise(function(z,I){S.updateMap(_,f,z,I)}):P=new Promise(function(z,I){S.createMap(_,f,z,I)}),L.push(P)},A.createMap=function(_,f,L,S){var k=this,P=f[k.id],z=k.styleObj=M(P.style);k.accessToken=P.accesstoken;var I=k.map=new d.Map({container:k.div,style:z.style,center:T(P.center),zoom:P.zoom,bearing:P.bearing,pitch:P.pitch,interactive:!k.isStatic,preserveDrawingBuffer:k.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new d.AttributionControl({compact:!0}));I._canvas.style.left="0px",I._canvas.style.top="0px",k.rejectOnError(S),k.isStatic||k.initFx(_,f);var R=[];R.push(new Promise(function(D){I.once("load",D)})),R=R.concat(b.fetchTraceGeoData(_)),Promise.all(R).then(function(){k.fillBelowLookup(_,f),k.updateData(_),k.updateLayout(f),k.resolveOnRender(L)}).catch(S)},A.updateMap=function(_,f,L,S){var k=this,P=k.map,z=f[this.id];k.rejectOnError(S);var I=[],R=M(z.style);JSON.stringify(k.styleObj)!==JSON.stringify(R)&&(k.styleObj=R,P.setStyle(R.style),k.traceHash={},I.push(new Promise(function(D){P.once("styledata",D)}))),I=I.concat(b.fetchTraceGeoData(_)),Promise.all(I).then(function(){k.fillBelowLookup(_,f),k.updateData(_),k.updateLayout(f),k.resolveOnRender(L)}).catch(S)},A.fillBelowLookup=function(_,f){var L=f[this.id],S=L.layers,k,P,z=this.belowLookup={},I=!1;for(k=0;k<_.length;k++){var R=_[k][0].trace,D=R._module;typeof R.below=="string"?P=R.below:D.getBelow&&(P=D.getBelow(R,this)),P===""&&(I=!0),z["trace-"+R.uid]=P||""}for(k=0;k<S.length;k++){var O=S[k];typeof O.below=="string"?P=O.below:I?P="traces":P="",z["layout-"+k]=P}var F={},G,W;for(G in z)P=z[G],F[P]?F[P].push(G):F[P]=[G];for(P in F){var q=F[P];if(q.length>1)for(k=0;k<q.length;k++)G=q[k],G.indexOf("trace-")===0?(W=G.split("trace-")[1],this.traceHash[W]&&(this.traceHash[W].below=null)):G.indexOf("layout-")===0&&(W=G.split("layout-")[1],this.layerList[W]&&(this.layerList[W].below=null))}};var m={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};A.updateData=function(_){var f=this.traceHash,L,S,k,P,z=_.slice().sort(function(F,G){return m[F[0].trace.type]-m[G[0].trace.type]});for(k=0;k<z.length;k++){var I=z[k];S=I[0].trace,L=f[S.uid];var R=!1;L&&(L.type===S.type?(L.update(I),R=!0):L.dispose()),!R&&S._module&&(f[S.uid]=S._module.plot(this,I))}var D=Object.keys(f);e:for(k=0;k<D.length;k++){var O=D[k];for(P=0;P<_.length;P++)if(S=_[P][0].trace,O===S.uid)continue e;L=f[O],L.dispose(),delete f[O]}},A.updateLayout=function(_){var f=this.map,L=_[this.id];!this.dragging&&!this.wheeling&&(f.setCenter(T(L.center)),f.setZoom(L.zoom),f.setBearing(L.bearing),f.setPitch(L.pitch)),this.updateLayers(_),this.updateFramework(_),this.updateFx(_),this.map.resize(),this.gd._context._scrollZoom.mapbox?f.scrollZoom.enable():f.scrollZoom.disable()},A.resolveOnRender=function(_){var f=this.map;f.on("render",function L(){f.loaded()&&(f.off("render",L),setTimeout(_,10))})},A.rejectOnError=function(_){var f=this.map;function L(){_(new Error(h.mapOnErrorMsg))}f.once("error",L),f.once("style.error",L),f.once("source.error",L),f.once("tile.error",L),f.once("layer.error",L)},A.createFramework=function(_){var f=this,L=f.div=document.createElement("div");L.id=f.uid,L.style.position="absolute",f.container.appendChild(L),f.xaxis={_id:"x",c2p:function(S){return f.project(S).x}},f.yaxis={_id:"y",c2p:function(S){return f.project(S).y}},f.updateFramework(_),f.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},e.setConvert(f.mockAxis,_)},A.initFx=function(_,f){var L=this,S=L.gd,k=L.map;k.on("moveend",function(I){if(!!L.map){var R=S._fullLayout;if(I.originalEvent||L.wheeling){var D=R[L.id];w.call("_storeDirectGUIEdit",S.layout,R._preGUI,L.getViewEdits(D));var O=L.getView();D._input.center=D.center=O.center,D._input.zoom=D.zoom=O.zoom,D._input.bearing=D.bearing=O.bearing,D._input.pitch=D.pitch=O.pitch,S.emit("plotly_relayout",L.getViewEditsWithDerived(O))}I.originalEvent&&I.originalEvent.type==="mouseup"?L.dragging=!1:L.wheeling&&(L.wheeling=!1),R._rehover&&R._rehover()}}),k.on("wheel",function(){L.wheeling=!0}),k.on("mousemove",function(I){var R=L.div.getBoundingClientRect(),D=[I.originalEvent.offsetX,I.originalEvent.offsetY];I.target.getBoundingClientRect=function(){return R},L.xaxis.p2c=function(){return k.unproject(D).lng},L.yaxis.p2c=function(){return k.unproject(D).lat},S._fullLayout._rehover=function(){S._fullLayout._hoversubplot===L.id&&S._fullLayout[L.id]&&a.hover(S,I,L.id)},a.hover(S,I,L.id),S._fullLayout._hoversubplot=L.id});function P(){a.loneUnhover(f._hoverlayer)}k.on("dragstart",function(){L.dragging=!0,P()}),k.on("zoomstart",P),k.on("mouseout",function(){S._fullLayout._hoversubplot=null});function z(){var I=L.getView();S.emit("plotly_relayouting",L.getViewEditsWithDerived(I))}k.on("drag",z),k.on("zoom",z),k.on("dblclick",function(){var I=S._fullLayout[L.id];w.call("_storeDirectGUIEdit",S.layout,S._fullLayout._preGUI,L.getViewEdits(I));var R=L.viewInitial;k.setCenter(T(R.center)),k.setZoom(R.zoom),k.setBearing(R.bearing),k.setPitch(R.pitch);var D=L.getView();I._input.center=I.center=D.center,I._input.zoom=I.zoom=D.zoom,I._input.bearing=I.bearing=D.bearing,I._input.pitch=I.pitch=D.pitch,S.emit("plotly_doubleclick",null),S.emit("plotly_relayout",L.getViewEditsWithDerived(D))}),L.clearSelect=function(){u(L.dragOptions),v(L.dragOptions.gd)},L.onClickInPanFn=function(I){return function(R){var D=S._fullLayout.clickmode;D.indexOf("select")>-1&&g(R.originalEvent,S,[L.xaxis],[L.yaxis],L.id,I),D.indexOf("event")>-1&&a.click(S,R.originalEvent)}}},A.updateFx=function(_){var f=this,L=f.map,S=f.gd;if(f.isStatic)return;function k(R){var D=f.map.unproject(R);return[D.lng,D.lat]}var P=_.dragmode,z;n(P)?z=function(R,D){var O=R.range={};O[f.id]=[k([D.xmin,D.ymin]),k([D.xmax,D.ymax])]}:z=function(R,D,O){var F=R.lassoPoints={};F[f.id]=O.filtered.map(k)};var I=f.dragOptions;f.dragOptions=l.extendDeep(I||{},{dragmode:_.dragmode,element:f.div,gd:S,plotinfo:{id:f.id,domain:_[f.id].domain,xaxis:f.xaxis,yaxis:f.yaxis,fillRangeItems:z},xaxes:[f.xaxis],yaxes:[f.yaxis],subplot:f.id}),L.off("click",f.onClickInPanHandler),s(P)||c(P)?(L.dragPan.disable(),L.on("zoomstart",f.clearSelect),f.dragOptions.prepFn=function(R,D,O){i(R,D,O,f.dragOptions,P)},o.init(f.dragOptions)):(L.dragPan.enable(),L.off("zoomstart",f.clearSelect),f.div.onmousedown=null,f.onClickInPanHandler=f.onClickInPanFn(f.dragOptions),L.on("click",f.onClickInPanHandler))},A.updateFramework=function(_){var f=_[this.id].domain,L=_._size,S=this.div.style;S.width=L.w*(f.x[1]-f.x[0])+"px",S.height=L.h*(f.y[1]-f.y[0])+"px",S.left=L.l+f.x[0]*L.w+"px",S.top=L.t+(1-f.y[1])*L.h+"px",this.xaxis._offset=L.l+f.x[0]*L.w,this.xaxis._length=L.w*(f.x[1]-f.x[0]),this.yaxis._offset=L.t+(1-f.y[1])*L.h,this.yaxis._length=L.h*(f.y[1]-f.y[0])},A.updateLayers=function(_){var f=_[this.id],L=f.layers,S=this.layerList,k;if(L.length!==S.length){for(k=0;k<S.length;k++)S[k].dispose();for(S=this.layerList=[],k=0;k<L.length;k++)S.push(y(this,k,L[k]))}else for(k=0;k<L.length;k++)S[k].update(L[k])},A.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},A.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},A.setOptions=function(_,f,L){for(var S in L)this.map[f](_,S,L[S])},A.getMapLayers=function(){return this.map.getStyle().layers},A.addLayer=function(_,f){var L=this.map;if(typeof f=="string"){if(f===""){L.addLayer(_,f);return}for(var S=this.getMapLayers(),k=0;k<S.length;k++)if(f===S[k].id){L.addLayer(_,f);return}l.warn(["Trying to add layer with *below* value",f,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}L.addLayer(_)},A.project=function(_){return this.map.project(new d.LngLat(_[0],_[1]))},A.getView=function(){var _=this.map,f=_.getCenter(),L=f.lng,S=f.lat,k={lon:L,lat:S},P=_.getCanvas(),z=parseInt(P.style.width),I=parseInt(P.style.height);return{center:k,zoom:_.getZoom(),bearing:_.getBearing(),pitch:_.getPitch(),_derived:{coordinates:[_.unproject([0,0]).toArray(),_.unproject([z,0]).toArray(),_.unproject([z,I]).toArray(),_.unproject([0,I]).toArray()]}}},A.getViewEdits=function(_){for(var f=this.id,L=["center","zoom","bearing","pitch"],S={},k=0;k<L.length;k++){var P=L[k];S[f+"."+P]=_[P]}return S},A.getViewEditsWithDerived=function(_){var f=this.id,L=this.getViewEdits(_);return L[f+"._derived"]=_._derived,L};function M(_){var f={};return l.isPlainObject(_)?(f.id=_.id,f.style=_):typeof _=="string"?(f.id=_,h.styleValuesMapbox.indexOf(_)!==-1?f.style=x(_):h.stylesNonMapbox[_]?f.style=h.stylesNonMapbox[_]:f.style=_):(f.id=h.styleValueDflt,f.style=x(h.styleValueDflt)),f.transition={duration:0,delay:0},f}function x(_){return h.styleUrlPrefix+_+"-"+h.styleUrlSuffix}function T(_){return[_.lon,_.lat]}B.exports=p},{"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/fx":406,"../../lib":503,"../../lib/geo_location_utils":496,"../../registry":638,"../cartesian/axes":554,"../cartesian/select":575,"./constants":611,"./layers":614,"mapbox-gl/dist/mapbox-gl-unminified":239}],618:[function(t,B,H){B.exports=function(d){var l=d.editType;return{t:{valType:"number",dflt:0,editType:l},r:{valType:"number",dflt:0,editType:l},b:{valType:"number",dflt:0,editType:l},l:{valType:"number",dflt:0,editType:l},editType:l}}},{}],619:[function(t,B,H){var d=t("@plotly/d3"),l=t("d3-time-format").timeFormatLocale,b=t("d3-format").formatLocale,w=t("fast-isnumeric"),e=t("../registry"),o=t("../plot_api/plot_schema"),a=t("../plot_api/plot_template"),r=t("../lib"),n=t("../components/color"),c=t("../constants/numerical").BADNUM,s=t("./cartesian/axis_ids"),i=t("./cartesian/handle_outline").clearSelect,v=t("./animation_attributes"),u=t("./frame_attributes"),g=t("../plots/get_data").getModuleCalcData,h=r.relinkPrivateKeys,y=r._,p=B.exports={};r.extendFlat(p,e),p.attributes=t("./attributes"),p.attributes.type.values=p.allTypes,p.fontAttrs=t("./font_attributes"),p.layoutAttributes=t("./layout_attributes"),p.fontWeight="normal";var A=p.transformsRegistry,m=t("./command");p.executeAPICommand=m.executeAPICommand,p.computeAPICommandBindings=m.computeAPICommandBindings,p.manageCommandObserver=m.manageCommandObserver,p.hasSimpleAPICommandBindings=m.hasSimpleAPICommandBindings,p.redrawText=function(U){return U=r.getGraphDiv(U),new Promise(function(V){setTimeout(function(){!U._fullLayout||(e.getComponentMethod("annotations","draw")(U),e.getComponentMethod("legend","draw")(U),e.getComponentMethod("colorbar","draw")(U),V(p.previousPromises(U)))},300)})},p.resize=function(U){U=r.getGraphDiv(U);var V,re=new Promise(function(ee,j){(!U||r.isHidden(U))&&j(new Error("Resize must be passed a displayed plot div element.")),U._redrawTimer&&clearTimeout(U._redrawTimer),U._resolveResize&&(V=U._resolveResize),U._resolveResize=ee,U._redrawTimer=setTimeout(function(){if(!U.layout||U.layout.width&&U.layout.height||r.isHidden(U)){ee(U);return}delete U.layout.width,delete U.layout.height;var Q=U.changed;U.autoplay=!0,e.call("relayout",U,{autosize:!0}).then(function(){U.changed=Q,U._resolveResize===ee&&(delete U._resolveResize,ee(U))})},100)});return V&&V(re),re},p.previousPromises=function(U){if((U._promises||[]).length)return Promise.all(U._promises).then(function(){U._promises=[]})},p.addLinks=function(U){if(!(!U._context.showLink&&!U._context.showSources)){var V=U._fullLayout,re=r.ensureSingle(V._paper,"text","js-plot-link-container",function(ie){ie.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:n.defaultLine,"pointer-events":"all"}).each(function(){var ue=d.select(this);ue.append("tspan").classed("js-link-to-tool",!0),ue.append("tspan").classed("js-link-spacer",!0),ue.append("tspan").classed("js-sourcelinks",!0)})}),ee=re.node(),j={y:V._paper.attr("height")-9};document.body.contains(ee)&&ee.getComputedTextLength()>=V.width-20?(j["text-anchor"]="start",j.x=5):(j["text-anchor"]="end",j.x=V._paper.attr("width")-7),re.attr(j);var Q=re.select(".js-link-to-tool"),ne=re.select(".js-link-spacer"),ae=re.select(".js-sourcelinks");U._context.showSources&&U._context.showSources(U),U._context.showLink&&M(U,Q),ne.text(Q.text()&&ae.text()?" - ":"")}};function M(U,V){V.text("");var re=V.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(U._context.linkText+" "+String.fromCharCode(187));if(U._context.sendData)re.on("click",function(){p.sendDataToCloud(U)});else{var ee=window.location.pathname.split("/"),j=window.location.search;re.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+ee[2].split(".")[0]+"/"+ee[1]+j})}}p.sendDataToCloud=function(U){var V=(window.PLOTLYENV||{}).BASE_URL||U._context.plotlyServerURL;if(!!V){U.emit("plotly_beforeexport");var re=d.select(U).append("div").attr("id","hiddenform").style("display","none"),ee=re.append("form").attr({action:V+"/external",method:"post",target:"_blank"}),j=ee.append("input").attr({type:"text",name:"data"});return j.node().value=p.graphJson(U,!1,"keepdata"),ee.node().submit(),re.remove(),U.emit("plotly_afterexport"),!1}};var x=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],T=["year","month","dayMonth","dayMonthYear"];p.supplyDefaults=function(U,V){var re=V&&V.skipUpdateCalc,ee=U._fullLayout||{};if(ee._skipDefaults){delete ee._skipDefaults;return}var j=U._fullLayout={},Q=U.layout||{},ne=U._fullData||[],ae=U._fullData=[],ie=U.data||[],ue=U.calcdata||[],xe=U._context||{},he;U._transitionData||p.createTransitionData(U),j._dfltTitle={plot:y(U,"Click to enter Plot title"),x:y(U,"Click to enter X axis title"),y:y(U,"Click to enter Y axis title"),colorbar:y(U,"Click to enter Colorscale title"),annotation:y(U,"new text")},j._traceWord=y(U,"trace");var ge=L(U,x);if(j._mapboxAccessToken=xe.mapboxAccessToken,ee._initialAutoSizeIsDone){var me=ee.width,ke=ee.height;p.supplyLayoutGlobalDefaults(Q,j,ge),Q.width||(j.width=me),Q.height||(j.height=ke),p.sanitizeMargins(j)}else{p.supplyLayoutGlobalDefaults(Q,j,ge);var Ae=!Q.width||!Q.height,Ne=j.autosize,He=xe.autosizable,Ge=Ae&&(Ne||He);Ge?p.plotAutoSize(U,Q,j):Ae&&p.sanitizeMargins(j),!Ne&&Ae&&(Q.width=j.width,Q.height=j.height)}j._d3locale=S(ge,j.separators),j._extraFormat=L(U,T),j._initialAutoSizeIsDone=!0,j._dataLength=ie.length,j._modules=[],j._visibleModules=[],j._basePlotModules=[];var _e=j._subplots=f(),De=j._splomAxes={x:{},y:{}},Ye=j._splomSubplots={};j._splomGridDflt={},j._scatterStackOpts={},j._firstScatter={},j._alignmentOpts={},j._colorAxes={},j._requestRangeslider={},j._traceUids=_(ne,ie),j._globalTransforms=(U._context||{}).globalTransforms,p.supplyDataDefaults(ie,ae,Q,j);var qe=Object.keys(De.x),Ue=Object.keys(De.y);if(qe.length>1&&Ue.length>1){for(e.getComponentMethod("grid","sizeDefaults")(Q,j),he=0;he<qe.length;he++)r.pushUnique(_e.xaxis,qe[he]);for(he=0;he<Ue.length;he++)r.pushUnique(_e.yaxis,Ue[he]);for(var Ie in Ye)r.pushUnique(_e.cartesian,Ie)}if(j._has=p._hasPlotType.bind(j),ne.length===ae.length)for(he=0;he<ae.length;he++)h(ae[he],ne[he]);p.supplyLayoutModuleDefaults(Q,j,ae,U._transitionData);var Ve=j._visibleModules,dt=[];for(he=0;he<Ve.length;he++){var Dt=Ve[he].crossTraceDefaults;Dt&&r.pushUnique(dt,Dt)}for(he=0;he<dt.length;he++)dt[he](ae,j);j._hasOnlyLargeSploms=j._basePlotModules.length===1&&j._basePlotModules[0].name==="splom"&&qe.length>15&&Ue.length>15&&j.shapes.length===0&&j.images.length===0,p.linkSubplots(ae,j,ne,ee),p.cleanPlot(ae,j,ne,ee);var Yt=!!(ee._has&&ee._has("gl2d")),kt=!!(j._has&&j._has("gl2d")),Ft=!!(ee._has&&ee._has("cartesian")),Nt=!!(j._has&&j._has("cartesian")),Lt=Ft||Yt,St=Nt||kt;Lt&&!St?ee._bgLayer.remove():St&&!Lt&&(j._shouldCreateBgLayer=!0),ee._zoomlayer&&!U._dragging&&i({_fullLayout:ee}),k(ae,j),h(j,ee),e.getComponentMethod("colorscale","crossTraceDefaults")(ae,j),j._preGUI||(j._preGUI={}),j._tracePreGUI||(j._tracePreGUI={});var it=j._tracePreGUI,ht={},Qe;for(Qe in it)ht[Qe]="old";for(he=0;he<ae.length;he++)Qe=ae[he]._fullInput.uid,ht[Qe]||(it[Qe]={}),ht[Qe]="new";for(Qe in ht)ht[Qe]==="old"&&delete it[Qe];D(j),e.getComponentMethod("rangeslider","makeData")(j),!re&&ue.length===ae.length&&p.supplyDefaultsUpdateCalc(ue,ae)},p.supplyDefaultsUpdateCalc=function(U,V){for(var re=0;re<V.length;re++){var ee=V[re],j=(U[re]||[])[0];if(j&&j.trace){var Q=j.trace;if(Q._hasCalcTransform){var ne=Q._arrayAttrs,ae,ie,ue;for(ae=0;ae<ne.length;ae++)ie=ne[ae],ue=r.nestedProperty(Q,ie).get().slice(),r.nestedProperty(ee,ie).set(ue)}j.trace=ee}}};function _(U,V){var re=V.length,ee=[],j,Q;for(j=0;j<U.length;j++){var ne=U[j]._fullInput;ne!==Q&&ee.push(ne),Q=ne}var ae=ee.length,ie=new Array(re),ue={};function xe(me,ke){ie[ke]=me,ue[me]=1}function he(me,ke){if(me&&typeof me=="string"&&!ue[me])return xe(me,ke),!0}for(j=0;j<re;j++){var ge=V[j].uid;typeof ge=="number"&&(ge=String(ge)),!he(ge,j)&&(j<ae&&he(ee[j].uid,j)||xe(r.randstr(ue),j))}return ie}function f(){var U=e.collectableSubplotTypes,V={},re,ee;if(!U){U=[];var j=e.subplotsRegistry;for(var Q in j){var ne=j[Q],ae=ne.attr;if(ae&&(U.push(Q),Array.isArray(ae)))for(ee=0;ee<ae.length;ee++)r.pushUnique(U,ae[ee])}}for(re=0;re<U.length;re++)V[U[re]]=[];return V}function L(U,V){var re=U._context.locale;re||(re="en-US");var ee=!1,j={};function Q(he){for(var ge=!0,me=0;me<V.length;me++){var ke=V[me];j[ke]||(he[ke]?j[ke]=he[ke]:ge=!1)}ge&&(ee=!0)}for(var ne=0;ne<2;ne++){for(var ae=U._context.locales,ie=0;ie<2;ie++){var ue=(ae[re]||{}).format;if(ue&&(Q(ue),ee))break;ae=e.localeRegistry}var xe=re.split("-")[0];if(ee||xe===re)break;re=xe}return ee||Q(e.localeRegistry.en.format),j}function S(U,V){return U.decimal=V.charAt(0),U.thousands=V.charAt(1),{numberFormat:function(re){try{re=b(U).format(r.adjustFormat(re))}catch{return r.warnBadFormat(re),r.noFormat}return re},timeFormat:l(U).utcFormat}}function k(U,V){var re,ee=[];V.meta&&(re=V._meta={meta:V.meta,layout:{meta:V.meta}});for(var j=0;j<U.length;j++){var Q=U[j];Q.meta?ee[Q.index]=Q._meta={meta:Q.meta}:V.meta&&(Q._meta={meta:V.meta}),V.meta&&(Q._meta.layout={meta:V.meta})}ee.length&&(re||(re=V._meta={}),re.data=ee)}p.createTransitionData=function(U){U._transitionData||(U._transitionData={}),U._transitionData._frames||(U._transitionData._frames=[]),U._transitionData._frameHash||(U._transitionData._frameHash={}),U._transitionData._counter||(U._transitionData._counter=0),U._transitionData._interruptCallbacks||(U._transitionData._interruptCallbacks=[])},p._hasPlotType=function(U){var V,re=this._basePlotModules||[];for(V=0;V<re.length;V++)if(re[V].name===U)return!0;var ee=this._modules||[];for(V=0;V<ee.length;V++){var j=ee[V].name;if(j===U)return!0;var Q=e.modules[j];if(Q&&Q.categories[U])return!0}return!1},p.cleanPlot=function(U,V,re,ee){var j,Q,ne=ee._basePlotModules||[];for(j=0;j<ne.length;j++){var ae=ne[j];ae.clean&&ae.clean(U,V,re,ee)}var ie=ee._has&&ee._has("gl"),ue=V._has&&V._has("gl");ie&&!ue&&ee._glcontainer!==void 0&&(ee._glcontainer.selectAll(".gl-canvas").remove(),ee._glcontainer.selectAll(".no-webgl").remove(),ee._glcanvas=null);var xe=!!ee._infolayer;e:for(j=0;j<re.length;j++){var he=re[j],ge=he.uid;for(Q=0;Q<U.length;Q++){var me=U[Q];if(ge===me.uid)continue e}xe&&ee._infolayer.select(".cb"+ge).remove()}},p.linkSubplots=function(U,V,re,ee){var j,Q,ne=ee._plots||{},ae=V._plots={},ie=V._subplots,ue={_fullData:U,_fullLayout:V},xe=ie.cartesian.concat(ie.gl2d||[]);for(j=0;j<xe.length;j++){var he=xe[j],ge=ne[he],me=s.getFromId(ue,he,"x"),ke=s.getFromId(ue,he,"y"),Ae;for(ge?Ae=ae[he]=ge:(Ae=ae[he]={},Ae.id=he),me._counterAxes.push(ke._id),ke._counterAxes.push(me._id),me._subplotsWith.push(he),ke._subplotsWith.push(he),Ae.xaxis=me,Ae.yaxis=ke,Ae._hasClipOnAxisFalse=!1,Q=0;Q<U.length;Q++){var Ne=U[Q];if(Ne.xaxis===Ae.xaxis._id&&Ne.yaxis===Ae.yaxis._id&&Ne.cliponaxis===!1){Ae._hasClipOnAxisFalse=!0;break}}}var He=s.list(ue,null,!0),Ge;for(j=0;j<He.length;j++){Ge=He[j];var _e=null;Ge.overlaying&&(_e=s.getFromId(ue,Ge.overlaying),_e&&_e.overlaying&&(Ge.overlaying=!1,_e=null)),Ge._mainAxis=_e||Ge,_e&&(Ge.domain=_e.domain.slice()),Ge._anchorAxis=Ge.anchor==="free"?null:s.getFromId(ue,Ge.anchor)}for(j=0;j<He.length;j++)if(Ge=He[j],Ge._counterAxes.sort(s.idSort),Ge._subplotsWith.sort(r.subplotSort),Ge._mainSubplot=P(Ge,V),Ge._counterAxes.length&&(Ge.spikemode&&Ge.spikemode.indexOf("across")!==-1||Ge.automargin&&Ge.mirror&&Ge.anchor!=="free"||e.getComponentMethod("rangeslider","isVisible")(Ge))){var De=1,Ye=0;for(Q=0;Q<Ge._counterAxes.length;Q++){var qe=s.getFromId(ue,Ge._counterAxes[Q]);De=Math.min(De,qe.domain[0]),Ye=Math.max(Ye,qe.domain[1])}De<Ye&&(Ge._counterDomainMin=De,Ge._counterDomainMax=Ye)}};function P(U,V){var re={_fullLayout:V},ee=U._id.charAt(0)==="x",j=U._mainAxis._anchorAxis,Q="",ne="",ae="";if(j&&(ae=j._mainAxis._id,Q=ee?U._id+ae:ae+U._id),!Q||!V._plots[Q]){Q="";for(var ie=U._counterAxes,ue=0;ue<ie.length;ue++){var xe=ie[ue],he=ee?U._id+xe:xe+U._id;ne||(ne=he);var ge=s.getFromId(re,xe);if(ae&&ge.overlaying===ae){Q=he;break}}}return Q||ne}p.clearExpandedTraceDefaultColors=function(U){var V,re,ee;function j(ne,ae,ie,ue){re[ue]=ae,re.length=ue+1,ne.valType==="color"&&ne.dflt===void 0&&V.push(re.join("."))}for(re=[],V=U._module._colorAttrs,V||(U._module._colorAttrs=V=[],o.crawl(U._module.attributes,j)),ee=0;ee<V.length;ee++){var Q=r.nestedProperty(U,"_input."+V[ee]);Q.get()||r.nestedProperty(U,V[ee]).set(null)}},p.supplyDataDefaults=function(U,V,re,ee){var j=ee._modules,Q=ee._visibleModules,ne=ee._basePlotModules,ae=0,ie=0,ue,xe,he;ee._transformModules=[];function ge(Ue){V.push(Ue);var Ie=Ue._module;!Ie||(r.pushUnique(j,Ie),Ue.visible===!0&&r.pushUnique(Q,Ie),r.pushUnique(ne,Ue._module.basePlotModule),ae++,Ue._input.visible!==!1&&ie++)}var me={},ke=[],Ae=(re.template||{}).data||{},Ne=a.traceTemplater(Ae);for(ue=0;ue<U.length;ue++){if(he=U[ue],xe=Ne.newTrace(he),xe.uid=ee._traceUids[ue],p.supplyTraceDefaults(he,xe,ie,ee,ue),xe.index=ue,xe._input=he,xe._expandedIndex=ae,xe.transforms&&xe.transforms.length)for(var He=he.visible!==!1&&xe.visible===!1,Ge=I(xe,V,re,ee),_e=0;_e<Ge.length;_e++){var De=Ge[_e],Ye={_template:xe._template,type:xe.type,uid:xe.uid+_e};He&&De.visible===!1&&delete De.visible,p.supplyTraceDefaults(De,Ye,ae,ee,ue),h(Ye,De),Ye.index=ue,Ye._input=he,Ye._fullInput=xe,Ye._expandedIndex=ae,Ye._expandedInput=De,ge(Ye)}else xe._fullInput=xe,xe._expandedInput=xe,ge(xe);e.traceIs(xe,"carpetAxis")&&(me[xe.carpet]=xe),e.traceIs(xe,"carpetDependent")&&ke.push(ue)}for(ue=0;ue<ke.length;ue++)if(xe=V[ke[ue]],!!xe.visible){var qe=me[xe.carpet];if(xe._carpet=qe,!qe||!qe.visible){xe.visible=!1;continue}xe.xaxis=qe.xaxis,xe.yaxis=qe.yaxis}},p.supplyAnimationDefaults=function(U){U=U||{};var V,re={};function ee(j,Q){return r.coerce(U||{},re,v,j,Q)}if(ee("mode"),ee("direction"),ee("fromcurrent"),Array.isArray(U.frame))for(re.frame=[],V=0;V<U.frame.length;V++)re.frame[V]=p.supplyAnimationFrameDefaults(U.frame[V]||{});else re.frame=p.supplyAnimationFrameDefaults(U.frame||{});if(Array.isArray(U.transition))for(re.transition=[],V=0;V<U.transition.length;V++)re.transition[V]=p.supplyAnimationTransitionDefaults(U.transition[V]||{});else re.transition=p.supplyAnimationTransitionDefaults(U.transition||{});return re},p.supplyAnimationFrameDefaults=function(U){var V={};function re(ee,j){return r.coerce(U||{},V,v.frame,ee,j)}return re("duration"),re("redraw"),V},p.supplyAnimationTransitionDefaults=function(U){var V={};function re(ee,j){return r.coerce(U||{},V,v.transition,ee,j)}return re("duration"),re("easing"),V},p.supplyFrameDefaults=function(U){var V={};function re(ee,j){return r.coerce(U,V,u,ee,j)}return re("group"),re("name"),re("traces"),re("baseframe"),re("data"),re("layout"),V},p.supplyTraceDefaults=function(U,V,re,ee,j){var Q=ee.colorway||n.defaults,ne=Q[re%Q.length],ae;function ie(Ge,_e){return r.coerce(U,V,p.attributes,Ge,_e)}var ue=ie("visible");ie("type"),ie("name",ee._traceWord+" "+j),ie("uirevision",ee.uirevision);var xe=p.getModule(V);if(V._module=xe,xe){var he=xe.basePlotModule,ge=he.attr,me=he.attributes;if(ge&&me){var ke=ee._subplots,Ae="";if(ue||he.name!=="gl2d"){if(Array.isArray(ge))for(ae=0;ae<ge.length;ae++){var Ne=ge[ae],He=r.coerce(U,V,me,Ne);ke[Ne]&&r.pushUnique(ke[Ne],He),Ae+=He}else Ae=r.coerce(U,V,me,ge);ke[he.name]&&r.pushUnique(ke[he.name],Ae)}}}return ue&&(ie("customdata"),ie("ids"),ie("meta"),e.traceIs(V,"showLegend")?(r.coerce(U,V,xe.attributes.showlegend?xe.attributes:p.attributes,"showlegend"),ie("legendgroup"),ie("legendgrouptitle.text"),ie("legendrank"),V._dfltShowLegend=!0):V._dfltShowLegend=!1,xe&&xe.supplyDefaults(U,V,ne,ee),e.traceIs(V,"noOpacity")||ie("opacity"),e.traceIs(V,"notLegendIsolatable")&&(V.visible=!!V.visible),e.traceIs(V,"noHover")||(V.hovertemplate||r.coerceHoverinfo(U,V,ee),V.type!=="parcats"&&e.getComponentMethod("fx","supplyDefaults")(U,V,ne,ee)),xe&&xe.selectPoints&&ie("selectedpoints"),p.supplyTransformDefaults(U,V,ee)),V};function z(U){var V=U.transforms;if(Array.isArray(V)&&V.length)for(var re=0;re<V.length;re++){var ee=V[re],j=ee._module||A[ee.type];if(j&&j.makesData)return!0}return!1}p.hasMakesDataTransform=z,p.supplyTransformDefaults=function(U,V,re){if(!!(V._length||z(U))){var ee=re._globalTransforms||[],j=re._transformModules||[];if(!(!Array.isArray(U.transforms)&&ee.length===0))for(var Q=U.transforms||[],ne=ee.concat(Q),ae=V.transforms=[],ie=0;ie<ne.length;ie++){var ue=ne[ie],xe=ue.type,he=A[xe],ge,me=!(ue._module&&ue._module===he),ke=he&&typeof he.transform=="function";he||r.warn("Unrecognized transform type "+xe+"."),he&&he.supplyDefaults&&(me||ke)?(ge=he.supplyDefaults(ue,V,re,U),ge.type=xe,ge._module=he,r.pushUnique(j,he)):ge=r.extendFlat({},ue),ae.push(ge)}}};function I(U,V,re,ee){for(var j=U.transforms,Q=[U],ne=0;ne<j.length;ne++){var ae=j[ne],ie=A[ae.type];ie&&ie.transform&&(Q=ie.transform(Q,{transform:ae,fullTrace:U,fullData:V,layout:re,fullLayout:ee,transformIndex:ne}))}return Q}p.supplyLayoutGlobalDefaults=function(U,V,re){function ee(ue,xe){return r.coerce(U,V,p.layoutAttributes,ue,xe)}var j=U.template;r.isPlainObject(j)&&(V.template=j,V._template=j.layout,V._dataTemplate=j.data),ee("autotypenumbers");var Q=r.coerceFont(ee,"font"),ne=Q.size;r.coerceFont(ee,"title.font",r.extendFlat({},Q,{size:Math.round(ne*1.4)})),ee("title.text",V._dfltTitle.plot),ee("title.xref"),ee("title.yref"),ee("title.x"),ee("title.y"),ee("title.xanchor"),ee("title.yanchor"),ee("title.pad.t"),ee("title.pad.r"),ee("title.pad.b"),ee("title.pad.l");var ae=ee("uniformtext.mode");ae&&ee("uniformtext.minsize"),ee("autosize",!(U.width&&U.height)),ee("width"),ee("height"),ee("margin.l"),ee("margin.r"),ee("margin.t"),ee("margin.b"),ee("margin.pad"),ee("margin.autoexpand"),U.width&&U.height&&p.sanitizeMargins(V),e.getComponentMethod("grid","sizeDefaults")(U,V),ee("paper_bgcolor"),ee("separators",re.decimal+re.thousands),ee("hidesources"),ee("colorway"),ee("datarevision");var ie=ee("uirevision");ee("editrevision",ie),ee("selectionrevision",ie),e.getComponentMethod("modebar","supplyLayoutDefaults")(U,V),e.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(U,V,ee),ee("meta"),r.isPlainObject(U.transition)&&(ee("transition.duration"),ee("transition.easing"),ee("transition.ordering")),e.getComponentMethod("calendars","handleDefaults")(U,V,"calendar"),e.getComponentMethod("fx","supplyLayoutGlobalDefaults")(U,V,ee)};function R(U){return typeof U=="string"&&U.substr(U.length-2)==="px"&&parseFloat(U)}p.plotAutoSize=function(V,re,ee){var j=V._context||{},Q=j.frameMargins,ne,ae,ie=r.isPlotDiv(V);if(ie&&V.emit("plotly_autosize"),j.fillFrame)ne=window.innerWidth,ae=window.innerHeight,document.body.style.overflow="hidden";else{var ue=ie?window.getComputedStyle(V):{};if(ne=R(ue.width)||R(ue.maxWidth)||ee.width,ae=R(ue.height)||R(ue.maxHeight)||ee.height,w(Q)&&Q>0){var xe=1-2*Q;ne=Math.round(xe*ne),ae=Math.round(xe*ae)}}var he=p.layoutAttributes.width.min,ge=p.layoutAttributes.height.min;ne<he&&(ne=he),ae<ge&&(ae=ge);var me=!re.width&&Math.abs(ee.width-ne)>1,ke=!re.height&&Math.abs(ee.height-ae)>1;(ke||me)&&(me&&(ee.width=ne),ke&&(ee.height=ae)),V._initialAutoSize||(V._initialAutoSize={width:ne,height:ae}),p.sanitizeMargins(ee)},p.supplyLayoutModuleDefaults=function(U,V,re,ee){var j=e.componentsRegistry,Q=V._basePlotModules,ne,ae,ie,ue=e.subplotsRegistry.cartesian;for(ne in j)ie=j[ne],ie.includeBasePlot&&ie.includeBasePlot(U,V);Q.length||Q.push(ue),V._has("cartesian")&&(e.getComponentMethod("grid","contentDefaults")(U,V),ue.finalizeSubplots(U,V));for(var xe in V._subplots)V._subplots[xe].sort(r.subplotSort);for(ae=0;ae<Q.length;ae++)ie=Q[ae],ie.supplyLayoutDefaults&&ie.supplyLayoutDefaults(U,V,re);var he=V._modules;for(ae=0;ae<he.length;ae++)ie=he[ae],ie.supplyLayoutDefaults&&ie.supplyLayoutDefaults(U,V,re);var ge=V._transformModules;for(ae=0;ae<ge.length;ae++)ie=ge[ae],ie.supplyLayoutDefaults&&ie.supplyLayoutDefaults(U,V,re,ee);for(ne in j)ie=j[ne],ie.supplyLayoutDefaults&&ie.supplyLayoutDefaults(U,V,re)},p.purge=function(U){var V=U._fullLayout||{};V._glcontainer!==void 0&&(V._glcontainer.selectAll(".gl-canvas").remove(),V._glcontainer.remove(),V._glcanvas=null),V._modeBar&&V._modeBar.destroy(),U._transitionData&&(U._transitionData._interruptCallbacks&&(U._transitionData._interruptCallbacks.length=0),U._transitionData._animationRaf&&window.cancelAnimationFrame(U._transitionData._animationRaf)),r.clearThrottle(),r.clearResponsive(U),delete U.data,delete U.layout,delete U._fullData,delete U._fullLayout,delete U.calcdata,delete U.empty,delete U.fid,delete U.undoqueue,delete U.undonum,delete U.autoplay,delete U.changed,delete U._promises,delete U._redrawTimer,delete U._hmlumcount,delete U._hmpixcount,delete U._transitionData,delete U._transitioning,delete U._initialAutoSize,delete U._transitioningWithDuration,delete U._dragging,delete U._dragged,delete U._dragdata,delete U._hoverdata,delete U._snapshotInProgress,delete U._editing,delete U._mouseDownTime,delete U._legendMouseDownTime,U.removeAllListeners&&U.removeAllListeners()},p.style=function(U){var V=U._fullLayout._visibleModules,re=[],ee;for(ee=0;ee<V.length;ee++){var j=V[ee];j.style&&r.pushUnique(re,j.style)}for(ee=0;ee<re.length;ee++)re[ee](U)},p.sanitizeMargins=function(U){if(!(!U||!U.margin)){var V=U.width,re=U.height,ee=U.margin,j=V-(ee.l+ee.r),Q=re-(ee.t+ee.b),ne;j<0&&(ne=(V-1)/(ee.l+ee.r),ee.l=Math.floor(ne*ee.l),ee.r=Math.floor(ne*ee.r)),Q<0&&(ne=(re-1)/(ee.t+ee.b),ee.t=Math.floor(ne*ee.t),ee.b=Math.floor(ne*ee.b))}},p.clearAutoMarginIds=function(U){U._fullLayout._pushmarginIds={}},p.allowAutoMargin=function(U,V){U._fullLayout._pushmarginIds[V]=1};function D(U){var V=U.margin;if(!U._size){var re=U._size={l:Math.round(V.l),r:Math.round(V.r),t:Math.round(V.t),b:Math.round(V.b),p:Math.round(V.pad)};re.w=Math.round(U.width)-re.l-re.r,re.h=Math.round(U.height)-re.t-re.b}U._pushmargin||(U._pushmargin={}),U._pushmarginIds||(U._pushmarginIds={})}var O=2,F=2,G=64,W=64;p.autoMargin=function(U,V,re){var ee=U._fullLayout,j=ee.width,Q=ee.height,ne=ee.margin,ae=r.constrain(j-ne.l-ne.r,O,G),ie=r.constrain(Q-ne.t-ne.b,F,W),ue=Math.max(0,j-ae),xe=Math.max(0,Q-ie),he=ee._pushmargin,ge=ee._pushmarginIds;if(ne.autoexpand!==!1){if(!re)delete he[V],delete ge[V];else{var me=re.pad;if(me===void 0&&(me=Math.min(12,ne.l,ne.r,ne.t,ne.b)),ue){var ke=(re.l+re.r)/ue;ke>1&&(re.l/=ke,re.r/=ke)}if(xe){var Ae=(re.t+re.b)/xe;Ae>1&&(re.t/=Ae,re.b/=Ae)}var Ne=re.xl!==void 0?re.xl:re.x,He=re.xr!==void 0?re.xr:re.x,Ge=re.yt!==void 0?re.yt:re.y,_e=re.yb!==void 0?re.yb:re.y;he[V]={l:{val:Ne,size:re.l+me},r:{val:He,size:re.r+me},b:{val:_e,size:re.b+me},t:{val:Ge,size:re.t+me}},ge[V]=1}if(!ee._replotting)return p.doAutoMargin(U)}},p.doAutoMargin=function(U){var V=U._fullLayout,re=V.width,ee=V.height;V._size||(V._size={}),D(V);var j=V._size,Q=V.margin,ne=r.extendFlat({},j),ae=Q.l,ie=Q.r,ue=Q.t,xe=Q.b,he=V._pushmargin,ge=V._pushmarginIds;if(V.margin.autoexpand!==!1){for(var me in he)ge[me]||delete he[me];he.base={l:{val:0,size:ae},r:{val:1,size:ie},t:{val:1,size:ue},b:{val:0,size:xe}};for(var ke in he){var Ae=he[ke].l||{},Ne=he[ke].b||{},He=Ae.val,Ge=Ae.size,_e=Ne.val,De=Ne.size;for(var Ye in he){if(w(Ge)&&he[Ye].r){var qe=he[Ye].r.val,Ue=he[Ye].r.size;if(qe>He){var Ie=(Ge*qe+(Ue-re)*He)/(qe-He),Ve=(Ue*(1-He)+(Ge-re)*(1-qe))/(qe-He);Ie+Ve>ae+ie&&(ae=Ie,ie=Ve)}}if(w(De)&&he[Ye].t){var dt=he[Ye].t.val,Dt=he[Ye].t.size;if(dt>_e){var Yt=(De*dt+(Dt-ee)*_e)/(dt-_e),kt=(Dt*(1-_e)+(De-ee)*(1-dt))/(dt-_e);Yt+kt>xe+ue&&(xe=Yt,ue=kt)}}}}}var Ft=r.constrain(re-Q.l-Q.r,O,G),Nt=r.constrain(ee-Q.t-Q.b,F,W),Lt=Math.max(0,re-Ft),St=Math.max(0,ee-Nt);if(Lt){var it=(ae+ie)/Lt;it>1&&(ae/=it,ie/=it)}if(St){var ht=(xe+ue)/St;ht>1&&(xe/=ht,ue/=ht)}if(j.l=Math.round(ae),j.r=Math.round(ie),j.t=Math.round(ue),j.b=Math.round(xe),j.p=Math.round(Q.pad),j.w=Math.round(re)-j.l-j.r,j.h=Math.round(ee)-j.t-j.b,!V._replotting&&p.didMarginChange(ne,j)){"_redrawFromAutoMarginCount"in V?V._redrawFromAutoMarginCount++:V._redrawFromAutoMarginCount=1;var Qe=3*(1+Object.keys(ge).length);if(V._redrawFromAutoMarginCount<Qe)return e.call("_doPlot",U);V._size=ne,r.warn("Too many auto-margin redraws.")}q(U)};function q(U){var V=s.list(U,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(re){for(var ee=0;ee<V.length;ee++){var j=V[ee][re];j&&j()}})}var J=["l","r","t","b","p","w","h"];p.didMarginChange=function(U,V){for(var re=0;re<J.length;re++){var ee=J[re],j=U[ee],Q=V[ee];if(!w(j)||Math.abs(Q-j)>1)return!0}return!1},p.graphJson=function(U,V,re,ee,j,Q){(j&&V&&!U._fullData||j&&!V&&!U._fullLayout)&&p.supplyDefaults(U);var ne=j?U._fullData:U.data,ae=j?U._fullLayout:U.layout,ie=(U._transitionData||{})._frames;function ue(ge,me){if(typeof ge=="function")return me?"_function_":null;if(r.isPlainObject(ge)){var ke={},Ae;return Object.keys(ge).sort().forEach(function(Ne){if(["_","["].indexOf(Ne.charAt(0))===-1){if(typeof ge[Ne]=="function"){me&&(ke[Ne]="_function");return}if(re==="keepdata"){if(Ne.substr(Ne.length-3)==="src")return}else if(re==="keepstream"){if(Ae=ge[Ne+"src"],typeof Ae=="string"&&Ae.indexOf(":")>0&&!r.isPlainObject(ge.stream))return}else if(re!=="keepall"&&(Ae=ge[Ne+"src"],typeof Ae=="string"&&Ae.indexOf(":")>0))return;ke[Ne]=ue(ge[Ne],me)}}),ke}return Array.isArray(ge)?ge.map(function(Ne){return ue(Ne,me)}):r.isTypedArray(ge)?r.simpleMap(ge,r.identity):r.isJSDate(ge)?r.ms2DateTimeLocal(+ge):ge}var xe={data:(ne||[]).map(function(ge){var me=ue(ge);return V&&delete me.fit,me})};if(!V&&(xe.layout=ue(ae),j)){var he=ae._size;xe.layout.computed={margin:{b:he.b,l:he.l,r:he.r,t:he.t}}}return ie&&(xe.frames=ue(ie)),Q&&(xe.config=ue(U._context,!0)),ee==="object"?xe:JSON.stringify(xe)},p.modifyFrames=function(U,V){var re,ee,j,Q=U._transitionData._frames,ne=U._transitionData._frameHash;for(re=0;re<V.length;re++)switch(ee=V[re],ee.type){case"replace":j=ee.value;var ae=(Q[ee.index]||{}).name,ie=j.name;Q[ee.index]=ne[ie]=j,ie!==ae&&(delete ne[ae],ne[ie]=j);break;case"insert":j=ee.value,ne[j.name]=j,Q.splice(ee.index,0,j);break;case"delete":j=Q[ee.index],delete ne[j.name],Q.splice(ee.index,1);break}return Promise.resolve()},p.computeFrame=function(U,V){var re=U._transitionData._frameHash,ee,j,Q,ne;if(!V)throw new Error("computeFrame must be given a string frame name");var ae=re[V.toString()];if(!ae)return!1;for(var ie=[ae],ue=[ae.name];ae.baseframe&&(ae=re[ae.baseframe.toString()])&&ue.indexOf(ae.name)===-1;)ie.push(ae),ue.push(ae.name);for(var xe={};ae=ie.pop();)if(ae.layout&&(xe.layout=p.extendLayout(xe.layout,ae.layout)),ae.data){if(xe.data||(xe.data=[]),j=ae.traces,!j)for(j=[],ee=0;ee<ae.data.length;ee++)j[ee]=ee;for(xe.traces||(xe.traces=[]),ee=0;ee<ae.data.length;ee++)Q=j[ee],Q!=null&&(ne=xe.traces.indexOf(Q),ne===-1&&(ne=xe.data.length,xe.traces[ne]=Q),xe.data[ne]=p.extendTrace(xe.data[ne],ae.data[ee]))}return xe},p.recomputeFrameHash=function(U){for(var V=U._transitionData._frameHash={},re=U._transitionData._frames,ee=0;ee<re.length;ee++){var j=re[ee];j&&j.name&&(V[j.name]=j)}},p.extendObjectWithContainers=function(U,V,re){var ee,j,Q,ne,ae,ie,ue,xe,he=r.extendDeepNoArrays({},V||{}),ge=r.expandObjectPaths(he),me={};if(re&&re.length)for(Q=0;Q<re.length;Q++)ee=r.nestedProperty(ge,re[Q]),j=ee.get(),j===void 0?r.nestedProperty(me,re[Q]).set(null):(ee.set(null),r.nestedProperty(me,re[Q]).set(j));if(U=r.extendDeepNoArrays(U||{},ge),re&&re.length){for(Q=0;Q<re.length;Q++)if(ae=r.nestedProperty(me,re[Q]),ue=ae.get(),!!ue){for(ie=r.nestedProperty(U,re[Q]),xe=ie.get(),Array.isArray(xe)||(xe=[],ie.set(xe)),ne=0;ne<ue.length;ne++){var ke=ue[ne];ke===null?xe[ne]=null:xe[ne]=p.extendObjectWithContainers(xe[ne],ke)}ie.set(xe)}}return U},p.dataArrayContainers=["transforms","dimensions"],p.layoutArrayContainers=e.layoutArrayContainers,p.extendTrace=function(U,V){return p.extendObjectWithContainers(U,V,p.dataArrayContainers)},p.extendLayout=function(U,V){return p.extendObjectWithContainers(U,V,p.layoutArrayContainers)},p.transition=function(U,V,re,ee,j,Q){var ne={redraw:j.redraw},ae={},ie=[];return ne.prepareFn=function(){for(var ue=Array.isArray(V)?V.length:0,xe=ee.slice(0,ue),he=0;he<xe.length;he++){var ge=xe[he],me=U._fullData[ge],ke=me._module;if(!!ke){if(ke.animatable){var Ae=ke.basePlotModule.name;ae[Ae]||(ae[Ae]=[]),ae[Ae].push(ge)}U.data[xe[he]]=p.extendTrace(U.data[xe[he]],V[he])}}var Ne=r.expandObjectPaths(r.extendDeepNoArrays({},re)),He=/^[xy]axis[0-9]*$/;for(var Ge in Ne)!He.test(Ge)||delete Ne[Ge].range;p.extendLayout(U.layout,Ne),delete U.calcdata,p.supplyDefaults(U),p.doCalcdata(U);var _e=r.expandObjectPaths(re);if(_e){var De=U._fullLayout._plots;for(var Ye in De){var qe=De[Ye],Ue=qe.xaxis,Ie=qe.yaxis,Ve=Ue.range.slice(),dt=Ie.range.slice(),Dt=null,Yt=null,kt=null,Ft=null;Array.isArray(_e[Ue._name+".range"])?Dt=_e[Ue._name+".range"].slice():Array.isArray((_e[Ue._name]||{}).range)&&(Dt=_e[Ue._name].range.slice()),Array.isArray(_e[Ie._name+".range"])?Yt=_e[Ie._name+".range"].slice():Array.isArray((_e[Ie._name]||{}).range)&&(Yt=_e[Ie._name].range.slice()),Ve&&Dt&&(Ue.r2l(Ve[0])!==Ue.r2l(Dt[0])||Ue.r2l(Ve[1])!==Ue.r2l(Dt[1]))&&(kt={xr0:Ve,xr1:Dt}),dt&&Yt&&(Ie.r2l(dt[0])!==Ie.r2l(Yt[0])||Ie.r2l(dt[1])!==Ie.r2l(Yt[1]))&&(Ft={yr0:dt,yr1:Yt}),(kt||Ft)&&ie.push(r.extendFlat({plotinfo:qe},kt,Ft))}}return Promise.resolve()},ne.runFn=function(ue){var xe,he=U._fullLayout._basePlotModules,ge=ie.length,me;if(re)for(me=0;me<he.length;me++)he[me].transitionAxes&&he[me].transitionAxes(U,ie,Q,ue);ge?(xe=r.extendFlat({},Q),xe.duration=0,delete ae.cartesian):xe=Q;for(var ke in ae){var Ae=ae[ke],Ne=U._fullData[Ae[0]]._module;Ne.basePlotModule.plot(U,Ae,xe,ue)}},X(U,Q,ne)},p.transitionFromReact=function(U,V,re,ee){var j=U._fullLayout,Q=j.transition,ne={},ae=[];return ne.prepareFn=function(){var ie=j._plots;ne.redraw=!1,V.anim==="some"&&(ne.redraw=!0),re.anim==="some"&&(ne.redraw=!0);for(var ue in ie){var xe=ie[ue],he=xe.xaxis,ge=xe.yaxis,me=ee[he._name].range.slice(),ke=ee[ge._name].range.slice(),Ae=he.range.slice(),Ne=ge.range.slice();he.setScale(),ge.setScale();var He=null,Ge=null;(he.r2l(me[0])!==he.r2l(Ae[0])||he.r2l(me[1])!==he.r2l(Ae[1]))&&(He={xr0:me,xr1:Ae}),(ge.r2l(ke[0])!==ge.r2l(Ne[0])||ge.r2l(ke[1])!==ge.r2l(Ne[1]))&&(Ge={yr0:ke,yr1:Ne}),(He||Ge)&&ae.push(r.extendFlat({plotinfo:xe},He,Ge))}return Promise.resolve()},ne.runFn=function(ie){for(var ue=U._fullData,xe=U._fullLayout,he=xe._basePlotModules,ge,me,ke,Ae=[],Ne=0;Ne<ue.length;Ne++)Ae.push(Ne);function He(){if(!!U._fullLayout)for(var _e=0;_e<he.length;_e++)he[_e].transitionAxes&&he[_e].transitionAxes(U,ae,ge,ie)}function Ge(){if(!!U._fullLayout)for(var _e=0;_e<he.length;_e++)he[_e].plot(U,ke,me,ie)}ae.length&&V.anim?Q.ordering==="traces first"?(ge=r.extendFlat({},Q,{duration:0}),ke=Ae,me=Q,setTimeout(He,Q.duration),Ge()):(ge=Q,ke=null,me=r.extendFlat({},Q,{duration:0}),setTimeout(Ge,ge.duration),He()):ae.length?(ge=Q,He()):V.anim&&(ke=Ae,me=Q,Ge())},X(U,Q,ne)};function X(U,V,re){var ee=!1;function j(he){var ge=Promise.resolve();if(!he)return ge;for(;he.length;)ge=ge.then(he.shift());return ge}function Q(he){if(!!he)for(;he.length;)he.shift()}function ne(){return U.emit("plotly_transitioning",[]),new Promise(function(he){U._transitioning=!0,V.duration>0&&(U._transitioningWithDuration=!0),U._transitionData._interruptCallbacks.push(function(){ee=!0}),re.redraw&&U._transitionData._interruptCallbacks.push(function(){return e.call("redraw",U)}),U._transitionData._interruptCallbacks.push(function(){U.emit("plotly_transitioninterrupted",[])});var ge=0,me=0;function ke(){return ge++,function(){me++,!ee&&me===ge&&ae(he)}}re.runFn(ke),setTimeout(ke())})}function ae(he){if(!!U._transitionData)return Q(U._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(re.redraw)return e.call("redraw",U)}).then(function(){U._transitioning=!1,U._transitioningWithDuration=!1,U.emit("plotly_transitioned",[])}).then(he)}function ie(){if(!!U._transitionData)return U._transitioning=!1,j(U._transitionData._interruptCallbacks)}var ue=[p.previousPromises,ie,re.prepareFn,p.rehover,ne],xe=r.syncOrAsync(ue,U);return(!xe||!xe.then)&&(xe=Promise.resolve()),xe.then(function(){return U})}p.doCalcdata=function(U,V){var re=s.list(U),ee=U._fullData,j=U._fullLayout,Q,ne,ae,ie,ue=new Array(ee.length),xe=(U.calcdata||[]).slice();for(U.calcdata=ue,j._numBoxes=0,j._numViolins=0,j._violinScaleGroupStats={},U._hmpixcount=0,U._hmlumcount=0,j._piecolormap={},j._sunburstcolormap={},j._treemapcolormap={},j._iciclecolormap={},j._funnelareacolormap={},ae=0;ae<ee.length;ae++)if(Array.isArray(V)&&V.indexOf(ae)===-1){ue[ae]=xe[ae];continue}for(ae=0;ae<ee.length;ae++)Q=ee[ae],Q._arrayAttrs=o.findArrayAttributes(Q),Q._extremes={};var he=j._subplots.polar||[];for(ae=0;ae<he.length;ae++)re.push(j[he[ae]].radialaxis,j[he[ae]].angularaxis);for(var ge in j._colorAxes){var me=j[ge];me.cauto!==!1&&(delete me.cmin,delete me.cmax)}var ke=!1;function Ae(Ge){if(Q=ee[Ge],ne=Q._module,Q.visible===!0&&Q.transforms){if(ne&&ne.calc){var _e=ne.calc(U,Q);_e[0]&&_e[0].t&&_e[0].t._scene&&delete _e[0].t._scene.dirty}for(ie=0;ie<Q.transforms.length;ie++){var De=Q.transforms[ie];ne=A[De.type],ne&&ne.calcTransform&&(Q._hasCalcTransform=!0,ke=!0,ne.calcTransform(U,Q,De))}}}function Ne(Ge,_e){if(Q=ee[Ge],ne=Q._module,!!ne.isContainer===_e){var De=[];if(Q.visible===!0&&Q._length!==0){delete Q._indexToPoints;var Ye=Q.transforms||[];for(ie=Ye.length-1;ie>=0;ie--)if(Ye[ie].enabled){Q._indexToPoints=Ye[ie]._indexToPoints;break}ne&&ne.calc&&(De=ne.calc(U,Q))}(!Array.isArray(De)||!De[0])&&(De=[{x:c,y:c}]),De[0].t||(De[0].t={}),De[0].trace=Q,ue[Ge]=De}}for(le(re,ee,j),ae=0;ae<ee.length;ae++)Ne(ae,!0);for(ae=0;ae<ee.length;ae++)Ae(ae);for(ke&&le(re,ee,j),ae=0;ae<ee.length;ae++)Ne(ae,!0);for(ae=0;ae<ee.length;ae++)Ne(ae,!1);oe(U);var He=se(re,U);if(He.length){for(j._numBoxes=0,j._numViolins=0,ae=0;ae<He.length;ae++)Ne(He[ae],!0);for(ae=0;ae<He.length;ae++)Ne(He[ae],!1);oe(U)}e.getComponentMethod("fx","calc")(U),e.getComponentMethod("errorbars","calc")(U)};var Z=/(total|sum|min|max|mean|median) (ascending|descending)/;function se(U,V){var re=[],ee,j,Q,ne,ae;function ie(Lt,St,it){var ht=St._id.charAt(0);if(Lt==="histogram2dcontour"){var Qe=St._counterAxes[0],Ce=s.getFromId(V,Qe),je=ht==="x"||Qe==="x"&&Ce.type==="category",rt=ht==="y"||Qe==="y"&&Ce.type==="category";return function(ut,Pt){return ut===0||Pt===0||je&&ut===it[Pt].length-1||rt&&Pt===it.length-1?-1:(ht==="y"?Pt:ut)-1}}else return function(ut,Pt){return ht==="y"?Pt:ut}}var ue={min:function(Lt){return r.aggNums(Math.min,null,Lt)},max:function(Lt){return r.aggNums(Math.max,null,Lt)},sum:function(Lt){return r.aggNums(function(St,it){return St+it},null,Lt)},total:function(Lt){return r.aggNums(function(St,it){return St+it},null,Lt)},mean:function(Lt){return r.mean(Lt)},median:function(Lt){return r.median(Lt)}};for(ee=0;ee<U.length;ee++){var xe=U[ee];if(xe.type==="category"){var he=xe.categoryorder.match(Z);if(he){var ge=he[1],me=he[2],ke=xe._id.charAt(0),Ae=ke==="x",Ne=[];for(j=0;j<xe._categories.length;j++)Ne.push([xe._categories[j],[]]);for(j=0;j<xe._traceIndices.length;j++){var He=xe._traceIndices[j],Ge=V._fullData[He];if(Ge.visible===!0){var _e=Ge.type;e.traceIs(Ge,"histogram")&&(delete Ge._xautoBinFinished,delete Ge._yautoBinFinished);var De=_e==="splom",Ye=_e==="scattergl",qe=V.calcdata[He];for(Q=0;Q<qe.length;Q++){var Ue=qe[Q],Ie,Ve;if(De){var dt=Ge._axesDim[xe._id];if(!Ae){var Dt=Ge._diag[dt][0];Dt&&(xe=V._fullLayout[s.id2name(Dt)])}var Yt=Ue.trace.dimensions[dt].values;for(ne=0;ne<Yt.length;ne++)for(Ie=xe._categoriesMap[Yt[ne]],ae=0;ae<Ue.trace.dimensions.length;ae++)if(ae!==dt){var kt=Ue.trace.dimensions[ae];Ne[Ie][1].push(kt.values[ne])}}else if(Ye){for(ne=0;ne<Ue.t.x.length;ne++)Ae?(Ie=Ue.t.x[ne],Ve=Ue.t.y[ne]):(Ie=Ue.t.y[ne],Ve=Ue.t.x[ne]),Ne[Ie][1].push(Ve);Ue.t&&Ue.t._scene&&delete Ue.t._scene.dirty}else if(Ue.hasOwnProperty("z")){Ve=Ue.z;var Ft=ie(Ge.type,xe,Ve);for(ne=0;ne<Ve.length;ne++)for(ae=0;ae<Ve[ne].length;ae++)Ie=Ft(ae,ne),Ie+1&&Ne[Ie][1].push(Ve[ne][ae])}else for(Ie=Ue.p,Ie===void 0&&(Ie=Ue[ke]),Ve=Ue.s,Ve===void 0&&(Ve=Ue.v),Ve===void 0&&(Ve=Ae?Ue.y:Ue.x),Array.isArray(Ve)||(Ve===void 0?Ve=[]:Ve=[Ve]),ne=0;ne<Ve.length;ne++)Ne[Ie][1].push(Ve[ne])}}}xe._categoriesValue=Ne;var Nt=[];for(j=0;j<Ne.length;j++)Nt.push([Ne[j][0],ue[ge](Ne[j][1])]);Nt.sort(function(Lt,St){return Lt[1]-St[1]}),xe._categoriesAggregatedValue=Nt,xe._initialCategories=Nt.map(function(Lt){return Lt[0]}),me==="descending"&&xe._initialCategories.reverse(),re=re.concat(xe.sortByInitialCategories())}}}return re}function le(U,V,re){var ee={};function j(ie){ie.clearCalc(),ie.type==="multicategory"&&ie.setupMultiCategory(V),ee[ie._id]=1}r.simpleMap(U,j);for(var Q=re._axisMatchGroups||[],ne=0;ne<Q.length;ne++)for(var ae in Q[ne])ee[ae]||j(re[s.id2name(ae)])}function oe(U){var V=U._fullLayout,re=V._visibleModules,ee={},j,Q,ne;for(Q=0;Q<re.length;Q++){var ae=re[Q],ie=ae.crossTraceCalc;if(ie){var ue=ae.basePlotModule.name;ee[ue]?r.pushUnique(ee[ue],ie):ee[ue]=[ie]}}for(ne in ee){var xe=ee[ne],he=V._subplots[ne];if(Array.isArray(he))for(j=0;j<he.length;j++){var ge=he[j],me=ne==="cartesian"?V._plots[ge]:V[ge];for(Q=0;Q<xe.length;Q++)xe[Q](U,me,ge)}else for(Q=0;Q<xe.length;Q++)xe[Q](U)}}p.rehover=function(U){U._fullLayout._rehover&&U._fullLayout._rehover()},p.redrag=function(U){U._fullLayout._redrag&&U._fullLayout._redrag()},p.generalUpdatePerTraceModule=function(U,V,re,ee){var j=V.traceHash,Q={},ne;for(ne=0;ne<re.length;ne++){var ae=re[ne],ie=ae[0].trace;ie.visible&&(Q[ie.type]=Q[ie.type]||[],Q[ie.type].push(ae))}for(var ue in j)if(!Q[ue]){var xe=j[ue][0],he=xe[0].trace;he.visible=!1,Q[ue]=[xe]}for(var ge in Q){var me=Q[ge],ke=me[0][0].trace._module;ke.plot(U,V,r.filterVisible(me),ee)}V.traceHash=Q},p.plotBasePlot=function(U,V,re,ee,j){var Q=e.getModule(U),ne=g(V.calcdata,Q)[0];Q.plot(V,ne,ee,j)},p.cleanBasePlot=function(U,V,re,ee,j){var Q=j._has&&j._has(U),ne=re._has&&re._has(U);Q&&!ne&&j["_"+U+"layer"].selectAll("g.trace").remove()}},{"../components/color":366,"../constants/numerical":479,"../lib":503,"../plot_api/plot_schema":542,"../plot_api/plot_template":543,"../plots/get_data":593,"../registry":638,"./animation_attributes":548,"./attributes":550,"./cartesian/axis_ids":558,"./cartesian/handle_outline":565,"./command":583,"./font_attributes":585,"./frame_attributes":586,"./layout_attributes":610,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],620:[function(t,B,H){B.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],621:[function(t,B,H){var d=t("../../lib"),l=t("../../lib/polygon").tester,b=d.findIndexOfMin,w=d.isAngleInsideSector,e=d.angleDelta,o=d.angleDist;function a(A,m,M,x,T){if(!w(m,x))return!1;var _,f;M[0]<M[1]?(_=M[0],f=M[1]):(_=M[1],f=M[0]);var L=l(i(_,x[0],x[1],T)),S=l(i(f,x[0],x[1],T)),k=[A*Math.cos(m),A*Math.sin(m)];return S.contains(k)&&!L.contains(k)}function r(A,m,M,x){var T,_,f=x[0],L=x[1],S=g(Math.sin(m)-Math.sin(A)),k=g(Math.cos(m)-Math.cos(A)),P=Math.tan(M),z=g(1/P),I=S/k,R=L-I*f;return z?S&&k?(T=R/(P-I),_=P*T):k?(T=L*z,_=L):(T=f,_=f*P):S&&k?(T=0,_=R):k?(T=0,_=L):T=_=NaN,[T,_]}function n(A,m,M,x){var T=-m*M,_=m*m+1,f=2*(m*T-M),L=T*T+M*M-A*A,S=Math.sqrt(f*f-4*_*L),k=(-f+S)/(2*_),P=(-f-S)/(2*_);return[[k,m*k+T+x],[P,m*P+T+x]]}function c(A,m){var M=m.length,x=new Array(M+1),T;for(T=0;T<M;T++){var _=m[T];x[T]=[A*Math.cos(_),A*Math.sin(_)]}return x[T]=x[0].slice(),x}function s(A,m,M,x){var T=x.length,_=[],f,L;function S(G){return[A*Math.cos(G),A*Math.sin(G)]}function k(G,W,q){return r(G,W,q,S(G))}function P(G){return d.mod(G,T)}function z(G){return w(G,[m,M])}var I=b(x,function(G){return z(G)?o(G,m):1/0}),R=k(x[I],x[P(I-1)],m);for(_.push(R),f=I,L=0;L<T;f++,L++){var D=x[P(f)];if(!z(D))break;_.push(S(D))}var O=b(x,function(G){return z(G)?o(G,M):1/0}),F=k(x[O],x[P(O+1)],M);return _.push(F),_.push([0,0]),_.push(_[0].slice()),_}function i(A,m,M,x){return d.isFullCircle([m,M])?c(A,x):s(A,m,M,x)}function v(A,m,M,x){for(var T=1/0,_=1/0,f=i(A,m,M,x),L=0;L<f.length;L++){var S=f[L];T=Math.min(T,S[0]),_=Math.min(_,-S[1])}return[T,_]}function u(A,m){var M=function(_){var f=e(_,A);return f>0?f:1/0},x=b(m,M),T=d.mod(x+1,m.length);return[m[x],m[T]]}function g(A){return Math.abs(A)>1e-10?A:0}function h(A,m,M){m=m||0,M=M||0;for(var x=A.length,T=new Array(x),_=0;_<x;_++){var f=A[_];T[_]=[m+f[0],M-f[1]]}return T}function y(A,m,M,x,T,_){var f=i(A,m,M,x);return"M"+h(f,T,_).join("L")}function p(A,m,M,x,T,_,f){var L,S;A<m?(L=A,S=m):(L=m,S=A);var k=h(i(L,M,x,T),_,f),P=h(i(S,M,x,T),_,f);return"M"+P.reverse().join("L")+"M"+k.join("L")}B.exports={isPtInsidePolygon:a,findPolygonOffset:v,findEnclosingVertexAngles:u,findIntersectionXY:r,findXYatLength:n,clampTiny:g,pathPolygon:y,pathPolygonAnnulus:p}},{"../../lib":503,"../../lib/polygon":515}],622:[function(t,B,H){var d=t("../get_data").getSubplotCalcData,l=t("../../lib").counterRegex,b=t("./polar"),w=t("./constants"),e=w.attr,o=w.name,a=l(o),r={};r[e]={valType:"subplotid",dflt:o,editType:"calc"};function n(s){for(var i=s._fullLayout,v=s.calcdata,u=i._subplots[o],g=0;g<u.length;g++){var h=u[g],y=d(v,o,h),p=i[h]._subplot;p||(p=b(s,h),i[h]._subplot=p),p.plot(y,i,s._promises)}}function c(s,i,v,u){for(var g=u._subplots[o]||[],h=u._has&&u._has("gl"),y=i._has&&i._has("gl"),p=h&&!y,A=0;A<g.length;A++){var m=g[A],M=u[m]._subplot;if(!i[m]&&!!M){M.framework.remove(),M.layers["radial-axis-title"].remove();for(var x in M.clipPaths)M.clipPaths[x].remove()}p&&M._scene&&(M._scene.destroy(),M._scene=null)}}B.exports={attr:e,name:o,idRoot:o,idRegex:a,attrRegex:a,attributes:r,layoutAttributes:t("./layout_attributes"),supplyLayoutDefaults:t("./layout_defaults"),plot:n,clean:c,toSVG:t("../cartesian").toSVG}},{"../../lib":503,"../cartesian":568,"../get_data":593,"./constants":620,"./layout_attributes":623,"./layout_defaults":624,"./polar":625}],623:[function(t,B,H){var d=t("../../components/color/attributes"),l=t("../cartesian/layout_attributes"),b=t("../domain").attributes,w=t("../../lib").extendFlat,e=t("../../plot_api/edit_types").overrideAll,o=e({color:l.color,showline:w({},l.showline,{dflt:!0}),linecolor:l.linecolor,linewidth:l.linewidth,showgrid:w({},l.showgrid,{dflt:!0}),gridcolor:l.gridcolor,gridwidth:l.gridwidth},"plot","from-root"),a=e({tickmode:l.tickmode,nticks:l.nticks,tick0:l.tick0,dtick:l.dtick,tickvals:l.tickvals,ticktext:l.ticktext,ticks:l.ticks,ticklen:l.ticklen,tickwidth:l.tickwidth,tickcolor:l.tickcolor,ticklabelstep:l.ticklabelstep,showticklabels:l.showticklabels,showtickprefix:l.showtickprefix,tickprefix:l.tickprefix,showticksuffix:l.showticksuffix,ticksuffix:l.ticksuffix,showexponent:l.showexponent,exponentformat:l.exponentformat,minexponent:l.minexponent,separatethousands:l.separatethousands,tickfont:l.tickfont,tickangle:l.tickangle,tickformat:l.tickformat,tickformatstops:l.tickformatstops,layer:l.layer},"plot","from-root"),r={visible:w({},l.visible,{dflt:!0}),type:w({},l.type,{values:["-","linear","log","date","category"]}),autotypenumbers:l.autotypenumbers,autorange:w({},l.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:w({},l.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:l.categoryorder,categoryarray:l.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:w({},l.title.text,{editType:"plot",dflt:""}),font:w({},l.title.font,{editType:"plot"}),editType:"plot"},hoverformat:l.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:l._deprecated.title,titlefont:l._deprecated.titlefont}};w(r,o,a);var n={visible:w({},l.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:l.autotypenumbers,categoryorder:l.categoryorder,categoryarray:l.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:l.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};w(n,o,a),B.exports={domain:b({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:d.background},radialaxis:r,angularaxis:n,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":365,"../../lib":503,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],624:[function(t,B,H){var d=t("../../lib"),l=t("../../components/color"),b=t("../../plot_api/plot_template"),w=t("../subplot_defaults"),e=t("../get_data").getSubplotData,o=t("../cartesian/tick_value_defaults"),a=t("../cartesian/tick_mark_defaults"),r=t("../cartesian/tick_label_defaults"),n=t("../cartesian/prefix_suffix_defaults"),c=t("../cartesian/category_order_defaults"),s=t("../cartesian/line_grid_defaults"),i=t("../cartesian/axis_autotype"),v=t("./layout_attributes"),u=t("./set_convert"),g=t("./constants"),h=g.axisNames;function y(A,m,M,x){var T=M("bgcolor");x.bgColor=l.combine(T,x.paper_bgcolor);var _=M("sector");M("hole");var f=e(x.fullData,g.name,x.id),L=x.layoutOut,S;function k(le,oe){return M(S+"."+le,oe)}for(var P=0;P<h.length;P++){S=h[P],d.isPlainObject(A[S])||(A[S]={});var z=A[S],I=b.newContainer(m,S);I._id=I._name=S,I._attr=x.id+"."+S,I._traceIndices=f.map(function(le){return le._expandedIndex});var R=g.axisName2dataArray[S],D=p(z,I,k,f,R,x);c(z,I,k,{axData:f,dataAttr:R});var O=k("visible");switch(u(I,m,L),k("uirevision",m.uirevision),I._m=1,S){case"radialaxis":var F=k("autorange",!I.isValidRange(z.range));z.autorange=F,F&&(D==="linear"||D==="-")&&k("rangemode"),F==="reversed"&&(I._m=-1),k("range"),I.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(D==="date"){d.log("Polar plots do not support date angular axes yet.");for(var G=0;G<f.length;G++)f[G].visible=!1;D=z.type=I.type="linear"}k(D==="linear"?"thetaunit":"period");var W=k("direction");k("rotation",{counterclockwise:0,clockwise:90}[W]);break}if(n(z,I,k,I.type,{tickSuffixDflt:I.thetaunit==="degrees"?"\xB0":void 0}),O){var q,J,X,Z,se=x.font||{};q=k("color"),J=q===z.color?q:se.color,X=se.size,Z=se.family,o(z,I,k,I.type),r(z,I,k,I.type,{font:{color:J,size:X,family:Z}}),a(z,I,k,{outerTicks:!0}),s(z,I,k,{dfltColor:q,bgColor:x.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:v[S]}),k("layer"),S==="radialaxis"&&(k("side"),k("angle",_[0]),k("title.text"),d.coerceFont(k,"title.font",{color:J,size:d.bigFont(X),family:Z}))}D!=="category"&&k("hoverformat"),I._input=z}m.angularaxis.type==="category"&&M("gridshape")}function p(A,m,M,x,T,_){var f=M("autotypenumbers",_.autotypenumbersDflt),L=M("type");if(L==="-"){for(var S,k=0;k<x.length;k++)if(x[k].visible){S=x[k];break}S&&S[T]&&(m.type=i(S[T],"gregorian",{noMultiCategory:!0,autotypenumbers:f})),m.type==="-"?m.type="linear":A.type=m.type}return m.type}B.exports=function(m,M,x){w(m,M,x,{type:g.name,attributes:v,handleDefaults:y,font:M.font,autotypenumbersDflt:M.autotypenumbers,paper_bgcolor:M.paper_bgcolor,fullData:x,layoutOut:M})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/axis_autotype":555,"../cartesian/category_order_defaults":559,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/tick_label_defaults":578,"../cartesian/tick_mark_defaults":579,"../cartesian/tick_value_defaults":580,"../get_data":593,"../subplot_defaults":632,"./constants":620,"./layout_attributes":623,"./set_convert":626}],625:[function(t,B,H){var d=t("@plotly/d3"),l=t("tinycolor2"),b=t("../../registry"),w=t("../../lib"),e=w.strRotate,o=w.strTranslate,a=t("../../components/color"),r=t("../../components/drawing"),n=t("../plots"),c=t("../../plots/cartesian/axes"),s=t("../cartesian/set_convert"),i=t("./set_convert"),v=t("../cartesian/autorange").doAutoRange,u=t("../cartesian/dragbox"),g=t("../../components/dragelement"),h=t("../../components/fx"),y=t("../../components/titles"),p=t("../cartesian/select").prepSelect,A=t("../cartesian/select").selectOnClick,m=t("../cartesian/select").clearSelect,M=t("../../lib/setcursor"),x=t("../../lib/clear_gl_canvases"),T=t("../../plot_api/subroutines").redrawReglTraces,_=t("../../constants/alignment").MID_SHIFT,f=t("./constants"),L=t("./helpers"),S=t("../smith/helpers"),k=S.smith,P=S.reactanceArc,z=S.resistanceArc,I=S.smithTransform,R=w._,D=w.mod,O=w.deg2rad,F=w.rad2deg;function G(se,le,oe){this.isSmith=oe||!1,this.id=le,this.gd=se,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var U=se._fullLayout,V="clip"+U._uid+le;this.clipIds.forTraces=V+"-for-traces",this.clipPaths.forTraces=U._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=U["_"+(oe?"smith":"polar")+"layer"].append("g").attr("class",le),this.getHole=function(re){return this.isSmith?0:re.hole},this.getSector=function(re){return this.isSmith?[0,360]:re.sector},this.getRadial=function(re){return this.isSmith?re.realaxis:re.radialaxis},this.getAngular=function(re){return this.isSmith?re.imaginaryaxis:re.angularaxis},oe||(this.radialTickLayout=null,this.angularTickLayout=null)}var W=G.prototype;B.exports=function(le,oe,U){return new G(le,oe,U)},W.plot=function(se,le){for(var oe=this,U=le[oe.id],V=!1,re=0;re<se.length;re++){var ee=se[re][0].trace;if(ee.cliponaxis===!1){V=!0;break}}oe._hasClipOnAxisFalse=V,oe.updateLayers(le,U),oe.updateLayout(le,U),n.generalUpdatePerTraceModule(oe.gd,oe,se,U),oe.updateFx(le,U),oe.isSmith&&(delete U.realaxis.range,delete U.imaginaryaxis.range)},W.updateLayers=function(se,le){var oe=this,U=oe.isSmith,V=oe.layers,re=oe.getRadial(le),ee=oe.getAngular(le),j=f.layerNames,Q=j.indexOf("frontplot"),ne=j.slice(0,Q),ae=ee.layer==="below traces",ie=re.layer==="below traces";ae&&ne.push("angular-line"),ie&&ne.push("radial-line"),ae&&ne.push("angular-axis"),ie&&ne.push("radial-axis"),ne.push("frontplot"),ae||ne.push("angular-line"),ie||ne.push("radial-line"),ae||ne.push("angular-axis"),ie||ne.push("radial-axis");var ue=(U?"smith":"polar")+"sublayer",xe=oe.framework.selectAll("."+ue).data(ne,String);xe.enter().append("g").attr("class",function(he){return ue+" "+he}).each(function(he){var ge=V[he]=d.select(this);switch(he){case"frontplot":U||ge.append("g").classed("barlayer",!0),ge.append("g").classed("scatterlayer",!0);break;case"backplot":ge.append("g").classed("maplayer",!0);break;case"plotbg":V.bg=ge.append("path");break;case"radial-grid":ge.style("fill","none");break;case"angular-grid":ge.style("fill","none");break;case"radial-line":ge.append("line").style("fill","none");break;case"angular-line":ge.append("path").style("fill","none");break}}),xe.order()},W.updateLayout=function(se,le){var oe=this,U=oe.layers,V=se._size,re=oe.getRadial(le),ee=oe.getAngular(le),j=le.domain.x,Q=le.domain.y;oe.xOffset=V.l+V.w*j[0],oe.yOffset=V.t+V.h*(1-Q[1]);var ne=oe.xLength=V.w*(j[1]-j[0]),ae=oe.yLength=V.h*(Q[1]-Q[0]),ie=oe.getSector(le);oe.sectorInRad=ie.map(O);var ue=oe.sectorBBox=J(ie),xe=ue[2]-ue[0],he=ue[3]-ue[1],ge=ae/ne,me=Math.abs(he/xe),ke,Ae,Ne,He,Ge;ge>me?(ke=ne,Ae=ne*me,Ge=(ae-Ae)/V.h/2,Ne=[j[0],j[1]],He=[Q[0]+Ge,Q[1]-Ge]):(ke=ae/me,Ae=ae,Ge=(ne-ke)/V.w/2,Ne=[j[0]+Ge,j[1]-Ge],He=[Q[0],Q[1]]),oe.xLength2=ke,oe.yLength2=Ae,oe.xDomain2=Ne,oe.yDomain2=He;var _e=oe.xOffset2=V.l+V.w*Ne[0],De=oe.yOffset2=V.t+V.h*(1-He[1]),Ye=oe.radius=ke/xe,qe=oe.innerRadius=oe.getHole(le)*Ye,Ue=oe.cx=_e-Ye*ue[0],Ie=oe.cy=De+Ye*ue[3],Ve=oe.cxx=Ue-_e,dt=oe.cyy=Ie-De,Dt=re.side,Yt;Dt==="counterclockwise"?(Yt=Dt,Dt="top"):Dt==="clockwise"&&(Yt=Dt,Dt="bottom"),oe.radialAxis=oe.mockAxis(se,le,re,{_id:"x",side:Dt,_trueSide:Yt,domain:[qe/V.w,Ye/V.w]}),oe.angularAxis=oe.mockAxis(se,le,ee,{side:"right",domain:[0,Math.PI],autorange:!1}),oe.doAutoRange(se,le),oe.updateAngularAxis(se,le),oe.updateRadialAxis(se,le),oe.updateRadialAxisTitle(se,le),oe.xaxis=oe.mockCartesianAxis(se,le,{_id:"x",domain:Ne}),oe.yaxis=oe.mockCartesianAxis(se,le,{_id:"y",domain:He});var kt=oe.pathSubplot();oe.clipPaths.forTraces.select("path").attr("d",kt).attr("transform",o(Ve,dt)),U.frontplot.attr("transform",o(_e,De)).call(r.setClipUrl,oe._hasClipOnAxisFalse?null:oe.clipIds.forTraces,oe.gd),U.bg.attr("d",kt).attr("transform",o(Ue,Ie)).call(a.fill,le.bgcolor)},W.mockAxis=function(se,le,oe,U){var V=w.extendFlat({},oe,U);return i(V,le,se),V},W.mockCartesianAxis=function(se,le,oe){var U=this,V=U.isSmith,re=oe._id,ee=w.extendFlat({type:"linear"},oe);s(ee,se);var j={x:[0,2],y:[1,3]};return ee.setRange=function(){var Q=U.sectorBBox,ne=j[re],ae=U.radialAxis._rl,ie=(ae[1]-ae[0])/(1-U.getHole(le));ee.range=[Q[ne[0]]*ie,Q[ne[1]]*ie]},ee.isPtWithinRange=re==="x"&&!V?function(Q){return U.isPtInside(Q)}:function(){return!0},ee.setRange(),ee.setScale(),ee},W.doAutoRange=function(se,le){var oe=this,U=oe.gd,V=oe.radialAxis,re=oe.getRadial(le);v(U,V);var ee=V.range;re.range=ee.slice(),re._input.range=ee.slice(),V._rl=[V.r2l(ee[0],null,"gregorian"),V.r2l(ee[1],null,"gregorian")]},W.updateRadialAxis=function(se,le){var oe=this,U=oe.gd,V=oe.layers,re=oe.radius,ee=oe.innerRadius,j=oe.cx,Q=oe.cy,ne=oe.getRadial(le),ae=D(oe.getSector(le)[0],360),ie=oe.radialAxis,ue=ee<re,xe=oe.isSmith;xe||(oe.fillViewInitialKey("radialaxis.angle",ne.angle),oe.fillViewInitialKey("radialaxis.range",ie.range.slice()),ie.setGeometry()),ie.tickangle==="auto"&&ae>90&&ae<=270&&(ie.tickangle=180);var he=xe?function(Ye){var qe=I(oe,k([Ye.x,0]));return o(qe[0]-j,qe[1]-Q)}:function(Ye){return o(ie.l2p(Ye.x)+ee,0)},ge=xe?function(Ye){return z(oe,Ye.x,-1/0,1/0)}:function(Ye){return oe.pathArc(ie.r2p(Ye.x)+ee)},me=q(ne);if(oe.radialTickLayout!==me&&(V["radial-axis"].selectAll(".xtick").remove(),oe.radialTickLayout=me),ue){ie.setScale();var ke=0,Ae=xe?(ie.tickvals||[]).filter(function(Ye){return Ye>=0}).map(function(Ye){return c.tickText(ie,Ye,!0,!1)}):c.calcTicks(ie),Ne=xe?Ae:c.clipEnds(ie,Ae),He=c.getTickSigns(ie)[2];xe&&((ie.ticks==="top"&&ie.side==="bottom"||ie.ticks==="bottom"&&ie.side==="top")&&(He=-He),ie.ticks==="top"&&ie.side==="top"&&(ke=-ie.ticklen),ie.ticks==="bottom"&&ie.side==="bottom"&&(ke=ie.ticklen)),c.drawTicks(U,ie,{vals:Ae,layer:V["radial-axis"],path:c.makeTickPath(ie,0,He),transFn:he,crisp:!1}),c.drawGrid(U,ie,{vals:Ne,layer:V["radial-grid"],path:ge,transFn:w.noop,crisp:!1}),c.drawLabels(U,ie,{vals:Ae,layer:V["radial-axis"],transFn:he,labelFns:c.makeLabelFns(ie,ke)})}var Ge=oe.radialAxisAngle=oe.vangles?F(X(O(ne.angle),oe.vangles)):ne.angle,_e=o(j,Q),De=_e+e(-Ge);Z(V["radial-axis"],ue&&(ne.showticklabels||ne.ticks),{transform:De}),Z(V["radial-grid"],ue&&ne.showgrid,{transform:xe?"":_e}),Z(V["radial-line"].select("line"),ue&&ne.showline,{x1:xe?-re:ee,y1:0,x2:re,y2:0,transform:De}).attr("stroke-width",ne.linewidth).call(a.stroke,ne.linecolor)},W.updateRadialAxisTitle=function(se,le,oe){if(!this.isSmith){var U=this,V=U.gd,re=U.radius,ee=U.cx,j=U.cy,Q=U.getRadial(le),ne=U.id+"title",ae=0;if(Q.title){var ie=r.bBox(U.layers["radial-axis"].node()).height,ue=Q.title.font.size,xe=Q.side;ae=xe==="top"?ue:xe==="counterclockwise"?-(ie+ue*.4):ie+ue*.8}var he=oe!==void 0?oe:U.radialAxisAngle,ge=O(he),me=Math.cos(ge),ke=Math.sin(ge),Ae=ee+re/2*me+ae*ke,Ne=j-re/2*ke+ae*me;U.layers["radial-axis-title"]=y.draw(V,ne,{propContainer:Q,propName:U.id+".radialaxis.title",placeholder:R(V,"Click to enter radial axis title"),attributes:{x:Ae,y:Ne,"text-anchor":"middle"},transform:{rotate:-he}})}},W.updateAngularAxis=function(se,le){var oe=this,U=oe.gd,V=oe.layers,re=oe.radius,ee=oe.innerRadius,j=oe.cx,Q=oe.cy,ne=oe.getAngular(le),ae=oe.angularAxis,ie=oe.isSmith;ie||(oe.fillViewInitialKey("angularaxis.rotation",ne.rotation),ae.setGeometry(),ae.setScale());var ue=ie?function(qe){var Ue=I(oe,k([0,qe.x]));return Math.atan2(Ue[0]-j,Ue[1]-Q)-Math.PI/2}:function(qe){return ae.t2g(qe.x)};ae.type==="linear"&&ae.thetaunit==="radians"&&(ae.tick0=F(ae.tick0),ae.dtick=F(ae.dtick));var xe=function(qe){return o(j+re*Math.cos(qe),Q-re*Math.sin(qe))},he=ie?function(qe){var Ue=I(oe,k([0,qe.x]));return o(Ue[0],Ue[1])}:function(qe){return xe(ue(qe))},ge=ie?function(qe){var Ue=I(oe,k([0,qe.x])),Ie=Math.atan2(Ue[0]-j,Ue[1]-Q)-Math.PI/2;return o(Ue[0],Ue[1])+e(-F(Ie))}:function(qe){var Ue=ue(qe);return xe(Ue)+e(-F(Ue))},me=ie?function(qe){return P(oe,qe.x,0,1/0)}:function(qe){var Ue=ue(qe),Ie=Math.cos(Ue),Ve=Math.sin(Ue);return"M"+[j+ee*Ie,Q-ee*Ve]+"L"+[j+re*Ie,Q-re*Ve]},ke=c.makeLabelFns(ae,0),Ae=ke.labelStandoff,Ne={};Ne.xFn=function(qe){var Ue=ue(qe);return Math.cos(Ue)*Ae},Ne.yFn=function(qe){var Ue=ue(qe),Ie=Math.sin(Ue)>0?.2:1;return-Math.sin(Ue)*(Ae+qe.fontSize*Ie)+Math.abs(Math.cos(Ue))*(qe.fontSize*_)},Ne.anchorFn=function(qe){var Ue=ue(qe),Ie=Math.cos(Ue);return Math.abs(Ie)<.1?"middle":Ie>0?"start":"end"},Ne.heightFn=function(qe,Ue,Ie){var Ve=ue(qe);return-.5*(1+Math.sin(Ve))*Ie};var He=q(ne);oe.angularTickLayout!==He&&(V["angular-axis"].selectAll("."+ae._id+"tick").remove(),oe.angularTickLayout=He);var Ge=ie?[1/0].concat(ae.tickvals||[]).map(function(qe){return c.tickText(ae,qe,!0,!1)}):c.calcTicks(ae);ie&&(Ge[0].text="\u221E",Ge[0].fontSize*=1.75);var _e;if(le.gridshape==="linear"?(_e=Ge.map(ue),w.angleDelta(_e[0],_e[1])<0&&(_e=_e.slice().reverse())):_e=null,oe.vangles=_e,ae.type==="category"&&(Ge=Ge.filter(function(qe){return w.isAngleInsideSector(ue(qe),oe.sectorInRad)})),ae.visible){var De=ae.ticks==="inside"?-1:1,Ye=(ae.linewidth||1)/2;c.drawTicks(U,ae,{vals:Ge,layer:V["angular-axis"],path:"M"+De*Ye+",0h"+De*ae.ticklen,transFn:ge,crisp:!1}),c.drawGrid(U,ae,{vals:Ge,layer:V["angular-grid"],path:me,transFn:w.noop,crisp:!1}),c.drawLabels(U,ae,{vals:Ge,layer:V["angular-axis"],repositionOnUpdate:!0,transFn:he,labelFns:Ne})}Z(V["angular-line"].select("path"),ne.showline,{d:oe.pathSubplot(),transform:o(j,Q)}).attr("stroke-width",ne.linewidth).call(a.stroke,ne.linecolor)},W.updateFx=function(se,le){if(!this.gd._context.staticPlot){var oe=!this.isSmith;oe&&(this.updateAngularDrag(se),this.updateRadialDrag(se,le,0),this.updateRadialDrag(se,le,1)),this.updateHoverAndMainDrag(se)}},W.updateHoverAndMainDrag=function(se){var le=this,oe=le.isSmith,U=le.gd,V=le.layers,re=se._zoomlayer,ee=f.MINZOOM,j=f.OFFEDGE,Q=le.radius,ne=le.innerRadius,ae=le.cx,ie=le.cy,ue=le.cxx,xe=le.cyy,he=le.sectorInRad,ge=le.vangles,me=le.radialAxis,ke=L.clampTiny,Ae=L.findXYatLength,Ne=L.findEnclosingVertexAngles,He=f.cornerHalfWidth,Ge=f.cornerLen/2,_e,De,Ye=u.makeDragger(V,"path","maindrag","crosshair");d.select(Ye).attr("d",le.pathSubplot()).attr("transform",o(ae,ie)),Ye.onmousemove=function(Je){h.hover(U,Je,le.id),U._fullLayout._lasthover=Ye,U._fullLayout._hoversubplot=le.id},Ye.onmouseout=function(Je){U._dragging||g.unhover(U,Je)};var qe={element:Ye,gd:U,subplot:le.id,plotinfo:{id:le.id,xaxis:le.xaxis,yaxis:le.yaxis},xaxes:[le.xaxis],yaxes:[le.yaxis]},Ue,Ie,Ve,dt,Dt,Yt,kt,Ft,Nt;function Lt(Je,pt){return Math.sqrt(Je*Je+pt*pt)}function St(Je,pt){return Lt(Je-ue,pt-xe)}function it(Je,pt){return Math.atan2(xe-pt,Je-ue)}function ht(Je,pt){return[Je*Math.cos(pt),Je*Math.sin(-pt)]}function Qe(Je,pt){if(Je===0)return le.pathSector(2*He);var Et=Ge/Je,ar=pt-Et,vr=pt+Et,ir=Math.max(0,Math.min(Je,Q)),dr=ir-He,Pr=ir+He;return"M"+ht(dr,ar)+"A"+[dr,dr]+" 0,0,0 "+ht(dr,vr)+"L"+ht(Pr,vr)+"A"+[Pr,Pr]+" 0,0,1 "+ht(Pr,ar)+"Z"}function Ce(Je,pt,Et){if(Je===0)return le.pathSector(2*He);var ar=ht(Je,pt),vr=ht(Je,Et),ir=ke((ar[0]+vr[0])/2),dr=ke((ar[1]+vr[1])/2),Pr,Sr;if(ir&&dr){var tr=dr/ir,Nr=-1/tr,et=Ae(He,tr,ir,dr);Pr=Ae(Ge,Nr,et[0][0],et[0][1]),Sr=Ae(Ge,Nr,et[1][0],et[1][1])}else{var we,Me;dr?(we=Ge,Me=He):(we=He,Me=Ge),Pr=[[ir-we,dr-Me],[ir+we,dr-Me]],Sr=[[ir-we,dr+Me],[ir+we,dr+Me]]}return"M"+Pr.join("L")+"L"+Sr.reverse().join("L")+"Z"}function je(){Ve=null,dt=null,Dt=le.pathSubplot(),Yt=!1;var Je=U._fullLayout[le.id];kt=l(Je.bgcolor).getLuminance(),Ft=u.makeZoombox(re,kt,ae,ie,Dt),Ft.attr("fill-rule","evenodd"),Nt=u.makeCorners(re,ae,ie),m(U)}function rt(Je,pt){return pt=Math.max(Math.min(pt,Q),ne),Je<j?Je=0:Q-Je<j?Je=Q:pt<j?pt=0:Q-pt<j&&(pt=Q),Math.abs(pt-Je)>ee?(Je<pt?(Ve=Je,dt=pt):(Ve=pt,dt=Je),!0):(Ve=null,dt=null,!1)}function ut(Je,pt){Je=Je||Dt,pt=pt||"M0,0Z",Ft.attr("d",Je),Nt.attr("d",pt),u.transitionZoombox(Ft,Nt,Yt,kt),Yt=!0;var Et={};Bt(Et),U.emit("plotly_relayouting",Et)}function Pt(Je,pt){Je=Je*_e,pt=pt*De;var Et=Ue+Je,ar=Ie+pt,vr=St(Ue,Ie),ir=Math.min(St(Et,ar),Q),dr=it(Ue,Ie),Pr,Sr;rt(vr,ir)&&(Pr=Dt+le.pathSector(dt),Ve&&(Pr+=le.pathSector(Ve)),Sr=Qe(Ve,dr)+Qe(dt,dr)),ut(Pr,Sr)}function Tt(Je,pt,Et,ar){var vr=L.findIntersectionXY(Et,ar,Et,[Je-ue,xe-pt]);return Lt(vr[0],vr[1])}function Ot(Je,pt){var Et=Ue+Je,ar=Ie+pt,vr=it(Ue,Ie),ir=it(Et,ar),dr=Ne(vr,ge),Pr=Ne(ir,ge),Sr=Tt(Ue,Ie,dr[0],dr[1]),tr=Math.min(Tt(Et,ar,Pr[0],Pr[1]),Q),Nr,et;rt(Sr,tr)&&(Nr=Dt+le.pathSector(dt),Ve&&(Nr+=le.pathSector(Ve)),et=[Ce(Ve,dr[0],dr[1]),Ce(dt,dr[0],dr[1])].join(" ")),ut(Nr,et)}function Kt(){if(u.removeZoombox(U),!(Ve===null||dt===null)){var Je={};Bt(Je),u.showDoubleClickNotifier(U),b.call("_guiRelayout",U,Je)}}function Bt(Je){var pt=me._rl,Et=(pt[1]-pt[0])/(1-ne/Q)/Q,ar=[pt[0]+(Ve-ne)*Et,pt[0]+(dt-ne)*Et];Je[le.id+".radialaxis.range"]=ar}function Zt(Je,pt){var Et=U._fullLayout.clickmode;if(u.removeZoombox(U),Je===2){var ar={};for(var vr in le.viewInitial)ar[le.id+"."+vr]=le.viewInitial[vr];U.emit("plotly_doubleclick",null),b.call("_guiRelayout",U,ar)}Et.indexOf("select")>-1&&Je===1&&A(pt,U,[le.xaxis],[le.yaxis],le.id,qe),Et.indexOf("event")>-1&&h.click(U,pt,le.id)}qe.prepFn=function(Je,pt,Et){var ar=U._fullLayout.dragmode,vr=Ye.getBoundingClientRect();U._fullLayout._calcInverseTransform(U);var ir=U._fullLayout._invTransform;_e=U._fullLayout._invScaleX,De=U._fullLayout._invScaleY;var dr=w.apply3DTransform(ir)(pt-vr.left,Et-vr.top);if(Ue=dr[0],Ie=dr[1],ge){var Pr=L.findPolygonOffset(Q,he[0],he[1],ge);Ue+=ue+Pr[0],Ie+=xe+Pr[1]}switch(ar){case"zoom":qe.clickFn=Zt,oe||(ge?qe.moveFn=Ot:qe.moveFn=Pt,qe.doneFn=Kt,je());break;case"select":case"lasso":p(Je,pt,Et,qe,ar);break}},g.init(qe)},W.updateRadialDrag=function(se,le,oe){var U=this,V=U.gd,re=U.layers,ee=U.radius,j=U.innerRadius,Q=U.cx,ne=U.cy,ae=U.radialAxis,ie=f.radialDragBoxSize,ue=ie/2;if(!ae.visible)return;var xe=O(U.radialAxisAngle),he=ae._rl,ge=he[0],me=he[1],ke=he[oe],Ae=.75*(he[1]-he[0])/(1-U.getHole(le))/ee,Ne,He,Ge;oe?(Ne=Q+(ee+ue)*Math.cos(xe),He=ne-(ee+ue)*Math.sin(xe),Ge="radialdrag"):(Ne=Q+(j-ue)*Math.cos(xe),He=ne-(j-ue)*Math.sin(xe),Ge="radialdrag-inner");var _e=u.makeRectDragger(re,Ge,"crosshair",-ue,-ue,ie,ie),De={element:_e,gd:V};Z(d.select(_e),ae.visible&&j<ee,{transform:o(Ne,He)});var Ye,qe,Ue;function Ie(kt,Ft){if(Ye)Ye(kt,Ft);else{var Nt=[kt,-Ft],Lt=[Math.cos(xe),Math.sin(xe)],St=Math.abs(w.dot(Nt,Lt)/Math.sqrt(w.dot(Nt,Nt)));isNaN(St)||(Ye=St<.5?Dt:Yt)}var it={};Ve(it),V.emit("plotly_relayouting",it)}function Ve(kt){qe!==null?kt[U.id+".radialaxis.angle"]=qe:Ue!==null&&(kt[U.id+".radialaxis.range["+oe+"]"]=Ue)}function dt(){qe!==null?b.call("_guiRelayout",V,U.id+".radialaxis.angle",qe):Ue!==null&&b.call("_guiRelayout",V,U.id+".radialaxis.range["+oe+"]",Ue)}function Dt(kt,Ft){if(oe!==0){var Nt=Ne+kt,Lt=He+Ft;qe=Math.atan2(ne-Lt,Nt-Q),U.vangles&&(qe=X(qe,U.vangles)),qe=F(qe);var St=o(Q,ne)+e(-qe);re["radial-axis"].attr("transform",St),re["radial-line"].select("line").attr("transform",St);var it=U.gd._fullLayout,ht=it[U.id];U.updateRadialAxisTitle(it,ht,qe)}}function Yt(kt,Ft){var Nt=w.dot([kt,-Ft],[Math.cos(xe),Math.sin(xe)]);if(Ue=ke-Ae*Nt,Ae>0!=(oe?Ue>ge:Ue<me)){Ue=null;return}var Lt=V._fullLayout,St=Lt[U.id];ae.range[oe]=Ue,ae._rl[oe]=Ue,U.updateRadialAxis(Lt,St),U.xaxis.setRange(),U.xaxis.setScale(),U.yaxis.setRange(),U.yaxis.setScale();var it=!1;for(var ht in U.traceHash){var Qe=U.traceHash[ht],Ce=w.filterVisible(Qe),je=Qe[0][0].trace._module;je.plot(V,U,Ce,St),b.traceIs(ht,"gl")&&Ce.length&&(it=!0)}it&&(x(V),T(V))}De.prepFn=function(){Ye=null,qe=null,Ue=null,De.moveFn=Ie,De.doneFn=dt,m(V)},De.clampFn=function(kt,Ft){return Math.sqrt(kt*kt+Ft*Ft)<f.MINDRAG&&(kt=0,Ft=0),[kt,Ft]},g.init(De)},W.updateAngularDrag=function(se){var le=this,oe=le.gd,U=le.layers,V=le.radius,re=le.angularAxis,ee=le.cx,j=le.cy,Q=le.cxx,ne=le.cyy,ae=f.angularDragBoxSize,ie=u.makeDragger(U,"path","angulardrag","move"),ue={element:ie,gd:oe};d.select(ie).attr("d",le.pathAnnulus(V,V+ae)).attr("transform",o(ee,j)).call(M,"move");function xe(Ue,Ie){return Math.atan2(ne+ae-Ie,Ue-Q-ae)}var he=U.frontplot.select(".scatterlayer").selectAll(".trace"),ge=he.selectAll(".point"),me=he.selectAll(".textpoint"),ke,Ae,Ne,He,Ge,_e;function De(Ue,Ie){var Ve=le.gd._fullLayout,dt=Ve[le.id],Dt=ke+Ue*se._invScaleX,Yt=Ae+Ie*se._invScaleY,kt=xe(Dt,Yt),Ft=F(kt-_e);if(He=Ne+Ft,U.frontplot.attr("transform",o(le.xOffset2,le.yOffset2)+e([-Ft,Q,ne])),le.vangles){Ge=le.radialAxisAngle+Ft;var Nt=o(ee,j)+e(-Ft),Lt=o(ee,j)+e(-Ge);U.bg.attr("transform",Nt),U["radial-grid"].attr("transform",Nt),U["radial-axis"].attr("transform",Lt),U["radial-line"].select("line").attr("transform",Lt),le.updateRadialAxisTitle(Ve,dt,Ge)}else le.clipPaths.forTraces.select("path").attr("transform",o(Q,ne)+e(Ft));ge.each(function(){var rt=d.select(this),ut=r.getTranslate(rt);rt.attr("transform",o(ut.x,ut.y)+e([Ft]))}),me.each(function(){var rt=d.select(this),ut=rt.select("text"),Pt=r.getTranslate(rt);rt.attr("transform",e([Ft,ut.attr("x"),ut.attr("y")])+o(Pt.x,Pt.y))}),re.rotation=w.modHalf(He,360),le.updateAngularAxis(Ve,dt),le._hasClipOnAxisFalse&&!w.isFullCircle(le.sectorInRad)&&he.call(r.hideOutsideRangePoints,le);var St=!1;for(var it in le.traceHash)if(b.traceIs(it,"gl")){var ht=le.traceHash[it],Qe=w.filterVisible(ht),Ce=ht[0][0].trace._module;Ce.plot(oe,le,Qe,dt),Qe.length&&(St=!0)}St&&(x(oe),T(oe));var je={};Ye(je),oe.emit("plotly_relayouting",je)}function Ye(Ue){Ue[le.id+".angularaxis.rotation"]=He,le.vangles&&(Ue[le.id+".radialaxis.angle"]=Ge)}function qe(){me.select("text").attr("transform",null);var Ue={};Ye(Ue),b.call("_guiRelayout",oe,Ue)}ue.prepFn=function(Ue,Ie,Ve){var dt=se[le.id];Ne=dt.angularaxis.rotation;var Dt=ie.getBoundingClientRect();ke=Ie-Dt.left,Ae=Ve-Dt.top,oe._fullLayout._calcInverseTransform(oe);var Yt=w.apply3DTransform(se._invTransform)(ke,Ae);ke=Yt[0],Ae=Yt[1],_e=xe(ke,Ae),ue.moveFn=De,ue.doneFn=qe,m(oe)},le.vangles&&!w.isFullCircle(le.sectorInRad)&&(ue.prepFn=w.noop,M(d.select(ie),null)),g.init(ue)},W.isPtInside=function(se){if(this.isSmith)return!0;var le=this.sectorInRad,oe=this.vangles,U=this.angularAxis.c2g(se.theta),V=this.radialAxis,re=V.c2l(se.r),ee=V._rl,j=oe?L.isPtInsidePolygon:w.isPtInsideSector;return j(re,U,ee,le,oe)},W.pathArc=function(se){var le=this.sectorInRad,oe=this.vangles,U=oe?L.pathPolygon:w.pathArc;return U(se,le[0],le[1],oe)},W.pathSector=function(se){var le=this.sectorInRad,oe=this.vangles,U=oe?L.pathPolygon:w.pathSector;return U(se,le[0],le[1],oe)},W.pathAnnulus=function(se,le){var oe=this.sectorInRad,U=this.vangles,V=U?L.pathPolygonAnnulus:w.pathAnnulus;return V(se,le,oe[0],oe[1],U)},W.pathSubplot=function(){var se=this.innerRadius,le=this.radius;return se?this.pathAnnulus(se,le):this.pathSector(le)},W.fillViewInitialKey=function(se,le){se in this.viewInitial||(this.viewInitial[se]=le)};function q(se){var le=se.ticks+String(se.ticklen)+String(se.showticklabels);return"side"in se&&(le+=se.side),le}function J(se){var le=se[0],oe=se[1],U=oe-le,V=D(le,360),re=V+U,ee=Math.cos(O(V)),j=Math.sin(O(V)),Q=Math.cos(O(re)),ne=Math.sin(O(re)),ae,ie,ue,xe;return V<=90&&re>=90||V>90&&re>=450?xe=1:j<=0&&ne<=0?xe=0:xe=Math.max(j,ne),V<=180&&re>=180||V>180&&re>=540?ae=-1:ee>=0&&Q>=0?ae=0:ae=Math.min(ee,Q),V<=270&&re>=270||V>270&&re>=630?ie=-1:j>=0&&ne>=0?ie=0:ie=Math.min(j,ne),re>=360?ue=1:ee<=0&&Q<=0?ue=0:ue=Math.max(ee,Q),[ae,ie,ue,xe]}function X(se,le){var oe=function(V){return w.angleDist(se,V)},U=w.findIndexOfMin(le,oe);return le[U]}function Z(se,le,oe){return le?(se.attr("display",null),se.attr(oe)):se&&se.attr("display","none"),se}},{"../../components/color":366,"../../components/dragelement":385,"../../components/drawing":388,"../../components/fx":406,"../../components/titles":464,"../../constants/alignment":471,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/setcursor":524,"../../plot_api/subroutines":544,"../../plots/cartesian/axes":554,"../../registry":638,"../cartesian/autorange":553,"../cartesian/dragbox":563,"../cartesian/select":575,"../cartesian/set_convert":576,"../plots":619,"../smith/helpers":628,"./constants":620,"./helpers":621,"./set_convert":626,"@plotly/d3":58,tinycolor2:312}],626:[function(t,B,H){var d=t("../../lib"),l=t("../cartesian/set_convert"),b=d.deg2rad,w=d.rad2deg;B.exports=function(c,s,i){switch(l(c,i),c._id){case"x":case"radialaxis":e(c,s);break;case"angularaxis":r(c,s);break}};function e(n,c){var s=c._subplot;n.setGeometry=function(){var i=n._rl[0],v=n._rl[1],u=s.innerRadius,g=(s.radius-u)/(v-i),h=u/g,y=i>v?function(p){return p<=0}:function(p){return p>=0};n.c2g=function(p){var A=n.c2l(p)-i;return(y(A)?A:0)+h},n.g2c=function(p){return n.l2c(p+i-h)},n.g2p=function(p){return p*g},n.c2p=function(p){return n.g2p(n.c2g(p))}}}function o(n,c){return c==="degrees"?b(n):n}function a(n,c){return c==="degrees"?w(n):n}function r(n,c){var s=n.type;if(s==="linear"){var i=n.d2c,v=n.c2d;n.d2c=function(u,g){return o(i(u),g)},n.c2d=function(u,g){return v(a(u,g))}}n.makeCalcdata=function(u,g){var h=u[g],y=u._length,p,A,m=function(f){return n.d2c(f,u.thetaunit)};if(h){if(d.isTypedArray(h)&&s==="linear"){if(y===h.length)return h;if(h.subarray)return h.subarray(0,y)}for(p=new Array(y),A=0;A<y;A++)p[A]=m(h[A])}else{var M=g+"0",x="d"+g,T=M in u?m(u[M]):0,_=u[x]?m(u[x]):(n.period||2*Math.PI)/y;for(p=new Array(y),A=0;A<y;A++)p[A]=T+A*_}return p},n.setGeometry=function(){var u=c.sector,g=u.map(b),h={clockwise:-1,counterclockwise:1}[n.direction],y=b(n.rotation),p=function(L){return h*L+y},A=function(L){return(L-y)/h},m,M,x,T;switch(s){case"linear":M=m=d.identity,T=b,x=w,n.range=d.isFullCircle(g)?[u[0],u[0]+360]:g.map(A).map(w);break;case"category":var _=n._categories.length,f=n.period?Math.max(n.period,_):_;f===0&&(f=1),M=T=function(L){return L*2*Math.PI/f},m=x=function(L){return L*f/Math.PI/2},n.range=[0,f];break}n.c2g=function(L){return p(M(L))},n.g2c=function(L){return m(A(L))},n.t2g=function(L){return p(T(L))},n.g2t=function(L){return x(A(L))}}}},{"../../lib":503,"../cartesian/set_convert":576}],627:[function(t,B,H){B.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},{}],628:[function(t,B,H){function d(a){return a<0?-1:a>0?1:0}function l(a){var r=a[0],n=a[1];if(!isFinite(r)||!isFinite(n))return[1,0];var c=(r+1)*(r+1)+n*n;return[(r*r+n*n-1)/c,2*n/c]}function b(a,r){var n=r[0],c=r[1];return[n*a.radius+a.cx,-c*a.radius+a.cy]}function w(a,r){return r*a.radius}function e(a,r,n,c){var s=b(a,l([n,r])),i=s[0],v=s[1],u=b(a,l([c,r])),g=u[0],h=u[1];if(r===0)return["M"+i+","+v,"L"+g+","+h].join(" ");var y=w(a,1/Math.abs(r));return["M"+i+","+v,"A"+y+","+y+" 0 0,"+(r<0?1:0)+" "+g+","+h].join(" ")}function o(a,r,n,c){var s=w(a,1/(r+1)),i=b(a,l([r,n])),v=i[0],u=i[1],g=b(a,l([r,c])),h=g[0],y=g[1];if(d(n)!==d(c)){var p=b(a,l([r,0])),A=p[0],m=p[1];return["M"+v+","+u,"A"+s+","+s+" 0 0,"+(0<n?0:1)+" "+A+","+m,"A"+s+","+s+" 0 0,"+(c<0?0:1)+h+","+y].join(" ")}return["M"+v+","+u,"A"+s+","+s+" 0 0,"+(c<n?0:1)+" "+h+","+y].join(" ")}B.exports={smith:l,reactanceArc:e,resistanceArc:o,smithTransform:b}},{}],629:[function(t,B,H){var d=t("../get_data").getSubplotCalcData,l=t("../../lib").counterRegex,b=t("../polar/polar"),w=t("./constants"),e=w.attr,o=w.name,a=l(o),r={};r[e]={valType:"subplotid",dflt:o,editType:"calc"};function n(s){for(var i=s._fullLayout,v=s.calcdata,u=i._subplots[o],g=0;g<u.length;g++){var h=u[g],y=d(v,o,h),p=i[h]._subplot;p||(p=b(s,h,!0),i[h]._subplot=p),p.plot(y,i,s._promises)}}function c(s,i,v,u){for(var g=u._subplots[o]||[],h=0;h<g.length;h++){var y=g[h],p=u[y]._subplot;if(!i[y]&&!!p){p.framework.remove();for(var A in p.clipPaths)p.clipPaths[A].remove()}}}B.exports={attr:e,name:o,idRoot:o,idRegex:a,attrRegex:a,attributes:r,layoutAttributes:t("./layout_attributes"),supplyLayoutDefaults:t("./layout_defaults"),plot:n,clean:c,toSVG:t("../cartesian").toSVG}},{"../../lib":503,"../cartesian":568,"../get_data":593,"../polar/polar":625,"./constants":627,"./layout_attributes":630,"./layout_defaults":631}],630:[function(t,B,H){var d=t("../../components/color/attributes"),l=t("../cartesian/layout_attributes"),b=t("../domain").attributes,w=t("../../lib").extendFlat,e=t("../../plot_api/edit_types").overrideAll,o=e({color:l.color,showline:w({},l.showline,{dflt:!0}),linecolor:l.linecolor,linewidth:l.linewidth,showgrid:w({},l.showgrid,{dflt:!0}),gridcolor:l.gridcolor,gridwidth:l.gridwidth},"plot","from-root"),a=e({ticklen:l.ticklen,tickwidth:w({},l.tickwidth,{dflt:2}),tickcolor:l.tickcolor,showticklabels:l.showticklabels,showtickprefix:l.showtickprefix,tickprefix:l.tickprefix,showticksuffix:l.showticksuffix,ticksuffix:l.ticksuffix,tickfont:l.tickfont,tickformat:l.tickformat,hoverformat:l.hoverformat,layer:l.layer},"plot","from-root"),r=w({visible:w({},l.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:w({},l.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},o,a),n=w({visible:w({},l.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:l.ticks,editType:"calc"},o,a);B.exports={domain:b({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:d.background},realaxis:r,imaginaryaxis:n,editType:"calc"}},{"../../components/color/attributes":365,"../../lib":503,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],631:[function(t,B,H){var d=t("../../lib"),l=t("../../components/color"),b=t("../../plot_api/plot_template"),w=t("../subplot_defaults"),e=t("../get_data").getSubplotData,o=t("../cartesian/prefix_suffix_defaults"),a=t("../cartesian/tick_label_defaults"),r=t("../cartesian/line_grid_defaults"),n=t("../cartesian/set_convert"),c=t("./layout_attributes"),s=t("./constants"),i=s.axisNames,v=g(function(h){return h.slice().reverse().map(function(y){return-y}).concat([0]).concat(h)},String);function u(h,y,p,A){var m=p("bgcolor");A.bgColor=l.combine(m,A.paper_bgcolor);var M=e(A.fullData,s.name,A.id),x=A.layoutOut,T;function _(W,q){return p(T+"."+W,q)}for(var f=0;f<i.length;f++){T=i[f],d.isPlainObject(h[T])||(h[T]={});var L=h[T],S=b.newContainer(y,T);S._id=S._name=T,S._attr=A.id+"."+T,S._traceIndices=M.map(function(W){return W._expandedIndex});var k=_("visible");if(S.type="linear",n(S,x),o(L,S,_,S.type),k){var P=T==="realaxis";if(P&&_("side"),P)_("tickvals");else{var z=v(y.realaxis.tickvals||c.realaxis.tickvals.dflt);_("tickvals",z)}var I,R,D,O,F=A.font||{};k&&(I=_("color"),R=I===L.color?I:F.color,D=F.size,O=F.family),a(L,S,_,S.type,{noTicklabelstep:!0,noAng:!P,noExp:!0,font:{color:R,size:D,family:O}}),d.coerce2(h,y,c,T+".ticklen"),d.coerce2(h,y,c,T+".tickwidth"),d.coerce2(h,y,c,T+".tickcolor",y.color);var G=_("ticks");G||(delete y[T].ticklen,delete y[T].tickwidth,delete y[T].tickcolor),r(L,S,_,{dfltColor:I,bgColor:A.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:c[T]}),_("layer")}_("hoverformat"),delete S.type,S._input=L}}B.exports=function(y,p,A){w(y,p,A,{noUirevision:!0,type:s.name,attributes:c,handleDefaults:u,font:p.font,paper_bgcolor:p.paper_bgcolor,fullData:A,layoutOut:p})};function g(h,y){var p={};return function(A){var m=y?y(A):A;if(m in p)return p[m];var M=h(A);return p[m]=M,M}}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/set_convert":576,"../cartesian/tick_label_defaults":578,"../get_data":593,"../subplot_defaults":632,"./constants":627,"./layout_attributes":630}],632:[function(t,B,H){var d=t("../lib"),l=t("../plot_api/plot_template"),b=t("./domain").defaults;B.exports=function(e,o,a,r){var n=r.type,c=r.attributes,s=r.handleDefaults,i=r.partition||"x",v=o._subplots[n],u=v.length,g=u&&v[0].replace(/\d+$/,""),h,y;function p(x,T){return d.coerce(h,y,c,x,T)}for(var A=0;A<u;A++){var m=v[A];e[m]?h=e[m]:h=e[m]={},y=l.newContainer(o,m,g),r.noUirevision||p("uirevision",o.uirevision);var M={};M[i]=[A/u,(A+1)/u],b(y,o,p,M),r.id=m,s(h,y,p,r)}}},{"../lib":503,"../plot_api/plot_template":543,"./domain":584}],633:[function(t,B,H){var d=t("../constants/docs");d.FORMAT_LINK,d.DATE_FORMAT_LINK;function l(b){var w=b.description?" "+b.description:"",e=b.keys||[];if(e.length>0){for(var o=[],a=0;a<e.length;a++)o[a]="`"+e[a]+"`";w=w+"Finally, the template string has access to ",e.length===1?w="variable "+o[0]:w="variables "+o.slice(0,-1).join(", ")+" and "+o.slice(-1)+"."}return w}H.hovertemplateAttrs=function(b,w){b=b||{},w=w||{},l(w);var e={valType:"string",dflt:"",editType:b.editType||"none"};return b.arrayOk!==!1&&(e.arrayOk=!0),e},H.texttemplateAttrs=function(b,w){b=b||{},w=w||{},l(w);var e={valType:"string",dflt:"",editType:b.editType||"calc"};return b.arrayOk!==!1&&(e.arrayOk=!0),e}},{"../constants/docs":474}],634:[function(t,B,H){var d=t("./ternary"),l=t("../../plots/get_data").getSubplotCalcData,b=t("../../lib").counterRegex,w="ternary";H.name=w;var e=H.attr="subplot";H.idRoot=w,H.idRegex=H.attrRegex=b(w);var o=H.attributes={};o[e]={valType:"subplotid",dflt:"ternary",editType:"calc"},H.layoutAttributes=t("./layout_attributes"),H.supplyLayoutDefaults=t("./layout_defaults"),H.plot=function(r){for(var n=r._fullLayout,c=r.calcdata,s=n._subplots[w],i=0;i<s.length;i++){var v=s[i],u=l(c,w,v),g=n[v]._subplot;g||(g=new d({id:v,graphDiv:r,container:n._ternarylayer.node()},n),n[v]._subplot=g),g.plot(u,n,r._promises)}},H.clean=function(a,r,n,c){for(var s=c._subplots[w]||[],i=0;i<s.length;i++){var v=s[i],u=c[v]._subplot;!r[v]&&!!u&&(u.plotContainer.remove(),u.clipDef.remove(),u.clipDefRelative.remove(),u.layers["a-title"].remove(),u.layers["b-title"].remove(),u.layers["c-title"].remove())}}},{"../../lib":503,"../../plots/get_data":593,"./layout_attributes":635,"./layout_defaults":636,"./ternary":637}],635:[function(t,B,H){var d=t("../../components/color/attributes"),l=t("../domain").attributes,b=t("../cartesian/layout_attributes"),w=t("../../plot_api/edit_types").overrideAll,e=t("../../lib/extend").extendFlat,o={title:{text:b.title.text,font:b.title.font},color:b.color,tickmode:b.tickmode,nticks:e({},b.nticks,{dflt:6,min:1}),tick0:b.tick0,dtick:b.dtick,tickvals:b.tickvals,ticktext:b.ticktext,ticks:b.ticks,ticklen:b.ticklen,tickwidth:b.tickwidth,tickcolor:b.tickcolor,ticklabelstep:b.ticklabelstep,showticklabels:b.showticklabels,showtickprefix:b.showtickprefix,tickprefix:b.tickprefix,showticksuffix:b.showticksuffix,ticksuffix:b.ticksuffix,showexponent:b.showexponent,exponentformat:b.exponentformat,minexponent:b.minexponent,separatethousands:b.separatethousands,tickfont:b.tickfont,tickangle:b.tickangle,tickformat:b.tickformat,tickformatstops:b.tickformatstops,hoverformat:b.hoverformat,showline:e({},b.showline,{dflt:!0}),linecolor:b.linecolor,linewidth:b.linewidth,showgrid:e({},b.showgrid,{dflt:!0}),gridcolor:b.gridcolor,gridwidth:b.gridwidth,layer:b.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:b._deprecated.title,titlefont:b._deprecated.titlefont}},a=B.exports=w({domain:l({name:"ternary"}),bgcolor:{valType:"color",dflt:d.background},sum:{valType:"number",dflt:1,min:0},aaxis:o,baxis:o,caxis:o},"plot","from-root");a.uirevision={valType:"any",editType:"none"},a.aaxis.uirevision=a.baxis.uirevision=a.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],636:[function(t,B,H){var d=t("../../components/color"),l=t("../../plot_api/plot_template"),b=t("../../lib"),w=t("../subplot_defaults"),e=t("../cartesian/tick_label_defaults"),o=t("../cartesian/prefix_suffix_defaults"),a=t("../cartesian/tick_mark_defaults"),r=t("../cartesian/tick_value_defaults"),n=t("../cartesian/line_grid_defaults"),c=t("./layout_attributes"),s=["aaxis","baxis","caxis"];B.exports=function(g,h,y){w(g,h,y,{type:"ternary",attributes:c,handleDefaults:i,font:h.font,paper_bgcolor:h.paper_bgcolor})};function i(u,g,h,y){var p=h("bgcolor"),A=h("sum");y.bgColor=d.combine(p,y.paper_bgcolor);for(var m,M,x,T=0;T<s.length;T++)m=s[T],M=u[m]||{},x=l.newContainer(g,m),x._name=m,v(M,x,y,g);var _=g.aaxis,f=g.baxis,L=g.caxis;_.min+f.min+L.min>=A&&(_.min=0,f.min=0,L.min=0,u.aaxis&&delete u.aaxis.min,u.baxis&&delete u.baxis.min,u.caxis&&delete u.caxis.min)}function v(u,g,h,y){var p=c[g._name];function A(S,k){return b.coerce(u,g,p,S,k)}A("uirevision",y.uirevision),g.type="linear";var m=A("color"),M=m!==p.color.dflt?m:h.font.color,x=g._name,T=x.charAt(0).toUpperCase(),_="Component "+T,f=A("title.text",_);g._hovertitle=f===_?f:T,b.coerceFont(A,"title.font",{family:h.font.family,size:b.bigFont(h.font.size),color:M}),A("min"),r(u,g,A,"linear"),o(u,g,A,"linear"),e(u,g,A,"linear"),a(u,g,A,{outerTicks:!0});var L=A("showticklabels");L&&(b.coerceFont(A,"tickfont",{family:h.font.family,size:h.font.size,color:M}),A("tickangle"),A("tickformat")),n(u,g,A,{dfltColor:m,bgColor:h.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:p}),A("hoverformat"),A("layer")}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/tick_label_defaults":578,"../cartesian/tick_mark_defaults":579,"../cartesian/tick_value_defaults":580,"../subplot_defaults":632,"./layout_attributes":635}],637:[function(t,B,H){var d=t("@plotly/d3"),l=t("tinycolor2"),b=t("../../registry"),w=t("../../lib"),e=w.strTranslate,o=w._,a=t("../../components/color"),r=t("../../components/drawing"),n=t("../cartesian/set_convert"),c=t("../../lib/extend").extendFlat,s=t("../plots"),i=t("../cartesian/axes"),v=t("../../components/dragelement"),u=t("../../components/fx"),g=t("../../components/dragelement/helpers"),h=g.freeMode,y=g.rectMode,p=t("../../components/titles"),A=t("../cartesian/select").prepSelect,m=t("../cartesian/select").selectOnClick,M=t("../cartesian/select").clearSelect,x=t("../cartesian/select").clearSelectionsCache,T=t("../cartesian/constants");function _(F,G){this.id=F.id,this.graphDiv=F.graphDiv,this.init(G),this.makeFramework(G),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}B.exports=_;var f=_.prototype;f.init=function(F){this.container=F._ternarylayer,this.defs=F._defs,this.layoutId=F._uid,this.traceHash={},this.layers={}},f.plot=function(F,G){var W=this,q=G[W.id],J=G._size;W._hasClipOnAxisFalse=!1;for(var X=0;X<F.length;X++){var Z=F[X][0].trace;if(Z.cliponaxis===!1){W._hasClipOnAxisFalse=!0;break}}W.updateLayers(q),W.adjustLayout(q,J),s.generalUpdatePerTraceModule(W.graphDiv,W,F,q),W.layers.plotbg.select("path").call(a.fill,q.bgcolor)},f.makeFramework=function(F){var G=this,W=G.graphDiv,q=F[G.id],J=G.clipId="clip"+G.layoutId+G.id,X=G.clipIdRelative="clip-relative"+G.layoutId+G.id;G.clipDef=w.ensureSingleById(F._clips,"clipPath",J,function(Z){Z.append("path").attr("d","M0,0Z")}),G.clipDefRelative=w.ensureSingleById(F._clips,"clipPath",X,function(Z){Z.append("path").attr("d","M0,0Z")}),G.plotContainer=w.ensureSingle(G.container,"g",G.id),G.updateLayers(q),r.setClipUrl(G.layers.backplot,J,W),r.setClipUrl(G.layers.grids,J,W)},f.updateLayers=function(F){var G=this,W=G.layers,q=["draglayer","plotbg","backplot","grids"];F.aaxis.layer==="below traces"&&q.push("aaxis","aline"),F.baxis.layer==="below traces"&&q.push("baxis","bline"),F.caxis.layer==="below traces"&&q.push("caxis","cline"),q.push("frontplot"),F.aaxis.layer==="above traces"&&q.push("aaxis","aline"),F.baxis.layer==="above traces"&&q.push("baxis","bline"),F.caxis.layer==="above traces"&&q.push("caxis","cline");var J=G.plotContainer.selectAll("g.toplevel").data(q,String),X=["agrid","bgrid","cgrid"];J.enter().append("g").attr("class",function(Z){return"toplevel "+Z}).each(function(Z){var se=d.select(this);W[Z]=se,Z==="frontplot"?se.append("g").classed("scatterlayer",!0):Z==="backplot"?se.append("g").classed("maplayer",!0):Z==="plotbg"?se.append("path").attr("d","M0,0Z"):Z==="aline"||Z==="bline"||Z==="cline"?se.append("path"):Z==="grids"&&X.forEach(function(le){W[le]=se.append("g").classed("grid "+le,!0)})}),J.order()};var L=Math.sqrt(4/3);f.adjustLayout=function(F,G){var W=this,q=F.domain,J=(q.x[0]+q.x[1])/2,X=(q.y[0]+q.y[1])/2,Z=q.x[1]-q.x[0],se=q.y[1]-q.y[0],le=Z*G.w,oe=se*G.h,U=F.sum,V=F.aaxis.min,re=F.baxis.min,ee=F.caxis.min,j,Q,ne,ae,ie,ue;le>L*oe?(ae=oe,ne=ae*L):(ne=le,ae=ne/L),ie=Z*ne/le,ue=se*ae/oe,j=G.l+G.w*J-ne/2,Q=G.t+G.h*(1-X)-ae/2,W.x0=j,W.y0=Q,W.w=ne,W.h=ae,W.sum=U,W.xaxis={type:"linear",range:[V+2*ee-U,U-V-2*re],domain:[J-ie/2,J+ie/2],_id:"x"},n(W.xaxis,W.graphDiv._fullLayout),W.xaxis.setScale(),W.xaxis.isPtWithinRange=function(De){return De.a>=W.aaxis.range[0]&&De.a<=W.aaxis.range[1]&&De.b>=W.baxis.range[1]&&De.b<=W.baxis.range[0]&&De.c>=W.caxis.range[1]&&De.c<=W.caxis.range[0]},W.yaxis={type:"linear",range:[V,U-re-ee],domain:[X-ue/2,X+ue/2],_id:"y"},n(W.yaxis,W.graphDiv._fullLayout),W.yaxis.setScale(),W.yaxis.isPtWithinRange=function(){return!0};var xe=W.yaxis.domain[0],he=W.aaxis=c({},F.aaxis,{range:[V,U-re-ee],side:"left",tickangle:(+F.aaxis.tickangle||0)-30,domain:[xe,xe+ue*L],anchor:"free",position:0,_id:"y",_length:ne});n(he,W.graphDiv._fullLayout),he.setScale();var ge=W.baxis=c({},F.baxis,{range:[U-V-ee,re],side:"bottom",domain:W.xaxis.domain,anchor:"free",position:0,_id:"x",_length:ne});n(ge,W.graphDiv._fullLayout),ge.setScale();var me=W.caxis=c({},F.caxis,{range:[U-V-re,ee],side:"right",tickangle:(+F.caxis.tickangle||0)+30,domain:[xe,xe+ue*L],anchor:"free",position:0,_id:"y",_length:ne});n(me,W.graphDiv._fullLayout),me.setScale();var ke="M"+j+","+(Q+ae)+"h"+ne+"l-"+ne/2+",-"+ae+"Z";W.clipDef.select("path").attr("d",ke),W.layers.plotbg.select("path").attr("d",ke);var Ae="M0,"+ae+"h"+ne+"l-"+ne/2+",-"+ae+"Z";W.clipDefRelative.select("path").attr("d",Ae);var Ne=e(j,Q);W.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Ne),W.clipDefRelative.select("path").attr("transform",null);var He=e(j-ge._offset,Q+ae);W.layers.baxis.attr("transform",He),W.layers.bgrid.attr("transform",He);var Ge=e(j+ne/2,Q)+"rotate(30)"+e(0,-he._offset);W.layers.aaxis.attr("transform",Ge),W.layers.agrid.attr("transform",Ge);var _e=e(j+ne/2,Q)+"rotate(-30)"+e(0,-me._offset);W.layers.caxis.attr("transform",_e),W.layers.cgrid.attr("transform",_e),W.drawAxes(!0),W.layers.aline.select("path").attr("d",he.showline?"M"+j+","+(Q+ae)+"l"+ne/2+",-"+ae:"M0,0").call(a.stroke,he.linecolor||"#000").style("stroke-width",(he.linewidth||0)+"px"),W.layers.bline.select("path").attr("d",ge.showline?"M"+j+","+(Q+ae)+"h"+ne:"M0,0").call(a.stroke,ge.linecolor||"#000").style("stroke-width",(ge.linewidth||0)+"px"),W.layers.cline.select("path").attr("d",me.showline?"M"+(j+ne/2)+","+Q+"l"+ne/2+","+ae:"M0,0").call(a.stroke,me.linecolor||"#000").style("stroke-width",(me.linewidth||0)+"px"),W.graphDiv._context.staticPlot||W.initInteractions(),r.setClipUrl(W.layers.frontplot,W._hasClipOnAxisFalse?null:W.clipId,W.graphDiv)},f.drawAxes=function(F){var G=this,W=G.graphDiv,q=G.id.substr(7)+"title",J=G.layers,X=G.aaxis,Z=G.baxis,se=G.caxis;if(G.drawAx(X),G.drawAx(Z),G.drawAx(se),F){var le=Math.max(X.showticklabels?X.tickfont.size/2:0,(se.showticklabels?se.tickfont.size*.75:0)+(se.ticks==="outside"?se.ticklen*.87:0)),oe=(Z.showticklabels?Z.tickfont.size:0)+(Z.ticks==="outside"?Z.ticklen:0)+3;J["a-title"]=p.draw(W,"a"+q,{propContainer:X,propName:G.id+".aaxis.title",placeholder:o(W,"Click to enter Component A title"),attributes:{x:G.x0+G.w/2,y:G.y0-X.title.font.size/3-le,"text-anchor":"middle"}}),J["b-title"]=p.draw(W,"b"+q,{propContainer:Z,propName:G.id+".baxis.title",placeholder:o(W,"Click to enter Component B title"),attributes:{x:G.x0-oe,y:G.y0+G.h+Z.title.font.size*.83+oe,"text-anchor":"middle"}}),J["c-title"]=p.draw(W,"c"+q,{propContainer:se,propName:G.id+".caxis.title",placeholder:o(W,"Click to enter Component C title"),attributes:{x:G.x0+G.w+oe,y:G.y0+G.h+se.title.font.size*.83+oe,"text-anchor":"middle"}})}},f.drawAx=function(F){var G=this,W=G.graphDiv,q=F._name,J=q.charAt(0),X=F._id,Z=G.layers[q],se=30,le=J+"tickLayout",oe=S(F);G[le]!==oe&&(Z.selectAll("."+X+"tick").remove(),G[le]=oe),F.setScale();var U=i.calcTicks(F),V=i.clipEnds(F,U),re=i.makeTransTickFn(F),ee=i.getTickSigns(F)[2],j=w.deg2rad(se),Q=ee*(F.linewidth||1)/2,ne=ee*F.ticklen,ae=G.w,ie=G.h,ue=J==="b"?"M0,"+Q+"l"+Math.sin(j)*ne+","+Math.cos(j)*ne:"M"+Q+",0l"+Math.cos(j)*ne+","+-Math.sin(j)*ne,xe={a:"M0,0l"+ie+",-"+ae/2,b:"M0,0l-"+ae/2+",-"+ie,c:"M0,0l-"+ie+","+ae/2}[J];i.drawTicks(W,F,{vals:F.ticks==="inside"?V:U,layer:Z,path:ue,transFn:re,crisp:!1}),i.drawGrid(W,F,{vals:V,layer:G.layers[J+"grid"],path:xe,transFn:re,crisp:!1}),i.drawLabels(W,F,{vals:U,layer:Z,transFn:re,labelFns:i.makeLabelFns(F,0,se)})};function S(F){return F.ticks+String(F.ticklen)+String(F.showticklabels)}var k=T.MINZOOM/2+.87,P="m-0.87,.5h"+k+"v3h-"+(k+5.2)+"l"+(k/2+2.6)+",-"+(k*.87+4.5)+"l2.6,1.5l-"+k/2+","+k*.87+"Z",z="m0.87,.5h-"+k+"v3h"+(k+5.2)+"l-"+(k/2+2.6)+",-"+(k*.87+4.5)+"l-2.6,1.5l"+k/2+","+k*.87+"Z",I="m0,1l"+k/2+","+k*.87+"l2.6,-1.5l-"+(k/2+2.6)+",-"+(k*.87+4.5)+"l-"+(k/2+2.6)+","+(k*.87+4.5)+"l2.6,1.5l"+k/2+",-"+k*.87+"Z",R="m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2Z",D=!0;f.clearSelect=function(){x(this.dragOptions),M(this.dragOptions.gd)},f.initInteractions=function(){var F=this,G=F.layers.plotbg.select("path").node(),W=F.graphDiv,q=W._fullLayout._zoomlayer,J,X;this.dragOptions={element:G,gd:W,plotinfo:{id:F.id,domain:W._fullLayout[F.id].domain,xaxis:F.xaxis,yaxis:F.yaxis},subplot:F.id,prepFn:function(He,Ge,_e){F.dragOptions.xaxes=[F.xaxis],F.dragOptions.yaxes=[F.yaxis],J=W._fullLayout._invScaleX,X=W._fullLayout._invScaleY;var De=F.dragOptions.dragmode=W._fullLayout.dragmode;h(De)?F.dragOptions.minDrag=1:F.dragOptions.minDrag=void 0,De==="zoom"?(F.dragOptions.moveFn=ge,F.dragOptions.clickFn=ae,F.dragOptions.doneFn=me,ie(He,Ge,_e)):De==="pan"?(F.dragOptions.moveFn=Ae,F.dragOptions.clickFn=ae,F.dragOptions.doneFn=Ne,ke(),F.clearSelect(W)):(y(De)||h(De))&&A(He,Ge,_e,F.dragOptions,De)}};var Z,se,le,oe,U,V,re,ee,j,Q;function ne(He){var Ge={};return Ge[F.id+".aaxis.min"]=He.a,Ge[F.id+".baxis.min"]=He.b,Ge[F.id+".caxis.min"]=He.c,Ge}function ae(He,Ge){var _e=W._fullLayout.clickmode;O(W),He===2&&(W.emit("plotly_doubleclick",null),b.call("_guiRelayout",W,ne({a:0,b:0,c:0}))),_e.indexOf("select")>-1&&He===1&&m(Ge,W,[F.xaxis],[F.yaxis],F.id,F.dragOptions),_e.indexOf("event")>-1&&u.click(W,Ge,F.id)}function ie(He,Ge,_e){var De=G.getBoundingClientRect();Z=Ge-De.left,se=_e-De.top,W._fullLayout._calcInverseTransform(W);var Ye=W._fullLayout._invTransform,qe=w.apply3DTransform(Ye)(Z,se);Z=qe[0],se=qe[1],le={a:F.aaxis.range[0],b:F.baxis.range[1],c:F.caxis.range[1]},U=le,oe=F.aaxis.range[1]-le.a,V=l(F.graphDiv._fullLayout[F.id].bgcolor).getLuminance(),re="M0,"+F.h+"L"+F.w/2+", 0L"+F.w+","+F.h+"Z",ee=!1,j=q.append("path").attr("class","zoombox").attr("transform",e(F.x0,F.y0)).style({fill:V>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",re),Q=q.append("path").attr("class","zoombox-corners").attr("transform",e(F.x0,F.y0)).style({fill:a.background,stroke:a.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),F.clearSelect(W)}function ue(He,Ge){return 1-Ge/F.h}function xe(He,Ge){return 1-(He+(F.h-Ge)/Math.sqrt(3))/F.w}function he(He,Ge){return(He-(F.h-Ge)/Math.sqrt(3))/F.w}function ge(He,Ge){var _e=Z+He*J,De=se+Ge*X,Ye=Math.max(0,Math.min(1,ue(Z,se),ue(_e,De))),qe=Math.max(0,Math.min(1,xe(Z,se),xe(_e,De))),Ue=Math.max(0,Math.min(1,he(Z,se),he(_e,De))),Ie=(Ye/2+Ue)*F.w,Ve=(1-Ye/2-qe)*F.w,dt=(Ie+Ve)/2,Dt=Ve-Ie,Yt=(1-Ye)*F.h,kt=Yt-Dt/L;Dt<T.MINZOOM?(U=le,j.attr("d",re),Q.attr("d","M0,0Z")):(U={a:le.a+Ye*oe,b:le.b+qe*oe,c:le.c+Ue*oe},j.attr("d",re+"M"+Ie+","+Yt+"H"+Ve+"L"+dt+","+kt+"L"+Ie+","+Yt+"Z"),Q.attr("d","M"+Z+","+se+R+"M"+Ie+","+Yt+P+"M"+Ve+","+Yt+z+"M"+dt+","+kt+I)),ee||(j.transition().style("fill",V>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),Q.transition().style("opacity",1).duration(200),ee=!0),W.emit("plotly_relayouting",ne(U))}function me(){O(W),U!==le&&(b.call("_guiRelayout",W,ne(U)),D&&W.data&&W._context.showTips&&(w.notifier(o(W,"Double-click to zoom back out"),"long"),D=!1))}function ke(){le={a:F.aaxis.range[0],b:F.baxis.range[1],c:F.caxis.range[1]},U=le}function Ae(He,Ge){var _e=He/F.xaxis._m,De=Ge/F.yaxis._m;U={a:le.a-De,b:le.b+(_e+De)/2,c:le.c-(_e-De)/2};var Ye=[U.a,U.b,U.c].sort(w.sorterAsc),qe={a:Ye.indexOf(U.a),b:Ye.indexOf(U.b),c:Ye.indexOf(U.c)};Ye[0]<0&&(Ye[1]+Ye[0]/2<0?(Ye[2]+=Ye[0]+Ye[1],Ye[0]=Ye[1]=0):(Ye[2]+=Ye[0]/2,Ye[1]+=Ye[0]/2,Ye[0]=0),U={a:Ye[qe.a],b:Ye[qe.b],c:Ye[qe.c]},Ge=(le.a-U.a)*F.yaxis._m,He=(le.c-U.c-le.b+U.b)*F.xaxis._m);var Ue=e(F.x0+He,F.y0+Ge);F.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Ue);var Ie=e(-He,-Ge);F.clipDefRelative.select("path").attr("transform",Ie),F.aaxis.range=[U.a,F.sum-U.b-U.c],F.baxis.range=[F.sum-U.a-U.c,U.b],F.caxis.range=[F.sum-U.a-U.b,U.c],F.drawAxes(!1),F._hasClipOnAxisFalse&&F.plotContainer.select(".scatterlayer").selectAll(".trace").call(r.hideOutsideRangePoints,F),W.emit("plotly_relayouting",ne(U))}function Ne(){b.call("_guiRelayout",W,ne(U))}G.onmousemove=function(He){u.hover(W,He,F.id),W._fullLayout._lasthover=G,W._fullLayout._hoversubplot=F.id},G.onmouseout=function(He){W._dragging||v.unhover(W,He)},v.init(this.dragOptions)};function O(F){d.select(F).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}},{"../../components/color":366,"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../components/titles":464,"../../lib":503,"../../lib/extend":493,"../../registry":638,"../cartesian/axes":554,"../cartesian/constants":561,"../cartesian/select":575,"../cartesian/set_convert":576,"../plots":619,"@plotly/d3":58,tinycolor2:312}],638:[function(t,B,H){var d=t("./lib/loggers"),l=t("./lib/noop"),b=t("./lib/push_unique"),w=t("./lib/is_plain_object"),e=t("./lib/dom").addStyleRule,o=t("./lib/extend"),a=t("./plots/attributes"),r=t("./plots/layout_attributes"),n=o.extendFlat,c=o.extendDeepAll;H.modules={},H.allCategories={},H.allTypes=[],H.subplotsRegistry={},H.transformsRegistry={},H.componentsRegistry={},H.layoutArrayContainers=[],H.layoutArrayRegexes=[],H.traceLayoutAttributes={},H.localeRegistry={},H.apiMethodRegistry={},H.collectableSubplotTypes=null,H.register=function(x){if(H.collectableSubplotTypes=null,x)x&&!Array.isArray(x)&&(x=[x]);else throw new Error("No argument passed to Plotly.register.");for(var T=0;T<x.length;T++){var _=x[T];if(!_)throw new Error("Invalid module was attempted to be registered!");switch(_.moduleType){case"trace":s(_);break;case"transform":u(_);break;case"component":v(_);break;case"locale":g(_);break;case"apiMethod":var f=_.name;H.apiMethodRegistry[f]=_.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},H.getModule=function(M){var x=H.modules[m(M)];return x?x._module:!1},H.traceIs=function(M,x){if(M=m(M),M==="various")return!1;var T=H.modules[M];return T||(M&&d.log("Unrecognized trace type "+M+"."),T=H.modules[a.type.dflt]),!!T.categories[x]},H.getTransformIndices=function(M,x){for(var T=[],_=M.transforms||[],f=0;f<_.length;f++)_[f].type===x&&T.push(f);return T},H.hasTransform=function(M,x){for(var T=M.transforms||[],_=0;_<T.length;_++)if(T[_].type===x)return!0;return!1},H.getComponentMethod=function(M,x){var T=H.componentsRegistry[M];return T&&T[x]||l},H.call=function(){var M=arguments[0],x=[].slice.call(arguments,1);return H.apiMethodRegistry[M].apply(null,x)};function s(M){var x=M.name,T=M.categories,_=M.meta;if(H.modules[x]){d.log("Type "+x+" already registered");return}H.subplotsRegistry[M.basePlotModule.name]||i(M.basePlotModule);for(var f={},L=0;L<T.length;L++)f[T[L]]=!0,H.allCategories[T[L]]=!0;H.modules[x]={_module:M,categories:f},_&&Object.keys(_).length&&(H.modules[x].meta=_),H.allTypes.push(x);for(var S in H.componentsRegistry)y(S,x);M.layoutAttributes&&n(H.traceLayoutAttributes,M.layoutAttributes);var k=M.basePlotModule,P=k.name;if(P==="mapbox"){var z=k.constants.styleRules;for(var I in z)e(".js-plotly-plot .plotly .mapboxgl-"+I,z[I])}(P==="geo"||P==="mapbox")&&typeof window!==void 0&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function i(M){var x=M.name;if(H.subplotsRegistry[x]){d.log("Plot type "+x+" already registered.");return}h(M),H.subplotsRegistry[x]=M;for(var T in H.componentsRegistry)A(T,M.name)}function v(M){if(typeof M.name!="string")throw new Error("Component module *name* must be a string.");var x=M.name;H.componentsRegistry[x]=M,M.layoutAttributes&&(M.layoutAttributes._isLinkedToArray&&b(H.layoutArrayContainers,x),h(M));for(var T in H.modules)y(x,T);for(var _ in H.subplotsRegistry)A(x,_);for(var f in H.transformsRegistry)p(x,f);M.schema&&M.schema.layout&&c(r,M.schema.layout)}function u(M){if(typeof M.name!="string")throw new Error("Transform module *name* must be a string.");var x="Transform module "+M.name,T=typeof M.transform=="function",_=typeof M.calcTransform=="function";if(!T&&!_)throw new Error(x+" is missing a *transform* or *calcTransform* method.");T&&_&&d.log([x+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),w(M.attributes)||d.log(x+" registered without an *attributes* object."),typeof M.supplyDefaults!="function"&&d.log(x+" registered without a *supplyDefaults* method."),H.transformsRegistry[M.name]=M;for(var f in H.componentsRegistry)p(f,M.name)}function g(M){var x=M.name,T=x.split("-")[0],_=M.dictionary,f=M.format,L=_&&Object.keys(_).length,S=f&&Object.keys(f).length,k=H.localeRegistry,P=k[x];if(P||(k[x]=P={}),T!==x){var z=k[T];z||(k[T]=z={}),L&&z.dictionary===P.dictionary&&(z.dictionary=_),S&&z.format===P.format&&(z.format=f)}L&&(P.dictionary=_),S&&(P.format=f)}function h(M){if(M.layoutAttributes){var x=M.layoutAttributes._arrayAttrRegexps;if(x)for(var T=0;T<x.length;T++)b(H.layoutArrayRegexes,x[T])}}function y(M,x){var T=H.componentsRegistry[M].schema;if(!(!T||!T.traces)){var _=T.traces[x];_&&c(H.modules[x]._module.attributes,_)}}function p(M,x){var T=H.componentsRegistry[M].schema;if(!(!T||!T.transforms)){var _=T.transforms[x];_&&c(H.transformsRegistry[x].attributes,_)}}function A(M,x){var T=H.componentsRegistry[M].schema;if(!(!T||!T.subplots)){var _=H.subplotsRegistry[x],f=_.layoutAttributes,L=_.attr==="subplot"?_.name:_.attr;Array.isArray(L)&&(L=L[0]);var S=T.subplots[L];f&&S&&c(f,S)}}function m(M){return typeof M=="object"&&(M=M.type),M}},{"./lib/dom":491,"./lib/extend":493,"./lib/is_plain_object":504,"./lib/loggers":507,"./lib/noop":512,"./lib/push_unique":518,"./plots/attributes":550,"./plots/layout_attributes":610}],639:[function(t,B,H){var d=t("../registry"),l=t("../lib"),b=l.extendFlat,w=l.extendDeep;function e(a){var r;switch(a){case"themes__thumb":r={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":r={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:r={}}return r}function o(a){var r=["xaxis","yaxis","zaxis"];return r.indexOf(a.slice(0,5))>-1}B.exports=function(r,n){var c,s=r.data,i=r.layout,v=w([],s),u=w({},i,e(n.tileClass)),g=r._context||{};if(n.width&&(u.width=n.width),n.height&&(u.height=n.height),n.tileClass==="thumbnail"||n.tileClass==="themes__thumb"){u.annotations=[];var h=Object.keys(u);for(c=0;c<h.length;c++)o(h[c])&&(u[h[c]].title={text:""});for(c=0;c<v.length;c++){var y=v[c];y.showscale=!1,y.marker&&(y.marker.showscale=!1),d.traceIs(y,"pie-like")&&(y.textposition="none")}}if(Array.isArray(n.annotations))for(c=0;c<n.annotations.length;c++)u.annotations.push(n.annotations[c]);var p=Object.keys(u).filter(function(T){return T.match(/^scene\d*$/)});if(p.length){var A={};for(n.tileClass==="thumbnail"&&(A={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),c=0;c<p.length;c++){var m=u[p[c]];m.xaxis||(m.xaxis={}),m.yaxis||(m.yaxis={}),m.zaxis||(m.zaxis={}),b(m.xaxis,A),b(m.yaxis,A),b(m.zaxis,A),m._scene=null}}var M=document.createElement("div");n.tileClass&&(M.className=n.tileClass);var x={gd:M,td:M,layout:u,data:v,config:{staticPlot:n.staticPlot===void 0?!0:n.staticPlot,plotGlPixelRatio:n.plotGlPixelRatio===void 0?2:n.plotGlPixelRatio,displaylogo:n.displaylogo||!1,showLink:n.showLink||!1,showTips:n.showTips||!1,mapboxAccessToken:g.mapboxAccessToken}};return n.setBackground!=="transparent"&&(x.config.setBackground=n.setBackground||"opaque"),x.gd.defaultLayout=e(n.tileClass),x}},{"../lib":503,"../registry":638}],640:[function(t,B,H){var d=t("../lib"),l=t("../plot_api/to_image"),b=t("./filesaver"),w=t("./helpers");function e(o,a){var r;return d.isPlainObject(o)||(r=d.getGraphDiv(o)),a=a||{},a.format=a.format||"png",a.width=a.width||null,a.height=a.height||null,a.imageDataOnly=!0,new Promise(function(n,c){r&&r._snapshotInProgress&&c(new Error("Snapshotting already in progress.")),d.isIE()&&a.format!=="svg"&&c(new Error(w.MSG_IE_BAD_FORMAT)),r&&(r._snapshotInProgress=!0);var s=l(o,a),i=a.filename||o.fn||"newplot";i+="."+a.format.replace("-","."),s.then(function(v){return r&&(r._snapshotInProgress=!1),b(v,i,a.format)}).then(function(v){n(v)}).catch(function(v){r&&(r._snapshotInProgress=!1),c(v)})})}B.exports=e},{"../lib":503,"../plot_api/to_image":546,"./filesaver":641,"./helpers":642}],641:[function(t,B,H){var d=t("../lib"),l=t("./helpers");function b(w,e,o){var a=document.createElement("a"),r="download"in a,n=new Promise(function(c,s){var i,v;if(d.isIE())return i=l.createBlob(w,"svg"),window.navigator.msSaveBlob(i,e),i=null,c(e);if(r)return i=l.createBlob(w,o),v=l.createObjectURL(i),a.href=v,a.download=e,document.body.appendChild(a),a.click(),document.body.removeChild(a),l.revokeObjectURL(v),i=null,c(e);if(d.isSafari()){var u=o==="svg"?",":";base64,";return l.octetStream(u+encodeURIComponent(w)),c(e)}s(new Error("download error"))});return n}B.exports=b},{"../lib":503,"./helpers":642}],642:[function(t,B,H){var d=t("../registry");H.getDelay=function(w){return w._has&&(w._has("gl3d")||w._has("gl2d")||w._has("mapbox"))?500:0},H.getRedrawFunc=function(w){return function(){d.getComponentMethod("colorbar","draw")(w)}},H.encodeSVG=function(w){return"data:image/svg+xml,"+encodeURIComponent(w)},H.encodeJSON=function(w){return"data:application/json,"+encodeURIComponent(w)};var l=window.URL||window.webkitURL;H.createObjectURL=function(w){return l.createObjectURL(w)},H.revokeObjectURL=function(w){return l.revokeObjectURL(w)},H.createBlob=function(w,e){if(e==="svg")return new window.Blob([w],{type:"image/svg+xml;charset=utf-8"});if(e==="full-json")return new window.Blob([w],{type:"application/json;charset=utf-8"});var o=b(window.atob(w));return new window.Blob([o],{type:"image/"+e})},H.octetStream=function(w){document.location.href="data:application/octet-stream"+w};function b(w){for(var e=w.length,o=new ArrayBuffer(e),a=new Uint8Array(o),r=0;r<e;r++)a[r]=w.charCodeAt(r);return o}H.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,H.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":638}],643:[function(t,B,H){var d=t("./helpers"),l={getDelay:d.getDelay,getRedrawFunc:d.getRedrawFunc,clone:t("./cloneplot"),toSVG:t("./tosvg"),svgToImg:t("./svgtoimg"),toImage:t("./toimage"),downloadImage:t("./download")};B.exports=l},{"./cloneplot":639,"./download":640,"./helpers":642,"./svgtoimg":644,"./toimage":645,"./tosvg":646}],644:[function(t,B,H){var d=t("../lib"),l=t("events").EventEmitter,b=t("./helpers");function w(e){var o=e.emitter||new l,a=new Promise(function(r,n){var c=window.Image,s=e.svg,i=e.format||"png";if(d.isIE()&&i!=="svg"){var v=new Error(b.MSG_IE_BAD_FORMAT);return n(v),e.promise?a:o.emit("error",v)}var u=e.canvas,g=e.scale||1,h=e.width||300,y=e.height||150,p=g*h,A=g*y,m=u.getContext("2d"),M=new c,x,T;i==="svg"||d.isSafari()?T=b.encodeSVG(s):(x=b.createBlob(s,"svg"),T=b.createObjectURL(x)),u.width=p,u.height=A,M.onload=function(){var _;switch(x=null,b.revokeObjectURL(T),i!=="svg"&&m.drawImage(M,0,0,p,A),i){case"jpeg":_=u.toDataURL("image/jpeg");break;case"png":_=u.toDataURL("image/png");break;case"webp":_=u.toDataURL("image/webp");break;case"svg":_=T;break;default:var f="Image format is not jpeg, png, svg or webp.";if(n(new Error(f)),!e.promise)return o.emit("error",f)}r(_),e.promise||o.emit("success",_)},M.onerror=function(_){if(x=null,b.revokeObjectURL(T),n(_),!e.promise)return o.emit("error",_)},M.src=T});return e.promise?a:o}B.exports=w},{"../lib":503,"./helpers":642,events:84}],645:[function(t,B,H){var d=t("events").EventEmitter,l=t("../registry"),b=t("../lib"),w=t("./helpers"),e=t("./cloneplot"),o=t("./tosvg"),a=t("./svgtoimg");function r(n,c){var s=new d,i=e(n,{format:"png"}),v=i.gd;v.style.position="absolute",v.style.left="-5000px",document.body.appendChild(v);function u(){var h=w.getDelay(v._fullLayout);setTimeout(function(){var y=o(v),p=document.createElement("canvas");p.id=b.randstr(),s=a({format:c.format,width:v._fullLayout.width,height:v._fullLayout.height,canvas:p,emitter:s,svg:y}),s.clean=function(){v&&document.body.removeChild(v)}},h)}var g=w.getRedrawFunc(v);return l.call("_doPlot",v,i.data,i.layout,i.config).then(g).then(u).catch(function(h){s.emit("error",h)}),s}B.exports=r},{"../lib":503,"../registry":638,"./cloneplot":639,"./helpers":642,"./svgtoimg":644,"./tosvg":646,events:84}],646:[function(t,B,H){var d=t("@plotly/d3"),l=t("../lib"),b=t("../components/drawing"),w=t("../components/color"),e=t("../constants/xmlns_namespaces"),o=/"/g,a="TOBESTRIPPED",r=new RegExp('("'+a+")|("+a+'")',"g");function n(s){var i=d.select("body").append("div").style({display:"none"}).html(""),v=s.replace(/(&[^;]*;)/gi,function(u){return u==="&lt;"?"&#60;":u==="&rt;"?"&#62;":u.indexOf("<")!==-1||u.indexOf(">")!==-1?"":i.html(u).text()});return i.remove(),v}function c(s){return s.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}B.exports=function(i,v,u){var g=i._fullLayout,h=g._paper,y=g._toppaper,p=g.width,A=g.height,m;h.insert("rect",":first-child").call(b.setRect,0,0,p,A).call(w.fill,g.paper_bgcolor);var M=g._basePlotModules||[];for(m=0;m<M.length;m++){var x=M[m];x.toSVG&&x.toSVG(i)}if(y){var T=y.node().childNodes,_=Array.prototype.slice.call(T);for(m=0;m<_.length;m++){var f=_[m];f.childNodes.length&&h.node().appendChild(f)}}g._draggers&&g._draggers.remove(),h.node().style.background="",h.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var S=d.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){S.remove();return}else S.style({visibility:null,display:null});var k=this.style.fontFamily;k&&k.indexOf('"')!==-1&&S.style("font-family",k.replace(o,a))}),h.selectAll(".gradient_filled,.pattern_filled").each(function(){var S=d.select(this),k=this.style.fill;k&&k.indexOf("url(")!==-1&&S.style("fill",k.replace(o,a));var P=this.style.stroke;P&&P.indexOf("url(")!==-1&&S.style("stroke",P.replace(o,a))}),(v==="pdf"||v==="eps")&&h.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),h.node().setAttributeNS(e.xmlns,"xmlns",e.svg),h.node().setAttributeNS(e.xmlns,"xmlns:xlink",e.xlink),v==="svg"&&u&&(h.attr("width",u*p),h.attr("height",u*A),h.attr("viewBox","0 0 "+p+" "+A));var L=new window.XMLSerializer().serializeToString(h.node());return L=n(L),L=c(L),L=L.replace(r,"'"),l.isIE()&&(L=L.replace(/"/gi,"'"),L=L.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),L=L.replace(/(\\')/gi,'"')),L}},{"../components/color":366,"../components/drawing":388,"../constants/xmlns_namespaces":480,"../lib":503,"@plotly/d3":58}],647:[function(t,B,H){var d=t("../../lib");B.exports=function(b,w){for(var e=0;e<b.length;e++)b[e].i=e;d.mergeArray(w.text,b,"tx"),d.mergeArray(w.hovertext,b,"htx");var o=w.marker;if(o){d.mergeArray(o.opacity,b,"mo",!0),d.mergeArray(o.color,b,"mc");var a=o.line;a&&(d.mergeArray(a.color,b,"mlc"),d.mergeArrayCastPositive(a.width,b,"mlw"))}}},{"../../lib":503}],648:[function(t,B,H){var d=t("../scatter/attributes"),l=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=t("../../plots/template_attributes").hovertemplateAttrs,w=t("../../plots/template_attributes").texttemplateAttrs,e=t("../../components/colorscale/attributes"),o=t("../../plots/font_attributes"),a=t("./constants"),r=t("../../components/drawing/attributes").pattern,n=t("../../lib/extend").extendFlat,c=o({editType:"calc",arrayOk:!0,colorEditType:"style"}),s=d.marker,i=s.line,v=n({},i.width,{dflt:0}),u=n({width:v,editType:"calc"},e("marker.line")),g=n({line:u,editType:"calc"},e("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:r});B.exports={x:d.x,x0:d.x0,dx:d.dx,y:d.y,y0:d.y0,dy:d.dy,xperiod:d.xperiod,yperiod:d.yperiod,xperiod0:d.xperiod0,yperiod0:d.yperiod0,xperiodalignment:d.xperiodalignment,yperiodalignment:d.yperiodalignment,xhoverformat:l("x"),yhoverformat:l("y"),text:d.text,texttemplate:w({editType:"plot"},{keys:a.eventDataKeys}),hovertext:d.hovertext,hovertemplate:b({},{keys:a.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:n({},c,{}),insidetextfont:n({},c,{}),outsidetextfont:n({},c,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:n({},d.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:g,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:d.selected.marker.opacity,color:d.selected.marker.color,editType:"style"},textfont:d.selected.textfont,editType:"style"},unselected:{marker:{opacity:d.unselected.marker.opacity,color:d.unselected.marker.color,editType:"style"},textfont:d.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../scatter/attributes":926,"./constants":650}],649:[function(t,B,H){var d=t("../../plots/cartesian/axes"),l=t("../../plots/cartesian/align_period"),b=t("../../components/colorscale/helpers").hasColorscale,w=t("../../components/colorscale/calc"),e=t("./arrays_to_calcdata"),o=t("../scatter/calc_selection");B.exports=function(r,n){var c=d.getFromId(r,n.xaxis||"x"),s=d.getFromId(r,n.yaxis||"y"),i,v,u,g,h,y,p={msUTC:!!(n.base||n.base===0)};n.orientation==="h"?(i=c.makeCalcdata(n,"x",p),u=s.makeCalcdata(n,"y"),g=l(n,s,"y",u),h=!!n.yperiodalignment,y="y"):(i=s.makeCalcdata(n,"y",p),u=c.makeCalcdata(n,"x"),g=l(n,c,"x",u),h=!!n.xperiodalignment,y="x"),v=g.vals;for(var A=Math.min(v.length,i.length),m=new Array(A),M=0;M<A;M++)m[M]={p:v[M],s:i[M]},h&&(m[M].orig_p=u[M],m[M][y+"End"]=g.ends[M],m[M][y+"Start"]=g.starts[M]),n.ids&&(m[M].id=String(n.ids[M]));return b(n,"marker")&&w(r,n,{vals:n.marker.color,containerStr:"marker",cLetter:"c"}),b(n,"marker.line")&&w(r,n,{vals:n.marker.line.color,containerStr:"marker.line",cLetter:"c"}),e(m,n),o(m,n),m}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":928,"./arrays_to_calcdata":647}],650:[function(t,B,H){B.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],651:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../lib").isArrayOrTypedArray,b=t("../../constants/numerical").BADNUM,w=t("../../registry"),e=t("../../plots/cartesian/axes"),o=t("../../plots/cartesian/constraints").getAxisGroup,a=t("./sieve.js");function r(L,S){for(var k=S.xaxis,P=S.yaxis,z=L._fullLayout,I=L._fullData,R=L.calcdata,D=[],O=[],F=0;F<I.length;F++){var G=I[F];if(G.visible===!0&&w.traceIs(G,"bar")&&G.xaxis===k._id&&G.yaxis===P._id&&(G.orientation==="h"?D.push(R[F]):O.push(R[F]),G._computePh))for(var W=L.calcdata[F],q=0;q<W.length;q++)typeof W[q].ph0=="function"&&(W[q].ph0=W[q].ph0()),typeof W[q].ph1=="function"&&(W[q].ph1=W[q].ph1())}var J={xCat:k.type==="category"||k.type==="multicategory",yCat:P.type==="category"||P.type==="multicategory",mode:z.barmode,norm:z.barnorm,gap:z.bargap,groupgap:z.bargroupgap};n(L,k,P,O,J),n(L,P,k,D,J)}function n(L,S,k,P,z){if(!!P.length){var I,R,D,O,F;switch(c(k,P),z.mode){case"overlay":s(S,k,P,z);break;case"group":for(I=[],R=[],D=0;D<P.length;D++)O=P[D],F=O[0].trace,F.offset===void 0?R.push(O):I.push(O);R.length&&i(L,S,k,R,z),I.length&&s(S,k,I,z);break;case"stack":case"relative":for(I=[],R=[],D=0;D<P.length;D++)O=P[D],F=O[0].trace,F.base===void 0?R.push(O):I.push(O);R.length&&v(L,S,k,R,z),I.length&&s(S,k,I,z);break}_(P,S)}}function c(L,S){var k,P;for(k=0;k<S.length;k++){var z=S[k],I=z[0].trace,R=I.type==="funnel"?I._base:I.base,D,O=I.orientation==="h"?I.xcalendar:I.ycalendar,F=L.type==="category"||L.type==="multicategory"?function(){return null}:L.d2c;if(l(R)){for(P=0;P<Math.min(R.length,z.length);P++)D=F(R[P],0,O),d(D)?(z[P].b=+D,z[P].hasB=1):z[P].b=0;for(;P<z.length;P++)z[P].b=0}else{D=F(R,0,O);var G=d(D);for(D=G?D:0,P=0;P<z.length;P++)z[P].b=D,G&&(z[P].hasB=1)}}}function s(L,S,k,P){for(var z=0;z<k.length;z++){var I=k[z],R=new a([I],{posAxis:L,sepNegVal:!1,overlapNoMerge:!P.norm});u(L,R,P),P.norm?(M(R),T(S,R,P)):A(S,R)}}function i(L,S,k,P,z){var I=new a(P,{posAxis:S,sepNegVal:!1,overlapNoMerge:!z.norm});g(L,S,I,z),x(I,S),z.norm?(M(I),T(k,I,z)):A(k,I)}function v(L,S,k,P,z){var I=new a(P,{posAxis:S,sepNegVal:z.mode==="relative",overlapNoMerge:!(z.norm||z.mode==="stack"||z.mode==="relative")});u(S,I,z),m(k,I,z);for(var R=0;R<P.length;R++)for(var D=P[R],O=0;O<D.length;O++){var F=D[O];if(F.s!==b){var G=F.b+F.s===I.get(F.p,F.s);G&&(F._outmost=!0)}}z.norm&&T(k,I,z)}function u(L,S,k){for(var P=S.minDiff,z=S.traces,I=P*(1-k.gap),R=I,D=R*(1-(k.groupgap||0)),O=-D/2,F=0;F<z.length;F++){var G=z[F],W=G[0].t;W.barwidth=D,W.poffset=O,W.bargroupwidth=I,W.bardelta=P}S.binWidth=z[0][0].t.barwidth/100,h(S),y(L,S),p(L,S)}function g(L,S,k,P){for(var z=L._fullLayout,I=k.positions,R=k.distinctPositions,D=k.minDiff,O=k.traces,F=O.length,G=I.length!==R.length,W=D*(1-P.gap),q=o(z,S._id)+O[0][0].trace.orientation,J=z._alignmentOpts[q]||{},X=0;X<F;X++){var Z=O[X],se=Z[0].trace,le=J[se.alignmentgroup]||{},oe=Object.keys(le.offsetGroups||{}).length,U;oe?U=W/oe:U=G?W/F:W;var V=U*(1-(P.groupgap||0)),re;oe?re=((2*se._offsetIndex+1-oe)*U-V)/2:re=G?((2*X+1-F)*U-V)/2:-V/2;var ee=Z[0].t;ee.barwidth=V,ee.poffset=re,ee.bargroupwidth=W,ee.bardelta=D}k.binWidth=O[0][0].t.barwidth/100,h(k),y(S,k),p(S,k,G)}function h(L){var S=L.traces,k,P;for(k=0;k<S.length;k++){var z=S[k],I=z[0],R=I.trace,D=I.t,O=R._offset||R.offset,F=D.poffset,G;if(l(O)){for(G=Array.prototype.slice.call(O,0,z.length),P=0;P<G.length;P++)d(G[P])||(G[P]=F);for(P=G.length;P<z.length;P++)G.push(F);D.poffset=G}else O!==void 0&&(D.poffset=O);var W=R._width||R.width,q=D.barwidth;if(l(W)){var J=Array.prototype.slice.call(W,0,z.length);for(P=0;P<J.length;P++)d(J[P])||(J[P]=q);for(P=J.length;P<z.length;P++)J.push(q);if(D.barwidth=J,O===void 0){for(G=[],P=0;P<z.length;P++)G.push(F+(q-J[P])/2);D.poffset=G}}else W!==void 0&&(D.barwidth=W,O===void 0&&(D.poffset=F+(q-W)/2))}}function y(L,S){for(var k=S.traces,P=f(L),z=0;z<k.length;z++)for(var I=k[z],R=I[0].t,D=R.poffset,O=Array.isArray(D),F=R.barwidth,G=Array.isArray(F),W=0;W<I.length;W++){var q=I[W],J=q.w=G?F[W]:F;q[P]=q.p+(O?D[W]:D)+J/2}}function p(L,S,k){var P=S.traces,z=S.minDiff,I=z/2;e.minDtick(L,S.minDiff,S.distinctPositions[0],k);for(var R=0;R<P.length;R++){var D=P[R],O=D[0],F=O.trace,G=[],W,q,J,X;for(X=0;X<D.length;X++)W=D[X],q=W.p-I,J=W.p+I,G.push(q,J);if(F.width||F.offset){var Z=O.t,se=Z.poffset,le=Z.barwidth,oe=Array.isArray(se),U=Array.isArray(le);for(X=0;X<D.length;X++){W=D[X];var V=oe?se[X]:se,re=U?le[X]:le;q=W.p+V,J=q+re,G.push(q,J)}}F._extremes[L._id]=e.findExtremes(L,G,{padded:!1})}}function A(L,S){for(var k=S.traces,P=f(L),z=0;z<k.length;z++){for(var I=k[z],R=I[0].trace,D=[],O=!1,F=0;F<I.length;F++){var G=I[F],W=G.b,q=W+G.s;G[P]=q,D.push(q),G.hasB&&D.push(W),(!G.hasB||!G.b)&&(O=!0)}R._extremes[L._id]=e.findExtremes(L,D,{tozero:O,padded:!0})}}function m(L,S,k){var P=f(L),z=S.traces,I,R,D,O,F,G;for(O=0;O<z.length;O++)if(I=z[O],R=I[0].trace,R.type==="funnel")for(F=0;F<I.length;F++)G=I[F],G.s!==b&&S.put(G.p,-.5*G.s);for(O=0;O<z.length;O++){I=z[O],R=I[0].trace,D=R.type==="funnel";var W=[];for(F=0;F<I.length;F++)if(G=I[F],G.s!==b){var q;D?q=G.s:q=G.s+G.b;var J=S.put(G.p,q),X=J+q;G.b=J,G[P]=X,k.norm||(W.push(X),G.hasB&&W.push(J))}k.norm||(R._extremes[L._id]=e.findExtremes(L,W,{tozero:!0,padded:!0}))}}function M(L){for(var S=L.traces,k=0;k<S.length;k++)for(var P=S[k],z=0;z<P.length;z++){var I=P[z];I.s!==b&&L.put(I.p,I.b+I.s)}}function x(L,S){for(var k=L.traces,P=0;P<k.length;P++){var z=k[P],I=z[0].trace;if(I.base===void 0)for(var R=new a([z],{posAxis:S,sepNegVal:!0,overlapNoMerge:!0}),D=0;D<z.length;D++){var O=z[D];if(O.p!==b){var F=R.put(O.p,O.b+O.s);F&&(O.b=F)}}}}function T(L,S,k){var P=S.traces,z=f(L),I=k.norm==="fraction"?1:100,R=I/1e9,D=L.l2c(L.c2l(0)),O=k.mode==="stack"?I:D;function F(re){return d(L.c2l(re))&&(re<D-R||re>O+R||!d(D))}for(var G=0;G<P.length;G++){for(var W=P[G],q=W[0].trace,J=[],X=!1,Z=!1,se=0;se<W.length;se++){var le=W[se];if(le.s!==b){var oe=Math.abs(I/S.get(le.p,le.s));le.b*=oe,le.s*=oe;var U=le.b,V=U+le.s;le[z]=V,J.push(V),Z=Z||F(V),le.hasB&&(J.push(U),Z=Z||F(U)),(!le.hasB||!le.b)&&(X=!0)}}q._extremes[L._id]=e.findExtremes(L,J,{tozero:X,padded:Z})}}function _(L,S){var k=f(S),P={},z,I,R,D=1/0,O=-1/0;for(z=0;z<L.length;z++)for(R=L[z],I=0;I<R.length;I++){var F=R[I].p;d(F)&&(D=Math.min(D,F),O=Math.max(O,F))}var G=1e4/(O-D),W=P.round=function(oe){return String(Math.round(G*(oe-D)))};for(z=0;z<L.length;z++){R=L[z],R[0].t.extents=P;var q=R[0].t.poffset,J=Array.isArray(q);for(I=0;I<R.length;I++){var X=R[I],Z=X[k]-X.w/2;if(d(Z)){var se=X[k]+X.w/2,le=W(X.p);P[le]?P[le]=[Math.min(Z,P[le][0]),Math.max(se,P[le][1])]:P[le]=[Z,se]}X.p0=X.p+(J?q[I]:q),X.p1=X.p0+X.w,X.s0=X.b,X.s1=X.s0+X.s}}}function f(L){return L._id.charAt(0)}B.exports={crossTraceCalc:r,setGroupPositions:n}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../../plots/cartesian/constraints":562,"../../registry":638,"./sieve.js":661,"fast-isnumeric":190}],652:[function(t,B,H){var d=t("../../lib"),l=t("../../components/color"),b=t("../../registry"),w=t("../scatter/xy_defaults"),e=t("../scatter/period_defaults"),o=t("./style_defaults"),a=t("../../plots/cartesian/constraints").getAxisGroup,r=t("./attributes"),n=d.coerceFont;function c(u,g,h,y){function p(T,_){return d.coerce(u,g,r,T,_)}var A=w(u,g,y,p);if(!A){g.visible=!1;return}e(u,g,y,p),p("xhoverformat"),p("yhoverformat"),p("orientation",g.x&&!g.y?"h":"v"),p("base"),p("offset"),p("width"),p("text"),p("hovertext"),p("hovertemplate");var m=p("textposition");v(u,g,y,p,m,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),o(u,g,p,h,y);var M=(g.marker.line||{}).color,x=b.getComponentMethod("errorbars","supplyDefaults");x(u,g,M||l.defaultLine,{axis:"y"}),x(u,g,M||l.defaultLine,{axis:"x",inherit:"y"}),d.coerceSelectionMarkerOpacity(g,p)}function s(u,g,h,y){var p=g.orientation,A=g[{v:"x",h:"y"}[p]+"axis"],m=a(h,A)+p,M=h._alignmentOpts||{},x=y("alignmentgroup"),T=M[m];T||(T=M[m]={});var _=T[x];_?_.traces.push(g):_=T[x]={traces:[g],alignmentIndex:Object.keys(T).length,offsetGroups:{}};var f=y("offsetgroup"),L=_.offsetGroups,S=L[f];f&&(S||(S=L[f]={offsetIndex:Object.keys(L).length}),g._offsetIndex=S.offsetIndex)}function i(u,g){var h,y;function p(m){return d.coerce(y._input,y,r,m)}if(g.barmode==="group")for(var A=0;A<u.length;A++)y=u[A],y.type==="bar"&&(h=y._input,s(h,y,g,p))}function v(u,g,h,y,p,A){A=A||{};var m=A.moduleHasSelected!==!1,M=A.moduleHasUnselected!==!1,x=A.moduleHasConstrain!==!1,T=A.moduleHasCliponaxis!==!1,_=A.moduleHasTextangle!==!1,f=A.moduleHasInsideanchor!==!1,L=!!A.hasPathbar,S=Array.isArray(p)||p==="auto",k=S||p==="inside",P=S||p==="outside";if(k||P){var z=n(y,"textfont",h.font),I=d.extendFlat({},z),R=u.textfont&&u.textfont.color,D=!R;if(D&&delete I.color,n(y,"insidetextfont",I),L){var O=d.extendFlat({},z);D&&delete O.color,n(y,"pathbar.textfont",O)}P&&n(y,"outsidetextfont",z),m&&y("selected.textfont.color"),M&&y("unselected.textfont.color"),x&&y("constraintext"),T&&y("cliponaxis"),_&&y("textangle"),y("texttemplate")}k&&f&&y("insidetextanchor")}B.exports={supplyDefaults:c,crossTraceDefaults:i,handleGroupingDefaults:s,handleText:v}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/constraints":562,"../../registry":638,"../scatter/period_defaults":946,"../scatter/xy_defaults":953,"./attributes":648,"./style_defaults":663}],653:[function(t,B,H){B.exports=function(l,b,w){return l.x="xVal"in b?b.xVal:b.x,l.y="yVal"in b?b.yVal:b.y,b.xa&&(l.xaxis=b.xa),b.ya&&(l.yaxis=b.ya),w.orientation==="h"?(l.label=l.y,l.value=l.x):(l.label=l.x,l.value=l.y),l}},{}],654:[function(t,B,H){var d=t("fast-isnumeric"),l=t("tinycolor2"),b=t("../../lib").isArrayOrTypedArray;H.coerceString=function(w,e,o){if(typeof e=="string"){if(e||!w.noBlank)return e}else if((typeof e=="number"||e===!0)&&!w.strict)return String(e);return o!==void 0?o:w.dflt},H.coerceNumber=function(w,e,o){if(d(e)){e=+e;var a=w.min,r=w.max,n=a!==void 0&&e<a||r!==void 0&&e>r;if(!n)return e}return o!==void 0?o:w.dflt},H.coerceColor=function(w,e,o){return l(e).isValid()?e:o!==void 0?o:w.dflt},H.coerceEnumerated=function(w,e,o){return w.coerceNumber&&(e=+e),w.values.indexOf(e)!==-1?e:o!==void 0?o:w.dflt},H.getValue=function(w,e){var o;return Array.isArray(w)?e<w.length&&(o=w[e]):o=w,o},H.getLineWidth=function(w,e){var o=0<e.mlw?e.mlw:b(w.marker.line.width)?0:w.marker.line.width;return o}},{"../../lib":503,"fast-isnumeric":190,tinycolor2:312}],655:[function(t,B,H){var d=t("../../components/fx"),l=t("../../registry"),b=t("../../components/color"),w=t("../../lib").fillText,e=t("./helpers").getLineWidth,o=t("../../plots/cartesian/axes").hoverLabelText,a=t("../../constants/numerical").BADNUM;function r(s,i,v,u,g){var h=n(s,i,v,u,g);if(h){var y=h.cd,p=y[0].trace,A=y[h.index];return h.color=c(p,A),l.getComponentMethod("errorbars","hoverInfo")(A,p,h),[h]}}function n(s,i,v,u,g){var h=s.cd,y=h[0].trace,p=h[0].t,A=u==="closest",m=y.type==="waterfall",M=s.maxHoverDistance,x=s.maxSpikeDistance,T,_,f,L,S,k,P;y.orientation==="h"?(T=v,_=i,f="y",L="x",S=se,k=J):(T=i,_=v,f="x",L="y",k=se,S=J);var z=y[f+"period"],I=A||z;function R(ie){return O(ie,-1)}function D(ie){return O(ie,1)}function O(ie,ue){var xe=ie.w;return ie[f]+ue*xe/2}function F(ie){return ie[f+"End"]-ie[f+"Start"]}var G=A?R:z?function(ie){return ie.p-F(ie)/2}:function(ie){return Math.min(R(ie),ie.p-p.bardelta/2)},W=A?D:z?function(ie){return ie.p+F(ie)/2}:function(ie){return Math.max(D(ie),ie.p+p.bardelta/2)};function q(ie,ue,xe){return g.finiteRange&&(xe=0),d.inbox(ie-T,ue-T,xe+Math.min(1,Math.abs(ue-ie)/P)-1)}function J(ie){return q(G(ie),W(ie),M)}function X(ie){return q(R(ie),D(ie),x)}function Z(ie){var ue=ie[L];if(m){var xe=Math.abs(ie.rawS)||0;_>0?ue+=xe:_<0&&(ue-=xe)}return ue}function se(ie){var ue=_,xe=ie.b,he=Z(ie);return d.inbox(xe-ue,he-ue,M+(he-ue)/(he-xe)-1)}function le(ie){var ue=_,xe=ie.b,he=Z(ie);return d.inbox(xe-ue,he-ue,x+(he-ue)/(he-xe)-1)}var oe=s[f+"a"],U=s[L+"a"];P=Math.abs(oe.r2c(oe.range[1])-oe.r2c(oe.range[0]));function V(ie){return(S(ie)+k(ie))/2}var re=d.getDistanceFunction(u,S,k,V);if(d.getClosest(h,re,s),s.index!==!1&&h[s.index].p!==a){I||(G=function(ie){return Math.min(R(ie),ie.p-p.bargroupwidth/2)},W=function(ie){return Math.max(D(ie),ie.p+p.bargroupwidth/2)});var ee=s.index,j=h[ee],Q=y.base?j.b+j.s:j.s;s[L+"0"]=s[L+"1"]=U.c2p(j[L],!0),s[L+"LabelVal"]=Q;var ne=p.extents[p.extents.round(j.p)];s[f+"0"]=oe.c2p(A?G(j):ne[0],!0),s[f+"1"]=oe.c2p(A?W(j):ne[1],!0);var ae=j.orig_p!==void 0;return s[f+"LabelVal"]=ae?j.orig_p:j.p,s.labelLabel=o(oe,s[f+"LabelVal"],y[f+"hoverformat"]),s.valueLabel=o(U,s[L+"LabelVal"],y[L+"hoverformat"]),s.baseLabel=o(U,j.b,y[L+"hoverformat"]),s.spikeDistance=(le(j)+X(j))/2,s[f+"Spike"]=oe.c2p(j.p,!0),w(j,y,s),s.hovertemplate=y.hovertemplate,s}}function c(s,i){var v=i.mcc||s.marker.color,u=i.mlcc||s.marker.line.color,g=e(s,i);if(b.opacity(v))return v;if(b.opacity(u)&&g)return u}B.exports={hoverPoints:r,hoverOnBars:n,getTraceColor:c}},{"../../components/color":366,"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./helpers":654}],656:[function(t,B,H){B.exports={attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults").supplyDefaults,crossTraceDefaults:t("./defaults").crossTraceDefaults,supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),crossTraceCalc:t("./cross_trace_calc").crossTraceCalc,colorbar:t("../scatter/marker_colorbar"),arraysToCalcdata:t("./arrays_to_calcdata"),plot:t("./plot").plot,style:t("./style").style,styleOnSelect:t("./style").styleOnSelect,hoverPoints:t("./hover").hoverPoints,eventData:t("./event_data"),selectPoints:t("./select"),moduleType:"trace",name:"bar",basePlotModule:t("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":568,"../scatter/marker_colorbar":944,"./arrays_to_calcdata":647,"./attributes":648,"./calc":649,"./cross_trace_calc":651,"./defaults":652,"./event_data":653,"./hover":655,"./layout_attributes":657,"./layout_defaults":658,"./plot":659,"./select":660,"./style":662}],657:[function(t,B,H){B.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],658:[function(t,B,H){var d=t("../../registry"),l=t("../../plots/cartesian/axes"),b=t("../../lib"),w=t("./layout_attributes");B.exports=function(e,o,a){function r(p,A){return b.coerce(e,o,w,p,A)}for(var n=!1,c=!1,s=!1,i={},v=r("barmode"),u=0;u<a.length;u++){var g=a[u];if(d.traceIs(g,"bar")&&g.visible)n=!0;else continue;if(v==="group"){var h=g.xaxis+g.yaxis;i[h]&&(s=!0),i[h]=!0}if(g.visible&&g.type==="histogram"){var y=l.getFromId({_fullLayout:o},g[g.orientation==="v"?"xaxis":"yaxis"]);y.type!=="category"&&(c=!0)}}if(!n){delete o.barmode;return}v!=="overlay"&&r("barnorm"),r("bargap",c&&!s?0:.2),r("bargroupgap")}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./layout_attributes":657}],659:[function(t,B,H){var d=t("@plotly/d3"),l=t("fast-isnumeric"),b=t("../../lib"),w=t("../../lib/svg_text_utils"),e=t("../../components/color"),o=t("../../components/drawing"),a=t("../../registry"),r=t("../../plots/cartesian/axes").tickText,n=t("./uniform_text"),c=n.recordMinTextSize,s=n.clearMinTextSize,i=t("./style"),v=t("./helpers"),u=t("./constants"),g=t("./attributes"),h=g.text,y=g.textposition,p=t("../../components/fx/helpers").appendArrayPointValue,A=u.TEXTPAD;function m(G){return G.id}function M(G){if(G.ids)return m}function x(G,W){return G<W?1:-1}function T(G,W,q,J){var X=[],Z=[],se=J?W:q,le=J?q:W;return X[0]=se.c2p(G.s0,!0),Z[0]=le.c2p(G.p0,!0),X[1]=se.c2p(G.s1,!0),Z[1]=le.c2p(G.p1,!0),J?[X,Z]:[Z,X]}function _(G,W,q,J){if(!W.uniformtext.mode&&f(q)){var X;return J&&(X=J()),G.transition().duration(q.duration).ease(q.easing).each("end",function(){X&&X()}).each("interrupt",function(){X&&X()})}else return G}function f(G){return G&&G.duration>0}function L(G,W,q,J,X,Z){var se=W.xaxis,le=W.yaxis,oe=G._fullLayout;X||(X={mode:oe.barmode,norm:oe.barmode,gap:oe.bargap,groupgap:oe.bargroupgap},s("bar",oe));var U=b.makeTraceGroups(J,q,"trace bars").each(function(V){var re=d.select(this),ee=V[0].trace,j=ee.type==="waterfall",Q=ee.type==="funnel",ne=ee.type==="bar",ae=ne||Q,ie=0;j&&ee.connector.visible&&ee.connector.mode==="between"&&(ie=ee.connector.line.width/2);var ue=ee.orientation==="h",xe=f(X),he=b.ensureSingle(re,"g","points"),ge=M(ee),me=he.selectAll("g.point").data(b.identity,ge);me.enter().append("g").classed("point",!0),me.exit().remove(),me.each(function(Ae,Ne){var He=d.select(this),Ge=T(Ae,se,le,ue),_e=Ge[0][0],De=Ge[0][1],Ye=Ge[1][0],qe=Ge[1][1],Ue=(ue?De-_e:qe-Ye)===0;Ue&&ae&&v.getLineWidth(ee,Ae)&&(Ue=!1),Ue||(Ue=!l(_e)||!l(De)||!l(Ye)||!l(qe)),Ae.isBlank=Ue,Ue&&(ue?De=_e:qe=Ye),ie&&!Ue&&(ue?(_e-=x(_e,De)*ie,De+=x(_e,De)*ie):(Ye-=x(Ye,qe)*ie,qe+=x(Ye,qe)*ie));var Ie,Ve;if(ee.type==="waterfall"){if(!Ue){var dt=ee[Ae.dir].marker;Ie=dt.line.width,Ve=dt.color}}else Ie=v.getLineWidth(ee,Ae),Ve=Ae.mc||ee.marker.color;function Dt(St){var it=d.round(Ie/2%1,2);return X.gap===0&&X.groupgap===0?d.round(Math.round(St)-it,2):St}function Yt(St,it,ht){return ht&&St===it?St:Math.abs(St-it)>=2?Dt(St):St>it?Math.ceil(St):Math.floor(St)}if(!G._context.staticPlot){var kt=e.opacity(Ve),Ft=kt<1||Ie>.01?Dt:Yt;_e=Ft(_e,De,ue),De=Ft(De,_e,ue),Ye=Ft(Ye,qe,!ue),qe=Ft(qe,Ye,!ue)}var Nt=_(b.ensureSingle(He,"path"),oe,X,Z);if(Nt.style("vector-effect","non-scaling-stroke").attr("d",isNaN((De-_e)*(qe-Ye))||Ue&&G._context.staticPlot?"M0,0Z":"M"+_e+","+Ye+"V"+qe+"H"+De+"V"+Ye+"Z").call(o.setClipUrl,W.layerClipId,G),!oe.uniformtext.mode&&xe){var Lt=o.makePointStyleFns(ee);o.singlePointStyle(Ae,Nt,ee,Lt,G)}S(G,W,He,V,Ne,_e,De,Ye,qe,X,Z),W.layerClipId&&o.hideOutsideRangePoint(Ae,He.select("text"),se,le,ee.xcalendar,ee.ycalendar)});var ke=ee.cliponaxis===!1;o.setClipUrl(re,ke?null:W.layerClipId,G)});a.getComponentMethod("errorbars","plot")(G,U,W,X)}function S(G,W,q,J,X,Z,se,le,oe,U,V){var re=W.xaxis,ee=W.yaxis,j=G._fullLayout,Q;function ne(St,it,ht){var Qe=b.ensureSingle(St,"text").text(it).attr({class:"bartext bartext-"+Q,"text-anchor":"middle","data-notex":1}).call(o.font,ht).call(w.convertToTspans,G);return Qe}var ae=J[0].trace,ie=ae.orientation==="h",ue=R(j,J,X,re,ee);Q=D(ae,X);var xe=U.mode==="stack"||U.mode==="relative",he=J[X],ge=!xe||he._outmost;if(!ue||Q==="none"||(he.isBlank||Z===se||le===oe)&&(Q==="auto"||Q==="inside")){q.select("text").remove();return}var me=j.font,ke=i.getBarColor(J[X],ae),Ae=i.getInsideTextFont(ae,X,me,ke),Ne=i.getOutsideTextFont(ae,X,me),He=q.datum();ie?re.type==="log"&&He.s0<=0&&(re.range[0]<re.range[1]?Z=0:Z=re._length):ee.type==="log"&&He.s0<=0&&(ee.range[0]<ee.range[1]?le=ee._length:le=0);var Ge=Math.abs(se-Z)-2*A,_e=Math.abs(oe-le)-2*A,De,Ye,qe,Ue,Ie;if(Q==="outside"&&!ge&&!he.hasB&&(Q="inside"),Q==="auto")if(ge){Q="inside",Ie=b.ensureUniformFontSize(G,Ae),De=ne(q,ue,Ie),Ye=o.bBox(De.node()),qe=Ye.width,Ue=Ye.height;var Ve=qe>0&&Ue>0,dt=qe<=Ge&&Ue<=_e,Dt=qe<=_e&&Ue<=Ge,Yt=ie?Ge>=qe*(_e/Ue):_e>=Ue*(Ge/qe);Ve&&(dt||Dt||Yt)?Q="inside":(Q="outside",De.remove(),De=null)}else Q="inside";if(!De){Ie=b.ensureUniformFontSize(G,Q==="outside"?Ne:Ae),De=ne(q,ue,Ie);var kt=De.attr("transform");if(De.attr("transform",""),Ye=o.bBox(De.node()),qe=Ye.width,Ue=Ye.height,De.attr("transform",kt),qe<=0||Ue<=0){De.remove();return}}var Ft=ae.textangle,Nt,Lt;Q==="outside"?(Lt=ae.constraintext==="both"||ae.constraintext==="outside",Nt=I(Z,se,le,oe,Ye,{isHorizontal:ie,constrained:Lt,angle:Ft})):(Lt=ae.constraintext==="both"||ae.constraintext==="inside",Nt=z(Z,se,le,oe,Ye,{isHorizontal:ie,constrained:Lt,angle:Ft,anchor:ae.insidetextanchor})),Nt.fontSize=Ie.size,c(ae.type==="histogram"?"bar":ae.type,Nt,j),he.transform=Nt,_(De,j,U,V).attr("transform",b.getTextTransform(Nt))}function k(G){return G==="auto"?0:G}function P(G,W){var q=Math.PI/180*W,J=Math.abs(Math.sin(q)),X=Math.abs(Math.cos(q));return{x:G.width*X+G.height*J,y:G.width*J+G.height*X}}function z(G,W,q,J,X,Z){var se=!!Z.isHorizontal,le=!!Z.constrained,oe=Z.angle||0,U=Z.anchor||"end",V=U==="end",re=U==="start",ee=Z.leftToRight||0,j=(ee+1)/2,Q=1-j,ne=X.width,ae=X.height,ie=Math.abs(W-G),ue=Math.abs(J-q),xe=ie>2*A&&ue>2*A?A:0;ie-=2*xe,ue-=2*xe;var he=k(oe);oe==="auto"&&!(ne<=ie&&ae<=ue)&&(ne>ie||ae>ue)&&(!(ne>ue||ae>ie)||ne<ae!=ie<ue)&&(he+=90);var ge=P(X,he),me=1;le&&(me=Math.min(1,ie/ge.x,ue/ge.y));var ke=X.left*Q+X.right*j,Ae=(X.top+X.bottom)/2,Ne=(G+A)*Q+(W-A)*j,He=(q+J)/2,Ge=0,_e=0;if(re||V){var De=(se?ge.x:ge.y)/2,Ye=se?x(G,W):x(q,J);se?re?(Ne=G+Ye*xe,Ge=-Ye*De):(Ne=W-Ye*xe,Ge=Ye*De):re?(He=q+Ye*xe,_e=-Ye*De):(He=J-Ye*xe,_e=Ye*De)}return{textX:ke,textY:Ae,targetX:Ne,targetY:He,anchorX:Ge,anchorY:_e,scale:me,rotate:he}}function I(G,W,q,J,X,Z){var se=!!Z.isHorizontal,le=!!Z.constrained,oe=Z.angle||0,U=X.width,V=X.height,re=Math.abs(W-G),ee=Math.abs(J-q),j;se?j=ee>2*A?A:0:j=re>2*A?A:0;var Q=1;le&&(Q=se?Math.min(1,ee/V):Math.min(1,re/U));var ne=k(oe),ae=P(X,ne),ie=(se?ae.x:ae.y)/2,ue=(X.left+X.right)/2,xe=(X.top+X.bottom)/2,he=(G+W)/2,ge=(q+J)/2,me=0,ke=0,Ae=se?x(W,G):x(q,J);return se?(he=W-Ae*j,me=Ae*ie):(ge=J+Ae*j,ke=-Ae*ie),{textX:ue,textY:xe,targetX:he,targetY:ge,anchorX:me,anchorY:ke,scale:Q,rotate:ne}}function R(G,W,q,J,X){var Z=W[0].trace,se=Z.texttemplate,le;return se?le=O(G,W,q,J,X):Z.textinfo?le=F(W,q,J,X):le=v.getValue(Z.text,q),v.coerceString(h,le)}function D(G,W){var q=v.getValue(G.textposition,W);return v.coerceEnumerated(y,q)}function O(G,W,q,J,X){var Z=W[0].trace,se=b.castOption(Z,q,"texttemplate");if(!se)return"";var le=Z.type==="histogram",oe=Z.type==="waterfall",U=Z.type==="funnel",V=Z.orientation==="h",re,ee,j,Q;V?(re="y",ee=X,j="x",Q=J):(re="x",ee=J,j="y",Q=X);function ne(me){return r(ee,ee.c2l(me),!0).text}function ae(me){return r(Q,Q.c2l(me),!0).text}var ie=W[q],ue={};ue.label=ie.p,ue.labelLabel=ue[re+"Label"]=ne(ie.p);var xe=b.castOption(Z,ie.i,"text");(xe===0||xe)&&(ue.text=xe),ue.value=ie.s,ue.valueLabel=ue[j+"Label"]=ae(ie.s);var he={};p(he,Z,ie.i),(le||he.x===void 0)&&(he.x=V?ue.value:ue.label),(le||he.y===void 0)&&(he.y=V?ue.label:ue.value),(le||he.xLabel===void 0)&&(he.xLabel=V?ue.valueLabel:ue.labelLabel),(le||he.yLabel===void 0)&&(he.yLabel=V?ue.labelLabel:ue.valueLabel),oe&&(ue.delta=+ie.rawS||ie.s,ue.deltaLabel=ae(ue.delta),ue.final=ie.v,ue.finalLabel=ae(ue.final),ue.initial=ue.final-ue.delta,ue.initialLabel=ae(ue.initial)),U&&(ue.value=ie.s,ue.valueLabel=ae(ue.value),ue.percentInitial=ie.begR,ue.percentInitialLabel=b.formatPercent(ie.begR),ue.percentPrevious=ie.difR,ue.percentPreviousLabel=b.formatPercent(ie.difR),ue.percentTotal=ie.sumR,ue.percenTotalLabel=b.formatPercent(ie.sumR));var ge=b.castOption(Z,ie.i,"customdata");return ge&&(ue.customdata=ge),b.texttemplateString(se,ue,G._d3locale,he,ue,Z._meta||{})}function F(G,W,q,J){var X=G[0].trace,Z=X.orientation==="h",se=X.type==="waterfall",le=X.type==="funnel";function oe(ge){var me=Z?J:q;return r(me,ge,!0).text}function U(ge){var me=Z?q:J;return r(me,+ge,!0).text}var V=X.textinfo,re=G[W],ee=V.split("+"),j=[],Q,ne=function(ge){return ee.indexOf(ge)!==-1};if(ne("label")&&j.push(oe(G[W].p)),ne("text")&&(Q=b.castOption(X,re.i,"text"),(Q===0||Q)&&j.push(Q)),se){var ae=+re.rawS||re.s,ie=re.v,ue=ie-ae;ne("initial")&&j.push(U(ue)),ne("delta")&&j.push(U(ae)),ne("final")&&j.push(U(ie))}if(le){ne("value")&&j.push(U(re.s));var xe=0;ne("percent initial")&&xe++,ne("percent previous")&&xe++,ne("percent total")&&xe++;var he=xe>1;ne("percent initial")&&(Q=b.formatPercent(re.begR),he&&(Q+=" of initial"),j.push(Q)),ne("percent previous")&&(Q=b.formatPercent(re.difR),he&&(Q+=" of previous"),j.push(Q)),ne("percent total")&&(Q=b.formatPercent(re.sumR),he&&(Q+=" of total"),j.push(Q))}return j.join("<br>")}B.exports={plot:L,toMoveInsideBar:z}},{"../../components/color":366,"../../components/drawing":388,"../../components/fx/helpers":402,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"./attributes":648,"./constants":650,"./helpers":654,"./style":662,"./uniform_text":664,"@plotly/d3":58,"fast-isnumeric":190}],660:[function(t,B,H){B.exports=function(b,w){var e=b.cd,o=b.xaxis,a=b.yaxis,r=e[0].trace,n=r.type==="funnel",c=r.orientation==="h",s=[],i;if(w===!1)for(i=0;i<e.length;i++)e[i].selected=0;else for(i=0;i<e.length;i++){var v=e[i],u="ct"in v?v.ct:d(v,o,a,c,n);w.contains(u,!1,i,b)?(s.push({pointNumber:i,x:o.c2d(v.x),y:a.c2d(v.y)}),v.selected=1):v.selected=0}return s};function d(l,b,w,e,o){var a=b.c2p(e?l.s0:l.p0,!0),r=b.c2p(e?l.s1:l.p1,!0),n=w.c2p(e?l.p0:l.s0,!0),c=w.c2p(e?l.p1:l.s1,!0);return o?[(a+r)/2,(n+c)/2]:e?[r,(n+c)/2]:[(a+r)/2,c]}},{}],661:[function(t,B,H){B.exports=b;var d=t("../../lib").distinctVals,l=t("../../constants/numerical").BADNUM;function b(w,e){this.traces=w,this.sepNegVal=e.sepNegVal,this.overlapNoMerge=e.overlapNoMerge;for(var o=1/0,a=[],r=0;r<w.length;r++){for(var n=w[r],c=0;c<n.length;c++){var s=n[c];s.p!==l&&a.push(s.p)}n[0]&&n[0].width1&&(o=Math.min(n[0].width1,o))}this.positions=a;var i=d(a);this.distinctPositions=i.vals,i.vals.length===1&&o!==1/0?this.minDiff=o:this.minDiff=Math.min(i.minDiff,o);var v=(e.posAxis||{}).type;(v==="category"||v==="multicategory")&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}b.prototype.put=function(e,o){var a=this.getLabel(e,o),r=this.bins[a]||0;return this.bins[a]=r+o,r},b.prototype.get=function(e,o){var a=this.getLabel(e,o);return this.bins[a]||0},b.prototype.getLabel=function(e,o){var a=o<0&&this.sepNegVal?"v":"^",r=this.overlapNoMerge?e:Math.round(e/this.binWidth);return a+r}},{"../../constants/numerical":479,"../../lib":503}],662:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../components/color"),b=t("../../components/drawing"),w=t("../../lib"),e=t("../../registry"),o=t("./uniform_text").resizeText,a=t("./attributes"),r=a.textfont,n=a.insidetextfont,c=a.outsidetextfont,s=t("./helpers");function i(_){var f=d.select(_).selectAll("g.barlayer").selectAll("g.trace");o(_,f,"bar");var L=f.size(),S=_._fullLayout;f.style("opacity",function(k){return k[0].trace.opacity}).each(function(k){(S.barmode==="stack"&&L>1||S.bargap===0&&S.bargroupgap===0&&!k[0].trace.marker.line.width)&&d.select(this).attr("shape-rendering","crispEdges")}),f.selectAll("g.points").each(function(k){var P=d.select(this),z=k[0].trace;v(P,z,_)}),e.getComponentMethod("errorbars","style")(f)}function v(_,f,L){b.pointStyle(_.selectAll("path"),f,L),u(_,f,L)}function u(_,f,L){_.selectAll("text").each(function(S){var k=d.select(this),P=w.ensureUniformFontSize(L,p(k,S,f,L));b.font(k,P)})}function g(_,f,L){var S=f[0].trace;S.selectedpoints?h(L,S,_):(v(L,S,_),e.getComponentMethod("errorbars","style")(L))}function h(_,f,L){b.selectedPointStyle(_.selectAll("path"),f),y(_.selectAll("text"),f,L)}function y(_,f,L){_.each(function(S){var k=d.select(this),P;if(S.selected){P=w.ensureUniformFontSize(L,p(k,S,f,L));var z=f.selected.textfont&&f.selected.textfont.color;z&&(P.color=z),b.font(k,P)}else b.selectedTextStyle(k,f)})}function p(_,f,L,S){var k=S._fullLayout.font,P=L.textfont;if(_.classed("bartext-inside")){var z=T(f,L);P=m(L,f.i,k,z)}else _.classed("bartext-outside")&&(P=M(L,f.i,k));return P}function A(_,f,L){return x(r,_.textfont,f,L)}function m(_,f,L,S){var k=A(_,f,L),P=_._input.textfont===void 0||_._input.textfont.color===void 0||Array.isArray(_.textfont.color)&&_.textfont.color[f]===void 0;return P&&(k={color:l.contrast(S),family:k.family,size:k.size}),x(n,_.insidetextfont,f,k)}function M(_,f,L){var S=A(_,f,L);return x(c,_.outsidetextfont,f,S)}function x(_,f,L,S){f=f||{};var k=s.getValue(f.family,L),P=s.getValue(f.size,L),z=s.getValue(f.color,L);return{family:s.coerceString(_.family,k,S.family),size:s.coerceNumber(_.size,P,S.size),color:s.coerceColor(_.color,z,S.color)}}function T(_,f){return f.type==="waterfall"?f[_.dir].marker.color:_.mcc||_.mc||f.marker.color}B.exports={style:i,styleTextPoints:u,styleOnSelect:g,getInsideTextFont:m,getOutsideTextFont:M,getBarColor:T,resizeText:o}},{"../../components/color":366,"../../components/drawing":388,"../../lib":503,"../../registry":638,"./attributes":648,"./helpers":654,"./uniform_text":664,"@plotly/d3":58}],663:[function(t,B,H){var d=t("../../components/color"),l=t("../../components/colorscale/helpers").hasColorscale,b=t("../../components/colorscale/defaults"),w=t("../../lib").coercePattern;B.exports=function(o,a,r,n,c){var s=r("marker.color",n),i=l(o,"marker");i&&b(o,a,c,r,{prefix:"marker.",cLetter:"c"}),r("marker.line.color",d.defaultLine),l(o,"marker.line")&&b(o,a,c,r,{prefix:"marker.line.",cLetter:"c"}),r("marker.line.width"),r("marker.opacity"),w(r,"marker.pattern",s,i),r("selected.marker.color"),r("unselected.marker.color")}},{"../../components/color":366,"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503}],664:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib");function b(a,r,n){var c=a._fullLayout,s=c["_"+n+"Text_minsize"];if(s){var i=c.uniformtext.mode==="hide",v;switch(n){case"funnelarea":case"pie":case"sunburst":v="g.slice";break;case"treemap":case"icicle":v="g.slice, g.pathbar";break;default:v="g.points > g.point"}r.selectAll(v).each(function(u){var g=u.transform;if(g){g.scale=i&&g.hide?0:s/g.fontSize;var h=d.select(this).select("text");h.attr("transform",l.getTextTransform(g))}})}}function w(a,r,n){if(n.uniformtext.mode){var c=o(a),s=n.uniformtext.minsize,i=r.scale*r.fontSize;r.hide=i<s,n[c]=n[c]||1/0,r.hide||(n[c]=Math.min(n[c],Math.max(i,s)))}}function e(a,r){var n=o(a);r[n]=void 0}function o(a){return"_"+a+"Text_minsize"}B.exports={recordMinTextSize:w,clearMinTextSize:e,resizeText:b}},{"../../lib":503,"@plotly/d3":58}],665:[function(t,B,H){var d=t("../../plots/template_attributes").hovertemplateAttrs,l=t("../../lib/extend").extendFlat,b=t("../scatterpolar/attributes"),w=t("../bar/attributes");B.exports={r:b.r,theta:b.theta,r0:b.r0,dr:b.dr,theta0:b.theta0,dtheta:b.dtheta,thetaunit:b.thetaunit,base:l({},w.base,{}),offset:l({},w.offset,{}),width:l({},w.width,{}),text:l({},w.text,{}),hovertext:l({},w.hovertext,{}),marker:w.marker,hoverinfo:b.hoverinfo,hovertemplate:d(),selected:w.selected,unselected:w.unselected}},{"../../lib/extend":493,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatterpolar/attributes":1e3}],666:[function(t,B,H){var d=t("../../components/colorscale/helpers").hasColorscale,l=t("../../components/colorscale/calc"),b=t("../bar/arrays_to_calcdata"),w=t("../bar/cross_trace_calc").setGroupPositions,e=t("../scatter/calc_selection"),o=t("../../registry").traceIs,a=t("../../lib").extendFlat;function r(c,s){for(var i=c._fullLayout,v=s.subplot,u=i[v].radialaxis,g=i[v].angularaxis,h=u.makeCalcdata(s,"r"),y=g.makeCalcdata(s,"theta"),p=s._length,A=new Array(p),m=h,M=y,x=0;x<p;x++)A[x]={p:M[x],s:m[x]};function T(_){var f=s[_];f!==void 0&&(s["_"+_]=Array.isArray(f)?g.makeCalcdata(s,_):g.d2c(f,s.thetaunit))}return g.type==="linear"&&(T("width"),T("offset")),d(s,"marker")&&l(c,s,{vals:s.marker.color,containerStr:"marker",cLetter:"c"}),d(s,"marker.line")&&l(c,s,{vals:s.marker.line.color,containerStr:"marker.line",cLetter:"c"}),b(A,s),e(A,s),A}function n(c,s,i){for(var v=c.calcdata,u=[],g=0;g<v.length;g++){var h=v[g],y=h[0].trace;y.visible===!0&&o(y,"bar")&&y.subplot===i&&u.push(h)}var p=a({},s.radialaxis,{_id:"x"}),A=s.angularaxis;w(c,A,p,u,{mode:s.barmode,norm:s.barnorm,gap:s.bargap,groupgap:s.bargroupgap})}B.exports={calc:r,crossTraceCalc:n}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../lib":503,"../../registry":638,"../bar/arrays_to_calcdata":647,"../bar/cross_trace_calc":651,"../scatter/calc_selection":928}],667:[function(t,B,H){var d=t("../../lib"),l=t("../scatterpolar/defaults").handleRThetaDefaults,b=t("../bar/style_defaults"),w=t("./attributes");B.exports=function(o,a,r,n){function c(i,v){return d.coerce(o,a,w,i,v)}var s=l(o,a,n,c);if(!s){a.visible=!1;return}c("thetaunit"),c("base"),c("offset"),c("width"),c("text"),c("hovertext"),c("hovertemplate"),b(o,a,c,r,n),d.coerceSelectionMarkerOpacity(a,c)}},{"../../lib":503,"../bar/style_defaults":663,"../scatterpolar/defaults":1002,"./attributes":665}],668:[function(t,B,H){var d=t("../../components/fx"),l=t("../../lib"),b=t("../bar/hover").getTraceColor,w=l.fillText,e=t("../scatterpolar/hover").makeHoverPointText,o=t("../../plots/polar/helpers").isPtInsidePolygon;B.exports=function(r,n,c){var s=r.cd,i=s[0].trace,v=r.subplot,u=v.radialAxis,g=v.angularAxis,h=v.vangles,y=h?o:l.isPtInsideSector,p=r.maxHoverDistance,A=g._period||2*Math.PI,m=Math.abs(u.g2p(Math.sqrt(n*n+c*c))),M=Math.atan2(c,n);u.range[0]>u.range[1]&&(M+=Math.PI);var x=function(L){return y(m,M,[L.rp0,L.rp1],[L.thetag0,L.thetag1],h)?p+Math.min(1,Math.abs(L.thetag1-L.thetag0)/A)-1+(L.rp1-m)/(L.rp1-L.rp0)-1:1/0};if(d.getClosest(s,x,r),r.index!==!1){var T=r.index,_=s[T];r.x0=r.x1=_.ct[0],r.y0=r.y1=_.ct[1];var f=l.extendFlat({},_,{r:_.s,theta:_.p});return w(_,i,r),e(f,i,v,r),r.hovertemplate=i.hovertemplate,r.color=b(i,_),r.xLabelVal=r.yLabelVal=void 0,_.s<0&&(r.idealAlign="left"),[r]}}},{"../../components/fx":406,"../../lib":503,"../../plots/polar/helpers":621,"../bar/hover":655,"../scatterpolar/hover":1004}],669:[function(t,B,H){B.exports={moduleType:"trace",name:"barpolar",basePlotModule:t("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./calc").crossTraceCalc,plot:t("./plot"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("../scatterpolar/format_labels"),style:t("../bar/style").style,styleOnSelect:t("../bar/style").styleOnSelect,hoverPoints:t("./hover"),selectPoints:t("../bar/select"),meta:{}}},{"../../plots/polar":622,"../bar/select":660,"../bar/style":662,"../scatter/marker_colorbar":944,"../scatterpolar/format_labels":1003,"./attributes":665,"./calc":666,"./defaults":667,"./hover":668,"./layout_attributes":670,"./layout_defaults":671,"./plot":672}],670:[function(t,B,H){B.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],671:[function(t,B,H){var d=t("../../lib"),l=t("./layout_attributes");B.exports=function(b,w,e){var o={},a;function r(s,i){return d.coerce(b[a]||{},w[a],l,s,i)}for(var n=0;n<e.length;n++){var c=e[n];c.type==="barpolar"&&c.visible===!0&&(a=c.subplot,o[a]||(r("barmode"),r("bargap"),o[a]=1))}}},{"../../lib":503,"./layout_attributes":670}],672:[function(t,B,H){var d=t("@plotly/d3"),l=t("fast-isnumeric"),b=t("../../lib"),w=t("../../components/drawing"),e=t("../../plots/polar/helpers");B.exports=function(r,n,c){var s=n.xaxis,i=n.yaxis,v=n.radialAxis,u=n.angularAxis,g=o(n),h=n.layers.frontplot.select("g.barlayer");b.makeTraceGroups(h,c,"trace bars").each(function(){var y=d.select(this),p=b.ensureSingle(y,"g","points"),A=p.selectAll("g.point").data(b.identity);A.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),A.exit().remove(),A.each(function(m){var M=d.select(this),x=m.rp0=v.c2p(m.s0),T=m.rp1=v.c2p(m.s1),_=m.thetag0=u.c2g(m.p0),f=m.thetag1=u.c2g(m.p1),L;if(!l(x)||!l(T)||!l(_)||!l(f)||x===T||_===f)L="M0,0Z";else{var S=v.c2g(m.s1),k=(_+f)/2;m.ct=[s.c2p(S*Math.cos(k)),i.c2p(S*Math.sin(k))],L=g(x,T,_,f)}b.ensureSingle(M,"path").attr("d",L)}),w.setClipUrl(y,n._hasClipOnAxisFalse?n.clipIds.forTraces:null,r)})};function o(a){var r=a.cxx,n=a.cyy;return a.vangles?function(c,s,i,v){var u,g;b.angleDelta(i,v)>0?(u=i,g=v):(u=v,g=i);var h=e.findEnclosingVertexAngles(u,a.vangles)[0],y=e.findEnclosingVertexAngles(g,a.vangles)[1],p=[h,(u+g)/2,y];return e.pathPolygonAnnulus(c,s,u,g,p,r,n)}:function(c,s,i,v){return b.pathAnnulus(c,s,i,v,r,n)}}},{"../../components/drawing":388,"../../lib":503,"../../plots/polar/helpers":621,"@plotly/d3":58,"fast-isnumeric":190}],673:[function(t,B,H){var d=t("../scatter/attributes"),l=t("../bar/attributes"),b=t("../../components/color/attributes"),w=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=t("../../plots/template_attributes").hovertemplateAttrs,o=t("../../lib/extend").extendFlat,a=d.marker,r=a.line;B.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:d.xperiod,yperiod:d.yperiod,xperiod0:d.xperiod0,yperiod0:d.yperiod0,xperiodalignment:d.xperiodalignment,yperiodalignment:d.yperiodalignment,xhoverformat:w("x"),yhoverformat:w("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:o({},a.symbol,{arrayOk:!1,editType:"plot"}),opacity:o({},a.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:o({},a.size,{arrayOk:!1,editType:"calc"}),color:o({},a.color,{arrayOk:!1,editType:"style"}),line:{color:o({},r.color,{arrayOk:!1,dflt:b.defaultLine,editType:"style"}),width:o({},r.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:d.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:l.offsetgroup,alignmentgroup:l.alignmentgroup,selected:{marker:d.selected.marker,editType:"style"},unselected:{marker:d.unselected.marker,editType:"style"},text:o({},d.text,{}),hovertext:o({},d.hovertext,{}),hovertemplate:e({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":926}],674:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../plots/cartesian/axes"),b=t("../../plots/cartesian/align_period"),w=t("../../lib"),e=t("../../constants/numerical").BADNUM,o=w._;B.exports=function(M,x){var T=M._fullLayout,_=l.getFromId(M,x.xaxis||"x"),f=l.getFromId(M,x.yaxis||"y"),L=[],S=x.type==="violin"?"_numViolins":"_numBoxes",k,P,z,I,R,D,O;x.orientation==="h"?(z=_,I="x",R=f,D="y",O=!!x.yperiodalignment):(z=f,I="y",R=_,D="x",O=!!x.xperiodalignment);var F=a(x,D,R,T[S]),G=F[0],W=F[1],q=w.distinctVals(G,R),J=q.vals,X=q.minDiff/2,Z,se,le,oe,U,V,re=(x.boxpoints||x.points)==="all"?w.identity:function(kt){return kt.v<Z.lf||kt.v>Z.uf};if(x._hasPreCompStats){var ee=x[I],j=function(kt){return z.d2c((x[kt]||[])[k])},Q=1/0,ne=-1/0;for(k=0;k<x._length;k++){var ae=G[k];if(!!d(ae)){if(Z={},Z.pos=Z[D]=ae,O&&W&&(Z.orig_p=W[k]),Z.q1=j("q1"),Z.med=j("median"),Z.q3=j("q3"),se=[],ee&&w.isArrayOrTypedArray(ee[k]))for(P=0;P<ee[k].length;P++)V=z.d2c(ee[k][P]),V!==e&&(U={v:V,i:[k,P]},s(U,x,[k,P]),se.push(U));if(Z.pts=se.sort(v),le=Z[I]=se.map(u),oe=le.length,Z.med!==e&&Z.q1!==e&&Z.q3!==e&&Z.med>=Z.q1&&Z.q3>=Z.med){var ie=j("lowerfence");Z.lf=ie!==e&&ie<=Z.q1?ie:g(Z,le,oe);var ue=j("upperfence");Z.uf=ue!==e&&ue>=Z.q3?ue:h(Z,le,oe);var xe=j("mean");Z.mean=xe!==e?xe:oe?w.mean(le,oe):(Z.q1+Z.q3)/2;var he=j("sd");Z.sd=xe!==e&&he>=0?he:oe?w.stdev(le,oe,Z.mean):Z.q3-Z.q1,Z.lo=y(Z),Z.uo=p(Z);var ge=j("notchspan");ge=ge!==e&&ge>0?ge:A(Z,oe),Z.ln=Z.med-ge,Z.un=Z.med+ge;var me=Z.lf,ke=Z.uf;x.boxpoints&&le.length&&(me=Math.min(me,le[0]),ke=Math.max(ke,le[oe-1])),x.notched&&(me=Math.min(me,Z.ln),ke=Math.max(ke,Z.un)),Z.min=me,Z.max=ke}else{w.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+Z.q1,"median = "+Z.med,"q3 = "+Z.q3].join(`
`));var Ae;Z.med!==e?Ae=Z.med:Z.q1!==e?Z.q3!==e?Ae=(Z.q1+Z.q3)/2:Ae=Z.q1:Z.q3!==e?Ae=Z.q3:Ae=0,Z.med=Ae,Z.q1=Z.q3=Ae,Z.lf=Z.uf=Ae,Z.mean=Z.sd=Ae,Z.ln=Z.un=Ae,Z.min=Z.max=Ae}Q=Math.min(Q,Z.min),ne=Math.max(ne,Z.max),Z.pts2=se.filter(re),L.push(Z)}}x._extremes[z._id]=l.findExtremes(z,[Q,ne],{padded:!0})}else{var Ne=z.makeCalcdata(x,I),He=r(J,X),Ge=J.length,_e=n(Ge);for(k=0;k<x._length;k++)if(V=Ne[k],!!d(V)){var De=w.findBin(G[k],He);De>=0&&De<Ge&&(U={v:V,i:k},s(U,x,k),_e[De].push(U))}var Ye=1/0,qe=-1/0,Ue=x.quartilemethod,Ie=Ue==="exclusive",Ve=Ue==="inclusive";for(k=0;k<Ge;k++)if(_e[k].length>0){if(Z={},Z.pos=Z[D]=J[k],se=Z.pts=_e[k].sort(v),le=Z[I]=se.map(u),oe=le.length,Z.min=le[0],Z.max=le[oe-1],Z.mean=w.mean(le,oe),Z.sd=w.stdev(le,oe,Z.mean),Z.med=w.interp(le,.5),oe%2&&(Ie||Ve)){var dt,Dt;Ie?(dt=le.slice(0,oe/2),Dt=le.slice(oe/2+1)):Ve&&(dt=le.slice(0,oe/2+1),Dt=le.slice(oe/2)),Z.q1=w.interp(dt,.5),Z.q3=w.interp(Dt,.5)}else Z.q1=w.interp(le,.25),Z.q3=w.interp(le,.75);Z.lf=g(Z,le,oe),Z.uf=h(Z,le,oe),Z.lo=y(Z),Z.uo=p(Z);var Yt=A(Z,oe);Z.ln=Z.med-Yt,Z.un=Z.med+Yt,Ye=Math.min(Ye,Z.ln),qe=Math.max(qe,Z.un),Z.pts2=se.filter(re),L.push(Z)}x._extremes[z._id]=l.findExtremes(z,x.notched?Ne.concat([Ye,qe]):Ne,{padded:!0})}return i(L,x),L.length>0?(L[0].t={num:T[S],dPos:X,posLetter:D,valLetter:I,labels:{med:o(M,"median:"),min:o(M,"min:"),q1:o(M,"q1:"),q3:o(M,"q3:"),max:o(M,"max:"),mean:x.boxmean==="sd"?o(M,"mean \xB1 \u03C3:"):o(M,"mean:"),lf:o(M,"lower fence:"),uf:o(M,"upper fence:")}},T[S]++,L):[{t:{empty:!0}}]};function a(m,M,x,T){var _=M in m,f=M+"0"in m,L="d"+M in m;if(_||f&&L){var S=x.makeCalcdata(m,M),k=b(m,x,M,S).vals;return[k,S]}var P;f?P=m[M+"0"]:"name"in m&&(x.type==="category"||d(m.name)&&["linear","log"].indexOf(x.type)!==-1||w.isDateTime(m.name)&&x.type==="date")?P=m.name:P=T;for(var z=x.type==="multicategory"?x.r2c_just_indices(P):x.d2c(P,0,m[M+"calendar"]),I=m._length,R=new Array(I),D=0;D<I;D++)R[D]=z;return[R]}function r(m,M){for(var x=m.length,T=new Array(x+1),_=0;_<x;_++)T[_]=m[_]-M;return T[x]=m[x-1]+M,T}function n(m){for(var M=new Array(m),x=0;x<m;x++)M[x]=[];return M}var c={text:"tx",hovertext:"htx"};function s(m,M,x){for(var T in c)w.isArrayOrTypedArray(M[T])&&(Array.isArray(x)?w.isArrayOrTypedArray(M[T][x[0]])&&(m[c[T]]=M[T][x[0]][x[1]]):m[c[T]]=M[T][x])}function i(m,M){if(w.isArrayOrTypedArray(M.selectedpoints))for(var x=0;x<m.length;x++){for(var T=m[x].pts||[],_={},f=0;f<T.length;f++)_[T[f].i]=f;w.tagSelected(T,M,_)}}function v(m,M){return m.v-M.v}function u(m){return m.v}function g(m,M,x){return x===0?m.q1:Math.min(m.q1,M[Math.min(w.findBin(2.5*m.q1-1.5*m.q3,M,!0)+1,x-1)])}function h(m,M,x){return x===0?m.q3:Math.max(m.q3,M[Math.max(w.findBin(2.5*m.q3-1.5*m.q1,M),0)])}function y(m){return 4*m.q1-3*m.q3}function p(m){return 4*m.q3-3*m.q1}function A(m,M){return M===0?0:1.57*(m.q3-m.q1)/Math.sqrt(M)}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"fast-isnumeric":190}],675:[function(t,B,H){var d=t("../../plots/cartesian/axes"),l=t("../../lib"),b=t("../../plots/cartesian/constraints").getAxisGroup,w=["v","h"];function e(a,r){for(var n=a.calcdata,c=r.xaxis,s=r.yaxis,i=0;i<w.length;i++){for(var v=w[i],u=v==="h"?s:c,g=[],h=0;h<n.length;h++){var y=n[h],p=y[0].t,A=y[0].trace;A.visible===!0&&(A.type==="box"||A.type==="candlestick")&&!p.empty&&(A.orientation||"v")===v&&A.xaxis===c._id&&A.yaxis===s._id&&g.push(h)}o("box",a,g,u)}}function o(a,r,n,c){var s=r.calcdata,i=r._fullLayout,v=c._id,u=v.charAt(0),g,h,y,p=[],A=0;for(g=0;g<n.length;g++)for(y=s[n[g]],h=0;h<y.length;h++)p.push(c.c2l(y[h].pos,!0)),A+=(y[h].pts2||[]).length;if(!!p.length){var m=l.distinctVals(p);(c.type==="category"||c.type==="multicategory")&&(m.minDiff=1);var M=m.minDiff/2;d.minDtick(c,m.minDiff,m.vals[0],!0);var x=a==="violin"?"_numViolins":"_numBoxes",T=i[x],_=i[a+"mode"]==="group"&&T>1,f=1-i[a+"gap"],L=1-i[a+"groupgap"];for(g=0;g<n.length;g++){y=s[n[g]];var S=y[0].trace,k=y[0].t,P=S.width,z=S.side,I,R,D,O;if(P)I=R=O=P/2,D=0;else if(I=M,_){var F=b(i,c._id)+S.orientation,G=i._alignmentOpts[F]||{},W=G[S.alignmentgroup]||{},q=Object.keys(W.offsetGroups||{}).length,J=q||T,X=q?S._offsetIndex:k.num;R=I*f*L/J,D=2*I*(-.5+(X+.5)/J)*f,O=I*f/J}else R=I*f*L,D=0,O=I;k.dPos=I,k.bPos=D,k.bdPos=R,k.wHover=O;var Z,se,le=D+R,oe,U,V,re,ee,j,Q=Boolean(P),ne=(S.boxpoints||S.points)&&A>0;if(z==="positive"?(Z=I*(P?1:.5),oe=le,se=oe=D):z==="negative"?(Z=oe=D,se=I*(P?1:.5),U=le):(Z=se=I,oe=U=le),ne){var ae=S.pointpos,ie=S.jitter,ue=S.marker.size/2,xe=0;ae+ie>=0&&(xe=le*(ae+ie),xe>Z?(Q=!0,ee=ue,V=xe):xe>oe&&(ee=ue,V=Z)),xe<=Z&&(V=Z);var he=0;ae-ie<=0&&(he=-le*(ae-ie),he>se?(Q=!0,j=ue,re=he):he>U&&(j=ue,re=se)),he<=se&&(re=se)}else V=Z,re=se;var ge=new Array(y.length);for(h=0;h<y.length;h++)ge[h]=y[h].pos;S._extremes[v]=d.findExtremes(c,ge,{padded:Q,vpadminus:re,vpadplus:V,vpadLinearized:!0,ppadminus:{x:j,y:ee}[u],ppadplus:{x:ee,y:j}[u]})}}}B.exports={crossTraceCalc:e,setPositionOffset:o}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../plots/cartesian/constraints":562}],676:[function(t,B,H){var d=t("../../lib"),l=t("../../registry"),b=t("../../components/color"),w=t("../scatter/period_defaults"),e=t("../bar/defaults").handleGroupingDefaults,o=t("../../plots/cartesian/axis_autotype"),a=t("./attributes");function r(i,v,u,g){function h(_,f){return d.coerce(i,v,a,_,f)}if(n(i,v,h,g),v.visible!==!1){w(i,v,g,h),h("xhoverformat"),h("yhoverformat");var y=v._hasPreCompStats;y&&(h("lowerfence"),h("upperfence")),h("line.color",(i.marker||{}).color||u),h("line.width"),h("fillcolor",b.addOpacity(v.line.color,.5));var p=!1;if(y){var A=h("mean"),m=h("sd");A&&A.length&&(p=!0,m&&m.length&&(p="sd"))}h("boxmean",p),h("whiskerwidth"),h("width"),h("quartilemethod");var M=!1;if(y){var x=h("notchspan");x&&x.length&&(M=!0)}else d.validate(i.notchwidth,a.notchwidth)&&(M=!0);var T=h("notched",M);T&&h("notchwidth"),c(i,v,h,{prefix:"box"})}}function n(i,v,u,g){function h(q){var J=0;return q&&q.length&&(J+=1,d.isArrayOrTypedArray(q[0])&&q[0].length&&(J+=1)),J}function y(q){return d.validate(i[q],a[q])}var p=u("y"),A=u("x"),m;if(v.type==="box"){var M=u("q1"),x=u("median"),T=u("q3");v._hasPreCompStats=M&&M.length&&x&&x.length&&T&&T.length,m=Math.min(d.minRowLength(M),d.minRowLength(x),d.minRowLength(T))}var _=h(p),f=h(A),L=_&&d.minRowLength(p),S=f&&d.minRowLength(A),k=g.calendar,P={autotypenumbers:g.autotypenumbers},z,I;if(v._hasPreCompStats)switch(String(f)+String(_)){case"00":var R=y("x0")||y("dx"),D=y("y0")||y("dy");D&&!R?z="h":z="v",I=m;break;case"10":z="v",I=Math.min(m,S);break;case"20":z="h",I=Math.min(m,A.length);break;case"01":z="h",I=Math.min(m,L);break;case"02":z="v",I=Math.min(m,p.length);break;case"12":z="v",I=Math.min(m,S,p.length);break;case"21":z="h",I=Math.min(m,A.length,L);break;case"11":I=0;break;case"22":var O=!1,F;for(F=0;F<A.length;F++)if(o(A[F],k,P)==="category"){O=!0;break}if(O)z="v",I=Math.min(m,S,p.length);else{for(F=0;F<p.length;F++)if(o(p[F],k,P)==="category"){O=!0;break}O?(z="h",I=Math.min(m,A.length,L)):(z="v",I=Math.min(m,S,p.length))}break}else _>0?(z="v",f>0?I=Math.min(S,L):I=Math.min(L)):f>0?(z="h",I=Math.min(S)):I=0;if(!I){v.visible=!1;return}v._length=I;var G=u("orientation",z);v._hasPreCompStats?G==="v"&&f===0?(u("x0",0),u("dx",1)):G==="h"&&_===0&&(u("y0",0),u("dy",1)):G==="v"&&f===0?u("x0"):G==="h"&&_===0&&u("y0");var W=l.getComponentMethod("calendars","handleTraceDefaults");W(i,v,["x","y"],g)}function c(i,v,u,g){var h=g.prefix,y=d.coerce2(i,v,a,"marker.outliercolor"),p=u("marker.line.outliercolor"),A="outliers";v._hasPreCompStats?A="all":(y||p)&&(A="suspectedoutliers");var m=u(h+"points",A);m?(u("jitter",m==="all"?.3:0),u("pointpos",m==="all"?-1.5:0),u("marker.symbol"),u("marker.opacity"),u("marker.size"),u("marker.color",v.line.color),u("marker.line.color"),u("marker.line.width"),m==="suspectedoutliers"&&(u("marker.line.outliercolor",v.marker.color),u("marker.line.outlierwidth")),u("selected.marker.color"),u("unselected.marker.color"),u("selected.marker.size"),u("unselected.marker.size"),u("text"),u("hovertext")):delete v.marker;var M=u("hoveron");(M==="all"||M.indexOf("points")!==-1)&&u("hovertemplate"),d.coerceSelectionMarkerOpacity(v,u)}function s(i,v){var u,g;function h(A){return d.coerce(g._input,g,a,A)}for(var y=0;y<i.length;y++){g=i[y];var p=g.type;(p==="box"||p==="violin")&&(u=g._input,v[p+"mode"]==="group"&&e(u,g,v,h))}}B.exports={supplyDefaults:r,crossTraceDefaults:s,handleSampleDefaults:n,handlePointsDefaults:c}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/axis_autotype":555,"../../registry":638,"../bar/defaults":652,"../scatter/period_defaults":946,"./attributes":673}],677:[function(t,B,H){B.exports=function(l,b){return b.hoverOnBox&&(l.hoverOnBox=b.hoverOnBox),"xVal"in b&&(l.x=b.xVal),"yVal"in b&&(l.y=b.yVal),b.xa&&(l.xaxis=b.xa),b.ya&&(l.yaxis=b.ya),l}},{}],678:[function(t,B,H){var d=t("../../plots/cartesian/axes"),l=t("../../lib"),b=t("../../components/fx"),w=t("../../components/color"),e=l.fillText;function o(n,c,s,i){var v=n.cd,u=v[0].trace,g=u.hoveron,h=[],y;return g.indexOf("boxes")!==-1&&(h=h.concat(a(n,c,s,i))),g.indexOf("points")!==-1&&(y=r(n,c,s)),i==="closest"?y?[y]:h:(y&&h.push(y),h)}function a(n,c,s,i){var v=n.cd,u=n.xa,g=n.ya,h=v[0].trace,y=v[0].t,p=h.type==="violin",A=[],m,M,x,T,_,f,L,S,k,P,z,I=y.bdPos,R,D,O=y.wHover,F=function(ne){return x.c2l(ne.pos)+y.bPos-x.c2l(f)};p&&h.side!=="both"?(h.side==="positive"&&(k=function(ne){var ae=F(ne);return b.inbox(ae,ae+O,P)},R=I,D=0),h.side==="negative"&&(k=function(ne){var ae=F(ne);return b.inbox(ae-O,ae,P)},R=0,D=I)):(k=function(ne){var ae=F(ne);return b.inbox(ae-O,ae+O,P)},R=D=I);var G;p?G=function(ne){return b.inbox(ne.span[0]-_,ne.span[1]-_,P)}:G=function(ne){return b.inbox(ne.min-_,ne.max-_,P)},h.orientation==="h"?(_=c,f=s,L=G,S=k,m="y",x=g,M="x",T=u):(_=s,f=c,L=k,S=G,m="x",x=u,M="y",T=g);var W=Math.min(1,I/Math.abs(x.r2c(x.range[1])-x.r2c(x.range[0])));P=n.maxHoverDistance-W,z=n.maxSpikeDistance-W;function q(ne){return(L(ne)+S(ne))/2}var J=b.getDistanceFunction(i,L,S,q);if(b.getClosest(v,J,n),n.index===!1)return[];var X=v[n.index],Z=h.line.color,se=(h.marker||{}).color;w.opacity(Z)&&h.line.width?n.color=Z:w.opacity(se)&&h.boxpoints?n.color=se:n.color=h.fillcolor,n[m+"0"]=x.c2p(X.pos+y.bPos-D,!0),n[m+"1"]=x.c2p(X.pos+y.bPos+R,!0),n[m+"LabelVal"]=X.orig_p!==void 0?X.orig_p:X.pos;var le=m+"Spike";n.spikeDistance=q(X)*z/P,n[le]=x.c2p(X.pos,!0);var oe={},U=["med","q1","q3","min","max"];(h.boxmean||(h.meanline||{}).visible)&&U.push("mean"),(h.boxpoints||h.points)&&U.push("lf","uf");for(var V=0;V<U.length;V++){var re=U[V];if(!(!(re in X)||X[re]in oe)){oe[X[re]]=!0;var ee=X[re],j=T.c2p(ee,!0),Q=l.extendFlat({},n);Q.attr=re,Q[M+"0"]=Q[M+"1"]=j,Q[M+"LabelVal"]=ee,Q[M+"Label"]=(y.labels?y.labels[re]+" ":"")+d.hoverLabelText(T,ee,h[M+"hoverformat"]),Q.hoverOnBox=!0,re==="mean"&&"sd"in X&&h.boxmean==="sd"&&(Q[M+"err"]=X.sd),n.name="",n.spikeDistance=void 0,n[le]=void 0,Q.hovertemplate=!1,A.push(Q)}}return A}function r(n,c,s){for(var i=n.cd,v=n.xa,u=n.ya,g=i[0].trace,h=v.c2p(c),y=u.c2p(s),p,A=function(F){var G=Math.max(3,F.mrc||0);return Math.max(Math.abs(v.c2p(F.x)-h)-G,1-3/G)},m=function(F){var G=Math.max(3,F.mrc||0);return Math.max(Math.abs(u.c2p(F.y)-y)-G,1-3/G)},M=b.quadrature(A,m),x=!1,T,_,f=0;f<i.length;f++){T=i[f];for(var L=0;L<(T.pts||[]).length;L++){_=T.pts[L];var S=M(_);S<=n.distance&&(n.distance=S,x=[f,L])}}if(!x)return!1;T=i[x[0]],_=T.pts[x[1]];var k=v.c2p(_.x,!0),P=u.c2p(_.y,!0),z=_.mrc||1;p=l.extendFlat({},n,{index:_.i,color:(g.marker||{}).color,name:g.name,x0:k-z,x1:k+z,y0:P-z,y1:P+z,spikeDistance:n.distance,hovertemplate:g.hovertemplate});var I=T.orig_p,R=I!==void 0?I:T.pos,D;g.orientation==="h"?(D=u,p.xLabelVal=_.x,p.yLabelVal=R):(D=v,p.xLabelVal=R,p.yLabelVal=_.y);var O=D._id.charAt(0);return p[O+"Spike"]=D.c2p(T.pos,!0),e(_,g,p),p}B.exports={hoverPoints:o,hoverOnBoxes:a,hoverOnPoints:r}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"../../plots/cartesian/axes":554}],679:[function(t,B,H){B.exports={attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults").supplyDefaults,crossTraceDefaults:t("./defaults").crossTraceDefaults,supplyLayoutDefaults:t("./layout_defaults").supplyLayoutDefaults,calc:t("./calc"),crossTraceCalc:t("./cross_trace_calc").crossTraceCalc,plot:t("./plot").plot,style:t("./style").style,styleOnSelect:t("./style").styleOnSelect,hoverPoints:t("./hover").hoverPoints,eventData:t("./event_data"),selectPoints:t("./select"),moduleType:"trace",name:"box",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"./attributes":673,"./calc":674,"./cross_trace_calc":675,"./defaults":676,"./event_data":677,"./hover":678,"./layout_attributes":680,"./layout_defaults":681,"./plot":682,"./select":683,"./style":684}],680:[function(t,B,H){B.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],681:[function(t,B,H){var d=t("../../registry"),l=t("../../lib"),b=t("./layout_attributes");function w(o,a,r,n,c){for(var s=c+"Layout",i=!1,v=0;v<r.length;v++){var u=r[v];if(d.traceIs(u,s)){i=!0;break}}!i||(n(c+"mode"),n(c+"gap"),n(c+"groupgap"))}function e(o,a,r){function n(c,s){return l.coerce(o,a,b,c,s)}w(o,a,r,n,"box")}B.exports={supplyLayoutDefaults:e,_supply:w}},{"../../lib":503,"../../registry":638,"./layout_attributes":680}],682:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib"),b=t("../../components/drawing"),w=5,e=.01;function o(c,s,i,v){var u=s.xaxis,g=s.yaxis;l.makeTraceGroups(v,i,"trace boxes").each(function(h){var y=d.select(this),p=h[0],A=p.t,m=p.trace;if(A.wdPos=A.bdPos*m.whiskerwidth,m.visible!==!0||A.empty){y.remove();return}var M,x;m.orientation==="h"?(M=g,x=u):(M=u,x=g),a(y,{pos:M,val:x},m,A),r(y,{x:u,y:g},m,A),n(y,{pos:M,val:x},m,A)})}function a(c,s,i,v){var u=i.orientation==="h",g=s.val,h=s.pos,y=!!h.rangebreaks,p=v.bPos,A=v.wdPos||0,m=v.bPosPxOffset||0,M=i.whiskerwidth||0,x=i.notched||!1,T=x?1-2*i.notchwidth:1,_,f;Array.isArray(v.bdPos)?(_=v.bdPos[0],f=v.bdPos[1]):(_=v.bdPos,f=v.bdPos);var L=c.selectAll("path.box").data(i.type!=="violin"||i.box.visible?l.identity:[]);L.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),L.exit().remove(),L.each(function(S){if(S.empty)return"M0,0Z";var k=h.c2l(S.pos+p,!0),P=h.l2p(k-_)+m,z=h.l2p(k+f)+m,I=y?(P+z)/2:h.l2p(k)+m,R=i.whiskerwidth,D=y?P*R+(1-R)*I:h.l2p(k-A)+m,O=y?z*R+(1-R)*I:h.l2p(k+A)+m,F=h.l2p(k-_*T)+m,G=h.l2p(k+f*T)+m,W=g.c2p(S.q1,!0),q=g.c2p(S.q3,!0),J=l.constrain(g.c2p(S.med,!0),Math.min(W,q)+1,Math.max(W,q)-1),X=S.lf===void 0||i.boxpoints===!1,Z=g.c2p(X?S.min:S.lf,!0),se=g.c2p(X?S.max:S.uf,!0),le=g.c2p(S.ln,!0),oe=g.c2p(S.un,!0);u?d.select(this).attr("d","M"+J+","+F+"V"+G+"M"+W+","+P+"V"+z+(x?"H"+le+"L"+J+","+G+"L"+oe+","+z:"")+"H"+q+"V"+P+(x?"H"+oe+"L"+J+","+F+"L"+le+","+P:"")+"ZM"+W+","+I+"H"+Z+"M"+q+","+I+"H"+se+(M===0?"":"M"+Z+","+D+"V"+O+"M"+se+","+D+"V"+O)):d.select(this).attr("d","M"+F+","+J+"H"+G+"M"+P+","+W+"H"+z+(x?"V"+le+"L"+G+","+J+"L"+z+","+oe:"")+"V"+q+"H"+P+(x?"V"+oe+"L"+F+","+J+"L"+P+","+le:"")+"ZM"+I+","+W+"V"+Z+"M"+I+","+q+"V"+se+(M===0?"":"M"+D+","+Z+"H"+O+"M"+D+","+se+"H"+O))})}function r(c,s,i,v){var u=s.x,g=s.y,h=v.bdPos,y=v.bPos,p=i.boxpoints||i.points;l.seedPseudoRandom();var A=function(x){return x.forEach(function(T){T.t=v,T.trace=i}),x},m=c.selectAll("g.points").data(p?A:[]);m.enter().append("g").attr("class","points"),m.exit().remove();var M=m.selectAll("path").data(function(x){var T,_=x.pts2,f=Math.max((x.max-x.min)/10,x.q3-x.q1),L=f*1e-9,S=f*e,k=[],P=0,z;if(i.jitter){if(f===0)for(P=1,k=new Array(_.length),T=0;T<_.length;T++)k[T]=1;else for(T=0;T<_.length;T++){var I=Math.max(0,T-w),R=_[I].v,D=Math.min(_.length-1,T+w),O=_[D].v;p!=="all"&&(_[T].v<x.lf?O=Math.min(O,x.lf):R=Math.max(R,x.uf));var F=Math.sqrt(S*(D-I)/(O-R+L))||0;F=l.constrain(Math.abs(F),0,1),k.push(F),P=Math.max(F,P)}z=i.jitter*2/(P||1)}for(T=0;T<_.length;T++){var G=_[T],W=G.v,q=i.jitter?z*k[T]*(l.pseudoRandom()-.5):0,J=x.pos+y+h*(i.pointpos+q);i.orientation==="h"?(G.y=J,G.x=W):(G.x=J,G.y=W),p==="suspectedoutliers"&&W<x.uo&&W>x.lo&&(G.so=!0)}return _});M.enter().append("path").classed("point",!0),M.exit().remove(),M.call(b.translatePoints,u,g)}function n(c,s,i,v){var u=s.val,g=s.pos,h=!!g.rangebreaks,y=v.bPos,p=v.bPosPxOffset||0,A=i.boxmean||(i.meanline||{}).visible,m,M;Array.isArray(v.bdPos)?(m=v.bdPos[0],M=v.bdPos[1]):(m=v.bdPos,M=v.bdPos);var x=c.selectAll("path.mean").data(i.type==="box"&&i.boxmean||i.type==="violin"&&i.box.visible&&i.meanline.visible?l.identity:[]);x.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),x.exit().remove(),x.each(function(T){var _=g.c2l(T.pos+y,!0),f=g.l2p(_-m)+p,L=g.l2p(_+M)+p,S=h?(f+L)/2:g.l2p(_)+p,k=u.c2p(T.mean,!0),P=u.c2p(T.mean-T.sd,!0),z=u.c2p(T.mean+T.sd,!0);i.orientation==="h"?d.select(this).attr("d","M"+k+","+f+"V"+L+(A==="sd"?"m0,0L"+P+","+S+"L"+k+","+f+"L"+z+","+S+"Z":"")):d.select(this).attr("d","M"+f+","+k+"H"+L+(A==="sd"?"m0,0L"+S+","+P+"L"+f+","+k+"L"+S+","+z+"Z":""))})}B.exports={plot:o,plotBoxAndWhiskers:a,plotPoints:r,plotBoxMean:n}},{"../../components/drawing":388,"../../lib":503,"@plotly/d3":58}],683:[function(t,B,H){B.exports=function(l,b){var w=l.cd,e=l.xaxis,o=l.yaxis,a=[],r,n;if(b===!1)for(r=0;r<w.length;r++)for(n=0;n<(w[r].pts||[]).length;n++)w[r].pts[n].selected=0;else for(r=0;r<w.length;r++)for(n=0;n<(w[r].pts||[]).length;n++){var c=w[r].pts[n],s=e.c2p(c.x),i=o.c2p(c.y);b.contains([s,i],null,c.i,l)?(a.push({pointNumber:c.i,x:e.c2d(c.x),y:o.c2d(c.y)}),c.selected=1):c.selected=0}return a}},{}],684:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../components/color"),b=t("../../components/drawing");function w(o,a,r){var n=r||d.select(o).selectAll("g.trace.boxes");n.style("opacity",function(c){return c[0].trace.opacity}),n.each(function(c){var s=d.select(this),i=c[0].trace,v=i.line.width;function u(y,p,A,m){y.style("stroke-width",p+"px").call(l.stroke,A).call(l.fill,m)}var g=s.selectAll("path.box");if(i.type==="candlestick")g.each(function(y){if(!y.empty){var p=d.select(this),A=i[y.dir];u(p,A.line.width,A.line.color,A.fillcolor),p.style("opacity",i.selectedpoints&&!y.selected?.3:1)}});else{u(g,v,i.line.color,i.fillcolor),s.selectAll("path.mean").style({"stroke-width":v,"stroke-dasharray":2*v+"px,"+v+"px"}).call(l.stroke,i.line.color);var h=s.selectAll("path.point");b.pointStyle(h,i,o)}})}function e(o,a,r){var n=a[0].trace,c=r.selectAll("path.point");n.selectedpoints?b.selectedPointStyle(c,n):b.pointStyle(c,n,o)}B.exports={style:w,styleOnSelect:e}},{"../../components/color":366,"../../components/drawing":388,"@plotly/d3":58}],685:[function(t,B,H){var d=t("../../lib").extendFlat,l=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=t("../ohlc/attributes"),w=t("../box/attributes");function e(o){return{line:{color:d({},w.line.color,{dflt:o}),width:w.line.width,editType:"style"},fillcolor:w.fillcolor,editType:"style"}}B.exports={xperiod:b.xperiod,xperiod0:b.xperiod0,xperiodalignment:b.xperiodalignment,xhoverformat:l("x"),yhoverformat:l("y"),x:b.x,open:b.open,high:b.high,low:b.low,close:b.close,line:{width:d({},w.line.width,{}),editType:"style"},increasing:e(b.increasing.line.color.dflt),decreasing:e(b.decreasing.line.color.dflt),text:b.text,hovertext:b.hovertext,whiskerwidth:d({},w.whiskerwidth,{dflt:0}),hoverlabel:b.hoverlabel}},{"../../lib":503,"../../plots/cartesian/axis_format_attributes":557,"../box/attributes":673,"../ohlc/attributes":872}],686:[function(t,B,H){var d=t("../../lib"),l=t("../../plots/cartesian/axes"),b=t("../../plots/cartesian/align_period"),w=t("../ohlc/calc").calcCommon;B.exports=function(o,a){var r=o._fullLayout,n=l.getFromId(o,a.xaxis),c=l.getFromId(o,a.yaxis),s=n.makeCalcdata(a,"x"),i=b(a,n,"x",s).vals,v=w(o,a,s,i,c,e);return v.length?(d.extendFlat(v[0].t,{num:r._numBoxes,dPos:d.distinctVals(i).minDiff/2,posLetter:"x",valLetter:"y"}),r._numBoxes++,v):[{t:{empty:!0}}]};function e(o,a,r,n){return{min:r,q1:Math.min(o,n),med:n,q3:Math.max(o,n),max:a}}},{"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../ohlc/calc":873}],687:[function(t,B,H){var d=t("../../lib"),l=t("../../components/color"),b=t("../ohlc/ohlc_defaults"),w=t("../scatter/period_defaults"),e=t("./attributes");B.exports=function(r,n,c,s){function i(u,g){return d.coerce(r,n,e,u,g)}var v=b(r,n,i,s);if(!v){n.visible=!1;return}w(r,n,s,i,{x:!0}),i("xhoverformat"),i("yhoverformat"),i("line.width"),o(r,n,i,"increasing"),o(r,n,i,"decreasing"),i("text"),i("hovertext"),i("whiskerwidth"),s._requestRangeslider[n.xaxis]=!0};function o(a,r,n,c){var s=n(c+".line.color");n(c+".line.width",r.line.width),n(c+".fillcolor",l.addOpacity(s,.5))}},{"../../components/color":366,"../../lib":503,"../ohlc/ohlc_defaults":877,"../scatter/period_defaults":946,"./attributes":685}],688:[function(t,B,H){B.exports={moduleType:"trace",name:"candlestick",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:t("./attributes"),layoutAttributes:t("../box/layout_attributes"),supplyLayoutDefaults:t("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:t("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("../box/plot").plot,layerName:"boxlayer",style:t("../box/style").style,hoverPoints:t("../ohlc/hover").hoverPoints,selectPoints:t("../ohlc/select")}},{"../../plots/cartesian":568,"../box/cross_trace_calc":675,"../box/layout_attributes":680,"../box/layout_defaults":681,"../box/plot":682,"../box/style":684,"../ohlc/hover":875,"../ohlc/select":879,"./attributes":685,"./calc":686,"./defaults":687}],689:[function(t,B,H){var d=t("./axis_defaults"),l=t("../../plot_api/plot_template");B.exports=function(e,o,a,r,n){var c=r("a");c||(r("da"),r("a0"));var s=r("b");s||(r("db"),r("b0")),b(e,o,a,n)};function b(w,e,o,a){var r=["aaxis","baxis"];r.forEach(function(n){var c=n.charAt(0),s=w[n]||{},i=l.newContainer(e,n),v={noTicklabelstep:!0,tickfont:"x",id:c+"axis",letter:c,font:e.font,name:n,data:w[c],calendar:e.calendar,dfltColor:a,bgColor:o.paper_bgcolor,autotypenumbersDflt:o.autotypenumbers,fullLayout:o};d(s,i,v),i._categories=i._categories||[],!w[n]&&s.type!=="-"&&(w[n]={type:s.type})})}},{"../../plot_api/plot_template":543,"./axis_defaults":694}],690:[function(t,B,H){var d=t("../../lib").isArrayOrTypedArray;B.exports=function(b){return l(b,0)};function l(b,w){if(!d(b)||w>=10)return null;for(var e=1/0,o=-1/0,a=b.length,r=0;r<a;r++){var n=b[r];if(d(n)){var c=l(n,w+1);c&&(e=Math.min(c[0],e),o=Math.max(c[1],o))}else e=Math.min(n,e),o=Math.max(n,o)}return[e,o]}},{"../../lib":503}],691:[function(t,B,H){var d=t("../../plots/font_attributes"),l=t("./axis_attributes"),b=t("../../components/color/attributes"),w=d({editType:"calc"});w.family.dflt='"Open Sans", verdana, arial, sans-serif',w.size.dflt=12,w.color.dflt=b.defaultLine,B.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:l,baxis:l,font:w,color:{valType:"color",dflt:b.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":365,"../../plots/font_attributes":585,"./axis_attributes":693}],692:[function(t,B,H){var d=t("../../lib").isArrayOrTypedArray;B.exports=function(l,b,w,e){var o,a,r,n,c,s,i,v,u,g,h,y,p,A=d(w)?"a":"b",m=A==="a"?l.aaxis:l.baxis,M=m.smoothing,x=A==="a"?l.a2i:l.b2j,T=A==="a"?w:e,_=A==="a"?e:w,f=A==="a"?b.a.length:b.b.length,L=A==="a"?b.b.length:b.a.length,S=Math.floor(A==="a"?l.b2j(_):l.a2i(_)),k=A==="a"?function(X){return l.evalxy([],X,S)}:function(X){return l.evalxy([],S,X)};M&&(r=Math.max(0,Math.min(L-2,S)),n=S-r,a=A==="a"?function(X,Z){return l.dxydi([],X,r,Z,n)}:function(X,Z){return l.dxydj([],r,X,n,Z)});var P=x(T[0]),z=x(T[1]),I=P<z?1:-1,R=(z-P)*1e-8,D=I>0?Math.floor:Math.ceil,O=I>0?Math.ceil:Math.floor,F=I>0?Math.min:Math.max,G=I>0?Math.max:Math.min,W=D(P+R),q=O(z-R);i=k(P);var J=[[i]];for(o=W;o*I<q*I;o+=I)c=[],h=G(P,o),y=F(z,o+I),p=y-h,s=Math.max(0,Math.min(f-2,Math.floor(.5*(h+y)))),v=k(y),M&&(u=a(s,h-s),g=a(s,y-s),c.push([i[0]+u[0]/3*p,i[1]+u[1]/3*p]),c.push([v[0]-g[0]/3*p,v[1]-g[1]/3*p])),c.push(v),J.push(c),i=v;return J}},{"../../lib":503}],693:[function(t,B,H){var d=t("../../plots/font_attributes"),l=t("../../components/color/attributes"),b=t("../../plots/cartesian/layout_attributes"),w=t("../../plots/cartesian/axis_format_attributes").descriptionWithDates,e=t("../../plot_api/edit_types").overrideAll;B.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:d({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:b.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:d({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:w("tick label")},tickformatstops:e(b.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:l.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgridcolor:{valType:"color",dflt:l.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:d({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":365,"../../plot_api/edit_types":536,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/layout_attributes":569,"../../plots/font_attributes":585}],694:[function(t,B,H){var d=t("./attributes"),l=t("../../components/color").addOpacity,b=t("../../registry"),w=t("../../lib"),e=t("../../plots/cartesian/tick_value_defaults"),o=t("../../plots/cartesian/tick_label_defaults"),a=t("../../plots/cartesian/prefix_suffix_defaults"),r=t("../../plots/cartesian/category_order_defaults"),n=t("../../plots/cartesian/set_convert"),c=t("../../plots/cartesian/axis_autotype");B.exports=function(v,u,g){var h=g.letter,y=g.font||{},p=d[h+"axis"];function A(G,W){return w.coerce(v,u,p,G,W)}function m(G,W){return w.coerce2(v,u,p,G,W)}g.name&&(u._name=g.name,u._id=g.name),A("autotypenumbers",g.autotypenumbersDflt);var M=A("type");if(M==="-"&&(g.data&&s(u,g.data),u.type==="-"?u.type="linear":M=v.type=u.type),A("smoothing"),A("cheatertype"),A("showticklabels"),A("labelprefix",h+" = "),A("labelsuffix"),A("showtickprefix"),A("showticksuffix"),A("separatethousands"),A("tickformat"),A("exponentformat"),A("minexponent"),A("showexponent"),A("categoryorder"),A("tickmode"),A("tickvals"),A("ticktext"),A("tick0"),A("dtick"),u.tickmode==="array"&&(A("arraytick0"),A("arraydtick")),A("labelpadding"),u._hovertitle=h,M==="date"){var x=b.getComponentMethod("calendars","handleDefaults");x(v,u,"calendar",g.calendar)}n(u,g.fullLayout),u.c2p=w.identity;var T=A("color",g.dfltColor),_=T===v.color?T:y.color,f=A("title.text");f&&(w.coerceFont(A,"title.font",{family:y.family,size:w.bigFont(y.size),color:_}),A("title.offset")),A("tickangle");var L=A("autorange",!u.isValidRange(v.range));L&&A("rangemode"),A("range"),u.cleanRange(),A("fixedrange"),e(v,u,A,M),a(v,u,A,M,g),o(v,u,A,M,g),r(v,u,A,{data:g.data,dataAttr:h});var S=m("gridcolor",l(T,.3)),k=m("gridwidth"),P=A("showgrid");P||(delete u.gridcolor,delete u.gridwidth);var z=m("startlinecolor",T),I=m("startlinewidth",k),R=A("startline",u.showgrid||!!z||!!I);R||(delete u.startlinecolor,delete u.startlinewidth);var D=m("endlinecolor",T),O=m("endlinewidth",k),F=A("endline",u.showgrid||!!D||!!O);return F||(delete u.endlinecolor,delete u.endlinewidth),P?(A("minorgridcount"),A("minorgridwidth",k),A("minorgridcolor",l(S,.06)),u.minorgridcount||(delete u.minorgridwidth,delete u.minorgridcolor)):(delete u.gridcolor,delete u.gridWidth),u.showticklabels==="none"&&(delete u.tickfont,delete u.tickangle,delete u.showexponent,delete u.exponentformat,delete u.minexponent,delete u.tickformat,delete u.showticksuffix,delete u.showtickprefix),u.showticksuffix||delete u.ticksuffix,u.showtickprefix||delete u.tickprefix,A("tickmode"),u};function s(i,v){if(i.type==="-"){var u=i._id,g=u.charAt(0),h=g+"calendar",y=i[h];i.type=c(v,y,{autotypenumbers:i.autotypenumbers})}}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/axis_autotype":555,"../../plots/cartesian/category_order_defaults":559,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/set_convert":576,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_value_defaults":580,"../../registry":638,"./attributes":691}],695:[function(t,B,H){var d=t("../../plots/cartesian/axes"),l=t("../../lib").isArray1D,b=t("./cheater_basis"),w=t("./array_minmax"),e=t("./calc_gridlines"),o=t("./calc_labels"),a=t("./calc_clippath"),r=t("../heatmap/clean_2d_array"),n=t("./smooth_fill_2d_array"),c=t("../heatmap/convert_column_xyz"),s=t("./set_convert");B.exports=function(v,u){var g=d.getFromId(v,u.xaxis),h=d.getFromId(v,u.yaxis),y=u.aaxis,p=u.baxis,A=u.x,m=u.y,M=[];A&&l(A)&&M.push("x"),m&&l(m)&&M.push("y"),M.length&&c(u,y,p,"a","b",M);var x=u._a=u._a||u.a,T=u._b=u._b||u.b;A=u._x||u.x,m=u._y||u.y;var _={};if(u._cheater){var f=y.cheatertype==="index"?x.length:x,L=p.cheatertype==="index"?T.length:T;A=b(f,L,u.cheaterslope)}u._x=A=r(A),u._y=m=r(m),n(A,x,T),n(m,x,T),s(u),u.setScale();var S=w(A),k=w(m),P=.5*(S[1]-S[0]),z=.5*(S[1]+S[0]),I=.5*(k[1]-k[0]),R=.5*(k[1]+k[0]),D=1.3;return S=[z-P*D,z+P*D],k=[R-I*D,R+I*D],u._extremes[g._id]=d.findExtremes(g,S,{padded:!0}),u._extremes[h._id]=d.findExtremes(h,k,{padded:!0}),e(u,"a","b"),e(u,"b","a"),o(u,y),o(u,p),_.clipsegments=a(u._xctrl,u._yctrl,y,p),_.x=A,_.y=m,_.a=x,_.b=T,[_]}},{"../../lib":503,"../../plots/cartesian/axes":554,"../heatmap/clean_2d_array":794,"../heatmap/convert_column_xyz":796,"./array_minmax":690,"./calc_clippath":696,"./calc_gridlines":697,"./calc_labels":698,"./cheater_basis":700,"./set_convert":713,"./smooth_fill_2d_array":714}],696:[function(t,B,H){B.exports=function(l,b,w,e){var o,a,r,n=[],c=!!w.smoothing,s=!!e.smoothing,i=l[0].length-1,v=l.length-1;for(o=0,a=[],r=[];o<=i;o++)a[o]=l[0][o],r[o]=b[0][o];for(n.push({x:a,y:r,bicubic:c}),o=0,a=[],r=[];o<=v;o++)a[o]=l[o][i],r[o]=b[o][i];for(n.push({x:a,y:r,bicubic:s}),o=i,a=[],r=[];o>=0;o--)a[i-o]=l[v][o],r[i-o]=b[v][o];for(n.push({x:a,y:r,bicubic:c}),o=v,a=[],r=[];o>=0;o--)a[v-o]=l[o][0],r[v-o]=b[o][0];return n.push({x:a,y:r,bicubic:s}),n}},{}],697:[function(t,B,H){var d=t("../../plots/cartesian/axes"),l=t("../../lib/extend").extendFlat;B.exports=function(w,e,o){var a,r,n,c,s,i,v,u,g,h,y,p,A,m,M=w["_"+e],x=w[e+"axis"],T=x._gridlines=[],_=x._minorgridlines=[],f=x._boundarylines=[],L=w["_"+o],S=w[o+"axis"];x.tickmode==="array"&&(x.tickvals=M.slice());var k=w._xctrl,P=w._yctrl,z=k[0].length,I=k.length,R=w._a.length,D=w._b.length;d.prepTicks(x),x.tickmode==="array"&&delete x.tickvals;var O=x.smoothing?3:1;function F(W){var q,J,X,Z,se,le,oe,U,V,re,ee,j,Q=[],ne=[],ae={};if(e==="b")for(J=w.b2j(W),X=Math.floor(Math.max(0,Math.min(D-2,J))),Z=J-X,ae.length=D,ae.crossLength=R,ae.xy=function(ie){return w.evalxy([],ie,J)},ae.dxy=function(ie,ue){return w.dxydi([],ie,X,ue,Z)},q=0;q<R;q++)le=Math.min(R-2,q),oe=q-le,U=w.evalxy([],q,J),S.smoothing&&q>0&&(V=w.dxydi([],q-1,X,0,Z),Q.push(se[0]+V[0]/3),ne.push(se[1]+V[1]/3),re=w.dxydi([],q-1,X,1,Z),Q.push(U[0]-re[0]/3),ne.push(U[1]-re[1]/3)),Q.push(U[0]),ne.push(U[1]),se=U;else for(q=w.a2i(W),le=Math.floor(Math.max(0,Math.min(R-2,q))),oe=q-le,ae.length=R,ae.crossLength=D,ae.xy=function(ie){return w.evalxy([],q,ie)},ae.dxy=function(ie,ue){return w.dxydj([],le,ie,oe,ue)},J=0;J<D;J++)X=Math.min(D-2,J),Z=J-X,U=w.evalxy([],q,J),S.smoothing&&J>0&&(ee=w.dxydj([],le,J-1,oe,0),Q.push(se[0]+ee[0]/3),ne.push(se[1]+ee[1]/3),j=w.dxydj([],le,J-1,oe,1),Q.push(U[0]-j[0]/3),ne.push(U[1]-j[1]/3)),Q.push(U[0]),ne.push(U[1]),se=U;return ae.axisLetter=e,ae.axis=x,ae.crossAxis=S,ae.value=W,ae.constvar=o,ae.index=u,ae.x=Q,ae.y=ne,ae.smoothing=S.smoothing,ae}function G(W){var q,J,X,Z,se,le=[],oe=[],U={};if(U.length=M.length,U.crossLength=L.length,e==="b")for(X=Math.max(0,Math.min(D-2,W)),se=Math.min(1,Math.max(0,W-X)),U.xy=function(V){return w.evalxy([],V,W)},U.dxy=function(V,re){return w.dxydi([],V,X,re,se)},q=0;q<z;q++)le[q]=k[W*O][q],oe[q]=P[W*O][q];else for(J=Math.max(0,Math.min(R-2,W)),Z=Math.min(1,Math.max(0,W-J)),U.xy=function(V){return w.evalxy([],W,V)},U.dxy=function(V,re){return w.dxydj([],J,V,Z,re)},q=0;q<I;q++)le[q]=k[q][W*O],oe[q]=P[q][W*O];return U.axisLetter=e,U.axis=x,U.crossAxis=S,U.value=M[W],U.constvar=o,U.index=W,U.x=le,U.y=oe,U.smoothing=S.smoothing,U}if(x.tickmode==="array"){for(c=5e-15,s=[Math.floor((M.length-1-x.arraytick0)/x.arraydtick*(1+c)),Math.ceil(-x.arraytick0/x.arraydtick/(1+c))].sort(function(W,q){return W-q}),i=s[0]-1,v=s[1]+1,u=i;u<v;u++)r=x.arraytick0+x.arraydtick*u,!(r<0||r>M.length-1)&&T.push(l(G(r),{color:x.gridcolor,width:x.gridwidth}));for(u=i;u<v;u++)if(n=x.arraytick0+x.arraydtick*u,y=Math.min(n+x.arraydtick,M.length-1),!(n<0||n>M.length-1)&&!(y<0||y>M.length-1))for(p=M[n],A=M[y],a=0;a<x.minorgridcount;a++)m=y-n,!(m<=0)&&(h=p+(A-p)*(a+1)/(x.minorgridcount+1)*(x.arraydtick/m),!(h<M[0]||h>M[M.length-1])&&_.push(l(F(h),{color:x.minorgridcolor,width:x.minorgridwidth})));x.startline&&f.push(l(G(0),{color:x.startlinecolor,width:x.startlinewidth})),x.endline&&f.push(l(G(M.length-1),{color:x.endlinecolor,width:x.endlinewidth}))}else{for(c=5e-15,s=[Math.floor((M[M.length-1]-x.tick0)/x.dtick*(1+c)),Math.ceil((M[0]-x.tick0)/x.dtick/(1+c))].sort(function(W,q){return W-q}),i=s[0],v=s[1],u=i;u<=v;u++)g=x.tick0+x.dtick*u,T.push(l(F(g),{color:x.gridcolor,width:x.gridwidth}));for(u=i-1;u<v+1;u++)for(g=x.tick0+x.dtick*u,a=0;a<x.minorgridcount;a++)h=g+x.dtick*(a+1)/(x.minorgridcount+1),!(h<M[0]||h>M[M.length-1])&&_.push(l(F(h),{color:x.minorgridcolor,width:x.minorgridwidth}));x.startline&&f.push(l(F(M[0]),{color:x.startlinecolor,width:x.startlinewidth})),x.endline&&f.push(l(F(M[M.length-1]),{color:x.endlinecolor,width:x.endlinewidth}))}}},{"../../lib/extend":493,"../../plots/cartesian/axes":554}],698:[function(t,B,H){var d=t("../../plots/cartesian/axes"),l=t("../../lib/extend").extendFlat;B.exports=function(w,e){var o,a,r,n,c,s=e._labels=[],i=e._gridlines;for(o=0;o<i.length;o++)c=i[o],["start","both"].indexOf(e.showticklabels)!==-1&&(a=d.tickText(e,c.value),l(a,{prefix:r,suffix:n,endAnchor:!0,xy:c.xy(0),dxy:c.dxy(0,0),axis:c.axis,length:c.crossAxis.length,font:c.axis.tickfont,isFirst:o===0,isLast:o===i.length-1}),s.push(a)),["end","both"].indexOf(e.showticklabels)!==-1&&(a=d.tickText(e,c.value),l(a,{endAnchor:!1,xy:c.xy(c.crossLength-1),dxy:c.dxy(c.crossLength-2,1),axis:c.axis,length:c.crossAxis.length,font:c.axis.tickfont,isFirst:o===0,isLast:o===i.length-1}),s.push(a))}},{"../../lib/extend":493,"../../plots/cartesian/axes":554}],699:[function(t,B,H){var d=.5;B.exports=function(b,w,e,o){var a=b[0]-w[0],r=b[1]-w[1],n=e[0]-w[0],c=e[1]-w[1],s=Math.pow(a*a+r*r,d/2),i=Math.pow(n*n+c*c,d/2),v=(i*i*a-s*s*n)*o,u=(i*i*r-s*s*c)*o,g=i*(s+i)*3,h=s*(s+i)*3;return[[w[0]+(g&&v/g),w[1]+(g&&u/g)],[w[0]-(h&&v/h),w[1]-(h&&u/h)]]}},{}],700:[function(t,B,H){var d=t("../../lib").isArrayOrTypedArray;B.exports=function(l,b,w){var e,o,a,r,n,c,s=[],i=d(l)?l.length:l,v=d(b)?b.length:b,u=d(l)?l:null,g=d(b)?b:null;u&&(a=(u.length-1)/(u[u.length-1]-u[0])/(i-1)),g&&(r=(g.length-1)/(g[g.length-1]-g[0])/(v-1));var h,y=1/0,p=-1/0;for(o=0;o<v;o++)for(s[o]=[],c=g?(g[o]-g[0])*r:o/(v-1),e=0;e<i;e++)n=u?(u[e]-u[0])*a:e/(i-1),h=n-c*w,y=Math.min(h,y),p=Math.max(h,p),s[o][e]=h;var A=1/(p-y),m=-y*A;for(o=0;o<v;o++)for(e=0;e<i;e++)s[o][e]=A*s[o][e]+m;return s}},{"../../lib":503}],701:[function(t,B,H){var d=t("./catmull_rom"),l=t("../../lib").ensureArray;function b(w,e,o){var a=-.5*o[0]+1.5*e[0],r=-.5*o[1]+1.5*e[1];return[(2*a+w[0])/3,(2*r+w[1])/3]}B.exports=function(e,o,a,r,n,c){var s,i,v,u,g,h,y,p,A,m,M=a[0].length,x=a.length,T=n?3*M-2:M,_=c?3*x-2:x;for(e=l(e,_),o=l(o,_),v=0;v<_;v++)e[v]=l(e[v],T),o[v]=l(o[v],T);for(i=0,u=0;i<x;i++,u+=c?3:1)for(g=e[u],h=o[u],y=a[i],p=r[i],s=0,v=0;s<M;s++,v+=n?3:1)g[v]=y[s],h[v]=p[s];if(n)for(i=0,u=0;i<x;i++,u+=c?3:1){for(s=1,v=3;s<M-1;s++,v+=3)A=d([a[i][s-1],r[i][s-1]],[a[i][s],r[i][s]],[a[i][s+1],r[i][s+1]],n),e[u][v-1]=A[0][0],o[u][v-1]=A[0][1],e[u][v+1]=A[1][0],o[u][v+1]=A[1][1];m=b([e[u][0],o[u][0]],[e[u][2],o[u][2]],[e[u][3],o[u][3]]),e[u][1]=m[0],o[u][1]=m[1],m=b([e[u][T-1],o[u][T-1]],[e[u][T-3],o[u][T-3]],[e[u][T-4],o[u][T-4]]),e[u][T-2]=m[0],o[u][T-2]=m[1]}if(c)for(v=0;v<T;v++){for(u=3;u<_-3;u+=3)A=d([e[u-3][v],o[u-3][v]],[e[u][v],o[u][v]],[e[u+3][v],o[u+3][v]],c),e[u-1][v]=A[0][0],o[u-1][v]=A[0][1],e[u+1][v]=A[1][0],o[u+1][v]=A[1][1];m=b([e[0][v],o[0][v]],[e[2][v],o[2][v]],[e[3][v],o[3][v]]),e[1][v]=m[0],o[1][v]=m[1],m=b([e[_-1][v],o[_-1][v]],[e[_-3][v],o[_-3][v]],[e[_-4][v],o[_-4][v]]),e[_-2][v]=m[0],o[_-2][v]=m[1]}if(n&&c)for(u=1;u<_;u+=(u+1)%3===0?2:1){for(v=3;v<T-3;v+=3)A=d([e[u][v-3],o[u][v-3]],[e[u][v],o[u][v]],[e[u][v+3],o[u][v+3]],n),e[u][v-1]=.5*(e[u][v-1]+A[0][0]),o[u][v-1]=.5*(o[u][v-1]+A[0][1]),e[u][v+1]=.5*(e[u][v+1]+A[1][0]),o[u][v+1]=.5*(o[u][v+1]+A[1][1]);m=b([e[u][0],o[u][0]],[e[u][2],o[u][2]],[e[u][3],o[u][3]]),e[u][1]=.5*(e[u][1]+m[0]),o[u][1]=.5*(o[u][1]+m[1]),m=b([e[u][T-1],o[u][T-1]],[e[u][T-3],o[u][T-3]],[e[u][T-4],o[u][T-4]]),e[u][T-2]=.5*(e[u][T-2]+m[0]),o[u][T-2]=.5*(o[u][T-2]+m[1])}return[e,o]}},{"../../lib":503,"./catmull_rom":699}],702:[function(t,B,H){B.exports={RELATIVE_CULL_TOLERANCE:1e-6}},{}],703:[function(t,B,H){B.exports=function(d,l,b){return l&&b?function(w,e,o,a,r){w||(w=[]);var n,c,s,i,v,u;e*=3,o*=3;var g=a*a,h=1-a,y=h*h,p=h*a*2,A=-3*y,m=3*(y-p),M=3*(p-g),x=3*g,T=r*r,_=T*r,f=1-r,L=f*f,S=L*f;for(u=0;u<d.length;u++)v=d[u],n=A*v[o][e]+m*v[o][e+1]+M*v[o][e+2]+x*v[o][e+3],c=A*v[o+1][e]+m*v[o+1][e+1]+M*v[o+1][e+2]+x*v[o+1][e+3],s=A*v[o+2][e]+m*v[o+2][e+1]+M*v[o+2][e+2]+x*v[o+2][e+3],i=A*v[o+3][e]+m*v[o+3][e+1]+M*v[o+3][e+2]+x*v[o+3][e+3],w[u]=S*n+3*(L*r*c+f*T*s)+_*i;return w}:l?function(w,e,o,a,r){w||(w=[]);var n,c,s,i;e*=3;var v=a*a,u=1-a,g=u*u,h=u*a*2,y=-3*g,p=3*(g-h),A=3*(h-v),m=3*v,M=1-r;for(s=0;s<d.length;s++)i=d[s],n=y*i[o][e]+p*i[o][e+1]+A*i[o][e+2]+m*i[o][e+3],c=y*i[o+1][e]+p*i[o+1][e+1]+A*i[o+1][e+2]+m*i[o+1][e+3],w[s]=M*n+r*c;return w}:b?function(w,e,o,a,r){w||(w=[]);var n,c,s,i,v,u;o*=3;var g=r*r,h=g*r,y=1-r,p=y*y,A=p*y;for(v=0;v<d.length;v++)u=d[v],n=u[o][e+1]-u[o][e],c=u[o+1][e+1]-u[o+1][e],s=u[o+2][e+1]-u[o+2][e],i=u[o+3][e+1]-u[o+3][e],w[v]=A*n+3*(p*r*c+y*g*s)+h*i;return w}:function(w,e,o,a,r){w||(w=[]);var n,c,s,i,v=1-r;for(s=0;s<d.length;s++)i=d[s],n=i[o][e+1]-i[o][e],c=i[o+1][e+1]-i[o+1][e],w[s]=v*n+r*c;return w}}},{}],704:[function(t,B,H){B.exports=function(d,l,b){return l&&b?function(w,e,o,a,r){w||(w=[]);var n,c,s,i,v,u;e*=3,o*=3;var g=a*a,h=g*a,y=1-a,p=y*y,A=p*y,m=r*r,M=1-r,x=M*M,T=M*r*2,_=-3*x,f=3*(x-T),L=3*(T-m),S=3*m;for(u=0;u<d.length;u++)v=d[u],n=_*v[o][e]+f*v[o+1][e]+L*v[o+2][e]+S*v[o+3][e],c=_*v[o][e+1]+f*v[o+1][e+1]+L*v[o+2][e+1]+S*v[o+3][e+1],s=_*v[o][e+2]+f*v[o+1][e+2]+L*v[o+2][e+2]+S*v[o+3][e+2],i=_*v[o][e+3]+f*v[o+1][e+3]+L*v[o+2][e+3]+S*v[o+3][e+3],w[u]=A*n+3*(p*a*c+y*g*s)+h*i;return w}:l?function(w,e,o,a,r){w||(w=[]);var n,c,s,i,v,u;e*=3;var g=r*r,h=g*r,y=1-r,p=y*y,A=p*y;for(v=0;v<d.length;v++)u=d[v],n=u[o+1][e]-u[o][e],c=u[o+1][e+1]-u[o][e+1],s=u[o+1][e+2]-u[o][e+2],i=u[o+1][e+3]-u[o][e+3],w[v]=A*n+3*(p*r*c+y*g*s)+h*i;return w}:b?function(w,e,o,a,r){w||(w=[]);var n,c,s,i;o*=3;var v=1-a,u=r*r,g=1-r,h=g*g,y=g*r*2,p=-3*h,A=3*(h-y),m=3*(y-u),M=3*u;for(s=0;s<d.length;s++)i=d[s],n=p*i[o][e]+A*i[o+1][e]+m*i[o+2][e]+M*i[o+3][e],c=p*i[o][e+1]+A*i[o+1][e+1]+m*i[o+2][e+1]+M*i[o+3][e+1],w[s]=v*n+a*c;return w}:function(w,e,o,a,r){w||(w=[]);var n,c,s,i,v=1-a;for(s=0;s<d.length;s++)i=d[s],n=i[o+1][e]-i[o][e],c=i[o+1][e+1]-i[o][e+1],w[s]=v*n+a*c;return w}}},{}],705:[function(t,B,H){B.exports=function(d,l,b,w,e){var o=l-2,a=b-2;return w&&e?function(r,n,c){r||(r=[]);var s,i,v,u,g,h,y=Math.max(0,Math.min(Math.floor(n),o)),p=Math.max(0,Math.min(Math.floor(c),a)),A=Math.max(0,Math.min(1,n-y)),m=Math.max(0,Math.min(1,c-p));y*=3,p*=3;var M=A*A,x=M*A,T=1-A,_=T*T,f=_*T,L=m*m,S=L*m,k=1-m,P=k*k,z=P*k;for(h=0;h<d.length;h++)g=d[h],s=f*g[p][y]+3*(_*A*g[p][y+1]+T*M*g[p][y+2])+x*g[p][y+3],i=f*g[p+1][y]+3*(_*A*g[p+1][y+1]+T*M*g[p+1][y+2])+x*g[p+1][y+3],v=f*g[p+2][y]+3*(_*A*g[p+2][y+1]+T*M*g[p+2][y+2])+x*g[p+2][y+3],u=f*g[p+3][y]+3*(_*A*g[p+3][y+1]+T*M*g[p+3][y+2])+x*g[p+3][y+3],r[h]=z*s+3*(P*m*i+k*L*v)+S*u;return r}:w?function(r,n,c){r||(r=[]);var s=Math.max(0,Math.min(Math.floor(n),o)),i=Math.max(0,Math.min(Math.floor(c),a)),v=Math.max(0,Math.min(1,n-s)),u=Math.max(0,Math.min(1,c-i)),g,h,y,p,A,m;s*=3;var M=v*v,x=M*v,T=1-v,_=T*T,f=_*T,L=1-u;for(A=0;A<d.length;A++)m=d[A],g=L*m[i][s]+u*m[i+1][s],h=L*m[i][s+1]+u*m[i+1][s+1],y=L*m[i][s+2]+u*m[i+1][s+1],p=L*m[i][s+3]+u*m[i+1][s+1],r[A]=f*g+3*(_*v*h+T*M*y)+x*p;return r}:e?function(r,n,c){r||(r=[]);var s=Math.max(0,Math.min(Math.floor(n),o)),i=Math.max(0,Math.min(Math.floor(c),a)),v=Math.max(0,Math.min(1,n-s)),u=Math.max(0,Math.min(1,c-i)),g,h,y,p,A,m;i*=3;var M=u*u,x=M*u,T=1-u,_=T*T,f=_*T,L=1-v;for(A=0;A<d.length;A++)m=d[A],g=L*m[i][s]+v*m[i][s+1],h=L*m[i+1][s]+v*m[i+1][s+1],y=L*m[i+2][s]+v*m[i+2][s+1],p=L*m[i+3][s]+v*m[i+3][s+1],r[A]=f*g+3*(_*u*h+T*M*y)+x*p;return r}:function(r,n,c){r||(r=[]);var s=Math.max(0,Math.min(Math.floor(n),o)),i=Math.max(0,Math.min(Math.floor(c),a)),v=Math.max(0,Math.min(1,n-s)),u=Math.max(0,Math.min(1,c-i)),g,h,y,p,A=1-u,m=1-v;for(y=0;y<d.length;y++)p=d[y],g=m*p[i][s]+v*p[i][s+1],h=m*p[i+1][s]+v*p[i+1][s+1],r[y]=A*g+u*h;return r}}},{}],706:[function(t,B,H){var d=t("../../lib"),l=t("./xy_defaults"),b=t("./ab_defaults"),w=t("./attributes"),e=t("../../components/color/attributes");B.exports=function(a,r,n,c){function s(u,g){return d.coerce(a,r,w,u,g)}r._clipPathId="clip"+r.uid+"carpet";var i=s("color",e.defaultLine);if(d.coerceFont(s,"font"),s("carpet"),b(a,r,c,s,i),!r.a||!r.b){r.visible=!1;return}r.a.length<3&&(r.aaxis.smoothing=0),r.b.length<3&&(r.baxis.smoothing=0);var v=l(a,r,s);v||(r.visible=!1),r._cheater&&s("cheaterslope")}},{"../../components/color/attributes":365,"../../lib":503,"./ab_defaults":689,"./attributes":691,"./xy_defaults":715}],707:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),plot:t("./plot"),calc:t("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":568,"./attributes":691,"./calc":695,"./defaults":706,"./plot":712}],708:[function(t,B,H){B.exports=function(d,l){for(var b=d._fullData.length,w,e=0;e<b;e++){var o=d._fullData[e];if(o.index!==l.index&&o.type==="carpet"&&(w||(w=o),o.carpet===l.carpet))return o}return w}},{}],709:[function(t,B,H){B.exports=function(l,b,w){if(l.length===0)return"";var e,o=[],a=w?3:1;for(e=0;e<l.length;e+=a)o.push(l[e]+","+b[e]),w&&e<l.length-a&&(o.push("C"),o.push([l[e+1]+","+b[e+1],l[e+2]+","+b[e+2]+" "].join(" ")));return o.join(w?"":"L")}},{}],710:[function(t,B,H){var d=t("../../lib").isArrayOrTypedArray;B.exports=function(b,w,e){var o;for(d(b)?b.length>w.length&&(b=b.slice(0,w.length)):b=[],o=0;o<w.length;o++)b[o]=e(w[o]);return b}},{"../../lib":503}],711:[function(t,B,H){B.exports=function(l,b,w,e,o,a){var r=o[0]*l.dpdx(b),n=o[1]*l.dpdy(w),c=1,s=1;if(a){var i=Math.sqrt(o[0]*o[0]+o[1]*o[1]),v=Math.sqrt(a[0]*a[0]+a[1]*a[1]),u=(o[0]*a[0]+o[1]*a[1])/i/v;s=Math.max(0,u)}var g=Math.atan2(n,r)*180/Math.PI;return g<-90?(g+=180,c=-c):g>90&&(g-=180,c=-c),{angle:g,flip:c,p:l.c2p(e,b,w),offsetMultplier:s}}},{}],712:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../components/drawing"),b=t("./map_1d_array"),w=t("./makepath"),e=t("./orient_text"),o=t("../../lib/svg_text_utils"),a=t("../../lib"),r=a.strRotate,n=a.strTranslate,c=t("../../constants/alignment");B.exports=function(A,m,M,x){var T=m.xaxis,_=m.yaxis,f=A._fullLayout,L=f._clips;a.makeTraceGroups(x,M,"trace").each(function(S){var k=d.select(this),P=S[0],z=P.trace,I=z.aaxis,R=z.baxis,D=a.ensureSingle(k,"g","minorlayer"),O=a.ensureSingle(k,"g","majorlayer"),F=a.ensureSingle(k,"g","boundarylayer"),G=a.ensureSingle(k,"g","labellayer");k.style("opacity",z.opacity),i(T,_,O,I,"a",I._gridlines),i(T,_,O,R,"b",R._gridlines),i(T,_,D,I,"a",I._minorgridlines),i(T,_,D,R,"b",R._minorgridlines),i(T,_,F,I,"a-boundary",I._boundarylines),i(T,_,F,R,"b-boundary",R._boundarylines);var W=v(A,T,_,z,P,G,I._labels,"a-label"),q=v(A,T,_,z,P,G,R._labels,"b-label");u(A,G,z,P,T,_,W,q),s(z,P,L,T,_)})};function s(p,A,m,M,x){var T,_,f,L,S=m.select("#"+p._clipPathId);S.size()||(S=m.append("clipPath").classed("carpetclip",!0));var k=a.ensureSingle(S,"path","carpetboundary"),P=A.clipsegments,z=[];for(L=0;L<P.length;L++)T=P[L],_=b([],T.x,M.c2p),f=b([],T.y,x.c2p),z.push(w(_,f,T.bicubic));var I="M"+z.join("L")+"Z";S.attr("id",p._clipPathId),k.attr("d",I)}function i(p,A,m,M,x,T){var _="const-"+x+"-lines",f=m.selectAll("."+_).data(T);f.enter().append("path").classed(_,!0).style("vector-effect","non-scaling-stroke"),f.each(function(L){var S=L,k=S.x,P=S.y,z=b([],k,p.c2p),I=b([],P,A.c2p),R="M"+w(z,I,S.smoothing),D=d.select(this);D.attr("d",R).style("stroke-width",S.width).style("stroke",S.color).style("fill","none")}),f.exit().remove()}function v(p,A,m,M,x,T,_,f){var L=T.selectAll("text."+f).data(_);L.enter().append("text").classed(f,!0);var S=0,k={};return L.each(function(P,z){var I;if(P.axis.tickangle==="auto")I=e(M,A,m,P.xy,P.dxy);else{var R=(P.axis.tickangle+180)*Math.PI/180;I=e(M,A,m,P.xy,[Math.cos(R),Math.sin(R)])}z||(k={angle:I.angle,flip:I.flip});var D=(P.endAnchor?-1:1)*I.flip,O=d.select(this).attr({"text-anchor":D>0?"start":"end","data-notex":1}).call(l.font,P.font).text(P.text).call(o.convertToTspans,p),F=l.bBox(this);O.attr("transform",n(I.p[0],I.p[1])+r(I.angle)+n(P.axis.labelpadding*D,F.height*.3)),S=Math.max(S,F.width+P.axis.labelpadding)}),L.exit().remove(),k.maxExtent=S,k}function u(p,A,m,M,x,T,_,f){var L,S,k,P,z=a.aggNums(Math.min,null,m.a),I=a.aggNums(Math.max,null,m.a),R=a.aggNums(Math.min,null,m.b),D=a.aggNums(Math.max,null,m.b);L=.5*(z+I),S=R,k=m.ab2xy(L,S,!0),P=m.dxyda_rough(L,S),_.angle===void 0&&a.extendFlat(_,e(m,x,T,k,m.dxydb_rough(L,S))),y(p,A,m,M,k,P,m.aaxis,x,T,_,"a-title"),L=z,S=.5*(R+D),k=m.ab2xy(L,S,!0),P=m.dxydb_rough(L,S),f.angle===void 0&&a.extendFlat(f,e(m,x,T,k,m.dxyda_rough(L,S))),y(p,A,m,M,k,P,m.baxis,x,T,f,"b-title")}var g=c.LINE_SPACING,h=(1-c.MID_SHIFT)/g+1;function y(p,A,m,M,x,T,_,f,L,S,k){var P=[];_.title.text&&P.push(_.title.text);var z=A.selectAll("text."+k).data(P),I=S.maxExtent;z.enter().append("text").classed(k,!0),z.each(function(){var R=e(m,f,L,x,T);["start","both"].indexOf(_.showticklabels)===-1&&(I=0);var D=_.title.font.size;I+=D+_.title.offset;var O=S.angle+(S.flip<0?180:0),F=(O-R.angle+450)%360,G=F>90&&F<270,W=d.select(this);W.text(_.title.text).call(o.convertToTspans,p),G&&(I=(-o.lineCount(W)+h)*g*D-I),W.attr("transform",n(R.p[0],R.p[1])+r(R.angle)+n(0,I)).attr("text-anchor","middle").call(l.font,_.title.font)}),z.exit().remove()}},{"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"./makepath":709,"./map_1d_array":710,"./orient_text":711,"@plotly/d3":58}],713:[function(t,B,H){var d=t("./constants"),l=t("../../lib/search").findBin,b=t("./compute_control_points"),w=t("./create_spline_evaluator"),e=t("./create_i_derivative_evaluator"),o=t("./create_j_derivative_evaluator");B.exports=function(r){var n=r._a,c=r._b,s=n.length,i=c.length,v=r.aaxis,u=r.baxis,g=n[0],h=n[s-1],y=c[0],p=c[i-1],A=n[n.length-1]-n[0],m=c[c.length-1]-c[0],M=A*d.RELATIVE_CULL_TOLERANCE,x=m*d.RELATIVE_CULL_TOLERANCE;g-=M,h+=M,y-=x,p+=x,r.isVisible=function(T,_){return T>g&&T<h&&_>y&&_<p},r.isOccluded=function(T,_){return T<g||T>h||_<y||_>p},r.setScale=function(){var T=r._x,_=r._y,f=b(r._xctrl,r._yctrl,T,_,v.smoothing,u.smoothing);r._xctrl=f[0],r._yctrl=f[1],r.evalxy=w([r._xctrl,r._yctrl],s,i,v.smoothing,u.smoothing),r.dxydi=e([r._xctrl,r._yctrl],v.smoothing,u.smoothing),r.dxydj=o([r._xctrl,r._yctrl],v.smoothing,u.smoothing)},r.i2a=function(T){var _=Math.max(0,Math.floor(T[0]),s-2),f=T[0]-_;return(1-f)*n[_]+f*n[_+1]},r.j2b=function(T){var _=Math.max(0,Math.floor(T[1]),s-2),f=T[1]-_;return(1-f)*c[_]+f*c[_+1]},r.ij2ab=function(T){return[r.i2a(T[0]),r.j2b(T[1])]},r.a2i=function(T){var _=Math.max(0,Math.min(l(T,n),s-2)),f=n[_],L=n[_+1];return Math.max(0,Math.min(s-1,_+(T-f)/(L-f)))},r.b2j=function(T){var _=Math.max(0,Math.min(l(T,c),i-2)),f=c[_],L=c[_+1];return Math.max(0,Math.min(i-1,_+(T-f)/(L-f)))},r.ab2ij=function(T){return[r.a2i(T[0]),r.b2j(T[1])]},r.i2c=function(T,_){return r.evalxy([],T,_)},r.ab2xy=function(T,_,f){if(!f&&(T<n[0]||T>n[s-1]|_<c[0]||_>c[i-1]))return[!1,!1];var L=r.a2i(T),S=r.b2j(_),k=r.evalxy([],L,S);if(f){var P=0,z=0,I=[],R,D,O,F;T<n[0]?(R=0,D=0,P=(T-n[0])/(n[1]-n[0])):T>n[s-1]?(R=s-2,D=1,P=(T-n[s-1])/(n[s-1]-n[s-2])):(R=Math.max(0,Math.min(s-2,Math.floor(L))),D=L-R),_<c[0]?(O=0,F=0,z=(_-c[0])/(c[1]-c[0])):_>c[i-1]?(O=i-2,F=1,z=(_-c[i-1])/(c[i-1]-c[i-2])):(O=Math.max(0,Math.min(i-2,Math.floor(S))),F=S-O),P&&(r.dxydi(I,R,O,D,F),k[0]+=I[0]*P,k[1]+=I[1]*P),z&&(r.dxydj(I,R,O,D,F),k[0]+=I[0]*z,k[1]+=I[1]*z)}return k},r.c2p=function(T,_,f){return[_.c2p(T[0]),f.c2p(T[1])]},r.p2x=function(T,_,f){return[_.p2c(T[0]),f.p2c(T[1])]},r.dadi=function(T){var _=Math.max(0,Math.min(n.length-2,T));return n[_+1]-n[_]},r.dbdj=function(T){var _=Math.max(0,Math.min(c.length-2,T));return c[_+1]-c[_]},r.dxyda=function(T,_,f,L){var S=r.dxydi(null,T,_,f,L),k=r.dadi(T,f);return[S[0]/k,S[1]/k]},r.dxydb=function(T,_,f,L){var S=r.dxydj(null,T,_,f,L),k=r.dbdj(_,L);return[S[0]/k,S[1]/k]},r.dxyda_rough=function(T,_,f){var L=A*(f||.1),S=r.ab2xy(T+L,_,!0),k=r.ab2xy(T-L,_,!0);return[(S[0]-k[0])*.5/L,(S[1]-k[1])*.5/L]},r.dxydb_rough=function(T,_,f){var L=m*(f||.1),S=r.ab2xy(T,_+L,!0),k=r.ab2xy(T,_-L,!0);return[(S[0]-k[0])*.5/L,(S[1]-k[1])*.5/L]},r.dpdx=function(T){return T._m},r.dpdy=function(T){return T._m}}},{"../../lib/search":523,"./compute_control_points":701,"./constants":702,"./create_i_derivative_evaluator":703,"./create_j_derivative_evaluator":704,"./create_spline_evaluator":705}],714:[function(t,B,H){var d=t("../../lib");B.exports=function(b,w,e){var o,a,r,n=[],c=[],s=b[0].length,i=b.length;function v(J,X){var Z=0,se,le=0;return J>0&&(se=b[X][J-1])!==void 0&&(le++,Z+=se),J<s-1&&(se=b[X][J+1])!==void 0&&(le++,Z+=se),X>0&&(se=b[X-1][J])!==void 0&&(le++,Z+=se),X<i-1&&(se=b[X+1][J])!==void 0&&(le++,Z+=se),Z/Math.max(1,le)}var u=0;for(o=0;o<s;o++)for(a=0;a<i;a++)b[a][o]===void 0&&(n.push(o),c.push(a),b[a][o]=v(o,a)),u=Math.max(u,Math.abs(b[a][o]));if(!n.length)return b;var g,h,y,p,A,m,M,x,T,_,f,L=1e-5,S=0,k=100,P=0,z=n.length;do{for(S=0,r=0;r<z;r++){o=n[r],a=c[r];var I=0,R=0,D,O,F,G,W,q;o===0?(W=Math.min(s-1,2),F=w[W],G=w[1],D=b[a][W],O=b[a][1],R+=O+(O-D)*(w[0]-G)/(G-F),I++):o===s-1&&(W=Math.max(0,s-3),F=w[W],G=w[s-2],D=b[a][W],O=b[a][s-2],R+=O+(O-D)*(w[s-1]-G)/(G-F),I++),(o===0||o===s-1)&&a>0&&a<i-1&&(g=e[a+1]-e[a],h=e[a]-e[a-1],R+=(h*b[a+1][o]+g*b[a-1][o])/(h+g),I++),a===0?(q=Math.min(i-1,2),F=e[q],G=e[1],D=b[q][o],O=b[1][o],R+=O+(O-D)*(e[0]-G)/(G-F),I++):a===i-1&&(q=Math.max(0,i-3),F=e[q],G=e[i-2],D=b[q][o],O=b[i-2][o],R+=O+(O-D)*(e[i-1]-G)/(G-F),I++),(a===0||a===i-1)&&o>0&&o<s-1&&(g=w[o+1]-w[o],h=w[o]-w[o-1],R+=(h*b[a][o+1]+g*b[a][o-1])/(h+g),I++),I?R/=I:(y=w[o+1]-w[o],p=w[o]-w[o-1],A=e[a+1]-e[a],m=e[a]-e[a-1],M=y*p*(y+p),x=A*m*(A+m),R=(M*(m*b[a+1][o]+A*b[a-1][o])+x*(p*b[a][o+1]+y*b[a][o-1]))/(x*(p+y)+M*(m+A))),T=R-b[a][o],_=T/u,S+=_*_,f=I?0:.85,b[a][o]+=T*(1+f)}S=Math.sqrt(S)}while(P++<k&&S>L);return d.log("Smoother converged to",S,"after",P,"iterations"),b}},{"../../lib":503}],715:[function(t,B,H){var d=t("../../lib").isArray1D;B.exports=function(b,w,e){var o=e("x"),a=o&&o.length,r=e("y"),n=r&&r.length;if(!a&&!n)return!1;if(w._cheater=!o,(!a||d(o))&&(!n||d(r))){var c=a?o.length:1/0;n&&(c=Math.min(c,r.length)),w.a&&w.a.length&&(c=Math.min(c,w.a.length)),w.b&&w.b.length&&(c=Math.min(c,w.b.length)),w._length=c}else w._length=null;return!0}},{"../../lib":503}],716:[function(t,B,H){var d=t("../../plots/template_attributes").hovertemplateAttrs,l=t("../scattergeo/attributes"),b=t("../../components/colorscale/attributes"),w=t("../../plots/attributes"),e=t("../../components/color/attributes").defaultLine,o=t("../../lib/extend").extendFlat,a=l.marker.line;B.exports=o({locations:{valType:"data_array",editType:"calc"},locationmode:l.locationmode,z:{valType:"data_array",editType:"calc"},geojson:o({},l.geojson,{}),featureidkey:l.featureidkey,text:o({},l.text,{}),hovertext:o({},l.hovertext,{}),marker:{line:{color:o({},a.color,{dflt:e}),width:o({},a.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:l.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:l.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:o({},w.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:d(),showlegend:o({},w.showlegend,{dflt:!1})},b("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":365,"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scattergeo/attributes":968}],717:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../constants/numerical").BADNUM,b=t("../../components/colorscale/calc"),w=t("../scatter/arrays_to_calcdata"),e=t("../scatter/calc_selection");function o(a){return a&&typeof a=="string"}B.exports=function(r,n){var c=n._length,s=new Array(c),i;n.geojson?i=function(y){return o(y)||d(y)}:i=o;for(var v=0;v<c;v++){var u=s[v]={},g=n.locations[v],h=n.z[v];i(g)&&d(h)?(u.loc=g,u.z=h):(u.loc=null,u.z=l),u.index=v}return w(s,n),b(r,n,{vals:n.z,containerStr:"",cLetter:"z"}),e(s,n),s}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../scatter/arrays_to_calcdata":925,"../scatter/calc_selection":928,"fast-isnumeric":190}],718:[function(t,B,H){var d=t("../../lib"),l=t("../../components/colorscale/defaults"),b=t("./attributes");B.exports=function(e,o,a,r){function n(h,y){return d.coerce(e,o,b,h,y)}var c=n("locations"),s=n("z");if(!(c&&c.length&&d.isArrayOrTypedArray(s)&&s.length)){o.visible=!1;return}o._length=Math.min(c.length,s.length);var i=n("geojson"),v;(typeof i=="string"&&i!==""||d.isPlainObject(i))&&(v="geojson-id");var u=n("locationmode",v);u==="geojson-id"&&n("featureidkey"),n("text"),n("hovertext"),n("hovertemplate");var g=n("marker.line.width");g&&n("marker.line.color"),n("marker.opacity"),l(e,o,r,n,{prefix:"",cLetter:"z"}),d.coerceSelectionMarkerOpacity(o,n)}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":716}],719:[function(t,B,H){B.exports=function(l,b,w,e,o){l.location=b.location,l.z=b.z;var a=e[o];return a.fIn&&a.fIn.properties&&(l.properties=a.fIn.properties),l.ct=a.ct,l}},{}],720:[function(t,B,H){var d=t("../../plots/cartesian/axes"),l=t("./attributes"),b=t("../../lib").fillText;B.exports=function(o,a,r){var n=o.cd,c=n[0].trace,s=o.subplot,i,v,u,g,h=[a,r],y=[a+360,r];for(v=0;v<n.length;v++)if(i=n[v],g=!1,i._polygons){for(u=0;u<i._polygons.length;u++)i._polygons[u].contains(h)&&(g=!g),i._polygons[u].contains(y)&&(g=!g);if(g)break}if(!(!g||!i))return o.x0=o.x1=o.xa.c2p(i.ct),o.y0=o.y1=o.ya.c2p(i.ct),o.index=i.index,o.location=i.loc,o.z=i.z,o.zLabel=d.tickText(s.mockAxis,s.mockAxis.c2l(i.z),"hover").text,o.hovertemplate=i.hovertemplate,w(o,c,i),[o]};function w(e,o,a){if(!o.hovertemplate){var r=a.hi||o.hoverinfo,n=String(a.loc),c=r==="all"?l.hoverinfo.flags:r.split("+"),s=c.indexOf("name")!==-1,i=c.indexOf("location")!==-1,v=c.indexOf("z")!==-1,u=c.indexOf("text")!==-1,g=!s&&i,h=[];g?e.nameOverride=n:(s&&(e.nameOverride=o.name),i&&h.push(n)),v&&h.push(e.zLabel),u&&b(a,o,h),e.extraText=h.join("<br>")}}},{"../../lib":503,"../../plots/cartesian/axes":554,"./attributes":716}],721:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../heatmap/colorbar"),calc:t("./calc"),calcGeoJSON:t("./plot").calcGeoJSON,plot:t("./plot").plot,style:t("./style").style,styleOnSelect:t("./style").styleOnSelect,hoverPoints:t("./hover"),eventData:t("./event_data"),selectPoints:t("./select"),moduleType:"trace",name:"choropleth",basePlotModule:t("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":589,"../heatmap/colorbar":795,"./attributes":716,"./calc":717,"./defaults":718,"./event_data":719,"./hover":720,"./plot":722,"./select":723,"./style":724}],722:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib"),b=t("../../lib/geo_location_utils"),w=t("../../lib/topojson_utils").getTopojsonFeatures,e=t("../../plots/cartesian/autorange").findExtremes,o=t("./style").style;function a(n,c,s){var i=c.layers.backplot.select(".choroplethlayer");l.makeTraceGroups(i,s,"trace choropleth").each(function(v){var u=d.select(this),g=u.selectAll("path.choroplethlocation").data(l.identity);g.enter().append("path").classed("choroplethlocation",!0),g.exit().remove(),o(n,v)})}function r(n,c){for(var s=n[0].trace,i=c[s.geo],v=i._subplot,u=s.locationmode,g=s._length,h=u==="geojson-id"?b.extractTraceFeature(n):w(s,v.topojson),y=[],p=[],A=0;A<g;A++){var m=n[A],M=u==="geojson-id"?m.fOut:b.locationToFeature(u,m.loc,h);if(M){m.geojson=M,m.ct=M.properties.ct,m._polygons=b.feature2polygons(M);var x=b.computeBbox(M);y.push(x[0],x[2]),p.push(x[1],x[3])}else m.geojson=null}if(i.fitbounds==="geojson"&&u==="geojson-id"){var T=b.computeBbox(b.getTraceGeojson(s));y=[T[0],T[2]],p=[T[1],T[3]]}var _={padded:!0};s._extremes.lon=e(i.lonaxis._ax,y,_),s._extremes.lat=e(i.lataxis._ax,p,_)}B.exports={calcGeoJSON:r,plot:a}},{"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/topojson_utils":532,"../../plots/cartesian/autorange":553,"./style":724,"@plotly/d3":58}],723:[function(t,B,H){B.exports=function(l,b){var w=l.cd,e=l.xaxis,o=l.yaxis,a=[],r,n,c,s,i;if(b===!1)for(r=0;r<w.length;r++)w[r].selected=0;else for(r=0;r<w.length;r++)n=w[r],c=n.ct,c&&(s=e.c2p(c),i=o.c2p(c),b.contains([s,i],null,r,l)?(a.push({pointNumber:r,lon:c[0],lat:c[1]}),n.selected=1):n.selected=0);return a}},{}],724:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../components/color"),b=t("../../components/drawing"),w=t("../../components/colorscale");function e(r,n){n&&o(r,n)}function o(r,n){var c=n[0].trace,s=n[0].node3,i=s.selectAll(".choroplethlocation"),v=c.marker||{},u=v.line||{},g=w.makeColorScaleFuncFromTrace(c);i.each(function(h){d.select(this).attr("fill",g(h.z)).call(l.stroke,h.mlc||u.color).call(b.dashLine,"",h.mlw||u.width||0).style("opacity",v.opacity)}),b.selectedPointStyle(i,c,r)}function a(r,n){var c=n[0].node3,s=n[0].trace;s.selectedpoints?b.selectedPointStyle(c.selectAll(".choroplethlocation"),s,r):o(r,n)}B.exports={style:e,styleOnSelect:a}},{"../../components/color":366,"../../components/colorscale":378,"../../components/drawing":388,"@plotly/d3":58}],725:[function(t,B,H){var d=t("../choropleth/attributes"),l=t("../../components/colorscale/attributes"),b=t("../../plots/template_attributes").hovertemplateAttrs,w=t("../../plots/attributes"),e=t("../../lib/extend").extendFlat;B.exports=e({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:e({},d.featureidkey,{}),below:{valType:"string",editType:"plot"},text:d.text,hovertext:d.hovertext,marker:{line:{color:e({},d.marker.line.color,{editType:"plot"}),width:e({},d.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:e({},d.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:e({},d.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:e({},d.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:d.hoverinfo,hovertemplate:b({},{keys:["properties"]}),showlegend:e({},w.showlegend,{dflt:!1})},l("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../choropleth/attributes":716}],726:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../lib"),b=t("../../components/colorscale"),w=t("../../components/drawing"),e=t("../../lib/geojson_utils").makeBlank,o=t("../../lib/geo_location_utils");function a(n){var c=n[0].trace,s=c.visible===!0&&c._length!==0,i={layout:{visibility:"none"},paint:{}},v={layout:{visibility:"none"},paint:{}},u=c._opts={fill:i,line:v,geojson:e()};if(!s)return u;var g=o.extractTraceFeature(n);if(!g)return u;var h=b.makeColorScaleFuncFromTrace(c),y=c.marker,p=y.line||{},A;l.isArrayOrTypedArray(y.opacity)&&(A=function(S){var k=S.mo;return d(k)?+l.constrain(k,0,1):0});var m;l.isArrayOrTypedArray(p.color)&&(m=function(S){return S.mlc});var M;l.isArrayOrTypedArray(p.width)&&(M=function(S){return S.mlw});for(var x=0;x<n.length;x++){var T=n[x],_=T.fOut;if(_){var f=_.properties;f.fc=h(T.z),A&&(f.mo=A(T)),m&&(f.mlc=m(T)),M&&(f.mlw=M(T)),T.ct=f.ct,T._polygons=o.feature2polygons(_)}}var L=A?{type:"identity",property:"mo"}:y.opacity;return l.extendFlat(i.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":L}),l.extendFlat(v.paint,{"line-color":m?{type:"identity",property:"mlc"}:p.color,"line-width":M?{type:"identity",property:"mlw"}:p.width,"line-opacity":L}),i.layout.visibility="visible",v.layout.visibility="visible",u.geojson={type:"FeatureCollection",features:g},r(n),u}function r(n){var c=n[0].trace,s=c._opts,i;if(c.selectedpoints){for(var v=w.makeSelectedPointStyleFns(c),u=0;u<n.length;u++){var g=n[u];g.fOut&&(g.fOut.properties.mo2=v.selectedOpacityFn(g))}i={type:"identity",property:"mo2"}}else i=l.isArrayOrTypedArray(c.marker.opacity)?{type:"identity",property:"mo"}:c.marker.opacity;return l.extendFlat(s.fill.paint,{"fill-opacity":i}),l.extendFlat(s.line.paint,{"line-opacity":i}),s}B.exports={convert:a,convertOnSelect:r}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/geojson_utils":497,"fast-isnumeric":190}],727:[function(t,B,H){var d=t("../../lib"),l=t("../../components/colorscale/defaults"),b=t("./attributes");B.exports=function(e,o,a,r){function n(u,g){return d.coerce(e,o,b,u,g)}var c=n("locations"),s=n("z"),i=n("geojson");if(!d.isArrayOrTypedArray(c)||!c.length||!d.isArrayOrTypedArray(s)||!s.length||!(typeof i=="string"&&i!==""||d.isPlainObject(i))){o.visible=!1;return}n("featureidkey"),o._length=Math.min(c.length,s.length),n("below"),n("text"),n("hovertext"),n("hovertemplate");var v=n("marker.line.width");v&&n("marker.line.color"),n("marker.opacity"),l(e,o,r,n,{prefix:"",cLetter:"z"}),d.coerceSelectionMarkerOpacity(o,n)}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":725}],728:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../heatmap/colorbar"),calc:t("../choropleth/calc"),plot:t("./plot"),hoverPoints:t("../choropleth/hover"),eventData:t("../choropleth/event_data"),selectPoints:t("../choropleth/select"),styleOnSelect:function(d,l){if(l){var b=l[0].trace;b._glTrace.updateOnSelect(l)}},getBelow:function(d,l){for(var b=l.getMapLayers(),w=b.length-2;w>=0;w--){var e=b[w].id;if(typeof e=="string"&&e.indexOf("water")===0){for(var o=w+1;o<b.length;o++)if(e=b[o].id,typeof e=="string"&&e.indexOf("plotly-")===-1)return e}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:t("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":613,"../choropleth/calc":717,"../choropleth/event_data":719,"../choropleth/hover":720,"../choropleth/select":723,"../heatmap/colorbar":795,"./attributes":725,"./defaults":727,"./plot":729}],729:[function(t,B,H){var d=t("./convert").convert,l=t("./convert").convertOnSelect,b=t("../../plots/mapbox/constants").traceLayerPrefix;function w(o,a){this.type="choroplethmapbox",this.subplot=o,this.uid=a,this.sourceId="source-"+a,this.layerList=[["fill",b+a+"-fill"],["line",b+a+"-line"]],this.below=null}var e=w.prototype;e.update=function(o){this._update(d(o))},e.updateOnSelect=function(o){this._update(l(o))},e._update=function(o){var a=this.subplot,r=this.layerList,n=a.belowLookup["trace-"+this.uid];a.map.getSource(this.sourceId).setData(o.geojson),n!==this.below&&(this._removeLayers(),this._addLayers(o,n),this.below=n);for(var c=0;c<r.length;c++){var s=r[c],i=s[0],v=s[1],u=o[i];a.setOptions(v,"setLayoutProperty",u.layout),u.layout.visibility==="visible"&&a.setOptions(v,"setPaintProperty",u.paint)}},e._addLayers=function(o,a){for(var r=this.subplot,n=this.layerList,c=this.sourceId,s=0;s<n.length;s++){var i=n[s],v=i[0],u=o[v];r.addLayer({type:v,id:i[1],source:c,layout:u.layout,paint:u.paint},a)}},e._removeLayers=function(){for(var o=this.subplot.map,a=this.layerList,r=a.length-1;r>=0;r--)o.removeLayer(a[r][1])},e.dispose=function(){var o=this.subplot.map;this._removeLayers(),o.removeSource(this.sourceId)},B.exports=function(a,r){var n=r[0].trace,c=new w(a,n.uid),s=c.sourceId,i=d(r),v=c.below=a.belowLookup["trace-"+n.uid];return a.map.addSource(s,{type:"geojson",data:i.geojson}),c._addLayers(i,v),r[0].trace._glTrace=c,c}},{"../../plots/mapbox/constants":611,"./convert":726}],730:[function(t,B,H){var d=t("../../components/colorscale/attributes"),l=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=t("../../plots/template_attributes").hovertemplateAttrs,w=t("../mesh3d/attributes"),e=t("../../plots/attributes"),o=t("../../lib/extend").extendFlat,a={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:b({editType:"calc"},{keys:["norm"]}),uhoverformat:l("u",1),vhoverformat:l("v",1),whoverformat:l("w",1),xhoverformat:l("x"),yhoverformat:l("y"),zhoverformat:l("z"),showlegend:o({},e.showlegend,{dflt:!1})};o(a,d("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var r=["opacity","lightposition","lighting"];r.forEach(function(n){a[n]=w[n]}),a.hoverinfo=o({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),a.transforms=void 0,B.exports=a},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],731:[function(t,B,H){var d=t("../../components/colorscale/calc");B.exports=function(b,w){for(var e=w.u,o=w.v,a=w.w,r=Math.min(w.x.length,w.y.length,w.z.length,e.length,o.length,a.length),n=-1/0,c=1/0,s=0;s<r;s++){var i=e[s],v=o[s],u=a[s],g=Math.sqrt(i*i+v*v+u*u);n=Math.max(n,g),c=Math.min(c,g)}w._len=r,w._normMax=n,d(b,w,{vals:[c,n],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],732:[function(t,B,H){var d=t("../../../stackgl_modules").gl_cone3d,l=t("../../../stackgl_modules").gl_cone3d.createConeMesh,b=t("../../lib").simpleMap,w=t("../../lib/gl_format_color").parseColorScale,e=t("../../components/colorscale").extractOpts,o=t("../../plots/gl3d/zip3");function a(u,g){this.scene=u,this.uid=g,this.mesh=null,this.data=null}var r=a.prototype;r.handlePick=function(u){if(u.object===this.mesh){var g=u.index=u.data.index,h=this.data.x[g],y=this.data.y[g],p=this.data.z[g],A=this.data.u[g],m=this.data.v[g],M=this.data.w[g];u.traceCoordinate=[h,y,p,A,m,M,Math.sqrt(A*A+m*m+M*M)];var x=this.data.hovertext||this.data.text;return Array.isArray(x)&&x[g]!==void 0?u.textLabel=x[g]:x&&(u.textLabel=x),!0}};var n={xaxis:0,yaxis:1,zaxis:2},c={tip:1,tail:0,cm:.25,center:.5},s={tip:1,tail:1,cm:.75,center:.5};function i(u,g){var h=u.fullSceneLayout,y=u.dataScale,p={};function A(T,_){var f=h[_],L=y[n[_]];return b(T,function(S){return f.d2l(S)*L})}p.vectors=o(A(g.u,"xaxis"),A(g.v,"yaxis"),A(g.w,"zaxis"),g._len),p.positions=o(A(g.x,"xaxis"),A(g.y,"yaxis"),A(g.z,"zaxis"),g._len);var m=e(g);p.colormap=w(g),p.vertexIntensityBounds=[m.min/g._normMax,m.max/g._normMax],p.coneOffset=c[g.anchor],g.sizemode==="scaled"?p.coneSize=g.sizeref||.5:p.coneSize=g.sizeref&&g._normMax?g.sizeref/g._normMax:.5;var M=d(p),x=g.lightposition;return M.lightPosition=[x.x,x.y,x.z],M.ambient=g.lighting.ambient,M.diffuse=g.lighting.diffuse,M.specular=g.lighting.specular,M.roughness=g.lighting.roughness,M.fresnel=g.lighting.fresnel,M.opacity=g.opacity,g._pad=s[g.anchor]*M.vectorScale*M.coneScale*g._normMax,M}r.update=function(u){this.data=u;var g=i(this.scene,u);this.mesh.update(g)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function v(u,g){var h=u.glplot.gl,y=i(u,g),p=l(h,y),A=new a(u,g.uid);return A.mesh=p,A.data=g,p._trace=A,u.glplot.add(p),A}B.exports=v},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/gl3d/zip3":609}],733:[function(t,B,H){var d=t("../../lib"),l=t("../../components/colorscale/defaults"),b=t("./attributes");B.exports=function(e,o,a,r){function n(h,y){return d.coerce(e,o,b,h,y)}var c=n("u"),s=n("v"),i=n("w"),v=n("x"),u=n("y"),g=n("z");if(!c||!c.length||!s||!s.length||!i||!i.length||!v||!v.length||!u||!u.length||!g||!g.length){o.visible=!1;return}n("sizeref"),n("sizemode"),n("anchor"),n("lighting.ambient"),n("lighting.diffuse"),n("lighting.specular"),n("lighting.roughness"),n("lighting.fresnel"),n("lightposition.x"),n("lightposition.y"),n("lightposition.z"),l(e,o,r,n,{prefix:"",cLetter:"c"}),n("text"),n("hovertext"),n("hovertemplate"),n("uhoverformat"),n("vhoverformat"),n("whoverformat"),n("xhoverformat"),n("yhoverformat"),n("zhoverformat"),o._length=null}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":730}],734:[function(t,B,H){B.exports={moduleType:"trace",name:"cone",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:t("./calc"),plot:t("./convert"),eventData:function(d,l){return d.norm=l.traceCoordinate[6],d},meta:{}}},{"../../plots/gl3d":598,"./attributes":730,"./calc":731,"./convert":732,"./defaults":733}],735:[function(t,B,H){var d=t("../heatmap/attributes"),l=t("../scatter/attributes"),b=t("../../plots/cartesian/axis_format_attributes"),w=b.axisHoverFormat,e=b.descriptionOnlyNumbers,o=t("../../components/colorscale/attributes"),a=t("../../components/drawing/attributes").dash,r=t("../../plots/font_attributes"),n=t("../../lib/extend").extendFlat,c=t("../../constants/filter_ops"),s=c.COMPARISON_OPS2,i=c.INTERVAL_OPS,v=l.line;B.exports=n({z:d.z,x:d.x,x0:d.x0,dx:d.dx,y:d.y,y0:d.y0,dy:d.dy,xperiod:d.xperiod,yperiod:d.yperiod,xperiod0:l.xperiod0,yperiod0:l.yperiod0,xperiodalignment:d.xperiodalignment,yperiodalignment:d.yperiodalignment,text:d.text,hovertext:d.hovertext,transpose:d.transpose,xtype:d.xtype,ytype:d.ytype,xhoverformat:w("x"),yhoverformat:w("y"),zhoverformat:w("z",1),hovertemplate:d.hovertemplate,texttemplate:n({},d.texttemplate,{}),textfont:n({},d.textfont,{}),hoverongaps:d.hoverongaps,connectgaps:n({},d.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:r({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:e("contour label")},operation:{valType:"enumerated",values:[].concat(s).concat(i),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:n({},v.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:a,smoothing:n({},v.smoothing,{}),editType:"plot"}},o("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../constants/filter_ops":475,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../heatmap/attributes":792,"../scatter/attributes":926}],736:[function(t,B,H){var d=t("../../components/colorscale"),l=t("../heatmap/calc"),b=t("./set_contours"),w=t("./end_plus");B.exports=function(o,a){var r=l(o,a),n=r[0].z;b(a,n);var c=a.contours,s=d.extractOpts(a),i;if(c.coloring==="heatmap"&&s.auto&&a.autocontour===!1){var v=c.start,u=w(c),g=c.size||1,h=Math.floor((u-v)/g)+1;isFinite(g)||(g=1,h=1);var y=v-g/2,p=y+h*g;i=[y,p]}else i=n;return d.calc(o,a,{vals:i,cLetter:"z"}),r}},{"../../components/colorscale":378,"../heatmap/calc":793,"./end_plus":746,"./set_contours":754}],737:[function(t,B,H){B.exports=function(d,l){var b=d[0],w=b.z,e;switch(l.type){case"levels":var o=Math.min(w[0][0],w[0][1]);for(e=0;e<d.length;e++){var a=d[e];a.prefixBoundary=!a.edgepaths.length&&(o>a.level||a.starts.length&&o===a.level)}break;case"constraint":if(b.prefixBoundary=!1,b.edgepaths.length)return;var r=b.x.length,n=b.y.length,c=-1/0,s=1/0;for(e=0;e<n;e++)s=Math.min(s,w[e][0]),s=Math.min(s,w[e][r-1]),c=Math.max(c,w[e][0]),c=Math.max(c,w[e][r-1]);for(e=1;e<r-1;e++)s=Math.min(s,w[0][e]),s=Math.min(s,w[n-1][e]),c=Math.max(c,w[0][e]),c=Math.max(c,w[n-1][e]);var i=l.value,v,u;switch(l._operation){case">":i>c&&(b.prefixBoundary=!0);break;case"<":(i<s||b.starts.length&&i===s)&&(b.prefixBoundary=!0);break;case"[]":v=Math.min(i[0],i[1]),u=Math.max(i[0],i[1]),(u<s||v>c||b.starts.length&&u===s)&&(b.prefixBoundary=!0);break;case"][":v=Math.min(i[0],i[1]),u=Math.max(i[0],i[1]),v<s&&u>c&&(b.prefixBoundary=!0);break}break}}},{}],738:[function(t,B,H){var d=t("../../components/colorscale"),l=t("./make_color_map"),b=t("./end_plus");function w(e,o,a){var r=o.contours,n=o.line,c=r.size||1,s=r.coloring,i=l(o,{isColorbar:!0});if(s==="heatmap"){var v=d.extractOpts(o);a._fillgradient=v.reversescale?d.flipScale(v.colorscale):v.colorscale,a._zrange=[v.min,v.max]}else s==="fill"&&(a._fillcolor=i);a._line={color:s==="lines"?i:n.color,width:r.showlines!==!1?n.width:0,dash:n.dash},a._levels={start:r.start,end:b(r),size:c}}B.exports={min:"zmin",max:"zmax",calc:w}},{"../../components/colorscale":378,"./end_plus":746,"./make_color_map":751}],739:[function(t,B,H){B.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],740:[function(t,B,H){var d=t("fast-isnumeric"),l=t("./label_defaults"),b=t("../../components/color"),w=b.addOpacity,e=b.opacity,o=t("../../constants/filter_ops"),a=o.CONSTRAINT_REDUCTION,r=o.COMPARISON_OPS2;B.exports=function(s,i,v,u,g,h){var y=i.contours,p,A,m,M=v("contours.operation");if(y._operation=a[M],n(v,y),M==="="?p=y.showlines=!0:(p=v("contours.showlines"),m=v("fillcolor",w((s.line||{}).color||g,.5))),p){var x=m&&e(m)?w(i.fillcolor,1):g;A=v("line.color",x),v("line.width",2),v("line.dash")}v("line.smoothing"),l(v,u,A,h)};function n(c,s){var i;r.indexOf(s.operation)===-1?(c("contours.value",[0,1]),Array.isArray(s.value)?s.value.length>2?s.value=s.value.slice(2):s.length===0?s.value=[0,1]:s.length<2?(i=parseFloat(s.value[0]),s.value=[i,i+1]):s.value=[parseFloat(s.value[0]),parseFloat(s.value[1])]:d(s.value)&&(i=parseFloat(s.value),s.value=[i,i+1])):(c("contours.value",0),d(s.value)||(Array.isArray(s.value)?s.value=parseFloat(s.value[0]):s.value=0))}},{"../../components/color":366,"../../constants/filter_ops":475,"./label_defaults":750,"fast-isnumeric":190}],741:[function(t,B,H){var d=t("../../constants/filter_ops"),l=t("fast-isnumeric");B.exports={"[]":w("[]"),"][":w("]["),">":e(">"),"<":e("<"),"=":e("=")};function b(o,a){var r=Array.isArray(a),n;function c(s){return l(s)?+s:null}return d.COMPARISON_OPS2.indexOf(o)!==-1?n=c(r?a[0]:a):d.INTERVAL_OPS.indexOf(o)!==-1?n=r?[c(a[0]),c(a[1])]:[c(a),c(a)]:d.SET_OPS.indexOf(o)!==-1&&(n=r?a.map(c):[c(a)]),n}function w(o){return function(a){a=b(o,a);var r=Math.min(a[0],a[1]),n=Math.max(a[0],a[1]);return{start:r,end:n,size:n-r}}}function e(o){return function(a){return a=b(o,a),{start:a,end:1/0,size:1/0}}}},{"../../constants/filter_ops":475,"fast-isnumeric":190}],742:[function(t,B,H){B.exports=function(l,b,w,e){var o=e("contours.start"),a=e("contours.end"),r=o===!1||a===!1,n=w("contours.size"),c;r?c=b.autocontour=!0:c=w("autocontour",!1),(c||!n)&&w("ncontours")}},{}],743:[function(t,B,H){var d=t("../../lib");B.exports=function(b,w){var e,o,a,r=function(s){return s.reverse()},n=function(s){return s};switch(w){case"=":case"<":return b;case">":for(b.length!==1&&d.warn("Contour data invalid for the specified inequality operation."),o=b[0],e=0;e<o.edgepaths.length;e++)o.edgepaths[e]=r(o.edgepaths[e]);for(e=0;e<o.paths.length;e++)o.paths[e]=r(o.paths[e]);for(e=0;e<o.starts.length;e++)o.starts[e]=r(o.starts[e]);return b;case"][":var c=r;r=n,n=c;case"[]":for(b.length!==2&&d.warn("Contour data invalid for the specified inequality range operation."),o=l(b[0]),a=l(b[1]),e=0;e<o.edgepaths.length;e++)o.edgepaths[e]=r(o.edgepaths[e]);for(e=0;e<o.paths.length;e++)o.paths[e]=r(o.paths[e]);for(e=0;e<o.starts.length;e++)o.starts[e]=r(o.starts[e]);for(;a.edgepaths.length;)o.edgepaths.push(n(a.edgepaths.shift()));for(;a.paths.length;)o.paths.push(n(a.paths.shift()));for(;a.starts.length;)o.starts.push(n(a.starts.shift()));return[o]}};function l(b){return d.extendFlat({},b,{edgepaths:d.extendDeep([],b.edgepaths),paths:d.extendDeep([],b.paths),starts:d.extendDeep([],b.starts)})}},{"../../lib":503}],744:[function(t,B,H){var d=t("../../lib"),l=t("../heatmap/xyz_defaults"),b=t("../scatter/period_defaults"),w=t("./constraint_defaults"),e=t("./contours_defaults"),o=t("./style_defaults"),a=t("../heatmap/label_defaults"),r=t("./attributes");B.exports=function(c,s,i,v){function u(p,A){return d.coerce(c,s,r,p,A)}function g(p){return d.coerce2(c,s,r,p)}var h=l(c,s,u,v);if(!h){s.visible=!1;return}b(c,s,v,u),u("xhoverformat"),u("yhoverformat"),u("text"),u("hovertext"),u("hoverongaps"),u("hovertemplate");var y=u("contours.type")==="constraint";u("connectgaps",d.isArray1D(s.z)),y?w(c,s,u,v,i):(e(c,s,u,g),o(c,s,u,v)),s.contours&&s.contours.coloring==="heatmap"&&a(u,v)}},{"../../lib":503,"../heatmap/label_defaults":802,"../heatmap/xyz_defaults":807,"../scatter/period_defaults":946,"./attributes":735,"./constraint_defaults":740,"./contours_defaults":742,"./style_defaults":756}],745:[function(t,B,H){var d=t("../../lib"),l=t("./constraint_mapping"),b=t("./end_plus");B.exports=function(e,o,a){for(var r=e.type==="constraint"?l[e._operation](e.value):e,n=r.size,c=[],s=b(r),i=a.trace._carpetTrace,v=i?{xaxis:i.aaxis,yaxis:i.baxis,x:a.a,y:a.b}:{xaxis:o.xaxis,yaxis:o.yaxis,x:a.x,y:a.y},u=r.start;u<s;u+=n)if(c.push(d.extendFlat({level:u,crossings:{},starts:[],edgepaths:[],paths:[],z:a.z,smoothing:a.trace.line.smoothing},v)),c.length>1e3){d.warn("Too many contours, clipping at 1000",e);break}return c}},{"../../lib":503,"./constraint_mapping":741,"./end_plus":746}],746:[function(t,B,H){B.exports=function(l){return l.end+l.size/1e6}},{}],747:[function(t,B,H){var d=t("../../lib"),l=t("./constants");B.exports=function(n,c,s){var i,v,u,g,h;for(c=c||.01,s=s||.01,u=0;u<n.length;u++){for(g=n[u],h=0;h<g.starts.length;h++)v=g.starts[h],e(g,v,"edge",c,s);for(i=0;Object.keys(g.crossings).length&&i<1e4;)i++,v=Object.keys(g.crossings)[0].split(",").map(Number),e(g,v,void 0,c,s);i===1e4&&d.log("Infinite loop in contour?")}};function b(r,n,c,s){return Math.abs(r[0]-n[0])<c&&Math.abs(r[1]-n[1])<s}function w(r,n){var c=r[2]-n[2],s=r[3]-n[3];return Math.sqrt(c*c+s*s)}function e(r,n,c,s,i){var v=n.join(","),u=r.crossings[v],g=o(u,c,n),h=[a(r,n,[-g[0],-g[1]])],y=r.z.length,p=r.z[0].length,A=n.slice(),m=g.slice(),M;for(M=0;M<1e4;M++){if(u>20?(u=l.CHOOSESADDLE[u][(g[0]||g[1])<0?0:1],r.crossings[v]=l.SADDLEREMAINDER[u]):delete r.crossings[v],g=l.NEWDELTA[u],!g){d.log("Found bad marching index:",u,n,r.level);break}h.push(a(r,n,g)),n[0]+=g[0],n[1]+=g[1],v=n.join(","),b(h[h.length-1],h[h.length-2],s,i)&&h.pop();var x=g[0]&&(n[0]<0||n[0]>p-2)||g[1]&&(n[1]<0||n[1]>y-2),T=n[0]===A[0]&&n[1]===A[1]&&g[0]===m[0]&&g[1]===m[1];if(T||c&&x)break;u=r.crossings[v]}M===1e4&&d.log("Infinite loop in contour?");var _=b(h[0],h[h.length-1],s,i),f=0,L=.2*r.smoothing,S=[],k=0,P,z,I,R,D,O,F,G,W,q,J;for(M=1;M<h.length;M++)F=w(h[M],h[M-1]),f+=F,S.push(F);var X=f/S.length*L;function Z(oe){return h[oe%h.length]}for(M=h.length-2;M>=k;M--)if(P=S[M],P<X){for(I=0,z=M-1;z>=k&&P+S[z]<X;z--)P+=S[z];if(_&&M===h.length-2)for(I=0;I<z&&P+S[I]<X;I++)P+=S[I];D=M-z+I+1,O=Math.floor((M+z+I+2)/2),!_&&M===h.length-2?R=h[h.length-1]:!_&&z===-1?R=h[0]:D%2?R=Z(O):R=[(Z(O)[0]+Z(O+1)[0])/2,(Z(O)[1]+Z(O+1)[1])/2],h.splice(z+1,M-z+1,R),M=z+1,I&&(k=I),_&&(M===h.length-2?h[I]=h[h.length-1]:M===0&&(h[h.length-1]=h[0]))}for(h.splice(0,k),M=0;M<h.length;M++)h[M].length=2;if(!(h.length<2))if(_)h.pop(),r.paths.push(h);else{c||d.log("Unclosed interior contour?",r.level,A.join(","),h.join("L"));var se=!1;for(G=0;G<r.edgepaths.length;G++)if(q=r.edgepaths[G],!se&&b(q[0],h[h.length-1],s,i)){h.pop(),se=!0;var le=!1;for(W=0;W<r.edgepaths.length;W++)if(J=r.edgepaths[W],b(J[J.length-1],h[0],s,i)){le=!0,h.shift(),r.edgepaths.splice(G,1),W===G?r.paths.push(h.concat(J)):(W>G&&W--,r.edgepaths[W]=J.concat(h,q));break}le||(r.edgepaths[G]=h.concat(q))}for(G=0;G<r.edgepaths.length&&!se;G++)q=r.edgepaths[G],b(q[q.length-1],h[0],s,i)&&(h.shift(),r.edgepaths[G]=q.concat(h),se=!0);se||r.edgepaths.push(h)}}function o(r,n,c){var s=0,i=0;return r>20&&n?r===208||r===1114?s=c[0]===0?1:-1:i=c[1]===0?1:-1:l.BOTTOMSTART.indexOf(r)!==-1?i=1:l.LEFTSTART.indexOf(r)!==-1?s=1:l.TOPSTART.indexOf(r)!==-1?i=-1:s=-1,[s,i]}function a(r,n,c){var s=n[0]+Math.max(c[0],0),i=n[1]+Math.max(c[1],0),v=r.z[i][s],u=r.xaxis,g=r.yaxis;if(c[1]){var h=(r.level-v)/(r.z[i][s+1]-v),y=(h!==1?(1-h)*u.c2l(r.x[s]):0)+(h!==0?h*u.c2l(r.x[s+1]):0);return[u.c2p(u.l2c(y),!0),g.c2p(r.y[i],!0),s+h,i]}else{var p=(r.level-v)/(r.z[i+1][s]-v),A=(p!==1?(1-p)*g.c2l(r.y[i]):0)+(p!==0?p*g.c2l(r.y[i+1]):0);return[u.c2p(r.x[s],!0),g.c2p(g.l2c(A),!0),s,i+p]}}},{"../../lib":503,"./constants":739}],748:[function(t,B,H){var d=t("../../components/color"),l=t("../heatmap/hover");B.exports=function(w,e,o,a,r){r||(r={}),r.isContour=!0;var n=l(w,e,o,a,r);return n&&n.forEach(function(c){var s=c.trace;s.contours.type==="constraint"&&(s.fillcolor&&d.opacity(s.fillcolor)?c.color=d.addOpacity(s.fillcolor,1):s.contours.showlines&&d.opacity(s.line.color)&&(c.color=d.addOpacity(s.line.color,1)))}),n}},{"../../components/color":366,"../heatmap/hover":799}],749:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot").plot,style:t("./style"),colorbar:t("./colorbar"),hoverPoints:t("./hover"),moduleType:"trace",name:"contour",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":568,"./attributes":735,"./calc":736,"./colorbar":738,"./defaults":744,"./hover":748,"./plot":753,"./style":755}],750:[function(t,B,H){var d=t("../../lib");B.exports=function(b,w,e,o){o||(o={});var a=b("contours.showlabels");if(a){var r=w.font;d.coerceFont(b,"contours.labelfont",{family:r.family,size:r.size,color:e}),b("contours.labelformat")}o.hasHover!==!1&&b("zhoverformat")}},{"../../lib":503}],751:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../components/colorscale"),b=t("./end_plus");B.exports=function(e){var o=e.contours,a=o.start,r=b(o),n=o.size||1,c=Math.floor((r-a)/n)+1,s=o.coloring==="lines"?0:1,i=l.extractOpts(e);isFinite(n)||(n=1,c=1);var v=i.reversescale?l.flipScale(i.colorscale):i.colorscale,u=v.length,g=new Array(u),h=new Array(u),y,p;if(o.coloring==="heatmap"){var A=i.min,m=i.max;for(p=0;p<u;p++)y=v[p],g[p]=y[0]*(m-A)+A,h[p]=y[1];var M=d.extent([A,m,o.start,o.start+n*(c-1)]),x=M[A<m?0:1],T=M[A<m?1:0];x!==A&&(g.splice(0,0,x),h.splice(0,0,h[0])),T!==m&&(g.push(T),h.push(h[h.length-1]))}else for(p=0;p<u;p++)y=v[p],g[p]=(y[0]*(c+s-1)-s/2)*n+a,h[p]=y[1];return l.makeColorScaleFunc({domain:g,range:h},{noNumericCheck:!0})}},{"../../components/colorscale":378,"./end_plus":746,"@plotly/d3":58}],752:[function(t,B,H){var d=t("./constants");B.exports=function(w){var e=w[0].z,o=e.length,a=e[0].length,r=o===2||a===2,n,c,s,i,v,u,g,h,y;for(c=0;c<o-1;c++)for(i=[],c===0&&(i=i.concat(d.BOTTOMSTART)),c===o-2&&(i=i.concat(d.TOPSTART)),n=0;n<a-1;n++)for(s=i.slice(),n===0&&(s=s.concat(d.LEFTSTART)),n===a-2&&(s=s.concat(d.RIGHTSTART)),v=n+","+c,u=[[e[c][n],e[c][n+1]],[e[c+1][n],e[c+1][n+1]]],y=0;y<w.length;y++)h=w[y],g=l(h.level,u),g&&(h.crossings[v]=g,s.indexOf(g)!==-1&&(h.starts.push([n,c]),r&&s.indexOf(g,s.indexOf(g)+1)!==-1&&h.starts.push([n,c])))};function l(b,w){var e=(w[0][0]>b?0:1)+(w[0][1]>b?0:2)+(w[1][1]>b?0:4)+(w[1][0]>b?0:8);if(e===5||e===10){var o=(w[0][0]+w[0][1]+w[1][0]+w[1][1])/4;return b>o?e===5?713:1114:e===5?104:208}return e===15?0:e}},{"./constants":739}],753:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib"),b=t("../../components/drawing"),w=t("../../components/colorscale"),e=t("../../lib/svg_text_utils"),o=t("../../plots/cartesian/axes"),a=t("../../plots/cartesian/set_convert"),r=t("../heatmap/plot"),n=t("./make_crossings"),c=t("./find_all_paths"),s=t("./empty_pathinfo"),i=t("./convert_to_constraints"),v=t("./close_boundaries"),u=t("./constants"),g=u.LABELOPTIMIZER;H.plot=function(_,f,L,S){var k=f.xaxis,P=f.yaxis;l.makeTraceGroups(S,L,"contour").each(function(z){var I=d.select(this),R=z[0],D=R.trace,O=R.x,F=R.y,G=D.contours,W=s(G,f,R),q=l.ensureSingle(I,"g","heatmapcoloring"),J=[];G.coloring==="heatmap"&&(J=[z]),r(_,f,J,q),n(W),c(W);var X=k.c2p(O[0],!0),Z=k.c2p(O[O.length-1],!0),se=P.c2p(F[0],!0),le=P.c2p(F[F.length-1],!0),oe=[[X,le],[Z,le],[Z,se],[X,se]],U=W;G.type==="constraint"&&(U=i(W,G._operation)),h(I,oe,G),y(I,U,oe,G),A(I,W,_,R,G),M(I,f,_,R,oe)})};function h(T,_,f){var L=l.ensureSingle(T,"g","contourbg"),S=L.selectAll("path").data(f.coloring==="fill"?[0]:[]);S.enter().append("path"),S.exit().remove(),S.attr("d","M"+_.join("L")+"Z").style("stroke","none")}function y(T,_,f,L){var S=L.coloring==="fill"||L.type==="constraint"&&L._operation!=="=",k="M"+f.join("L")+"Z";S&&v(_,L);var P=l.ensureSingle(T,"g","contourfill"),z=P.selectAll("path").data(S?_:[]);z.enter().append("path"),z.exit().remove(),z.each(function(I){var R=(I.prefixBoundary?k:"")+p(I,f);R?d.select(this).attr("d",R).style("stroke","none"):d.select(this).remove()})}function p(T,_){var f="",L=0,S=T.edgepaths.map(function(X,Z){return Z}),k=!0,P,z,I,R,D,O;function F(X){return Math.abs(X[1]-_[0][1])<.01}function G(X){return Math.abs(X[1]-_[2][1])<.01}function W(X){return Math.abs(X[0]-_[0][0])<.01}function q(X){return Math.abs(X[0]-_[2][0])<.01}for(;S.length;){for(O=b.smoothopen(T.edgepaths[L],T.smoothing),f+=k?O:O.replace(/^M/,"L"),S.splice(S.indexOf(L),1),P=T.edgepaths[L][T.edgepaths[L].length-1],R=-1,I=0;I<4;I++){if(!P){l.log("Missing end?",L,T);break}for(F(P)&&!q(P)?z=_[1]:W(P)?z=_[0]:G(P)?z=_[3]:q(P)&&(z=_[2]),D=0;D<T.edgepaths.length;D++){var J=T.edgepaths[D][0];Math.abs(P[0]-z[0])<.01?Math.abs(P[0]-J[0])<.01&&(J[1]-P[1])*(z[1]-J[1])>=0&&(z=J,R=D):Math.abs(P[1]-z[1])<.01?Math.abs(P[1]-J[1])<.01&&(J[0]-P[0])*(z[0]-J[0])>=0&&(z=J,R=D):l.log("endpt to newendpt is not vert. or horz.",P,z,J)}if(P=z,R>=0)break;f+="L"+z}if(R===T.edgepaths.length){l.log("unclosed perimeter path");break}L=R,k=S.indexOf(L)===-1,k&&(L=S[0],f+="Z")}for(L=0;L<T.paths.length;L++)f+=b.smoothclosed(T.paths[L],T.smoothing);return f}function A(T,_,f,L,S){var k=l.ensureSingle(T,"g","contourlines"),P=S.showlines!==!1,z=S.showlabels,I=P&&z,R=H.createLines(k,P||z,_),D=H.createLineClip(k,I,f,L.trace.uid),O=T.selectAll("g.contourlabels").data(z?[0]:[]);if(O.exit().remove(),O.enter().append("g").classed("contourlabels",!0),z){var F=[],G=[];l.clearLocationCache();var W=H.labelFormatter(f,L),q=b.tester.append("text").attr("data-notex",1).call(b.font,S.labelfont),J=_[0].xaxis,X=_[0].yaxis,Z=J._length,se=X._length,le=J.range,oe=X.range,U=l.aggNums(Math.min,null,L.x),V=l.aggNums(Math.max,null,L.x),re=l.aggNums(Math.min,null,L.y),ee=l.aggNums(Math.max,null,L.y),j=Math.max(J.c2p(U,!0),0),Q=Math.min(J.c2p(V,!0),Z),ne=Math.max(X.c2p(ee,!0),0),ae=Math.min(X.c2p(re,!0),se),ie={};le[0]<le[1]?(ie.left=j,ie.right=Q):(ie.left=Q,ie.right=j),oe[0]<oe[1]?(ie.top=ne,ie.bottom=ae):(ie.top=ae,ie.bottom=ne),ie.middle=(ie.top+ie.bottom)/2,ie.center=(ie.left+ie.right)/2,F.push([[ie.left,ie.top],[ie.right,ie.top],[ie.right,ie.bottom],[ie.left,ie.bottom]]);var ue=Math.sqrt(Z*Z+se*se),xe=u.LABELDISTANCE*ue/Math.max(1,_.length/u.LABELINCREASE);R.each(function(he){var ge=H.calcTextOpts(he.level,W,q,f);d.select(this).selectAll("path").each(function(){var me=this,ke=l.getVisibleSegment(me,ie,ge.height/2);if(!!ke&&!(ke.len<(ge.width+ge.height)*u.LABELMIN))for(var Ae=Math.min(Math.ceil(ke.len/xe),u.LABELMAX),Ne=0;Ne<Ae;Ne++){var He=H.findBestTextLocation(me,ke,ge,G,ie);if(!He)break;H.addLabelData(He,ge,G,F)}})}),q.remove(),H.drawLabels(O,G,f,D,I?F:null)}z&&!P&&R.remove()}H.createLines=function(T,_,f){var L=f[0].smoothing,S=T.selectAll("g.contourlevel").data(_?f:[]);if(S.exit().remove(),S.enter().append("g").classed("contourlevel",!0),_){var k=S.selectAll("path.openline").data(function(z){return z.pedgepaths||z.edgepaths});k.exit().remove(),k.enter().append("path").classed("openline",!0),k.attr("d",function(z){return b.smoothopen(z,L)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var P=S.selectAll("path.closedline").data(function(z){return z.ppaths||z.paths});P.exit().remove(),P.enter().append("path").classed("closedline",!0),P.attr("d",function(z){return b.smoothclosed(z,L)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return S},H.createLineClip=function(T,_,f,L){var S=f._fullLayout._clips,k=_?"clipline"+L:null,P=S.selectAll("#"+k).data(_?[0]:[]);return P.exit().remove(),P.enter().append("clipPath").classed("contourlineclip",!0).attr("id",k),b.setClipUrl(T,k,f),P},H.labelFormatter=function(T,_){var f=T._fullLayout,L=_.trace,S=L.contours,k={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(S.labelformat)k.tickformat=S.labelformat,a(k,f);else{var P=w.extractOpts(L);if(P&&P.colorbar&&P.colorbar._axis)k=P.colorbar._axis;else{if(S.type==="constraint"){var z=S.value;Array.isArray(z)?k.range=[z[0],z[z.length-1]]:k.range=[z,z]}else k.range=[S.start,S.end],k.nticks=(S.end-S.start)/S.size;k.range[0]===k.range[1]&&(k.range[1]+=k.range[0]||1),k.nticks||(k.nticks=1e3),a(k,f),o.prepTicks(k),k._tmin=null,k._tmax=null}}return function(I){return o.tickText(k,I).text}},H.calcTextOpts=function(T,_,f,L){var S=_(T);f.text(S).call(e.convertToTspans,L);var k=f.node(),P=b.bBox(k,!0);return{text:S,width:P.width,height:P.height,fontSize:+k.style["font-size"].replace("px",""),level:T,dy:(P.top+P.bottom)/2}},H.findBestTextLocation=function(T,_,f,L,S){var k=f.width,P,z,I,R,D;_.isClosed?(z=_.len/g.INITIALSEARCHPOINTS,P=_.min+z/2,I=_.max):(z=(_.len-k)/(g.INITIALSEARCHPOINTS+1),P=_.min+z+k/2,I=_.max-(z+k)/2);for(var O=1/0,F=0;F<g.ITERATIONS;F++){for(var G=P;G<I;G+=z){var W=l.getTextLocation(T,_.total,G,k),q=m(W,f,L,S);q<O&&(O=q,D=W,R=G)}if(O>g.MAXCOST*2)break;F&&(z/=2),P=R-z/2,I=P+z*1.5}if(O<=g.MAXCOST)return D};function m(T,_,f,L){var S=_.width/2,k=_.height/2,P=T.x,z=T.y,I=T.theta,R=Math.cos(I)*S,D=Math.sin(I)*S,O=(P>L.center?L.right-P:P-L.left)/(R+Math.abs(Math.sin(I)*k)),F=(z>L.middle?L.bottom-z:z-L.top)/(Math.abs(D)+Math.cos(I)*k);if(O<1||F<1)return 1/0;var G=g.EDGECOST*(1/(O-1)+1/(F-1));G+=g.ANGLECOST*I*I;for(var W=P-R,q=z-D,J=P+R,X=z+D,Z=0;Z<f.length;Z++){var se=f[Z],le=Math.cos(se.theta)*se.width/2,oe=Math.sin(se.theta)*se.width/2,U=l.segmentDistance(W,q,J,X,se.x-le,se.y-oe,se.x+le,se.y+oe)*2/(_.height+se.height),V=se.level===_.level,re=V?g.SAMELEVELDISTANCE:1;if(U<=re)return 1/0;var ee=g.NEIGHBORCOST*(V?g.SAMELEVELFACTOR:1);G+=ee/(U-re)}return G}H.addLabelData=function(T,_,f,L){var S=_.fontSize,k=_.width+S/3,P=Math.max(0,_.height-S/3),z=T.x,I=T.y,R=T.theta,D=Math.sin(R),O=Math.cos(R),F=function(W,q){return[z+W*O-q*D,I+W*D+q*O]},G=[F(-k/2,-P/2),F(-k/2,P/2),F(k/2,P/2),F(k/2,-P/2)];f.push({text:_.text,x:z,y:I,dy:_.dy,theta:R,level:_.level,width:k,height:P}),L.push(G)},H.drawLabels=function(T,_,f,L,S){var k=T.selectAll("text").data(_,function(R){return R.text+","+R.x+","+R.y+","+R.theta});if(k.exit().remove(),k.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(R){var D=R.x+Math.sin(R.theta)*R.dy,O=R.y-Math.cos(R.theta)*R.dy;d.select(this).text(R.text).attr({x:D,y:O,transform:"rotate("+180*R.theta/Math.PI+" "+D+" "+O+")"}).call(e.convertToTspans,f)}),S){for(var P="",z=0;z<S.length;z++)P+="M"+S[z].join("L")+"Z";var I=l.ensureSingle(L,"path","");I.attr("d",P)}};function M(T,_,f,L,S){var k=L.trace,P=f._fullLayout._clips,z="clip"+k.uid,I=P.selectAll("#"+z).data(k.connectgaps?[]:[0]);if(I.enter().append("clipPath").classed("contourclip",!0).attr("id",z),I.exit().remove(),k.connectgaps===!1){var R={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:_.xaxis,yaxis:_.yaxis,x:L.x,y:L.y,z:x(L),smoothing:0};n([R]),c([R]),v([R],{type:"levels"});var D=l.ensureSingle(I,"path","");D.attr("d",(R.prefixBoundary?"M"+S.join("L")+"Z":"")+p(R,S))}else z=null;b.setClipUrl(T,z,f)}function x(T){var _=T.trace._emptypoints,f=[],L=T.z.length,S=T.z[0].length,k,P=[],z;for(k=0;k<S;k++)P.push(1);for(k=0;k<L;k++)f.push(P.slice());for(k=0;k<_.length;k++)z=_[k],f[z[0]][z[1]]=0;return T.zmask=f,f}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/set_convert":576,"../heatmap/plot":804,"./close_boundaries":737,"./constants":739,"./convert_to_constraints":743,"./empty_pathinfo":745,"./find_all_paths":747,"./make_crossings":752,"@plotly/d3":58}],754:[function(t,B,H){var d=t("../../plots/cartesian/axes"),l=t("../../lib");B.exports=function(e,o){var a=e.contours;if(e.autocontour){var r=e.zmin,n=e.zmax;(e.zauto||r===void 0)&&(r=l.aggNums(Math.min,null,o)),(e.zauto||n===void 0)&&(n=l.aggNums(Math.max,null,o));var c=b(r,n,e.ncontours);a.size=c.dtick,a.start=d.tickFirst(c),c.range.reverse(),a.end=d.tickFirst(c),a.start===r&&(a.start+=a.size),a.end===n&&(a.end-=a.size),a.start>a.end&&(a.start=a.end=(a.start+a.end)/2),e._input.contours||(e._input.contours={}),l.extendFlat(e._input.contours,{start:a.start,end:a.end,size:a.size}),e._input.autocontour=!0}else if(a.type!=="constraint"){var s=a.start,i=a.end,v=e._input.contours;if(s>i&&(a.start=v.start=i,i=a.end=v.end=s,s=a.start),!(a.size>0)){var u;s===i?u=1:u=b(s,i,e.ncontours).dtick,v.size=a.size=u}}};function b(w,e,o){var a={type:"linear",range:[w,e]};return d.autoTicks(a,(e-w)/(o||15)),a}},{"../../lib":503,"../../plots/cartesian/axes":554}],755:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../components/drawing"),b=t("../heatmap/style"),w=t("./make_color_map");B.exports=function(o){var a=d.select(o).selectAll("g.contour");a.style("opacity",function(r){return r[0].trace.opacity}),a.each(function(r){var n=d.select(this),c=r[0].trace,s=c.contours,i=c.line,v=s.size||1,u=s.start,g=s.type==="constraint",h=!g&&s.coloring==="lines",y=!g&&s.coloring==="fill",p=h||y?w(c):null;n.selectAll("g.contourlevel").each(function(M){d.select(this).selectAll("path").call(l.lineGroupStyle,i.width,h?p(M.level):i.color,i.dash)});var A=s.labelfont;if(n.selectAll("g.contourlabels text").each(function(M){l.font(d.select(this),{family:A.family,size:A.size,color:A.color||(h?p(M.level):i.color)})}),g)n.selectAll("g.contourfill path").style("fill",c.fillcolor);else if(y){var m;n.selectAll("g.contourfill path").style("fill",function(M){return m===void 0&&(m=M.level),p(M.level+.5*v)}),m===void 0&&(m=u),n.selectAll("g.contourbg path").style("fill",p(m-.5*v))}}),b(o)}},{"../../components/drawing":388,"../heatmap/style":805,"./make_color_map":751,"@plotly/d3":58}],756:[function(t,B,H){var d=t("../../components/colorscale/defaults"),l=t("./label_defaults");B.exports=function(w,e,o,a,r){var n=o("contours.coloring"),c,s="";n==="fill"&&(c=o("contours.showlines")),c!==!1&&(n!=="lines"&&(s=o("line.color","#000")),o("line.width",.5),o("line.dash")),n!=="none"&&(w.showlegend!==!0&&(e.showlegend=!1),e._dfltShowLegend=!1,d(w,e,a,o,{prefix:"",cLetter:"z"})),o("line.smoothing"),l(o,a,s,r)}},{"../../components/colorscale/defaults":376,"./label_defaults":750}],757:[function(t,B,H){var d=t("../heatmap/attributes"),l=t("../contour/attributes"),b=t("../../components/colorscale/attributes"),w=t("../../lib/extend").extendFlat,e=l.contours;B.exports=w({carpet:{valType:"string",editType:"calc"},z:d.z,a:d.x,a0:d.x0,da:d.dx,b:d.y,b0:d.y0,db:d.dy,text:d.text,hovertext:d.hovertext,transpose:d.transpose,atype:d.xtype,btype:d.ytype,fillcolor:l.fillcolor,autocontour:l.autocontour,ncontours:l.ncontours,contours:{type:e.type,start:e.start,end:e.end,size:e.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:e.showlines,showlabels:e.showlabels,labelfont:e.labelfont,labelformat:e.labelformat,operation:e.operation,value:e.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:l.line.color,width:l.line.width,dash:l.line.dash,smoothing:l.line.smoothing,editType:"plot"},transforms:void 0},b("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../contour/attributes":735,"../heatmap/attributes":792}],758:[function(t,B,H){var d=t("../../components/colorscale/calc"),l=t("../../lib"),b=t("../heatmap/convert_column_xyz"),w=t("../heatmap/clean_2d_array"),e=t("../heatmap/interp2d"),o=t("../heatmap/find_empties"),a=t("../heatmap/make_bound_array"),r=t("./defaults"),n=t("../carpet/lookup_carpetid"),c=t("../contour/set_contours");B.exports=function(v,u){var g=u._carpetTrace=n(v,u);if(!(!g||!g.visible||g.visible==="legendonly")){if(!u.a||!u.b){var h=v.data[g.index],y=v.data[u.index];y.a||(y.a=h.a),y.b||(y.b=h.b),r(y,u,u._defaultColor,v._fullLayout)}var p=s(v,u);return c(u,u._z),p}};function s(i,v){var u=v._carpetTrace,g=u.aaxis,h=u.baxis,y,p,A,m,M,x,T;g._minDtick=0,h._minDtick=0,l.isArray1D(v.z)&&b(v,g,h,"a","b",["z"]),y=v._a=v._a||v.a,m=v._b=v._b||v.b,y=y?g.makeCalcdata(v,"_a"):[],m=m?h.makeCalcdata(v,"_b"):[],p=v.a0||0,A=v.da||1,M=v.b0||0,x=v.db||1,T=v._z=w(v._z||v.z,v.transpose),v._emptypoints=o(T),e(T,v._emptypoints);var _=l.maxRowLength(T),f=v.xtype==="scaled"?"":y,L=a(v,f,p,A,_,g),S=v.ytype==="scaled"?"":m,k=a(v,S,M,x,T.length,h),P={a:L,b:k,z:T};return v.contours.type==="levels"&&v.contours.coloring!=="none"&&d(i,v,{vals:T,containerStr:"",cLetter:"z"}),[P]}},{"../../components/colorscale/calc":374,"../../lib":503,"../carpet/lookup_carpetid":708,"../contour/set_contours":754,"../heatmap/clean_2d_array":794,"../heatmap/convert_column_xyz":796,"../heatmap/find_empties":798,"../heatmap/interp2d":801,"../heatmap/make_bound_array":803,"./defaults":759}],759:[function(t,B,H){var d=t("../../lib"),l=t("../heatmap/xyz_defaults"),b=t("./attributes"),w=t("../contour/constraint_defaults"),e=t("../contour/contours_defaults"),o=t("../contour/style_defaults");B.exports=function(r,n,c,s){function i(h,y){return d.coerce(r,n,b,h,y)}function v(h){return d.coerce2(r,n,b,h)}if(i("carpet"),r.a&&r.b){var u=l(r,n,i,s,"a","b");if(!u){n.visible=!1;return}i("text");var g=i("contours.type")==="constraint";g?w(r,n,i,s,c,{hasHover:!1}):(e(r,n,i,v),o(r,n,i,s,{hasHover:!1}))}else n._defaultColor=c,n._length=null}},{"../../lib":503,"../contour/constraint_defaults":740,"../contour/contours_defaults":742,"../contour/style_defaults":756,"../heatmap/xyz_defaults":807,"./attributes":757}],760:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../contour/colorbar"),calc:t("./calc"),plot:t("./plot"),style:t("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":568,"../contour/colorbar":738,"../contour/style":755,"./attributes":757,"./calc":758,"./defaults":759,"./plot":761}],761:[function(t,B,H){var d=t("@plotly/d3"),l=t("../carpet/map_1d_array"),b=t("../carpet/makepath"),w=t("../../components/drawing"),e=t("../../lib"),o=t("../contour/make_crossings"),a=t("../contour/find_all_paths"),r=t("../contour/plot"),n=t("../contour/constants"),c=t("../contour/convert_to_constraints"),s=t("../contour/empty_pathinfo"),i=t("../contour/close_boundaries"),v=t("../carpet/lookup_carpetid"),u=t("../carpet/axis_aligned_line");B.exports=function(f,L,S,k){var P=L.xaxis,z=L.yaxis;e.makeTraceGroups(k,S,"contour").each(function(I){var R=d.select(this),D=I[0],O=D.trace,F=O._carpetTrace=v(f,O),G=f.calcdata[F.index][0];if(!F.visible||F.visible==="legendonly")return;var W=D.a,q=D.b,J=O.contours,X=s(J,L,D),Z=J.type==="constraint",se=J._operation,le=Z?se==="="?"lines":"fill":J.coloring;function oe(xe){var he=F.ab2xy(xe[0],xe[1],!0);return[P.c2p(he[0]),z.c2p(he[1])]}var U=[[W[0],q[q.length-1]],[W[W.length-1],q[q.length-1]],[W[W.length-1],q[0]],[W[0],q[0]]];o(X);var V=(W[W.length-1]-W[0])*1e-8,re=(q[q.length-1]-q[0])*1e-8;a(X,V,re);var ee=X;J.type==="constraint"&&(ee=c(X,se)),g(X,oe);var j,Q,ne,ae,ie=[];for(ae=G.clipsegments.length-1;ae>=0;ae--)j=G.clipsegments[ae],Q=l([],j.x,P.c2p),ne=l([],j.y,z.c2p),Q.reverse(),ne.reverse(),ie.push(b(Q,ne,j.bicubic));var ue="M"+ie.join("L")+"Z";M(R,G.clipsegments,P,z,Z,le),x(O,R,P,z,ee,U,oe,F,G,le,ue),h(R,X,f,D,J,L,F),w.setClipUrl(R,F._clipPathId,f)})};function g(_,f){var L,S,k,P,z,I,R,D,O;for(L=0;L<_.length;L++){for(P=_[L],z=P.pedgepaths=[],I=P.ppaths=[],S=0;S<P.edgepaths.length;S++){for(O=P.edgepaths[S],R=[],k=0;k<O.length;k++)R[k]=f(O[k]);z.push(R)}for(S=0;S<P.paths.length;S++){for(O=P.paths[S],D=[],k=0;k<O.length;k++)D[k]=f(O[k]);I.push(D)}}}function h(_,f,L,S,k,P,z){var I=e.ensureSingle(_,"g","contourlines"),R=k.showlines!==!1,D=k.showlabels,O=R&&D,F=r.createLines(I,R||D,f),G=r.createLineClip(I,O,L,S.trace.uid),W=_.selectAll("g.contourlabels").data(D?[0]:[]);if(W.exit().remove(),W.enter().append("g").classed("contourlabels",!0),D){var q=P.xaxis,J=P.yaxis,X=q._length,Z=J._length,se=[[[0,0],[X,0],[X,Z],[0,Z]]],le=[];e.clearLocationCache();var oe=r.labelFormatter(L,S),U=w.tester.append("text").attr("data-notex",1).call(w.font,k.labelfont),V={left:0,right:X,center:X/2,top:0,bottom:Z,middle:Z/2},re=Math.sqrt(X*X+Z*Z),ee=n.LABELDISTANCE*re/Math.max(1,f.length/n.LABELINCREASE);F.each(function(j){var Q=r.calcTextOpts(j.level,oe,U,L);d.select(this).selectAll("path").each(function(ne){var ae=this,ie=e.getVisibleSegment(ae,V,Q.height/2);if(!!ie&&(y(ae,ne,j,ie,z,Q.height),!(ie.len<(Q.width+Q.height)*n.LABELMIN)))for(var ue=Math.min(Math.ceil(ie.len/ee),n.LABELMAX),xe=0;xe<ue;xe++){var he=r.findBestTextLocation(ae,ie,Q,le,V);if(!he)break;r.addLabelData(he,Q,le,se)}})}),U.remove(),r.drawLabels(W,le,L,G,O?se:null)}D&&!R&&F.remove()}function y(_,f,L,S,k,P){for(var z,I=0;I<L.pedgepaths.length;I++)f===L.pedgepaths[I]&&(z=L.edgepaths[I]);if(!z)return;var R=k.a[0],D=k.a[k.a.length-1],O=k.b[0],F=k.b[k.b.length-1];function G(Z,se){var le=0,oe,U=.1;return(Math.abs(Z[0]-R)<U||Math.abs(Z[0]-D)<U)&&(oe=A(k.dxydb_rough(Z[0],Z[1],U)),le=Math.max(le,P*m(se,oe)/2)),(Math.abs(Z[1]-O)<U||Math.abs(Z[1]-F)<U)&&(oe=A(k.dxyda_rough(Z[0],Z[1],U)),le=Math.max(le,P*m(se,oe)/2)),le}var W=p(_,0,1),q=p(_,S.total,S.total-1),J=G(z[0],W),X=S.total-G(z[z.length-1],q);S.min<J&&(S.min=J),S.max>X&&(S.max=X),S.len=S.max-S.min}function p(_,f,L){var S=_.getPointAtLength(f),k=_.getPointAtLength(L),P=k.x-S.x,z=k.y-S.y,I=Math.sqrt(P*P+z*z);return[P/I,z/I]}function A(_){var f=Math.sqrt(_[0]*_[0]+_[1]*_[1]);return[_[0]/f,_[1]/f]}function m(_,f){var L=Math.abs(_[0]*f[0]+_[1]*f[1]),S=Math.sqrt(1-L*L);return S/L}function M(_,f,L,S,k,P){var z,I,R,D,O=e.ensureSingle(_,"g","contourbg"),F=O.selectAll("path").data(P==="fill"&&!k?[0]:[]);F.enter().append("path"),F.exit().remove();var G=[];for(D=0;D<f.length;D++)z=f[D],I=l([],z.x,L.c2p),R=l([],z.y,S.c2p),G.push(b(I,R,z.bicubic));F.attr("d","M"+G.join("L")+"Z").style("stroke","none")}function x(_,f,L,S,k,P,z,I,R,D,O){var F=D==="fill";F&&i(k,_.contours);var G=e.ensureSingle(f,"g","contourfill"),W=G.selectAll("path").data(F?k:[]);W.enter().append("path"),W.exit().remove(),W.each(function(q){var J=(q.prefixBoundary?O:"")+T(_,q,P,z,I,R,L,S);J?d.select(this).attr("d",J).style("stroke","none"):d.select(this).remove()})}function T(_,f,L,S,k,P,z,I){var R,D="",O=f.edgepaths.map(function(ne,ae){return ae}),F=!0,G,W,q,J,X,Z,se=Math.abs(L[0][0]-L[2][0])*1e-4,le=Math.abs(L[0][1]-L[2][1])*1e-4;function oe(ne){return Math.abs(ne[1]-L[0][1])<le}function U(ne){return Math.abs(ne[1]-L[2][1])<le}function V(ne){return Math.abs(ne[0]-L[0][0])<se}function re(ne){return Math.abs(ne[0]-L[2][0])<se}function ee(ne,ae){var ie,ue,xe,he,ge="";for(oe(ne)&&!re(ne)||U(ne)&&!V(ne)?(he=k.aaxis,xe=u(k,P,[ne[0],ae[0]],.5*(ne[1]+ae[1]))):(he=k.baxis,xe=u(k,P,.5*(ne[0]+ae[0]),[ne[1],ae[1]])),ie=1;ie<xe.length;ie++)for(ge+=he.smoothing?"C":"L",ue=0;ue<xe[ie].length;ue++){var me=xe[ie][ue];ge+=[z.c2p(me[0]),I.c2p(me[1])]+" "}return ge}for(R=0,G=null;O.length;){var j=f.edgepaths[R][0];for(G&&(D+=ee(G,j)),Z=w.smoothopen(f.edgepaths[R].map(S),f.smoothing),D+=F?Z:Z.replace(/^M/,"L"),O.splice(O.indexOf(R),1),G=f.edgepaths[R][f.edgepaths[R].length-1],J=-1,q=0;q<4;q++){if(!G){e.log("Missing end?",R,f);break}for(oe(G)&&!re(G)?W=L[1]:V(G)?W=L[0]:U(G)?W=L[3]:re(G)&&(W=L[2]),X=0;X<f.edgepaths.length;X++){var Q=f.edgepaths[X][0];Math.abs(G[0]-W[0])<se?Math.abs(G[0]-Q[0])<se&&(Q[1]-G[1])*(W[1]-Q[1])>=0&&(W=Q,J=X):Math.abs(G[1]-W[1])<le?Math.abs(G[1]-Q[1])<le&&(Q[0]-G[0])*(W[0]-Q[0])>=0&&(W=Q,J=X):e.log("endpt to newendpt is not vert. or horz.",G,W,Q)}if(J>=0)break;D+=ee(G,W),G=W}if(J===f.edgepaths.length){e.log("unclosed perimeter path");break}R=J,F=O.indexOf(R)===-1,F&&(R=O[0],D+=ee(G,W)+"Z",G=null)}for(R=0;R<f.paths.length;R++)D+=w.smoothclosed(f.paths[R].map(S),f.smoothing);return D}},{"../../components/drawing":388,"../../lib":503,"../carpet/axis_aligned_line":692,"../carpet/lookup_carpetid":708,"../carpet/makepath":709,"../carpet/map_1d_array":710,"../contour/close_boundaries":737,"../contour/constants":739,"../contour/convert_to_constraints":743,"../contour/empty_pathinfo":745,"../contour/find_all_paths":747,"../contour/make_crossings":752,"../contour/plot":753,"@plotly/d3":58}],762:[function(t,B,H){var d=t("../../components/colorscale/attributes"),l=t("../../plots/template_attributes").hovertemplateAttrs,b=t("../../plots/attributes"),w=t("../scattermapbox/attributes"),e=t("../../lib/extend").extendFlat;B.exports=e({lon:w.lon,lat:w.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:w.text,hovertext:w.hovertext,hoverinfo:e({},b.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:l(),showlegend:e({},b.showlegend,{dflt:!1})},d("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scattermapbox/attributes":991}],763:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../lib").isArrayOrTypedArray,b=t("../../constants/numerical").BADNUM,w=t("../../components/colorscale/calc"),e=t("../../lib")._;B.exports=function(a,r){for(var n=r._length,c=new Array(n),s=r.z,i=l(s)&&s.length,v=0;v<n;v++){var u=c[v]={},g=r.lon[v],h=r.lat[v];if(u.lonlat=d(g)&&d(h)?[+g,+h]:[b,b],i){var y=s[v];u.z=d(y)?y:b}}return w(a,r,{vals:i?s:[0,1],containerStr:"",cLetter:"z"}),n&&(c[0].t={labels:{lat:e(a,"lat:")+" ",lon:e(a,"lon:")+" "}}),c}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],764:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../lib"),b=t("../../components/color"),w=t("../../components/colorscale"),e=t("../../constants/numerical").BADNUM,o=t("../../lib/geojson_utils").makeBlank;B.exports=function(r){var n=r[0].trace,c=n.visible===!0&&n._length!==0,s={layout:{visibility:"none"},paint:{}},i=n._opts={heatmap:s,geojson:o()};if(!c)return i;var v=[],u,g=n.z,h=n.radius,y=l.isArrayOrTypedArray(g)&&g.length,p=l.isArrayOrTypedArray(h);for(u=0;u<r.length;u++){var A=r[u],m=A.lonlat;if(m[0]!==e){var M={};if(y){var x=A.z;M.z=x!==e?x:0}p&&(M.r=d(h[u])&&h[u]>0?+h[u]:0),v.push({type:"Feature",geometry:{type:"Point",coordinates:m},properties:M})}}var T=w.extractOpts(n),_=T.reversescale?w.flipScale(T.colorscale):T.colorscale,f=_[0][1],L=b.opacity(f)<1?f:b.addOpacity(f,0),S=["interpolate",["linear"],["heatmap-density"],0,L];for(u=1;u<_.length;u++)S.push(_[u][0],_[u][1]);var k=["interpolate",["linear"],["get","z"],T.min,0,T.max,1];return l.extendFlat(i.heatmap.paint,{"heatmap-weight":y?k:1/(T.max-T.min),"heatmap-color":S,"heatmap-radius":p?{type:"identity",property:"r"}:n.radius,"heatmap-opacity":n.opacity}),i.geojson={type:"FeatureCollection",features:v},i.heatmap.layout.visibility="visible",i}},{"../../components/color":366,"../../components/colorscale":378,"../../constants/numerical":479,"../../lib":503,"../../lib/geojson_utils":497,"fast-isnumeric":190}],765:[function(t,B,H){var d=t("../../lib"),l=t("../../components/colorscale/defaults"),b=t("./attributes");B.exports=function(e,o,a,r){function n(v,u){return d.coerce(e,o,b,v,u)}var c=n("lon")||[],s=n("lat")||[],i=Math.min(c.length,s.length);if(!i){o.visible=!1;return}o._length=i,n("z"),n("radius"),n("below"),n("text"),n("hovertext"),n("hovertemplate"),l(e,o,r,n,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":762}],766:[function(t,B,H){B.exports=function(l,b){return l.lon=b.lon,l.lat=b.lat,l.z=b.z,l}},{}],767:[function(t,B,H){var d=t("../../plots/cartesian/axes"),l=t("../scattermapbox/hover").hoverPoints,b=t("../scattermapbox/hover").getExtraText;B.exports=function(e,o,a){var r=l(e,o,a);if(!!r){var n=r[0],c=n.cd,s=c[0].trace,i=c[n.index];if(delete n.color,"z"in i){var v=n.subplot.mockAxis;n.z=i.z,n.zLabel=d.tickText(v,v.c2l(i.z),"hover").text}return n.extraText=b(s,i,c[0].t.labels),[n]}}},{"../../plots/cartesian/axes":554,"../scattermapbox/hover":996}],768:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../heatmap/colorbar"),formatLabels:t("../scattermapbox/format_labels"),calc:t("./calc"),plot:t("./plot"),hoverPoints:t("./hover"),eventData:t("./event_data"),getBelow:function(d,l){for(var b=l.getMapLayers(),w=0;w<b.length;w++){var e=b[w],o=e.id;if(e.type==="symbol"&&typeof o=="string"&&o.indexOf("plotly-")===-1)return o}},moduleType:"trace",name:"densitymapbox",basePlotModule:t("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":613,"../heatmap/colorbar":795,"../scattermapbox/format_labels":995,"./attributes":762,"./calc":763,"./defaults":765,"./event_data":766,"./hover":767,"./plot":769}],769:[function(t,B,H){var d=t("./convert"),l=t("../../plots/mapbox/constants").traceLayerPrefix;function b(e,o){this.type="densitymapbox",this.subplot=e,this.uid=o,this.sourceId="source-"+o,this.layerList=[["heatmap",l+o+"-heatmap"]],this.below=null}var w=b.prototype;w.update=function(e){var o=this.subplot,a=this.layerList,r=d(e),n=o.belowLookup["trace-"+this.uid];o.map.getSource(this.sourceId).setData(r.geojson),n!==this.below&&(this._removeLayers(),this._addLayers(r,n),this.below=n);for(var c=0;c<a.length;c++){var s=a[c],i=s[0],v=s[1],u=r[i];o.setOptions(v,"setLayoutProperty",u.layout),u.layout.visibility==="visible"&&o.setOptions(v,"setPaintProperty",u.paint)}},w._addLayers=function(e,o){for(var a=this.subplot,r=this.layerList,n=this.sourceId,c=0;c<r.length;c++){var s=r[c],i=s[0],v=e[i];a.addLayer({type:i,id:s[1],source:n,layout:v.layout,paint:v.paint},o)}},w._removeLayers=function(){for(var e=this.subplot.map,o=this.layerList,a=o.length-1;a>=0;a--)e.removeLayer(o[a][1])},w.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)},B.exports=function(o,a){var r=a[0].trace,n=new b(o,r.uid),c=n.sourceId,s=d(a),i=n.below=o.belowLookup["trace-"+r.uid];return o.map.addSource(c,{type:"geojson",data:s.geojson}),n._addLayers(s,i),n}},{"../../plots/mapbox/constants":611,"./convert":764}],770:[function(t,B,H){var d=t("../../lib");B.exports=function(b,w){for(var e=0;e<b.length;e++)b[e].i=e;d.mergeArray(w.text,b,"tx"),d.mergeArray(w.hovertext,b,"htx");var o=w.marker;if(o){d.mergeArray(o.opacity,b,"mo"),d.mergeArray(o.color,b,"mc");var a=o.line;a&&(d.mergeArray(a.color,b,"mlc"),d.mergeArrayCastPositive(a.width,b,"mlw"))}}},{"../../lib":503}],771:[function(t,B,H){var d=t("../bar/attributes"),l=t("../scatter/attributes").line,b=t("../../plots/attributes"),w=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=t("../../plots/template_attributes").hovertemplateAttrs,o=t("../../plots/template_attributes").texttemplateAttrs,a=t("./constants"),r=t("../../lib/extend").extendFlat,n=t("../../components/color");B.exports={x:d.x,x0:d.x0,dx:d.dx,y:d.y,y0:d.y0,dy:d.dy,xperiod:d.xperiod,yperiod:d.yperiod,xperiod0:d.xperiod0,yperiod0:d.yperiod0,xperiodalignment:d.xperiodalignment,yperiodalignment:d.yperiodalignment,xhoverformat:w("x"),yhoverformat:w("y"),hovertext:d.hovertext,hovertemplate:e({},{keys:a.eventDataKeys}),hoverinfo:r({},b.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:o({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),text:d.text,textposition:d.textposition,insidetextanchor:r({},d.insidetextanchor,{dflt:"middle"}),textangle:r({},d.textangle,{dflt:0}),textfont:d.textfont,insidetextfont:d.insidetextfont,outsidetextfont:d.outsidetextfont,constraintext:d.constraintext,cliponaxis:d.cliponaxis,orientation:r({},d.orientation,{}),offset:r({},d.offset,{arrayOk:!1}),width:r({},d.width,{arrayOk:!1}),marker:c(),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:r({},l.color,{dflt:n.defaultLine}),width:r({},l.width,{dflt:0,editType:"plot"}),dash:l.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:d.offsetgroup,alignmentgroup:d.alignmentgroup};function c(){var s=r({},d.marker);return delete s.pattern,s}},{"../../components/color":366,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":926,"./constants":773}],772:[function(t,B,H){var d=t("../../plots/cartesian/axes"),l=t("../../plots/cartesian/align_period"),b=t("./arrays_to_calcdata"),w=t("../scatter/calc_selection"),e=t("../../constants/numerical").BADNUM;B.exports=function(r,n){var c=d.getFromId(r,n.xaxis||"x"),s=d.getFromId(r,n.yaxis||"y"),i,v,u,g,h,y,p,A;n.orientation==="h"?(i=c.makeCalcdata(n,"x"),u=s.makeCalcdata(n,"y"),g=l(n,s,"y",u),h=!!n.yperiodalignment,y="y"):(i=s.makeCalcdata(n,"y"),u=c.makeCalcdata(n,"x"),g=l(n,c,"x",u),h=!!n.xperiodalignment,y="x"),v=g.vals;var m=Math.min(v.length,i.length),M=new Array(m);for(n._base=[],p=0;p<m;p++){i[p]<0&&(i[p]=e);var x=!1;i[p]!==e&&p+1<m&&i[p+1]!==e&&(x=!0),A=M[p]={p:v[p],s:i[p],cNext:x},n._base[p]=-.5*A.s,h&&(M[p].orig_p=u[p],M[p][y+"End"]=g.ends[p],M[p][y+"Start"]=g.starts[p]),n.ids&&(A.id=String(n.ids[p])),p===0&&(M[0].vTotal=0),M[0].vTotal+=o(A.s),A.begR=o(A.s)/o(M[0].s)}var T;for(p=0;p<m;p++)A=M[p],A.s!==e&&(A.sumR=A.s/M[0].vTotal,A.difR=T!==void 0?A.s/T:1,T=A.s);return b(M,n),w(M,n),M};function o(a){return a===e?0:a}},{"../../constants/numerical":479,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":928,"./arrays_to_calcdata":770}],773:[function(t,B,H){B.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],774:[function(t,B,H){var d=t("../bar/cross_trace_calc").setGroupPositions;B.exports=function(b,w){var e=b._fullLayout,o=b._fullData,a=b.calcdata,r=w.xaxis,n=w.yaxis,c=[],s=[],i=[],v,u;for(u=0;u<o.length;u++){var g=o[u],h=g.orientation==="h";g.visible===!0&&g.xaxis===r._id&&g.yaxis===n._id&&g.type==="funnel"&&(v=a[u],h?i.push(v):s.push(v),c.push(v))}var y={mode:e.funnelmode,norm:e.funnelnorm,gap:e.funnelgap,groupgap:e.funnelgroupgap};for(d(b,r,n,s,y),d(b,n,r,i,y),u=0;u<c.length;u++){v=c[u];for(var p=0;p<v.length;p++)p+1<v.length&&(v[p].nextP0=v[p+1].p0,v[p].nextS0=v[p+1].s0,v[p].nextP1=v[p+1].p1,v[p].nextS1=v[p+1].s1)}}},{"../bar/cross_trace_calc":651}],775:[function(t,B,H){var d=t("../../lib"),l=t("../bar/defaults").handleGroupingDefaults,b=t("../bar/defaults").handleText,w=t("../scatter/xy_defaults"),e=t("../scatter/period_defaults"),o=t("./attributes"),a=t("../../components/color");function r(s,i,v,u){function g(x,T){return d.coerce(s,i,o,x,T)}var h=w(s,i,u,g);if(!h){i.visible=!1;return}e(s,i,u,g),g("xhoverformat"),g("yhoverformat"),g("orientation",i.y&&!i.x?"v":"h"),g("offset"),g("width");var y=g("text");g("hovertext"),g("hovertemplate");var p=g("textposition");b(s,i,u,g,p,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),i.textposition!=="none"&&!i.texttemplate&&g("textinfo",Array.isArray(y)?"text+value":"value");var A=g("marker.color",v);g("marker.line.color",a.defaultLine),g("marker.line.width");var m=g("connector.visible");if(m){g("connector.fillcolor",n(A));var M=g("connector.line.width");M&&(g("connector.line.color"),g("connector.line.dash"))}}function n(s){var i=d.isArrayOrTypedArray(s)?"#000":s;return a.addOpacity(i,.5*a.opacity(i))}function c(s,i){var v,u;function g(y){return d.coerce(u._input,u,o,y)}if(i.funnelmode==="group")for(var h=0;h<s.length;h++)u=s[h],v=u._input,l(v,u,i,g)}B.exports={supplyDefaults:r,crossTraceDefaults:c}},{"../../components/color":366,"../../lib":503,"../bar/defaults":652,"../scatter/period_defaults":946,"../scatter/xy_defaults":953,"./attributes":771}],776:[function(t,B,H){B.exports=function(l,b){return l.x="xVal"in b?b.xVal:b.x,l.y="yVal"in b?b.yVal:b.y,"percentInitial"in b&&(l.percentInitial=b.percentInitial),"percentPrevious"in b&&(l.percentPrevious=b.percentPrevious),"percentTotal"in b&&(l.percentTotal=b.percentTotal),b.xa&&(l.xaxis=b.xa),b.ya&&(l.yaxis=b.ya),l}},{}],777:[function(t,B,H){var d=t("../../components/color").opacity,l=t("../bar/hover").hoverOnBars,b=t("../../lib").formatPercent;B.exports=function(o,a,r,n,c){var s=l(o,a,r,n,c);if(!!s){var i=s.cd,v=i[0].trace,u=v.orientation==="h",g=s.index,h=i[g],y=u?"x":"y";s[y+"LabelVal"]=h.s,s.percentInitial=h.begR,s.percentInitialLabel=b(h.begR,1),s.percentPrevious=h.difR,s.percentPreviousLabel=b(h.difR,1),s.percentTotal=h.sumR,s.percentTotalLabel=b(h.sumR,1);var p=h.hi||v.hoverinfo,A=[];if(p&&p!=="none"&&p!=="skip"){var m=p==="all",M=p.split("+"),x=function(T){return m||M.indexOf(T)!==-1};x("percent initial")&&A.push(s.percentInitialLabel+" of initial"),x("percent previous")&&A.push(s.percentPreviousLabel+" of previous"),x("percent total")&&A.push(s.percentTotalLabel+" of total")}return s.extraText=A.join("<br>"),s.color=w(v,h),[s]}};function w(e,o){var a=e.marker,r=o.mc||a.color,n=o.mlc||a.line.color,c=o.mlw||a.line.width;if(d(r))return r;if(d(n)&&c)return n}},{"../../components/color":366,"../../lib":503,"../bar/hover":655}],778:[function(t,B,H){B.exports={attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults").supplyDefaults,crossTraceDefaults:t("./defaults").crossTraceDefaults,supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),crossTraceCalc:t("./cross_trace_calc"),plot:t("./plot"),style:t("./style").style,hoverPoints:t("./hover"),eventData:t("./event_data"),selectPoints:t("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:t("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../bar/select":660,"./attributes":771,"./calc":772,"./cross_trace_calc":774,"./defaults":775,"./event_data":776,"./hover":777,"./layout_attributes":779,"./layout_defaults":780,"./plot":781,"./style":782}],779:[function(t,B,H){B.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],780:[function(t,B,H){var d=t("../../lib"),l=t("./layout_attributes");B.exports=function(b,w,e){var o=!1;function a(c,s){return d.coerce(b,w,l,c,s)}for(var r=0;r<e.length;r++){var n=e[r];if(n.visible&&n.type==="funnel"){o=!0;break}}o&&(a("funnelmode"),a("funnelgap",.2),a("funnelgroupgap"))}},{"../../lib":503,"./layout_attributes":779}],781:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib"),b=t("../../components/drawing"),w=t("../../constants/numerical").BADNUM,e=t("../bar/plot"),o=t("../bar/uniform_text").clearMinTextSize;B.exports=function(s,i,v,u){var g=s._fullLayout;o("funnel",g),a(s,i,v,u),r(s,i,v,u),e.plot(s,i,v,u,{mode:g.funnelmode,norm:g.funnelmode,gap:g.funnelgap,groupgap:g.funnelgroupgap})};function a(c,s,i,v){var u=s.xaxis,g=s.yaxis;l.makeTraceGroups(v,i,"trace bars").each(function(h){var y=d.select(this),p=h[0].trace,A=l.ensureSingle(y,"g","regions");if(!p.connector||!p.connector.visible){A.remove();return}var m=p.orientation==="h",M=A.selectAll("g.region").data(l.identity);M.enter().append("g").classed("region",!0),M.exit().remove();var x=M.size();M.each(function(T,_){if(!(_!==x-1&&!T.cNext)){var f=n(T,u,g,m),L=f[0],S=f[1],k="";L[0]!==w&&S[0]!==w&&L[1]!==w&&S[1]!==w&&L[2]!==w&&S[2]!==w&&L[3]!==w&&S[3]!==w&&(m?k+="M"+L[0]+","+S[1]+"L"+L[2]+","+S[2]+"H"+L[3]+"L"+L[1]+","+S[1]+"Z":k+="M"+L[1]+","+S[1]+"L"+L[2]+","+S[3]+"V"+S[2]+"L"+L[1]+","+S[0]+"Z"),k===""&&(k="M0,0Z"),l.ensureSingle(d.select(this),"path").attr("d",k).call(b.setClipUrl,s.layerClipId,c)}})})}function r(c,s,i,v){var u=s.xaxis,g=s.yaxis;l.makeTraceGroups(v,i,"trace bars").each(function(h){var y=d.select(this),p=h[0].trace,A=l.ensureSingle(y,"g","lines");if(!p.connector||!p.connector.visible||!p.connector.line.width){A.remove();return}var m=p.orientation==="h",M=A.selectAll("g.line").data(l.identity);M.enter().append("g").classed("line",!0),M.exit().remove();var x=M.size();M.each(function(T,_){if(!(_!==x-1&&!T.cNext)){var f=n(T,u,g,m),L=f[0],S=f[1],k="";L[3]!==void 0&&S[3]!==void 0&&(m?(k+="M"+L[0]+","+S[1]+"L"+L[2]+","+S[2],k+="M"+L[1]+","+S[1]+"L"+L[3]+","+S[2]):(k+="M"+L[1]+","+S[1]+"L"+L[2]+","+S[3],k+="M"+L[1]+","+S[0]+"L"+L[2]+","+S[2])),k===""&&(k="M0,0Z"),l.ensureSingle(d.select(this),"path").attr("d",k).call(b.setClipUrl,s.layerClipId,c)}})})}function n(c,s,i,v){var u=[],g=[],h=v?s:i,y=v?i:s;return u[0]=h.c2p(c.s0,!0),g[0]=y.c2p(c.p0,!0),u[1]=h.c2p(c.s1,!0),g[1]=y.c2p(c.p1,!0),u[2]=h.c2p(c.nextS0,!0),g[2]=y.c2p(c.nextP0,!0),u[3]=h.c2p(c.nextS1,!0),g[3]=y.c2p(c.nextP1,!0),v?[u,g]:[g,u]}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../bar/plot":659,"../bar/uniform_text":664,"@plotly/d3":58}],782:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../components/drawing"),b=t("../../components/color"),w=t("../../constants/interactions").DESELECTDIM,e=t("../bar/style"),o=t("../bar/uniform_text").resizeText,a=e.styleTextPoints;function r(n,c,s){var i=s||d.select(n).selectAll("g.funnellayer").selectAll("g.trace");o(n,i,"funnel"),i.style("opacity",function(v){return v[0].trace.opacity}),i.each(function(v){var u=d.select(this),g=v[0].trace;u.selectAll(".point > path").each(function(h){if(!h.isBlank){var y=g.marker;d.select(this).call(b.fill,h.mc||y.color).call(b.stroke,h.mlc||y.line.color).call(l.dashLine,y.line.dash,h.mlw||y.line.width).style("opacity",g.selectedpoints&&!h.selected?w:1)}}),a(u,g,n),u.selectAll(".regions").each(function(){d.select(this).selectAll("path").style("stroke-width",0).call(b.fill,g.connector.fillcolor)}),u.selectAll(".lines").each(function(){var h=g.connector.line;l.lineGroupStyle(d.select(this).selectAll("path"),h.width,h.color,h.dash)})})}B.exports={style:r}},{"../../components/color":366,"../../components/drawing":388,"../../constants/interactions":478,"../bar/style":662,"../bar/uniform_text":664,"@plotly/d3":58}],783:[function(t,B,H){var d=t("../pie/attributes"),l=t("../../plots/attributes"),b=t("../../plots/domain").attributes,w=t("../../plots/template_attributes").hovertemplateAttrs,e=t("../../plots/template_attributes").texttemplateAttrs,o=t("../../lib/extend").extendFlat;B.exports={labels:d.labels,label0:d.label0,dlabel:d.dlabel,values:d.values,marker:{colors:d.marker.colors,line:{color:o({},d.marker.line.color,{dflt:null}),width:o({},d.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:d.text,hovertext:d.hovertext,scalegroup:o({},d.scalegroup,{}),textinfo:o({},d.textinfo,{flags:["label","text","value","percent"]}),texttemplate:e({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:o({},l.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:w({},{keys:["label","color","value","text","percent"]}),textposition:o({},d.textposition,{values:["inside","none"],dflt:"inside"}),textfont:d.textfont,insidetextfont:d.insidetextfont,title:{text:d.title.text,font:d.title.font,position:o({},d.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:b({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":900}],784:[function(t,B,H){var d=t("../../plots/plots");H.name="funnelarea",H.plot=function(l,b,w,e){d.plotBasePlot(H.name,l,b,w,e)},H.clean=function(l,b,w,e){d.cleanBasePlot(H.name,l,b,w,e)}},{"../../plots/plots":619}],785:[function(t,B,H){var d=t("../pie/calc");function l(w,e){return d.calc(w,e)}function b(w){d.crossTraceCalc(w,{type:"funnelarea"})}B.exports={calc:l,crossTraceCalc:b}},{"../pie/calc":902}],786:[function(t,B,H){var d=t("../../lib"),l=t("./attributes"),b=t("../../plots/domain").defaults,w=t("../bar/defaults").handleText,e=t("../pie/defaults").handleLabelsAndValues;B.exports=function(a,r,n,c){function s(x,T){return d.coerce(a,r,l,x,T)}var i=s("labels"),v=s("values"),u=e(i,v),g=u.len;if(r._hasLabels=u.hasLabels,r._hasValues=u.hasValues,!r._hasLabels&&r._hasValues&&(s("label0"),s("dlabel")),!g){r.visible=!1;return}r._length=g;var h=s("marker.line.width");h&&s("marker.line.color",c.paper_bgcolor),s("marker.colors"),s("scalegroup");var y=s("text"),p=s("texttemplate"),A;if(p||(A=s("textinfo",Array.isArray(y)?"text+percent":"percent")),s("hovertext"),s("hovertemplate"),p||A&&A!=="none"){var m=s("textposition");w(a,r,c,s,m,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}b(r,c,s);var M=s("title.text");M&&(s("title.position"),d.coerceFont(s,"title.font",c.font)),s("aspectratio"),s("baseratio")}},{"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"../pie/defaults":903,"./attributes":783}],787:[function(t,B,H){B.exports={moduleType:"trace",name:"funnelarea",basePlotModule:t("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./calc").crossTraceCalc,plot:t("./plot"),style:t("./style"),styleOne:t("../pie/style_one"),meta:{}}},{"../pie/style_one":911,"./attributes":783,"./base_plot":784,"./calc":785,"./defaults":786,"./layout_attributes":788,"./layout_defaults":789,"./plot":790,"./style":791}],788:[function(t,B,H){var d=t("../pie/layout_attributes").hiddenlabels;B.exports={hiddenlabels:d,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":907}],789:[function(t,B,H){var d=t("../../lib"),l=t("./layout_attributes");B.exports=function(w,e){function o(a,r){return d.coerce(w,e,l,a,r)}o("hiddenlabels"),o("funnelareacolorway",e.colorway),o("extendfunnelareacolors")}},{"../../lib":503,"./layout_attributes":788}],790:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../components/drawing"),b=t("../../lib"),w=b.strScale,e=b.strTranslate,o=t("../../lib/svg_text_utils"),a=t("../bar/plot"),r=a.toMoveInsideBar,n=t("../bar/uniform_text"),c=n.recordMinTextSize,s=n.clearMinTextSize,i=t("../pie/helpers"),v=t("../pie/plot"),u=v.attachFxHandlers,g=v.determineInsideTextFont,h=v.layoutAreas,y=v.prerenderTitles,p=v.positionTitleOutside,A=v.formatSliceLabel;B.exports=function(_,f){var L=_._fullLayout;s("funnelarea",L),y(f,_),h(f,L._size),b.makeTraceGroups(L._funnelarealayer,f,"trace").each(function(S){var k=d.select(this),P=S[0],z=P.trace;x(S),k.each(function(){var I=d.select(this).selectAll("g.slice").data(S);I.enter().append("g").classed("slice",!0),I.exit().remove(),I.each(function(D,O){if(D.hidden){d.select(this).selectAll("path,g").remove();return}D.pointNumber=D.i,D.curveNumber=z.index;var F=P.cx,G=P.cy,W=d.select(this),q=W.selectAll("path.surface").data([D]);q.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),W.call(u,_,S);var J="M"+(F+D.TR[0])+","+(G+D.TR[1])+m(D.TR,D.BR)+m(D.BR,D.BL)+m(D.BL,D.TL)+"Z";q.attr("d",J),A(_,D,P);var X=i.castOption(z.textposition,D.pts),Z=W.selectAll("g.slicetext").data(D.text&&X!=="none"?[0]:[]);Z.enter().append("g").classed("slicetext",!0),Z.exit().remove(),Z.each(function(){var se=b.ensureSingle(d.select(this),"text","",function(Q){Q.attr("data-notex",1)}),le=b.ensureUniformFontSize(_,g(z,D,L.font));se.text(D.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(l.font,le).call(o.convertToTspans,_);var oe=l.bBox(se.node()),U,V,re,ee=Math.min(D.BL[1],D.BR[1])+G,j=Math.max(D.TL[1],D.TR[1])+G;V=Math.max(D.TL[0],D.BL[0])+F,re=Math.min(D.TR[0],D.BR[0])+F,U=r(V,re,ee,j,oe,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"}),U.fontSize=le.size,c(z.type,U,L),S[O].transform=U,se.attr("transform",b.getTextTransform(U))})});var R=d.select(this).selectAll("g.titletext").data(z.title.text?[0]:[]);R.enter().append("g").classed("titletext",!0),R.exit().remove(),R.each(function(){var D=b.ensureSingle(d.select(this),"text","",function(G){G.attr("data-notex",1)}),O=z.title.text;z._meta&&(O=b.templateString(O,z._meta)),D.text(O).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(l.font,z.title.font).call(o.convertToTspans,_);var F=p(P,L._size);D.attr("transform",e(F.x,F.y)+w(Math.min(1,F.scale))+e(F.tx,F.ty))})})})};function m(T,_){var f=_[0]-T[0],L=_[1]-T[1];return"l"+f+","+L}function M(T,_){return[.5*(T[0]+_[0]),.5*(T[1]+_[1])]}function x(T){if(!T.length)return;var _=T[0],f=_.trace,L=f.aspectratio,S=f.baseratio;S>.999&&(S=.999);var k=Math.pow(S,2),P=_.vTotal,z=P*k/(1-k),I=P,R=z/P;function D(){var ae=Math.sqrt(R);return{x:ae,y:-ae}}function O(){var ae=D();return[ae.x,ae.y]}var F,G=[];G.push(O());var W,q;for(W=T.length-1;W>-1;W--)if(q=T[W],!q.hidden){var J=q.v/I;R+=J,G.push(O())}var X=1/0,Z=-1/0;for(W=0;W<G.length;W++)F=G[W],X=Math.min(X,F[1]),Z=Math.max(Z,F[1]);for(W=0;W<G.length;W++)G[W][1]-=(Z+X)/2;var se=G[G.length-1][0],le=_.r,oe=(Z-X)/2,U=le/se,V=le/oe*L;for(_.r=V*oe,W=0;W<G.length;W++)G[W][0]*=U,G[W][1]*=V;F=G[0];var re=[-F[0],F[1]],ee=[F[0],F[1]],j=0;for(W=T.length-1;W>-1;W--)if(q=T[W],!q.hidden){j+=1;var Q=G[j][0],ne=G[j][1];q.TL=[-Q,ne],q.TR=[Q,ne],q.BL=re,q.BR=ee,q.pxmid=M(q.TR,q.BR),re=q.TL,ee=q.TR}}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../bar/plot":659,"../bar/uniform_text":664,"../pie/helpers":905,"../pie/plot":909,"@plotly/d3":58}],791:[function(t,B,H){var d=t("@plotly/d3"),l=t("../pie/style_one"),b=t("../bar/uniform_text").resizeText;B.exports=function(e){var o=e._fullLayout._funnelarealayer.selectAll(".trace");b(e,o,"funnelarea"),o.each(function(a){var r=a[0],n=r.trace,c=d.select(this);c.style({opacity:n.opacity}),c.selectAll("path.surface").each(function(s){d.select(this).call(l,s,n)})})}},{"../bar/uniform_text":664,"../pie/style_one":911,"@plotly/d3":58}],792:[function(t,B,H){var d=t("../scatter/attributes"),l=t("../../plots/attributes"),b=t("../../plots/font_attributes"),w=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=t("../../plots/template_attributes").hovertemplateAttrs,o=t("../../plots/template_attributes").texttemplateAttrs,a=t("../../components/colorscale/attributes"),r=t("../../lib/extend").extendFlat;B.exports=r({z:{valType:"data_array",editType:"calc"},x:r({},d.x,{impliedEdits:{xtype:"array"}}),x0:r({},d.x0,{impliedEdits:{xtype:"scaled"}}),dx:r({},d.dx,{impliedEdits:{xtype:"scaled"}}),y:r({},d.y,{impliedEdits:{ytype:"array"}}),y0:r({},d.y0,{impliedEdits:{ytype:"scaled"}}),dy:r({},d.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:r({},d.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:r({},d.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:r({},d.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:r({},d.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:r({},d.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:r({},d.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:w("x"),yhoverformat:w("y"),zhoverformat:w("z",1),hovertemplate:e(),texttemplate:o({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:b({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:r({},l.showlegend,{dflt:!1})},{transforms:void 0},a("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../scatter/attributes":926}],793:[function(t,B,H){var d=t("../../registry"),l=t("../../lib"),b=t("../../plots/cartesian/axes"),w=t("../../plots/cartesian/align_period"),e=t("../histogram2d/calc"),o=t("../../components/colorscale/calc"),a=t("./convert_column_xyz"),r=t("./clean_2d_array"),n=t("./interp2d"),c=t("./find_empties"),s=t("./make_bound_array"),i=t("../../constants/numerical").BADNUM;B.exports=function(h,y){var p=b.getFromId(h,y.xaxis||"x"),A=b.getFromId(h,y.yaxis||"y"),m=d.traceIs(y,"contour"),M=d.traceIs(y,"histogram"),x=d.traceIs(y,"gl2d"),T=m?"best":y.zsmooth,_,f,L,S,k,P,z,I,R,D,O;if(p._minDtick=0,A._minDtick=0,M)O=e(h,y),S=O.orig_x,_=O.x,f=O.x0,L=O.dx,I=O.orig_y,k=O.y,P=O.y0,z=O.dy,R=O.z;else{var F=y.z;l.isArray1D(F)?(a(y,p,A,"x","y",["z"]),_=y._x,k=y._y,F=y._z):(S=y.x?p.makeCalcdata(y,"x"):[],I=y.y?A.makeCalcdata(y,"y"):[],_=w(y,p,"x",S).vals,k=w(y,A,"y",I).vals,y._x=_,y._y=k),f=y.x0,L=y.dx,P=y.y0,z=y.dy,R=r(F,y,p,A)}(p.rangebreaks||A.rangebreaks)&&(R=u(_,k,R),M||(_=v(_),k=v(k),y._x=_,y._y=k)),!M&&(m||y.connectgaps)&&(y._emptypoints=c(R),n(R,y._emptypoints));function G(ee){T=y._input.zsmooth=y.zsmooth=!1,l.warn('cannot use zsmooth: "fast": '+ee)}if(T==="fast"){if(p.type==="log"||A.type==="log")G("log axis found");else if(!M){if(_.length){var W=(_[_.length-1]-_[0])/(_.length-1),q=Math.abs(W/100);for(D=0;D<_.length-1;D++)if(Math.abs(_[D+1]-_[D]-W)>q){G("x scale is not linear");break}}if(k.length&&T==="fast"){var J=(k[k.length-1]-k[0])/(k.length-1),X=Math.abs(J/100);for(D=0;D<k.length-1;D++)if(Math.abs(k[D+1]-k[D]-J)>X){G("y scale is not linear");break}}}}var Z=l.maxRowLength(R),se=y.xtype==="scaled"?"":_,le=s(y,se,f,L,Z,p),oe=y.ytype==="scaled"?"":k,U=s(y,oe,P,z,R.length,A);x||(y._extremes[p._id]=b.findExtremes(p,le),y._extremes[A._id]=b.findExtremes(A,U));var V={x:le,y:U,z:R,text:y._text||y.text,hovertext:y._hovertext||y.hovertext};if(y.xperiodalignment&&S&&(V.orig_x=S),y.yperiodalignment&&I&&(V.orig_y=I),se&&se.length===le.length-1&&(V.xCenter=se),oe&&oe.length===U.length-1&&(V.yCenter=oe),M&&(V.xRanges=O.xRanges,V.yRanges=O.yRanges,V.pts=O.pts),m||o(h,y,{vals:R,cLetter:"z"}),m&&y.contours&&y.contours.coloring==="heatmap"){var re={type:y.type==="contour"?"heatmap":"histogram2d",xcalendar:y.xcalendar,ycalendar:y.ycalendar};V.xfill=s(re,se,f,L,Z,p),V.yfill=s(re,oe,P,z,R.length,A)}return[V]};function v(g){for(var h=[],y=g.length,p=0;p<y;p++){var A=g[p];A!==i&&h.push(A)}return h}function u(g,h,y){for(var p=[],A=-1,m=0;m<y.length;m++)if(h[m]!==i){A++,p[A]=[];for(var M=0;M<y[m].length;M++)g[M]!==i&&p[A].push(y[m][M])}return p}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../../registry":638,"../histogram2d/calc":826,"./clean_2d_array":794,"./convert_column_xyz":796,"./find_empties":798,"./interp2d":801,"./make_bound_array":803}],794:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../lib"),b=t("../../constants/numerical").BADNUM;B.exports=function(e,o,a,r){var n,c,s,i,v,u;function g(M){if(!!d(M))return+M}if(o&&o.transpose){for(n=0,v=0;v<e.length;v++)n=Math.max(n,e[v].length);if(n===0)return!1;s=function(M){return M.length},i=function(M,x,T){return(M[T]||[])[x]}}else n=e.length,s=function(M,x){return M[x].length},i=function(M,x,T){return(M[x]||[])[T]};var h=function(M,x,T){return x===b||T===b?b:i(M,x,T)};function y(M){if(o&&o.type!=="carpet"&&o.type!=="contourcarpet"&&M&&M.type==="category"&&o["_"+M._id.charAt(0)].length){var x=M._id.charAt(0),T={},_=o["_"+x+"CategoryMap"]||o[x];for(v=0;v<_.length;v++)T[_[v]]=v;return function(f){var L=T[M._categories[f]];return L+1?L:b}}else return l.identity}var p=y(a),A=y(r);r&&r.type==="category"&&(n=r._categories.length);var m=new Array(n);for(v=0;v<n;v++)for(a&&a.type==="category"?c=a._categories.length:c=s(e,v),m[v]=new Array(c),u=0;u<c;u++)m[v][u]=g(h(e,A(v),p(u)));return m}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],795:[function(t,B,H){B.exports={min:"zmin",max:"zmax"}},{}],796:[function(t,B,H){var d=t("../../lib"),l=t("../../constants/numerical").BADNUM,b=t("../../plots/cartesian/align_period");B.exports=function(e,o,a,r,n,c){var s=e._length,i=o.makeCalcdata(e,r),v=a.makeCalcdata(e,n);i=b(e,o,r,i).vals,v=b(e,a,n,v).vals;var u=e.text,g=u!==void 0&&d.isArray1D(u),h=e.hovertext,y=h!==void 0&&d.isArray1D(h),p,A,m=d.distinctVals(i),M=m.vals,x=d.distinctVals(v),T=x.vals,_=[],f,L,S=T.length,k=M.length;for(p=0;p<c.length;p++)_[p]=d.init2dArray(S,k);g&&(f=d.init2dArray(S,k)),y&&(L=d.init2dArray(S,k));var P=d.init2dArray(S,k);for(p=0;p<s;p++)if(i[p]!==l&&v[p]!==l){var z=d.findBin(i[p]+m.minDiff/2,M),I=d.findBin(v[p]+x.minDiff/2,T);for(A=0;A<c.length;A++){var R=c[A],D=e[R],O=_[A];O[I][z]=D[p],P[I][z]=p}g&&(f[I][z]=u[p]),y&&(L[I][z]=h[p])}for(e["_"+r]=M,e["_"+n]=T,A=0;A<c.length;A++)e["_"+c[A]]=_[A];g&&(e._text=f),y&&(e._hovertext=L),o&&o.type==="category"&&(e["_"+r+"CategoryMap"]=M.map(function(F){return o._categories[F]})),a&&a.type==="category"&&(e["_"+n+"CategoryMap"]=T.map(function(F){return a._categories[F]})),e._after2before=P}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551}],797:[function(t,B,H){var d=t("../../lib"),l=t("./xyz_defaults"),b=t("./label_defaults"),w=t("../scatter/period_defaults"),e=t("./style_defaults"),o=t("../../components/colorscale/defaults"),a=t("./attributes");B.exports=function(n,c,s,i){function v(g,h){return d.coerce(n,c,a,g,h)}var u=l(n,c,v,i);if(!u){c.visible=!1;return}w(n,c,i,v),v("xhoverformat"),v("yhoverformat"),v("text"),v("hovertext"),v("hovertemplate"),b(v,i),e(n,c,v,i),v("hoverongaps"),v("connectgaps",d.isArray1D(c.z)&&c.zsmooth!==!1),o(n,c,i,v,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":376,"../../lib":503,"../scatter/period_defaults":946,"./attributes":792,"./label_defaults":802,"./style_defaults":806,"./xyz_defaults":807}],798:[function(t,B,H){var d=t("../../lib").maxRowLength;B.exports=function(b){var w=[],e={},o=[],a=b[0],r=[],n=[0,0,0],c=d(b),s,i,v,u,g,h,y,p;for(i=0;i<b.length;i++)for(s=r,r=a,a=b[i+1]||[],v=0;v<c;v++)r[v]===void 0&&(h=(r[v-1]!==void 0?1:0)+(r[v+1]!==void 0?1:0)+(s[v]!==void 0?1:0)+(a[v]!==void 0?1:0),h?(i===0&&h++,v===0&&h++,i===b.length-1&&h++,v===r.length-1&&h++,h<4&&(e[[i,v]]=[i,v,h]),w.push([i,v,h])):o.push([i,v]));for(;o.length;){for(y={},p=!1,g=o.length-1;g>=0;g--)u=o[g],i=u[0],v=u[1],h=((e[[i-1,v]]||n)[2]+(e[[i+1,v]]||n)[2]+(e[[i,v-1]]||n)[2]+(e[[i,v+1]]||n)[2])/20,h&&(y[u]=[i,v,h],o.splice(g,1),p=!0);if(!p)throw"findEmpties iterated with no new neighbors";for(u in y)e[u]=y[u],w.push(y[u])}return w.sort(function(A,m){return m[2]-A[2]})}},{"../../lib":503}],799:[function(t,B,H){var d=t("../../components/fx"),l=t("../../lib"),b=t("../../plots/cartesian/axes"),w=t("../../components/colorscale").extractOpts;B.exports=function(o,a,r,n,c){c||(c={});var s=c.isContour,i=o.cd[0],v=i.trace,u=o.xa,g=o.ya,h=i.x,y=i.y,p=i.z,A=i.xCenter,m=i.yCenter,M=i.zmask,x=v.zhoverformat,T=h,_=y,f,L,S,k;if(o.index!==!1){try{S=Math.round(o.index[1]),k=Math.round(o.index[0])}catch{l.error("Error hovering on heatmap, pointNumber must be [row,col], found:",o.index);return}if(S<0||S>=p[0].length||k<0||k>p.length)return}else{if(d.inbox(a-h[0],a-h[h.length-1],0)>0||d.inbox(r-y[0],r-y[y.length-1],0)>0)return;if(s){var P;for(T=[2*h[0]-h[1]],P=1;P<h.length;P++)T.push((h[P]+h[P-1])/2);for(T.push([2*h[h.length-1]-h[h.length-2]]),_=[2*y[0]-y[1]],P=1;P<y.length;P++)_.push((y[P]+y[P-1])/2);_.push([2*y[y.length-1]-y[y.length-2]])}S=Math.max(0,Math.min(T.length-2,l.findBin(a,T))),k=Math.max(0,Math.min(_.length-2,l.findBin(r,_)))}var z=u.c2p(h[S]),I=u.c2p(h[S+1]),R=g.c2p(y[k]),D=g.c2p(y[k+1]),O,F;s?(O=i.orig_x||h,F=i.orig_y||y,I=z,f=O[S],D=R,L=F[k]):(O=i.orig_x||A||h,F=i.orig_y||m||y,f=A?O[S]:(O[S]+O[S+1])/2,L=m?F[k]:(F[k]+F[k+1])/2,u&&u.type==="category"&&(f=h[S]),g&&g.type==="category"&&(L=y[k]),v.zsmooth&&(z=I=u.c2p(f),R=D=g.c2p(L)));var G=p[k][S];if(M&&!M[k][S]&&(G=void 0),!(G===void 0&&!v.hoverongaps)){var W;Array.isArray(i.hovertext)&&Array.isArray(i.hovertext[k])?W=i.hovertext[k][S]:Array.isArray(i.text)&&Array.isArray(i.text[k])&&(W=i.text[k][S]);var q=w(v),J={type:"linear",range:[q.min,q.max],hoverformat:x,_separators:u._separators,_numFormat:u._numFormat},X=b.tickText(J,G,"hover").text;return[l.extendFlat(o,{index:v._after2before?v._after2before[k][S]:[k,S],distance:o.maxHoverDistance,spikeDistance:o.maxSpikeDistance,x0:z,x1:I,y0:R,y1:D,xLabelVal:f,yLabelVal:L,zLabelVal:G,zLabel:X,text:W})]}}},{"../../components/colorscale":378,"../../components/fx":406,"../../lib":503,"../../plots/cartesian/axes":554}],800:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot"),colorbar:t("./colorbar"),style:t("./style"),hoverPoints:t("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":568,"./attributes":792,"./calc":793,"./colorbar":795,"./defaults":797,"./hover":799,"./plot":804,"./style":805}],801:[function(t,B,H){var d=t("../../lib"),l=.01,b=[[-1,0],[1,0],[0,-1],[0,1]];function w(o){return .5-.25*Math.min(1,o*.5)}B.exports=function(a,r){var n=1,c;for(e(a,r),c=0;c<r.length&&!(r[c][2]<4);c++);for(r=r.slice(c),c=0;c<100&&n>l;c++)n=e(a,r,w(n));return n>l&&d.log("interp2d didn't converge quickly",n),a};function e(o,a,r){var n=0,c,s,i,v,u,g,h,y,p,A,m,M,x;for(v=0;v<a.length;v++){for(c=a[v],s=c[0],i=c[1],m=o[s][i],A=0,p=0,u=0;u<4;u++)g=b[u],h=o[s+g[0]],h&&(y=h[i+g[1]],y!==void 0&&(A===0?M=x=y:(M=Math.min(M,y),x=Math.max(x,y)),p++,A+=y));if(p===0)throw"iterateInterp2d order is wrong: no defined neighbors";o[s][i]=A/p,m===void 0?p<4&&(n=1):(o[s][i]=(1+r)*o[s][i]-r*m,x>M&&(n=Math.max(n,Math.abs(o[s][i]-m)/(x-M))))}return n}},{"../../lib":503}],802:[function(t,B,H){var d=t("../../lib");B.exports=function(b,w){b("texttemplate");var e=d.extendFlat({},w.font,{color:"auto",size:"auto"});d.coerceFont(b,"textfont",e)}},{"../../lib":503}],803:[function(t,B,H){var d=t("../../registry"),l=t("../../lib").isArrayOrTypedArray;B.exports=function(w,e,o,a,r,n){var c=[],s=d.traceIs(w,"contour"),i=d.traceIs(w,"histogram"),v=d.traceIs(w,"gl2d"),u,g,h,y=l(e)&&e.length>1;if(y&&!i&&n.type!=="category"){var p=e.length;if(p<=r){if(s||v)c=e.slice(0,r);else if(r===1)c=[e[0]-.5,e[0]+.5];else{for(c=[1.5*e[0]-.5*e[1]],h=1;h<p;h++)c.push((e[h-1]+e[h])*.5);c.push(1.5*e[p-1]-.5*e[p-2])}if(p<r){var A=c[c.length-1],m=A-c[c.length-2];for(h=p;h<r;h++)A+=m,c.push(A)}}else return s?e.slice(0,r):e.slice(0,r+1)}else{var M=w[n._id.charAt(0)+"calendar"];if(i)u=n.r2c(o,0,M);else if(l(e)&&e.length===1)u=e[0];else if(o===void 0)u=0;else{var x=n.type==="log"?n.d2c:n.r2c;u=x(o,0,M)}for(g=a||1,h=s||v?0:-.5;h<r;h++)c.push(u+g*h)}return c}},{"../../lib":503,"../../registry":638}],804:[function(t,B,H){var d=t("@plotly/d3"),l=t("tinycolor2"),b=t("../../registry"),w=t("../../components/drawing"),e=t("../../plots/cartesian/axes"),o=t("../../lib"),a=t("../../lib/svg_text_utils"),r=t("../scatter/format_labels"),n=t("../../components/color"),c=t("../../components/colorscale").extractOpts,s=t("../../components/colorscale").makeColorScaleFuncFromTrace,i=t("../../constants/xmlns_namespaces"),v=t("../../constants/alignment"),u=v.LINE_SPACING,g="heatmap-label";function h(M){return M.selectAll("g."+g)}function y(M){h(M).remove()}B.exports=function(M,x,T,_){var f=x.xaxis,L=x.yaxis;o.makeTraceGroups(_,T,"hm").each(function(S){var k=d.select(this),P=S[0],z=P.trace,I=z.xgap||0,R=z.ygap||0,D=P.z,O=P.x,F=P.y,G=P.xCenter,W=P.yCenter,q=b.traceIs(z,"contour"),J=q?"best":z.zsmooth,X=D.length,Z=o.maxRowLength(D),se=!1,le=!1,oe,U,V,re,ee,j,Q,ne;for(j=0;oe===void 0&&j<O.length-1;)oe=f.c2p(O[j]),j++;for(j=O.length-1;U===void 0&&j>0;)U=f.c2p(O[j]),j--;for(U<oe&&(V=U,U=oe,oe=V,se=!0),j=0;re===void 0&&j<F.length-1;)re=L.c2p(F[j]),j++;for(j=F.length-1;ee===void 0&&j>0;)ee=L.c2p(F[j]),j--;if(ee<re&&(V=re,re=ee,ee=V,le=!0),q&&(G=O,W=F,O=P.xfill,F=P.yfill),J!=="fast"){var ae=J==="best"?0:.5;oe=Math.max(-ae*f._length,oe),U=Math.min((1+ae)*f._length,U),re=Math.max(-ae*L._length,re),ee=Math.min((1+ae)*L._length,ee)}var ie=Math.round(U-oe),ue=Math.round(ee-re),xe=ie<=0||ue<=0;if(xe){var he=k.selectAll("image").data([]);he.exit().remove(),y(k);return}var ge,me;J==="fast"?(ge=Z,me=X):(ge=ie,me=ue);var ke=document.createElement("canvas");ke.width=ge,ke.height=me;var Ae=ke.getContext("2d"),Ne=s(z,{noNumericCheck:!0,returnArray:!0}),He,Ge;J==="fast"?(He=se?function(Er){return Z-1-Er}:o.identity,Ge=le?function(Er){return X-1-Er}:o.identity):(He=function(Er){return o.constrain(Math.round(f.c2p(O[Er])-oe),0,ie)},Ge=function(Er){return o.constrain(Math.round(L.c2p(F[Er])-re),0,ue)});var _e=Ge(0),De=[_e,_e],Ye=se?0:1,qe=le?0:1,Ue=0,Ie=0,Ve=0,dt=0,Dt,Yt,kt,Ft,Nt;function Lt(Er,xr){if(Er!==void 0){var Wr=Ne(Er);return Wr[0]=Math.round(Wr[0]),Wr[1]=Math.round(Wr[1]),Wr[2]=Math.round(Wr[2]),Ue+=xr,Ie+=Wr[0]*xr,Ve+=Wr[1]*xr,dt+=Wr[2]*xr,Wr}return[0,0,0,0]}function St(Er,xr,Wr,Rn){var En=Er[Wr.bin0];if(En===void 0)return Lt(void 0,1);var ea=Er[Wr.bin1],ia=xr[Wr.bin0],Aa=xr[Wr.bin1],ya=ea-En||0,pr=ia-En||0,vn;return ea===void 0?Aa===void 0?vn=0:ia===void 0?vn=2*(Aa-En):vn=(2*Aa-ia-En)*2/3:Aa===void 0?ia===void 0?vn=0:vn=(2*En-ea-ia)*2/3:ia===void 0?vn=(2*Aa-ea-En)*2/3:vn=Aa+En-ea-ia,Lt(En+Wr.frac*ya+Rn.frac*(pr+Wr.frac*vn))}if(J){var it=0,ht;try{ht=new Uint8Array(ie*ue*4)}catch{ht=new Array(ie*ue*4)}if(J==="best"){var Qe=G||O,Ce=W||F,je=new Array(Qe.length),rt=new Array(Ce.length),ut=new Array(ie),Pt=G?A:p,Tt=W?A:p,Ot,Kt,Bt;for(j=0;j<Qe.length;j++)je[j]=Math.round(f.c2p(Qe[j])-oe);for(j=0;j<Ce.length;j++)rt[j]=Math.round(L.c2p(Ce[j])-re);for(j=0;j<ie;j++)ut[j]=Pt(j,je);for(Q=0;Q<ue;Q++)for(Ot=Tt(Q,rt),Kt=D[Ot.bin0],Bt=D[Ot.bin1],j=0;j<ie;j++,it+=4)Nt=St(Kt,Bt,ut[j],Ot),m(ht,it,Nt)}else for(Q=0;Q<X;Q++)for(Ft=D[Q],De=Ge(Q),j=0;j<ie;j++)Nt=Lt(Ft[j],1),it=(De*ie+He(j))*4,m(ht,it,Nt);var Zt=Ae.createImageData(ie,ue);try{Zt.data.set(ht)}catch{var Je=Zt.data,pt=Je.length;for(Q=0;Q<pt;Q++)Je[Q]=ht[Q]}Ae.putImageData(Zt,0,0)}else{var Et=Math.floor(I/2),ar=Math.floor(R/2);for(Q=0;Q<X;Q++)if(Ft=D[Q],De.reverse(),De[qe]=Ge(Q+1),!(De[0]===De[1]||De[0]===void 0||De[1]===void 0))for(Yt=He(0),Dt=[Yt,Yt],j=0;j<Z;j++)Dt.reverse(),Dt[Ye]=He(j+1),!(Dt[0]===Dt[1]||Dt[0]===void 0||Dt[1]===void 0)&&(kt=Ft[j],Nt=Lt(kt,(Dt[1]-Dt[0])*(De[1]-De[0])),Ae.fillStyle="rgba("+Nt.join(",")+")",Ae.fillRect(Dt[0]+Et,De[0]+ar,Dt[1]-Dt[0]-I,De[1]-De[0]-R))}Ie=Math.round(Ie/Ue),Ve=Math.round(Ve/Ue),dt=Math.round(dt/Ue);var vr=l("rgb("+Ie+","+Ve+","+dt+")");M._hmpixcount=(M._hmpixcount||0)+Ue,M._hmlumcount=(M._hmlumcount||0)+Ue*vr.getLuminance();var ir=k.selectAll("image").data(S);ir.enter().append("svg:image").attr({xmlns:i.svg,preserveAspectRatio:"none"}),ir.attr({height:ue,width:ie,x:oe,y:re,"xlink:href":ke.toDataURL("image/png")}),y(k);var dr=z.texttemplate;if(dr){var Pr=c(z),Sr={type:"linear",range:[Pr.min,Pr.max],_separators:f._separators,_numFormat:f._numFormat},tr=z.type==="histogram2dcontour",Nr=z.type==="contour",et=Nr?1:0,we=Nr?X-1:X,Me=Nr?1:0,Re=Nr?Z-1:Z,Xe=[];for(j=et;j<we;j++){var $e;if(Nr)$e=P.y[j];else if(tr){if(j===0||j===X-1)continue;$e=P.y[j]}else if(P.yCenter)$e=P.yCenter[j];else{if(j+1===X&&P.y[j+1]===void 0)continue;$e=(P.y[j]+P.y[j+1])/2}var ot=Math.round(L.c2p($e));if(!(0>ot||ot>L._length))for(Q=Me;Q<Re;Q++){var st;if(Nr)st=P.x[Q];else if(tr){if(Q===0||Q===Z-1)continue;st=P.x[Q]}else if(P.xCenter)st=P.xCenter[Q];else{if(Q+1===Z&&P.x[Q+1]===void 0)continue;st=(P.x[Q]+P.x[Q+1])/2}var yt=Math.round(f.c2p(st));if(!(0>yt||yt>f._length)){var wt=r({x:st,y:$e},z,M._fullLayout);wt.x=st,wt.y=$e;var Vt=P.z[j][Q];Vt===void 0?(wt.z="",wt.zLabel=""):(wt.z=Vt,wt.zLabel=e.tickText(Sr,Vt,"hover").text);var gr=P.text&&P.text[j]&&P.text[j][Q];(gr===void 0||gr===!1)&&(gr=""),wt.text=gr;var wr=o.texttemplateString(dr,wt,M._fullLayout._d3locale,wt,z._meta||{});if(!!wr){var Lr=wr.split("<br>"),fr=Lr.length,Fr=0;for(ne=0;ne<fr;ne++)Fr=Math.max(Fr,Lr[ne].length);Xe.push({l:fr,c:Fr,t:wr,x:yt,y:ot,z:Vt})}}}}var nn=z.textfont,yr=nn.family,_r=nn.size,dn=M._fullLayout.font.size;if(!_r||_r==="auto"){var Yr=1/0,Ar=1/0,an=0,rn=0;for(ne=0;ne<Xe.length;ne++){var Zr=Xe[ne];if(an=Math.max(an,Zr.l),rn=Math.max(rn,Zr.c),ne<Xe.length-1){var at=Xe[ne+1],zt=Math.abs(at.x-Zr.x),er=Math.abs(at.y-Zr.y);zt&&(Yr=Math.min(Yr,zt)),er&&(Ar=Math.min(Ar,er))}}!isFinite(Yr)||!isFinite(Ar)?_r=dn:(Yr-=I,Ar-=R,Yr/=rn,Ar/=an,Yr/=u/2,Ar/=u,_r=Math.min(Math.floor(Yr),Math.floor(Ar),dn))}if(_r<=0||!isFinite(_r))return;var hr=function(Er){return Er.x},Vr=function(Er){return Er.y-_r*(Er.l*u/2-1)},Rr=h(k).data(Xe);Rr.enter().append("g").classed(g,1).append("text").attr("text-anchor","middle").each(function(Er){var xr=d.select(this),Wr=nn.color;(!Wr||Wr==="auto")&&(Wr=n.contrast("rgba("+Ne(Er.z).join()+")")),xr.attr("data-notex",1).call(a.positionText,hr(Er),Vr(Er)).call(w.font,yr,_r,Wr).text(Er.t).call(a.convertToTspans,M)})}})};function p(M,x){var T=x.length-2,_=o.constrain(o.findBin(M,x),0,T),f=x[_],L=x[_+1],S=o.constrain(_+(M-f)/(L-f)-.5,0,T),k=Math.round(S),P=Math.abs(S-k);return!S||S===T||!P?{bin0:k,bin1:k,frac:0}:{bin0:k,frac:P,bin1:Math.round(k+P/(S-k))}}function A(M,x){var T=x.length-1,_=o.constrain(o.findBin(M,x),0,T),f=x[_],L=x[_+1],S=(M-f)/(L-f)||0;return S<=0?{bin0:_,bin1:_,frac:0}:S<.5?{bin0:_,bin1:_+1,frac:S}:{bin0:_+1,bin1:_,frac:1-S}}function m(M,x,T){M[x]=T[0],M[x+1]=T[1],M[x+2]=T[2],M[x+3]=Math.round(T[3]*255)}},{"../../components/color":366,"../../components/colorscale":378,"../../components/drawing":388,"../../constants/alignment":471,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"../scatter/format_labels":935,"@plotly/d3":58,tinycolor2:312}],805:[function(t,B,H){var d=t("@plotly/d3");B.exports=function(b){d.select(b).selectAll(".hm image").style("opacity",function(w){return w.trace.opacity})}},{"@plotly/d3":58}],806:[function(t,B,H){B.exports=function(l,b,w){var e=w("zsmooth");e===!1&&(w("xgap"),w("ygap")),w("zhoverformat")}},{}],807:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../lib"),b=t("../../registry");B.exports=function(a,r,n,c,s,i){var v=n("z");s=s||"x",i=i||"y";var u,g;if(v===void 0||!v.length)return 0;if(l.isArray1D(a.z)){u=n(s),g=n(i);var h=l.minRowLength(u),y=l.minRowLength(g);if(h===0||y===0)return 0;r._length=Math.min(h,y,v.length)}else{if(u=w(s,n),g=w(i,n),!e(v))return 0;n("transpose"),r._length=null}if(a.type==="heatmapgl")return!0;var p=b.getComponentMethod("calendars","handleTraceDefaults");return p(a,r,[s,i],c),!0};function w(o,a){var r=a(o),n=r?a(o+"type","array"):"scaled";return n==="scaled"&&(a(o+"0"),a("d"+o)),r}function e(o){for(var a=!0,r=!1,n=!1,c,s=0;s<o.length;s++){if(c=o[s],!l.isArrayOrTypedArray(c)){a=!1;break}c.length>0&&(r=!0);for(var i=0;i<c.length;i++)if(d(c[i])){n=!0;break}}return a&&r&&n}},{"../../lib":503,"../../registry":638,"fast-isnumeric":190}],808:[function(t,B,H){for(var d=t("../heatmap/attributes"),l=t("../../components/colorscale/attributes"),b=t("../../lib/extend").extendFlat,w=t("../../plot_api/edit_types").overrideAll,e=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],o={},a=0;a<e.length;a++){var r=e[a];o[r]=d[r]}o.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},b(o,l("",{cLetter:"z",autoColorDflt:!1})),B.exports=w(o,"calc","nested")},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../heatmap/attributes":792}],809:[function(t,B,H){var d=t("../../../stackgl_modules").gl_heatmap2d,l=t("../../plots/cartesian/axes"),b=t("../../lib/str2rgbarray");function w(r,n){this.scene=r,this.uid=n,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=d(r.glplot,this.options),this.heatmap._trace=this}var e=w.prototype;e.handlePick=function(r){var n=this.options,c=n.shape,s=r.pointId,i=s%c[0],v=Math.floor(s/c[0]),u=s;return{trace:this,dataCoord:r.dataCoord,traceCoord:[n.x[i],n.y[v],n.z[u]],textLabel:this.textLabels[s],name:this.name,pointIndex:[v,i],hoverinfo:this.hoverinfo}},e.update=function(r,n){var c=n[0];this.index=r.index,this.name=r.name,this.hoverinfo=r.hoverinfo;var s=c.z;this.options.z=[].concat.apply([],s);var i=s[0].length,v=s.length;this.options.shape=[i,v],this.options.x=c.x,this.options.y=c.y,this.options.zsmooth=r.zsmooth;var u=o(r);this.options.colorLevels=u.colorLevels,this.options.colorValues=u.colorValues,this.textLabels=[].concat.apply([],r.text),this.heatmap.update(this.options);var g=this.scene.xaxis,h=this.scene.yaxis,y,p;r.zsmooth===!1&&(y={ppad:c.x[1]-c.x[0]},p={ppad:c.y[1]-c.y[0]}),r._extremes[g._id]=l.findExtremes(g,c.x,y),r._extremes[h._id]=l.findExtremes(h,c.y,p)},e.dispose=function(){this.heatmap.dispose()};function o(r){for(var n=r.colorscale,c=r.zmin,s=r.zmax,i=n.length,v=new Array(i),u=new Array(4*i),g=0;g<i;g++){var h=n[g],y=b(h[1]);v[g]=c+h[0]*(s-c);for(var p=0;p<4;p++)u[4*g+p]=y[p]}return{colorLevels:v,colorValues:u}}function a(r,n,c){var s=new w(r,n.uid);return s.update(n,c),s}B.exports=a},{"../../../stackgl_modules":1120,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554}],810:[function(t,B,H){var d=t("../../lib"),l=t("../heatmap/xyz_defaults"),b=t("../../components/colorscale/defaults"),w=t("./attributes");B.exports=function(o,a,r,n){function c(i,v){return d.coerce(o,a,w,i,v)}var s=l(o,a,c,n);if(!s){a.visible=!1;return}c("text"),c("zsmooth"),b(o,a,n,c,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":376,"../../lib":503,"../heatmap/xyz_defaults":807,"./attributes":808}],811:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../heatmap/colorbar"),calc:t("../heatmap/calc"),plot:t("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:t("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":596,"../heatmap/calc":793,"../heatmap/colorbar":795,"./attributes":808,"./convert":809,"./defaults":810}],812:[function(t,B,H){var d=t("../bar/attributes"),l=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=t("../../plots/template_attributes").hovertemplateAttrs,w=t("../../plots/template_attributes").texttemplateAttrs,e=t("../../plots/font_attributes"),o=t("./bin_attributes"),a=t("./constants"),r=t("../../lib/extend").extendFlat;B.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:l("x"),yhoverformat:l("y"),text:r({},d.text,{}),hovertext:r({},d.hovertext,{}),orientation:d.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:o("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:o("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:b({},{keys:a.eventDataKeys}),texttemplate:w({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:r({},d.textposition,{arrayOk:!1}),textfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:d.insidetextanchor,textangle:d.textangle,cliponaxis:d.cliponaxis,constraintext:d.constraintext,marker:d.marker,offsetgroup:d.offsetgroup,alignmentgroup:d.alignmentgroup,selected:d.selected,unselected:d.unselected,_deprecated:{bardir:d._deprecated.bardir}}},{"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../bar/attributes":648,"./bin_attributes":814,"./constants":818}],813:[function(t,B,H){B.exports=function(l,b){for(var w=l.length,e=0,o=0;o<w;o++)b[o]?(l[o]/=b[o],e+=l[o]):l[o]=null;return e}},{}],814:[function(t,B,H){B.exports=function(l,b){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],815:[function(t,B,H){var d=t("fast-isnumeric");B.exports={count:function(l,b,w){return w[l]++,1},sum:function(l,b,w,e){var o=e[b];return d(o)?(o=Number(o),w[l]+=o,o):0},avg:function(l,b,w,e,o){var a=e[b];return d(a)&&(a=Number(a),w[l]+=a,o[l]++),0},min:function(l,b,w,e){var o=e[b];if(d(o))if(o=Number(o),d(w[l])){if(w[l]>o){var a=o-w[l];return w[l]=o,a}}else return w[l]=o,o;return 0},max:function(l,b,w,e){var o=e[b];if(d(o))if(o=Number(o),d(w[l])){if(w[l]<o){var a=o-w[l];return w[l]=o,a}}else return w[l]=o,o;return 0}}},{"fast-isnumeric":190}],816:[function(t,B,H){var d=t("../../constants/numerical"),l=d.ONEAVGYEAR,b=d.ONEAVGMONTH,w=d.ONEDAY,e=d.ONEHOUR,o=d.ONEMIN,a=d.ONESEC,r=t("../../plots/cartesian/axes").tickIncrement;B.exports=function(u,g,h,y,p){var A=-1.1*g,m=-.1*g,M=u-m,x=h[0],T=h[1],_=Math.min(n(x+m,x+M,y,p),n(T+m,T+M,y,p)),f=Math.min(n(x+A,x+m,y,p),n(T+A,T+m,y,p)),L,S;if(_>f&&f<Math.abs(T-x)/4e3?(L=_,S=!1):(L=Math.min(_,f),S=!0),y.type==="date"&&L>w){var k=L===l?1:6,P=L===l?"M12":"M1";return function(z,I){var R=y.c2d(z,l,p),D=R.indexOf("-",k);D>0&&(R=R.substr(0,D));var O=y.d2c(R,0,p);if(O<z){var F=r(O,P,!1,p);(O+F)/2<z+u&&(O=F)}return I&&S?r(O,P,!0,p):O}}return function(z,I){var R=L*Math.round(z/L);return R+L/10<z&&R+L*.9<z+u&&(R+=L),I&&S&&(R-=L),R}};function n(v,u,g,h){if(v*u<=0)return 1/0;for(var y=Math.abs(u-v),p=g.type==="date",A=c(y,p),m=0;m<10;m++){var M=c(A*80,p);if(A===M)break;if(s(M,v,u,p,g,h))A=M;else break}return A}function c(v,u){return u&&v>a?v>w?v>l*1.1?l:v>b*1.1?b:w:v>e?e:v>o?o:a:Math.pow(10,Math.floor(Math.log(v)/Math.LN10))}function s(v,u,g,h,y,p){if(h&&v>w){var A=i(u,y,p),m=i(g,y,p),M=v===l?0:1;return A[M]!==m[M]}return Math.floor(g/v)-Math.floor(u/v)>.1}function i(v,u,g){var h=u.c2d(v,l,g).split("-");return h[0]===""&&(h.unshift(),h[0]="-"+h[0]),h}},{"../../constants/numerical":479,"../../plots/cartesian/axes":554}],817:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../lib"),b=t("../../registry"),w=t("../../plots/cartesian/axes"),e=t("../bar/arrays_to_calcdata"),o=t("./bin_functions"),a=t("./norm_functions"),r=t("./average"),n=t("./bin_label_vals");function c(g,h){var y=[],p=[],A=h.orientation==="h",m=w.getFromId(g,A?h.yaxis:h.xaxis),M=A?"y":"x",x={x:"y",y:"x"}[M],T=h[M+"calendar"],_=h.cumulative,f,L=s(g,h,m,M),S=L[0],k=L[1],P=typeof S.size=="string",z=[],I=P?z:S,R=[],D=[],O=[],F=0,G=h.histnorm,W=h.histfunc,q=G.indexOf("density")!==-1,J,X,Z;_.enabled&&q&&(G=G.replace(/ ?density$/,""),q=!1);var se=W==="max"||W==="min",le=se?null:0,oe=o.count,U=a[G],V=!1,re=function(Ge){return m.r2c(Ge,0,T)},ee;for(l.isArrayOrTypedArray(h[x])&&W!=="count"&&(ee=h[x],V=W==="avg",oe=o[W]),f=re(S.start),X=re(S.end)+(f-w.tickIncrement(f,S.size,!1,T))/1e6;f<X&&y.length<1e6&&(J=w.tickIncrement(f,S.size,!1,T),y.push((f+J)/2),p.push(le),O.push([]),z.push(f),q&&R.push(1/(J-f)),V&&D.push(0),!(J<=f));)f=J;z.push(f),!P&&m.type==="date"&&(I={start:re(I.start),end:re(I.end),size:I.size}),g._fullLayout._roundFnOpts||(g._fullLayout._roundFnOpts={});var j=h["_"+M+"bingroup"],Q={leftGap:1/0,rightGap:1/0};j&&(g._fullLayout._roundFnOpts[j]||(g._fullLayout._roundFnOpts[j]=Q),Q=g._fullLayout._roundFnOpts[j]);var ne=p.length,ae=!0,ie=Q.leftGap,ue=Q.rightGap,xe={};for(f=0;f<k.length;f++){var he=k[f];Z=l.findBin(he,I),Z>=0&&Z<ne&&(F+=oe(Z,f,p,ee,D),ae&&O[Z].length&&he!==k[O[Z][0]]&&(ae=!1),O[Z].push(f),xe[f]=Z,ie=Math.min(ie,he-z[Z]),ue=Math.min(ue,z[Z+1]-he))}Q.leftGap=ie,Q.rightGap=ue;var ge;ae||(ge=function(Ge,_e){return function(){var De=g._fullLayout._roundFnOpts[j];return n(De.leftGap,De.rightGap,z,m,T)(Ge,_e)}}),V&&(F=r(p,D)),U&&U(p,F,R),_.enabled&&u(p,_.direction,_.currentbin);var me=Math.min(y.length,p.length),ke=[],Ae=0,Ne=me-1;for(f=0;f<me;f++)if(p[f]){Ae=f;break}for(f=me-1;f>=Ae;f--)if(p[f]){Ne=f;break}for(f=Ae;f<=Ne;f++)if(d(y[f])&&d(p[f])){var He={p:y[f],s:p[f],b:0};_.enabled||(He.pts=O[f],ae?He.ph0=He.ph1=O[f].length?k[O[f][0]]:y[f]:(h._computePh=!0,He.ph0=ge(z[f]),He.ph1=ge(z[f+1],!0))),ke.push(He)}return ke.length===1&&(ke[0].width1=w.tickIncrement(ke[0].p,S.size,!1,T)-ke[0].p),e(ke,h),l.isArrayOrTypedArray(h.selectedpoints)&&l.tagSelected(ke,h,xe),ke}function s(g,h,y,p,A){var m=p+"bins",M=g._fullLayout,x=h["_"+p+"bingroup"],T=M._histogramBinOpts[x],_=M.barmode==="overlay",f,L,S,k,P,z,I,R=function(he){return y.r2c(he,0,k)},D=function(he){return y.c2r(he,0,k)},O=y.type==="date"?function(he){return he||he===0?l.cleanDate(he,null,k):null}:function(he){return d(he)?Number(he):null};function F(he,ge,me){ge[he+"Found"]?(ge[he]=O(ge[he]),ge[he]===null&&(ge[he]=me[he])):(z[he]=ge[he]=me[he],l.nestedProperty(L[0],m+"."+he).set(me[he]))}if(h["_"+p+"autoBinFinished"])delete h["_"+p+"autoBinFinished"];else{L=T.traces;var G=[],W=!0,q=!1,J=!1;for(f=0;f<L.length;f++)if(S=L[f],S.visible){var X=T.dirs[f];P=S["_"+X+"pos0"]=y.makeCalcdata(S,X),G=l.concat(G,P),delete S["_"+p+"autoBinFinished"],h.visible===!0&&(W?W=!1:(delete S._autoBin,S["_"+p+"autoBinFinished"]=1),b.traceIs(S,"2dMap")&&(q=!0),S.type==="histogram2dcontour"&&(J=!0))}k=L[0][p+"calendar"];var Z=w.autoBin(G,y,T.nbins,q,k,T.sizeFound&&T.size),se=L[0]._autoBin={};if(z=se[T.dirs[0]]={},J&&(T.size||(Z.start=D(w.tickIncrement(R(Z.start),Z.size,!0,k))),T.end===void 0&&(Z.end=D(w.tickIncrement(R(Z.end),Z.size,!1,k)))),_&&!b.traceIs(h,"2dMap")&&Z._dataSpan===0&&y.type!=="category"&&y.type!=="multicategory"){if(A)return[Z,P,!0];Z=i(g,h,y,p,m)}I=S.cumulative||{},I.enabled&&I.currentbin!=="include"&&(I.direction==="decreasing"?Z.start=D(w.tickIncrement(R(Z.start),Z.size,!0,k)):Z.end=D(w.tickIncrement(R(Z.end),Z.size,!1,k))),T.size=Z.size,T.sizeFound||(z.size=Z.size,l.nestedProperty(L[0],m+".size").set(Z.size)),F("start",T,Z),F("end",T,Z)}P=h["_"+p+"pos0"],delete h["_"+p+"pos0"];var le=h._input[m]||{},oe=l.extendFlat({},T),U=T.start,V=y.r2l(le.start),re=V!==void 0;if((T.startFound||re)&&V!==y.r2l(U)){var ee=re?V:l.aggNums(Math.min,null,P),j={type:y.type==="category"||y.type==="multicategory"?"linear":y.type,r2l:y.r2l,dtick:T.size,tick0:U,calendar:k,range:[ee,w.tickIncrement(ee,T.size,!1,k)].map(y.l2r)},Q=w.tickFirst(j);Q>y.r2l(ee)&&(Q=w.tickIncrement(Q,T.size,!0,k)),oe.start=y.l2r(Q),re||l.nestedProperty(h,m+".start").set(oe.start)}var ne=T.end,ae=y.r2l(le.end),ie=ae!==void 0;if((T.endFound||ie)&&ae!==y.r2l(ne)){var ue=ie?ae:l.aggNums(Math.max,null,P);oe.end=y.l2r(ue),ie||l.nestedProperty(h,m+".start").set(oe.end)}var xe="autobin"+p;return h._input[xe]===!1&&(h._input[m]=l.extendFlat({},h[m]||{}),delete h._input[xe],delete h[xe]),[oe,P]}function i(g,h,y,p,A){var m=g._fullLayout,M=v(g,h),x=!1,T=1/0,_=[h],f,L,S;for(f=0;f<M.length;f++)if(L=M[f],L===h)x=!0;else if(!x)S=m._histogramBinOpts[L["_"+p+"bingroup"]],T=Math.min(T,S.size||L[A].size);else{var k=s(g,L,y,p,!0),P=k[0],z=k[2];L["_"+p+"autoBinFinished"]=1,L["_"+p+"pos0"]=k[1],z?_.push(L):T=Math.min(T,P.size)}var I=new Array(_.length);for(f=0;f<_.length;f++)for(var R=_[f]["_"+p+"pos0"],D=0;D<R.length;D++)if(R[D]!==void 0){I[f]=R[D];break}for(isFinite(T)||(T=l.distinctVals(I).minDiff),f=0;f<_.length;f++){L=_[f];var O=L[p+"calendar"],F={start:y.c2r(I[f]-T/2,0,O),end:y.c2r(I[f]+T/2,0,O),size:T};L._input[A]=L[A]=F,S=m._histogramBinOpts[L["_"+p+"bingroup"]],S&&l.extendFlat(S,F)}return h[A]}function v(g,h){for(var y=h.xaxis,p=h.yaxis,A=h.orientation,m=[],M=g._fullData,x=0;x<M.length;x++){var T=M[x];T.type==="histogram"&&T.visible===!0&&T.orientation===A&&T.xaxis===y&&T.yaxis===p&&m.push(T)}return m}function u(g,h,y){var p,A,m;function M(T){m=g[T],g[T]/=2}function x(T){A=g[T],g[T]=m+A/2,m+=A}if(y==="half")if(h==="increasing")for(M(0),p=1;p<g.length;p++)x(p);else for(M(g.length-1),p=g.length-2;p>=0;p--)x(p);else if(h==="increasing"){for(p=1;p<g.length;p++)g[p]+=g[p-1];y==="exclude"&&(g.unshift(0),g.pop())}else{for(p=g.length-2;p>=0;p--)g[p]+=g[p+1];y==="exclude"&&(g.push(0),g.shift())}}B.exports={calc:c,calcAllAutoBins:s}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"../bar/arrays_to_calcdata":647,"./average":813,"./bin_functions":815,"./bin_label_vals":816,"./norm_functions":824,"fast-isnumeric":190}],818:[function(t,B,H){B.exports={eventDataKeys:["binNumber"]}},{}],819:[function(t,B,H){var d=t("../../lib"),l=t("../../plots/cartesian/axis_ids"),b=t("../../registry").traceIs,w=t("../bar/defaults").handleGroupingDefaults,e=d.nestedProperty,o=t("../../plots/cartesian/constraints").getAxisGroup,a=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],r=["x","y"];B.exports=function(c,s){var i=s._histogramBinOpts={},v=[],u={},g=[],h,y,p,A,m,M,x;function T(J,X){return d.coerce(h._input,h,h._module.attributes,J,X)}function _(J){return J.orientation==="v"?"x":"y"}function f(J,X){var Z=l.getFromTrace({_fullLayout:s},J,X);return Z.type}function L(J,X,Z){var se=J.uid+"__"+Z;X||(X=se);var le=f(J,Z),oe=J[Z+"calendar"]||"",U=i[X],V=!0;U&&(le===U.axType&&oe===U.calendar?(V=!1,U.traces.push(J),U.dirs.push(Z)):(X=se,le!==U.axType&&d.warn(["Attempted to group the bins of trace",J.index,"set on a","type:"+le,"axis","with bins on","type:"+U.axType,"axis."].join(" ")),oe!==U.calendar&&d.warn(["Attempted to group the bins of trace",J.index,"set with a",oe,"calendar","with bins",U.calendar?"on a "+U.calendar+" calendar":"w/o a set calendar"].join(" ")))),V&&(i[X]={traces:[J],dirs:[Z],axType:le,calendar:J[Z+"calendar"]||""}),J["_"+Z+"bingroup"]=X}for(m=0;m<c.length;m++)h=c[m],b(h,"histogram")&&(v.push(h),delete h._xautoBinFinished,delete h._yautoBinFinished,b(h,"2dMap")||w(h._input,h,s,T));var S=s._alignmentOpts||{};for(m=0;m<v.length;m++){if(h=v[m],p="",!b(h,"2dMap")){if(A=_(h),s.barmode==="group"&&h.alignmentgroup){var k=h[A+"axis"],P=o(s,k)+h.orientation;(S[P]||{})[h.alignmentgroup]&&(p=P)}!p&&s.barmode!=="overlay"&&(p=o(s,h.xaxis)+o(s,h.yaxis)+_(h))}p?(u[p]||(u[p]=[]),u[p].push(h)):g.push(h)}for(p in u){if(y=u[p],y.length===1){g.push(y[0]);continue}var z=!1;for(y.length&&(h=y[0],z=T("bingroup")),p=z||p,m=0;m<y.length;m++){h=y[m];var I=h._input.bingroup;I&&I!==p&&d.warn(["Trace",h.index,"must match","within bingroup",p+".","Ignoring its bingroup:",I,"setting."].join(" ")),h.bingroup=p,L(h,p,_(h))}}for(m=0;m<g.length;m++){h=g[m];var R=T("bingroup");if(b(h,"2dMap"))for(x=0;x<2;x++){A=r[x];var D=T(A+"bingroup",R?R+"__"+A:null);L(h,D,A)}else L(h,R,_(h))}for(p in i){var O=i[p];for(y=O.traces,M=0;M<a.length;M++){var F=a[M],G=F.name,W,q;if(!(G==="nbins"&&O.sizeFound)){for(m=0;m<y.length;m++){if(h=y[m],A=O.dirs[m],W=F.aStr[A],e(h._input,W).get()!==void 0){O[G]=T(W),O[G+"Found"]=!0;break}q=(h._autoBin||{})[A]||{},q[G]&&e(h,W).set(q[G])}if(G==="start"||G==="end")for(;m<y.length;m++)h=y[m],h["_"+A+"bingroup"]&&(q=(h._autoBin||{})[A]||{},T(W,q[G]));G==="nbins"&&!O.sizeFound&&!O.nbinsFound&&(h=y[0],O[G]=T(W))}}}}},{"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../plots/cartesian/constraints":562,"../../registry":638,"../bar/defaults":652}],820:[function(t,B,H){var d=t("../../registry"),l=t("../../lib"),b=t("../../components/color"),w=t("../bar/defaults").handleText,e=t("../bar/style_defaults"),o=t("./attributes");B.exports=function(r,n,c,s){function i(f,L){return l.coerce(r,n,o,f,L)}var v=i("x"),u=i("y"),g=i("cumulative.enabled");g&&(i("cumulative.direction"),i("cumulative.currentbin")),i("text");var h=i("textposition");w(r,n,s,i,h,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat");var y=i("orientation",u&&!v?"h":"v"),p=y==="v"?"x":"y",A=y==="v"?"y":"x",m=v&&u?Math.min(l.minRowLength(v)&&l.minRowLength(u)):l.minRowLength(n[p]||[]);if(!m){n.visible=!1;return}n._length=m;var M=d.getComponentMethod("calendars","handleTraceDefaults");M(r,n,["x","y"],s);var x=n[A];x&&i("histfunc"),i("histnorm"),i("autobin"+p),e(r,n,i,c,s),l.coerceSelectionMarkerOpacity(n,i);var T=(n.marker.line||{}).color,_=d.getComponentMethod("errorbars","supplyDefaults");_(r,n,T||b.defaultLine,{axis:"y"}),_(r,n,T||b.defaultLine,{axis:"x",inherit:"y"})}},{"../../components/color":366,"../../lib":503,"../../registry":638,"../bar/defaults":652,"../bar/style_defaults":663,"./attributes":812}],821:[function(t,B,H){B.exports=function(l,b,w,e,o){if(l.x="xVal"in b?b.xVal:b.x,l.y="yVal"in b?b.yVal:b.y,"zLabelVal"in b&&(l.z=b.zLabelVal),b.xa&&(l.xaxis=b.xa),b.ya&&(l.yaxis=b.ya),!(w.cumulative||{}).enabled){var a=Array.isArray(o)?e[0].pts[o[0]][o[1]]:e[o].pts;l.pointNumbers=a,l.binNumber=l.pointNumber,delete l.pointNumber,delete l.pointIndex;var r;if(w._indexToPoints){r=[];for(var n=0;n<a.length;n++)r=r.concat(w._indexToPoints[a[n]])}else r=a;l.pointIndices=r}return l}},{}],822:[function(t,B,H){var d=t("../bar/hover").hoverPoints,l=t("../../plots/cartesian/axes").hoverLabelText;B.exports=function(w,e,o,a,r){var n=d(w,e,o,a,r);if(!!n){w=n[0];var c=w.cd[w.index],s=w.cd[0].trace;if(!s.cumulative.enabled){var i=s.orientation==="h"?"y":"x";w[i+"Label"]=l(w[i+"a"],[c.ph0,c.ph1],s[i+"hoverformat"])}return n}}},{"../../plots/cartesian/axes":554,"../bar/hover":655}],823:[function(t,B,H){B.exports={attributes:t("./attributes"),layoutAttributes:t("../bar/layout_attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("./cross_trace_defaults"),supplyLayoutDefaults:t("../bar/layout_defaults"),calc:t("./calc").calc,crossTraceCalc:t("../bar/cross_trace_calc").crossTraceCalc,plot:t("../bar/plot").plot,layerName:"barlayer",style:t("../bar/style").style,styleOnSelect:t("../bar/style").styleOnSelect,colorbar:t("../scatter/marker_colorbar"),hoverPoints:t("./hover"),selectPoints:t("../bar/select"),eventData:t("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:t("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../bar/cross_trace_calc":651,"../bar/layout_attributes":657,"../bar/layout_defaults":658,"../bar/plot":659,"../bar/select":660,"../bar/style":662,"../scatter/marker_colorbar":944,"./attributes":812,"./calc":817,"./cross_trace_defaults":819,"./defaults":820,"./event_data":821,"./hover":822}],824:[function(t,B,H){B.exports={percent:function(d,l){for(var b=d.length,w=100/l,e=0;e<b;e++)d[e]*=w},probability:function(d,l){for(var b=d.length,w=0;w<b;w++)d[w]/=l},density:function(d,l,b,w){var e=d.length;w=w||1;for(var o=0;o<e;o++)d[o]*=b[o]*w},"probability density":function(d,l,b,w){var e=d.length;w&&(l/=w);for(var o=0;o<e;o++)d[o]*=b[o]/l}}},{}],825:[function(t,B,H){var d=t("../histogram/attributes"),l=t("../histogram/bin_attributes"),b=t("../heatmap/attributes"),w=t("../../plots/attributes"),e=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,o=t("../../plots/template_attributes").hovertemplateAttrs,a=t("../../plots/template_attributes").texttemplateAttrs,r=t("../../components/colorscale/attributes"),n=t("../../lib/extend").extendFlat;B.exports=n({x:d.x,y:d.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:d.histnorm,histfunc:d.histfunc,nbinsx:d.nbinsx,xbins:l("x"),nbinsy:d.nbinsy,ybins:l("y"),autobinx:d.autobinx,autobiny:d.autobiny,bingroup:n({},d.bingroup,{}),xbingroup:n({},d.bingroup,{}),ybingroup:n({},d.bingroup,{}),xgap:b.xgap,ygap:b.ygap,zsmooth:b.zsmooth,xhoverformat:e("x"),yhoverformat:e("y"),zhoverformat:e("z",1),hovertemplate:o({},{keys:"z"}),texttemplate:a({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:b.textfont,showlegend:n({},w.showlegend,{dflt:!1})},r("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../heatmap/attributes":792,"../histogram/attributes":812,"../histogram/bin_attributes":814}],826:[function(t,B,H){var d=t("../../lib"),l=t("../../plots/cartesian/axes"),b=t("../histogram/bin_functions"),w=t("../histogram/norm_functions"),e=t("../histogram/average"),o=t("../histogram/bin_label_vals"),a=t("../histogram/calc").calcAllAutoBins;B.exports=function(i,v){var u=l.getFromId(i,v.xaxis),g=l.getFromId(i,v.yaxis),h=v.xcalendar,y=v.ycalendar,p=function(it){return u.r2c(it,0,h)},A=function(it){return g.r2c(it,0,y)},m=function(it){return u.c2r(it,0,h)},M=function(it){return g.c2r(it,0,y)},x,T,_,f,L=a(i,v,u,"x"),S=L[0],k=L[1],P=a(i,v,g,"y"),z=P[0],I=P[1],R=v._length;k.length>R&&k.splice(R,k.length-R),I.length>R&&I.splice(R,I.length-R);var D=[],O=[],F=[],G=typeof S.size=="string",W=typeof z.size=="string",q=[],J=[],X=G?q:S,Z=W?J:z,se=0,le=[],oe=[],U=v.histnorm,V=v.histfunc,re=U.indexOf("density")!==-1,ee=V==="max"||V==="min",j=ee?null:0,Q=b.count,ne=w[U],ae=!1,ie=[],ue=[],xe="z"in v?v.z:"marker"in v&&Array.isArray(v.marker.color)?v.marker.color:"";xe&&V!=="count"&&(ae=V==="avg",Q=b[V]);var he=S.size,ge=p(S.start),me=p(S.end)+(ge-l.tickIncrement(ge,he,!1,h))/1e6;for(x=ge;x<me;x=l.tickIncrement(x,he,!1,h))O.push(j),q.push(x),ae&&F.push(0);q.push(x);var ke=O.length,Ae=(x-ge)/ke,Ne=m(ge+Ae/2),He=z.size,Ge=A(z.start),_e=A(z.end)+(Ge-l.tickIncrement(Ge,He,!1,y))/1e6;for(x=Ge;x<_e;x=l.tickIncrement(x,He,!1,y)){D.push(O.slice()),J.push(x);var De=new Array(ke);for(T=0;T<ke;T++)De[T]=[];oe.push(De),ae&&le.push(F.slice())}J.push(x);var Ye=D.length,qe=(x-Ge)/Ye,Ue=M(Ge+qe/2);re&&(ie=r(O.length,X,Ae,G),ue=r(D.length,Z,qe,W)),!G&&u.type==="date"&&(X=n(p,X)),!W&&g.type==="date"&&(Z=n(A,Z));var Ie=!0,Ve=!0,dt=new Array(ke),Dt=new Array(Ye),Yt=1/0,kt=1/0,Ft=1/0,Nt=1/0;for(x=0;x<R;x++){var Lt=k[x],St=I[x];_=d.findBin(Lt,X),f=d.findBin(St,Z),_>=0&&_<ke&&f>=0&&f<Ye&&(se+=Q(_,x,D[f],xe,le[f]),oe[f][_].push(x),Ie&&(dt[_]===void 0?dt[_]=Lt:dt[_]!==Lt&&(Ie=!1)),Ve&&(Dt[f]===void 0?Dt[f]=St:Dt[f]!==St&&(Ve=!1)),Yt=Math.min(Yt,Lt-q[_]),kt=Math.min(kt,q[_+1]-Lt),Ft=Math.min(Ft,St-J[f]),Nt=Math.min(Nt,J[f+1]-St))}if(ae)for(f=0;f<Ye;f++)se+=e(D[f],le[f]);if(ne)for(f=0;f<Ye;f++)ne(D[f],se,ie,ue[f]);return{x:k,xRanges:c(q,Ie&&dt,Yt,kt,u,h),x0:Ne,dx:Ae,y:I,yRanges:c(J,Ve&&Dt,Ft,Nt,g,y),y0:Ue,dy:qe,z:D,pts:oe}};function r(s,i,v,u){var g=new Array(s),h;if(u)for(h=0;h<s;h++)g[h]=1/(i[h+1]-i[h]);else{var y=1/v;for(h=0;h<s;h++)g[h]=y}return g}function n(s,i){return{start:s(i.start),end:s(i.end),size:i.size}}function c(s,i,v,u,g,h){var y,p=s.length-1,A=new Array(p),m=o(v,u,s,g,h);for(y=0;y<p;y++){var M=(i||[])[y];A[y]=M===void 0?[m(s[y]),m(s[y+1],!0)]:[M,M]}return A}},{"../../lib":503,"../../plots/cartesian/axes":554,"../histogram/average":813,"../histogram/bin_functions":815,"../histogram/bin_label_vals":816,"../histogram/calc":817,"../histogram/norm_functions":824}],827:[function(t,B,H){var d=t("../../lib"),l=t("./sample_defaults"),b=t("../heatmap/style_defaults"),w=t("../../components/colorscale/defaults"),e=t("../heatmap/label_defaults"),o=t("./attributes");B.exports=function(r,n,c,s){function i(v,u){return d.coerce(r,n,o,v,u)}l(r,n,i,s),n.visible!==!1&&(b(r,n,i,s),w(r,n,s,i,{prefix:"",cLetter:"z"}),i("hovertemplate"),e(i,s),i("xhoverformat"),i("yhoverformat"))}},{"../../components/colorscale/defaults":376,"../../lib":503,"../heatmap/label_defaults":802,"../heatmap/style_defaults":806,"./attributes":825,"./sample_defaults":830}],828:[function(t,B,H){var d=t("../heatmap/hover"),l=t("../../plots/cartesian/axes").hoverLabelText;B.exports=function(w,e,o,a,r){var n=d(w,e,o,a,r);if(!!n){w=n[0];var c=w.index,s=c[0],i=c[1],v=w.cd[0],u=v.trace,g=v.xRanges[i],h=v.yRanges[s];return w.xLabel=l(w.xa,[g[0],g[1]],u.xhoverformat),w.yLabel=l(w.ya,[h[0],h[1]],u.yhoverformat),n}}},{"../../plots/cartesian/axes":554,"../heatmap/hover":799}],829:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("../histogram/cross_trace_defaults"),calc:t("../heatmap/calc"),plot:t("../heatmap/plot"),layerName:"heatmaplayer",colorbar:t("../heatmap/colorbar"),style:t("../heatmap/style"),hoverPoints:t("./hover"),eventData:t("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../heatmap/calc":793,"../heatmap/colorbar":795,"../heatmap/plot":804,"../heatmap/style":805,"../histogram/cross_trace_defaults":819,"../histogram/event_data":821,"./attributes":825,"./defaults":827,"./hover":828}],830:[function(t,B,H){var d=t("../../registry"),l=t("../../lib");B.exports=function(w,e,o,a){var r=o("x"),n=o("y"),c=l.minRowLength(r),s=l.minRowLength(n);if(!c||!s){e.visible=!1;return}e._length=Math.min(c,s);var i=d.getComponentMethod("calendars","handleTraceDefaults");i(w,e,["x","y"],a);var v=o("z")||o("marker.color");v&&o("histfunc"),o("histnorm"),o("autobinx"),o("autobiny")}},{"../../lib":503,"../../registry":638}],831:[function(t,B,H){var d=t("../histogram2d/attributes"),l=t("../contour/attributes"),b=t("../../components/colorscale/attributes"),w=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=t("../../lib/extend").extendFlat;B.exports=e({x:d.x,y:d.y,z:d.z,marker:d.marker,histnorm:d.histnorm,histfunc:d.histfunc,nbinsx:d.nbinsx,xbins:d.xbins,nbinsy:d.nbinsy,ybins:d.ybins,autobinx:d.autobinx,autobiny:d.autobiny,bingroup:d.bingroup,xbingroup:d.xbingroup,ybingroup:d.ybingroup,autocontour:l.autocontour,ncontours:l.ncontours,contours:l.contours,line:{color:l.line.color,width:e({},l.line.width,{dflt:.5}),dash:l.line.dash,smoothing:l.line.smoothing,editType:"plot"},xhoverformat:w("x"),yhoverformat:w("y"),zhoverformat:w("z",1),hovertemplate:d.hovertemplate,texttemplate:l.texttemplate,textfont:l.textfont},b("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../contour/attributes":735,"../histogram2d/attributes":825}],832:[function(t,B,H){var d=t("../../lib"),l=t("../histogram2d/sample_defaults"),b=t("../contour/contours_defaults"),w=t("../contour/style_defaults"),e=t("../heatmap/label_defaults"),o=t("./attributes");B.exports=function(r,n,c,s){function i(u,g){return d.coerce(r,n,o,u,g)}function v(u){return d.coerce2(r,n,o,u)}l(r,n,i,s),n.visible!==!1&&(b(r,n,i,v),w(r,n,i,s),i("xhoverformat"),i("yhoverformat"),i("hovertemplate"),n.contours&&n.contours.coloring==="heatmap"&&e(i,s))}},{"../../lib":503,"../contour/contours_defaults":742,"../contour/style_defaults":756,"../heatmap/label_defaults":802,"../histogram2d/sample_defaults":830,"./attributes":831}],833:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("../histogram/cross_trace_defaults"),calc:t("../contour/calc"),plot:t("../contour/plot").plot,layerName:"contourlayer",style:t("../contour/style"),colorbar:t("../contour/colorbar"),hoverPoints:t("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../contour/calc":736,"../contour/colorbar":738,"../contour/hover":748,"../contour/plot":753,"../contour/style":755,"../histogram/cross_trace_defaults":819,"./attributes":831,"./defaults":832}],834:[function(t,B,H){var d=t("../../plots/template_attributes").hovertemplateAttrs,l=t("../../plots/template_attributes").texttemplateAttrs,b=t("../../components/colorscale/attributes"),w=t("../../plots/domain").attributes,e=t("../pie/attributes"),o=t("../sunburst/attributes"),a=t("../treemap/attributes"),r=t("../treemap/constants"),n=t("../../lib/extend").extendFlat;B.exports={labels:o.labels,parents:o.parents,values:o.values,branchvalues:o.branchvalues,count:o.count,level:o.level,maxdepth:o.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:a.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:n({colors:o.marker.colors,line:o.marker.line,editType:"calc"},b("marker",{colorAttr:"colors",anim:!1})),leaf:o.leaf,pathbar:a.pathbar,text:e.text,textinfo:o.textinfo,texttemplate:l({editType:"plot"},{keys:r.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:o.hoverinfo,hovertemplate:d({},{keys:r.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:a.outsidetextfont,textposition:a.textposition,sort:e.sort,root:o.root,domain:w({name:"icicle",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":900,"../sunburst/attributes":1045,"../treemap/attributes":1071,"../treemap/constants":1074}],835:[function(t,B,H){var d=t("../../plots/plots");H.name="icicle",H.plot=function(l,b,w,e){d.plotBasePlot(H.name,l,b,w,e)},H.clean=function(l,b,w,e){d.cleanBasePlot(H.name,l,b,w,e)}},{"../../plots/plots":619}],836:[function(t,B,H){var d=t("../sunburst/calc");H.calc=function(l,b){return d.calc(l,b)},H.crossTraceCalc=function(l){return d._runCrossTraceCalc("icicle",l)}},{"../sunburst/calc":1047}],837:[function(t,B,H){var d=t("../../lib"),l=t("./attributes"),b=t("../../components/color"),w=t("../../plots/domain").defaults,e=t("../bar/defaults").handleText,o=t("../bar/constants").TEXTPAD,a=t("../../components/colorscale"),r=a.hasColorscale,n=a.handleDefaults;B.exports=function(s,i,v,u){function g(_,f){return d.coerce(s,i,l,_,f)}var h=g("labels"),y=g("parents");if(!h||!h.length||!y||!y.length){i.visible=!1;return}var p=g("values");p&&p.length?g("branchvalues"):g("count"),g("level"),g("maxdepth"),g("tiling.orientation"),g("tiling.flip"),g("tiling.pad");var A=g("text");g("texttemplate"),i.texttemplate||g("textinfo",Array.isArray(A)?"text+label":"label"),g("hovertext"),g("hovertemplate");var m=g("pathbar.visible"),M="auto";e(s,i,u,g,M,{hasPathbar:m,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),g("textposition");var x=g("marker.line.width");x&&g("marker.line.color",u.paper_bgcolor),g("marker.colors");var T=i._hasColorscale=r(s,"marker","colors")||(s.marker||{}).coloraxis;T&&n(s,i,u,g,{prefix:"marker.",cLetter:"c"}),g("leaf.opacity",T?1:.7),i._hovered={marker:{line:{width:2,color:b.contrast(u.paper_bgcolor)}}},m&&(g("pathbar.thickness",i.pathbar.textfont.size+2*o),g("pathbar.side"),g("pathbar.edgeshape")),g("sort"),g("root.color"),w(i,u,g),i._length=null}},{"../../components/color":366,"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/constants":650,"../bar/defaults":652,"./attributes":834}],838:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib"),b=t("../../components/drawing"),w=t("../../lib/svg_text_utils"),e=t("./partition"),o=t("./style").styleOne,a=t("../treemap/constants"),r=t("../sunburst/helpers"),n=t("../sunburst/fx"),c=t("../sunburst/plot").formatSliceLabel,s=!1;B.exports=function(v,u,g,h,y){var p=y.width,A=y.height,m=y.viewX,M=y.viewY,x=y.pathSlice,T=y.toMoveInsideSlice,_=y.strTransform,f=y.hasTransition,L=y.handleSlicesExit,S=y.makeUpdateSliceInterpolator,k=y.makeUpdateTextInterpolator,P=y.prevEntry,z={},I=v._fullLayout,R=u[0],D=R.trace,O=D.textposition.indexOf("left")!==-1,F=D.textposition.indexOf("right")!==-1,G=D.textposition.indexOf("bottom")!==-1,W=e(g,[p,A],{flipX:D.tiling.flip.indexOf("x")>-1,flipY:D.tiling.flip.indexOf("y")>-1,orientation:D.tiling.orientation,pad:{inner:D.tiling.pad},maxDepth:D._maxDepth}),q=W.descendants(),J=1/0,X=-1/0;q.forEach(function(U){var V=U.depth;V>=D._maxDepth?(U.x0=U.x1=(U.x0+U.x1)/2,U.y0=U.y1=(U.y0+U.y1)/2):(J=Math.min(J,V),X=Math.max(X,V))}),h=h.data(q,r.getPtId),D._maxVisibleLayers=isFinite(X)?X-J+1:0,h.enter().append("g").classed("slice",!0),L(h,s,z,[p,A],x),h.order();var Z=null;if(f&&P){var se=r.getPtId(P);h.each(function(U){Z===null&&r.getPtId(U)===se&&(Z={x0:U.x0,x1:U.x1,y0:U.y0,y1:U.y1})})}var le=function(){return Z||{x0:0,x1:p,y0:0,y1:A}},oe=h;return f&&(oe=oe.transition().each("end",function(){var U=d.select(this);r.setSliceCursor(U,v,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),oe.each(function(U){U._x0=m(U.x0),U._x1=m(U.x1),U._y0=M(U.y0),U._y1=M(U.y1),U._hoverX=m(U.x1-D.tiling.pad),U._hoverY=M(G?U.y1-D.tiling.pad/2:U.y0+D.tiling.pad/2);var V=d.select(this),re=l.ensureSingle(V,"path","surface",function(ne){ne.style("pointer-events","all")});f?re.transition().attrTween("d",function(ne){var ae=S(ne,s,le(),[p,A],{orientation:D.tiling.orientation,flipX:D.tiling.flip.indexOf("x")>-1,flipY:D.tiling.flip.indexOf("y")>-1});return function(ie){return x(ae(ie))}}):re.attr("d",x),V.call(n,g,v,u,{styleOne:o,eventDataKeys:a.eventDataKeys,transitionTime:a.CLICK_TRANSITION_TIME,transitionEasing:a.CLICK_TRANSITION_EASING}).call(r.setSliceCursor,v,{isTransitioning:v._transitioning}),re.call(o,U,D,{hovered:!1}),U.x0===U.x1||U.y0===U.y1?U._text="":U._text=c(U,g,D,u,I)||"";var ee=l.ensureSingle(V,"g","slicetext"),j=l.ensureSingle(ee,"text","",function(ne){ne.attr("data-notex",1)}),Q=l.ensureUniformFontSize(v,r.determineTextFont(D,U,I.font));j.text(U._text||" ").classed("slicetext",!0).attr("text-anchor",F?"end":O?"start":"middle").call(b.font,Q).call(w.convertToTspans,v),U.textBB=b.bBox(j.node()),U.transform=T(U,{fontSize:Q.size}),U.transform.fontSize=Q.size,f?j.transition().attrTween("transform",function(ne){var ae=k(ne,s,le(),[p,A]);return function(ie){return _(ae(ie))}}):j.attr("transform",_(U))}),Z}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1050,"../sunburst/helpers":1051,"../sunburst/plot":1055,"../treemap/constants":1074,"./partition":842,"./style":844,"@plotly/d3":58}],839:[function(t,B,H){B.exports={moduleType:"trace",name:"icicle",basePlotModule:t("./base_plot"),categories:[],animatable:!0,attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./calc").crossTraceCalc,plot:t("./plot"),style:t("./style").style,colorbar:t("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":944,"./attributes":834,"./base_plot":835,"./calc":836,"./defaults":837,"./layout_attributes":840,"./layout_defaults":841,"./plot":843,"./style":844}],840:[function(t,B,H){B.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],841:[function(t,B,H){var d=t("../../lib"),l=t("./layout_attributes");B.exports=function(w,e){function o(a,r){return d.coerce(w,e,l,a,r)}o("iciclecolorway",e.colorway),o("extendiciclecolors")}},{"../../lib":503,"./layout_attributes":840}],842:[function(t,B,H){var d=t("d3-hierarchy"),l=t("../treemap/flip_tree");B.exports=function(w,e,o){var a=o.flipX,r=o.flipY,n=o.orientation==="h",c=o.maxDepth,s=e[0],i=e[1];c&&(s=(w.height+1)*e[0]/Math.min(w.height+1,c),i=(w.height+1)*e[1]/Math.min(w.height+1,c));var v=d.partition().padding(o.pad.inner).size(n?[e[1],s]:[e[0],i])(w);return(n||a||r)&&l(v,e,{swapXY:n,flipX:a,flipY:r}),v}},{"../treemap/flip_tree":1079,"d3-hierarchy":115}],843:[function(t,B,H){var d=t("../treemap/draw"),l=t("./draw_descendants");B.exports=function(w,e,o,a){return d(w,e,o,a,{type:"icicle",drawDescendants:l})}},{"../treemap/draw":1076,"./draw_descendants":838}],844:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../components/color"),b=t("../../lib"),w=t("../bar/uniform_text").resizeText;function e(a){var r=a._fullLayout._iciclelayer.selectAll(".trace");w(a,r,"icicle"),r.each(function(n){var c=d.select(this),s=n[0],i=s.trace;c.style("opacity",i.opacity),c.selectAll("path.surface").each(function(v){d.select(this).call(o,v,i)})})}function o(a,r,n){var c=r.data.data,s=!r.children,i=c.i,v=b.castOption(n,i,"marker.line.color")||l.defaultLine,u=b.castOption(n,i,"marker.line.width")||0;a.style("stroke-width",u).call(l.fill,c.color).call(l.stroke,v).style("opacity",s?n.leaf.opacity:null)}B.exports={style:e,styleOne:o}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"@plotly/d3":58}],845:[function(t,B,H){for(var d=t("../../plots/attributes"),l=t("../../plots/template_attributes").hovertemplateAttrs,b=t("../../lib/extend").extendFlat,w=t("./constants").colormodel,e=["rgb","rgba","rgba256","hsl","hsla"],o=[],a=[],r=0;r<e.length;r++){var n=w[e[r]];o.push("For the `"+e[r]+"` colormodel, it is ["+(n.zminDflt||n.min).join(", ")+"]."),a.push("For the `"+e[r]+"` colormodel, it is ["+(n.zmaxDflt||n.max).join(", ")+"].")}B.exports=b({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:e,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:b({},d.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:l({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"./constants":847}],846:[function(t,B,H){var d=t("../../lib"),l=t("./constants"),b=t("fast-isnumeric"),w=t("../../plots/cartesian/axes"),e=t("../../lib").maxRowLength,o=t("./helpers").getImageSize;B.exports=function(s,i){var v,u;if(i._hasZ)v=i.z.length,u=e(i.z);else if(i._hasSource){var g=o(i.source);v=g.height,u=g.width}var h=w.getFromId(s,i.xaxis||"x"),y=w.getFromId(s,i.yaxis||"y"),p=h.d2c(i.x0)-i.dx/2,A=y.d2c(i.y0)-i.dy/2,m,M=[p,p+u*i.dx],x=[A,A+v*i.dy];if(h&&h.type==="log")for(m=0;m<u;m++)M.push(p+m*i.dx);if(y&&y.type==="log")for(m=0;m<v;m++)x.push(A+m*i.dy);i._extremes[h._id]=w.findExtremes(h,M),i._extremes[y._id]=w.findExtremes(y,x),i._scaler=n(i);var T={x0:p,y0:A,z:i.z,w:u,h:v};return[T]};function a(c,s,i,v){return function(u){return d.constrain((u-c)*s,i,v)}}function r(c,s){return function(i){return d.constrain(i,c,s)}}function n(c){var s=l.colormodel[c.colormodel],i=s.colormodel||c.colormodel,v=i.length;c._sArray=[];for(var u=0;u<v;u++)s.min[u]!==c.zmin[u]||s.max[u]!==c.zmax[u]?c._sArray.push(a(c.zmin[u],(s.max[u]-s.min[u])/(c.zmax[u]-c.zmin[u]),s.min[u],s.max[u])):c._sArray.push(r(s.min[u],s.max[u]));return function(g){for(var h=g.slice(0,v),y=0;y<v;y++){var p=h[y];if(!b(p))return!1;h[y]=c._sArray[y](p)}return h}}},{"../../lib":503,"../../plots/cartesian/axes":554,"./constants":847,"./helpers":850,"fast-isnumeric":190}],847:[function(t,B,H){B.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(d){return d.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(d){return d.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(d){return d.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(d){var l=d.slice(0,3);return l[1]=l[1]+"%",l[2]=l[2]+"%",l},suffix:["\xB0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(d){var l=d.slice(0,4);return l[1]=l[1]+"%",l[2]=l[2]+"%",l},suffix:["\xB0","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},{}],848:[function(t,B,H){var d=t("../../lib"),l=t("./attributes"),b=t("./constants"),w=t("../../snapshot/helpers").IMAGE_URL_PREFIX;B.exports=function(o,a){function r(s,i){return d.coerce(o,a,l,s,i)}r("source"),a.source&&!a.source.match(w)&&delete a.source,a._hasSource=!!a.source;var n=r("z");if(a._hasZ=!(n===void 0||!n.length||!n[0]||!n[0].length),!a._hasZ&&!a._hasSource){a.visible=!1;return}r("x0"),r("y0"),r("dx"),r("dy");var c;a._hasZ?(r("colormodel","rgb"),c=b.colormodel[a.colormodel],r("zmin",c.zminDflt||c.min),r("zmax",c.zmaxDflt||c.max)):a._hasSource&&(a.colormodel="rgba256",c=b.colormodel[a.colormodel],a.zmin=c.zminDflt,a.zmax=c.zmaxDflt),r("zsmooth"),r("text"),r("hovertext"),r("hovertemplate"),a._length=null}},{"../../lib":503,"../../snapshot/helpers":642,"./attributes":845,"./constants":847}],849:[function(t,B,H){B.exports=function(l,b){return"xVal"in b&&(l.x=b.xVal),"yVal"in b&&(l.y=b.yVal),b.xa&&(l.xaxis=b.xa),b.ya&&(l.yaxis=b.ya),l.color=b.color,l.colormodel=b.trace.colormodel,l.z||(l.z=b.color),l}},{}],850:[function(t,B,H){var d=t("probe-image-size/sync"),l=t("../../snapshot/helpers").IMAGE_URL_PREFIX,b=t("buffer/").Buffer;H.getImageSize=function(w){var e=w.replace(l,""),o=new b(e,"base64");return d(o)}},{"../../snapshot/helpers":642,"buffer/":85,"probe-image-size/sync":276}],851:[function(t,B,H){var d=t("../../components/fx"),l=t("../../lib"),b=t("./constants");B.exports=function(e,o,a){var r=e.cd[0],n=r.trace,c=e.xa,s=e.ya;if(!(d.inbox(o-r.x0,o-(r.x0+r.w*n.dx),0)>0||d.inbox(a-r.y0,a-(r.y0+r.h*n.dy),0)>0)){var i=Math.floor((o-r.x0)/n.dx),v=Math.floor(Math.abs(a-r.y0)/n.dy),u;if(n._hasZ?u=r.z[v][i]:n._hasSource&&(u=n._canvas.el.getContext("2d").getImageData(i,v,1,1).data),!!u){var g=r.hi||n.hoverinfo,h;if(g){var y=g.split("+");y.indexOf("all")!==-1&&(y=["color"]),y.indexOf("color")!==-1&&(h=!0)}var p=b.colormodel[n.colormodel],A=p.colormodel||n.colormodel,m=A.length,M=n._scaler(u),x=p.suffix,T=[];(n.hovertemplate||h)&&(T.push("["+[M[0]+x[0],M[1]+x[1],M[2]+x[2]].join(", ")),m===4&&T.push(", "+M[3]+x[3]),T.push("]"),T=T.join(""),e.extraText=A.toUpperCase()+": "+T);var _;Array.isArray(n.hovertext)&&Array.isArray(n.hovertext[v])?_=n.hovertext[v][i]:Array.isArray(n.text)&&Array.isArray(n.text[v])&&(_=n.text[v][i]);var f=s.c2p(r.y0+(v+.5)*n.dy),L=r.x0+(i+.5)*n.dx,S=r.y0+(v+.5)*n.dy,k="["+u.slice(0,n.colormodel.length).join(", ")+"]";return[l.extendFlat(e,{index:[v,i],x0:c.c2p(r.x0+i*n.dx),x1:c.c2p(r.x0+(i+1)*n.dx),y0:f,y1:f,color:M,xVal:L,xLabelVal:L,yVal:S,yLabelVal:S,zLabelVal:k,text:_,hovertemplateLabels:{zLabel:k,colorLabel:T,"color[0]Label":M[0]+x[0],"color[1]Label":M[1]+x[1],"color[2]Label":M[2]+x[2],"color[3]Label":M[3]+x[3]}})]}}}},{"../../components/fx":406,"../../lib":503,"./constants":847}],852:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot"),style:t("./style"),hoverPoints:t("./hover"),eventData:t("./event_data"),moduleType:"trace",name:"image",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":568,"./attributes":845,"./calc":846,"./defaults":848,"./event_data":849,"./hover":851,"./plot":853,"./style":854}],853:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib"),b=l.strTranslate,w=t("../../constants/xmlns_namespaces"),e=t("./constants"),o=l.isIOS()||l.isSafari()||l.isIE();B.exports=function(r,n,c,s){var i=n.xaxis,v=n.yaxis,u=!(o||r._context._exportedPlot);l.makeTraceGroups(s,c,"im").each(function(g){var h=d.select(this),y=g[0],p=y.trace,A=(p.zsmooth==="fast"||p.zsmooth===!1&&u)&&!p._hasZ&&p._hasSource&&i.type==="linear"&&v.type==="linear";p._realImage=A;var m=y.z,M=y.x0,x=y.y0,T=y.w,_=y.h,f=p.dx,L=p.dy,S,k,P,z,I,R;for(R=0;S===void 0&&R<T;)S=i.c2p(M+R*f),R++;for(R=T;k===void 0&&R>0;)k=i.c2p(M+R*f),R--;for(R=0;z===void 0&&R<_;)z=v.c2p(x+R*L),R++;for(R=_;I===void 0&&R>0;)I=v.c2p(x+R*L),R--;if(k<S&&(P=k,k=S,S=P),I<z&&(P=z,z=I,I=P),!A){var D=.5;S=Math.max(-D*i._length,S),k=Math.min((1+D)*i._length,k),z=Math.max(-D*v._length,z),I=Math.min((1+D)*v._length,I)}var O=Math.round(k-S),F=Math.round(I-z),G=O<=0||F<=0;if(G){var W=h.selectAll("image").data([]);W.exit().remove();return}function q(ee){var j=document.createElement("canvas");j.width=O,j.height=F;var Q=j.getContext("2d"),ne=function(He){return l.constrain(Math.round(i.c2p(M+He*f)-S),0,O)},ae=function(He){return l.constrain(Math.round(v.c2p(x+He*L)-z),0,F)},ie=e.colormodel[p.colormodel],ue=ie.colormodel||p.colormodel,xe=ie.fmt,he;for(R=0;R<y.w;R++){var ge=ne(R),me=ne(R+1);if(!(me===ge||isNaN(me)||isNaN(ge)))for(var ke=0;ke<y.h;ke++){var Ae=ae(ke),Ne=ae(ke+1);Ne===Ae||isNaN(Ne)||isNaN(Ae)||!ee(R,ke)||(he=p._scaler(ee(R,ke)),he?Q.fillStyle=ue+"("+xe(he).join(",")+")":Q.fillStyle="rgba(0,0,0,0)",Q.fillRect(ge,Ae,me-ge,Ne-Ae))}}return j}var J=h.selectAll("image").data([g]);J.enter().append("svg:image").attr({xmlns:w.svg,preserveAspectRatio:"none"}),J.exit().remove();var X=p.zsmooth===!1?e.pixelatedStyle:"";if(A){var Z=l.simpleMap(i.range,i.r2l),se=l.simpleMap(v.range,v.r2l),le=Z[1]<Z[0],oe=se[1]>se[0];if(le||oe){var U=S+O/2,V=z+F/2;X+="transform:"+b(U+"px",V+"px")+"scale("+(le?-1:1)+","+(oe?-1:1)+")"+b(-U+"px",-V+"px")+";"}}J.attr("style",X);var re=new Promise(function(ee){if(p._hasZ)ee();else if(p._hasSource)if(p._canvas&&p._canvas.el.width===T&&p._canvas.el.height===_&&p._canvas.source===p.source)ee();else{var j=document.createElement("canvas");j.width=T,j.height=_;var Q=j.getContext("2d");p._image=p._image||new Image;var ne=p._image;ne.onload=function(){Q.drawImage(ne,0,0),p._canvas={el:j,source:p.source},ee()},ne.setAttribute("src",p.source)}}).then(function(){var ee,j;if(p._hasZ)j=q(function(ae,ie){return m[ie][ae]}),ee=j.toDataURL("image/png");else if(p._hasSource)if(A)ee=p.source;else{var Q=p._canvas.el.getContext("2d"),ne=Q.getImageData(0,0,T,_).data;j=q(function(ae,ie){var ue=4*(ie*T+ae);return[ne[ue],ne[ue+1],ne[ue+2],ne[ue+3]]}),ee=j.toDataURL("image/png")}J.attr({"xlink:href":ee,height:F,width:O,x:S,y:z})});r._promises.push(re)})}},{"../../constants/xmlns_namespaces":480,"../../lib":503,"./constants":847,"@plotly/d3":58}],854:[function(t,B,H){var d=t("@plotly/d3");B.exports=function(b){d.select(b).selectAll(".im image").style("opacity",function(w){return w[0].trace.opacity})}},{"@plotly/d3":58}],855:[function(t,B,H){var d=t("../../lib/extend").extendFlat,l=t("../../lib/extend").extendDeep,b=t("../../plot_api/edit_types").overrideAll,w=t("../../plots/font_attributes"),e=t("../../components/color/attributes"),o=t("../../plots/domain").attributes,a=t("../../plots/cartesian/layout_attributes"),r=t("../../plot_api/plot_template").templatedArray,n=t("../../constants/delta.js"),c=t("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,s=w({editType:"plot",colorEditType:"plot"}),i={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:e.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},v={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},u=r("step",l({},i,{range:v}));B.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:o({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:d({},s,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:c("value")},font:d({},s,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:c("value")},increasing:{symbol:{valType:"string",dflt:n.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:n.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:n.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:n.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:d({},s,{}),editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:l({},i,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:b({range:v,visible:d({},a.visible,{dflt:!0}),tickmode:a.tickmode,nticks:a.nticks,tick0:a.tick0,dtick:a.dtick,tickvals:a.tickvals,ticktext:a.ticktext,ticks:d({},a.ticks,{dflt:"outside"}),ticklen:a.ticklen,tickwidth:a.tickwidth,tickcolor:a.tickcolor,ticklabelstep:a.ticklabelstep,showticklabels:a.showticklabels,tickfont:w({}),tickangle:a.tickangle,tickformat:a.tickformat,tickformatstops:a.tickformatstops,tickprefix:a.tickprefix,showtickprefix:a.showtickprefix,ticksuffix:a.ticksuffix,showticksuffix:a.showticksuffix,separatethousands:a.separatethousands,exponentformat:a.exponentformat,minexponent:a.minexponent,showexponent:a.showexponent,editType:"plot"},"plot"),steps:u,threshold:{line:{color:d({},i.line.color,{}),width:d({},i.line.width,{dflt:1}),editType:"plot"},thickness:d({},i.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":365,"../../constants/delta.js":473,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/layout_attributes":569,"../../plots/domain":584,"../../plots/font_attributes":585}],856:[function(t,B,H){var d=t("../../plots/plots");H.name="indicator",H.plot=function(l,b,w,e){d.plotBasePlot(H.name,l,b,w,e)},H.clean=function(l,b,w,e){d.cleanBasePlot(H.name,l,b,w,e)}},{"../../plots/plots":619}],857:[function(t,B,H){function d(l,b){var w=[],e=b.value;typeof b._lastValue!="number"&&(b._lastValue=b.value);var o=b._lastValue,a=o;return b._hasDelta&&typeof b.delta.reference=="number"&&(a=b.delta.reference),w[0]={y:e,lastY:o,delta:e-a,relativeDelta:(e-a)/a},w}B.exports={calc:d}},{}],858:[function(t,B,H){B.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],859:[function(t,B,H){var d=t("../../lib"),l=t("./attributes"),b=t("../../plots/domain").defaults,w=t("../../plot_api/plot_template"),e=t("../../plots/array_container_defaults"),o=t("./constants.js"),a=t("../../plots/cartesian/tick_value_defaults"),r=t("../../plots/cartesian/tick_mark_defaults"),n=t("../../plots/cartesian/tick_label_defaults"),c=t("../../plots/cartesian/prefix_suffix_defaults");function s(v,u,g,h){function y(R,D){return d.coerce(v,u,l,R,D)}b(u,h,y),y("mode"),u._hasNumber=u.mode.indexOf("number")!==-1,u._hasDelta=u.mode.indexOf("delta")!==-1,u._hasGauge=u.mode.indexOf("gauge")!==-1;var p=y("value");u._range=[0,typeof p=="number"?1.5*p:1];var A=new Array(2),m;u._hasNumber&&(y("number.valueformat"),y("number.font.color",h.font.color),y("number.font.family",h.font.family),y("number.font.size"),u.number.font.size===void 0&&(u.number.font.size=o.defaultNumberFontSize,A[0]=!0),y("number.prefix"),y("number.suffix"),m=u.number.font.size);var M;u._hasDelta&&(y("delta.font.color",h.font.color),y("delta.font.family",h.font.family),y("delta.font.size"),u.delta.font.size===void 0&&(u.delta.font.size=(u._hasNumber?.5:1)*(m||o.defaultNumberFontSize),A[1]=!0),y("delta.reference",u.value),y("delta.relative"),y("delta.valueformat",u.delta.relative?"2%":""),y("delta.increasing.symbol"),y("delta.increasing.color"),y("delta.decreasing.symbol"),y("delta.decreasing.color"),y("delta.position"),M=u.delta.font.size),u._scaleNumbers=(!u._hasNumber||A[0])&&(!u._hasDelta||A[1])||!1,y("title.font.color",h.font.color),y("title.font.family",h.font.family),y("title.font.size",.25*(m||M||o.defaultNumberFontSize)),y("title.text");var x,T,_,f;function L(R,D){return d.coerce(x,T,l.gauge,R,D)}function S(R,D){return d.coerce(_,f,l.gauge.axis,R,D)}if(u._hasGauge){x=v.gauge,x||(x={}),T=w.newContainer(u,"gauge"),L("shape");var k=u._isBullet=u.gauge.shape==="bullet";k||y("title.align","center");var P=u._isAngular=u.gauge.shape==="angular";P||y("align","center"),L("bgcolor",h.paper_bgcolor),L("borderwidth"),L("bordercolor"),L("bar.color"),L("bar.line.color"),L("bar.line.width");var z=o.valueThickness*(u.gauge.shape==="bullet"?.5:1);L("bar.thickness",z),e(x,T,{name:"steps",handleItemDefaults:i}),L("threshold.value"),L("threshold.thickness"),L("threshold.line.width"),L("threshold.line.color"),_={},x&&(_=x.axis||{}),f=w.newContainer(T,"axis"),S("visible"),u._range=S("range",u._range);var I={outerTicks:!0};a(_,f,S,"linear"),c(_,f,S,"linear",I),n(_,f,S,"linear",I),r(_,f,S,I)}else y("title.align","center"),y("align","center"),u._isAngular=u._isBullet=!1;u._length=null}function i(v,u){function g(h,y){return d.coerce(v,u,l.gauge.steps,h,y)}g("color"),g("line.color"),g("line.width"),g("range"),g("thickness")}B.exports={supplyDefaults:s}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_mark_defaults":579,"../../plots/cartesian/tick_value_defaults":580,"../../plots/domain":584,"./attributes":855,"./constants.js":858}],860:[function(t,B,H){B.exports={moduleType:"trace",name:"indicator",basePlotModule:t("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:t("./attributes"),supplyDefaults:t("./defaults").supplyDefaults,calc:t("./calc").calc,plot:t("./plot"),meta:{}}},{"./attributes":855,"./base_plot":856,"./calc":857,"./defaults":859,"./plot":861}],861:[function(t,B,H){var d=t("@plotly/d3"),l=t("d3-interpolate").interpolate,b=t("d3-interpolate").interpolateNumber,w=t("../../lib"),e=w.strScale,o=w.strTranslate,a=w.rad2deg,r=t("../../constants/alignment").MID_SHIFT,n=t("../../components/drawing"),c=t("./constants"),s=t("../../lib/svg_text_utils"),i=t("../../plots/cartesian/axes"),v=t("../../plots/cartesian/axis_defaults"),u=t("../../plots/cartesian/position_defaults"),g=t("../../plots/cartesian/layout_attributes"),h=t("../../components/color"),y={left:"start",center:"middle",right:"end"},p={left:0,center:.5,right:1},A=/[yzafpnµmkMGTPEZY]/;function m(I){return I&&I.duration>0}B.exports=function(R,D,O,F){var G=R._fullLayout,W;m(O)&&F&&(W=F()),w.makeTraceGroups(G._indicatorlayer,D,"trace").each(function(q){var J=q[0],X=J.trace,Z=d.select(this),se=X._hasGauge,le=X._isAngular,oe=X._isBullet,U=X.domain,V={w:G._size.w*(U.x[1]-U.x[0]),h:G._size.h*(U.y[1]-U.y[0]),l:G._size.l+G._size.w*U.x[0],r:G._size.r+G._size.w*(1-U.x[1]),t:G._size.t+G._size.h*(1-U.y[1]),b:G._size.b+G._size.h*U.y[0]},re=V.l+V.w/2,ee=V.t+V.h/2,j=Math.min(V.w/2,V.h),Q=c.innerRadius*j,ne,ae,ie,ue=X.align||"center";if(ae=ee,!se)ne=V.l+p[ue]*V.w,ie=function(_e){return S(_e,V.w,V.h)};else if(le&&(ne=re,ae=ee+j/2,ie=function(_e){return k(_e,.9*Q)}),oe){var xe=c.bulletPadding,he=1-c.bulletNumberDomainSize+xe;ne=V.l+(he+(1-he)*p[ue])*V.w,ie=function(_e){return S(_e,(c.bulletNumberDomainSize-xe)*V.w,V.h)}}T(R,Z,q,{numbersX:ne,numbersY:ae,numbersScaler:ie,transitionOpts:O,onComplete:W});var ge,me;se&&(ge={range:X.gauge.axis.range,color:X.gauge.bgcolor,line:{color:X.gauge.bordercolor,width:0},thickness:1},me={range:X.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:X.gauge.bordercolor,width:X.gauge.borderwidth},thickness:1});var ke=Z.selectAll("g.angular").data(le?q:[]);ke.exit().remove();var Ae=Z.selectAll("g.angularaxis").data(le?q:[]);Ae.exit().remove(),le&&x(R,Z,q,{radius:j,innerRadius:Q,gauge:ke,layer:Ae,size:V,gaugeBg:ge,gaugeOutline:me,transitionOpts:O,onComplete:W});var Ne=Z.selectAll("g.bullet").data(oe?q:[]);Ne.exit().remove();var He=Z.selectAll("g.bulletaxis").data(oe?q:[]);He.exit().remove(),oe&&M(R,Z,q,{gauge:Ne,layer:He,size:V,gaugeBg:ge,gaugeOutline:me,transitionOpts:O,onComplete:W});var Ge=Z.selectAll("text.title").data(q);Ge.exit().remove(),Ge.enter().append("text").classed("title",!0),Ge.attr("text-anchor",function(){return oe?y.right:y[X.title.align]}).text(X.title.text).call(n.font,X.title.font).call(s.convertToTspans,R),Ge.attr("transform",function(){var _e=V.l+V.w*p[X.title.align],De,Ye=c.titlePadding,qe=n.bBox(Ge.node());if(se){if(le)if(X.gauge.axis.visible){var Ue=n.bBox(Ae.node());De=Ue.top-Ye-qe.bottom}else De=V.t+V.h/2-j/2-qe.bottom-Ye;oe&&(De=ae-(qe.top+qe.bottom)/2,_e=V.l-c.bulletPadding*V.w)}else De=X._numbersTop-Ye-qe.bottom;return o(_e,De)})})};function M(I,R,D,O){var F=D[0].trace,G=O.gauge,W=O.layer,q=O.gaugeBg,J=O.gaugeOutline,X=O.size,Z=F.domain,se=O.transitionOpts,le=O.onComplete,oe,U,V,re,ee;G.enter().append("g").classed("bullet",!0),G.attr("transform",o(X.l,X.t)),W.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),W.selectAll("g.xbulletaxistick,path,text").remove();var j=X.h,Q=F.gauge.bar.thickness*j,ne=Z.x[0],ae=Z.x[0]+(Z.x[1]-Z.x[0])*(F._hasNumber||F._hasDelta?1-c.bulletNumberDomainSize:1);oe=L(I,F.gauge.axis),oe._id="xbulletaxis",oe.domain=[ne,ae],oe.setScale(),U=i.calcTicks(oe),V=i.makeTransTickFn(oe),re=i.getTickSigns(oe)[2],ee=X.t+X.h,oe.visible&&(i.drawTicks(I,oe,{vals:oe.ticks==="inside"?i.clipEnds(oe,U):U,layer:W,path:i.makeTickPath(oe,ee,re),transFn:V}),i.drawLabels(I,oe,{vals:U,layer:W,transFn:V,labelFns:i.makeLabelFns(oe,ee)}));function ie(Ae){Ae.attr("width",function(Ne){return Math.max(0,oe.c2p(Ne.range[1])-oe.c2p(Ne.range[0]))}).attr("x",function(Ne){return oe.c2p(Ne.range[0])}).attr("y",function(Ne){return .5*(1-Ne.thickness)*j}).attr("height",function(Ne){return Ne.thickness*j})}var ue=[q].concat(F.gauge.steps),xe=G.selectAll("g.bg-bullet").data(ue);xe.enter().append("g").classed("bg-bullet",!0).append("rect"),xe.select("rect").call(ie).call(_),xe.exit().remove();var he=G.selectAll("g.value-bullet").data([F.gauge.bar]);he.enter().append("g").classed("value-bullet",!0).append("rect"),he.select("rect").attr("height",Q).attr("y",(j-Q)/2).call(_),m(se)?he.select("rect").transition().duration(se.duration).ease(se.easing).each("end",function(){le&&le()}).each("interrupt",function(){le&&le()}).attr("width",Math.max(0,oe.c2p(Math.min(F.gauge.axis.range[1],D[0].y)))):he.select("rect").attr("width",typeof D[0].y=="number"?Math.max(0,oe.c2p(Math.min(F.gauge.axis.range[1],D[0].y))):0),he.exit().remove();var ge=D.filter(function(){return F.gauge.threshold.value||F.gauge.threshold.value===0}),me=G.selectAll("g.threshold-bullet").data(ge);me.enter().append("g").classed("threshold-bullet",!0).append("line"),me.select("line").attr("x1",oe.c2p(F.gauge.threshold.value)).attr("x2",oe.c2p(F.gauge.threshold.value)).attr("y1",(1-F.gauge.threshold.thickness)/2*j).attr("y2",(1-(1-F.gauge.threshold.thickness)/2)*j).call(h.stroke,F.gauge.threshold.line.color).style("stroke-width",F.gauge.threshold.line.width),me.exit().remove();var ke=G.selectAll("g.gauge-outline").data([J]);ke.enter().append("g").classed("gauge-outline",!0).append("rect"),ke.select("rect").call(ie).call(_),ke.exit().remove()}function x(I,R,D,O){var F=D[0].trace,G=O.size,W=O.radius,q=O.innerRadius,J=O.gaugeBg,X=O.gaugeOutline,Z=[G.l+G.w/2,G.t+G.h/2+W/2],se=O.gauge,le=O.layer,oe=O.transitionOpts,U=O.onComplete,V=Math.PI/2;function re(Ie){var Ve=F.gauge.axis.range[0],dt=F.gauge.axis.range[1],Dt=(Ie-Ve)/(dt-Ve)*Math.PI-V;return Dt<-V?-V:Dt>V?V:Dt}function ee(Ie){return d.svg.arc().innerRadius((q+W)/2-Ie/2*(W-q)).outerRadius((q+W)/2+Ie/2*(W-q)).startAngle(-V)}function j(Ie){Ie.attr("d",function(Ve){return ee(Ve.thickness).startAngle(re(Ve.range[0])).endAngle(re(Ve.range[1]))()})}var Q,ne,ae,ie;se.enter().append("g").classed("angular",!0),se.attr("transform",o(Z[0],Z[1])),le.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),le.selectAll("g.xangularaxistick,path,text").remove(),Q=L(I,F.gauge.axis),Q.type="linear",Q.range=F.gauge.axis.range,Q._id="xangularaxis",Q.ticklabeloverflow="allow",Q.setScale();var ue=function(Ie){return(Q.range[0]-Ie.x)/(Q.range[1]-Q.range[0])*Math.PI+Math.PI},xe={},he=i.makeLabelFns(Q,0),ge=he.labelStandoff;xe.xFn=function(Ie){var Ve=ue(Ie);return Math.cos(Ve)*ge},xe.yFn=function(Ie){var Ve=ue(Ie),dt=Math.sin(Ve)>0?.2:1;return-Math.sin(Ve)*(ge+Ie.fontSize*dt)+Math.abs(Math.cos(Ve))*(Ie.fontSize*r)},xe.anchorFn=function(Ie){var Ve=ue(Ie),dt=Math.cos(Ve);return Math.abs(dt)<.1?"middle":dt>0?"start":"end"},xe.heightFn=function(Ie,Ve,dt){var Dt=ue(Ie);return-.5*(1+Math.sin(Dt))*dt};var me=function(Ie){return o(Z[0]+W*Math.cos(Ie),Z[1]-W*Math.sin(Ie))};ae=function(Ie){return me(ue(Ie))};var ke=function(Ie){var Ve=ue(Ie);return me(Ve)+"rotate("+-a(Ve)+")"};if(ne=i.calcTicks(Q),ie=i.getTickSigns(Q)[2],Q.visible){ie=Q.ticks==="inside"?-1:1;var Ae=(Q.linewidth||1)/2;i.drawTicks(I,Q,{vals:ne,layer:le,path:"M"+ie*Ae+",0h"+ie*Q.ticklen,transFn:ke}),i.drawLabels(I,Q,{vals:ne,layer:le,transFn:ae,labelFns:xe})}var Ne=[J].concat(F.gauge.steps),He=se.selectAll("g.bg-arc").data(Ne);He.enter().append("g").classed("bg-arc",!0).append("path"),He.select("path").call(j).call(_),He.exit().remove();var Ge=ee(F.gauge.bar.thickness),_e=se.selectAll("g.value-arc").data([F.gauge.bar]);_e.enter().append("g").classed("value-arc",!0).append("path");var De=_e.select("path");m(oe)?(De.transition().duration(oe.duration).ease(oe.easing).each("end",function(){U&&U()}).each("interrupt",function(){U&&U()}).attrTween("d",f(Ge,re(D[0].lastY),re(D[0].y))),F._lastValue=D[0].y):De.attr("d",typeof D[0].y=="number"?Ge.endAngle(re(D[0].y)):"M0,0Z"),De.call(_),_e.exit().remove(),Ne=[];var Ye=F.gauge.threshold.value;(Ye||Ye===0)&&Ne.push({range:[Ye,Ye],color:F.gauge.threshold.color,line:{color:F.gauge.threshold.line.color,width:F.gauge.threshold.line.width},thickness:F.gauge.threshold.thickness});var qe=se.selectAll("g.threshold-arc").data(Ne);qe.enter().append("g").classed("threshold-arc",!0).append("path"),qe.select("path").call(j).call(_),qe.exit().remove();var Ue=se.selectAll("g.gauge-outline").data([X]);Ue.enter().append("g").classed("gauge-outline",!0).append("path"),Ue.select("path").call(j).call(_),Ue.exit().remove()}function T(I,R,D,O){var F=D[0].trace,G=O.numbersX,W=O.numbersY,q=F.align||"center",J=y[q],X=O.transitionOpts,Z=O.onComplete,se=w.ensureSingle(R,"g","numbers"),le,oe,U,V=[];F._hasNumber&&V.push("number"),F._hasDelta&&(V.push("delta"),F.delta.position==="left"&&V.reverse());var re=se.selectAll("text").data(V);re.enter().append("text"),re.attr("text-anchor",function(){return J}).attr("class",function(me){return me}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),re.exit().remove();function ee(me,ke,Ae,Ne){if(me.match("s")&&Ae>=0!=Ne>=0&&!ke(Ae).slice(-1).match(A)&&!ke(Ne).slice(-1).match(A)){var He=me.slice().replace("s","f").replace(/\d+/,function(_e){return parseInt(_e)-1}),Ge=L(I,{tickformat:He});return function(_e){return Math.abs(_e)<1?i.tickText(Ge,_e).text:ke(_e)}}else return ke}function j(){var me=L(I,{tickformat:F.number.valueformat},F._range);me.setScale(),i.prepTicks(me);var ke=function(_e){return i.tickText(me,_e).text},Ae=F.number.suffix,Ne=F.number.prefix,He=se.select("text.number");function Ge(){var _e=typeof D[0].y=="number"?Ne+ke(D[0].y)+Ae:"-";He.text(_e).call(n.font,F.number.font).call(s.convertToTspans,I)}return m(X)?He.transition().duration(X.duration).ease(X.easing).each("end",function(){Ge(),Z&&Z()}).each("interrupt",function(){Ge(),Z&&Z()}).attrTween("text",function(){var _e=d.select(this),De=b(D[0].lastY,D[0].y);F._lastValue=D[0].y;var Ye=ee(F.number.valueformat,ke,D[0].lastY,D[0].y);return function(qe){_e.text(Ne+Ye(De(qe))+Ae)}}):Ge(),le=P(Ne+ke(D[0].y)+Ae,F.number.font,J,I),He}function Q(){var me=L(I,{tickformat:F.delta.valueformat},F._range);me.setScale(),i.prepTicks(me);var ke=function(De){return i.tickText(me,De).text},Ae=function(De){var Ye=F.delta.relative?De.relativeDelta:De.delta;return Ye},Ne=function(De,Ye){return De===0||typeof De!="number"||isNaN(De)?"-":(De>0?F.delta.increasing.symbol:F.delta.decreasing.symbol)+Ye(De)},He=function(De){return De.delta>=0?F.delta.increasing.color:F.delta.decreasing.color};F._deltaLastValue===void 0&&(F._deltaLastValue=Ae(D[0]));var Ge=se.select("text.delta");Ge.call(n.font,F.delta.font).call(h.fill,He({delta:F._deltaLastValue}));function _e(){Ge.text(Ne(Ae(D[0]),ke)).call(h.fill,He(D[0])).call(s.convertToTspans,I)}return m(X)?Ge.transition().duration(X.duration).ease(X.easing).tween("text",function(){var De=d.select(this),Ye=Ae(D[0]),qe=F._deltaLastValue,Ue=ee(F.delta.valueformat,ke,qe,Ye),Ie=b(qe,Ye);return F._deltaLastValue=Ye,function(Ve){De.text(Ne(Ie(Ve),Ue)),De.call(h.fill,He({delta:Ie(Ve)}))}}).each("end",function(){_e(),Z&&Z()}).each("interrupt",function(){_e(),Z&&Z()}):_e(),oe=P(Ne(Ae(D[0]),ke),F.delta.font,J,I),Ge}var ne=F.mode+F.align,ae;if(F._hasDelta&&(ae=Q(),ne+=F.delta.position+F.delta.font.size+F.delta.font.family+F.delta.valueformat,ne+=F.delta.increasing.symbol+F.delta.decreasing.symbol,U=oe),F._hasNumber&&(j(),ne+=F.number.font.size+F.number.font.family+F.number.valueformat+F.number.suffix+F.number.prefix,U=le),F._hasDelta&&F._hasNumber){var ie=[(le.left+le.right)/2,(le.top+le.bottom)/2],ue=[(oe.left+oe.right)/2,(oe.top+oe.bottom)/2],xe,he,ge=.75*F.delta.font.size;F.delta.position==="left"&&(xe=z(F,"deltaPos",0,-1*(le.width*p[F.align]+oe.width*(1-p[F.align])+ge),ne,Math.min),he=ie[1]-ue[1],U={width:le.width+oe.width+ge,height:Math.max(le.height,oe.height),left:oe.left+xe,right:le.right,top:Math.min(le.top,oe.top+he),bottom:Math.max(le.bottom,oe.bottom+he)}),F.delta.position==="right"&&(xe=z(F,"deltaPos",0,le.width*(1-p[F.align])+oe.width*p[F.align]+ge,ne,Math.max),he=ie[1]-ue[1],U={width:le.width+oe.width+ge,height:Math.max(le.height,oe.height),left:le.left,right:oe.right+xe,top:Math.min(le.top,oe.top+he),bottom:Math.max(le.bottom,oe.bottom+he)}),F.delta.position==="bottom"&&(xe=null,he=oe.height,U={width:Math.max(le.width,oe.width),height:le.height+oe.height,left:Math.min(le.left,oe.left),right:Math.max(le.right,oe.right),top:le.bottom-le.height,bottom:le.bottom+oe.height}),F.delta.position==="top"&&(xe=null,he=le.top,U={width:Math.max(le.width,oe.width),height:le.height+oe.height,left:Math.min(le.left,oe.left),right:Math.max(le.right,oe.right),top:le.bottom-le.height-oe.height,bottom:le.bottom}),ae.attr({dx:xe,dy:he})}(F._hasNumber||F._hasDelta)&&se.attr("transform",function(){var me=O.numbersScaler(U);ne+=me[2];var ke=z(F,"numbersScale",1,me[0],ne,Math.min),Ae;F._scaleNumbers||(ke=1),F._isAngular?Ae=W-ke*U.bottom:Ae=W-ke*(U.top+U.bottom)/2,F._numbersTop=ke*U.top+Ae;var Ne=U[q];q==="center"&&(Ne=(U.left+U.right)/2);var He=G-ke*Ne;return He=z(F,"numbersTranslate",0,He,ne,Math.max),o(He,Ae)+e(ke)})}function _(I){I.each(function(R){h.stroke(d.select(this),R.line.color)}).each(function(R){h.fill(d.select(this),R.color)}).style("stroke-width",function(R){return R.line.width})}function f(I,R,D){return function(){var O=l(R,D);return function(F){return I.endAngle(O(F))()}}}function L(I,R,D){var O=I._fullLayout,F=w.extendFlat({type:"linear",ticks:"outside",range:D,showline:!0},R),G={type:"linear",_id:"x"+R._id},W={letter:"x",font:O.font,noHover:!0,noTickson:!0};function q(J,X){return w.coerce(F,G,g,J,X)}return v(F,G,q,W,O),u(F,G,q,W),G}function S(I,R,D){var O=Math.min(R/I.width,D/I.height);return[O,I,R+"x"+D]}function k(I,R){var D=Math.sqrt(I.width/2*(I.width/2)+I.height*I.height),O=R/D;return[O,I,R]}function P(I,R,D,O){var F=document.createElementNS("http://www.w3.org/2000/svg","text"),G=d.select(F);return G.text(I).attr("x",0).attr("y",0).attr("text-anchor",D).attr("data-unformatted",I).call(s.convertToTspans,O).call(n.font,R),n.bBox(G.node())}function z(I,R,D,O,F,G){var W="_cache"+R;I[W]&&I[W].key===F||(I[W]={key:F,value:D});var q=w.aggNums(G,null,[I[W].value,O],2);return I[W].value=q,q}},{"../../components/color":366,"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_defaults":556,"../../plots/cartesian/layout_attributes":569,"../../plots/cartesian/position_defaults":572,"./constants":858,"@plotly/d3":58,"d3-interpolate":116}],862:[function(t,B,H){var d=t("../../components/colorscale/attributes"),l=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=t("../../plots/template_attributes").hovertemplateAttrs,w=t("../mesh3d/attributes"),e=t("../../plots/attributes"),o=t("../../lib/extend").extendFlat,a=t("../../plot_api/edit_types").overrideAll;function r(s){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function n(s){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}var c=B.exports=a(o({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:r(),y:r(),z:r()},caps:{x:n(),y:n(),z:n()},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:b(),xhoverformat:l("x"),yhoverformat:l("y"),zhoverformat:l("z"),valuehoverformat:l("value",1),showlegend:o({},e.showlegend,{dflt:!1})},d("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:w.opacity,lightposition:w.lightposition,lighting:w.lighting,flatshading:w.flatshading,contour:w.contour,hoverinfo:o({},e.hoverinfo)}),"calc","nested");c.flatshading.dflt=!0,c.lighting.facenormalsepsilon.dflt=0,c.x.editType=c.y.editType=c.z.editType=c.value.editType="calc+clearAxisTypes",c.transforms=void 0},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],863:[function(t,B,H){var d=t("../../components/colorscale/calc"),l=t("../streamtube/calc").processGrid,b=t("../streamtube/calc").filter;B.exports=function(e,o){o._len=Math.min(o.x.length,o.y.length,o.z.length,o.value.length),o._x=b(o.x,o._len),o._y=b(o.y,o._len),o._z=b(o.z,o._len),o._value=b(o.value,o._len);var a=l(o);o._gridFill=a.fill,o._Xs=a.Xs,o._Ys=a.Ys,o._Zs=a.Zs,o._len=a.len;for(var r=1/0,n=-1/0,c=0;c<o._len;c++){var s=o._value[c];r=Math.min(r,s),n=Math.max(n,s)}o._minValues=r,o._maxValues=n,o._vMin=o.isomin===void 0||o.isomin===null?r:o.isomin,o._vMax=o.isomax===void 0||o.isomin===null?n:o.isomax,d(e,o,{vals:[o._vMin,o._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374,"../streamtube/calc":1041}],864:[function(t,B,H){var d=t("../../../stackgl_modules").gl_mesh3d,l=t("../../lib/gl_format_color").parseColorScale,b=t("../../lib/str2rgbarray"),w=t("../../components/colorscale").extractOpts,e=t("../../plots/gl3d/zip3"),o=function(i,v){for(var u=v.length-1;u>0;u--){var g=Math.min(v[u],v[u-1]),h=Math.max(v[u],v[u-1]);if(h>g&&g<i&&i<=h)return{id:u,distRatio:(h-i)/(h-g)}}return{id:0,distRatio:0}};function a(i,v,u){this.scene=i,this.uid=u,this.mesh=v,this.name="",this.data=null,this.showContour=!1}var r=a.prototype;r.handlePick=function(i){if(i.object===this.mesh){var v=i.data.index,u=this.data._meshX[v],g=this.data._meshY[v],h=this.data._meshZ[v],y=this.data._Ys.length,p=this.data._Zs.length,A=o(u,this.data._Xs).id,m=o(g,this.data._Ys).id,M=o(h,this.data._Zs).id,x=i.index=M+p*m+p*y*A;i.traceCoordinate=[this.data._meshX[x],this.data._meshY[x],this.data._meshZ[x],this.data._value[x]];var T=this.data.hovertext||this.data.text;return Array.isArray(T)&&T[x]!==void 0?i.textLabel=T[x]:T&&(i.textLabel=T),!0}},r.update=function(i){var v=this.scene,u=v.fullSceneLayout;this.data=c(i);function g(m,M,x,T){return M.map(function(_){return m.d2l(_,0,T)*x})}var h=e(g(u.xaxis,i._meshX,v.dataScale[0],i.xcalendar),g(u.yaxis,i._meshY,v.dataScale[1],i.ycalendar),g(u.zaxis,i._meshZ,v.dataScale[2],i.zcalendar)),y=e(i._meshI,i._meshJ,i._meshK),p={positions:h,cells:y,lightPosition:[i.lightposition.x,i.lightposition.y,i.lightposition.z],ambient:i.lighting.ambient,diffuse:i.lighting.diffuse,specular:i.lighting.specular,roughness:i.lighting.roughness,fresnel:i.lighting.fresnel,vertexNormalsEpsilon:i.lighting.vertexnormalsepsilon,faceNormalsEpsilon:i.lighting.facenormalsepsilon,opacity:i.opacity,contourEnable:i.contour.show,contourColor:b(i.contour.color).slice(0,3),contourWidth:i.contour.width,useFacetNormals:i.flatshading},A=w(i);p.vertexIntensity=i._meshIntensity,p.vertexIntensityBounds=[A.min,A.max],p.colormap=l(i),this.mesh.update(p)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var n=["xyz","xzy","yxz","yzx","zxy","zyx"];function c(i){i._meshI=[],i._meshJ=[],i._meshK=[];var v=i.surface.show,u=i.spaceframe.show,g=i.surface.fill,h=i.spaceframe.fill,y=!1,p=!1,A=0,m,M,x=i._Xs,T=i._Ys,_=i._Zs,f=x.length,L=T.length,S=_.length,k=n.indexOf(i._gridFill.replace(/-/g,"").replace(/\+/g,"")),P=function(Lt,St,it){switch(k){case 5:return it+S*St+S*L*Lt;case 4:return it+S*Lt+S*f*St;case 3:return St+L*it+L*S*Lt;case 2:return St+L*Lt+L*f*it;case 1:return Lt+f*it+f*S*St;default:return Lt+f*St+f*L*it}},z=i._minValues,I=i._maxValues,R=i._vMin,D=i._vMax,O,F,G,W;function q(Lt,St,it){for(var ht=W.length,Qe=M;Qe<ht;Qe++)if(Lt===O[Qe]&&St===F[Qe]&&it===G[Qe])return Qe;return-1}function J(){M=m}function X(){O=[],F=[],G=[],W=[],m=0,J()}function Z(Lt,St,it,ht){return O.push(Lt),F.push(St),G.push(it),W.push(ht),m++,m-1}function se(Lt,St,it){return i._meshI.push(Lt),i._meshJ.push(St),i._meshK.push(it),A++,A-1}function le(Lt,St,it){for(var ht=[],Qe=0;Qe<Lt.length;Qe++)ht[Qe]=(Lt[Qe]+St[Qe]+it[Qe])/3;return ht}function oe(Lt,St,it){for(var ht=[],Qe=0;Qe<Lt.length;Qe++)ht[Qe]=Lt[Qe]*(1-it)+it*St[Qe];return ht}var U;function V(Lt){U=Lt}function re(Lt,St){var it=Lt[0],ht=Lt[1],Qe=Lt[2],Ce=le(it,ht,Qe),je=Math.sqrt(1-U),rt=oe(Ce,it,je),ut=oe(Ce,ht,je),Pt=oe(Ce,Qe,je),Tt=St[0],Ot=St[1],Kt=St[2];return{xyzv:[[it,ht,ut],[ut,rt,it],[ht,Qe,Pt],[Pt,ut,ht],[Qe,it,rt],[rt,Pt,Qe]],abc:[[Tt,Ot,-1],[-1,-1,Tt],[Ot,Kt,-1],[-1,-1,Ot],[Kt,Tt,-1],[-1,-1,Kt]]}}function ee(Lt,St){return Lt==="all"||Lt===null?!0:Lt.indexOf(St)>-1}function j(Lt,St){return Lt===null?St:Lt}function Q(Lt,St,it){J();var ht=[St],Qe=[it];if(U>=1)ht=[St],Qe=[it];else if(U>0){var Ce=re(St,it);ht=Ce.xyzv,Qe=Ce.abc}for(var je=0;je<ht.length;je++){St=ht[je],it=Qe[je];for(var rt=[],ut=0;ut<3;ut++){var Pt=St[ut][0],Tt=St[ut][1],Ot=St[ut][2],Kt=St[ut][3],Bt=it[ut]>-1?it[ut]:q(Pt,Tt,Ot);Bt>-1?rt[ut]=Bt:rt[ut]=Z(Pt,Tt,Ot,j(Lt,Kt))}se(rt[0],rt[1],rt[2])}}function ne(Lt,St,it){var ht=function(Qe,Ce,je){Q(Lt,[St[Qe],St[Ce],St[je]],[it[Qe],it[Ce],it[je]])};ht(0,1,2),ht(2,3,0)}function ae(Lt,St,it){var ht=function(Qe,Ce,je){Q(Lt,[St[Qe],St[Ce],St[je]],[it[Qe],it[Ce],it[je]])};ht(0,1,2),ht(3,0,1),ht(2,3,0),ht(1,2,3)}function ie(Lt,St,it,ht){var Qe=Lt[3];Qe<it&&(Qe=it),Qe>ht&&(Qe=ht);for(var Ce=(Lt[3]-Qe)/(Lt[3]-St[3]+1e-9),je=[],rt=0;rt<4;rt++)je[rt]=(1-Ce)*Lt[rt]+Ce*St[rt];return je}function ue(Lt,St,it){return Lt>=St&&Lt<=it}function xe(Lt){var St=.001*(D-R);return Lt>=R-St&&Lt<=D+St}function he(Lt){for(var St=[],it=0;it<4;it++){var ht=Lt[it];St.push([i._x[ht],i._y[ht],i._z[ht],i._value[ht]])}return St}var ge=3;function me(Lt,St,it,ht,Qe,Ce){Ce||(Ce=1),it=[-1,-1,-1];var je=!1,rt=[ue(St[0][3],ht,Qe),ue(St[1][3],ht,Qe),ue(St[2][3],ht,Qe)];if(!rt[0]&&!rt[1]&&!rt[2])return!1;var ut=function(Tt,Ot,Kt){return xe(Ot[0][3])&&xe(Ot[1][3])&&xe(Ot[2][3])?(Q(Tt,Ot,Kt),!0):Ce<ge?me(Tt,Ot,Kt,R,D,++Ce):!1};if(rt[0]&&rt[1]&&rt[2])return ut(Lt,St,it)||je;var Pt=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(Tt){if(rt[Tt[0]]&&rt[Tt[1]]&&!rt[Tt[2]]){var Ot=St[Tt[0]],Kt=St[Tt[1]],Bt=St[Tt[2]],Zt=ie(Bt,Ot,ht,Qe),Je=ie(Bt,Kt,ht,Qe);je=ut(Lt,[Je,Zt,Ot],[-1,-1,it[Tt[0]]])||je,je=ut(Lt,[Ot,Kt,Je],[it[Tt[0]],it[Tt[1]],-1])||je,Pt=!0}}),Pt||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(Tt){if(rt[Tt[0]]&&!rt[Tt[1]]&&!rt[Tt[2]]){var Ot=St[Tt[0]],Kt=St[Tt[1]],Bt=St[Tt[2]],Zt=ie(Kt,Ot,ht,Qe),Je=ie(Bt,Ot,ht,Qe);je=ut(Lt,[Je,Zt,Ot],[-1,-1,it[Tt[0]]])||je,Pt=!0}}),je}function ke(Lt,St,it,ht){var Qe=!1,Ce=he(St),je=[ue(Ce[0][3],it,ht),ue(Ce[1][3],it,ht),ue(Ce[2][3],it,ht),ue(Ce[3][3],it,ht)];if(!je[0]&&!je[1]&&!je[2]&&!je[3])return Qe;if(je[0]&&je[1]&&je[2]&&je[3])return p&&(Qe=ae(Lt,Ce,St)||Qe),Qe;var rt=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(ut){if(je[ut[0]]&&je[ut[1]]&&je[ut[2]]&&!je[ut[3]]){var Pt=Ce[ut[0]],Tt=Ce[ut[1]],Ot=Ce[ut[2]],Kt=Ce[ut[3]];if(p)Qe=Q(Lt,[Pt,Tt,Ot],[St[ut[0]],St[ut[1]],St[ut[2]]])||Qe;else{var Bt=ie(Kt,Pt,it,ht),Zt=ie(Kt,Tt,it,ht),Je=ie(Kt,Ot,it,ht);Qe=Q(null,[Bt,Zt,Je],[-1,-1,-1])||Qe}rt=!0}}),rt||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(ut){if(je[ut[0]]&&je[ut[1]]&&!je[ut[2]]&&!je[ut[3]]){var Pt=Ce[ut[0]],Tt=Ce[ut[1]],Ot=Ce[ut[2]],Kt=Ce[ut[3]],Bt=ie(Ot,Pt,it,ht),Zt=ie(Ot,Tt,it,ht),Je=ie(Kt,Tt,it,ht),pt=ie(Kt,Pt,it,ht);p?(Qe=Q(Lt,[Pt,pt,Bt],[St[ut[0]],-1,-1])||Qe,Qe=Q(Lt,[Tt,Zt,Je],[St[ut[1]],-1,-1])||Qe):Qe=ne(null,[Bt,Zt,Je,pt],[-1,-1,-1,-1])||Qe,rt=!0}}),rt)||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(ut){if(je[ut[0]]&&!je[ut[1]]&&!je[ut[2]]&&!je[ut[3]]){var Pt=Ce[ut[0]],Tt=Ce[ut[1]],Ot=Ce[ut[2]],Kt=Ce[ut[3]],Bt=ie(Tt,Pt,it,ht),Zt=ie(Ot,Pt,it,ht),Je=ie(Kt,Pt,it,ht);p?(Qe=Q(Lt,[Pt,Bt,Zt],[St[ut[0]],-1,-1])||Qe,Qe=Q(Lt,[Pt,Zt,Je],[St[ut[0]],-1,-1])||Qe,Qe=Q(Lt,[Pt,Je,Bt],[St[ut[0]],-1,-1])||Qe):Qe=Q(null,[Bt,Zt,Je],[-1,-1,-1])||Qe,rt=!0}}),Qe}function Ae(Lt,St,it,ht,Qe,Ce,je,rt,ut,Pt,Tt){var Ot=!1;return y&&(ee(Lt,"A")&&(Ot=ke(null,[St,it,ht,Ce],Pt,Tt)||Ot),ee(Lt,"B")&&(Ot=ke(null,[it,ht,Qe,ut],Pt,Tt)||Ot),ee(Lt,"C")&&(Ot=ke(null,[it,Ce,je,ut],Pt,Tt)||Ot),ee(Lt,"D")&&(Ot=ke(null,[ht,Ce,rt,ut],Pt,Tt)||Ot),ee(Lt,"E")&&(Ot=ke(null,[it,ht,Ce,ut],Pt,Tt)||Ot)),p&&(Ot=ke(Lt,[it,ht,Ce,ut],Pt,Tt)||Ot),Ot}function Ne(Lt,St,it,ht,Qe,Ce,je,rt){return[rt[0]===!0?!0:me(Lt,he([St,it,ht]),[St,it,ht],Ce,je),rt[1]===!0?!0:me(Lt,he([ht,Qe,St]),[ht,Qe,St],Ce,je)]}function He(Lt,St,it,ht,Qe,Ce,je,rt,ut){return rt?Ne(Lt,St,it,Qe,ht,Ce,je,ut):Ne(Lt,it,Qe,ht,St,Ce,je,ut)}function Ge(Lt,St,it,ht,Qe,Ce,je){var rt=!1,ut,Pt,Tt,Ot,Kt=function(){rt=me(Lt,[ut,Pt,Tt],[-1,-1,-1],Qe,Ce)||rt,rt=me(Lt,[Tt,Ot,ut],[-1,-1,-1],Qe,Ce)||rt},Bt=je[0],Zt=je[1],Je=je[2];return Bt&&(ut=oe(he([P(St,it-0,ht-0)])[0],he([P(St-1,it-0,ht-0)])[0],Bt),Pt=oe(he([P(St,it-0,ht-1)])[0],he([P(St-1,it-0,ht-1)])[0],Bt),Tt=oe(he([P(St,it-1,ht-1)])[0],he([P(St-1,it-1,ht-1)])[0],Bt),Ot=oe(he([P(St,it-1,ht-0)])[0],he([P(St-1,it-1,ht-0)])[0],Bt),Kt()),Zt&&(ut=oe(he([P(St-0,it,ht-0)])[0],he([P(St-0,it-1,ht-0)])[0],Zt),Pt=oe(he([P(St-0,it,ht-1)])[0],he([P(St-0,it-1,ht-1)])[0],Zt),Tt=oe(he([P(St-1,it,ht-1)])[0],he([P(St-1,it-1,ht-1)])[0],Zt),Ot=oe(he([P(St-1,it,ht-0)])[0],he([P(St-1,it-1,ht-0)])[0],Zt),Kt()),Je&&(ut=oe(he([P(St-0,it-0,ht)])[0],he([P(St-0,it-0,ht-1)])[0],Je),Pt=oe(he([P(St-0,it-1,ht)])[0],he([P(St-0,it-1,ht-1)])[0],Je),Tt=oe(he([P(St-1,it-1,ht)])[0],he([P(St-1,it-1,ht-1)])[0],Je),Ot=oe(he([P(St-1,it-0,ht)])[0],he([P(St-1,it-0,ht-1)])[0],Je),Kt()),rt}function _e(Lt,St,it,ht,Qe,Ce,je,rt,ut,Pt,Tt,Ot){var Kt=Lt;return Ot?(y&&Lt==="even"&&(Kt=null),Ae(Kt,St,it,ht,Qe,Ce,je,rt,ut,Pt,Tt)):(y&&Lt==="odd"&&(Kt=null),Ae(Kt,ut,rt,je,Ce,Qe,ht,it,St,Pt,Tt))}function De(Lt,St,it,ht,Qe){for(var Ce=[],je=0,rt=0;rt<St.length;rt++)for(var ut=St[rt],Pt=1;Pt<S;Pt++)for(var Tt=1;Tt<L;Tt++)Ce.push(He(Lt,P(ut,Tt-1,Pt-1),P(ut,Tt-1,Pt),P(ut,Tt,Pt-1),P(ut,Tt,Pt),it,ht,(ut+Tt+Pt)%2,Qe&&Qe[je]?Qe[je]:[])),je++;return Ce}function Ye(Lt,St,it,ht,Qe){for(var Ce=[],je=0,rt=0;rt<St.length;rt++)for(var ut=St[rt],Pt=1;Pt<f;Pt++)for(var Tt=1;Tt<S;Tt++)Ce.push(He(Lt,P(Pt-1,ut,Tt-1),P(Pt,ut,Tt-1),P(Pt-1,ut,Tt),P(Pt,ut,Tt),it,ht,(Pt+ut+Tt)%2,Qe&&Qe[je]?Qe[je]:[])),je++;return Ce}function qe(Lt,St,it,ht,Qe){for(var Ce=[],je=0,rt=0;rt<St.length;rt++)for(var ut=St[rt],Pt=1;Pt<L;Pt++)for(var Tt=1;Tt<f;Tt++)Ce.push(He(Lt,P(Tt-1,Pt-1,ut),P(Tt-1,Pt,ut),P(Tt,Pt-1,ut),P(Tt,Pt,ut),it,ht,(Tt+Pt+ut)%2,Qe&&Qe[je]?Qe[je]:[])),je++;return Ce}function Ue(Lt,St,it){for(var ht=1;ht<S;ht++)for(var Qe=1;Qe<L;Qe++)for(var Ce=1;Ce<f;Ce++)_e(Lt,P(Ce-1,Qe-1,ht-1),P(Ce-1,Qe-1,ht),P(Ce-1,Qe,ht-1),P(Ce-1,Qe,ht),P(Ce,Qe-1,ht-1),P(Ce,Qe-1,ht),P(Ce,Qe,ht-1),P(Ce,Qe,ht),St,it,(Ce+Qe+ht)%2)}function Ie(Lt,St,it){p=!0,Ue(Lt,St,it),p=!1}function Ve(Lt,St,it){y=!0,Ue(Lt,St,it),y=!1}function dt(Lt,St,it,ht,Qe,Ce){for(var je=[],rt=0,ut=0;ut<St.length;ut++)for(var Pt=St[ut],Tt=1;Tt<S;Tt++)for(var Ot=1;Ot<L;Ot++)je.push(Ge(Lt,Pt,Ot,Tt,it,ht,Qe[ut],Ce&&Ce[rt]?Ce[rt]:[])),rt++;return je}function Dt(Lt,St,it,ht,Qe,Ce){for(var je=[],rt=0,ut=0;ut<St.length;ut++)for(var Pt=St[ut],Tt=1;Tt<f;Tt++)for(var Ot=1;Ot<S;Ot++)je.push(Ge(Lt,Tt,Pt,Ot,it,ht,Qe[ut],Ce&&Ce[rt]?Ce[rt]:[])),rt++;return je}function Yt(Lt,St,it,ht,Qe,Ce){for(var je=[],rt=0,ut=0;ut<St.length;ut++)for(var Pt=St[ut],Tt=1;Tt<L;Tt++)for(var Ot=1;Ot<f;Ot++)je.push(Ge(Lt,Ot,Tt,Pt,it,ht,Qe[ut],Ce&&Ce[rt]?Ce[rt]:[])),rt++;return je}function kt(Lt,St){for(var it=[],ht=Lt;ht<St;ht++)it.push(ht);return it}function Ft(){for(var Lt=0;Lt<f;Lt++)for(var St=0;St<L;St++)for(var it=0;it<S;it++){var ht=P(Lt,St,it);Z(i._x[ht],i._y[ht],i._z[ht],i._value[ht])}}function Nt(){X(),Ft();var Lt=null;if(u&&h&&(V(h),Ie(Lt,R,D)),v&&g){V(g);for(var St=i.surface.pattern,it=i.surface.count,ht=0;ht<it;ht++){var Qe=it===1?.5:ht/(it-1),Ce=(1-Qe)*R+Qe*D,je=Math.abs(Ce-z),rt=Math.abs(Ce-I),ut=je>rt?[z,Ce]:[Ce,I];Ve(St,ut[0],ut[1])}}var Pt=[[Math.min(R,I),Math.max(R,I)],[Math.min(z,D),Math.max(z,D)]];["x","y","z"].forEach(function(Tt){for(var Ot=[],Kt=0;Kt<Pt.length;Kt++){var Bt=0,Zt=Pt[Kt][0],Je=Pt[Kt][1],pt=i.slices[Tt];if(pt.show&&pt.fill){V(pt.fill);var Et=[],ar=[],vr=[];if(pt.locations.length)for(var ir=0;ir<pt.locations.length;ir++){var dr=o(pt.locations[ir],Tt==="x"?x:Tt==="y"?T:_);dr.distRatio===0?Et.push(dr.id):dr.id>0&&(ar.push(dr.id),Tt==="x"?vr.push([dr.distRatio,0,0]):Tt==="y"?vr.push([0,dr.distRatio,0]):vr.push([0,0,dr.distRatio]))}else Tt==="x"?Et=kt(1,f-1):Tt==="y"?Et=kt(1,L-1):Et=kt(1,S-1);ar.length>0&&(Tt==="x"?Ot[Bt]=dt(Lt,ar,Zt,Je,vr,Ot[Bt]):Tt==="y"?Ot[Bt]=Dt(Lt,ar,Zt,Je,vr,Ot[Bt]):Ot[Bt]=Yt(Lt,ar,Zt,Je,vr,Ot[Bt]),Bt++),Et.length>0&&(Tt==="x"?Ot[Bt]=De(Lt,Et,Zt,Je,Ot[Bt]):Tt==="y"?Ot[Bt]=Ye(Lt,Et,Zt,Je,Ot[Bt]):Ot[Bt]=qe(Lt,Et,Zt,Je,Ot[Bt]),Bt++)}var Pr=i.caps[Tt];Pr.show&&Pr.fill&&(V(Pr.fill),Tt==="x"?Ot[Bt]=De(Lt,[0,f-1],Zt,Je,Ot[Bt]):Tt==="y"?Ot[Bt]=Ye(Lt,[0,L-1],Zt,Je,Ot[Bt]):Ot[Bt]=qe(Lt,[0,S-1],Zt,Je,Ot[Bt]),Bt++)}}),A===0&&X(),i._meshX=O,i._meshY=F,i._meshZ=G,i._meshIntensity=W,i._Xs=x,i._Ys=T,i._Zs=_}return Nt(),i}function s(i,v){var u=i.glplot.gl,g=d({gl:u}),h=new a(i,g,v.uid);return g._trace=h,h.update(v),i.glplot.add(g),h}B.exports={findNearestOnAxis:o,generateIsoMeshes:c,createIsosurfaceTrace:s}},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609}],865:[function(t,B,H){var d=t("../../lib"),l=t("../../registry"),b=t("./attributes"),w=t("../../components/colorscale/defaults");function e(a,r,n,c){function s(i,v){return d.coerce(a,r,b,i,v)}o(a,r,n,c,s)}function o(a,r,n,c,s){var i=s("isomin"),v=s("isomax");v!=null&&i!==void 0&&i!==null&&i>v&&(r.isomin=null,r.isomax=null);var u=s("x"),g=s("y"),h=s("z"),y=s("value");if(!u||!u.length||!g||!g.length||!h||!h.length||!y||!y.length){r.visible=!1;return}var p=l.getComponentMethod("calendars","handleTraceDefaults");p(a,r,["x","y","z"],c),s("valuehoverformat"),["x","y","z"].forEach(function(x){s(x+"hoverformat");var T="caps."+x,_=s(T+".show");_&&s(T+".fill");var f="slices."+x,L=s(f+".show");L&&(s(f+".fill"),s(f+".locations"))});var A=s("spaceframe.show");A&&s("spaceframe.fill");var m=s("surface.show");m&&(s("surface.count"),s("surface.fill"),s("surface.pattern"));var M=s("contour.show");M&&(s("contour.color"),s("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(x){s(x)}),w(a,r,c,s,{prefix:"",cLetter:"c"}),r._length=null}B.exports={supplyDefaults:e,supplyIsoDefaults:o}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":862}],866:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults").supplyDefaults,calc:t("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:t("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":862,"./calc":863,"./convert":864,"./defaults":865}],867:[function(t,B,H){var d=t("../../components/colorscale/attributes"),l=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=t("../../plots/template_attributes").hovertemplateAttrs,w=t("../surface/attributes"),e=t("../../plots/attributes"),o=t("../../lib/extend").extendFlat;B.exports=o({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:b({editType:"calc"}),xhoverformat:l("x"),yhoverformat:l("y"),zhoverformat:l("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},d("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:w.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:o({},w.contours.x.show,{}),color:w.contours.x.color,width:w.contours.x.width,editType:"calc"},lightposition:{x:o({},w.lightposition.x,{dflt:1e5}),y:o({},w.lightposition.y,{dflt:1e5}),z:o({},w.lightposition.z,{dflt:0}),editType:"calc"},lighting:o({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},w.lighting),hoverinfo:o({},e.hoverinfo,{editType:"calc"}),showlegend:o({},e.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../surface/attributes":1057}],868:[function(t,B,H){var d=t("../../components/colorscale/calc");B.exports=function(b,w){w.intensity&&d(b,w,{vals:w.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],869:[function(t,B,H){var d=t("../../../stackgl_modules").gl_mesh3d,l=t("../../../stackgl_modules").delaunay_triangulate,b=t("../../../stackgl_modules").alpha_shape,w=t("../../../stackgl_modules").convex_hull,e=t("../../lib/gl_format_color").parseColorScale,o=t("../../lib/str2rgbarray"),a=t("../../components/colorscale").extractOpts,r=t("../../plots/gl3d/zip3");function n(y,p,A){this.scene=y,this.uid=A,this.mesh=p,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var c=n.prototype;c.handlePick=function(y){if(y.object===this.mesh){var p=y.index=y.data.index;y.data._cellCenter?y.traceCoordinate=y.data.dataCoordinate:y.traceCoordinate=[this.data.x[p],this.data.y[p],this.data.z[p]];var A=this.data.hovertext||this.data.text;return Array.isArray(A)&&A[p]!==void 0?y.textLabel=A[p]:A&&(y.textLabel=A),!0}};function s(y){for(var p=[],A=y.length,m=0;m<A;m++)p[m]=o(y[m]);return p}function i(y,p,A,m){for(var M=[],x=p.length,T=0;T<x;T++)M[T]=y.d2l(p[T],0,m)*A;return M}function v(y){for(var p=[],A=y.length,m=0;m<A;m++)p[m]=Math.round(y[m]);return p}function u(y,p){for(var A=["x","y","z"].indexOf(y),m=[],M=p.length,x=0;x<M;x++)m[x]=[p[x][(A+1)%3],p[x][(A+2)%3]];return l(m)}function g(y,p){for(var A=y.length,m=0;m<A;m++)if(y[m]<=-.5||y[m]>=p-.5)return!1;return!0}c.update=function(y){var p=this.scene,A=p.fullSceneLayout;this.data=y;var m=y.x.length,M=r(i(A.xaxis,y.x,p.dataScale[0],y.xcalendar),i(A.yaxis,y.y,p.dataScale[1],y.ycalendar),i(A.zaxis,y.z,p.dataScale[2],y.zcalendar)),x;if(y.i&&y.j&&y.k){if(y.i.length!==y.j.length||y.j.length!==y.k.length||!g(y.i,m)||!g(y.j,m)||!g(y.k,m))return;x=r(v(y.i),v(y.j),v(y.k))}else y.alphahull===0?x=w(M):y.alphahull>0?x=b(y.alphahull,M):x=u(y.delaunayaxis,M);var T={positions:M,cells:x,lightPosition:[y.lightposition.x,y.lightposition.y,y.lightposition.z],ambient:y.lighting.ambient,diffuse:y.lighting.diffuse,specular:y.lighting.specular,roughness:y.lighting.roughness,fresnel:y.lighting.fresnel,vertexNormalsEpsilon:y.lighting.vertexnormalsepsilon,faceNormalsEpsilon:y.lighting.facenormalsepsilon,opacity:y.opacity,contourEnable:y.contour.show,contourColor:o(y.contour.color).slice(0,3),contourWidth:y.contour.width,useFacetNormals:y.flatshading};if(y.intensity){var _=a(y);this.color="#fff";var f=y.intensitymode;T[f+"Intensity"]=y.intensity,T[f+"IntensityBounds"]=[_.min,_.max],T.colormap=e(y)}else y.vertexcolor?(this.color=y.vertexcolor[0],T.vertexColors=s(y.vertexcolor)):y.facecolor?(this.color=y.facecolor[0],T.cellColors=s(y.facecolor)):(this.color=y.color,T.meshColor=o(y.color));this.mesh.update(T)},c.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function h(y,p){var A=y.glplot.gl,m=d({gl:A}),M=new n(y,m,p.uid);return m._trace=M,M.update(p),y.glplot.add(m),M}B.exports=h},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609}],870:[function(t,B,H){var d=t("../../registry"),l=t("../../lib"),b=t("../../components/colorscale/defaults"),w=t("./attributes");B.exports=function(o,a,r,n){function c(g,h){return l.coerce(o,a,w,g,h)}function s(g){var h=g.map(function(y){var p=c(y);return p&&l.isArrayOrTypedArray(p)?p:null});return h.every(function(y){return y&&y.length===h[0].length})&&h}var i=s(["x","y","z"]);if(!i){a.visible=!1;return}if(s(["i","j","k"]),a.i&&(!a.j||!a.k)||a.j&&(!a.k||!a.i)||a.k&&(!a.i||!a.j)){a.visible=!1;return}var v=d.getComponentMethod("calendars","handleTraceDefaults");v(o,a,["x","y","z"],n),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(g){c(g)});var u=c("contour.show");u&&(c("contour.color"),c("contour.width")),"intensity"in o?(c("intensity"),c("intensitymode"),b(o,a,n,c,{prefix:"",cLetter:"c"})):(a.showscale=!1,"facecolor"in o?c("facecolor"):"vertexcolor"in o?c("vertexcolor"):c("color",r)),c("text"),c("hovertext"),c("hovertemplate"),c("xhoverformat"),c("yhoverformat"),c("zhoverformat"),a._length=null}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":867}],871:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:t("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":867,"./calc":868,"./convert":869,"./defaults":870}],872:[function(t,B,H){var d=t("../../lib").extendFlat,l=t("../scatter/attributes"),b=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,w=t("../../components/drawing/attributes").dash,e=t("../../components/fx/attributes"),o=t("../../constants/delta.js"),a=o.INCREASING.COLOR,r=o.DECREASING.COLOR,n=l.line;function c(s){return{line:{color:d({},n.color,{dflt:s}),width:n.width,dash:w,editType:"style"},editType:"style"}}B.exports={xperiod:l.xperiod,xperiod0:l.xperiod0,xperiodalignment:l.xperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:d({},n.width,{}),dash:d({},w,{}),editType:"style"},increasing:c(a),decreasing:c(r),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:d({},e.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":387,"../../components/fx/attributes":397,"../../constants/delta.js":473,"../../lib":503,"../../plots/cartesian/axis_format_attributes":557,"../scatter/attributes":926}],873:[function(t,B,H){var d=t("../../lib"),l=d._,b=t("../../plots/cartesian/axes"),w=t("../../plots/cartesian/align_period"),e=t("../../constants/numerical").BADNUM;function o(c,s){var i=b.getFromId(c,s.xaxis),v=b.getFromId(c,s.yaxis),u=n(c,i,s),g=s._minDiff;s._minDiff=null;var h=s._origX;s._origX=null;var y=s._xcalc;s._xcalc=null;var p=r(c,s,h,y,v,a);return s._extremes[i._id]=b.findExtremes(i,y,{vpad:g/2}),p.length?(d.extendFlat(p[0].t,{wHover:g/2,tickLen:u}),p):[{t:{empty:!0}}]}function a(c,s,i,v){return{o:c,h:s,l:i,c:v}}function r(c,s,i,v,u,g){for(var h=u.makeCalcdata(s,"open"),y=u.makeCalcdata(s,"high"),p=u.makeCalcdata(s,"low"),A=u.makeCalcdata(s,"close"),m=Array.isArray(s.text),M=Array.isArray(s.hovertext),x=!0,T=null,_=!!s.xperiodalignment,f=[],L=0;L<v.length;L++){var S=v[L],k=h[L],P=y[L],z=p[L],I=A[L];if(S!==e&&k!==e&&P!==e&&z!==e&&I!==e){I===k?T!==null&&I!==T&&(x=I>T):x=I>k,T=I;var R=g(k,P,z,I);R.pos=S,R.yc=(k+I)/2,R.i=L,R.dir=x?"increasing":"decreasing",R.x=R.pos,R.y=[z,P],_&&(R.orig_p=i[L]),m&&(R.tx=s.text[L]),M&&(R.htx=s.hovertext[L]),f.push(R)}else f.push({pos:S,empty:!0})}return s._extremes[u._id]=b.findExtremes(u,d.concat(p,y),{padded:!0}),f.length&&(f[0].t={labels:{open:l(c,"open:")+" ",high:l(c,"high:")+" ",low:l(c,"low:")+" ",close:l(c,"close:")+" "}}),f}function n(c,s,i){var v=i._minDiff;if(!v){var u=c._fullData,g=[];v=1/0;var h;for(h=0;h<u.length;h++){var y=u[h];if(y.type==="ohlc"&&y.visible===!0&&y.xaxis===s._id){g.push(y);var p=s.makeCalcdata(y,"x");y._origX=p;var A=w(i,s,"x",p).vals;y._xcalc=A;var m=d.distinctVals(A).minDiff;m&&isFinite(m)&&(v=Math.min(v,m))}}for(v===1/0&&(v=1),h=0;h<g.length;h++)g[h]._minDiff=v}return v*i.tickwidth}B.exports={calc:o,calcCommon:r}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554}],874:[function(t,B,H){var d=t("../../lib"),l=t("./ohlc_defaults"),b=t("../scatter/period_defaults"),w=t("./attributes");B.exports=function(a,r,n,c){function s(v,u){return d.coerce(a,r,w,v,u)}var i=l(a,r,s,c);if(!i){r.visible=!1;return}b(a,r,c,s,{x:!0}),s("xhoverformat"),s("yhoverformat"),s("line.width"),s("line.dash"),e(a,r,s,"increasing"),e(a,r,s,"decreasing"),s("text"),s("hovertext"),s("tickwidth"),c._requestRangeslider[r.xaxis]=!0};function e(o,a,r,n){r(n+".line.color"),r(n+".line.width",a.line.width),r(n+".line.dash",a.line.dash)}},{"../../lib":503,"../scatter/period_defaults":946,"./attributes":872,"./ohlc_defaults":877}],875:[function(t,B,H){var d=t("../../plots/cartesian/axes"),l=t("../../lib"),b=t("../../components/fx"),w=t("../../components/color"),e=t("../../lib").fillText,o=t("../../constants/delta.js"),a={increasing:o.INCREASING.SYMBOL,decreasing:o.DECREASING.SYMBOL};function r(i,v,u,g){var h=i.cd,y=h[0].trace;return y.hoverlabel.split?c(i,v,u,g):s(i,v,u,g)}function n(i,v,u,g){var h=i.cd,y=i.xa,p=h[0].trace,A=h[0].t,m=p.type,M=m==="ohlc"?"l":"min",x=m==="ohlc"?"h":"max",T,_,f=A.bPos||0,L=function(q){return q.pos+f-v},S=A.bdPos||A.tickLen,k=A.wHover,P=Math.min(1,S/Math.abs(y.r2c(y.range[1])-y.r2c(y.range[0])));T=i.maxHoverDistance-P,_=i.maxSpikeDistance-P;function z(q){var J=L(q);return b.inbox(J-k,J+k,T)}function I(q){var J=q[M],X=q[x];return J===X||b.inbox(J-u,X-u,T)}function R(q){return(z(q)+I(q))/2}var D=b.getDistanceFunction(g,z,I,R);if(b.getClosest(h,D,i),i.index===!1)return null;var O=h[i.index];if(O.empty)return null;var F=O.dir,G=p[F],W=G.line.color;return w.opacity(W)&&G.line.width?i.color=W:i.color=G.fillcolor,i.x0=y.c2p(O.pos+f-S,!0),i.x1=y.c2p(O.pos+f+S,!0),i.xLabelVal=O.orig_p!==void 0?O.orig_p:O.pos,i.spikeDistance=R(O)*_/T,i.xSpike=y.c2p(O.pos,!0),i}function c(i,v,u,g){var h=i.cd,y=i.ya,p=h[0].trace,A=h[0].t,m=[],M=n(i,v,u,g);if(!M)return[];var x=M.index,T=h[x],_=T.hi||p.hoverinfo,f=_.split("+"),L=_==="all",S=L||f.indexOf("y")!==-1;if(!S)return[];for(var k=["high","open","close","low"],P={},z=0;z<k.length;z++){var I=k[z],R=p[I][M.index],D=y.c2p(R,!0),O;R in P?(O=P[R],O.yLabel+="<br>"+A.labels[I]+d.hoverLabelText(y,R,p.yhoverformat)):(O=l.extendFlat({},M),O.y0=O.y1=D,O.yLabelVal=R,O.yLabel=A.labels[I]+d.hoverLabelText(y,R,p.yhoverformat),O.name="",m.push(O),P[R]=O)}return m}function s(i,v,u,g){var h=i.cd,y=i.ya,p=h[0].trace,A=h[0].t,m=n(i,v,u,g);if(!m)return[];var M=m.index,x=h[M],T=m.index=x.i,_=x.dir;function f(R){return A.labels[R]+d.hoverLabelText(y,p[R][T],p.yhoverformat)}var L=x.hi||p.hoverinfo,S=L.split("+"),k=L==="all",P=k||S.indexOf("y")!==-1,z=k||S.indexOf("text")!==-1,I=P?[f("open"),f("high"),f("low"),f("close")+"  "+a[_]]:[];return z&&e(x,p,I),m.extraText=I.join("<br>"),m.y0=m.y1=y.c2p(x.yc,!0),[m]}B.exports={hoverPoints:r,hoverSplit:c,hoverOnPoints:s}},{"../../components/color":366,"../../components/fx":406,"../../constants/delta.js":473,"../../lib":503,"../../plots/cartesian/axes":554}],876:[function(t,B,H){B.exports={moduleType:"trace",name:"ohlc",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc").calc,plot:t("./plot"),style:t("./style"),hoverPoints:t("./hover").hoverPoints,selectPoints:t("./select")}},{"../../plots/cartesian":568,"./attributes":872,"./calc":873,"./defaults":874,"./hover":875,"./plot":878,"./select":879,"./style":880}],877:[function(t,B,H){var d=t("../../registry"),l=t("../../lib");B.exports=function(w,e,o,a){var r=o("x"),n=o("open"),c=o("high"),s=o("low"),i=o("close");o("hoverlabel.split");var v=d.getComponentMethod("calendars","handleTraceDefaults");if(v(w,e,["x"],a),!!(n&&c&&s&&i)){var u=Math.min(n.length,c.length,s.length,i.length);return r&&(u=Math.min(u,l.minRowLength(r))),e._length=u,u}}},{"../../lib":503,"../../registry":638}],878:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib");B.exports=function(w,e,o,a){var r=e.yaxis,n=e.xaxis,c=!!n.rangebreaks;l.makeTraceGroups(a,o,"trace ohlc").each(function(s){var i=d.select(this),v=s[0],u=v.t,g=v.trace;if(g.visible!==!0||u.empty){i.remove();return}var h=u.tickLen,y=i.selectAll("path").data(l.identity);y.enter().append("path"),y.exit().remove(),y.attr("d",function(p){if(p.empty)return"M0,0Z";var A=n.c2p(p.pos-h,!0),m=n.c2p(p.pos+h,!0),M=c?(A+m)/2:n.c2p(p.pos,!0),x=r.c2p(p.o,!0),T=r.c2p(p.h,!0),_=r.c2p(p.l,!0),f=r.c2p(p.c,!0);return"M"+A+","+x+"H"+M+"M"+M+","+T+"V"+_+"M"+m+","+f+"H"+M})})}},{"../../lib":503,"@plotly/d3":58}],879:[function(t,B,H){B.exports=function(l,b){var w=l.cd,e=l.xaxis,o=l.yaxis,a=[],r,n=w[0].t.bPos||0;if(b===!1)for(r=0;r<w.length;r++)w[r].selected=0;else for(r=0;r<w.length;r++){var c=w[r];b.contains([e.c2p(c.pos+n),o.c2p(c.yc)],null,c.i,l)?(a.push({pointNumber:c.i,x:e.c2d(c.pos),y:o.c2d(c.yc)}),c.selected=1):c.selected=0}return a}},{}],880:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../components/drawing"),b=t("../../components/color");B.exports=function(e,o,a){var r=a||d.select(e).selectAll("g.ohlclayer").selectAll("g.trace");r.style("opacity",function(n){return n[0].trace.opacity}),r.each(function(n){var c=n[0].trace;d.select(this).selectAll("path").each(function(s){if(!s.empty){var i=c[s.dir].line;d.select(this).style("fill","none").call(b.stroke,i.color).call(l.dashLine,i.dash,i.width).style("opacity",c.selectedpoints&&!s.selected?.3:1)}})})}},{"../../components/color":366,"../../components/drawing":388,"@plotly/d3":58}],881:[function(t,B,H){var d=t("../../lib/extend").extendFlat,l=t("../../plots/attributes"),b=t("../../plots/font_attributes"),w=t("../../components/colorscale/attributes"),e=t("../../plots/template_attributes").hovertemplateAttrs,o=t("../../plots/domain").attributes,a=d({editType:"calc"},w("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});B.exports={domain:o({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:d({},l.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:b({editType:"calc"}),tickfont:b({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:a,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],882:[function(t,B,H){var d=t("../../plots/get_data").getModuleCalcData,l=t("./plot"),b="parcats";H.name=b,H.plot=function(w,e,o,a){var r=d(w.calcdata,b);if(r.length){var n=r[0];l(w,n,o,a)}},H.clean=function(w,e,o,a){var r=a._has&&a._has("parcats"),n=e._has&&e._has("parcats");r&&!n&&a._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":593,"./plot":887}],883:[function(t,B,H){var d=t("../../lib/gup").wrap,l=t("../../components/colorscale/helpers").hasColorscale,b=t("../../components/colorscale/calc"),w=t("../../lib/filter_unique.js"),e=t("../../components/drawing"),o=t("../../lib"),a=t("fast-isnumeric");B.exports=function(A,m){var M=o.filterVisible(m.dimensions);if(M.length===0)return[];var x=M.map(function(le){var oe;if(le.categoryorder==="trace")oe=null;else if(le.categoryorder==="array")oe=le.categoryarray;else{oe=w(le.values);for(var U=!0,V=0;V<oe.length;V++)if(!a(oe[V])){U=!1;break}oe.sort(U?o.sorterAsc:void 0),le.categoryorder==="category descending"&&(oe=oe.reverse())}return u(le.values,oe)}),T,_,f;o.isArrayOrTypedArray(m.counts)?T=m.counts:T=[m.counts],g(M),M.forEach(function(le,oe){h(le,x[oe])});var L=m.line,S;L?(l(m,"line")&&b(A,m,{vals:m.line.color,containerStr:"line",cLetter:"c"}),S=e.tryColorscale(L)):S=o.identity;function k(le){var oe,U;return o.isArrayOrTypedArray(L.color)?(oe=L.color[le%L.color.length],U=oe):oe=L.color,{color:S(oe),rawColor:U}}var P=M[0].values.length,z={},I=x.map(function(le){return le.inds});f=0;var R,D;for(R=0;R<P;R++){var O=[];for(D=0;D<I.length;D++)O.push(I[D][R]);_=T[R%T.length],f+=_;var F=k(R),G=O+"-"+F.rawColor;z[G]===void 0&&(z[G]=i(O,F.color,F.rawColor)),v(z[G],R,_)}var W=M.map(function(le,oe){return n(oe,le._index,le._displayindex,le.label,f)});for(R=0;R<P;R++)for(_=T[R%T.length],D=0;D<W.length;D++){var q=W[D].containerInd,J=x[D].inds[R],X=W[D].categories;if(X[J]===void 0){var Z=m.dimensions[q]._categoryarray[J],se=m.dimensions[q]._ticktext[J];X[J]=c(D,J,Z,se)}s(X[J],R,_)}return d(r(W,z,f))};function r(p,A,m){var M=p.map(function(x){return x.categories.length}).reduce(function(x,T){return Math.max(x,T)});return{dimensions:p,paths:A,trace:void 0,maxCats:M,count:m}}function n(p,A,m,M,x){return{dimensionInd:p,containerInd:A,displayInd:m,dimensionLabel:M,count:x,categories:[],dragX:null}}function c(p,A,m,M){return{dimensionInd:p,categoryInd:A,categoryValue:m,displayInd:A,categoryLabel:M,valueInds:[],count:0,dragY:null}}function s(p,A,m){p.valueInds.push(A),p.count+=m}function i(p,A,m){return{categoryInds:p,color:A,rawColor:m,valueInds:[],count:0}}function v(p,A,m){p.valueInds.push(A),p.count+=m}function u(p,A){A==null?A=[]:A=A.map(function(S){return S});var m={},M={},x=[];A.forEach(function(S,k){m[S]=0,M[S]=k});for(var T=0;T<p.length;T++){var _=p[T],f;m[_]===void 0?(m[_]=1,f=A.push(_)-1,M[_]=f):(m[_]++,f=M[_]),x.push(f)}var L=A.map(function(S){return m[S]});return{uniqueValues:A,uniqueCounts:L,inds:x}}function g(p){var A=p.map(function(M){return M.displayindex}),m;if(y(A))for(m=0;m<p.length;m++)p[m]._displayindex=p[m].displayindex;else for(m=0;m<p.length;m++)p[m]._displayindex=m}function h(p,A){p._categoryarray=A.uniqueValues,p.ticktext===null||p.ticktext===void 0?p._ticktext=[]:p._ticktext=p.ticktext.slice();for(var m=p._ticktext.length;m<A.uniqueValues.length;m++)p._ticktext.push(A.uniqueValues[m])}function y(p){for(var A=new Array(p.length),m=0;m<p.length;m++){if(p[m]<0||p[m]>=p.length||A[p[m]]!==void 0)return!1;A[p[m]]=!0}return!0}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../components/drawing":388,"../../lib":503,"../../lib/filter_unique.js":494,"../../lib/gup":500,"fast-isnumeric":190}],884:[function(t,B,H){var d=t("../../lib"),l=t("../../components/colorscale/helpers").hasColorscale,b=t("../../components/colorscale/defaults"),w=t("../../plots/domain").defaults,e=t("../../plots/array_container_defaults"),o=t("./attributes"),a=t("../parcoords/merge_length");function r(c,s,i,v,u){u("line.shape"),u("line.hovertemplate");var g=u("line.color",v.colorway[0]);if(l(c,"line")&&d.isArrayOrTypedArray(g)){if(g.length)return u("line.colorscale"),b(c,s,v,u,{prefix:"line.",cLetter:"c"}),g.length;s.line.color=i}return 1/0}function n(c,s){function i(A,m){return d.coerce(c,s,o.dimensions,A,m)}var v=i("values"),u=i("visible");if(v&&v.length||(u=s.visible=!1),u){i("label"),i("displayindex",s._index);var g=c.categoryarray,h=Array.isArray(g)&&g.length>0,y;h&&(y="array");var p=i("categoryorder",y);p==="array"?(i("categoryarray"),i("ticktext")):(delete c.categoryarray,delete c.ticktext),!h&&p==="array"&&(s.categoryorder="trace")}}B.exports=function(s,i,v,u){function g(m,M){return d.coerce(s,i,o,m,M)}var h=e(s,i,{name:"dimensions",handleItemDefaults:n}),y=r(s,i,v,u,g);w(i,u,g),(!Array.isArray(h)||!h.length)&&(i.visible=!1),a(i,h,"values",y),g("hoveron"),g("hovertemplate"),g("arrangement"),g("bundlecolors"),g("sortpaths"),g("counts");var p={family:u.font.family,size:Math.round(u.font.size),color:u.font.color};d.coerceFont(g,"labelfont",p);var A={family:u.font.family,size:Math.round(u.font.size/1.2),color:u.font.color};d.coerceFont(g,"tickfont",A)}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/domain":584,"../parcoords/merge_length":897,"./attributes":881}],885:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:t("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":881,"./base_plot":882,"./calc":883,"./defaults":884,"./plot":887}],886:[function(t,B,H){var d=t("@plotly/d3"),l=t("d3-interpolate").interpolateNumber,b=t("../../plot_api/plot_api"),w=t("../../components/fx"),e=t("../../lib"),o=e.strTranslate,a=t("../../components/drawing"),r=t("tinycolor2"),n=t("../../lib/svg_text_utils");function c(V,re,ee,j){var Q=V.map(Z.bind(0,re,ee)),ne=j.selectAll("g.parcatslayer").data([null]);ne.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");var ae=ne.selectAll("g.trace.parcats").data(Q,s),ie=ae.enter().append("g").attr("class","trace parcats");ae.attr("transform",function(_e){return o(_e.x,_e.y)}),ie.append("g").attr("class","paths");var ue=ae.select("g.paths"),xe=ue.selectAll("path.path").data(function(_e){return _e.paths},s);xe.attr("fill",function(_e){return _e.model.color});var he=xe.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(_e){return _e.model.color}).attr("fill-opacity",0);A(he),xe.attr("d",function(_e){return _e.svgD}),he.empty()||xe.sort(v),xe.exit().remove(),xe.on("mouseover",u).on("mouseout",g).on("click",p),ie.append("g").attr("class","dimensions");var ge=ae.select("g.dimensions"),me=ge.selectAll("g.dimension").data(function(_e){return _e.dimensions},s);me.enter().append("g").attr("class","dimension"),me.attr("transform",function(_e){return o(_e.x,0)}),me.exit().remove();var ke=me.selectAll("g.category").data(function(_e){return _e.categories},s),Ae=ke.enter().append("g").attr("class","category");ke.attr("transform",function(_e){return o(0,_e.y)}),Ae.append("rect").attr("class","catrect").attr("pointer-events","none"),ke.select("rect.catrect").attr("fill","none").attr("width",function(_e){return _e.width}).attr("height",function(_e){return _e.height}),x(Ae);var Ne=ke.selectAll("rect.bandrect").data(function(_e){return _e.bands},s);Ne.each(function(){e.raiseToTop(this)}),Ne.attr("fill",function(_e){return _e.color});var He=Ne.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(_e){return _e.color}).attr("fill-opacity",0);Ne.attr("fill",function(_e){return _e.color}).attr("width",function(_e){return _e.width}).attr("height",function(_e){return _e.height}).attr("y",function(_e){return _e.y}).attr("cursor",function(_e){return _e.parcatsViewModel.arrangement==="fixed"?"default":_e.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),_(He),Ne.exit().remove(),Ae.append("text").attr("class","catlabel").attr("pointer-events","none");var Ge=re._fullLayout.paper_bgcolor;ke.select("text.catlabel").attr("text-anchor",function(_e){return i(_e)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",n.makeTextShadow(Ge)).style("fill","rgb(0, 0, 0)").attr("x",function(_e){return i(_e)?_e.width+5:-5}).attr("y",function(_e){return _e.height/2}).text(function(_e){return _e.model.categoryLabel}).each(function(_e){a.font(d.select(this),_e.parcatsViewModel.categorylabelfont),n.convertToTspans(d.select(this),re)}),Ae.append("text").attr("class","dimlabel"),ke.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(_e){return _e.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(_e){return _e.width/2}).attr("y",-5).text(function(_e,De){return De===0?_e.parcatsViewModel.model.dimensions[_e.model.dimensionInd].dimensionLabel:null}).each(function(_e){a.font(d.select(this),_e.parcatsViewModel.labelfont)}),ke.selectAll("rect.bandrect").on("mouseover",D).on("mouseout",O),ke.exit().remove(),me.call(d.behavior.drag().origin(function(_e){return{x:_e.x,y:0}}).on("dragstart",F).on("drag",G).on("dragend",W)),ae.each(function(_e){_e.traceSelection=d.select(this),_e.pathSelection=d.select(this).selectAll("g.paths").selectAll("path.path"),_e.dimensionSelection=d.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),ae.exit().remove()}B.exports=function(V,re,ee,j){c(ee,V,j,re)};function s(V){return V.key}function i(V){var re=V.parcatsViewModel.dimensions.length,ee=V.parcatsViewModel.dimensions[re-1].model.dimensionInd;return V.model.dimensionInd===ee}function v(V,re){return V.model.rawColor>re.model.rawColor?1:V.model.rawColor<re.model.rawColor?-1:0}function u(V){if(!V.parcatsViewModel.dragDimension&&V.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){e.raiseToTop(this),m(d.select(this));var re=h(V),ee=y(V);if(V.parcatsViewModel.graphDiv.emit("plotly_hover",{points:re,event:d.event,constraints:ee}),V.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var j=d.mouse(this)[0],Q=V.parcatsViewModel.graphDiv,ne=V.parcatsViewModel.trace,ae=Q._fullLayout,ie=ae._paperdiv.node().getBoundingClientRect(),ue=V.parcatsViewModel.graphDiv.getBoundingClientRect(),xe,he,ge;for(ge=0;ge<V.leftXs.length-1;ge++)if(V.leftXs[ge]+V.dimWidths[ge]-2<=j&&j<=V.leftXs[ge+1]+2){var me=V.parcatsViewModel.dimensions[ge],ke=V.parcatsViewModel.dimensions[ge+1];xe=(me.x+me.width+ke.x)/2,he=(V.topYs[ge]+V.topYs[ge+1]+V.height)/2;break}var Ae=V.parcatsViewModel.x+xe,Ne=V.parcatsViewModel.y+he,He=r.mostReadable(V.model.color,["black","white"]),Ge=V.model.count,_e=Ge/V.parcatsViewModel.model.count,De={countLabel:Ge,probabilityLabel:_e.toFixed(3)},Ye=[];V.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Ye.push(["Count:",De.countLabel].join(" ")),V.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Ye.push(["P:",De.probabilityLabel].join(" "));var qe=Ye.join("<br>"),Ue=d.mouse(Q)[0];w.loneHover({trace:ne,x:Ae-ie.left+ue.left,y:Ne-ie.top+ue.top,text:qe,color:V.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:He,idealAlign:Ue<Ae?"right":"left",hovertemplate:(ne.line||{}).hovertemplate,hovertemplateLabels:De,eventData:[{data:ne._input,fullData:ne,count:Ge,probability:_e}]},{container:ae._hoverlayer.node(),outerContainer:ae._paper.node(),gd:Q})}}}function g(V){if(!V.parcatsViewModel.dragDimension&&(A(d.select(this)),w.loneUnhover(V.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),V.parcatsViewModel.pathSelection.sort(v),V.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var re=h(V),ee=y(V);V.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:re,event:d.event,constraints:ee})}}function h(V){for(var re=[],ee=q(V.parcatsViewModel),j=0;j<V.model.valueInds.length;j++){var Q=V.model.valueInds[j];re.push({curveNumber:ee,pointNumber:Q})}return re}function y(V){for(var re={},ee=V.parcatsViewModel.model.dimensions,j=0;j<ee.length;j++){var Q=ee[j],ne=Q.categories[V.model.categoryInds[j]];re[Q.containerInd]=ne.categoryValue}return V.model.rawColor!==void 0&&(re.color=V.model.rawColor),re}function p(V){if(V.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var re=h(V),ee=y(V);V.parcatsViewModel.graphDiv.emit("plotly_click",{points:re,event:d.event,constraints:ee})}}function A(V){V.attr("fill",function(re){return re.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function m(V){V.attr("fill-opacity",.8).attr("stroke",function(re){return r.mostReadable(re.model.color,["black","white"])}).attr("stroke-width",.3)}function M(V){V.select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}function x(V){V.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function T(V){V.attr("stroke","black").attr("stroke-width",1.5)}function _(V){V.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function f(V){var re=V.parcatsViewModel.pathSelection,ee=V.categoryViewModel.model.dimensionInd,j=V.categoryViewModel.model.categoryInd;return re.filter(function(Q){return Q.model.categoryInds[ee]===j&&Q.model.color===V.color})}function L(V){var re=d.select(V.parentNode).selectAll("rect.bandrect");re.each(function(ee){var j=f(ee);m(j),j.each(function(){e.raiseToTop(this)})}),M(d.select(V.parentNode))}function S(V){var re=d.select(V).datum(),ee=f(re);m(ee),ee.each(function(){e.raiseToTop(this)}),d.select(V.parentNode).selectAll("rect.bandrect").filter(function(j){return j.color===re.color}).each(function(){e.raiseToTop(this),T(d.select(this))})}function k(V,re,ee){var j=d.select(V).datum(),Q=j.categoryViewModel.model,ne=j.parcatsViewModel.graphDiv,ae=d.select(V.parentNode).selectAll("rect.bandrect"),ie=[];ae.each(function(xe){var he=f(xe);he.each(function(ge){Array.prototype.push.apply(ie,h(ge))})});var ue={};ue[Q.dimensionInd]=Q.categoryValue,ne.emit(re,{points:ie,event:ee,constraints:ue})}function P(V,re,ee){var j=d.select(V).datum(),Q=j.categoryViewModel.model,ne=j.parcatsViewModel.graphDiv,ae=f(j),ie=[];ae.each(function(xe){Array.prototype.push.apply(ie,h(xe))});var ue={};ue[Q.dimensionInd]=Q.categoryValue,j.rawColor!==void 0&&(ue.color=j.rawColor),ne.emit(re,{points:ie,event:ee,constraints:ue})}function z(V,re,ee){V._fullLayout._calcInverseTransform(V);var j=V._fullLayout._invScaleX,Q=V._fullLayout._invScaleY,ne=d.select(ee.parentNode).select("rect.catrect"),ae=ne.node().getBoundingClientRect(),ie=ne.datum(),ue=ie.parcatsViewModel,xe=ue.model.dimensions[ie.model.dimensionInd],he=ue.trace,ge=ae.top+ae.height/2,me,ke;ue.dimensions.length>1&&xe.displayInd===ue.dimensions.length-1?(me=ae.left,ke="left"):(me=ae.left+ae.width,ke="right");var Ae=ie.model.count,Ne=ie.model.categoryLabel,He=Ae/ie.parcatsViewModel.model.count,Ge={countLabel:Ae,categoryLabel:Ne,probabilityLabel:He.toFixed(3)},_e=[];ie.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&_e.push(["Count:",Ge.countLabel].join(" ")),ie.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&_e.push(["P("+Ge.categoryLabel+"):",Ge.probabilityLabel].join(" "));var De=_e.join("<br>");return{trace:he,x:j*(me-re.left),y:Q*(ge-re.top),text:De,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:ke,hovertemplate:he.hovertemplate,hovertemplateLabels:Ge,eventData:[{data:he._input,fullData:he,count:Ae,category:Ne,probability:He}]}}function I(V,re,ee){var j=[];return d.select(ee.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){var Q=this;j.push(z(V,re,Q))}),j}function R(V,re,ee){V._fullLayout._calcInverseTransform(V);var j=V._fullLayout._invScaleX,Q=V._fullLayout._invScaleY,ne=ee.getBoundingClientRect(),ae=d.select(ee).datum(),ie=ae.categoryViewModel,ue=ie.parcatsViewModel,xe=ue.model.dimensions[ie.model.dimensionInd],he=ue.trace,ge=ne.y+ne.height/2,me,ke;ue.dimensions.length>1&&xe.displayInd===ue.dimensions.length-1?(me=ne.left,ke="left"):(me=ne.left+ne.width,ke="right");var Ae=ie.model.categoryLabel,Ne=ae.parcatsViewModel.model.count,He=0;ae.categoryViewModel.bands.forEach(function(Dt){Dt.color===ae.color&&(He+=Dt.count)});var Ge=ie.model.count,_e=0;ue.pathSelection.each(function(Dt){Dt.model.color===ae.color&&(_e+=Dt.model.count)});var De=He/Ne,Ye=He/_e,qe=He/Ge,Ue={countLabel:Ne,categoryLabel:Ae,probabilityLabel:De.toFixed(3)},Ie=[];ie.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Ie.push(["Count:",Ue.countLabel].join(" ")),ie.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(Ie.push("P(color \u2229 "+Ae+"): "+Ue.probabilityLabel),Ie.push("P("+Ae+" | color): "+Ye.toFixed(3)),Ie.push("P(color | "+Ae+"): "+qe.toFixed(3)));var Ve=Ie.join("<br>"),dt=r.mostReadable(ae.color,["black","white"]);return{trace:he,x:j*(me-re.left),y:Q*(ge-re.top),text:Ve,color:ae.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:dt,fontSize:10,idealAlign:ke,hovertemplate:he.hovertemplate,hovertemplateLabels:Ue,eventData:[{data:he._input,fullData:he,category:Ae,count:Ne,probability:De,categorycount:Ge,colorcount:_e,bandcolorcount:He}]}}function D(V){if(!V.parcatsViewModel.dragDimension&&V.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var re=d.mouse(this)[1];if(re<-1)return;var ee=V.parcatsViewModel.graphDiv,j=ee._fullLayout,Q=j._paperdiv.node().getBoundingClientRect(),ne=V.parcatsViewModel.hoveron,ae=this;if(ne==="color"?(S(ae),P(ae,"plotly_hover",d.event)):(L(ae),k(ae,"plotly_hover",d.event)),V.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var ie;ne==="category"?ie=z(ee,Q,ae):ne==="color"?ie=R(ee,Q,ae):ne==="dimension"&&(ie=I(ee,Q,ae)),ie&&w.loneHover(ie,{container:j._hoverlayer.node(),outerContainer:j._paper.node(),gd:ee})}}}function O(V){var re=V.parcatsViewModel;if(!re.dragDimension&&(A(re.pathSelection),x(re.dimensionSelection.selectAll("g.category")),_(re.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),w.loneUnhover(re.graphDiv._fullLayout._hoverlayer.node()),re.pathSelection.sort(v),re.hoverinfoItems.indexOf("skip")===-1)){var ee=V.parcatsViewModel.hoveron,j=this;ee==="color"?P(j,"plotly_unhover",d.event):k(j,"plotly_unhover",d.event)}}function F(V){V.parcatsViewModel.arrangement!=="fixed"&&(V.dragDimensionDisplayInd=V.model.displayInd,V.initialDragDimensionDisplayInds=V.parcatsViewModel.model.dimensions.map(function(re){return re.displayInd}),V.dragHasMoved=!1,V.dragCategoryDisplayInd=null,d.select(this).selectAll("g.category").select("rect.catrect").each(function(re){var ee=d.mouse(this)[0],j=d.mouse(this)[1];-2<=ee&&ee<=re.width+2&&-2<=j&&j<=re.height+2&&(V.dragCategoryDisplayInd=re.model.displayInd,V.initialDragCategoryDisplayInds=V.model.categories.map(function(Q){return Q.displayInd}),re.model.dragY=re.y,e.raiseToTop(this.parentNode),d.select(this.parentNode).selectAll("rect.bandrect").each(function(Q){Q.y<j&&j<=Q.y+Q.height&&(V.potentialClickBand=this)}))}),V.parcatsViewModel.dragDimension=V,w.loneUnhover(V.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function G(V){if(V.parcatsViewModel.arrangement!=="fixed"&&(V.dragHasMoved=!0,V.dragDimensionDisplayInd!==null)){var re=V.dragDimensionDisplayInd,ee=re-1,j=re+1,Q=V.parcatsViewModel.dimensions[re];if(V.dragCategoryDisplayInd!==null){var ne=Q.categories[V.dragCategoryDisplayInd];ne.model.dragY+=d.event.dy;var ae=ne.model.dragY,ie=ne.model.displayInd,ue=Q.categories,xe=ue[ie-1],he=ue[ie+1];xe!==void 0&&ae<xe.y+xe.height/2&&(ne.model.displayInd=xe.model.displayInd,xe.model.displayInd=ie),he!==void 0&&ae+ne.height>he.y+he.height/2&&(ne.model.displayInd=he.model.displayInd,he.model.displayInd=ie),V.dragCategoryDisplayInd=ne.model.displayInd}if(V.dragCategoryDisplayInd===null||V.parcatsViewModel.arrangement==="freeform"){Q.model.dragX=d.event.x;var ge=V.parcatsViewModel.dimensions[ee],me=V.parcatsViewModel.dimensions[j];ge!==void 0&&Q.model.dragX<ge.x+ge.width&&(Q.model.displayInd=ge.model.displayInd,ge.model.displayInd=re),me!==void 0&&Q.model.dragX+Q.width>me.x&&(Q.model.displayInd=me.model.displayInd,me.model.displayInd=V.dragDimensionDisplayInd),V.dragDimensionDisplayInd=Q.model.displayInd}oe(V.parcatsViewModel),le(V.parcatsViewModel),X(V.parcatsViewModel),J(V.parcatsViewModel)}}function W(V){if(V.parcatsViewModel.arrangement!=="fixed"&&V.dragDimensionDisplayInd!==null){d.select(this).selectAll("text").attr("font-weight","normal");var re={},ee=q(V.parcatsViewModel),j=V.parcatsViewModel.model.dimensions.map(function(me){return me.displayInd}),Q=V.initialDragDimensionDisplayInds.some(function(me,ke){return me!==j[ke]});Q&&j.forEach(function(me,ke){var Ae=V.parcatsViewModel.model.dimensions[ke].containerInd;re["dimensions["+Ae+"].displayindex"]=me});var ne=!1;if(V.dragCategoryDisplayInd!==null){var ae=V.model.categories.map(function(me){return me.displayInd});if(ne=V.initialDragCategoryDisplayInds.some(function(me,ke){return me!==ae[ke]}),ne){var ie=V.model.categories.slice().sort(function(me,ke){return me.displayInd-ke.displayInd}),ue=ie.map(function(me){return me.categoryValue}),xe=ie.map(function(me){return me.categoryLabel});re["dimensions["+V.model.containerInd+"].categoryarray"]=[ue],re["dimensions["+V.model.containerInd+"].ticktext"]=[xe],re["dimensions["+V.model.containerInd+"].categoryorder"]="array"}}if(V.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!V.dragHasMoved&&V.potentialClickBand&&(V.parcatsViewModel.hoveron==="color"?P(V.potentialClickBand,"plotly_click",d.event.sourceEvent):k(V.potentialClickBand,"plotly_click",d.event.sourceEvent)),V.model.dragX=null,V.dragCategoryDisplayInd!==null){var he=V.parcatsViewModel.dimensions[V.dragDimensionDisplayInd].categories[V.dragCategoryDisplayInd];he.model.dragY=null,V.dragCategoryDisplayInd=null}V.dragDimensionDisplayInd=null,V.parcatsViewModel.dragDimension=null,V.dragHasMoved=null,V.potentialClickBand=null,oe(V.parcatsViewModel),le(V.parcatsViewModel);var ge=d.transition().duration(300).ease("cubic-in-out");ge.each(function(){X(V.parcatsViewModel,!0),J(V.parcatsViewModel,!0)}).each("end",function(){(Q||ne)&&b.restyle(V.parcatsViewModel.graphDiv,re,[ee])})}}function q(V){for(var re,ee=V.graphDiv._fullData,j=0;j<ee.length;j++)if(V.key===ee[j].uid){re=j;break}return re}function J(V,re){re===void 0&&(re=!1);function ee(j){return re?j.transition():j}V.pathSelection.data(function(j){return j.paths},s),ee(V.pathSelection).attr("d",function(j){return j.svgD})}function X(V,re){re===void 0&&(re=!1);function ee(ue){return re?ue.transition():ue}V.dimensionSelection.data(function(ue){return ue.dimensions},s);var j=V.dimensionSelection.selectAll("g.category").data(function(ue){return ue.categories},s);ee(V.dimensionSelection).attr("transform",function(ue){return o(ue.x,0)}),ee(j).attr("transform",function(ue){return o(0,ue.y)});var Q=j.select(".dimlabel");Q.text(function(ue,xe){return xe===0?ue.parcatsViewModel.model.dimensions[ue.model.dimensionInd].dimensionLabel:null});var ne=j.select(".catlabel");ne.attr("text-anchor",function(ue){return i(ue)?"start":"end"}).attr("x",function(ue){return i(ue)?ue.width+5:-5}).each(function(ue){var xe,he;i(ue)?(xe=ue.width+5,he="start"):(xe=-5,he="end"),d.select(this).selectAll("tspan").attr("x",xe).attr("text-anchor",he)});var ae=j.selectAll("rect.bandrect").data(function(ue){return ue.bands},s),ie=ae.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(ue){return ue.color}).attr("fill-opacity",0);ae.attr("fill",function(ue){return ue.color}).attr("width",function(ue){return ue.width}).attr("height",function(ue){return ue.height}).attr("y",function(ue){return ue.y}),_(ie),ae.each(function(){e.raiseToTop(this)}),ae.exit().remove()}function Z(V,re,ee){var j=ee[0],Q=re.margin||{l:80,r:80,t:100,b:80},ne=j.trace,ae=ne.domain,ie=re.width,ue=re.height,xe=Math.floor(ie*(ae.x[1]-ae.x[0])),he=Math.floor(ue*(ae.y[1]-ae.y[0])),ge=ae.x[0]*ie+Q.l,me=re.height-ae.y[1]*re.height+Q.t,ke=ne.line.shape,Ae;ne.hoverinfo==="all"?Ae=["count","probability"]:Ae=(ne.hoverinfo||"").split("+");var Ne={trace:ne,key:ne.uid,model:j,x:ge,y:me,width:xe,height:he,hoveron:ne.hoveron,hoverinfoItems:Ae,arrangement:ne.arrangement,bundlecolors:ne.bundlecolors,sortpaths:ne.sortpaths,labelfont:ne.labelfont,categorylabelfont:ne.tickfont,pathShape:ke,dragDimension:null,margin:Q,paths:[],dimensions:[],graphDiv:V,traceSelection:null,pathSelection:null,dimensionSelection:null};return j.dimensions&&(oe(Ne),le(Ne)),Ne}function se(V,re,ee,j,Q){var ne=[],ae=[],ie,ue;for(ue=0;ue<ee.length-1;ue++)ie=l(ee[ue]+V[ue],V[ue+1]),ne.push(ie(Q)),ae.push(ie(1-Q));var xe="M "+V[0]+","+re[0];for(xe+="l"+ee[0]+",0 ",ue=1;ue<ee.length;ue++)xe+="C"+ne[ue-1]+","+re[ue-1]+" "+ae[ue-1]+","+re[ue]+" "+V[ue]+","+re[ue],xe+="l"+ee[ue]+",0 ";for(xe+="l0,"+j+" ",xe+="l -"+ee[ee.length-1]+",0 ",ue=ee.length-2;ue>=0;ue--)xe+="C"+ae[ue]+","+(re[ue+1]+j)+" "+ne[ue]+","+(re[ue]+j)+" "+(V[ue]+ee[ue])+","+(re[ue]+j),xe+="l-"+ee[ue]+",0 ";return xe+="Z",xe}function le(V){var re=V.dimensions,ee=V.model,j=re.map(function(Ft){return Ft.categories.map(function(Nt){return Nt.y})}),Q=V.model.dimensions.map(function(Ft){return Ft.categories.map(function(Nt){return Nt.displayInd})}),ne=V.model.dimensions.map(function(Ft){return Ft.displayInd}),ae=V.dimensions.map(function(Ft){return Ft.model.dimensionInd}),ie=re.map(function(Ft){return Ft.x}),ue=re.map(function(Ft){return Ft.width}),xe=[];for(var he in ee.paths)ee.paths.hasOwnProperty(he)&&xe.push(ee.paths[he]);function ge(Ft){var Nt=Ft.categoryInds.map(function(St,it){return Q[it][St]}),Lt=ae.map(function(St){return Nt[St]});return Lt}xe.sort(function(Ft,Nt){var Lt=ge(Ft),St=ge(Nt);return V.sortpaths==="backward"&&(Lt.reverse(),St.reverse()),Lt.push(Ft.valueInds[0]),St.push(Nt.valueInds[0]),V.bundlecolors&&(Lt.unshift(Ft.rawColor),St.unshift(Nt.rawColor)),Lt<St?-1:Lt>St?1:0});for(var me=new Array(xe.length),ke=re[0].model.count,Ae=re[0].categories.map(function(Ft){return Ft.height}).reduce(function(Ft,Nt){return Ft+Nt}),Ne=0;Ne<xe.length;Ne++){var He=xe[Ne],Ge;ke>0?Ge=Ae*(He.count/ke):Ge=0;for(var _e=new Array(j.length),De=0;De<He.categoryInds.length;De++){var Ye=He.categoryInds[De],qe=Q[De][Ye],Ue=ne[De];_e[Ue]=j[Ue][qe],j[Ue][qe]+=Ge;var Ie=V.dimensions[Ue].categories[qe],Ve=Ie.bands.length,dt=Ie.bands[Ve-1];if(dt===void 0||He.rawColor!==dt.rawColor){var Dt=dt===void 0?0:dt.y+dt.height;Ie.bands.push({key:Dt,color:He.color,rawColor:He.rawColor,height:Ge,width:Ie.width,count:He.count,y:Dt,categoryViewModel:Ie,parcatsViewModel:V})}else{var Yt=Ie.bands[Ve-1];Yt.height+=Ge,Yt.count+=He.count}}var kt;V.pathShape==="hspline"?kt=se(ie,_e,ue,Ge,.5):kt=se(ie,_e,ue,Ge,0),me[Ne]={key:He.valueInds[0],model:He,height:Ge,leftXs:ie,topYs:_e,dimWidths:ue,svgD:kt,parcatsViewModel:V}}V.paths=me}function oe(V){var re=V.model.dimensions.map(function(ae){return{displayInd:ae.displayInd,dimensionInd:ae.dimensionInd}});re.sort(function(ae,ie){return ae.displayInd-ie.displayInd});var ee=[];for(var j in re){var Q=re[j].dimensionInd,ne=V.model.dimensions[Q];ee.push(U(V,ne))}V.dimensions=ee}function U(V,re){var ee=40,j=16,Q=V.model.dimensions.length,ne=re.displayInd,ae,ie,ue;Q>1?ae=(V.width-2*ee-j)/(Q-1):ae=0,ie=ee,ue=ie+ae*ne;var xe=[],he=V.model.maxCats,ge=re.categories.length,me=8,ke=re.count,Ae=V.height-me*(he-1),Ne,He,Ge,_e,De,Ye=(he-ge)*me/2,qe=re.categories.map(function(Ue){return{displayInd:Ue.displayInd,categoryInd:Ue.categoryInd}});for(qe.sort(function(Ue,Ie){return Ue.displayInd-Ie.displayInd}),De=0;De<ge;De++)_e=qe[De].categoryInd,He=re.categories[_e],ke>0?Ne=He.count/ke*Ae:Ne=0,Ge={key:He.valueInds[0],model:He,width:j,height:Ne,y:He.dragY!==null?He.dragY:Ye,bands:[],parcatsViewModel:V},Ye=Ye+Ne+me,xe.push(Ge);return{key:re.dimensionInd,x:re.dragX!==null?re.dragX:ue,y:0,width:j,model:re,categories:xe,parcatsViewModel:V,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}},{"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_api":540,"@plotly/d3":58,"d3-interpolate":116,tinycolor2:312}],887:[function(t,B,H){var d=t("./parcats");B.exports=function(b,w,e,o){var a=b._fullLayout,r=a._paper,n=a._size;d(b,r,w,{width:n.w,height:n.h,margin:{t:n.t,r:n.r,b:n.b,l:n.l}},e,o)}},{"./parcats":886}],888:[function(t,B,H){var d=t("../../components/colorscale/attributes"),l=t("../../plots/cartesian/layout_attributes"),b=t("../../plots/font_attributes"),w=t("../../plots/domain").attributes,e=t("../../lib/extend").extendFlat,o=t("../../plot_api/plot_template").templatedArray;B.exports={domain:w({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:b({editType:"plot"}),tickfont:b({editType:"plot"}),rangefont:b({editType:"plot"}),dimensions:o("dimension",{label:{valType:"string",editType:"plot"},tickvals:e({},l.tickvals,{editType:"plot"}),ticktext:e({},l.ticktext,{editType:"plot"}),tickformat:e({},l.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:e({editType:"calc"},d("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"}))}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/layout_attributes":569,"../../plots/domain":584,"../../plots/font_attributes":585}],889:[function(t,B,H){var d=t("./constants"),l=t("@plotly/d3"),b=t("../../lib/gup").keyFun,w=t("../../lib/gup").repeat,e=t("../../lib").sorterAsc,o=t("../../lib").strTranslate,a=d.bar.snapRatio;function r(W,q){return W*(1-a)+q*a}var n=d.bar.snapClose;function c(W,q){return W*(1-n)+q*n}function s(W,q,J,X){if(i(J,X))return J;var Z=W?-1:1,se=0,le=q.length-1;if(Z<0){var oe=se;se=le,le=oe}for(var U=q[se],V=U,re=se;Z*re<Z*le;re+=Z){var ee=re+Z,j=q[ee];if(Z*J<Z*c(U,j))return r(U,V);if(Z*J<Z*j||ee===le)return r(j,U);V=U,U=j}}function i(W,q){for(var J=0;J<q.length;J++)if(W>=q[J][0]&&W<=q[J][1])return!0;return!1}function v(W){W.attr("x",-d.bar.captureWidth/2).attr("width",d.bar.captureWidth)}function u(W){W.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function g(W){if(!W.brush.filterSpecified)return"0,"+W.height;for(var q=h(W.brush.filter.getConsolidated(),W.height),J=[0],X,Z,se,le=q.length?q[0][0]:null,oe=0;oe<q.length;oe++)X=q[oe],Z=X[1]-X[0],J.push(le),J.push(Z),se=oe+1,se<q.length&&(le=q[se][0]-X[1]);return J.push(W.height),J}function h(W,q){return W.map(function(J){return J.map(function(X){return Math.max(0,X*q)}).sort(e)})}function y(W,q){var J=d.bar.handleHeight;if(!(q>W[1]+J||q<W[0]-J))return q>=.9*W[1]+.1*W[0]?"n":q<=.9*W[0]+.1*W[1]?"s":"ns"}function p(){l.select(document.body).style("cursor",null)}function A(W){W.attr("stroke-dasharray",g)}function m(W,q){var J=l.select(W).selectAll(".highlight, .highlight-shadow"),X=q?J.transition().duration(d.bar.snapDuration).each("end",q):J;A(X)}function M(W,q){var J=W.brush,X=J.filterSpecified,Z=NaN,se={},le;if(X){var oe=W.height,U=J.filter.getConsolidated(),V=h(U,oe),re=NaN,ee=NaN,j=NaN;for(le=0;le<=V.length;le++){var Q=V[le];if(Q&&Q[0]<=q&&q<=Q[1]){re=le;break}else if(ee=le?le-1:NaN,Q&&Q[0]>q){j=le;break}}if(Z=re,isNaN(Z)&&(isNaN(ee)||isNaN(j)?Z=isNaN(ee)?j:ee:Z=q-V[ee][1]<V[j][0]-q?ee:j),!isNaN(Z)){var ne=V[Z],ae=y(ne,q);ae&&(se.interval=U[Z],se.intervalPix=ne,se.region=ae)}}if(W.ordinal&&!se.region){var ie=W.unitTickvals,ue=W.unitToPaddedPx.invert(q);for(le=0;le<ie.length;le++){var xe=[ie[Math.max(le-1,0)]*.25+ie[le]*.75,ie[Math.min(le+1,ie.length-1)]*.25+ie[le]*.75];if(ue>=xe[0]&&ue<=xe[1]){se.clickableOrdinalRange=xe;break}}}return se}function x(W,q){l.event.sourceEvent.stopPropagation();var J=q.height-l.mouse(W)[1]-2*d.verticalPadding,X=q.unitToPaddedPx.invert(J),Z=q.brush,se=M(q,J),le=se.interval,oe=Z.svgBrush;if(oe.wasDragged=!1,oe.grabbingBar=se.region==="ns",oe.grabbingBar){var U=le.map(q.unitToPaddedPx);oe.grabPoint=J-U[0]-d.verticalPadding,oe.barLength=U[1]-U[0]}oe.clickableOrdinalRange=se.clickableOrdinalRange,oe.stayingIntervals=q.multiselect&&Z.filterSpecified?Z.filter.getConsolidated():[],le&&(oe.stayingIntervals=oe.stayingIntervals.filter(function(V){return V[0]!==le[0]&&V[1]!==le[1]})),oe.startExtent=se.region?le[se.region==="s"?1:0]:X,q.parent.inBrushDrag=!0,oe.brushStartCallback()}function T(W,q){l.event.sourceEvent.stopPropagation();var J=q.height-l.mouse(W)[1]-2*d.verticalPadding,X=q.brush.svgBrush;X.wasDragged=!0,X._dragging=!0,X.grabbingBar?X.newExtent=[J-X.grabPoint,J+X.barLength-X.grabPoint].map(q.unitToPaddedPx.invert):X.newExtent=[X.startExtent,q.unitToPaddedPx.invert(J)].sort(e),q.brush.filterSpecified=!0,X.extent=X.stayingIntervals.concat([X.newExtent]),X.brushCallback(q),m(W.parentNode)}function _(W,q){var J=q.brush,X=J.filter,Z=J.svgBrush;Z._dragging||(f(W,q),T(W,q),q.brush.svgBrush.wasDragged=!1),Z._dragging=!1;var se=l.event;se.sourceEvent.stopPropagation();var le=Z.grabbingBar;if(Z.grabbingBar=!1,Z.grabLocation=void 0,q.parent.inBrushDrag=!1,p(),!Z.wasDragged){Z.wasDragged=void 0,Z.clickableOrdinalRange?J.filterSpecified&&q.multiselect?Z.extent.push(Z.clickableOrdinalRange):(Z.extent=[Z.clickableOrdinalRange],J.filterSpecified=!0):le?(Z.extent=Z.stayingIntervals,Z.extent.length===0&&I(J)):I(J),Z.brushCallback(q),m(W.parentNode),Z.brushEndCallback(J.filterSpecified?X.getConsolidated():[]);return}var oe=function(){X.set(X.getConsolidated())};if(q.ordinal){var U=q.unitTickvals;U[U.length-1]<U[0]&&U.reverse(),Z.newExtent=[s(0,U,Z.newExtent[0],Z.stayingIntervals),s(1,U,Z.newExtent[1],Z.stayingIntervals)];var V=Z.newExtent[1]>Z.newExtent[0];Z.extent=Z.stayingIntervals.concat(V?[Z.newExtent]:[]),Z.extent.length||I(J),Z.brushCallback(q),V?m(W.parentNode,oe):(oe(),m(W.parentNode))}else oe();Z.brushEndCallback(J.filterSpecified?X.getConsolidated():[])}function f(W,q){var J=q.height-l.mouse(W)[1]-2*d.verticalPadding,X=M(q,J),Z="crosshair";X.clickableOrdinalRange?Z="pointer":X.region&&(Z=X.region+"-resize"),l.select(document.body).style("cursor",Z)}function L(W){W.on("mousemove",function(q){l.event.preventDefault(),q.parent.inBrushDrag||f(this,q)}).on("mouseleave",function(q){q.parent.inBrushDrag||p()}).call(l.behavior.drag().on("dragstart",function(q){x(this,q)}).on("drag",function(q){T(this,q)}).on("dragend",function(q){_(this,q)}))}function S(W,q){return W[0]-q[0]}function k(W,q){var J=W.selectAll(".background").data(w);J.enter().append("rect").classed("background",!0).call(v).call(u).style("pointer-events","auto").attr("transform",o(0,d.verticalPadding)),J.call(L).attr("height",function(se){return se.height-d.verticalPadding});var X=W.selectAll(".highlight-shadow").data(w);X.enter().append("line").classed("highlight-shadow",!0).attr("x",-d.bar.width/2).attr("stroke-width",d.bar.width+d.bar.strokeWidth).attr("stroke",q).attr("opacity",d.bar.strokeOpacity).attr("stroke-linecap","butt"),X.attr("y1",function(se){return se.height}).call(A);var Z=W.selectAll(".highlight").data(w);Z.enter().append("line").classed("highlight",!0).attr("x",-d.bar.width/2).attr("stroke-width",d.bar.width-d.bar.strokeWidth).attr("stroke",d.bar.fillColor).attr("opacity",d.bar.fillOpacity).attr("stroke-linecap","butt"),Z.attr("y1",function(se){return se.height}).call(A)}function P(W,q){var J=W.selectAll("."+d.cn.axisBrush).data(w,b);J.enter().append("g").classed(d.cn.axisBrush,!0),k(J,q)}function z(W){return W.svgBrush.extent.map(function(q){return q.slice()})}function I(W){W.filterSpecified=!1,W.svgBrush.extent=[[-1/0,1/0]]}function R(W){return function(J){var X=J.brush,Z=z(X),se=Z.slice();X.filter.set(se),W()}}function D(W){for(var q=W.slice(),J=[],X,Z=q.shift();Z;){for(X=Z.slice();(Z=q.shift())&&Z[0]<=X[1];)X[1]=Math.max(X[1],Z[1]);J.push(X)}return J.length===1&&J[0][0]>J[0][1]&&(J=[]),J}function O(){var W=[],q,J;return{set:function(X){W=X.map(function(Z){return Z.slice().sort(e)}).sort(S),W.length===1&&W[0][0]===-1/0&&W[0][1]===1/0&&(W=[[0,-1]]),q=D(W),J=W.reduce(function(Z,se){return[Math.min(Z[0],se[0]),Math.max(Z[1],se[1])]},[1/0,-1/0])},get:function(){return W.slice()},getConsolidated:function(){return q},getBounds:function(){return J}}}function F(W,q,J,X,Z,se){var le=O();return le.set(J),{filter:le,filterSpecified:q,svgBrush:{extent:[],brushStartCallback:X,brushCallback:R(Z),brushEndCallback:se}}}function G(W,q){if(Array.isArray(W[0])?(W=W.map(function(X){return X.sort(e)}),q.multiselect?W=D(W.sort(S)):W=[W[0]]):W=[W.sort(e)],q.tickvals){var J=q.tickvals.slice().sort(e);if(W=W.map(function(X){var Z=[s(0,J,X[0],[]),s(1,J,X[1],[])];if(Z[1]>Z[0])return Z}).filter(function(X){return X}),!W.length)return}return W.length>1?W:W[0]}B.exports={makeBrush:F,ensureAxisBrush:P,cleanRanges:G}},{"../../lib":503,"../../lib/gup":500,"./constants":892,"@plotly/d3":58}],890:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../plots/get_data").getModuleCalcData,b=t("./plot"),w=t("../../constants/xmlns_namespaces");H.name="parcoords",H.plot=function(e){var o=l(e.calcdata,"parcoords")[0];o.length&&b(e,o)},H.clean=function(e,o,a,r){var n=r._has&&r._has("parcoords"),c=o._has&&o._has("parcoords");n&&!c&&(r._paperdiv.selectAll(".parcoords").remove(),r._glimages.selectAll("*").remove())},H.toSVG=function(e){var o=e._fullLayout._glimages,a=d.select(e).selectAll(".svg-container"),r=a.filter(function(c,s){return s===a.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function n(){var c=this,s=c.toDataURL("image/png"),i=o.append("svg:image");i.attr({xmlns:w.svg,"xlink:href":s,preserveAspectRatio:"none",x:0,y:0,width:c.style.width,height:c.style.height})}r.each(n),window.setTimeout(function(){d.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":480,"../../plots/get_data":593,"./plot":899,"@plotly/d3":58}],891:[function(t,B,H){var d=t("../../lib").isArrayOrTypedArray,l=t("../../components/colorscale"),b=t("../../lib/gup").wrap;B.exports=function(o,a){var r,n;return l.hasColorscale(a,"line")&&d(a.line.color)?(r=a.line.color,n=l.extractOpts(a.line).colorscale,l.calc(o,a,{vals:r,containerStr:"line",cLetter:"c"})):(r=w(a._length),n=[[0,a.line.color],[1,a.line.color]]),b({lineColor:r,cscale:n})};function w(e){for(var o=new Array(e),a=0;a<e;a++)o[a]=.5;return o}},{"../../components/colorscale":378,"../../lib":503,"../../lib/gup":500}],892:[function(t,B,H){B.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,deselectedLineColor:"#777",bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],893:[function(t,B,H){var d=t("../../lib"),l=t("../../components/colorscale/helpers").hasColorscale,b=t("../../components/colorscale/defaults"),w=t("../../plots/domain").defaults,e=t("../../plots/array_container_defaults"),o=t("../../plots/cartesian/axes"),a=t("./attributes"),r=t("./axisbrush"),n=t("./constants").maxDimensionCount,c=t("./merge_length");function s(v,u,g,h,y){var p=y("line.color",g);if(l(v,"line")&&d.isArrayOrTypedArray(p)){if(p.length)return y("line.colorscale"),b(v,u,h,y,{prefix:"line.",cLetter:"c"}),p.length;u.line.color=g}return 1/0}function i(v,u,g,h){function y(x,T){return d.coerce(v,u,a.dimensions,x,T)}var p=y("values"),A=y("visible");if(p&&p.length||(A=u.visible=!1),A){y("label"),y("tickvals"),y("ticktext"),y("tickformat");var m=y("range");u._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:m},o.setConvert(u._ax,h.layout),y("multiselect");var M=y("constraintrange");M&&(u.constraintrange=r.cleanRanges(M,u))}}B.exports=function(u,g,h,y){function p(T,_){return d.coerce(u,g,a,T,_)}var A=u.dimensions;Array.isArray(A)&&A.length>n&&(d.log("parcoords traces support up to "+n+" dimensions at the moment"),A.splice(n));var m=e(u,g,{name:"dimensions",layout:y,handleItemDefaults:i}),M=s(u,g,h,y,p);w(g,y,p),(!Array.isArray(m)||!m.length)&&(g.visible=!1),c(g,m,"values",M);var x={family:y.font.family,size:Math.round(y.font.size/1.2),color:y.font.color};d.coerceFont(p,"labelfont",x),d.coerceFont(p,"tickfont",x),d.coerceFont(p,"rangefont",x),p("labelangle"),p("labelside")}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"../../plots/domain":584,"./attributes":888,"./axisbrush":889,"./constants":892,"./merge_length":897}],894:[function(t,B,H){var d=t("../../lib").isTypedArray;H.convertTypedArray=function(l){return d(l)?Array.prototype.slice.call(l):l},H.isOrdinal=function(l){return!!l.tickvals},H.isVisible=function(l){return l.visible||!("visible"in l)}},{"../../lib":503}],895:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:t("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":888,"./base_plot":890,"./calc":891,"./defaults":893,"./plot":899}],896:[function(t,B,H){var d=t("glslify"),l=d([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

attribute vec4 p01_04, p05_08, p09_12, p13_16,
               p17_20, p21_24, p25_28, p29_32,
               p33_36, p37_40, p41_44, p45_48,
               p49_52, p53_56, p57_60, colors;

uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,
             loA, hiA, loB, hiB, loC, hiC, loD, hiD;

uniform vec2 resolution, viewBoxPos, viewBoxSize;
uniform float maskHeight;
uniform float drwLayer; // 0: context, 1: focus, 2: pick
uniform vec4 contextColor;
uniform sampler2D maskTexture, palette;

bool isPick    = (drwLayer > 1.5);
bool isContext = (drwLayer < 0.5);

const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);
const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);

float val(mat4 p, mat4 v) {
    return dot(matrixCompMult(p, v) * UNITS, UNITS);
}

float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {
    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);
    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);
    return y1 * (1.0 - ratio) + y2 * ratio;
}

int iMod(int a, int b) {
    return a - b * (a / b);
}

bool fOutside(float p, float lo, float hi) {
    return (lo < hi) && (lo > p || p > hi);
}

bool vOutside(vec4 p, vec4 lo, vec4 hi) {
    return (
        fOutside(p[0], lo[0], hi[0]) ||
        fOutside(p[1], lo[1], hi[1]) ||
        fOutside(p[2], lo[2], hi[2]) ||
        fOutside(p[3], lo[3], hi[3])
    );
}

bool mOutside(mat4 p, mat4 lo, mat4 hi) {
    return (
        vOutside(p[0], lo[0], hi[0]) ||
        vOutside(p[1], lo[1], hi[1]) ||
        vOutside(p[2], lo[2], hi[2]) ||
        vOutside(p[3], lo[3], hi[3])
    );
}

bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {
    return mOutside(A, loA, hiA) ||
           mOutside(B, loB, hiB) ||
           mOutside(C, loC, hiC) ||
           mOutside(D, loD, hiD);
}

bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {
    mat4 pnts[4];
    pnts[0] = A;
    pnts[1] = B;
    pnts[2] = C;
    pnts[3] = D;

    for(int i = 0; i < 4; ++i) {
        for(int j = 0; j < 4; ++j) {
            for(int k = 0; k < 4; ++k) {
                if(0 == iMod(
                    int(255.0 * texture2D(maskTexture,
                        vec2(
                            (float(i * 2 + j / 2) + 0.5) / 8.0,
                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight
                        ))[3]
                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),
                    2
                )) return true;
            }
        }
    }
    return false;
}

vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {
    float x = 0.5 * sign(v) + 0.5;
    float y = axisY(x, A, B, C, D);
    float z = 1.0 - abs(v);

    z += isContext ? 0.0 : 2.0 * float(
        outsideBoundingBox(A, B, C, D) ||
        outsideRasterMask(A, B, C, D)
    );

    return vec4(
        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,
        z,
        1.0
    );
}

void main() {
    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);
    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);
    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);
    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);

    float v = colors[3];

    gl_Position = position(isContext, v, A, B, C, D);

    fragColor =
        isContext ? vec4(contextColor) :
        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));
}
`]),b=d([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
    gl_FragColor = fragColor;
}
`]),w=t("./constants").maxDimensionCount,e=t("../../lib"),o=1e-6,a=2048,r=new Uint8Array(4),n=new Uint8Array(4),c={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function s(f){f.read({x:0,y:0,width:1,height:1,data:r})}function i(f,L,S,k,P){var z=f._gl;z.enable(z.SCISSOR_TEST),z.scissor(L,S,k,P),f.clear({color:[0,0,0,0],depth:1})}function v(f,L,S,k,P,z){var I=z.key;function R(D){var O=Math.min(k,P-D*k);D===0&&(window.cancelAnimationFrame(S.currentRafs[I]),delete S.currentRafs[I],i(f,z.scissorX,z.scissorY,z.scissorWidth,z.viewBoxSize[1])),!S.clearOnly&&(z.count=2*O,z.offset=2*D*k,L(z),D*k+O<P&&(S.currentRafs[I]=window.requestAnimationFrame(function(){R(D+1)})),S.drawCompleted=!1)}S.drawCompleted||(s(f),S.drawCompleted=!0),R(0)}function u(f){return Math.max(o,Math.min(1-o,f))}function g(f,L){for(var S=new Array(256),k=0;k<256;k++)S[k]=f(k/255).concat(L);return S}function h(f,L){return(f>>>8*L)%256/255}function y(f,L,S){for(var k=new Array(f*(w+4)),P=0,z=0;z<f;z++){for(var I=0;I<w;I++)k[P++]=I<L.length?L[I].paddedUnitValues[z]:.5;k[P++]=h(z,2),k[P++]=h(z,1),k[P++]=h(z,0),k[P++]=u(S[z])}return k}function p(f,L,S){for(var k=new Array(L*8),P=0,z=0;z<L;z++)for(var I=0;I<2;I++)for(var R=0;R<4;R++){var D=f*4+R,O=S[z*64+D];D===63&&I===0&&(O*=-1),k[P++]=O}return k}function A(f){var L="0"+f;return L.substr(L.length-2)}function m(f){return f<w?"p"+A(f+1)+"_"+A(f+4):"colors"}function M(f,L,S){for(var k=0;k<=w;k+=4)f[m(k)](p(k/4,L,S))}function x(f){for(var L={},S=0;S<=w;S+=4)L[m(S)]=f.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return L}function T(f,L,S,k,P,z,I,R,D,O,F,G,W,q){for(var J=[[],[]],X=0;X<64;X++)J[0][X]=X===P?1:0,J[1][X]=X===z?1:0;I*=q,R*=q,D*=q,O*=q;var Z=f.lines.canvasOverdrag*q,se=f.domain,le=f.canvasWidth*q,oe=f.canvasHeight*q,U=f.pad.l*q,V=f.pad.b*q,re=f.layoutHeight*q,ee=f.layoutWidth*q,j=f.deselectedLines.color,Q=e.extendFlat({key:F,resolution:[le,oe],viewBoxPos:[I+Z,R],viewBoxSize:[D,O],i0:P,i1:z,dim0A:J[0].slice(0,16),dim0B:J[0].slice(16,32),dim0C:J[0].slice(32,48),dim0D:J[0].slice(48,64),dim1A:J[1].slice(0,16),dim1B:J[1].slice(16,32),dim1C:J[1].slice(32,48),dim1D:J[1].slice(48,64),drwLayer:G,contextColor:[j[0]/255,j[1]/255,j[2]/255,j[3]<1?j[3]:Math.max(1/255,Math.pow(1/f.lines.color.length,1/3))],scissorX:(k===L?0:I+Z)+(U-Z)+ee*se.x[0],scissorWidth:(k===S?le-I+Z:D+.5)+(k===L?I+Z:0),scissorY:R+V+re*se.y[0],scissorHeight:O,viewportX:U-Z+ee*se.x[0],viewportY:V+re*se.y[0],viewportWidth:le,viewportHeight:oe},W);return Q}function _(f){var L=a-1,S=Math.max(0,Math.floor(f[0]*L),0),k=Math.min(L,Math.ceil(f[1]*L),L);return[Math.min(S,k),Math.max(S,k)]}B.exports=function(f,L){var S=L.context,k=L.pick,P=L.regl,z=P._gl,I=z.getParameter(z.ALIASED_LINE_WIDTH_RANGE),R=Math.max(I[0],Math.min(I[1],L.viewModel.plotGlPixelRatio)),D={currentRafs:{},drawCompleted:!0,clearOnly:!1},O,F,G,W,q=x(P),J,X=P.texture(c),Z=[];le(L);var se=P({profile:!1,blend:{enable:S,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!S,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:P.prop("scissorX"),y:P.prop("scissorY"),width:P.prop("scissorWidth"),height:P.prop("scissorHeight")}},viewport:{x:P.prop("viewportX"),y:P.prop("viewportY"),width:P.prop("viewportWidth"),height:P.prop("viewportHeight")},dither:!1,vert:l,frag:b,primitive:"lines",lineWidth:R,attributes:q,uniforms:{resolution:P.prop("resolution"),viewBoxPos:P.prop("viewBoxPos"),viewBoxSize:P.prop("viewBoxSize"),dim0A:P.prop("dim0A"),dim1A:P.prop("dim1A"),dim0B:P.prop("dim0B"),dim1B:P.prop("dim1B"),dim0C:P.prop("dim0C"),dim1C:P.prop("dim1C"),dim0D:P.prop("dim0D"),dim1D:P.prop("dim1D"),loA:P.prop("loA"),hiA:P.prop("hiA"),loB:P.prop("loB"),hiB:P.prop("hiB"),loC:P.prop("loC"),hiC:P.prop("hiC"),loD:P.prop("loD"),hiD:P.prop("hiD"),palette:X,contextColor:P.prop("contextColor"),maskTexture:P.prop("maskTexture"),drwLayer:P.prop("drwLayer"),maskHeight:P.prop("maskHeight")},offset:P.prop("offset"),count:P.prop("count")});function le(j){O=j.model,F=j.viewModel,G=F.dimensions.slice(),W=G[0]?G[0].values.length:0;var Q=O.lines,ne=k?Q.color.map(function(ie,ue){return ue/Q.color.length}):Q.color,ae=y(W,G,ne);M(q,W,ae),!S&&!k&&(X=P.texture(e.extendFlat({data:g(O.unitToColor,255)},c)))}function oe(j){var Q,ne,ae,ie=[[],[]];for(ae=0;ae<64;ae++){var ue=!j&&ae<G.length?G[ae].brush.filter.getBounds():[-1/0,1/0];ie[0][ae]=ue[0],ie[1][ae]=ue[1]}var xe=a*8,he=new Array(xe);for(Q=0;Q<xe;Q++)he[Q]=255;if(!j)for(Q=0;Q<G.length;Q++){var ge=Q%8,me=(Q-ge)/8,ke=Math.pow(2,ge),Ae=G[Q],Ne=Ae.brush.filter.get();if(!(Ne.length<2)){var He=_(Ne[0])[1];for(ne=1;ne<Ne.length;ne++){var Ge=_(Ne[ne]);for(ae=He+1;ae<Ge[0];ae++)he[ae*8+me]&=~ke;He=Math.max(He,Ge[1])}}}var _e={shape:[8,a],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:he};return J?J(_e):J=P.texture(_e),{maskTexture:J,maskHeight:a,loA:ie[0].slice(0,16),loB:ie[0].slice(16,32),loC:ie[0].slice(32,48),loD:ie[0].slice(48,64),hiA:ie[1].slice(0,16),hiB:ie[1].slice(16,32),hiC:ie[1].slice(32,48),hiD:ie[1].slice(48,64)}}function U(j,Q,ne){var ae=j.length,ie,ue,xe,he=1/0,ge=-1/0;for(ie=0;ie<ae;ie++)j[ie].dim0.canvasX<he&&(he=j[ie].dim0.canvasX,ue=ie),j[ie].dim1.canvasX>ge&&(ge=j[ie].dim1.canvasX,xe=ie);ae===0&&i(P,0,0,O.canvasWidth,O.canvasHeight);var me=oe(S);for(ie=0;ie<ae;ie++){var ke=j[ie],Ae=ke.dim0.crossfilterDimensionIndex,Ne=ke.dim1.crossfilterDimensionIndex,He=ke.canvasX,Ge=ke.canvasY,_e=He+ke.panelSizeX,De=ke.plotGlPixelRatio;if(Q||!Z[Ae]||Z[Ae][0]!==He||Z[Ae][1]!==_e){Z[Ae]=[He,_e];var Ye=T(O,ue,xe,ie,Ae,Ne,He,Ge,ke.panelSizeX,ke.panelSizeY,ke.dim0.crossfilterDimensionIndex,S?0:k?2:1,me,De);D.clearOnly=ne;var qe=Q?O.lines.blockLineCount:W;v(P,se,D,qe,W,Ye)}}}function V(j,Q){return P.read({x:j,y:Q,width:1,height:1,data:n}),n}function re(j,Q,ne,ae){var ie=new Uint8Array(4*ne*ae);return P.read({x:j,y:Q,width:ne,height:ae,data:ie}),ie}function ee(){f.style["pointer-events"]="none",X.destroy(),J&&J.destroy();for(var j in q)q[j].destroy()}return{render:U,readPixel:V,readPixels:re,destroy:ee,update:le}}},{"../../lib":503,"./constants":892,glslify:227}],897:[function(t,B,H){B.exports=function(d,l,b,w){w||(w=1/0);var e,o;for(e=0;e<l.length;e++)o=l[e],o.visible&&(w=Math.min(w,o[b].length));for(w===1/0&&(w=0),d._length=w,e=0;e<l.length;e++)o=l[e],o.visible&&(o._length=w);return w}},{}],898:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib"),b=l.numberFormat,w=t("color-rgba"),e=t("../../plots/cartesian/axes"),o=l.strRotate,a=l.strTranslate,r=t("../../lib/svg_text_utils"),n=t("../../components/drawing"),c=t("../../components/colorscale"),s=t("../../lib/gup"),i=s.keyFun,v=s.repeat,u=s.unwrap,g=t("./helpers"),h=t("./constants"),y=t("./axisbrush"),p=t("./lines");function A(J,X,Z){return l.aggNums(J,null,X,Z)}function m(J,X){return x(A(Math.min,J,X),A(Math.max,J,X))}function M(J){var X=J.range;return X?x(X[0],X[1]):m(J.values,J._length)}function x(J,X){return(isNaN(J)||!isFinite(J))&&(J=0),(isNaN(X)||!isFinite(X))&&(X=0),J===X&&(J===0?(J-=1,X+=1):(J*=.9,X*=1.1)),[J,X]}function T(J,X){return X?function(Z,se){var le=X[se];return le==null?J(Z):le}:J}function _(J,X,Z,se,le){var oe=M(Z);return se?d.scale.ordinal().domain(se.map(T(b(Z.tickformat),le))).range(se.map(function(U){var V=(U-oe[0])/(oe[1]-oe[0]);return J-X+V*(2*X-J)})):d.scale.linear().domain(oe).range([J-X,X])}function f(J,X){return d.scale.linear().range([X,J-X])}function L(J,X){return d.scale.linear().domain(M(J)).range([X,1-X])}function S(J){if(!!J.tickvals){var X=M(J);return d.scale.ordinal().domain(J.tickvals).range(J.tickvals.map(function(Z){return(Z-X[0])/(X[1]-X[0])}))}}function k(J){var X=J.map(function(oe){return oe[0]}),Z=J.map(function(oe){var U=w(oe[1]);return d.rgb("rgb("+U[0]+","+U[1]+","+U[2]+")")}),se=function(oe){return function(U){return U[oe]}},le="rgb".split("").map(function(oe){return d.scale.linear().clamp(!0).domain(X).range(Z.map(se(oe)))});return function(oe){return le.map(function(U){return U(oe)})}}function P(J){return J.dimensions.some(function(X){return X.brush.filterSpecified})}function z(J,X,Z){var se=u(X),le=se.trace,oe=g.convertTypedArray(se.lineColor),U=le.line,V={color:w(h.deselectedLineColor)},re=c.extractOpts(U),ee=re.reversescale?c.flipScale(se.cscale):se.cscale,j=le.domain,Q=le.dimensions,ne=J.width,ae=le.labelangle,ie=le.labelside,ue=le.labelfont,xe=le.tickfont,he=le.rangefont,ge=l.extendDeepNoArrays({},U,{color:oe.map(d.scale.linear().domain(M({values:oe,range:[re.min,re.max],_length:le._length}))),blockLineCount:h.blockLineCount,canvasOverdrag:h.overdrag*h.canvasPixelRatio}),me=Math.floor(ne*(j.x[1]-j.x[0])),ke=Math.floor(J.height*(j.y[1]-j.y[0])),Ae=J.margin||{l:80,r:80,t:100,b:80},Ne=me,He=ke;return{key:Z,colCount:Q.filter(g.isVisible).length,dimensions:Q,tickDistance:h.tickDistance,unitToColor:k(ee),lines:ge,deselectedLines:V,labelAngle:ae,labelSide:ie,labelFont:ue,tickFont:xe,rangeFont:he,layoutWidth:ne,layoutHeight:J.height,domain:j,translateX:j.x[0]*ne,translateY:J.height-j.y[1]*J.height,pad:Ae,canvasWidth:Ne*h.canvasPixelRatio+2*ge.canvasOverdrag,canvasHeight:He*h.canvasPixelRatio,width:Ne,height:He,canvasPixelRatio:h.canvasPixelRatio}}function I(J,X,Z){var se=Z.width,le=Z.height,oe=Z.dimensions,U=Z.canvasPixelRatio,V=function(ne){return se*ne/Math.max(1,Z.colCount-1)},re=h.verticalPadding/le,ee=f(le,h.verticalPadding),j={key:Z.key,xScale:V,model:Z,inBrushDrag:!1},Q={};return j.dimensions=oe.filter(g.isVisible).map(function(ne,ae){var ie=L(ne,re),ue=Q[ne.label];Q[ne.label]=(ue||0)+1;var xe=ne.label+(ue?"__"+ue:""),he=ne.constraintrange,ge=he&&he.length;ge&&!Array.isArray(he[0])&&(he=[he]);var me=ge?he.map(function(Ue){return Ue.map(ie)}):[[-1/0,1/0]],ke=function(){var Ue=j;Ue.focusLayer&&Ue.focusLayer.render(Ue.panels,!0);var Ie=P(Ue);!J.contextShown()&&Ie?(Ue.contextLayer&&Ue.contextLayer.render(Ue.panels,!0),J.contextShown(!0)):J.contextShown()&&!Ie&&(Ue.contextLayer&&Ue.contextLayer.render(Ue.panels,!0,!0),J.contextShown(!1))},Ae=ne.values;Ae.length>ne._length&&(Ae=Ae.slice(0,ne._length));var Ne=ne.tickvals,He;function Ge(Ue,Ie){return{val:Ue,text:He[Ie]}}function _e(Ue,Ie){return Ue.val-Ie.val}if(Array.isArray(Ne)&&Ne.length){He=ne.ticktext,!Array.isArray(He)||!He.length?He=Ne.map(b(ne.tickformat)):He.length>Ne.length?He=He.slice(0,Ne.length):Ne.length>He.length&&(Ne=Ne.slice(0,He.length));for(var De=1;De<Ne.length;De++)if(Ne[De]<Ne[De-1]){for(var Ye=Ne.map(Ge).sort(_e),qe=0;qe<Ne.length;qe++)Ne[qe]=Ye[qe].val,He[qe]=Ye[qe].text;break}}else Ne=void 0;return Ae=g.convertTypedArray(Ae),{key:xe,label:ne.label,tickFormat:ne.tickformat,tickvals:Ne,ticktext:He,ordinal:g.isOrdinal(ne),multiselect:ne.multiselect,xIndex:ae,crossfilterDimensionIndex:ae,visibleIndex:ne._index,height:le,values:Ae,paddedUnitValues:Ae.map(ie),unitTickvals:Ne&&Ne.map(ie),xScale:V,x:V(ae),canvasX:V(ae)*U,unitToPaddedPx:ee,domainScale:_(le,h.verticalPadding,ne,Ne,He),ordinalScale:S(ne),parent:j,model:Z,brush:y.makeBrush(J,ge,me,function(){J.linePickActive(!1)},ke,function(Ue){if(j.focusLayer.render(j.panels,!0),j.pickLayer&&j.pickLayer.render(j.panels,!0),J.linePickActive(!0),X&&X.filterChanged){var Ie=ie.invert,Ve=Ue.map(function(dt){return dt.map(Ie).sort(l.sorterAsc)}).sort(function(dt,Dt){return dt[0]-Dt[0]});X.filterChanged(j.key,ne._index,Ve)}})}}),j}function R(J){J.classed(h.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function D(){var J=!0,X=!1;return{linePickActive:function(Z){return arguments.length?J=!!Z:J},contextShown:function(Z){return arguments.length?X=!!Z:X}}}function O(J,X){var Z=X==="top"?1:-1,se=J*Math.PI/180,le=Math.sin(se),oe=Math.cos(se);return{dir:Z,dx:le,dy:oe,degrees:J}}function F(J,X,Z){for(var se=X.panels||(X.panels=[]),le=J.data(),oe=0;oe<le.length-1;oe++){var U=se[oe]||(se[oe]={}),V=le[oe],re=le[oe+1];U.dim0=V,U.dim1=re,U.canvasX=V.canvasX,U.panelSizeX=re.canvasX-V.canvasX,U.panelSizeY=X.model.canvasHeight,U.y=0,U.canvasY=0,U.plotGlPixelRatio=Z}}function G(J){for(var X=0;X<J.length;X++)for(var Z=0;Z<J[X].length;Z++)for(var se=J[X][Z].trace,le=se.dimensions,oe=0;oe<le.length;oe++){var U=le[oe].values,V=le[oe]._ax;V&&(V.range?V.range=x(V.range[0],V.range[1]):V.range=m(U,se._length),V.dtick||(V.dtick=.01*(Math.abs(V.range[1]-V.range[0])||1)),V.tickformat=le[oe].tickformat,e.calcTicks(V),V.cleanRange())}}function W(J,X){return e.tickText(J._ax,X,!1).text}function q(J,X){if(J.ordinal)return"";var Z=J.domainScale.domain(),se=Z[X?Z.length-1:0];return W(J.model.dimensions[J.visibleIndex],se)}B.exports=function(X,Z,se,le){var oe=X._fullLayout,U=oe._toppaper,V=oe._glcontainer,re=X._context.plotGlPixelRatio,ee=X._fullLayout.paper_bgcolor;G(Z);var j=D(),Q=Z.filter(function(Ye){return u(Ye).trace.visible}).map(z.bind(0,se)).map(I.bind(0,j,le));V.each(function(Ye,qe){return l.extendFlat(Ye,Q[qe])});var ne=V.selectAll(".gl-canvas").each(function(Ye){Ye.viewModel=Q[0],Ye.viewModel.plotGlPixelRatio=re,Ye.viewModel.paperColor=ee,Ye.model=Ye.viewModel?Ye.viewModel.model:null}),ae=null,ie=ne.filter(function(Ye){return Ye.pick});ie.style("pointer-events","auto").on("mousemove",function(Ye){if(j.linePickActive()&&Ye.lineLayer&&le&&le.hover){var qe=d.event,Ue=this.width,Ie=this.height,Ve=d.mouse(this),dt=Ve[0],Dt=Ve[1];if(dt<0||Dt<0||dt>=Ue||Dt>=Ie)return;var Yt=Ye.lineLayer.readPixel(dt,Ie-1-Dt),kt=Yt[3]!==0,Ft=kt?Yt[2]+256*(Yt[1]+256*Yt[0]):null,Nt={x:dt,y:Dt,clientX:qe.clientX,clientY:qe.clientY,dataIndex:Ye.model.key,curveNumber:Ft};Ft!==ae&&(kt?le.hover(Nt):le.unhover&&le.unhover(Nt),ae=Ft)}}),ne.style("opacity",function(Ye){return Ye.pick?0:1}),U.style("background","rgba(255, 255, 255, 0)");var ue=U.selectAll("."+h.cn.parcoords).data(Q,i);ue.exit().remove(),ue.enter().append("g").classed(h.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),ue.attr("transform",function(Ye){return a(Ye.model.translateX,Ye.model.translateY)});var xe=ue.selectAll("."+h.cn.parcoordsControlView).data(v,i);xe.enter().append("g").classed(h.cn.parcoordsControlView,!0),xe.attr("transform",function(Ye){return a(Ye.model.pad.l,Ye.model.pad.t)});var he=xe.selectAll("."+h.cn.yAxis).data(function(Ye){return Ye.dimensions},i);he.enter().append("g").classed(h.cn.yAxis,!0),xe.each(function(Ye){F(he,Ye,re)}),ne.each(function(Ye){if(Ye.viewModel){!Ye.lineLayer||le?Ye.lineLayer=p(this,Ye):Ye.lineLayer.update(Ye),(Ye.key||Ye.key===0)&&(Ye.viewModel[Ye.key]=Ye.lineLayer);var qe=!Ye.context||le;Ye.lineLayer.render(Ye.viewModel.panels,qe)}}),he.attr("transform",function(Ye){return a(Ye.xScale(Ye.xIndex),0)}),he.call(d.behavior.drag().origin(function(Ye){return Ye}).on("drag",function(Ye){var qe=Ye.parent;j.linePickActive(!1),Ye.x=Math.max(-h.overdrag,Math.min(Ye.model.width+h.overdrag,d.event.x)),Ye.canvasX=Ye.x*Ye.model.canvasPixelRatio,he.sort(function(Ue,Ie){return Ue.x-Ie.x}).each(function(Ue,Ie){Ue.xIndex=Ie,Ue.x=Ye===Ue?Ue.x:Ue.xScale(Ue.xIndex),Ue.canvasX=Ue.x*Ue.model.canvasPixelRatio}),F(he,qe,re),he.filter(function(Ue){return Math.abs(Ye.xIndex-Ue.xIndex)!==0}).attr("transform",function(Ue){return a(Ue.xScale(Ue.xIndex),0)}),d.select(this).attr("transform",a(Ye.x,0)),he.each(function(Ue,Ie,Ve){Ve===Ye.parent.key&&(qe.dimensions[Ie]=Ue)}),qe.contextLayer&&qe.contextLayer.render(qe.panels,!1,!P(qe)),qe.focusLayer.render&&qe.focusLayer.render(qe.panels)}).on("dragend",function(Ye){var qe=Ye.parent;Ye.x=Ye.xScale(Ye.xIndex),Ye.canvasX=Ye.x*Ye.model.canvasPixelRatio,F(he,qe,re),d.select(this).attr("transform",function(Ue){return a(Ue.x,0)}),qe.contextLayer&&qe.contextLayer.render(qe.panels,!1,!P(qe)),qe.focusLayer&&qe.focusLayer.render(qe.panels),qe.pickLayer&&qe.pickLayer.render(qe.panels,!0),j.linePickActive(!0),le&&le.axesMoved&&le.axesMoved(qe.key,qe.dimensions.map(function(Ue){return Ue.crossfilterDimensionIndex}))})),he.exit().remove();var ge=he.selectAll("."+h.cn.axisOverlays).data(v,i);ge.enter().append("g").classed(h.cn.axisOverlays,!0),ge.selectAll("."+h.cn.axis).remove();var me=ge.selectAll("."+h.cn.axis).data(v,i);me.enter().append("g").classed(h.cn.axis,!0),me.each(function(Ye){var qe=Ye.model.height/Ye.model.tickDistance,Ue=Ye.domainScale,Ie=Ue.domain();d.select(this).call(d.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(qe,Ye.tickFormat).tickValues(Ye.ordinal?Ie:null).tickFormat(function(Ve){return g.isOrdinal(Ye)?Ve:W(Ye.model.dimensions[Ye.visibleIndex],Ve)}).scale(Ue)),n.font(me.selectAll("text"),Ye.model.tickFont)}),me.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),me.selectAll("text").style("text-shadow",r.makeTextShadow(ee)).style("cursor","default");var ke=ge.selectAll("."+h.cn.axisHeading).data(v,i);ke.enter().append("g").classed(h.cn.axisHeading,!0);var Ae=ke.selectAll("."+h.cn.axisTitle).data(v,i);Ae.enter().append("text").classed(h.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events","auto"),Ae.text(function(Ye){return Ye.label}).each(function(Ye){var qe=d.select(this);n.font(qe,Ye.model.labelFont),r.convertToTspans(qe,X)}).attr("transform",function(Ye){var qe=O(Ye.model.labelAngle,Ye.model.labelSide),Ue=h.axisTitleOffset;return(qe.dir>0?"":a(0,2*Ue+Ye.model.height))+o(qe.degrees)+a(-Ue*qe.dx,-Ue*qe.dy)}).attr("text-anchor",function(Ye){var qe=O(Ye.model.labelAngle,Ye.model.labelSide),Ue=Math.abs(qe.dx),Ie=Math.abs(qe.dy);return 2*Ue>Ie?qe.dir*qe.dx<0?"start":"end":"middle"});var Ne=ge.selectAll("."+h.cn.axisExtent).data(v,i);Ne.enter().append("g").classed(h.cn.axisExtent,!0);var He=Ne.selectAll("."+h.cn.axisExtentTop).data(v,i);He.enter().append("g").classed(h.cn.axisExtentTop,!0),He.attr("transform",a(0,-h.axisExtentOffset));var Ge=He.selectAll("."+h.cn.axisExtentTopText).data(v,i);Ge.enter().append("text").classed(h.cn.axisExtentTopText,!0).call(R),Ge.text(function(Ye){return q(Ye,!0)}).each(function(Ye){n.font(d.select(this),Ye.model.rangeFont)});var _e=Ne.selectAll("."+h.cn.axisExtentBottom).data(v,i);_e.enter().append("g").classed(h.cn.axisExtentBottom,!0),_e.attr("transform",function(Ye){return a(0,Ye.model.height+h.axisExtentOffset)});var De=_e.selectAll("."+h.cn.axisExtentBottomText).data(v,i);De.enter().append("text").classed(h.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(R),De.text(function(Ye){return q(Ye,!1)}).each(function(Ye){n.font(d.select(this),Ye.model.rangeFont)}),y.ensureAxisBrush(ge,ee)}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"./axisbrush":889,"./constants":892,"./helpers":894,"./lines":896,"@plotly/d3":58,"color-rgba":91}],899:[function(t,B,H){var d=t("./parcoords"),l=t("../../lib/prepare_regl"),b=t("./helpers").isVisible;function w(o,a,r){var n=a.indexOf(r),c=o.indexOf(n);return c===-1&&(c+=a.length),c}function e(o,a){return function(n,c){return w(o,a,n)-w(o,a,c)}}B.exports=function(a,r){var n=a._fullLayout,c=l(a);if(!!c){var s={},i={},v={},u={},g=n._size;r.forEach(function(m,M){var x=m[0].trace;v[M]=x.index;var T=u[M]=x._fullInput.index;s[M]=a.data[T].dimensions,i[M]=a.data[T].dimensions.slice()});var h=function(m,M,x){var T=i[m][M],_=x.map(function(z){return z.slice()}),f="dimensions["+M+"].constraintrange",L=n._tracePreGUI[a._fullData[v[m]]._fullInput.uid];if(L[f]===void 0){var S=T.constraintrange;L[f]=S||null}var k=a._fullData[v[m]].dimensions[M];_.length?(_.length===1&&(_=_[0]),T.constraintrange=_,k.constraintrange=_.slice(),_=[_]):(delete T.constraintrange,delete k.constraintrange,_=null);var P={};P[f]=_,a.emit("plotly_restyle",[P,[u[m]]])},y=function(m){a.emit("plotly_hover",m)},p=function(m){a.emit("plotly_unhover",m)},A=function(m,M){var x=e(M,i[m].filter(b));s[m].sort(x),i[m].filter(function(T){return!b(T)}).sort(function(T){return i[m].indexOf(T)}).forEach(function(T){s[m].splice(s[m].indexOf(T),1),s[m].splice(i[m].indexOf(T),0,T)}),a.emit("plotly_restyle",[{dimensions:[s[m]]},[u[m]]])};d(a,r,{width:g.w,height:g.h,margin:{t:g.t,r:g.r,b:g.b,l:g.l}},{filterChanged:h,hover:y,unhover:p,axesMoved:A})}}},{"../../lib/prepare_regl":516,"./helpers":894,"./parcoords":898}],900:[function(t,B,H){var d=t("../../plots/attributes"),l=t("../../plots/domain").attributes,b=t("../../plots/font_attributes"),w=t("../../components/color/attributes"),e=t("../../plots/template_attributes").hovertemplateAttrs,o=t("../../plots/template_attributes").texttemplateAttrs,a=t("../../lib/extend").extendFlat,r=b({editType:"plot",arrayOk:!0,colorEditType:"plot"});B.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:w.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:a({},d.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:e({},{keys:["label","color","value","percent","text"]}),texttemplate:o({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:a({},r,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:a({},r,{}),outsidetextfont:a({},r,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:a({},r,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:l({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:a({},r,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],901:[function(t,B,H){var d=t("../../plots/plots");H.name="pie",H.plot=function(l,b,w,e){d.plotBasePlot(H.name,l,b,w,e)},H.clean=function(l,b,w,e){d.cleanBasePlot(H.name,l,b,w,e)}},{"../../plots/plots":619}],902:[function(t,B,H){var d=t("fast-isnumeric"),l=t("tinycolor2"),b=t("../../components/color"),w={};function e(n,c){var s=[],i=n._fullLayout,v=i.hiddenlabels||[],u=c.labels,g=c.marker.colors||[],h=c.values,y=c._length,p=c._hasValues&&y,A,m;if(c.dlabel)for(u=new Array(y),A=0;A<y;A++)u[A]=String(c.label0+A*c.dlabel);var M={},x=o(i["_"+c.type+"colormap"]),T=0,_=!1;for(A=0;A<y;A++){var f,L,S;if(p){if(f=h[A],!d(f))continue;f=+f}else f=1;L=u[A],(L===void 0||L==="")&&(L=A),L=String(L);var k=M[L];k===void 0?(M[L]=s.length,S=v.indexOf(L)!==-1,S||(T+=f),s.push({v:f,label:L,color:x(g[A],L),i:A,pts:[A],hidden:S})):(_=!0,m=s[k],m.v+=f,m.pts.push(A),m.hidden||(T+=f),m.color===!1&&g[A]&&(m.color=x(g[A],L)))}s=s.filter(function(z){return z.v>=0});var P=c.type==="funnelarea"?_:c.sort;return P&&s.sort(function(z,I){return I.v-z.v}),s[0]&&(s[0].vTotal=T),s}function o(n){return function(s,i){return!s||(s=l(s),!s.isValid())?!1:(s=b.addOpacity(s,s.getAlpha()),n[i]||(n[i]=s),s)}}function a(n,c){var s=(c||{}).type;s||(s="pie");var i=n._fullLayout,v=n.calcdata,u=i[s+"colorway"],g=i["_"+s+"colormap"];i["extend"+s+"colors"]&&(u=r(u,w));for(var h=0,y=0;y<v.length;y++){var p=v[y],A=p[0].trace.type;if(A===s)for(var m=0;m<p.length;m++){var M=p[m];M.color===!1&&(g[M.label]?M.color=g[M.label]:(g[M.label]=M.color=u[h%u.length],h++))}}}function r(n,c){var s,i=JSON.stringify(n),v=c[i];if(!v){for(v=n.slice(),s=0;s<n.length;s++)v.push(l(n[s]).lighten(20).toHexString());for(s=0;s<n.length;s++)v.push(l(n[s]).darken(20).toHexString());c[i]=v}return v}B.exports={calc:e,crossTraceCalc:a,makePullColorFn:o,generateExtendedColors:r}},{"../../components/color":366,"fast-isnumeric":190,tinycolor2:312}],903:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../lib"),b=t("./attributes"),w=t("../../plots/domain").defaults,e=t("../bar/defaults").handleText;function o(r,n){var c=Array.isArray(r),s=l.isArrayOrTypedArray(n),i=Math.min(c?r.length:1/0,s?n.length:1/0);if(isFinite(i)||(i=0),i&&s){for(var v,u=0;u<i;u++){var g=n[u];if(d(g)&&g>0){v=!0;break}}v||(i=0)}return{hasLabels:c,hasValues:s,len:i}}function a(r,n,c,s){function i(S,k){return l.coerce(r,n,b,S,k)}var v=i("labels"),u=i("values"),g=o(v,u),h=g.len;if(n._hasLabels=g.hasLabels,n._hasValues=g.hasValues,!n._hasLabels&&n._hasValues&&(i("label0"),i("dlabel")),!h){n.visible=!1;return}n._length=h;var y=i("marker.line.width");y&&i("marker.line.color"),i("marker.colors"),i("scalegroup");var p=i("text"),A=i("texttemplate"),m;if(A||(m=i("textinfo",Array.isArray(p)?"text+percent":"percent")),i("hovertext"),i("hovertemplate"),A||m&&m!=="none"){var M=i("textposition");e(r,n,s,i,M,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});var x=Array.isArray(M)||M==="auto",T=x||M==="outside";T&&i("automargin"),(M==="inside"||M==="auto"||Array.isArray(M))&&i("insidetextorientation")}w(n,s,i);var _=i("hole"),f=i("title.text");if(f){var L=i("title.position",_?"middle center":"top center");!_&&L==="middle center"&&(n.title.position="top center"),l.coerceFont(i,"title.font",s.font)}i("sort"),i("direction"),i("rotation"),i("pull")}B.exports={handleLabelsAndValues:o,supplyDefaults:a}},{"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"./attributes":900,"fast-isnumeric":190}],904:[function(t,B,H){var d=t("../../components/fx/helpers").appendArrayMultiPointValues;B.exports=function(b,w){var e={curveNumber:w.index,pointNumbers:b.pts,data:w._input,fullData:w,label:b.label,color:b.color,value:b.v,percent:b.percent,text:b.text,bbox:b.bbox,v:b.v};return b.pts.length===1&&(e.pointNumber=e.i=b.pts[0]),d(e,w,b.pts),w.type==="funnelarea"&&(delete e.v,delete e.i),e}},{"../../components/fx/helpers":402}],905:[function(t,B,H){var d=t("../../lib");function l(b){return b.indexOf("e")!==-1?b.replace(/[.]?0+e/,"e"):b.indexOf(".")!==-1?b.replace(/[.]?0+$/,""):b}H.formatPiePercent=function(w,e){var o=l((w*100).toPrecision(3));return d.numSeparate(o,e)+"%"},H.formatPieValue=function(w,e){var o=l(w.toPrecision(10));return d.numSeparate(o,e)},H.getFirstFilled=function(w,e){if(!!Array.isArray(w))for(var o=0;o<e.length;o++){var a=w[e[o]];if(a||a===0||a==="")return a}},H.castOption=function(w,e){if(Array.isArray(w))return H.getFirstFilled(w,e);if(w)return w},H.getRotationAngle=function(b){return(b==="auto"?0:b)*Math.PI/180}},{"../../lib":503}],906:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults").supplyDefaults,supplyLayoutDefaults:t("./layout_defaults"),layoutAttributes:t("./layout_attributes"),calc:t("./calc").calc,crossTraceCalc:t("./calc").crossTraceCalc,plot:t("./plot").plot,style:t("./style"),styleOne:t("./style_one"),moduleType:"trace",name:"pie",basePlotModule:t("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":900,"./base_plot":901,"./calc":902,"./defaults":903,"./layout_attributes":907,"./layout_defaults":908,"./plot":909,"./style":910,"./style_one":911}],907:[function(t,B,H){B.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],908:[function(t,B,H){var d=t("../../lib"),l=t("./layout_attributes");B.exports=function(w,e){function o(a,r){return d.coerce(w,e,l,a,r)}o("hiddenlabels"),o("piecolorway",e.colorway),o("extendpiecolors")}},{"../../lib":503,"./layout_attributes":907}],909:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../plots/plots"),b=t("../../components/fx"),w=t("../../components/color"),e=t("../../components/drawing"),o=t("../../lib"),a=o.strScale,r=o.strTranslate,n=t("../../lib/svg_text_utils"),c=t("../bar/uniform_text"),s=c.recordMinTextSize,i=c.clearMinTextSize,v=t("../bar/constants").TEXTPAD,u=t("./helpers"),g=t("./event_data"),h=t("../../lib").isValidTextValue;function y(oe,U){var V=oe._fullLayout,re=V._size;i("pie",V),x(U,oe),q(U,re);var ee=o.makeTraceGroups(V._pielayer,U,"trace").each(function(j){var Q=d.select(this),ne=j[0],ae=ne.trace;X(j),Q.attr("stroke-linejoin","round"),Q.each(function(){var ie=d.select(this).selectAll("g.slice").data(j);ie.enter().append("g").classed("slice",!0),ie.exit().remove();var ue=[[[],[]],[[],[]]],xe=!1;ie.each(function(Ge,_e){if(Ge.hidden){d.select(this).selectAll("path,g").remove();return}Ge.pointNumber=Ge.i,Ge.curveNumber=ae.index,ue[Ge.pxmid[1]<0?0:1][Ge.pxmid[0]<0?0:1].push(Ge);var De=ne.cx,Ye=ne.cy,qe=d.select(this),Ue=qe.selectAll("path.surface").data([Ge]);if(Ue.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),qe.call(A,oe,j),ae.pull){var Ie=+u.castOption(ae.pull,Ge.pts)||0;Ie>0&&(De+=Ie*Ge.pxmid[0],Ye+=Ie*Ge.pxmid[1])}Ge.cxFinal=De,Ge.cyFinal=Ye;function Ve(Lt,St,it,ht){var Qe=ht*(St[0]-Lt[0]),Ce=ht*(St[1]-Lt[1]);return"a"+ht*ne.r+","+ht*ne.r+" 0 "+Ge.largeArc+(it?" 1 ":" 0 ")+Qe+","+Ce}var dt=ae.hole;if(Ge.v===ne.vTotal){var Dt="M"+(De+Ge.px0[0])+","+(Ye+Ge.px0[1])+Ve(Ge.px0,Ge.pxmid,!0,1)+Ve(Ge.pxmid,Ge.px0,!0,1)+"Z";dt?Ue.attr("d","M"+(De+dt*Ge.px0[0])+","+(Ye+dt*Ge.px0[1])+Ve(Ge.px0,Ge.pxmid,!1,dt)+Ve(Ge.pxmid,Ge.px0,!1,dt)+"Z"+Dt):Ue.attr("d",Dt)}else{var Yt=Ve(Ge.px0,Ge.px1,!0,1);if(dt){var kt=1-dt;Ue.attr("d","M"+(De+dt*Ge.px1[0])+","+(Ye+dt*Ge.px1[1])+Ve(Ge.px1,Ge.px0,!1,dt)+"l"+kt*Ge.px0[0]+","+kt*Ge.px0[1]+Yt+"Z")}else Ue.attr("d","M"+De+","+Ye+"l"+Ge.px0[0]+","+Ge.px0[1]+Yt+"Z")}se(oe,Ge,ne);var Ft=u.castOption(ae.textposition,Ge.pts),Nt=qe.selectAll("g.slicetext").data(Ge.text&&Ft!=="none"?[0]:[]);Nt.enter().append("g").classed("slicetext",!0),Nt.exit().remove(),Nt.each(function(){var Lt=o.ensureSingle(d.select(this),"text","",function(ut){ut.attr("data-notex",1)}),St=o.ensureUniformFontSize(oe,Ft==="outside"?m(ae,Ge,V.font):M(ae,Ge,V.font));Lt.text(Ge.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(e.font,St).call(n.convertToTspans,oe);var it=e.bBox(Lt.node()),ht;if(Ft==="outside")ht=I(it,Ge);else if(ht=T(it,Ge,ne),Ft==="auto"&&ht.scale<1){var Qe=o.ensureUniformFontSize(oe,ae.outsidetextfont);Lt.call(e.font,Qe),it=e.bBox(Lt.node()),ht=I(it,Ge)}var Ce=ht.textPosAngle,je=Ce===void 0?Ge.pxmid:Z(ne.r,Ce);if(ht.targetX=De+je[0]*ht.rCenter+(ht.x||0),ht.targetY=Ye+je[1]*ht.rCenter+(ht.y||0),le(ht,it),ht.outside){var rt=ht.targetY;Ge.yLabelMin=rt-it.height/2,Ge.yLabelMid=rt,Ge.yLabelMax=rt+it.height/2,Ge.labelExtraX=0,Ge.labelExtraY=0,xe=!0}ht.fontSize=St.size,s(ae.type,ht,V),j[_e].transform=ht,Lt.attr("transform",o.getTextTransform(ht))})});var he=d.select(this).selectAll("g.titletext").data(ae.title.text?[0]:[]);if(he.enter().append("g").classed("titletext",!0),he.exit().remove(),he.each(function(){var Ge=o.ensureSingle(d.select(this),"text","",function(Ye){Ye.attr("data-notex",1)}),_e=ae.title.text;ae._meta&&(_e=o.templateString(_e,ae._meta)),Ge.text(_e).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(e.font,ae.title.font).call(n.convertToTspans,oe);var De;ae.title.position==="middle center"?De=R(ne):De=D(ne,re),Ge.attr("transform",r(De.x,De.y)+a(Math.min(1,De.scale))+r(De.tx,De.ty))}),xe&&W(ue,ae),p(ie,ae),xe&&ae.automargin){var ge=e.bBox(Q.node()),me=ae.domain,ke=re.w*(me.x[1]-me.x[0]),Ae=re.h*(me.y[1]-me.y[0]),Ne=(.5*ke-ne.r)/re.w,He=(.5*Ae-ne.r)/re.h;l.autoMargin(oe,"pie."+ae.uid+".automargin",{xl:me.x[0]-Ne,xr:me.x[1]+Ne,yb:me.y[0]-He,yt:me.y[1]+He,l:Math.max(ne.cx-ne.r-ge.left,0),r:Math.max(ge.right-(ne.cx+ne.r),0),b:Math.max(ge.bottom-(ne.cy+ne.r),0),t:Math.max(ne.cy-ne.r-ge.top,0),pad:5})}})});setTimeout(function(){ee.selectAll("tspan").each(function(){var j=d.select(this);j.attr("dy")&&j.attr("dy",j.attr("dy"))})},0)}function p(oe,U){oe.each(function(V){var re=d.select(this);if(!V.labelExtraX&&!V.labelExtraY){re.select("path.textline").remove();return}var ee=re.select("g.slicetext text");V.transform.targetX+=V.labelExtraX,V.transform.targetY+=V.labelExtraY,ee.attr("transform",o.getTextTransform(V.transform));var j=V.cxFinal+V.pxmid[0],Q=V.cyFinal+V.pxmid[1],ne="M"+j+","+Q,ae=(V.yLabelMax-V.yLabelMin)*(V.pxmid[0]<0?-1:1)/4;if(V.labelExtraX){var ie=V.labelExtraX*V.pxmid[1]/V.pxmid[0],ue=V.yLabelMid+V.labelExtraY-(V.cyFinal+V.pxmid[1]);Math.abs(ie)>Math.abs(ue)?ne+="l"+ue*V.pxmid[0]/V.pxmid[1]+","+ue+"H"+(j+V.labelExtraX+ae):ne+="l"+V.labelExtraX+","+ie+"v"+(ue-ie)+"h"+ae}else ne+="V"+(V.yLabelMid+V.labelExtraY)+"h"+ae;o.ensureSingle(re,"path","textline").call(w.stroke,U.outsidetextfont.color).attr({"stroke-width":Math.min(2,U.outsidetextfont.size/8),d:ne,fill:"none"})})}function A(oe,U,V){var re=V[0],ee=re.cx,j=re.cy,Q=re.trace,ne=Q.type==="funnelarea";"_hasHoverLabel"in Q||(Q._hasHoverLabel=!1),"_hasHoverEvent"in Q||(Q._hasHoverEvent=!1),oe.on("mouseover",function(ae){var ie=U._fullLayout,ue=U._fullData[Q.index];if(!(U._dragging||ie.hovermode===!1)){var xe=ue.hoverinfo;if(Array.isArray(xe)&&(xe=b.castHoverinfo({hoverinfo:[u.castOption(xe,ae.pts)],_module:Q._module},ie,0)),xe==="all"&&(xe="label+text+value+percent+name"),ue.hovertemplate||xe!=="none"&&xe!=="skip"&&xe){var he=ae.rInscribed||0,ge=ee+ae.pxmid[0]*(1-he),me=j+ae.pxmid[1]*(1-he),ke=ie.separators,Ae=[];if(xe&&xe.indexOf("label")!==-1&&Ae.push(ae.label),ae.text=u.castOption(ue.hovertext||ue.text,ae.pts),xe&&xe.indexOf("text")!==-1){var Ne=ae.text;o.isValidTextValue(Ne)&&Ae.push(Ne)}ae.value=ae.v,ae.valueLabel=u.formatPieValue(ae.v,ke),xe&&xe.indexOf("value")!==-1&&Ae.push(ae.valueLabel),ae.percent=ae.v/re.vTotal,ae.percentLabel=u.formatPiePercent(ae.percent,ke),xe&&xe.indexOf("percent")!==-1&&Ae.push(ae.percentLabel);var He=ue.hoverlabel,Ge=He.font,_e=[];b.loneHover({trace:Q,x0:ge-he*re.r,x1:ge+he*re.r,y:me,_x0:ne?ee+ae.TL[0]:ge-he*re.r,_x1:ne?ee+ae.TR[0]:ge+he*re.r,_y0:ne?j+ae.TL[1]:me-he*re.r,_y1:ne?j+ae.BL[1]:me+he*re.r,text:Ae.join("<br>"),name:ue.hovertemplate||xe.indexOf("name")!==-1?ue.name:void 0,idealAlign:ae.pxmid[0]<0?"left":"right",color:u.castOption(He.bgcolor,ae.pts)||ae.color,borderColor:u.castOption(He.bordercolor,ae.pts),fontFamily:u.castOption(Ge.family,ae.pts),fontSize:u.castOption(Ge.size,ae.pts),fontColor:u.castOption(Ge.color,ae.pts),nameLength:u.castOption(He.namelength,ae.pts),textAlign:u.castOption(He.align,ae.pts),hovertemplate:u.castOption(ue.hovertemplate,ae.pts),hovertemplateLabels:ae,eventData:[g(ae,ue)]},{container:ie._hoverlayer.node(),outerContainer:ie._paper.node(),gd:U,inOut_bbox:_e}),ae.bbox=_e[0],Q._hasHoverLabel=!0}Q._hasHoverEvent=!0,U.emit("plotly_hover",{points:[g(ae,ue)],event:d.event})}}),oe.on("mouseout",function(ae){var ie=U._fullLayout,ue=U._fullData[Q.index],xe=d.select(this).datum();Q._hasHoverEvent&&(ae.originalEvent=d.event,U.emit("plotly_unhover",{points:[g(xe,ue)],event:d.event}),Q._hasHoverEvent=!1),Q._hasHoverLabel&&(b.loneUnhover(ie._hoverlayer.node()),Q._hasHoverLabel=!1)}),oe.on("click",function(ae){var ie=U._fullLayout,ue=U._fullData[Q.index];U._dragging||ie.hovermode===!1||(U._hoverdata=[g(ae,ue)],b.click(U,d.event))})}function m(oe,U,V){var re=u.castOption(oe.outsidetextfont.color,U.pts)||u.castOption(oe.textfont.color,U.pts)||V.color,ee=u.castOption(oe.outsidetextfont.family,U.pts)||u.castOption(oe.textfont.family,U.pts)||V.family,j=u.castOption(oe.outsidetextfont.size,U.pts)||u.castOption(oe.textfont.size,U.pts)||V.size;return{color:re,family:ee,size:j}}function M(oe,U,V){var re=u.castOption(oe.insidetextfont.color,U.pts);!re&&oe._input.textfont&&(re=u.castOption(oe._input.textfont.color,U.pts));var ee=u.castOption(oe.insidetextfont.family,U.pts)||u.castOption(oe.textfont.family,U.pts)||V.family,j=u.castOption(oe.insidetextfont.size,U.pts)||u.castOption(oe.textfont.size,U.pts)||V.size;return{color:re||w.contrast(U.color),family:ee,size:j}}function x(oe,U){for(var V,re,ee=0;ee<oe.length;ee++)if(V=oe[ee][0],re=V.trace,re.title.text){var j=re.title.text;re._meta&&(j=o.templateString(j,re._meta));var Q=e.tester.append("text").attr("data-notex",1).text(j).call(e.font,re.title.font).call(n.convertToTspans,U),ne=e.bBox(Q.node(),!0);V.titleBox={width:ne.width,height:ne.height},Q.remove()}}function T(oe,U,V){var re=V.r||U.rpx1,ee=U.rInscribed,j=U.startangle===U.stopangle;if(j)return{rCenter:1-ee,scale:0,rotate:0,textPosAngle:0};var Q=U.ring,ne=Q===1&&Math.abs(U.startangle-U.stopangle)===Math.PI*2,ae=U.halfangle,ie=U.midangle,ue=V.trace.insidetextorientation,xe=ue==="horizontal",he=ue==="tangential",ge=ue==="radial",me=ue==="auto",ke=[],Ae;if(!me){var Ne=function(Ue,Ie){if(_(U,Ue)){var Ve=Math.abs(Ue-U.startangle),dt=Math.abs(Ue-U.stopangle),Dt=Ve<dt?Ve:dt;Ie==="tan"?Ae=L(oe,re,Q,Dt,0):Ae=f(oe,re,Q,Dt,Math.PI/2),Ae.textPosAngle=Ue,ke.push(Ae)}},He;if(xe||he){for(He=4;He>=-4;He-=2)Ne(Math.PI*He,"tan");for(He=4;He>=-4;He-=2)Ne(Math.PI*(He+1),"tan")}if(xe||ge){for(He=4;He>=-4;He-=2)Ne(Math.PI*(He+1.5),"rad");for(He=4;He>=-4;He-=2)Ne(Math.PI*(He+.5),"rad")}}if(ne||me||xe){var Ge=Math.sqrt(oe.width*oe.width+oe.height*oe.height);if(Ae={scale:ee*re*2/Ge,rCenter:1-ee,rotate:0},Ae.textPosAngle=(U.startangle+U.stopangle)/2,Ae.scale>=1)return Ae;ke.push(Ae)}(me||ge)&&(Ae=f(oe,re,Q,ae,ie),Ae.textPosAngle=(U.startangle+U.stopangle)/2,ke.push(Ae)),(me||he)&&(Ae=L(oe,re,Q,ae,ie),Ae.textPosAngle=(U.startangle+U.stopangle)/2,ke.push(Ae));for(var _e=0,De=0,Ye=0;Ye<ke.length;Ye++){var qe=ke[Ye].scale;if(De<qe&&(De=qe,_e=Ye),!me&&De>=1)break}return ke[_e]}function _(oe,U){var V=oe.startangle,re=oe.stopangle;return V>U&&U>re||V<U&&U<re}function f(oe,U,V,re,ee){U=Math.max(0,U-2*v);var j=oe.width/oe.height,Q=P(j,re,U,V);return{scale:Q*2/oe.height,rCenter:S(j,Q/U),rotate:k(ee)}}function L(oe,U,V,re,ee){U=Math.max(0,U-2*v);var j=oe.height/oe.width,Q=P(j,re,U,V);return{scale:Q*2/oe.width,rCenter:S(j,Q/U),rotate:k(ee+Math.PI/2)}}function S(oe,U){return Math.cos(U)-oe*U}function k(oe){return(180/Math.PI*oe+720)%180-90}function P(oe,U,V,re){var ee=oe+1/(2*Math.tan(U));return V*Math.min(1/(Math.sqrt(ee*ee+.5)+ee),re/(Math.sqrt(oe*oe+re/2)+oe))}function z(oe,U){return oe.v===U.vTotal&&!U.trace.hole?1:Math.min(1/(1+1/Math.sin(oe.halfangle)),oe.ring/2)}function I(oe,U){var V=U.pxmid[0],re=U.pxmid[1],ee=oe.width/2,j=oe.height/2;return V<0&&(ee*=-1),re<0&&(j*=-1),{scale:1,rCenter:1,rotate:0,x:ee+Math.abs(j)*(ee>0?1:-1)/2,y:j/(1+V*V/(re*re)),outside:!0}}function R(oe){var U=Math.sqrt(oe.titleBox.width*oe.titleBox.width+oe.titleBox.height*oe.titleBox.height);return{x:oe.cx,y:oe.cy,scale:oe.trace.hole*oe.r*2/U,tx:0,ty:-oe.titleBox.height/2+oe.trace.title.font.size}}function D(oe,U){var V=1,re=1,ee,j=oe.trace,Q={x:oe.cx,y:oe.cy},ne={tx:0,ty:0};ne.ty+=j.title.font.size,ee=G(j),j.title.position.indexOf("top")!==-1?(Q.y-=(1+ee)*oe.r,ne.ty-=oe.titleBox.height):j.title.position.indexOf("bottom")!==-1&&(Q.y+=(1+ee)*oe.r);var ae=O(oe.r,oe.trace.aspectratio),ie=U.w*(j.domain.x[1]-j.domain.x[0])/2;return j.title.position.indexOf("left")!==-1?(ie=ie+ae,Q.x-=(1+ee)*ae,ne.tx+=oe.titleBox.width/2):j.title.position.indexOf("center")!==-1?ie*=2:j.title.position.indexOf("right")!==-1&&(ie=ie+ae,Q.x+=(1+ee)*ae,ne.tx-=oe.titleBox.width/2),V=ie/oe.titleBox.width,re=F(oe,U)/oe.titleBox.height,{x:Q.x,y:Q.y,scale:Math.min(V,re),tx:ne.tx,ty:ne.ty}}function O(oe,U){return oe/(U===void 0?1:U)}function F(oe,U){var V=oe.trace,re=U.h*(V.domain.y[1]-V.domain.y[0]);return Math.min(oe.titleBox.height,re/2)}function G(oe){var U=oe.pull;if(!U)return 0;var V;if(Array.isArray(U))for(U=0,V=0;V<oe.pull.length;V++)oe.pull[V]>U&&(U=oe.pull[V]);return U}function W(oe,U){var V,re,ee,j,Q,ne,ae,ie,ue,xe,he,ge,me;function ke(Ge,_e){return Ge.pxmid[1]-_e.pxmid[1]}function Ae(Ge,_e){return _e.pxmid[1]-Ge.pxmid[1]}function Ne(Ge,_e){_e||(_e={});var De=_e.labelExtraY+(re?_e.yLabelMax:_e.yLabelMin),Ye=re?Ge.yLabelMin:Ge.yLabelMax,qe=re?Ge.yLabelMax:Ge.yLabelMin,Ue=Ge.cyFinal+Q(Ge.px0[1],Ge.px1[1]),Ie=De-Ye,Ve,dt,Dt,Yt,kt,Ft;if(Ie*ae>0&&(Ge.labelExtraY=Ie),!!Array.isArray(U.pull))for(dt=0;dt<xe.length;dt++)Dt=xe[dt],!(Dt===Ge||(u.castOption(U.pull,Ge.pts)||0)>=(u.castOption(U.pull,Dt.pts)||0))&&((Ge.pxmid[1]-Dt.pxmid[1])*ae>0?(Yt=Dt.cyFinal+Q(Dt.px0[1],Dt.px1[1]),Ie=Yt-Ye-Ge.labelExtraY,Ie*ae>0&&(Ge.labelExtraY+=Ie)):(qe+Ge.labelExtraY-Ue)*ae>0&&(Ve=3*ne*Math.abs(dt-xe.indexOf(Ge)),kt=Dt.cxFinal+j(Dt.px0[0],Dt.px1[0]),Ft=kt+Ve-(Ge.cxFinal+Ge.pxmid[0])-Ge.labelExtraX,Ft*ne>0&&(Ge.labelExtraX+=Ft)))}for(re=0;re<2;re++)for(ee=re?ke:Ae,Q=re?Math.max:Math.min,ae=re?1:-1,V=0;V<2;V++){for(j=V?Math.max:Math.min,ne=V?1:-1,ie=oe[re][V],ie.sort(ee),ue=oe[1-re][V],xe=ue.concat(ie),ge=[],he=0;he<ie.length;he++)ie[he].yLabelMid!==void 0&&ge.push(ie[he]);for(me=!1,he=0;re&&he<ue.length;he++)if(ue[he].yLabelMid!==void 0){me=ue[he];break}for(he=0;he<ge.length;he++){var He=he&&ge[he-1];me&&!he&&(He=me),Ne(ge[he],He)}}}function q(oe,U){for(var V=[],re=0;re<oe.length;re++){var ee=oe[re][0],j=ee.trace,Q=j.domain,ne=U.w*(Q.x[1]-Q.x[0]),ae=U.h*(Q.y[1]-Q.y[0]);j.title.text&&j.title.position!=="middle center"&&(ae-=F(ee,U));var ie=ne/2,ue=ae/2;j.type==="funnelarea"&&!j.scalegroup&&(ue/=j.aspectratio),ee.r=Math.min(ie,ue)/(1+G(j)),ee.cx=U.l+U.w*(j.domain.x[1]+j.domain.x[0])/2,ee.cy=U.t+U.h*(1-j.domain.y[0])-ae/2,j.title.text&&j.title.position.indexOf("bottom")!==-1&&(ee.cy-=F(ee,U)),j.scalegroup&&V.indexOf(j.scalegroup)===-1&&V.push(j.scalegroup)}J(oe,V)}function J(oe,U){for(var V,re,ee,j=0;j<U.length;j++){var Q=1/0,ne=U[j];for(re=0;re<oe.length;re++)if(V=oe[re][0],ee=V.trace,ee.scalegroup===ne){var ae;if(ee.type==="pie")ae=V.r*V.r;else if(ee.type==="funnelarea"){var ie,ue;ee.aspectratio>1?(ie=V.r,ue=ie/ee.aspectratio):(ue=V.r,ie=ue*ee.aspectratio),ie*=(1+ee.baseratio)/2,ae=ie*ue}Q=Math.min(Q,ae/V.vTotal)}for(re=0;re<oe.length;re++)if(V=oe[re][0],ee=V.trace,ee.scalegroup===ne){var xe=Q*V.vTotal;ee.type==="funnelarea"&&(xe/=(1+ee.baseratio)/2,xe/=ee.aspectratio),V.r=Math.sqrt(xe)}}}function X(oe){var U=oe[0],V=U.r,re=U.trace,ee=u.getRotationAngle(re.rotation),j=2*Math.PI/U.vTotal,Q="px0",ne="px1",ae,ie,ue;if(re.direction==="counterclockwise"){for(ae=0;ae<oe.length&&oe[ae].hidden;ae++);if(ae===oe.length)return;ee+=j*oe[ae].v,j*=-1,Q="px1",ne="px0"}for(ue=Z(V,ee),ae=0;ae<oe.length;ae++)ie=oe[ae],!ie.hidden&&(ie[Q]=ue,ie.startangle=ee,ee+=j*ie.v/2,ie.pxmid=Z(V,ee),ie.midangle=ee,ee+=j*ie.v/2,ue=Z(V,ee),ie.stopangle=ee,ie[ne]=ue,ie.largeArc=ie.v>U.vTotal/2?1:0,ie.halfangle=Math.PI*Math.min(ie.v/U.vTotal,.5),ie.ring=1-re.hole,ie.rInscribed=z(ie,U))}function Z(oe,U){return[oe*Math.sin(U),-oe*Math.cos(U)]}function se(oe,U,V){var re=oe._fullLayout,ee=V.trace,j=ee.texttemplate,Q=ee.textinfo;if(!j&&Q&&Q!=="none"){var ne=Q.split("+"),ae=function(_e){return ne.indexOf(_e)!==-1},ie=ae("label"),ue=ae("text"),xe=ae("value"),he=ae("percent"),ge=re.separators,me;if(me=ie?[U.label]:[],ue){var ke=u.getFirstFilled(ee.text,U.pts);h(ke)&&me.push(ke)}xe&&me.push(u.formatPieValue(U.v,ge)),he&&me.push(u.formatPiePercent(U.v/V.vTotal,ge)),U.text=me.join("<br>")}function Ae(_e){return{label:_e.label,value:_e.v,valueLabel:u.formatPieValue(_e.v,re.separators),percent:_e.v/V.vTotal,percentLabel:u.formatPiePercent(_e.v/V.vTotal,re.separators),color:_e.color,text:_e.text,customdata:o.castOption(ee,_e.i,"customdata")}}if(j){var Ne=o.castOption(ee,U.i,"texttemplate");if(!Ne)U.text="";else{var He=Ae(U),Ge=u.getFirstFilled(ee.text,U.pts);(h(Ge)||Ge==="")&&(He.text=Ge),U.text=o.texttemplateString(Ne,He,oe._fullLayout._d3locale,He,ee._meta||{})}}}function le(oe,U){var V=oe.rotate*Math.PI/180,re=Math.cos(V),ee=Math.sin(V),j=(U.left+U.right)/2,Q=(U.top+U.bottom)/2;oe.textX=j*re-Q*ee,oe.textY=j*ee+Q*re,oe.noCenter=!0}B.exports={plot:y,formatSliceLabel:se,transformInsideText:T,determineInsideTextFont:M,positionTitleOutside:D,prerenderTitles:x,layoutAreas:q,attachFxHandlers:A,computeTransform:le}},{"../../components/color":366,"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../bar/constants":650,"../bar/uniform_text":664,"./event_data":904,"./helpers":905,"@plotly/d3":58}],910:[function(t,B,H){var d=t("@plotly/d3"),l=t("./style_one"),b=t("../bar/uniform_text").resizeText;B.exports=function(e){var o=e._fullLayout._pielayer.selectAll(".trace");b(e,o,"pie"),o.each(function(a){var r=a[0],n=r.trace,c=d.select(this);c.style({opacity:n.opacity}),c.selectAll("path.surface").each(function(s){d.select(this).call(l,s,n)})})}},{"../bar/uniform_text":664,"./style_one":911,"@plotly/d3":58}],911:[function(t,B,H){var d=t("../../components/color"),l=t("./helpers").castOption;B.exports=function(w,e,o){var a=o.marker.line,r=l(a.color,e.pts)||d.defaultLine,n=l(a.width,e.pts)||0;w.style("stroke-width",n).call(d.fill,e.color).call(d.stroke,r)}},{"../../components/color":366,"./helpers":905}],912:[function(t,B,H){var d=t("../scatter/attributes");B.exports={x:d.x,y:d.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:d.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":926}],913:[function(t,B,H){var d=t("../../../stackgl_modules").gl_pointcloud2d,l=t("../../lib/str2rgbarray"),b=t("../../plots/cartesian/autorange").findExtremes,w=t("../scatter/get_trace_color");function e(r,n){this.scene=r,this.uid=n,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=d(r.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var o=e.prototype;o.handlePick=function(r){var n=this.idToIndex[r.pointId];return{trace:this,dataCoord:r.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[n*2],this.pickXYData[n*2+1]]:[this.pickXData[n],this.pickYData[n]],textLabel:Array.isArray(this.textLabels)?this.textLabels[n]:this.textLabels,color:this.color,name:this.name,pointIndex:n,hoverinfo:this.hoverinfo}},o.update=function(r){this.index=r.index,this.textLabels=r.text,this.name=r.name,this.hoverinfo=r.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(r),this.color=w(r,{})},o.updateFast=function(r){var n=this.xData=this.pickXData=r.x,c=this.yData=this.pickYData=r.y,s=this.pickXYData=r.xy,i=r.xbounds&&r.ybounds,v=r.indices,u,g,h,y=this.bounds,p,A,m;if(s){if(h=s,u=s.length>>>1,i)y[0]=r.xbounds[0],y[2]=r.xbounds[1],y[1]=r.ybounds[0],y[3]=r.ybounds[1];else for(m=0;m<u;m++)p=h[m*2],A=h[m*2+1],p<y[0]&&(y[0]=p),p>y[2]&&(y[2]=p),A<y[1]&&(y[1]=A),A>y[3]&&(y[3]=A);if(v)g=v;else for(g=new Int32Array(u),m=0;m<u;m++)g[m]=m}else for(u=n.length,h=new Float32Array(2*u),g=new Int32Array(u),m=0;m<u;m++)p=n[m],A=c[m],g[m]=m,h[m*2]=p,h[m*2+1]=A,p<y[0]&&(y[0]=p),p>y[2]&&(y[2]=p),A<y[1]&&(y[1]=A),A>y[3]&&(y[3]=A);this.idToIndex=g,this.pointcloudOptions.idToIndex=g,this.pointcloudOptions.positions=h;var M=l(r.marker.color),x=l(r.marker.border.color),T=r.opacity*r.marker.opacity;M[3]*=T,this.pointcloudOptions.color=M;var _=r.marker.blend;if(_===null){var f=100;_=n.length<f||c.length<f}this.pointcloudOptions.blend=_,x[3]*=T,this.pointcloudOptions.borderColor=x;var L=r.marker.sizemin,S=Math.max(r.marker.sizemax,r.marker.sizemin);this.pointcloudOptions.sizeMin=L,this.pointcloudOptions.sizeMax=S,this.pointcloudOptions.areaRatio=r.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var k=this.scene.xaxis,P=this.scene.yaxis,z=S/2||.5;r._extremes[k._id]=b(k,[y[0],y[2]],{ppad:z}),r._extremes[P._id]=b(P,[y[1],y[3]],{ppad:z})},o.dispose=function(){this.pointcloud.dispose()};function a(r,n){var c=new e(r,n.uid);return c.update(n),c}B.exports=a},{"../../../stackgl_modules":1120,"../../lib/str2rgbarray":528,"../../plots/cartesian/autorange":553,"../scatter/get_trace_color":936}],914:[function(t,B,H){var d=t("../../lib"),l=t("./attributes");B.exports=function(w,e,o){function a(r,n){return d.coerce(w,e,l,r,n)}a("x"),a("y"),a("xbounds"),a("ybounds"),w.xy&&w.xy instanceof Float32Array&&(e.xy=w.xy),w.indices&&w.indices instanceof Int32Array&&(e.indices=w.indices),a("text"),a("marker.color",o),a("marker.opacity"),a("marker.blend"),a("marker.sizemin"),a("marker.sizemax"),a("marker.border.color",o),a("marker.border.arearatio"),e._length=null}},{"../../lib":503,"./attributes":912}],915:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("../scatter3d/calc"),plot:t("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:t("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":596,"../scatter3d/calc":955,"./attributes":912,"./convert":913,"./defaults":914}],916:[function(t,B,H){var d=t("../../plots/font_attributes"),l=t("../../plots/attributes"),b=t("../../components/color/attributes"),w=t("../../components/fx/attributes"),e=t("../../plots/domain").attributes,o=t("../../plots/template_attributes").hovertemplateAttrs,a=t("../../components/colorscale/attributes"),r=t("../../plot_api/plot_template").templatedArray,n=t("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,c=t("../../lib/extend").extendFlat,s=t("../../plot_api/edit_types").overrideAll,i=B.exports=s({hoverinfo:c({},l.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:w.hoverlabel,domain:e({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:n("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:d({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:b.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:w.hoverlabel,hovertemplate:o({},{keys:["value","label"]})},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:b.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:w.hoverlabel,hovertemplate:o({},{keys:["value","label"]}),colorscales:r("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:c(a().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested");i.transforms=void 0},{"../../components/color/attributes":365,"../../components/colorscale/attributes":373,"../../components/fx/attributes":397,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],917:[function(t,B,H){var d=t("../../plot_api/edit_types").overrideAll,l=t("../../plots/get_data").getModuleCalcData,b=t("./plot"),w=t("../../components/fx/layout_attributes"),e=t("../../lib/setcursor"),o=t("../../components/dragelement"),a=t("../../plots/cartesian/select").prepSelect,r=t("../../lib"),n=t("../../registry"),c="sankey";H.name=c,H.baseLayoutAttrOverrides=d({hoverlabel:w.hoverlabel},"plot","nested"),H.plot=function(i){var v=l(i.calcdata,c)[0];b(i,v),H.updateFx(i)},H.clean=function(i,v,u,g){var h=g._has&&g._has(c),y=v._has&&v._has(c);h&&!y&&(g._paperdiv.selectAll(".sankey").remove(),g._paperdiv.selectAll(".bgsankey").remove())},H.updateFx=function(i){for(var v=0;v<i._fullData.length;v++)s(i,v)};function s(i,v){var u=i._fullData[v],g=i._fullLayout,h=g.dragmode,y=g.dragmode==="pan"?"move":"crosshair",p=u._bgRect;if(!(h==="pan"||h==="zoom")){e(p,y);var A={_id:"x",c2p:r.identity,_offset:u._sankey.translateX,_length:u._sankey.width},m={_id:"y",c2p:r.identity,_offset:u._sankey.translateY,_length:u._sankey.height},M={gd:i,element:p.node(),plotinfo:{id:v,xaxis:A,yaxis:m,fillRangeItems:r.noop},subplot:v,xaxes:[A],yaxes:[m],doneFnCompleted:function(x){var T=i._fullData[v],_,f=T.node.groups.slice(),L=[];function S(I){for(var R=T._sankey.graph.nodes,D=0;D<R.length;D++)if(R[D].pointNumber===I)return R[D]}for(var k=0;k<x.length;k++){var P=S(x[k].pointNumber);if(!!P)if(P.group){for(var z=0;z<P.childrenNodes.length;z++)L.push(P.childrenNodes[z].pointNumber);f[P.pointNumber-T.node._count]=!1}else L.push(P.pointNumber)}_=f.filter(Boolean).concat([L]),n.call("_guiRestyle",i,{"node.groups":[_]},v)}};M.prepFn=function(x,T,_){a(x,T,_,M,h)},o.init(M)}}},{"../../components/dragelement":385,"../../components/fx/layout_attributes":407,"../../lib":503,"../../lib/setcursor":524,"../../plot_api/edit_types":536,"../../plots/cartesian/select":575,"../../plots/get_data":593,"../../registry":638,"./plot":922}],918:[function(t,B,H){var d=t("strongly-connected-components"),l=t("../../lib"),b=t("../../lib/gup").wrap,w=l.isArrayOrTypedArray,e=l.isIndex,o=t("../../components/colorscale");function a(n){var c=n.node,s=n.link,i=[],v=w(s.color),u=w(s.customdata),g={},h={},y=s.colorscales.length,p;for(p=0;p<y;p++){var A=s.colorscales[p],m=o.extractScale(A,{cLetter:"c"}),M=o.makeColorScaleFunc(m);h[A.label]=M}var x=0;for(p=0;p<s.value.length;p++)s.source[p]>x&&(x=s.source[p]),s.target[p]>x&&(x=s.target[p]);var T=x+1;n.node._count=T;var _,f=n.node.groups,L={};for(p=0;p<f.length;p++){var S=f[p];for(_=0;_<S.length;_++){var k=S[_],P=T+p;L.hasOwnProperty(k)?l.warn("Node "+k+" is already part of a group."):L[k]=P}}var z={source:[],target:[]};for(p=0;p<s.value.length;p++){var I=s.value[p],R=s.source[p],D=s.target[p];if(!!(I>0&&e(R,T)&&e(D,T))&&!(L.hasOwnProperty(R)&&L.hasOwnProperty(D)&&L[R]===L[D])){L.hasOwnProperty(D)&&(D=L[D]),L.hasOwnProperty(R)&&(R=L[R]),R=+R,D=+D,g[R]=g[D]=!0;var O="";s.label&&s.label[p]&&(O=s.label[p]);var F=null;O&&h.hasOwnProperty(O)&&(F=h[O]),i.push({pointNumber:p,label:O,color:v?s.color[p]:s.color,customdata:u?s.customdata[p]:s.customdata,concentrationscale:F,source:R,target:D,value:+I}),z.source.push(R),z.target.push(D)}}var G=T+f.length,W=w(c.color),q=w(c.customdata),J=[];for(p=0;p<G;p++)if(!!g[p]){var X=c.label[p];J.push({group:p>T-1,childrenNodes:[],pointNumber:p,label:X,color:W?c.color[p]:c.color,customdata:q?c.customdata[p]:c.customdata})}var Z=!1;return r(G,z.source,z.target)&&(Z=!0),{circular:Z,links:i,nodes:J,groups:f,groupLookup:L}}function r(n,c,s){for(var i=l.init2dArray(n,0),v=0;v<Math.min(c.length,s.length);v++)if(l.isIndex(c[v],n)&&l.isIndex(s[v],n)){if(c[v]===s[v])return!0;i[c[v]].push(s[v])}var u=d(i);return u.components.some(function(g){return g.length>1})}B.exports=function(c,s){var i=a(s);return b({circular:i.circular,_nodes:i.nodes,_links:i.links,_groups:i.groups,_groupLookup:i.groupLookup})}},{"../../components/colorscale":378,"../../lib":503,"../../lib/gup":500,"strongly-connected-components":306}],919:[function(t,B,H){B.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},{}],920:[function(t,B,H){var d=t("../../lib"),l=t("./attributes"),b=t("../../components/color"),w=t("tinycolor2"),e=t("../../plots/domain").defaults,o=t("../../components/fx/hoverlabel_defaults"),a=t("../../plot_api/plot_template"),r=t("../../plots/array_container_defaults");B.exports=function(s,i,v,u){function g(S,k){return d.coerce(s,i,l,S,k)}var h=d.extendDeep(u.hoverlabel,s.hoverlabel),y=s.node,p=a.newContainer(i,"node");function A(S,k){return d.coerce(y,p,l.node,S,k)}A("label"),A("groups"),A("x"),A("y"),A("pad"),A("thickness"),A("line.color"),A("line.width"),A("hoverinfo",s.hoverinfo),o(y,p,A,h),A("hovertemplate");var m=u.colorway,M=function(S){return m[S%m.length]};A("color",p.label.map(function(S,k){return b.addOpacity(M(k),.8)})),A("customdata");var x=s.link||{},T=a.newContainer(i,"link");function _(S,k){return d.coerce(x,T,l.link,S,k)}_("label"),_("source"),_("target"),_("value"),_("line.color"),_("line.width"),_("hoverinfo",s.hoverinfo),o(x,T,_,h),_("hovertemplate");var f=w(u.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";_("color",d.repeat(f,T.value.length)),_("customdata"),r(x,T,{name:"colorscales",handleItemDefaults:n}),e(i,u,g),g("orientation"),g("valueformat"),g("valuesuffix");var L;p.x.length&&p.y.length&&(L="freeform"),g("arrangement",L),d.coerceFont(g,"textfont",d.extendFlat({},u.font)),i._length=null};function n(c,s){function i(v,u){return d.coerce(c,s,l.link.colorscales,v,u)}i("label"),i("cmin"),i("cmax"),i("colorscale")}},{"../../components/color":366,"../../components/fx/hoverlabel_defaults":404,"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../../plots/domain":584,"./attributes":916,tinycolor2:312}],921:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot"),moduleType:"trace",name:"sankey",basePlotModule:t("./base_plot"),selectPoints:t("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":916,"./base_plot":917,"./calc":918,"./defaults":920,"./plot":922,"./select.js":924}],922:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib"),b=l.numberFormat,w=t("./render"),e=t("../../components/fx"),o=t("../../components/color"),a=t("./constants").cn,r=l._;function n(m){return m!==""}function c(m,M){return m.filter(function(x){return x.key===M.traceId})}function s(m,M){d.select(m).select("path").style("fill-opacity",M),d.select(m).select("rect").style("fill-opacity",M)}function i(m){d.select(m).select("text.name").style("fill","black")}function v(m){return function(M){return m.node.sourceLinks.indexOf(M.link)!==-1||m.node.targetLinks.indexOf(M.link)!==-1}}function u(m){return function(M){return M.node.sourceLinks.indexOf(m.link)!==-1||M.node.targetLinks.indexOf(m.link)!==-1}}function g(m,M,x){M&&x&&c(x,M).selectAll("."+a.sankeyLink).filter(v(M)).call(y.bind(0,M,x,!1))}function h(m,M,x){M&&x&&c(x,M).selectAll("."+a.sankeyLink).filter(v(M)).call(p.bind(0,M,x,!1))}function y(m,M,x,T){var _=T.datum().link.label;T.style("fill-opacity",function(f){if(!f.link.concentrationscale)return .4}),_&&c(M,m).selectAll("."+a.sankeyLink).filter(function(f){return f.link.label===_}).style("fill-opacity",function(f){if(!f.link.concentrationscale)return .4}),x&&c(M,m).selectAll("."+a.sankeyNode).filter(u(m)).call(g)}function p(m,M,x,T){var _=T.datum().link.label;T.style("fill-opacity",function(f){return f.tinyColorAlpha}),_&&c(M,m).selectAll("."+a.sankeyLink).filter(function(f){return f.link.label===_}).style("fill-opacity",function(f){return f.tinyColorAlpha}),x&&c(M,m).selectAll(a.sankeyNode).filter(u(m)).call(h)}function A(m,M){var x=m.hoverlabel||{},T=l.nestedProperty(x,M).get();return Array.isArray(T)?!1:T}B.exports=function(M,x){for(var T=M._fullLayout,_=T._paper,f=T._size,L=0;L<M._fullData.length;L++)if(!!M._fullData[L].visible&&M._fullData[L].type===a.sankey&&!M._fullData[L]._viewInitial){var S=M._fullData[L].node;M._fullData[L]._viewInitial={node:{groups:S.groups.slice(),x:S.x.slice(),y:S.y.slice()}}}var k=function(Z,se){var le=se.link;le.originalEvent=d.event,M._hoverdata=[le],e.click(M,{target:!0})},P=function(Z,se,le){M._fullLayout.hovermode!==!1&&(d.select(Z).call(y.bind(0,se,le,!0)),se.link.trace.link.hoverinfo!=="skip"&&(se.link.fullData=se.link.trace,M.emit("plotly_hover",{event:d.event,points:[se.link]})))},z=r(M,"source:")+" ",I=r(M,"target:")+" ",R=r(M,"concentration:")+" ",D=r(M,"incoming flow count:")+" ",O=r(M,"outgoing flow count:")+" ",F=function(Z,se){if(M._fullLayout.hovermode===!1)return;var le=se.link.trace.link;if(le.hoverinfo==="none"||le.hoverinfo==="skip")return;var oe=[];function U(ae){var ie,ue;ae.circular?(ie=(ae.circularPathData.leftInnerExtent+ae.circularPathData.rightInnerExtent)/2,ue=ae.circularPathData.verticalFullExtent):(ie=(ae.source.x1+ae.target.x0)/2,ue=(ae.y0+ae.y1)/2);var xe=[ie,ue];return ae.trace.orientation==="v"&&xe.reverse(),xe[0]+=se.parent.translateX,xe[1]+=se.parent.translateY,xe}for(var V=0,re=0;re<se.flow.links.length;re++){var ee=se.flow.links[re];if(!(M._fullLayout.hovermode==="closest"&&se.link.pointNumber!==ee.pointNumber)){se.link.pointNumber===ee.pointNumber&&(V=re),ee.fullData=ee.trace,le=se.link.trace.link;var j=U(ee),Q={valueLabel:b(se.valueFormat)(ee.value)+se.valueSuffix};oe.push({x:j[0],y:j[1],name:Q.valueLabel,text:[ee.label||"",z+ee.source.label,I+ee.target.label,ee.concentrationscale?R+b("%0.2f")(ee.flow.labelConcentration):""].filter(n).join("<br>"),color:A(le,"bgcolor")||o.addOpacity(ee.color,1),borderColor:A(le,"bordercolor"),fontFamily:A(le,"font.family"),fontSize:A(le,"font.size"),fontColor:A(le,"font.color"),nameLength:A(le,"namelength"),textAlign:A(le,"align"),idealAlign:d.event.x<j[0]?"right":"left",hovertemplate:le.hovertemplate,hovertemplateLabels:Q,eventData:[ee]})}}var ne=e.loneHover(oe,{container:T._hoverlayer.node(),outerContainer:T._paper.node(),gd:M,anchorIndex:V});ne.each(function(){var ae=this;se.link.concentrationscale||s(ae,.65),i(ae)})},G=function(Z,se,le){M._fullLayout.hovermode!==!1&&(d.select(Z).call(p.bind(0,se,le,!0)),se.link.trace.link.hoverinfo!=="skip"&&(se.link.fullData=se.link.trace,M.emit("plotly_unhover",{event:d.event,points:[se.link]})),e.loneUnhover(T._hoverlayer.node()))},W=function(Z,se,le){var oe=se.node;oe.originalEvent=d.event,M._hoverdata=[oe],d.select(Z).call(h,se,le),e.click(M,{target:!0})},q=function(Z,se,le){M._fullLayout.hovermode!==!1&&(d.select(Z).call(g,se,le),se.node.trace.node.hoverinfo!=="skip"&&(se.node.fullData=se.node.trace,M.emit("plotly_hover",{event:d.event,points:[se.node]})))},J=function(Z,se){if(M._fullLayout.hovermode!==!1){var le=se.node.trace.node;if(!(le.hoverinfo==="none"||le.hoverinfo==="skip")){var oe=d.select(Z).select("."+a.nodeRect),U=M._fullLayout._paperdiv.node().getBoundingClientRect(),V=oe.node().getBoundingClientRect(),re=V.left-2-U.left,ee=V.right+2-U.left,j=V.top+V.height/4-U.top,Q={valueLabel:b(se.valueFormat)(se.node.value)+se.valueSuffix};se.node.fullData=se.node.trace,M._fullLayout._calcInverseTransform(M);var ne=M._fullLayout._invScaleX,ae=M._fullLayout._invScaleY,ie=e.loneHover({x0:ne*re,x1:ne*ee,y:ae*j,name:b(se.valueFormat)(se.node.value)+se.valueSuffix,text:[se.node.label,D+se.node.targetLinks.length,O+se.node.sourceLinks.length].filter(n).join("<br>"),color:A(le,"bgcolor")||se.tinyColorHue,borderColor:A(le,"bordercolor"),fontFamily:A(le,"font.family"),fontSize:A(le,"font.size"),fontColor:A(le,"font.color"),nameLength:A(le,"namelength"),textAlign:A(le,"align"),idealAlign:"left",hovertemplate:le.hovertemplate,hovertemplateLabels:Q,eventData:[se.node]},{container:T._hoverlayer.node(),outerContainer:T._paper.node(),gd:M});s(ie,.85),i(ie)}}},X=function(Z,se,le){M._fullLayout.hovermode!==!1&&(d.select(Z).call(h,se,le),se.node.trace.node.hoverinfo!=="skip"&&(se.node.fullData=se.node.trace,M.emit("plotly_unhover",{event:d.event,points:[se.node]})),e.loneUnhover(T._hoverlayer.node()))};w(M,_,x,{width:f.w,height:f.h,margin:{t:f.t,r:f.r,b:f.b,l:f.l}},{linkEvents:{hover:P,follow:F,unhover:G,select:k},nodeEvents:{hover:q,follow:J,unhover:X,select:W}})}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"./constants":919,"./render":923,"@plotly/d3":58}],923:[function(t,B,H){var d=t("d3-force"),l=t("d3-interpolate").interpolateNumber,b=t("@plotly/d3"),w=t("@plotly/d3-sankey"),e=t("@plotly/d3-sankey-circular"),o=t("./constants"),a=t("tinycolor2"),r=t("../../components/color"),n=t("../../components/drawing"),c=t("../../lib"),s=c.strTranslate,i=c.strRotate,v=t("../../lib/gup"),u=v.keyFun,g=v.repeat,h=v.unwrap,y=t("../../lib/svg_text_utils"),p=t("../../registry"),A=t("../../constants/alignment"),m=A.CAP_SHIFT,M=A.LINE_SPACING,x=3;function T(U,V,re){var ee=h(V),j=ee.trace,Q=j.domain,ne=j.orientation==="h",ae=j.node.pad,ie=j.node.thickness,ue=U.width*(Q.x[1]-Q.x[0]),xe=U.height*(Q.y[1]-Q.y[0]),he=ee._nodes,ge=ee._links,me=ee.circular,ke;me?ke=e.sankeyCircular().circularLinkGap(0):ke=w.sankey(),ke.iterations(o.sankeyIterations).size(ne?[ue,xe]:[xe,ue]).nodeWidth(ie).nodePadding(ae).nodeId(function(kt){return kt.pointNumber}).nodes(he).links(ge);var Ae=ke();ke.nodePadding()<ae&&c.warn("node.pad was reduced to ",ke.nodePadding()," to fit within the figure.");var Ne,He,Ge;for(var _e in ee._groupLookup){var De=parseInt(ee._groupLookup[_e]),Ye;for(Ne=0;Ne<Ae.nodes.length;Ne++)if(Ae.nodes[Ne].pointNumber===De){Ye=Ae.nodes[Ne];break}if(!!Ye){var qe={pointNumber:parseInt(_e),x0:Ye.x0,x1:Ye.x1,y0:Ye.y0,y1:Ye.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};Ae.nodes.unshift(qe),Ye.childrenNodes.unshift(qe)}}function Ue(){for(Ne=0;Ne<Ae.nodes.length;Ne++){var kt=Ae.nodes[Ne],Ft={},Nt,Lt;for(He=0;He<kt.targetLinks.length;He++)Lt=kt.targetLinks[He],Nt=Lt.source.pointNumber+":"+Lt.target.pointNumber,Ft.hasOwnProperty(Nt)||(Ft[Nt]=[]),Ft[Nt].push(Lt);var St=Object.keys(Ft);for(He=0;He<St.length;He++){Nt=St[He];var it=Ft[Nt],ht=0,Qe={};for(Ge=0;Ge<it.length;Ge++)Lt=it[Ge],Qe[Lt.label]||(Qe[Lt.label]=0),Qe[Lt.label]+=Lt.value,ht+=Lt.value;for(Ge=0;Ge<it.length;Ge++)Lt=it[Ge],Lt.flow={value:ht,labelConcentration:Qe[Lt.label]/ht,concentration:Lt.value/ht,links:it},Lt.concentrationscale&&(Lt.color=a(Lt.concentrationscale(Lt.flow.labelConcentration)))}var Ce=0;for(He=0;He<kt.sourceLinks.length;He++)Ce+=kt.sourceLinks[He].value;for(He=0;He<kt.sourceLinks.length;He++)Lt=kt.sourceLinks[He],Lt.concentrationOut=Lt.value/Ce;var je=0;for(He=0;He<kt.targetLinks.length;He++)je+=kt.targetLinks[He].value;for(He=0;He<kt.targetLinks.length;He++)Lt=kt.targetLinks[He],Lt.concenrationIn=Lt.value/je}}Ue();function Ie(kt){kt.forEach(function(Ft){var Nt,Lt,St=0,it=Ft.length,ht;for(Ft.sort(function(Qe,Ce){return Qe.y0-Ce.y0}),ht=0;ht<it;++ht)Nt=Ft[ht],Nt.y0>=St||(Lt=St-Nt.y0,Lt>1e-6&&(Nt.y0+=Lt,Nt.y1+=Lt)),St=Nt.y1+ae})}function Ve(kt){var Ft=kt.map(function(Ce,je){return{x0:Ce.x0,index:je}}).sort(function(Ce,je){return Ce.x0-je.x0}),Nt=[],Lt=-1,St,it=-1/0,ht;for(Ne=0;Ne<Ft.length;Ne++){var Qe=kt[Ft[Ne].index];Qe.x0>it+ie&&(Lt+=1,St=Qe.x0),it=Qe.x0,Nt[Lt]||(Nt[Lt]=[]),Nt[Lt].push(Qe),ht=St-Qe.x0,Qe.x0+=ht,Qe.x1+=ht}return Nt}if(j.node.x.length&&j.node.y.length){for(Ne=0;Ne<Math.min(j.node.x.length,j.node.y.length,Ae.nodes.length);Ne++)if(j.node.x[Ne]&&j.node.y[Ne]){var dt=[j.node.x[Ne]*ue,j.node.y[Ne]*xe];Ae.nodes[Ne].x0=dt[0]-ie/2,Ae.nodes[Ne].x1=dt[0]+ie/2;var Dt=Ae.nodes[Ne].y1-Ae.nodes[Ne].y0;Ae.nodes[Ne].y0=dt[1]-Dt/2,Ae.nodes[Ne].y1=dt[1]+Dt/2}if(j.arrangement==="snap"){he=Ae.nodes;var Yt=Ve(he);Ie(Yt)}ke.update(Ae)}return{circular:me,key:re,trace:j,guid:c.randstr(),horizontal:ne,width:ue,height:xe,nodePad:j.node.pad,nodeLineColor:j.node.line.color,nodeLineWidth:j.node.line.width,linkLineColor:j.link.line.color,linkLineWidth:j.link.line.width,valueFormat:j.valueformat,valueSuffix:j.valuesuffix,textFont:j.textfont,translateX:Q.x[0]*U.width+U.margin.l,translateY:U.height-Q.y[1]*U.height+U.margin.t,dragParallel:ne?xe:ue,dragPerpendicular:ne?ue:xe,arrangement:j.arrangement,sankey:ke,graph:Ae,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function _(U,V,re){var ee=a(V.color),j=V.source.label+"|"+V.target.label,Q=j+"__"+re;return V.trace=U.trace,V.curveNumber=U.trace.index,{circular:U.circular,key:Q,traceId:U.key,pointNumber:V.pointNumber,link:V,tinyColorHue:r.tinyRGB(ee),tinyColorAlpha:ee.getAlpha(),linkPath:L,linkLineColor:U.linkLineColor,linkLineWidth:U.linkLineWidth,valueFormat:U.valueFormat,valueSuffix:U.valueSuffix,sankey:U.sankey,parent:U,interactionState:U.interactionState,flow:V.flow}}function f(U){var V="",re=U.width/2,ee=U.circularPathData;return U.circularLinkType==="top"?V="M "+ee.targetX+" "+(ee.targetY+re)+" L"+ee.rightInnerExtent+" "+(ee.targetY+re)+"A"+(ee.rightLargeArcRadius+re)+" "+(ee.rightSmallArcRadius+re)+" 0 0 1 "+(ee.rightFullExtent-re)+" "+(ee.targetY-ee.rightSmallArcRadius)+"L"+(ee.rightFullExtent-re)+" "+ee.verticalRightInnerExtent+"A"+(ee.rightLargeArcRadius+re)+" "+(ee.rightLargeArcRadius+re)+" 0 0 1 "+ee.rightInnerExtent+" "+(ee.verticalFullExtent-re)+"L"+ee.leftInnerExtent+" "+(ee.verticalFullExtent-re)+"A"+(ee.leftLargeArcRadius+re)+" "+(ee.leftLargeArcRadius+re)+" 0 0 1 "+(ee.leftFullExtent+re)+" "+ee.verticalLeftInnerExtent+"L"+(ee.leftFullExtent+re)+" "+(ee.sourceY-ee.leftSmallArcRadius)+"A"+(ee.leftLargeArcRadius+re)+" "+(ee.leftSmallArcRadius+re)+" 0 0 1 "+ee.leftInnerExtent+" "+(ee.sourceY+re)+"L"+ee.sourceX+" "+(ee.sourceY+re)+"L"+ee.sourceX+" "+(ee.sourceY-re)+"L"+ee.leftInnerExtent+" "+(ee.sourceY-re)+"A"+(ee.leftLargeArcRadius-re)+" "+(ee.leftSmallArcRadius-re)+" 0 0 0 "+(ee.leftFullExtent-re)+" "+(ee.sourceY-ee.leftSmallArcRadius)+"L"+(ee.leftFullExtent-re)+" "+ee.verticalLeftInnerExtent+"A"+(ee.leftLargeArcRadius-re)+" "+(ee.leftLargeArcRadius-re)+" 0 0 0 "+ee.leftInnerExtent+" "+(ee.verticalFullExtent+re)+"L"+ee.rightInnerExtent+" "+(ee.verticalFullExtent+re)+"A"+(ee.rightLargeArcRadius-re)+" "+(ee.rightLargeArcRadius-re)+" 0 0 0 "+(ee.rightFullExtent+re)+" "+ee.verticalRightInnerExtent+"L"+(ee.rightFullExtent+re)+" "+(ee.targetY-ee.rightSmallArcRadius)+"A"+(ee.rightLargeArcRadius-re)+" "+(ee.rightSmallArcRadius-re)+" 0 0 0 "+ee.rightInnerExtent+" "+(ee.targetY-re)+"L"+ee.targetX+" "+(ee.targetY-re)+"Z":V="M "+ee.targetX+" "+(ee.targetY-re)+" L"+ee.rightInnerExtent+" "+(ee.targetY-re)+"A"+(ee.rightLargeArcRadius+re)+" "+(ee.rightSmallArcRadius+re)+" 0 0 0 "+(ee.rightFullExtent-re)+" "+(ee.targetY+ee.rightSmallArcRadius)+"L"+(ee.rightFullExtent-re)+" "+ee.verticalRightInnerExtent+"A"+(ee.rightLargeArcRadius+re)+" "+(ee.rightLargeArcRadius+re)+" 0 0 0 "+ee.rightInnerExtent+" "+(ee.verticalFullExtent+re)+"L"+ee.leftInnerExtent+" "+(ee.verticalFullExtent+re)+"A"+(ee.leftLargeArcRadius+re)+" "+(ee.leftLargeArcRadius+re)+" 0 0 0 "+(ee.leftFullExtent+re)+" "+ee.verticalLeftInnerExtent+"L"+(ee.leftFullExtent+re)+" "+(ee.sourceY+ee.leftSmallArcRadius)+"A"+(ee.leftLargeArcRadius+re)+" "+(ee.leftSmallArcRadius+re)+" 0 0 0 "+ee.leftInnerExtent+" "+(ee.sourceY-re)+"L"+ee.sourceX+" "+(ee.sourceY-re)+"L"+ee.sourceX+" "+(ee.sourceY+re)+"L"+ee.leftInnerExtent+" "+(ee.sourceY+re)+"A"+(ee.leftLargeArcRadius-re)+" "+(ee.leftSmallArcRadius-re)+" 0 0 1 "+(ee.leftFullExtent-re)+" "+(ee.sourceY+ee.leftSmallArcRadius)+"L"+(ee.leftFullExtent-re)+" "+ee.verticalLeftInnerExtent+"A"+(ee.leftLargeArcRadius-re)+" "+(ee.leftLargeArcRadius-re)+" 0 0 1 "+ee.leftInnerExtent+" "+(ee.verticalFullExtent-re)+"L"+ee.rightInnerExtent+" "+(ee.verticalFullExtent-re)+"A"+(ee.rightLargeArcRadius-re)+" "+(ee.rightLargeArcRadius-re)+" 0 0 1 "+(ee.rightFullExtent+re)+" "+ee.verticalRightInnerExtent+"L"+(ee.rightFullExtent+re)+" "+(ee.targetY+ee.rightSmallArcRadius)+"A"+(ee.rightLargeArcRadius-re)+" "+(ee.rightSmallArcRadius-re)+" 0 0 1 "+ee.rightInnerExtent+" "+(ee.targetY+re)+"L"+ee.targetX+" "+(ee.targetY+re)+"Z",V}function L(){var U=.5;function V(re){if(re.link.circular)return f(re.link);var ee=re.link.source.x1,j=re.link.target.x0,Q=l(ee,j),ne=Q(U),ae=Q(1-U),ie=re.link.y0-re.link.width/2,ue=re.link.y0+re.link.width/2,xe=re.link.y1-re.link.width/2,he=re.link.y1+re.link.width/2;return"M"+ee+","+ie+"C"+ne+","+ie+" "+ae+","+xe+" "+j+","+xe+"L"+j+","+he+"C"+ae+","+he+" "+ne+","+ue+" "+ee+","+ue+"Z"}return V}function S(U,V){var re=a(V.color),ee=o.nodePadAcross,j=U.nodePad/2;V.dx=V.x1-V.x0,V.dy=V.y1-V.y0;var Q=V.dx,ne=Math.max(.5,V.dy),ae="node_"+V.pointNumber;return V.group&&(ae=c.randstr()),V.trace=U.trace,V.curveNumber=U.trace.index,{index:V.pointNumber,key:ae,partOfGroup:V.partOfGroup||!1,group:V.group,traceId:U.key,trace:U.trace,node:V,nodePad:U.nodePad,nodeLineColor:U.nodeLineColor,nodeLineWidth:U.nodeLineWidth,textFont:U.textFont,size:U.horizontal?U.height:U.width,visibleWidth:Math.ceil(Q),visibleHeight:ne,zoneX:-ee,zoneY:-j,zoneWidth:Q+2*ee,zoneHeight:ne+2*j,labelY:U.horizontal?V.dy/2+1:V.dx/2+1,left:V.originalLayer===1,sizeAcross:U.width,forceLayouts:U.forceLayouts,horizontal:U.horizontal,darkBackground:re.getBrightness()<=128,tinyColorHue:r.tinyRGB(re),tinyColorAlpha:re.getAlpha(),valueFormat:U.valueFormat,valueSuffix:U.valueSuffix,sankey:U.sankey,graph:U.graph,arrangement:U.arrangement,uniqueNodeLabelPathId:[U.guid,U.key,ae].join("_"),interactionState:U.interactionState,figure:U}}function k(U){U.attr("transform",function(V){return s(V.node.x0.toFixed(3),V.node.y0.toFixed(3))})}function P(U){U.call(k)}function z(U,V){U.call(P),V.attr("d",L())}function I(U){U.attr("width",function(V){return V.node.x1-V.node.x0}).attr("height",function(V){return V.visibleHeight})}function R(U){return U.link.width>1||U.linkLineWidth>0}function D(U){var V=s(U.translateX,U.translateY);return V+(U.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function O(U,V,re){U.on(".basic",null).on("mouseover.basic",function(ee){!ee.interactionState.dragInProgress&&!ee.partOfGroup&&(re.hover(this,ee,V),ee.interactionState.hovered=[this,ee])}).on("mousemove.basic",function(ee){!ee.interactionState.dragInProgress&&!ee.partOfGroup&&(re.follow(this,ee),ee.interactionState.hovered=[this,ee])}).on("mouseout.basic",function(ee){!ee.interactionState.dragInProgress&&!ee.partOfGroup&&(re.unhover(this,ee,V),ee.interactionState.hovered=!1)}).on("click.basic",function(ee){ee.interactionState.hovered&&(re.unhover(this,ee,V),ee.interactionState.hovered=!1),!ee.interactionState.dragInProgress&&!ee.partOfGroup&&re.select(this,ee,V)})}function F(U,V,re,ee){var j=b.behavior.drag().origin(function(Q){return{x:Q.node.x0+Q.visibleWidth/2,y:Q.node.y0+Q.visibleHeight/2}}).on("dragstart",function(Q){if(Q.arrangement!=="fixed"&&(c.ensureSingle(ee._fullLayout._infolayer,"g","dragcover",function(ae){ee._fullLayout._dragCover=ae}),c.raiseToTop(this),Q.interactionState.dragInProgress=Q.node,Z(Q.node),Q.interactionState.hovered&&(re.nodeEvents.unhover.apply(0,Q.interactionState.hovered),Q.interactionState.hovered=!1),Q.arrangement==="snap")){var ne=Q.traceId+"|"+Q.key;Q.forceLayouts[ne]?Q.forceLayouts[ne].alpha(1):G(U,ne,Q),W(U,V,Q,ne,ee)}}).on("drag",function(Q){if(Q.arrangement!=="fixed"){var ne=b.event.x,ae=b.event.y;Q.arrangement==="snap"?(Q.node.x0=ne-Q.visibleWidth/2,Q.node.x1=ne+Q.visibleWidth/2,Q.node.y0=ae-Q.visibleHeight/2,Q.node.y1=ae+Q.visibleHeight/2):(Q.arrangement==="freeform"&&(Q.node.x0=ne-Q.visibleWidth/2,Q.node.x1=ne+Q.visibleWidth/2),ae=Math.max(0,Math.min(Q.size-Q.visibleHeight/2,ae)),Q.node.y0=ae-Q.visibleHeight/2,Q.node.y1=ae+Q.visibleHeight/2),Z(Q.node),Q.arrangement!=="snap"&&(Q.sankey.update(Q.graph),z(U.filter(se(Q)),V))}}).on("dragend",function(Q){if(Q.arrangement!=="fixed"){Q.interactionState.dragInProgress=!1;for(var ne=0;ne<Q.node.childrenNodes.length;ne++)Q.node.childrenNodes[ne].x=Q.node.x,Q.node.childrenNodes[ne].y=Q.node.y;Q.arrangement!=="snap"&&J(Q,ee)}});U.on(".drag",null).call(j)}function G(U,V,re,ee){le(re.graph.nodes);var j=re.graph.nodes.filter(function(Q){return Q.originalX===re.node.originalX}).filter(function(Q){return!Q.partOfGroup});re.forceLayouts[V]=d.forceSimulation(j).alphaDecay(0).force("collide",d.forceCollide().radius(function(Q){return Q.dy/2+re.nodePad/2}).strength(1).iterations(o.forceIterations)).force("constrain",q(U,V,j,re)).stop()}function W(U,V,re,ee,j){window.requestAnimationFrame(function Q(){var ne;for(ne=0;ne<o.forceTicksPerFrame;ne++)re.forceLayouts[ee].tick();var ae=re.graph.nodes;if(oe(ae),re.sankey.update(re.graph),z(U.filter(se(re)),V),re.forceLayouts[ee].alpha()>0)window.requestAnimationFrame(Q);else{var ie=re.node.originalX;re.node.x0=ie-re.visibleWidth/2,re.node.x1=ie+re.visibleWidth/2,J(re,j)}})}function q(U,V,re,ee){return function(){for(var Q=0,ne=0;ne<re.length;ne++){var ae=re[ne];ae===ee.interactionState.dragInProgress?(ae.x=ae.lastDraggedX,ae.y=ae.lastDraggedY):(ae.vx=(ae.originalX-ae.x)/o.forceTicksPerFrame,ae.y=Math.min(ee.size-ae.dy/2,Math.max(ae.dy/2,ae.y))),Q=Math.max(Q,Math.abs(ae.vx),Math.abs(ae.vy))}!ee.interactionState.dragInProgress&&Q<.1&&ee.forceLayouts[V].alpha()>0&&ee.forceLayouts[V].alpha(0)}}function J(U,V){for(var re=[],ee=[],j=0;j<U.graph.nodes.length;j++){var Q=(U.graph.nodes[j].x0+U.graph.nodes[j].x1)/2,ne=(U.graph.nodes[j].y0+U.graph.nodes[j].y1)/2;re.push(Q/U.figure.width),ee.push(ne/U.figure.height)}p.call("_guiRestyle",V,{"node.x":[re],"node.y":[ee]},U.trace.index).then(function(){V._fullLayout._dragCover&&V._fullLayout._dragCover.remove()})}function X(U){var V=[],re;for(re=0;re<U.length;re++)U[re].originalX=(U[re].x0+U[re].x1)/2,U[re].originalY=(U[re].y0+U[re].y1)/2,V.indexOf(U[re].originalX)===-1&&V.push(U[re].originalX);for(V.sort(function(ee,j){return ee-j}),re=0;re<U.length;re++)U[re].originalLayerIndex=V.indexOf(U[re].originalX),U[re].originalLayer=U[re].originalLayerIndex/(V.length-1)}function Z(U){U.lastDraggedX=U.x0+U.dx/2,U.lastDraggedY=U.y0+U.dy/2}function se(U){return function(V){return V.node.originalX===U.node.originalX}}function le(U){for(var V=0;V<U.length;V++)U[V].y=(U[V].y0+U[V].y1)/2,U[V].x=(U[V].x0+U[V].x1)/2}function oe(U){for(var V=0;V<U.length;V++)U[V].y0=U[V].y-U[V].dy/2,U[V].y1=U[V].y0+U[V].dy,U[V].x0=U[V].x-U[V].dx/2,U[V].x1=U[V].x0+U[V].dx}B.exports=function(U,V,re,ee,j){var Q=!1;c.ensureSingle(U._fullLayout._infolayer,"g","first-render",function(){Q=!0});var ne=U._fullLayout._dragCover,ae=re.filter(function(Ae){return h(Ae).trace.visible}).map(T.bind(null,ee)),ie=V.selectAll("."+o.cn.sankey).data(ae,u);ie.exit().remove(),ie.enter().append("g").classed(o.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",D),ie.each(function(Ae,Ne){U._fullData[Ne]._sankey=Ae;var He="bgsankey-"+Ae.trace.uid+"-"+Ne;c.ensureSingle(U._fullLayout._draggers,"rect",He),U._fullData[Ne]._bgRect=b.select("."+He),U._fullData[Ne]._bgRect.style("pointer-events","all").attr("width",Ae.width).attr("height",Ae.height).attr("x",Ae.translateX).attr("y",Ae.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),ie.transition().ease(o.ease).duration(o.duration).attr("transform",D);var ue=ie.selectAll("."+o.cn.sankeyLinks).data(g,u);ue.enter().append("g").classed(o.cn.sankeyLinks,!0).style("fill","none");var xe=ue.selectAll("."+o.cn.sankeyLink).data(function(Ae){var Ne=Ae.graph.links;return Ne.filter(function(He){return He.value}).map(_.bind(null,Ae))},u);xe.enter().append("path").classed(o.cn.sankeyLink,!0).call(O,ie,j.linkEvents),xe.style("stroke",function(Ae){return R(Ae)?r.tinyRGB(a(Ae.linkLineColor)):Ae.tinyColorHue}).style("stroke-opacity",function(Ae){return R(Ae)?r.opacity(Ae.linkLineColor):Ae.tinyColorAlpha}).style("fill",function(Ae){return Ae.tinyColorHue}).style("fill-opacity",function(Ae){return Ae.tinyColorAlpha}).style("stroke-width",function(Ae){return R(Ae)?Ae.linkLineWidth:1}).attr("d",L()),xe.style("opacity",function(){return U._context.staticPlot||Q||ne?1:0}).transition().ease(o.ease).duration(o.duration).style("opacity",1),xe.exit().transition().ease(o.ease).duration(o.duration).style("opacity",0).remove();var he=ie.selectAll("."+o.cn.sankeyNodeSet).data(g,u);he.enter().append("g").classed(o.cn.sankeyNodeSet,!0),he.style("cursor",function(Ae){switch(Ae.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var ge=he.selectAll("."+o.cn.sankeyNode).data(function(Ae){var Ne=Ae.graph.nodes;return X(Ne),Ne.map(S.bind(null,Ae))},u);ge.enter().append("g").classed(o.cn.sankeyNode,!0).call(k).style("opacity",function(Ae){return(U._context.staticPlot||Q)&&!Ae.partOfGroup?1:0}),ge.call(O,ie,j.nodeEvents).call(F,xe,j,U),ge.transition().ease(o.ease).duration(o.duration).call(k).style("opacity",function(Ae){return Ae.partOfGroup?0:1}),ge.exit().transition().ease(o.ease).duration(o.duration).style("opacity",0).remove();var me=ge.selectAll("."+o.cn.nodeRect).data(g);me.enter().append("rect").classed(o.cn.nodeRect,!0).call(I),me.style("stroke-width",function(Ae){return Ae.nodeLineWidth}).style("stroke",function(Ae){return r.tinyRGB(a(Ae.nodeLineColor))}).style("stroke-opacity",function(Ae){return r.opacity(Ae.nodeLineColor)}).style("fill",function(Ae){return Ae.tinyColorHue}).style("fill-opacity",function(Ae){return Ae.tinyColorAlpha}),me.transition().ease(o.ease).duration(o.duration).call(I);var ke=ge.selectAll("."+o.cn.nodeLabel).data(g);ke.enter().append("text").classed(o.cn.nodeLabel,!0).style("cursor","default"),ke.attr("data-notex",1).text(function(Ae){return Ae.node.label}).each(function(Ae){var Ne=b.select(this);n.font(Ne,Ae.textFont),y.convertToTspans(Ne,U)}).style("text-shadow",y.makeTextShadow(U._fullLayout.paper_bgcolor)).attr("text-anchor",function(Ae){return Ae.horizontal&&Ae.left?"end":"start"}).attr("transform",function(Ae){var Ne=b.select(this),He=y.lineCount(Ne),Ge=Ae.textFont.size*((He-1)*M-m),_e=Ae.nodeLineWidth/2+x,De=((Ae.horizontal?Ae.visibleHeight:Ae.visibleWidth)-Ge)/2;Ae.horizontal&&(Ae.left?_e=-_e:_e+=Ae.visibleWidth);var Ye=Ae.horizontal?"":"scale(-1,1)"+i(90);return s(Ae.horizontal?_e:De,Ae.horizontal?De:_e)+Ye}),ke.transition().ease(o.ease).duration(o.duration)}},{"../../components/color":366,"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"../../registry":638,"./constants":919,"@plotly/d3":58,"@plotly/d3-sankey":57,"@plotly/d3-sankey-circular":56,"d3-force":111,"d3-interpolate":116,tinycolor2:312}],924:[function(t,B,H){B.exports=function(l,b){for(var w=l.cd,e=[],o=w[0].trace,a=o._sankey.graph.nodes,r=0;r<a.length;r++){var n=a[r];if(!n.partOfGroup){var c=[(n.x0+n.x1)/2,(n.y0+n.y1)/2];o.orientation==="v"&&c.reverse(),b&&b.contains(c,!1,r,l)&&e.push({pointNumber:n.pointNumber})}}return e}},{}],925:[function(t,B,H){var d=t("../../lib");B.exports=function(b,w){for(var e=0;e<b.length;e++)b[e].i=e;d.mergeArray(w.text,b,"tx"),d.mergeArray(w.texttemplate,b,"txt"),d.mergeArray(w.hovertext,b,"htx"),d.mergeArray(w.customdata,b,"data"),d.mergeArray(w.textposition,b,"tp"),w.textfont&&(d.mergeArrayCastPositive(w.textfont.size,b,"ts"),d.mergeArray(w.textfont.color,b,"tc"),d.mergeArray(w.textfont.family,b,"tf"));var o=w.marker;if(o){d.mergeArrayCastPositive(o.size,b,"ms"),d.mergeArrayCastPositive(o.opacity,b,"mo"),d.mergeArray(o.symbol,b,"mx"),d.mergeArray(o.color,b,"mc");var a=o.line;o.line&&(d.mergeArray(a.color,b,"mlc"),d.mergeArrayCastPositive(a.width,b,"mlw"));var r=o.gradient;r&&r.type!=="none"&&(d.mergeArray(r.type,b,"mgt"),d.mergeArray(r.color,b,"mgc"))}}},{"../../lib":503}],926:[function(t,B,H){var d=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,l=t("../../plots/template_attributes").texttemplateAttrs,b=t("../../plots/template_attributes").hovertemplateAttrs,w=t("../../components/colorscale/attributes"),e=t("../../plots/font_attributes"),o=t("../../components/drawing/attributes").dash,a=t("../../components/drawing/attributes").pattern,r=t("../../components/drawing"),n=t("./constants"),c=t("../../lib/extend").extendFlat;function s(u){return{valType:"any",dflt:0,editType:"calc"}}function i(u){return{valType:"any",editType:"calc"}}function v(u){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}B.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:s(),yperiod:s(),xperiod0:i(),yperiod0:i(),xperiodalignment:v(),yperiodalignment:v(),xhoverformat:d("x"),yhoverformat:d("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:l({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:b({},{keys:n.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:c({},o,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:a,marker:c({symbol:{valType:"enumerated",values:r.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:c({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},w("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},w("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:e({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":373,"../../components/drawing":388,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"./constants":930}],927:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../lib"),b=t("../../plots/cartesian/axes"),w=t("../../plots/cartesian/align_period"),e=t("../../constants/numerical").BADNUM,o=t("./subtypes"),a=t("./colorscale_calc"),r=t("./arrays_to_calcdata"),n=t("./calc_selection");function c(h,y){var p=h._fullLayout,A=b.getFromId(h,y.xaxis||"x"),m=b.getFromId(h,y.yaxis||"y"),M=A.makeCalcdata(y,"x"),x=m.makeCalcdata(y,"y"),T=w(y,A,"x",M),_=w(y,m,"y",x),f=T.vals,L=_.vals,S=y._length,k=new Array(S),P=y.ids,z=g(y,p,A,m),I=!1,R,D,O,F,G,W;v(p,y);var q="x",J="y",X;if(z)l.pushUnique(z.traceIndices,y._expandedIndex),R=z.orientation==="v",R?(J="s",X="x"):(q="s",X="y"),G=z.stackgaps==="interpolate";else{var Z=i(y,S);s(h,y,A,m,f,L,Z)}var se=!!y.xperiodalignment,le=!!y.yperiodalignment;for(D=0;D<S;D++){var oe=k[D]={},U=d(f[D]),V=d(L[D]);U&&V?(oe[q]=f[D],oe[J]=L[D],se&&(oe.orig_x=M[D],oe.xEnd=T.ends[D],oe.xStart=T.starts[D]),le&&(oe.orig_y=x[D],oe.yEnd=_.ends[D],oe.yStart=_.starts[D])):z&&(R?U:V)?(oe[X]=R?f[D]:L[D],oe.gap=!0,G?(oe.s=e,I=!0):oe.s=0):oe[q]=oe[J]=e,P&&(oe.id=String(P[D]))}if(r(k,y),a(h,y),n(k,y),z){for(D=0;D<k.length;)k[D][X]===e?k.splice(D,1):D++;if(l.sort(k,function(Q,ne){return Q[X]-ne[X]||Q.i-ne.i}),I){for(D=0;D<k.length-1&&k[D].gap;)D++;for(W=k[D].s,W||(W=k[D].s=0),O=0;O<D;O++)k[O].s=W;for(F=k.length-1;F>D&&k[F].gap;)F--;for(W=k[F].s,O=k.length-1;O>F;O--)k[O].s=W;for(;D<F;)if(D++,k[D].gap){for(O=D+1;k[O].gap;)O++;for(var re=k[D-1][X],ee=k[D-1].s,j=(k[O].s-ee)/(k[O][X]-re);D<O;)k[D].s=ee+(k[D][X]-re)*j,D++}}}return k}function s(h,y,p,A,m,M,x){var T=y._length,_=h._fullLayout,f=p._id,L=A._id,S=_._firstScatter[u(y)]===y.uid,k=(g(y,_,p,A)||{}).orientation,P=y.fill;p._minDtick=0,A._minDtick=0;var z={padded:!0},I={padded:!0};x&&(z.ppad=I.ppad=x);var R=T<2||m[0]!==m[T-1]||M[0]!==M[T-1];R&&(P==="tozerox"||P==="tonextx"&&(S||k==="h"))?z.tozero=!0:!(y.error_y||{}).visible&&(P==="tonexty"||P==="tozeroy"||!o.hasMarkers(y)&&!o.hasText(y))&&(z.padded=!1,z.ppad=0),R&&(P==="tozeroy"||P==="tonexty"&&(S||k==="v"))?I.tozero=!0:(P==="tonextx"||P==="tozerox")&&(I.padded=!1),f&&(y._extremes[f]=b.findExtremes(p,m,z)),L&&(y._extremes[L]=b.findExtremes(A,M,I))}function i(h,y){if(!!o.hasMarkers(h)){var p=h.marker,A=1.6*(h.marker.sizeref||1),m;if(h.marker.sizemode==="area"?m=function(f){return Math.max(Math.sqrt((f||0)/A),3)}:m=function(f){return Math.max((f||0)/A,3)},l.isArrayOrTypedArray(p.size)){var M={type:"linear"};b.setConvert(M);for(var x=M.makeCalcdata(h.marker,"size"),T=new Array(y),_=0;_<y;_++)T[_]=m(x[_]);return T}else return m(p.size)}}function v(h,y){var p=u(y),A=h._firstScatter;A[p]||(A[p]=y.uid)}function u(h){var y=h.stackgroup;return h.xaxis+h.yaxis+h.type+(y?"-"+y:"")}function g(h,y,p,A){var m=h.stackgroup;if(!!m){var M=y._scatterStackOpts[p._id+A._id][m],x=M.orientation==="v"?A:p;if(x.type==="linear"||x.type==="log")return M}}B.exports={calc:c,calcMarkerSize:i,calcAxisExpansion:s,setFirstScatter:v,getStackOpts:g}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"./arrays_to_calcdata":925,"./calc_selection":928,"./colorscale_calc":929,"./subtypes":951,"fast-isnumeric":190}],928:[function(t,B,H){var d=t("../../lib");B.exports=function(b,w){d.isArrayOrTypedArray(w.selectedpoints)&&d.tagSelected(b,w)}},{"../../lib":503}],929:[function(t,B,H){var d=t("../../components/colorscale/helpers").hasColorscale,l=t("../../components/colorscale/calc"),b=t("./subtypes");B.exports=function(e,o){b.hasLines(o)&&d(o,"line")&&l(e,o,{vals:o.line.color,containerStr:"line",cLetter:"c"}),b.hasMarkers(o)&&(d(o,"marker")&&l(e,o,{vals:o.marker.color,containerStr:"marker",cLetter:"c"}),d(o,"marker.line")&&l(e,o,{vals:o.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"./subtypes":951}],930:[function(t,B,H){B.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],931:[function(t,B,H){var d=t("./calc");B.exports=function(e,o){var a=o.xaxis,r=o.yaxis,n=a._id+r._id,c=e._fullLayout._scatterStackOpts[n];if(!!c){var s=e.calcdata,i,v,u,g,h,y,p,A,m,M,x,T,_,f,L;for(var S in c){M=c[S];var k=M.traceIndices;if(!!k.length){for(x=M.stackgaps==="interpolate",T=M.groupnorm,M.orientation==="v"?(_="x",f="y"):(_="y",f="x"),L=new Array(k.length),i=0;i<L.length;i++)L[i]=!1;y=s[k[0]];var P=new Array(y.length);for(i=0;i<y.length;i++)P[i]=y[i][_];for(i=1;i<k.length;i++){for(h=s[k[i]],v=u=0;v<h.length;v++){for(p=h[v][_];p>P[u]&&u<P.length;u++)l(h,v,P[u],i,L,x,_),v++;if(p!==P[u]){for(g=0;g<i;g++)l(s[k[g]],u,p,g,L,x,_);P.splice(u,0,p)}u++}for(;u<P.length;u++)l(h,v,P[u],i,L,x,_),v++}var z=P.length;for(v=0;v<y.length;v++){for(A=y[v][f]=y[v].s,i=1;i<k.length;i++)h=s[k[i]],h[0].trace._rawLength=h[0].trace._length,h[0].trace._length=z,A+=h[v].s,h[v][f]=A;if(T)for(m=(T==="fraction"?A:A/100)||1,i=0;i<k.length;i++){var I=s[k[i]][v];I[f]/=m,I.sNorm=I.s/m}}for(i=0;i<k.length;i++){h=s[k[i]];var R=h[0].trace,D=d.calcMarkerSize(R,R._rawLength),O=Array.isArray(D);if(D&&L[i]||O){var F=D;for(D=new Array(z),v=0;v<z;v++)D[v]=h[v].gap?0:O?F[h[v].i]:F}var G=new Array(z),W=new Array(z);for(v=0;v<z;v++)G[v]=h[v].x,W[v]=h[v].y;d.calcAxisExpansion(e,R,a,r,G,W,D),h[0].t.orientation=M.orientation}}}}};function l(w,e,o,a,r,n,c){r[a]=!0;var s={i:null,gap:!0,s:0};if(s[c]=o,w.splice(e,0,s),e&&o===w[e-1][c]){var i=w[e-1];s.s=i.s,s.i=i.i,s.gap=i.gap}else n&&(s.s=b(w,e,o,c));e||(w[0].t=w[1].t,w[0].trace=w[1].trace,delete w[1].t,delete w[1].trace)}function b(w,e,o,a){var r=w[e-1],n=w[e+1];return n?r?r.s+(n.s-r.s)*(o-r[a])/(n[a]-r[a]):n.s:r.s}},{"./calc":927}],932:[function(t,B,H){B.exports=function(l){for(var b=0;b<l.length;b++){var w=l[b];if(w.type==="scatter"){var e=w.fill;if(!(e==="none"||e==="toself")&&(w.opacity=void 0,e==="tonexty"||e==="tonextx"))for(var o=b-1;o>=0;o--){var a=l[o];if(a.type==="scatter"&&a.xaxis===w.xaxis&&a.yaxis===w.yaxis){a.opacity=void 0;break}}}}}},{}],933:[function(t,B,H){var d=t("../../lib"),l=t("../../registry"),b=t("./attributes"),w=t("./constants"),e=t("./subtypes"),o=t("./xy_defaults"),a=t("./period_defaults"),r=t("./stack_defaults"),n=t("./marker_defaults"),c=t("./line_defaults"),s=t("./line_shape_defaults"),i=t("./text_defaults"),v=t("./fillcolor_defaults"),u=t("../../lib").coercePattern;B.exports=function(h,y,p,A){function m(k,P){return d.coerce(h,y,b,k,P)}var M=o(h,y,A,m);if(M||(y.visible=!1),!!y.visible){a(h,y,A,m),m("xhoverformat"),m("yhoverformat");var x=r(h,y,A,m),T=!x&&M<w.PTS_LINESONLY?"lines+markers":"lines";m("text"),m("hovertext"),m("mode",T),e.hasLines(y)&&(c(h,y,p,A,m),s(h,y,m),m("connectgaps"),m("line.simplify")),e.hasMarkers(y)&&n(h,y,p,A,m,{gradient:!0}),e.hasText(y)&&(m("texttemplate"),i(h,y,A,m));var _=[];(e.hasMarkers(y)||e.hasText(y))&&(m("cliponaxis"),m("marker.maxdisplayed"),_.push("points")),m("fill",x?x.fillDflt:"none"),y.fill!=="none"&&(v(h,y,p,m),e.hasLines(y)||s(h,y,m),u(m,"fillpattern",y.fillcolor,!1));var f=(y.line||{}).color,L=(y.marker||{}).color;(y.fill==="tonext"||y.fill==="toself")&&_.push("fills"),m("hoveron",_.join("+")||"points"),y.hoveron!=="fills"&&m("hovertemplate");var S=l.getComponentMethod("errorbars","supplyDefaults");S(h,y,f||L||p,{axis:"y"}),S(h,y,f||L||p,{axis:"x",inherit:"y"}),d.coerceSelectionMarkerOpacity(y,m)}}},{"../../lib":503,"../../registry":638,"./attributes":926,"./constants":930,"./fillcolor_defaults":934,"./line_defaults":939,"./line_shape_defaults":941,"./marker_defaults":945,"./period_defaults":946,"./stack_defaults":949,"./subtypes":951,"./text_defaults":952,"./xy_defaults":953}],934:[function(t,B,H){var d=t("../../components/color"),l=t("../../lib").isArrayOrTypedArray;B.exports=function(w,e,o,a){var r=!1;if(e.marker){var n=e.marker.color,c=(e.marker.line||{}).color;n&&!l(n)?r=n:c&&!l(c)&&(r=c)}a("fillcolor",d.addOpacity((e.line||{}).color||r||o,.5))}},{"../../components/color":366,"../../lib":503}],935:[function(t,B,H){var d=t("../../plots/cartesian/axes");B.exports=function(b,w,e){var o={},a={_fullLayout:e},r=d.getFromTrace(a,w,"x"),n=d.getFromTrace(a,w,"y");return o.xLabel=d.tickText(r,r.c2l(b.x),!0).text,o.yLabel=d.tickText(n,n.c2l(b.y),!0).text,o}},{"../../plots/cartesian/axes":554}],936:[function(t,B,H){var d=t("../../components/color"),l=t("./subtypes");B.exports=function(w,e){var o,a;if(w.mode==="lines")return o=w.line.color,o&&d.opacity(o)?o:w.fillcolor;if(w.mode==="none")return w.fill?w.fillcolor:"";var r=e.mcc||(w.marker||{}).color,n=e.mlcc||((w.marker||{}).line||{}).color;return a=r&&d.opacity(r)?r:n&&d.opacity(n)&&(e.mlw||((w.marker||{}).line||{}).width)?n:"",a?d.opacity(a)<.3?d.addOpacity(a,.3):a:(o=(w.line||{}).color,o&&d.opacity(o)&&l.hasLines(w)&&w.line.width?o:w.fillcolor)}},{"../../components/color":366,"./subtypes":951}],937:[function(t,B,H){var d=t("../../lib"),l=t("../../components/fx"),b=t("../../registry"),w=t("./get_trace_color"),e=t("../../components/color"),o=d.fillText;B.exports=function(r,n,c,s){var i=r.cd,v=i[0].trace,u=r.xa,g=r.ya,h=u.c2p(n),y=g.c2p(c),p=[h,y],A=v.hoveron||"",m=v.mode.indexOf("markers")!==-1?3:.5,M=!!v.xperiodalignment,x=!!v.yperiodalignment;if(A.indexOf("points")!==-1){var T=function(ie){if(M){var ue=u.c2p(ie.xStart),xe=u.c2p(ie.xEnd);return h>=Math.min(ue,xe)&&h<=Math.max(ue,xe)?0:1/0}var he=Math.max(3,ie.mrc||0),ge=1-1/he,me=Math.abs(u.c2p(ie.x)-h);return me<he?ge*me/he:me-he+ge},_=function(ie){if(x){var ue=g.c2p(ie.yStart),xe=g.c2p(ie.yEnd);return y>=Math.min(ue,xe)&&y<=Math.max(ue,xe)?0:1/0}var he=Math.max(3,ie.mrc||0),ge=1-1/he,me=Math.abs(g.c2p(ie.y)-y);return me<he?ge*me/he:me-he+ge},f=function(ie){var ue=Math.max(m,ie.mrc||0),xe=u.c2p(ie.x)-h,he=g.c2p(ie.y)-y;return Math.max(Math.sqrt(xe*xe+he*he)-ue,1-m/ue)},L=l.getDistanceFunction(s,T,_,f);if(l.getClosest(i,L,r),r.index!==!1){var S=i[r.index],k=u.c2p(S.x,!0),P=g.c2p(S.y,!0),z=S.mrc||1;r.index=S.i;var I=i[0].t.orientation,R=I&&(S.sNorm||S.s),D=I==="h"?R:S.orig_x!==void 0?S.orig_x:S.x,O=I==="v"?R:S.orig_y!==void 0?S.orig_y:S.y;return d.extendFlat(r,{color:w(v,S),x0:k-z,x1:k+z,xLabelVal:D,y0:P-z,y1:P+z,yLabelVal:O,spikeDistance:f(S),hovertemplate:v.hovertemplate}),o(S,v,r),b.getComponentMethod("errorbars","hoverInfo")(S,v,r),[r]}}if(A.indexOf("fills")!==-1&&v._polygons){var F=v._polygons,G=[],W=!1,q=1/0,J=-1/0,X=1/0,Z=-1/0,se,le,oe,U,V,re,ee,j,Q;for(se=0;se<F.length;se++)oe=F[se],oe.contains(p)&&(W=!W,G.push(oe),X=Math.min(X,oe.ymin),Z=Math.max(Z,oe.ymax));if(W){X=Math.max(X,0),Z=Math.min(Z,g._length);var ne=(X+Z)/2;for(se=0;se<G.length;se++)for(U=G[se].pts,le=1;le<U.length;le++)j=U[le-1][1],Q=U[le][1],j>ne!=Q>=ne&&(re=U[le-1][0],ee=U[le][0],Q-j&&(V=re+(ee-re)*(ne-j)/(Q-j),q=Math.min(q,V),J=Math.max(J,V)));q=Math.max(q,0),J=Math.min(J,u._length);var ae=e.defaultLine;return e.opacity(v.fillcolor)?ae=v.fillcolor:e.opacity((v.line||{}).color)&&(ae=v.line.color),d.extendFlat(r,{distance:r.maxHoverDistance,x0:q,x1:J,y0:ne,y1:ne,color:ae,hovertemplate:!1}),delete r.index,v.text&&!Array.isArray(v.text)?r.text=String(v.text):r.text=v.name,[r]}}}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"../../registry":638,"./get_trace_color":936}],938:[function(t,B,H){var d=t("./subtypes");B.exports={hasLines:d.hasLines,hasMarkers:d.hasMarkers,hasText:d.hasText,isBubble:d.isBubble,attributes:t("./attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("./cross_trace_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./cross_trace_calc"),arraysToCalcdata:t("./arrays_to_calcdata"),plot:t("./plot"),colorbar:t("./marker_colorbar"),formatLabels:t("./format_labels"),style:t("./style").style,styleOnSelect:t("./style").styleOnSelect,hoverPoints:t("./hover"),selectPoints:t("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"./arrays_to_calcdata":925,"./attributes":926,"./calc":927,"./cross_trace_calc":931,"./cross_trace_defaults":932,"./defaults":933,"./format_labels":935,"./hover":937,"./marker_colorbar":944,"./plot":947,"./select":948,"./style":950,"./subtypes":951}],939:[function(t,B,H){var d=t("../../lib").isArrayOrTypedArray,l=t("../../components/colorscale/helpers").hasColorscale,b=t("../../components/colorscale/defaults");B.exports=function(e,o,a,r,n,c){var s=(e.marker||{}).color;if(n("line.color",a),l(e,"line"))b(e,o,r,n,{prefix:"line.",cLetter:"c"});else{var i=(d(s)?!1:s)||a;n("line.color",i)}n("line.width"),(c||{}).noDash||n("line.dash")}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503}],940:[function(t,B,H){var d=t("../../constants/numerical"),l=d.BADNUM,b=d.LOG_CLIP,w=b+.5,e=b-.5,o=t("../../lib"),a=o.segmentsIntersect,r=o.constrain,n=t("./constants");B.exports=function(s,i){var v=i.xaxis,u=i.yaxis,g=v.type==="log",h=u.type==="log",y=v._length,p=u._length,A=i.connectGaps,m=i.baseTolerance,M=i.shape,x=M==="linear",T=i.fill&&i.fill!=="none",_=[],f=n.minTolerance,L=s.length,S=new Array(L),k=0,P,z,I,R,D,O,F,G,W,q,J,X,Z,se,le,oe;function U(kt){var Ft=s[kt];if(!Ft)return!1;var Nt=i.linearized?v.l2p(Ft.x):v.c2p(Ft.x),Lt=i.linearized?u.l2p(Ft.y):u.c2p(Ft.y);if(Nt===l){if(g&&(Nt=v.c2p(Ft.x,!0)),Nt===l)return!1;h&&Lt===l&&(Nt*=Math.abs(v._m*p*(v._m>0?w:e)/(u._m*y*(u._m>0?w:e)))),Nt*=1e3}if(Lt===l){if(h&&(Lt=u.c2p(Ft.y,!0)),Lt===l)return!1;Lt*=1e3}return[Nt,Lt]}function V(kt,Ft,Nt,Lt){var St=Nt-kt,it=Lt-Ft,ht=.5-kt,Qe=.5-Ft,Ce=St*St+it*it,je=St*ht+it*Qe;if(je>0&&je<Ce){var rt=ht*it-Qe*St;if(rt*rt<Ce)return!0}}var re,ee;function j(kt,Ft){var Nt=kt[0]/y,Lt=kt[1]/p,St=Math.max(0,-Nt,Nt-1,-Lt,Lt-1);return St&&re!==void 0&&V(Nt,Lt,re,ee)&&(St=0),St&&Ft&&V(Nt,Lt,Ft[0]/y,Ft[1]/p)&&(St=0),(1+n.toleranceGrowth*St)*m}function Q(kt,Ft){var Nt=kt[0]-Ft[0],Lt=kt[1]-Ft[1];return Math.sqrt(Nt*Nt+Lt*Lt)}var ne=n.maxScreensAway,ae=-y*ne,ie=y*(1+ne),ue=-p*ne,xe=p*(1+ne),he=[[ae,ue,ie,ue],[ie,ue,ie,xe],[ie,xe,ae,xe],[ae,xe,ae,ue]],ge,me,ke,Ae,Ne,He;function Ge(kt,Ft){for(var Nt=[],Lt=0,St=0;St<4;St++){var it=he[St],ht=a(kt[0],kt[1],Ft[0],Ft[1],it[0],it[1],it[2],it[3]);ht&&(!Lt||Math.abs(ht.x-Nt[0][0])>1||Math.abs(ht.y-Nt[0][1])>1)&&(ht=[ht.x,ht.y],Lt&&Q(ht,kt)<Q(Nt[0],kt)?Nt.unshift(ht):Nt.push(ht),Lt++)}return Nt}function _e(kt){if(kt[0]<ae||kt[0]>ie||kt[1]<ue||kt[1]>xe)return[r(kt[0],ae,ie),r(kt[1],ue,xe)]}function De(kt,Ft){if(kt[0]===Ft[0]&&(kt[0]===ae||kt[0]===ie)||kt[1]===Ft[1]&&(kt[1]===ue||kt[1]===xe))return!0}function Ye(kt,Ft){var Nt=[],Lt=_e(kt),St=_e(Ft);return Lt&&St&&De(Lt,St)||(Lt&&Nt.push(Lt),St&&Nt.push(St)),Nt}function qe(kt,Ft,Nt){return function(Lt,St){var it=_e(Lt),ht=_e(St),Qe=[];if(it&&ht&&De(it,ht))return Qe;it&&Qe.push(it),ht&&Qe.push(ht);var Ce=2*o.constrain((Lt[kt]+St[kt])/2,Ft,Nt)-((it||Lt)[kt]+(ht||St)[kt]);if(Ce){var je;it&&ht?je=Ce>0==it[kt]>ht[kt]?it:ht:je=it||ht,je[kt]+=Ce}return Qe}}var Ue;M==="linear"||M==="spline"?Ue=Ge:M==="hv"||M==="vh"?Ue=Ye:M==="hvh"?Ue=qe(0,ae,ie):M==="vhv"&&(Ue=qe(1,ue,xe));function Ie(kt,Ft){var Nt=Ft[0]-kt[0],Lt=(Ft[1]-kt[1])/Nt,St=(kt[1]*Ft[0]-Ft[1]*kt[0])/Nt;return St>0?[Lt>0?ae:ie,xe]:[Lt>0?ie:ae,ue]}function Ve(kt){var Ft=kt[0],Nt=kt[1],Lt=Ft===S[k-1][0],St=Nt===S[k-1][1];if(!(Lt&&St))if(k>1){var it=Ft===S[k-2][0],ht=Nt===S[k-2][1];Lt&&(Ft===ae||Ft===ie)&&it?ht?k--:S[k-1]=kt:St&&(Nt===ue||Nt===xe)&&ht?it?k--:S[k-1]=kt:S[k++]=kt}else S[k++]=kt}function dt(kt){S[k-1][0]!==kt[0]&&S[k-1][1]!==kt[1]&&Ve([ke,Ae]),Ve(kt),Ne=null,ke=Ae=0}function Dt(kt){if(re=kt[0]/y,ee=kt[1]/p,ge=kt[0]<ae?ae:kt[0]>ie?ie:0,me=kt[1]<ue?ue:kt[1]>xe?xe:0,ge||me){if(!k)S[k++]=[ge||kt[0],me||kt[1]];else if(Ne){var Ft=Ue(Ne,kt);Ft.length>1&&(dt(Ft[0]),S[k++]=Ft[1])}else He=Ue(S[k-1],kt)[0],S[k++]=He;var Nt=S[k-1];ge&&me&&(Nt[0]!==ge||Nt[1]!==me)?(Ne&&(ke!==ge&&Ae!==me?Ve(ke&&Ae?Ie(Ne,kt):[ke||ge,Ae||me]):ke&&Ae&&Ve([ke,Ae])),Ve([ge,me])):ke-ge&&Ae-me&&Ve([ge||ke,me||Ae]),Ne=kt,ke=ge,Ae=me}else Ne&&dt(Ue(Ne,kt)[0]),S[k++]=kt}for(P=0;P<L;P++)if(z=U(P),!!z){for(k=0,Ne=null,Dt(z),P++;P<L;P++){if(R=U(P),!R){if(A)continue;break}if(!x||!i.simplify){Dt(R);continue}var Yt=U(P+1);if(q=Q(R,z),!(!(T&&(k===0||k===L-1))&&q<j(R,Yt)*f)){for(G=[(R[0]-z[0])/q,(R[1]-z[1])/q],D=z,J=q,X=se=le=0,F=!1,I=R,P++;P<s.length;P++){if(O=Yt,Yt=U(P+1),!O){if(A)continue;break}if(W=[O[0]-z[0],O[1]-z[1]],oe=W[0]*G[1]-W[1]*G[0],se=Math.min(se,oe),le=Math.max(le,oe),le-se>j(O,Yt))break;I=O,Z=W[0]*G[0]+W[1]*G[1],Z>J?(J=Z,R=O,F=!1):Z<X&&(X=Z,D=O,F=!0)}if(F?(Dt(R),I!==D&&Dt(D)):(D!==z&&Dt(D),I!==R&&Dt(R)),Dt(I),P>=s.length||!O)break;Dt(O),z=O}}Ne&&Ve([ke||Ne[0],Ae||Ne[1]]),_.push(S.slice(0,k))}return _}},{"../../constants/numerical":479,"../../lib":503,"./constants":930}],941:[function(t,B,H){B.exports=function(l,b,w){var e=w("line.shape");e==="spline"&&w("line.smoothing")}},{}],942:[function(t,B,H){var d={tonextx:1,tonexty:1,tonext:1};B.exports=function(b,w,e){var o,a,r,n,c,s={},i=!1,v=-1,u=0,g=-1;for(a=0;a<e.length;a++)o=e[a][0].trace,r=o.stackgroup||"",r?r in s?c=s[r]:(c=s[r]=u,u++):o.fill in d&&g>=0?c=g:(c=g=u,u++),c<v&&(i=!0),o._groupIndex=v=c;var h=e.slice();i&&h.sort(function(p,A){var m=p[0].trace,M=A[0].trace;return m._groupIndex-M._groupIndex||m.index-M.index});var y={};for(a=0;a<h.length;a++)o=h[a][0].trace,r=o.stackgroup||"",o.visible===!0?(o._nexttrace=null,o.fill in d&&(n=y[r],o._prevtrace=n||null,n&&(n._nexttrace=o)),o._ownfill=o.fill&&(o.fill.substr(0,6)==="tozero"||o.fill==="toself"||o.fill.substr(0,2)==="to"&&!o._prevtrace),y[r]=o):o._prevtrace=o._nexttrace=o._ownfill=null;return h}},{}],943:[function(t,B,H){var d=t("fast-isnumeric");B.exports=function(b,w){w||(w=2);var e=b.marker,o=e.sizeref||1,a=e.sizemin||0,r=e.sizemode==="area"?function(n){return Math.sqrt(n/o)}:function(n){return n/o};return function(n){var c=r(n/w);return d(c)&&c>0?Math.max(c,a):0}}},{"fast-isnumeric":190}],944:[function(t,B,H){B.exports={container:"marker",min:"cmin",max:"cmax"}},{}],945:[function(t,B,H){var d=t("../../components/color"),l=t("../../components/colorscale/helpers").hasColorscale,b=t("../../components/colorscale/defaults"),w=t("./subtypes");B.exports=function(o,a,r,n,c,s){var i=w.isBubble(o),v=(o.line||{}).color,u;if(s=s||{},v&&(r=v),c("marker.symbol"),c("marker.opacity",i?.7:1),c("marker.size"),c("marker.color",r),l(o,"marker")&&b(o,a,n,c,{prefix:"marker.",cLetter:"c"}),s.noSelect||(c("selected.marker.color"),c("unselected.marker.color"),c("selected.marker.size"),c("unselected.marker.size")),s.noLine||(v&&!Array.isArray(v)&&a.marker.color!==v?u=v:i?u=d.background:u=d.defaultLine,c("marker.line.color",u),l(o,"marker.line")&&b(o,a,n,c,{prefix:"marker.line.",cLetter:"c"}),c("marker.line.width",i?1:0)),i&&(c("marker.sizeref"),c("marker.sizemin"),c("marker.sizemode")),s.gradient){var g=c("marker.gradient.type");g!=="none"&&c("marker.gradient.color")}}},{"../../components/color":366,"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"./subtypes":951}],946:[function(t,B,H){var d=t("../../lib").dateTick0,l=t("../../constants/numerical"),b=l.ONEWEEK;function w(e,o){return e%b===0?d(o,1):d(o,0)}B.exports=function(o,a,r,n,c){if(c||(c={x:!0,y:!0}),c.x){var s=n("xperiod");s&&(n("xperiod0",w(s,a.xcalendar)),n("xperiodalignment"))}if(c.y){var i=n("yperiod");i&&(n("yperiod0",w(i,a.ycalendar)),n("yperiodalignment"))}}},{"../../constants/numerical":479,"../../lib":503}],947:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../registry"),b=t("../../lib"),w=b.ensureSingle,e=b.identity,o=t("../../components/drawing"),a=t("./subtypes"),r=t("./line_points"),n=t("./link_traces"),c=t("../../lib/polygon").tester;B.exports=function(g,h,y,p,A,m){var M,x,T=!A,_=!!A&&A.duration>0,f=n(g,h,y);if(M=p.selectAll("g.trace").data(f,function(S){return S[0].trace.uid}),M.enter().append("g").attr("class",function(S){return"trace scatter trace"+S[0].trace.uid}).style("stroke-miterlimit",2),M.order(),s(g,M,h),_){m&&(x=m());var L=d.transition().duration(A.duration).ease(A.easing).each("end",function(){x&&x()}).each("interrupt",function(){x&&x()});L.each(function(){p.selectAll("g.trace").each(function(S,k){i(g,k,h,S,f,this,A)})})}else M.each(function(S,k){i(g,k,h,S,f,this,A)});T&&M.exit().remove(),p.selectAll("path:not([d])").remove()};function s(u,g,h){g.each(function(y){var p=w(d.select(this),"g","fills");o.setClipUrl(p,h.layerClipId,u);var A=y[0].trace,m=[];A._ownfill&&m.push("_ownFill"),A._nexttrace&&m.push("_nextFill");var M=p.selectAll("g").data(m,e);M.enter().append("g"),M.exit().each(function(x){A[x]=null}).remove(),M.order().each(function(x){A[x]=w(d.select(this),"path","js-fill")})})}function i(u,g,h,y,p,A,m){var M;v(u,g,h,y,p);var x=!!m&&m.duration>0;function T(Ge){return x?Ge.transition():Ge}var _=h.xaxis,f=h.yaxis,L=y[0].trace,S=L.line,k=d.select(A),P=w(k,"g","errorbars"),z=w(k,"g","lines"),I=w(k,"g","points"),R=w(k,"g","text");if(l.getComponentMethod("errorbars","plot")(u,P,h,m),L.visible!==!0)return;T(k).style("opacity",L.opacity);var D,O,F=L.fill.charAt(L.fill.length-1);F!=="x"&&F!=="y"&&(F=""),y[0][h.isRangePlot?"nodeRangePlot3":"node3"]=k;var G="",W=[],q=L._prevtrace;q&&(G=q._prevRevpath||"",O=q._nextFill,W=q._polygons);var J,X,Z="",se="",le,oe,U,V,re,ee,j,Q=[],ne=b.noop;if(D=L._ownFill,a.hasLines(L)||L.fill!=="none"){for(O&&O.datum(y),["hv","vh","hvh","vhv"].indexOf(S.shape)!==-1?(le=o.steps(S.shape),oe=o.steps(S.shape.split("").reverse().join(""))):S.shape==="spline"?le=oe=function(Ge){var _e=Ge[Ge.length-1];return Ge.length>1&&Ge[0][0]===_e[0]&&Ge[0][1]===_e[1]?o.smoothclosed(Ge.slice(1),S.smoothing):o.smoothopen(Ge,S.smoothing)}:le=oe=function(Ge){return"M"+Ge.join("L")},U=function(Ge){return oe(Ge.reverse())},Q=r(y,{xaxis:_,yaxis:f,connectGaps:L.connectgaps,baseTolerance:Math.max(S.width||1,3)/4,shape:S.shape,simplify:S.simplify,fill:L.fill}),j=L._polygons=new Array(Q.length),M=0;M<Q.length;M++)L._polygons[M]=c(Q[M]);Q.length&&(V=Q[0][0],re=Q[Q.length-1],ee=re[re.length-1]),ne=function(Ge){return function(_e){if(J=le(_e),X=U(_e),Z?F?(Z+="L"+J.substr(1),se=X+("L"+se.substr(1))):(Z+="Z"+J,se=X+"Z"+se):(Z=J,se=X),a.hasLines(L)&&_e.length>1){var De=d.select(this);if(De.datum(y),Ge)T(De.style("opacity",0).attr("d",J).call(o.lineGroupStyle)).style("opacity",1);else{var Ye=T(De);Ye.attr("d",J),o.singleLineStyle(y,Ye)}}}}}var ae=z.selectAll(".js-line").data(Q);T(ae.exit()).style("opacity",0).remove(),ae.each(ne(!1)),ae.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(o.lineGroupStyle).each(ne(!0)),o.setClipUrl(ae,h.layerClipId,u);function ie(Ge){T(Ge).attr("d","M0,0Z")}Q.length?(D?(D.datum(y),V&&ee&&(F?(F==="y"?V[1]=ee[1]=f.c2p(0,!0):F==="x"&&(V[0]=ee[0]=_.c2p(0,!0)),T(D).attr("d","M"+ee+"L"+V+"L"+Z.substr(1)).call(o.singleFillStyle,u)):T(D).attr("d",Z+"Z").call(o.singleFillStyle,u))):O&&(L.fill.substr(0,6)==="tonext"&&Z&&G?(L.fill==="tonext"?T(O).attr("d",Z+"Z"+G+"Z").call(o.singleFillStyle,u):T(O).attr("d",Z+"L"+G.substr(1)+"Z").call(o.singleFillStyle,u),L._polygons=L._polygons.concat(W)):(ie(O),L._polygons=null)),L._prevRevpath=se,L._prevPolygons=j):(D?ie(D):O&&ie(O),L._polygons=L._prevRevpath=L._prevPolygons=null);function ue(Ge){return Ge.filter(function(_e){return!_e.gap&&_e.vis})}function xe(Ge){return Ge.filter(function(_e){return _e.vis})}function he(Ge){return Ge.filter(function(_e){return!_e.gap})}function ge(Ge){return Ge.id}function me(Ge){if(Ge.ids)return ge}function ke(){return!1}function Ae(Ge,_e,De){var Ye,qe,Ue,Ie=De[0].trace,Ve=a.hasMarkers(Ie),dt=a.hasText(Ie),Dt=me(Ie),Yt=ke,kt=ke;if(Ve||dt){var Ft=e,Nt=Ie.stackgroup,Lt=Nt&&u._fullLayout._scatterStackOpts[_._id+f._id][Nt].stackgaps==="infer zero";Ie.marker.maxdisplayed||Ie._needsCull?Ft=Lt?xe:ue:Nt&&!Lt&&(Ft=he),Ve&&(Yt=Ft),dt&&(kt=Ft)}qe=Ge.selectAll("path.point"),Ye=qe.data(Yt,Dt);var St=Ye.enter().append("path").classed("point",!0);x&&St.call(o.pointStyle,Ie,u).call(o.translatePoints,_,f).style("opacity",0).transition().style("opacity",1),Ye.order();var it;Ve&&(it=o.makePointStyleFns(Ie)),Ye.each(function(ht){var Qe=d.select(this),Ce=T(Qe);Ue=o.translatePoint(ht,Ce,_,f),Ue?(o.singlePointStyle(ht,Ce,Ie,it,u),h.layerClipId&&o.hideOutsideRangePoint(ht,Ce,_,f,Ie.xcalendar,Ie.ycalendar),Ie.customdata&&Qe.classed("plotly-customdata",ht.data!==null&&ht.data!==void 0)):Ce.remove()}),x?Ye.exit().transition().style("opacity",0).remove():Ye.exit().remove(),qe=_e.selectAll("g"),Ye=qe.data(kt,Dt),Ye.enter().append("g").classed("textpoint",!0).append("text"),Ye.order(),Ye.each(function(ht){var Qe=d.select(this),Ce=T(Qe.select("text"));Ue=o.translatePoint(ht,Ce,_,f),Ue?h.layerClipId&&o.hideOutsideRangePoint(ht,Qe,_,f,Ie.xcalendar,Ie.ycalendar):Qe.remove()}),Ye.selectAll("text").call(o.textPointStyle,Ie,u).each(function(ht){var Qe=_.c2p(ht.x),Ce=f.c2p(ht.y);d.select(this).selectAll("tspan.line").each(function(){T(d.select(this)).attr({x:Qe,y:Ce})})}),Ye.exit().remove()}I.datum(y),R.datum(y),Ae(I,R,y);var Ne=L.cliponaxis===!1,He=Ne?null:h.layerClipId;o.setClipUrl(I,He,u),o.setClipUrl(R,He,u)}function v(u,g,h,y,p){var A=h.xaxis,m=h.yaxis,M=d.extent(b.simpleMap(A.range,A.r2c)),x=d.extent(b.simpleMap(m.range,m.r2c)),T=y[0].trace;if(!!a.hasMarkers(T)){var _=T.marker.maxdisplayed;if(_!==0){var f=y.filter(function(P){return P.x>=M[0]&&P.x<=M[1]&&P.y>=x[0]&&P.y<=x[1]}),L=Math.ceil(f.length/_),S=0;p.forEach(function(P,z){var I=P[0].trace;a.hasMarkers(I)&&I.marker.maxdisplayed>0&&z<g&&S++});var k=Math.round(S*L/3+Math.floor(S/3)*L/7.1);y.forEach(function(P){delete P.vis}),f.forEach(function(P,z){Math.round((z+k)%L)===0&&(P.vis=!0)})}}}},{"../../components/drawing":388,"../../lib":503,"../../lib/polygon":515,"../../registry":638,"./line_points":940,"./link_traces":942,"./subtypes":951,"@plotly/d3":58}],948:[function(t,B,H){var d=t("./subtypes");B.exports=function(b,w){var e=b.cd,o=b.xaxis,a=b.yaxis,r=[],n=e[0].trace,c,s,i,v,u=!d.hasMarkers(n)&&!d.hasText(n);if(u)return[];if(w===!1)for(c=0;c<e.length;c++)e[c].selected=0;else for(c=0;c<e.length;c++)s=e[c],i=o.c2p(s.x),v=a.c2p(s.y),s.i!==null&&w.contains([i,v],!1,c,b)?(r.push({pointNumber:s.i,x:o.c2d(s.x),y:a.c2d(s.y)}),s.selected=1):s.selected=0;return r}},{"./subtypes":951}],949:[function(t,B,H){var d=["orientation","groupnorm","stackgaps"];B.exports=function(b,w,e,o){var a=e._scatterStackOpts,r=o("stackgroup");if(r){var n=w.xaxis+w.yaxis,c=a[n];c||(c=a[n]={});var s=c[r],i=!1;s?s.traces.push(w):(s=c[r]={traceIndices:[],traces:[w]},i=!0);for(var v={orientation:w.x&&!w.y?"h":"v"},u=0;u<d.length;u++){var g=d[u],h=g+"Found";if(!s[h]){var y=b[g]!==void 0,p=g==="orientation";if((y||i)&&(s[g]=o(g,v[g]),p&&(s.fillDflt=s[g]==="h"?"tonextx":"tonexty"),y&&(s[h]=!0,!i&&(delete s.traces[0][g],p))))for(var A=0;A<s.traces.length-1;A++){var m=s.traces[A];m._input.fill!==m.fill&&(m.fill=s.fillDflt)}}}return s}}},{}],950:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../components/drawing"),b=t("../../registry");function w(r){var n=d.select(r).selectAll("g.trace.scatter");n.style("opacity",function(c){return c[0].trace.opacity}),n.selectAll("g.points").each(function(c){var s=d.select(this),i=c.trace||c[0].trace;e(s,i,r)}),n.selectAll("g.text").each(function(c){var s=d.select(this),i=c.trace||c[0].trace;o(s,i,r)}),n.selectAll("g.trace path.js-line").call(l.lineGroupStyle),n.selectAll("g.trace path.js-fill").call(l.fillGroupStyle,r),b.getComponentMethod("errorbars","style")(n)}function e(r,n,c){l.pointStyle(r.selectAll("path.point"),n,c)}function o(r,n,c){l.textPointStyle(r.selectAll("text"),n,c)}function a(r,n,c){var s=n[0].trace;s.selectedpoints?(l.selectedPointStyle(c.selectAll("path.point"),s),l.selectedTextStyle(c.selectAll("text"),s)):(e(c,s,r),o(c,s,r))}B.exports={style:w,stylePoints:e,styleText:o,styleOnSelect:a}},{"../../components/drawing":388,"../../registry":638,"@plotly/d3":58}],951:[function(t,B,H){var d=t("../../lib");B.exports={hasLines:function(l){return l.visible&&l.mode&&l.mode.indexOf("lines")!==-1},hasMarkers:function(l){return l.visible&&(l.mode&&l.mode.indexOf("markers")!==-1||l.type==="splom")},hasText:function(l){return l.visible&&l.mode&&l.mode.indexOf("text")!==-1},isBubble:function(l){return d.isPlainObject(l.marker)&&d.isArrayOrTypedArray(l.marker.size)}}},{"../../lib":503}],952:[function(t,B,H){var d=t("../../lib");B.exports=function(l,b,w,e,o){o=o||{},e("textposition"),d.coerceFont(e,"textfont",w.font),o.noSelect||(e("selected.textfont.color"),e("unselected.textfont.color"))}},{"../../lib":503}],953:[function(t,B,H){var d=t("../../lib"),l=t("../../registry");B.exports=function(w,e,o,a){var r=a("x"),n=a("y"),c,s=l.getComponentMethod("calendars","handleTraceDefaults");if(s(w,e,["x","y"],o),r){var i=d.minRowLength(r);n?c=Math.min(i,d.minRowLength(n)):(c=i,a("y0"),a("dy"))}else{if(!n)return 0;c=d.minRowLength(n),a("x0"),a("dx")}return e._length=c,c}},{"../../lib":503,"../../registry":638}],954:[function(t,B,H){var d=t("../scatter/attributes"),l=t("../../components/colorscale/attributes"),b=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,w=t("../../plots/template_attributes").hovertemplateAttrs,e=t("../../plots/template_attributes").texttemplateAttrs,o=t("../../plots/attributes"),a=t("../../constants/gl3d_dashes"),r=t("../../constants/gl3d_markers"),n=t("../../lib/extend").extendFlat,c=t("../../plot_api/edit_types").overrideAll,s=t("../../lib/sort_object_keys"),i=d.line,v=d.marker,u=v.line,g=n({width:i.width,dash:{valType:"enumerated",values:s(a),dflt:"solid"}},l("line"));function h(p){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}var y=B.exports=c({x:d.x,y:d.y,z:{valType:"data_array"},text:n({},d.text,{}),texttemplate:e({},{}),hovertext:n({},d.hovertext,{}),hovertemplate:w(),xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z"),mode:n({},d.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:h(),y:h(),z:h()},connectgaps:d.connectgaps,line:g,marker:n({symbol:{valType:"enumerated",values:s(r),dflt:"circle",arrayOk:!0},size:n({},v.size,{dflt:8}),sizeref:v.sizeref,sizemin:v.sizemin,sizemode:v.sizemode,opacity:n({},v.opacity,{arrayOk:!1}),colorbar:v.colorbar,line:n({width:n({},u.width,{arrayOk:!1})},l("marker.line"))},l("marker")),textposition:n({},d.textposition,{dflt:"top center"}),textfont:{color:d.textfont.color,size:d.textfont.size,family:n({},d.textfont.family,{arrayOk:!1})},opacity:o.opacity,hoverinfo:n({},o.hoverinfo)},"calc","nested");y.x.editType=y.y.editType=y.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":373,"../../constants/gl3d_dashes":476,"../../constants/gl3d_markers":477,"../../lib/extend":493,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../scatter/attributes":926}],955:[function(t,B,H){var d=t("../scatter/arrays_to_calcdata"),l=t("../scatter/colorscale_calc");B.exports=function(w,e){var o=[{x:!1,y:!1,trace:e,t:{}}];return d(o,e),l(w,e),o}},{"../scatter/arrays_to_calcdata":925,"../scatter/colorscale_calc":929}],956:[function(t,B,H){var d=t("../../registry");function l(e,o,a,r){if(!o||!o.visible)return null;for(var n=d.getComponentMethod("errorbars","makeComputeError")(o),c=new Array(e.length),s=0;s<e.length;s++){var i=n(+e[s],s);if(r.type==="log"){var v=r.c2l(e[s]),u=e[s]-i[0],g=e[s]+i[1];if(c[s]=[(r.c2l(u,!0)-v)*a,(r.c2l(g,!0)-v)*a],u>0){var h=r.c2l(u);r._lowerLogErrorBound||(r._lowerLogErrorBound=h),r._lowerErrorBound=Math.min(r._lowerLogErrorBound,h)}}else c[s]=[-i[0]*a,i[1]*a]}return c}function b(e){for(var o=0;o<e.length;o++)if(e[o])return e[o].length;return 0}function w(e,o,a){var r=[l(e.x,e.error_x,o[0],a.xaxis),l(e.y,e.error_y,o[1],a.yaxis),l(e.z,e.error_z,o[2],a.zaxis)],n=b(r);if(n===0)return null;for(var c=new Array(n),s=0;s<n;s++){for(var i=[[0,0,0],[0,0,0]],v=0;v<3;v++)if(r[v])for(var u=0;u<2;u++)i[u][v]=r[v][s][u];c[s]=i}return c}B.exports=w},{"../../registry":638}],957:[function(t,B,H){var d=t("../../../stackgl_modules").gl_line3d,l=t("../../../stackgl_modules").gl_scatter3d,b=t("../../../stackgl_modules").gl_error3d,w=t("../../../stackgl_modules").gl_mesh3d,e=t("../../../stackgl_modules").delaunay_triangulate,o=t("../../lib"),a=t("../../lib/str2rgbarray"),r=t("../../lib/gl_format_color").formatColor,n=t("../scatter/make_bubble_size_func"),c=t("../../constants/gl3d_dashes"),s=t("../../constants/gl3d_markers"),i=t("../../plots/cartesian/axes"),v=t("../../components/fx/helpers").appendArrayPointValue,u=t("./calc_errors");function g(P,z){this.scene=P,this.uid=z,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var h=g.prototype;h.handlePick=function(P){if(P.object&&(P.object===this.linePlot||P.object===this.delaunayMesh||P.object===this.textMarkers||P.object===this.scatterPlot)){var z=P.index=P.data.index;return P.object.highlight&&P.object.highlight(null),this.scatterPlot&&(P.object=this.scatterPlot,this.scatterPlot.highlight(P.data)),P.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[z]||this.textLabels[z]===0)&&(P.textLabel=this.textLabels[z]):P.textLabel=this.textLabels),P.traceCoordinate=[this.data.x[z],this.data.y[z],this.data.z[z]],!0}};function y(P,z,I){var R=(I+1)%3,D=(I+2)%3,O=[],F=[],G;for(G=0;G<P.length;++G){var W=P[G];isNaN(W[R])||!isFinite(W[R])||isNaN(W[D])||!isFinite(W[D])||(O.push([W[R],W[D]]),F.push(G))}var q=e(O);for(G=0;G<q.length;++G)for(var J=q[G],X=0;X<J.length;++X)J[X]=F[J[X]];return{positions:P,cells:q,meshColor:z}}function p(P){for(var z=[0,0,0],I=[[0,0,0],[0,0,0],[0,0,0]],R=[1,1,1],D=0;D<3;D++){var O=P[D];O&&O.copy_zstyle!==!1&&P[2].visible!==!1&&(O=P[2]),!(!O||!O.visible)&&(z[D]=O.width/2,I[D]=a(O.color),R[D]=O.thickness)}return{capSize:z,color:I,lineWidth:R}}function A(P){return P==null?0:P.indexOf("left")>-1?-1:P.indexOf("right")>-1?1:0}function m(P){return P==null?0:P.indexOf("top")>-1?-1:P.indexOf("bottom")>-1?1:0}function M(P){var z=0,I=0,R=[z,I];if(Array.isArray(P))for(var D=0;D<P.length;D++)R[D]=[z,I],P[D]&&(R[D][0]=A(P[D]),R[D][1]=m(P[D]));else R[0]=A(P),R[1]=m(P);return R}function x(P,z){return z(P*4)}function T(P){return s[P]}function _(P,z,I,R,D){var O=null;if(o.isArrayOrTypedArray(P)){O=[];for(var F=0;F<z;F++)P[F]===void 0?O[F]=R:O[F]=I(P[F],D)}else O=I(P,o.identity);return O}function f(P,z){var I=[],R=P.fullSceneLayout,D=P.dataScale,O=R.xaxis,F=R.yaxis,G=R.zaxis,W=z.marker,q=z.line,J=z.x||[],X=z.y||[],Z=z.z||[],se=J.length,le=z.xcalendar,oe=z.ycalendar,U=z.zcalendar,V,re,ee,j,Q,ne;for(Q=0;Q<se;Q++)V=O.d2l(J[Q],0,le)*D[0],re=F.d2l(X[Q],0,oe)*D[1],ee=G.d2l(Z[Q],0,U)*D[2],I[Q]=[V,re,ee];if(Array.isArray(z.text))ne=z.text;else if(z.text!==void 0)for(ne=new Array(se),Q=0;Q<se;Q++)ne[Q]=z.text;function ae(qe,Ue){var Ie=R[qe];return i.tickText(Ie,Ie.d2l(Ue),!0).text}var ie=z.texttemplate;if(ie){var ue=P.fullLayout,xe=ue._d3locale,he=Array.isArray(ie),ge=he?Math.min(ie.length,se):se,me=he?function(qe){return ie[qe]}:function(){return ie};for(ne=new Array(ge),Q=0;Q<ge;Q++){var ke={x:J[Q],y:X[Q],z:Z[Q]},Ae={xLabel:ae("xaxis",J[Q]),yLabel:ae("yaxis",X[Q]),zLabel:ae("zaxis",Z[Q])},Ne={};v(Ne,z,Q);var He=z._meta||{};ne[Q]=o.texttemplateString(me(Q),Ae,xe,Ne,ke,He)}}if(j={position:I,mode:z.mode,text:ne},"line"in z&&(j.lineColor=r(q,1,se),j.lineWidth=q.width,j.lineDashes=q.dash),"marker"in z){var Ge=n(z);j.scatterColor=r(W,1,se),j.scatterSize=_(W.size,se,x,20,Ge),j.scatterMarker=_(W.symbol,se,T,"\u25CF"),j.scatterLineWidth=W.line.width,j.scatterLineColor=r(W.line,1,se),j.scatterAngle=0}"textposition"in z&&(j.textOffset=M(z.textposition),j.textColor=r(z.textfont,1,se),j.textSize=_(z.textfont.size,se,o.identity,12),j.textFont=z.textfont.family,j.textAngle=0);var _e=["x","y","z"];for(j.project=[!1,!1,!1],j.projectScale=[1,1,1],j.projectOpacity=[1,1,1],Q=0;Q<3;++Q){var De=z.projection[_e[Q]];(j.project[Q]=De.show)&&(j.projectOpacity[Q]=De.opacity,j.projectScale[Q]=De.scale)}j.errorBounds=u(z,D,R);var Ye=p([z.error_x,z.error_y,z.error_z]);return j.errorColor=Ye.color,j.errorLineWidth=Ye.lineWidth,j.errorCapSize=Ye.capSize,j.delaunayAxis=z.surfaceaxis,j.delaunayColor=a(z.surfacecolor),j}function L(P){if(o.isArrayOrTypedArray(P)){var z=P[0];return o.isArrayOrTypedArray(z)&&(P=z),"rgb("+P.slice(0,3).map(function(I){return Math.round(I*255)})+")"}return null}function S(P){return o.isArrayOrTypedArray(P)?P.length===4&&typeof P[0]=="number"?L(P):P.map(L):null}h.update=function(P){var z=this.scene.glplot.gl,I,R,D,O,F=c.solid;this.data=P;var G=f(this.scene,P);"mode"in G&&(this.mode=G.mode),"lineDashes"in G&&G.lineDashes in c&&(F=c[G.lineDashes]),this.color=S(G.scatterColor)||S(G.lineColor),this.dataPoints=G.position,I={gl:this.scene.glplot.gl,position:G.position,color:G.lineColor,lineWidth:G.lineWidth||1,dashes:F[0],dashScale:F[1],opacity:P.opacity,connectGaps:P.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(I):(this.linePlot=d(I),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var W=P.opacity;if(P.marker&&P.marker.opacity&&(W*=P.marker.opacity),R={gl:this.scene.glplot.gl,position:G.position,color:G.scatterColor,size:G.scatterSize,glyph:G.scatterMarker,opacity:W,orthographic:!0,lineWidth:G.scatterLineWidth,lineColor:G.scatterLineColor,project:G.project,projectScale:G.projectScale,projectOpacity:G.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(R):(this.scatterPlot=l(R),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),O={gl:this.scene.glplot.gl,position:G.position,glyph:G.text,color:G.textColor,size:G.textSize,angle:G.textAngle,alignment:G.textOffset,font:G.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:P.opacity},this.textLabels=P.hovertext||P.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(O):(this.textMarkers=l(O),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),D={gl:this.scene.glplot.gl,position:G.position,color:G.errorColor,error:G.errorBounds,lineWidth:G.errorLineWidth,capSize:G.errorCapSize,opacity:P.opacity},this.errorBars?G.errorBounds?this.errorBars.update(D):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):G.errorBounds&&(this.errorBars=b(D),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),G.delaunayAxis>=0){var q=y(G.position,G.delaunayColor,G.delaunayAxis);q.opacity=P.opacity,this.delaunayMesh?this.delaunayMesh.update(q):(q.gl=z,this.delaunayMesh=w(q),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},h.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};function k(P,z){var I=new g(P,z.uid);return I.update(z),I}B.exports=k},{"../../../stackgl_modules":1120,"../../components/fx/helpers":402,"../../constants/gl3d_dashes":476,"../../constants/gl3d_markers":477,"../../lib":503,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554,"../scatter/make_bubble_size_func":943,"./calc_errors":956}],958:[function(t,B,H){var d=t("../../registry"),l=t("../../lib"),b=t("../scatter/subtypes"),w=t("../scatter/marker_defaults"),e=t("../scatter/line_defaults"),o=t("../scatter/text_defaults"),a=t("./attributes");B.exports=function(c,s,i,v){function u(x,T){return l.coerce(c,s,a,x,T)}var g=r(c,s,u,v);if(!g){s.visible=!1;return}u("text"),u("hovertext"),u("hovertemplate"),u("xhoverformat"),u("yhoverformat"),u("zhoverformat"),u("mode"),b.hasLines(s)&&(u("connectgaps"),e(c,s,i,v,u)),b.hasMarkers(s)&&w(c,s,i,v,u,{noSelect:!0}),b.hasText(s)&&(u("texttemplate"),o(c,s,v,u,{noSelect:!0}));var h=(s.line||{}).color,y=(s.marker||{}).color;u("surfaceaxis")>=0&&u("surfacecolor",h||y);for(var p=["x","y","z"],A=0;A<3;++A){var m="projection."+p[A];u(m+".show")&&(u(m+".opacity"),u(m+".scale"))}var M=d.getComponentMethod("errorbars","supplyDefaults");M(c,s,h||y||i,{axis:"z"}),M(c,s,h||y||i,{axis:"y",inherit:"z"}),M(c,s,h||y||i,{axis:"x",inherit:"z"})};function r(n,c,s,i){var v=0,u=s("x"),g=s("y"),h=s("z"),y=d.getComponentMethod("calendars","handleTraceDefaults");return y(n,c,["x","y","z"],i),u&&g&&h&&(v=Math.min(u.length,g.length,h.length),c._length=c._xlength=c._ylength=c._zlength=v),v}},{"../../lib":503,"../../registry":638,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":954}],959:[function(t,B,H){B.exports={plot:t("./convert"),attributes:t("./attributes"),markerSymbols:t("../../constants/gl3d_markers"),supplyDefaults:t("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:t("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":477,"../../plots/gl3d":598,"./attributes":954,"./calc":955,"./convert":957,"./defaults":958}],960:[function(t,B,H){var d=t("../scatter/attributes"),l=t("../../plots/attributes"),b=t("../../plots/template_attributes").hovertemplateAttrs,w=t("../../plots/template_attributes").texttemplateAttrs,e=t("../../components/colorscale/attributes"),o=t("../../lib/extend").extendFlat,a=d.marker,r=d.line,n=a.line;B.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:o({},d.mode,{dflt:"markers"}),text:o({},d.text,{}),texttemplate:w({editType:"plot"},{keys:["a","b","text"]}),hovertext:o({},d.hovertext,{}),line:{color:r.color,width:r.width,dash:r.dash,shape:o({},r.shape,{values:["linear","spline"]}),smoothing:r.smoothing,editType:"calc"},connectgaps:d.connectgaps,fill:o({},d.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:d.fillcolor,marker:o({symbol:a.symbol,opacity:a.opacity,maxdisplayed:a.maxdisplayed,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,line:o({width:n.width,editType:"calc"},e("marker.line")),gradient:a.gradient,editType:"calc"},e("marker")),textfont:d.textfont,textposition:d.textposition,selected:d.selected,unselected:d.unselected,hoverinfo:o({},l.hoverinfo,{flags:["a","b","text","name"]}),hoveron:d.hoveron,hovertemplate:b()}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],961:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../scatter/colorscale_calc"),b=t("../scatter/arrays_to_calcdata"),w=t("../scatter/calc_selection"),e=t("../scatter/calc").calcMarkerSize,o=t("../carpet/lookup_carpetid");B.exports=function(r,n){var c=n._carpetTrace=o(r,n);if(!(!c||!c.visible||c.visible==="legendonly")){var s;n.xaxis=c.xaxis,n.yaxis=c.yaxis;var i=n._length,v=new Array(i),u,g,h=!1;for(s=0;s<i;s++)if(u=n.a[s],g=n.b[s],d(u)&&d(g)){var y=c.ab2xy(+u,+g,!0),p=c.isVisible(+u,+g);p||(h=!0),v[s]={x:y[0],y:y[1],a:u,b:g,vis:p}}else v[s]={x:!1,y:!1};return n._needsCull=h,v[0].carpet=c,v[0].trace=n,e(n,i),l(r,n),b(v,n),w(v,n),v}}},{"../carpet/lookup_carpetid":708,"../scatter/arrays_to_calcdata":925,"../scatter/calc":927,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],962:[function(t,B,H){var d=t("../../lib"),l=t("../scatter/constants"),b=t("../scatter/subtypes"),w=t("../scatter/marker_defaults"),e=t("../scatter/line_defaults"),o=t("../scatter/line_shape_defaults"),a=t("../scatter/text_defaults"),r=t("../scatter/fillcolor_defaults"),n=t("./attributes");B.exports=function(s,i,v,u){function g(x,T){return d.coerce(s,i,n,x,T)}g("carpet"),i.xaxis="x",i.yaxis="y";var h=g("a"),y=g("b"),p=Math.min(h.length,y.length);if(!p){i.visible=!1;return}i._length=p,g("text"),g("texttemplate"),g("hovertext");var A=p<l.PTS_LINESONLY?"lines+markers":"lines";g("mode",A),b.hasLines(i)&&(e(s,i,v,u,g),o(s,i,g),g("connectgaps")),b.hasMarkers(i)&&w(s,i,v,u,g,{gradient:!0}),b.hasText(i)&&a(s,i,u,g);var m=[];(b.hasMarkers(i)||b.hasText(i))&&(g("marker.maxdisplayed"),m.push("points")),g("fill"),i.fill!=="none"&&(r(s,i,v,g),b.hasLines(i)||o(s,i,g)),(i.fill==="tonext"||i.fill==="toself")&&m.push("fills");var M=g("hoveron",m.join("+")||"points");M!=="fills"&&g("hovertemplate"),d.coerceSelectionMarkerOpacity(i,g)}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/line_shape_defaults":941,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":960}],963:[function(t,B,H){B.exports=function(l,b,w,e,o){var a=e[o];return l.a=a.a,l.b=a.b,l.y=a.y,l}},{}],964:[function(t,B,H){B.exports=function(l,b){var w={},e=b._carpet,o=e.ab2ij([l.a,l.b]),a=Math.floor(o[0]),r=o[0]-a,n=Math.floor(o[1]),c=o[1]-n,s=e.evalxy([],a,n,r,c);return w.yLabel=s[1].toFixed(3),w}},{}],965:[function(t,B,H){var d=t("../scatter/hover"),l=t("../../lib").fillText;B.exports=function(w,e,o,a){var r=d(w,e,o,a);if(!r||r[0].index===!1)return;var n=r[0];if(n.index===void 0){var c=1-n.y0/w.ya._length,s=w.xa._length,i=s*c/2,v=s-i;return n.x0=Math.max(Math.min(n.x0,v),i),n.x1=Math.max(Math.min(n.x1,v),i),r}var u=n.cd[n.index];n.a=u.a,n.b=u.b,n.xLabelVal=void 0,n.yLabelVal=void 0;var g=n.trace,h=g._carpet,y=g._module.formatLabels(u,g);n.yLabel=y.yLabel,delete n.text;var p=[];function A(x,T){var _;x.labelprefix&&x.labelprefix.length>0?_=x.labelprefix.replace(/ = $/,""):_=x._hovertitle,p.push(_+": "+T.toFixed(3)+x.labelsuffix)}if(!g.hovertemplate){var m=u.hi||g.hoverinfo,M=m.split("+");M.indexOf("all")!==-1&&(M=["a","b","text"]),M.indexOf("a")!==-1&&A(h.aaxis,u.a),M.indexOf("b")!==-1&&A(h.baxis,u.b),p.push("y: "+n.yLabel),M.indexOf("text")!==-1&&l(u,g,p),n.extraText=p.join("<br>")}return r}},{"../../lib":503,"../scatter/hover":937}],966:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),plot:t("./plot"),style:t("../scatter/style").style,styleOnSelect:t("../scatter/style").styleOnSelect,hoverPoints:t("./hover"),selectPoints:t("../scatter/select"),eventData:t("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:t("../../plots/cartesian"),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../scatter/marker_colorbar":944,"../scatter/select":948,"../scatter/style":950,"./attributes":960,"./calc":961,"./defaults":962,"./event_data":963,"./format_labels":964,"./hover":965,"./plot":967}],967:[function(t,B,H){var d=t("../scatter/plot"),l=t("../../plots/cartesian/axes"),b=t("../../components/drawing");B.exports=function(e,o,a,r){var n,c,s,i=a[0][0].carpet,v={xaxis:l.getFromId(e,i.xaxis||"x"),yaxis:l.getFromId(e,i.yaxis||"y"),plot:o.plot};for(d(e,v,a,r),n=0;n<a.length;n++)c=a[n][0].trace,s=r.selectAll("g.trace"+c.uid+" .js-line"),b.setClipUrl(s,a[n][0].carpet._clipPathId,e)}},{"../../components/drawing":388,"../../plots/cartesian/axes":554,"../scatter/plot":947}],968:[function(t,B,H){var d=t("../../plots/template_attributes").hovertemplateAttrs,l=t("../../plots/template_attributes").texttemplateAttrs,b=t("../scatter/attributes"),w=t("../../plots/attributes"),e=t("../../components/colorscale/attributes"),o=t("../../components/drawing/attributes").dash,a=t("../../lib/extend").extendFlat,r=t("../../plot_api/edit_types").overrideAll,n=b.marker,c=b.line,s=n.line;B.exports=r({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:a({},b.mode,{dflt:"markers"}),text:a({},b.text,{}),texttemplate:l({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:a({},b.hovertext,{}),textfont:b.textfont,textposition:b.textposition,line:{color:c.color,width:c.width,dash:o},connectgaps:b.connectgaps,marker:a({symbol:n.symbol,opacity:n.opacity,size:n.size,sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,colorbar:n.colorbar,line:a({width:s.width},e("marker.line")),gradient:n.gradient},e("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:b.fillcolor,selected:b.selected,unselected:b.unselected,hoverinfo:a({},w.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:d()},"calc","nested")},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],969:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../constants/numerical").BADNUM,b=t("../scatter/colorscale_calc"),w=t("../scatter/arrays_to_calcdata"),e=t("../scatter/calc_selection"),o=t("../../lib")._;function a(r){return r&&typeof r=="string"}B.exports=function(n,c){var s=Array.isArray(c.locations),i=s?c.locations.length:c._length,v=new Array(i),u;c.geojson?u=function(m){return a(m)||d(m)}:u=a;for(var g=0;g<i;g++){var h=v[g]={};if(s){var y=c.locations[g];h.loc=u(y)?y:null}else{var p=c.lon[g],A=c.lat[g];d(p)&&d(A)?h.lonlat=[+p,+A]:h.lonlat=[l,l]}}return w(v,c),b(n,c),e(v,c),i&&(v[0].t={labels:{lat:o(n,"lat:")+" ",lon:o(n,"lon:")+" "}}),v}},{"../../constants/numerical":479,"../../lib":503,"../scatter/arrays_to_calcdata":925,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],970:[function(t,B,H){var d=t("../../lib"),l=t("../scatter/subtypes"),b=t("../scatter/marker_defaults"),w=t("../scatter/line_defaults"),e=t("../scatter/text_defaults"),o=t("../scatter/fillcolor_defaults"),a=t("./attributes");B.exports=function(n,c,s,i){function v(M,x){return d.coerce(n,c,a,M,x)}var u=v("locations"),g;if(u&&u.length){var h=v("geojson"),y;(typeof h=="string"&&h!==""||d.isPlainObject(h))&&(y="geojson-id");var p=v("locationmode",y);p==="geojson-id"&&v("featureidkey"),g=u.length}else{var A=v("lon")||[],m=v("lat")||[];g=Math.min(A.length,m.length)}if(!g){c.visible=!1;return}c._length=g,v("text"),v("hovertext"),v("hovertemplate"),v("mode"),l.hasLines(c)&&(w(n,c,s,i,v),v("connectgaps")),l.hasMarkers(c)&&b(n,c,s,i,v,{gradient:!0}),l.hasText(c)&&(v("texttemplate"),e(n,c,i,v)),v("fill"),c.fill!=="none"&&o(n,c,s,v),d.coerceSelectionMarkerOpacity(c,v)}},{"../../lib":503,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":968}],971:[function(t,B,H){B.exports=function(l,b,w,e,o){l.lon=b.lon,l.lat=b.lat,l.location=b.loc?b.loc:null;var a=e[o];return a.fIn&&a.fIn.properties&&(l.properties=a.fIn.properties),l}},{}],972:[function(t,B,H){var d=t("../../plots/cartesian/axes");B.exports=function(b,w,e){var o={},a=e[w.geo]._subplot,r=a.mockAxis,n=b.lonlat;return o.lonLabel=d.tickText(r,r.c2l(n[0]),!0).text,o.latLabel=d.tickText(r,r.c2l(n[1]),!0).text,o}},{"../../plots/cartesian/axes":554}],973:[function(t,B,H){var d=t("../../components/fx"),l=t("../../constants/numerical").BADNUM,b=t("../scatter/get_trace_color"),w=t("../../lib").fillText,e=t("./attributes");B.exports=function(r,n,c){var s=r.cd,i=s[0].trace,v=r.xa,u=r.ya,g=r.subplot,h=g.projection.isLonLatOverEdges,y=g.project;function p(f){var L=f.lonlat;if(L[0]===l||h(L))return 1/0;var S=y(L),k=y([n,c]),P=Math.abs(S[0]-k[0]),z=Math.abs(S[1]-k[1]),I=Math.max(3,f.mrc||0);return Math.max(Math.sqrt(P*P+z*z)-I,1-3/I)}if(d.getClosest(s,p,r),r.index!==!1){var A=s[r.index],m=A.lonlat,M=[v.c2p(m),u.c2p(m)],x=A.mrc||1;r.x0=M[0]-x,r.x1=M[0]+x,r.y0=M[1]-x,r.y1=M[1]+x,r.loc=A.loc,r.lon=m[0],r.lat=m[1];var T={};T[i.geo]={_subplot:g};var _=i._module.formatLabels(A,i,T);return r.lonLabel=_.lonLabel,r.latLabel=_.latLabel,r.color=b(i,A),r.extraText=o(i,A,r,s[0].t.labels),r.hovertemplate=i.hovertemplate,[r]}};function o(a,r,n,c){if(a.hovertemplate)return;var s=r.hi||a.hoverinfo,i=s==="all"?e.hoverinfo.flags:s.split("+"),v=i.indexOf("location")!==-1&&Array.isArray(a.locations),u=i.indexOf("lon")!==-1,g=i.indexOf("lat")!==-1,h=i.indexOf("text")!==-1,y=[];function p(A){return A+"\xB0"}return v?y.push(r.loc):u&&g?y.push("("+p(n.latLabel)+", "+p(n.lonLabel)+")"):u?y.push(c.lon+p(n.lonLabel)):g&&y.push(c.lat+p(n.latLabel)),h&&w(r,a,y),y.join("<br>")}},{"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../scatter/get_trace_color":936,"./attributes":968}],974:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),calcGeoJSON:t("./plot").calcGeoJSON,plot:t("./plot").plot,style:t("./style"),styleOnSelect:t("../scatter/style").styleOnSelect,hoverPoints:t("./hover"),eventData:t("./event_data"),selectPoints:t("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:t("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":589,"../scatter/marker_colorbar":944,"../scatter/style":950,"./attributes":968,"./calc":969,"./defaults":970,"./event_data":971,"./format_labels":972,"./hover":973,"./plot":975,"./select":976,"./style":977}],975:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib"),b=t("../../lib/topojson_utils").getTopojsonFeatures,w=t("../../lib/geojson_utils"),e=t("../../lib/geo_location_utils"),o=t("../../plots/cartesian/autorange").findExtremes,a=t("../../constants/numerical").BADNUM,r=t("../scatter/calc").calcMarkerSize,n=t("../scatter/subtypes"),c=t("./style");function s(v,u,g){var h=u.layers.frontplot.select(".scatterlayer"),y=l.makeTraceGroups(h,g,"trace scattergeo");function p(A,m){A.lonlat[0]===a&&d.select(m).remove()}y.selectAll("*").remove(),y.each(function(A){var m=d.select(this),M=A[0].trace;if(n.hasLines(M)||M.fill!=="none"){var x=w.calcTraceToLineCoords(A),T=M.fill!=="none"?w.makePolygon(x):w.makeLine(x);m.selectAll("path.js-line").data([{geojson:T,trace:M}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}n.hasMarkers(M)&&m.selectAll("path.point").data(l.identity).enter().append("path").classed("point",!0).each(function(_){p(_,this)}),n.hasText(M)&&m.selectAll("g").data(l.identity).enter().append("g").append("text").each(function(_){p(_,this)}),c(v,A)})}function i(v,u){var g=v[0].trace,h=u[g.geo],y=h._subplot,p=g._length,A,m;if(Array.isArray(g.locations)){var M=g.locationmode,x=M==="geojson-id"?e.extractTraceFeature(v):b(g,y.topojson);for(A=0;A<p;A++){m=v[A];var T=M==="geojson-id"?m.fOut:e.locationToFeature(M,m.loc,x);m.lonlat=T?T.properties.ct:[a,a]}}var _={padded:!0},f,L;if(h.fitbounds==="geojson"&&g.locationmode==="geojson-id"){var S=e.computeBbox(e.getTraceGeojson(g));f=[S[0],S[2]],L=[S[1],S[3]]}else{for(f=new Array(p),L=new Array(p),A=0;A<p;A++)m=v[A],f[A]=m.lonlat[0],L[A]=m.lonlat[1];_.ppad=r(g,p)}g._extremes.lon=o(h.lonaxis._ax,f,_),g._extremes.lat=o(h.lataxis._ax,L,_)}B.exports={calcGeoJSON:i,plot:s}},{"../../constants/numerical":479,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/geojson_utils":497,"../../lib/topojson_utils":532,"../../plots/cartesian/autorange":553,"../scatter/calc":927,"../scatter/subtypes":951,"./style":977,"@plotly/d3":58}],976:[function(t,B,H){var d=t("../scatter/subtypes"),l=t("../../constants/numerical").BADNUM;B.exports=function(w,e){var o=w.cd,a=w.xaxis,r=w.yaxis,n=[],c=o[0].trace,s,i,v,u,g,h=!d.hasMarkers(c)&&!d.hasText(c);if(h)return[];if(e===!1)for(g=0;g<o.length;g++)o[g].selected=0;else for(g=0;g<o.length;g++)s=o[g],i=s.lonlat,i[0]!==l&&(v=a.c2p(i),u=r.c2p(i),e.contains([v,u],null,g,w)?(n.push({pointNumber:g,lon:i[0],lat:i[1]}),s.selected=1):s.selected=0);return n}},{"../../constants/numerical":479,"../scatter/subtypes":951}],977:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../components/drawing"),b=t("../../components/color"),w=t("../scatter/style"),e=w.stylePoints,o=w.styleText;B.exports=function(n,c){c&&a(n,c)};function a(r,n){var c=n[0].trace,s=n[0].node3;s.style("opacity",n[0].trace.opacity),e(s,c,r),o(s,c,r),s.selectAll("path.js-line").style("fill","none").each(function(i){var v=d.select(this),u=i.trace,g=u.line||{};v.call(b.stroke,g.color).call(l.dashLine,g.dash||"",g.width||0),u.fill!=="none"&&v.call(b.fill,u.fillcolor)})}},{"../../components/color":366,"../../components/drawing":388,"../scatter/style":950,"@plotly/d3":58}],978:[function(t,B,H){var d=t("../../plots/attributes"),l=t("../scatter/attributes"),b=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,w=t("../../components/colorscale/attributes"),e=t("../../lib/sort_object_keys"),o=t("../../lib/extend").extendFlat,a=t("../../plot_api/edit_types").overrideAll,r=t("./constants").DASHES,n=l.line,c=l.marker,s=c.line,i=B.exports=a({x:l.x,x0:l.x0,dx:l.dx,y:l.y,y0:l.y0,dy:l.dy,xperiod:l.xperiod,yperiod:l.yperiod,xperiod0:l.xperiod0,yperiod0:l.yperiod0,xperiodalignment:l.xperiodalignment,yperiodalignment:l.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),text:l.text,hovertext:l.hovertext,textposition:l.textposition,textfont:l.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:n.color,width:n.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:e(r),dflt:"solid"}},marker:o({},w("marker"),{symbol:c.symbol,size:c.size,sizeref:c.sizeref,sizemin:c.sizemin,sizemode:c.sizemode,opacity:c.opacity,colorbar:c.colorbar,line:o({},w("marker.line"),{width:s.width})}),connectgaps:l.connectgaps,fill:o({},l.fill,{dflt:"none"}),fillcolor:l.fillcolor,selected:{marker:l.selected.marker,textfont:l.selected.textfont},unselected:{marker:l.unselected.marker,textfont:l.unselected.textfont},opacity:d.opacity},"calc","nested");i.x.editType=i.y.editType=i.x0.editType=i.y0.editType="calc+clearAxisTypes",i.hovertemplate=l.hovertemplate,i.texttemplate=l.texttemplate},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../scatter/attributes":926,"./constants":980}],979:[function(t,B,H){var d=t("@plotly/point-cluster"),l=t("../../lib"),b=t("../../plots/cartesian/axis_ids"),w=t("../../plots/cartesian/autorange").findExtremes,e=t("../../plots/cartesian/align_period"),o=t("../scatter/calc"),a=o.calcMarkerSize,r=o.calcAxisExpansion,n=o.setFirstScatter,c=t("../scatter/colorscale_calc"),s=t("./convert"),i=t("./scene_update"),v=t("../../constants/numerical").BADNUM,u=t("./constants").TOO_MANY_POINTS;B.exports=function(p,A){var m=p._fullLayout,M=b.getFromId(p,A.xaxis),x=b.getFromId(p,A.yaxis),T=m._plots[A.xaxis+A.yaxis],_=A._length,f=_>=u,L=_*2,S={},k,P=M.makeCalcdata(A,"x"),z=x.makeCalcdata(A,"y"),I=e(A,M,"x",P),R=e(A,x,"y",z),D=I.vals,O=R.vals;A._x=D,A._y=O,A.xperiodalignment&&(A._origX=P,A._xStarts=I.starts,A._xEnds=I.ends),A.yperiodalignment&&(A._origY=z,A._yStarts=R.starts,A._yEnds=R.ends);var F=new Array(L),G=new Array(_);for(k=0;k<_;k++)F[k*2]=D[k]===v?NaN:D[k],F[k*2+1]=O[k]===v?NaN:O[k],G[k]=k;if(M.type==="log")for(k=0;k<L;k+=2)F[k]=M.c2l(F[k]);if(x.type==="log")for(k=1;k<L;k+=2)F[k]=x.c2l(F[k]);f&&M.type!=="log"&&x.type!=="log"?S.tree=d(F):S.ids=G,c(p,A);var W=h(p,T,A,F,D,O),q=i(p,T);n(m,A);var J;return f?W.marker&&(J=W.marker.sizeAvg||Math.max(W.marker.size,3)):J=a(A,_),r(p,A,M,x,D,O,J),W.errorX&&g(A,M,W.errorX),W.errorY&&g(A,x,W.errorY),W.fill&&!q.fill2d&&(q.fill2d=!0),W.marker&&!q.scatter2d&&(q.scatter2d=!0),W.line&&!q.line2d&&(q.line2d=!0),(W.errorX||W.errorY)&&!q.error2d&&(q.error2d=!0),W.text&&!q.glText&&(q.glText=!0),W.marker&&(W.marker.snap=_),q.lineOptions.push(W.line),q.errorXOptions.push(W.errorX),q.errorYOptions.push(W.errorY),q.fillOptions.push(W.fill),q.markerOptions.push(W.marker),q.markerSelectedOptions.push(W.markerSel),q.markerUnselectedOptions.push(W.markerUnsel),q.textOptions.push(W.text),q.textSelectedOptions.push(W.textSel),q.textUnselectedOptions.push(W.textUnsel),q.selectBatch.push([]),q.unselectBatch.push([]),S._scene=q,S.index=q.count,S.x=D,S.y=O,S.positions=F,q.count++,[{x:!1,y:!1,t:S,trace:A}]};function g(y,p,A){var m=y._extremes[p._id],M=w(p,A._bnds,{padded:!0});m.min=m.min.concat(M.min),m.max=m.max.concat(M.max)}function h(y,p,A,m,M,x){var T=s.style(y,A);if(T.marker&&(T.marker.positions=m),T.line&&m.length>1&&l.extendFlat(T.line,s.linePositions(y,A,m)),T.errorX||T.errorY){var _=s.errorBarPositions(y,A,m,M,x);T.errorX&&l.extendFlat(T.errorX,_.x),T.errorY&&l.extendFlat(T.errorY,_.y)}return T.text&&(l.extendFlat(T.text,{positions:m},s.textPosition(y,A,T.text,T.marker)),l.extendFlat(T.textSel,{positions:m},s.textPosition(y,A,T.text,T.markerSel)),l.extendFlat(T.textUnsel,{positions:m},s.textPosition(y,A,T.text,T.markerUnsel))),T}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/autorange":553,"../../plots/cartesian/axis_ids":558,"../scatter/calc":927,"../scatter/colorscale_calc":929,"./constants":980,"./convert":981,"./scene_update":989,"@plotly/point-cluster":59}],980:[function(t,B,H){var d=20;B.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:d,SYMBOL_STROKE:d/20,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],981:[function(t,B,H){var d=t("fast-isnumeric"),l=t("svg-path-sdf"),b=t("color-normalize"),w=t("../../registry"),e=t("../../lib"),o=t("../../components/drawing"),a=t("../../plots/cartesian/axis_ids"),r=t("../../lib/gl_format_color").formatColor,n=t("../scatter/subtypes"),c=t("../scatter/make_bubble_size_func"),s=t("./helpers"),i=t("./constants"),v=t("../../constants/interactions").DESELECTDIM,u={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},g=t("../../components/fx/helpers").appendArrayPointValue;function h(I,R){var D,O={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},F=I._context.plotGlPixelRatio;if(R.visible!==!0)return O;if(n.hasText(R)&&(O.text=y(I,R),O.textSel=m(I,R,R.selected),O.textUnsel=m(I,R,R.unselected)),n.hasMarkers(R)&&(O.marker=p(R),O.markerSel=A(R,R.selected),O.markerUnsel=A(R,R.unselected),!R.unselected&&e.isArrayOrTypedArray(R.marker.opacity))){var G=R.marker.opacity;for(O.markerUnsel.opacity=new Array(G.length),D=0;D<G.length;D++)O.markerUnsel.opacity[D]=v*G[D]}if(n.hasLines(R)){O.line={overlay:!0,thickness:R.line.width*F,color:R.line.color,opacity:R.opacity};var W=(i.DASHES[R.line.dash]||[1]).slice();for(D=0;D<W.length;++D)W[D]*=R.line.width*F;O.line.dashes=W}return R.error_x&&R.error_x.visible&&(O.errorX=M(R,R.error_x,F)),R.error_y&&R.error_y.visible&&(O.errorY=M(R,R.error_y,F)),!!R.fill&&R.fill!=="none"&&(O.fill={closed:!0,fill:R.fillcolor,thickness:0}),O}function y(I,R){var D=I._fullLayout,O=R._length,F=R.textfont,G=R.textposition,W=Array.isArray(G)?G:[G],q=F.color,J=F.size,X=F.family,Z={},se,le=I._context.plotGlPixelRatio,oe=R.texttemplate;if(oe){Z.text=[];var U=D._d3locale,V=Array.isArray(oe),re=V?Math.min(oe.length,O):O,ee=V?function(xe){return oe[xe]}:function(){return oe};for(se=0;se<re;se++){var j={i:se},Q=R._module.formatLabels(j,R,D),ne={};g(ne,R,se);var ae=R._meta||{};Z.text.push(e.texttemplateString(ee(se),Q,U,ne,j,ae))}}else Array.isArray(R.text)&&R.text.length<O?Z.text=R.text.slice():Z.text=R.text;if(Array.isArray(Z.text))for(se=Z.text.length;se<O;se++)Z.text[se]="";for(Z.opacity=R.opacity,Z.font={},Z.align=[],Z.baseline=[],se=0;se<W.length;se++){var ie=W[se].split(/\s+/);switch(ie[1]){case"left":Z.align.push("right");break;case"right":Z.align.push("left");break;default:Z.align.push(ie[1])}switch(ie[0]){case"top":Z.baseline.push("bottom");break;case"bottom":Z.baseline.push("top");break;default:Z.baseline.push(ie[0])}}if(Array.isArray(q))for(Z.color=new Array(O),se=0;se<O;se++)Z.color[se]=q[se];else Z.color=q;if(e.isArrayOrTypedArray(J)||Array.isArray(X))for(Z.font=new Array(O),se=0;se<O;se++){var ue=Z.font[se]={};ue.size=(e.isTypedArray(J)?J[se]:Array.isArray(J)?d(J[se])?J[se]:0:J)*le,ue.family=Array.isArray(X)?X[se]:X}else Z.font={size:J*le,family:X};return Z}function p(I){var R=I._length,D=I.marker,O={},F,G=e.isArrayOrTypedArray(D.symbol),W=e.isArrayOrTypedArray(D.color),q=e.isArrayOrTypedArray(D.line.color),J=e.isArrayOrTypedArray(D.opacity),X=e.isArrayOrTypedArray(D.size),Z=e.isArrayOrTypedArray(D.line.width),se;if(G||(se=s.isOpenSymbol(D.symbol)),G||W||q||J){O.colors=new Array(R),O.borderColors=new Array(R);var le=r(D,D.opacity,R),oe=r(D.line,D.opacity,R);if(!Array.isArray(oe[0])){var U=oe;for(oe=Array(R),F=0;F<R;F++)oe[F]=U}if(!Array.isArray(le[0])){var V=le;for(le=Array(R),F=0;F<R;F++)le[F]=V}for(O.colors=le,O.borderColors=oe,F=0;F<R;F++){if(G){var re=D.symbol[F];se=s.isOpenSymbol(re)}se&&(oe[F]=le[F].slice(),le[F]=le[F].slice(),le[F][3]=0)}O.opacity=I.opacity}else se?(O.color=b(D.color,"uint8"),O.color[3]=0,O.borderColor=b(D.color,"uint8")):(O.color=b(D.color,"uint8"),O.borderColor=b(D.line.color,"uint8")),O.opacity=I.opacity*D.opacity;if(G)for(O.markers=new Array(R),F=0;F<R;F++)O.markers[F]=S(D.symbol[F]);else O.marker=S(D.symbol);var ee=1,j=c(I,ee),Q;if(X||Z){var ne=O.sizes=new Array(R),ae=O.borderSizes=new Array(R),ie=0,ue;if(X){for(F=0;F<R;F++)ne[F]=j(D.size[F]),ie+=ne[F];ue=ie/R}else for(Q=j(D.size),F=0;F<R;F++)ne[F]=Q;if(Z)for(F=0;F<R;F++)ae[F]=D.line.width[F];else for(Q=D.line.width,F=0;F<R;F++)ae[F]=Q;O.sizeAvg=ue}else O.size=j(D&&D.size||10),O.borderSizes=j(D.line.width);return O}function A(I,R){var D=I.marker,O={};return R&&(R.marker&&R.marker.symbol?O=p(e.extendFlat({},D,R.marker)):R.marker&&(R.marker.size&&(O.size=R.marker.size),R.marker.color&&(O.colors=R.marker.color),R.marker.opacity!==void 0&&(O.opacity=R.marker.opacity))),O}function m(I,R,D){var O={};if(!D)return O;if(D.textfont){var F={opacity:1,text:R.text,texttemplate:R.texttemplate,textposition:R.textposition,textfont:e.extendFlat({},R.textfont)};D.textfont&&e.extendFlat(F.textfont,D.textfont),O=y(I,F)}return O}function M(I,R,D){var O={capSize:R.width*2*D,lineWidth:R.thickness*D,color:R.color};return R.copy_ystyle&&(O=I.error_y),O}var x=i.SYMBOL_SDF_SIZE,T=i.SYMBOL_SIZE,_=i.SYMBOL_STROKE,f={},L=o.symbolFuncs[0](T*.05);function S(I){if(I==="circle")return null;var R,D,O=o.symbolNumber(I),F=o.symbolFuncs[O%100],G=!!o.symbolNoDot[O%100],W=!!o.symbolNoFill[O%100],q=s.isDotSymbol(I);return f[I]?f[I]:(q&&!G?R=F(T*1.1)+L:R=F(T),D=l(R,{w:x,h:x,viewBox:[-T,-T,T,T],stroke:W?_:-_}),f[I]=D,D||null)}function k(I,R,D){var O=D.length,F=O/2,G,W;if(n.hasLines(R)&&F)if(R.line.shape==="hv"){for(G=[],W=0;W<F-1;W++)isNaN(D[W*2])||isNaN(D[W*2+1])?G.push(NaN,NaN,NaN,NaN):(G.push(D[W*2],D[W*2+1]),!isNaN(D[W*2+2])&&!isNaN(D[W*2+3])?G.push(D[W*2+2],D[W*2+1]):G.push(NaN,NaN));G.push(D[O-2],D[O-1])}else if(R.line.shape==="hvh"){for(G=[],W=0;W<F-1;W++)if(isNaN(D[W*2])||isNaN(D[W*2+1])||isNaN(D[W*2+2])||isNaN(D[W*2+3]))!isNaN(D[W*2])&&!isNaN(D[W*2+1])?G.push(D[W*2],D[W*2+1]):G.push(NaN,NaN),G.push(NaN,NaN);else{var q=(D[W*2]+D[W*2+2])/2;G.push(D[W*2],D[W*2+1],q,D[W*2+1],q,D[W*2+3])}G.push(D[O-2],D[O-1])}else if(R.line.shape==="vhv"){for(G=[],W=0;W<F-1;W++)if(isNaN(D[W*2])||isNaN(D[W*2+1])||isNaN(D[W*2+2])||isNaN(D[W*2+3]))!isNaN(D[W*2])&&!isNaN(D[W*2+1])?G.push(D[W*2],D[W*2+1]):G.push(NaN,NaN),G.push(NaN,NaN);else{var J=(D[W*2+1]+D[W*2+3])/2;G.push(D[W*2],D[W*2+1],D[W*2],J,D[W*2+2],J)}G.push(D[O-2],D[O-1])}else if(R.line.shape==="vh"){for(G=[],W=0;W<F-1;W++)isNaN(D[W*2])||isNaN(D[W*2+1])?G.push(NaN,NaN,NaN,NaN):(G.push(D[W*2],D[W*2+1]),!isNaN(D[W*2+2])&&!isNaN(D[W*2+3])?G.push(D[W*2],D[W*2+3]):G.push(NaN,NaN));G.push(D[O-2],D[O-1])}else G=D;var X=!1;for(W=0;W<G.length;W++)if(isNaN(G[W])){X=!0;break}var Z=X||G.length>i.TOO_MANY_POINTS||n.hasMarkers(R)?"rect":"round";if(X&&R.connectgaps){var se=G[0],le=G[1];for(W=0;W<G.length;W+=2)isNaN(G[W])||isNaN(G[W+1])?(G[W]=se,G[W+1]=le):(se=G[W],le=G[W+1])}return{join:Z,positions:G}}function P(I,R,D,O,F){var G=w.getComponentMethod("errorbars","makeComputeError"),W=a.getFromId(I,R.xaxis),q=a.getFromId(I,R.yaxis),J=D.length/2,X={};function Z(se,le){var oe=le._id.charAt(0),U=R["error_"+oe];if(U&&U.visible&&(le.type==="linear"||le.type==="log")){for(var V=G(U),re={x:0,y:1}[oe],ee={x:[0,1,2,3],y:[2,3,0,1]}[oe],j=new Float64Array(4*J),Q=1/0,ne=-1/0,ae=0,ie=0;ae<J;ae++,ie+=4){var ue=se[ae];if(d(ue)){var xe=D[ae*2+re],he=V(ue,ae),ge=he[0],me=he[1];if(d(ge)&&d(me)){var ke=ue-ge,Ae=ue+me;j[ie+ee[0]]=xe-le.c2l(ke),j[ie+ee[1]]=le.c2l(Ae)-xe,j[ie+ee[2]]=0,j[ie+ee[3]]=0,Q=Math.min(Q,ue-ge),ne=Math.max(ne,ue+me)}}}X[oe]={positions:D,errors:j,_bnds:[Q,ne]}}}return Z(O,W),Z(F,q),X}function z(I,R,D,O){var F=R._length,G={},W;if(n.hasMarkers(R)){var q=D.font,J=D.align,X=D.baseline;for(G.offset=new Array(F),W=0;W<F;W++){var Z=O.sizes?O.sizes[W]:O.size,se=Array.isArray(q)?q[W].size:q.size,le=Array.isArray(J)?J.length>1?J[W]:J[0]:J,oe=Array.isArray(X)?X.length>1?X[W]:X[0]:X,U=u[le],V=u[oe],re=Z?Z/.8+1:0,ee=-V*re-V*.5;G.offset[W]=[U*re/se,ee/se]}}return G}B.exports={style:h,markerStyle:p,markerSelection:A,linePositions:k,errorBarPositions:P,textPosition:z}},{"../../components/drawing":388,"../../components/fx/helpers":402,"../../constants/interactions":478,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/cartesian/axis_ids":558,"../../registry":638,"../scatter/make_bubble_size_func":943,"../scatter/subtypes":951,"./constants":980,"./helpers":985,"color-normalize":89,"fast-isnumeric":190,"svg-path-sdf":310}],982:[function(t,B,H){var d=t("../../lib"),l=t("../../registry"),b=t("./helpers"),w=t("./attributes"),e=t("../scatter/constants"),o=t("../scatter/subtypes"),a=t("../scatter/xy_defaults"),r=t("../scatter/period_defaults"),n=t("../scatter/marker_defaults"),c=t("../scatter/line_defaults"),s=t("../scatter/fillcolor_defaults"),i=t("../scatter/text_defaults");B.exports=function(u,g,h,y){function p(L,S){return d.coerce(u,g,w,L,S)}var A=u.marker?b.isOpenSymbol(u.marker.symbol):!1,m=o.isBubble(u),M=a(u,g,y,p);if(!M){g.visible=!1;return}r(u,g,y,p),p("xhoverformat"),p("yhoverformat");var x=M<e.PTS_LINESONLY?"lines+markers":"lines";p("text"),p("hovertext"),p("hovertemplate"),p("mode",x),o.hasLines(g)&&(p("connectgaps"),c(u,g,h,y,p),p("line.shape")),o.hasMarkers(g)&&(n(u,g,h,y,p),p("marker.line.width",A||m?1:0)),o.hasText(g)&&(p("texttemplate"),i(u,g,y,p));var T=(g.line||{}).color,_=(g.marker||{}).color;p("fill"),g.fill!=="none"&&s(u,g,h,p);var f=l.getComponentMethod("errorbars","supplyDefaults");f(u,g,T||_||h,{axis:"y"}),f(u,g,T||_||h,{axis:"x",inherit:"y"}),d.coerceSelectionMarkerOpacity(g,p)}},{"../../lib":503,"../../registry":638,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/period_defaults":946,"../scatter/subtypes":951,"../scatter/text_defaults":952,"../scatter/xy_defaults":953,"./attributes":978,"./helpers":985}],983:[function(t,B,H){var d=t("../../lib"),l=t("../../components/color"),b=t("../../constants/interactions").DESELECTDIM;function w(e){var o=e[0],a=o.trace,r=o.t,n=r._scene,c=r.index,s=n.selectBatch[c],i=n.unselectBatch[c],v=n.textOptions[c],u=n.textSelectedOptions[c]||{},g=n.textUnselectedOptions[c]||{},h=d.extendFlat({},v),y,p;if(s.length||i.length){var A=u.color,m=g.color,M=v.color,x=Array.isArray(M);for(h.color=new Array(a._length),y=0;y<s.length;y++)p=s[y],h.color[p]=A||(x?M[p]:M);for(y=0;y<i.length;y++){p=i[y];var T=x?M[p]:M;h.color[p]=m||(A?T:l.addOpacity(T,b))}}n.glText[c].update(h)}B.exports={styleTextSelection:w}},{"../../components/color":366,"../../constants/interactions":478,"../../lib":503}],984:[function(t,B,H){var d=t("../scatter/format_labels");B.exports=function(b,w,e){var o=b.i;return"x"in b||(b.x=w._x[o]),"y"in b||(b.y=w._y[o]),d(b,w,e)}},{"../scatter/format_labels":935}],985:[function(t,B,H){var d=t("./constants");H.isOpenSymbol=function(l){return typeof l=="string"?d.OPEN_RE.test(l):l%200>100},H.isDotSymbol=function(l){return typeof l=="string"?d.DOT_RE.test(l):l>200}},{"./constants":980}],986:[function(t,B,H){var d=t("../../registry"),l=t("../../lib"),b=t("../scatter/get_trace_color");function w(o,a,r,n){var c=o.cd,s=c[0].t,i=c[0].trace,v=o.xa,u=o.ya,g=s.x,h=s.y,y=v.c2p(a),p=u.c2p(r),A=o.distance,m;if(s.tree){var M=v.p2c(y-A),x=v.p2c(y+A),T=u.p2c(p-A),_=u.p2c(p+A);n==="x"?m=s.tree.range(Math.min(M,x),Math.min(u._rl[0],u._rl[1]),Math.max(M,x),Math.max(u._rl[0],u._rl[1])):m=s.tree.range(Math.min(M,x),Math.min(T,_),Math.max(M,x),Math.max(T,_))}else m=s.ids;var f,L,S,k,P,z,I,R,D,O=A;if(n==="x"){var F=!!i.xperiodalignment,G=!!i.yperiodalignment;for(P=0;P<m.length;P++){if(f=m[P],S=g[f],z=Math.abs(v.c2p(S)-y),F){var W=v.c2p(i._xStarts[f]),q=v.c2p(i._xEnds[f]);z=y>=Math.min(W,q)&&y<=Math.max(W,q)?0:1/0}if(z<O){if(O=z,k=h[f],I=u.c2p(k)-p,G){var J=u.c2p(i._yStarts[f]),X=u.c2p(i._yEnds[f]);I=p>=Math.min(J,X)&&p<=Math.max(J,X)?0:1/0}D=Math.sqrt(z*z+I*I),L=m[P]}}}else for(P=m.length-1;P>-1;P--)f=m[P],S=g[f],k=h[f],z=v.c2p(S)-y,I=u.c2p(k)-p,R=Math.sqrt(z*z+I*I),R<O&&(O=D=R,L=f);return o.index=L,o.distance=O,o.dxy=D,L===void 0?[o]:[e(o,g,h,i)]}function e(o,a,r,n){var c=o.xa,s=o.ya,i=o.distance,v=o.dxy,u=o.index,g={pointNumber:u,x:a[u],y:r[u]};g.tx=Array.isArray(n.text)?n.text[u]:n.text,g.htx=Array.isArray(n.hovertext)?n.hovertext[u]:n.hovertext,g.data=Array.isArray(n.customdata)?n.customdata[u]:n.customdata,g.tp=Array.isArray(n.textposition)?n.textposition[u]:n.textposition;var h=n.textfont;h&&(g.ts=l.isArrayOrTypedArray(h.size)?h.size[u]:h.size,g.tc=Array.isArray(h.color)?h.color[u]:h.color,g.tf=Array.isArray(h.family)?h.family[u]:h.family);var y=n.marker;y&&(g.ms=l.isArrayOrTypedArray(y.size)?y.size[u]:y.size,g.mo=l.isArrayOrTypedArray(y.opacity)?y.opacity[u]:y.opacity,g.mx=l.isArrayOrTypedArray(y.symbol)?y.symbol[u]:y.symbol,g.mc=l.isArrayOrTypedArray(y.color)?y.color[u]:y.color);var p=y&&y.line;p&&(g.mlc=Array.isArray(p.color)?p.color[u]:p.color,g.mlw=l.isArrayOrTypedArray(p.width)?p.width[u]:p.width);var A=y&&y.gradient;A&&A.type!=="none"&&(g.mgt=Array.isArray(A.type)?A.type[u]:A.type,g.mgc=Array.isArray(A.color)?A.color[u]:A.color);var m=c.c2p(g.x,!0),M=s.c2p(g.y,!0),x=g.mrc||1,T=n.hoverlabel;T&&(g.hbg=Array.isArray(T.bgcolor)?T.bgcolor[u]:T.bgcolor,g.hbc=Array.isArray(T.bordercolor)?T.bordercolor[u]:T.bordercolor,g.hts=l.isArrayOrTypedArray(T.font.size)?T.font.size[u]:T.font.size,g.htc=Array.isArray(T.font.color)?T.font.color[u]:T.font.color,g.htf=Array.isArray(T.font.family)?T.font.family[u]:T.font.family,g.hnl=l.isArrayOrTypedArray(T.namelength)?T.namelength[u]:T.namelength);var _=n.hoverinfo;_&&(g.hi=Array.isArray(_)?_[u]:_);var f=n.hovertemplate;f&&(g.ht=Array.isArray(f)?f[u]:f);var L={};L[o.index]=g;var S=n._origX,k=n._origY,P=l.extendFlat({},o,{color:b(n,g),x0:m-x,x1:m+x,xLabelVal:S?S[u]:g.x,y0:M-x,y1:M+x,yLabelVal:k?k[u]:g.y,cd:L,distance:i,spikeDistance:v,hovertemplate:g.ht});return g.htx?P.text=g.htx:g.tx?P.text=g.tx:n.text&&(P.text=n.text),l.fillText(g,n,P),d.getComponentMethod("errorbars","hoverInfo")(g,n,P),P}B.exports={hoverPoints:w,calcHover:e}},{"../../lib":503,"../../registry":638,"../scatter/get_trace_color":936}],987:[function(t,B,H){var d=t("./hover");B.exports={moduleType:"trace",name:"scattergl",basePlotModule:t("../../plots/cartesian"),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:t("./attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("../scatter/cross_trace_defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),plot:t("./plot"),hoverPoints:d.hoverPoints,selectPoints:t("./select"),meta:{}}},{"../../plots/cartesian":568,"../scatter/cross_trace_defaults":932,"../scatter/marker_colorbar":944,"./attributes":978,"./calc":979,"./defaults":982,"./format_labels":984,"./hover":986,"./plot":988,"./select":990}],988:[function(t,B,H){var d=t("regl-scatter2d"),l=t("regl-line2d"),b=t("regl-error2d"),w=t("gl-text"),e=t("../../lib"),o=t("../../components/dragelement/helpers").selectMode,a=t("../../lib/prepare_regl"),r=t("../scatter/subtypes"),n=t("../scatter/link_traces"),c=t("./edit_style").styleTextSelection;function s(i,v,u,g){var h=i._size,y=i.width*g,p=i.height*g,A=h.l*g,m=h.b*g,M=h.r*g,x=h.t*g,T=h.w*g,_=h.h*g;return[A+v.domain[0]*T,m+u.domain[0]*_,y-M-(1-v.domain[1])*T,p-x-(1-u.domain[1])*_]}B.exports=function(v,u,g){if(!!g.length){var h=v._fullLayout,y=u._scene,p=u.xaxis,A=u.yaxis,m,M;if(!!y){var x=a(v,["ANGLE_instanced_arrays","OES_element_index_uint"]);if(!x){y.init();return}var T=y.count,_=h._glcanvas.data()[0].regl;if(n(v,u,g),y.dirty){if(y.error2d===!0&&(y.error2d=b(_)),y.line2d===!0&&(y.line2d=l(_)),y.scatter2d===!0&&(y.scatter2d=d(_)),y.fill2d===!0&&(y.fill2d=l(_)),y.glText===!0)for(y.glText=new Array(T),m=0;m<T;m++)y.glText[m]=new w(_);if(y.glText){if(T>y.glText.length){var f=T-y.glText.length;for(m=0;m<f;m++)y.glText.push(new w(_))}else if(T<y.glText.length){var L=y.glText.length-T,S=y.glText.splice(T,L);S.forEach(function(re){re.destroy()})}for(m=0;m<T;m++)y.glText[m].update(y.textOptions[m])}if(y.line2d&&(y.line2d.update(y.lineOptions),y.lineOptions=y.lineOptions.map(function(re){if(re&&re.positions){for(var ee=re.positions,j=0;j<ee.length&&(isNaN(ee[j])||isNaN(ee[j+1]));)j+=2;for(var Q=ee.length-2;Q>j&&(isNaN(ee[Q])||isNaN(ee[Q+1]));)Q-=2;re.positions=ee.slice(j,Q+2)}return re}),y.line2d.update(y.lineOptions)),y.error2d){var k=(y.errorXOptions||[]).concat(y.errorYOptions||[]);y.error2d.update(k)}y.scatter2d&&y.scatter2d.update(y.markerOptions),y.fillOrder=e.repeat(null,T),y.fill2d&&(y.fillOptions=y.fillOptions.map(function(re,ee){var j=g[ee];if(!(!re||!j||!j[0]||!j[0].trace)){var Q=j[0],ne=Q.trace,ae=Q.t,ie=y.lineOptions[ee],ue,xe,he=[];ne._ownfill&&he.push(ee),ne._nexttrace&&he.push(ee+1),he.length&&(y.fillOrder[ee]=he);var ge=[],me=ie&&ie.positions||ae.positions,ke,Ae;if(ne.fill==="tozeroy"){for(ke=0;ke<me.length&&isNaN(me[ke+1]);)ke+=2;for(Ae=me.length-2;Ae>ke&&isNaN(me[Ae+1]);)Ae-=2;me[ke+1]!==0&&(ge=[me[ke],0]),ge=ge.concat(me.slice(ke,Ae+2)),me[Ae+1]!==0&&(ge=ge.concat([me[Ae],0]))}else if(ne.fill==="tozerox"){for(ke=0;ke<me.length&&isNaN(me[ke]);)ke+=2;for(Ae=me.length-2;Ae>ke&&isNaN(me[Ae]);)Ae-=2;me[ke]!==0&&(ge=[0,me[ke+1]]),ge=ge.concat(me.slice(ke,Ae+2)),me[Ae]!==0&&(ge=ge.concat([0,me[Ae+1]]))}else if(ne.fill==="toself"||ne.fill==="tonext"){for(ge=[],ue=0,re.splitNull=!0,xe=0;xe<me.length;xe+=2)(isNaN(me[xe])||isNaN(me[xe+1]))&&(ge=ge.concat(me.slice(ue,xe)),ge.push(me[ue],me[ue+1]),ge.push(null,null),ue=xe+2);ge=ge.concat(me.slice(ue)),ue&&ge.push(me[ue],me[ue+1])}else{var Ne=ne._nexttrace;if(Ne){var He=y.lineOptions[ee+1];if(He){var Ge=He.positions;if(ne.fill==="tonexty"){for(ge=me.slice(),ee=Math.floor(Ge.length/2);ee--;){var _e=Ge[ee*2],De=Ge[ee*2+1];isNaN(_e)||isNaN(De)||ge.push(_e,De)}re.fill=Ne.fillcolor}}}}if(ne._prevtrace&&ne._prevtrace.fill==="tonext"){var Ye=y.lineOptions[ee-1].positions,qe=ge.length/2;ue=qe;var Ue=[ue];for(xe=0;xe<Ye.length;xe+=2)(isNaN(Ye[xe])||isNaN(Ye[xe+1]))&&(Ue.push(xe/2+qe+1),ue=xe+2);ge=ge.concat(Ye),re.hole=Ue}return re.fillmode=ne.fill,re.opacity=ne.opacity,re.positions=ge,re}}),y.fill2d.update(y.fillOptions))}var P=h.dragmode,z=o(P),I=h.clickmode.indexOf("select")>-1;for(m=0;m<T;m++){var R=g[m][0],D=R.trace,O=R.t,F=O.index,G=D._length,W=O.x,q=O.y;if(D.selectedpoints||z||I){if(z||(z=!0),D.selectedpoints){var J=y.selectBatch[F]=e.selIndices2selPoints(D),X={};for(M=0;M<J.length;M++)X[J[M]]=1;var Z=[];for(M=0;M<G;M++)X[M]||Z.push(M);y.unselectBatch[F]=Z}var se=O.xpx=new Array(G),le=O.ypx=new Array(G);for(M=0;M<G;M++)se[M]=p.c2p(W[M]),le[M]=A.c2p(q[M])}else O.xpx=O.ypx=null}if(z){if(y.select2d||(y.select2d=d(h._glcanvas.data()[1].regl)),y.scatter2d){var oe=new Array(T);for(m=0;m<T;m++)oe[m]=y.selectBatch[m].length||y.unselectBatch[m].length?y.markerUnselectedOptions[m]:{};y.scatter2d.update(oe)}y.select2d&&(y.select2d.update(y.markerOptions),y.select2d.update(y.markerSelectedOptions)),y.glText&&g.forEach(function(re){var ee=((re||[])[0]||{}).trace||{};r.hasText(ee)&&c(re)})}else y.scatter2d&&y.scatter2d.update(y.markerOptions);var U={viewport:s(h,p,A,v._context.plotGlPixelRatio),range:[(p._rl||p.range)[0],(A._rl||A.range)[0],(p._rl||p.range)[1],(A._rl||A.range)[1]]},V=e.repeat(U,y.count);y.fill2d&&y.fill2d.update(V),y.line2d&&y.line2d.update(V),y.error2d&&y.error2d.update(V.concat(V)),y.scatter2d&&y.scatter2d.update(V),y.select2d&&y.select2d.update(V),y.glText&&y.glText.forEach(function(re){re.update(U)})}}}},{"../../components/dragelement/helpers":384,"../../lib":503,"../../lib/prepare_regl":516,"../scatter/link_traces":942,"../scatter/subtypes":951,"./edit_style":983,"gl-text":225,"regl-error2d":279,"regl-line2d":280,"regl-scatter2d":281}],989:[function(t,B,H){var d=t("../../lib");B.exports=function(b,w){var e=w._scene,o={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},a={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return w._scene||(e=w._scene={},e.init=function(){d.extendFlat(e,a,o)},e.init(),e.update=function(n){var c=d.repeat(n,e.count);if(e.fill2d&&e.fill2d.update(c),e.scatter2d&&e.scatter2d.update(c),e.line2d&&e.line2d.update(c),e.error2d&&e.error2d.update(c.concat(c)),e.select2d&&e.select2d.update(c),e.glText)for(var s=0;s<e.count;s++)e.glText[s].update(n)},e.draw=function(){for(var n=e.count,c=e.fill2d,s=e.error2d,i=e.line2d,v=e.scatter2d,u=e.glText,g=e.select2d,h=e.selectBatch,y=e.unselectBatch,p=0;p<n;p++){if(c&&e.fillOrder[p]&&c.draw(e.fillOrder[p]),i&&e.lineOptions[p]&&i.draw(p),s&&(e.errorXOptions[p]&&s.draw(p),e.errorYOptions[p]&&s.draw(p+n)),v&&e.markerOptions[p])if(y[p].length){var A=d.repeat([],e.count);A[p]=y[p],v.draw(A)}else h[p].length||v.draw(p);u[p]&&e.textOptions[p]&&u[p].render()}g&&g.draw(h),e.dirty=!1},e.destroy=function(){e.fill2d&&e.fill2d.destroy&&e.fill2d.destroy(),e.scatter2d&&e.scatter2d.destroy&&e.scatter2d.destroy(),e.error2d&&e.error2d.destroy&&e.error2d.destroy(),e.line2d&&e.line2d.destroy&&e.line2d.destroy(),e.select2d&&e.select2d.destroy&&e.select2d.destroy(),e.glText&&e.glText.forEach(function(n){n.destroy&&n.destroy()}),e.lineOptions=null,e.fillOptions=null,e.markerOptions=null,e.markerSelectedOptions=null,e.markerUnselectedOptions=null,e.errorXOptions=null,e.errorYOptions=null,e.textOptions=null,e.textSelectedOptions=null,e.textUnselectedOptions=null,e.selectBatch=null,e.unselectBatch=null,w._scene=null}),e.dirty||d.extendFlat(e,o),e}},{"../../lib":503}],990:[function(t,B,H){var d=t("../scatter/subtypes"),l=t("./edit_style").styleTextSelection;B.exports=function(w,e){var o=w.cd,a=w.xaxis,r=w.yaxis,n=[],c=o[0].trace,s=o[0].t,i=c._length,v=s.x,u=s.y,g=s._scene,h=s.index;if(!g)return n;var y=d.hasText(c),p=d.hasMarkers(c),A=!p&&!y;if(c.visible!==!0||A)return n;var m=[],M=[];if(e!==!1&&!e.degenerate)for(var x=0;x<i;x++)e.contains([s.xpx[x],s.ypx[x]],!1,x,w)?(m.push(x),n.push({pointNumber:x,x:a.c2d(v[x]),y:r.c2d(u[x])})):M.push(x);if(p){var T=g.scatter2d;if(!m.length&&!M.length){var _=new Array(g.count);_[h]=g.markerOptions[h],T.update.apply(T,_)}else if(!g.selectBatch[h].length&&!g.unselectBatch[h].length){var f=new Array(g.count);f[h]=g.markerUnselectedOptions[h],T.update.apply(T,f)}}return g.selectBatch[h]=m,g.unselectBatch[h]=M,y&&l(o),n}},{"../scatter/subtypes":951,"./edit_style":983}],991:[function(t,B,H){var d=t("../../plots/template_attributes").hovertemplateAttrs,l=t("../../plots/template_attributes").texttemplateAttrs,b=t("../scattergeo/attributes"),w=t("../scatter/attributes"),e=t("../../plots/mapbox/layout_attributes"),o=t("../../plots/attributes"),a=t("../../components/colorscale/attributes"),r=t("../../lib/extend").extendFlat,n=t("../../plot_api/edit_types").overrideAll,c=b.line,s=b.marker;B.exports=n({lon:b.lon,lat:b.lat,mode:r({},w.mode,{dflt:"markers"}),text:r({},w.text,{}),texttemplate:l({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:r({},w.hovertext,{}),line:{color:c.color,width:c.width},connectgaps:w.connectgaps,marker:r({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:s.opacity,size:s.size,sizeref:s.sizeref,sizemin:s.sizemin,sizemode:s.sizemode},a("marker")),fill:b.fill,fillcolor:w.fillcolor,textfont:e.layers.symbol.textfont,textposition:e.layers.symbol.textposition,below:{valType:"string"},selected:{marker:w.selected.marker},unselected:{marker:w.unselected.marker},hoverinfo:r({},o.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:d()},"calc","nested")},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/mapbox/layout_attributes":615,"../../plots/template_attributes":633,"../scatter/attributes":926,"../scattergeo/attributes":968}],992:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../lib"),b=t("../../constants/numerical").BADNUM,w=t("../../lib/geojson_utils"),e=t("../../components/colorscale"),o=t("../../components/drawing"),a=t("../scatter/make_bubble_size_func"),r=t("../scatter/subtypes"),n=t("../../plots/mapbox/convert_text_opts"),c=t("../../components/fx/helpers").appendArrayPointValue,s=t("../../lib/svg_text_utils").NEWLINES,i=t("../../lib/svg_text_utils").BR_TAG_ALL;B.exports=function(m,M){var x=M[0].trace,T=x.visible===!0&&x._length!==0,_=x.fill!=="none",f=r.hasLines(x),L=r.hasMarkers(x),S=r.hasText(x),k=L&&x.marker.symbol==="circle",P=L&&x.marker.symbol!=="circle",z=v(),I=v(),R=v(),D=v(),O={fill:z,line:I,circle:R,symbol:D};if(!T)return O;var F;if((_||f)&&(F=w.calcTraceToLineCoords(M)),_&&(z.geojson=w.makePolygon(F),z.layout.visibility="visible",l.extendFlat(z.paint,{"fill-color":x.fillcolor})),f&&(I.geojson=w.makeLine(F),I.layout.visibility="visible",l.extendFlat(I.paint,{"line-width":x.line.width,"line-color":x.line.color,"line-opacity":x.opacity})),k){var G=u(M);R.geojson=G.geojson,R.layout.visibility="visible",l.extendFlat(R.paint,{"circle-color":G.mcc,"circle-radius":G.mrc,"circle-opacity":G.mo})}if((P||S)&&(D.geojson=g(M,m),l.extendFlat(D.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),P&&(l.extendFlat(D.layout,{"icon-size":x.marker.size/10}),"angle"in x.marker&&x.marker.angle!=="auto"&&l.extendFlat(D.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),D.layout["icon-allow-overlap"]=x.marker.allowoverlap,l.extendFlat(D.paint,{"icon-opacity":x.opacity*x.marker.opacity,"icon-color":x.marker.color})),S)){var W=(x.marker||{}).size,q=n(x.textposition,W);l.extendFlat(D.layout,{"text-size":x.textfont.size,"text-anchor":q.anchor,"text-offset":q.offset}),l.extendFlat(D.paint,{"text-color":x.textfont.color,"text-opacity":x.opacity})}return O};function v(){return{geojson:w.makeBlank(),layout:{visibility:"none"},paint:{}}}function u(A){var m=A[0].trace,M=m.marker,x=m.selectedpoints,T=l.isArrayOrTypedArray(M.color),_=l.isArrayOrTypedArray(M.size),f=l.isArrayOrTypedArray(M.opacity),L;function S(q){return m.opacity*q}function k(q){return q/2}var P;T&&(e.hasColorscale(m,"marker")?P=e.makeColorScaleFuncFromTrace(M):P=l.identity);var z;_&&(z=a(m));var I;f&&(I=function(q){var J=d(q)?+l.constrain(q,0,1):0;return S(J)});var R=[];for(L=0;L<A.length;L++){var D=A[L],O=D.lonlat;if(!p(O)){var F={};P&&(F.mcc=D.mcc=P(D.mc)),z&&(F.mrc=D.mrc=z(D.ms)),I&&(F.mo=I(D.mo)),x&&(F.selected=D.selected||0),R.push({type:"Feature",geometry:{type:"Point",coordinates:O},properties:F})}}var G;if(x)for(G=o.makeSelectedPointStyleFns(m),L=0;L<R.length;L++){var W=R[L].properties;G.selectedOpacityFn&&(W.mo=S(G.selectedOpacityFn(W))),G.selectedColorFn&&(W.mcc=G.selectedColorFn(W)),G.selectedSizeFn&&(W.mrc=G.selectedSizeFn(W))}return{geojson:{type:"FeatureCollection",features:R},mcc:T||G&&G.selectedColorFn?{type:"identity",property:"mcc"}:M.color,mrc:_||G&&G.selectedSizeFn?{type:"identity",property:"mrc"}:k(M.size),mo:f||G&&G.selectedOpacityFn?{type:"identity",property:"mo"}:S(M.opacity)}}function g(A,m){for(var M=m._fullLayout,x=A[0].trace,T=x.marker||{},_=T.symbol,f=T.angle,L=_!=="circle"?h(_):y,S=f!=="auto"?h(f,!0):y,k=r.hasText(x)?h(x.text):y,P=[],z=0;z<A.length;z++){var I=A[z];if(!p(I.lonlat)){var R=x.texttemplate,D;if(R){var O=Array.isArray(R)?R[z]||"":R,F=x._module.formatLabels(I,x,M),G={};c(G,x,I.i);var W=x._meta||{};D=l.texttemplateString(O,F,M._d3locale,G,I,W)}else D=k(z);D&&(D=D.replace(s,"").replace(i,`
`)),P.push({type:"Feature",geometry:{type:"Point",coordinates:I.lonlat},properties:{symbol:L(z),angle:S(z),text:D}})}}return{type:"FeatureCollection",features:P}}function h(A,m){return l.isArrayOrTypedArray(A)?m?function(M){return d(A[M])?+A[M]:0}:function(M){return A[M]}:A?function(){return A}:y}function y(){return""}function p(A){return A[0]===b}},{"../../components/colorscale":378,"../../components/drawing":388,"../../components/fx/helpers":402,"../../constants/numerical":479,"../../lib":503,"../../lib/geojson_utils":497,"../../lib/svg_text_utils":529,"../../plots/mapbox/convert_text_opts":612,"../scatter/make_bubble_size_func":943,"../scatter/subtypes":951,"fast-isnumeric":190}],993:[function(t,B,H){var d=t("../../lib"),l=t("../scatter/subtypes"),b=t("../scatter/marker_defaults"),w=t("../scatter/line_defaults"),e=t("../scatter/text_defaults"),o=t("../scatter/fillcolor_defaults"),a=t("./attributes");B.exports=function(c,s,i,v){function u(y,p){return d.coerce(c,s,a,y,p)}var g=r(c,s,u);if(!g){s.visible=!1;return}if(u("text"),u("texttemplate"),u("hovertext"),u("hovertemplate"),u("mode"),u("below"),l.hasLines(s)&&(w(c,s,i,v,u,{noDash:!0}),u("connectgaps")),l.hasMarkers(s)){b(c,s,i,v,u,{noLine:!0}),u("marker.allowoverlap"),u("marker.angle");var h=s.marker;h.symbol!=="circle"&&(d.isArrayOrTypedArray(h.size)&&(h.size=h.size[0]),d.isArrayOrTypedArray(h.color)&&(h.color=h.color[0]))}l.hasText(s)&&e(c,s,v,u,{noSelect:!0}),u("fill"),s.fill!=="none"&&o(c,s,i,u),d.coerceSelectionMarkerOpacity(s,u)};function r(n,c,s){var i=s("lon")||[],v=s("lat")||[],u=Math.min(i.length,v.length);return c._length=u,u}},{"../../lib":503,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":991}],994:[function(t,B,H){B.exports=function(l,b){return l.lon=b.lon,l.lat=b.lat,l}},{}],995:[function(t,B,H){var d=t("../../plots/cartesian/axes");B.exports=function(b,w,e){var o={},a=e[w.subplot]._subplot,r=a.mockAxis,n=b.lonlat;return o.lonLabel=d.tickText(r,r.c2l(n[0]),!0).text,o.latLabel=d.tickText(r,r.c2l(n[1]),!0).text,o}},{"../../plots/cartesian/axes":554}],996:[function(t,B,H){var d=t("../../components/fx"),l=t("../../lib"),b=t("../scatter/get_trace_color"),w=l.fillText,e=t("../../constants/numerical").BADNUM;function o(r,n,c){var s=r.cd,i=s[0].trace,v=r.xa,u=r.ya,g=r.subplot,h=n>=0?Math.floor((n+180)/360):Math.ceil((n-180)/360),y=h*360,p=n-y;function A(k){var P=k.lonlat;if(P[0]===e)return 1/0;var z=l.modHalf(P[0],360),I=P[1],R=g.project([z,I]),D=R.x-v.c2p([p,I]),O=R.y-u.c2p([z,c]),F=Math.max(3,k.mrc||0);return Math.max(Math.sqrt(D*D+O*O)-F,1-3/F)}if(d.getClosest(s,A,r),r.index!==!1){var m=s[r.index],M=m.lonlat,x=[l.modHalf(M[0],360)+y,M[1]],T=v.c2p(x),_=u.c2p(x),f=m.mrc||1;r.x0=T-f,r.x1=T+f,r.y0=_-f,r.y1=_+f;var L={};L[i.subplot]={_subplot:g};var S=i._module.formatLabels(m,i,L);return r.lonLabel=S.lonLabel,r.latLabel=S.latLabel,r.color=b(i,m),r.extraText=a(i,m,s[0].t.labels),r.hovertemplate=i.hovertemplate,[r]}}function a(r,n,c){if(r.hovertemplate)return;var s=n.hi||r.hoverinfo,i=s.split("+"),v=i.indexOf("all")!==-1,u=i.indexOf("lon")!==-1,g=i.indexOf("lat")!==-1,h=n.lonlat,y=[];function p(A){return A+"\xB0"}return v||u&&g?y.push("("+p(h[1])+", "+p(h[0])+")"):u?y.push(c.lon+p(h[0])):g&&y.push(c.lat+p(h[1])),(v||i.indexOf("text")!==-1)&&w(n,r,y),y.join("<br>")}B.exports={hoverPoints:o,getExtraText:a}},{"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../scatter/get_trace_color":936}],997:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("../scattergeo/calc"),plot:t("./plot"),hoverPoints:t("./hover").hoverPoints,eventData:t("./event_data"),selectPoints:t("./select"),styleOnSelect:function(d,l){if(l){var b=l[0].trace;b._glTrace.update(l)}},moduleType:"trace",name:"scattermapbox",basePlotModule:t("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":613,"../scatter/marker_colorbar":944,"../scattergeo/calc":969,"./attributes":991,"./defaults":993,"./event_data":994,"./format_labels":995,"./hover":996,"./plot":998,"./select":999}],998:[function(t,B,H){var d=t("./convert"),l=t("../../plots/mapbox/constants").traceLayerPrefix,b=["fill","line","circle","symbol"];function w(o,a){this.type="scattermapbox",this.subplot=o,this.uid=a,this.sourceIds={fill:"source-"+a+"-fill",line:"source-"+a+"-line",circle:"source-"+a+"-circle",symbol:"source-"+a+"-symbol"},this.layerIds={fill:l+a+"-fill",line:l+a+"-line",circle:l+a+"-circle",symbol:l+a+"-symbol"},this.below=null}var e=w.prototype;e.addSource=function(o,a){this.subplot.map.addSource(this.sourceIds[o],{type:"geojson",data:a.geojson})},e.setSourceData=function(o,a){this.subplot.map.getSource(this.sourceIds[o]).setData(a.geojson)},e.addLayer=function(o,a,r){this.subplot.addLayer({type:o,id:this.layerIds[o],source:this.sourceIds[o],layout:a.layout,paint:a.paint},r)},e.update=function(a){var r=this.subplot,n=r.map,c=d(r.gd,a),s=r.belowLookup["trace-"+this.uid],i,v,u;if(s!==this.below){for(i=b.length-1;i>=0;i--)v=b[i],n.removeLayer(this.layerIds[v]);for(i=0;i<b.length;i++)v=b[i],u=c[v],this.addLayer(v,u,s);this.below=s}for(i=0;i<b.length;i++)v=b[i],u=c[v],r.setOptions(this.layerIds[v],"setLayoutProperty",u.layout),u.layout.visibility==="visible"&&(this.setSourceData(v,u),r.setOptions(this.layerIds[v],"setPaintProperty",u.paint));a[0].trace._glTrace=this},e.dispose=function(){for(var a=this.subplot.map,r=b.length-1;r>=0;r--){var n=b[r];a.removeLayer(this.layerIds[n]),a.removeSource(this.sourceIds[n])}},B.exports=function(a,r){for(var n=r[0].trace,c=new w(a,n.uid),s=d(a.gd,r),i=c.below=a.belowLookup["trace-"+n.uid],v=0;v<b.length;v++){var u=b[v],g=s[u];c.addSource(u,g),c.addLayer(u,g,i)}return r[0].trace._glTrace=c,c}},{"../../plots/mapbox/constants":611,"./convert":992}],999:[function(t,B,H){var d=t("../../lib"),l=t("../scatter/subtypes"),b=t("../../constants/numerical").BADNUM;B.exports=function(e,o){var a=e.cd,r=e.xaxis,n=e.yaxis,c=[],s=a[0].trace,i;if(!l.hasMarkers(s))return[];if(o===!1)for(i=0;i<a.length;i++)a[i].selected=0;else for(i=0;i<a.length;i++){var v=a[i],u=v.lonlat;if(u[0]!==b){var g=[d.modHalf(u[0],360),u[1]],h=[r.c2p(g),n.c2p(g)];o.contains(h,null,i,e)?(c.push({pointNumber:i,lon:u[0],lat:u[1]}),v.selected=1):v.selected=0}}return c}},{"../../constants/numerical":479,"../../lib":503,"../scatter/subtypes":951}],1e3:[function(t,B,H){var d=t("../../plots/template_attributes").hovertemplateAttrs,l=t("../../plots/template_attributes").texttemplateAttrs,b=t("../../lib/extend").extendFlat,w=t("../scatter/attributes"),e=t("../../plots/attributes"),o=w.line;B.exports={mode:w.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:w.text,texttemplate:l({editType:"plot"},{keys:["r","theta","text"]}),hovertext:w.hovertext,line:{color:o.color,width:o.width,dash:o.dash,shape:b({},o.shape,{values:["linear","spline"]}),smoothing:o.smoothing,editType:"calc"},connectgaps:w.connectgaps,marker:w.marker,cliponaxis:b({},w.cliponaxis,{dflt:!1}),textposition:w.textposition,textfont:w.textfont,fill:b({},w.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:w.fillcolor,hoverinfo:b({},e.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:w.hoveron,hovertemplate:d(),selected:w.selected,unselected:w.unselected}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],1001:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../constants/numerical").BADNUM,b=t("../../plots/cartesian/axes"),w=t("../scatter/colorscale_calc"),e=t("../scatter/arrays_to_calcdata"),o=t("../scatter/calc_selection"),a=t("../scatter/calc").calcMarkerSize;B.exports=function(n,c){for(var s=n._fullLayout,i=c.subplot,v=s[i].radialaxis,u=s[i].angularaxis,g=v.makeCalcdata(c,"r"),h=u.makeCalcdata(c,"theta"),y=c._length,p=new Array(y),A=0;A<y;A++){var m=g[A],M=h[A],x=p[A]={};d(m)&&d(M)?(x.r=m,x.theta=M):x.r=l}var T=a(c,y);return c._extremes.x=b.findExtremes(v,g,{ppad:T}),w(n,c),e(p,c),o(p,c),p}},{"../../constants/numerical":479,"../../plots/cartesian/axes":554,"../scatter/arrays_to_calcdata":925,"../scatter/calc":927,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],1002:[function(t,B,H){var d=t("../../lib"),l=t("../scatter/subtypes"),b=t("../scatter/marker_defaults"),w=t("../scatter/line_defaults"),e=t("../scatter/line_shape_defaults"),o=t("../scatter/text_defaults"),a=t("../scatter/fillcolor_defaults"),r=t("../scatter/constants").PTS_LINESONLY,n=t("./attributes");function c(i,v,u,g){function h(A,m){return d.coerce(i,v,n,A,m)}var y=s(i,v,g,h);if(!y){v.visible=!1;return}h("thetaunit"),h("mode",y<r?"lines+markers":"lines"),h("text"),h("hovertext"),v.hoveron!=="fills"&&h("hovertemplate"),l.hasLines(v)&&(w(i,v,u,g,h),e(i,v,h),h("connectgaps")),l.hasMarkers(v)&&b(i,v,u,g,h,{gradient:!0}),l.hasText(v)&&(h("texttemplate"),o(i,v,g,h));var p=[];(l.hasMarkers(v)||l.hasText(v))&&(h("cliponaxis"),h("marker.maxdisplayed"),p.push("points")),h("fill"),v.fill!=="none"&&(a(i,v,u,h),l.hasLines(v)||e(i,v,h)),(v.fill==="tonext"||v.fill==="toself")&&p.push("fills"),h("hoveron",p.join("+")||"points"),d.coerceSelectionMarkerOpacity(v,h)}function s(i,v,u,g){var h=g("r"),y=g("theta"),p;if(h)y?p=Math.min(h.length,y.length):(p=h.length,g("theta0"),g("dtheta"));else{if(!y)return 0;p=v.theta.length,g("r0"),g("dr")}return v._length=p,p}B.exports={handleRThetaDefaults:s,supplyDefaults:c}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/line_shape_defaults":941,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":1e3}],1003:[function(t,B,H){var d=t("../../lib"),l=t("../../plots/cartesian/axes");B.exports=function(w,e,o){var a={},r=o[e.subplot]._subplot,n,c;r?(n=r.radialAxis,c=r.angularAxis):(r=o[e.subplot],n=r.radialaxis,c=r.angularaxis);var s=n.c2l(w.r);a.rLabel=l.tickText(n,s,!0).text;var i=c.thetaunit==="degrees"?d.rad2deg(w.theta):w.theta;return a.thetaLabel=l.tickText(c,i,!0).text,a}},{"../../lib":503,"../../plots/cartesian/axes":554}],1004:[function(t,B,H){var d=t("../scatter/hover");function l(w,e,o,a){var r=d(w,e,o,a);if(!(!r||r[0].index===!1)){var n=r[0];if(n.index===void 0)return r;var c=w.subplot,s=n.cd[n.index],i=n.trace;if(!!c.isPtInside(s))return n.xLabelVal=void 0,n.yLabelVal=void 0,b(s,i,c,n),n.hovertemplate=i.hovertemplate,r}}function b(w,e,o,a){var r=o.radialAxis,n=o.angularAxis;r._hovertitle="r",n._hovertitle="\u03B8";var c={};c[e.subplot]={_subplot:o};var s=e._module.formatLabels(w,e,c);a.rLabel=s.rLabel,a.thetaLabel=s.thetaLabel;var i=w.hi||e.hoverinfo,v=[];function u(h,y){v.push(h._hovertitle+": "+y)}if(!e.hovertemplate){var g=i.split("+");g.indexOf("all")!==-1&&(g=["r","theta","text"]),g.indexOf("r")!==-1&&u(r,a.rLabel),g.indexOf("theta")!==-1&&u(n,a.thetaLabel),g.indexOf("text")!==-1&&a.text&&(v.push(a.text),delete a.text),a.extraText=v.join("<br>")}}B.exports={hoverPoints:l,makeHoverPointText:b}},{"../scatter/hover":937}],1005:[function(t,B,H){B.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:t("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:t("./attributes"),supplyDefaults:t("./defaults").supplyDefaults,colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),plot:t("./plot"),style:t("../scatter/style").style,styleOnSelect:t("../scatter/style").styleOnSelect,hoverPoints:t("./hover").hoverPoints,selectPoints:t("../scatter/select"),meta:{}}},{"../../plots/polar":622,"../scatter/marker_colorbar":944,"../scatter/select":948,"../scatter/style":950,"./attributes":1e3,"./calc":1001,"./defaults":1002,"./format_labels":1003,"./hover":1004,"./plot":1006}],1006:[function(t,B,H){var d=t("../scatter/plot"),l=t("../../constants/numerical").BADNUM;B.exports=function(w,e,o){for(var a=e.layers.frontplot.select("g.scatterlayer"),r={xaxis:e.xaxis,yaxis:e.yaxis,plot:e.framework,layerClipId:e._hasClipOnAxisFalse?e.clipIds.forTraces:null},n=e.radialAxis,c=e.angularAxis,s=0;s<o.length;s++)for(var i=o[s],v=0;v<i.length;v++){var u=i[v],g=u.r;if(g===l)u.x=u.y=l;else{var h=n.c2g(g),y=c.c2g(u.theta);u.x=h*Math.cos(y),u.y=h*Math.sin(y)}}d(w,r,o,a)}},{"../../constants/numerical":479,"../scatter/plot":947}],1007:[function(t,B,H){var d=t("../scatterpolar/attributes"),l=t("../scattergl/attributes"),b=t("../../plots/template_attributes").texttemplateAttrs;B.exports={mode:d.mode,r:d.r,theta:d.theta,r0:d.r0,dr:d.dr,theta0:d.theta0,dtheta:d.dtheta,thetaunit:d.thetaunit,text:d.text,texttemplate:b({editType:"plot"},{keys:["r","theta","text"]}),hovertext:d.hovertext,hovertemplate:d.hovertemplate,line:l.line,connectgaps:l.connectgaps,marker:l.marker,fill:l.fill,fillcolor:l.fillcolor,textposition:l.textposition,textfont:l.textfont,hoverinfo:d.hoverinfo,selected:d.selected,unselected:d.unselected}},{"../../plots/template_attributes":633,"../scattergl/attributes":978,"../scatterpolar/attributes":1e3}],1008:[function(t,B,H){var d=t("../scatter/colorscale_calc"),l=t("../scatter/calc").calcMarkerSize,b=t("../scattergl/convert"),w=t("../../plots/cartesian/axes"),e=t("../scattergl/constants").TOO_MANY_POINTS;B.exports=function(a,r){var n=a._fullLayout,c=r.subplot,s=n[c].radialaxis,i=n[c].angularaxis,v=r._r=s.makeCalcdata(r,"r"),u=r._theta=i.makeCalcdata(r,"theta"),g=r._length,h={};g<v.length&&(v=v.slice(0,g)),g<u.length&&(u=u.slice(0,g)),h.r=v,h.theta=u,d(a,r);var y=h.opts=b.style(a,r),p;return g<e?p=l(r,g):y.marker&&(p=2*(y.marker.sizeAvg||Math.max(y.marker.size,3))),r._extremes.x=w.findExtremes(s,v,{ppad:p}),[{x:!1,y:!1,t:h,trace:r}]}},{"../../plots/cartesian/axes":554,"../scatter/calc":927,"../scatter/colorscale_calc":929,"../scattergl/constants":980,"../scattergl/convert":981}],1009:[function(t,B,H){var d=t("../../lib"),l=t("../scatter/subtypes"),b=t("../scatterpolar/defaults").handleRThetaDefaults,w=t("../scatter/marker_defaults"),e=t("../scatter/line_defaults"),o=t("../scatter/text_defaults"),a=t("../scatter/fillcolor_defaults"),r=t("../scatter/constants").PTS_LINESONLY,n=t("./attributes");B.exports=function(s,i,v,u){function g(y,p){return d.coerce(s,i,n,y,p)}var h=b(s,i,u,g);if(!h){i.visible=!1;return}g("thetaunit"),g("mode",h<r?"lines+markers":"lines"),g("text"),g("hovertext"),i.hoveron!=="fills"&&g("hovertemplate"),l.hasLines(i)&&(e(s,i,v,u,g),g("connectgaps")),l.hasMarkers(i)&&w(s,i,v,u,g),l.hasText(i)&&(g("texttemplate"),o(s,i,u,g)),g("fill"),i.fill!=="none"&&a(s,i,v,g),d.coerceSelectionMarkerOpacity(i,g)}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"../scatterpolar/defaults":1002,"./attributes":1007}],1010:[function(t,B,H){var d=t("../scatterpolar/format_labels");B.exports=function(b,w,e){var o=b.i;return"r"in b||(b.r=w._r[o]),"theta"in b||(b.theta=w._theta[o]),d(b,w,e)}},{"../scatterpolar/format_labels":1003}],1011:[function(t,B,H){var d=t("../scattergl/hover"),l=t("../scatterpolar/hover").makeHoverPointText;function b(w,e,o,a){var r=w.cd,n=r[0].t,c=n.r,s=n.theta,i=d.hoverPoints(w,e,o,a);if(!(!i||i[0].index===!1)){var v=i[0];if(v.index===void 0)return i;var u=w.subplot,g=v.cd[v.index],h=v.trace;if(g.r=c[v.index],g.theta=s[v.index],!!u.isPtInside(g))return v.xLabelVal=void 0,v.yLabelVal=void 0,l(g,h,u,v),i}}B.exports={hoverPoints:b}},{"../scattergl/hover":986,"../scatterpolar/hover":1004}],1012:[function(t,B,H){B.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:t("../../plots/polar"),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),plot:t("./plot"),hoverPoints:t("./hover").hoverPoints,selectPoints:t("../scattergl/select"),meta:{}}},{"../../plots/polar":622,"../scatter/marker_colorbar":944,"../scattergl/select":990,"./attributes":1007,"./calc":1008,"./defaults":1009,"./format_labels":1010,"./hover":1011,"./plot":1013}],1013:[function(t,B,H){var d=t("@plotly/point-cluster"),l=t("fast-isnumeric"),b=t("../scattergl/plot"),w=t("../scattergl/scene_update"),e=t("../scattergl/convert"),o=t("../../lib"),a=t("../scattergl/constants").TOO_MANY_POINTS;B.exports=function(n,c,s){if(!!s.length){var i=c.radialAxis,v=c.angularAxis,u=w(n,c);return s.forEach(function(g){if(!(!g||!g[0]||!g[0].trace)){var h=g[0],y=h.trace,p=h.t,A=y._length,m=p.r,M=p.theta,x=p.opts,T,_=m.slice(),f=M.slice();for(T=0;T<m.length;T++)c.isPtInside({r:m[T],theta:M[T]})||(_[T]=NaN,f[T]=NaN);var L=new Array(A*2),S=Array(A),k=Array(A);for(T=0;T<A;T++){var P=_[T],z,I;if(l(P)){var R=i.c2g(P),D=v.c2g(f[T],y.thetaunit);z=R*Math.cos(D),I=R*Math.sin(D)}else z=I=NaN;S[T]=L[T*2]=z,k[T]=L[T*2+1]=I}p.tree=d(L),x.marker&&A>=a&&(x.marker.cluster=p.tree),x.marker&&(x.markerSel.positions=x.markerUnsel.positions=x.marker.positions=L),x.line&&L.length>1&&o.extendFlat(x.line,e.linePositions(n,y,L)),x.text&&(o.extendFlat(x.text,{positions:L},e.textPosition(n,y,x.text,x.marker)),o.extendFlat(x.textSel,{positions:L},e.textPosition(n,y,x.text,x.markerSel)),o.extendFlat(x.textUnsel,{positions:L},e.textPosition(n,y,x.text,x.markerUnsel))),x.fill&&!u.fill2d&&(u.fill2d=!0),x.marker&&!u.scatter2d&&(u.scatter2d=!0),x.line&&!u.line2d&&(u.line2d=!0),x.text&&!u.glText&&(u.glText=!0),u.lineOptions.push(x.line),u.fillOptions.push(x.fill),u.markerOptions.push(x.marker),u.markerSelectedOptions.push(x.markerSel),u.markerUnselectedOptions.push(x.markerUnsel),u.textOptions.push(x.text),u.textSelectedOptions.push(x.textSel),u.textUnselectedOptions.push(x.textUnsel),u.selectBatch.push([]),u.unselectBatch.push([]),p.x=S,p.y=k,p.rawx=S,p.rawy=k,p.r=m,p.theta=M,p.positions=L,p._scene=u,p.index=u.count,u.count++}}),b(n,c,s)}}},{"../../lib":503,"../scattergl/constants":980,"../scattergl/convert":981,"../scattergl/plot":988,"../scattergl/scene_update":989,"@plotly/point-cluster":59,"fast-isnumeric":190}],1014:[function(t,B,H){var d=t("../../plots/template_attributes").hovertemplateAttrs,l=t("../../plots/template_attributes").texttemplateAttrs,b=t("../../lib/extend").extendFlat,w=t("../scatter/attributes"),e=t("../../plots/attributes"),o=w.line;B.exports={mode:w.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:w.text,texttemplate:l({editType:"plot"},{keys:["real","imag","text"]}),hovertext:w.hovertext,line:{color:o.color,width:o.width,dash:o.dash,shape:b({},o.shape,{values:["linear","spline"]}),smoothing:o.smoothing,editType:"calc"},connectgaps:w.connectgaps,marker:w.marker,cliponaxis:b({},w.cliponaxis,{dflt:!1}),textposition:w.textposition,textfont:w.textfont,fill:b({},w.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:w.fillcolor,hoverinfo:b({},e.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:w.hoveron,hovertemplate:d(),selected:w.selected,unselected:w.unselected}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],1015:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../../constants/numerical").BADNUM,b=t("../scatter/colorscale_calc"),w=t("../scatter/arrays_to_calcdata"),e=t("../scatter/calc_selection"),o=t("../scatter/calc").calcMarkerSize;B.exports=function(r,n){for(var c=r._fullLayout,s=n.subplot,i=c[s].realaxis,v=c[s].imaginaryaxis,u=i.makeCalcdata(n,"real"),g=v.makeCalcdata(n,"imag"),h=n._length,y=new Array(h),p=0;p<h;p++){var A=u[p],m=g[p],M=y[p]={};d(A)&&d(m)?(M.real=A,M.imag=m):M.real=l}return o(n,h),b(r,n),w(y,n),e(y,n),y}},{"../../constants/numerical":479,"../scatter/arrays_to_calcdata":925,"../scatter/calc":927,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],1016:[function(t,B,H){var d=t("../../lib"),l=t("../scatter/subtypes"),b=t("../scatter/marker_defaults"),w=t("../scatter/line_defaults"),e=t("../scatter/line_shape_defaults"),o=t("../scatter/text_defaults"),a=t("../scatter/fillcolor_defaults"),r=t("../scatter/constants").PTS_LINESONLY,n=t("./attributes");B.exports=function(i,v,u,g){function h(A,m){return d.coerce(i,v,n,A,m)}var y=c(i,v,g,h);if(!y){v.visible=!1;return}h("mode",y<r?"lines+markers":"lines"),h("text"),h("hovertext"),v.hoveron!=="fills"&&h("hovertemplate"),l.hasLines(v)&&(w(i,v,u,g,h),e(i,v,h),h("connectgaps")),l.hasMarkers(v)&&b(i,v,u,g,h,{gradient:!0}),l.hasText(v)&&(h("texttemplate"),o(i,v,g,h));var p=[];(l.hasMarkers(v)||l.hasText(v))&&(h("cliponaxis"),h("marker.maxdisplayed"),p.push("points")),h("fill"),v.fill!=="none"&&(a(i,v,u,h),l.hasLines(v)||e(i,v,h)),(v.fill==="tonext"||v.fill==="toself")&&p.push("fills"),h("hoveron",p.join("+")||"points"),d.coerceSelectionMarkerOpacity(v,h)};function c(s,i,v,u){var g=u("real"),h=u("imag"),y;return g&&h&&(y=Math.min(g.length,h.length)),i._length=y,y}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/line_shape_defaults":941,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":1014}],1017:[function(t,B,H){var d=t("../../plots/cartesian/axes");B.exports=function(b,w,e){var o={},a=e[w.subplot]._subplot;return o.realLabel=d.tickText(a.radialAxis,b.real,!0).text,o.imagLabel=d.tickText(a.angularAxis,b.imag,!0).text,o}},{"../../plots/cartesian/axes":554}],1018:[function(t,B,H){var d=t("../scatter/hover");function l(w,e,o,a){var r=d(w,e,o,a);if(!(!r||r[0].index===!1)){var n=r[0];if(n.index===void 0)return r;var c=w.subplot,s=n.cd[n.index],i=n.trace;if(!!c.isPtInside(s))return n.xLabelVal=void 0,n.yLabelVal=void 0,b(s,i,c,n),n.hovertemplate=i.hovertemplate,r}}function b(w,e,o,a){var r=o.radialAxis,n=o.angularAxis;r._hovertitle="real",n._hovertitle="imag";var c={};c[e.subplot]={_subplot:o};var s=e._module.formatLabels(w,e,c);a.realLabel=s.realLabel,a.imagLabel=s.imagLabel;var i=w.hi||e.hoverinfo,v=[];function u(h,y){v.push(h._hovertitle+": "+y)}if(!e.hovertemplate){var g=i.split("+");g.indexOf("all")!==-1&&(g=["real","imag","text"]),g.indexOf("real")!==-1&&u(r,a.realLabel),g.indexOf("imag")!==-1&&u(n,a.imagLabel),g.indexOf("text")!==-1&&a.text&&(v.push(a.text),delete a.text),a.extraText=v.join("<br>")}}B.exports={hoverPoints:l,makeHoverPointText:b}},{"../scatter/hover":937}],1019:[function(t,B,H){B.exports={moduleType:"trace",name:"scattersmith",basePlotModule:t("../../plots/smith"),categories:["smith","symbols","showLegend","scatter-like"],attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),plot:t("./plot"),style:t("../scatter/style").style,styleOnSelect:t("../scatter/style").styleOnSelect,hoverPoints:t("./hover").hoverPoints,selectPoints:t("../scatter/select"),meta:{}}},{"../../plots/smith":629,"../scatter/marker_colorbar":944,"../scatter/select":948,"../scatter/style":950,"./attributes":1014,"./calc":1015,"./defaults":1016,"./format_labels":1017,"./hover":1018,"./plot":1020}],1020:[function(t,B,H){var d=t("../scatter/plot"),l=t("../../constants/numerical").BADNUM,b=t("../../plots/smith/helpers"),w=b.smith;B.exports=function(o,a,r){for(var n=a.layers.frontplot.select("g.scatterlayer"),c={xaxis:a.xaxis,yaxis:a.yaxis,plot:a.framework,layerClipId:a._hasClipOnAxisFalse?a.clipIds.forTraces:null},s=0;s<r.length;s++)for(var i=r[s],v=0;v<i.length;v++){var u=i[v],g=u.real;if(g===l)u.x=u.y=l;else{var h=w([g,u.imag]);u.x=h[0],u.y=h[1]}}d(o,c,r,n)}},{"../../constants/numerical":479,"../../plots/smith/helpers":628,"../scatter/plot":947}],1021:[function(t,B,H){var d=t("../../plots/template_attributes").hovertemplateAttrs,l=t("../../plots/template_attributes").texttemplateAttrs,b=t("../scatter/attributes"),w=t("../../plots/attributes"),e=t("../../components/colorscale/attributes"),o=t("../../components/drawing/attributes").dash,a=t("../../lib/extend").extendFlat,r=b.marker,n=b.line,c=r.line;B.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:a({},b.mode,{dflt:"markers"}),text:a({},b.text,{}),texttemplate:l({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:a({},b.hovertext,{}),line:{color:n.color,width:n.width,dash:o,shape:a({},n.shape,{values:["linear","spline"]}),smoothing:n.smoothing,editType:"calc"},connectgaps:b.connectgaps,cliponaxis:b.cliponaxis,fill:a({},b.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:b.fillcolor,marker:a({symbol:r.symbol,opacity:r.opacity,maxdisplayed:r.maxdisplayed,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,line:a({width:c.width,editType:"calc"},e("marker.line")),gradient:r.gradient,editType:"calc"},e("marker")),textfont:b.textfont,textposition:b.textposition,selected:b.selected,unselected:b.unselected,hoverinfo:a({},w.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:b.hoveron,hovertemplate:d()}},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],1022:[function(t,B,H){var d=t("fast-isnumeric"),l=t("../scatter/colorscale_calc"),b=t("../scatter/arrays_to_calcdata"),w=t("../scatter/calc_selection"),e=t("../scatter/calc").calcMarkerSize,o=["a","b","c"],a={a:["b","c"],b:["a","c"],c:["a","b"]};B.exports=function(n,c){var s=n._fullLayout[c.subplot],i=s.sum,v=c.sum||i,u={a:c.a,b:c.b,c:c.c},g,h,y,p,A,m;for(g=0;g<o.length;g++)if(y=o[g],!u[y]){for(A=u[a[y][0]],m=u[a[y][1]],p=new Array(A.length),h=0;h<A.length;h++)p[h]=v-A[h]-m[h];u[y]=p}var M=c._length,x=new Array(M),T,_,f,L,S,k;for(g=0;g<M;g++)T=u.a[g],_=u.b[g],f=u.c[g],d(T)&&d(_)&&d(f)?(T=+T,_=+_,f=+f,L=i/(T+_+f),L!==1&&(T*=L,_*=L,f*=L),k=T,S=f-_,x[g]={x:S,y:k,a:T,b:_,c:f}):x[g]={x:!1,y:!1};return e(c,M),l(n,c),b(x,c),w(x,c),x}},{"../scatter/arrays_to_calcdata":925,"../scatter/calc":927,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],1023:[function(t,B,H){var d=t("../../lib"),l=t("../scatter/constants"),b=t("../scatter/subtypes"),w=t("../scatter/marker_defaults"),e=t("../scatter/line_defaults"),o=t("../scatter/line_shape_defaults"),a=t("../scatter/text_defaults"),r=t("../scatter/fillcolor_defaults"),n=t("./attributes");B.exports=function(s,i,v,u){function g(x,T){return d.coerce(s,i,n,x,T)}var h=g("a"),y=g("b"),p=g("c"),A;if(h?(A=h.length,y?(A=Math.min(A,y.length),p&&(A=Math.min(A,p.length))):p?A=Math.min(A,p.length):A=0):y&&p&&(A=Math.min(y.length,p.length)),!A){i.visible=!1;return}i._length=A,g("sum"),g("text"),g("hovertext"),i.hoveron!=="fills"&&g("hovertemplate");var m=A<l.PTS_LINESONLY?"lines+markers":"lines";g("mode",m),b.hasLines(i)&&(e(s,i,v,u,g),o(s,i,g),g("connectgaps")),b.hasMarkers(i)&&w(s,i,v,u,g,{gradient:!0}),b.hasText(i)&&(g("texttemplate"),a(s,i,u,g));var M=[];(b.hasMarkers(i)||b.hasText(i))&&(g("cliponaxis"),g("marker.maxdisplayed"),M.push("points")),g("fill"),i.fill!=="none"&&(r(s,i,v,g),b.hasLines(i)||o(s,i,g)),(i.fill==="tonext"||i.fill==="toself")&&M.push("fills"),g("hoveron",M.join("+")||"points"),d.coerceSelectionMarkerOpacity(i,g)}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/line_shape_defaults":941,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":1021}],1024:[function(t,B,H){B.exports=function(l,b,w,e,o){if(b.xa&&(l.xaxis=b.xa),b.ya&&(l.yaxis=b.ya),e[o]){var a=e[o];l.a=a.a,l.b=a.b,l.c=a.c}else l.a=b.a,l.b=b.b,l.c=b.c;return l}},{}],1025:[function(t,B,H){var d=t("../../plots/cartesian/axes");B.exports=function(b,w,e){var o={},a=e[w.subplot]._subplot;return o.aLabel=d.tickText(a.aaxis,b.a,!0).text,o.bLabel=d.tickText(a.baxis,b.b,!0).text,o.cLabel=d.tickText(a.caxis,b.c,!0).text,o}},{"../../plots/cartesian/axes":554}],1026:[function(t,B,H){var d=t("../scatter/hover");B.exports=function(b,w,e,o){var a=d(b,w,e,o);if(!a||a[0].index===!1)return;var r=a[0];if(r.index===void 0){var n=1-r.y0/b.ya._length,c=b.xa._length,s=c*n/2,i=c-s;return r.x0=Math.max(Math.min(r.x0,i),s),r.x1=Math.max(Math.min(r.x1,i),s),a}var v=r.cd[r.index],u=r.trace,g=r.subplot;r.a=v.a,r.b=v.b,r.c=v.c,r.xLabelVal=void 0,r.yLabelVal=void 0;var h={};h[u.subplot]={_subplot:g};var y=u._module.formatLabels(v,u,h);r.aLabel=y.aLabel,r.bLabel=y.bLabel,r.cLabel=y.cLabel;var p=v.hi||u.hoverinfo,A=[];function m(x,T){A.push(x._hovertitle+": "+T)}if(!u.hovertemplate){var M=p.split("+");M.indexOf("all")!==-1&&(M=["a","b","c"]),M.indexOf("a")!==-1&&m(g.aaxis,r.aLabel),M.indexOf("b")!==-1&&m(g.baxis,r.bLabel),M.indexOf("c")!==-1&&m(g.caxis,r.cLabel)}return r.extraText=A.join("<br>"),r.hovertemplate=u.hovertemplate,a}},{"../scatter/hover":937}],1027:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),plot:t("./plot"),style:t("../scatter/style").style,styleOnSelect:t("../scatter/style").styleOnSelect,hoverPoints:t("./hover"),selectPoints:t("../scatter/select"),eventData:t("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:t("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":634,"../scatter/marker_colorbar":944,"../scatter/select":948,"../scatter/style":950,"./attributes":1021,"./calc":1022,"./defaults":1023,"./event_data":1024,"./format_labels":1025,"./hover":1026,"./plot":1028}],1028:[function(t,B,H){var d=t("../scatter/plot");B.exports=function(b,w,e){var o=w.plotContainer;o.select(".scatterlayer").selectAll("*").remove();var a={xaxis:w.xaxis,yaxis:w.yaxis,plot:o,layerClipId:w._hasClipOnAxisFalse?w.clipIdRelative:null},r=w.layers.frontplot.select("g.scatterlayer");d(b,a,e,r)}},{"../scatter/plot":947}],1029:[function(t,B,H){var d=t("../scatter/attributes"),l=t("../../components/colorscale/attributes"),b=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,w=t("../../plots/template_attributes").hovertemplateAttrs,e=t("../scattergl/attributes"),o=t("../../plots/cartesian/constants").idRegex,a=t("../../plot_api/plot_template").templatedArray,r=t("../../lib/extend").extendFlat,n=d.marker,c=n.line,s=r(l("marker.line",{editTypeOverride:"calc"}),{width:r({},c.width,{editType:"calc"}),editType:"calc"}),i=r(l("marker"),{symbol:n.symbol,size:r({},n.size,{editType:"markerSize"}),sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,opacity:n.opacity,colorbar:n.colorbar,line:s,editType:"calc"});i.color.editType=i.cmin.editType=i.cmax.editType="style";function v(u){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:o[u],editType:"plot"}}}B.exports={dimensions:a("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:r({},e.text,{}),hovertext:r({},e.hovertext,{}),hovertemplate:w(),xhoverformat:b("x"),yhoverformat:b("y"),marker:i,xaxes:v("x"),yaxes:v("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:e.selected.marker,editType:"calc"},unselected:{marker:e.unselected.marker,editType:"calc"},opacity:e.opacity}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/constants":561,"../../plots/template_attributes":633,"../scatter/attributes":926,"../scattergl/attributes":978}],1030:[function(t,B,H){var d=t("regl-line2d"),l=t("../../registry"),b=t("../../lib/prepare_regl"),w=t("../../plots/get_data").getModuleCalcData,e=t("../../plots/cartesian"),o=t("../../plots/cartesian/axis_ids").getFromId,a=t("../../plots/cartesian/axes").shouldShowZeroLine,r="splom";function n(g){var h=g._fullLayout,y=l.getModule(r),p=w(g.calcdata,y)[0],A=b(g,["ANGLE_instanced_arrays","OES_element_index_uint"]);!A||(h._hasOnlyLargeSploms&&i(g),y.plot(g,{},p))}function c(g){var h=g.calcdata,y=g._fullLayout;y._hasOnlyLargeSploms&&i(g);for(var p=0;p<h.length;p++){var A=h[p][0],m=A.trace,M=y._splomScenes[m.uid];m.type==="splom"&&M&&M.matrix&&s(g,m,M)}}function s(g,h,y){for(var p=y.matrixOptions.data.length,A=h._visibleDims,m=y.viewOpts.ranges=new Array(p),M=0;M<A.length;M++){var x=A[M],T=m[M]=new Array(4),_=o(g,h._diag[x][0]);_&&(T[0]=_.r2l(_.range[0]),T[2]=_.r2l(_.range[1]));var f=o(g,h._diag[x][1]);f&&(T[1]=f.r2l(f.range[0]),T[3]=f.r2l(f.range[1]))}y.selectBatch.length||y.unselectBatch.length?y.matrix.update({ranges:m},{ranges:m}):y.matrix.update({ranges:m})}function i(g){var h=g._fullLayout,y=h._glcanvas.data()[0].regl,p=h._splomGrid;p||(p=h._splomGrid=d(y)),p.update(v(g))}function v(g){var h=g._context.plotGlPixelRatio,y=g._fullLayout,p=y._size,A=[0,0,y.width*h,y.height*h],m={},M;function x(W,q,J,X,Z,se){J*=h,X*=h,Z*=h,se*=h;var le=q[W+"color"],oe=q[W+"width"],U=String(le+oe);U in m?m[U].data.push(NaN,NaN,J,X,Z,se):m[U]={data:[J,X,Z,se],join:"rect",thickness:oe*h,color:le,viewport:A,range:A,overlay:!1}}for(M in y._splomSubplots){var T=y._plots[M],_=T.xaxis,f=T.yaxis,L=_._gridVals,S=f._gridVals,k=_._offset,P=_._length,z=f._length,I=p.b+f.domain[0]*p.h,R=-f._m,D=-R*f.r2l(f.range[0],f.calendar),O,F;if(_.showgrid)for(M=0;M<L.length;M++)O=k+_.l2p(L[M].x),x("grid",_,O,I,O,I+z);if(f.showgrid)for(M=0;M<S.length;M++)F=I+D+R*S[M].x,x("grid",f,k,F,k+P,F);a(g,_,f)&&(O=k+_.l2p(0),x("zeroline",_,O,I,O,I+z)),a(g,f,_)&&(F=I+D+0,x("zeroline",f,k,F,k+P,F))}var G=[];for(M in m)G.push(m[M]);return G}function u(g,h,y,p){var A={},m;if(p._splomScenes){for(m=0;m<g.length;m++){var M=g[m];M.type==="splom"&&(A[M.uid]=1)}for(m=0;m<y.length;m++){var x=y[m];if(!A[x.uid]){var T=p._splomScenes[x.uid];T&&T.destroy&&T.destroy(),p._splomScenes[x.uid]=null,delete p._splomScenes[x.uid]}}}Object.keys(p._splomScenes||{}).length===0&&delete p._splomScenes,p._splomGrid&&!h._hasOnlyLargeSploms&&p._hasOnlyLargeSploms&&(p._splomGrid.destroy(),p._splomGrid=null,delete p._splomGrid),e.clean(g,h,y,p)}B.exports={name:r,attr:e.attr,attrRegex:e.attrRegex,layoutAttributes:e.layoutAttributes,supplyLayoutDefaults:e.supplyLayoutDefaults,drawFramework:e.drawFramework,plot:n,drag:c,updateGrid:i,clean:u,updateFx:e.updateFx,toSVG:e.toSVG}},{"../../lib/prepare_regl":516,"../../plots/cartesian":568,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_ids":558,"../../plots/get_data":593,"../../registry":638,"regl-line2d":280}],1031:[function(t,B,H){var d=t("../../lib"),l=t("../../plots/cartesian/axis_ids"),b=t("../scatter/calc").calcMarkerSize,w=t("../scatter/calc").calcAxisExpansion,e=t("../scatter/colorscale_calc"),o=t("../scattergl/convert").markerSelection,a=t("../scattergl/convert").markerStyle,r=t("./scene_update"),n=t("../../constants/numerical").BADNUM,c=t("../scattergl/constants").TOO_MANY_POINTS;B.exports=function(i,v){var u=v.dimensions,g=v._length,h={},y=h.cdata=[],p=h.data=[],A=v._visibleDims=[],m,M,x,T,_;function f(z,I){for(var R=z.makeCalcdata({v:I.values,vcalendar:v.calendar},"v"),D=0;D<R.length;D++)R[D]=R[D]===n?NaN:R[D];y.push(R),p.push(z.type==="log"?d.simpleMap(R,z.c2l):R)}for(m=0;m<u.length;m++)if(x=u[m],x.visible){if(T=l.getFromId(i,v._diag[m][0]),_=l.getFromId(i,v._diag[m][1]),T&&_&&T.type!==_.type){d.log("Skipping splom dimension "+m+" with conflicting axis types");continue}T?(f(T,x),_&&_.type==="category"&&(_._categories=T._categories.slice())):f(_,x),A.push(m)}e(i,v),d.extendFlat(h,a(v));var L=y.length,S=L*g>c,k;for(S?k=h.sizeAvg||Math.max(h.size,3):k=b(v,g),M=0;M<A.length;M++)m=A[M],x=u[m],T=l.getFromId(i,v._diag[m][0])||{},_=l.getFromId(i,v._diag[m][1])||{},w(i,v,T,_,y[M],y[M],k);var P=r(i,v);return P.matrix||(P.matrix=!0),P.matrixOptions=h,P.selectedOptions=o(v,v.selected),P.unselectedOptions=o(v,v.unselected),[{x:!1,y:!1,t:{},trace:v}]}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axis_ids":558,"../scatter/calc":927,"../scatter/colorscale_calc":929,"../scattergl/constants":980,"../scattergl/convert":981,"./scene_update":1038}],1032:[function(t,B,H){var d=t("../../lib"),l=t("../../plots/array_container_defaults"),b=t("./attributes"),w=t("../scatter/subtypes"),e=t("../scatter/marker_defaults"),o=t("../parcoords/merge_length"),a=t("../scattergl/helpers").isOpenSymbol;B.exports=function(s,i,v,u){function g(T,_){return d.coerce(s,i,b,T,_)}var h=l(s,i,{name:"dimensions",handleItemDefaults:r}),y=g("diagonal.visible"),p=g("showupperhalf"),A=g("showlowerhalf"),m=o(i,h,"values");if(!m||!y&&!p&&!A){i.visible=!1;return}g("text"),g("hovertext"),g("hovertemplate"),g("xhoverformat"),g("yhoverformat"),e(s,i,v,u,g);var M=a(i.marker.symbol),x=w.isBubble(i);g("marker.line.width",M||x?1:0),n(s,i,u,g),d.coerceSelectionMarkerOpacity(i,g)};function r(c,s){function i(u,g){return d.coerce(c,s,b.dimensions,u,g)}i("label");var v=i("values");v&&v.length?i("visible"):s.visible=!1,i("axis.type"),i("axis.matches")}function n(c,s,i,v){var u=s.dimensions,g=u.length,h=s.showupperhalf,y=s.showlowerhalf,p=s.diagonal.visible,A,m,M=new Array(g),x=new Array(g);for(A=0;A<g;A++){var T=A?A+1:"";M[A]="x"+T,x[A]="y"+T}var _=v("xaxes",M),f=v("yaxes",x),L=s._diag=new Array(g);s._xaxes={},s._yaxes={};var S=[],k=[];function P(q,J,X,Z){if(!!q){var se=q.charAt(0),le=i._splomAxes[se];if(s["_"+se+"axes"][q]=1,Z.push(q),!(q in le)){var oe=le[q]={};X&&(oe.label=X.label||"",X.visible&&X.axis&&(X.axis.type&&(oe.type=X.axis.type),X.axis.matches&&(oe.matches=J)))}}}var z=!p&&!y,I=!p&&!h;for(s._axesDim={},A=0;A<g;A++){var R=u[A],D=A===0,O=A===g-1,F=D&&z||O&&I?void 0:_[A],G=D&&I||O&&z?void 0:f[A];P(F,G,R,S),P(G,F,R,k),L[A]=[F,G],s._axesDim[F]=A,s._axesDim[G]=A}for(A=0;A<S.length;A++)for(m=0;m<k.length;m++){var W=S[A]+k[m];(A>m&&h||A<m&&y||A===m&&(p||!y||!h))&&(i._splomSubplots[W]=1)}(!y||!p&&h&&y)&&(i._splomGridDflt.xside="bottom",i._splomGridDflt.yside="left")}},{"../../lib":503,"../../plots/array_container_defaults":549,"../parcoords/merge_length":897,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scattergl/helpers":985,"./attributes":1029}],1033:[function(t,B,H){var d=t("../../lib"),l=t("../scatter/colorscale_calc"),b=t("../scattergl/convert").markerStyle;B.exports=function(e,o){var a=o.trace,r=e._fullLayout._splomScenes[a.uid];if(r){l(e,a),d.extendFlat(r.matrixOptions,b(a));var n=d.extendFlat({},r.matrixOptions,r.viewOpts);r.matrix.update(n,null)}}},{"../../lib":503,"../scatter/colorscale_calc":929,"../scattergl/convert":981}],1034:[function(t,B,H){H.getDimIndex=function(l,b){for(var w=b._id,e=w.charAt(0),o={x:0,y:1}[e],a=l._visibleDims,r=0;r<a.length;r++){var n=a[r];if(l._diag[n][o]===w)return r}return!1}},{}],1035:[function(t,B,H){var d=t("./helpers"),l=t("../scattergl/hover").calcHover;function b(w,e,o){var a=w.cd,r=a[0].trace,n=w.scene,c=n.matrixOptions.cdata,s=w.xa,i=w.ya,v=s.c2p(e),u=i.c2p(o),g=w.distance,h=d.getDimIndex(r,s),y=d.getDimIndex(r,i);if(h===!1||y===!1)return[w];for(var p=c[h],A=c[y],m,M,x=g,T=0;T<p.length;T++){var _=p[T],f=A[T],L=s.c2p(_)-v,S=i.c2p(f)-u,k=Math.sqrt(L*L+S*S);k<x&&(x=M=k,m=T)}return w.index=m,w.distance=x,w.dxy=M,m===void 0?[w]:[l(w,p,A,r)]}B.exports={hoverPoints:b}},{"../scattergl/hover":986,"./helpers":1034}],1036:[function(t,B,H){var d=t("../../registry"),l=t("../../components/grid");B.exports={moduleType:"trace",name:"splom",basePlotModule:t("./base_plot"),categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),calc:t("./calc"),plot:t("./plot"),hoverPoints:t("./hover").hoverPoints,selectPoints:t("./select"),editStyle:t("./edit_style"),meta:{}},d.register(l)},{"../../components/grid":410,"../../registry":638,"../scatter/marker_colorbar":944,"./attributes":1029,"./base_plot":1030,"./calc":1031,"./defaults":1032,"./edit_style":1033,"./hover":1035,"./plot":1037,"./select":1039}],1037:[function(t,B,H){var d=t("regl-splom"),l=t("../../lib"),b=t("../../plots/cartesian/axis_ids"),w=t("../../components/dragelement/helpers").selectMode;B.exports=function(a,r,n){if(!!n.length)for(var c=0;c<n.length;c++)e(a,n[c][0])};function e(o,a){var r=o._fullLayout,n=r._size,c=a.trace,s=a.t,i=r._splomScenes[c.uid],v=i.matrixOptions,u=v.cdata,g=r._glcanvas.data()[0].regl,h=r.dragmode,y,p,A,m,M;if(u.length!==0){v.lower=c.showupperhalf,v.upper=c.showlowerhalf,v.diagonal=c.diagonal.visible;var x=c._visibleDims,T=u.length,_=i.viewOpts={};for(_.ranges=new Array(T),_.domains=new Array(T),M=0;M<x.length;M++){A=x[M];var f=_.ranges[M]=new Array(4),L=_.domains[M]=new Array(4);y=b.getFromId(o,c._diag[A][0]),y&&(f[0]=y._rl[0],f[2]=y._rl[1],L[0]=y.domain[0],L[2]=y.domain[1]),p=b.getFromId(o,c._diag[A][1]),p&&(f[1]=p._rl[0],f[3]=p._rl[1],L[1]=p.domain[0],L[3]=p.domain[1])}var S=o._context.plotGlPixelRatio,k=n.l*S,P=n.b*S,z=n.w*S,I=n.h*S;_.viewport=[k,P,z+k,I+P],i.matrix===!0&&(i.matrix=d(g));var R=r.clickmode.indexOf("select")>-1,D=w(h)||!!c.selectedpoints||R,O=!0;if(D){var F=c._length;if(c.selectedpoints){i.selectBatch=c.selectedpoints;var G=c.selectedpoints,W={};for(A=0;A<G.length;A++)W[G[A]]=!0;var q=[];for(A=0;A<F;A++)W[A]||q.push(A);i.unselectBatch=q}var J=s.xpx=new Array(T),X=s.ypx=new Array(T);for(M=0;M<x.length;M++){if(A=x[M],y=b.getFromId(o,c._diag[A][0]),y)for(J[M]=new Array(F),m=0;m<F;m++)J[M][m]=y.c2p(u[M][m]);if(p=b.getFromId(o,c._diag[A][1]),p)for(X[M]=new Array(F),m=0;m<F;m++)X[M][m]=p.c2p(u[M][m])}if(i.selectBatch.length||i.unselectBatch.length){var Z=l.extendFlat({},v,i.unselectedOptions,_),se=l.extendFlat({},v,i.selectedOptions,_);i.matrix.update(Z,se),O=!1}}else s.xpx=s.ypx=null;if(O){var le=l.extendFlat({},v,_);i.matrix.update(le,null)}}}},{"../../components/dragelement/helpers":384,"../../lib":503,"../../plots/cartesian/axis_ids":558,"regl-splom":282}],1038:[function(t,B,H){var d=t("../../lib");B.exports=function(b,w){var e=b._fullLayout,o=w.uid,a=e._splomScenes;a||(a=e._splomScenes={});var r={dirty:!0,selectBatch:[],unselectBatch:[]},n={matrix:!1,selectBatch:[],unselectBatch:[]},c=a[w.uid];return c||(c=a[o]=d.extendFlat({},r,n),c.draw=function(){c.matrix&&c.matrix.draw&&(c.selectBatch.length||c.unselectBatch.length?c.matrix.draw(c.unselectBatch,c.selectBatch):c.matrix.draw()),c.dirty=!1},c.destroy=function(){c.matrix&&c.matrix.destroy&&c.matrix.destroy(),c.matrixOptions=null,c.selectBatch=null,c.unselectBatch=null,c=null}),c.dirty||d.extendFlat(c,r),c}},{"../../lib":503}],1039:[function(t,B,H){var d=t("../../lib"),l=t("../scatter/subtypes"),b=t("./helpers");B.exports=function(e,o){var a=e.cd,r=a[0].trace,n=a[0].t,c=e.scene,s=c.matrixOptions.cdata,i=e.xaxis,v=e.yaxis,u=[];if(!c)return u;var g=!l.hasMarkers(r)&&!l.hasText(r);if(r.visible!==!0||g)return u;var h=b.getDimIndex(r,i),y=b.getDimIndex(r,v);if(h===!1||y===!1)return u;var p=n.xpx[h],A=n.ypx[y],m=s[h],M=s[y],x=[],T=[];if(o!==!1&&!o.degenerate)for(var _=0;_<m.length;_++)o.contains([p[_],A[_]],null,_,e)?(x.push(_),u.push({pointNumber:_,x:m[_],y:M[_]})):T.push(_);var f=c.matrixOptions;return!x.length&&!T.length?c.matrix.update(f,null):!c.selectBatch.length&&!c.unselectBatch.length&&c.matrix.update(c.unselectedOptions,d.extendFlat({},f,c.selectedOptions,c.viewOpts)),c.selectBatch=x,c.unselectBatch=T,u}},{"../../lib":503,"../scatter/subtypes":951,"./helpers":1034}],1040:[function(t,B,H){var d=t("../../components/colorscale/attributes"),l=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=t("../../plots/template_attributes").hovertemplateAttrs,w=t("../mesh3d/attributes"),e=t("../../plots/attributes"),o=t("../../lib/extend").extendFlat,a={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:b({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:l("u",1),vhoverformat:l("v",1),whoverformat:l("w",1),xhoverformat:l("x"),yhoverformat:l("y"),zhoverformat:l("z"),showlegend:o({},e.showlegend,{dflt:!1})};o(a,d("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var r=["opacity","lightposition","lighting"];r.forEach(function(n){a[n]=w[n]}),a.hoverinfo=o({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),a.transforms=void 0,B.exports=a},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],1041:[function(t,B,H){var d=t("../../lib"),l=t("../../components/colorscale/calc");function b(a,r){r._len=Math.min(r.u.length,r.v.length,r.w.length,r.x.length,r.y.length,r.z.length),r._u=o(r.u,r._len),r._v=o(r.v,r._len),r._w=o(r.w,r._len),r._x=o(r.x,r._len),r._y=o(r.y,r._len),r._z=o(r.z,r._len);var n=w(r);r._gridFill=n.fill,r._Xs=n.Xs,r._Ys=n.Ys,r._Zs=n.Zs,r._len=n.len;var c=0,s,i,v;r.starts&&(s=o(r.starts.x||[]),i=o(r.starts.y||[]),v=o(r.starts.z||[]),c=Math.min(s.length,i.length,v.length)),r._startsX=s||[],r._startsY=i||[],r._startsZ=v||[];var u=0,g=1/0,h;for(h=0;h<r._len;h++){var y=r._u[h],p=r._v[h],A=r._w[h],m=Math.sqrt(y*y+p*p+A*A);u=Math.max(u,m),g=Math.min(g,m)}for(l(a,r,{vals:[g,u],containerStr:"",cLetter:"c"}),h=0;h<c;h++){var M=s[h];n.xMax=Math.max(n.xMax,M),n.xMin=Math.min(n.xMin,M);var x=i[h];n.yMax=Math.max(n.yMax,x),n.yMin=Math.min(n.yMin,x);var T=v[h];n.zMax=Math.max(n.zMax,T),n.zMin=Math.min(n.zMin,T)}r._slen=c,r._normMax=u,r._xbnds=[n.xMin,n.xMax],r._ybnds=[n.yMin,n.yMax],r._zbnds=[n.zMin,n.zMax]}function w(a){var r=a._x,n=a._y,c=a._z,s=a._len,i,v,u,g=-1/0,h=1/0,y=-1/0,p=1/0,A=-1/0,m=1/0,M="",x,T,_,f,L,S,k,P,z;for(s&&(f=r[0],S=n[0],P=c[0]),s>1&&(L=r[s-1],k=n[s-1],z=c[s-1]),i=0;i<s;i++)g=Math.max(g,r[i]),h=Math.min(h,r[i]),y=Math.max(y,n[i]),p=Math.min(p,n[i]),A=Math.max(A,c[i]),m=Math.min(m,c[i]),!x&&r[i]!==f&&(x=!0,M+="x"),!T&&n[i]!==S&&(T=!0,M+="y"),!_&&c[i]!==P&&(_=!0,M+="z");x||(M+="x"),T||(M+="y"),_||(M+="z");var I=e(a._x),R=e(a._y),D=e(a._z);M=M.replace("x",(f>L?"-":"+")+"x"),M=M.replace("y",(S>k?"-":"+")+"y"),M=M.replace("z",(P>z?"-":"+")+"z");var O=function(){s=0,I=[],R=[],D=[]};(!s||s<I.length*R.length*D.length)&&O();var F=function(ie){return ie==="x"?r:ie==="y"?n:c},G=function(ie){return ie==="x"?I:ie==="y"?R:D},W=function(ie){return ie[s-1]<ie[0]?-1:1},q=F(M[1]),J=F(M[3]),X=F(M[5]),Z=G(M[1]).length,se=G(M[3]).length,le=G(M[5]).length,oe=!1,U=function(ie,ue,xe){return Z*(se*ie+ue)+xe},V=W(F(M[1])),re=W(F(M[3])),ee=W(F(M[5]));for(i=0;i<le-1;i++){for(v=0;v<se-1;v++){for(u=0;u<Z-1;u++){var j=U(i,v,u),Q=U(i,v,u+1),ne=U(i,v+1,u),ae=U(i+1,v,u);if((!(q[j]*V<q[Q]*V)||!(J[j]*re<J[ne]*re)||!(X[j]*ee<X[ae]*ee))&&(oe=!0),oe)break}if(oe)break}if(oe)break}return oe&&(d.warn("Encountered arbitrary coordinates! Unable to input data grid."),O()),{xMin:h,yMin:p,zMin:m,xMax:g,yMax:y,zMax:A,Xs:I,Ys:R,Zs:D,len:s,fill:M}}function e(a){return d.distinctVals(a).vals}function o(a,r){if(r===void 0&&(r=a.length),d.isTypedArray(a))return a.subarray(0,r);for(var n=[],c=0;c<r;c++)n[c]=+a[c];return n}B.exports={calc:b,filter:o,processGrid:w}},{"../../components/colorscale/calc":374,"../../lib":503}],1042:[function(t,B,H){var d=t("../../../stackgl_modules").gl_streamtube3d,l=d.createTubeMesh,b=t("../../lib"),w=t("../../lib/gl_format_color").parseColorScale,e=t("../../components/colorscale").extractOpts,o=t("../../plots/gl3d/zip3"),a={xaxis:0,yaxis:1,zaxis:2};function r(u,g){this.scene=u,this.uid=g,this.mesh=null,this.data=null}var n=r.prototype;n.handlePick=function(u){var g=this.scene.fullSceneLayout,h=this.scene.dataScale;function y(m,M){var x=g[M],T=h[a[M]];return x.l2c(m)/T}if(u.object===this.mesh){var p=u.data.position,A=u.data.velocity;return u.traceCoordinate=[y(p[0],"xaxis"),y(p[1],"yaxis"),y(p[2],"zaxis"),y(A[0],"xaxis"),y(A[1],"yaxis"),y(A[2],"zaxis"),u.data.intensity*this.data._normMax,u.data.divergence],u.textLabel=this.data.hovertext||this.data.text,!0}};function c(u){var g=u.length,h;return g>2?h=u.slice(1,g-1):g===2?h=[(u[0]+u[1])/2]:h=u,h}function s(u){var g=u.length;return g===1?[.5,.5]:[u[1]-u[0],u[g-1]-u[g-2]]}function i(u,g){var h=u.fullSceneLayout,y=u.dataScale,p=g._len,A={};function m(se,le){var oe=h[le],U=y[a[le]];return b.simpleMap(se,function(V){return oe.d2l(V)*U})}if(A.vectors=o(m(g._u,"xaxis"),m(g._v,"yaxis"),m(g._w,"zaxis"),p),!p)return{positions:[],cells:[]};var M=m(g._Xs,"xaxis"),x=m(g._Ys,"yaxis"),T=m(g._Zs,"zaxis");A.meshgrid=[M,x,T],A.gridFill=g._gridFill;var _=g._slen;if(_)A.startingPositions=o(m(g._startsX,"xaxis"),m(g._startsY,"yaxis"),m(g._startsZ,"zaxis"));else{for(var f=x[0],L=c(M),S=c(T),k=new Array(L.length*S.length),P=0,z=0;z<L.length;z++)for(var I=0;I<S.length;I++)k[P++]=[L[z],f,S[I]];A.startingPositions=k}A.colormap=w(g),A.tubeSize=g.sizeref,A.maxLength=g.maxdisplayed;var R=m(g._xbnds,"xaxis"),D=m(g._ybnds,"yaxis"),O=m(g._zbnds,"zaxis"),F=s(M),G=s(x),W=s(T),q=[[R[0]-F[0],D[0]-G[0],O[0]-W[0]],[R[1]+F[1],D[1]+G[1],O[1]+W[1]]],J=d(A,q),X=e(g);J.vertexIntensityBounds=[X.min/g._normMax,X.max/g._normMax];var Z=g.lightposition;return J.lightPosition=[Z.x,Z.y,Z.z],J.ambient=g.lighting.ambient,J.diffuse=g.lighting.diffuse,J.specular=g.lighting.specular,J.roughness=g.lighting.roughness,J.fresnel=g.lighting.fresnel,J.opacity=g.opacity,g._pad=J.tubeScale*g.sizeref*2,J}n.update=function(u){this.data=u;var g=i(this.scene,u);this.mesh.update(g)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function v(u,g){var h=u.glplot.gl,y=i(u,g),p=l(h,y),A=new r(u,g.uid);return A.mesh=p,A.data=g,p._trace=A,u.glplot.add(p),A}B.exports=v},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/gl3d/zip3":609}],1043:[function(t,B,H){var d=t("../../lib"),l=t("../../components/colorscale/defaults"),b=t("./attributes");B.exports=function(e,o,a,r){function n(h,y){return d.coerce(e,o,b,h,y)}var c=n("u"),s=n("v"),i=n("w"),v=n("x"),u=n("y"),g=n("z");if(!c||!c.length||!s||!s.length||!i||!i.length||!v||!v.length||!u||!u.length||!g||!g.length){o.visible=!1;return}n("starts.x"),n("starts.y"),n("starts.z"),n("maxdisplayed"),n("sizeref"),n("lighting.ambient"),n("lighting.diffuse"),n("lighting.specular"),n("lighting.roughness"),n("lighting.fresnel"),n("lightposition.x"),n("lightposition.y"),n("lightposition.z"),l(e,o,r,n,{prefix:"",cLetter:"c"}),n("text"),n("hovertext"),n("hovertemplate"),n("uhoverformat"),n("vhoverformat"),n("whoverformat"),n("xhoverformat"),n("yhoverformat"),n("zhoverformat"),o._length=null}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":1040}],1044:[function(t,B,H){B.exports={moduleType:"trace",name:"streamtube",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:t("./calc").calc,plot:t("./convert"),eventData:function(d,l){return d.tubex=d.x,d.tubey=d.y,d.tubez=d.z,d.tubeu=l.traceCoordinate[3],d.tubev=l.traceCoordinate[4],d.tubew=l.traceCoordinate[5],d.norm=l.traceCoordinate[6],d.divergence=l.traceCoordinate[7],delete d.x,delete d.y,delete d.z,d},meta:{}}},{"../../plots/gl3d":598,"./attributes":1040,"./calc":1041,"./convert":1042,"./defaults":1043}],1045:[function(t,B,H){var d=t("../../plots/attributes"),l=t("../../plots/template_attributes").hovertemplateAttrs,b=t("../../plots/template_attributes").texttemplateAttrs,w=t("../../components/colorscale/attributes"),e=t("../../plots/domain").attributes,o=t("../pie/attributes"),a=t("./constants"),r=t("../../lib/extend").extendFlat;B.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:r({colors:{valType:"data_array",editType:"calc"},line:{color:r({},o.marker.line.color,{dflt:null}),width:r({},o.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},w("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:o.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:b({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),hovertext:o.hovertext,hoverinfo:r({},d.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:l({},{keys:a.eventDataKeys}),textfont:o.textfont,insidetextorientation:o.insidetextorientation,insidetextfont:o.insidetextfont,outsidetextfont:r({},o.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:o.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:e({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":900,"./constants":1048}],1046:[function(t,B,H){var d=t("../../plots/plots");H.name="sunburst",H.plot=function(l,b,w,e){d.plotBasePlot(H.name,l,b,w,e)},H.clean=function(l,b,w,e){d.cleanBasePlot(H.name,l,b,w,e)}},{"../../plots/plots":619}],1047:[function(t,B,H){var d=t("d3-hierarchy"),l=t("fast-isnumeric"),b=t("../../lib"),w=t("../../components/colorscale").makeColorScaleFuncFromTrace,e=t("../pie/calc").makePullColorFn,o=t("../pie/calc").generateExtendedColors,a=t("../../components/colorscale").calc,r=t("../../constants/numerical").ALMOST_EQUAL,n={},c={},s={};H.calc=function(v,u){var g=v._fullLayout,h=u.ids,y=b.isArrayOrTypedArray(h),p=u.labels,A=u.parents,m=u.values,M=b.isArrayOrTypedArray(m),x=[],T={},_={},f=function(V,re){T[V]?T[V].push(re):T[V]=[re],_[re]=1},L=function(V){return V||typeof V=="number"},S=function(V){return!M||l(m[V])&&m[V]>=0},k,P,z;y?(k=Math.min(h.length,A.length),P=function(V){return L(h[V])&&S(V)},z=function(V){return String(h[V])}):(k=Math.min(p.length,A.length),P=function(V){return L(p[V])&&S(V)},z=function(V){return String(p[V])}),M&&(k=Math.min(k,m.length));for(var I=0;I<k;I++)if(P(I)){var R=z(I),D=L(A[I])?String(A[I]):"",O={i:I,id:R,pid:D,label:L(p[I])?String(p[I]):""};M&&(O.v=+m[I]),x.push(O),f(D,R)}if(T[""]){if(T[""].length>1){for(var W=b.randstr(),q=0;q<x.length;q++)x[q].pid===""&&(x[q].pid=W);x.unshift({hasMultipleRoots:!0,id:W,pid:"",label:""})}}else{var F=[],G;for(G in T)_[G]||F.push(G);if(F.length===1)G=F[0],x.unshift({hasImpliedRoot:!0,id:G,pid:"",label:G});else return b.warn(["Multiple implied roots, cannot build",u.type,"hierarchy of",u.name+".","These roots include:",F.join(", ")].join(" "))}var J;try{J=d.stratify().id(function(V){return V.id}).parentId(function(V){return V.pid})(x)}catch(V){return b.warn(["Failed to build",u.type,"hierarchy of",u.name+".","Error:",V.message].join(" "))}var X=d.hierarchy(J),Z=!1;if(M)switch(u.branchvalues){case"remainder":X.sum(function(V){return V.data.v});break;case"total":X.each(function(V){var re=V.data.data,ee=re.v;if(V.children){var j=V.children.reduce(function(Q,ne){return Q+ne.data.data.v},0);if((re.hasImpliedRoot||re.hasMultipleRoots)&&(ee=j),ee<j*r)return Z=!0,b.warn(["Total value for node",V.data.data.id,"of",u.name,"is smaller than the sum of its children.",`
parent value =`,ee,`
children sum =`,j].join(" "))}V.value=ee});break}else i(X,u,{branches:u.count.indexOf("branches")!==-1,leaves:u.count.indexOf("leaves")!==-1});if(!Z){u.sort&&X.sort(function(V,re){return re.value-V.value});var se,le,oe=u.marker.colors||[],U=!!oe.length;return u._hasColorscale?(U||(oe=M?u.values:u._values),a(v,u,{vals:oe,containerStr:"marker",cLetter:"c"}),le=w(u.marker)):se=e(g["_"+u.type+"colormap"]),X.each(function(V){var re=V.data.data;re.color=u._hasColorscale?le(oe[re.i]):se(oe[re.i],re.id)}),x[0].hierarchy=X,x}},H._runCrossTraceCalc=function(v,u){var g=u._fullLayout,h=u.calcdata,y=g[v+"colorway"],p=g["_"+v+"colormap"];g["extend"+v+"colors"]&&(y=o(y,v==="icicle"?s:v==="treemap"?c:n));var A=0,m;function M(f){var L=f.data.data,S=L.id;L.color===!1&&(p[S]?L.color=p[S]:f.parent?f.parent.parent?L.color=f.parent.data.data.color:(p[S]=L.color=y[A%y.length],A++):L.color=m)}for(var x=0;x<h.length;x++){var T=h[x],_=T[0];_.trace.type===v&&_.hierarchy&&(m=_.trace.root.color,_.hierarchy.each(M))}},H.crossTraceCalc=function(v){return H._runCrossTraceCalc("sunburst",v)};function i(v,u,g){var h=0,y=v.children;if(y){for(var p=y.length,A=0;A<p;A++)h+=i(y[A],u,g);g.branches&&h++}else g.leaves&&h++;return v.value=v.data.data.value=h,u._values||(u._values=[]),u._values[v.data.data.i]=h,h}},{"../../components/colorscale":378,"../../constants/numerical":479,"../../lib":503,"../pie/calc":902,"d3-hierarchy":115,"fast-isnumeric":190}],1048:[function(t,B,H){B.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},{}],1049:[function(t,B,H){var d=t("../../lib"),l=t("./attributes"),b=t("../../plots/domain").defaults,w=t("../bar/defaults").handleText,e=t("../../components/colorscale"),o=e.hasColorscale,a=e.handleDefaults;B.exports=function(n,c,s,i){function v(M,x){return d.coerce(n,c,l,M,x)}var u=v("labels"),g=v("parents");if(!u||!u.length||!g||!g.length){c.visible=!1;return}var h=v("values");h&&h.length?v("branchvalues"):v("count"),v("level"),v("maxdepth");var y=v("marker.line.width");y&&v("marker.line.color",i.paper_bgcolor),v("marker.colors");var p=c._hasColorscale=o(n,"marker","colors")||(n.marker||{}).coloraxis;p&&a(n,c,i,v,{prefix:"marker.",cLetter:"c"}),v("leaf.opacity",p?1:.7);var A=v("text");v("texttemplate"),c.texttemplate||v("textinfo",Array.isArray(A)?"text+label":"label"),v("hovertext"),v("hovertemplate");var m="auto";w(n,c,i,v,m,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),v("insidetextorientation"),v("sort"),v("rotation"),v("root.color"),b(c,i,v),c._length=null}},{"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"./attributes":1045}],1050:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../registry"),b=t("../../components/fx/helpers").appendArrayPointValue,w=t("../../components/fx"),e=t("../../lib"),o=t("../../lib/events"),a=t("./helpers"),r=t("../pie/helpers"),n=r.formatPieValue;B.exports=function(i,v,u,g,h){var y=g[0],p=y.trace,A=y.hierarchy,m=p.type==="sunburst",M=p.type==="treemap"||p.type==="icicle";"_hasHoverLabel"in p||(p._hasHoverLabel=!1),"_hasHoverEvent"in p||(p._hasHoverEvent=!1);var x=function(f){var L=u._fullLayout;if(!(u._dragging||L.hovermode===!1)){var S=u._fullData[p.index],k=f.data.data,P=k.i,z=a.isHierarchyRoot(f),I=a.getParent(A,f),R=a.getValue(f),D=function(Q){return e.castOption(S,P,Q)},O=D("hovertemplate"),F=w.castHoverinfo(S,L,P),G=L.separators,W;if(O||F&&F!=="none"&&F!=="skip"){var q,J;m&&(q=y.cx+f.pxmid[0]*(1-f.rInscribed),J=y.cy+f.pxmid[1]*(1-f.rInscribed)),M&&(q=f._hoverX,J=f._hoverY);var X={},Z=[],se=[],le=function(Q){return Z.indexOf(Q)!==-1};F&&(Z=F==="all"?S._module.attributes.hoverinfo.flags:F.split("+")),X.label=k.label,le("label")&&X.label&&se.push(X.label),k.hasOwnProperty("v")&&(X.value=k.v,X.valueLabel=n(X.value,G),le("value")&&se.push(X.valueLabel)),X.currentPath=f.currentPath=a.getPath(f.data),le("current path")&&!z&&se.push(X.currentPath);var oe,U=[],V=function(){U.indexOf(oe)===-1&&(se.push(oe),U.push(oe))};X.percentParent=f.percentParent=R/a.getValue(I),X.parent=f.parentString=a.getPtLabel(I),le("percent parent")&&(oe=a.formatPercent(X.percentParent,G)+" of "+X.parent,V()),X.percentEntry=f.percentEntry=R/a.getValue(v),X.entry=f.entry=a.getPtLabel(v),le("percent entry")&&!z&&!f.onPathbar&&(oe=a.formatPercent(X.percentEntry,G)+" of "+X.entry,V()),X.percentRoot=f.percentRoot=R/a.getValue(A),X.root=f.root=a.getPtLabel(A),le("percent root")&&!z&&(oe=a.formatPercent(X.percentRoot,G)+" of "+X.root,V()),X.text=D("hovertext")||D("text"),le("text")&&(oe=X.text,e.isValidTextValue(oe)&&se.push(oe)),W=[c(f,S,h.eventDataKeys)];var re={trace:S,y:J,_x0:f._x0,_x1:f._x1,_y0:f._y0,_y1:f._y1,text:se.join("<br>"),name:O||le("name")?S.name:void 0,color:D("hoverlabel.bgcolor")||k.color,borderColor:D("hoverlabel.bordercolor"),fontFamily:D("hoverlabel.font.family"),fontSize:D("hoverlabel.font.size"),fontColor:D("hoverlabel.font.color"),nameLength:D("hoverlabel.namelength"),textAlign:D("hoverlabel.align"),hovertemplate:O,hovertemplateLabels:X,eventData:W};m&&(re.x0=q-f.rInscribed*f.rpx1,re.x1=q+f.rInscribed*f.rpx1,re.idealAlign=f.pxmid[0]<0?"left":"right"),M&&(re.x=q,re.idealAlign=q<0?"left":"right");var ee=[];w.loneHover(re,{container:L._hoverlayer.node(),outerContainer:L._paper.node(),gd:u,inOut_bbox:ee}),W[0].bbox=ee[0],p._hasHoverLabel=!0}if(M){var j=i.select("path.surface");h.styleOne(j,f,S,{hovered:!0})}p._hasHoverEvent=!0,u.emit("plotly_hover",{points:W||[c(f,S,h.eventDataKeys)],event:d.event})}},T=function(f){var L=u._fullLayout,S=u._fullData[p.index],k=d.select(this).datum();if(p._hasHoverEvent&&(f.originalEvent=d.event,u.emit("plotly_unhover",{points:[c(k,S,h.eventDataKeys)],event:d.event}),p._hasHoverEvent=!1),p._hasHoverLabel&&(w.loneUnhover(L._hoverlayer.node()),p._hasHoverLabel=!1),M){var P=i.select("path.surface");h.styleOne(P,k,S,{hovered:!1})}},_=function(f){var L=u._fullLayout,S=u._fullData[p.index],k=m&&(a.isHierarchyRoot(f)||a.isLeaf(f)),P=a.getPtId(f),z=a.isEntry(f)?a.findEntryWithChild(A,P):a.findEntryWithLevel(A,P),I=a.getPtId(z),R={points:[c(f,S,h.eventDataKeys)],event:d.event};k||(R.nextLevel=I);var D=o.triggerHandler(u,"plotly_"+p.type+"click",R);if(D!==!1&&L.hovermode&&(u._hoverdata=[c(f,S,h.eventDataKeys)],w.click(u,d.event)),!k&&D!==!1&&!u._dragging&&!u._transitioning){l.call("_storeDirectGUIEdit",S,L._tracePreGUI[S.uid],{level:S.level});var O={data:[{level:I}],traces:[p.index]},F={frame:{redraw:!1,duration:h.transitionTime},transition:{duration:h.transitionTime,easing:h.transitionEasing},mode:"immediate",fromcurrent:!0};w.loneUnhover(L._hoverlayer.node()),l.call("animate",u,O,F)}};i.on("mouseover",x),i.on("mouseout",T),i.on("click",_)};function c(s,i,v){for(var u=s.data.data,g={curveNumber:i.index,pointNumber:u.i,data:i._input,fullData:i},h=0;h<v.length;h++){var y=v[h];y in s&&(g[y]=s[y])}return"parentString"in s&&!a.isHierarchyRoot(s)&&(g.parent=s.parentString),b(g,i,u.i),g}},{"../../components/fx":406,"../../components/fx/helpers":402,"../../lib":503,"../../lib/events":492,"../../registry":638,"../pie/helpers":905,"./helpers":1051,"@plotly/d3":58}],1051:[function(t,B,H){var d=t("../../lib"),l=t("../../components/color"),b=t("../../lib/setcursor"),w=t("../pie/helpers");H.findEntryWithLevel=function(r,n){var c;return n&&r.eachAfter(function(s){if(H.getPtId(s)===n)return c=s.copy()}),c||r},H.findEntryWithChild=function(r,n){var c;return r.eachAfter(function(s){for(var i=s.children||[],v=0;v<i.length;v++){var u=i[v];if(H.getPtId(u)===n)return c=s.copy()}}),c||r},H.isEntry=function(r){return!r.parent},H.isLeaf=function(r){return!r.children},H.getPtId=function(r){return r.data.data.id},H.getPtLabel=function(r){return r.data.data.label},H.getValue=function(r){return r.value},H.isHierarchyRoot=function(r){return a(r)===""},H.setSliceCursor=function(r,n,c){var s=c.isTransitioning;if(!s){var i=r.datum();s=c.hideOnRoot&&H.isHierarchyRoot(i)||c.hideOnLeaves&&H.isLeaf(i)}b(r,s?null:"pointer")};function e(r,n,c){return{color:H.getOutsideTextFontKey("color",r,n,c),family:H.getOutsideTextFontKey("family",r,n,c),size:H.getOutsideTextFontKey("size",r,n,c)}}function o(r,n,c,s){var i=(s||{}).onPathbar,v=n.data.data,u=v.i,g=d.castOption(r,u,(i?"pathbar.textfont":"insidetextfont")+".color");return!g&&r._input.textfont&&(g=d.castOption(r._input,u,"textfont.color")),{color:g||l.contrast(v.color),family:H.getInsideTextFontKey("family",r,n,c,s),size:H.getInsideTextFontKey("size",r,n,c,s)}}H.getInsideTextFontKey=function(r,n,c,s,i){var v=(i||{}).onPathbar,u=v?"pathbar.textfont":"insidetextfont",g=c.data.data.i;return d.castOption(n,g,u+"."+r)||d.castOption(n,g,"textfont."+r)||s.size},H.getOutsideTextFontKey=function(r,n,c,s){var i=c.data.data.i;return d.castOption(n,i,"outsidetextfont."+r)||d.castOption(n,i,"textfont."+r)||s.size},H.isOutsideText=function(r,n){return!r._hasColorscale&&H.isHierarchyRoot(n)},H.determineTextFont=function(r,n,c,s){return H.isOutsideText(r,n)?e(r,n,c):o(r,n,c,s)},H.hasTransition=function(r){return!!(r&&r.duration>0)},H.getMaxDepth=function(r){return r.maxdepth>=0?r.maxdepth:1/0},H.isHeader=function(r,n){return!(H.isLeaf(r)||r.depth===n._maxDepth-1)};function a(r){return r.data.data.pid}H.getParent=function(r,n){return H.findEntryWithLevel(r,a(n))},H.listPath=function(r,n){var c=r.parent;if(!c)return[];var s=n?[c.data[n]]:[c];return H.listPath(c,n).concat(s)},H.getPath=function(r){return H.listPath(r,"label").join("/")+"/"},H.formatValue=w.formatPieValue,H.formatPercent=function(r,n){var c=d.formatPercent(r,0);return c==="0%"&&(c=w.formatPiePercent(r,n)),c}},{"../../components/color":366,"../../lib":503,"../../lib/setcursor":524,"../pie/helpers":905}],1052:[function(t,B,H){B.exports={moduleType:"trace",name:"sunburst",basePlotModule:t("./base_plot"),categories:[],animatable:!0,attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./calc").crossTraceCalc,plot:t("./plot").plot,style:t("./style").style,colorbar:t("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":944,"./attributes":1045,"./base_plot":1046,"./calc":1047,"./defaults":1049,"./layout_attributes":1053,"./layout_defaults":1054,"./plot":1055,"./style":1056}],1053:[function(t,B,H){B.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1054:[function(t,B,H){var d=t("../../lib"),l=t("./layout_attributes");B.exports=function(w,e){function o(a,r){return d.coerce(w,e,l,a,r)}o("sunburstcolorway",e.colorway),o("extendsunburstcolors")}},{"../../lib":503,"./layout_attributes":1053}],1055:[function(t,B,H){var d=t("@plotly/d3"),l=t("d3-hierarchy"),b=t("d3-interpolate").interpolate,w=t("../../components/drawing"),e=t("../../lib"),o=t("../../lib/svg_text_utils"),a=t("../bar/uniform_text"),r=a.recordMinTextSize,n=a.clearMinTextSize,c=t("../pie/plot"),s=t("../pie/helpers").getRotationAngle,i=c.computeTransform,v=c.transformInsideText,u=t("./style").styleOne,g=t("../bar/style").resizeText,h=t("./fx"),y=t("./constants"),p=t("./helpers");H.plot=function(_,f,L,S){var k=_._fullLayout,P=k._sunburstlayer,z,I,R=!L,D=!k.uniformtext.mode&&p.hasTransition(L);if(n("sunburst",k),z=P.selectAll("g.trace.sunburst").data(f,function(F){return F[0].trace.uid}),z.enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),z.order(),D){S&&(I=S());var O=d.transition().duration(L.duration).ease(L.easing).each("end",function(){I&&I()}).each("interrupt",function(){I&&I()});O.each(function(){P.selectAll("g.trace").each(function(F){A(_,F,this,L)})})}else z.each(function(F){A(_,F,this,L)}),k.uniformtext.mode&&g(_,k._sunburstlayer.selectAll(".trace"),"sunburst");R&&z.exit().remove()};function A(_,f,L,S){var k=_._fullLayout,P=!k.uniformtext.mode&&p.hasTransition(S),z=d.select(L),I=z.selectAll("g.slice"),R=f[0],D=R.trace,O=R.hierarchy,F=p.findEntryWithLevel(O,D.level),G=p.getMaxDepth(D),W=k._size,q=D.domain,J=W.w*(q.x[1]-q.x[0]),X=W.h*(q.y[1]-q.y[0]),Z=.5*Math.min(J,X),se=R.cx=W.l+W.w*(q.x[1]+q.x[0])/2,le=R.cy=W.t+W.h*(1-q.y[0])-X/2;if(!F)return I.remove();var oe=null,U={};P&&I.each(function(_e){U[p.getPtId(_e)]={rpx0:_e.rpx0,rpx1:_e.rpx1,x0:_e.x0,x1:_e.x1,transform:_e.transform},!oe&&p.isEntry(_e)&&(oe=_e)});var V=m(F).descendants(),re=F.height+1,ee=0,j=G;R.hasMultipleRoots&&p.isHierarchyRoot(F)&&(V=V.slice(1),re-=1,ee=1,j+=1),V=V.filter(function(_e){return _e.y1<=j});var Q=s(D.rotation);Q&&V.forEach(function(_e){_e.x0+=Q,_e.x1+=Q});var ne=Math.min(re,G),ae=function(_e){return(_e-ee)/ne*Z},ie=function(_e,De){return[_e*Math.cos(De),-_e*Math.sin(De)]},ue=function(_e){return e.pathAnnulus(_e.rpx0,_e.rpx1,_e.x0,_e.x1,se,le)},xe=function(_e){return se+x(_e)[0]*(_e.transform.rCenter||0)+(_e.transform.x||0)},he=function(_e){return le+x(_e)[1]*(_e.transform.rCenter||0)+(_e.transform.y||0)};I=I.data(V,p.getPtId),I.enter().append("g").classed("slice",!0),P?I.exit().transition().each(function(){var _e=d.select(this),De=_e.select("path.surface");De.transition().attrTween("d",function(qe){var Ue=Ae(qe);return function(Ie){return ue(Ue(Ie))}});var Ye=_e.select("g.slicetext");Ye.attr("opacity",0)}).remove():I.exit().remove(),I.order();var ge=null;if(P&&oe){var me=p.getPtId(oe);I.each(function(_e){ge===null&&p.getPtId(_e)===me&&(ge=_e.x1)})}var ke=I;P&&(ke=ke.transition().each("end",function(){var _e=d.select(this);p.setSliceCursor(_e,_,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),ke.each(function(_e){var De=d.select(this),Ye=e.ensureSingle(De,"path","surface",function(Dt){Dt.style("pointer-events","all")});_e.rpx0=ae(_e.y0),_e.rpx1=ae(_e.y1),_e.xmid=(_e.x0+_e.x1)/2,_e.pxmid=ie(_e.rpx1,_e.xmid),_e.midangle=-(_e.xmid-Math.PI/2),_e.startangle=-(_e.x0-Math.PI/2),_e.stopangle=-(_e.x1-Math.PI/2),_e.halfangle=.5*Math.min(e.angleDelta(_e.x0,_e.x1)||Math.PI,Math.PI),_e.ring=1-_e.rpx0/_e.rpx1,_e.rInscribed=M(_e),P?Ye.transition().attrTween("d",function(Dt){var Yt=Ne(Dt);return function(kt){return ue(Yt(kt))}}):Ye.attr("d",ue),De.call(h,F,_,f,{eventDataKeys:y.eventDataKeys,transitionTime:y.CLICK_TRANSITION_TIME,transitionEasing:y.CLICK_TRANSITION_EASING}).call(p.setSliceCursor,_,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:_._transitioning}),Ye.call(u,_e,D);var qe=e.ensureSingle(De,"g","slicetext"),Ue=e.ensureSingle(qe,"text","",function(Dt){Dt.attr("data-notex",1)}),Ie=e.ensureUniformFontSize(_,p.determineTextFont(D,_e,k.font));Ue.text(H.formatSliceLabel(_e,F,D,f,k)).classed("slicetext",!0).attr("text-anchor","middle").call(w.font,Ie).call(o.convertToTspans,_);var Ve=w.bBox(Ue.node());_e.transform=v(Ve,_e,R),_e.transform.targetX=xe(_e),_e.transform.targetY=he(_e);var dt=function(Dt,Yt){var kt=Dt.transform;return i(kt,Yt),kt.fontSize=Ie.size,r(D.type,kt,k),e.getTextTransform(kt)};P?Ue.transition().attrTween("transform",function(Dt){var Yt=He(Dt);return function(kt){return dt(Yt(kt),Ve)}}):Ue.attr("transform",dt(_e,Ve))});function Ae(_e){var De=p.getPtId(_e),Ye=U[De],qe=U[p.getPtId(F)],Ue;if(qe){var Ie=(_e.x1>qe.x1?2*Math.PI:0)+Q;Ue=_e.rpx1<qe.rpx1?{x0:_e.x0,x1:_e.x1,rpx0:0,rpx1:0}:{x0:Ie,x1:Ie,rpx0:_e.rpx0,rpx1:_e.rpx1}}else{var Ve,dt=p.getPtId(_e.parent);I.each(function(Nt){if(p.getPtId(Nt)===dt)return Ve=Nt});var Dt=Ve.children,Yt;Dt.forEach(function(Nt,Lt){if(p.getPtId(Nt)===De)return Yt=Lt});var kt=Dt.length,Ft=b(Ve.x0,Ve.x1);Ue={rpx0:Z,rpx1:Z,x0:Ft(Yt/kt),x1:Ft((Yt+1)/kt)}}return b(Ye,Ue)}function Ne(_e){var De=U[p.getPtId(_e)],Ye,qe={x0:_e.x0,x1:_e.x1,rpx0:_e.rpx0,rpx1:_e.rpx1};if(De)Ye=De;else if(oe)if(_e.parent)if(ge){var Ue=(_e.x1>ge?2*Math.PI:0)+Q;Ye={x0:Ue,x1:Ue}}else Ye={rpx0:Z,rpx1:Z},e.extendFlat(Ye,Ge(_e));else Ye={rpx0:0,rpx1:0};else Ye={x0:Q,x1:Q};return b(Ye,qe)}function He(_e){var De=U[p.getPtId(_e)],Ye,qe=_e.transform;if(De)Ye=De;else if(Ye={rpx1:_e.rpx1,transform:{textPosAngle:qe.textPosAngle,scale:0,rotate:qe.rotate,rCenter:qe.rCenter,x:qe.x,y:qe.y}},oe)if(_e.parent)if(ge){var Ue=_e.x1>ge?2*Math.PI:0;Ye.x0=Ye.x1=Ue}else e.extendFlat(Ye,Ge(_e));else Ye.x0=Ye.x1=Q;else Ye.x0=Ye.x1=Q;var Ie=b(Ye.transform.textPosAngle,_e.transform.textPosAngle),Ve=b(Ye.rpx1,_e.rpx1),dt=b(Ye.x0,_e.x0),Dt=b(Ye.x1,_e.x1),Yt=b(Ye.transform.scale,qe.scale),kt=b(Ye.transform.rotate,qe.rotate),Ft=qe.rCenter===0?3:Ye.transform.rCenter===0?1/3:1,Nt=b(Ye.transform.rCenter,qe.rCenter),Lt=function(St){return Nt(Math.pow(St,Ft))};return function(St){var it=Ve(St),ht=dt(St),Qe=Dt(St),Ce=Lt(St),je=ie(it,(ht+Qe)/2),rt=Ie(St),ut={pxmid:je,rpx1:it,transform:{textPosAngle:rt,rCenter:Ce,x:qe.x,y:qe.y}};return r(D.type,qe,k),{transform:{targetX:xe(ut),targetY:he(ut),scale:Yt(St),rotate:kt(St),rCenter:Ce}}}}function Ge(_e){var De=_e.parent,Ye=U[p.getPtId(De)],qe={};if(Ye){var Ue=De.children,Ie=Ue.indexOf(_e),Ve=Ue.length,dt=b(Ye.x0,Ye.x1);qe.x0=dt(Ie/Ve),qe.x1=dt(Ie/Ve)}else qe.x0=qe.x1=0;return qe}}function m(_){return l.partition().size([2*Math.PI,_.height+1])(_)}H.formatSliceLabel=function(_,f,L,S,k){var P=L.texttemplate,z=L.textinfo;if(!P&&(!z||z==="none"))return"";var I=k.separators,R=S[0],D=_.data.data,O=R.hierarchy,F=p.isHierarchyRoot(_),G=p.getParent(O,_),W=p.getValue(_);if(!P){var q=z.split("+"),J=function(j){return q.indexOf(j)!==-1},X=[],Z;if(J("label")&&D.label&&X.push(D.label),D.hasOwnProperty("v")&&J("value")&&X.push(p.formatValue(D.v,I)),!F){J("current path")&&X.push(p.getPath(_.data));var se=0;J("percent parent")&&se++,J("percent entry")&&se++,J("percent root")&&se++;var le=se>1;if(se){var oe,U=function(j){Z=p.formatPercent(oe,I),le&&(Z+=" of "+j),X.push(Z)};J("percent parent")&&!F&&(oe=W/p.getValue(G),U("parent")),J("percent entry")&&(oe=W/p.getValue(f),U("entry")),J("percent root")&&(oe=W/p.getValue(O),U("root"))}}return J("text")&&(Z=e.castOption(L,D.i,"text"),e.isValidTextValue(Z)&&X.push(Z)),X.join("<br>")}var V=e.castOption(L,D.i,"texttemplate");if(!V)return"";var re={};D.label&&(re.label=D.label),D.hasOwnProperty("v")&&(re.value=D.v,re.valueLabel=p.formatValue(D.v,I)),re.currentPath=p.getPath(_.data),F||(re.percentParent=W/p.getValue(G),re.percentParentLabel=p.formatPercent(re.percentParent,I),re.parent=p.getPtLabel(G)),re.percentEntry=W/p.getValue(f),re.percentEntryLabel=p.formatPercent(re.percentEntry,I),re.entry=p.getPtLabel(f),re.percentRoot=W/p.getValue(O),re.percentRootLabel=p.formatPercent(re.percentRoot,I),re.root=p.getPtLabel(O),D.hasOwnProperty("color")&&(re.color=D.color);var ee=e.castOption(L,D.i,"text");return(e.isValidTextValue(ee)||ee==="")&&(re.text=ee),re.customdata=e.castOption(L,D.i,"customdata"),e.texttemplateString(V,re,k._d3locale,re,L._meta||{})};function M(_){return _.rpx0===0&&e.isFullCircle([_.x0,_.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(_.halfangle)),_.ring/2))}function x(_){return T(_.rpx1,_.transform.textPosAngle)}function T(_,f){return[_*Math.sin(f),-_*Math.cos(f)]}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../bar/style":662,"../bar/uniform_text":664,"../pie/helpers":905,"../pie/plot":909,"./constants":1048,"./fx":1050,"./helpers":1051,"./style":1056,"@plotly/d3":58,"d3-hierarchy":115,"d3-interpolate":116}],1056:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../components/color"),b=t("../../lib"),w=t("../bar/uniform_text").resizeText;function e(a){var r=a._fullLayout._sunburstlayer.selectAll(".trace");w(a,r,"sunburst"),r.each(function(n){var c=d.select(this),s=n[0],i=s.trace;c.style("opacity",i.opacity),c.selectAll("path.surface").each(function(v){d.select(this).call(o,v,i)})})}function o(a,r,n){var c=r.data.data,s=!r.children,i=c.i,v=b.castOption(n,i,"marker.line.color")||l.defaultLine,u=b.castOption(n,i,"marker.line.width")||0;a.style("stroke-width",u).call(l.fill,c.color).call(l.stroke,v).style("opacity",s?n.leaf.opacity:null)}B.exports={style:e,styleOne:o}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"@plotly/d3":58}],1057:[function(t,B,H){var d=t("../../components/color"),l=t("../../components/colorscale/attributes"),b=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,w=t("../../plots/template_attributes").hovertemplateAttrs,e=t("../../plots/attributes"),o=t("../../lib/extend").extendFlat,a=t("../../plot_api/edit_types").overrideAll;function r(s){return{valType:"boolean",dflt:!1}}function n(s){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:r(),y:r(),z:r()},color:{valType:"color",dflt:d.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:d.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var c=B.exports=a(o({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:w(),xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},l("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:n(),y:n(),z:n()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:o({},l.zauto,{}),zmin:o({},l.zmin,{}),zmax:o({},l.zmax,{})},hoverinfo:o({},e.hoverinfo),showlegend:o({},e.showlegend,{dflt:!1})}),"calc","nested");c.x.editType=c.y.editType=c.z.editType="calc+clearAxisTypes",c.transforms=void 0},{"../../components/color":366,"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633}],1058:[function(t,B,H){var d=t("../../components/colorscale/calc");B.exports=function(b,w){w.surfacecolor?d(b,w,{vals:w.surfacecolor,containerStr:"",cLetter:"c"}):d(b,w,{vals:w.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],1059:[function(t,B,H){var d=t("../../../stackgl_modules").gl_surface3d,l=t("../../../stackgl_modules").ndarray,b=t("../../../stackgl_modules").ndarray_linear_interpolate.d2,w=t("../heatmap/interp2d"),e=t("../heatmap/find_empties"),o=t("../../lib").isArrayOrTypedArray,a=t("../../lib/gl_format_color").parseColorScale,r=t("../../lib/str2rgbarray"),n=t("../../components/colorscale").extractOpts;function c(S,k,P){this.scene=S,this.uid=P,this.surface=k,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var s=c.prototype;s.getXat=function(S,k,P,z){var I=o(this.data.x)?o(this.data.x[0])?this.data.x[k][S]:this.data.x[S]:S;return P===void 0?I:z.d2l(I,0,P)},s.getYat=function(S,k,P,z){var I=o(this.data.y)?o(this.data.y[0])?this.data.y[k][S]:this.data.y[k]:k;return P===void 0?I:z.d2l(I,0,P)},s.getZat=function(S,k,P,z){var I=this.data.z[k][S];return I===null&&this.data.connectgaps&&this.data._interpolatedZ&&(I=this.data._interpolatedZ[k][S]),P===void 0?I:z.d2l(I,0,P)},s.handlePick=function(S){if(S.object===this.surface){var k=(S.data.index[0]-1)/this.dataScaleX-1,P=(S.data.index[1]-1)/this.dataScaleY-1,z=Math.max(Math.min(Math.round(k),this.data.z[0].length-1),0),I=Math.max(Math.min(Math.round(P),this.data._ylength-1),0);S.index=[z,I],S.traceCoordinate=[this.getXat(z,I),this.getYat(z,I),this.getZat(z,I)],S.dataCoordinate=[this.getXat(z,I,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(z,I,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(z,I,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var R=0;R<3;R++){var D=S.dataCoordinate[R];D!=null&&(S.dataCoordinate[R]*=this.scene.dataScale[R])}var O=this.data.hovertext||this.data.text;return Array.isArray(O)&&O[I]&&O[I][z]!==void 0?S.textLabel=O[I][z]:O?S.textLabel=O:S.textLabel="",S.data.dataCoordinate=S.dataCoordinate.slice(),this.surface.highlight(S.data),this.scene.glplot.spikes.position=S.dataCoordinate,!0}};function i(S){var k=S[0].rgb,P=S[S.length-1].rgb;return k[0]===P[0]&&k[1]===P[1]&&k[2]===P[2]&&k[3]===P[3]}var v=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function u(S,k){if(S<k)return 0;for(var P=0;Math.floor(S%k)===0;)S/=k,P++;return P}function g(S){for(var k=[],P=0;P<v.length;P++){var z=v[P];k.push(u(S,z))}return k}function h(S){for(var k=g(S),P=S,z=0;z<v.length;z++)if(k[z]>0){P=v[z];break}return P}function y(S,k){if(!(S<1||k<1)){for(var P=g(S),z=g(k),I=1,R=0;R<v.length;R++)I*=Math.pow(v[R],Math.max(P[R],z[R]));return I}}function p(S){if(S.length!==0){for(var k=1,P=0;P<S.length;P++)k=y(k,S[P]);return k}}s.calcXnums=function(S){var k,P=[];for(k=1;k<S;k++){var z=this.getXat(k-1,0),I=this.getXat(k,0);I!==z&&z!==void 0&&z!==null&&I!==void 0&&I!==null?P[k-1]=Math.abs(I-z):P[k-1]=0}var R=0;for(k=1;k<S;k++)R+=P[k-1];for(k=1;k<S;k++)P[k-1]===0?P[k-1]=1:P[k-1]=Math.round(R/P[k-1]);return P},s.calcYnums=function(S){var k,P=[];for(k=1;k<S;k++){var z=this.getYat(0,k-1),I=this.getYat(0,k);I!==z&&z!==void 0&&z!==null&&I!==void 0&&I!==null?P[k-1]=Math.abs(I-z):P[k-1]=0}var R=0;for(k=1;k<S;k++)R+=P[k-1];for(k=1;k<S;k++)P[k-1]===0?P[k-1]=1:P[k-1]=Math.round(R/P[k-1]);return P};var A=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],m=A[9],M=A[13];s.estimateScale=function(S,k){for(var P=k===0?this.calcXnums(S):this.calcYnums(S),z=1+p(P);z<m;)z*=2;for(;z>M;)z--,z/=h(z),z++,z<m&&(z=M);var I=Math.round(z/S);return I>1?I:1};function x(S,k,P){var z=P[8]+P[2]*k[0]+P[5]*k[1];return S[0]=(P[6]+P[0]*k[0]+P[3]*k[1])/z,S[1]=(P[7]+P[1]*k[0]+P[4]*k[1])/z,S}function T(S,k,P){return _(S,k,x,P),S}function _(S,k,P,z){for(var I=[0,0],R=S.shape[0],D=S.shape[1],O=0;O<R;O++)for(var F=0;F<D;F++)P(I,[O,F],z),S.set(O,F,b(k,I[0],I[1]));return S}s.refineCoords=function(S){for(var k=this.dataScaleX,P=this.dataScaleY,z=S[0].shape[0],I=S[0].shape[1],R=Math.floor(S[0].shape[0]*k+1)|0,D=Math.floor(S[0].shape[1]*P+1)|0,O=1+z+1,F=1+I+1,G=l(new Float32Array(O*F),[O,F]),W=[1/k,0,0,0,1/P,0,0,0,1],q=0;q<S.length;++q){this.surface.padField(G,S[q]);var J=l(new Float32Array(R*D),[R,D]);T(J,G,W),S[q]=J}};function f(S,k){for(var P=!1,z=0;z<S.length;z++)if(k===S[z]){P=!0;break}P===!1&&S.push(k)}s.setContourLevels=function(){var S=[[],[],[]],k=[!1,!1,!1],P=!1,z,I,R;for(z=0;z<3;++z)if(this.showContour[z]&&(P=!0,this.contourSize[z]>0&&this.contourStart[z]!==null&&this.contourEnd[z]!==null&&this.contourEnd[z]>this.contourStart[z]))for(k[z]=!0,I=this.contourStart[z];I<this.contourEnd[z];I+=this.contourSize[z])R=I*this.scene.dataScale[z],f(S[z],R);if(P){var D=[[],[],[]];for(z=0;z<3;++z)this.showContour[z]&&(D[z]=k[z]?S[z]:this.scene.contourLevels[z]);this.surface.update({levels:D})}},s.update=function(S){var k=this.scene,P=k.fullSceneLayout,z=this.surface,I=a(S),R=k.dataScale,D=S.z[0].length,O=S._ylength,F=k.contourLevels;this.data=S;var G,W,q,J,X=[];for(G=0;G<3;G++)for(X[G]=[],W=0;W<D;W++)X[G][W]=[];for(W=0;W<D;W++)for(q=0;q<O;q++)X[0][W][q]=this.getXat(W,q,S.xcalendar,P.xaxis),X[1][W][q]=this.getYat(W,q,S.ycalendar,P.yaxis),X[2][W][q]=this.getZat(W,q,S.zcalendar,P.zaxis);if(S.connectgaps)for(S._emptypoints=e(X[2]),w(X[2],S._emptypoints),S._interpolatedZ=[],W=0;W<D;W++)for(S._interpolatedZ[W]=[],q=0;q<O;q++)S._interpolatedZ[W][q]=X[2][W][q];for(G=0;G<3;G++)for(W=0;W<D;W++)for(q=0;q<O;q++)J=X[G][W][q],J==null?X[G][W][q]=NaN:J=X[G][W][q]*=R[G];for(G=0;G<3;G++)for(W=0;W<D;W++)for(q=0;q<O;q++)J=X[G][W][q],J!=null&&(this.minValues[G]>J&&(this.minValues[G]=J),this.maxValues[G]<J&&(this.maxValues[G]=J));for(G=0;G<3;G++)this.objectOffset[G]=.5*(this.minValues[G]+this.maxValues[G]);for(G=0;G<3;G++)for(W=0;W<D;W++)for(q=0;q<O;q++)J=X[G][W][q],J!=null&&(X[G][W][q]-=this.objectOffset[G]);var Z=[l(new Float32Array(D*O),[D,O]),l(new Float32Array(D*O),[D,O]),l(new Float32Array(D*O),[D,O])];for(G=0;G<3;G++)for(W=0;W<D;W++)for(q=0;q<O;q++)Z[G].set(W,q,X[G][W][q]);X=[];var se={colormap:I,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!S.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:S.opacityscale,opacity:S.opacity},le=n(S);if(se.intensityBounds=[le.min,le.max],S.surfacecolor){var oe=l(new Float32Array(D*O),[D,O]);for(W=0;W<D;W++)for(q=0;q<O;q++)oe.set(W,q,S.surfacecolor[q][W]);Z.push(oe)}else se.intensityBounds[0]*=R[2],se.intensityBounds[1]*=R[2];(M<Z[0].shape[0]||M<Z[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(Z[0].shape[0],0),this.dataScaleY=this.estimateScale(Z[0].shape[1],1),(this.dataScaleX!==1||this.dataScaleY!==1)&&this.refineCoords(Z)),S.surfacecolor&&(se.intensity=Z.pop());var U=[!0,!0,!0],V=["x","y","z"];for(G=0;G<3;++G){var re=S.contours[V[G]];U[G]=re.highlight,se.showContour[G]=re.show||re.highlight,se.showContour[G]&&(se.contourProject[G]=[re.project.x,re.project.y,re.project.z],re.show?(this.showContour[G]=!0,se.levels[G]=F[G],z.highlightColor[G]=se.contourColor[G]=r(re.color),re.usecolormap?z.highlightTint[G]=se.contourTint[G]=0:z.highlightTint[G]=se.contourTint[G]=1,se.contourWidth[G]=re.width,this.contourStart[G]=re.start,this.contourEnd[G]=re.end,this.contourSize[G]=re.size):(this.showContour[G]=!1,this.contourStart[G]=null,this.contourEnd[G]=null,this.contourSize[G]=0),re.highlight&&(se.dynamicColor[G]=r(re.highlightcolor),se.dynamicWidth[G]=re.highlightwidth))}i(I)&&(se.vertexColor=!0),se.objectOffset=this.objectOffset,se.coords=Z,z.update(se),z.visible=S.visible,z.enableDynamic=U,z.enableHighlight=U,z.snapToData=!0,"lighting"in S&&(z.ambientLight=S.lighting.ambient,z.diffuseLight=S.lighting.diffuse,z.specularLight=S.lighting.specular,z.roughness=S.lighting.roughness,z.fresnel=S.lighting.fresnel),"lightposition"in S&&(z.lightPosition=[S.lightposition.x,S.lightposition.y,S.lightposition.z])},s.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()};function L(S,k){var P=S.glplot.gl,z=d({gl:P}),I=new c(S,z,k.uid);return z._trace=I,I.update(k),S.glplot.add(z),I}B.exports=L},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../heatmap/find_empties":798,"../heatmap/interp2d":801}],1060:[function(t,B,H){var d=t("../../registry"),l=t("../../lib"),b=t("../../components/colorscale/defaults"),w=t("./attributes"),e=.1;function o(s,i){for(var v=[],u=32,g=0;g<u;g++){var h=g/(u-1),y=i+(1-i)*(1-Math.pow(Math.sin(s*h*Math.PI),2));v.push([h,Math.max(0,Math.min(1,y))])}return v}function a(s){var i=0;if(!Array.isArray(s)||s.length<2||!s[0]||!s[s.length-1]||+s[0][0]!=0||+s[s.length-1][0]!=1)return!1;for(var v=0;v<s.length;v++){var u=s[v];if(u.length!==2||+u[0]<i)return!1;i=+u[0]}return!0}function r(s,i,v,u){var g,h;function y(S,k){return l.coerce(s,i,w,S,k)}var p=y("x"),A=y("y"),m=y("z");if(!m||!m.length||(p?p.length<1:!1)||(A?A.length<1:!1)){i.visible=!1;return}i._xlength=Array.isArray(p)&&l.isArrayOrTypedArray(p[0])?m.length:m[0].length,i._ylength=m.length;var M=d.getComponentMethod("calendars","handleTraceDefaults");M(s,i,["x","y","z"],u),y("text"),y("hovertext"),y("hovertemplate"),y("xhoverformat"),y("yhoverformat"),y("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(S){y(S)});var x=y("surfacecolor"),T=["x","y","z"];for(g=0;g<3;++g){var _="contours."+T[g],f=y(_+".show"),L=y(_+".highlight");if(f||L)for(h=0;h<3;++h)y(_+".project."+T[h]);f&&(y(_+".color"),y(_+".width"),y(_+".usecolormap")),L&&(y(_+".highlightcolor"),y(_+".highlightwidth")),y(_+".start"),y(_+".end"),y(_+".size")}x||(c(s,"zmin","cmin"),c(s,"zmax","cmax"),c(s,"zauto","cauto")),b(s,i,u,y,{prefix:"",cLetter:"c"}),n(s,i,u,y),i._length=null}function n(s,i,v,u){var g=u("opacityscale");g==="max"?i.opacityscale=[[0,e],[1,1]]:g==="min"?i.opacityscale=[[0,1],[1,e]]:g==="extremes"?i.opacityscale=o(1,e):a(g)||(i.opacityscale=void 0)}function c(s,i,v){i in s&&!(v in s)&&(s[v]=s[i])}B.exports={supplyDefaults:r,opacityscaleDefaults:n}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":1057}],1061:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:t("./calc"),plot:t("./convert"),moduleType:"trace",name:"surface",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":1057,"./calc":1058,"./convert":1059,"./defaults":1060}],1062:[function(t,B,H){var d=t("../../components/annotations/attributes"),l=t("../../lib/extend").extendFlat,b=t("../../plot_api/edit_types").overrideAll,w=t("../../plots/font_attributes"),e=t("../../plots/domain").attributes,o=t("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,a=B.exports=b({domain:e({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:o("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:l({},d.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:l({},w({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:o("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:l({},d.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:l({},w({arrayOk:!0}))}},"calc","from-root");a.transforms=void 0},{"../../components/annotations/attributes":349,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/axis_format_attributes":557,"../../plots/domain":584,"../../plots/font_attributes":585}],1063:[function(t,B,H){var d=t("../../plots/get_data").getModuleCalcData,l=t("./plot"),b="table";H.name=b,H.plot=function(w){var e=d(w.calcdata,b)[0];e.length&&l(w,e)},H.clean=function(w,e,o,a){var r=a._has&&a._has(b),n=e._has&&e._has(b);r&&!n&&a._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":593,"./plot":1070}],1064:[function(t,B,H){var d=t("../../lib/gup").wrap;B.exports=function(){return d({})}},{"../../lib/gup":500}],1065:[function(t,B,H){B.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1066:[function(t,B,H){var d=t("./constants"),l=t("../../lib/extend").extendFlat,b=t("fast-isnumeric");B.exports=function(v,u){var g=o(u.cells.values),h=function(W){return W.slice(u.header.values.length,W.length)},y=o(u.header.values);y.length&&!y[0].length&&(y[0]=[""],y=o(y));var p=y.concat(h(g).map(function(){return a((y[0]||[""]).length)})),A=u.domain,m=Math.floor(v._fullLayout._size.w*(A.x[1]-A.x[0])),M=Math.floor(v._fullLayout._size.h*(A.y[1]-A.y[0])),x=u.header.values.length?p[0].map(function(){return u.header.height}):[d.emptyHeaderHeight],T=g.length?g[0].map(function(){return u.cells.height}):[],_=x.reduce(e,0),f=M-_,L=f+d.uplift,S=c(T,L),k=c(x,_),P=n(k,[]),z=n(S,P),I={},R=u._fullInput.columnorder.concat(h(g.map(function(W,q){return q}))),D=p.map(function(W,q){var J=Array.isArray(u.columnwidth)?u.columnwidth[Math.min(q,u.columnwidth.length-1)]:u.columnwidth;return b(J)?Number(J):1}),O=D.reduce(e,0);D=D.map(function(W){return W/O*m});var F=Math.max(w(u.header.line.width),w(u.cells.line.width)),G={key:u.uid+v._context.staticPlot,translateX:A.x[0]*v._fullLayout._size.w,translateY:v._fullLayout._size.h*(1-A.y[1]),size:v._fullLayout._size,width:m,maxLineWidth:F,height:M,columnOrder:R,groupHeight:M,rowBlocks:z,headerRowBlocks:P,scrollY:0,cells:l({},u.cells,{values:g}),headerCells:l({},u.header,{values:p}),gdColumns:p.map(function(W){return W[0]}),gdColumnsOriginalOrder:p.map(function(W){return W[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:p.map(function(W,q){var J=I[W];I[W]=(J||0)+1;var X=W+"__"+I[W];return{key:X,label:W,specIndex:q,xIndex:R[q],xScale:r,x:void 0,calcdata:void 0,columnWidth:D[q]}})};return G.columns.forEach(function(W){W.calcdata=G,W.x=r(W)}),G};function w(i){if(Array.isArray(i)){for(var v=0,u=0;u<i.length;u++)v=Math.max(v,w(i[u]));return v}return i}function e(i,v){return i+v}function o(i){var v=i.slice(),u=1/0,g=0,h;for(h=0;h<v.length;h++)Array.isArray(v[h])||(v[h]=[v[h]]),u=Math.min(u,v[h].length),g=Math.max(g,v[h].length);if(u!==g)for(h=0;h<v.length;h++){var y=g-v[h].length;y&&(v[h]=v[h].concat(a(y)))}return v}function a(i){for(var v=new Array(i),u=0;u<i;u++)v[u]="";return v}function r(i){return i.calcdata.columns.reduce(function(v,u){return u.xIndex<i.xIndex?v+u.columnWidth:v},0)}function n(i,v){var u=Object.keys(i);return u.map(function(g){return l({},i[g],{auxiliaryBlocks:v})})}function c(i,v){for(var u={},g,h=0,y=0,p=s(),A=0,m=0,M=0;M<i.length;M++)g=i[M],p.rows.push({rowIndex:M,rowHeight:g}),y+=g,(y>=v||M===i.length-1)&&(u[h]=p,p.key=m++,p.firstRowIndex=A,p.lastRowIndex=M,p=s(),h+=y,A=M+1,y=0);return u}function s(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}},{"../../lib/extend":493,"./constants":1065,"fast-isnumeric":190}],1067:[function(t,B,H){var d=t("../../lib/extend").extendFlat;H.splitToPanels=function(b){var w=[0,0],e=d({},b,{key:"header",type:"header",page:0,prevPages:w,currentRepaint:[null,null],dragHandle:!0,values:b.calcdata.headerCells.values[b.specIndex],rowBlocks:b.calcdata.headerRowBlocks,calcdata:d({},b.calcdata,{cells:b.calcdata.headerCells})}),o=d({},b,{key:"cells1",type:"cells",page:0,prevPages:w,currentRepaint:[null,null],dragHandle:!1,values:b.calcdata.cells.values[b.specIndex],rowBlocks:b.calcdata.rowBlocks}),a=d({},b,{key:"cells2",type:"cells",page:1,prevPages:w,currentRepaint:[null,null],dragHandle:!1,values:b.calcdata.cells.values[b.specIndex],rowBlocks:b.calcdata.rowBlocks});return[o,a,e]},H.splitToCells=function(b){var w=l(b);return(b.values||[]).slice(w[0],w[1]).map(function(e,o){var a=typeof e=="string"&&e.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:o+a,key:w[0]+o,column:b,calcdata:b.calcdata,page:b.page,rowBlocks:b.rowBlocks,value:e}})};function l(b){var w=b.rowBlocks[b.page],e=w?w.rows[0].rowIndex:0,o=w?e+w.rows.length:0;return[e,o]}},{"../../lib/extend":493}],1068:[function(t,B,H){var d=t("../../lib"),l=t("./attributes"),b=t("../../plots/domain").defaults;function w(e,o){for(var a=e.columnorder||[],r=e.header.values.length,n=a.slice(0,r),c=n.slice().sort(function(v,u){return v-u}),s=n.map(function(v){return c.indexOf(v)}),i=s.length;i<r;i++)s.push(i);o("columnorder",s)}B.exports=function(o,a,r,n){function c(s,i){return d.coerce(o,a,l,s,i)}b(a,n,c),c("columnwidth"),c("header.values"),c("header.format"),c("header.align"),c("header.prefix"),c("header.suffix"),c("header.height"),c("header.line.width"),c("header.line.color"),c("header.fill.color"),d.coerceFont(c,"header.font",d.extendFlat({},n.font)),w(a,c),c("cells.values"),c("cells.format"),c("cells.align"),c("cells.prefix"),c("cells.suffix"),c("cells.height"),c("cells.line.width"),c("cells.line.color"),c("cells.fill.color"),d.coerceFont(c,"cells.font",d.extendFlat({},n.font)),a._length=null}},{"../../lib":503,"../../plots/domain":584,"./attributes":1062}],1069:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot"),moduleType:"trace",name:"table",basePlotModule:t("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1062,"./base_plot":1063,"./calc":1064,"./defaults":1068,"./plot":1070}],1070:[function(t,B,H){var d=t("./constants"),l=t("@plotly/d3"),b=t("../../lib"),w=b.numberFormat,e=t("../../lib/gup"),o=t("../../components/drawing"),a=t("../../lib/svg_text_utils"),r=t("../../lib").raiseToTop,n=t("../../lib").strTranslate,c=t("../../lib").cancelTransition,s=t("./data_preparation_helper"),i=t("./data_split_helpers"),v=t("../../components/color");B.exports=function(ne,ae){var ie=!ne._context.staticPlot,ue=ne._fullLayout._paper.selectAll("."+d.cn.table).data(ae.map(function(Ue){var Ie=e.unwrap(Ue),Ve=Ie.trace;return s(ne,Ve)}),e.keyFun);ue.exit().remove(),ue.enter().append("g").classed(d.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),ue.attr("width",function(Ue){return Ue.width+Ue.size.l+Ue.size.r}).attr("height",function(Ue){return Ue.height+Ue.size.t+Ue.size.b}).attr("transform",function(Ue){return n(Ue.translateX,Ue.translateY)});var xe=ue.selectAll("."+d.cn.tableControlView).data(e.repeat,e.keyFun),he=xe.enter().append("g").classed(d.cn.tableControlView,!0).style("box-sizing","content-box");if(ie){var ge="onwheel"in document?"wheel":"mousewheel";he.on("mousemove",function(Ue){xe.filter(function(Ie){return Ue===Ie}).call(p,ne)}).on(ge,function(Ue){if(!Ue.scrollbarState.wheeling){Ue.scrollbarState.wheeling=!0;var Ie=Ue.scrollY+l.event.deltaY,Ve=J(ne,xe,null,Ie)(Ue);Ve||(l.event.stopPropagation(),l.event.preventDefault()),Ue.scrollbarState.wheeling=!1}}).call(p,ne,!0)}xe.attr("transform",function(Ue){return n(Ue.size.l,Ue.size.t)});var me=xe.selectAll("."+d.cn.scrollBackground).data(e.repeat,e.keyFun);me.enter().append("rect").classed(d.cn.scrollBackground,!0).attr("fill","none"),me.attr("width",function(Ue){return Ue.width}).attr("height",function(Ue){return Ue.height}),xe.each(function(Ue){o.setClipUrl(l.select(this),g(ne,Ue),ne)});var ke=xe.selectAll("."+d.cn.yColumn).data(function(Ue){return Ue.columns},e.keyFun);ke.enter().append("g").classed(d.cn.yColumn,!0),ke.exit().remove(),ke.attr("transform",function(Ue){return n(Ue.x,0)}),ie&&ke.call(l.behavior.drag().origin(function(Ue){var Ie=l.select(this);return D(Ie,Ue,-d.uplift),r(this),Ue.calcdata.columnDragInProgress=!0,p(xe.filter(function(Ve){return Ue.calcdata.key===Ve.key}),ne),Ue}).on("drag",function(Ue){var Ie=l.select(this),Ve=function(Yt){return(Ue===Yt?l.event.x:Yt.x)+Yt.columnWidth/2};Ue.x=Math.max(-d.overdrag,Math.min(Ue.calcdata.width+d.overdrag-Ue.columnWidth,l.event.x));var dt=y(ke).filter(function(Yt){return Yt.calcdata.key===Ue.calcdata.key}),Dt=dt.sort(function(Yt,kt){return Ve(Yt)-Ve(kt)});Dt.forEach(function(Yt,kt){Yt.xIndex=kt,Yt.x=Ue===Yt?Yt.x:Yt.xScale(Yt)}),ke.filter(function(Yt){return Ue!==Yt}).transition().ease(d.transitionEase).duration(d.transitionDuration).attr("transform",function(Yt){return n(Yt.x,0)}),Ie.call(c).attr("transform",n(Ue.x,-d.uplift))}).on("dragend",function(Ue){var Ie=l.select(this),Ve=Ue.calcdata;Ue.x=Ue.xScale(Ue),Ue.calcdata.columnDragInProgress=!1,D(Ie,Ue,0),I(ne,Ve,Ve.columns.map(function(dt){return dt.xIndex}))})),ke.each(function(Ue){o.setClipUrl(l.select(this),h(ne,Ue),ne)});var Ae=ke.selectAll("."+d.cn.columnBlock).data(i.splitToPanels,e.keyFun);Ae.enter().append("g").classed(d.cn.columnBlock,!0).attr("id",function(Ue){return Ue.key}),Ae.style("cursor",function(Ue){return Ue.dragHandle?"ew-resize":Ue.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var Ne=Ae.filter(F),He=Ae.filter(O);ie&&He.call(l.behavior.drag().origin(function(Ue){return l.event.stopPropagation(),Ue}).on("drag",J(ne,xe,-1)).on("dragend",function(){})),A(ne,xe,Ne,Ae),A(ne,xe,He,Ae);var Ge=xe.selectAll("."+d.cn.scrollAreaClip).data(e.repeat,e.keyFun);Ge.enter().append("clipPath").classed(d.cn.scrollAreaClip,!0).attr("id",function(Ue){return g(ne,Ue)});var _e=Ge.selectAll("."+d.cn.scrollAreaClipRect).data(e.repeat,e.keyFun);_e.enter().append("rect").classed(d.cn.scrollAreaClipRect,!0).attr("x",-d.overdrag).attr("y",-d.uplift).attr("fill","none"),_e.attr("width",function(Ue){return Ue.width+2*d.overdrag}).attr("height",function(Ue){return Ue.height+d.uplift});var De=ke.selectAll("."+d.cn.columnBoundary).data(e.repeat,e.keyFun);De.enter().append("g").classed(d.cn.columnBoundary,!0);var Ye=ke.selectAll("."+d.cn.columnBoundaryClippath).data(e.repeat,e.keyFun);Ye.enter().append("clipPath").classed(d.cn.columnBoundaryClippath,!0),Ye.attr("id",function(Ue){return h(ne,Ue)});var qe=Ye.selectAll("."+d.cn.columnBoundaryRect).data(e.repeat,e.keyFun);qe.enter().append("rect").classed(d.cn.columnBoundaryRect,!0).attr("fill","none"),qe.attr("width",function(Ue){return Ue.columnWidth+2*u(Ue)}).attr("height",function(Ue){return Ue.calcdata.height+2*u(Ue)+d.uplift}).attr("x",function(Ue){return-u(Ue)}).attr("y",function(Ue){return-u(Ue)}),q(null,He,xe)};function u(Q){return Math.ceil(Q.calcdata.maxLineWidth/2)}function g(Q,ne){return"clip"+Q._fullLayout._uid+"_scrollAreaBottomClip_"+ne.key}function h(Q,ne){return"clip"+Q._fullLayout._uid+"_columnBoundaryClippath_"+ne.calcdata.key+"_"+ne.specIndex}function y(Q){return[].concat.apply([],Q.map(function(ne){return ne})).map(function(ne){return ne.__data__})}function p(Q,ne,ae){function ie(ke){var Ae=ke.rowBlocks;return U(Ae,Ae.length-1)+(Ae.length?V(Ae[Ae.length-1],1/0):1)}var ue=Q.selectAll("."+d.cn.scrollbarKit).data(e.repeat,e.keyFun);ue.enter().append("g").classed(d.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),ue.each(function(ke){var Ae=ke.scrollbarState;Ae.totalHeight=ie(ke),Ae.scrollableAreaHeight=ke.groupHeight-G(ke),Ae.currentlyVisibleHeight=Math.min(Ae.totalHeight,Ae.scrollableAreaHeight),Ae.ratio=Ae.currentlyVisibleHeight/Ae.totalHeight,Ae.barLength=Math.max(Ae.ratio*Ae.currentlyVisibleHeight,d.goldenRatio*d.scrollbarWidth),Ae.barWiggleRoom=Ae.currentlyVisibleHeight-Ae.barLength,Ae.wiggleRoom=Math.max(0,Ae.totalHeight-Ae.scrollableAreaHeight),Ae.topY=Ae.barWiggleRoom===0?0:ke.scrollY/Ae.wiggleRoom*Ae.barWiggleRoom,Ae.bottomY=Ae.topY+Ae.barLength,Ae.dragMultiplier=Ae.wiggleRoom/Ae.barWiggleRoom}).attr("transform",function(ke){var Ae=ke.width+d.scrollbarWidth/2+d.scrollbarOffset;return n(Ae,G(ke))});var xe=ue.selectAll("."+d.cn.scrollbar).data(e.repeat,e.keyFun);xe.enter().append("g").classed(d.cn.scrollbar,!0);var he=xe.selectAll("."+d.cn.scrollbarSlider).data(e.repeat,e.keyFun);he.enter().append("g").classed(d.cn.scrollbarSlider,!0),he.attr("transform",function(ke){return n(0,ke.scrollbarState.topY||0)});var ge=he.selectAll("."+d.cn.scrollbarGlyph).data(e.repeat,e.keyFun);ge.enter().append("line").classed(d.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",d.scrollbarWidth).attr("stroke-linecap","round").attr("y1",d.scrollbarWidth/2),ge.attr("y2",function(ke){return ke.scrollbarState.barLength-d.scrollbarWidth/2}).attr("stroke-opacity",function(ke){return ke.columnDragInProgress||!ke.scrollbarState.barWiggleRoom||ae?0:.4}),ge.transition().delay(0).duration(0),ge.transition().delay(d.scrollbarHideDelay).duration(d.scrollbarHideDuration).attr("stroke-opacity",0);var me=xe.selectAll("."+d.cn.scrollbarCaptureZone).data(e.repeat,e.keyFun);me.enter().append("line").classed(d.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",d.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(ke){var Ae=l.event.y,Ne=this.getBoundingClientRect(),He=ke.scrollbarState,Ge=Ae-Ne.top,_e=l.scale.linear().domain([0,He.scrollableAreaHeight]).range([0,He.totalHeight]).clamp(!0);He.topY<=Ge&&Ge<=He.bottomY||J(ne,Q,null,_e(Ge-He.barLength/2))(ke)}).call(l.behavior.drag().origin(function(ke){return l.event.stopPropagation(),ke.scrollbarState.scrollbarScrollInProgress=!0,ke}).on("drag",J(ne,Q)).on("dragend",function(){})),me.attr("y2",function(ke){return ke.scrollbarState.scrollableAreaHeight}),ne._context.staticPlot&&(ge.remove(),me.remove())}function A(Q,ne,ae,ie){var ue=m(ae),xe=M(ue);f(xe);var he=x(xe);S(he);var ge=_(xe),me=T(ge);L(me),k(me,ne,ie,Q),oe(xe)}function m(Q){var ne=Q.selectAll("."+d.cn.columnCells).data(e.repeat,e.keyFun);return ne.enter().append("g").classed(d.cn.columnCells,!0),ne.exit().remove(),ne}function M(Q){var ne=Q.selectAll("."+d.cn.columnCell).data(i.splitToCells,function(ae){return ae.keyWithinBlock});return ne.enter().append("g").classed(d.cn.columnCell,!0),ne.exit().remove(),ne}function x(Q){var ne=Q.selectAll("."+d.cn.cellRect).data(e.repeat,function(ae){return ae.keyWithinBlock});return ne.enter().append("rect").classed(d.cn.cellRect,!0),ne}function T(Q){var ne=Q.selectAll("."+d.cn.cellText).data(e.repeat,function(ae){return ae.keyWithinBlock});return ne.enter().append("text").classed(d.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){l.event.stopPropagation()}),ne}function _(Q){var ne=Q.selectAll("."+d.cn.cellTextHolder).data(e.repeat,function(ae){return ae.keyWithinBlock});return ne.enter().append("g").classed(d.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),ne}function f(Q){Q.each(function(ne,ae){var ie=ne.calcdata.cells.font,ue=ne.column.specIndex,xe={size:R(ie.size,ue,ae),color:R(ie.color,ue,ae),family:R(ie.family,ue,ae)};ne.rowNumber=ne.key,ne.align=R(ne.calcdata.cells.align,ue,ae),ne.cellBorderWidth=R(ne.calcdata.cells.line.width,ue,ae),ne.font=xe})}function L(Q){Q.each(function(ne){o.font(l.select(this),ne.font)})}function S(Q){Q.attr("width",function(ne){return ne.column.columnWidth}).attr("stroke-width",function(ne){return ne.cellBorderWidth}).each(function(ne){var ae=l.select(this);v.stroke(ae,R(ne.calcdata.cells.line.color,ne.column.specIndex,ne.rowNumber)),v.fill(ae,R(ne.calcdata.cells.fill.color,ne.column.specIndex,ne.rowNumber))})}function k(Q,ne,ae,ie){Q.text(function(ue){var xe=ue.column.specIndex,he=ue.rowNumber,ge=ue.value,me=typeof ge=="string",ke=me&&ge.match(/<br>/i),Ae=!me||ke;ue.mayHaveMarkup=me&&ge.match(/[<&>]/);var Ne=P(ge);ue.latex=Ne;var He=Ne?"":R(ue.calcdata.cells.prefix,xe,he)||"",Ge=Ne?"":R(ue.calcdata.cells.suffix,xe,he)||"",_e=Ne?null:R(ue.calcdata.cells.format,xe,he)||null,De=He+(_e?w(_e)(ue.value):ue.value)+Ge,Ye;ue.wrappingNeeded=!ue.wrapped&&!Ae&&!Ne&&(Ye=z(De)),ue.cellHeightMayIncrease=ke||Ne||ue.mayHaveMarkup||(Ye===void 0?z(De):Ye),ue.needsConvertToTspans=ue.mayHaveMarkup||ue.wrappingNeeded||ue.latex;var qe;if(ue.wrappingNeeded){var Ue=d.wrapSplitCharacter===" "?De.replace(/<a href=/ig,"<a_href="):De,Ie=Ue.split(d.wrapSplitCharacter),Ve=d.wrapSplitCharacter===" "?Ie.map(function(dt){return dt.replace(/<a_href=/ig,"<a href=")}):Ie;ue.fragments=Ve.map(function(dt){return{text:dt,width:null}}),ue.fragments.push({fragment:d.wrapSpacer,width:null}),qe=Ve.join(d.lineBreaker)+d.lineBreaker+d.wrapSpacer}else delete ue.fragments,qe=De;return qe}).attr("dy",function(ue){return ue.needsConvertToTspans?0:"0.75em"}).each(function(ue){var xe=this,he=l.select(xe),ge=ue.wrappingNeeded?Z:se;ue.needsConvertToTspans?a.convertToTspans(he,ie,ge(ae,xe,ne,ie,ue)):l.select(xe.parentNode).attr("transform",function(me){return n(le(me),d.cellPad)}).attr("text-anchor",function(me){return{left:"start",center:"middle",right:"end"}[me.align]})})}function P(Q){return typeof Q=="string"&&Q.match(d.latexCheck)}function z(Q){return Q.indexOf(d.wrapSplitCharacter)!==-1}function I(Q,ne,ae){var ie=ne.gdColumnsOriginalOrder;ne.gdColumns.sort(function(ue,xe){return ae[ie.indexOf(ue)]-ae[ie.indexOf(xe)]}),ne.columnorder=ae,Q.emit("plotly_restyle")}function R(Q,ne,ae){if(Array.isArray(Q)){var ie=Q[Math.min(ne,Q.length-1)];return Array.isArray(ie)?ie[Math.min(ae,ie.length-1)]:ie}else return Q}function D(Q,ne,ae){Q.transition().ease(d.releaseTransitionEase).duration(d.releaseTransitionDuration).attr("transform",n(ne.x,ae))}function O(Q){return Q.type==="cells"}function F(Q){return Q.type==="header"}function G(Q){var ne=Q.rowBlocks.length?Q.rowBlocks[0].auxiliaryBlocks:[];return ne.reduce(function(ae,ie){return ae+V(ie,1/0)},0)}function W(Q,ne,ae){for(var ie=[],ue=0,xe=0;xe<Q.length;xe++){for(var he=Q[xe],ge=he.rows,me=0,ke=0;ke<ge.length;ke++)me+=ge[ke].rowHeight;he.allRowsHeight=me;var Ae=ue+me,Ne=ne,He=Ne+ae;Ne<Ae&&He>ue&&ie.push(xe),ue+=me}return ie}function q(Q,ne,ae){var ie=y(ne)[0];if(ie!==void 0){var ue=ie.rowBlocks,xe=ie.calcdata,he=U(ue,ue.length),ge=ie.calcdata.groupHeight-G(ie),me=xe.scrollY=Math.max(0,Math.min(he-ge,xe.scrollY)),ke=W(ue,me,ge);ke.length===1&&(ke[0]===ue.length-1?ke.unshift(ke[0]-1):ke.push(ke[0]+1)),ke[0]%2&&ke.reverse(),ne.each(function(Ae,Ne){Ae.page=ke[Ne],Ae.scrollY=me}),ne.attr("transform",function(Ae){var Ne=U(Ae.rowBlocks,Ae.page)-Ae.scrollY;return n(0,Ne)}),Q&&(X(Q,ae,ne,ke,ie.prevPages,ie,0),X(Q,ae,ne,ke,ie.prevPages,ie,1),p(ae,Q))}}function J(Q,ne,ae,ie){return function(xe){var he=xe.calcdata?xe.calcdata:xe,ge=ne.filter(function(Ne){return he.key===Ne.key}),me=ae||he.scrollbarState.dragMultiplier,ke=he.scrollY;he.scrollY=ie===void 0?he.scrollY+me*l.event.dy:ie;var Ae=ge.selectAll("."+d.cn.yColumn).selectAll("."+d.cn.columnBlock).filter(O);return q(Q,Ae,ge),he.scrollY===ke}}function X(Q,ne,ae,ie,ue,xe,he){var ge=ie[he]!==ue[he];ge&&(clearTimeout(xe.currentRepaint[he]),xe.currentRepaint[he]=setTimeout(function(){var me=ae.filter(function(ke,Ae){return Ae===he&&ie[Ae]!==ue[Ae]});A(Q,ne,me,ae),ue[he]=ie[he]}))}function Z(Q,ne,ae,ie){return function(){var xe=l.select(ne.parentNode);xe.each(function(he){var ge=he.fragments;xe.selectAll("tspan.line").each(function(De,Ye){ge[Ye].width=this.getComputedTextLength()});var me=ge[ge.length-1].width,ke=ge.slice(0,-1),Ae=[],Ne,He,Ge=0,_e=he.column.columnWidth-2*d.cellPad;for(he.value="";ke.length;)Ne=ke.shift(),He=Ne.width+me,Ge+He>_e&&(he.value+=Ae.join(d.wrapSpacer)+d.lineBreaker,Ae=[],Ge=0),Ae.push(Ne.text),Ge+=He;Ge&&(he.value+=Ae.join(d.wrapSpacer)),he.wrapped=!0}),xe.selectAll("tspan.line").remove(),k(xe.select("."+d.cn.cellText),ae,Q,ie),l.select(ne.parentNode.parentNode).call(oe)}}function se(Q,ne,ae,ie,ue){return function(){if(!ue.settledY){var he=l.select(ne.parentNode),ge=ee(ue),me=ue.key-ge.firstRowIndex,ke=ge.rows[me].rowHeight,Ae=ue.cellHeightMayIncrease?ne.parentNode.getBoundingClientRect().height+2*d.cellPad:ke,Ne=Math.max(Ae,ke),He=Ne-ge.rows[me].rowHeight;He&&(ge.rows[me].rowHeight=Ne,Q.selectAll("."+d.cn.columnCell).call(oe),q(null,Q.filter(O),0),p(ae,ie,!0)),he.attr("transform",function(){var Ge=this,_e=Ge.parentNode,De=_e.getBoundingClientRect(),Ye=l.select(Ge.parentNode).select("."+d.cn.cellRect).node().getBoundingClientRect(),qe=Ge.transform.baseVal.consolidate(),Ue=Ye.top-De.top+(qe?qe.matrix.f:d.cellPad);return n(le(ue,l.select(Ge.parentNode).select("."+d.cn.cellTextHolder).node().getBoundingClientRect().width),Ue)}),ue.settledY=!0}}}function le(Q,ne){switch(Q.align){case"left":return d.cellPad;case"right":return Q.column.columnWidth-(ne||0)-d.cellPad;case"center":return(Q.column.columnWidth-(ne||0))/2;default:return d.cellPad}}function oe(Q){Q.attr("transform",function(ne){var ae=ne.rowBlocks[0].auxiliaryBlocks.reduce(function(he,ge){return he+V(ge,1/0)},0),ie=ee(ne),ue=V(ie,ne.key),xe=ue+ae;return n(0,xe)}).selectAll("."+d.cn.cellRect).attr("height",function(ne){return j(ee(ne),ne.key).rowHeight})}function U(Q,ne){for(var ae=0,ie=ne-1;ie>=0;ie--)ae+=re(Q[ie]);return ae}function V(Q,ne){for(var ae=0,ie=0;ie<Q.rows.length&&Q.rows[ie].rowIndex<ne;ie++)ae+=Q.rows[ie].rowHeight;return ae}function re(Q){var ne=Q.allRowsHeight;if(ne!==void 0)return ne;for(var ae=0,ie=0;ie<Q.rows.length;ie++)ae+=Q.rows[ie].rowHeight;return Q.allRowsHeight=ae,ae}function ee(Q){return Q.rowBlocks[Q.page]}function j(Q,ne){return Q.rows[ne-Q.firstRowIndex]}},{"../../components/color":366,"../../components/drawing":388,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"./constants":1065,"./data_preparation_helper":1066,"./data_split_helpers":1067,"@plotly/d3":58}],1071:[function(t,B,H){var d=t("../../plots/template_attributes").hovertemplateAttrs,l=t("../../plots/template_attributes").texttemplateAttrs,b=t("../../components/colorscale/attributes"),w=t("../../plots/domain").attributes,e=t("../pie/attributes"),o=t("../sunburst/attributes"),a=t("./constants"),r=t("../../lib/extend").extendFlat;B.exports={labels:o.labels,parents:o.parents,values:o.values,branchvalues:o.branchvalues,count:o.count,level:o.level,maxdepth:o.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:r({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:o.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:o.marker.line,editType:"calc"},b("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:r({},e.textfont,{}),editType:"calc"},text:e.text,textinfo:o.textinfo,texttemplate:l({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:o.hoverinfo,hovertemplate:d({},{keys:a.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:r({},e.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:e.sort,root:o.root,domain:w({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":900,"../sunburst/attributes":1045,"./constants":1074}],1072:[function(t,B,H){var d=t("../../plots/plots");H.name="treemap",H.plot=function(l,b,w,e){d.plotBasePlot(H.name,l,b,w,e)},H.clean=function(l,b,w,e){d.cleanBasePlot(H.name,l,b,w,e)}},{"../../plots/plots":619}],1073:[function(t,B,H){var d=t("../sunburst/calc");H.calc=function(l,b){return d.calc(l,b)},H.crossTraceCalc=function(l){return d._runCrossTraceCalc("treemap",l)}},{"../sunburst/calc":1047}],1074:[function(t,B,H){B.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},{}],1075:[function(t,B,H){var d=t("../../lib"),l=t("./attributes"),b=t("../../components/color"),w=t("../../plots/domain").defaults,e=t("../bar/defaults").handleText,o=t("../bar/constants").TEXTPAD,a=t("../../components/colorscale"),r=a.hasColorscale,n=a.handleDefaults;B.exports=function(s,i,v,u){function g(k,P){return d.coerce(s,i,l,k,P)}var h=g("labels"),y=g("parents");if(!h||!h.length||!y||!y.length){i.visible=!1;return}var p=g("values");p&&p.length?g("branchvalues"):g("count"),g("level"),g("maxdepth");var A=g("tiling.packing");A==="squarify"&&g("tiling.squarifyratio"),g("tiling.flip"),g("tiling.pad");var m=g("text");g("texttemplate"),i.texttemplate||g("textinfo",Array.isArray(m)?"text+label":"label"),g("hovertext"),g("hovertemplate");var M=g("pathbar.visible"),x="auto";e(s,i,u,g,x,{hasPathbar:M,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),g("textposition");var T=i.textposition.indexOf("bottom")!==-1,_=g("marker.line.width");_&&g("marker.line.color",u.paper_bgcolor);var f=g("marker.colors"),L=i._hasColorscale=r(s,"marker","colors")||(s.marker||{}).coloraxis;L?n(s,i,u,g,{prefix:"marker.",cLetter:"c"}):g("marker.depthfade",!(f||[]).length);var S=i.textfont.size*2;g("marker.pad.t",T?S/4:S),g("marker.pad.l",S/4),g("marker.pad.r",S/4),g("marker.pad.b",T?S:S/4),i._hovered={marker:{line:{width:2,color:b.contrast(u.paper_bgcolor)}}},M&&(g("pathbar.thickness",i.pathbar.textfont.size+2*o),g("pathbar.side"),g("pathbar.edgeshape")),g("sort"),g("root.color"),w(i,u,g),i._length=null}},{"../../components/color":366,"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/constants":650,"../bar/defaults":652,"./attributes":1071}],1076:[function(t,B,H){var d=t("@plotly/d3"),l=t("../sunburst/helpers"),b=t("../bar/uniform_text"),w=b.clearMinTextSize,e=t("../bar/style").resizeText,o=t("./plot_one");B.exports=function(r,n,c,s,i){var v=i.type,u=i.drawDescendants,g=r._fullLayout,h=g["_"+v+"layer"],y,p,A=!c;if(w(v,g),y=h.selectAll("g.trace."+v).data(n,function(M){return M[0].trace.uid}),y.enter().append("g").classed("trace",!0).classed(v,!0),y.order(),!g.uniformtext.mode&&l.hasTransition(c)){s&&(p=s());var m=d.transition().duration(c.duration).ease(c.easing).each("end",function(){p&&p()}).each("interrupt",function(){p&&p()});m.each(function(){h.selectAll("g.trace").each(function(M){o(r,M,this,c,u)})})}else y.each(function(M){o(r,M,this,c,u)}),g.uniformtext.mode&&e(r,h.selectAll(".trace"),v);A&&y.exit().remove()}},{"../bar/style":662,"../bar/uniform_text":664,"../sunburst/helpers":1051,"./plot_one":1085,"@plotly/d3":58}],1077:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib"),b=t("../../components/drawing"),w=t("../../lib/svg_text_utils"),e=t("./partition"),o=t("./style").styleOne,a=t("./constants"),r=t("../sunburst/helpers"),n=t("../sunburst/fx"),c=!0;B.exports=function(i,v,u,g,h){var y=h.barDifY,p=h.width,A=h.height,m=h.viewX,M=h.viewY,x=h.pathSlice,T=h.toMoveInsideSlice,_=h.strTransform,f=h.hasTransition,L=h.handleSlicesExit,S=h.makeUpdateSliceInterpolator,k=h.makeUpdateTextInterpolator,P={},z=i._fullLayout,I=v[0],R=I.trace,D=I.hierarchy,O=p/R._entryDepth,F=r.listPath(u.data,"id"),G=e(D.copy(),[p,A],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();G=G.filter(function(q){var J=F.indexOf(q.data.id);return J===-1?!1:(q.x0=O*J,q.x1=O*(J+1),q.y0=y,q.y1=y+A,q.onPathbar=!0,!0)}),G.reverse(),g=g.data(G,r.getPtId),g.enter().append("g").classed("pathbar",!0),L(g,c,P,[p,A],x),g.order();var W=g;f&&(W=W.transition().each("end",function(){var q=d.select(this);r.setSliceCursor(q,i,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),W.each(function(q){q._x0=m(q.x0),q._x1=m(q.x1),q._y0=M(q.y0),q._y1=M(q.y1),q._hoverX=m(q.x1-Math.min(p,A)/2),q._hoverY=M(q.y1-A/2);var J=d.select(this),X=l.ensureSingle(J,"path","surface",function(oe){oe.style("pointer-events","all")});f?X.transition().attrTween("d",function(oe){var U=S(oe,c,P,[p,A]);return function(V){return x(U(V))}}):X.attr("d",x),J.call(n,u,i,v,{styleOne:o,eventDataKeys:a.eventDataKeys,transitionTime:a.CLICK_TRANSITION_TIME,transitionEasing:a.CLICK_TRANSITION_EASING}).call(r.setSliceCursor,i,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:i._transitioning}),X.call(o,q,R,{hovered:!1}),q._text=(r.getPtLabel(q)||"").split("<br>").join(" ")||"";var Z=l.ensureSingle(J,"g","slicetext"),se=l.ensureSingle(Z,"text","",function(oe){oe.attr("data-notex",1)}),le=l.ensureUniformFontSize(i,r.determineTextFont(R,q,z.font,{onPathbar:!0}));se.text(q._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(b.font,le).call(w.convertToTspans,i),q.textBB=b.bBox(se.node()),q.transform=T(q,{fontSize:le.size,onPathbar:!0}),q.transform.fontSize=le.size,f?se.transition().attrTween("transform",function(oe){var U=k(oe,c,P,[p,A]);return function(V){return _(U(V))}}):se.attr("transform",_(q))})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1050,"../sunburst/helpers":1051,"./constants":1074,"./partition":1083,"./style":1086,"@plotly/d3":58}],1078:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib"),b=t("../../components/drawing"),w=t("../../lib/svg_text_utils"),e=t("./partition"),o=t("./style").styleOne,a=t("./constants"),r=t("../sunburst/helpers"),n=t("../sunburst/fx"),c=t("../sunburst/plot").formatSliceLabel,s=!1;B.exports=function(v,u,g,h,y){var p=y.width,A=y.height,m=y.viewX,M=y.viewY,x=y.pathSlice,T=y.toMoveInsideSlice,_=y.strTransform,f=y.hasTransition,L=y.handleSlicesExit,S=y.makeUpdateSliceInterpolator,k=y.makeUpdateTextInterpolator,P=y.prevEntry,z={},I=v._fullLayout,R=u[0],D=R.trace,O=D.textposition.indexOf("left")!==-1,F=D.textposition.indexOf("right")!==-1,G=D.textposition.indexOf("bottom")!==-1,W=!G&&!D.marker.pad.t||G&&!D.marker.pad.b,q=e(g,[p,A],{packing:D.tiling.packing,squarifyratio:D.tiling.squarifyratio,flipX:D.tiling.flip.indexOf("x")>-1,flipY:D.tiling.flip.indexOf("y")>-1,pad:{inner:D.tiling.pad,top:D.marker.pad.t,left:D.marker.pad.l,right:D.marker.pad.r,bottom:D.marker.pad.b}}),J=q.descendants(),X=1/0,Z=-1/0;J.forEach(function(V){var re=V.depth;re>=D._maxDepth?(V.x0=V.x1=(V.x0+V.x1)/2,V.y0=V.y1=(V.y0+V.y1)/2):(X=Math.min(X,re),Z=Math.max(Z,re))}),h=h.data(J,r.getPtId),D._maxVisibleLayers=isFinite(Z)?Z-X+1:0,h.enter().append("g").classed("slice",!0),L(h,s,z,[p,A],x),h.order();var se=null;if(f&&P){var le=r.getPtId(P);h.each(function(V){se===null&&r.getPtId(V)===le&&(se={x0:V.x0,x1:V.x1,y0:V.y0,y1:V.y1})})}var oe=function(){return se||{x0:0,x1:p,y0:0,y1:A}},U=h;return f&&(U=U.transition().each("end",function(){var V=d.select(this);r.setSliceCursor(V,v,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),U.each(function(V){var re=r.isHeader(V,D);V._x0=m(V.x0),V._x1=m(V.x1),V._y0=M(V.y0),V._y1=M(V.y1),V._hoverX=m(V.x1-D.marker.pad.r),V._hoverY=M(G?V.y1-D.marker.pad.b/2:V.y0+D.marker.pad.t/2);var ee=d.select(this),j=l.ensureSingle(ee,"path","surface",function(ie){ie.style("pointer-events","all")});f?j.transition().attrTween("d",function(ie){var ue=S(ie,s,oe(),[p,A]);return function(xe){return x(ue(xe))}}):j.attr("d",x),ee.call(n,g,v,u,{styleOne:o,eventDataKeys:a.eventDataKeys,transitionTime:a.CLICK_TRANSITION_TIME,transitionEasing:a.CLICK_TRANSITION_EASING}).call(r.setSliceCursor,v,{isTransitioning:v._transitioning}),j.call(o,V,D,{hovered:!1}),V.x0===V.x1||V.y0===V.y1?V._text="":re?V._text=W?"":r.getPtLabel(V)||"":V._text=c(V,g,D,u,I)||"";var Q=l.ensureSingle(ee,"g","slicetext"),ne=l.ensureSingle(Q,"text","",function(ie){ie.attr("data-notex",1)}),ae=l.ensureUniformFontSize(v,r.determineTextFont(D,V,I.font));ne.text(V._text||" ").classed("slicetext",!0).attr("text-anchor",F?"end":O||re?"start":"middle").call(b.font,ae).call(w.convertToTspans,v),V.textBB=b.bBox(ne.node()),V.transform=T(V,{fontSize:ae.size,isHeader:re}),V.transform.fontSize=ae.size,f?ne.transition().attrTween("transform",function(ie){var ue=k(ie,s,oe(),[p,A]);return function(xe){return _(ue(xe))}}):ne.attr("transform",_(V))}),se}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1050,"../sunburst/helpers":1051,"../sunburst/plot":1055,"./constants":1074,"./partition":1083,"./style":1086,"@plotly/d3":58}],1079:[function(t,B,H){B.exports=function d(l,b,w){var e;w.swapXY&&(e=l.x0,l.x0=l.y0,l.y0=e,e=l.x1,l.x1=l.y1,l.y1=e),w.flipX&&(e=l.x0,l.x0=b[0]-l.x1,l.x1=b[0]-e),w.flipY&&(e=l.y0,l.y0=b[1]-l.y1,l.y1=b[1]-e);var o=l.children;if(o)for(var a=0;a<o.length;a++)d(o[a],b,w)}},{}],1080:[function(t,B,H){B.exports={moduleType:"trace",name:"treemap",basePlotModule:t("./base_plot"),categories:[],animatable:!0,attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./calc").crossTraceCalc,plot:t("./plot"),style:t("./style").style,colorbar:t("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":944,"./attributes":1071,"./base_plot":1072,"./calc":1073,"./defaults":1075,"./layout_attributes":1081,"./layout_defaults":1082,"./plot":1084,"./style":1086}],1081:[function(t,B,H){B.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1082:[function(t,B,H){var d=t("../../lib"),l=t("./layout_attributes");B.exports=function(w,e){function o(a,r){return d.coerce(w,e,l,a,r)}o("treemapcolorway",e.colorway),o("extendtreemapcolors")}},{"../../lib":503,"./layout_attributes":1081}],1083:[function(t,B,H){var d=t("d3-hierarchy"),l=t("./flip_tree");B.exports=function(e,o,a){var r=a.flipX,n=a.flipY,c=a.packing==="dice-slice",s=a.pad[n?"bottom":"top"],i=a.pad[r?"right":"left"],v=a.pad[r?"left":"right"],u=a.pad[n?"top":"bottom"],g;c&&(g=i,i=s,s=g,g=v,v=u,u=g);var h=d.treemap().tile(b(a.packing,a.squarifyratio)).paddingInner(a.pad.inner).paddingLeft(i).paddingRight(v).paddingTop(s).paddingBottom(u).size(c?[o[1],o[0]]:o)(e);return(c||r||n)&&l(h,o,{swapXY:c,flipX:r,flipY:n}),h};function b(w,e){switch(w){case"squarify":return d.treemapSquarify.ratio(e);case"binary":return d.treemapBinary;case"dice":return d.treemapDice;case"slice":return d.treemapSlice;default:return d.treemapSliceDice}}},{"./flip_tree":1079,"d3-hierarchy":115}],1084:[function(t,B,H){var d=t("./draw"),l=t("./draw_descendants");B.exports=function(w,e,o,a){return d(w,e,o,a,{type:"treemap",drawDescendants:l})}},{"./draw":1076,"./draw_descendants":1078}],1085:[function(t,B,H){var d=t("@plotly/d3"),l=t("d3-interpolate").interpolate,b=t("../sunburst/helpers"),w=t("../../lib"),e=t("../bar/constants").TEXTPAD,o=t("../bar/plot"),a=o.toMoveInsideBar,r=t("../bar/uniform_text"),n=r.recordMinTextSize,c=t("./constants"),s=t("./draw_ancestors");function i(v){return b.isHierarchyRoot(v)?"":b.getPtId(v)}B.exports=function(u,g,h,y,p){var A=u._fullLayout,m=g[0],M=m.trace,x=M.type,T=x==="icicle",_=m.hierarchy,f=b.findEntryWithLevel(_,M.level),L=d.select(h),S=L.selectAll("g.pathbar"),k=L.selectAll("g.slice");if(!f){S.remove(),k.remove();return}var P=b.isHierarchyRoot(f),z=!A.uniformtext.mode&&b.hasTransition(y),I=b.getMaxDepth(M),R=function(Ve){return Ve.data.depth-f.data.depth<I},D=A._size,O=M.domain,F=D.w*(O.x[1]-O.x[0]),G=D.h*(O.y[1]-O.y[0]),W=F,q=M.pathbar.thickness,J=M.marker.line.width+c.gapWithPathbar,X=M.pathbar.visible?M.pathbar.side.indexOf("bottom")>-1?G+J:-(q+J):0,Z={x0:W,x1:W,y0:X,y1:X+q},se=function(Ve,dt,Dt){var Yt=M.tiling.pad,kt=function(St){return St-Yt<=dt.x0},Ft=function(St){return St+Yt>=dt.x1},Nt=function(St){return St-Yt<=dt.y0},Lt=function(St){return St+Yt>=dt.y1};return Ve.x0===dt.x0&&Ve.x1===dt.x1&&Ve.y0===dt.y0&&Ve.y1===dt.y1?{x0:Ve.x0,x1:Ve.x1,y0:Ve.y0,y1:Ve.y1}:{x0:kt(Ve.x0-Yt)?0:Ft(Ve.x0-Yt)?Dt[0]:Ve.x0,x1:kt(Ve.x1+Yt)?0:Ft(Ve.x1+Yt)?Dt[0]:Ve.x1,y0:Nt(Ve.y0-Yt)?0:Lt(Ve.y0-Yt)?Dt[1]:Ve.y0,y1:Nt(Ve.y1+Yt)?0:Lt(Ve.y1+Yt)?Dt[1]:Ve.y1}},le=null,oe={},U={},V=null,re=function(Ve,dt){return dt?oe[i(Ve)]:U[i(Ve)]},ee=function(Ve,dt,Dt,Yt){if(dt)return oe[i(_)]||Z;var kt=U[M.level]||Dt;return R(Ve)?se(Ve,kt,Yt):{}};m.hasMultipleRoots&&P&&I++,M._maxDepth=I,M._backgroundColor=A.paper_bgcolor,M._entryDepth=f.data.depth,M._atRootLevel=P;var j=-F/2+D.l+D.w*(O.x[1]+O.x[0])/2,Q=-G/2+D.t+D.h*(1-(O.y[1]+O.y[0])/2),ne=function(Ve){return j+Ve},ae=function(Ve){return Q+Ve},ie=ae(0),ue=ne(0),xe=function(Ve){return ue+Ve},he=function(Ve){return ie+Ve};function ge(Ve,dt){return Ve+","+dt}var me=xe(0),ke=function(Ve){Ve.x=Math.max(me,Ve.x)},Ae=M.pathbar.edgeshape,Ne=function(Ve){var dt=xe(Math.max(Math.min(Ve.x0,Ve.x0),0)),Dt=xe(Math.min(Math.max(Ve.x1,Ve.x1),W)),Yt=he(Ve.y0),kt=he(Ve.y1),Ft=q/2,Nt={},Lt={};Nt.x=dt,Lt.x=Dt,Nt.y=Lt.y=(Yt+kt)/2;var St={x:dt,y:Yt},it={x:Dt,y:Yt},ht={x:Dt,y:kt},Qe={x:dt,y:kt};return Ae===">"?(St.x-=Ft,it.x-=Ft,ht.x-=Ft,Qe.x-=Ft):Ae==="/"?(ht.x-=Ft,Qe.x-=Ft,Nt.x-=Ft/2,Lt.x-=Ft/2):Ae==="\\"?(St.x-=Ft,it.x-=Ft,Nt.x-=Ft/2,Lt.x-=Ft/2):Ae==="<"&&(Nt.x-=Ft,Lt.x-=Ft),ke(St),ke(Qe),ke(Nt),ke(it),ke(ht),ke(Lt),"M"+ge(St.x,St.y)+"L"+ge(it.x,it.y)+"L"+ge(Lt.x,Lt.y)+"L"+ge(ht.x,ht.y)+"L"+ge(Qe.x,Qe.y)+"L"+ge(Nt.x,Nt.y)+"Z"},He=function(Ve){var dt=ne(Ve.x0),Dt=ne(Ve.x1),Yt=ae(Ve.y0),kt=ae(Ve.y1),Ft=Dt-dt,Nt=kt-Yt;if(!Ft||!Nt)return"";var Lt=0,St=Ft>2*Lt&&Nt>2*Lt?Lt:0,it=function(ht,Qe){return St?"a"+ge(St,St)+" 0 0 1 "+ge(ht,Qe):""};return"M"+ge(dt,Yt+St)+it(St,-St)+"L"+ge(Dt-St,Yt)+it(St,St)+"L"+ge(Dt,kt-St)+it(-St,St)+"L"+ge(dt+St,kt)+it(-St,-St)+"Z"},Ge=function(Ve,dt){var Dt=Ve.x0,Yt=Ve.x1,kt=Ve.y0,Ft=Ve.y1,Nt=Ve.textBB,Lt=function(Ot){return M.textposition.indexOf(Ot)!==-1},St=Lt("bottom"),it=Lt("top")||dt.isHeader&&!St,ht=it?"start":St?"end":"middle",Qe=Lt("right"),Ce=Lt("left")||dt.onPathbar,je=Ce?-1:Qe?1:0,rt=M[T?"tiling":"marker"].pad;if(dt.isHeader){if(Dt+=(T?rt:rt.l)-e,Yt-=(T?rt:rt.r)-e,Dt>=Yt){var ut=(Dt+Yt)/2;Dt=ut,Yt=ut}var Pt;St?(Pt=Ft-(T?rt:rt.b),kt<Pt&&Pt<Ft&&(kt=Pt)):(Pt=kt+(T?rt:rt.t),kt<Pt&&Pt<Ft&&(Ft=Pt))}var Tt=a(Dt,Yt,kt,Ft,Nt,{isHorizontal:!1,constrained:!0,angle:0,anchor:ht,leftToRight:je});return Tt.fontSize=dt.fontSize,Tt.targetX=ne(Tt.targetX),Tt.targetY=ae(Tt.targetY),isNaN(Tt.targetX)||isNaN(Tt.targetY)?{}:(Dt!==Yt&&kt!==Ft&&n(M.type,Tt,A),{scale:Tt.scale,rotate:Tt.rotate,textX:Tt.textX,textY:Tt.textY,anchorX:Tt.anchorX,anchorY:Tt.anchorY,targetX:Tt.targetX,targetY:Tt.targetY})},_e=function(Ve,dt){for(var Dt,Yt=0,kt=Ve;!Dt&&Yt<I;)Yt++,kt=kt.parent,kt?Dt=re(kt,dt):Yt=I;return Dt||{}},De=function(Ve,dt,Dt,Yt){var kt=re(Ve,dt),Ft;if(dt)Ft=Z;else{var Nt=re(f,dt);Nt?Ft=se(Ve,Nt,Yt):Ft={}}return l(kt,Ft)},Ye=function(Ve,dt,Dt,Yt,kt){var Ft=re(Ve,dt),Nt;if(Ft)Nt=Ft;else if(dt)Nt=Z;else if(le)if(Ve.parent){var Lt=V||Dt;Lt&&!dt?Nt=se(Ve,Lt,Yt):(Nt={},w.extendFlat(Nt,_e(Ve,dt)))}else Nt=w.extendFlat({},Ve),T&&(kt.orientation==="h"?kt.flipX?Nt.x0=Ve.x1:Nt.x1=0:kt.flipY?Nt.y0=Ve.y1:Nt.y1=0);else Nt={};return l(Nt,{x0:Ve.x0,x1:Ve.x1,y0:Ve.y0,y1:Ve.y1})},qe=function(Ve,dt,Dt,Yt){var kt=re(Ve,dt),Ft={},Nt=ee(Ve,dt,Dt,Yt);w.extendFlat(Ft,{transform:Ge({x0:Nt.x0,x1:Nt.x1,y0:Nt.y0,y1:Nt.y1,textBB:Ve.textBB,_text:Ve._text},{isHeader:b.isHeader(Ve,M)})}),kt?Ft=kt:Ve.parent&&w.extendFlat(Ft,_e(Ve,dt));var Lt=Ve.transform;return Ve.x0!==Ve.x1&&Ve.y0!==Ve.y1&&n(M.type,Lt,A),l(Ft,{transform:{scale:Lt.scale,rotate:Lt.rotate,textX:Lt.textX,textY:Lt.textY,anchorX:Lt.anchorX,anchorY:Lt.anchorY,targetX:Lt.targetX,targetY:Lt.targetY}})},Ue=function(Ve,dt,Dt,Yt,kt){var Ft=Yt[0],Nt=Yt[1];z?Ve.exit().transition().each(function(){var Lt=d.select(this),St=Lt.select("path.surface");St.transition().attrTween("d",function(ht){var Qe=De(ht,dt,Dt,[Ft,Nt]);return function(Ce){return kt(Qe(Ce))}});var it=Lt.select("g.slicetext");it.attr("opacity",0)}).remove():Ve.exit().remove()},Ie=function(Ve){var dt=Ve.transform;return Ve.x0!==Ve.x1&&Ve.y0!==Ve.y1&&n(M.type,dt,A),w.getTextTransform({textX:dt.textX,textY:dt.textY,anchorX:dt.anchorX,anchorY:dt.anchorY,targetX:dt.targetX,targetY:dt.targetY,scale:dt.scale,rotate:dt.rotate})};z&&(S.each(function(Ve){oe[i(Ve)]={x0:Ve.x0,x1:Ve.x1,y0:Ve.y0,y1:Ve.y1},Ve.transform&&(oe[i(Ve)].transform={textX:Ve.transform.textX,textY:Ve.transform.textY,anchorX:Ve.transform.anchorX,anchorY:Ve.transform.anchorY,targetX:Ve.transform.targetX,targetY:Ve.transform.targetY,scale:Ve.transform.scale,rotate:Ve.transform.rotate})}),k.each(function(Ve){U[i(Ve)]={x0:Ve.x0,x1:Ve.x1,y0:Ve.y0,y1:Ve.y1},Ve.transform&&(U[i(Ve)].transform={textX:Ve.transform.textX,textY:Ve.transform.textY,anchorX:Ve.transform.anchorX,anchorY:Ve.transform.anchorY,targetX:Ve.transform.targetX,targetY:Ve.transform.targetY,scale:Ve.transform.scale,rotate:Ve.transform.rotate}),!le&&b.isEntry(Ve)&&(le=Ve)})),V=p(u,g,f,k,{width:F,height:G,viewX:ne,viewY:ae,pathSlice:He,toMoveInsideSlice:Ge,prevEntry:le,makeUpdateSliceInterpolator:Ye,makeUpdateTextInterpolator:qe,handleSlicesExit:Ue,hasTransition:z,strTransform:Ie}),M.pathbar.visible?s(u,g,f,S,{barDifY:X,width:W,height:q,viewX:xe,viewY:he,pathSlice:Ne,toMoveInsideSlice:Ge,makeUpdateSliceInterpolator:Ye,makeUpdateTextInterpolator:qe,handleSlicesExit:Ue,hasTransition:z,strTransform:Ie}):S.remove()}},{"../../lib":503,"../bar/constants":650,"../bar/plot":659,"../bar/uniform_text":664,"../sunburst/helpers":1051,"./constants":1074,"./draw_ancestors":1077,"@plotly/d3":58,"d3-interpolate":116}],1086:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../components/color"),b=t("../../lib"),w=t("../sunburst/helpers"),e=t("../bar/uniform_text").resizeText;function o(r){var n=r._fullLayout._treemaplayer.selectAll(".trace");e(r,n,"treemap"),n.each(function(c){var s=d.select(this),i=c[0],v=i.trace;s.style("opacity",v.opacity),s.selectAll("path.surface").each(function(u){d.select(this).call(a,u,v,{hovered:!1})})})}function a(r,n,c,s){var i=(s||{}).hovered,v=n.data.data,u=v.i,g,h,y=v.color,p=w.isHierarchyRoot(n),A=1;if(i)g=c._hovered.marker.line.color,h=c._hovered.marker.line.width;else if(p&&y===c.root.color)A=100,g="rgba(0,0,0,0)",h=0;else if(g=b.castOption(c,u,"marker.line.color")||l.defaultLine,h=b.castOption(c,u,"marker.line.width")||0,!c._hasColorscale&&!n.onPathbar){var m=c.marker.depthfade;if(m){var M=l.combine(l.addOpacity(c._backgroundColor,.75),y),x;if(m===!0){var T=w.getMaxDepth(c);isFinite(T)?w.isLeaf(n)?x=0:x=c._maxVisibleLayers-(n.data.depth-c._entryDepth):x=n.data.height+1}else x=n.data.depth-c._entryDepth,c._atRootLevel||x++;if(x>0)for(var _=0;_<x;_++){var f=.5*_/x;y=l.combine(l.addOpacity(M,f),y)}}}r.style("stroke-width",h).call(l.fill,y).call(l.stroke,g).style("opacity",A)}B.exports={style:o,styleOne:a}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"../sunburst/helpers":1051,"@plotly/d3":58}],1087:[function(t,B,H){var d=t("../box/attributes"),l=t("../../lib/extend").extendFlat,b=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat;B.exports={y:d.y,x:d.x,x0:d.x0,y0:d.y0,xhoverformat:b("x"),yhoverformat:b("y"),name:l({},d.name,{}),orientation:l({},d.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:d.fillcolor,points:l({},d.boxpoints,{}),jitter:l({},d.jitter,{}),pointpos:l({},d.pointpos,{}),width:l({},d.width,{}),marker:d.marker,text:d.text,hovertext:d.hovertext,hovertemplate:d.hovertemplate,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:d.offsetgroup,alignmentgroup:d.alignmentgroup,selected:d.selected,unselected:d.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../box/attributes":673}],1088:[function(t,B,H){var d=t("../../lib"),l=t("../../plots/cartesian/axes"),b=t("../box/calc"),w=t("./helpers"),e=t("../../constants/numerical").BADNUM;B.exports=function(c,s){var i=b(c,s);if(i[0].t.empty)return i;for(var v=c._fullLayout,u=l.getFromId(c,s[s.orientation==="h"?"xaxis":"yaxis"]),g=1/0,h=-1/0,y=0,p=0,A=0;A<i.length;A++){var m=i[A],M=m.pts.map(w.extractVal),x=m.bandwidth=a(s,m,M),T=m.span=r(s,m,u,x);if(m.min===m.max&&x===0)T=m.span=[m.min,m.max],m.density=[{v:1,t:T[0]}],m.bandwidth=x,y=Math.max(y,1);else{var _=T[1]-T[0],f=Math.ceil(_/(x/3)),L=_/f;if(!isFinite(L)||!isFinite(f))return d.error("Something went wrong with computing the violin span"),i[0].t.empty=!0,i;var S=w.makeKDE(m,s,M);m.density=new Array(f);for(var k=0,P=T[0];P<T[1]+L/2;k++,P+=L){var z=S(P);m.density[k]={v:z,t:P},y=Math.max(y,z)}}p=Math.max(p,M.length),g=Math.min(g,T[0]),h=Math.max(h,T[1])}var I=l.findExtremes(u,[g,h],{padded:!0});if(s._extremes[u._id]=I,s.width)i[0].t.maxKDE=y;else{var R=v._violinScaleGroupStats,D=s.scalegroup,O=R[D];O?(O.maxKDE=Math.max(O.maxKDE,y),O.maxCount=Math.max(O.maxCount,p)):R[D]={maxKDE:y,maxCount:p}}return i[0].t.labels.kde=d._(c,"kde:"),i};function o(n,c,s){var i=Math.min(c,s/1.349);return 1.059*i*Math.pow(n,-.2)}function a(n,c,s){var i=c.max-c.min;if(!i)return n.bandwidth?n.bandwidth:0;if(n.bandwidth)return Math.max(n.bandwidth,i/1e4);var v=s.length,u=d.stdev(s,v-1,c.mean);return Math.max(o(v,u,c.q3-c.q1),i/100)}function r(n,c,s,i){var v=n.spanmode,u=n.span||[],g=[c.min,c.max],h=[c.min-2*i,c.max+2*i],y;function p(m){var M=u[m],x=s.type==="multicategory"?s.r2c(M):s.d2c(M,0,n[c.valLetter+"calendar"]);return x===e?h[m]:x}v==="soft"?y=h:v==="hard"?y=g:y=[p(0),p(1)];var A={type:"linear",range:y};return l.setConvert(A),A.cleanRange(),y}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../box/calc":674,"./helpers":1091}],1089:[function(t,B,H){var d=t("../box/cross_trace_calc").setPositionOffset,l=["v","h"];B.exports=function(w,e){for(var o=w.calcdata,a=e.xaxis,r=e.yaxis,n=0;n<l.length;n++){for(var c=l[n],s=c==="h"?r:a,i=[],v=0;v<o.length;v++){var u=o[v],g=u[0].t,h=u[0].trace;h.visible===!0&&h.type==="violin"&&!g.empty&&h.orientation===c&&h.xaxis===a._id&&h.yaxis===r._id&&i.push(v)}d("violin",w,i,s)}}},{"../box/cross_trace_calc":675}],1090:[function(t,B,H){var d=t("../../lib"),l=t("../../components/color"),b=t("../box/defaults"),w=t("./attributes");B.exports=function(o,a,r,n){function c(L,S){return d.coerce(o,a,w,L,S)}function s(L,S){return d.coerce2(o,a,w,L,S)}if(b.handleSampleDefaults(o,a,c,n),a.visible!==!1){c("bandwidth"),c("side");var i=c("width");i||(c("scalegroup",a.name),c("scalemode"));var v=c("span"),u;Array.isArray(v)&&(u="manual"),c("spanmode",u);var g=c("line.color",(o.marker||{}).color||r),h=c("line.width"),y=c("fillcolor",l.addOpacity(a.line.color,.5));b.handlePointsDefaults(o,a,c,{prefix:""});var p=s("box.width"),A=s("box.fillcolor",y),m=s("box.line.color",g),M=s("box.line.width",h),x=c("box.visible",Boolean(p||A||m||M));x||(a.box={visible:!1});var T=s("meanline.color",g),_=s("meanline.width",h),f=c("meanline.visible",Boolean(T||_));f||(a.meanline={visible:!1})}}},{"../../components/color":366,"../../lib":503,"../box/defaults":676,"./attributes":1087}],1091:[function(t,B,H){var d=t("../../lib"),l={gaussian:function(b){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*b*b)}};H.makeKDE=function(b,w,e){var o=e.length,a=l.gaussian,r=b.bandwidth,n=1/(o*r);return function(c){for(var s=0,i=0;i<o;i++)s+=a((c-e[i])/r);return n*s}},H.getPositionOnKdePath=function(b,w,e){var o,a;w.orientation==="h"?(o="y",a="x"):(o="x",a="y");var r=d.findPointOnPath(b.path,e,a,{pathLength:b.pathLength}),n=b.posCenterPx,c=r[o],s=w.side==="both"?2*n-c:n;return[c,s]},H.getKdeValue=function(b,w,e){var o=b.pts.map(H.extractVal),a=H.makeKDE(b,w,o);return a(e)/b.posDensityScale},H.extractVal=function(b){return b.v}},{"../../lib":503}],1092:[function(t,B,H){var d=t("../../lib"),l=t("../../plots/cartesian/axes"),b=t("../box/hover"),w=t("./helpers");B.exports=function(o,a,r,n,c){c||(c={});var s=c.hoverLayer,i=o.cd,v=i[0].trace,u=v.hoveron,g=u.indexOf("violins")!==-1,h=u.indexOf("kde")!==-1,y=[],p,A;if(g||h){var m=b.hoverOnBoxes(o,a,r,n);if(h&&m.length>0){var M=o.xa,x=o.ya,T,_,f,L,S;v.orientation==="h"?(S=a,T="y",f=x,_="x",L=M):(S=r,T="x",f=M,_="y",L=x);var k=i[o.index];if(S>=k.span[0]&&S<=k.span[1]){var P=d.extendFlat({},o),z=L.c2p(S,!0),I=w.getKdeValue(k,v,S),R=w.getPositionOnKdePath(k,v,z),D=f._offset,O=f._length;P[T+"0"]=R[0],P[T+"1"]=R[1],P[_+"0"]=P[_+"1"]=z,P[_+"Label"]=_+": "+l.hoverLabelText(L,S,v[_+"hoverformat"])+", "+i[0].t.labels.kde+" "+I.toFixed(3),P.spikeDistance=m[0].spikeDistance;var F=T+"Spike";P[F]=m[0][F],m[0].spikeDistance=void 0,m[0][F]=void 0,P.hovertemplate=!1,y.push(P),A={stroke:o.color},A[T+"1"]=d.constrain(D+R[0],D,D+O),A[T+"2"]=d.constrain(D+R[1],D,D+O),A[_+"1"]=A[_+"2"]=L._offset+z}}g&&(y=y.concat(m))}u.indexOf("points")!==-1&&(p=b.hoverOnPoints(o,a,r));var G=s.selectAll(".violinline-"+v.uid).data(A?[0]:[]);return G.enter().append("line").classed("violinline-"+v.uid,!0).attr("stroke-width",1.5),G.exit().remove(),G.attr(A),n==="closest"?p?[p]:y:(p&&y.push(p),y)}},{"../../lib":503,"../../plots/cartesian/axes":554,"../box/hover":678,"./helpers":1091}],1093:[function(t,B,H){B.exports={attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),crossTraceCalc:t("./cross_trace_calc"),plot:t("./plot"),style:t("./style"),styleOnSelect:t("../scatter/style").styleOnSelect,hoverPoints:t("./hover"),selectPoints:t("../box/select"),moduleType:"trace",name:"violin",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../box/defaults":676,"../box/select":683,"../scatter/style":950,"./attributes":1087,"./calc":1088,"./cross_trace_calc":1089,"./defaults":1090,"./hover":1092,"./layout_attributes":1094,"./layout_defaults":1095,"./plot":1096,"./style":1097}],1094:[function(t,B,H){var d=t("../box/layout_attributes"),l=t("../../lib").extendFlat;B.exports={violinmode:l({},d.boxmode,{}),violingap:l({},d.boxgap,{}),violingroupgap:l({},d.boxgroupgap,{})}},{"../../lib":503,"../box/layout_attributes":680}],1095:[function(t,B,H){var d=t("../../lib"),l=t("./layout_attributes"),b=t("../box/layout_defaults");B.exports=function(e,o,a){function r(n,c){return d.coerce(e,o,l,n,c)}b._supply(e,o,a,r,"violin")}},{"../../lib":503,"../box/layout_defaults":681,"./layout_attributes":1094}],1096:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib"),b=t("../../components/drawing"),w=t("../box/plot"),e=t("../scatter/line_points"),o=t("./helpers");B.exports=function(r,n,c,s){var i=r._fullLayout,v=n.xaxis,u=n.yaxis;function g(h){var y=e(h,{xaxis:v,yaxis:u,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return b.smoothopen(y[0],1)}l.makeTraceGroups(s,c,"trace violins").each(function(h){var y=d.select(this),p=h[0],A=p.t,m=p.trace;if(m.visible!==!0||A.empty){y.remove();return}var M=A.bPos,x=A.bdPos,T=n[A.valLetter+"axis"],_=n[A.posLetter+"axis"],f=m.side==="both",L=f||m.side==="positive",S=f||m.side==="negative",k=y.selectAll("path.violin").data(l.identity);k.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),k.exit().remove(),k.each(function(G){var W=d.select(this),q=G.density,J=q.length,X=_.c2l(G.pos+M,!0),Z=_.l2p(X),se;if(m.width)se=A.maxKDE/x;else{var le=i._violinScaleGroupStats[m.scalegroup];se=m.scalemode==="count"?le.maxKDE/x*(le.maxCount/G.pts.length):le.maxKDE/x}var oe,U,V,re,ee,j,Q;if(L){for(j=new Array(J),re=0;re<J;re++)Q=j[re]={},Q[A.posLetter]=X+q[re].v/se,Q[A.valLetter]=T.c2l(q[re].t,!0);oe=g(j)}if(S){for(j=new Array(J),ee=0,re=J-1;ee<J;ee++,re--)Q=j[ee]={},Q[A.posLetter]=X-q[re].v/se,Q[A.valLetter]=T.c2l(q[re].t,!0);U=g(j)}if(f)V=oe+"L"+U.substr(1)+"Z";else{var ne=[Z,T.c2p(q[0].t)],ae=[Z,T.c2p(q[J-1].t)];m.orientation==="h"&&(ne.reverse(),ae.reverse()),L?V="M"+ne+"L"+oe.substr(1)+"L"+ae:V="M"+ae+"L"+U.substr(1)+"L"+ne}W.attr("d",V),G.posCenterPx=Z,G.posDensityScale=se*x,G.path=W.node(),G.pathLength=G.path.getTotalLength()/(f?2:1)});var P=m.box,z=P.width,I=(P.line||{}).width,R,D;f?(R=x*z,D=0):L?(R=[0,x*z/2],D=I*{x:1,y:-1}[A.posLetter]):(R=[x*z/2,0],D=I*{x:-1,y:1}[A.posLetter]),w.plotBoxAndWhiskers(y,{pos:_,val:T},m,{bPos:M,bdPos:R,bPosPxOffset:D}),w.plotBoxMean(y,{pos:_,val:T},m,{bPos:M,bdPos:R,bPosPxOffset:D});var O;!m.box.visible&&m.meanline.visible&&(O=l.identity);var F=y.selectAll("path.meanline").data(O||[]);F.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),F.exit().remove(),F.each(function(G){var W=T.c2p(G.mean,!0),q=o.getPositionOnKdePath(G,m,W);d.select(this).attr("d",m.orientation==="h"?"M"+W+","+q[0]+"V"+q[1]:"M"+q[0]+","+W+"H"+q[1])}),w.plotPoints(y,{x:v,y:u},m,A)})}},{"../../components/drawing":388,"../../lib":503,"../box/plot":682,"../scatter/line_points":940,"./helpers":1091,"@plotly/d3":58}],1097:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../components/color"),b=t("../scatter/style").stylePoints;B.exports=function(e){var o=d.select(e).selectAll("g.trace.violins");o.style("opacity",function(a){return a[0].trace.opacity}),o.each(function(a){var r=a[0].trace,n=d.select(this),c=r.box||{},s=c.line||{},i=r.meanline||{},v=i.width;n.selectAll("path.violin").style("stroke-width",r.line.width+"px").call(l.stroke,r.line.color).call(l.fill,r.fillcolor),n.selectAll("path.box").style("stroke-width",s.width+"px").call(l.stroke,s.color).call(l.fill,c.fillcolor);var u={"stroke-width":v+"px","stroke-dasharray":2*v+"px,"+v+"px"};n.selectAll("path.mean").style(u).call(l.stroke,i.color),n.selectAll("path.meanline").style(u).call(l.stroke,i.color),b(n,r,e)})}},{"../../components/color":366,"../scatter/style":950,"@plotly/d3":58}],1098:[function(t,B,H){var d=t("../../components/colorscale/attributes"),l=t("../isosurface/attributes"),b=t("../surface/attributes"),w=t("../../plots/attributes"),e=t("../../lib/extend").extendFlat,o=t("../../plot_api/edit_types").overrideAll,a=B.exports=o(e({x:l.x,y:l.y,z:l.z,value:l.value,isomin:l.isomin,isomax:l.isomax,surface:l.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:l.slices,caps:l.caps,text:l.text,hovertext:l.hovertext,xhoverformat:l.xhoverformat,yhoverformat:l.yhoverformat,zhoverformat:l.zhoverformat,valuehoverformat:l.valuehoverformat,hovertemplate:l.hovertemplate},d("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:l.colorbar,opacity:l.opacity,opacityscale:b.opacityscale,lightposition:l.lightposition,lighting:l.lighting,flatshading:l.flatshading,contour:l.contour,hoverinfo:e({},w.hoverinfo),showlegend:e({},w.showlegend,{dflt:!1})}),"calc","nested");a.x.editType=a.y.editType=a.z.editType=a.value.editType="calc+clearAxisTypes",a.transforms=void 0},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../isosurface/attributes":862,"../surface/attributes":1057}],1099:[function(t,B,H){var d=t("../../../stackgl_modules").gl_mesh3d,l=t("../../lib/gl_format_color").parseColorScale,b=t("../../lib/str2rgbarray"),w=t("../../components/colorscale").extractOpts,e=t("../../plots/gl3d/zip3"),o=t("../isosurface/convert").findNearestOnAxis,a=t("../isosurface/convert").generateIsoMeshes;function r(s,i,v){this.scene=s,this.uid=v,this.mesh=i,this.name="",this.data=null,this.showContour=!1}var n=r.prototype;n.handlePick=function(s){if(s.object===this.mesh){var i=s.data.index,v=this.data._meshX[i],u=this.data._meshY[i],g=this.data._meshZ[i],h=this.data._Ys.length,y=this.data._Zs.length,p=o(v,this.data._Xs).id,A=o(u,this.data._Ys).id,m=o(g,this.data._Zs).id,M=s.index=m+y*A+y*h*p;s.traceCoordinate=[this.data._meshX[M],this.data._meshY[M],this.data._meshZ[M],this.data._value[M]];var x=this.data.hovertext||this.data.text;return Array.isArray(x)&&x[M]!==void 0?s.textLabel=x[M]:x&&(s.textLabel=x),!0}},n.update=function(s){var i=this.scene,v=i.fullSceneLayout;this.data=a(s);function u(A,m,M,x){return m.map(function(T){return A.d2l(T,0,x)*M})}var g=e(u(v.xaxis,s._meshX,i.dataScale[0],s.xcalendar),u(v.yaxis,s._meshY,i.dataScale[1],s.ycalendar),u(v.zaxis,s._meshZ,i.dataScale[2],s.zcalendar)),h=e(s._meshI,s._meshJ,s._meshK),y={positions:g,cells:h,lightPosition:[s.lightposition.x,s.lightposition.y,s.lightposition.z],ambient:s.lighting.ambient,diffuse:s.lighting.diffuse,specular:s.lighting.specular,roughness:s.lighting.roughness,fresnel:s.lighting.fresnel,vertexNormalsEpsilon:s.lighting.vertexnormalsepsilon,faceNormalsEpsilon:s.lighting.facenormalsepsilon,opacity:s.opacity,opacityscale:s.opacityscale,contourEnable:s.contour.show,contourColor:b(s.contour.color).slice(0,3),contourWidth:s.contour.width,useFacetNormals:s.flatshading},p=w(s);y.vertexIntensity=s._meshIntensity,y.vertexIntensityBounds=[p.min,p.max],y.colormap=l(s),this.mesh.update(y)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function c(s,i){var v=s.glplot.gl,u=d({gl:v}),g=new r(s,u,i.uid);return u._trace=g,g.update(i),s.glplot.add(u),g}B.exports=c},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609,"../isosurface/convert":864}],1100:[function(t,B,H){var d=t("../../lib"),l=t("./attributes"),b=t("../isosurface/defaults").supplyIsoDefaults,w=t("../surface/defaults").opacityscaleDefaults;B.exports=function(o,a,r,n){function c(s,i){return d.coerce(o,a,l,s,i)}b(o,a,r,n,c),w(o,a,n,c)}},{"../../lib":503,"../isosurface/defaults":865,"../surface/defaults":1060,"./attributes":1098}],1101:[function(t,B,H){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:t("./convert"),moduleType:"trace",name:"volume",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"../isosurface/calc":863,"./attributes":1098,"./convert":1099,"./defaults":1100}],1102:[function(t,B,H){var d=t("../bar/attributes"),l=t("../scatter/attributes").line,b=t("../../plots/attributes"),w=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=t("../../plots/template_attributes").hovertemplateAttrs,o=t("../../plots/template_attributes").texttemplateAttrs,a=t("./constants"),r=t("../../lib/extend").extendFlat,n=t("../../components/color");function c(s){return{marker:{color:r({},d.marker.color,{arrayOk:!1,editType:"style"}),line:{color:r({},d.marker.line.color,{arrayOk:!1,editType:"style"}),width:r({},d.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}B.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:d.x,x0:d.x0,dx:d.dx,y:d.y,y0:d.y0,dy:d.dy,xperiod:d.xperiod,yperiod:d.yperiod,xperiod0:d.xperiod0,yperiod0:d.yperiod0,xperiodalignment:d.xperiodalignment,yperiodalignment:d.yperiodalignment,xhoverformat:w("x"),yhoverformat:w("y"),hovertext:d.hovertext,hovertemplate:e({},{keys:a.eventDataKeys}),hoverinfo:r({},b.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:o({editType:"plot"},{keys:a.eventDataKeys.concat(["label"])}),text:d.text,textposition:d.textposition,insidetextanchor:d.insidetextanchor,textangle:d.textangle,textfont:d.textfont,insidetextfont:d.insidetextfont,outsidetextfont:d.outsidetextfont,constraintext:d.constraintext,cliponaxis:d.cliponaxis,orientation:d.orientation,offset:d.offset,width:d.width,increasing:c(),decreasing:c(),totals:c(),connector:{line:{color:r({},l.color,{dflt:n.defaultLine}),width:r({},l.width,{editType:"plot"}),dash:l.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:d.offsetgroup,alignmentgroup:d.alignmentgroup}},{"../../components/color":366,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":926,"./constants":1104}],1103:[function(t,B,H){var d=t("../../plots/cartesian/axes"),l=t("../../plots/cartesian/align_period"),b=t("../../lib").mergeArray,w=t("../scatter/calc_selection"),e=t("../../constants/numerical").BADNUM;function o(r){return r==="a"||r==="absolute"}function a(r){return r==="t"||r==="total"}B.exports=function(n,c){var s=d.getFromId(n,c.xaxis||"x"),i=d.getFromId(n,c.yaxis||"y"),v,u,g,h,y,p;c.orientation==="h"?(v=s.makeCalcdata(c,"x"),g=i.makeCalcdata(c,"y"),h=l(c,i,"y",g),y=!!c.yperiodalignment,p="y"):(v=i.makeCalcdata(c,"y"),g=s.makeCalcdata(c,"x"),h=l(c,s,"x",g),y=!!c.xperiodalignment,p="x"),u=h.vals;for(var A=Math.min(u.length,v.length),m=new Array(A),M=0,x,T=!1,_=0;_<A;_++){var f=v[_]||0,L=!1;(v[_]!==e||a(c.measure[_])||o(c.measure[_]))&&_+1<A&&(v[_+1]!==e||a(c.measure[_+1])||o(c.measure[_+1]))&&(L=!0);var S=m[_]={i:_,p:u[_],s:f,rawS:f,cNext:L};o(c.measure[_])?(M=S.s,S.isSum=!0,S.dir="totals",S.s=M):a(c.measure[_])?(S.isSum=!0,S.dir="totals",S.s=M):(S.isSum=!1,S.dir=S.rawS<0?"decreasing":"increasing",x=S.s,S.s=M+x,M+=x),S.dir==="totals"&&(T=!0),y&&(m[_].orig_p=g[_],m[_][p+"End"]=h.ends[_],m[_][p+"Start"]=h.starts[_]),c.ids&&(S.id=String(c.ids[_])),S.v=(c.base||0)+M}return m.length&&(m[0].hasTotals=T),b(c.text,m,"tx"),b(c.hovertext,m,"htx"),w(m,c),m}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":928}],1104:[function(t,B,H){B.exports={eventDataKeys:["initial","delta","final"]}},{}],1105:[function(t,B,H){var d=t("../bar/cross_trace_calc").setGroupPositions;B.exports=function(b,w){var e=b._fullLayout,o=b._fullData,a=b.calcdata,r=w.xaxis,n=w.yaxis,c=[],s=[],i=[],v,u;for(u=0;u<o.length;u++){var g=o[u];g.visible===!0&&g.xaxis===r._id&&g.yaxis===n._id&&g.type==="waterfall"&&(v=a[u],g.orientation==="h"?i.push(v):s.push(v),c.push(v))}var h={mode:e.waterfallmode,norm:e.waterfallnorm,gap:e.waterfallgap,groupgap:e.waterfallgroupgap};for(d(b,r,n,s,h),d(b,n,r,i,h),u=0;u<c.length;u++){v=c[u];for(var y=0;y<v.length;y++){var p=v[y];p.isSum===!1&&(p.s0+=y===0?0:v[y-1].s),y+1<v.length&&(v[y].nextP0=v[y+1].p0,v[y].nextS0=v[y+1].s0)}}}},{"../bar/cross_trace_calc":651}],1106:[function(t,B,H){var d=t("../../lib"),l=t("../bar/defaults").handleGroupingDefaults,b=t("../bar/defaults").handleText,w=t("../scatter/xy_defaults"),e=t("../scatter/period_defaults"),o=t("./attributes"),a=t("../../components/color"),r=t("../../constants/delta.js"),n=r.INCREASING.COLOR,c=r.DECREASING.COLOR,s="#4499FF";function i(g,h,y){g(h+".marker.color",y),g(h+".marker.line.color",a.defaultLine),g(h+".marker.line.width")}function v(g,h,y,p){function A(_,f){return d.coerce(g,h,o,_,f)}var m=w(g,h,p,A);if(!m){h.visible=!1;return}e(g,h,p,A),A("xhoverformat"),A("yhoverformat"),A("measure"),A("orientation",h.x&&!h.y?"h":"v"),A("base"),A("offset"),A("width"),A("text"),A("hovertext"),A("hovertemplate");var M=A("textposition");b(g,h,p,A,M,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),h.textposition!=="none"&&(A("texttemplate"),h.texttemplate||A("textinfo")),i(A,"increasing",n),i(A,"decreasing",c),i(A,"totals",s);var x=A("connector.visible");if(x){A("connector.mode");var T=A("connector.line.width");T&&(A("connector.line.color"),A("connector.line.dash"))}}function u(g,h){var y,p;function A(M){return d.coerce(p._input,p,o,M)}if(h.waterfallmode==="group")for(var m=0;m<g.length;m++)p=g[m],y=p._input,l(y,p,h,A)}B.exports={supplyDefaults:v,crossTraceDefaults:u}},{"../../components/color":366,"../../constants/delta.js":473,"../../lib":503,"../bar/defaults":652,"../scatter/period_defaults":946,"../scatter/xy_defaults":953,"./attributes":1102}],1107:[function(t,B,H){B.exports=function(l,b){return l.x="xVal"in b?b.xVal:b.x,l.y="yVal"in b?b.yVal:b.y,"initial"in b&&(l.initial=b.initial),"delta"in b&&(l.delta=b.delta),"final"in b&&(l.final=b.final),b.xa&&(l.xaxis=b.xa),b.ya&&(l.yaxis=b.ya),l}},{}],1108:[function(t,B,H){var d=t("../../plots/cartesian/axes").hoverLabelText,l=t("../../components/color").opacity,b=t("../bar/hover").hoverOnBars,w=t("../../constants/delta.js"),e={increasing:w.INCREASING.SYMBOL,decreasing:w.DECREASING.SYMBOL};B.exports=function(r,n,c,s,i){var v=b(r,n,c,s,i);if(!v)return;var u=v.cd,g=u[0].trace,h=g.orientation==="h",y=h?"x":"y",p=h?r.xa:r.ya;function A(P){return d(p,P,g[y+"hoverformat"])}var m=v.index,M=u[m],x=M.isSum?M.b+M.s:M.rawS;if(!M.isSum){v.initial=M.b+M.s-x,v.delta=x,v.final=v.initial+v.delta;var T=A(Math.abs(v.delta));v.deltaLabel=x<0?"("+T+")":T,v.finalLabel=A(v.final),v.initialLabel=A(v.initial)}var _=M.hi||g.hoverinfo,f=[];if(_&&_!=="none"&&_!=="skip"){var L=_==="all",S=_.split("+"),k=function(P){return L||S.indexOf(P)!==-1};M.isSum||(k("final")&&(h?!k("x"):!k("y"))&&f.push(v.finalLabel),k("delta")&&(x<0?f.push(v.deltaLabel+" "+e.decreasing):f.push(v.deltaLabel+" "+e.increasing)),k("initial")&&f.push("Initial: "+v.initialLabel))}return f.length&&(v.extraText=f.join("<br>")),v.color=o(g,M),[v]};function o(a,r){var n=a[r.dir].marker,c=n.color,s=n.line.color,i=n.line.width;if(l(c))return c;if(l(s)&&i)return s}},{"../../components/color":366,"../../constants/delta.js":473,"../../plots/cartesian/axes":554,"../bar/hover":655}],1109:[function(t,B,H){B.exports={attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults").supplyDefaults,crossTraceDefaults:t("./defaults").crossTraceDefaults,supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),crossTraceCalc:t("./cross_trace_calc"),plot:t("./plot"),style:t("./style").style,hoverPoints:t("./hover"),eventData:t("./event_data"),selectPoints:t("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:t("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../bar/select":660,"./attributes":1102,"./calc":1103,"./cross_trace_calc":1105,"./defaults":1106,"./event_data":1107,"./hover":1108,"./layout_attributes":1110,"./layout_defaults":1111,"./plot":1112,"./style":1113}],1110:[function(t,B,H){B.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1111:[function(t,B,H){var d=t("../../lib"),l=t("./layout_attributes");B.exports=function(b,w,e){var o=!1;function a(c,s){return d.coerce(b,w,l,c,s)}for(var r=0;r<e.length;r++){var n=e[r];if(n.visible&&n.type==="waterfall"){o=!0;break}}o&&(a("waterfallmode"),a("waterfallgap",.2),a("waterfallgroupgap"))}},{"../../lib":503,"./layout_attributes":1110}],1112:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../lib"),b=t("../../components/drawing"),w=t("../../constants/numerical").BADNUM,e=t("../bar/plot"),o=t("../bar/uniform_text").clearMinTextSize;B.exports=function(c,s,i,v){var u=c._fullLayout;o("waterfall",u),e.plot(c,s,i,v,{mode:u.waterfallmode,norm:u.waterfallmode,gap:u.waterfallgap,groupgap:u.waterfallgroupgap}),a(c,s,i,v)};function a(n,c,s,i){var v=c.xaxis,u=c.yaxis;l.makeTraceGroups(i,s,"trace bars").each(function(g){var h=d.select(this),y=g[0].trace,p=l.ensureSingle(h,"g","lines");if(!y.connector||!y.connector.visible){p.remove();return}var A=y.orientation==="h",m=y.connector.mode,M=p.selectAll("g.line").data(l.identity);M.enter().append("g").classed("line",!0),M.exit().remove();var x=M.size();M.each(function(T,_){if(!(_!==x-1&&!T.cNext)){var f=r(T,v,u,A),L=f[0],S=f[1],k="";L[0]!==w&&S[0]!==w&&L[1]!==w&&S[1]!==w&&(m==="spanning"&&!T.isSum&&_>0&&(A?k+="M"+L[0]+","+S[1]+"V"+S[0]:k+="M"+L[1]+","+S[0]+"H"+L[0]),m!=="between"&&(T.isSum||_<x-1)&&(A?k+="M"+L[1]+","+S[0]+"V"+S[1]:k+="M"+L[0]+","+S[1]+"H"+L[1]),L[2]!==w&&S[2]!==w&&(A?k+="M"+L[1]+","+S[1]+"V"+S[2]:k+="M"+L[1]+","+S[1]+"H"+L[2])),k===""&&(k="M0,0Z"),l.ensureSingle(d.select(this),"path").attr("d",k).call(b.setClipUrl,c.layerClipId,n)}})})}function r(n,c,s,i){var v=[],u=[],g=i?c:s,h=i?s:c;return v[0]=g.c2p(n.s0,!0),u[0]=h.c2p(n.p0,!0),v[1]=g.c2p(n.s1,!0),u[1]=h.c2p(n.p1,!0),v[2]=g.c2p(n.nextS0,!0),u[2]=h.c2p(n.nextP0,!0),i?[v,u]:[u,v]}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../bar/plot":659,"../bar/uniform_text":664,"@plotly/d3":58}],1113:[function(t,B,H){var d=t("@plotly/d3"),l=t("../../components/drawing"),b=t("../../components/color"),w=t("../../constants/interactions").DESELECTDIM,e=t("../bar/style"),o=t("../bar/uniform_text").resizeText,a=e.styleTextPoints;function r(n,c,s){var i=s||d.select(n).selectAll("g.waterfalllayer").selectAll("g.trace");o(n,i,"waterfall"),i.style("opacity",function(v){return v[0].trace.opacity}),i.each(function(v){var u=d.select(this),g=v[0].trace;u.selectAll(".point > path").each(function(h){if(!h.isBlank){var y=g[h.dir].marker;d.select(this).call(b.fill,y.color).call(b.stroke,y.line.color).call(l.dashLine,y.line.dash,y.line.width).style("opacity",g.selectedpoints&&!h.selected?w:1)}}),a(u,g,n),u.selectAll(".lines").each(function(){var h=g.connector.line;l.lineGroupStyle(d.select(this).selectAll("path"),h.width,h.color,h.dash)})})}B.exports={style:r}},{"../../components/color":366,"../../components/drawing":388,"../../constants/interactions":478,"../bar/style":662,"../bar/uniform_text":664,"@plotly/d3":58}],1114:[function(t,B,H){var d=t("../plots/cartesian/axes"),l=t("../lib"),b=t("../plot_api/plot_schema"),w=t("./helpers").pointsAccessorFunction,e=t("../constants/numerical").BADNUM;H.moduleType="transform",H.name="aggregate";var o=H.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},a=o.aggregations;H.supplyDefaults=function(v,u){var g={},h;function y(P,z){return l.coerce(v,g,o,P,z)}var p=y("enabled");if(!p)return g;var A=b.findArrayAttributes(u),m={};for(h=0;h<A.length;h++)m[A[h]]=1;var M=y("groups");if(!Array.isArray(M)){if(!m[M])return g.enabled=!1,g;m[M]=0}var x=v.aggregations||[],T=g.aggregations=new Array(x.length),_;function f(P,z){return l.coerce(x[h],_,a,P,z)}for(h=0;h<x.length;h++){_={_index:h};var L=f("target"),S=f("func"),k=f("enabled");k&&L&&(m[L]||S==="count"&&m[L]===void 0)?(S==="stddev"&&f("funcmode"),m[L]=0,T[h]=_):T[h]={enabled:!1,_index:h}}for(h=0;h<A.length;h++)m[A[h]]&&T.push({target:A[h],func:a.func.dflt,enabled:!0,_index:-1});return g},H.calcTransform=function(v,u,g){if(!!g.enabled){var h=g.groups,y=l.getTargetArray(u,{target:h});if(!!y){var p,A,m,M,x={},T={},_=[],f=w(u.transforms,g),L=y.length;for(u._length&&(L=Math.min(L,u._length)),p=0;p<L;p++)A=y[p],m=x[A],m===void 0?(x[A]=_.length,M=[p],_.push(M),T[x[A]]=f(p)):(_[m].push(p),T[x[A]]=(T[x[A]]||[]).concat(f(p)));g._indexToPoints=T;var S=g.aggregations;for(p=0;p<S.length;p++)r(v,u,_,S[p]);typeof h=="string"&&r(v,u,_,{target:h,func:"first",enabled:!0}),u._length=_.length}}};function r(v,u,g,h){if(!!h.enabled){for(var y=h.target,p=l.nestedProperty(u,y),A=p.get(),m=d.getDataConversions(v,u,y,A),M=n(h,m),x=new Array(g.length),T=0;T<g.length;T++)x[T]=M(A,g[T]);p.set(x),h.func==="count"&&l.pushUnique(u._arrayAttrs,y)}}function n(v,u){var g=v.func,h=u.d2c,y=u.c2d;switch(g){case"count":return c;case"first":return s;case"last":return i;case"sum":return function(p,A){for(var m=0,M=0;M<A.length;M++){var x=h(p[A[M]]);x!==e&&(m+=x)}return y(m)};case"avg":return function(p,A){for(var m=0,M=0,x=0;x<A.length;x++){var T=h(p[A[x]]);T!==e&&(m+=T,M++)}return M?y(m/M):e};case"min":return function(p,A){for(var m=1/0,M=0;M<A.length;M++){var x=h(p[A[M]]);x!==e&&(m=Math.min(m,x))}return m===1/0?e:y(m)};case"max":return function(p,A){for(var m=-1/0,M=0;M<A.length;M++){var x=h(p[A[M]]);x!==e&&(m=Math.max(m,x))}return m===-1/0?e:y(m)};case"range":return function(p,A){for(var m=1/0,M=-1/0,x=0;x<A.length;x++){var T=h(p[A[x]]);T!==e&&(m=Math.min(m,T),M=Math.max(M,T))}return M===-1/0||m===1/0?e:y(M-m)};case"change":return function(p,A){var m=h(p[A[0]]),M=h(p[A[A.length-1]]);return m===e||M===e?e:y(M-m)};case"median":return function(p,A){for(var m=[],M=0;M<A.length;M++){var x=h(p[A[M]]);x!==e&&m.push(x)}if(!m.length)return e;m.sort(l.sorterAsc);var T=(m.length-1)/2;return y((m[Math.floor(T)]+m[Math.ceil(T)])/2)};case"mode":return function(p,A){for(var m={},M=0,x=e,T=0;T<A.length;T++){var _=h(p[A[T]]);if(_!==e){var f=m[_]=(m[_]||0)+1;f>M&&(M=f,x=_)}}return M?y(x):e};case"rms":return function(p,A){for(var m=0,M=0,x=0;x<A.length;x++){var T=h(p[A[x]]);T!==e&&(m+=T*T,M++)}return M?y(Math.sqrt(m/M)):e};case"stddev":return function(p,A){var m=0,M=0,x=1,T=e,_;for(_=0;_<A.length&&T===e;_++)T=h(p[A[_]]);if(T===e)return e;for(;_<A.length;_++){var f=h(p[A[_]]);if(f!==e){var L=f-T;m+=L,M+=L*L,x++}}var S=v.funcmode==="sample"?x-1:x;return S?Math.sqrt((M-m*m/x)/S):0}}}function c(v,u){return u.length}function s(v,u){return v[u[0]]}function i(v,u){return v[u[u.length-1]]}},{"../constants/numerical":479,"../lib":503,"../plot_api/plot_schema":542,"../plots/cartesian/axes":554,"./helpers":1117}],1115:[function(t,B,H){var d=t("../lib"),l=t("../registry"),b=t("../plots/cartesian/axes"),w=t("./helpers").pointsAccessorFunction,e=t("../constants/filter_ops"),o=e.COMPARISON_OPS,a=e.INTERVAL_OPS,r=e.SET_OPS;H.moduleType="transform",H.name="filter",H.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(o).concat(a).concat(r),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},H.supplyDefaults=function(c){var s={};function i(h,y){return d.coerce(c,s,H.attributes,h,y)}var v=i("enabled");if(v){var u=i("target");if(d.isArrayOrTypedArray(u)&&u.length===0)return s.enabled=!1,s;i("preservegaps"),i("operation"),i("value");var g=l.getComponentMethod("calendars","handleDefaults");g(c,s,"valuecalendar",null),g(c,s,"targetcalendar",null)}return s},H.calcTransform=function(c,s,i){if(!i.enabled)return;var v=d.getTargetArray(s,i);if(!v)return;var u=i.target,g=v.length;s._length&&(g=Math.min(g,s._length));var h=i.targetcalendar,y=s._arrayAttrs,p=i.preservegaps;if(typeof u=="string"){var A=d.nestedProperty(s,u+"calendar").get();A&&(h=A)}var m=b.getDataToCoordFunc(c,s,u,v),M=n(i,m,h),x={},T={},_=0;function f(I,R){for(var D=0;D<y.length;D++){var O=d.nestedProperty(s,y[D]);I(O,R)}}var L,S;p?(L=function(I){x[I.astr]=d.extendDeep([],I.get()),I.set(new Array(g))},S=function(I,R){var D=x[I.astr][R];I.get()[R]=D}):(L=function(I){x[I.astr]=d.extendDeep([],I.get()),I.set([])},S=function(I,R){var D=x[I.astr][R];I.get().push(D)}),f(L);for(var k=w(s.transforms,i),P=0;P<g;P++){var z=M(v[P]);z?(f(S,P),T[_++]=k(P)):p&&_++}i._indexToPoints=T,s._length=_};function n(c,s,i){var v=c.operation,u=c.value,g=Array.isArray(u);function h(m){return m.indexOf(v)!==-1}var y=function(m){return s(m,0,c.valuecalendar)},p=function(m){return s(m,0,i)},A;switch(h(o)?A=y(g?u[0]:u):h(a)?A=g?[y(u[0]),y(u[1])]:[y(u),y(u)]:h(r)&&(A=g?u.map(y):[y(u)]),v){case"=":return function(m){return p(m)===A};case"!=":return function(m){return p(m)!==A};case"<":return function(m){return p(m)<A};case"<=":return function(m){return p(m)<=A};case">":return function(m){return p(m)>A};case">=":return function(m){return p(m)>=A};case"[]":return function(m){var M=p(m);return M>=A[0]&&M<=A[1]};case"()":return function(m){var M=p(m);return M>A[0]&&M<A[1]};case"[)":return function(m){var M=p(m);return M>=A[0]&&M<A[1]};case"(]":return function(m){var M=p(m);return M>A[0]&&M<=A[1]};case"][":return function(m){var M=p(m);return M<=A[0]||M>=A[1]};case")(":return function(m){var M=p(m);return M<A[0]||M>A[1]};case"](":return function(m){var M=p(m);return M<=A[0]||M>A[1]};case")[":return function(m){var M=p(m);return M<A[0]||M>=A[1]};case"{}":return function(m){return A.indexOf(p(m))!==-1};case"}{":return function(m){return A.indexOf(p(m))===-1}}}},{"../constants/filter_ops":475,"../lib":503,"../plots/cartesian/axes":554,"../registry":638,"./helpers":1117}],1116:[function(t,B,H){var d=t("../lib"),l=t("../plot_api/plot_schema"),b=t("../plots/plots"),w=t("./helpers").pointsAccessorFunction;H.moduleType="transform",H.name="groupby",H.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},H.supplyDefaults=function(o,a,r){var n,c={};function s(y,p){return d.coerce(o,c,H.attributes,y,p)}var i=s("enabled");if(!i)return c;s("groups"),s("nameformat",r._dataLength>1?"%{group} (%{trace})":"%{group}");var v=o.styles,u=c.styles=[];if(v)for(n=0;n<v.length;n++){var g=u[n]={};d.coerce(v[n],u[n],H.attributes.styles,"target");var h=d.coerce(v[n],u[n],H.attributes.styles,"value");d.isPlainObject(h)?g.value=d.extendDeep({},h):h&&delete g.value}return c},H.transform=function(o,a){var r,n,c,s=[];for(n=0;n<o.length;n++)for(r=e(o[n],a),c=0;c<r.length;c++)s.push(r[c]);return s};function e(o,a){var r,n,c,s,i,v,u,g,h,y,p=a.transform,A=a.transformIndex,m=o.transforms[A].groups,M=w(o.transforms,p);if(!d.isArrayOrTypedArray(m)||m.length===0)return[o];var x=d.filterUnique(m),T=new Array(x.length),_=m.length,f=l.findArrayAttributes(o),L=p.styles||[],S={};for(r=0;r<L.length;r++)S[L[r].target]=L[r].value;p.styles&&(y=d.keyedContainer(p,"styles","target","value.name"));var k={},P={};for(r=0;r<x.length;r++){v=x[r],k[v]=r,P[v]=0,u=T[r]=d.extendDeepNoArrays({},o),u._group=v,u.transforms[A]._indexToPoints={};var z=null;for(y&&(z=y.get(v)),z||z===""?u.name=z:u.name=d.templateString(p.nameformat,{trace:o.name,group:v}),g=u.transforms,u.transforms=[],n=0;n<g.length;n++)u.transforms[n]=d.extendDeepNoArrays({},g[n]);for(n=0;n<f.length;n++)d.nestedProperty(u,f[n]).set([])}for(c=0;c<f.length;c++){for(s=f[c],n=0,h=[];n<x.length;n++)h[n]=d.nestedProperty(T[n],s).get();for(i=d.nestedProperty(o,s).get(),n=0;n<_;n++)h[k[m[n]]].push(i[n])}for(n=0;n<_;n++){u=T[k[m[n]]];var I=u.transforms[A]._indexToPoints;I[P[m[n]]]=M(n),P[m[n]]++}for(r=0;r<x.length;r++)v=x[r],u=T[r],b.clearExpandedTraceDefaultColors(u),u=d.extendDeepNoArrays(u,S[v]||{});return T}},{"../lib":503,"../plot_api/plot_schema":542,"../plots/plots":619,"./helpers":1117}],1117:[function(t,B,H){H.pointsAccessorFunction=function(d,l){for(var b,w,e=0;e<d.length&&(b=d[e],b!==l);e++)!b._indexToPoints||b.enabled===!1||(w=b._indexToPoints);var o=w?function(a){return w[a]}:function(a){return[a]};return o}},{}],1118:[function(t,B,H){var d=t("../lib"),l=t("../plots/cartesian/axes"),b=t("./helpers").pointsAccessorFunction,w=t("../constants/numerical").BADNUM;H.moduleType="transform",H.name="sort",H.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},H.supplyDefaults=function(a){var r={};function n(s,i){return d.coerce(a,r,H.attributes,s,i)}var c=n("enabled");return c&&(n("target"),n("order")),r},H.calcTransform=function(a,r,n){if(!!n.enabled){var c=d.getTargetArray(r,n);if(!!c){var s=n.target,i=c.length;r._length&&(i=Math.min(i,r._length));var v=r._arrayAttrs,u=l.getDataToCoordFunc(a,r,s,c),g=e(n,c,u,i),h=b(r.transforms,n),y={},p,A;for(p=0;p<v.length;p++){var m=d.nestedProperty(r,v[p]),M=m.get(),x=new Array(i);for(A=0;A<i;A++)x[A]=M[g[A]];m.set(x)}for(A=0;A<i;A++)y[A]=h(g[A]);n._indexToPoints=y,r._length=i}}};function e(a,r,n,c){var s=new Array(c),i=new Array(c),v;for(v=0;v<c;v++)s[v]={v:r[v],i:v};for(s.sort(o(a,n)),v=0;v<c;v++)i[v]=s[v].i;return i}function o(a,r){switch(a.order){case"ascending":return function(n,c){var s=r(n.v),i=r(c.v);return s===w?1:i===w?-1:s-i};case"descending":return function(n,c){var s=r(n.v),i=r(c.v);return s===w?1:i===w?-1:i-s}}}},{"../constants/numerical":479,"../lib":503,"../plots/cartesian/axes":554,"./helpers":1117}],1119:[function(t,B,H){H.version="2.10.0"},{}],1120:[function(t,B,H){(function(d){(function(){(function(l){if(typeof H=="object"&&typeof B!="undefined")B.exports=l();else{var b;typeof window!="undefined"?b=window:typeof d!="undefined"?b=d:typeof self!="undefined"?b=self:b=this,b.stackgl=l()}})(function(){return function(){function l(b,w,e){function o(n,c){if(!w[n]){if(!b[n]){var s=typeof t=="function"&&t;if(!c&&s)return s(n,!0);if(a)return a(n,!0);var i=new Error("Cannot find module '"+n+"'");throw i.code="MODULE_NOT_FOUND",i}var v=w[n]={exports:{}};b[n][0].call(v.exports,function(u){var g=b[n][1][u];return o(g||u)},v,v.exports,l,b,w,e)}return w[n].exports}for(var a=typeof t=="function"&&t,r=0;r<e.length;r++)o(e[r]);return o}return l}()({1:[function(l,b,w){w.byteLength=i,w.toByteArray=u,w.fromByteArray=y;for(var e=[],o=[],a=typeof Uint8Array!="undefined"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,c=r.length;n<c;++n)e[n]=r[n],o[r.charCodeAt(n)]=n;o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63;function s(p){var A=p.length;if(A%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var m=p.indexOf("=");m===-1&&(m=A);var M=m===A?0:4-m%4;return[m,M]}function i(p){var A=s(p),m=A[0],M=A[1];return(m+M)*3/4-M}function v(p,A,m){return(A+m)*3/4-m}function u(p){var A,m=s(p),M=m[0],x=m[1],T=new a(v(p,M,x)),_=0,f=x>0?M-4:M,L;for(L=0;L<f;L+=4)A=o[p.charCodeAt(L)]<<18|o[p.charCodeAt(L+1)]<<12|o[p.charCodeAt(L+2)]<<6|o[p.charCodeAt(L+3)],T[_++]=A>>16&255,T[_++]=A>>8&255,T[_++]=A&255;return x===2&&(A=o[p.charCodeAt(L)]<<2|o[p.charCodeAt(L+1)]>>4,T[_++]=A&255),x===1&&(A=o[p.charCodeAt(L)]<<10|o[p.charCodeAt(L+1)]<<4|o[p.charCodeAt(L+2)]>>2,T[_++]=A>>8&255,T[_++]=A&255),T}function g(p){return e[p>>18&63]+e[p>>12&63]+e[p>>6&63]+e[p&63]}function h(p,A,m){for(var M,x=[],T=A;T<m;T+=3)M=(p[T]<<16&16711680)+(p[T+1]<<8&65280)+(p[T+2]&255),x.push(g(M));return x.join("")}function y(p){for(var A,m=p.length,M=m%3,x=[],T=16383,_=0,f=m-M;_<f;_+=T)x.push(h(p,_,_+T>f?f:_+T));return M===1?(A=p[m-1],x.push(e[A>>2]+e[A<<4&63]+"==")):M===2&&(A=(p[m-2]<<8)+p[m-1],x.push(e[A>>10]+e[A>>4&63]+e[A<<2&63]+"=")),x.join("")}},{}],2:[function(l,b,w){},{}],3:[function(l,b,w){(function(e){(function(){var o=l("base64-js"),a=l("ieee754");w.Buffer=s,w.SlowBuffer=M,w.INSPECT_MAX_BYTES=50;var r=2147483647;w.kMaxLength=r,s.TYPED_ARRAY_SUPPORT=n(),!s.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function n(){try{var he=new Uint8Array(1);return he.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},he.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(!!s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(!!s.isBuffer(this))return this.byteOffset}});function c(he){if(he>r)throw new RangeError('The value "'+he+'" is invalid for option "size"');var ge=new Uint8Array(he);return ge.__proto__=s.prototype,ge}function s(he,ge,me){if(typeof he=="number"){if(typeof ge=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g(he)}return i(he,ge,me)}typeof Symbol!="undefined"&&Symbol.species!=null&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),s.poolSize=8192;function i(he,ge,me){if(typeof he=="string")return h(he,ge);if(ArrayBuffer.isView(he))return y(he);if(he==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof he);if(ue(he,ArrayBuffer)||he&&ue(he.buffer,ArrayBuffer))return p(he,ge,me);if(typeof he=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ke=he.valueOf&&he.valueOf();if(ke!=null&&ke!==he)return s.from(ke,ge,me);var Ae=A(he);if(Ae)return Ae;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof he[Symbol.toPrimitive]=="function")return s.from(he[Symbol.toPrimitive]("string"),ge,me);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof he)}s.from=function(he,ge,me){return i(he,ge,me)},s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array;function v(he){if(typeof he!="number")throw new TypeError('"size" argument must be of type number');if(he<0)throw new RangeError('The value "'+he+'" is invalid for option "size"')}function u(he,ge,me){return v(he),he<=0?c(he):ge!==void 0?typeof me=="string"?c(he).fill(ge,me):c(he).fill(ge):c(he)}s.alloc=function(he,ge,me){return u(he,ge,me)};function g(he){return v(he),c(he<0?0:m(he)|0)}s.allocUnsafe=function(he){return g(he)},s.allocUnsafeSlow=function(he){return g(he)};function h(he,ge){if((typeof ge!="string"||ge==="")&&(ge="utf8"),!s.isEncoding(ge))throw new TypeError("Unknown encoding: "+ge);var me=x(he,ge)|0,ke=c(me),Ae=ke.write(he,ge);return Ae!==me&&(ke=ke.slice(0,Ae)),ke}function y(he){for(var ge=he.length<0?0:m(he.length)|0,me=c(ge),ke=0;ke<ge;ke+=1)me[ke]=he[ke]&255;return me}function p(he,ge,me){if(ge<0||he.byteLength<ge)throw new RangeError('"offset" is outside of buffer bounds');if(he.byteLength<ge+(me||0))throw new RangeError('"length" is outside of buffer bounds');var ke;return ge===void 0&&me===void 0?ke=new Uint8Array(he):me===void 0?ke=new Uint8Array(he,ge):ke=new Uint8Array(he,ge,me),ke.__proto__=s.prototype,ke}function A(he){if(s.isBuffer(he)){var ge=m(he.length)|0,me=c(ge);return me.length===0||he.copy(me,0,0,ge),me}if(he.length!==void 0)return typeof he.length!="number"||xe(he.length)?c(0):y(he);if(he.type==="Buffer"&&Array.isArray(he.data))return y(he.data)}function m(he){if(he>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return he|0}function M(he){return+he!=he&&(he=0),s.alloc(+he)}s.isBuffer=function(ge){return ge!=null&&ge._isBuffer===!0&&ge!==s.prototype},s.compare=function(ge,me){if(ue(ge,Uint8Array)&&(ge=s.from(ge,ge.offset,ge.byteLength)),ue(me,Uint8Array)&&(me=s.from(me,me.offset,me.byteLength)),!s.isBuffer(ge)||!s.isBuffer(me))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ge===me)return 0;for(var ke=ge.length,Ae=me.length,Ne=0,He=Math.min(ke,Ae);Ne<He;++Ne)if(ge[Ne]!==me[Ne]){ke=ge[Ne],Ae=me[Ne];break}return ke<Ae?-1:Ae<ke?1:0},s.isEncoding=function(ge){switch(String(ge).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(ge,me){if(!Array.isArray(ge))throw new TypeError('"list" argument must be an Array of Buffers');if(ge.length===0)return s.alloc(0);var ke;if(me===void 0)for(me=0,ke=0;ke<ge.length;++ke)me+=ge[ke].length;var Ae=s.allocUnsafe(me),Ne=0;for(ke=0;ke<ge.length;++ke){var He=ge[ke];if(ue(He,Uint8Array)&&(He=s.from(He)),!s.isBuffer(He))throw new TypeError('"list" argument must be an Array of Buffers');He.copy(Ae,Ne),Ne+=He.length}return Ae};function x(he,ge){if(s.isBuffer(he))return he.length;if(ArrayBuffer.isView(he)||ue(he,ArrayBuffer))return he.byteLength;if(typeof he!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof he);var me=he.length,ke=arguments.length>2&&arguments[2]===!0;if(!ke&&me===0)return 0;for(var Ae=!1;;)switch(ge){case"ascii":case"latin1":case"binary":return me;case"utf8":case"utf-8":return j(he).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return me*2;case"hex":return me>>>1;case"base64":return ae(he).length;default:if(Ae)return ke?-1:j(he).length;ge=(""+ge).toLowerCase(),Ae=!0}}s.byteLength=x;function T(he,ge,me){var ke=!1;if((ge===void 0||ge<0)&&(ge=0),ge>this.length||((me===void 0||me>this.length)&&(me=this.length),me<=0)||(me>>>=0,ge>>>=0,me<=ge))return"";for(he||(he="utf8");;)switch(he){case"hex":return J(this,ge,me);case"utf8":case"utf-8":return O(this,ge,me);case"ascii":return W(this,ge,me);case"latin1":case"binary":return q(this,ge,me);case"base64":return D(this,ge,me);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X(this,ge,me);default:if(ke)throw new TypeError("Unknown encoding: "+he);he=(he+"").toLowerCase(),ke=!0}}s.prototype._isBuffer=!0;function _(he,ge,me){var ke=he[ge];he[ge]=he[me],he[me]=ke}s.prototype.swap16=function(){var ge=this.length;if(ge%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var me=0;me<ge;me+=2)_(this,me,me+1);return this},s.prototype.swap32=function(){var ge=this.length;if(ge%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var me=0;me<ge;me+=4)_(this,me,me+3),_(this,me+1,me+2);return this},s.prototype.swap64=function(){var ge=this.length;if(ge%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var me=0;me<ge;me+=8)_(this,me,me+7),_(this,me+1,me+6),_(this,me+2,me+5),_(this,me+3,me+4);return this},s.prototype.toString=function(){var ge=this.length;return ge===0?"":arguments.length===0?O(this,0,ge):T.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(ge){if(!s.isBuffer(ge))throw new TypeError("Argument must be a Buffer");return this===ge?!0:s.compare(this,ge)===0},s.prototype.inspect=function(){var ge="",me=w.INSPECT_MAX_BYTES;return ge=this.toString("hex",0,me).replace(/(.{2})/g,"$1 ").trim(),this.length>me&&(ge+=" ... "),"<Buffer "+ge+">"},s.prototype.compare=function(ge,me,ke,Ae,Ne){if(ue(ge,Uint8Array)&&(ge=s.from(ge,ge.offset,ge.byteLength)),!s.isBuffer(ge))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ge);if(me===void 0&&(me=0),ke===void 0&&(ke=ge?ge.length:0),Ae===void 0&&(Ae=0),Ne===void 0&&(Ne=this.length),me<0||ke>ge.length||Ae<0||Ne>this.length)throw new RangeError("out of range index");if(Ae>=Ne&&me>=ke)return 0;if(Ae>=Ne)return-1;if(me>=ke)return 1;if(me>>>=0,ke>>>=0,Ae>>>=0,Ne>>>=0,this===ge)return 0;for(var He=Ne-Ae,Ge=ke-me,_e=Math.min(He,Ge),De=this.slice(Ae,Ne),Ye=ge.slice(me,ke),qe=0;qe<_e;++qe)if(De[qe]!==Ye[qe]){He=De[qe],Ge=Ye[qe];break}return He<Ge?-1:Ge<He?1:0};function f(he,ge,me,ke,Ae){if(he.length===0)return-1;if(typeof me=="string"?(ke=me,me=0):me>2147483647?me=2147483647:me<-2147483648&&(me=-2147483648),me=+me,xe(me)&&(me=Ae?0:he.length-1),me<0&&(me=he.length+me),me>=he.length){if(Ae)return-1;me=he.length-1}else if(me<0)if(Ae)me=0;else return-1;if(typeof ge=="string"&&(ge=s.from(ge,ke)),s.isBuffer(ge))return ge.length===0?-1:L(he,ge,me,ke,Ae);if(typeof ge=="number")return ge=ge&255,typeof Uint8Array.prototype.indexOf=="function"?Ae?Uint8Array.prototype.indexOf.call(he,ge,me):Uint8Array.prototype.lastIndexOf.call(he,ge,me):L(he,[ge],me,ke,Ae);throw new TypeError("val must be string, number or Buffer")}function L(he,ge,me,ke,Ae){var Ne=1,He=he.length,Ge=ge.length;if(ke!==void 0&&(ke=String(ke).toLowerCase(),ke==="ucs2"||ke==="ucs-2"||ke==="utf16le"||ke==="utf-16le")){if(he.length<2||ge.length<2)return-1;Ne=2,He/=2,Ge/=2,me/=2}function _e(Ie,Ve){return Ne===1?Ie[Ve]:Ie.readUInt16BE(Ve*Ne)}var De;if(Ae){var Ye=-1;for(De=me;De<He;De++)if(_e(he,De)===_e(ge,Ye===-1?0:De-Ye)){if(Ye===-1&&(Ye=De),De-Ye+1===Ge)return Ye*Ne}else Ye!==-1&&(De-=De-Ye),Ye=-1}else for(me+Ge>He&&(me=He-Ge),De=me;De>=0;De--){for(var qe=!0,Ue=0;Ue<Ge;Ue++)if(_e(he,De+Ue)!==_e(ge,Ue)){qe=!1;break}if(qe)return De}return-1}s.prototype.includes=function(ge,me,ke){return this.indexOf(ge,me,ke)!==-1},s.prototype.indexOf=function(ge,me,ke){return f(this,ge,me,ke,!0)},s.prototype.lastIndexOf=function(ge,me,ke){return f(this,ge,me,ke,!1)};function S(he,ge,me,ke){me=Number(me)||0;var Ae=he.length-me;ke?(ke=Number(ke),ke>Ae&&(ke=Ae)):ke=Ae;var Ne=ge.length;ke>Ne/2&&(ke=Ne/2);for(var He=0;He<ke;++He){var Ge=parseInt(ge.substr(He*2,2),16);if(xe(Ge))return He;he[me+He]=Ge}return He}function k(he,ge,me,ke){return ie(j(ge,he.length-me),he,me,ke)}function P(he,ge,me,ke){return ie(Q(ge),he,me,ke)}function z(he,ge,me,ke){return P(he,ge,me,ke)}function I(he,ge,me,ke){return ie(ae(ge),he,me,ke)}function R(he,ge,me,ke){return ie(ne(ge,he.length-me),he,me,ke)}s.prototype.write=function(ge,me,ke,Ae){if(me===void 0)Ae="utf8",ke=this.length,me=0;else if(ke===void 0&&typeof me=="string")Ae=me,ke=this.length,me=0;else if(isFinite(me))me=me>>>0,isFinite(ke)?(ke=ke>>>0,Ae===void 0&&(Ae="utf8")):(Ae=ke,ke=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Ne=this.length-me;if((ke===void 0||ke>Ne)&&(ke=Ne),ge.length>0&&(ke<0||me<0)||me>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ae||(Ae="utf8");for(var He=!1;;)switch(Ae){case"hex":return S(this,ge,me,ke);case"utf8":case"utf-8":return k(this,ge,me,ke);case"ascii":return P(this,ge,me,ke);case"latin1":case"binary":return z(this,ge,me,ke);case"base64":return I(this,ge,me,ke);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,ge,me,ke);default:if(He)throw new TypeError("Unknown encoding: "+Ae);Ae=(""+Ae).toLowerCase(),He=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function D(he,ge,me){return ge===0&&me===he.length?o.fromByteArray(he):o.fromByteArray(he.slice(ge,me))}function O(he,ge,me){me=Math.min(he.length,me);for(var ke=[],Ae=ge;Ae<me;){var Ne=he[Ae],He=null,Ge=Ne>239?4:Ne>223?3:Ne>191?2:1;if(Ae+Ge<=me){var _e,De,Ye,qe;switch(Ge){case 1:Ne<128&&(He=Ne);break;case 2:_e=he[Ae+1],(_e&192)===128&&(qe=(Ne&31)<<6|_e&63,qe>127&&(He=qe));break;case 3:_e=he[Ae+1],De=he[Ae+2],(_e&192)===128&&(De&192)===128&&(qe=(Ne&15)<<12|(_e&63)<<6|De&63,qe>2047&&(qe<55296||qe>57343)&&(He=qe));break;case 4:_e=he[Ae+1],De=he[Ae+2],Ye=he[Ae+3],(_e&192)===128&&(De&192)===128&&(Ye&192)===128&&(qe=(Ne&15)<<18|(_e&63)<<12|(De&63)<<6|Ye&63,qe>65535&&qe<1114112&&(He=qe))}}He===null?(He=65533,Ge=1):He>65535&&(He-=65536,ke.push(He>>>10&1023|55296),He=56320|He&1023),ke.push(He),Ae+=Ge}return G(ke)}var F=4096;function G(he){var ge=he.length;if(ge<=F)return String.fromCharCode.apply(String,he);for(var me="",ke=0;ke<ge;)me+=String.fromCharCode.apply(String,he.slice(ke,ke+=F));return me}function W(he,ge,me){var ke="";me=Math.min(he.length,me);for(var Ae=ge;Ae<me;++Ae)ke+=String.fromCharCode(he[Ae]&127);return ke}function q(he,ge,me){var ke="";me=Math.min(he.length,me);for(var Ae=ge;Ae<me;++Ae)ke+=String.fromCharCode(he[Ae]);return ke}function J(he,ge,me){var ke=he.length;(!ge||ge<0)&&(ge=0),(!me||me<0||me>ke)&&(me=ke);for(var Ae="",Ne=ge;Ne<me;++Ne)Ae+=ee(he[Ne]);return Ae}function X(he,ge,me){for(var ke=he.slice(ge,me),Ae="",Ne=0;Ne<ke.length;Ne+=2)Ae+=String.fromCharCode(ke[Ne]+ke[Ne+1]*256);return Ae}s.prototype.slice=function(ge,me){var ke=this.length;ge=~~ge,me=me===void 0?ke:~~me,ge<0?(ge+=ke,ge<0&&(ge=0)):ge>ke&&(ge=ke),me<0?(me+=ke,me<0&&(me=0)):me>ke&&(me=ke),me<ge&&(me=ge);var Ae=this.subarray(ge,me);return Ae.__proto__=s.prototype,Ae};function Z(he,ge,me){if(he%1!==0||he<0)throw new RangeError("offset is not uint");if(he+ge>me)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUIntLE=function(ge,me,ke){ge=ge>>>0,me=me>>>0,ke||Z(ge,me,this.length);for(var Ae=this[ge],Ne=1,He=0;++He<me&&(Ne*=256);)Ae+=this[ge+He]*Ne;return Ae},s.prototype.readUIntBE=function(ge,me,ke){ge=ge>>>0,me=me>>>0,ke||Z(ge,me,this.length);for(var Ae=this[ge+--me],Ne=1;me>0&&(Ne*=256);)Ae+=this[ge+--me]*Ne;return Ae},s.prototype.readUInt8=function(ge,me){return ge=ge>>>0,me||Z(ge,1,this.length),this[ge]},s.prototype.readUInt16LE=function(ge,me){return ge=ge>>>0,me||Z(ge,2,this.length),this[ge]|this[ge+1]<<8},s.prototype.readUInt16BE=function(ge,me){return ge=ge>>>0,me||Z(ge,2,this.length),this[ge]<<8|this[ge+1]},s.prototype.readUInt32LE=function(ge,me){return ge=ge>>>0,me||Z(ge,4,this.length),(this[ge]|this[ge+1]<<8|this[ge+2]<<16)+this[ge+3]*16777216},s.prototype.readUInt32BE=function(ge,me){return ge=ge>>>0,me||Z(ge,4,this.length),this[ge]*16777216+(this[ge+1]<<16|this[ge+2]<<8|this[ge+3])},s.prototype.readIntLE=function(ge,me,ke){ge=ge>>>0,me=me>>>0,ke||Z(ge,me,this.length);for(var Ae=this[ge],Ne=1,He=0;++He<me&&(Ne*=256);)Ae+=this[ge+He]*Ne;return Ne*=128,Ae>=Ne&&(Ae-=Math.pow(2,8*me)),Ae},s.prototype.readIntBE=function(ge,me,ke){ge=ge>>>0,me=me>>>0,ke||Z(ge,me,this.length);for(var Ae=me,Ne=1,He=this[ge+--Ae];Ae>0&&(Ne*=256);)He+=this[ge+--Ae]*Ne;return Ne*=128,He>=Ne&&(He-=Math.pow(2,8*me)),He},s.prototype.readInt8=function(ge,me){return ge=ge>>>0,me||Z(ge,1,this.length),this[ge]&128?(255-this[ge]+1)*-1:this[ge]},s.prototype.readInt16LE=function(ge,me){ge=ge>>>0,me||Z(ge,2,this.length);var ke=this[ge]|this[ge+1]<<8;return ke&32768?ke|4294901760:ke},s.prototype.readInt16BE=function(ge,me){ge=ge>>>0,me||Z(ge,2,this.length);var ke=this[ge+1]|this[ge]<<8;return ke&32768?ke|4294901760:ke},s.prototype.readInt32LE=function(ge,me){return ge=ge>>>0,me||Z(ge,4,this.length),this[ge]|this[ge+1]<<8|this[ge+2]<<16|this[ge+3]<<24},s.prototype.readInt32BE=function(ge,me){return ge=ge>>>0,me||Z(ge,4,this.length),this[ge]<<24|this[ge+1]<<16|this[ge+2]<<8|this[ge+3]},s.prototype.readFloatLE=function(ge,me){return ge=ge>>>0,me||Z(ge,4,this.length),a.read(this,ge,!0,23,4)},s.prototype.readFloatBE=function(ge,me){return ge=ge>>>0,me||Z(ge,4,this.length),a.read(this,ge,!1,23,4)},s.prototype.readDoubleLE=function(ge,me){return ge=ge>>>0,me||Z(ge,8,this.length),a.read(this,ge,!0,52,8)},s.prototype.readDoubleBE=function(ge,me){return ge=ge>>>0,me||Z(ge,8,this.length),a.read(this,ge,!1,52,8)};function se(he,ge,me,ke,Ae,Ne){if(!s.isBuffer(he))throw new TypeError('"buffer" argument must be a Buffer instance');if(ge>Ae||ge<Ne)throw new RangeError('"value" argument is out of bounds');if(me+ke>he.length)throw new RangeError("Index out of range")}s.prototype.writeUIntLE=function(ge,me,ke,Ae){if(ge=+ge,me=me>>>0,ke=ke>>>0,!Ae){var Ne=Math.pow(2,8*ke)-1;se(this,ge,me,ke,Ne,0)}var He=1,Ge=0;for(this[me]=ge&255;++Ge<ke&&(He*=256);)this[me+Ge]=ge/He&255;return me+ke},s.prototype.writeUIntBE=function(ge,me,ke,Ae){if(ge=+ge,me=me>>>0,ke=ke>>>0,!Ae){var Ne=Math.pow(2,8*ke)-1;se(this,ge,me,ke,Ne,0)}var He=ke-1,Ge=1;for(this[me+He]=ge&255;--He>=0&&(Ge*=256);)this[me+He]=ge/Ge&255;return me+ke},s.prototype.writeUInt8=function(ge,me,ke){return ge=+ge,me=me>>>0,ke||se(this,ge,me,1,255,0),this[me]=ge&255,me+1},s.prototype.writeUInt16LE=function(ge,me,ke){return ge=+ge,me=me>>>0,ke||se(this,ge,me,2,65535,0),this[me]=ge&255,this[me+1]=ge>>>8,me+2},s.prototype.writeUInt16BE=function(ge,me,ke){return ge=+ge,me=me>>>0,ke||se(this,ge,me,2,65535,0),this[me]=ge>>>8,this[me+1]=ge&255,me+2},s.prototype.writeUInt32LE=function(ge,me,ke){return ge=+ge,me=me>>>0,ke||se(this,ge,me,4,4294967295,0),this[me+3]=ge>>>24,this[me+2]=ge>>>16,this[me+1]=ge>>>8,this[me]=ge&255,me+4},s.prototype.writeUInt32BE=function(ge,me,ke){return ge=+ge,me=me>>>0,ke||se(this,ge,me,4,4294967295,0),this[me]=ge>>>24,this[me+1]=ge>>>16,this[me+2]=ge>>>8,this[me+3]=ge&255,me+4},s.prototype.writeIntLE=function(ge,me,ke,Ae){if(ge=+ge,me=me>>>0,!Ae){var Ne=Math.pow(2,8*ke-1);se(this,ge,me,ke,Ne-1,-Ne)}var He=0,Ge=1,_e=0;for(this[me]=ge&255;++He<ke&&(Ge*=256);)ge<0&&_e===0&&this[me+He-1]!==0&&(_e=1),this[me+He]=(ge/Ge>>0)-_e&255;return me+ke},s.prototype.writeIntBE=function(ge,me,ke,Ae){if(ge=+ge,me=me>>>0,!Ae){var Ne=Math.pow(2,8*ke-1);se(this,ge,me,ke,Ne-1,-Ne)}var He=ke-1,Ge=1,_e=0;for(this[me+He]=ge&255;--He>=0&&(Ge*=256);)ge<0&&_e===0&&this[me+He+1]!==0&&(_e=1),this[me+He]=(ge/Ge>>0)-_e&255;return me+ke},s.prototype.writeInt8=function(ge,me,ke){return ge=+ge,me=me>>>0,ke||se(this,ge,me,1,127,-128),ge<0&&(ge=255+ge+1),this[me]=ge&255,me+1},s.prototype.writeInt16LE=function(ge,me,ke){return ge=+ge,me=me>>>0,ke||se(this,ge,me,2,32767,-32768),this[me]=ge&255,this[me+1]=ge>>>8,me+2},s.prototype.writeInt16BE=function(ge,me,ke){return ge=+ge,me=me>>>0,ke||se(this,ge,me,2,32767,-32768),this[me]=ge>>>8,this[me+1]=ge&255,me+2},s.prototype.writeInt32LE=function(ge,me,ke){return ge=+ge,me=me>>>0,ke||se(this,ge,me,4,2147483647,-2147483648),this[me]=ge&255,this[me+1]=ge>>>8,this[me+2]=ge>>>16,this[me+3]=ge>>>24,me+4},s.prototype.writeInt32BE=function(ge,me,ke){return ge=+ge,me=me>>>0,ke||se(this,ge,me,4,2147483647,-2147483648),ge<0&&(ge=4294967295+ge+1),this[me]=ge>>>24,this[me+1]=ge>>>16,this[me+2]=ge>>>8,this[me+3]=ge&255,me+4};function le(he,ge,me,ke,Ae,Ne){if(me+ke>he.length)throw new RangeError("Index out of range");if(me<0)throw new RangeError("Index out of range")}function oe(he,ge,me,ke,Ae){return ge=+ge,me=me>>>0,Ae||le(he,ge,me,4),a.write(he,ge,me,ke,23,4),me+4}s.prototype.writeFloatLE=function(ge,me,ke){return oe(this,ge,me,!0,ke)},s.prototype.writeFloatBE=function(ge,me,ke){return oe(this,ge,me,!1,ke)};function U(he,ge,me,ke,Ae){return ge=+ge,me=me>>>0,Ae||le(he,ge,me,8),a.write(he,ge,me,ke,52,8),me+8}s.prototype.writeDoubleLE=function(ge,me,ke){return U(this,ge,me,!0,ke)},s.prototype.writeDoubleBE=function(ge,me,ke){return U(this,ge,me,!1,ke)},s.prototype.copy=function(ge,me,ke,Ae){if(!s.isBuffer(ge))throw new TypeError("argument should be a Buffer");if(ke||(ke=0),!Ae&&Ae!==0&&(Ae=this.length),me>=ge.length&&(me=ge.length),me||(me=0),Ae>0&&Ae<ke&&(Ae=ke),Ae===ke||ge.length===0||this.length===0)return 0;if(me<0)throw new RangeError("targetStart out of bounds");if(ke<0||ke>=this.length)throw new RangeError("Index out of range");if(Ae<0)throw new RangeError("sourceEnd out of bounds");Ae>this.length&&(Ae=this.length),ge.length-me<Ae-ke&&(Ae=ge.length-me+ke);var Ne=Ae-ke;if(this===ge&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(me,ke,Ae);else if(this===ge&&ke<me&&me<Ae)for(var He=Ne-1;He>=0;--He)ge[He+me]=this[He+ke];else Uint8Array.prototype.set.call(ge,this.subarray(ke,Ae),me);return Ne},s.prototype.fill=function(ge,me,ke,Ae){if(typeof ge=="string"){if(typeof me=="string"?(Ae=me,me=0,ke=this.length):typeof ke=="string"&&(Ae=ke,ke=this.length),Ae!==void 0&&typeof Ae!="string")throw new TypeError("encoding must be a string");if(typeof Ae=="string"&&!s.isEncoding(Ae))throw new TypeError("Unknown encoding: "+Ae);if(ge.length===1){var Ne=ge.charCodeAt(0);(Ae==="utf8"&&Ne<128||Ae==="latin1")&&(ge=Ne)}}else typeof ge=="number"&&(ge=ge&255);if(me<0||this.length<me||this.length<ke)throw new RangeError("Out of range index");if(ke<=me)return this;me=me>>>0,ke=ke===void 0?this.length:ke>>>0,ge||(ge=0);var He;if(typeof ge=="number")for(He=me;He<ke;++He)this[He]=ge;else{var Ge=s.isBuffer(ge)?ge:s.from(ge,Ae),_e=Ge.length;if(_e===0)throw new TypeError('The value "'+ge+'" is invalid for argument "value"');for(He=0;He<ke-me;++He)this[He+me]=Ge[He%_e]}return this};var V=/[^+/0-9A-Za-z-_]/g;function re(he){if(he=he.split("=")[0],he=he.trim().replace(V,""),he.length<2)return"";for(;he.length%4!==0;)he=he+"=";return he}function ee(he){return he<16?"0"+he.toString(16):he.toString(16)}function j(he,ge){ge=ge||1/0;for(var me,ke=he.length,Ae=null,Ne=[],He=0;He<ke;++He){if(me=he.charCodeAt(He),me>55295&&me<57344){if(!Ae){if(me>56319){(ge-=3)>-1&&Ne.push(239,191,189);continue}else if(He+1===ke){(ge-=3)>-1&&Ne.push(239,191,189);continue}Ae=me;continue}if(me<56320){(ge-=3)>-1&&Ne.push(239,191,189),Ae=me;continue}me=(Ae-55296<<10|me-56320)+65536}else Ae&&(ge-=3)>-1&&Ne.push(239,191,189);if(Ae=null,me<128){if((ge-=1)<0)break;Ne.push(me)}else if(me<2048){if((ge-=2)<0)break;Ne.push(me>>6|192,me&63|128)}else if(me<65536){if((ge-=3)<0)break;Ne.push(me>>12|224,me>>6&63|128,me&63|128)}else if(me<1114112){if((ge-=4)<0)break;Ne.push(me>>18|240,me>>12&63|128,me>>6&63|128,me&63|128)}else throw new Error("Invalid code point")}return Ne}function Q(he){for(var ge=[],me=0;me<he.length;++me)ge.push(he.charCodeAt(me)&255);return ge}function ne(he,ge){for(var me,ke,Ae,Ne=[],He=0;He<he.length&&!((ge-=2)<0);++He)me=he.charCodeAt(He),ke=me>>8,Ae=me%256,Ne.push(Ae),Ne.push(ke);return Ne}function ae(he){return o.toByteArray(re(he))}function ie(he,ge,me,ke){for(var Ae=0;Ae<ke&&!(Ae+me>=ge.length||Ae>=he.length);++Ae)ge[Ae+me]=he[Ae];return Ae}function ue(he,ge){return he instanceof ge||he!=null&&he.constructor!=null&&he.constructor.name!=null&&he.constructor.name===ge.name}function xe(he){return he!==he}}).call(this)}).call(this,l("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:4}],4:[function(l,b,w){w.read=function(e,o,a,r,n){var c,s,i=n*8-r-1,v=(1<<i)-1,u=v>>1,g=-7,h=a?n-1:0,y=a?-1:1,p=e[o+h];for(h+=y,c=p&(1<<-g)-1,p>>=-g,g+=i;g>0;c=c*256+e[o+h],h+=y,g-=8);for(s=c&(1<<-g)-1,c>>=-g,g+=r;g>0;s=s*256+e[o+h],h+=y,g-=8);if(c===0)c=1-u;else{if(c===v)return s?NaN:(p?-1:1)*(1/0);s=s+Math.pow(2,r),c=c-u}return(p?-1:1)*s*Math.pow(2,c-r)},w.write=function(e,o,a,r,n,c){var s,i,v,u=c*8-n-1,g=(1<<u)-1,h=g>>1,y=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:c-1,A=r?1:-1,m=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(i=isNaN(o)?1:0,s=g):(s=Math.floor(Math.log(o)/Math.LN2),o*(v=Math.pow(2,-s))<1&&(s--,v*=2),s+h>=1?o+=y/v:o+=y*Math.pow(2,1-h),o*v>=2&&(s++,v/=2),s+h>=g?(i=0,s=g):s+h>=1?(i=(o*v-1)*Math.pow(2,n),s=s+h):(i=o*Math.pow(2,h-1)*Math.pow(2,n),s=0));n>=8;e[a+p]=i&255,p+=A,i/=256,n-=8);for(s=s<<n|i,u+=n;u>0;e[a+p]=s&255,p+=A,s/=256,u-=8);e[a+p-A]|=m*128}},{}],5:[function(l,b,w){var e=b.exports={},o,a;function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?o=setTimeout:o=r}catch{o=r}try{typeof clearTimeout=="function"?a=clearTimeout:a=n}catch{a=n}})();function c(m){if(o===setTimeout)return setTimeout(m,0);if((o===r||!o)&&setTimeout)return o=setTimeout,setTimeout(m,0);try{return o(m,0)}catch{try{return o.call(null,m,0)}catch{return o.call(this,m,0)}}}function s(m){if(a===clearTimeout)return clearTimeout(m);if((a===n||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(m);try{return a(m)}catch{try{return a.call(null,m)}catch{return a.call(this,m)}}}var i=[],v=!1,u,g=-1;function h(){!v||!u||(v=!1,u.length?i=u.concat(i):g=-1,i.length&&y())}function y(){if(!v){var m=c(h);v=!0;for(var M=i.length;M;){for(u=i,i=[];++g<M;)u&&u[g].run();g=-1,M=i.length}u=null,v=!1,s(m)}}e.nextTick=function(m){var M=new Array(arguments.length-1);if(arguments.length>1)for(var x=1;x<arguments.length;x++)M[x-1]=arguments[x];i.push(new p(m,M)),i.length===1&&!v&&c(y)};function p(m,M){this.fun=m,this.array=M}p.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function A(){}e.on=A,e.addListener=A,e.once=A,e.off=A,e.removeListener=A,e.removeAllListeners=A,e.emit=A,e.prependListener=A,e.prependOnceListener=A,e.listeners=function(m){return[]},e.binding=function(m){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(m){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},{}],6:[function(l,b,w){b.exports={alpha_shape:l("alpha-shape"),convex_hull:l("convex-hull"),delaunay_triangulate:l("delaunay-triangulate"),gl_cone3d:l("gl-cone3d"),gl_error3d:l("gl-error3d"),gl_heatmap2d:l("gl-heatmap2d"),gl_line3d:l("gl-line3d"),gl_mesh3d:l("gl-mesh3d"),gl_plot2d:l("gl-plot2d"),gl_plot3d:l("gl-plot3d"),gl_pointcloud2d:l("gl-pointcloud2d"),gl_scatter3d:l("gl-scatter3d"),gl_select_box:l("gl-select-box"),gl_spikes2d:l("gl-spikes2d"),gl_streamtube3d:l("gl-streamtube3d"),gl_surface3d:l("gl-surface3d"),ndarray:l("ndarray"),ndarray_linear_interpolate:l("ndarray-linear-interpolate")}},{"alpha-shape":12,"convex-hull":58,"delaunay-triangulate":63,"gl-cone3d":79,"gl-error3d":84,"gl-heatmap2d":88,"gl-line3d":91,"gl-mesh3d":112,"gl-plot2d":118,"gl-plot3d":121,"gl-pointcloud2d":123,"gl-scatter3d":128,"gl-select-box":130,"gl-spikes2d":139,"gl-streamtube3d":143,"gl-surface3d":145,ndarray:259,"ndarray-linear-interpolate":253}],7:[function(l,b,w){b.exports=c;var e=l("turntable-camera-controller"),o=l("orbit-camera-controller"),a=l("matrix-camera-controller");function r(s,i){this._controllerNames=Object.keys(s),this._controllerList=this._controllerNames.map(function(v){return s[v]}),this._mode=i,this._active=s[i],this._active||(this._mode="turntable",this._active=s.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var n=r.prototype;n.flush=function(s){for(var i=this._controllerList,v=0;v<i.length;++v)i[v].flush(s)},n.idle=function(s){for(var i=this._controllerList,v=0;v<i.length;++v)i[v].idle(s)},n.lookAt=function(s,i,v,u){for(var g=this._controllerList,h=0;h<g.length;++h)g[h].lookAt(s,i,v,u)},n.rotate=function(s,i,v,u){for(var g=this._controllerList,h=0;h<g.length;++h)g[h].rotate(s,i,v,u)},n.pan=function(s,i,v,u){for(var g=this._controllerList,h=0;h<g.length;++h)g[h].pan(s,i,v,u)},n.translate=function(s,i,v,u){for(var g=this._controllerList,h=0;h<g.length;++h)g[h].translate(s,i,v,u)},n.setMatrix=function(s,i){for(var v=this._controllerList,u=0;u<v.length;++u)v[u].setMatrix(s,i)},n.setDistanceLimits=function(s,i){for(var v=this._controllerList,u=0;u<v.length;++u)v[u].setDistanceLimits(s,i)},n.setDistance=function(s,i){for(var v=this._controllerList,u=0;u<v.length;++u)v[u].setDistance(s,i)},n.recalcMatrix=function(s){this._active.recalcMatrix(s)},n.getDistance=function(s){return this._active.getDistance(s)},n.getDistanceLimits=function(s){return this._active.getDistanceLimits(s)},n.lastT=function(){return this._active.lastT()},n.setMode=function(s){if(s!==this._mode){var i=this._controllerNames.indexOf(s);if(!(i<0)){var v=this._active,u=this._controllerList[i],g=Math.max(v.lastT(),u.lastT());v.recalcMatrix(g),u.setMatrix(g,v.computedMatrix),this._active=u,this._mode=s,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},n.getMode=function(){return this._mode};function c(s){s=s||{};var i=s.eye||[0,0,1],v=s.center||[0,0,0],u=s.up||[0,1,0],g=s.distanceLimits||[0,1/0],h=s.mode||"turntable",y=e(),p=o(),A=a();return y.setDistanceLimits(g[0],g[1]),y.lookAt(0,i,v,u),p.setDistanceLimits(g[0],g[1]),p.lookAt(0,i,v,u),A.setDistanceLimits(g[0],g[1]),A.lookAt(0,i,v,u),new r({turntable:y,orbit:p,matrix:A},h)}},{"matrix-camera-controller":245,"orbit-camera-controller":263,"turntable-camera-controller":305}],8:[function(l,b,w){var e=typeof WeakMap=="undefined"?l("weak-map"):WeakMap,o=l("gl-buffer"),a=l("gl-vao"),r=new e;function n(c){var s=r.get(c),i=s&&(s._triangleBuffer.handle||s._triangleBuffer.buffer);if(!i||!c.isBuffer(i)){var v=o(c,new Float32Array([-1,-1,-1,4,4,-1]));s=a(c,[{buffer:v,type:c.FLOAT,size:2}]),s._triangleBuffer=v,r.set(c,s)}s.bind(),c.drawArrays(c.TRIANGLES,0,3),s.unbind()}b.exports=n},{"gl-buffer":78,"gl-vao":150,"weak-map":313}],9:[function(l,b,w){var e=l("pad-left");b.exports=o;function o(a,r,n){r=typeof r=="number"?r:1,n=n||": ";var c=a.split(/\r?\n/),s=String(c.length+r-1).length;return c.map(function(i,v){var u=v+r,g=String(u).length,h=e(u,s-g);return h+n+i}).join(`
`)}},{"pad-left":264}],10:[function(l,b,w){b.exports=a;var e=l("robust-orientation");function o(r,n){for(var c=new Array(n+1),s=0;s<r.length;++s)c[s]=r[s];for(var s=0;s<=r.length;++s){for(var i=r.length;i<=n;++i){for(var v=new Array(n),u=0;u<n;++u)v[u]=Math.pow(i+1-s,u);c[i]=v}var g=e.apply(void 0,c);if(g)return!0}return!1}function a(r){var n=r.length;if(n===0)return[];if(n===1)return[0];for(var c=r[0].length,s=[r[0]],i=[0],v=1;v<n;++v){if(s.push(r[v]),!o(s,c)){s.pop();continue}if(i.push(v),i.length===c+1)return i}return i}},{"robust-orientation":284}],11:[function(l,b,w){b.exports=a;var e=l("delaunay-triangulate"),o=l("circumradius");function a(r,n){return e(n).filter(function(c){for(var s=new Array(c.length),i=0;i<c.length;++i)s[i]=n[c[i]];return o(s)*r<1})}},{circumradius:49,"delaunay-triangulate":63}],12:[function(l,b,w){b.exports=a;var e=l("alpha-complex"),o=l("simplicial-complex-boundary");function a(r,n){return o(e(r,n))}},{"alpha-complex":11,"simplicial-complex-boundary":290}],13:[function(l,b,w){b.exports=function(o){return atob(o)}},{}],14:[function(l,b,w){b.exports=a;var e=l("robust-linear-solve");function o(r){for(var n=0,c=0;c<r.length;++c)n+=r[c];return n}function a(r,n){for(var c=n.length,s=new Array(c+1),i=0;i<c;++i){for(var v=new Array(c+1),u=0;u<=c;++u)v[u]=r[u][i];s[i]=v}s[c]=new Array(c+1);for(var i=0;i<=c;++i)s[c][i]=1;for(var g=new Array(c+1),i=0;i<c;++i)g[i]=n[i];g[c]=1;var h=e(s,g),y=o(h[c+1]);y===0&&(y=1);for(var p=new Array(c+1),i=0;i<=c;++i)p[i]=o(h[i])/y;return p}},{"robust-linear-solve":283}],15:[function(l,b,w){var e=l("./lib/rationalize");b.exports=o;function o(a,r){return e(a[0].mul(r[1]).add(r[0].mul(a[1])),a[1].mul(r[1]))}},{"./lib/rationalize":25}],16:[function(l,b,w){b.exports=e;function e(o,a){return o[0].mul(a[1]).cmp(a[0].mul(o[1]))}},{}],17:[function(l,b,w){var e=l("./lib/rationalize");b.exports=o;function o(a,r){return e(a[0].mul(r[1]),a[1].mul(r[0]))}},{"./lib/rationalize":25}],18:[function(l,b,w){var e=l("./is-rat"),o=l("./lib/is-bn"),a=l("./lib/num-to-bn"),r=l("./lib/str-to-bn"),n=l("./lib/rationalize"),c=l("./div");b.exports=s;function s(i,v){if(e(i))return v?c(i,s(v)):[i[0].clone(),i[1].clone()];var u=0,g,h;if(o(i))g=i.clone();else if(typeof i=="string")g=r(i);else{if(i===0)return[a(0),a(1)];if(i===Math.floor(i))g=a(i);else{for(;i!==Math.floor(i);)i=i*Math.pow(2,256),u-=256;g=a(i)}}if(e(v))g.mul(v[1]),h=v[0].clone();else if(o(v))h=v.clone();else if(typeof v=="string")h=r(v);else if(!v)h=a(1);else if(v===Math.floor(v))h=a(v);else{for(;v!==Math.floor(v);)v=v*Math.pow(2,256),u+=256;h=a(v)}return u>0?g=g.ushln(u):u<0&&(h=h.ushln(-u)),n(g,h)}},{"./div":17,"./is-rat":19,"./lib/is-bn":23,"./lib/num-to-bn":24,"./lib/rationalize":25,"./lib/str-to-bn":26}],19:[function(l,b,w){var e=l("./lib/is-bn");b.exports=o;function o(a){return Array.isArray(a)&&a.length===2&&e(a[0])&&e(a[1])}},{"./lib/is-bn":23}],20:[function(l,b,w){var e=l("bn.js");b.exports=o;function o(a){return a.cmp(new e(0))}},{"bn.js":33}],21:[function(l,b,w){var e=l("./bn-sign");b.exports=o;function o(a){var r=a.length,n=a.words,c=0;if(r===1)c=n[0];else if(r===2)c=n[0]+n[1]*67108864;else for(var s=0;s<r;s++){var i=n[s];c+=i*Math.pow(67108864,s)}return e(a)*c}},{"./bn-sign":20}],22:[function(l,b,w){var e=l("double-bits"),o=l("bit-twiddle").countTrailingZeros;b.exports=a;function a(r){var n=o(e.lo(r));if(n<32)return n;var c=o(e.hi(r));return c>20?52:c+32}},{"bit-twiddle":32,"double-bits":64}],23:[function(l,b,w){l("bn.js"),b.exports=e;function e(o){return o&&typeof o=="object"&&Boolean(o.words)}},{"bn.js":33}],24:[function(l,b,w){var e=l("bn.js"),o=l("double-bits");b.exports=a;function a(r){var n=o.exponent(r);return n<52?new e(r):new e(r*Math.pow(2,52-n)).ushln(n-52)}},{"bn.js":33,"double-bits":64}],25:[function(l,b,w){var e=l("./num-to-bn"),o=l("./bn-sign");b.exports=a;function a(r,n){var c=o(r),s=o(n);if(c===0)return[e(0),e(1)];if(s===0)return[e(0),e(0)];s<0&&(r=r.neg(),n=n.neg());var i=r.gcd(n);return i.cmpn(1)?[r.div(i),n.div(i)]:[r,n]}},{"./bn-sign":20,"./num-to-bn":24}],26:[function(l,b,w){var e=l("bn.js");b.exports=o;function o(a){return new e(a)}},{"bn.js":33}],27:[function(l,b,w){var e=l("./lib/rationalize");b.exports=o;function o(a,r){return e(a[0].mul(r[0]),a[1].mul(r[1]))}},{"./lib/rationalize":25}],28:[function(l,b,w){var e=l("./lib/bn-sign");b.exports=o;function o(a){return e(a[0])*e(a[1])}},{"./lib/bn-sign":20}],29:[function(l,b,w){var e=l("./lib/rationalize");b.exports=o;function o(a,r){return e(a[0].mul(r[1]).sub(a[1].mul(r[0])),a[1].mul(r[1]))}},{"./lib/rationalize":25}],30:[function(l,b,w){var e=l("./lib/bn-to-num"),o=l("./lib/ctz");b.exports=a;function a(r){var n=r[0],c=r[1];if(n.cmpn(0)===0)return 0;var s=n.abs().divmod(c.abs()),i=s.div,v=e(i),u=s.mod,g=n.negative!==c.negative?-1:1;if(u.cmpn(0)===0)return g*v;if(v){var h=o(v)+4,y=e(u.ushln(h).divRound(c));return g*(v+y*Math.pow(2,-h))}else{var p=c.bitLength()-u.bitLength()+53,y=e(u.ushln(p).divRound(c));return p<1023?g*y*Math.pow(2,-p):(y*=Math.pow(2,-1023),g*y*Math.pow(2,1023-p))}}},{"./lib/bn-to-num":21,"./lib/ctz":22}],31:[function(l,b,w){function e(s,i,v,u,g){for(var h=g+1;u<=g;){var y=u+g>>>1,p=s[y],A=v!==void 0?v(p,i):p-i;A>=0?(h=y,g=y-1):u=y+1}return h}function o(s,i,v,u,g){for(var h=g+1;u<=g;){var y=u+g>>>1,p=s[y],A=v!==void 0?v(p,i):p-i;A>0?(h=y,g=y-1):u=y+1}return h}function a(s,i,v,u,g){for(var h=u-1;u<=g;){var y=u+g>>>1,p=s[y],A=v!==void 0?v(p,i):p-i;A<0?(h=y,u=y+1):g=y-1}return h}function r(s,i,v,u,g){for(var h=u-1;u<=g;){var y=u+g>>>1,p=s[y],A=v!==void 0?v(p,i):p-i;A<=0?(h=y,u=y+1):g=y-1}return h}function n(s,i,v,u,g){for(;u<=g;){var h=u+g>>>1,y=s[h],p=v!==void 0?v(y,i):y-i;if(p===0)return h;p<=0?u=h+1:g=h-1}return-1}function c(s,i,v,u,g,h){return typeof v=="function"?h(s,i,v,u===void 0?0:u|0,g===void 0?s.length-1:g|0):h(s,i,void 0,v===void 0?0:v|0,u===void 0?s.length-1:u|0)}b.exports={ge:function(s,i,v,u,g){return c(s,i,v,u,g,e)},gt:function(s,i,v,u,g){return c(s,i,v,u,g,o)},lt:function(s,i,v,u,g){return c(s,i,v,u,g,a)},le:function(s,i,v,u,g){return c(s,i,v,u,g,r)},eq:function(s,i,v,u,g){return c(s,i,v,u,g,n)}}},{}],32:[function(l,b,w){var e=32;w.INT_BITS=e,w.INT_MAX=2147483647,w.INT_MIN=-1<<e-1,w.sign=function(r){return(r>0)-(r<0)},w.abs=function(r){var n=r>>e-1;return(r^n)-n},w.min=function(r,n){return n^(r^n)&-(r<n)},w.max=function(r,n){return r^(r^n)&-(r<n)},w.isPow2=function(r){return!(r&r-1)&&!!r},w.log2=function(r){var n,c;return n=(r>65535)<<4,r>>>=n,c=(r>255)<<3,r>>>=c,n|=c,c=(r>15)<<2,r>>>=c,n|=c,c=(r>3)<<1,r>>>=c,n|=c,n|r>>1},w.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},w.popCount=function(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),(r+(r>>>4)&252645135)*16843009>>>24};function o(r){var n=32;return r&=-r,r&&n--,r&65535&&(n-=16),r&16711935&&(n-=8),r&252645135&&(n-=4),r&858993459&&(n-=2),r&1431655765&&(n-=1),n}w.countTrailingZeros=o,w.nextPow2=function(r){return r+=r===0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1},w.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r-(r>>>1)},w.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,r&=15,27030>>>r&1};var a=new Array(256);(function(r){for(var n=0;n<256;++n){var c=n,s=n,i=7;for(c>>>=1;c;c>>>=1)s<<=1,s|=c&1,--i;r[n]=s<<i&255}})(a),w.reverse=function(r){return a[r&255]<<24|a[r>>>8&255]<<16|a[r>>>16&255]<<8|a[r>>>24&255]},w.interleave2=function(r,n){return r&=65535,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,n&=65535,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,r|n<<1},w.deinterleave2=function(r,n){return r=r>>>n&1431655765,r=(r|r>>>1)&858993459,r=(r|r>>>2)&252645135,r=(r|r>>>4)&16711935,r=(r|r>>>16)&65535,r<<16>>16},w.interleave3=function(r,n,c){return r&=1023,r=(r|r<<16)&4278190335,r=(r|r<<8)&251719695,r=(r|r<<4)&3272356035,r=(r|r<<2)&1227133513,n&=1023,n=(n|n<<16)&4278190335,n=(n|n<<8)&251719695,n=(n|n<<4)&3272356035,n=(n|n<<2)&1227133513,r|=n<<1,c&=1023,c=(c|c<<16)&4278190335,c=(c|c<<8)&251719695,c=(c|c<<4)&3272356035,c=(c|c<<2)&1227133513,r|c<<2},w.deinterleave3=function(r,n){return r=r>>>n&1227133513,r=(r|r>>>2)&3272356035,r=(r|r>>>4)&251719695,r=(r|r>>>8)&4278190335,r=(r|r>>>16)&1023,r<<22>>22},w.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>o(r)+1}},{}],33:[function(l,b,w){(function(e,o){function a(I,R){if(!I)throw new Error(R||"Assertion failed")}function r(I,R){I.super_=R;var D=function(){};D.prototype=R.prototype,I.prototype=new D,I.prototype.constructor=I}function n(I,R,D){if(n.isBN(I))return I;this.negative=0,this.words=null,this.length=0,this.red=null,I!==null&&((R==="le"||R==="be")&&(D=R,R=10),this._init(I||0,R||10,D||"be"))}typeof e=="object"?e.exports=n:o.BN=n,n.BN=n,n.wordSize=26;var c;try{typeof window!="undefined"&&typeof window.Buffer!="undefined"?c=window.Buffer:c=l("buffer").Buffer}catch{}n.isBN=function(R){return R instanceof n?!0:R!==null&&typeof R=="object"&&R.constructor.wordSize===n.wordSize&&Array.isArray(R.words)},n.max=function(R,D){return R.cmp(D)>0?R:D},n.min=function(R,D){return R.cmp(D)<0?R:D},n.prototype._init=function(R,D,O){if(typeof R=="number")return this._initNumber(R,D,O);if(typeof R=="object")return this._initArray(R,D,O);D==="hex"&&(D=16),a(D===(D|0)&&D>=2&&D<=36),R=R.toString().replace(/\s+/g,"");var F=0;R[0]==="-"&&(F++,this.negative=1),F<R.length&&(D===16?this._parseHex(R,F,O):(this._parseBase(R,D,F),O==="le"&&this._initArray(this.toArray(),D,O)))},n.prototype._initNumber=function(R,D,O){R<0&&(this.negative=1,R=-R),R<67108864?(this.words=[R&67108863],this.length=1):R<4503599627370496?(this.words=[R&67108863,R/67108864&67108863],this.length=2):(a(R<9007199254740992),this.words=[R&67108863,R/67108864&67108863,1],this.length=3),O==="le"&&this._initArray(this.toArray(),D,O)},n.prototype._initArray=function(R,D,O){if(a(typeof R.length=="number"),R.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(R.length/3),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var G,W,q=0;if(O==="be")for(F=R.length-1,G=0;F>=0;F-=3)W=R[F]|R[F-1]<<8|R[F-2]<<16,this.words[G]|=W<<q&67108863,this.words[G+1]=W>>>26-q&67108863,q+=24,q>=26&&(q-=26,G++);else if(O==="le")for(F=0,G=0;F<R.length;F+=3)W=R[F]|R[F+1]<<8|R[F+2]<<16,this.words[G]|=W<<q&67108863,this.words[G+1]=W>>>26-q&67108863,q+=24,q>=26&&(q-=26,G++);return this.strip()};function s(I,R){var D=I.charCodeAt(R);return D>=65&&D<=70?D-55:D>=97&&D<=102?D-87:D-48&15}function i(I,R,D){var O=s(I,D);return D-1>=R&&(O|=s(I,D-1)<<4),O}n.prototype._parseHex=function(R,D,O){this.length=Math.ceil((R.length-D)/6),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var G=0,W=0,q;if(O==="be")for(F=R.length-1;F>=D;F-=2)q=i(R,D,F)<<G,this.words[W]|=q&67108863,G>=18?(G-=18,W+=1,this.words[W]|=q>>>26):G+=8;else{var J=R.length-D;for(F=J%2===0?D+1:D;F<R.length;F+=2)q=i(R,D,F)<<G,this.words[W]|=q&67108863,G>=18?(G-=18,W+=1,this.words[W]|=q>>>26):G+=8}this.strip()};function v(I,R,D,O){for(var F=0,G=Math.min(I.length,D),W=R;W<G;W++){var q=I.charCodeAt(W)-48;F*=O,q>=49?F+=q-49+10:q>=17?F+=q-17+10:F+=q}return F}n.prototype._parseBase=function(R,D,O){this.words=[0],this.length=1;for(var F=0,G=1;G<=67108863;G*=D)F++;F--,G=G/D|0;for(var W=R.length-O,q=W%F,J=Math.min(W,W-q)+O,X=0,Z=O;Z<J;Z+=F)X=v(R,Z,Z+F,D),this.imuln(G),this.words[0]+X<67108864?this.words[0]+=X:this._iaddn(X);if(q!==0){var se=1;for(X=v(R,Z,R.length,D),Z=0;Z<q;Z++)se*=D;this.imuln(se),this.words[0]+X<67108864?this.words[0]+=X:this._iaddn(X)}this.strip()},n.prototype.copy=function(R){R.words=new Array(this.length);for(var D=0;D<this.length;D++)R.words[D]=this.words[D];R.length=this.length,R.negative=this.negative,R.red=this.red},n.prototype.clone=function(){var R=new n(null);return this.copy(R),R},n.prototype._expand=function(R){for(;this.length<R;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(R,D){R=R||10,D=D|0||1;var O;if(R===16||R==="hex"){O="";for(var F=0,G=0,W=0;W<this.length;W++){var q=this.words[W],J=((q<<F|G)&16777215).toString(16);G=q>>>24-F&16777215,G!==0||W!==this.length-1?O=u[6-J.length]+J+O:O=J+O,F+=2,F>=26&&(F-=26,W--)}for(G!==0&&(O=G.toString(16)+O);O.length%D!==0;)O="0"+O;return this.negative!==0&&(O="-"+O),O}if(R===(R|0)&&R>=2&&R<=36){var X=g[R],Z=h[R];O="";var se=this.clone();for(se.negative=0;!se.isZero();){var le=se.modn(Z).toString(R);se=se.idivn(Z),se.isZero()?O=le+O:O=u[X-le.length]+le+O}for(this.isZero()&&(O="0"+O);O.length%D!==0;)O="0"+O;return this.negative!==0&&(O="-"+O),O}a(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var R=this.words[0];return this.length===2?R+=this.words[1]*67108864:this.length===3&&this.words[2]===1?R+=4503599627370496+this.words[1]*67108864:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-R:R},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(R,D){return a(typeof c!="undefined"),this.toArrayLike(c,R,D)},n.prototype.toArray=function(R,D){return this.toArrayLike(Array,R,D)},n.prototype.toArrayLike=function(R,D,O){var F=this.byteLength(),G=O||Math.max(1,F);a(F<=G,"byte array longer than desired length"),a(G>0,"Requested array length <= 0"),this.strip();var W=D==="le",q=new R(G),J,X,Z=this.clone();if(W){for(X=0;!Z.isZero();X++)J=Z.andln(255),Z.iushrn(8),q[X]=J;for(;X<G;X++)q[X]=0}else{for(X=0;X<G-F;X++)q[X]=0;for(X=0;!Z.isZero();X++)J=Z.andln(255),Z.iushrn(8),q[G-X-1]=J}return q},Math.clz32?n.prototype._countBits=function(R){return 32-Math.clz32(R)}:n.prototype._countBits=function(R){var D=R,O=0;return D>=4096&&(O+=13,D>>>=13),D>=64&&(O+=7,D>>>=7),D>=8&&(O+=4,D>>>=4),D>=2&&(O+=2,D>>>=2),O+D},n.prototype._zeroBits=function(R){if(R===0)return 26;var D=R,O=0;return(D&8191)===0&&(O+=13,D>>>=13),(D&127)===0&&(O+=7,D>>>=7),(D&15)===0&&(O+=4,D>>>=4),(D&3)===0&&(O+=2,D>>>=2),(D&1)===0&&O++,O},n.prototype.bitLength=function(){var R=this.words[this.length-1],D=this._countBits(R);return(this.length-1)*26+D};function y(I){for(var R=new Array(I.bitLength()),D=0;D<R.length;D++){var O=D/26|0,F=D%26;R[D]=(I.words[O]&1<<F)>>>F}return R}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var R=0,D=0;D<this.length;D++){var O=this._zeroBits(this.words[D]);if(R+=O,O!==26)break}return R},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(R){return this.negative!==0?this.abs().inotn(R).iaddn(1):this.clone()},n.prototype.fromTwos=function(R){return this.testn(R-1)?this.notn(R).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(R){for(;this.length<R.length;)this.words[this.length++]=0;for(var D=0;D<R.length;D++)this.words[D]=this.words[D]|R.words[D];return this.strip()},n.prototype.ior=function(R){return a((this.negative|R.negative)===0),this.iuor(R)},n.prototype.or=function(R){return this.length>R.length?this.clone().ior(R):R.clone().ior(this)},n.prototype.uor=function(R){return this.length>R.length?this.clone().iuor(R):R.clone().iuor(this)},n.prototype.iuand=function(R){var D;this.length>R.length?D=R:D=this;for(var O=0;O<D.length;O++)this.words[O]=this.words[O]&R.words[O];return this.length=D.length,this.strip()},n.prototype.iand=function(R){return a((this.negative|R.negative)===0),this.iuand(R)},n.prototype.and=function(R){return this.length>R.length?this.clone().iand(R):R.clone().iand(this)},n.prototype.uand=function(R){return this.length>R.length?this.clone().iuand(R):R.clone().iuand(this)},n.prototype.iuxor=function(R){var D,O;this.length>R.length?(D=this,O=R):(D=R,O=this);for(var F=0;F<O.length;F++)this.words[F]=D.words[F]^O.words[F];if(this!==D)for(;F<D.length;F++)this.words[F]=D.words[F];return this.length=D.length,this.strip()},n.prototype.ixor=function(R){return a((this.negative|R.negative)===0),this.iuxor(R)},n.prototype.xor=function(R){return this.length>R.length?this.clone().ixor(R):R.clone().ixor(this)},n.prototype.uxor=function(R){return this.length>R.length?this.clone().iuxor(R):R.clone().iuxor(this)},n.prototype.inotn=function(R){a(typeof R=="number"&&R>=0);var D=Math.ceil(R/26)|0,O=R%26;this._expand(D),O>0&&D--;for(var F=0;F<D;F++)this.words[F]=~this.words[F]&67108863;return O>0&&(this.words[F]=~this.words[F]&67108863>>26-O),this.strip()},n.prototype.notn=function(R){return this.clone().inotn(R)},n.prototype.setn=function(R,D){a(typeof R=="number"&&R>=0);var O=R/26|0,F=R%26;return this._expand(O+1),D?this.words[O]=this.words[O]|1<<F:this.words[O]=this.words[O]&~(1<<F),this.strip()},n.prototype.iadd=function(R){var D;if(this.negative!==0&&R.negative===0)return this.negative=0,D=this.isub(R),this.negative^=1,this._normSign();if(this.negative===0&&R.negative!==0)return R.negative=0,D=this.isub(R),R.negative=1,D._normSign();var O,F;this.length>R.length?(O=this,F=R):(O=R,F=this);for(var G=0,W=0;W<F.length;W++)D=(O.words[W]|0)+(F.words[W]|0)+G,this.words[W]=D&67108863,G=D>>>26;for(;G!==0&&W<O.length;W++)D=(O.words[W]|0)+G,this.words[W]=D&67108863,G=D>>>26;if(this.length=O.length,G!==0)this.words[this.length]=G,this.length++;else if(O!==this)for(;W<O.length;W++)this.words[W]=O.words[W];return this},n.prototype.add=function(R){var D;return R.negative!==0&&this.negative===0?(R.negative=0,D=this.sub(R),R.negative^=1,D):R.negative===0&&this.negative!==0?(this.negative=0,D=R.sub(this),this.negative=1,D):this.length>R.length?this.clone().iadd(R):R.clone().iadd(this)},n.prototype.isub=function(R){if(R.negative!==0){R.negative=0;var D=this.iadd(R);return R.negative=1,D._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(R),this.negative=1,this._normSign();var O=this.cmp(R);if(O===0)return this.negative=0,this.length=1,this.words[0]=0,this;var F,G;O>0?(F=this,G=R):(F=R,G=this);for(var W=0,q=0;q<G.length;q++)D=(F.words[q]|0)-(G.words[q]|0)+W,W=D>>26,this.words[q]=D&67108863;for(;W!==0&&q<F.length;q++)D=(F.words[q]|0)+W,W=D>>26,this.words[q]=D&67108863;if(W===0&&q<F.length&&F!==this)for(;q<F.length;q++)this.words[q]=F.words[q];return this.length=Math.max(this.length,q),F!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(R){return this.clone().isub(R)};function p(I,R,D){D.negative=R.negative^I.negative;var O=I.length+R.length|0;D.length=O,O=O-1|0;var F=I.words[0]|0,G=R.words[0]|0,W=F*G,q=W&67108863,J=W/67108864|0;D.words[0]=q;for(var X=1;X<O;X++){for(var Z=J>>>26,se=J&67108863,le=Math.min(X,R.length-1),oe=Math.max(0,X-I.length+1);oe<=le;oe++){var U=X-oe|0;F=I.words[U]|0,G=R.words[oe]|0,W=F*G+se,Z+=W/67108864|0,se=W&67108863}D.words[X]=se|0,J=Z|0}return J!==0?D.words[X]=J|0:D.length--,D.strip()}var A=function(R,D,O){var F=R.words,G=D.words,W=O.words,q=0,J,X,Z,se=F[0]|0,le=se&8191,oe=se>>>13,U=F[1]|0,V=U&8191,re=U>>>13,ee=F[2]|0,j=ee&8191,Q=ee>>>13,ne=F[3]|0,ae=ne&8191,ie=ne>>>13,ue=F[4]|0,xe=ue&8191,he=ue>>>13,ge=F[5]|0,me=ge&8191,ke=ge>>>13,Ae=F[6]|0,Ne=Ae&8191,He=Ae>>>13,Ge=F[7]|0,_e=Ge&8191,De=Ge>>>13,Ye=F[8]|0,qe=Ye&8191,Ue=Ye>>>13,Ie=F[9]|0,Ve=Ie&8191,dt=Ie>>>13,Dt=G[0]|0,Yt=Dt&8191,kt=Dt>>>13,Ft=G[1]|0,Nt=Ft&8191,Lt=Ft>>>13,St=G[2]|0,it=St&8191,ht=St>>>13,Qe=G[3]|0,Ce=Qe&8191,je=Qe>>>13,rt=G[4]|0,ut=rt&8191,Pt=rt>>>13,Tt=G[5]|0,Ot=Tt&8191,Kt=Tt>>>13,Bt=G[6]|0,Zt=Bt&8191,Je=Bt>>>13,pt=G[7]|0,Et=pt&8191,ar=pt>>>13,vr=G[8]|0,ir=vr&8191,dr=vr>>>13,Pr=G[9]|0,Sr=Pr&8191,tr=Pr>>>13;O.negative=R.negative^D.negative,O.length=19,J=Math.imul(le,Yt),X=Math.imul(le,kt),X=X+Math.imul(oe,Yt)|0,Z=Math.imul(oe,kt);var Nr=(q+J|0)+((X&8191)<<13)|0;q=(Z+(X>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,J=Math.imul(V,Yt),X=Math.imul(V,kt),X=X+Math.imul(re,Yt)|0,Z=Math.imul(re,kt),J=J+Math.imul(le,Nt)|0,X=X+Math.imul(le,Lt)|0,X=X+Math.imul(oe,Nt)|0,Z=Z+Math.imul(oe,Lt)|0;var et=(q+J|0)+((X&8191)<<13)|0;q=(Z+(X>>>13)|0)+(et>>>26)|0,et&=67108863,J=Math.imul(j,Yt),X=Math.imul(j,kt),X=X+Math.imul(Q,Yt)|0,Z=Math.imul(Q,kt),J=J+Math.imul(V,Nt)|0,X=X+Math.imul(V,Lt)|0,X=X+Math.imul(re,Nt)|0,Z=Z+Math.imul(re,Lt)|0,J=J+Math.imul(le,it)|0,X=X+Math.imul(le,ht)|0,X=X+Math.imul(oe,it)|0,Z=Z+Math.imul(oe,ht)|0;var we=(q+J|0)+((X&8191)<<13)|0;q=(Z+(X>>>13)|0)+(we>>>26)|0,we&=67108863,J=Math.imul(ae,Yt),X=Math.imul(ae,kt),X=X+Math.imul(ie,Yt)|0,Z=Math.imul(ie,kt),J=J+Math.imul(j,Nt)|0,X=X+Math.imul(j,Lt)|0,X=X+Math.imul(Q,Nt)|0,Z=Z+Math.imul(Q,Lt)|0,J=J+Math.imul(V,it)|0,X=X+Math.imul(V,ht)|0,X=X+Math.imul(re,it)|0,Z=Z+Math.imul(re,ht)|0,J=J+Math.imul(le,Ce)|0,X=X+Math.imul(le,je)|0,X=X+Math.imul(oe,Ce)|0,Z=Z+Math.imul(oe,je)|0;var Me=(q+J|0)+((X&8191)<<13)|0;q=(Z+(X>>>13)|0)+(Me>>>26)|0,Me&=67108863,J=Math.imul(xe,Yt),X=Math.imul(xe,kt),X=X+Math.imul(he,Yt)|0,Z=Math.imul(he,kt),J=J+Math.imul(ae,Nt)|0,X=X+Math.imul(ae,Lt)|0,X=X+Math.imul(ie,Nt)|0,Z=Z+Math.imul(ie,Lt)|0,J=J+Math.imul(j,it)|0,X=X+Math.imul(j,ht)|0,X=X+Math.imul(Q,it)|0,Z=Z+Math.imul(Q,ht)|0,J=J+Math.imul(V,Ce)|0,X=X+Math.imul(V,je)|0,X=X+Math.imul(re,Ce)|0,Z=Z+Math.imul(re,je)|0,J=J+Math.imul(le,ut)|0,X=X+Math.imul(le,Pt)|0,X=X+Math.imul(oe,ut)|0,Z=Z+Math.imul(oe,Pt)|0;var Re=(q+J|0)+((X&8191)<<13)|0;q=(Z+(X>>>13)|0)+(Re>>>26)|0,Re&=67108863,J=Math.imul(me,Yt),X=Math.imul(me,kt),X=X+Math.imul(ke,Yt)|0,Z=Math.imul(ke,kt),J=J+Math.imul(xe,Nt)|0,X=X+Math.imul(xe,Lt)|0,X=X+Math.imul(he,Nt)|0,Z=Z+Math.imul(he,Lt)|0,J=J+Math.imul(ae,it)|0,X=X+Math.imul(ae,ht)|0,X=X+Math.imul(ie,it)|0,Z=Z+Math.imul(ie,ht)|0,J=J+Math.imul(j,Ce)|0,X=X+Math.imul(j,je)|0,X=X+Math.imul(Q,Ce)|0,Z=Z+Math.imul(Q,je)|0,J=J+Math.imul(V,ut)|0,X=X+Math.imul(V,Pt)|0,X=X+Math.imul(re,ut)|0,Z=Z+Math.imul(re,Pt)|0,J=J+Math.imul(le,Ot)|0,X=X+Math.imul(le,Kt)|0,X=X+Math.imul(oe,Ot)|0,Z=Z+Math.imul(oe,Kt)|0;var Xe=(q+J|0)+((X&8191)<<13)|0;q=(Z+(X>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,J=Math.imul(Ne,Yt),X=Math.imul(Ne,kt),X=X+Math.imul(He,Yt)|0,Z=Math.imul(He,kt),J=J+Math.imul(me,Nt)|0,X=X+Math.imul(me,Lt)|0,X=X+Math.imul(ke,Nt)|0,Z=Z+Math.imul(ke,Lt)|0,J=J+Math.imul(xe,it)|0,X=X+Math.imul(xe,ht)|0,X=X+Math.imul(he,it)|0,Z=Z+Math.imul(he,ht)|0,J=J+Math.imul(ae,Ce)|0,X=X+Math.imul(ae,je)|0,X=X+Math.imul(ie,Ce)|0,Z=Z+Math.imul(ie,je)|0,J=J+Math.imul(j,ut)|0,X=X+Math.imul(j,Pt)|0,X=X+Math.imul(Q,ut)|0,Z=Z+Math.imul(Q,Pt)|0,J=J+Math.imul(V,Ot)|0,X=X+Math.imul(V,Kt)|0,X=X+Math.imul(re,Ot)|0,Z=Z+Math.imul(re,Kt)|0,J=J+Math.imul(le,Zt)|0,X=X+Math.imul(le,Je)|0,X=X+Math.imul(oe,Zt)|0,Z=Z+Math.imul(oe,Je)|0;var $e=(q+J|0)+((X&8191)<<13)|0;q=(Z+(X>>>13)|0)+($e>>>26)|0,$e&=67108863,J=Math.imul(_e,Yt),X=Math.imul(_e,kt),X=X+Math.imul(De,Yt)|0,Z=Math.imul(De,kt),J=J+Math.imul(Ne,Nt)|0,X=X+Math.imul(Ne,Lt)|0,X=X+Math.imul(He,Nt)|0,Z=Z+Math.imul(He,Lt)|0,J=J+Math.imul(me,it)|0,X=X+Math.imul(me,ht)|0,X=X+Math.imul(ke,it)|0,Z=Z+Math.imul(ke,ht)|0,J=J+Math.imul(xe,Ce)|0,X=X+Math.imul(xe,je)|0,X=X+Math.imul(he,Ce)|0,Z=Z+Math.imul(he,je)|0,J=J+Math.imul(ae,ut)|0,X=X+Math.imul(ae,Pt)|0,X=X+Math.imul(ie,ut)|0,Z=Z+Math.imul(ie,Pt)|0,J=J+Math.imul(j,Ot)|0,X=X+Math.imul(j,Kt)|0,X=X+Math.imul(Q,Ot)|0,Z=Z+Math.imul(Q,Kt)|0,J=J+Math.imul(V,Zt)|0,X=X+Math.imul(V,Je)|0,X=X+Math.imul(re,Zt)|0,Z=Z+Math.imul(re,Je)|0,J=J+Math.imul(le,Et)|0,X=X+Math.imul(le,ar)|0,X=X+Math.imul(oe,Et)|0,Z=Z+Math.imul(oe,ar)|0;var ot=(q+J|0)+((X&8191)<<13)|0;q=(Z+(X>>>13)|0)+(ot>>>26)|0,ot&=67108863,J=Math.imul(qe,Yt),X=Math.imul(qe,kt),X=X+Math.imul(Ue,Yt)|0,Z=Math.imul(Ue,kt),J=J+Math.imul(_e,Nt)|0,X=X+Math.imul(_e,Lt)|0,X=X+Math.imul(De,Nt)|0,Z=Z+Math.imul(De,Lt)|0,J=J+Math.imul(Ne,it)|0,X=X+Math.imul(Ne,ht)|0,X=X+Math.imul(He,it)|0,Z=Z+Math.imul(He,ht)|0,J=J+Math.imul(me,Ce)|0,X=X+Math.imul(me,je)|0,X=X+Math.imul(ke,Ce)|0,Z=Z+Math.imul(ke,je)|0,J=J+Math.imul(xe,ut)|0,X=X+Math.imul(xe,Pt)|0,X=X+Math.imul(he,ut)|0,Z=Z+Math.imul(he,Pt)|0,J=J+Math.imul(ae,Ot)|0,X=X+Math.imul(ae,Kt)|0,X=X+Math.imul(ie,Ot)|0,Z=Z+Math.imul(ie,Kt)|0,J=J+Math.imul(j,Zt)|0,X=X+Math.imul(j,Je)|0,X=X+Math.imul(Q,Zt)|0,Z=Z+Math.imul(Q,Je)|0,J=J+Math.imul(V,Et)|0,X=X+Math.imul(V,ar)|0,X=X+Math.imul(re,Et)|0,Z=Z+Math.imul(re,ar)|0,J=J+Math.imul(le,ir)|0,X=X+Math.imul(le,dr)|0,X=X+Math.imul(oe,ir)|0,Z=Z+Math.imul(oe,dr)|0;var st=(q+J|0)+((X&8191)<<13)|0;q=(Z+(X>>>13)|0)+(st>>>26)|0,st&=67108863,J=Math.imul(Ve,Yt),X=Math.imul(Ve,kt),X=X+Math.imul(dt,Yt)|0,Z=Math.imul(dt,kt),J=J+Math.imul(qe,Nt)|0,X=X+Math.imul(qe,Lt)|0,X=X+Math.imul(Ue,Nt)|0,Z=Z+Math.imul(Ue,Lt)|0,J=J+Math.imul(_e,it)|0,X=X+Math.imul(_e,ht)|0,X=X+Math.imul(De,it)|0,Z=Z+Math.imul(De,ht)|0,J=J+Math.imul(Ne,Ce)|0,X=X+Math.imul(Ne,je)|0,X=X+Math.imul(He,Ce)|0,Z=Z+Math.imul(He,je)|0,J=J+Math.imul(me,ut)|0,X=X+Math.imul(me,Pt)|0,X=X+Math.imul(ke,ut)|0,Z=Z+Math.imul(ke,Pt)|0,J=J+Math.imul(xe,Ot)|0,X=X+Math.imul(xe,Kt)|0,X=X+Math.imul(he,Ot)|0,Z=Z+Math.imul(he,Kt)|0,J=J+Math.imul(ae,Zt)|0,X=X+Math.imul(ae,Je)|0,X=X+Math.imul(ie,Zt)|0,Z=Z+Math.imul(ie,Je)|0,J=J+Math.imul(j,Et)|0,X=X+Math.imul(j,ar)|0,X=X+Math.imul(Q,Et)|0,Z=Z+Math.imul(Q,ar)|0,J=J+Math.imul(V,ir)|0,X=X+Math.imul(V,dr)|0,X=X+Math.imul(re,ir)|0,Z=Z+Math.imul(re,dr)|0,J=J+Math.imul(le,Sr)|0,X=X+Math.imul(le,tr)|0,X=X+Math.imul(oe,Sr)|0,Z=Z+Math.imul(oe,tr)|0;var yt=(q+J|0)+((X&8191)<<13)|0;q=(Z+(X>>>13)|0)+(yt>>>26)|0,yt&=67108863,J=Math.imul(Ve,Nt),X=Math.imul(Ve,Lt),X=X+Math.imul(dt,Nt)|0,Z=Math.imul(dt,Lt),J=J+Math.imul(qe,it)|0,X=X+Math.imul(qe,ht)|0,X=X+Math.imul(Ue,it)|0,Z=Z+Math.imul(Ue,ht)|0,J=J+Math.imul(_e,Ce)|0,X=X+Math.imul(_e,je)|0,X=X+Math.imul(De,Ce)|0,Z=Z+Math.imul(De,je)|0,J=J+Math.imul(Ne,ut)|0,X=X+Math.imul(Ne,Pt)|0,X=X+Math.imul(He,ut)|0,Z=Z+Math.imul(He,Pt)|0,J=J+Math.imul(me,Ot)|0,X=X+Math.imul(me,Kt)|0,X=X+Math.imul(ke,Ot)|0,Z=Z+Math.imul(ke,Kt)|0,J=J+Math.imul(xe,Zt)|0,X=X+Math.imul(xe,Je)|0,X=X+Math.imul(he,Zt)|0,Z=Z+Math.imul(he,Je)|0,J=J+Math.imul(ae,Et)|0,X=X+Math.imul(ae,ar)|0,X=X+Math.imul(ie,Et)|0,Z=Z+Math.imul(ie,ar)|0,J=J+Math.imul(j,ir)|0,X=X+Math.imul(j,dr)|0,X=X+Math.imul(Q,ir)|0,Z=Z+Math.imul(Q,dr)|0,J=J+Math.imul(V,Sr)|0,X=X+Math.imul(V,tr)|0,X=X+Math.imul(re,Sr)|0,Z=Z+Math.imul(re,tr)|0;var wt=(q+J|0)+((X&8191)<<13)|0;q=(Z+(X>>>13)|0)+(wt>>>26)|0,wt&=67108863,J=Math.imul(Ve,it),X=Math.imul(Ve,ht),X=X+Math.imul(dt,it)|0,Z=Math.imul(dt,ht),J=J+Math.imul(qe,Ce)|0,X=X+Math.imul(qe,je)|0,X=X+Math.imul(Ue,Ce)|0,Z=Z+Math.imul(Ue,je)|0,J=J+Math.imul(_e,ut)|0,X=X+Math.imul(_e,Pt)|0,X=X+Math.imul(De,ut)|0,Z=Z+Math.imul(De,Pt)|0,J=J+Math.imul(Ne,Ot)|0,X=X+Math.imul(Ne,Kt)|0,X=X+Math.imul(He,Ot)|0,Z=Z+Math.imul(He,Kt)|0,J=J+Math.imul(me,Zt)|0,X=X+Math.imul(me,Je)|0,X=X+Math.imul(ke,Zt)|0,Z=Z+Math.imul(ke,Je)|0,J=J+Math.imul(xe,Et)|0,X=X+Math.imul(xe,ar)|0,X=X+Math.imul(he,Et)|0,Z=Z+Math.imul(he,ar)|0,J=J+Math.imul(ae,ir)|0,X=X+Math.imul(ae,dr)|0,X=X+Math.imul(ie,ir)|0,Z=Z+Math.imul(ie,dr)|0,J=J+Math.imul(j,Sr)|0,X=X+Math.imul(j,tr)|0,X=X+Math.imul(Q,Sr)|0,Z=Z+Math.imul(Q,tr)|0;var Vt=(q+J|0)+((X&8191)<<13)|0;q=(Z+(X>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,J=Math.imul(Ve,Ce),X=Math.imul(Ve,je),X=X+Math.imul(dt,Ce)|0,Z=Math.imul(dt,je),J=J+Math.imul(qe,ut)|0,X=X+Math.imul(qe,Pt)|0,X=X+Math.imul(Ue,ut)|0,Z=Z+Math.imul(Ue,Pt)|0,J=J+Math.imul(_e,Ot)|0,X=X+Math.imul(_e,Kt)|0,X=X+Math.imul(De,Ot)|0,Z=Z+Math.imul(De,Kt)|0,J=J+Math.imul(Ne,Zt)|0,X=X+Math.imul(Ne,Je)|0,X=X+Math.imul(He,Zt)|0,Z=Z+Math.imul(He,Je)|0,J=J+Math.imul(me,Et)|0,X=X+Math.imul(me,ar)|0,X=X+Math.imul(ke,Et)|0,Z=Z+Math.imul(ke,ar)|0,J=J+Math.imul(xe,ir)|0,X=X+Math.imul(xe,dr)|0,X=X+Math.imul(he,ir)|0,Z=Z+Math.imul(he,dr)|0,J=J+Math.imul(ae,Sr)|0,X=X+Math.imul(ae,tr)|0,X=X+Math.imul(ie,Sr)|0,Z=Z+Math.imul(ie,tr)|0;var gr=(q+J|0)+((X&8191)<<13)|0;q=(Z+(X>>>13)|0)+(gr>>>26)|0,gr&=67108863,J=Math.imul(Ve,ut),X=Math.imul(Ve,Pt),X=X+Math.imul(dt,ut)|0,Z=Math.imul(dt,Pt),J=J+Math.imul(qe,Ot)|0,X=X+Math.imul(qe,Kt)|0,X=X+Math.imul(Ue,Ot)|0,Z=Z+Math.imul(Ue,Kt)|0,J=J+Math.imul(_e,Zt)|0,X=X+Math.imul(_e,Je)|0,X=X+Math.imul(De,Zt)|0,Z=Z+Math.imul(De,Je)|0,J=J+Math.imul(Ne,Et)|0,X=X+Math.imul(Ne,ar)|0,X=X+Math.imul(He,Et)|0,Z=Z+Math.imul(He,ar)|0,J=J+Math.imul(me,ir)|0,X=X+Math.imul(me,dr)|0,X=X+Math.imul(ke,ir)|0,Z=Z+Math.imul(ke,dr)|0,J=J+Math.imul(xe,Sr)|0,X=X+Math.imul(xe,tr)|0,X=X+Math.imul(he,Sr)|0,Z=Z+Math.imul(he,tr)|0;var wr=(q+J|0)+((X&8191)<<13)|0;q=(Z+(X>>>13)|0)+(wr>>>26)|0,wr&=67108863,J=Math.imul(Ve,Ot),X=Math.imul(Ve,Kt),X=X+Math.imul(dt,Ot)|0,Z=Math.imul(dt,Kt),J=J+Math.imul(qe,Zt)|0,X=X+Math.imul(qe,Je)|0,X=X+Math.imul(Ue,Zt)|0,Z=Z+Math.imul(Ue,Je)|0,J=J+Math.imul(_e,Et)|0,X=X+Math.imul(_e,ar)|0,X=X+Math.imul(De,Et)|0,Z=Z+Math.imul(De,ar)|0,J=J+Math.imul(Ne,ir)|0,X=X+Math.imul(Ne,dr)|0,X=X+Math.imul(He,ir)|0,Z=Z+Math.imul(He,dr)|0,J=J+Math.imul(me,Sr)|0,X=X+Math.imul(me,tr)|0,X=X+Math.imul(ke,Sr)|0,Z=Z+Math.imul(ke,tr)|0;var Lr=(q+J|0)+((X&8191)<<13)|0;q=(Z+(X>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,J=Math.imul(Ve,Zt),X=Math.imul(Ve,Je),X=X+Math.imul(dt,Zt)|0,Z=Math.imul(dt,Je),J=J+Math.imul(qe,Et)|0,X=X+Math.imul(qe,ar)|0,X=X+Math.imul(Ue,Et)|0,Z=Z+Math.imul(Ue,ar)|0,J=J+Math.imul(_e,ir)|0,X=X+Math.imul(_e,dr)|0,X=X+Math.imul(De,ir)|0,Z=Z+Math.imul(De,dr)|0,J=J+Math.imul(Ne,Sr)|0,X=X+Math.imul(Ne,tr)|0,X=X+Math.imul(He,Sr)|0,Z=Z+Math.imul(He,tr)|0;var fr=(q+J|0)+((X&8191)<<13)|0;q=(Z+(X>>>13)|0)+(fr>>>26)|0,fr&=67108863,J=Math.imul(Ve,Et),X=Math.imul(Ve,ar),X=X+Math.imul(dt,Et)|0,Z=Math.imul(dt,ar),J=J+Math.imul(qe,ir)|0,X=X+Math.imul(qe,dr)|0,X=X+Math.imul(Ue,ir)|0,Z=Z+Math.imul(Ue,dr)|0,J=J+Math.imul(_e,Sr)|0,X=X+Math.imul(_e,tr)|0,X=X+Math.imul(De,Sr)|0,Z=Z+Math.imul(De,tr)|0;var Fr=(q+J|0)+((X&8191)<<13)|0;q=(Z+(X>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,J=Math.imul(Ve,ir),X=Math.imul(Ve,dr),X=X+Math.imul(dt,ir)|0,Z=Math.imul(dt,dr),J=J+Math.imul(qe,Sr)|0,X=X+Math.imul(qe,tr)|0,X=X+Math.imul(Ue,Sr)|0,Z=Z+Math.imul(Ue,tr)|0;var nn=(q+J|0)+((X&8191)<<13)|0;q=(Z+(X>>>13)|0)+(nn>>>26)|0,nn&=67108863,J=Math.imul(Ve,Sr),X=Math.imul(Ve,tr),X=X+Math.imul(dt,Sr)|0,Z=Math.imul(dt,tr);var yr=(q+J|0)+((X&8191)<<13)|0;return q=(Z+(X>>>13)|0)+(yr>>>26)|0,yr&=67108863,W[0]=Nr,W[1]=et,W[2]=we,W[3]=Me,W[4]=Re,W[5]=Xe,W[6]=$e,W[7]=ot,W[8]=st,W[9]=yt,W[10]=wt,W[11]=Vt,W[12]=gr,W[13]=wr,W[14]=Lr,W[15]=fr,W[16]=Fr,W[17]=nn,W[18]=yr,q!==0&&(W[19]=q,O.length++),O};Math.imul||(A=p);function m(I,R,D){D.negative=R.negative^I.negative,D.length=I.length+R.length;for(var O=0,F=0,G=0;G<D.length-1;G++){var W=F;F=0;for(var q=O&67108863,J=Math.min(G,R.length-1),X=Math.max(0,G-I.length+1);X<=J;X++){var Z=G-X,se=I.words[Z]|0,le=R.words[X]|0,oe=se*le,U=oe&67108863;W=W+(oe/67108864|0)|0,U=U+q|0,q=U&67108863,W=W+(U>>>26)|0,F+=W>>>26,W&=67108863}D.words[G]=q,O=W,W=F}return O!==0?D.words[G]=O:D.length--,D.strip()}function M(I,R,D){var O=new x;return O.mulp(I,R,D)}n.prototype.mulTo=function(R,D){var O,F=this.length+R.length;return this.length===10&&R.length===10?O=A(this,R,D):F<63?O=p(this,R,D):F<1024?O=m(this,R,D):O=M(this,R,D),O};function x(I,R){this.x=I,this.y=R}x.prototype.makeRBT=function(R){for(var D=new Array(R),O=n.prototype._countBits(R)-1,F=0;F<R;F++)D[F]=this.revBin(F,O,R);return D},x.prototype.revBin=function(R,D,O){if(R===0||R===O-1)return R;for(var F=0,G=0;G<D;G++)F|=(R&1)<<D-G-1,R>>=1;return F},x.prototype.permute=function(R,D,O,F,G,W){for(var q=0;q<W;q++)F[q]=D[R[q]],G[q]=O[R[q]]},x.prototype.transform=function(R,D,O,F,G,W){this.permute(W,R,D,O,F,G);for(var q=1;q<G;q<<=1)for(var J=q<<1,X=Math.cos(2*Math.PI/J),Z=Math.sin(2*Math.PI/J),se=0;se<G;se+=J)for(var le=X,oe=Z,U=0;U<q;U++){var V=O[se+U],re=F[se+U],ee=O[se+U+q],j=F[se+U+q],Q=le*ee-oe*j;j=le*j+oe*ee,ee=Q,O[se+U]=V+ee,F[se+U]=re+j,O[se+U+q]=V-ee,F[se+U+q]=re-j,U!==J&&(Q=X*le-Z*oe,oe=X*oe+Z*le,le=Q)}},x.prototype.guessLen13b=function(R,D){var O=Math.max(D,R)|1,F=O&1,G=0;for(O=O/2|0;O;O=O>>>1)G++;return 1<<G+1+F},x.prototype.conjugate=function(R,D,O){if(!(O<=1))for(var F=0;F<O/2;F++){var G=R[F];R[F]=R[O-F-1],R[O-F-1]=G,G=D[F],D[F]=-D[O-F-1],D[O-F-1]=-G}},x.prototype.normalize13b=function(R,D){for(var O=0,F=0;F<D/2;F++){var G=Math.round(R[2*F+1]/D)*8192+Math.round(R[2*F]/D)+O;R[F]=G&67108863,G<67108864?O=0:O=G/67108864|0}return R},x.prototype.convert13b=function(R,D,O,F){for(var G=0,W=0;W<D;W++)G=G+(R[W]|0),O[2*W]=G&8191,G=G>>>13,O[2*W+1]=G&8191,G=G>>>13;for(W=2*D;W<F;++W)O[W]=0;a(G===0),a((G&-8192)===0)},x.prototype.stub=function(R){for(var D=new Array(R),O=0;O<R;O++)D[O]=0;return D},x.prototype.mulp=function(R,D,O){var F=2*this.guessLen13b(R.length,D.length),G=this.makeRBT(F),W=this.stub(F),q=new Array(F),J=new Array(F),X=new Array(F),Z=new Array(F),se=new Array(F),le=new Array(F),oe=O.words;oe.length=F,this.convert13b(R.words,R.length,q,F),this.convert13b(D.words,D.length,Z,F),this.transform(q,W,J,X,F,G),this.transform(Z,W,se,le,F,G);for(var U=0;U<F;U++){var V=J[U]*se[U]-X[U]*le[U];X[U]=J[U]*le[U]+X[U]*se[U],J[U]=V}return this.conjugate(J,X,F),this.transform(J,X,oe,W,F,G),this.conjugate(oe,W,F),this.normalize13b(oe,F),O.negative=R.negative^D.negative,O.length=R.length+D.length,O.strip()},n.prototype.mul=function(R){var D=new n(null);return D.words=new Array(this.length+R.length),this.mulTo(R,D)},n.prototype.mulf=function(R){var D=new n(null);return D.words=new Array(this.length+R.length),M(this,R,D)},n.prototype.imul=function(R){return this.clone().mulTo(R,this)},n.prototype.imuln=function(R){a(typeof R=="number"),a(R<67108864);for(var D=0,O=0;O<this.length;O++){var F=(this.words[O]|0)*R,G=(F&67108863)+(D&67108863);D>>=26,D+=F/67108864|0,D+=G>>>26,this.words[O]=G&67108863}return D!==0&&(this.words[O]=D,this.length++),this},n.prototype.muln=function(R){return this.clone().imuln(R)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(R){var D=y(R);if(D.length===0)return new n(1);for(var O=this,F=0;F<D.length&&D[F]===0;F++,O=O.sqr());if(++F<D.length)for(var G=O.sqr();F<D.length;F++,G=G.sqr())D[F]!==0&&(O=O.mul(G));return O},n.prototype.iushln=function(R){a(typeof R=="number"&&R>=0);var D=R%26,O=(R-D)/26,F=67108863>>>26-D<<26-D,G;if(D!==0){var W=0;for(G=0;G<this.length;G++){var q=this.words[G]&F,J=(this.words[G]|0)-q<<D;this.words[G]=J|W,W=q>>>26-D}W&&(this.words[G]=W,this.length++)}if(O!==0){for(G=this.length-1;G>=0;G--)this.words[G+O]=this.words[G];for(G=0;G<O;G++)this.words[G]=0;this.length+=O}return this.strip()},n.prototype.ishln=function(R){return a(this.negative===0),this.iushln(R)},n.prototype.iushrn=function(R,D,O){a(typeof R=="number"&&R>=0);var F;D?F=(D-D%26)/26:F=0;var G=R%26,W=Math.min((R-G)/26,this.length),q=67108863^67108863>>>G<<G,J=O;if(F-=W,F=Math.max(0,F),J){for(var X=0;X<W;X++)J.words[X]=this.words[X];J.length=W}if(W!==0)if(this.length>W)for(this.length-=W,X=0;X<this.length;X++)this.words[X]=this.words[X+W];else this.words[0]=0,this.length=1;var Z=0;for(X=this.length-1;X>=0&&(Z!==0||X>=F);X--){var se=this.words[X]|0;this.words[X]=Z<<26-G|se>>>G,Z=se&q}return J&&Z!==0&&(J.words[J.length++]=Z),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(R,D,O){return a(this.negative===0),this.iushrn(R,D,O)},n.prototype.shln=function(R){return this.clone().ishln(R)},n.prototype.ushln=function(R){return this.clone().iushln(R)},n.prototype.shrn=function(R){return this.clone().ishrn(R)},n.prototype.ushrn=function(R){return this.clone().iushrn(R)},n.prototype.testn=function(R){a(typeof R=="number"&&R>=0);var D=R%26,O=(R-D)/26,F=1<<D;if(this.length<=O)return!1;var G=this.words[O];return!!(G&F)},n.prototype.imaskn=function(R){a(typeof R=="number"&&R>=0);var D=R%26,O=(R-D)/26;if(a(this.negative===0,"imaskn works only with positive numbers"),this.length<=O)return this;if(D!==0&&O++,this.length=Math.min(O,this.length),D!==0){var F=67108863^67108863>>>D<<D;this.words[this.length-1]&=F}return this.strip()},n.prototype.maskn=function(R){return this.clone().imaskn(R)},n.prototype.iaddn=function(R){return a(typeof R=="number"),a(R<67108864),R<0?this.isubn(-R):this.negative!==0?this.length===1&&(this.words[0]|0)<R?(this.words[0]=R-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(R),this.negative=1,this):this._iaddn(R)},n.prototype._iaddn=function(R){this.words[0]+=R;for(var D=0;D<this.length&&this.words[D]>=67108864;D++)this.words[D]-=67108864,D===this.length-1?this.words[D+1]=1:this.words[D+1]++;return this.length=Math.max(this.length,D+1),this},n.prototype.isubn=function(R){if(a(typeof R=="number"),a(R<67108864),R<0)return this.iaddn(-R);if(this.negative!==0)return this.negative=0,this.iaddn(R),this.negative=1,this;if(this.words[0]-=R,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var D=0;D<this.length&&this.words[D]<0;D++)this.words[D]+=67108864,this.words[D+1]-=1;return this.strip()},n.prototype.addn=function(R){return this.clone().iaddn(R)},n.prototype.subn=function(R){return this.clone().isubn(R)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(R,D,O){var F=R.length+O,G;this._expand(F);var W,q=0;for(G=0;G<R.length;G++){W=(this.words[G+O]|0)+q;var J=(R.words[G]|0)*D;W-=J&67108863,q=(W>>26)-(J/67108864|0),this.words[G+O]=W&67108863}for(;G<this.length-O;G++)W=(this.words[G+O]|0)+q,q=W>>26,this.words[G+O]=W&67108863;if(q===0)return this.strip();for(a(q===-1),q=0,G=0;G<this.length;G++)W=-(this.words[G]|0)+q,q=W>>26,this.words[G]=W&67108863;return this.negative=1,this.strip()},n.prototype._wordDiv=function(R,D){var O=this.length-R.length,F=this.clone(),G=R,W=G.words[G.length-1]|0,q=this._countBits(W);O=26-q,O!==0&&(G=G.ushln(O),F.iushln(O),W=G.words[G.length-1]|0);var J=F.length-G.length,X;if(D!=="mod"){X=new n(null),X.length=J+1,X.words=new Array(X.length);for(var Z=0;Z<X.length;Z++)X.words[Z]=0}var se=F.clone()._ishlnsubmul(G,1,J);se.negative===0&&(F=se,X&&(X.words[J]=1));for(var le=J-1;le>=0;le--){var oe=(F.words[G.length+le]|0)*67108864+(F.words[G.length+le-1]|0);for(oe=Math.min(oe/W|0,67108863),F._ishlnsubmul(G,oe,le);F.negative!==0;)oe--,F.negative=0,F._ishlnsubmul(G,1,le),F.isZero()||(F.negative^=1);X&&(X.words[le]=oe)}return X&&X.strip(),F.strip(),D!=="div"&&O!==0&&F.iushrn(O),{div:X||null,mod:F}},n.prototype.divmod=function(R,D,O){if(a(!R.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var F,G,W;return this.negative!==0&&R.negative===0?(W=this.neg().divmod(R,D),D!=="mod"&&(F=W.div.neg()),D!=="div"&&(G=W.mod.neg(),O&&G.negative!==0&&G.iadd(R)),{div:F,mod:G}):this.negative===0&&R.negative!==0?(W=this.divmod(R.neg(),D),D!=="mod"&&(F=W.div.neg()),{div:F,mod:W.mod}):(this.negative&R.negative)!==0?(W=this.neg().divmod(R.neg(),D),D!=="div"&&(G=W.mod.neg(),O&&G.negative!==0&&G.isub(R)),{div:W.div,mod:G}):R.length>this.length||this.cmp(R)<0?{div:new n(0),mod:this}:R.length===1?D==="div"?{div:this.divn(R.words[0]),mod:null}:D==="mod"?{div:null,mod:new n(this.modn(R.words[0]))}:{div:this.divn(R.words[0]),mod:new n(this.modn(R.words[0]))}:this._wordDiv(R,D)},n.prototype.div=function(R){return this.divmod(R,"div",!1).div},n.prototype.mod=function(R){return this.divmod(R,"mod",!1).mod},n.prototype.umod=function(R){return this.divmod(R,"mod",!0).mod},n.prototype.divRound=function(R){var D=this.divmod(R);if(D.mod.isZero())return D.div;var O=D.div.negative!==0?D.mod.isub(R):D.mod,F=R.ushrn(1),G=R.andln(1),W=O.cmp(F);return W<0||G===1&&W===0?D.div:D.div.negative!==0?D.div.isubn(1):D.div.iaddn(1)},n.prototype.modn=function(R){a(R<=67108863);for(var D=(1<<26)%R,O=0,F=this.length-1;F>=0;F--)O=(D*O+(this.words[F]|0))%R;return O},n.prototype.idivn=function(R){a(R<=67108863);for(var D=0,O=this.length-1;O>=0;O--){var F=(this.words[O]|0)+D*67108864;this.words[O]=F/R|0,D=F%R}return this.strip()},n.prototype.divn=function(R){return this.clone().idivn(R)},n.prototype.egcd=function(R){a(R.negative===0),a(!R.isZero());var D=this,O=R.clone();D.negative!==0?D=D.umod(R):D=D.clone();for(var F=new n(1),G=new n(0),W=new n(0),q=new n(1),J=0;D.isEven()&&O.isEven();)D.iushrn(1),O.iushrn(1),++J;for(var X=O.clone(),Z=D.clone();!D.isZero();){for(var se=0,le=1;(D.words[0]&le)===0&&se<26;++se,le<<=1);if(se>0)for(D.iushrn(se);se-- >0;)(F.isOdd()||G.isOdd())&&(F.iadd(X),G.isub(Z)),F.iushrn(1),G.iushrn(1);for(var oe=0,U=1;(O.words[0]&U)===0&&oe<26;++oe,U<<=1);if(oe>0)for(O.iushrn(oe);oe-- >0;)(W.isOdd()||q.isOdd())&&(W.iadd(X),q.isub(Z)),W.iushrn(1),q.iushrn(1);D.cmp(O)>=0?(D.isub(O),F.isub(W),G.isub(q)):(O.isub(D),W.isub(F),q.isub(G))}return{a:W,b:q,gcd:O.iushln(J)}},n.prototype._invmp=function(R){a(R.negative===0),a(!R.isZero());var D=this,O=R.clone();D.negative!==0?D=D.umod(R):D=D.clone();for(var F=new n(1),G=new n(0),W=O.clone();D.cmpn(1)>0&&O.cmpn(1)>0;){for(var q=0,J=1;(D.words[0]&J)===0&&q<26;++q,J<<=1);if(q>0)for(D.iushrn(q);q-- >0;)F.isOdd()&&F.iadd(W),F.iushrn(1);for(var X=0,Z=1;(O.words[0]&Z)===0&&X<26;++X,Z<<=1);if(X>0)for(O.iushrn(X);X-- >0;)G.isOdd()&&G.iadd(W),G.iushrn(1);D.cmp(O)>=0?(D.isub(O),F.isub(G)):(O.isub(D),G.isub(F))}var se;return D.cmpn(1)===0?se=F:se=G,se.cmpn(0)<0&&se.iadd(R),se},n.prototype.gcd=function(R){if(this.isZero())return R.abs();if(R.isZero())return this.abs();var D=this.clone(),O=R.clone();D.negative=0,O.negative=0;for(var F=0;D.isEven()&&O.isEven();F++)D.iushrn(1),O.iushrn(1);do{for(;D.isEven();)D.iushrn(1);for(;O.isEven();)O.iushrn(1);var G=D.cmp(O);if(G<0){var W=D;D=O,O=W}else if(G===0||O.cmpn(1)===0)break;D.isub(O)}while(!0);return O.iushln(F)},n.prototype.invm=function(R){return this.egcd(R).a.umod(R)},n.prototype.isEven=function(){return(this.words[0]&1)===0},n.prototype.isOdd=function(){return(this.words[0]&1)===1},n.prototype.andln=function(R){return this.words[0]&R},n.prototype.bincn=function(R){a(typeof R=="number");var D=R%26,O=(R-D)/26,F=1<<D;if(this.length<=O)return this._expand(O+1),this.words[O]|=F,this;for(var G=F,W=O;G!==0&&W<this.length;W++){var q=this.words[W]|0;q+=G,G=q>>>26,q&=67108863,this.words[W]=q}return G!==0&&(this.words[W]=G,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(R){var D=R<0;if(this.negative!==0&&!D)return-1;if(this.negative===0&&D)return 1;this.strip();var O;if(this.length>1)O=1;else{D&&(R=-R),a(R<=67108863,"Number is too big");var F=this.words[0]|0;O=F===R?0:F<R?-1:1}return this.negative!==0?-O|0:O},n.prototype.cmp=function(R){if(this.negative!==0&&R.negative===0)return-1;if(this.negative===0&&R.negative!==0)return 1;var D=this.ucmp(R);return this.negative!==0?-D|0:D},n.prototype.ucmp=function(R){if(this.length>R.length)return 1;if(this.length<R.length)return-1;for(var D=0,O=this.length-1;O>=0;O--){var F=this.words[O]|0,G=R.words[O]|0;if(F!==G){F<G?D=-1:F>G&&(D=1);break}}return D},n.prototype.gtn=function(R){return this.cmpn(R)===1},n.prototype.gt=function(R){return this.cmp(R)===1},n.prototype.gten=function(R){return this.cmpn(R)>=0},n.prototype.gte=function(R){return this.cmp(R)>=0},n.prototype.ltn=function(R){return this.cmpn(R)===-1},n.prototype.lt=function(R){return this.cmp(R)===-1},n.prototype.lten=function(R){return this.cmpn(R)<=0},n.prototype.lte=function(R){return this.cmp(R)<=0},n.prototype.eqn=function(R){return this.cmpn(R)===0},n.prototype.eq=function(R){return this.cmp(R)===0},n.red=function(R){return new P(R)},n.prototype.toRed=function(R){return a(!this.red,"Already a number in reduction context"),a(this.negative===0,"red works only with positives"),R.convertTo(this)._forceRed(R)},n.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(R){return this.red=R,this},n.prototype.forceRed=function(R){return a(!this.red,"Already a number in reduction context"),this._forceRed(R)},n.prototype.redAdd=function(R){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,R)},n.prototype.redIAdd=function(R){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,R)},n.prototype.redSub=function(R){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,R)},n.prototype.redISub=function(R){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,R)},n.prototype.redShl=function(R){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,R)},n.prototype.redMul=function(R){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,R),this.red.mul(this,R)},n.prototype.redIMul=function(R){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,R),this.red.imul(this,R)},n.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(R){return a(this.red&&!R.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,R)};var T={k256:null,p224:null,p192:null,p25519:null};function _(I,R){this.name=I,this.p=new n(R,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}_.prototype._tmp=function(){var R=new n(null);return R.words=new Array(Math.ceil(this.n/13)),R},_.prototype.ireduce=function(R){var D=R,O;do this.split(D,this.tmp),D=this.imulK(D),D=D.iadd(this.tmp),O=D.bitLength();while(O>this.n);var F=O<this.n?-1:D.ucmp(this.p);return F===0?(D.words[0]=0,D.length=1):F>0?D.isub(this.p):D.strip!==void 0?D.strip():D._strip(),D},_.prototype.split=function(R,D){R.iushrn(this.n,0,D)},_.prototype.imulK=function(R){return R.imul(this.k)};function f(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}r(f,_),f.prototype.split=function(R,D){for(var O=4194303,F=Math.min(R.length,9),G=0;G<F;G++)D.words[G]=R.words[G];if(D.length=F,R.length<=9){R.words[0]=0,R.length=1;return}var W=R.words[9];for(D.words[D.length++]=W&O,G=10;G<R.length;G++){var q=R.words[G]|0;R.words[G-10]=(q&O)<<4|W>>>22,W=q}W>>>=22,R.words[G-10]=W,W===0&&R.length>10?R.length-=10:R.length-=9},f.prototype.imulK=function(R){R.words[R.length]=0,R.words[R.length+1]=0,R.length+=2;for(var D=0,O=0;O<R.length;O++){var F=R.words[O]|0;D+=F*977,R.words[O]=D&67108863,D=F*64+(D/67108864|0)}return R.words[R.length-1]===0&&(R.length--,R.words[R.length-1]===0&&R.length--),R};function L(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}r(L,_);function S(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}r(S,_);function k(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}r(k,_),k.prototype.imulK=function(R){for(var D=0,O=0;O<R.length;O++){var F=(R.words[O]|0)*19+D,G=F&67108863;F>>>=26,R.words[O]=G,D=F}return D!==0&&(R.words[R.length++]=D),R},n._prime=function(R){if(T[R])return T[R];var D;if(R==="k256")D=new f;else if(R==="p224")D=new L;else if(R==="p192")D=new S;else if(R==="p25519")D=new k;else throw new Error("Unknown prime "+R);return T[R]=D,D};function P(I){if(typeof I=="string"){var R=n._prime(I);this.m=R.p,this.prime=R}else a(I.gtn(1),"modulus must be greater than 1"),this.m=I,this.prime=null}P.prototype._verify1=function(R){a(R.negative===0,"red works only with positives"),a(R.red,"red works only with red numbers")},P.prototype._verify2=function(R,D){a((R.negative|D.negative)===0,"red works only with positives"),a(R.red&&R.red===D.red,"red works only with red numbers")},P.prototype.imod=function(R){return this.prime?this.prime.ireduce(R)._forceRed(this):R.umod(this.m)._forceRed(this)},P.prototype.neg=function(R){return R.isZero()?R.clone():this.m.sub(R)._forceRed(this)},P.prototype.add=function(R,D){this._verify2(R,D);var O=R.add(D);return O.cmp(this.m)>=0&&O.isub(this.m),O._forceRed(this)},P.prototype.iadd=function(R,D){this._verify2(R,D);var O=R.iadd(D);return O.cmp(this.m)>=0&&O.isub(this.m),O},P.prototype.sub=function(R,D){this._verify2(R,D);var O=R.sub(D);return O.cmpn(0)<0&&O.iadd(this.m),O._forceRed(this)},P.prototype.isub=function(R,D){this._verify2(R,D);var O=R.isub(D);return O.cmpn(0)<0&&O.iadd(this.m),O},P.prototype.shl=function(R,D){return this._verify1(R),this.imod(R.ushln(D))},P.prototype.imul=function(R,D){return this._verify2(R,D),this.imod(R.imul(D))},P.prototype.mul=function(R,D){return this._verify2(R,D),this.imod(R.mul(D))},P.prototype.isqr=function(R){return this.imul(R,R.clone())},P.prototype.sqr=function(R){return this.mul(R,R)},P.prototype.sqrt=function(R){if(R.isZero())return R.clone();var D=this.m.andln(3);if(a(D%2===1),D===3){var O=this.m.add(new n(1)).iushrn(2);return this.pow(R,O)}for(var F=this.m.subn(1),G=0;!F.isZero()&&F.andln(1)===0;)G++,F.iushrn(1);a(!F.isZero());var W=new n(1).toRed(this),q=W.redNeg(),J=this.m.subn(1).iushrn(1),X=this.m.bitLength();for(X=new n(2*X*X).toRed(this);this.pow(X,J).cmp(q)!==0;)X.redIAdd(q);for(var Z=this.pow(X,F),se=this.pow(R,F.addn(1).iushrn(1)),le=this.pow(R,F),oe=G;le.cmp(W)!==0;){for(var U=le,V=0;U.cmp(W)!==0;V++)U=U.redSqr();a(V<oe);var re=this.pow(Z,new n(1).iushln(oe-V-1));se=se.redMul(re),Z=re.redSqr(),le=le.redMul(Z),oe=V}return se},P.prototype.invm=function(R){var D=R._invmp(this.m);return D.negative!==0?(D.negative=0,this.imod(D).redNeg()):this.imod(D)},P.prototype.pow=function(R,D){if(D.isZero())return new n(1).toRed(this);if(D.cmpn(1)===0)return R.clone();var O=4,F=new Array(1<<O);F[0]=new n(1).toRed(this),F[1]=R;for(var G=2;G<F.length;G++)F[G]=this.mul(F[G-1],R);var W=F[0],q=0,J=0,X=D.bitLength()%26;for(X===0&&(X=26),G=D.length-1;G>=0;G--){for(var Z=D.words[G],se=X-1;se>=0;se--){var le=Z>>se&1;if(W!==F[0]&&(W=this.sqr(W)),le===0&&q===0){J=0;continue}q<<=1,q|=le,J++,!(J!==O&&(G!==0||se!==0))&&(W=this.mul(W,F[q]),J=0,q=0)}X=26}return W},P.prototype.convertTo=function(R){var D=R.umod(this.m);return D===R?D.clone():D},P.prototype.convertFrom=function(R){var D=R.clone();return D.red=null,D},n.mont=function(R){return new z(R)};function z(I){P.call(this,I),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}r(z,P),z.prototype.convertTo=function(R){return this.imod(R.ushln(this.shift))},z.prototype.convertFrom=function(R){var D=this.imod(R.mul(this.rinv));return D.red=null,D},z.prototype.imul=function(R,D){if(R.isZero()||D.isZero())return R.words[0]=0,R.length=1,R;var O=R.imul(D),F=O.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),G=O.isub(F).iushrn(this.shift),W=G;return G.cmp(this.m)>=0?W=G.isub(this.m):G.cmpn(0)<0&&(W=G.iadd(this.m)),W._forceRed(this)},z.prototype.mul=function(R,D){if(R.isZero()||D.isZero())return new n(0)._forceRed(this);var O=R.mul(D),F=O.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),G=O.isub(F).iushrn(this.shift),W=G;return G.cmp(this.m)>=0?W=G.isub(this.m):G.cmpn(0)<0&&(W=G.iadd(this.m)),W._forceRed(this)},z.prototype.invm=function(R){var D=this.imod(R._invmp(this.m).mul(this.r2));return D._forceRed(this)}})(typeof b=="undefined"||b,this)},{buffer:2}],34:[function(l,b,w){b.exports=e;function e(o){var a,r,n,c=o.length,s=0;for(a=0;a<c;++a)s+=o[a].length;var i=new Array(s),v=0;for(a=0;a<c;++a){var u=o[a],g=u.length;for(r=0;r<g;++r){var h=i[v++]=new Array(g-1),y=0;for(n=0;n<g;++n)n!==r&&(h[y++]=u[n]);if(r&1){var p=h[1];h[1]=h[0],h[0]=p}}}return i}},{}],35:[function(l,b,w){b.exports=g;var e=l("typedarray-pool"),o=l("./lib/sweep"),a=l("./lib/intersect");function r(h,y){for(var p=0;p<h;++p)if(!(y[p]<=y[p+h]))return!0;return!1}function n(h,y,p,A){for(var m=0,M=0,x=0,T=h.length;x<T;++x){var _=h[x];if(!r(y,_)){for(var f=0;f<2*y;++f)p[m++]=_[f];A[M++]=x}}return M}function c(h,y,p,A){var m=h.length,M=y.length;if(!(m<=0||M<=0)){var x=h[0].length>>>1;if(!(x<=0)){var T,_=e.mallocDouble(2*x*m),f=e.mallocInt32(m);if(m=n(h,x,_,f),m>0){if(x===1&&A)o.init(m),T=o.sweepComplete(x,p,0,m,_,f,0,m,_,f);else{var L=e.mallocDouble(2*x*M),S=e.mallocInt32(M);M=n(y,x,L,S),M>0&&(o.init(m+M),x===1?T=o.sweepBipartite(x,p,0,m,_,f,0,M,L,S):T=a(x,p,A,m,_,f,M,L,S),e.free(L),e.free(S))}e.free(_),e.free(f)}return T}}}var s;function i(h,y){s.push([h,y])}function v(h){return s=[],c(h,h,i,!0),s}function u(h,y){return s=[],c(h,y,i,!1),s}function g(h,y,p){switch(arguments.length){case 1:return v(h);case 2:return typeof y=="function"?c(h,h,y,!0):u(h,y);case 3:return c(h,y,p,!1);default:throw new Error("box-intersect: Invalid arguments")}}},{"./lib/intersect":37,"./lib/sweep":41,"typedarray-pool":308}],36:[function(l,b,w){function e(){function r(s,i,v,u,g,h,y,p,A,m,M){for(var x=2*s,T=u,_=x*u;T<g;++T,_+=x){var f=h[i+_],L=h[i+_+s],S=y[T];e:for(var k=p,P=x*p;k<A;++k,P+=x){var z=m[i+P],I=m[i+P+s],R=M[k];if(!(I<f||L<z)){for(var D=i+1;D<s;++D){var O=h[D+_],F=h[D+s+_],G=m[D+P],W=m[D+s+P];if(F<G||W<O)continue e}var q=v(S,R);if(q!==void 0)return q}}}}function n(s,i,v,u,g,h,y,p,A,m,M){for(var x=2*s,T=p,_=x*p;T<A;++T,_+=x){var f=m[i+_],L=m[i+_+s],S=M[T];e:for(var k=u,P=x*u;k<g;++k,P+=x){var z=h[i+P],I=h[i+P+s],R=y[k];if(!(L<z||I<f)){for(var D=i+1;D<s;++D){var O=h[D+P],F=h[D+s+P],G=m[D+_],W=m[D+s+_];if(F<G||W<O)continue e}var q=v(R,S);if(q!==void 0)return q}}}}function c(s,i,v,u,g,h,y,p,A,m,M){return g-u>A-p?r(s,i,v,u,g,h,y,p,A,m,M):n(s,i,v,u,g,h,y,p,A,m,M)}return c}function o(){function r(v,u,g,h,y,p,A,m,M,x,T){for(var _=2*v,f=h,L=_*h;f<y;++f,L+=_){var S=p[u+L],k=p[u+L+v],P=A[f];e:for(var z=m,I=_*m;z<M;++z,I+=_){var R=x[u+I],D=T[z];if(!(R<=S||k<R)){for(var O=u+1;O<v;++O){var F=p[O+L],G=p[O+v+L],W=x[O+I],q=x[O+v+I];if(G<W||q<F)continue e}var J=g(D,P);if(J!==void 0)return J}}}}function n(v,u,g,h,y,p,A,m,M,x,T){for(var _=2*v,f=h,L=_*h;f<y;++f,L+=_){var S=p[u+L],k=p[u+L+v],P=A[f];e:for(var z=m,I=_*m;z<M;++z,I+=_){var R=x[u+I],D=T[z];if(!(R<S||k<R)){for(var O=u+1;O<v;++O){var F=p[O+L],G=p[O+v+L],W=x[O+I],q=x[O+v+I];if(G<W||q<F)continue e}var J=g(P,D);if(J!==void 0)return J}}}}function c(v,u,g,h,y,p,A,m,M,x,T){for(var _=2*v,f=m,L=_*m;f<M;++f,L+=_){var S=x[u+L],k=T[f];e:for(var P=h,z=_*h;P<y;++P,z+=_){var I=p[u+z],R=p[u+z+v],D=A[P];if(!(S<=I||R<S)){for(var O=u+1;O<v;++O){var F=p[O+z],G=p[O+v+z],W=x[O+L],q=x[O+v+L];if(G<W||q<F)continue e}var J=g(k,D);if(J!==void 0)return J}}}}function s(v,u,g,h,y,p,A,m,M,x,T){for(var _=2*v,f=m,L=_*m;f<M;++f,L+=_){var S=x[u+L],k=T[f];e:for(var P=h,z=_*h;P<y;++P,z+=_){var I=p[u+z],R=p[u+z+v],D=A[P];if(!(S<I||R<S)){for(var O=u+1;O<v;++O){var F=p[O+z],G=p[O+v+z],W=x[O+L],q=x[O+v+L];if(G<W||q<F)continue e}var J=g(D,k);if(J!==void 0)return J}}}}function i(v,u,g,h,y,p,A,m,M,x,T,_){return p-y>x-M?h?r(v,u,g,y,p,A,m,M,x,T,_):n(v,u,g,y,p,A,m,M,x,T,_):h?c(v,u,g,y,p,A,m,M,x,T,_):s(v,u,g,y,p,A,m,M,x,T,_)}return i}function a(r){return r?e():o()}w.partial=a(!1),w.full=a(!0)},{}],37:[function(l,b,w){b.exports=I;var e=l("typedarray-pool"),o=l("bit-twiddle"),a=l("./brute"),r=a.partial,n=a.full,c=l("./sweep"),s=l("./median"),i=l("./partition"),v=128,u=1<<22,g=1<<22,h=i("!(lo>=p0)&&!(p1>=hi)"),y=i("lo===p0"),p=i("lo<p0"),A=i("hi<=p0"),m=i("lo<=p0&&p0<=hi"),M=i("lo<p0&&p0<=hi"),x=6,T=2,_=1024,f=e.mallocInt32(_),L=e.mallocDouble(_);function S(R,D){var O=8*o.log2(D+1)*(R+1)|0,F=o.nextPow2(x*O);f.length<F&&(e.free(f),f=e.mallocInt32(F));var G=o.nextPow2(T*O);L.length<G&&(e.free(L),L=e.mallocDouble(G))}function k(R,D,O,F,G,W,q,J,X){var Z=x*R;f[Z]=D,f[Z+1]=O,f[Z+2]=F,f[Z+3]=G,f[Z+4]=W,f[Z+5]=q;var se=T*R;L[se]=J,L[se+1]=X}function P(R,D,O,F,G,W,q,J,X,Z,se){var le=2*R,oe=X*le,U=Z[oe+D];e:for(var V=G,re=G*le;V<W;++V,re+=le){var ee=q[re+D],j=q[re+D+R];if(!(U<ee||j<U)&&!(F&&U===ee)){for(var Q=J[V],ne=D+1;ne<R;++ne){var ee=q[re+ne],j=q[re+ne+R],ae=Z[oe+ne],ie=Z[oe+ne+R];if(j<ae||ie<ee)continue e}var ue;if(F?ue=O(se,Q):ue=O(Q,se),ue!==void 0)return ue}}}function z(R,D,O,F,G,W,q,J,X,Z){var se=2*R,le=J*se,oe=X[le+D];e:for(var U=F,V=F*se;U<G;++U,V+=se){var re=q[U];if(re!==Z){var ee=W[V+D],j=W[V+D+R];if(!(oe<ee||j<oe)){for(var Q=D+1;Q<R;++Q){var ee=W[V+Q],j=W[V+Q+R],ne=X[le+Q],ae=X[le+Q+R];if(j<ne||ae<ee)continue e}var ie=O(re,Z);if(ie!==void 0)return ie}}}}function I(R,D,O,F,G,W,q,J,X){S(R,F+q);var Z=0,se=2*R,le;for(k(Z++,0,0,F,0,q,O?16:0,-1/0,1/0),O||k(Z++,0,0,q,0,F,1,-1/0,1/0);Z>0;){Z-=1;var oe=Z*x,U=f[oe],V=f[oe+1],re=f[oe+2],ee=f[oe+3],j=f[oe+4],Q=f[oe+5],ne=Z*T,ae=L[ne],ie=L[ne+1],ue=Q&1,xe=!!(Q&16),he=G,ge=W,me=J,ke=X;if(ue&&(he=J,ge=X,me=G,ke=W),!(Q&2&&(re=p(R,U,V,re,he,ge,ie),V>=re))&&!(Q&4&&(V=A(R,U,V,re,he,ge,ae),V>=re))){var Ae=re-V,Ne=j-ee;if(xe){if(R*Ae*(Ae+Ne)<g){if(le=c.scanComplete(R,U,D,V,re,he,ge,ee,j,me,ke),le!==void 0)return le;continue}}else if(R*Math.min(Ae,Ne)<v){if(le=r(R,U,D,ue,V,re,he,ge,ee,j,me,ke),le!==void 0)return le;continue}else if(R*Ae*Ne<u){if(le=c.scanBipartite(R,U,D,ue,V,re,he,ge,ee,j,me,ke),le!==void 0)return le;continue}var He=h(R,U,V,re,he,ge,ae,ie);if(V<He)if(R*(He-V)<v){if(le=n(R,U+1,D,V,He,he,ge,ee,j,me,ke),le!==void 0)return le}else if(U===R-2){if(ue?le=c.sweepBipartite(R,D,ee,j,me,ke,V,He,he,ge):le=c.sweepBipartite(R,D,V,He,he,ge,ee,j,me,ke),le!==void 0)return le}else k(Z++,U+1,V,He,ee,j,ue,-1/0,1/0),k(Z++,U+1,ee,j,V,He,ue^1,-1/0,1/0);if(He<re){var Ge=s(R,U,ee,j,me,ke),_e=me[se*Ge+U],De=y(R,U,Ge,j,me,ke,_e);if(De<j&&k(Z++,U,He,re,De,j,(ue|4)+(xe?16:0),_e,ie),ee<Ge&&k(Z++,U,He,re,ee,Ge,(ue|2)+(xe?16:0),ae,_e),Ge+1===De){if(xe?le=z(R,U,D,He,re,he,ge,Ge,me,ke[Ge]):le=P(R,U,D,ue,He,re,he,ge,Ge,me,ke[Ge]),le!==void 0)return le}else if(Ge<De){var Ye;if(xe){if(Ye=m(R,U,He,re,he,ge,_e),He<Ye){var qe=y(R,U,He,Ye,he,ge,_e);if(U===R-2){if(He<qe&&(le=c.sweepComplete(R,D,He,qe,he,ge,Ge,De,me,ke),le!==void 0)||qe<Ye&&(le=c.sweepBipartite(R,D,qe,Ye,he,ge,Ge,De,me,ke),le!==void 0))return le}else He<qe&&k(Z++,U+1,He,qe,Ge,De,16,-1/0,1/0),qe<Ye&&(k(Z++,U+1,qe,Ye,Ge,De,0,-1/0,1/0),k(Z++,U+1,Ge,De,qe,Ye,1,-1/0,1/0))}}else ue?Ye=M(R,U,He,re,he,ge,_e):Ye=m(R,U,He,re,he,ge,_e),He<Ye&&(U===R-2?ue?le=c.sweepBipartite(R,D,Ge,De,me,ke,He,Ye,he,ge):le=c.sweepBipartite(R,D,He,Ye,he,ge,Ge,De,me,ke):(k(Z++,U+1,He,Ye,Ge,De,ue,-1/0,1/0),k(Z++,U+1,Ge,De,He,Ye,ue^1,-1/0,1/0)))}}}}}},{"./brute":36,"./median":38,"./partition":39,"./sweep":41,"bit-twiddle":32,"typedarray-pool":308}],38:[function(l,b,w){b.exports=n;var e=l("./partition"),o=e("lo<p0"),a=8;function r(c,s,i,v,u,g){for(var h=2*c,y=h*(i+1)+s,p=i+1;p<v;++p,y+=h)for(var A=u[y],m=p,M=h*(p-1);m>i&&u[M+s]>A;--m,M-=h){for(var x=M,T=M+h,_=0;_<h;++_,++x,++T){var f=u[x];u[x]=u[T],u[T]=f}var L=g[m];g[m]=g[m-1],g[m-1]=L}}function n(c,s,i,v,u,g){if(v<=i+1)return i;for(var h=i,y=v,p=v+i>>>1,A=2*c,m=p,M=u[A*p+s];h<y;){if(y-h<a){r(c,s,h,y,u,g),M=u[A*p+s];break}var x=y-h,T=Math.random()*x+h|0,_=u[A*T+s],f=Math.random()*x+h|0,L=u[A*f+s],S=Math.random()*x+h|0,k=u[A*S+s];_<=L?k>=L?(m=f,M=L):_>=k?(m=T,M=_):(m=S,M=k):L>=k?(m=f,M=L):k>=_?(m=T,M=_):(m=S,M=k);for(var I=A*(y-1),R=A*m,P=0;P<A;++P,++I,++R){var z=u[I];u[I]=u[R],u[R]=z}var D=g[y-1];g[y-1]=g[m],g[m]=D,m=o(c,s,h,y-1,u,g,M);for(var I=A*(y-1),R=A*m,P=0;P<A;++P,++I,++R){var z=u[I];u[I]=u[R],u[R]=z}var D=g[y-1];if(g[y-1]=g[m],g[m]=D,p<m){for(y=m-1;h<y&&u[A*(y-1)+s]===M;)y-=1;y+=1}else if(m<p)for(h=m+1;h<y&&u[A*h+s]===M;)h+=1;else break}return o(c,s,i,p,u,g,u[A*p+s])}},{"./partition":39}],39:[function(l,b,w){b.exports=o;var e={"lo===p0":a,"lo<p0":r,"lo<=p0":n,"hi<=p0":c,"lo<p0&&p0<=hi":i,"lo<=p0&&p0<=hi":s,"!(lo>=p0)&&!(p1>=hi)":v};function o(u){return e[u]}function a(u,g,h,y,p,A,m){for(var M=2*u,x=M*h,T=x,_=h,f=g,L=h;y>L;++L,x+=M){var S=p[x+f];if(S===m)if(_===L)_+=1,T+=M;else{for(var k=0;M>k;++k){var P=p[x+k];p[x+k]=p[T],p[T++]=P}var z=A[L];A[L]=A[_],A[_++]=z}}return _}function r(u,g,h,y,p,A,m){for(var M=2*u,x=M*h,T=x,_=h,f=g,L=h;y>L;++L,x+=M){var S=p[x+f];if(S<m)if(_===L)_+=1,T+=M;else{for(var k=0;M>k;++k){var P=p[x+k];p[x+k]=p[T],p[T++]=P}var z=A[L];A[L]=A[_],A[_++]=z}}return _}function n(u,g,h,y,p,A,m){for(var M=2*u,x=M*h,T=x,_=h,f=u+g,L=h;y>L;++L,x+=M){var S=p[x+f];if(S<=m)if(_===L)_+=1,T+=M;else{for(var k=0;M>k;++k){var P=p[x+k];p[x+k]=p[T],p[T++]=P}var z=A[L];A[L]=A[_],A[_++]=z}}return _}function c(u,g,h,y,p,A,m){for(var M=2*u,x=M*h,T=x,_=h,f=u+g,L=h;y>L;++L,x+=M){var S=p[x+f];if(S<=m)if(_===L)_+=1,T+=M;else{for(var k=0;M>k;++k){var P=p[x+k];p[x+k]=p[T],p[T++]=P}var z=A[L];A[L]=A[_],A[_++]=z}}return _}function s(u,g,h,y,p,A,m){for(var M=2*u,x=M*h,T=x,_=h,f=g,L=u+g,S=h;y>S;++S,x+=M){var k=p[x+f],P=p[x+L];if(k<=m&&m<=P)if(_===S)_+=1,T+=M;else{for(var z=0;M>z;++z){var I=p[x+z];p[x+z]=p[T],p[T++]=I}var R=A[S];A[S]=A[_],A[_++]=R}}return _}function i(u,g,h,y,p,A,m){for(var M=2*u,x=M*h,T=x,_=h,f=g,L=u+g,S=h;y>S;++S,x+=M){var k=p[x+f],P=p[x+L];if(k<m&&m<=P)if(_===S)_+=1,T+=M;else{for(var z=0;M>z;++z){var I=p[x+z];p[x+z]=p[T],p[T++]=I}var R=A[S];A[S]=A[_],A[_++]=R}}return _}function v(u,g,h,y,p,A,m,M){for(var x=2*u,T=x*h,_=T,f=h,L=g,S=u+g,k=h;y>k;++k,T+=x){var P=p[T+L],z=p[T+S];if(!(P>=m)&&!(M>=z))if(f===k)f+=1,_+=x;else{for(var I=0;x>I;++I){var R=p[T+I];p[T+I]=p[_],p[_++]=R}var D=A[k];A[k]=A[f],A[f++]=D}}return f}},{}],40:[function(l,b,w){b.exports=o;var e=32;function o(g,h){h<=4*e?a(0,h-1,g):u(0,h-1,g)}function a(g,h,y){for(var p=2*(g+1),A=g+1;A<=h;++A){for(var m=y[p++],M=y[p++],x=A,T=p-2;x-- >g;){var _=y[T-2],f=y[T-1];if(_<m)break;if(_===m&&f<M)break;y[T]=_,y[T+1]=f,T-=2}y[T]=m,y[T+1]=M}}function r(g,h,y){g*=2,h*=2;var p=y[g],A=y[g+1];y[g]=y[h],y[g+1]=y[h+1],y[h]=p,y[h+1]=A}function n(g,h,y){g*=2,h*=2,y[g]=y[h],y[g+1]=y[h+1]}function c(g,h,y,p){g*=2,h*=2,y*=2;var A=p[g],m=p[g+1];p[g]=p[h],p[g+1]=p[h+1],p[h]=p[y],p[h+1]=p[y+1],p[y]=A,p[y+1]=m}function s(g,h,y,p,A){g*=2,h*=2,A[g]=A[h],A[h]=y,A[g+1]=A[h+1],A[h+1]=p}function i(g,h,y){g*=2,h*=2;var p=y[g],A=y[h];return p<A?!1:p===A?y[g+1]>y[h+1]:!0}function v(g,h,y,p){g*=2;var A=p[g];return A<h?!0:A===h?p[g+1]<y:!1}function u(g,h,y){var p=(h-g+1)/6|0,A=g+p,m=h-p,M=g+h>>1,x=M-p,T=M+p,_=A,f=x,L=M,S=T,k=m,P=g+1,z=h-1,I=0;i(_,f,y)&&(I=_,_=f,f=I),i(S,k,y)&&(I=S,S=k,k=I),i(_,L,y)&&(I=_,_=L,L=I),i(f,L,y)&&(I=f,f=L,L=I),i(_,S,y)&&(I=_,_=S,S=I),i(L,S,y)&&(I=L,L=S,S=I),i(f,k,y)&&(I=f,f=k,k=I),i(f,L,y)&&(I=f,f=L,L=I),i(S,k,y)&&(I=S,S=k,k=I);for(var R=y[2*f],D=y[2*f+1],O=y[2*S],F=y[2*S+1],G=2*_,W=2*L,q=2*k,J=2*A,X=2*M,Z=2*m,se=0;se<2;++se){var le=y[G+se],oe=y[W+se],U=y[q+se];y[J+se]=le,y[X+se]=oe,y[Z+se]=U}n(x,g,y),n(T,h,y);for(var V=P;V<=z;++V)if(v(V,R,D,y))V!==P&&r(V,P,y),++P;else if(!v(V,O,F,y))for(;;)if(v(z,O,F,y)){v(z,R,D,y)?(c(V,P,z,y),++P,--z):(r(V,z,y),--z);break}else{if(--z<V)break;continue}s(g,P-1,R,D,y),s(h,z+1,O,F,y),P-2-g<=e?a(g,P-2,y):u(g,P-2,y),h-(z+2)<=e?a(z+2,h,y):u(z+2,h,y),z-P<=e?a(P,z,y):u(P,z,y)}},{}],41:[function(l,b,w){b.exports={init:y,sweepBipartite:m,sweepComplete:M,scanBipartite:x,scanComplete:T};var e=l("typedarray-pool"),o=l("bit-twiddle"),a=l("./sort"),r=1<<28,n=1024,c=e.mallocInt32(n),s=e.mallocInt32(n),i=e.mallocInt32(n),v=e.mallocInt32(n),u=e.mallocInt32(n),g=e.mallocInt32(n),h=e.mallocDouble(n*8);function y(_){var f=o.nextPow2(_);c.length<f&&(e.free(c),c=e.mallocInt32(f)),s.length<f&&(e.free(s),s=e.mallocInt32(f)),i.length<f&&(e.free(i),i=e.mallocInt32(f)),v.length<f&&(e.free(v),v=e.mallocInt32(f)),u.length<f&&(e.free(u),u=e.mallocInt32(f)),g.length<f&&(e.free(g),g=e.mallocInt32(f));var L=8*f;h.length<L&&(e.free(h),h=e.mallocDouble(L))}function p(_,f,L,S){var k=f[S],P=_[L-1];_[k]=P,f[P]=k}function A(_,f,L,S){_[L]=S,f[S]=L}function m(_,f,L,S,k,P,z,I,R,D){for(var O=0,F=2*_,G=_-1,W=F-1,q=L;q<S;++q){var J=P[q],X=F*q;h[O++]=k[X+G],h[O++]=-(J+1),h[O++]=k[X+W],h[O++]=J}for(var q=z;q<I;++q){var J=D[q]+r,Z=F*q;h[O++]=R[Z+G],h[O++]=-J,h[O++]=R[Z+W],h[O++]=J}var se=O>>>1;a(h,se);for(var le=0,oe=0,q=0;q<se;++q){var U=h[2*q+1]|0;if(U>=r)U=U-r|0,p(i,v,oe--,U);else if(U>=0)p(c,s,le--,U);else if(U<=-r){U=-U-r|0;for(var V=0;V<le;++V){var re=f(c[V],U);if(re!==void 0)return re}A(i,v,oe++,U)}else{U=-U-1|0;for(var V=0;V<oe;++V){var re=f(U,i[V]);if(re!==void 0)return re}A(c,s,le++,U)}}}function M(_,f,L,S,k,P,z,I,R,D){for(var O=0,F=2*_,G=_-1,W=F-1,q=L;q<S;++q){var J=P[q]+1<<1,X=F*q;h[O++]=k[X+G],h[O++]=-J,h[O++]=k[X+W],h[O++]=J}for(var q=z;q<I;++q){var J=D[q]+1<<1,Z=F*q;h[O++]=R[Z+G],h[O++]=-J|1,h[O++]=R[Z+W],h[O++]=J|1}var se=O>>>1;a(h,se);for(var le=0,oe=0,U=0,q=0;q<se;++q){var V=h[2*q+1]|0,re=V&1;if(q<se-1&&V>>1===h[2*q+3]>>1&&(re=2,q+=1),V<0){for(var ee=-(V>>1)-1,j=0;j<U;++j){var Q=f(u[j],ee);if(Q!==void 0)return Q}if(re!==0)for(var j=0;j<le;++j){var Q=f(c[j],ee);if(Q!==void 0)return Q}if(re!==1)for(var j=0;j<oe;++j){var Q=f(i[j],ee);if(Q!==void 0)return Q}re===0?A(c,s,le++,ee):re===1?A(i,v,oe++,ee):re===2&&A(u,g,U++,ee)}else{var ee=(V>>1)-1;re===0?p(c,s,le--,ee):re===1?p(i,v,oe--,ee):re===2&&p(u,g,U--,ee)}}}function x(_,f,L,S,k,P,z,I,R,D,O,F){var G=0,W=2*_,q=f,J=f+_,X=1,Z=1;S?Z=r:X=r;for(var se=k;se<P;++se){var le=se+X,oe=W*se;h[G++]=z[oe+q],h[G++]=-le,h[G++]=z[oe+J],h[G++]=le}for(var se=R;se<D;++se){var le=se+Z,U=W*se;h[G++]=O[U+q],h[G++]=-le}var V=G>>>1;a(h,V);for(var re=0,se=0;se<V;++se){var ee=h[2*se+1]|0;if(ee<0){var le=-ee,j=!1;if(le>=r?(j=!S,le-=r):(j=!!S,le-=1),j)A(c,s,re++,le);else{var Q=F[le],ne=W*le,ae=O[ne+f+1],ie=O[ne+f+1+_];e:for(var ue=0;ue<re;++ue){var xe=c[ue],he=W*xe;if(!(ie<z[he+f+1]||z[he+f+1+_]<ae)){for(var ge=f+2;ge<_;++ge)if(O[ne+ge+_]<z[he+ge]||z[he+ge+_]<O[ne+ge])continue e;var me=I[xe],ke;if(S?ke=L(Q,me):ke=L(me,Q),ke!==void 0)return ke}}}}else p(c,s,re--,ee-X)}}function T(_,f,L,S,k,P,z,I,R,D,O){for(var F=0,G=2*_,W=f,q=f+_,J=S;J<k;++J){var X=J+r,Z=G*J;h[F++]=P[Z+W],h[F++]=-X,h[F++]=P[Z+q],h[F++]=X}for(var J=I;J<R;++J){var X=J+1,se=G*J;h[F++]=D[se+W],h[F++]=-X}var le=F>>>1;a(h,le);for(var oe=0,J=0;J<le;++J){var U=h[2*J+1]|0;if(U<0){var X=-U;if(X>=r)c[oe++]=X-r;else{X-=1;var V=O[X],re=G*X,ee=D[re+f+1],j=D[re+f+1+_];e:for(var Q=0;Q<oe;++Q){var ne=c[Q],ae=z[ne];if(ae===V)break;var ie=G*ne;if(!(j<P[ie+f+1]||P[ie+f+1+_]<ee)){for(var ue=f+2;ue<_;++ue)if(D[re+ue+_]<P[ie+ue]||P[ie+ue+_]<D[re+ue])continue e;var xe=L(ae,V);if(xe!==void 0)return xe}}}}else{for(var X=U-r,Q=oe-1;Q>=0;--Q)if(c[Q]===X){for(var ue=Q+1;ue<oe;++ue)c[ue-1]=c[ue];break}--oe}}}},{"./sort":40,"bit-twiddle":32,"typedarray-pool":308}],42:[function(l,b,w){var e=l("./lib/monotone"),o=l("./lib/triangulation"),a=l("./lib/delaunay"),r=l("./lib/filter");b.exports=v;function n(u){return[Math.min(u[0],u[1]),Math.max(u[0],u[1])]}function c(u,g){return u[0]-g[0]||u[1]-g[1]}function s(u){return u.map(n).sort(c)}function i(u,g,h){return g in u?u[g]:h}function v(u,g,h){Array.isArray(g)?(h=h||{},g=g||[]):(h=g||{},g=[]);var y=!!i(h,"delaunay",!0),p=!!i(h,"interior",!0),A=!!i(h,"exterior",!0),m=!!i(h,"infinity",!1);if(!p&&!A||u.length===0)return[];var M=e(u,g);if(y||p!==A||m){for(var x=o(u.length,s(g)),T=0;T<M.length;++T){var _=M[T];x.addTriangle(_[0],_[1],_[2])}return y&&a(u,x),A?p?m?r(x,0,m):x.cells():r(x,1,m):r(x,-1)}else return M}},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(l,b,w){var e=l("robust-in-sphere")[4];l("binary-search-bounds"),b.exports=a;function o(r,n,c,s,i,v){var u=n.opposite(s,i);if(!(u<0)){if(i<s){var g=s;s=i,i=g,g=v,v=u,u=g}n.isConstraint(s,i)||e(r[s],r[i],r[v],r[u])<0&&c.push(s,i)}}function a(r,n){for(var c=[],s=r.length,i=n.stars,v=0;v<s;++v)for(var u=i[v],g=1;g<u.length;g+=2){var h=u[g];if(!(h<v)&&!n.isConstraint(v,h)){for(var y=u[g-1],p=-1,A=1;A<u.length;A+=2)if(u[A-1]===h){p=u[A];break}p<0||e(r[v],r[h],r[y],r[p])<0&&c.push(v,h)}}for(;c.length>0;){for(var h=c.pop(),v=c.pop(),y=-1,p=-1,u=i[v],m=1;m<u.length;m+=2){var M=u[m-1],x=u[m];M===h?p=x:x===h&&(y=M)}y<0||p<0||e(r[v],r[h],r[y],r[p])>=0||(n.flip(v,h),o(r,n,c,y,v,p),o(r,n,c,v,p,y),o(r,n,c,p,h,y),o(r,n,c,h,y,p))}}},{"binary-search-bounds":31,"robust-in-sphere":282}],44:[function(l,b,w){var e=l("binary-search-bounds");b.exports=s;function o(i,v,u,g,h,y,p){this.cells=i,this.neighbor=v,this.flags=g,this.constraint=u,this.active=h,this.next=y,this.boundary=p}var a=o.prototype;function r(i,v){return i[0]-v[0]||i[1]-v[1]||i[2]-v[2]}a.locate=function(){var i=[0,0,0];return function(v,u,g){var h=v,y=u,p=g;return u<g?u<v&&(h=u,y=g,p=v):g<v&&(h=g,y=v,p=u),h<0?-1:(i[0]=h,i[1]=y,i[2]=p,e.eq(this.cells,i,r))}}();function n(i,v){for(var u=i.cells(),g=u.length,h=0;h<g;++h){var y=u[h],p=y[0],A=y[1],m=y[2];A<m?A<p&&(y[0]=A,y[1]=m,y[2]=p):m<p&&(y[0]=m,y[1]=p,y[2]=A)}u.sort(r);for(var M=new Array(g),h=0;h<M.length;++h)M[h]=0;var x=[],T=[],_=new Array(3*g),f=new Array(3*g),L=null;v&&(L=[]);for(var S=new o(u,_,f,M,x,T,L),h=0;h<g;++h)for(var y=u[h],k=0;k<3;++k){var p=y[k],A=y[(k+1)%3],P=_[3*h+k]=S.locate(A,p,i.opposite(A,p)),z=f[3*h+k]=i.isConstraint(p,A);P<0&&(z?T.push(h):(x.push(h),M[h]=1),v&&L.push([A,p,-1]))}return S}function c(i,v,u){for(var g=0,h=0;h<i.length;++h)v[h]===u&&(i[g++]=i[h]);return i.length=g,i}function s(i,v,u){var g=n(i,u);if(v===0)return u?g.cells.concat(g.boundary):g.cells;for(var h=1,y=g.active,p=g.next,A=g.flags,m=g.cells,M=g.constraint,x=g.neighbor;y.length>0||p.length>0;){for(;y.length>0;){var T=y.pop();if(A[T]!==-h){A[T]=h,m[T];for(var _=0;_<3;++_){var f=x[3*T+_];f>=0&&A[f]===0&&(M[3*T+_]?p.push(f):(y.push(f),A[f]=h))}}}var L=p;p=y,y=L,p.length=0,h=-h}var S=c(m,A,v);return u?S.concat(g.boundary):S}},{"binary-search-bounds":31}],45:[function(l,b,w){var e=l("binary-search-bounds"),o=l("robust-orientation")[3],a=0,r=1,n=2;b.exports=p;function c(A,m,M,x,T){this.a=A,this.b=m,this.idx=M,this.lowerIds=x,this.upperIds=T}function s(A,m,M,x){this.a=A,this.b=m,this.type=M,this.idx=x}function i(A,m){var M=A.a[0]-m.a[0]||A.a[1]-m.a[1]||A.type-m.type;return M||A.type!==a&&(M=o(A.a,A.b,m.b),M)?M:A.idx-m.idx}function v(A,m){return o(A.a,A.b,m)}function u(A,m,M,x,T){for(var _=e.lt(m,x,v),f=e.gt(m,x,v),L=_;L<f;++L){for(var S=m[L],k=S.lowerIds,z=k.length;z>1&&o(M[k[z-2]],M[k[z-1]],x)>0;)A.push([k[z-1],k[z-2],T]),z-=1;k.length=z,k.push(T);for(var P=S.upperIds,z=P.length;z>1&&o(M[P[z-2]],M[P[z-1]],x)<0;)A.push([P[z-2],P[z-1],T]),z-=1;P.length=z,P.push(T)}}function g(A,m){var M;return A.a[0]<m.a[0]?M=o(A.a,A.b,m.a):M=o(m.b,m.a,A.a),M||(m.b[0]<A.b[0]?M=o(A.a,A.b,m.b):M=o(m.b,m.a,A.b),M||A.idx-m.idx)}function h(A,m,M){var x=e.le(A,M,g),T=A[x],_=T.upperIds,f=_[_.length-1];T.upperIds=[f],A.splice(x+1,0,new c(M.a,M.b,M.idx,[f],_))}function y(A,m,M){var x=M.a;M.a=M.b,M.b=x;var T=e.eq(A,M,g),_=A[T],f=A[T-1];f.upperIds=_.upperIds,A.splice(T,1)}function p(A,m){for(var M=A.length,x=m.length,T=[],_=0;_<M;++_)T.push(new s(A[_],null,a,_));for(var _=0;_<x;++_){var f=m[_],L=A[f[0]],S=A[f[1]];L[0]<S[0]?T.push(new s(L,S,n,_),new s(S,L,r,_)):L[0]>S[0]&&T.push(new s(S,L,n,_),new s(L,S,r,_))}T.sort(i);for(var k=T[0].a[0]-(1+Math.abs(T[0].a[0]))*Math.pow(2,-52),P=[new c([k,1],[k,0],-1,[],[],[],[])],z=[],_=0,I=T.length;_<I;++_){var R=T[_],D=R.type;D===a?u(z,P,A,R.a,R.idx):D===n?h(P,A,R):y(P,A,R)}return z}},{"binary-search-bounds":31,"robust-orientation":284}],46:[function(l,b,w){var e=l("binary-search-bounds");b.exports=n;function o(c,s){this.stars=c,this.edges=s}var a=o.prototype;function r(c,s,i){for(var v=1,u=c.length;v<u;v+=2)if(c[v-1]===s&&c[v]===i){c[v-1]=c[u-2],c[v]=c[u-1],c.length=u-2;return}}a.isConstraint=function(){var c=[0,0];function s(i,v){return i[0]-v[0]||i[1]-v[1]}return function(i,v){return c[0]=Math.min(i,v),c[1]=Math.max(i,v),e.eq(this.edges,c,s)>=0}}(),a.removeTriangle=function(c,s,i){var v=this.stars;r(v[c],s,i),r(v[s],i,c),r(v[i],c,s)},a.addTriangle=function(c,s,i){var v=this.stars;v[c].push(s,i),v[s].push(i,c),v[i].push(c,s)},a.opposite=function(c,s){for(var i=this.stars[s],v=1,u=i.length;v<u;v+=2)if(i[v]===c)return i[v-1];return-1},a.flip=function(c,s){var i=this.opposite(c,s),v=this.opposite(s,c);this.removeTriangle(c,s,i),this.removeTriangle(s,c,v),this.addTriangle(c,v,i),this.addTriangle(s,i,v)},a.edges=function(){for(var c=this.stars,s=[],i=0,v=c.length;i<v;++i)for(var u=c[i],g=0,h=u.length;g<h;g+=2)s.push([u[g],u[g+1]]);return s},a.cells=function(){for(var c=this.stars,s=[],i=0,v=c.length;i<v;++i)for(var u=c[i],g=0,h=u.length;g<h;g+=2){var y=u[g],p=u[g+1];i<Math.min(y,p)&&s.push([i,y,p])}return s};function n(c,s){for(var i=new Array(c),v=0;v<c;++v)i[v]=[];return new o(i,s)}},{"binary-search-bounds":31}],47:[function(l,b,w){b.exports=e;function e(o){for(var a=1,r=1;r<o.length;++r)for(var n=0;n<r;++n)if(o[r]<o[n])a=-a;else if(o[n]===o[r])return 0;return a}},{}],48:[function(l,b,w){var e=l("dup"),o=l("robust-linear-solve");function a(c,s){for(var i=0,v=c.length,u=0;u<v;++u)i+=c[u]*s[u];return i}function r(c){var s=c.length;if(s===0)return[];c[0].length;var i=e([c.length+1,c.length+1],1),v=e([c.length+1],1);i[s][s]=0;for(var u=0;u<s;++u){for(var g=0;g<=u;++g)i[g][u]=i[u][g]=2*a(c[u],c[g]);v[u]=a(c[u],c[u])}for(var h=o(i,v),y=0,p=h[s+1],u=0;u<p.length;++u)y+=p[u];for(var A=new Array(s),u=0;u<s;++u){for(var p=h[u],m=0,g=0;g<p.length;++g)m+=p[g];A[u]=m/y}return A}function n(c){if(c.length===0)return[];for(var s=c[0].length,i=e([s]),v=r(c),u=0;u<c.length;++u)for(var g=0;g<s;++g)i[g]+=c[u][g]*v[u];return i}n.barycenetric=r,b.exports=n},{dup:65,"robust-linear-solve":283}],49:[function(l,b,w){b.exports=o;var e=l("circumcenter");function o(a){for(var r=e(a),n=0,c=0;c<a.length;++c)for(var s=a[c],i=0;i<r.length;++i)n+=Math.pow(s[i]-r[i],2);return Math.sqrt(n/a.length)}},{circumcenter:48}],50:[function(l,b,w){b.exports=L;var e=l("union-find"),o=l("box-intersect"),a=l("robust-segment-intersect"),r=l("big-rat"),n=l("big-rat/cmp"),c=l("big-rat/to-float"),s=l("rat-vec"),i=l("nextafter"),v=l("./lib/rat-seg-intersect");function u(S){var k=c(S);return[i(k,-1/0),i(k,1/0)]}function g(S,k){for(var P=new Array(k.length),z=0;z<k.length;++z){var I=k[z],R=S[I[0]],D=S[I[1]];P[z]=[i(Math.min(R[0],D[0]),-1/0),i(Math.min(R[1],D[1]),-1/0),i(Math.max(R[0],D[0]),1/0),i(Math.max(R[1],D[1]),1/0)]}return P}function h(S){for(var k=new Array(S.length),P=0;P<S.length;++P){var z=S[P];k[P]=[i(z[0],-1/0),i(z[1],-1/0),i(z[0],1/0),i(z[1],1/0)]}return k}function y(S,k,P){var z=[];return o(P,function(I,R){var D=k[I],O=k[R];if(!(D[0]===O[0]||D[0]===O[1]||D[1]===O[0]||D[1]===O[1])){var F=S[D[0]],G=S[D[1]],W=S[O[0]],q=S[O[1]];a(F,G,W,q)&&z.push([I,R])}}),z}function p(S,k,P,z){var I=[];return o(P,z,function(R,D){var O=k[R];if(!(O[0]===D||O[1]===D)){var F=S[D],G=S[O[0]],W=S[O[1]];a(G,W,F,F)&&I.push([R,D])}}),I}function A(S,k,P,z,I){var R,D,O=S.map(function(ne){return[r(ne[0]),r(ne[1])]});for(R=0;R<P.length;++R){var F=P[R];D=F[0];var G=F[1],W=k[D],q=k[G],J=v(s(S[W[0]]),s(S[W[1]]),s(S[q[0]]),s(S[q[1]]));if(!!J){var X=S.length;S.push([c(J[0]),c(J[1])]),O.push(J),z.push([D,X],[G,X])}}for(z.sort(function(ne,ae){if(ne[0]!==ae[0])return ne[0]-ae[0];var ie=O[ne[1]],ue=O[ae[1]];return n(ie[0],ue[0])||n(ie[1],ue[1])}),R=z.length-1;R>=0;--R){var Z=z[R];D=Z[0];var se=k[D],le=se[0],oe=se[1],U=S[le],V=S[oe];if((U[0]-V[0]||U[1]-V[1])<0){var re=le;le=oe,oe=re}se[0]=le;var ee=se[1]=Z[1],j;for(I&&(j=se[2]);R>0&&z[R-1][0]===D;){var Z=z[--R],Q=Z[1];I?k.push([ee,Q,j]):k.push([ee,Q]),ee=Q}I?k.push([ee,oe,j]):k.push([ee,oe])}return O}function m(S,k,P){for(var z=k.length,I=new e(z),R=[],D=0;D<k.length;++D){var O=k[D],F=u(O[0]),G=u(O[1]);R.push([i(F[0],-1/0),i(G[0],-1/0),i(F[1],1/0),i(G[1],1/0)])}o(R,function(Z,se){I.link(Z,se)});for(var W=!0,q=new Array(z),D=0;D<z;++D){var J=I.find(D);J!==D&&(W=!1,S[J]=[Math.min(S[D][0],S[J][0]),Math.min(S[D][1],S[J][1])])}if(W)return null;for(var X=0,D=0;D<z;++D){var J=I.find(D);J===D?(q[D]=X,S[X++]=S[D]):q[D]=-1}S.length=X;for(var D=0;D<z;++D)q[D]<0&&(q[D]=q[I.find(D)]);return q}function M(S,k){return S[0]-k[0]||S[1]-k[1]}function x(S,k){var P=S[0]-k[0]||S[1]-k[1];return P||(S[2]<k[2]?-1:S[2]>k[2]?1:0)}function T(S,k,P){if(S.length!==0){if(k)for(var z=0;z<S.length;++z){var I=S[z],R=k[I[0]],D=k[I[1]];I[0]=Math.min(R,D),I[1]=Math.max(R,D)}else for(var z=0;z<S.length;++z){var I=S[z],R=I[0],D=I[1];I[0]=Math.min(R,D),I[1]=Math.max(R,D)}P?S.sort(x):S.sort(M);for(var O=1,z=1;z<S.length;++z){var F=S[z-1],G=S[z];G[0]===F[0]&&G[1]===F[1]&&(!P||G[2]===F[2])||(S[O++]=G)}S.length=O}}function _(S,k,P){var z=m(S,[],h(S));return T(k,z,P),!!z}function f(S,k,P){var z=g(S,k),I=y(S,k,z),R=h(S),D=p(S,k,z,R),O=A(S,k,I,D,P),F=m(S,O);return T(k,F,P),F?!0:I.length>0||D.length>0}function L(S,k,P){var z;if(P){z=k;for(var I=new Array(k.length),R=0;R<k.length;++R){var D=k[R];I[R]=[D[0],D[1],P[R]]}k=I}for(var O=_(S,k,!!P);f(S,k,!!P);)O=!0;if(!!P&&O){z.length=0,P.length=0;for(var R=0;R<k.length;++R){var D=k[R];z.push([D[0],D[1]]),P.push(D[2])}}return O}},{"./lib/rat-seg-intersect":51,"big-rat":18,"big-rat/cmp":16,"big-rat/to-float":30,"box-intersect":35,nextafter:260,"rat-vec":273,"robust-segment-intersect":287,"union-find":309}],51:[function(l,b,w){b.exports=v;var e=l("big-rat/mul"),o=l("big-rat/div"),a=l("big-rat/sub"),r=l("big-rat/sign"),n=l("rat-vec/sub"),c=l("rat-vec/add"),s=l("rat-vec/muls");function i(u,g){return a(e(u[0],g[1]),e(u[1],g[0]))}function v(u,g,h,y){var p=n(g,u),A=n(y,h),m=i(p,A);if(r(m)===0)return null;var M=n(u,h),x=i(A,M),T=o(x,m),_=s(p,T),f=c(u,_);return f}},{"big-rat/div":17,"big-rat/mul":27,"big-rat/sign":28,"big-rat/sub":29,"rat-vec/add":272,"rat-vec/muls":274,"rat-vec/sub":275}],52:[function(l,b,w){b.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],53:[function(l,b,w){var e=l("./colorScale"),o=l("lerp");b.exports=a;function a(s){var i,v,u,g,h,y,p,A,T,m,M;if(s||(s={}),A=(s.nshades||72)-1,p=s.format||"hex",y=s.colormap,y||(y="jet"),typeof y=="string"){if(y=y.toLowerCase(),!e[y])throw Error(y+" not a supported colorscale");h=e[y]}else if(Array.isArray(y))h=y.slice();else throw Error("unsupported colormap option",y);if(h.length>A+1)throw new Error(y+" map requires nshades to be at least size "+h.length);Array.isArray(s.alpha)?s.alpha.length!==2?m=[1,1]:m=s.alpha.slice():typeof s.alpha=="number"?m=[s.alpha,s.alpha]:m=[1,1],i=h.map(function(L){return Math.round(L.index*A)}),m[0]=Math.min(Math.max(m[0],0),1),m[1]=Math.min(Math.max(m[1],0),1);var x=h.map(function(L,S){var k=h[S].index,P=h[S].rgb.slice();return P.length===4&&P[3]>=0&&P[3]<=1||(P[3]=m[0]+(m[1]-m[0])*k),P}),T=[];for(M=0;M<i.length-1;++M){g=i[M+1]-i[M],v=x[M],u=x[M+1];for(var _=0;_<g;_++){var f=_/g;T.push([Math.round(o(v[0],u[0],f)),Math.round(o(v[1],u[1],f)),Math.round(o(v[2],u[2],f)),o(v[3],u[3],f)])}}return T.push(h[h.length-1].rgb.concat(m[1])),p==="hex"?T=T.map(n):p==="rgbaString"?T=T.map(c):p==="float"&&(T=T.map(r)),T}function r(s){return[s[0]/255,s[1]/255,s[2]/255,s[3]]}function n(s){for(var i,v="#",u=0;u<3;++u)i=s[u],i=i.toString(16),v+=("00"+i).substr(i.length);return v}function c(s){return"rgba("+s.join(",")+")"}},{"./colorScale":52,lerp:240}],54:[function(l,b,w){b.exports=s;var e=l("robust-orientation"),o=l("signum"),a=l("two-sum"),r=l("robust-product"),n=l("robust-sum");function c(i,v,u){var g=a(i[0],-v[0]),h=a(i[1],-v[1]),y=a(u[0],-v[0]),p=a(u[1],-v[1]),A=n(r(g,y),r(h,p));return A[A.length-1]>=0}function s(i,v,u,g){var h=e(v,u,g);if(h===0){var y=o(e(i,v,u)),p=o(e(i,v,g));if(y===p){if(y===0){var A=c(i,v,u),m=c(i,v,g);return A===m?0:A?1:-1}return 0}else{if(p===0)return y>0||c(i,v,g)?-1:1;if(y===0)return p>0||c(i,v,u)?1:-1}return o(p-y)}var M=e(i,v,u);if(M>0)return h>0&&e(i,v,g)>0?1:-1;if(M<0)return h>0||e(i,v,g)>0?1:-1;var x=e(i,v,g);return x>0||c(i,v,u)?1:-1}},{"robust-orientation":284,"robust-product":285,"robust-sum":289,signum:55,"two-sum":307}],55:[function(l,b,w){b.exports=function(o){return o<0?-1:o>0?1:0}},{}],56:[function(l,b,w){b.exports=a;var e=Math.min;function o(r,n){return r-n}function a(r,n){var c=r.length,s=r.length-n.length;if(s)return s;switch(c){case 0:return 0;case 1:return r[0]-n[0];case 2:return r[0]+r[1]-n[0]-n[1]||e(r[0],r[1])-e(n[0],n[1]);case 3:var i=r[0]+r[1],v=n[0]+n[1];if(s=i+r[2]-(v+n[2]),s)return s;var u=e(r[0],r[1]),g=e(n[0],n[1]);return e(u,r[2])-e(g,n[2])||e(u+r[2],i)-e(g+n[2],v);case 4:var h=r[0],y=r[1],p=r[2],A=r[3],m=n[0],M=n[1],x=n[2],T=n[3];return h+y+p+A-(m+M+x+T)||e(h,y,p,A)-e(m,M,x,T,m)||e(h+y,h+p,h+A,y+p,y+A,p+A)-e(m+M,m+x,m+T,M+x,M+T,x+T)||e(h+y+p,h+y+A,h+p+A,y+p+A)-e(m+M+x,m+M+T,m+x+T,M+x+T);default:for(var _=r.slice().sort(o),f=n.slice().sort(o),L=0;L<c;++L)if(s=_[L]-f[L],s)return s;return 0}}},{}],57:[function(l,b,w){var e=l("compare-cell"),o=l("cell-orientation");b.exports=a;function a(r,n){return e(r,n)||o(r)-o(n)}},{"cell-orientation":47,"compare-cell":56}],58:[function(l,b,w){var e=l("./lib/ch1d"),o=l("./lib/ch2d"),a=l("./lib/chnd");b.exports=r;function r(n){var c=n.length;if(c===0)return[];if(c===1)return[[0]];var s=n[0].length;return s===0?[]:s===1?e(n):s===2?o(n):a(n,s)}},{"./lib/ch1d":59,"./lib/ch2d":60,"./lib/chnd":61}],59:[function(l,b,w){b.exports=e;function e(o){for(var a=0,r=0,n=1;n<o.length;++n)o[n][0]<o[a][0]&&(a=n),o[n][0]>o[r][0]&&(r=n);return a<r?[[a],[r]]:a>r?[[r],[a]]:[[a]]}},{}],60:[function(l,b,w){b.exports=o;var e=l("monotone-convex-hull-2d");function o(a){var r=e(a),n=r.length;if(n<=2)return[];for(var c=new Array(n),s=r[n-1],i=0;i<n;++i){var v=r[i];c[i]=[s,v],s=v}return c}},{"monotone-convex-hull-2d":246}],61:[function(l,b,w){b.exports=n;var e=l("incremental-convex-hull"),o=l("affine-hull");function a(c,s){for(var i=c.length,v=new Array(i),u=0;u<s.length;++u)v[u]=c[s[u]];for(var g=s.length,u=0;u<i;++u)s.indexOf(u)<0&&(v[g++]=c[u]);return v}function r(c,s){for(var i=c.length,v=s.length,u=0;u<i;++u)for(var g=c[u],h=0;h<g.length;++h){var y=g[h];if(y<v)g[h]=s[y];else{y=y-v;for(var p=0;p<v;++p)y>=s[p]&&(y+=1);g[h]=y}}return c}function n(c,s){try{return e(c,!0)}catch{var i=o(c);if(i.length<=s)return[];var v=a(c,i),u=e(v,!0);return r(u,i)}}},{"affine-hull":10,"incremental-convex-hull":233}],62:[function(l,b,w){function e(a,r,n,c,s,i){var v=6*s*s-6*s,u=3*s*s-4*s+1,g=-6*s*s+6*s,h=3*s*s-2*s;if(a.length){i||(i=new Array(a.length));for(var y=a.length-1;y>=0;--y)i[y]=v*a[y]+u*r[y]+g*n[y]+h*c[y];return i}return v*a+u*r+g*n[y]+h*c}function o(a,r,n,c,s,i){var v=s-1,u=s*s,g=v*v,h=(1+2*s)*g,y=s*g,p=u*(3-2*s),A=u*v;if(a.length){i||(i=new Array(a.length));for(var m=a.length-1;m>=0;--m)i[m]=h*a[m]+y*r[m]+p*n[m]+A*c[m];return i}return h*a+y*r+p*n+A*c}b.exports=o,b.exports.derivative=e},{}],63:[function(l,b,w){var e=l("incremental-convex-hull"),o=l("uniq");b.exports=c;function a(s,i){this.point=s,this.index=i}function r(s,i){for(var v=s.point,u=i.point,g=v.length,h=0;h<g;++h){var y=u[h]-v[h];if(y)return y}return 0}function n(s,i,v){if(s===1)return v?[[-1,0]]:[];var u=i.map(function(A,m){return[A[0],m]});u.sort(function(A,m){return A[0]-m[0]});for(var g=new Array(s-1),h=1;h<s;++h){var y=u[h-1],p=u[h];g[h-1]=[y[1],p[1]]}return v&&g.push([-1,g[0][1]],[g[s-1][1],-1]),g}function c(s,i){var v=s.length;if(v===0)return[];var u=s[0].length;if(u<1)return[];if(u===1)return n(v,s,i);for(var g=new Array(v),h=1,y=0;y<v;++y){for(var p=s[y],A=new Array(u+1),m=0,M=0;M<u;++M){var x=p[M];A[M]=x,m+=x*x}A[u]=m,g[y]=new a(A,y),h=Math.max(m,h)}o(g,r),v=g.length;for(var T=new Array(v+u+1),_=new Array(v+u+1),f=(u+1)*(u+1)*h,L=new Array(u+1),y=0;y<=u;++y)L[y]=0;L[u]=f,T[0]=L.slice(),_[0]=-1;for(var y=0;y<=u;++y){var A=L.slice();A[y]=1,T[y+1]=A,_[y+1]=-1}for(var y=0;y<v;++y){var S=g[y];T[y+u+1]=S.point,_[y+u+1]=S.index}var k=e(T,!1);if(i?k=k.filter(function(P){for(var z=0,I=0;I<=u;++I){var R=_[P[I]];if(R<0&&++z>=2)return!1;P[I]=R}return!0}):k=k.filter(function(P){for(var z=0;z<=u;++z){var I=_[P[z]];if(I<0)return!1;P[z]=I}return!0}),u&1)for(var y=0;y<k.length;++y){var S=k[y],A=S[0];S[0]=S[1],S[1]=A}return k}},{"incremental-convex-hull":233,uniq:310}],64:[function(l,b,w){(function(e){(function(){var o=!1;if(typeof Float64Array!="undefined"){var a=new Float64Array(1),r=new Uint32Array(a.buffer);if(a[0]=1,o=!0,r[1]===1072693248){let c=function(v,u){return r[0]=v,r[1]=u,a[0]},s=function(v){return a[0]=v,r[0]},i=function(v){return a[0]=v,r[1]};b.exports=function(u){return a[0]=u,[r[0],r[1]]},b.exports.pack=c,b.exports.lo=s,b.exports.hi=i}else if(r[0]===1072693248){let c=function(v,u){return r[1]=v,r[0]=u,a[0]},s=function(v){return a[0]=v,r[1]},i=function(v){return a[0]=v,r[0]};b.exports=function(u){return a[0]=u,[r[1],r[0]]},b.exports.pack=c,b.exports.lo=s,b.exports.hi=i}else o=!1}if(!o){let c=function(v,u){return n.writeUInt32LE(v,0,!0),n.writeUInt32LE(u,4,!0),n.readDoubleLE(0,!0)},s=function(v){return n.writeDoubleLE(v,0,!0),n.readUInt32LE(0,!0)},i=function(v){return n.writeDoubleLE(v,0,!0),n.readUInt32LE(4,!0)};var n=new e(8);b.exports=function(u){return n.writeDoubleLE(u,0,!0),[n.readUInt32LE(0,!0),n.readUInt32LE(4,!0)]},b.exports.pack=c,b.exports.lo=s,b.exports.hi=i}b.exports.sign=function(c){return b.exports.hi(c)>>>31},b.exports.exponent=function(c){var s=b.exports.hi(c);return(s<<1>>>21)-1023},b.exports.fraction=function(c){var s=b.exports.lo(c),i=b.exports.hi(c),v=i&(1<<20)-1;return i&2146435072&&(v+=1<<20),[s,v]},b.exports.denormalized=function(c){var s=b.exports.hi(c);return!(s&2146435072)}}).call(this)}).call(this,l("buffer").Buffer)},{buffer:3}],65:[function(l,b,w){function e(r,n,c){var s=r[c]|0;if(s<=0)return[];var i=new Array(s),v;if(c===r.length-1)for(v=0;v<s;++v)i[v]=n;else for(v=0;v<s;++v)i[v]=e(r,n,c+1);return i}function o(r,n){var c,s;for(c=new Array(r),s=0;s<r;++s)c[s]=n;return c}function a(r,n){switch(typeof n=="undefined"&&(n=0),typeof r){case"number":if(r>0)return o(r|0,n);break;case"object":if(typeof r.length=="number")return e(r,n,0);break}return[]}b.exports=a},{}],66:[function(l,b,w){b.exports=o;var e=l("uniq");function o(a,r){var n=a.length;if(typeof r!="number"){r=0;for(var c=0;c<n;++c){var s=a[c];r=Math.max(r,s[0],s[1])}r=(r|0)+1}r=r|0;for(var i=new Array(r),c=0;c<r;++c)i[c]=[];for(var c=0;c<n;++c){var s=a[c];i[s[0]].push(s[1]),i[s[1]].push(s[0])}for(var v=0;v<r;++v)e(i[v],function(u,g){return u-g});return i}},{uniq:310}],67:[function(l,b,w){b.exports=e;function e(o,a,r){var n=a||0,c=r||1;return[[o[12]+o[0],o[13]+o[1],o[14]+o[2],o[15]+o[3]],[o[12]-o[0],o[13]-o[1],o[14]-o[2],o[15]-o[3]],[o[12]+o[4],o[13]+o[5],o[14]+o[6],o[15]+o[7]],[o[12]-o[4],o[13]-o[5],o[14]-o[6],o[15]-o[7]],[n*o[12]+o[8],n*o[13]+o[9],n*o[14]+o[10],n*o[15]+o[11]],[c*o[12]-o[8],c*o[13]-o[9],c*o[14]-o[10],c*o[15]-o[11]]]}},{}],68:[function(l,b,w){b.exports=s;var e=l("cubic-hermite"),o=l("binary-search-bounds");function a(i,v,u){return Math.min(v,Math.max(i,u))}function r(i,v,u){this.dimension=i.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var g=0;g<this.dimension;++g)this.bounds[0][g]=-1/0,this.bounds[1][g]=1/0;this._state=i.slice().reverse(),this._velocity=v.slice().reverse(),this._time=[u],this._scratch=[i.slice(),i.slice(),i.slice(),i.slice(),i.slice()]}var n=r.prototype;n.flush=function(i){var v=o.gt(this._time,i)-1;v<=0||(this._time.splice(0,v),this._state.splice(0,v*this.dimension),this._velocity.splice(0,v*this.dimension))},n.curve=function(i){var v=this._time,u=v.length,g=o.le(v,i),h=this._scratch[0],y=this._state,p=this._velocity,A=this.dimension,m=this.bounds;if(g<0)for(var M=A-1,x=0;x<A;++x,--M)h[x]=y[M];else if(g>=u-1)for(var M=y.length-1,T=i-v[u-1],x=0;x<A;++x,--M)h[x]=y[M]+T*p[M];else{for(var M=A*(g+1)-1,_=v[g],f=v[g+1],L=f-_||1,S=this._scratch[1],k=this._scratch[2],P=this._scratch[3],z=this._scratch[4],I=!0,x=0;x<A;++x,--M)S[x]=y[M],P[x]=p[M]*L,k[x]=y[M+A],z[x]=p[M+A]*L,I=I&&S[x]===k[x]&&P[x]===z[x]&&P[x]===0;if(I)for(var x=0;x<A;++x)h[x]=S[x];else e(S,P,k,z,(i-_)/L,h)}for(var R=m[0],D=m[1],x=0;x<A;++x)h[x]=a(R[x],D[x],h[x]);return h},n.dcurve=function(i){var v=this._time,u=v.length,g=o.le(v,i),h=this._scratch[0],y=this._state,p=this._velocity,A=this.dimension;if(g>=u-1){var m=y.length-1;i-v[u-1];for(var M=0;M<A;++M,--m)h[M]=p[m]}else{for(var m=A*(g+1)-1,x=v[g],T=v[g+1],_=T-x||1,f=this._scratch[1],L=this._scratch[2],S=this._scratch[3],k=this._scratch[4],P=!0,M=0;M<A;++M,--m)f[M]=y[m],S[M]=p[m]*_,L[M]=y[m+A],k[M]=p[m+A]*_,P=P&&f[M]===L[M]&&S[M]===k[M]&&S[M]===0;if(P)for(var M=0;M<A;++M)h[M]=0;else{e.derivative(f,S,L,k,(i-x)/_,h);for(var M=0;M<A;++M)h[M]/=_}}return h},n.lastT=function(){var i=this._time;return i[i.length-1]},n.stable=function(){for(var i=this._velocity,v=i.length,u=this.dimension-1;u>=0;--u)if(i[--v])return!1;return!0},n.jump=function(i){var v=this.lastT(),u=this.dimension;if(!(i<v||arguments.length!==u+1)){var g=this._state,h=this._velocity,y=g.length-this.dimension,p=this.bounds,A=p[0],m=p[1];this._time.push(v,i);for(var M=0;M<2;++M)for(var x=0;x<u;++x)g.push(g[y++]),h.push(0);this._time.push(i);for(var x=u;x>0;--x)g.push(a(A[x-1],m[x-1],arguments[x])),h.push(0)}},n.push=function(i){var v=this.lastT(),u=this.dimension;if(!(i<v||arguments.length!==u+1)){var g=this._state,h=this._velocity,y=g.length-this.dimension,p=i-v,A=this.bounds,m=A[0],M=A[1],x=p>1e-6?1/p:0;this._time.push(i);for(var T=u;T>0;--T){var _=a(m[T-1],M[T-1],arguments[T]);g.push(_),h.push((_-g[y++])*x)}}},n.set=function(i){var v=this.dimension;if(!(i<this.lastT()||arguments.length!==v+1)){var u=this._state,g=this._velocity,h=this.bounds,y=h[0],p=h[1];this._time.push(i);for(var A=v;A>0;--A)u.push(a(y[A-1],p[A-1],arguments[A])),g.push(0)}},n.move=function(i){var v=this.lastT(),u=this.dimension;if(!(i<=v||arguments.length!==u+1)){var g=this._state,h=this._velocity,y=g.length-this.dimension,p=this.bounds,A=p[0],m=p[1],M=i-v,x=M>1e-6?1/M:0;this._time.push(i);for(var T=u;T>0;--T){var _=arguments[T];g.push(a(A[T-1],m[T-1],g[y++]+_)),h.push(_*x)}}},n.idle=function(i){var v=this.lastT();if(!(i<v)){var u=this.dimension,g=this._state,h=this._velocity,y=g.length-u,p=this.bounds,A=p[0],m=p[1],M=i-v;this._time.push(i);for(var x=u-1;x>=0;--x)g.push(a(A[x],m[x],g[y]+M*h[y])),h.push(0),y+=1}};function c(i){for(var v=new Array(i),u=0;u<i;++u)v[u]=0;return v}function s(i,v,u){switch(arguments.length){case 0:return new r([0],[0],0);case 1:if(typeof i=="number"){var g=c(i);return new r(g,g,0)}else return new r(i,c(i.length),0);case 2:if(typeof v=="number"){var g=c(i.length);return new r(i,g,+v)}else u=0;case 3:if(i.length!==v.length)throw new Error("state and velocity lengths must match");return new r(i,v,u)}}},{"binary-search-bounds":31,"cubic-hermite":62}],69:[function(l,b,w){b.exports=M;var e=0,o=1;function a(x,T,_,f,L,S){this._color=x,this.key=T,this.value=_,this.left=f,this.right=L,this._count=S}function r(x){return new a(x._color,x.key,x.value,x.left,x.right,x._count)}function n(x,T){return new a(x,T.key,T.value,T.left,T.right,T._count)}function c(x){x._count=1+(x.left?x.left._count:0)+(x.right?x.right._count:0)}function s(x,T){this._compare=x,this.root=T}var i=s.prototype;Object.defineProperty(i,"keys",{get:function(){var x=[];return this.forEach(function(T,_){x.push(T)}),x}}),Object.defineProperty(i,"values",{get:function(){var x=[];return this.forEach(function(T,_){x.push(_)}),x}}),Object.defineProperty(i,"length",{get:function(){return this.root?this.root._count:0}}),i.insert=function(x,T){for(var _=this._compare,f=this.root,L=[],S=[];f;){var k=_(x,f.key);L.push(f),S.push(k),k<=0?f=f.left:f=f.right}L.push(new a(e,x,T,null,null,1));for(var P=L.length-2;P>=0;--P){var f=L[P];S[P]<=0?L[P]=new a(f._color,f.key,f.value,L[P+1],f.right,f._count+1):L[P]=new a(f._color,f.key,f.value,f.left,L[P+1],f._count+1)}for(var P=L.length-1;P>1;--P){var z=L[P-1],f=L[P];if(z._color===o||f._color===o)break;var I=L[P-2];if(I.left===z)if(z.left===f){var R=I.right;if(R&&R._color===e)z._color=o,I.right=n(o,R),I._color=e,P-=1;else{if(I._color=e,I.left=z.right,z._color=o,z.right=I,L[P-2]=z,L[P-1]=f,c(I),c(z),P>=3){var D=L[P-3];D.left===I?D.left=z:D.right=z}break}}else{var R=I.right;if(R&&R._color===e)z._color=o,I.right=n(o,R),I._color=e,P-=1;else{if(z.right=f.left,I._color=e,I.left=f.right,f._color=o,f.left=z,f.right=I,L[P-2]=f,L[P-1]=z,c(I),c(z),c(f),P>=3){var D=L[P-3];D.left===I?D.left=f:D.right=f}break}}else if(z.right===f){var R=I.left;if(R&&R._color===e)z._color=o,I.left=n(o,R),I._color=e,P-=1;else{if(I._color=e,I.right=z.left,z._color=o,z.left=I,L[P-2]=z,L[P-1]=f,c(I),c(z),P>=3){var D=L[P-3];D.right===I?D.right=z:D.left=z}break}}else{var R=I.left;if(R&&R._color===e)z._color=o,I.left=n(o,R),I._color=e,P-=1;else{if(z.left=f.right,I._color=e,I.right=f.left,f._color=o,f.right=z,f.left=I,L[P-2]=f,L[P-1]=z,c(I),c(z),c(f),P>=3){var D=L[P-3];D.right===I?D.right=f:D.left=f}break}}}return L[0]._color=o,new s(_,L[0])};function v(x,T){if(T.left){var _=v(x,T.left);if(_)return _}var _=x(T.key,T.value);if(_)return _;if(T.right)return v(x,T.right)}function u(x,T,_,f){var L=T(x,f.key);if(L<=0){if(f.left){var S=u(x,T,_,f.left);if(S)return S}var S=_(f.key,f.value);if(S)return S}if(f.right)return u(x,T,_,f.right)}function g(x,T,_,f,L){var S=_(x,L.key),k=_(T,L.key),P;if(S<=0&&(L.left&&(P=g(x,T,_,f,L.left),P)||k>0&&(P=f(L.key,L.value),P)))return P;if(k>0&&L.right)return g(x,T,_,f,L.right)}i.forEach=function(T,_,f){if(!!this.root)switch(arguments.length){case 1:return v(T,this.root);case 2:return u(_,this._compare,T,this.root);case 3:return this._compare(_,f)>=0?void 0:g(_,f,this._compare,T,this.root)}},Object.defineProperty(i,"begin",{get:function(){for(var x=[],T=this.root;T;)x.push(T),T=T.left;return new h(this,x)}}),Object.defineProperty(i,"end",{get:function(){for(var x=[],T=this.root;T;)x.push(T),T=T.right;return new h(this,x)}}),i.at=function(x){if(x<0)return new h(this,[]);for(var T=this.root,_=[];;){if(_.push(T),T.left){if(x<T.left._count){T=T.left;continue}x-=T.left._count}if(!x)return new h(this,_);if(x-=1,T.right){if(x>=T.right._count)break;T=T.right}else break}return new h(this,[])},i.ge=function(x){for(var T=this._compare,_=this.root,f=[],L=0;_;){var S=T(x,_.key);f.push(_),S<=0&&(L=f.length),S<=0?_=_.left:_=_.right}return f.length=L,new h(this,f)},i.gt=function(x){for(var T=this._compare,_=this.root,f=[],L=0;_;){var S=T(x,_.key);f.push(_),S<0&&(L=f.length),S<0?_=_.left:_=_.right}return f.length=L,new h(this,f)},i.lt=function(x){for(var T=this._compare,_=this.root,f=[],L=0;_;){var S=T(x,_.key);f.push(_),S>0&&(L=f.length),S<=0?_=_.left:_=_.right}return f.length=L,new h(this,f)},i.le=function(x){for(var T=this._compare,_=this.root,f=[],L=0;_;){var S=T(x,_.key);f.push(_),S>=0&&(L=f.length),S<0?_=_.left:_=_.right}return f.length=L,new h(this,f)},i.find=function(x){for(var T=this._compare,_=this.root,f=[];_;){var L=T(x,_.key);if(f.push(_),L===0)return new h(this,f);L<=0?_=_.left:_=_.right}return new h(this,[])},i.remove=function(x){var T=this.find(x);return T?T.remove():this},i.get=function(x){for(var T=this._compare,_=this.root;_;){var f=T(x,_.key);if(f===0)return _.value;f<=0?_=_.left:_=_.right}};function h(x,T){this.tree=x,this._stack=T}var y=h.prototype;Object.defineProperty(y,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(y,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),y.clone=function(){return new h(this.tree,this._stack.slice())};function p(x,T){x.key=T.key,x.value=T.value,x.left=T.left,x.right=T.right,x._color=T._color,x._count=T._count}function A(x){for(var T,_,f,L,S=x.length-1;S>=0;--S){if(T=x[S],S===0){T._color=o;return}if(_=x[S-1],_.left===T){if(f=_.right,f.right&&f.right._color===e){if(f=_.right=r(f),L=f.right=r(f.right),_.right=f.left,f.left=_,f.right=L,f._color=_._color,T._color=o,_._color=o,L._color=o,c(_),c(f),S>1){var k=x[S-2];k.left===_?k.left=f:k.right=f}x[S-1]=f;return}else if(f.left&&f.left._color===e){if(f=_.right=r(f),L=f.left=r(f.left),_.right=L.left,f.left=L.right,L.left=_,L.right=f,L._color=_._color,_._color=o,f._color=o,T._color=o,c(_),c(f),c(L),S>1){var k=x[S-2];k.left===_?k.left=L:k.right=L}x[S-1]=L;return}if(f._color===o)if(_._color===e){_._color=o,_.right=n(e,f);return}else{_.right=n(e,f);continue}else{if(f=r(f),_.right=f.left,f.left=_,f._color=_._color,_._color=e,c(_),c(f),S>1){var k=x[S-2];k.left===_?k.left=f:k.right=f}x[S-1]=f,x[S]=_,S+1<x.length?x[S+1]=T:x.push(T),S=S+2}}else{if(f=_.left,f.left&&f.left._color===e){if(f=_.left=r(f),L=f.left=r(f.left),_.left=f.right,f.right=_,f.left=L,f._color=_._color,T._color=o,_._color=o,L._color=o,c(_),c(f),S>1){var k=x[S-2];k.right===_?k.right=f:k.left=f}x[S-1]=f;return}else if(f.right&&f.right._color===e){if(f=_.left=r(f),L=f.right=r(f.right),_.left=L.right,f.right=L.left,L.right=_,L.left=f,L._color=_._color,_._color=o,f._color=o,T._color=o,c(_),c(f),c(L),S>1){var k=x[S-2];k.right===_?k.right=L:k.left=L}x[S-1]=L;return}if(f._color===o)if(_._color===e){_._color=o,_.left=n(e,f);return}else{_.left=n(e,f);continue}else{if(f=r(f),_.left=f.right,f.right=_,f._color=_._color,_._color=e,c(_),c(f),S>1){var k=x[S-2];k.right===_?k.right=f:k.left=f}x[S-1]=f,x[S]=_,S+1<x.length?x[S+1]=T:x.push(T),S=S+2}}}}y.remove=function(){var x=this._stack;if(x.length===0)return this.tree;var T=new Array(x.length),_=x[x.length-1];T[T.length-1]=new a(_._color,_.key,_.value,_.left,_.right,_._count);for(var f=x.length-2;f>=0;--f){var _=x[f];_.left===x[f+1]?T[f]=new a(_._color,_.key,_.value,T[f+1],_.right,_._count):T[f]=new a(_._color,_.key,_.value,_.left,T[f+1],_._count)}if(_=T[T.length-1],_.left&&_.right){var L=T.length;for(_=_.left;_.right;)T.push(_),_=_.right;var S=T[L-1];T.push(new a(_._color,S.key,S.value,_.left,_.right,_._count)),T[L-1].key=_.key,T[L-1].value=_.value;for(var f=T.length-2;f>=L;--f)_=T[f],T[f]=new a(_._color,_.key,_.value,_.left,T[f+1],_._count);T[L-1].left=T[L]}if(_=T[T.length-1],_._color===e){var k=T[T.length-2];k.left===_?k.left=null:k.right===_&&(k.right=null),T.pop();for(var f=0;f<T.length;++f)T[f]._count--;return new s(this.tree._compare,T[0])}else if(_.left||_.right){_.left?p(_,_.left):_.right&&p(_,_.right),_._color=o;for(var f=0;f<T.length-1;++f)T[f]._count--;return new s(this.tree._compare,T[0])}else{if(T.length===1)return new s(this.tree._compare,null);for(var f=0;f<T.length;++f)T[f]._count--;var P=T[T.length-2];A(T),P.left===_?P.left=null:P.right=null}return new s(this.tree._compare,T[0])},Object.defineProperty(y,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(y,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(y,"index",{get:function(){var x=0,T=this._stack;if(T.length===0){var _=this.tree.root;return _?_._count:0}else T[T.length-1].left&&(x=T[T.length-1].left._count);for(var f=T.length-2;f>=0;--f)T[f+1]===T[f].right&&(++x,T[f].left&&(x+=T[f].left._count));return x},enumerable:!0}),y.next=function(){var x=this._stack;if(x.length!==0){var T=x[x.length-1];if(T.right)for(T=T.right;T;)x.push(T),T=T.left;else for(x.pop();x.length>0&&x[x.length-1].right===T;)T=x[x.length-1],x.pop()}},Object.defineProperty(y,"hasNext",{get:function(){var x=this._stack;if(x.length===0)return!1;if(x[x.length-1].right)return!0;for(var T=x.length-1;T>0;--T)if(x[T-1].left===x[T])return!0;return!1}}),y.update=function(x){var T=this._stack;if(T.length===0)throw new Error("Can't update empty node!");var _=new Array(T.length),f=T[T.length-1];_[_.length-1]=new a(f._color,f.key,x,f.left,f.right,f._count);for(var L=T.length-2;L>=0;--L)f=T[L],f.left===T[L+1]?_[L]=new a(f._color,f.key,f.value,_[L+1],f.right,f._count):_[L]=new a(f._color,f.key,f.value,f.left,_[L+1],f._count);return new s(this.tree._compare,_[0])},y.prev=function(){var x=this._stack;if(x.length!==0){var T=x[x.length-1];if(T.left)for(T=T.left;T;)x.push(T),T=T.right;else for(x.pop();x.length>0&&x[x.length-1].left===T;)T=x[x.length-1],x.pop()}},Object.defineProperty(y,"hasPrev",{get:function(){var x=this._stack;if(x.length===0)return!1;if(x[x.length-1].left)return!0;for(var T=x.length-1;T>0;--T)if(x[T-1].right===x[T])return!0;return!1}});function m(x,T){return x<T?-1:x>T?1:0}function M(x){return new s(x||m,null)}},{}],70:[function(l,b,w){b.exports=T;var e=l("./lib/text.js"),o=l("./lib/lines.js"),a=l("./lib/background.js"),r=l("./lib/cube.js"),n=l("./lib/ticks.js"),c=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function s(_,f){return _[0]=f[0],_[1]=f[1],_[2]=f[2],_}function i(_){this.gl=_,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=a(_)}var v=i.prototype;v.update=function(_){_=_||{};function f(W,q,J){if(J in _){var X=_[J],Z=this[J],se;(W?Array.isArray(X)&&Array.isArray(X[0]):Array.isArray(X))?this[J]=se=[q(X[0]),q(X[1]),q(X[2])]:this[J]=se=[q(X),q(X),q(X)];for(var le=0;le<3;++le)if(se[le]!==Z[le])return!0}return!1}var L=f.bind(this,!1,Number),S=f.bind(this,!1,Boolean),k=f.bind(this,!1,String),P=f.bind(this,!0,function(W){if(Array.isArray(W)){if(W.length===3)return[+W[0],+W[1],+W[2],1];if(W.length===4)return[+W[0],+W[1],+W[2],+W[3]]}return[0,0,0,1]}),z,I=!1,R=!1;if("bounds"in _)for(var D=_.bounds,O=0;O<2;++O)for(var F=0;F<3;++F)D[O][F]!==this.bounds[O][F]&&(R=!0),this.bounds[O][F]=D[O][F];if("ticks"in _){z=_.ticks,I=!0,this.autoTicks=!1;for(var O=0;O<3;++O)this.tickSpacing[O]=0}else L("tickSpacing")&&(this.autoTicks=!0,R=!0);if(this._firstInit&&("ticks"in _||"tickSpacing"in _||(this.autoTicks=!0),R=!0,I=!0,this._firstInit=!1),R&&this.autoTicks&&(z=n.create(this.bounds,this.tickSpacing),I=!0),I){for(var O=0;O<3;++O)z[O].sort(function(q,J){return q.x-J.x});n.equal(z,this.ticks)?I=!1:this.ticks=z}S("tickEnable"),k("tickFont")&&(I=!0),L("tickSize"),L("tickAngle"),L("tickPad"),P("tickColor");var G=k("labels");k("labelFont")&&(G=!0),S("labelEnable"),L("labelSize"),L("labelPad"),P("labelColor"),S("lineEnable"),S("lineMirror"),L("lineWidth"),P("lineColor"),S("lineTickEnable"),S("lineTickMirror"),L("lineTickLength"),L("lineTickWidth"),P("lineTickColor"),S("gridEnable"),L("gridWidth"),P("gridColor"),S("zeroEnable"),P("zeroLineColor"),L("zeroLineWidth"),S("backgroundEnable"),P("backgroundColor"),this._text?this._text&&(G||I)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=e(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&I&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=o(this.gl,this.bounds,this.ticks))};function u(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}var g=[new u,new u,new u];function h(_,f,L,S,k){for(var P=_.primalOffset,z=_.primalMinor,I=_.mirrorOffset,R=_.mirrorMinor,D=S[f],O=0;O<3;++O)if(f!==O){var F=P,G=I,W=z,q=R;D&1<<O&&(F=I,G=P,W=R,q=z),F[O]=L[0][O],G[O]=L[1][O],k[O]>0?(W[O]=-1,q[O]=0):(W[O]=0,q[O]=1)}}var y=[0,0,0],p={model:c,view:c,projection:c,_ortho:!1};v.isOpaque=function(){return!0},v.isTransparent=function(){return!1},v.drawTransparent=function(_){};var A=0,m=[0,0,0],M=[0,0,0],x=[0,0,0];v.draw=function(_){_=_||p;for(var Z=this.gl,f=_.model||c,L=_.view||c,S=_.projection||c,k=this.bounds,P=_._ortho||!1,z=r(f,L,S,k,P),I=z.cubeEdges,R=z.axis,D=L[12],O=L[13],F=L[14],G=L[15],W=P?2:1,q=W*this.pixelRatio*(S[3]*D+S[7]*O+S[11]*F+S[15]*G)/Z.drawingBufferHeight,J=0;J<3;++J)this.lastCubeProps.cubeEdges[J]=I[J],this.lastCubeProps.axis[J]=R[J];for(var X=g,J=0;J<3;++J)h(g[J],J,this.bounds,I,R);for(var Z=this.gl,se=y,J=0;J<3;++J)this.backgroundEnable[J]?se[J]=R[J]:se[J]=0;this._background.draw(f,L,S,k,se,this.backgroundColor),this._lines.bind(f,L,S,this);for(var J=0;J<3;++J){var le=[0,0,0];R[J]>0?le[J]=k[1][J]:le[J]=k[0][J];for(var oe=0;oe<2;++oe){var U=(J+1+oe)%3,V=(J+1+(oe^1))%3;this.gridEnable[U]&&this._lines.drawGrid(U,V,this.bounds,le,this.gridColor[U],this.gridWidth[U]*this.pixelRatio)}for(var oe=0;oe<2;++oe){var U=(J+1+oe)%3,V=(J+1+(oe^1))%3;this.zeroEnable[V]&&Math.min(k[0][V],k[1][V])<=0&&Math.max(k[0][V],k[1][V])>=0&&this._lines.drawZero(U,V,this.bounds,le,this.zeroLineColor[V],this.zeroLineWidth[V]*this.pixelRatio)}}for(var J=0;J<3;++J){this.lineEnable[J]&&this._lines.drawAxisLine(J,this.bounds,X[J].primalOffset,this.lineColor[J],this.lineWidth[J]*this.pixelRatio),this.lineMirror[J]&&this._lines.drawAxisLine(J,this.bounds,X[J].mirrorOffset,this.lineColor[J],this.lineWidth[J]*this.pixelRatio);for(var re=s(m,X[J].primalMinor),ee=s(M,X[J].mirrorMinor),j=this.lineTickLength,oe=0;oe<3;++oe){var Q=q/f[5*oe];re[oe]*=j[oe]*Q,ee[oe]*=j[oe]*Q}this.lineTickEnable[J]&&this._lines.drawAxisTicks(J,X[J].primalOffset,re,this.lineTickColor[J],this.lineTickWidth[J]*this.pixelRatio),this.lineTickMirror[J]&&this._lines.drawAxisTicks(J,X[J].mirrorOffset,ee,this.lineTickColor[J],this.lineTickWidth[J]*this.pixelRatio)}this._lines.unbind(),this._text.bind(f,L,S,this.pixelRatio);var ne,ae=.5,ie,ue;function xe(Ne){ue=[0,0,0],ue[Ne]=1}function he(Ne,He,Ge){var _e=(Ne+1)%3,De=(Ne+2)%3,Ye=He[_e],qe=He[De],Ue=Ge[_e],Ie=Ge[De];if(Ye>0&&Ie>0){xe(_e);return}else if(Ye>0&&Ie<0){xe(_e);return}else if(Ye<0&&Ie>0){xe(_e);return}else if(Ye<0&&Ie<0){xe(_e);return}else if(qe>0&&Ue>0){xe(De);return}else if(qe>0&&Ue<0){xe(De);return}else if(qe<0&&Ue>0){xe(De);return}else if(qe<0&&Ue<0){xe(De);return}}for(var J=0;J<3;++J){for(var ge=X[J].primalMinor,me=X[J].mirrorMinor,ke=s(x,X[J].primalOffset),oe=0;oe<3;++oe)this.lineTickEnable[J]&&(ke[oe]+=q*ge[oe]*Math.max(this.lineTickLength[oe],0)/f[5*oe]);var Ae=[0,0,0];if(Ae[J]=1,this.tickEnable[J]){this.tickAngle[J]===-3600?(this.tickAngle[J]=0,this.tickAlign[J]="auto"):this.tickAlign[J]=-1,ie=1,ne=[this.tickAlign[J],ae,ie],ne[0]==="auto"?ne[0]=A:ne[0]=parseInt(""+ne[0]),ue=[0,0,0],he(J,ge,me);for(var oe=0;oe<3;++oe)ke[oe]+=q*ge[oe]*this.tickPad[oe]/f[5*oe];this._text.drawTicks(J,this.tickSize[J],this.tickAngle[J],ke,this.tickColor[J],Ae,ue,ne)}if(this.labelEnable[J]){ie=0,ue=[0,0,0],this.labels[J].length>4&&(xe(J),ie=1),ne=[this.labelAlign[J],ae,ie],ne[0]==="auto"?ne[0]=A:ne[0]=parseInt(""+ne[0]);for(var oe=0;oe<3;++oe)ke[oe]+=q*ge[oe]*this.labelPad[oe]/f[5*oe];ke[J]+=.5*(k[0][J]+k[1][J]),this._text.drawLabel(J,this.labelSize[J],this.labelAngle[J],ke,this.labelColor[J],[0,0,0],ue,ne)}}this._text.unbind()},v.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null};function T(_,f){var L=new i(_);return L.update(f),L}},{"./lib/background.js":71,"./lib/cube.js":72,"./lib/lines.js":73,"./lib/text.js":75,"./lib/ticks.js":76}],71:[function(l,b,w){b.exports=c;var e=l("gl-buffer"),o=l("gl-vao"),a=l("./shaders").bg;function r(s,i,v,u){this.gl=s,this.buffer=i,this.vao=v,this.shader=u}var n=r.prototype;n.draw=function(s,i,v,u,g,h){for(var y=!1,p=0;p<3;++p)y=y||g[p];if(!!y){var A=this.gl;A.enable(A.POLYGON_OFFSET_FILL),A.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:s,view:i,projection:v,bounds:u,enable:g,colors:h},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),A.disable(A.POLYGON_OFFSET_FILL)}},n.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function c(s){for(var i=[],v=[],u=0,g=0;g<3;++g)for(var h=(g+1)%3,y=(g+2)%3,p=[0,0,0],A=[0,0,0],m=-1;m<=1;m+=2){v.push(u,u+2,u+1,u+1,u+2,u+3),p[g]=m,A[g]=m;for(var M=-1;M<=1;M+=2){p[h]=M;for(var x=-1;x<=1;x+=2)p[y]=x,i.push(p[0],p[1],p[2],A[0],A[1],A[2]),u+=1}var T=h;h=y,y=T}var _=e(s,new Float32Array(i)),f=e(s,new Uint16Array(v),s.ELEMENT_ARRAY_BUFFER),L=o(s,[{buffer:_,type:s.FLOAT,size:3,offset:0,stride:24},{buffer:_,type:s.FLOAT,size:3,offset:12,stride:24}],f),S=a(s);return S.attributes.position.location=0,S.attributes.normal.location=1,new r(s,_,L,S)}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],72:[function(l,b,w){b.exports=m;var e=l("bit-twiddle"),o=l("gl-mat4/multiply"),a=l("split-polygon"),r=l("robust-orientation"),n=new Array(16),c=new Array(8),s=new Array(8),i=new Array(3),v=[0,0,0];(function(){for(var M=0;M<8;++M)c[M]=[1,1,1,1],s[M]=[1,1,1]})();function u(M,x,T){for(var _=0;_<4;++_){M[_]=T[12+_];for(var f=0;f<3;++f)M[_]+=x[f]*T[4*f+_]}}var g=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function h(M){for(var x=0;x<g.length;++x)if(M=a.positive(M,g[x]),M.length<3)return 0;for(var T=M[0],_=T[0]/T[3],f=T[1]/T[3],L=0,x=1;x+1<M.length;++x){var S=M[x],k=M[x+1],P=S[0]/S[3],z=S[1]/S[3],I=k[0]/k[3],R=k[1]/k[3],D=P-_,O=z-f,F=I-_,G=R-f;L+=Math.abs(D*G-O*F)}return L}var y=[1,1,1],p=[0,0,0],A={cubeEdges:y,axis:p};function m(M,x,T,_,f){o(n,x,M),o(n,T,n);for(var L=0,S=0;S<2;++S){i[2]=_[S][2];for(var k=0;k<2;++k){i[1]=_[k][1];for(var P=0;P<2;++P)i[0]=_[P][0],u(c[L],i,n),L+=1}}for(var z=-1,S=0;S<8;++S){for(var I=c[S][3],R=0;R<3;++R)s[S][R]=c[S][R]/I;f&&(s[S][2]*=-1),I<0&&(z<0||s[S][2]<s[z][2])&&(z=S)}if(z<0){z=0;for(var D=0;D<3;++D){for(var O=(D+2)%3,F=(D+1)%3,G=-1,W=-1,q=0;q<2;++q){var J=q<<D,X=J+(q<<O)+(1-q<<F),Z=J+(1-q<<O)+(q<<F);r(s[J],s[X],s[Z],v)<0||(q?G=1:W=1)}if(G<0||W<0){W>G&&(z|=1<<D);continue}for(var q=0;q<2;++q){var J=q<<D,X=J+(q<<O)+(1-q<<F),Z=J+(1-q<<O)+(q<<F),se=h([c[J],c[X],c[Z],c[J+(1<<O)+(1<<F)]]);q?G=se:W=se}if(W>G){z|=1<<D;continue}}}for(var le=7^z,oe=-1,S=0;S<8;++S)S===z||S===le||(oe<0||s[oe][1]>s[S][1])&&(oe=S);for(var U=-1,S=0;S<3;++S){var V=oe^1<<S;if(!(V===z||V===le)){U<0&&(U=V);var F=s[V];F[0]<s[U][0]&&(U=V)}}for(var re=-1,S=0;S<3;++S){var V=oe^1<<S;if(!(V===z||V===le||V===U)){re<0&&(re=V);var F=s[V];F[0]>s[re][0]&&(re=V)}}var ee=y;ee[0]=ee[1]=ee[2]=0,ee[e.log2(U^oe)]=oe&U,ee[e.log2(oe^re)]=oe&re;var j=re^7;j===z||j===le?(j=U^7,ee[e.log2(re^j)]=j&re):ee[e.log2(U^j)]=j&U;for(var Q=p,ne=z,D=0;D<3;++D)ne&1<<D?Q[D]=-1:Q[D]=1;return A}},{"bit-twiddle":32,"gl-mat4/multiply":100,"robust-orientation":284,"split-polygon":300}],73:[function(l,b,w){b.exports=y;var e=l("gl-buffer"),o=l("gl-vao"),a=l("./shaders").line,r=[0,0,0],n=[0,0,0],c=[0,0,0],s=[0,0,0],i=[1,1];function v(p){return p[0]=p[1]=p[2]=0,p}function u(p,A){return p[0]=A[0],p[1]=A[1],p[2]=A[2],p}function g(p,A,m,M,x,T,_,f){this.gl=p,this.vertBuffer=A,this.vao=m,this.shader=M,this.tickCount=x,this.tickOffset=T,this.gridCount=_,this.gridOffset=f}var h=g.prototype;h.bind=function(p,A,m){this.shader.bind(),this.shader.uniforms.model=p,this.shader.uniforms.view=A,this.shader.uniforms.projection=m,i[0]=this.gl.drawingBufferWidth,i[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=i,this.vao.bind()},h.unbind=function(){this.vao.unbind()},h.drawAxisLine=function(p,A,m,M,x){var T=v(n);this.shader.uniforms.majorAxis=n,T[p]=A[1][p]-A[0][p],this.shader.uniforms.minorAxis=T;var _=u(s,m);_[p]+=A[0][p],this.shader.uniforms.offset=_,this.shader.uniforms.lineWidth=x,this.shader.uniforms.color=M;var f=v(c);f[(p+2)%3]=1,this.shader.uniforms.screenAxis=f,this.vao.draw(this.gl.TRIANGLES,6);var f=v(c);f[(p+1)%3]=1,this.shader.uniforms.screenAxis=f,this.vao.draw(this.gl.TRIANGLES,6)},h.drawAxisTicks=function(p,A,m,M,x){if(!!this.tickCount[p]){var T=v(r);T[p]=1,this.shader.uniforms.majorAxis=T,this.shader.uniforms.offset=A,this.shader.uniforms.minorAxis=m,this.shader.uniforms.color=M,this.shader.uniforms.lineWidth=x;var _=v(c);_[p]=1,this.shader.uniforms.screenAxis=_,this.vao.draw(this.gl.TRIANGLES,this.tickCount[p],this.tickOffset[p])}},h.drawGrid=function(p,A,m,M,x,T){if(!!this.gridCount[p]){var _=v(n);_[A]=m[1][A]-m[0][A],this.shader.uniforms.minorAxis=_;var f=u(s,M);f[A]+=m[0][A],this.shader.uniforms.offset=f;var L=v(r);L[p]=1,this.shader.uniforms.majorAxis=L;var S=v(c);S[p]=1,this.shader.uniforms.screenAxis=S,this.shader.uniforms.lineWidth=T,this.shader.uniforms.color=x,this.vao.draw(this.gl.TRIANGLES,this.gridCount[p],this.gridOffset[p])}},h.drawZero=function(p,A,m,M,x,T){var _=v(n);this.shader.uniforms.majorAxis=_,_[p]=m[1][p]-m[0][p],this.shader.uniforms.minorAxis=_;var f=u(s,M);f[p]+=m[0][p],this.shader.uniforms.offset=f;var L=v(c);L[A]=1,this.shader.uniforms.screenAxis=L,this.shader.uniforms.lineWidth=T,this.shader.uniforms.color=x,this.vao.draw(this.gl.TRIANGLES,6)},h.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()};function y(p,A,m){var M=[],x=[0,0,0],T=[0,0,0],_=[0,0,0],f=[0,0,0];M.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var L=0;L<3;++L){for(var P=M.length/3|0,S=0;S<m[L].length;++S){var k=+m[L][S].x;M.push(k,0,1,k,1,1,k,0,-1,k,0,-1,k,1,1,k,1,-1)}var I=M.length/3|0;x[L]=P,T[L]=I-P;for(var P=M.length/3|0,z=0;z<m[L].length;++z){var k=+m[L][z].x;M.push(k,0,1,k,1,1,k,0,-1,k,0,-1,k,1,1,k,1,-1)}var I=M.length/3|0;_[L]=P,f[L]=I-P}var R=e(p,new Float32Array(M)),D=o(p,[{buffer:R,type:p.FLOAT,size:3,stride:0,offset:0}]),O=a(p);return O.attributes.position.location=0,new g(p,R,D,O,T,x,f,_)}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],74:[function(l,b,w){var e=l("glslify"),o=l("gl-shader"),a=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),r=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);w.line=function(v){return o(v,a,r,null,[{name:"position",type:"vec3"}])};var n=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),c=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);w.text=function(v){return o(v,n,c,null,[{name:"position",type:"vec3"}])};var s=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),i=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);w.bg=function(v){return o(v,s,i,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":132,glslify:231}],75:[function(l,b,w){(function(e){(function(){b.exports=y;var o=l("gl-buffer"),a=l("gl-vao"),r=l("vectorize-text"),n=l("./shaders").text,c=window||e.global||{},s=c.__TEXT_CACHE||{};c.__TEXT_CACHE={};var i=3;function v(p,A,m,M){this.gl=p,this.shader=A,this.buffer=m,this.vao=M,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var u=v.prototype,g=[0,0];u.bind=function(p,A,m,M){this.vao.bind(),this.shader.bind();var x=this.shader.uniforms;x.model=p,x.view=A,x.projection=m,x.pixelScale=M,g[0]=this.gl.drawingBufferWidth,g[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=g},u.unbind=function(){this.vao.unbind()},u.update=function(p,A,m,M,x){var T=[];function _(D,O,F,G,W,q){var J=s[F];J||(J=s[F]={});var X=J[O];X||(X=J[O]=h(O,{triangles:!0,font:F,textAlign:"center",textBaseline:"middle",lineSpacing:W,styletags:q}));for(var Z=(G||12)/12,se=X.positions,le=X.cells,oe=0,U=le.length;oe<U;++oe)for(var V=le[oe],re=2;re>=0;--re){var ee=se[V[re]];T.push(Z*ee[0],-Z*ee[1],D)}}for(var f=[0,0,0],L=[0,0,0],S=[0,0,0],k=[0,0,0],P=1.25,z={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},I=0;I<3;++I){S[I]=T.length/i|0,_(.5*(p[0][I]+p[1][I]),A[I],m[I],12,P,z),k[I]=(T.length/i|0)-S[I],f[I]=T.length/i|0;for(var R=0;R<M[I].length;++R)!M[I][R].text||_(M[I][R].x,M[I][R].text,M[I][R].font||x,M[I][R].fontSize||12,P,z);L[I]=(T.length/i|0)-f[I]}this.buffer.update(T),this.tickOffset=f,this.tickCount=L,this.labelOffset=S,this.labelCount=k},u.drawTicks=function(p,A,m,M,x,T,_,f){!this.tickCount[p]||(this.shader.uniforms.axis=T,this.shader.uniforms.color=x,this.shader.uniforms.angle=m,this.shader.uniforms.scale=A,this.shader.uniforms.offset=M,this.shader.uniforms.alignDir=_,this.shader.uniforms.alignOpt=f,this.vao.draw(this.gl.TRIANGLES,this.tickCount[p],this.tickOffset[p]))},u.drawLabel=function(p,A,m,M,x,T,_,f){!this.labelCount[p]||(this.shader.uniforms.axis=T,this.shader.uniforms.color=x,this.shader.uniforms.angle=m,this.shader.uniforms.scale=A,this.shader.uniforms.offset=M,this.shader.uniforms.alignDir=_,this.shader.uniforms.alignOpt=f,this.vao.draw(this.gl.TRIANGLES,this.labelCount[p],this.labelOffset[p]))},u.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()};function h(p,A){try{return r(p,A)}catch(m){return console.warn('error vectorizing text:"'+p+'" error:',m),{cells:[],positions:[]}}}function y(p,A,m,M,x,T){var _=o(p),f=a(p,[{buffer:_,size:3}]),L=n(p);L.attributes.position.location=0;var S=new v(p,L,_,f);return S.update(A,m,M,x,T),S}}).call(this)}).call(this,l("_process"))},{"./shaders":74,_process:5,"gl-buffer":78,"gl-vao":150,"vectorize-text":311}],76:[function(l,b,w){w.create=o,w.equal=a;function e(r,n){var c=r+"",s=c.indexOf("."),i=0;s>=0&&(i=c.length-s-1);var v=Math.pow(10,i),u=Math.round(r*n*v),g=u+"";if(g.indexOf("e")>=0)return g;var h=u/v,y=u%v;u<0?(h=-Math.ceil(h)|0,y=-y|0):(h=Math.floor(h)|0,y=y|0);var p=""+h;if(u<0&&(p="-"+p),i){for(var A=""+y;A.length<i;)A="0"+A;return p+"."+A}else return p}function o(r,n){for(var c=[],s=0;s<3;++s){var i=[];.5*(r[0][s]+r[1][s]);for(var v=0;v*n[s]<=r[1][s];++v)i.push({x:v*n[s],text:e(n[s],v)});for(var v=-1;v*n[s]>=r[0][s];--v)i.push({x:v*n[s],text:e(n[s],v)});c.push(i)}return c}function a(r,n){for(var c=0;c<3;++c){if(r[c].length!==n[c].length)return!1;for(var s=0;s<r[c].length;++s){var i=r[c][s],v=n[c][s];if(i.x!==v.x||i.text!==v.text||i.font!==v.font||i.fontColor!==v.fontColor||i.fontSize!==v.fontSize||i.dx!==v.dx||i.dy!==v.dy)return!1}}return!0}},{}],77:[function(l,b,w){b.exports=A;var e=l("extract-frustum-planes"),o=l("split-polygon"),a=l("./lib/cube.js"),r=l("gl-mat4/multiply"),n=l("gl-mat4/transpose"),c=l("gl-vec4/transformMat4"),s=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),i=new Float32Array(16);function v(m,M,x){this.lo=m,this.hi=M,this.pixelsPerDataUnit=x}var u=[0,0,0,1],g=[0,0,0,1];function h(m,M,x,T,_){for(var f=0;f<3;++f){for(var L=u,S=g,k=0;k<3;++k)S[k]=L[k]=x[k];S[3]=L[3]=1,S[f]+=1,c(S,S,M),S[3]<0&&(m[f]=1/0),L[f]-=1,c(L,L,M),L[3]<0&&(m[f]=1/0);var P=(L[0]/L[3]-S[0]/S[3])*T,z=(L[1]/L[3]-S[1]/S[3])*_;m[f]=.25*Math.sqrt(P*P+z*z)}return m}var y=[new v(1/0,-1/0,1/0),new v(1/0,-1/0,1/0),new v(1/0,-1/0,1/0)],p=[0,0,0];function A(m,M,x,T,z){var f=M.model||s,L=M.view||s,S=M.projection||s,k=M._ortho||!1,P=m.bounds,z=z||a(f,L,S,P,k),I=z.axis;r(i,L,f),r(i,S,i);for(var R=y,D=0;D<3;++D)R[D].lo=1/0,R[D].hi=-1/0,R[D].pixelsPerDataUnit=1/0;var O=e(n(i,i));n(i,i);for(var F=0;F<3;++F){var G=(F+1)%3,W=(F+2)%3,q=p;e:for(var D=0;D<2;++D){var J=[];if(I[F]<0!=!!D){q[F]=P[D][F];for(var X=0;X<2;++X){q[G]=P[X^D][G];for(var Z=0;Z<2;++Z)q[W]=P[Z^X^D][W],J.push(q.slice())}for(var se=k?5:4,X=se;X===se;++X){if(J.length===0)continue e;J=o.positive(J,O[X])}for(var X=0;X<J.length;++X)for(var W=J[X],le=h(p,i,W,x,T),Z=0;Z<3;++Z)R[Z].lo=Math.min(R[Z].lo,W[Z]),R[Z].hi=Math.max(R[Z].hi,W[Z]),Z!==F&&(R[Z].pixelsPerDataUnit=Math.min(R[Z].pixelsPerDataUnit,Math.abs(le[Z])))}}}return R}},{"./lib/cube.js":72,"extract-frustum-planes":67,"gl-mat4/multiply":100,"gl-mat4/transpose":109,"gl-vec4/transformMat4":221,"split-polygon":300}],78:[function(l,b,w){var e=l("typedarray-pool"),o=l("ndarray-ops"),a=l("ndarray"),r=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function n(g,h,y,p,A){this.gl=g,this.type=h,this.handle=y,this.length=p,this.usage=A}var c=n.prototype;c.bind=function(){this.gl.bindBuffer(this.type,this.handle)},c.unbind=function(){this.gl.bindBuffer(this.type,null)},c.dispose=function(){this.gl.deleteBuffer(this.handle)};function s(g,h,y,p,A,m){var M=A.length*A.BYTES_PER_ELEMENT;if(m<0)return g.bufferData(h,A,p),M;if(M+m>y)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return g.bufferSubData(h,m,A),y}function i(g,h){for(var y=e.malloc(g.length,h),p=g.length,A=0;A<p;++A)y[A]=g[A];return y}function v(g,h){for(var y=1,p=h.length-1;p>=0;--p){if(h[p]!==y)return!1;y*=g[p]}return!0}c.update=function(g,h){if(typeof h!="number"&&(h=-1),this.bind(),typeof g=="object"&&typeof g.shape!="undefined"){var y=g.dtype;if(r.indexOf(y)<0&&(y="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var p=gl.getExtension("OES_element_index_uint");p&&y!=="uint16"?y="uint32":y="uint16"}if(y===g.dtype&&v(g.shape,g.stride))g.offset===0&&g.data.length===g.shape[0]?this.length=s(this.gl,this.type,this.length,this.usage,g.data,h):this.length=s(this.gl,this.type,this.length,this.usage,g.data.subarray(g.offset,g.shape[0]),h);else{var A=e.malloc(g.size,y),m=a(A,g.shape);o.assign(m,g),h<0?this.length=s(this.gl,this.type,this.length,this.usage,A,h):this.length=s(this.gl,this.type,this.length,this.usage,A.subarray(0,g.size),h),e.free(A)}}else if(Array.isArray(g)){var M;this.type===this.gl.ELEMENT_ARRAY_BUFFER?M=i(g,"uint16"):M=i(g,"float32"),h<0?this.length=s(this.gl,this.type,this.length,this.usage,M,h):this.length=s(this.gl,this.type,this.length,this.usage,M.subarray(0,g.length),h),e.free(M)}else if(typeof g=="object"&&typeof g.length=="number")this.length=s(this.gl,this.type,this.length,this.usage,g,h);else if(typeof g=="number"||g===void 0){if(h>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");g=g|0,g<=0&&(g=1),this.gl.bufferData(this.type,g|0,this.usage),this.length=g}else throw new Error("gl-buffer: Invalid data type")};function u(g,h,y,p){if(y=y||g.ARRAY_BUFFER,p=p||g.DYNAMIC_DRAW,y!==g.ARRAY_BUFFER&&y!==g.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(p!==g.DYNAMIC_DRAW&&p!==g.STATIC_DRAW&&p!==g.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var A=g.createBuffer(),m=new n(g,y,A,0,p);return m.update(h),m}b.exports=u},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],79:[function(l,b,w){var e=l("gl-vec3");b.exports=function(a,r){var n=a.positions,c=a.vectors,s={positions:[],vertexIntensity:[],vertexIntensityBounds:a.vertexIntensityBounds,vectors:[],cells:[],coneOffset:a.coneOffset,colormap:a.colormap};if(a.positions.length===0)return r&&(r[0]=[0,0,0],r[1]=[0,0,0]),s;for(var i=0,v=1/0,u=-1/0,g=1/0,h=-1/0,y=1/0,p=-1/0,A=null,m=null,M=[],x=1/0,T=!1,_=0;_<n.length;_++){var f=n[_];v=Math.min(f[0],v),u=Math.max(f[0],u),g=Math.min(f[1],g),h=Math.max(f[1],h),y=Math.min(f[2],y),p=Math.max(f[2],p);var L=c[_];if(e.length(L)>i&&(i=e.length(L)),_){var S=2*e.distance(A,f)/(e.length(m)+e.length(L));S?(x=Math.min(x,S),T=!1):T=!0}T||(A=f,m=L),M.push(L)}var k=[v,g,y],P=[u,h,p];r&&(r[0]=k,r[1]=P),i===0&&(i=1);var z=1/i;isFinite(x)||(x=1),s.vectorScale=x;var I=a.coneSize||.5;a.absoluteConeSize&&(I=a.absoluteConeSize*z),s.coneScale=I;for(var _=0,R=0;_<n.length;_++)for(var f=n[_],D=f[0],O=f[1],F=f[2],G=M[_],W=e.length(G)*z,q=0,J=8;q<J;q++){s.positions.push([D,O,F,R++]),s.positions.push([D,O,F,R++]),s.positions.push([D,O,F,R++]),s.positions.push([D,O,F,R++]),s.positions.push([D,O,F,R++]),s.positions.push([D,O,F,R++]),s.vectors.push(G),s.vectors.push(G),s.vectors.push(G),s.vectors.push(G),s.vectors.push(G),s.vectors.push(G),s.vertexIntensity.push(W,W,W),s.vertexIntensity.push(W,W,W);var X=s.positions.length;s.cells.push([X-6,X-5,X-4],[X-3,X-2,X-1])}return s};var o=l("./lib/shaders");b.exports.createMesh=l("./create_mesh"),b.exports.createConeMesh=function(a,r){return b.exports.createMesh(a,r,{shaders:o,traceType:"cone"})}},{"./create_mesh":80,"./lib/shaders":81,"gl-vec3":169}],80:[function(l,b,w){var e=l("gl-shader"),o=l("gl-buffer"),a=l("gl-vao"),r=l("gl-texture2d"),n=l("gl-mat4/multiply"),c=l("gl-mat4/invert"),s=l("ndarray"),i=l("colormap"),v=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function u(M,x,T,_,f,L,S,k,P,z,I){this.gl=M,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=x,this.dirty=!0,this.triShader=T,this.pickShader=_,this.trianglePositions=f,this.triangleVectors=L,this.triangleColors=k,this.triangleUVs=P,this.triangleIds=S,this.triangleVAO=z,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=I,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=v,this._view=v,this._projection=v,this._resolution=[1,1]}var g=u.prototype;g.isOpaque=function(){return this.opacity>=1},g.isTransparent=function(){return this.opacity<1},g.pickSlots=1,g.setPickBase=function(M){this.pickId=M};function h(M){for(var x=i({colormap:M,nshades:256,format:"rgba"}),T=new Uint8Array(256*4),_=0;_<256;++_){for(var f=x[_],L=0;L<3;++L)T[4*_+L]=f[L];T[4*_+3]=f[3]*255}return s(T,[256,256,4],[4,0,1])}function y(M){for(var x=M.length,T=new Array(x),_=0;_<x;++_)T[_]=M[_][2];return T}g.update=function(M){M=M||{};var x=this.gl;this.dirty=!0,"lightPosition"in M&&(this.lightPosition=M.lightPosition),"opacity"in M&&(this.opacity=M.opacity),"ambient"in M&&(this.ambientLight=M.ambient),"diffuse"in M&&(this.diffuseLight=M.diffuse),"specular"in M&&(this.specularLight=M.specular),"roughness"in M&&(this.roughness=M.roughness),"fresnel"in M&&(this.fresnel=M.fresnel),M.tubeScale!==void 0&&(this.tubeScale=M.tubeScale),M.vectorScale!==void 0&&(this.vectorScale=M.vectorScale),M.coneScale!==void 0&&(this.coneScale=M.coneScale),M.coneOffset!==void 0&&(this.coneOffset=M.coneOffset),M.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=x.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=x.LINEAR,this.texture.setPixels(h(M.colormap)),this.texture.generateMipmap());var T=M.cells,_=M.positions,f=M.vectors;if(!_||!T||!f)return;var L=[],S=[],k=[],P=[],z=[];this.cells=T,this.positions=_,this.vectors=f;var I=M.meshColor||[1,1,1,1],R=M.vertexIntensity,D=1/0,O=-1/0;if(R)if(M.vertexIntensityBounds)D=+M.vertexIntensityBounds[0],O=+M.vertexIntensityBounds[1];else for(var F=0;F<R.length;++F){var G=R[F];D=Math.min(D,G),O=Math.max(O,G)}else for(var F=0;F<_.length;++F){var G=_[F][2];D=Math.min(D,G),O=Math.max(O,G)}R?this.intensity=R:this.intensity=y(_),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var F=0;F<_.length;++F)for(var W=_[F],q=0;q<3;++q)isNaN(W[q])||!isFinite(W[q])||(this.bounds[0][q]=Math.min(this.bounds[0][q],W[q]),this.bounds[1][q]=Math.max(this.bounds[1][q],W[q]));var J=0;e:for(var F=0;F<T.length;++F){var X=T[F];switch(X.length){case 3:for(var q=0;q<3;++q)for(var Z=X[q],W=_[Z],se=0;se<3;++se)if(isNaN(W[se])||!isFinite(W[se]))continue e;for(var q=0;q<3;++q){var Z=X[2-q],W=_[Z];L.push(W[0],W[1],W[2],W[3]);var le=f[Z];S.push(le[0],le[1],le[2],le[3]||0);var oe=I;oe.length===3?k.push(oe[0],oe[1],oe[2],1):k.push(oe[0],oe[1],oe[2],oe[3]);var U;R?U=[(R[Z]-D)/(O-D),0]:U=[(W[2]-D)/(O-D),0],P.push(U[0],U[1]),z.push(F)}J+=1;break}}this.triangleCount=J,this.trianglePositions.update(L),this.triangleVectors.update(S),this.triangleColors.update(k),this.triangleUVs.update(P),this.triangleIds.update(new Uint32Array(z))},g.drawTransparent=g.draw=function(M){M=M||{};for(var x=this.gl,T=M.model||v,_=M.view||v,f=M.projection||v,L=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],S=0;S<3;++S)L[0][S]=Math.max(L[0][S],this.clipBounds[0][S]),L[1][S]=Math.min(L[1][S],this.clipBounds[1][S]);var k={model:T,view:_,projection:f,inverseModel:v.slice(),clipBounds:L,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};k.inverseModel=c(k.inverseModel,k.model),x.disable(x.CULL_FACE),this.texture.bind(0);var P=new Array(16);n(P,k.view,k.model),n(P,k.projection,P),c(P,P);for(var S=0;S<3;++S)k.eyePosition[S]=P[12+S]/P[15];for(var z=P[15],S=0;S<3;++S)z+=this.lightPosition[S]*P[4*S+3];for(var S=0;S<3;++S){for(var I=P[12+S],R=0;R<3;++R)I+=P[4*R+S]*this.lightPosition[R];k.lightPosition[S]=I/z}if(this.triangleCount>0){var D=this.triShader;D.bind(),D.uniforms=k,this.triangleVAO.bind(),x.drawArrays(x.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}},g.drawPick=function(M){M=M||{};for(var x=this.gl,T=M.model||v,_=M.view||v,f=M.projection||v,L=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],S=0;S<3;++S)L[0][S]=Math.max(L[0][S],this.clipBounds[0][S]),L[1][S]=Math.min(L[1][S],this.clipBounds[1][S]);this._model=[].slice.call(T),this._view=[].slice.call(_),this._projection=[].slice.call(f),this._resolution=[x.drawingBufferWidth,x.drawingBufferHeight];var k={model:T,view:_,projection:f,clipBounds:L,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},P=this.pickShader;P.bind(),P.uniforms=k,this.triangleCount>0&&(this.triangleVAO.bind(),x.drawArrays(x.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind())},g.pick=function(M){if(!M||M.id!==this.pickId)return null;var x=M.value[0]+256*M.value[1]+65536*M.value[2],T=this.cells[x],_=this.positions[T[1]].slice(0,3),f={position:_,dataCoordinate:_,index:Math.floor(T[1]/48)};return this.traceType==="cone"?f.index=Math.floor(T[1]/48):this.traceType==="streamtube"&&(f.intensity=this.intensity[T[1]],f.velocity=this.vectors[T[1]].slice(0,3),f.divergence=this.vectors[T[1]][3],f.index=x),f},g.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()};function p(M,x){var T=e(M,x.meshShader.vertex,x.meshShader.fragment,null,x.meshShader.attributes);return T.attributes.position.location=0,T.attributes.color.location=2,T.attributes.uv.location=3,T.attributes.vector.location=4,T}function A(M,x){var T=e(M,x.pickShader.vertex,x.pickShader.fragment,null,x.pickShader.attributes);return T.attributes.position.location=0,T.attributes.id.location=1,T.attributes.vector.location=4,T}function m(M,x,T){var _=T.shaders;arguments.length===1&&(x=M,M=x.gl);var f=p(M,_),L=A(M,_),S=r(M,s(new Uint8Array([255,255,255,255]),[1,1,4]));S.generateMipmap(),S.minFilter=M.LINEAR_MIPMAP_LINEAR,S.magFilter=M.LINEAR;var k=o(M),P=o(M),z=o(M),I=o(M),R=o(M),D=a(M,[{buffer:k,type:M.FLOAT,size:4},{buffer:R,type:M.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:z,type:M.FLOAT,size:4},{buffer:I,type:M.FLOAT,size:2},{buffer:P,type:M.FLOAT,size:4}]),O=new u(M,S,f,L,k,P,R,z,I,D,T.traceType||"cone");return O.update(x),O}b.exports=m},{colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259}],81:[function(l,b,w){var e=l("glslify"),o=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),a=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),r=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),n=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);w.meshShader={vertex:o,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},w.pickShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:231}],82:[function(l,b,w){b.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],83:[function(l,b,w){var e=l("./1.0/numbers");b.exports=function(a){return e[a]}},{"./1.0/numbers":82}],84:[function(l,b,w){b.exports=u;var e=l("gl-buffer"),o=l("gl-vao"),a=l("./shaders/index"),r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function n(g,h,y,p){this.gl=g,this.shader=p,this.buffer=h,this.vao=y,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var c=n.prototype;c.isOpaque=function(){return!this.hasAlpha},c.isTransparent=function(){return this.hasAlpha},c.drawTransparent=c.draw=function(g){var h=this.gl,y=this.shader.uniforms;this.shader.bind();var p=y.view=g.view||r,A=y.projection=g.projection||r;y.model=g.model||r,y.clipBounds=this.clipBounds,y.opacity=this.opacity;var m=p[12],M=p[13],x=p[14],T=p[15],_=g._ortho||!1,f=_?2:1,L=f*this.pixelRatio*(A[3]*m+A[7]*M+A[11]*x+A[15]*T)/h.drawingBufferHeight;this.vao.bind();for(var S=0;S<3;++S)h.lineWidth(this.lineWidth[S]*this.pixelRatio),y.capSize=this.capSize[S]*L,this.lineCount[S]&&h.drawArrays(h.LINES,this.lineOffset[S],this.lineCount[S]);this.vao.unbind()};function s(g,h){for(var y=0;y<3;++y)g[0][y]=Math.min(g[0][y],h[y]),g[1][y]=Math.max(g[1][y],h[y])}var i=function(){for(var g=new Array(3),h=0;h<3;++h){for(var y=[],p=1;p<=2;++p)for(var A=-1;A<=1;A+=2){var m=(p+h)%3,M=[0,0,0];M[m]=A,y.push(M)}g[h]=y}return g}();function v(g,h,y,p){for(var A=i[p],m=0;m<A.length;++m){var M=A[m];g.push(h[0],h[1],h[2],y[0],y[1],y[2],y[3],M[0],M[1],M[2])}return A.length}c.update=function(g){g=g||{},"lineWidth"in g&&(this.lineWidth=g.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in g&&(this.capSize=g.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in g&&(this.opacity=+g.opacity,this.opacity<1&&(this.hasAlpha=!0));var h=g.color||[[0,0,0],[0,0,0],[0,0,0]],y=g.position,p=g.error;if(Array.isArray(h[0])||(h=[h,h,h]),y&&p){var A=[],m=y.length,M=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var x=0;x<3;++x){this.lineOffset[x]=M;e:for(var T=0;T<m;++T){for(var _=y[T],f=0;f<3;++f)if(isNaN(_[f])||!isFinite(_[f]))continue e;var L=p[T],S=h[x];if(Array.isArray(S[0])&&(S=h[T]),S.length===3?S=[S[0],S[1],S[2],1]:S.length===4&&(S=[S[0],S[1],S[2],S[3]],!this.hasAlpha&&S[3]<1&&(this.hasAlpha=!0)),!(isNaN(L[0][x])||isNaN(L[1][x]))){if(L[0][x]<0){var k=_.slice();k[x]+=L[0][x],A.push(_[0],_[1],_[2],S[0],S[1],S[2],S[3],0,0,0,k[0],k[1],k[2],S[0],S[1],S[2],S[3],0,0,0),s(this.bounds,k),M+=2+v(A,k,S,x)}if(L[1][x]>0){var k=_.slice();k[x]+=L[1][x],A.push(_[0],_[1],_[2],S[0],S[1],S[2],S[3],0,0,0,k[0],k[1],k[2],S[0],S[1],S[2],S[3],0,0,0),s(this.bounds,k),M+=2+v(A,k,S,x)}}}this.lineCount[x]=M-this.lineOffset[x]}this.buffer.update(A)}},c.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()};function u(g){var h=g.gl,y=e(h),p=o(h,[{buffer:y,type:h.FLOAT,size:3,offset:0,stride:40},{buffer:y,type:h.FLOAT,size:4,offset:12,stride:40},{buffer:y,type:h.FLOAT,size:3,offset:28,stride:40}]),A=a(h);A.attributes.position.location=0,A.attributes.color.location=1,A.attributes.offset.location=2;var m=new n(h,y,p,A);return m.update(g),m}},{"./shaders/index":85,"gl-buffer":78,"gl-vao":150}],85:[function(l,b,w){var e=l("glslify"),o=l("gl-shader"),a=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),r=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);b.exports=function(n){return o(n,a,r,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":132,glslify:231}],86:[function(l,b,w){var e=l("gl-texture2d");b.exports=M;var o=null,a,r,n,c;function s(x){var T=x.getParameter(x.FRAMEBUFFER_BINDING),_=x.getParameter(x.RENDERBUFFER_BINDING),f=x.getParameter(x.TEXTURE_BINDING_2D);return[T,_,f]}function i(x,T){x.bindFramebuffer(x.FRAMEBUFFER,T[0]),x.bindRenderbuffer(x.RENDERBUFFER,T[1]),x.bindTexture(x.TEXTURE_2D,T[2])}function v(x,T){var _=x.getParameter(T.MAX_COLOR_ATTACHMENTS_WEBGL);o=new Array(_+1);for(var f=0;f<=_;++f){for(var L=new Array(_),S=0;S<f;++S)L[S]=x.COLOR_ATTACHMENT0+S;for(var S=f;S<_;++S)L[S]=x.NONE;o[f]=L}}function u(x){switch(x){case a:throw new Error("gl-fbo: Framebuffer unsupported");case r:throw new Error("gl-fbo: Framebuffer incomplete attachment");case n:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case c:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function g(x,T,_,f,L,S){if(!f)return null;var k=e(x,T,_,L,f);return k.magFilter=x.NEAREST,k.minFilter=x.NEAREST,k.mipSamples=1,k.bind(),x.framebufferTexture2D(x.FRAMEBUFFER,S,x.TEXTURE_2D,k.handle,0),k}function h(x,T,_,f,L){var S=x.createRenderbuffer();return x.bindRenderbuffer(x.RENDERBUFFER,S),x.renderbufferStorage(x.RENDERBUFFER,f,T,_),x.framebufferRenderbuffer(x.FRAMEBUFFER,L,x.RENDERBUFFER,S),S}function y(x){var T=s(x.gl),_=x.gl,f=x.handle=_.createFramebuffer(),L=x._shape[0],S=x._shape[1],k=x.color.length,P=x._ext,z=x._useStencil,I=x._useDepth,R=x._colorType;_.bindFramebuffer(_.FRAMEBUFFER,f);for(var D=0;D<k;++D)x.color[D]=g(_,L,S,R,_.RGBA,_.COLOR_ATTACHMENT0+D);k===0?(x._color_rb=h(_,L,S,_.RGBA4,_.COLOR_ATTACHMENT0),P&&P.drawBuffersWEBGL(o[0])):k>1&&P.drawBuffersWEBGL(o[k]);var O=_.getExtension("WEBGL_depth_texture");O?z?x.depth=g(_,L,S,O.UNSIGNED_INT_24_8_WEBGL,_.DEPTH_STENCIL,_.DEPTH_STENCIL_ATTACHMENT):I&&(x.depth=g(_,L,S,_.UNSIGNED_SHORT,_.DEPTH_COMPONENT,_.DEPTH_ATTACHMENT)):I&&z?x._depth_rb=h(_,L,S,_.DEPTH_STENCIL,_.DEPTH_STENCIL_ATTACHMENT):I?x._depth_rb=h(_,L,S,_.DEPTH_COMPONENT16,_.DEPTH_ATTACHMENT):z&&(x._depth_rb=h(_,L,S,_.STENCIL_INDEX,_.STENCIL_ATTACHMENT));var F=_.checkFramebufferStatus(_.FRAMEBUFFER);if(F!==_.FRAMEBUFFER_COMPLETE){x._destroyed=!0,_.bindFramebuffer(_.FRAMEBUFFER,null),_.deleteFramebuffer(x.handle),x.handle=null,x.depth&&(x.depth.dispose(),x.depth=null),x._depth_rb&&(_.deleteRenderbuffer(x._depth_rb),x._depth_rb=null);for(var D=0;D<x.color.length;++D)x.color[D].dispose(),x.color[D]=null;x._color_rb&&(_.deleteRenderbuffer(x._color_rb),x._color_rb=null),i(_,T),u(F)}i(_,T)}function p(x,T,_,f,L,S,k,P){this.gl=x,this._shape=[T|0,_|0],this._destroyed=!1,this._ext=P,this.color=new Array(L);for(var z=0;z<L;++z)this.color[z]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=f,this._useDepth=S,this._useStencil=k;var I=this,R=[T|0,_|0];Object.defineProperties(R,{0:{get:function(){return I._shape[0]},set:function(D){return I.width=D}},1:{get:function(){return I._shape[1]},set:function(D){return I.height=D}}}),this._shapeVector=R,y(this)}var A=p.prototype;function m(x,T,_){if(x._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(!(x._shape[0]===T&&x._shape[1]===_)){var f=x.gl,L=f.getParameter(f.MAX_RENDERBUFFER_SIZE);if(T<0||T>L||_<0||_>L)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");x._shape[0]=T,x._shape[1]=_;for(var S=s(f),k=0;k<x.color.length;++k)x.color[k].shape=x._shape;x._color_rb&&(f.bindRenderbuffer(f.RENDERBUFFER,x._color_rb),f.renderbufferStorage(f.RENDERBUFFER,f.RGBA4,x._shape[0],x._shape[1])),x.depth&&(x.depth.shape=x._shape),x._depth_rb&&(f.bindRenderbuffer(f.RENDERBUFFER,x._depth_rb),x._useDepth&&x._useStencil?f.renderbufferStorage(f.RENDERBUFFER,f.DEPTH_STENCIL,x._shape[0],x._shape[1]):x._useDepth?f.renderbufferStorage(f.RENDERBUFFER,f.DEPTH_COMPONENT16,x._shape[0],x._shape[1]):x._useStencil&&f.renderbufferStorage(f.RENDERBUFFER,f.STENCIL_INDEX,x._shape[0],x._shape[1])),f.bindFramebuffer(f.FRAMEBUFFER,x.handle);var P=f.checkFramebufferStatus(f.FRAMEBUFFER);P!==f.FRAMEBUFFER_COMPLETE&&(x.dispose(),i(f,S),u(P)),i(f,S)}}Object.defineProperties(A,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(x){if(Array.isArray(x)||(x=[x|0,x|0]),x.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var T=x[0]|0,_=x[1]|0;return m(this,T,_),[T,_]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(x){return x=x|0,m(this,x,this._shape[1]),x},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(x){return x=x|0,m(this,this._shape[0],x),x},enumerable:!1}}),A.bind=function(){if(!this._destroyed){var x=this.gl;x.bindFramebuffer(x.FRAMEBUFFER,this.handle),x.viewport(0,0,this._shape[0],this._shape[1])}},A.dispose=function(){if(!this._destroyed){this._destroyed=!0;var x=this.gl;x.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(x.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var T=0;T<this.color.length;++T)this.color[T].dispose(),this.color[T]=null;this._color_rb&&(x.deleteRenderbuffer(this._color_rb),this._color_rb=null)}};function M(x,T,_,f){a||(a=x.FRAMEBUFFER_UNSUPPORTED,r=x.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,n=x.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,c=x.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var L=x.getExtension("WEBGL_draw_buffers");if(!o&&L&&v(x,L),Array.isArray(T)&&(f=_,_=T[1]|0,T=T[0]|0),typeof T!="number")throw new Error("gl-fbo: Missing shape parameter");var S=x.getParameter(x.MAX_RENDERBUFFER_SIZE);if(T<0||T>S||_<0||_>S)throw new Error("gl-fbo: Parameters are too large for FBO");f=f||{};var k=1;if("color"in f){if(k=Math.max(f.color|0,0),k<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(k>1)if(L){if(k>x.getParameter(L.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+k+" draw buffers")}else throw new Error("gl-fbo: Multiple draw buffer extension not supported")}var P=x.UNSIGNED_BYTE,z=x.getExtension("OES_texture_float");if(f.float&&k>0){if(!z)throw new Error("gl-fbo: Context does not support floating point textures");P=x.FLOAT}else f.preferFloat&&k>0&&z&&(P=x.FLOAT);var I=!0;"depth"in f&&(I=!!f.depth);var R=!1;return"stencil"in f&&(R=!!f.stencil),new p(x,T,_,P,k,I,R,L)}},{"gl-texture2d":146}],87:[function(l,b,w){var e=l("sprintf-js").sprintf,o=l("gl-constants/lookup"),a=l("glsl-shader-name"),r=l("add-line-numbers");b.exports=n;function n(c,s,i){var v=a(s)||"of unknown name (see npm glsl-shader-name)",u="unknown type";i!==void 0&&(u=i===o.FRAGMENT_SHADER?"fragment":"vertex");for(var g=e(`Error compiling %s shader %s:
`,u,v),h=e("%s%s",g,c),y=c.split(`
`),p={},A=0;A<y.length;A++){var m=y[A];if(!(m===""||m==="\0")){var M=parseInt(m.split(":")[2]);if(isNaN(M))throw new Error(e("Could not parse error: %s",m));p[M]=m}}for(var x=r(s).split(`
`),A=0;A<x.length;A++)if(!(!p[A+3]&&!p[A+2]&&!p[A+1])){var T=x[A];if(g+=T+`
`,p[A+1]){var _=p[A+1];_=_.substr(_.split(":",3).join(":").length+1).trim(),g+=e(`^^^ %s

`,_)}}return{long:g.trim(),short:h.trim()}}},{"add-line-numbers":9,"gl-constants/lookup":83,"glsl-shader-name":223,"sprintf-js":301}],88:[function(l,b,w){b.exports=u;var e=l("binary-search-bounds"),o=l("iota-array"),a=l("typedarray-pool"),r=l("gl-shader"),n=l("gl-buffer"),c=l("./lib/shaders");function s(g,h,y,p,A,m,M){this.plot=g,this.shader=h,this.pickShader=y,this.positionBuffer=p,this.weightBuffer=A,this.colorBuffer=m,this.idBuffer=M,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var i=s.prototype,v=[0,0,1,0,0,1,1,0,1,1,0,1];i.draw=function(){var g=[1,0,0,0,1,0,0,0,1];return function(){var h=this.plot,y=this.shader,p=this.bounds,A=this.numVertices;if(!(A<=0)){var m=h.gl,M=h.dataBox,x=p[2]-p[0],T=p[3]-p[1],_=M[2]-M[0],f=M[3]-M[1];g[0]=2*x/_,g[4]=2*T/f,g[6]=2*(p[0]-M[0])/_-1,g[7]=2*(p[1]-M[1])/f-1,y.bind();var L=y.uniforms;L.viewTransform=g,L.shape=this.shape;var S=y.attributes;this.positionBuffer.bind(),S.position.pointer(),this.weightBuffer.bind(),S.weight.pointer(m.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),S.color.pointer(m.UNSIGNED_BYTE,!0),m.drawArrays(m.TRIANGLES,0,A)}}}(),i.drawPick=function(){var g=[1,0,0,0,1,0,0,0,1],h=[0,0,0,0];return function(y){var p=this.plot,A=this.pickShader,m=this.bounds,M=this.numVertices;if(!(M<=0)){var x=p.gl,T=p.dataBox,_=m[2]-m[0],f=m[3]-m[1],L=T[2]-T[0],S=T[3]-T[1];g[0]=2*_/L,g[4]=2*f/S,g[6]=2*(m[0]-T[0])/L-1,g[7]=2*(m[1]-T[1])/S-1;for(var k=0;k<4;++k)h[k]=y>>k*8&255;this.pickOffset=y,A.bind();var P=A.uniforms;P.viewTransform=g,P.pickOffset=h,P.shape=this.shape;var z=A.attributes;return this.positionBuffer.bind(),z.position.pointer(),this.weightBuffer.bind(),z.weight.pointer(x.UNSIGNED_BYTE,!1),this.idBuffer.bind(),z.pickId.pointer(x.UNSIGNED_BYTE,!1),x.drawArrays(x.TRIANGLES,0,M),y+this.shape[0]*this.shape[1]}}}(),i.pick=function(g,h,y){var p=this.pickOffset,A=this.shape[0]*this.shape[1];if(y<p||y>=p+A)return null;var m=y-p,M=this.xData,x=this.yData;return{object:this,pointId:m,dataCoord:[M[m%this.shape[0]],x[m/this.shape[0]|0]]}},i.update=function(g){g=g||{};var h=g.shape||[0,0],y=g.x||o(h[0]),p=g.y||o(h[1]),A=g.z||new Float32Array(h[0]*h[1]),m=g.zsmooth!==!1;this.xData=y,this.yData=p;var M=g.colorLevels||[0],x=g.colorValues||[0,0,0,1],T=M.length,_=this.bounds,f,L,S,k;m?(f=_[0]=y[0],L=_[1]=p[0],S=_[2]=y[y.length-1],k=_[3]=p[p.length-1]):(f=_[0]=y[0]+(y[1]-y[0])/2,L=_[1]=p[0]+(p[1]-p[0])/2,S=_[2]=y[y.length-1]+(y[y.length-1]-y[y.length-2])/2,k=_[3]=p[p.length-1]+(p[p.length-1]-p[p.length-2])/2);var P=1/(S-f),z=1/(k-L),I=h[0],R=h[1];this.shape=[I,R];var D=(m?(I-1)*(R-1):I*R)*(v.length>>>1);this.numVertices=D;for(var O=a.mallocUint8(D*4),F=a.mallocFloat32(D*2),G=a.mallocUint8(D*2),W=a.mallocUint32(D),q=0,J=m?I-1:I,X=m?R-1:R,Z=0;Z<X;++Z){var se,le;m?(se=z*(p[Z]-L),le=z*(p[Z+1]-L)):(se=Z<R-1?z*(p[Z]-(p[Z+1]-p[Z])/2-L):z*(p[Z]-(p[Z]-p[Z-1])/2-L),le=Z<R-1?z*(p[Z]+(p[Z+1]-p[Z])/2-L):z*(p[Z]+(p[Z]-p[Z-1])/2-L));for(var oe=0;oe<J;++oe){var U,V;m?(U=P*(y[oe]-f),V=P*(y[oe+1]-f)):(U=oe<I-1?P*(y[oe]-(y[oe+1]-y[oe])/2-f):P*(y[oe]-(y[oe]-y[oe-1])/2-f),V=oe<I-1?P*(y[oe]+(y[oe+1]-y[oe])/2-f):P*(y[oe]+(y[oe]-y[oe-1])/2-f));for(var re=0;re<v.length;re+=2){var ee=v[re],j=v[re+1],Q=m?(Z+j)*I+(oe+ee):Z*I+oe,ne=A[Q],ae=e.le(M,ne),ie,ue,xe,he;if(ae<0)ie=x[0],ue=x[1],xe=x[2],he=x[3];else if(ae===T-1)ie=x[4*T-4],ue=x[4*T-3],xe=x[4*T-2],he=x[4*T-1];else{var ge=(ne-M[ae])/(M[ae+1]-M[ae]),me=1-ge,ke=4*ae,Ae=4*(ae+1);ie=me*x[ke]+ge*x[Ae],ue=me*x[ke+1]+ge*x[Ae+1],xe=me*x[ke+2]+ge*x[Ae+2],he=me*x[ke+3]+ge*x[Ae+3]}O[4*q]=255*ie,O[4*q+1]=255*ue,O[4*q+2]=255*xe,O[4*q+3]=255*he,F[2*q]=U*.5+V*.5,F[2*q+1]=se*.5+le*.5,G[2*q]=ee,G[2*q+1]=j,W[q]=Z*I+oe,q+=1}}}this.positionBuffer.update(F),this.weightBuffer.update(G),this.colorBuffer.update(O),this.idBuffer.update(W),a.free(F),a.free(O),a.free(G),a.free(W)},i.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)};function u(g,h){var y=g.gl,p=r(y,c.vertex,c.fragment),A=r(y,c.pickVertex,c.pickFragment),m=n(y),M=n(y),x=n(y),T=n(y),_=new s(g,p,A,m,M,x,T);return _.update(h),g.addObject(_),_}},{"./lib/shaders":89,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"iota-array":235,"typedarray-pool":308}],89:[function(l,b,w){var e=l("glslify");b.exports={fragment:e([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},{glslify:231}],90:[function(l,b,w){var e=l("glslify"),o=l("gl-shader"),a=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),r=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),n=e([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),c=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];w.createShader=function(s){return o(s,a,r,null,c)},w.createPickShader=function(s){return o(s,a,n,null,c)}},{"gl-shader":132,glslify:231}],91:[function(l,b,w){b.exports=x;var e=l("gl-buffer"),o=l("gl-vao"),a=l("gl-texture2d"),r=new Uint8Array(4),n=new Float32Array(r.buffer);function c(T,_,f,L){return r[0]=L,r[1]=f,r[2]=_,r[3]=T,n[0]}var s=l("binary-search-bounds"),i=l("ndarray"),v=l("./lib/shaders"),u=v.createShader,g=v.createPickShader,h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function y(T,_){for(var f=0,L=0;L<3;++L){var S=T[L]-_[L];f+=S*S}return Math.sqrt(f)}function p(T){for(var _=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],f=0;f<3;++f)_[0][f]=Math.max(T[0][f],_[0][f]),_[1][f]=Math.min(T[1][f],_[1][f]);return _}function A(T,_,f,L){this.arcLength=T,this.position=_,this.index=f,this.dataCoordinate=L}function m(T,_,f,L,S,k){this.gl=T,this.shader=_,this.pickShader=f,this.buffer=L,this.vao=S,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=k,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var M=m.prototype;M.isTransparent=function(){return this.hasAlpha},M.isOpaque=function(){return!this.hasAlpha},M.pickSlots=1,M.setPickBase=function(T){this.pickId=T},M.drawTransparent=M.draw=function(T){if(!!this.vertexCount){var _=this.gl,f=this.shader,L=this.vao;f.bind(),f.uniforms={model:T.model||h,view:T.view||h,projection:T.projection||h,clipBounds:p(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[_.drawingBufferWidth,_.drawingBufferHeight],pixelRatio:this.pixelRatio},L.bind(),L.draw(_.TRIANGLE_STRIP,this.vertexCount),L.unbind()}},M.drawPick=function(T){if(!!this.vertexCount){var _=this.gl,f=this.pickShader,L=this.vao;f.bind(),f.uniforms={model:T.model||h,view:T.view||h,projection:T.projection||h,pickId:this.pickId,clipBounds:p(this.clipBounds),screenShape:[_.drawingBufferWidth,_.drawingBufferHeight],pixelRatio:this.pixelRatio},L.bind(),L.draw(_.TRIANGLE_STRIP,this.vertexCount),L.unbind()}},M.update=function(T){var _,f;this.dirty=!0;var L=!!T.connectGaps;"dashScale"in T&&(this.dashScale=T.dashScale),this.hasAlpha=!1,"opacity"in T&&(this.opacity=+T.opacity,this.opacity<1&&(this.hasAlpha=!0));var S=[],k=[],P=[],z=0,I=0,R=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],D=T.position||T.positions;if(D){var O=T.color||T.colors||[0,0,0,1],F=T.lineWidth||1,G=!1;e:for(_=1;_<D.length;++_){var W=D[_-1],q=D[_];for(k.push(z),P.push(W.slice()),f=0;f<3;++f){if(isNaN(W[f])||isNaN(q[f])||!isFinite(W[f])||!isFinite(q[f])){if(!L&&S.length>0){for(var J=0;J<24;++J)S.push(S[S.length-12]);I+=2,G=!0}continue e}R[0][f]=Math.min(R[0][f],W[f],q[f]),R[1][f]=Math.max(R[1][f],W[f],q[f])}var X,Z;Array.isArray(O[0])?(X=O.length>_-1?O[_-1]:O.length>0?O[O.length-1]:[0,0,0,1],Z=O.length>_?O[_]:O.length>0?O[O.length-1]:[0,0,0,1]):X=Z=O,X.length===3&&(X=[X[0],X[1],X[2],1]),Z.length===3&&(Z=[Z[0],Z[1],Z[2],1]),!this.hasAlpha&&X[3]<1&&(this.hasAlpha=!0);var se;Array.isArray(F)?se=F.length>_-1?F[_-1]:F.length>0?F[F.length-1]:[0,0,0,1]:se=F;var le=z;if(z+=y(W,q),G){for(f=0;f<2;++f)S.push(W[0],W[1],W[2],q[0],q[1],q[2],le,se,X[0],X[1],X[2],X[3]);I+=2,G=!1}S.push(W[0],W[1],W[2],q[0],q[1],q[2],le,se,X[0],X[1],X[2],X[3],W[0],W[1],W[2],q[0],q[1],q[2],le,-se,X[0],X[1],X[2],X[3],q[0],q[1],q[2],W[0],W[1],W[2],z,-se,Z[0],Z[1],Z[2],Z[3],q[0],q[1],q[2],W[0],W[1],W[2],z,se,Z[0],Z[1],Z[2],Z[3]),I+=4}}if(this.buffer.update(S),k.push(z),P.push(D[D.length-1].slice()),this.bounds=R,this.vertexCount=I,this.points=P,this.arcLength=k,"dashes"in T){var oe=T.dashes,U=oe.slice();for(U.unshift(0),_=1;_<U.length;++_)U[_]=U[_-1]+U[_];var V=i(new Array(256*4),[256,1,4]);for(_=0;_<256;++_){for(f=0;f<4;++f)V.set(_,0,f,0);s.le(U,U[U.length-1]*_/255)&1?V.set(_,0,0,0):V.set(_,0,0,255)}this.texture.setPixels(V)}},M.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},M.pick=function(T){if(!T||T.id!==this.pickId)return null;var _=c(T.value[0],T.value[1],T.value[2],0),f=s.le(this.arcLength,_);if(f<0)return null;if(f===this.arcLength.length-1)return new A(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),f);for(var L=this.points[f],S=this.points[Math.min(f+1,this.points.length-1)],k=(_-this.arcLength[f])/(this.arcLength[f+1]-this.arcLength[f]),P=1-k,z=[0,0,0],I=0;I<3;++I)z[I]=P*L[I]+k*S[I];var R=Math.min(k<.5?f:f+1,this.points.length-1);return new A(_,z,R,this.points[R])};function x(T){var _=T.gl||T.scene&&T.scene.gl,f=u(_);f.attributes.position.location=0,f.attributes.nextPosition.location=1,f.attributes.arcLength.location=2,f.attributes.lineWidth.location=3,f.attributes.color.location=4;var L=g(_);L.attributes.position.location=0,L.attributes.nextPosition.location=1,L.attributes.arcLength.location=2,L.attributes.lineWidth.location=3,L.attributes.color.location=4;for(var S=e(_),k=o(_,[{buffer:S,size:3,offset:0,stride:48},{buffer:S,size:3,offset:12,stride:48},{buffer:S,size:1,offset:24,stride:48},{buffer:S,size:1,offset:28,stride:48},{buffer:S,size:4,offset:32,stride:48}]),P=i(new Array(256*4),[256,1,4]),z=0;z<256*4;++z)P.data[z]=255;var I=a(_,P);I.wrap=_.REPEAT;var R=new m(_,f,L,S,k,I);return R.update(T),R}},{"./lib/shaders":90,"binary-search-bounds":31,"gl-buffer":78,"gl-texture2d":146,"gl-vao":150,ndarray:259}],92:[function(l,b,w){b.exports=e;function e(o){var a=new Float32Array(16);return a[0]=o[0],a[1]=o[1],a[2]=o[2],a[3]=o[3],a[4]=o[4],a[5]=o[5],a[6]=o[6],a[7]=o[7],a[8]=o[8],a[9]=o[9],a[10]=o[10],a[11]=o[11],a[12]=o[12],a[13]=o[13],a[14]=o[14],a[15]=o[15],a}},{}],93:[function(l,b,w){b.exports=e;function e(){var o=new Float32Array(16);return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},{}],94:[function(l,b,w){b.exports=e;function e(o){var a=o[0],r=o[1],n=o[2],c=o[3],s=o[4],i=o[5],v=o[6],u=o[7],g=o[8],h=o[9],y=o[10],p=o[11],A=o[12],m=o[13],M=o[14],x=o[15],T=a*i-r*s,_=a*v-n*s,f=a*u-c*s,L=r*v-n*i,S=r*u-c*i,k=n*u-c*v,P=g*m-h*A,z=g*M-y*A,I=g*x-p*A,R=h*M-y*m,D=h*x-p*m,O=y*x-p*M;return T*O-_*D+f*R+L*I-S*z+k*P}},{}],95:[function(l,b,w){b.exports=e;function e(o,a){var r=a[0],n=a[1],c=a[2],s=a[3],i=r+r,v=n+n,u=c+c,g=r*i,h=n*i,y=n*v,p=c*i,A=c*v,m=c*u,M=s*i,x=s*v,T=s*u;return o[0]=1-y-m,o[1]=h+T,o[2]=p-x,o[3]=0,o[4]=h-T,o[5]=1-g-m,o[6]=A+M,o[7]=0,o[8]=p+x,o[9]=A-M,o[10]=1-g-y,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},{}],96:[function(l,b,w){b.exports=e;function e(o,a,r){var n=a[0],c=a[1],s=a[2],i=a[3],v=n+n,u=c+c,g=s+s,h=n*v,y=n*u,p=n*g,A=c*u,m=c*g,M=s*g,x=i*v,T=i*u,_=i*g;return o[0]=1-(A+M),o[1]=y+_,o[2]=p-T,o[3]=0,o[4]=y-_,o[5]=1-(h+M),o[6]=m+x,o[7]=0,o[8]=p+T,o[9]=m-x,o[10]=1-(h+A),o[11]=0,o[12]=r[0],o[13]=r[1],o[14]=r[2],o[15]=1,o}},{}],97:[function(l,b,w){b.exports=e;function e(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},{}],98:[function(l,b,w){b.exports=e;function e(o,a){var r=a[0],n=a[1],c=a[2],s=a[3],i=a[4],v=a[5],u=a[6],g=a[7],h=a[8],y=a[9],p=a[10],A=a[11],m=a[12],M=a[13],x=a[14],T=a[15],_=r*v-n*i,f=r*u-c*i,L=r*g-s*i,S=n*u-c*v,k=n*g-s*v,P=c*g-s*u,z=h*M-y*m,I=h*x-p*m,R=h*T-A*m,D=y*x-p*M,O=y*T-A*M,F=p*T-A*x,G=_*F-f*O+L*D+S*R-k*I+P*z;return G?(G=1/G,o[0]=(v*F-u*O+g*D)*G,o[1]=(c*O-n*F-s*D)*G,o[2]=(M*P-x*k+T*S)*G,o[3]=(p*k-y*P-A*S)*G,o[4]=(u*R-i*F-g*I)*G,o[5]=(r*F-c*R+s*I)*G,o[6]=(x*L-m*P-T*f)*G,o[7]=(h*P-p*L+A*f)*G,o[8]=(i*O-v*R+g*z)*G,o[9]=(n*R-r*O-s*z)*G,o[10]=(m*k-M*L+T*_)*G,o[11]=(y*L-h*k-A*_)*G,o[12]=(v*I-i*D-u*z)*G,o[13]=(r*D-n*I+c*z)*G,o[14]=(M*f-m*S-x*_)*G,o[15]=(h*S-y*f+p*_)*G,o):null}},{}],99:[function(l,b,w){var e=l("./identity");b.exports=o;function o(a,r,n,c){var s,i,v,u,g,h,y,p,A,m,M=r[0],x=r[1],T=r[2],_=c[0],f=c[1],L=c[2],S=n[0],k=n[1],P=n[2];return Math.abs(M-S)<1e-6&&Math.abs(x-k)<1e-6&&Math.abs(T-P)<1e-6?e(a):(y=M-S,p=x-k,A=T-P,m=1/Math.sqrt(y*y+p*p+A*A),y*=m,p*=m,A*=m,s=f*A-L*p,i=L*y-_*A,v=_*p-f*y,m=Math.sqrt(s*s+i*i+v*v),m?(m=1/m,s*=m,i*=m,v*=m):(s=0,i=0,v=0),u=p*v-A*i,g=A*s-y*v,h=y*i-p*s,m=Math.sqrt(u*u+g*g+h*h),m?(m=1/m,u*=m,g*=m,h*=m):(u=0,g=0,h=0),a[0]=s,a[1]=u,a[2]=y,a[3]=0,a[4]=i,a[5]=g,a[6]=p,a[7]=0,a[8]=v,a[9]=h,a[10]=A,a[11]=0,a[12]=-(s*M+i*x+v*T),a[13]=-(u*M+g*x+h*T),a[14]=-(y*M+p*x+A*T),a[15]=1,a)}},{"./identity":97}],100:[function(l,b,w){b.exports=e;function e(o,a,r){var n=a[0],c=a[1],s=a[2],i=a[3],v=a[4],u=a[5],g=a[6],h=a[7],y=a[8],p=a[9],A=a[10],m=a[11],M=a[12],x=a[13],T=a[14],_=a[15],f=r[0],L=r[1],S=r[2],k=r[3];return o[0]=f*n+L*v+S*y+k*M,o[1]=f*c+L*u+S*p+k*x,o[2]=f*s+L*g+S*A+k*T,o[3]=f*i+L*h+S*m+k*_,f=r[4],L=r[5],S=r[6],k=r[7],o[4]=f*n+L*v+S*y+k*M,o[5]=f*c+L*u+S*p+k*x,o[6]=f*s+L*g+S*A+k*T,o[7]=f*i+L*h+S*m+k*_,f=r[8],L=r[9],S=r[10],k=r[11],o[8]=f*n+L*v+S*y+k*M,o[9]=f*c+L*u+S*p+k*x,o[10]=f*s+L*g+S*A+k*T,o[11]=f*i+L*h+S*m+k*_,f=r[12],L=r[13],S=r[14],k=r[15],o[12]=f*n+L*v+S*y+k*M,o[13]=f*c+L*u+S*p+k*x,o[14]=f*s+L*g+S*A+k*T,o[15]=f*i+L*h+S*m+k*_,o}},{}],101:[function(l,b,w){b.exports=e;function e(o,a,r,n,c,s,i){var v=1/(a-r),u=1/(n-c),g=1/(s-i);return o[0]=-2*v,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*u,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*g,o[11]=0,o[12]=(a+r)*v,o[13]=(c+n)*u,o[14]=(i+s)*g,o[15]=1,o}},{}],102:[function(l,b,w){b.exports=e;function e(o,a,r,n,c){var s=1/Math.tan(a/2),i=1/(n-c);return o[0]=s/r,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=s,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=(c+n)*i,o[11]=-1,o[12]=0,o[13]=0,o[14]=2*c*n*i,o[15]=0,o}},{}],103:[function(l,b,w){b.exports=e;function e(o,a,r,n){var c=n[0],s=n[1],i=n[2],v=Math.sqrt(c*c+s*s+i*i),u,g,h,y,p,A,m,M,x,T,_,f,L,S,k,P,z,I,R,D,O,F,G,W;return Math.abs(v)<1e-6?null:(v=1/v,c*=v,s*=v,i*=v,u=Math.sin(r),g=Math.cos(r),h=1-g,y=a[0],p=a[1],A=a[2],m=a[3],M=a[4],x=a[5],T=a[6],_=a[7],f=a[8],L=a[9],S=a[10],k=a[11],P=c*c*h+g,z=s*c*h+i*u,I=i*c*h-s*u,R=c*s*h-i*u,D=s*s*h+g,O=i*s*h+c*u,F=c*i*h+s*u,G=s*i*h-c*u,W=i*i*h+g,o[0]=y*P+M*z+f*I,o[1]=p*P+x*z+L*I,o[2]=A*P+T*z+S*I,o[3]=m*P+_*z+k*I,o[4]=y*R+M*D+f*O,o[5]=p*R+x*D+L*O,o[6]=A*R+T*D+S*O,o[7]=m*R+_*D+k*O,o[8]=y*F+M*G+f*W,o[9]=p*F+x*G+L*W,o[10]=A*F+T*G+S*W,o[11]=m*F+_*G+k*W,a!==o&&(o[12]=a[12],o[13]=a[13],o[14]=a[14],o[15]=a[15]),o)}},{}],104:[function(l,b,w){b.exports=e;function e(o,a,r){var n=Math.sin(r),c=Math.cos(r),s=a[4],i=a[5],v=a[6],u=a[7],g=a[8],h=a[9],y=a[10],p=a[11];return a!==o&&(o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],o[12]=a[12],o[13]=a[13],o[14]=a[14],o[15]=a[15]),o[4]=s*c+g*n,o[5]=i*c+h*n,o[6]=v*c+y*n,o[7]=u*c+p*n,o[8]=g*c-s*n,o[9]=h*c-i*n,o[10]=y*c-v*n,o[11]=p*c-u*n,o}},{}],105:[function(l,b,w){b.exports=e;function e(o,a,r){var n=Math.sin(r),c=Math.cos(r),s=a[0],i=a[1],v=a[2],u=a[3],g=a[8],h=a[9],y=a[10],p=a[11];return a!==o&&(o[4]=a[4],o[5]=a[5],o[6]=a[6],o[7]=a[7],o[12]=a[12],o[13]=a[13],o[14]=a[14],o[15]=a[15]),o[0]=s*c-g*n,o[1]=i*c-h*n,o[2]=v*c-y*n,o[3]=u*c-p*n,o[8]=s*n+g*c,o[9]=i*n+h*c,o[10]=v*n+y*c,o[11]=u*n+p*c,o}},{}],106:[function(l,b,w){b.exports=e;function e(o,a,r){var n=Math.sin(r),c=Math.cos(r),s=a[0],i=a[1],v=a[2],u=a[3],g=a[4],h=a[5],y=a[6],p=a[7];return a!==o&&(o[8]=a[8],o[9]=a[9],o[10]=a[10],o[11]=a[11],o[12]=a[12],o[13]=a[13],o[14]=a[14],o[15]=a[15]),o[0]=s*c+g*n,o[1]=i*c+h*n,o[2]=v*c+y*n,o[3]=u*c+p*n,o[4]=g*c-s*n,o[5]=h*c-i*n,o[6]=y*c-v*n,o[7]=p*c-u*n,o}},{}],107:[function(l,b,w){b.exports=e;function e(o,a,r){var n=r[0],c=r[1],s=r[2];return o[0]=a[0]*n,o[1]=a[1]*n,o[2]=a[2]*n,o[3]=a[3]*n,o[4]=a[4]*c,o[5]=a[5]*c,o[6]=a[6]*c,o[7]=a[7]*c,o[8]=a[8]*s,o[9]=a[9]*s,o[10]=a[10]*s,o[11]=a[11]*s,o[12]=a[12],o[13]=a[13],o[14]=a[14],o[15]=a[15],o}},{}],108:[function(l,b,w){b.exports=e;function e(o,a,r){var n=r[0],c=r[1],s=r[2],i,v,u,g,h,y,p,A,m,M,x,T;return a===o?(o[12]=a[0]*n+a[4]*c+a[8]*s+a[12],o[13]=a[1]*n+a[5]*c+a[9]*s+a[13],o[14]=a[2]*n+a[6]*c+a[10]*s+a[14],o[15]=a[3]*n+a[7]*c+a[11]*s+a[15]):(i=a[0],v=a[1],u=a[2],g=a[3],h=a[4],y=a[5],p=a[6],A=a[7],m=a[8],M=a[9],x=a[10],T=a[11],o[0]=i,o[1]=v,o[2]=u,o[3]=g,o[4]=h,o[5]=y,o[6]=p,o[7]=A,o[8]=m,o[9]=M,o[10]=x,o[11]=T,o[12]=i*n+h*c+m*s+a[12],o[13]=v*n+y*c+M*s+a[13],o[14]=u*n+p*c+x*s+a[14],o[15]=g*n+A*c+T*s+a[15]),o}},{}],109:[function(l,b,w){b.exports=e;function e(o,a){if(o===a){var r=a[1],n=a[2],c=a[3],s=a[6],i=a[7],v=a[11];o[1]=a[4],o[2]=a[8],o[3]=a[12],o[4]=r,o[6]=a[9],o[7]=a[13],o[8]=n,o[9]=s,o[11]=a[14],o[12]=c,o[13]=i,o[14]=v}else o[0]=a[0],o[1]=a[4],o[2]=a[8],o[3]=a[12],o[4]=a[1],o[5]=a[5],o[6]=a[9],o[7]=a[13],o[8]=a[2],o[9]=a[6],o[10]=a[10],o[11]=a[14],o[12]=a[3],o[13]=a[7],o[14]=a[11],o[15]=a[15];return o}},{}],110:[function(l,b,w){var e=l("barycentric"),o=l("polytope-closest-point/lib/closest_point_2d.js");b.exports=s;function a(i,v){for(var u=[0,0,0,0],g=0;g<4;++g)for(var h=0;h<4;++h)u[h]+=i[4*g+h]*v[g];return u}function r(i,v,u,g,h){for(var y=a(g,a(u,a(v,[i[0],i[1],i[2],1]))),p=0;p<3;++p)y[p]/=y[3];return[.5*h[0]*(1+y[0]),.5*h[1]*(1-y[1])]}function n(i,v){if(i.length===2){for(var u=0,g=0,h=0;h<2;++h)u+=Math.pow(v[h]-i[0][h],2),g+=Math.pow(v[h]-i[1][h],2);return u=Math.sqrt(u),g=Math.sqrt(g),u+g<1e-6?[1,0]:[g/(u+g),u/(g+u)]}else if(i.length===3){var y=[0,0];return o(i[0],i[1],i[2],v,y),e(i,y)}return[]}function c(i,v){for(var u=[0,0,0],g=0;g<i.length;++g)for(var h=i[g],y=v[g],p=0;p<3;++p)u[p]+=y*h[p];return u}function s(i,v,u,g,h,y){if(i.length===1)return[0,i[0].slice()];for(var p=new Array(i.length),A=0;A<i.length;++A)p[A]=r(i[A],u,g,h,y);for(var m=0,M=1/0,A=0;A<p.length;++A){for(var x=0,T=0;T<2;++T)x+=Math.pow(p[A][T]-v[T],2);x<M&&(M=x,m=A)}for(var _=n(p,v),f=0,A=0;A<3;++A){if(_[A]<-.001||_[A]>1.0001)return null;f+=_[A]}return Math.abs(f-1)>.001?null:[m,c(i,_),_]}},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":270}],111:[function(l,b,w){var e=l("glslify"),o=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),a=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),r=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),n=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),c=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),s=e([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),i=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),v=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),u=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),g=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),h=e([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);w.meshShader={vertex:o,fragment:a,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},w.wireShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},w.pointShader={vertex:c,fragment:s,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},w.pickShader={vertex:i,fragment:v,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},w.pointPickShader={vertex:u,fragment:v,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},w.contourShader={vertex:g,fragment:h,attributes:[{name:"position",type:"vec3"}]}},{glslify:231}],112:[function(l,b,w){var e=1e-6,o=1e-6,a=l("gl-shader"),r=l("gl-buffer"),n=l("gl-vao"),c=l("gl-texture2d"),s=l("normals"),i=l("gl-mat4/multiply"),v=l("gl-mat4/invert"),u=l("ndarray"),g=l("colormap"),h=l("simplicial-complex-contour"),y=l("typedarray-pool"),p=l("./lib/shaders"),A=l("./lib/closest-point"),m=p.meshShader,M=p.wireShader,x=p.pointShader,T=p.pickShader,_=p.pointPickShader,f=p.contourShader,L=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function S(J,X,Z,se,le,oe,U,V,re,ee,j,Q,ne,ae,ie,ue,xe,he,ge,me,ke,Ae,Ne,He,Ge,_e,De){this.gl=J,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=X,this.dirty=!0,this.triShader=Z,this.lineShader=se,this.pointShader=le,this.pickShader=oe,this.pointPickShader=U,this.contourShader=V,this.trianglePositions=re,this.triangleColors=j,this.triangleNormals=ne,this.triangleUVs=Q,this.triangleIds=ee,this.triangleVAO=ae,this.triangleCount=0,this.lineWidth=1,this.edgePositions=ie,this.edgeColors=xe,this.edgeUVs=he,this.edgeIds=ue,this.edgeVAO=ge,this.edgeCount=0,this.pointPositions=me,this.pointColors=Ae,this.pointUVs=Ne,this.pointSizes=He,this.pointIds=ke,this.pointVAO=Ge,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=_e,this.contourVAO=De,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=L,this._view=L,this._projection=L,this._resolution=[1,1]}var k=S.prototype;k.isOpaque=function(){return!this.hasAlpha},k.isTransparent=function(){return this.hasAlpha},k.pickSlots=1,k.setPickBase=function(J){this.pickId=J};function P(J,X){if(!X||!X.length)return 1;for(var Z=0;Z<X.length;++Z){if(X.length<2)return 1;if(X[Z][0]===J)return X[Z][1];if(X[Z][0]>J&&Z>0){var se=(X[Z][0]-J)/(X[Z][0]-X[Z-1][0]);return X[Z][1]*(1-se)+se*X[Z-1][1]}}return 1}function z(J,X){for(var Z=g({colormap:J,nshades:256,format:"rgba"}),se=new Uint8Array(256*4),le=0;le<256;++le){for(var oe=Z[le],U=0;U<3;++U)se[4*le+U]=oe[U];X?se[4*le+3]=255*P(le/255,X):se[4*le+3]=255*oe[3]}return u(se,[256,256,4],[4,0,1])}function I(J){for(var X=J.length,Z=new Array(X),se=0;se<X;++se)Z[se]=J[se][2];return Z}k.highlight=function(J){if(!J||!this.contourEnable){this.contourCount=0;return}for(var X=h(this.cells,this.intensity,J.intensity),Z=X.cells,se=X.vertexIds,le=X.vertexWeights,oe=Z.length,U=y.mallocFloat32(2*3*oe),V=0,re=0;re<oe;++re)for(var ee=Z[re],j=0;j<2;++j){var Q=ee[0];ee.length===2&&(Q=ee[j]);for(var ne=se[Q][0],ae=se[Q][1],ie=le[Q],ue=1-ie,xe=this.positions[ne],he=this.positions[ae],ge=0;ge<3;++ge)U[V++]=ie*xe[ge]+ue*he[ge]}this.contourCount=V/3|0,this.contourPositions.update(U.subarray(0,V)),y.free(U)},k.update=function(J){J=J||{};var X=this.gl;this.dirty=!0,"contourEnable"in J&&(this.contourEnable=J.contourEnable),"contourColor"in J&&(this.contourColor=J.contourColor),"lineWidth"in J&&(this.lineWidth=J.lineWidth),"lightPosition"in J&&(this.lightPosition=J.lightPosition),this.hasAlpha=!1,"opacity"in J&&(this.opacity=J.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in J&&(this.opacityscale=J.opacityscale,this.hasAlpha=!0),"ambient"in J&&(this.ambientLight=J.ambient),"diffuse"in J&&(this.diffuseLight=J.diffuse),"specular"in J&&(this.specularLight=J.specular),"roughness"in J&&(this.roughness=J.roughness),"fresnel"in J&&(this.fresnel=J.fresnel),J.texture?(this.texture.dispose(),this.texture=c(X,J.texture)):J.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=X.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=X.LINEAR,this.texture.setPixels(z(J.colormap,this.opacityscale)),this.texture.generateMipmap());var Z=J.cells,se=J.positions;if(!se||!Z)return;var le=[],oe=[],U=[],V=[],re=[],ee=[],j=[],Q=[],ne=[],ae=[],ie=[],ue=[],xe=[],he=[];this.cells=Z,this.positions=se;var ge=J.vertexNormals,me=J.cellNormals,ke=J.vertexNormalsEpsilon===void 0?e:J.vertexNormalsEpsilon,Ae=J.faceNormalsEpsilon===void 0?o:J.faceNormalsEpsilon;J.useFacetNormals&&!me&&(me=s.faceNormals(Z,se,Ae)),!me&&!ge&&(ge=s.vertexNormals(Z,se,ke));var Ne=J.vertexColors,He=J.cellColors,Ge=J.meshColor||[1,1,1,1],_e=J.vertexUVs,De=J.vertexIntensity,Ye=J.cellUVs,qe=J.cellIntensity,Ue=1/0,Ie=-1/0;if(!_e&&!Ye)if(De)if(J.vertexIntensityBounds)Ue=+J.vertexIntensityBounds[0],Ie=+J.vertexIntensityBounds[1];else for(var Ve=0;Ve<De.length;++Ve){var dt=De[Ve];Ue=Math.min(Ue,dt),Ie=Math.max(Ie,dt)}else if(qe)if(J.cellIntensityBounds)Ue=+J.cellIntensityBounds[0],Ie=+J.cellIntensityBounds[1];else for(var Ve=0;Ve<qe.length;++Ve){var dt=qe[Ve];Ue=Math.min(Ue,dt),Ie=Math.max(Ie,dt)}else for(var Ve=0;Ve<se.length;++Ve){var dt=se[Ve][2];Ue=Math.min(Ue,dt),Ie=Math.max(Ie,dt)}De?this.intensity=De:qe?this.intensity=qe:this.intensity=I(se),this.pickVertex=!(qe||He);var Dt=J.pointSizes,Yt=J.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var Ve=0;Ve<se.length;++Ve)for(var kt=se[Ve],Ft=0;Ft<3;++Ft)isNaN(kt[Ft])||!isFinite(kt[Ft])||(this.bounds[0][Ft]=Math.min(this.bounds[0][Ft],kt[Ft]),this.bounds[1][Ft]=Math.max(this.bounds[1][Ft],kt[Ft]));var Nt=0,Lt=0,St=0;e:for(var Ve=0;Ve<Z.length;++Ve){var it=Z[Ve];switch(it.length){case 1:for(var ht=it[0],kt=se[ht],Ft=0;Ft<3;++Ft)if(isNaN(kt[Ft])||!isFinite(kt[Ft]))continue e;ae.push(kt[0],kt[1],kt[2]);var Qe;Ne?Qe=Ne[ht]:He?Qe=He[Ve]:Qe=Ge,this.opacityscale&&De?oe.push(Qe[0],Qe[1],Qe[2],this.opacity*P((De[ht]-Ue)/(Ie-Ue),this.opacityscale)):Qe.length===3?ie.push(Qe[0],Qe[1],Qe[2],this.opacity):(ie.push(Qe[0],Qe[1],Qe[2],Qe[3]*this.opacity),Qe[3]<1&&(this.hasAlpha=!0));var Ce;_e?Ce=_e[ht]:De?Ce=[(De[ht]-Ue)/(Ie-Ue),0]:Ye?Ce=Ye[Ve]:qe?Ce=[(qe[Ve]-Ue)/(Ie-Ue),0]:Ce=[(kt[2]-Ue)/(Ie-Ue),0],ue.push(Ce[0],Ce[1]),Dt?xe.push(Dt[ht]):xe.push(Yt),he.push(Ve),St+=1;break;case 2:for(var Ft=0;Ft<2;++Ft)for(var ht=it[Ft],kt=se[ht],je=0;je<3;++je)if(isNaN(kt[je])||!isFinite(kt[je]))continue e;for(var Ft=0;Ft<2;++Ft){var ht=it[Ft],kt=se[ht];ee.push(kt[0],kt[1],kt[2]);var Qe;Ne?Qe=Ne[ht]:He?Qe=He[Ve]:Qe=Ge,this.opacityscale&&De?oe.push(Qe[0],Qe[1],Qe[2],this.opacity*P((De[ht]-Ue)/(Ie-Ue),this.opacityscale)):Qe.length===3?j.push(Qe[0],Qe[1],Qe[2],this.opacity):(j.push(Qe[0],Qe[1],Qe[2],Qe[3]*this.opacity),Qe[3]<1&&(this.hasAlpha=!0));var Ce;_e?Ce=_e[ht]:De?Ce=[(De[ht]-Ue)/(Ie-Ue),0]:Ye?Ce=Ye[Ve]:qe?Ce=[(qe[Ve]-Ue)/(Ie-Ue),0]:Ce=[(kt[2]-Ue)/(Ie-Ue),0],Q.push(Ce[0],Ce[1]),ne.push(Ve)}Lt+=1;break;case 3:for(var Ft=0;Ft<3;++Ft)for(var ht=it[Ft],kt=se[ht],je=0;je<3;++je)if(isNaN(kt[je])||!isFinite(kt[je]))continue e;for(var Ft=0;Ft<3;++Ft){var ht=it[2-Ft],kt=se[ht];le.push(kt[0],kt[1],kt[2]);var Qe;Ne?Qe=Ne[ht]:He?Qe=He[Ve]:Qe=Ge,Qe?this.opacityscale&&De?oe.push(Qe[0],Qe[1],Qe[2],this.opacity*P((De[ht]-Ue)/(Ie-Ue),this.opacityscale)):Qe.length===3?oe.push(Qe[0],Qe[1],Qe[2],this.opacity):(oe.push(Qe[0],Qe[1],Qe[2],Qe[3]*this.opacity),Qe[3]<1&&(this.hasAlpha=!0)):oe.push(.5,.5,.5,1);var Ce;_e?Ce=_e[ht]:De?Ce=[(De[ht]-Ue)/(Ie-Ue),0]:Ye?Ce=Ye[Ve]:qe?Ce=[(qe[Ve]-Ue)/(Ie-Ue),0]:Ce=[(kt[2]-Ue)/(Ie-Ue),0],V.push(Ce[0],Ce[1]);var rt;ge?rt=ge[ht]:rt=me[Ve],U.push(rt[0],rt[1],rt[2]),re.push(Ve)}Nt+=1;break}}this.pointCount=St,this.edgeCount=Lt,this.triangleCount=Nt,this.pointPositions.update(ae),this.pointColors.update(ie),this.pointUVs.update(ue),this.pointSizes.update(xe),this.pointIds.update(new Uint32Array(he)),this.edgePositions.update(ee),this.edgeColors.update(j),this.edgeUVs.update(Q),this.edgeIds.update(new Uint32Array(ne)),this.trianglePositions.update(le),this.triangleColors.update(oe),this.triangleUVs.update(V),this.triangleNormals.update(U),this.triangleIds.update(new Uint32Array(re))},k.drawTransparent=k.draw=function(J){J=J||{};for(var X=this.gl,Z=J.model||L,se=J.view||L,le=J.projection||L,oe=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],U=0;U<3;++U)oe[0][U]=Math.max(oe[0][U],this.clipBounds[0][U]),oe[1][U]=Math.min(oe[1][U],this.clipBounds[1][U]);var V={model:Z,view:se,projection:le,inverseModel:L.slice(),clipBounds:oe,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};V.inverseModel=v(V.inverseModel,V.model),X.disable(X.CULL_FACE),this.texture.bind(0);var re=new Array(16);i(re,V.view,V.model),i(re,V.projection,re),v(re,re);for(var U=0;U<3;++U)V.eyePosition[U]=re[12+U]/re[15];for(var ee=re[15],U=0;U<3;++U)ee+=this.lightPosition[U]*re[4*U+3];for(var U=0;U<3;++U){for(var j=re[12+U],Q=0;Q<3;++Q)j+=re[4*Q+U]*this.lightPosition[Q];V.lightPosition[U]=j/ee}if(this.triangleCount>0){var ne=this.triShader;ne.bind(),ne.uniforms=V,this.triangleVAO.bind(),X.drawArrays(X.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var ne=this.lineShader;ne.bind(),ne.uniforms=V,this.edgeVAO.bind(),X.lineWidth(this.lineWidth*this.pixelRatio),X.drawArrays(X.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()}if(this.pointCount>0){var ne=this.pointShader;ne.bind(),ne.uniforms=V,this.pointVAO.bind(),X.drawArrays(X.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var ne=this.contourShader;ne.bind(),ne.uniforms=V,this.contourVAO.bind(),X.drawArrays(X.LINES,0,this.contourCount),this.contourVAO.unbind()}},k.drawPick=function(J){J=J||{};for(var X=this.gl,Z=J.model||L,se=J.view||L,le=J.projection||L,oe=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],U=0;U<3;++U)oe[0][U]=Math.max(oe[0][U],this.clipBounds[0][U]),oe[1][U]=Math.min(oe[1][U],this.clipBounds[1][U]);this._model=[].slice.call(Z),this._view=[].slice.call(se),this._projection=[].slice.call(le),this._resolution=[X.drawingBufferWidth,X.drawingBufferHeight];var V={model:Z,view:se,projection:le,clipBounds:oe,pickId:this.pickId/255},re=this.pickShader;if(re.bind(),re.uniforms=V,this.triangleCount>0&&(this.triangleVAO.bind(),X.drawArrays(X.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),X.lineWidth(this.lineWidth*this.pixelRatio),X.drawArrays(X.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()),this.pointCount>0){var re=this.pointPickShader;re.bind(),re.uniforms=V,this.pointVAO.bind(),X.drawArrays(X.POINTS,0,this.pointCount),this.pointVAO.unbind()}},k.pick=function(J){if(!J||J.id!==this.pickId)return null;for(var X=J.value[0]+256*J.value[1]+65536*J.value[2],Z=this.cells[X],se=this.positions,le=new Array(Z.length),oe=0;oe<Z.length;++oe)le[oe]=se[Z[oe]];var U=J.coord[0],V=J.coord[1];if(!this.pickVertex){var re=this.positions[Z[0]],ee=this.positions[Z[1]],j=this.positions[Z[2]],Q=[(re[0]+ee[0]+j[0])/3,(re[1]+ee[1]+j[1])/3,(re[2]+ee[2]+j[2])/3];return{_cellCenter:!0,position:[U,V],index:X,cell:Z,cellId:X,intensity:this.intensity[X],dataCoordinate:Q}}var ne=A(le,[U*this.pixelRatio,this._resolution[1]-V*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!ne)return null;for(var ae=ne[2],ie=0,oe=0;oe<Z.length;++oe)ie+=ae[oe]*this.intensity[Z[oe]];return{position:ne[1],index:Z[ne[0]],cell:Z,cellId:X,intensity:ie,dataCoordinate:this.positions[Z[ne[0]]]}},k.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()};function R(J){var X=a(J,m.vertex,m.fragment);return X.attributes.position.location=0,X.attributes.color.location=2,X.attributes.uv.location=3,X.attributes.normal.location=4,X}function D(J){var X=a(J,M.vertex,M.fragment);return X.attributes.position.location=0,X.attributes.color.location=2,X.attributes.uv.location=3,X}function O(J){var X=a(J,x.vertex,x.fragment);return X.attributes.position.location=0,X.attributes.color.location=2,X.attributes.uv.location=3,X.attributes.pointSize.location=4,X}function F(J){var X=a(J,T.vertex,T.fragment);return X.attributes.position.location=0,X.attributes.id.location=1,X}function G(J){var X=a(J,_.vertex,_.fragment);return X.attributes.position.location=0,X.attributes.id.location=1,X.attributes.pointSize.location=4,X}function W(J){var X=a(J,f.vertex,f.fragment);return X.attributes.position.location=0,X}function q(J,X){arguments.length===1&&(X=J,J=X.gl);var Z=J.getExtension("OES_standard_derivatives")||J.getExtension("MOZ_OES_standard_derivatives")||J.getExtension("WEBKIT_OES_standard_derivatives");if(!Z)throw new Error("derivatives not supported");var se=R(J),le=D(J),oe=O(J),U=F(J),V=G(J),re=W(J),ee=c(J,u(new Uint8Array([255,255,255,255]),[1,1,4]));ee.generateMipmap(),ee.minFilter=J.LINEAR_MIPMAP_LINEAR,ee.magFilter=J.LINEAR;var j=r(J),Q=r(J),ne=r(J),ae=r(J),ie=r(J),ue=n(J,[{buffer:j,type:J.FLOAT,size:3},{buffer:ie,type:J.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Q,type:J.FLOAT,size:4},{buffer:ne,type:J.FLOAT,size:2},{buffer:ae,type:J.FLOAT,size:3}]),xe=r(J),he=r(J),ge=r(J),me=r(J),ke=n(J,[{buffer:xe,type:J.FLOAT,size:3},{buffer:me,type:J.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:he,type:J.FLOAT,size:4},{buffer:ge,type:J.FLOAT,size:2}]),Ae=r(J),Ne=r(J),He=r(J),Ge=r(J),_e=r(J),De=n(J,[{buffer:Ae,type:J.FLOAT,size:3},{buffer:_e,type:J.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Ne,type:J.FLOAT,size:4},{buffer:He,type:J.FLOAT,size:2},{buffer:Ge,type:J.FLOAT,size:1}]),Ye=r(J),qe=n(J,[{buffer:Ye,type:J.FLOAT,size:3}]),Ue=new S(J,ee,se,le,oe,U,V,re,j,ie,Q,ne,ae,ue,xe,me,he,ge,ke,Ae,_e,Ne,He,Ge,De,Ye,qe);return Ue.update(X),Ue}b.exports=q},{"./lib/closest-point":110,"./lib/shaders":111,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259,normals:261,"simplicial-complex-contour":291,"typedarray-pool":308}],113:[function(l,b,w){b.exports=c;var e=l("gl-buffer"),o=l("gl-shader"),a=l("./shaders");function r(s,i,v){this.plot=s,this.vbo=i,this.shader=v}var n=r.prototype;n.bind=function(){var s=this.shader;this.vbo.bind(),this.shader.bind(),s.attributes.coord.pointer(),s.uniforms.screenBox=this.plot.screenBox},n.drawBox=function(){var s=[0,0],i=[0,0];return function(v,u,g,h,y){var p=this.plot,A=this.shader,m=p.gl;s[0]=v,s[1]=u,i[0]=g,i[1]=h,A.uniforms.lo=s,A.uniforms.hi=i,A.uniforms.color=y,m.drawArrays(m.TRIANGLE_STRIP,0,4)}}(),n.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function c(s){var i=s.gl,v=e(i,[0,0,0,1,1,0,1,1]),u=o(i,a.boxVert,a.lineFrag);return new r(s,v,u)}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],114:[function(l,b,w){b.exports=i;var e=l("gl-buffer"),o=l("gl-shader"),a=l("binary-search-bounds"),r=l("./shaders");function n(v,u,g,h){this.plot=v,this.vbo=u,this.shader=g,this.tickShader=h,this.ticks=[[],[]]}function c(v,u){return v-u}var s=n.prototype;s.draw=function(){var v=[0,0],u=[0,0],g=[0,0];return function(){for(var h=this.plot,y=this.vbo,p=this.shader,A=this.ticks,m=h.gl,M=h._tickBounds,x=h.dataBox,T=h.viewBox,_=h.gridLineWidth,f=h.gridLineColor,L=h.gridLineEnable,S=h.pixelRatio,k=0;k<2;++k){var P=M[k],z=M[k+2],I=z-P,R=.5*(x[k+2]+x[k]),D=x[k+2]-x[k];u[k]=2*I/D,v[k]=2*(P-R)/D}p.bind(),y.bind(),p.attributes.dataCoord.pointer(),p.uniforms.dataShift=v,p.uniforms.dataScale=u;for(var O=0,k=0;k<2;++k){g[0]=g[1]=0,g[k]=1,p.uniforms.dataAxis=g,p.uniforms.lineWidth=_[k]/(T[k+2]-T[k])*S,p.uniforms.color=f[k];var F=A[k].length*6;L[k]&&F&&m.drawArrays(m.TRIANGLES,O,F),O+=F}}}(),s.drawTickMarks=function(){var v=[0,0],u=[0,0],g=[1,0],h=[0,1],y=[0,0],p=[0,0];return function(){for(var A=this.plot,m=this.vbo,M=this.tickShader,x=this.ticks,T=A.gl,_=A._tickBounds,f=A.dataBox,L=A.viewBox,S=A.pixelRatio,k=A.screenBox,P=k[2]-k[0],z=k[3]-k[1],I=L[2]-L[0],R=L[3]-L[1],D=0;D<2;++D){var O=_[D],F=_[D+2],G=F-O,W=.5*(f[D+2]+f[D]),q=f[D+2]-f[D];u[D]=2*G/q,v[D]=2*(O-W)/q}u[0]*=I/P,v[0]*=I/P,u[1]*=R/z,v[1]*=R/z,M.bind(),m.bind(),M.attributes.dataCoord.pointer();var J=M.uniforms;J.dataShift=v,J.dataScale=u;var X=A.tickMarkLength,Z=A.tickMarkWidth,se=A.tickMarkColor,le=0,oe=x[0].length*6,U=Math.min(a.ge(x[0],(f[0]-_[0])/(_[2]-_[0]),c),x[0].length),V=Math.min(a.gt(x[0],(f[2]-_[0])/(_[2]-_[0]),c),x[0].length),re=le+6*U,ee=6*Math.max(0,V-U),j=Math.min(a.ge(x[1],(f[1]-_[1])/(_[3]-_[1]),c),x[1].length),Q=Math.min(a.gt(x[1],(f[3]-_[1])/(_[3]-_[1]),c),x[1].length),ne=oe+6*j,ae=6*Math.max(0,Q-j);y[0]=2*(L[0]-X[1])/P-1,y[1]=(L[3]+L[1])/z-1,p[0]=X[1]*S/P,p[1]=Z[1]*S/z,ae&&(J.color=se[1],J.tickScale=p,J.dataAxis=h,J.screenOffset=y,T.drawArrays(T.TRIANGLES,ne,ae)),y[0]=(L[2]+L[0])/P-1,y[1]=2*(L[1]-X[0])/z-1,p[0]=Z[0]*S/P,p[1]=X[0]*S/z,ee&&(J.color=se[0],J.tickScale=p,J.dataAxis=g,J.screenOffset=y,T.drawArrays(T.TRIANGLES,re,ee)),y[0]=2*(L[2]+X[3])/P-1,y[1]=(L[3]+L[1])/z-1,p[0]=X[3]*S/P,p[1]=Z[3]*S/z,ae&&(J.color=se[3],J.tickScale=p,J.dataAxis=h,J.screenOffset=y,T.drawArrays(T.TRIANGLES,ne,ae)),y[0]=(L[2]+L[0])/P-1,y[1]=2*(L[3]+X[2])/z-1,p[0]=Z[2]*S/P,p[1]=X[2]*S/z,ee&&(J.color=se[2],J.tickScale=p,J.dataAxis=g,J.screenOffset=y,T.drawArrays(T.TRIANGLES,re,ee))}}(),s.update=function(){var v=[1,1,-1,-1,1,-1],u=[1,-1,1,1,-1,-1];return function(g){var h=g.ticks,y=g.bounds,p=new Float32Array(6*3*(h[0].length+h[1].length));this.plot.zeroLineEnable;for(var A=0,m=[[],[]],M=0;M<2;++M)for(var x=m[M],T=h[M],_=y[M],f=y[M+2],L=0;L<T.length;++L){var S=(T[L].x-_)/(f-_);x.push(S);for(var k=0;k<6;++k)p[A++]=S,p[A++]=v[k],p[A++]=u[k]}this.ticks=m,this.vbo.update(p)}}(),s.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()};function i(v){var u=v.gl,g=e(u),h=o(u,r.gridVert,r.gridFrag),y=o(u,r.tickVert,r.gridFrag),p=new n(v,g,h,y);return p}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132}],115:[function(l,b,w){b.exports=c;var e=l("gl-buffer"),o=l("gl-shader"),a=l("./shaders");function r(s,i,v){this.plot=s,this.vbo=i,this.shader=v}var n=r.prototype;n.bind=function(){var s=this.shader;this.vbo.bind(),this.shader.bind(),s.attributes.coord.pointer(),s.uniforms.screenBox=this.plot.screenBox},n.drawLine=function(){var s=[0,0],i=[0,0];return function(v,u,g,h,y,p){var A=this.plot,m=this.shader,M=A.gl;s[0]=v,s[1]=u,i[0]=g,i[1]=h,m.uniforms.start=s,m.uniforms.end=i,m.uniforms.width=y*A.pixelRatio,m.uniforms.color=p,M.drawArrays(M.TRIANGLE_STRIP,0,4)}}(),n.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function c(s){var i=s.gl,v=e(i,[-1,-1,-1,1,1,-1,1,1]),u=o(i,a.lineVert,a.lineFrag),g=new r(s,v,u);return g}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],116:[function(l,b,w){var e=l("glslify"),o=e([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);b.exports={lineVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:o,textVert:e([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:o,gridVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:o,boxVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},{glslify:231}],117:[function(l,b,w){b.exports=i;var e=l("gl-buffer"),o=l("gl-shader"),a=l("text-cache"),r=l("binary-search-bounds"),n=l("./shaders");function c(v,u,g){this.plot=v,this.vbo=u,this.shader=g,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var s=c.prototype;s.drawTicks=function(){var v=[0,0],u=[0,0],g=[0,0];return function(h){var y=this.plot,p=this.shader,A=this.tickX[h],m=this.tickOffset[h],M=y.gl,x=y.viewBox,T=y.dataBox,_=y.screenBox,f=y.pixelRatio,L=y.tickEnable,S=y.tickPad,k=y.tickColor,P=y.tickAngle,z=y.labelEnable,I=y.labelPad,R=y.labelColor,D=y.labelAngle,O=this.labelOffset[h],F=this.labelCount[h],G=r.lt(A,T[h]),W=r.le(A,T[h+2]);v[0]=v[1]=0,v[h]=1,u[h]=(x[2+h]+x[h])/(_[2+h]-_[h])-1;var q=2/_[2+(h^1)]-_[h^1];u[h^1]=q*x[h^1]-1,L[h]&&(u[h^1]-=q*f*S[h],G<W&&m[W]>m[G]&&(p.uniforms.dataAxis=v,p.uniforms.screenOffset=u,p.uniforms.color=k[h],p.uniforms.angle=P[h],M.drawArrays(M.TRIANGLES,m[G],m[W]-m[G]))),z[h]&&F&&(u[h^1]-=q*f*I[h],p.uniforms.dataAxis=g,p.uniforms.screenOffset=u,p.uniforms.color=R[h],p.uniforms.angle=D[h],M.drawArrays(M.TRIANGLES,O,F)),u[h^1]=q*x[2+(h^1)]-1,L[h+2]&&(u[h^1]+=q*f*S[h+2],G<W&&m[W]>m[G]&&(p.uniforms.dataAxis=v,p.uniforms.screenOffset=u,p.uniforms.color=k[h+2],p.uniforms.angle=P[h+2],M.drawArrays(M.TRIANGLES,m[G],m[W]-m[G]))),z[h+2]&&F&&(u[h^1]+=q*f*I[h+2],p.uniforms.dataAxis=g,p.uniforms.screenOffset=u,p.uniforms.color=R[h+2],p.uniforms.angle=D[h+2],M.drawArrays(M.TRIANGLES,O,F))}}(),s.drawTitle=function(){var v=[0,0],u=[0,0];return function(){var g=this.plot,h=this.shader,y=g.gl,p=g.screenBox,A=g.titleCenter,m=g.titleAngle,M=g.titleColor,x=g.pixelRatio;if(!!this.titleCount){for(var T=0;T<2;++T)u[T]=2*(A[T]*x-p[T])/(p[2+T]-p[T])-1;h.bind(),h.uniforms.dataAxis=v,h.uniforms.screenOffset=u,h.uniforms.angle=m,h.uniforms.color=M,y.drawArrays(y.TRIANGLES,this.titleOffset,this.titleCount)}}}(),s.bind=function(){var v=[0,0],u=[0,0],g=[0,0];return function(){var h=this.plot,y=this.shader,p=h._tickBounds,A=h.dataBox,m=h.screenBox,M=h.viewBox;y.bind();for(var x=0;x<2;++x){var T=p[x],_=p[x+2],f=_-T,L=.5*(A[x+2]+A[x]),S=A[x+2]-A[x],k=M[x],P=M[x+2],z=P-k,I=m[x],R=m[x+2],D=R-I;u[x]=2*f/S*z/D,v[x]=2*(T-L)/S*z/D}g[1]=2*h.pixelRatio/(m[3]-m[1]),g[0]=g[1]*(m[3]-m[1])/(m[2]-m[0]),y.uniforms.dataScale=u,y.uniforms.dataShift=v,y.uniforms.textScale=g,this.vbo.bind(),y.attributes.textCoordinate.pointer()}}(),s.update=function(v){var u=[],g=v.ticks,h=v.bounds,y,p,A,m,M;for(M=0;M<2;++M){var x=[Math.floor(u.length/3)],T=[-1/0],_=g[M];for(y=0;y<_.length;++y){var f=_[y],L=f.x,S=f.text,k=f.font||"sans-serif";m=f.fontSize||12;for(var P=1/(h[M+2]-h[M]),z=h[M],I=S.split(`
`),R=0;R<I.length;R++)for(A=a(k,I[R]).data,p=0;p<A.length;p+=2)u.push(A[p]*m,-A[p+1]*m-R*m*1.2,(L-z)*P);x.push(Math.floor(u.length/3)),T.push(L)}this.tickOffset[M]=x,this.tickX[M]=T}for(M=0;M<2;++M){for(this.labelOffset[M]=Math.floor(u.length/3),A=a(v.labelFont[M],v.labels[M],{textAlign:"center"}).data,m=v.labelSize[M],y=0;y<A.length;y+=2)u.push(A[y]*m,-A[y+1]*m,0);this.labelCount[M]=Math.floor(u.length/3)-this.labelOffset[M]}for(this.titleOffset=Math.floor(u.length/3),A=a(v.titleFont,v.title).data,m=v.titleSize,y=0;y<A.length;y+=2)u.push(A[y]*m,-A[y+1]*m,0);this.titleCount=Math.floor(u.length/3)-this.titleOffset,this.vbo.update(u)},s.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function i(v){var u=v.gl,g=e(u),h=o(u,n.textVert,n.textFrag),y=new c(v,g,h);return y}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"text-cache":303}],118:[function(l,b,w){b.exports=u;var e=l("gl-select-static"),o=l("./lib/grid"),a=l("./lib/text"),r=l("./lib/line"),n=l("./lib/box");function c(g,h){this.gl=g,this.pickBuffer=h,this.screenBox=[0,0,g.drawingBufferWidth,g.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var s=c.prototype;s.setDirty=function(){this.dirty=this.pickDirty=!0},s.setOverlayDirty=function(){this.dirty=!0},s.nextDepthValue=function(){return this._depthCounter++/65536},s.draw=function(){return function(){var g=this.gl,h=this.screenBox,y=this.viewBox,p=this.dataBox,A=this.pixelRatio,m=this.grid,M=this.line,x=this.text,T=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),!!this.dirty){if(this.dirty=!1,g.bindFramebuffer(g.FRAMEBUFFER,null),g.enable(g.SCISSOR_TEST),g.disable(g.DEPTH_TEST),g.depthFunc(g.LESS),g.depthMask(!1),g.enable(g.BLEND),g.blendEquation(g.FUNC_ADD,g.FUNC_ADD),g.blendFunc(g.ONE,g.ONE_MINUS_SRC_ALPHA),this.borderColor){g.scissor(h[0],h[1],h[2]-h[0],h[3]-h[1]);var _=this.borderColor;g.clearColor(_[0]*_[3],_[1]*_[3],_[2]*_[3],_[3]),g.clear(g.COLOR_BUFFER_BIT|g.DEPTH_BUFFER_BIT)}g.scissor(y[0],y[1],y[2]-y[0],y[3]-y[1]),g.viewport(y[0],y[1],y[2]-y[0],y[3]-y[1]);var f=this.backgroundColor;g.clearColor(f[0]*f[3],f[1]*f[3],f[2]*f[3],f[3]),g.clear(g.COLOR_BUFFER_BIT),m.draw();var L=this.zeroLineEnable,S=this.zeroLineColor,k=this.zeroLineWidth;if(L[0]||L[1]){M.bind();for(var P=0;P<2;++P)if(!(!L[P]||!(p[P]<=0&&p[P+2]>=0))){var z=h[P]-p[P]*(h[P+2]-h[P])/(p[P+2]-p[P]);P===0?M.drawLine(z,h[1],z,h[3],k[P],S[P]):M.drawLine(h[0],z,h[2],z,k[P],S[P])}}for(var P=0;P<T.length;++P)T[P].draw();g.viewport(h[0],h[1],h[2]-h[0],h[3]-h[1]),g.scissor(h[0],h[1],h[2]-h[0],h[3]-h[1]),this.grid.drawTickMarks(),M.bind();var I=this.borderLineEnable,R=this.borderLineWidth,D=this.borderLineColor;I[1]&&M.drawLine(y[0],y[1]-.5*R[1]*A,y[0],y[3]+.5*R[3]*A,R[1],D[1]),I[0]&&M.drawLine(y[0]-.5*R[0]*A,y[1],y[2]+.5*R[2]*A,y[1],R[0],D[0]),I[3]&&M.drawLine(y[2],y[1]-.5*R[1]*A,y[2],y[3]+.5*R[3]*A,R[3],D[3]),I[2]&&M.drawLine(y[0]-.5*R[0]*A,y[3],y[2]+.5*R[2]*A,y[3],R[2],D[2]),x.bind();for(var P=0;P<2;++P)x.drawTicks(P);this.titleEnable&&x.drawTitle();for(var O=this.overlays,P=0;P<O.length;++P)O[P].draw();g.disable(g.SCISSOR_TEST),g.disable(g.BLEND),g.depthMask(!0)}}}(),s.drawPick=function(){return function(){if(!this.static){var g=this.pickBuffer;this.gl,this._pickTimeout=null,g.begin();for(var h=1,y=this.objects,p=0;p<y.length;++p)h=y[p].drawPick(h);g.end()}}}(),s.pick=function(){return function(g,h){if(!this.static){var y=this.pixelRatio,p=this.pickPixelRatio,A=this.viewBox,m=Math.round((g-A[0]/y)*p)|0,M=Math.round((h-A[1]/y)*p)|0,x=this.pickBuffer.query(m,M,this.pickRadius);if(!x)return null;for(var T=x.id+(x.value[0]<<8)+(x.value[1]<<16)+(x.value[2]<<24),_=this.objects,f=0;f<_.length;++f){var L=_[f].pick(m,M,T);if(L)return L}return null}}}();function i(g){for(var h=g.slice(),y=0;y<h.length;++y)h[y]=h[y].slice();return h}function v(g,h){return g.x-h.x}s.setScreenBox=function(g){var h=this.screenBox,y=this.pixelRatio;h[0]=Math.round(g[0]*y)|0,h[1]=Math.round(g[1]*y)|0,h[2]=Math.round(g[2]*y)|0,h[3]=Math.round(g[3]*y)|0,this.setDirty()},s.setDataBox=function(g){var h=this.dataBox,y=h[0]!==g[0]||h[1]!==g[1]||h[2]!==g[2]||h[3]!==g[3];y&&(h[0]=g[0],h[1]=g[1],h[2]=g[2],h[3]=g[3],this.setDirty())},s.setViewBox=function(g){var h=this.pixelRatio,y=this.viewBox;y[0]=Math.round(g[0]*h)|0,y[1]=Math.round(g[1]*h)|0,y[2]=Math.round(g[2]*h)|0,y[3]=Math.round(g[3]*h)|0;var p=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((g[2]-g[0])*p)|0,Math.round((g[3]-g[1])*p)|0],this.setDirty()},s.update=function(g){g=g||{};var h=this.gl;this.pixelRatio=g.pixelRatio||1;var y=this.pixelRatio;this.pickPixelRatio=Math.max(y,1),this.setScreenBox(g.screenBox||[0,0,h.drawingBufferWidth/y,h.drawingBufferHeight/y]),this.screenBox,this.setViewBox(g.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/y,.125*(this.screenBox[3]-this.screenBox[1])/y,.875*(this.screenBox[2]-this.screenBox[0])/y,.875*(this.screenBox[3]-this.screenBox[1])/y]);var p=this.viewBox,A=(p[2]-p[0])/(p[3]-p[1]);this.setDataBox(g.dataBox||[-10,-10/A,10,10/A]),this.borderColor=g.borderColor!==!1?(g.borderColor||[0,0,0,0]).slice():!1,this.backgroundColor=(g.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(g.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(g.gridLineWidth||[1,1]).slice(),this.gridLineColor=i(g.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(g.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(g.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=i(g.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(g.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(g.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=i(g.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(g.titleCenter||[.5*(p[0]+p[2])/y,(p[3]+120)/y]).slice(),this.titleEnable=!("titleEnable"in g)||!!g.titleEnable,this.titleAngle=g.titleAngle||0,this.titleColor=(g.titleColor||[0,0,0,1]).slice(),this.labelPad=(g.labelPad||[15,15,15,15]).slice(),this.labelAngle=(g.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(g.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=i(g.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(g.tickPad||[15,15,15,15]).slice(),this.tickAngle=(g.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(g.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=i(g.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(g.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(g.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=i(g.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var m=g.ticks||[[],[]],M=this._tickBounds;M[0]=M[1]=1/0,M[2]=M[3]=-1/0;for(var x=0;x<2;++x){var T=m[x].slice(0);T.length!==0&&(T.sort(v),M[x]=Math.min(M[x],T[0].x),M[x+2]=Math.max(M[x+2],T[T.length-1].x))}this.grid.update({bounds:M,ticks:m}),this.text.update({bounds:M,ticks:m,labels:g.labels||["x","y"],labelSize:g.labelSize||[12,12],labelFont:g.labelFont||["sans-serif","sans-serif"],title:g.title||"",titleSize:g.titleSize||18,titleFont:g.titleFont||"sans-serif"}),this.static=!!g.static,this.setDirty()},s.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var g=this.objects.length-1;g>=0;--g)this.objects[g].dispose();this.objects.length=0;for(var g=this.overlays.length-1;g>=0;--g)this.overlays[g].dispose();this.overlays.length=0,this.gl=null},s.addObject=function(g){this.objects.indexOf(g)<0&&(this.objects.push(g),this.setDirty())},s.removeObject=function(g){for(var h=this.objects,y=0;y<h.length;++y)if(h[y]===g){h.splice(y,1),this.setDirty();break}},s.addOverlay=function(g){this.overlays.indexOf(g)<0&&(this.overlays.push(g),this.setOverlayDirty())},s.removeOverlay=function(g){for(var h=this.overlays,y=0;y<h.length;++y)if(h[y]===g){h.splice(y,1),this.setOverlayDirty();break}};function u(g){var h=g.gl,y=e(h,[h.drawingBufferWidth,h.drawingBufferHeight]),p=new c(h,y);return p.grid=o(p),p.text=a(p),p.line=r(p),p.box=n(p),p.update(g),p}},{"./lib/box":113,"./lib/grid":114,"./lib/line":115,"./lib/text":117,"gl-select-static":131}],119:[function(l,b,w){b.exports=s;var e=l("right-now"),o=l("3d-view"),a=l("mouse-change"),r=l("mouse-wheel"),n=l("mouse-event-offset"),c=l("has-passive-events");function s(i,v){i=i||document.body,v=v||{};var u=[.01,1/0];"distanceLimits"in v&&(u[0]=v.distanceLimits[0],u[1]=v.distanceLimits[1]),"zoomMin"in v&&(u[0]=v.zoomMin),"zoomMax"in v&&(u[1]=v.zoomMax);var g=o({center:v.center||[0,0,0],up:v.up||[0,1,0],eye:v.eye||[0,0,10],mode:v.mode||"orbit",distanceLimits:u}),h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],y=0,p=i.clientWidth,A=i.clientHeight,m={keyBindingMode:"rotate",enableWheel:!0,view:g,element:i,delay:v.delay||16,rotateSpeed:v.rotateSpeed||1,zoomSpeed:v.zoomSpeed||1,translateSpeed:v.translateSpeed||1,flipX:!!v.flipX,flipY:!!v.flipY,modes:g.modes,_ortho:v._ortho||v.projection&&v.projection.type==="orthographic"||!1,tick:function(){var M=e(),x=this.delay,T=M-2*x;g.idle(M-x),g.recalcMatrix(T),g.flush(M-(100+x*2));for(var _=!0,f=g.computedMatrix,L=0;L<16;++L)_=_&&h[L]===f[L],h[L]=f[L];var S=i.clientWidth===p&&i.clientHeight===A;return p=i.clientWidth,A=i.clientHeight,_?!S:(y=Math.exp(g.computedRadius[0]),!0)},lookAt:function(M,x,T){g.lookAt(g.lastT(),M,x,T)},rotate:function(M,x,T){g.rotate(g.lastT(),M,x,T)},pan:function(M,x,T){g.pan(g.lastT(),M,x,T)},translate:function(M,x,T){g.translate(g.lastT(),M,x,T)}};return Object.defineProperties(m,{matrix:{get:function(){return g.computedMatrix},set:function(M){return g.setMatrix(g.lastT(),M),g.computedMatrix},enumerable:!0},mode:{get:function(){return g.getMode()},set:function(M){var x=g.computedUp.slice(),T=g.computedEye.slice(),_=g.computedCenter.slice();if(g.setMode(M),M==="turntable"){var f=e();g._active.lookAt(f,T,_,x),g._active.lookAt(f+500,T,_,[0,0,1]),g._active.flush(f)}return g.getMode()},enumerable:!0},center:{get:function(){return g.computedCenter},set:function(M){return g.lookAt(g.lastT(),null,M),g.computedCenter},enumerable:!0},eye:{get:function(){return g.computedEye},set:function(M){return g.lookAt(g.lastT(),M),g.computedEye},enumerable:!0},up:{get:function(){return g.computedUp},set:function(M){return g.lookAt(g.lastT(),null,null,M),g.computedUp},enumerable:!0},distance:{get:function(){return y},set:function(M){return g.setDistance(g.lastT(),M),M},enumerable:!0},distanceLimits:{get:function(){return g.getDistanceLimits(u)},set:function(M){return g.setDistanceLimits(M),M},enumerable:!0}}),i.addEventListener("contextmenu",function(M){return M.preventDefault(),!1}),m._lastX=-1,m._lastY=-1,m._lastMods={shift:!1,control:!1,alt:!1,meta:!1},m.enableMouseListeners=function(){m.mouseListener=a(i,M),i.addEventListener("touchstart",function(x){var T=n(x.changedTouches[0],i);M(0,T[0],T[1],m._lastMods),M(1,T[0],T[1],m._lastMods)},c?{passive:!0}:!1),i.addEventListener("touchmove",function(x){var T=n(x.changedTouches[0],i);M(1,T[0],T[1],m._lastMods),x.preventDefault()},c?{passive:!1}:!1),i.addEventListener("touchend",function(x){M(0,m._lastX,m._lastY,m._lastMods)},c?{passive:!0}:!1);function M(x,T,_,f){var L=m.keyBindingMode;if(L!==!1){var S=L==="rotate",k=L==="pan",P=L==="zoom",z=!!f.control,I=!!f.alt,R=!!f.shift,D=!!(x&1),O=!!(x&2),F=!!(x&4),G=1/i.clientHeight,W=G*(T-m._lastX),q=G*(_-m._lastY),J=m.flipX?1:-1,X=m.flipY?1:-1,Z=Math.PI*m.rotateSpeed,se=e();if(m._lastX!==-1&&m._lastY!==-1&&((S&&D&&!z&&!I&&!R||D&&!z&&!I&&R)&&g.rotate(se,J*Z*W,-X*Z*q,0),(k&&D&&!z&&!I&&!R||O||D&&z&&!I&&!R)&&g.pan(se,-m.translateSpeed*W*y,m.translateSpeed*q*y,0),P&&D&&!z&&!I&&!R||F||D&&!z&&I&&!R)){var le=-m.zoomSpeed*q/window.innerHeight*(se-g.lastT())*100;g.pan(se,0,0,y*(Math.exp(le)-1))}return m._lastX=T,m._lastY=_,m._lastMods=f,!0}}m.wheelListener=r(i,function(x,T){if(m.keyBindingMode!==!1&&!!m.enableWheel){var _=m.flipX?1:-1,f=m.flipY?1:-1,L=e();if(Math.abs(x)>Math.abs(T))g.rotate(L,0,0,-x*_*Math.PI*m.rotateSpeed/window.innerWidth);else if(!m._ortho){var S=-m.zoomSpeed*f*T/window.innerHeight*(L-g.lastT())/20;g.pan(L,0,0,y*(Math.exp(S)-1))}}},!0)},m.enableMouseListeners(),m}},{"3d-view":7,"has-passive-events":232,"mouse-change":247,"mouse-event-offset":248,"mouse-wheel":250,"right-now":278}],120:[function(l,b,w){var e=l("glslify"),o=l("gl-shader"),a=e([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),r=e([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);b.exports=function(n){return o(n,a,r,null,[{name:"position",type:"vec2"}])}},{"gl-shader":132,glslify:231}],121:[function(l,b,w){var e=l("./camera.js"),o=l("gl-axes3d"),a=l("gl-axes3d/properties"),r=l("gl-spikes3d"),n=l("gl-select-static"),c=l("gl-fbo"),s=l("a-big-triangle"),i=l("mouse-change"),v=l("gl-mat4/perspective"),u=l("gl-mat4/ortho"),g=l("./lib/shader"),h=l("is-mobile")({tablet:!0,featureDetect:!0});b.exports={createScene:M,createCamera:e};function y(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function p(T,_){var f=null;try{f=T.getContext("webgl",_),f||(f=T.getContext("experimental-webgl",_))}catch{return null}return f}function A(T){var _=Math.round(Math.log(Math.abs(T))/Math.log(10));if(_<0){var f=Math.round(Math.pow(10,-_));return Math.ceil(T*f)/f}else if(_>0){var f=Math.round(Math.pow(10,_));return Math.ceil(T/f)*f}return Math.ceil(T)}function m(T){return typeof T=="boolean"?T:!0}function M(T){T=T||{},T.camera=T.camera||{};var _=T.canvas;if(!_)if(_=document.createElement("canvas"),T.container){var f=T.container;f.appendChild(_)}else document.body.appendChild(_);var L=T.gl;if(L||(T.glOptions&&(h=!!T.glOptions.preserveDrawingBuffer),L=p(_,T.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:h})),!L)throw new Error("webgl not supported");var S=T.bounds||[[-10,-10,-10],[10,10,10]],k=new y,P=c(L,L.drawingBufferWidth,L.drawingBufferHeight,{preferFloat:!h}),z=g(L),I=T.cameraObject&&T.cameraObject._ortho===!0||T.camera.projection&&T.camera.projection.type==="orthographic"||!1,R={eye:T.camera.eye||[2,0,0],center:T.camera.center||[0,0,0],up:T.camera.up||[0,1,0],zoomMin:T.camera.zoomMax||.1,zoomMax:T.camera.zoomMin||100,mode:T.camera.mode||"turntable",_ortho:I},D=T.axes||{},O=o(L,D);O.enable=!D.disable;var F=T.spikes||{},G=r(L,F),W=[],q=[],J=[],X=[],Z=!0,U=!0,se=new Array(16),le=new Array(16),oe={view:null,projection:se,model:le,_ortho:!1},U=!0,V=[L.drawingBufferWidth,L.drawingBufferHeight],re=T.cameraObject||e(_,R),ee={gl:L,contextLost:!1,pixelRatio:T.pixelRatio||1,canvas:_,selection:k,camera:re,axes:O,axesPixels:null,spikes:G,bounds:S,objects:W,shape:V,aspect:T.aspectRatio||[1,1,1],pickRadius:T.pickRadius||10,zNear:T.zNear||.01,zFar:T.zFar||1e3,fovy:T.fovy||Math.PI/4,clearColor:T.clearColor||[0,0,0,0],autoResize:m(T.autoResize),autoBounds:m(T.autoBounds),autoScale:!!T.autoScale,autoCenter:m(T.autoCenter),clipToBounds:m(T.clipToBounds),snapToData:!!T.snapToData,onselect:T.onselect||null,onrender:T.onrender||null,onclick:T.onclick||null,cameraParams:oe,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(me){this.aspect[0]=me.x,this.aspect[1]=me.y,this.aspect[2]=me.z,U=!0},setBounds:function(me,ke){this.bounds[0][me]=ke.min,this.bounds[1][me]=ke.max},setClearColor:function(me){this.clearColor=me},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},j=[L.drawingBufferWidth/ee.pixelRatio|0,L.drawingBufferHeight/ee.pixelRatio|0];function Q(){if(!ee._stopped&&!!ee.autoResize){var me=_.parentNode,ke=1,Ae=1;me&&me!==document.body?(ke=me.clientWidth,Ae=me.clientHeight):(ke=window.innerWidth,Ae=window.innerHeight);var Ne=Math.ceil(ke*ee.pixelRatio)|0,He=Math.ceil(Ae*ee.pixelRatio)|0;if(Ne!==_.width||He!==_.height){_.width=Ne,_.height=He;var Ge=_.style;Ge.position=Ge.position||"absolute",Ge.left="0px",Ge.top="0px",Ge.width=ke+"px",Ge.height=Ae+"px",Z=!0}}}ee.autoResize&&Q(),window.addEventListener("resize",Q);function ne(){for(var me=W.length,ke=X.length,Ae=0;Ae<ke;++Ae)J[Ae]=0;e:for(var Ae=0;Ae<me;++Ae){var Ne=W[Ae],He=Ne.pickSlots;if(!He){q[Ae]=-1;continue}for(var Ge=0;Ge<ke;++Ge)if(J[Ge]+He<255){q[Ae]=Ge,Ne.setPickBase(J[Ge]+1),J[Ge]+=He;continue e}var _e=n(L,V);q[Ae]=ke,X.push(_e),J.push(He),Ne.setPickBase(1),ke+=1}for(;ke>0&&J[ke-1]===0;)J.pop(),X.pop().dispose()}ee.update=function(me){ee._stopped||(Z=!0,U=!0)},ee.add=function(me){ee._stopped||(me.axes=O,W.push(me),q.push(-1),Z=!0,U=!0,ne())},ee.remove=function(me){if(!ee._stopped){var ke=W.indexOf(me);ke<0||(W.splice(ke,1),q.pop(),Z=!0,U=!0,ne())}},ee.dispose=function(){if(!ee._stopped&&(ee._stopped=!0,window.removeEventListener("resize",Q),_.removeEventListener("webglcontextlost",ae),ee.mouseListener.enabled=!1,!ee.contextLost)){O.dispose(),G.dispose();for(var me=0;me<W.length;++me)W[me].dispose();P.dispose();for(var me=0;me<X.length;++me)X[me].dispose();z.dispose(),L=null,O=null,G=null,W=[]}},ee._mouseRotating=!1,ee._prevButtons=0,ee.enableMouseListeners=function(){ee.mouseListener=i(_,function(me,ke,Ae){if(!ee._stopped){var Ne=X.length,He=W.length,Ge=k.object;k.distance=1/0,k.mouse[0]=ke,k.mouse[1]=Ae,k.object=null,k.screen=null,k.dataCoordinate=k.dataPosition=null;var _e=!1;if(me&&ee._prevButtons)ee._mouseRotating=!0;else{ee._mouseRotating&&(U=!0),ee._mouseRotating=!1;for(var De=0;De<Ne;++De){var Ye=X[De].query(ke,j[1]-Ae-1,ee.pickRadius);if(Ye){if(Ye.distance>k.distance)continue;for(var qe=0;qe<He;++qe){var Ue=W[qe];if(q[qe]===De){var Ie=Ue.pick(Ye);Ie&&(k.buttons=me,k.screen=Ye.coord,k.distance=Ye.distance,k.object=Ue,k.index=Ie.distance,k.dataPosition=Ie.position,k.dataCoordinate=Ie.dataCoordinate,k.data=Ie,_e=!0)}}}}}Ge&&Ge!==k.object&&(Ge.highlight&&Ge.highlight(null),Z=!0),k.object&&(k.object.highlight&&k.object.highlight(k.data),Z=!0),_e=_e||k.object!==Ge,_e&&ee.onselect&&ee.onselect(k),me&1&&!(ee._prevButtons&1)&&ee.onclick&&ee.onclick(k),ee._prevButtons=me}})};function ae(){if(ee.contextLost)return!0;L.isContextLost()&&(ee.contextLost=!0,ee.mouseListener.enabled=!1,ee.selection.object=null,ee.oncontextloss&&ee.oncontextloss())}_.addEventListener("webglcontextlost",ae);function ie(){if(!ae()){L.colorMask(!0,!0,!0,!0),L.depthMask(!0),L.disable(L.BLEND),L.enable(L.DEPTH_TEST),L.depthFunc(L.LEQUAL);for(var me=W.length,ke=X.length,Ae=0;Ae<ke;++Ae){var Ne=X[Ae];Ne.shape=j,Ne.begin();for(var He=0;He<me;++He)if(q[He]===Ae){var Ge=W[He];Ge.drawPick&&(Ge.pixelRatio=1,Ge.drawPick(oe))}Ne.end()}}}var ue=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],xe=[ue[0].slice(),ue[1].slice()];function he(){if(!ae()){Q();var me=ee.camera.tick();oe.view=ee.camera.matrix,Z=Z||me,U=U||me,O.pixelRatio=ee.pixelRatio,G.pixelRatio=ee.pixelRatio;var ke=W.length,Ae=ue[0],Ne=ue[1];Ae[0]=Ae[1]=Ae[2]=1/0,Ne[0]=Ne[1]=Ne[2]=-1/0;for(var He=0;He<ke;++He){var Ge=W[He];Ge.pixelRatio=ee.pixelRatio,Ge.axes=ee.axes,Z=Z||!!Ge.dirty,U=U||!!Ge.dirty;var _e=Ge.bounds;if(_e)for(var De=_e[0],Ye=_e[1],qe=0;qe<3;++qe)Ae[qe]=Math.min(Ae[qe],De[qe]),Ne[qe]=Math.max(Ne[qe],Ye[qe])}var Ue=ee.bounds;if(ee.autoBounds)for(var qe=0;qe<3;++qe){if(Ne[qe]<Ae[qe])Ae[qe]=-1,Ne[qe]=1;else{Ae[qe]===Ne[qe]&&(Ae[qe]-=1,Ne[qe]+=1);var Ie=.05*(Ne[qe]-Ae[qe]);Ae[qe]=Ae[qe]-Ie,Ne[qe]=Ne[qe]+Ie}Ue[0][qe]=Ae[qe],Ue[1][qe]=Ne[qe]}for(var Ve=!1,qe=0;qe<3;++qe)Ve=Ve||xe[0][qe]!==Ue[0][qe]||xe[1][qe]!==Ue[1][qe],xe[0][qe]=Ue[0][qe],xe[1][qe]=Ue[1][qe];if(U=U||Ve,Z=Z||Ve,!!Z){if(Ve){for(var dt=[0,0,0],He=0;He<3;++He)dt[He]=A((Ue[1][He]-Ue[0][He])/10);O.autoTicks?O.update({bounds:Ue,tickSpacing:dt}):O.update({bounds:Ue})}var Dt=L.drawingBufferWidth,Yt=L.drawingBufferHeight;V[0]=Dt,V[1]=Yt,j[0]=Math.max(Dt/ee.pixelRatio,1)|0,j[1]=Math.max(Yt/ee.pixelRatio,1)|0,x(ee,I);for(var He=0;He<ke;++He){var Ge=W[He];Ge.axesBounds=Ue,ee.clipToBounds&&(Ge.clipBounds=Ue)}k.object&&(ee.snapToData?G.position=k.dataCoordinate:G.position=k.dataPosition,G.bounds=Ue),U&&(U=!1,ie()),ee.axesPixels=a(ee.axes,oe,Dt,Yt),ee.onrender&&ee.onrender(),L.bindFramebuffer(L.FRAMEBUFFER,null),L.viewport(0,0,Dt,Yt),ee.clearRGBA(),L.depthMask(!0),L.colorMask(!0,!0,!0,!0),L.enable(L.DEPTH_TEST),L.depthFunc(L.LEQUAL),L.disable(L.BLEND),L.disable(L.CULL_FACE);var kt=!1;O.enable&&(kt=kt||O.isTransparent(),O.draw(oe)),G.axes=O,k.object&&G.draw(oe),L.disable(L.CULL_FACE);for(var He=0;He<ke;++He){var Ge=W[He];Ge.axes=O,Ge.pixelRatio=ee.pixelRatio,Ge.isOpaque&&Ge.isOpaque()&&Ge.draw(oe),Ge.isTransparent&&Ge.isTransparent()&&(kt=!0)}if(kt){P.shape=V,P.bind(),L.clear(L.DEPTH_BUFFER_BIT),L.colorMask(!1,!1,!1,!1),L.depthMask(!0),L.depthFunc(L.LESS),O.enable&&O.isTransparent()&&O.drawTransparent(oe);for(var He=0;He<ke;++He){var Ge=W[He];Ge.isOpaque&&Ge.isOpaque()&&Ge.draw(oe)}L.enable(L.BLEND),L.blendEquation(L.FUNC_ADD),L.blendFunc(L.ONE,L.ONE_MINUS_SRC_ALPHA),L.colorMask(!0,!0,!0,!0),L.depthMask(!1),L.clearColor(0,0,0,0),L.clear(L.COLOR_BUFFER_BIT),O.isTransparent()&&O.drawTransparent(oe);for(var He=0;He<ke;++He){var Ge=W[He];Ge.isTransparent&&Ge.isTransparent()&&Ge.drawTransparent(oe)}L.bindFramebuffer(L.FRAMEBUFFER,null),L.blendFunc(L.ONE,L.ONE_MINUS_SRC_ALPHA),L.disable(L.DEPTH_TEST),z.bind(),P.color[0].bind(0),z.uniforms.accumBuffer=0,s(L),L.disable(L.BLEND)}Z=!1;for(var He=0;He<ke;++He)W[He].dirty=!1}}}function ge(){ee._stopped||ee.contextLost||(he(),requestAnimationFrame(ge))}return ee.enableMouseListeners(),ge(),ee.redraw=function(){ee._stopped||(Z=!0,he())},ee}function x(T,_){var f=T.bounds,L=T.cameraParams,S=L.projection,k=L.model,P=T.gl.drawingBufferWidth,z=T.gl.drawingBufferHeight,I=T.zNear,R=T.zFar,D=T.fovy,O=P/z;_?(u(S,-O,O,-1,1,I,R),L._ortho=!0):(v(S,D,O,I,R),L._ortho=!1);for(var F=0;F<16;++F)k[F]=0;k[15]=1;for(var G=0,F=0;F<3;++F)G=Math.max(G,f[1][F]-f[0][F]);for(var F=0;F<3;++F)T.autoScale?k[5*F]=T.aspect[F]/(f[1][F]-f[0][F]):k[5*F]=1/G,T.autoCenter&&(k[12+F]=-k[5*F]*.5*(f[0][F]+f[1][F]))}},{"./camera.js":119,"./lib/shader":120,"a-big-triangle":8,"gl-axes3d":70,"gl-axes3d/properties":77,"gl-fbo":86,"gl-mat4/ortho":101,"gl-mat4/perspective":102,"gl-select-static":131,"gl-spikes3d":141,"is-mobile":238,"mouse-change":247}],122:[function(l,b,w){var e=l("glslify");w.pointVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),w.pointFragment=e([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),w.pickVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),w.pickFragment=e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},{glslify:231}],123:[function(l,b,w){var e=l("gl-shader"),o=l("gl-buffer"),a=l("typedarray-pool"),r=l("./lib/shader");b.exports=i;function n(v,u,g,h,y){this.plot=v,this.offsetBuffer=u,this.pickBuffer=g,this.shader=h,this.pickShader=y,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}var c=n.prototype;c.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},c.update=function(v){var u;v=v||{};function g(x,T){return x in v?v[x]:T}this.sizeMin=g("sizeMin",.5),this.sizeMax=g("sizeMax",20),this.color=g("color",[1,0,0,1]).slice(),this.areaRatio=g("areaRatio",1),this.borderColor=g("borderColor",[0,0,0,1]).slice(),this.blend=g("blend",!1);var h=v.positions.length>>>1,y=v.positions instanceof Float32Array,p=v.idToIndex instanceof Int32Array&&v.idToIndex.length>=h,A=v.positions,m=y?A:a.mallocFloat32(A.length),M=p?v.idToIndex:a.mallocInt32(h);if(y||m.set(A),!p)for(m.set(A),u=0;u<h;u++)M[u]=u;this.points=A,this.offsetBuffer.update(m),this.pickBuffer.update(M),y||a.free(m),p||a.free(M),this.pointCount=h,this.pickOffset=0};function s(v,u){var g=0,h=v.length>>>1,y;for(y=0;y<h;y++){var p=v[y*2],A=v[y*2+1];p>=u[0]&&p<=u[2]&&A>=u[1]&&A<=u[3]&&g++}return g}c.unifiedDraw=function(){var v=[1,0,0,0,1,0,0,0,1],u=[0,0,0,0];return function(g){var h=g!==void 0,y=h?this.pickShader:this.shader,p=this.plot.gl,A=this.plot.dataBox;if(this.pointCount===0)return g;var m=A[2]-A[0],M=A[3]-A[1],x=s(this.points,A),T=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(x,.33333)));v[0]=2/m,v[4]=2/M,v[6]=-2*A[0]/m-1,v[7]=-2*A[1]/M-1,this.offsetBuffer.bind(),y.bind(),y.attributes.position.pointer(),y.uniforms.matrix=v,y.uniforms.color=this.color,y.uniforms.borderColor=this.borderColor,y.uniforms.pointCloud=T<5,y.uniforms.pointSize=T,y.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),h&&(u[0]=g&255,u[1]=g>>8&255,u[2]=g>>16&255,u[3]=g>>24&255,this.pickBuffer.bind(),y.attributes.pickId.pointer(p.UNSIGNED_BYTE),y.uniforms.pickOffset=u,this.pickOffset=g);var _=p.getParameter(p.BLEND),f=p.getParameter(p.DITHER);return _&&!this.blend&&p.disable(p.BLEND),f&&p.disable(p.DITHER),p.drawArrays(p.POINTS,0,this.pointCount),_&&!this.blend&&p.enable(p.BLEND),f&&p.enable(p.DITHER),g+this.pointCount}}(),c.draw=c.unifiedDraw,c.drawPick=c.unifiedDraw,c.pick=function(v,u,g){var h=this.pickOffset,y=this.pointCount;if(g<h||g>=h+y)return null;var p=g-h,A=this.points;return{object:this,pointId:p,dataCoord:[A[2*p],A[2*p+1]]}};function i(v,u){var g=v.gl,h=o(g),y=o(g),p=e(g,r.pointVertex,r.pointFragment),A=e(g,r.pickVertex,r.pickFragment),m=new n(v,h,y,p,A);return m.update(u),v.addObject(m),m}},{"./lib/shader":122,"gl-buffer":78,"gl-shader":132,"typedarray-pool":308}],124:[function(l,b,w){b.exports=e;function e(o,a,r,n){var c=a[0],s=a[1],i=a[2],v=a[3],u=r[0],g=r[1],h=r[2],y=r[3],p,A,m,M,x;return A=c*u+s*g+i*h+v*y,A<0&&(A=-A,u=-u,g=-g,h=-h,y=-y),1-A>1e-6?(p=Math.acos(A),m=Math.sin(p),M=Math.sin((1-n)*p)/m,x=Math.sin(n*p)/m):(M=1-n,x=n),o[0]=M*c+x*u,o[1]=M*s+x*g,o[2]=M*i+x*h,o[3]=M*v+x*y,o}},{}],125:[function(l,b,w){b.exports=function(e){return!e&&e!==0?"":e.toString()}},{}],126:[function(l,b,w){var e=l("vectorize-text");b.exports=a;var o={};function a(r,n,c){var s=o[n];if(s||(s=o[n]={}),r in s)return s[r];var i={textAlign:"center",textBaseline:"middle",lineHeight:1,font:n,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}};i.triangles=!0;var v=e(r,i);i.triangles=!1;var u=e(r,i),g,h;if(c&&c!==1){for(g=0;g<v.positions.length;++g)for(h=0;h<v.positions[g].length;++h)v.positions[g][h]/=c;for(g=0;g<u.positions.length;++g)for(h=0;h<u.positions[g].length;++h)u.positions[g][h]/=c}var y=[[1/0,1/0],[-1/0,-1/0]],p=u.positions.length;for(g=0;g<p;++g){var A=u.positions[g];for(h=0;h<2;++h)y[0][h]=Math.min(y[0][h],A[h]),y[1][h]=Math.max(y[1][h],A[h])}return s[r]=[v,u,y]}},{"vectorize-text":311}],127:[function(l,b,w){var e=l("gl-shader"),o=l("glslify"),a=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),r=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),n=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),c=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),s=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),i=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],v={vertex:a,fragment:c,attributes:i},u={vertex:r,fragment:c,attributes:i},g={vertex:n,fragment:c,attributes:i},h={vertex:a,fragment:s,attributes:i},y={vertex:r,fragment:s,attributes:i},p={vertex:n,fragment:s,attributes:i};function A(m,M){var x=e(m,M),T=x.attributes;return T.position.location=0,T.color.location=1,T.glyph.location=2,T.id.location=3,x}w.createPerspective=function(m){return A(m,v)},w.createOrtho=function(m){return A(m,u)},w.createProject=function(m){return A(m,g)},w.createPickPerspective=function(m){return A(m,h)},w.createPickOrtho=function(m){return A(m,y)},w.createPickProject=function(m){return A(m,p)}},{"gl-shader":132,glslify:231}],128:[function(l,b,w){var e=l("is-string-blank"),o=l("gl-buffer"),a=l("gl-vao"),r=l("typedarray-pool"),n=l("gl-mat4/multiply"),c=l("./lib/shaders"),s=l("./lib/glyphs"),i=l("./lib/get-simple-string"),v=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b.exports=q;function u(J,X){var Z=J[0],se=J[1],le=J[2],oe=J[3];return J[0]=X[0]*Z+X[4]*se+X[8]*le+X[12]*oe,J[1]=X[1]*Z+X[5]*se+X[9]*le+X[13]*oe,J[2]=X[2]*Z+X[6]*se+X[10]*le+X[14]*oe,J[3]=X[3]*Z+X[7]*se+X[11]*le+X[15]*oe,J}function g(J,X,Z,se){return u(se,se),u(se,se),u(se,se)}function h(J,X){this.index=J,this.dataCoordinate=this.position=X}function y(J){return J===!0||J>1?1:J}function p(J,X,Z,se,le,oe,U,V,re,ee,j,Q){this.gl=J,this.pixelRatio=1,this.shader=X,this.orthoShader=Z,this.projectShader=se,this.pointBuffer=le,this.colorBuffer=oe,this.glyphBuffer=U,this.idBuffer=V,this.vao=re,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=ee,this.pickOrthoShader=j,this.pickProjectShader=Q,this.points=[],this._selectResult=new h(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}var A=p.prototype;A.pickSlots=1,A.setPickBase=function(J){this.pickId=J},A.isTransparent=function(){if(this.hasAlpha)return!0;for(var J=0;J<3;++J)if(this.axesProject[J]&&this.projectHasAlpha)return!0;return!1},A.isOpaque=function(){if(!this.hasAlpha)return!0;for(var J=0;J<3;++J)if(this.axesProject[J]&&!this.projectHasAlpha)return!0;return!1};var m=[0,0],M=[0,0,0],x=[0,0,0],T=[0,0,0,1],_=[0,0,0,1],f=v.slice(),L=[0,0,0],S=[[0,0,0],[0,0,0]];function k(J){return J[0]=J[1]=J[2]=0,J}function P(J,X){return J[0]=X[0],J[1]=X[1],J[2]=X[2],J[3]=1,J}function z(J,X,Z,se){return J[0]=X[0],J[1]=X[1],J[2]=X[2],J[Z]=se,J}function I(J){for(var X=S,Z=0;Z<2;++Z)for(var se=0;se<3;++se)X[Z][se]=Math.max(Math.min(J[Z][se],1e8),-1e8);return X}function R(J,X,Z,se){var le=X.axesProject,oe=X.gl,U=J.uniforms,V=Z.model||v,re=Z.view||v,ee=Z.projection||v,j=X.axesBounds,Q=I(X.clipBounds),ne;X.axes&&X.axes.lastCubeProps?ne=X.axes.lastCubeProps.axis:ne=[1,1,1],m[0]=2/oe.drawingBufferWidth,m[1]=2/oe.drawingBufferHeight,J.bind(),U.view=re,U.projection=ee,U.screenSize=m,U.highlightId=X.highlightId,U.highlightScale=X.highlightScale,U.clipBounds=Q,U.pickGroup=X.pickId/255,U.pixelRatio=se;for(var ae=0;ae<3;++ae)if(!!le[ae]){U.scale=X.projectScale[ae],U.opacity=X.projectOpacity[ae];for(var ie=f,ue=0;ue<16;++ue)ie[ue]=0;for(var ue=0;ue<4;++ue)ie[5*ue]=1;ie[5*ae]=0,ne[ae]<0?ie[12+ae]=j[0][ae]:ie[12+ae]=j[1][ae],n(ie,V,ie),U.model=ie;var xe=(ae+1)%3,he=(ae+2)%3,ge=k(M),me=k(x);ge[xe]=1,me[he]=1;var ke=g(ee,re,V,P(T,ge)),Ae=g(ee,re,V,P(_,me));if(Math.abs(ke[1])>Math.abs(Ae[1])){var Ne=ke;ke=Ae,Ae=Ne,Ne=ge,ge=me,me=Ne;var He=xe;xe=he,he=He}ke[0]<0&&(ge[xe]=-1),Ae[1]>0&&(me[he]=-1);for(var Ge=0,_e=0,ue=0;ue<4;++ue)Ge+=Math.pow(V[4*xe+ue],2),_e+=Math.pow(V[4*he+ue],2);ge[xe]/=Math.sqrt(Ge),me[he]/=Math.sqrt(_e),U.axes[0]=ge,U.axes[1]=me,U.fragClipBounds[0]=z(L,Q[0],ae,-1e8),U.fragClipBounds[1]=z(L,Q[1],ae,1e8),X.vao.bind(),X.vao.draw(oe.TRIANGLES,X.vertexCount),X.lineWidth>0&&(oe.lineWidth(X.lineWidth*se),X.vao.draw(oe.LINES,X.lineVertexCount,X.vertexCount)),X.vao.unbind()}}var D=[-1e8,-1e8,-1e8],O=[1e8,1e8,1e8],F=[D,O];function G(J,X,Z,se,le,oe,U){var V=Z.gl;if((oe===Z.projectHasAlpha||U)&&R(X,Z,se,le),oe===Z.hasAlpha||U){J.bind();var re=J.uniforms;re.model=se.model||v,re.view=se.view||v,re.projection=se.projection||v,m[0]=2/V.drawingBufferWidth,m[1]=2/V.drawingBufferHeight,re.screenSize=m,re.highlightId=Z.highlightId,re.highlightScale=Z.highlightScale,re.fragClipBounds=F,re.clipBounds=Z.axes.bounds,re.opacity=Z.opacity,re.pickGroup=Z.pickId/255,re.pixelRatio=le,Z.vao.bind(),Z.vao.draw(V.TRIANGLES,Z.vertexCount),Z.lineWidth>0&&(V.lineWidth(Z.lineWidth*le),Z.vao.draw(V.LINES,Z.lineVertexCount,Z.vertexCount)),Z.vao.unbind()}}A.draw=function(J){var X=this.useOrtho?this.orthoShader:this.shader;G(X,this.projectShader,this,J,this.pixelRatio,!1,!1)},A.drawTransparent=function(J){var X=this.useOrtho?this.orthoShader:this.shader;G(X,this.projectShader,this,J,this.pixelRatio,!0,!1)},A.drawPick=function(J){var X=this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader;G(X,this.pickProjectShader,this,J,1,!0,!0)},A.pick=function(J){if(!J||J.id!==this.pickId)return null;var X=J.value[2]+(J.value[1]<<8)+(J.value[0]<<16);if(X>=this.pointCount||X<0)return null;var Z=this.points[X],se=this._selectResult;se.index=X;for(var le=0;le<3;++le)se.position[le]=se.dataCoordinate[le]=Z[le];return se},A.highlight=function(J){if(!J)this.highlightId=[1,1,1,1];else{var X=J.index,Z=X&255,se=X>>8&255,le=X>>16&255;this.highlightId=[Z/255,se/255,le/255,0]}};function W(J,X,Z,se){var le;Array.isArray(J)?X<J.length?le=J[X]:le=void 0:le=J,le=i(le);var oe=!0;e(le)&&(le="\u25BC",oe=!1);var U=s(le,Z,se);return{mesh:U[0],lines:U[1],bounds:U[2],visible:oe}}A.update=function(J){if(J=J||{},"perspective"in J&&(this.useOrtho=!J.perspective),"orthographic"in J&&(this.useOrtho=!!J.orthographic),"lineWidth"in J&&(this.lineWidth=J.lineWidth),"project"in J)if(Array.isArray(J.project))this.axesProject=J.project;else{var X=!!J.project;this.axesProject=[X,X,X]}if("projectScale"in J)if(Array.isArray(J.projectScale))this.projectScale=J.projectScale.slice();else{var Z=+J.projectScale;this.projectScale=[Z,Z,Z]}if(this.projectHasAlpha=!1,"projectOpacity"in J){if(Array.isArray(J.projectOpacity))this.projectOpacity=J.projectOpacity.slice();else{var Z=+J.projectOpacity;this.projectOpacity=[Z,Z,Z]}for(var se=0;se<3;++se)this.projectOpacity[se]=y(this.projectOpacity[se]),this.projectOpacity[se]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in J&&(this.opacity=y(J.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var le=J.position,oe=J.font||"normal",U=J.alignment||[0,0],V,re;if(U.length===2)V=U[0],re=U[1];else{V=[],re=[];for(var se=0;se<U.length;++se)V[se]=U[se][0],re[se]=U[se][1]}var ee=[1/0,1/0,1/0],j=[-1/0,-1/0,-1/0],Q=J.glyph,ne=J.color,ae=J.size,ie=J.angle,ue=J.lineColor,xe=-1,he=0,ge=0,me=0;if(le.length){me=le.length;e:for(var se=0;se<me;++se){for(var ke=le[se],Ae=0;Ae<3;++Ae)if(isNaN(ke[Ae])||!isFinite(ke[Ae]))continue e;var Ne=W(Q,se,oe,this.pixelRatio),He=Ne.mesh,Ge=Ne.lines,_e=Ne.bounds;he+=He.cells.length*3,ge+=Ge.edges.length*2}}var De=he+ge,Ye=r.mallocFloat(3*De),qe=r.mallocFloat(4*De),Ue=r.mallocFloat(2*De),Ie=r.mallocUint32(De);if(De>0){var Ve=0,dt=he,Dt=[0,0,0,1],Yt=[0,0,0,1],kt=Array.isArray(ne)&&Array.isArray(ne[0]),Ft=Array.isArray(ue)&&Array.isArray(ue[0]);e:for(var se=0;se<me;++se){xe+=1;for(var ke=le[se],Ae=0;Ae<3;++Ae){if(isNaN(ke[Ae])||!isFinite(ke[Ae]))continue e;j[Ae]=Math.max(j[Ae],ke[Ae]),ee[Ae]=Math.min(ee[Ae],ke[Ae])}var Ne=W(Q,se,oe,this.pixelRatio),He=Ne.mesh,Ge=Ne.lines,_e=Ne.bounds,Nt=Ne.visible;if(!Nt)Dt=[1,1,1,0];else if(Array.isArray(ne)){var Lt;if(kt?se<ne.length?Lt=ne[se]:Lt=[0,0,0,0]:Lt=ne,Lt.length===3){for(var Ae=0;Ae<3;++Ae)Dt[Ae]=Lt[Ae];Dt[3]=1}else if(Lt.length===4){for(var Ae=0;Ae<4;++Ae)Dt[Ae]=Lt[Ae];!this.hasAlpha&&Lt[3]<1&&(this.hasAlpha=!0)}}else Dt[0]=Dt[1]=Dt[2]=0,Dt[3]=1;if(!Nt)Yt=[1,1,1,0];else if(Array.isArray(ue)){var Lt;if(Ft?se<ue.length?Lt=ue[se]:Lt=[0,0,0,0]:Lt=ue,Lt.length===3){for(var Ae=0;Ae<3;++Ae)Yt[Ae]=Lt[Ae];Yt[Ae]=1}else if(Lt.length===4){for(var Ae=0;Ae<4;++Ae)Yt[Ae]=Lt[Ae];!this.hasAlpha&&Lt[3]<1&&(this.hasAlpha=!0)}}else Yt[0]=Yt[1]=Yt[2]=0,Yt[3]=1;var St=.5;Nt?Array.isArray(ae)?se<ae.length?St=+ae[se]:St=12:ae?St=+ae:this.useOrtho&&(St=12):St=0;var it=0;Array.isArray(ie)?se<ie.length?it=+ie[se]:it=0:ie&&(it=+ie);for(var ht=Math.cos(it),Qe=Math.sin(it),ke=le[se],Ae=0;Ae<3;++Ae)j[Ae]=Math.max(j[Ae],ke[Ae]),ee[Ae]=Math.min(ee[Ae],ke[Ae]);var Ce=V,je=re,Ce=0;Array.isArray(V)?se<V.length?Ce=V[se]:Ce=0:V&&(Ce=V);var je=0;Array.isArray(re)?se<re.length?je=re[se]:je=0:re&&(je=re),Ce*=Ce>0?1-_e[0][0]:Ce<0?1+_e[1][0]:1,je*=je>0?1-_e[0][1]:je<0?1+_e[1][1]:1;for(var rt=[Ce,je],Kt=He.cells||[],Bt=He.positions||[],Ae=0;Ae<Kt.length;++Ae)for(var ut=Kt[Ae],Pt=0;Pt<3;++Pt){for(var Tt=0;Tt<3;++Tt)Ye[3*Ve+Tt]=ke[Tt];for(var Tt=0;Tt<4;++Tt)qe[4*Ve+Tt]=Dt[Tt];Ie[Ve]=xe;var Ot=Bt[ut[Pt]];Ue[2*Ve]=St*(ht*Ot[0]-Qe*Ot[1]+rt[0]),Ue[2*Ve+1]=St*(Qe*Ot[0]+ht*Ot[1]+rt[1]),Ve+=1}for(var Kt=Ge.edges,Bt=Ge.positions,Ae=0;Ae<Kt.length;++Ae)for(var ut=Kt[Ae],Pt=0;Pt<2;++Pt){for(var Tt=0;Tt<3;++Tt)Ye[3*dt+Tt]=ke[Tt];for(var Tt=0;Tt<4;++Tt)qe[4*dt+Tt]=Yt[Tt];Ie[dt]=xe;var Ot=Bt[ut[Pt]];Ue[2*dt]=St*(ht*Ot[0]-Qe*Ot[1]+rt[0]),Ue[2*dt+1]=St*(Qe*Ot[0]+ht*Ot[1]+rt[1]),dt+=1}}}this.bounds=[ee,j],this.points=le,this.pointCount=le.length,this.vertexCount=he,this.lineVertexCount=ge,this.pointBuffer.update(Ye),this.colorBuffer.update(qe),this.glyphBuffer.update(Ue),this.idBuffer.update(Ie),r.free(Ye),r.free(qe),r.free(Ue),r.free(Ie)},A.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()};function q(J){var X=J.gl,Z=c.createPerspective(X),se=c.createOrtho(X),le=c.createProject(X),oe=c.createPickPerspective(X),U=c.createPickOrtho(X),V=c.createPickProject(X),re=o(X),ee=o(X),j=o(X),Q=o(X),ne=a(X,[{buffer:re,size:3,type:X.FLOAT},{buffer:ee,size:4,type:X.FLOAT},{buffer:j,size:2,type:X.FLOAT},{buffer:Q,size:4,type:X.UNSIGNED_BYTE,normalized:!0}]),ae=new p(X,Z,se,le,re,ee,j,Q,ne,oe,U,V);return ae.update(J),ae}},{"./lib/get-simple-string":125,"./lib/glyphs":126,"./lib/shaders":127,"gl-buffer":78,"gl-mat4/multiply":100,"gl-vao":150,"is-string-blank":239,"typedarray-pool":308}],129:[function(l,b,w){var e=l("glslify");w.boxVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),w.boxFragment=e([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},{glslify:231}],130:[function(l,b,w){var e=l("gl-shader"),o=l("gl-buffer"),a=l("./lib/shaders");b.exports=c;function r(s,i,v){this.plot=s,this.boxBuffer=i,this.boxShader=v,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}var n=r.prototype;n.draw=function(){if(!!this.enabled){var s=this.plot,i=this.selectBox,v=this.borderWidth;this.innerFill;var u=this.innerColor;this.outerFill;var g=this.outerColor,h=this.borderColor,y=s.box,p=s.screenBox,A=s.dataBox,m=s.viewBox,M=s.pixelRatio,x=(i[0]-A[0])*(m[2]-m[0])/(A[2]-A[0])+m[0],T=(i[1]-A[1])*(m[3]-m[1])/(A[3]-A[1])+m[1],_=(i[2]-A[0])*(m[2]-m[0])/(A[2]-A[0])+m[0],f=(i[3]-A[1])*(m[3]-m[1])/(A[3]-A[1])+m[1];if(x=Math.max(x,m[0]),T=Math.max(T,m[1]),_=Math.min(_,m[2]),f=Math.min(f,m[3]),!(_<x||f<T)){y.bind();var L=p[2]-p[0],S=p[3]-p[1];if(this.outerFill&&(y.drawBox(0,0,L,T,g),y.drawBox(0,T,x,f,g),y.drawBox(0,f,L,S,g),y.drawBox(_,T,L,f,g)),this.innerFill&&y.drawBox(x,T,_,f,u),v>0){var k=v*M;y.drawBox(x-k,T-k,_+k,T+k,h),y.drawBox(x-k,f-k,_+k,f+k,h),y.drawBox(x-k,T-k,x+k,f+k,h),y.drawBox(_-k,T-k,_+k,f+k,h)}}}},n.update=function(s){s=s||{},this.innerFill=!!s.innerFill,this.outerFill=!!s.outerFill,this.innerColor=(s.innerColor||[0,0,0,.5]).slice(),this.outerColor=(s.outerColor||[0,0,0,.5]).slice(),this.borderColor=(s.borderColor||[0,0,0,1]).slice(),this.borderWidth=s.borderWidth||0,this.selectBox=(s.selectBox||this.selectBox).slice()},n.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)};function c(s,i){var v=s.gl,u=o(v,[0,0,0,1,1,0,1,1]),g=e(v,a.boxVertex,a.boxFragment),h=new r(s,u,g);return h.update(i),s.addOverlay(h),h}},{"./lib/shaders":129,"gl-buffer":78,"gl-shader":132}],131:[function(l,b,w){b.exports=v;var e=l("gl-fbo"),o=l("typedarray-pool"),a=l("ndarray"),r=l("bit-twiddle").nextPow2,n=function(u,g,h){for(var y=1e8,p=-1,A=-1,m=u.shape[0],M=u.shape[1],x=0;x<m;x++)for(var T=0;T<M;T++){var _=u.get(x,T,0),f=u.get(x,T,1),L=u.get(x,T,2),S=u.get(x,T,3);if(_<255||f<255||L<255||S<255){var k=g-x,P=h-T,z=k*k+P*P;z<y&&(y=z,p=x,A=T)}}return[p,A,y]};function c(u,g,h,y,p){this.coord=[u,g],this.id=h,this.value=y,this.distance=p}function s(u,g,h){this.gl=u,this.fbo=g,this.buffer=h,this._readTimeout=null;var y=this;this._readCallback=function(){!y.gl||(g.bind(),u.readPixels(0,0,g.shape[0],g.shape[1],u.RGBA,u.UNSIGNED_BYTE,y.buffer),y._readTimeout=null)}}var i=s.prototype;Object.defineProperty(i,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(u){if(!!this.gl){this.fbo.shape=u;var g=this.fbo.shape[0],h=this.fbo.shape[1];if(h*g*4>this.buffer.length){o.free(this.buffer);for(var y=this.buffer=o.mallocUint8(r(h*g*4)),p=0;p<h*g*4;++p)y[p]=255}return u}}}),i.begin=function(){var u=this.gl;this.shape,u&&(this.fbo.bind(),u.clearColor(1,1,1,1),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT))},i.end=function(){var u=this.gl;!u||(u.bindFramebuffer(u.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},i.query=function(u,g,h){if(!this.gl)return null;var y=this.fbo.shape.slice();u=u|0,g=g|0,typeof h!="number"&&(h=1);var p=Math.min(Math.max(u-h,0),y[0])|0,A=Math.min(Math.max(u+h,0),y[0])|0,m=Math.min(Math.max(g-h,0),y[1])|0,M=Math.min(Math.max(g+h,0),y[1])|0;if(A<=p||M<=m)return null;var x=[A-p,M-m],T=a(this.buffer,[x[0],x[1],4],[4,y[0]*4,1],4*(p+y[0]*m)),_=n(T.hi(x[0],x[1],1),h,h),f=_[0],L=_[1];if(f<0||Math.pow(this.radius,2)<_[2])return null;var S=T.get(f,L,0),k=T.get(f,L,1),P=T.get(f,L,2),z=T.get(f,L,3);return new c(f+p|0,L+m|0,S,[k,P,z],Math.sqrt(_[2]))},i.dispose=function(){!this.gl||(this.fbo.dispose(),o.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))};function v(u,g){var h=g[0],y=g[1],p={},A=e(u,h,y,p),m=o.mallocUint8(h*y*4);return new s(u,A,m)}},{"bit-twiddle":32,"gl-fbo":86,ndarray:259,"typedarray-pool":308}],132:[function(l,b,w){var e=l("./lib/create-uniforms"),o=l("./lib/create-attributes"),a=l("./lib/reflect"),r=l("./lib/shader-cache"),n=l("./lib/runtime-reflect"),c=l("./lib/GLError");function s(g){this.gl=g,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var i=s.prototype;i.bind=function(){this.program||this._relink();var g,h=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),y=this.gl.lastAttribCount;if(h>y)for(g=y;g<h;g++)this.gl.enableVertexAttribArray(g);else if(y>h)for(g=h;g<y;g++)this.gl.disableVertexAttribArray(g);this.gl.lastAttribCount=h,this.gl.useProgram(this.program)},i.dispose=function(){for(var g=this.gl.lastAttribCount,h=0;h<g;h++)this.gl.disableVertexAttribArray(h);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};function v(g,h){return g.name<h.name?-1:1}i.update=function(g,h,y,p){if(!h||arguments.length===1){var A=g;g=A.vertex,h=A.fragment,y=A.uniforms,p=A.attributes}var m=this,M=m.gl,x=m._vref;m._vref=r.shader(M,M.VERTEX_SHADER,g),x&&x.dispose(),m.vertShader=m._vref.shader;var T=this._fref;if(m._fref=r.shader(M,M.FRAGMENT_SHADER,h),T&&T.dispose(),m.fragShader=m._fref.shader,!y||!p){var _=M.createProgram();if(M.attachShader(_,m.fragShader),M.attachShader(_,m.vertShader),M.linkProgram(_),!M.getProgramParameter(_,M.LINK_STATUS)){var f=M.getProgramInfoLog(_);throw new c(f,"Error linking program:"+f)}y=y||n.uniforms(M,_),p=p||n.attributes(M,_),M.deleteProgram(_)}p=p.slice(),p.sort(v);var L=[],S=[],k=[],P;for(P=0;P<p.length;++P){var z=p[P];if(z.type.indexOf("mat")>=0){for(var I=z.type.charAt(z.type.length-1)|0,R=new Array(I),D=0;D<I;++D)R[D]=k.length,S.push(z.name+"["+D+"]"),typeof z.location=="number"?k.push(z.location+D):Array.isArray(z.location)&&z.location.length===I&&typeof z.location[D]=="number"?k.push(z.location[D]|0):k.push(-1);L.push({name:z.name,type:z.type,locations:R})}else L.push({name:z.name,type:z.type,locations:[k.length]}),S.push(z.name),typeof z.location=="number"?k.push(z.location|0):k.push(-1)}var O=0;for(P=0;P<k.length;++P)if(k[P]<0){for(;k.indexOf(O)>=0;)O+=1;k[P]=O}var F=new Array(y.length);function G(){m.program=r.program(M,m._vref,m._fref,S,k);for(var W=0;W<y.length;++W)F[W]=M.getUniformLocation(m.program,y[W].name)}G(),m._relink=G,m.types={uniforms:a(y),attributes:a(p)},m.attributes=o(M,m,L,k),Object.defineProperty(m,"uniforms",e(M,m,y,F))};function u(g,h,y,p,A){var m=new s(g);return m.update(h,y,p,A),m}b.exports=u},{"./lib/GLError":133,"./lib/create-attributes":134,"./lib/create-uniforms":135,"./lib/reflect":136,"./lib/runtime-reflect":137,"./lib/shader-cache":138}],133:[function(l,b,w){function e(o,a,r){this.shortMessage=a||"",this.longMessage=r||"",this.rawError=o||"",this.message="gl-shader: "+(a||o||"")+(r?`
`+r:""),this.stack=new Error().stack}e.prototype=new Error,e.prototype.name="GLError",e.prototype.constructor=e,b.exports=e},{}],134:[function(l,b,w){b.exports=s;var e=l("./GLError");function o(i,v,u,g,h,y){this._gl=i,this._wrapper=v,this._index=u,this._locations=g,this._dimension=h,this._constFunc=y}var a=o.prototype;a.pointer=function(v,u,g,h){var y=this,p=y._gl,A=y._locations[y._index];p.vertexAttribPointer(A,y._dimension,v||p.FLOAT,!!u,g||0,h||0),p.enableVertexAttribArray(A)},a.set=function(i,v,u,g){return this._constFunc(this._locations[this._index],i,v,u,g)},Object.defineProperty(a,"location",{get:function(){return this._locations[this._index]},set:function(i){return i!==this._locations[this._index]&&(this._locations[this._index]=i|0,this._wrapper.program=null),i|0}});var r=[function(i,v,u){return u.length===void 0?i.vertexAttrib1f(v,u):i.vertexAttrib1fv(v,u)},function(i,v,u,g){return u.length===void 0?i.vertexAttrib2f(v,u,g):i.vertexAttrib2fv(v,u)},function(i,v,u,g,h){return u.length===void 0?i.vertexAttrib3f(v,u,g,h):i.vertexAttrib3fv(v,u)},function(i,v,u,g,h,y){return u.length===void 0?i.vertexAttrib4f(v,u,g,h,y):i.vertexAttrib4fv(v,u)}];function n(i,v,u,g,h,y,p){var A=r[h],m=new o(i,v,u,g,h,A);Object.defineProperty(y,p,{set:function(M){return i.disableVertexAttribArray(g[u]),A(i,g[u],M),M},get:function(){return m},enumerable:!0})}function c(i,v,u,g,h,y,p){for(var A=new Array(h),m=new Array(h),M=0;M<h;++M)n(i,v,u[M],g,h,A,M),m[M]=A[M];Object.defineProperty(A,"location",{set:function(_){if(Array.isArray(_))for(var f=0;f<h;++f)m[f].location=_[f];else for(var f=0;f<h;++f)m[f].location=_+f;return _},get:function(){for(var _=new Array(h),f=0;f<h;++f)_[f]=g[u[f]];return _},enumerable:!0}),A.pointer=function(_,f,L,S){_=_||i.FLOAT,f=!!f,L=L||h*h,S=S||0;for(var k=0;k<h;++k){var P=g[u[k]];i.vertexAttribPointer(P,h,_,f,L,S+k*h),i.enableVertexAttribArray(P)}};var x=new Array(h),T=i["vertexAttrib"+h+"fv"];Object.defineProperty(y,p,{set:function(_){for(var f=0;f<h;++f){var L=g[u[f]];if(i.disableVertexAttribArray(L),Array.isArray(_[0]))T.call(i,L,_[f]);else{for(var S=0;S<h;++S)x[S]=_[h*f+S];T.call(i,L,x)}}return _},get:function(){return A},enumerable:!0})}function s(i,v,u,g){for(var h={},y=0,p=u.length;y<p;++y){var A=u[y],m=A.name,M=A.type,x=A.locations;switch(M){case"bool":case"int":case"float":n(i,v,x[0],g,1,h,m);break;default:if(M.indexOf("vec")>=0){var T=M.charCodeAt(M.length-1)-48;if(T<2||T>4)throw new e("","Invalid data type for attribute "+m+": "+M);n(i,v,x[0],g,T,h,m)}else if(M.indexOf("mat")>=0){var T=M.charCodeAt(M.length-1)-48;if(T<2||T>4)throw new e("","Invalid data type for attribute "+m+": "+M);c(i,v,x,g,T,h,m)}else throw new e("","Unknown data type for attribute "+m+": "+M);break}}return h}},{"./GLError":133}],135:[function(l,b,w){var e=l("./reflect"),o=l("./GLError");b.exports=n;function a(c){return function(){return c}}function r(c,s){for(var i=new Array(c),v=0;v<c;++v)i[v]=s;return i}function n(c,s,i,v){function u(M){return function(x,T,_){return x.getUniform(T.program,_[M])}}function g(M){return function(T){for(var _=h("",M),f=0;f<_.length;++f){var L=_[f],S=L[0],k=L[1];if(v[k]){var P=T;if(typeof S=="string"&&(S.indexOf(".")===0||S.indexOf("[")===0)){var z=S;if(S.indexOf(".")===0&&(z=S.slice(1)),z.indexOf("]")===z.length-1){var I=z.indexOf("["),R=z.slice(0,I),D=z.slice(I+1,z.length-1);P=R?T[R][D]:T[D]}else P=T[z]}var O=i[k].type,F;switch(O){case"bool":case"int":case"sampler2D":case"samplerCube":c.uniform1i(v[k],P);break;case"float":c.uniform1f(v[k],P);break;default:var G=O.indexOf("vec");if(0<=G&&G<=1&&O.length===4+G){if(F=O.charCodeAt(O.length-1)-48,F<2||F>4)throw new o("","Invalid data type");switch(O.charAt(0)){case"b":case"i":c["uniform"+F+"iv"](v[k],P);break;case"v":c["uniform"+F+"fv"](v[k],P);break;default:throw new o("","Unrecognized data type for vector "+name+": "+O)}}else if(O.indexOf("mat")===0&&O.length===4){if(F=O.charCodeAt(O.length-1)-48,F<2||F>4)throw new o("","Invalid uniform dimension type for matrix "+name+": "+O);c["uniformMatrix"+F+"fv"](v[k],!1,P);break}else throw new o("","Unknown uniform data type for "+name+": "+O)}}}}}function h(M,x){if(typeof x!="object")return[[M,x]];var T=[];for(var _ in x){var f=x[_],L=M;parseInt(_)+""===_?L+="["+_+"]":L+="."+_,typeof f=="object"?T.push.apply(T,h(L,f)):T.push([L,f])}return T}function y(M){switch(M){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var x=M.indexOf("vec");if(0<=x&&x<=1&&M.length===4+x){var T=M.charCodeAt(M.length-1)-48;if(T<2||T>4)throw new o("","Invalid data type");return M.charAt(0)==="b"?r(T,!1):r(T,0)}else if(M.indexOf("mat")===0&&M.length===4){var T=M.charCodeAt(M.length-1)-48;if(T<2||T>4)throw new o("","Invalid uniform dimension type for matrix "+name+": "+M);return r(T*T,0)}else throw new o("","Unknown uniform data type for "+name+": "+M)}}function p(M,x,T){if(typeof T=="object"){var _=A(T);Object.defineProperty(M,x,{get:a(_),set:g(T),enumerable:!0,configurable:!1})}else v[T]?Object.defineProperty(M,x,{get:u(T),set:g(T),enumerable:!0,configurable:!1}):M[x]=y(i[T].type)}function A(M){var x;if(Array.isArray(M)){x=new Array(M.length);for(var T=0;T<M.length;++T)p(x,T,M[T])}else{x={};for(var _ in M)p(x,_,M[_])}return x}var m=e(i,!0);return{get:a(A(m)),set:g(m),enumerable:!0,configurable:!0}}},{"./GLError":133,"./reflect":136}],136:[function(l,b,w){b.exports=e;function e(o,a){for(var r={},n=0;n<o.length;++n)for(var c=o[n].name,s=c.split("."),i=r,v=0;v<s.length;++v){var u=s[v].split("[");if(u.length>1){u[0]in i||(i[u[0]]=[]),i=i[u[0]];for(var g=1;g<u.length;++g){var h=parseInt(u[g]);g<u.length-1||v<s.length-1?(h in i||(g<u.length-1?i[h]=[]:i[h]={}),i=i[h]):a?i[h]=n:i[h]=o[n].type}}else v<s.length-1?(u[0]in i||(i[u[0]]={}),i=i[u[0]]):a?i[u[0]]=n:i[u[0]]=o[n].type}return r}},{}],137:[function(l,b,w){w.uniforms=r,w.attributes=n;var e={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},o=null;function a(c,s){if(!o){var i=Object.keys(e);o={};for(var v=0;v<i.length;++v){var u=i[v];o[c[u]]=e[u]}}return o[s]}function r(c,s){for(var i=c.getProgramParameter(s,c.ACTIVE_UNIFORMS),v=[],u=0;u<i;++u){var g=c.getActiveUniform(s,u);if(g){var h=a(c,g.type);if(g.size>1)for(var y=0;y<g.size;++y)v.push({name:g.name.replace("[0]","["+y+"]"),type:h});else v.push({name:g.name,type:h})}}return v}function n(c,s){for(var i=c.getProgramParameter(s,c.ACTIVE_ATTRIBUTES),v=[],u=0;u<i;++u){var g=c.getActiveAttrib(s,u);g&&v.push({name:g.name,type:a(c,g.type)})}return v}},{}],138:[function(l,b,w){w.shader=h,w.program=y;var e=l("./GLError"),o=l("gl-format-compiler-error"),a=typeof WeakMap=="undefined"?l("weakmap-shim"):WeakMap,r=new a,n=0;function c(p,A,m,M,x,T,_){this.id=p,this.src=A,this.type=m,this.shader=M,this.count=T,this.programs=[],this.cache=_}c.prototype.dispose=function(){if(--this.count===0){for(var p=this.cache,A=p.gl,m=this.programs,M=0,x=m.length;M<x;++M){var T=p.programs[m[M]];T&&(delete p.programs[M],A.deleteProgram(T))}A.deleteShader(this.shader),delete p.shaders[this.type===A.FRAGMENT_SHADER|0][this.src]}};function s(p){this.gl=p,this.shaders=[{},{}],this.programs={}}var i=s.prototype;function v(p,A,m){var M=p.createShader(A);if(p.shaderSource(M,m),p.compileShader(M),!p.getShaderParameter(M,p.COMPILE_STATUS)){var x=p.getShaderInfoLog(M);try{var T=o(x,m,A)}catch(_){throw console.warn("Failed to format compiler error: "+_),new e(x,`Error compiling shader:
`+x)}throw new e(x,T.short,T.long)}return M}i.getShaderReference=function(p,A){var m=this.gl,M=this.shaders[p===m.FRAGMENT_SHADER|0],x=M[A];if(!x||!m.isShader(x.shader)){var T=v(m,p,A);x=M[A]=new c(n++,A,p,T,[],1,this)}else x.count+=1;return x};function u(p,A,m,M,x){var T=p.createProgram();p.attachShader(T,A),p.attachShader(T,m);for(var _=0;_<M.length;++_)p.bindAttribLocation(T,x[_],M[_]);if(p.linkProgram(T),!p.getProgramParameter(T,p.LINK_STATUS)){var f=p.getProgramInfoLog(T);throw new e(f,"Error linking program: "+f)}return T}i.getProgram=function(p,A,m,M){var x=[p.id,A.id,m.join(":"),M.join(":")].join("@"),T=this.programs[x];return(!T||!this.gl.isProgram(T))&&(this.programs[x]=T=u(this.gl,p.shader,A.shader,m,M),p.programs.push(x),A.programs.push(x)),T};function g(p){var A=r.get(p);return A||(A=new s(p),r.set(p,A)),A}function h(p,A,m){return g(p).getShaderReference(A,m)}function y(p,A,m,M,x){return g(p).getProgram(A,m,M,x)}},{"./GLError":133,"gl-format-compiler-error":87,"weakmap-shim":316}],139:[function(l,b,w){b.exports=a;function e(r){this.plot=r,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}var o=e.prototype;o.update=function(r){r=r||{},this.enable=(r.enable||[!0,!0,!1,!1]).slice(),this.width=(r.width||[1,1,1,1]).slice(),this.color=(r.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(n){return n.slice()}),this.center=(r.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},o.draw=function(){var r=this.enable,n=this.width,c=this.color,s=this.center,i=this.plot,v=i.line,u=i.dataBox,g=i.viewBox;if(v.bind(),u[0]<=s[0]&&s[0]<=u[2]&&u[1]<=s[1]&&s[1]<=u[3]){var h=g[0]+(s[0]-u[0])/(u[2]-u[0])*(g[2]-g[0]),y=g[1]+(s[1]-u[1])/(u[3]-u[1])*(g[3]-g[1]);r[0]&&v.drawLine(h,y,g[0],y,n[0],c[0]),r[1]&&v.drawLine(h,y,h,g[1],n[1],c[1]),r[2]&&v.drawLine(h,y,g[2],y,n[2],c[2]),r[3]&&v.drawLine(h,y,h,g[3],n[3],c[3])}},o.dispose=function(){this.plot.removeOverlay(this)};function a(r,n){var c=new e(r);return c.update(n),r.addOverlay(c),c}},{}],140:[function(l,b,w){var e=l("glslify"),o=l("gl-shader"),a=e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),r=e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);b.exports=function(n){return o(n,a,r,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":132,glslify:231}],141:[function(l,b,w){var e=l("gl-buffer"),o=l("gl-vao"),a=l("./shaders/index");b.exports=u;var r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function n(g,h,y,p){this.gl=g,this.buffer=h,this.vao=y,this.shader=p,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var c=n.prototype,s=[0,0,0],i=[0,0,0],v=[0,0];c.isTransparent=function(){return!1},c.drawTransparent=function(g){},c.draw=function(g){var h=this.gl,y=this.vao,p=this.shader;y.bind(),p.bind();var A=g.model||r,m=g.view||r,M=g.projection||r,x;this.axes&&(x=this.axes.lastCubeProps.axis);for(var T=s,_=i,f=0;f<3;++f)x&&x[f]<0?(T[f]=this.bounds[0][f],_[f]=this.bounds[1][f]):(T[f]=this.bounds[1][f],_[f]=this.bounds[0][f]);v[0]=h.drawingBufferWidth,v[1]=h.drawingBufferHeight,p.uniforms.model=A,p.uniforms.view=m,p.uniforms.projection=M,p.uniforms.coordinates=[this.position,T,_],p.uniforms.colors=this.colors,p.uniforms.screenShape=v;for(var f=0;f<3;++f)p.uniforms.lineWidth=this.lineWidth[f]*this.pixelRatio,this.enabled[f]&&(y.draw(h.TRIANGLES,6,6*f),this.drawSides[f]&&y.draw(h.TRIANGLES,12,18+12*f));y.unbind()},c.update=function(g){!g||("bounds"in g&&(this.bounds=g.bounds),"position"in g&&(this.position=g.position),"lineWidth"in g&&(this.lineWidth=g.lineWidth),"colors"in g&&(this.colors=g.colors),"enabled"in g&&(this.enabled=g.enabled),"drawSides"in g&&(this.drawSides=g.drawSides))},c.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function u(g,h){var y=[];function p(T,_,f,L,S,k){var P=[T,_,f,0,0,0,1];P[L+3]=1,P[L]=S,y.push.apply(y,P),P[6]=-1,y.push.apply(y,P),P[L]=k,y.push.apply(y,P),y.push.apply(y,P),P[6]=1,y.push.apply(y,P),P[L]=S,y.push.apply(y,P)}p(0,0,0,0,0,1),p(0,0,0,1,0,1),p(0,0,0,2,0,1),p(1,0,0,1,-1,1),p(1,0,0,2,-1,1),p(0,1,0,0,-1,1),p(0,1,0,2,-1,1),p(0,0,1,0,-1,1),p(0,0,1,1,-1,1);var A=e(g,y),m=o(g,[{type:g.FLOAT,buffer:A,size:3,offset:0,stride:28},{type:g.FLOAT,buffer:A,size:3,offset:12,stride:28},{type:g.FLOAT,buffer:A,size:1,offset:24,stride:28}]),M=a(g);M.attributes.position.location=0,M.attributes.color.location=1,M.attributes.weight.location=2;var x=new n(g,A,m,M);return x.update(h),x}},{"./shaders/index":140,"gl-buffer":78,"gl-vao":150}],142:[function(l,b,w){var e=l("glslify"),o=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),a=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),r=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),n=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);w.meshShader={vertex:o,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},w.pickShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:231}],143:[function(l,b,w){var e=l("gl-vec3"),o=l("gl-vec4"),a=["xyz","xzy","yxz","yzx","zxy","zyx"],r=function(y,p,A,m){for(var M=y.points,x=y.velocities,T=y.divergences,_=[],f=[],L=[],S=[],k=[],P=[],z=0,I=0,R=o.create(),D=o.create(),O=8,F=0;F<M.length;F++){var G=M[F],W=x[F],q=T[F];p===0&&(q=A*.05),I=e.length(W)/m,R=o.create(),e.copy(R,W),R[3]=q;for(var J=0;J<O;J++)k[J]=[G[0],G[1],G[2],J];if(S.length>0)for(var J=0;J<O;J++){var X=(J+1)%O;_.push(S[J],k[J],k[X],k[X],S[X],S[J]),L.push(D,R,R,R,D,D),P.push(z,I,I,I,z,z);var Z=_.length;f.push([Z-6,Z-5,Z-4],[Z-3,Z-2,Z-1])}var se=S;S=k,k=se;var le=D;D=R,R=le;var oe=z;z=I,I=oe}return{positions:_,cells:f,vectors:L,vertexIntensity:P}},n=function(y,p,A,m){for(var M=0,x=0;x<y.length;x++)for(var T=y[x].velocities,_=0;_<T.length;_++)M=Math.max(M,e.length(T[_]));for(var f=y.map(function(F){return r(F,A,m,M)}),L=[],S=[],k=[],P=[],x=0;x<f.length;x++){var z=f[x],I=L.length;L=L.concat(z.positions),k=k.concat(z.vectors),P=P.concat(z.vertexIntensity);for(var _=0;_<z.cells.length;_++){var R=z.cells[_],D=[];S.push(D);for(var O=0;O<R.length;O++)D.push(R[O]+I)}}return{positions:L,cells:S,vectors:k,vertexIntensity:P,colormap:p}},c=function(y,p){var A=y.length,m;for(m=0;m<A;m++){var M=y[m];if(M===p)return m;if(M>p)return m-1}return m},s=function(y,p,A){return y<p?p:y>A?A:y},i=function(y,p,A){var m=p.vectors,M=p.meshgrid,x=y[0],T=y[1],_=y[2],f=M[0].length,L=M[1].length,S=M[2].length,k=c(M[0],x),P=c(M[1],T),z=c(M[2],_),I=k+1,R=P+1,D=z+1;if(k=s(k,0,f-1),I=s(I,0,f-1),P=s(P,0,L-1),R=s(R,0,L-1),z=s(z,0,S-1),D=s(D,0,S-1),k<0||P<0||z<0||I>f-1||R>L-1||D>S-1)return e.create();var O=M[0][k],F=M[0][I],G=M[1][P],W=M[1][R],q=M[2][z],J=M[2][D],X=(x-O)/(F-O),Z=(T-G)/(W-G),se=(_-q)/(J-q);isFinite(X)||(X=.5),isFinite(Z)||(Z=.5),isFinite(se)||(se=.5);var le,oe,U,V,re,ee;switch(A.reversedX&&(k=f-1-k,I=f-1-I),A.reversedY&&(P=L-1-P,R=L-1-R),A.reversedZ&&(z=S-1-z,D=S-1-D),A.filled){case 5:re=z,ee=D,U=P*S,V=R*S,le=k*S*L,oe=I*S*L;break;case 4:re=z,ee=D,le=k*S,oe=I*S,U=P*S*f,V=R*S*f;break;case 3:U=P,V=R,re=z*L,ee=D*L,le=k*L*S,oe=I*L*S;break;case 2:U=P,V=R,le=k*L,oe=I*L,re=z*L*f,ee=D*L*f;break;case 1:le=k,oe=I,re=z*f,ee=D*f,U=P*f*S,V=R*f*S;break;default:le=k,oe=I,U=P*f,V=R*f,re=z*f*L,ee=D*f*L;break}var j=m[le+U+re],Q=m[le+U+ee],ne=m[le+V+re],ae=m[le+V+ee],ie=m[oe+U+re],ue=m[oe+U+ee],xe=m[oe+V+re],he=m[oe+V+ee],ge=e.create(),me=e.create(),ke=e.create(),Ae=e.create();e.lerp(ge,j,ie,X),e.lerp(me,Q,ue,X),e.lerp(ke,ne,xe,X),e.lerp(Ae,ae,he,X);var Ne=e.create(),He=e.create();e.lerp(Ne,ge,ke,Z),e.lerp(He,me,Ae,Z);var Ge=e.create();return e.lerp(Ge,Ne,He,se),Ge},v=function(y){var p=1/0;y.sort(function(x,T){return x-T});for(var A=y.length,m=1;m<A;m++){var M=Math.abs(y[m]-y[m-1]);M<p&&(p=M)}return p},u=function(y){for(var p=[],A=[],m=[],M={},x={},T={},_=y.length,f=0;f<_;f++){var L=y[f],S=L[0],k=L[1],P=L[2];M[S]||(p.push(S),M[S]=!0),x[k]||(A.push(k),x[k]=!0),T[P]||(m.push(P),T[P]=!0)}var z=v(p),I=v(A),R=v(m),D=Math.min(z,I,R);return isFinite(D)?D:1};b.exports=function(y,p){var A=y.startingPositions,m=y.maxLength||1e3,M=y.tubeSize||1,x=y.absoluteTubeSize,T=y.gridFill||"+x+y+z",_={};T.indexOf("-x")!==-1&&(_.reversedX=!0),T.indexOf("-y")!==-1&&(_.reversedY=!0),T.indexOf("-z")!==-1&&(_.reversedZ=!0),_.filled=a.indexOf(T.replace(/-/g,"").replace(/\+/g,""));var f=y.getVelocity||function(ue){return i(ue,y,_)},L=y.getDivergence||function(ue,xe){var he=e.create(),ge=1e-4;e.add(he,ue,[ge,0,0]);var me=f(he);e.subtract(me,me,xe),e.scale(me,me,1/ge),e.add(he,ue,[0,ge,0]);var ke=f(he);e.subtract(ke,ke,xe),e.scale(ke,ke,1/ge),e.add(he,ue,[0,0,ge]);var Ae=f(he);return e.subtract(Ae,Ae,xe),e.scale(Ae,Ae,1/ge),e.add(he,me,ke),e.add(he,he,Ae),he},S=[],k=p[0][0],P=p[0][1],z=p[0][2],I=p[1][0],R=p[1][1],D=p[1][2],O=function(ue){var xe=ue[0],he=ue[1],ge=ue[2];return!(xe<k||xe>I||he<P||he>R||ge<z||ge>D)},F=e.distance(p[0],p[1]),G=10*F/m,W=G*G,q=1,J=0,X=A.length;X>1&&(q=u(A));for(var Z=0;Z<X;Z++){var se=e.create();e.copy(se,A[Z]);var le=[se],oe=[],U=f(se),V=se;oe.push(U);var re=[],ee=L(se,U),j=e.length(ee);isFinite(j)&&j>J&&(J=j),re.push(j),S.push({points:le,velocities:oe,divergences:re});for(var Q=0;Q<m*100&&le.length<m&&O(se);){Q++;var ne=e.clone(U),ae=e.squaredLength(ne);if(ae===0)break;if(ae>W&&e.scale(ne,ne,G/Math.sqrt(ae)),e.add(ne,ne,se),U=f(ne),e.squaredDistance(V,ne)-W>-1e-4*W){le.push(ne),V=ne,oe.push(U);var ee=L(ne,U),j=e.length(ee);isFinite(j)&&j>J&&(J=j),re.push(j)}se=ne}}var ie=n(S,y.colormap,J,q);return x?ie.tubeScale=x:(J===0&&(J=1),ie.tubeScale=M*.5*q/J),ie};var g=l("./lib/shaders"),h=l("gl-cone3d").createMesh;b.exports.createTubeMesh=function(y,p){return h(y,p,{shaders:g,traceType:"streamtube"})}},{"./lib/shaders":142,"gl-cone3d":79,"gl-vec3":169,"gl-vec4":205}],144:[function(l,b,w){var e=l("gl-shader"),o=l("glslify"),a=o([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),r=o([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color \u2014 in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),n=o([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),c=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);w.createShader=function(s){var i=e(s,a,r,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i.attributes.normal.location=2,i},w.createPickShader=function(s){var i=e(s,a,c,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i.attributes.normal.location=2,i},w.createContourShader=function(s){var i=e(s,n,r,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i},w.createPickContourShader=function(s){var i=e(s,n,c,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i}},{"gl-shader":132,glslify:231}],145:[function(l,b,w){b.exports=oe;var e=l("bit-twiddle"),o=l("gl-buffer"),a=l("gl-vao"),r=l("gl-texture2d"),n=l("typedarray-pool"),c=l("colormap"),s=l("ndarray-ops"),i=l("ndarray-pack"),v=l("ndarray"),u=l("surface-nets"),g=l("gl-mat4/multiply"),h=l("gl-mat4/invert"),y=l("binary-search-bounds"),p=l("ndarray-gradient"),A=l("./lib/shaders"),m=A.createShader,M=A.createContourShader,x=A.createPickShader,T=A.createPickContourShader,_=4*(4+3+3),f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],L=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],S=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var U=0;U<3;++U){var V=S[U],re=(U+1)%3,ee=(U+2)%3;V[re+0]=1,V[ee+3]=1,V[U+6]=1}})();function k(U,V,re,ee,j){this.position=U,this.index=V,this.uv=re,this.level=ee,this.dataCoordinate=j}var P=256;function z(U,V,re,ee,j,Q,ne,ae,ie,ue,xe,he,ge,me,ke){this.gl=U,this.shape=V,this.bounds=re,this.objectOffset=ke,this.intensityBounds=[],this._shader=ee,this._pickShader=j,this._coordinateBuffer=Q,this._vao=ne,this._colorMap=ae,this._contourShader=ie,this._contourPickShader=ue,this._contourBuffer=xe,this._contourVAO=he,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new k([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=ge,this._dynamicVAO=me,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[v(n.mallocFloat(1024),[0,0]),v(n.mallocFloat(1024),[0,0]),v(n.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var I=z.prototype;I.genColormap=function(U,V){var re=!1,ee=i([c({colormap:U,nshades:P,format:"rgba"}).map(function(j,Q){var ne=V?R(Q/255,V):j[3];return ne<1&&(re=!0),[j[0],j[1],j[2],255*ne]})]);return s.divseq(ee,255),this.hasAlphaScale=re,ee},I.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},I.isOpaque=function(){return!this.isTransparent()},I.pickSlots=1,I.setPickBase=function(U){this.pickId=U};function R(U,V){if(!V||!V.length)return 1;for(var re=0;re<V.length;++re){if(V.length<2)return 1;if(V[re][0]===U)return V[re][1];if(V[re][0]>U&&re>0){var ee=(V[re][0]-U)/(V[re][0]-V[re-1][0]);return V[re][1]*(1-ee)+ee*V[re-1][1]}}return 1}var D=[0,0,0],O={showSurface:!1,showContour:!1,projections:[f.slice(),f.slice(),f.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function F(U,V){var re,ee,j,Q=V.axes&&V.axes.lastCubeProps.axis||D,ne=V.showSurface,ae=V.showContour;for(re=0;re<3;++re)for(ne=ne||V.surfaceProject[re],ee=0;ee<3;++ee)ae=ae||V.contourProject[re][ee];for(re=0;re<3;++re){var ie=O.projections[re];for(ee=0;ee<16;++ee)ie[ee]=0;for(ee=0;ee<4;++ee)ie[5*ee]=1;ie[5*re]=0,ie[12+re]=V.axesBounds[+(Q[re]>0)][re],g(ie,U.model,ie);var ue=O.clipBounds[re];for(j=0;j<2;++j)for(ee=0;ee<3;++ee)ue[j][ee]=U.clipBounds[j][ee];ue[0][re]=-1e8,ue[1][re]=1e8}return O.showSurface=ne,O.showContour=ae,O}var G={model:f,view:f,projection:f,inverseModel:f.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},W=f.slice(),q=[1,0,0,0,1,0,0,0,1];function J(U,V){U=U||{};var re=this.gl;re.disable(re.CULL_FACE),this._colorMap.bind(0);var ee=G;ee.model=U.model||f,ee.view=U.view||f,ee.projection=U.projection||f,ee.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],ee.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],ee.objectOffset=this.objectOffset,ee.contourColor=this.contourColor[0],ee.inverseModel=h(ee.inverseModel,ee.model);for(var j=0;j<2;++j)for(var Q=ee.clipBounds[j],ne=0;ne<3;++ne)Q[ne]=Math.min(Math.max(this.clipBounds[j][ne],-1e8),1e8);ee.kambient=this.ambientLight,ee.kdiffuse=this.diffuseLight,ee.kspecular=this.specularLight,ee.roughness=this.roughness,ee.fresnel=this.fresnel,ee.opacity=this.opacity,ee.height=0,ee.permutation=q,ee.vertexColor=this.vertexColor;var ae=W;for(g(ae,ee.view,ee.model),g(ae,ee.projection,ae),h(ae,ae),j=0;j<3;++j)ee.eyePosition[j]=ae[12+j]/ae[15];var ie=ae[15];for(j=0;j<3;++j)ie+=this.lightPosition[j]*ae[4*j+3];for(j=0;j<3;++j){var ue=ae[12+j];for(ne=0;ne<3;++ne)ue+=ae[4*ne+j]*this.lightPosition[ne];ee.lightPosition[j]=ue/ie}var xe=F(ee,this);if(xe.showSurface){for(this._shader.bind(),this._shader.uniforms=ee,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(re.TRIANGLES,this._vertexCount),j=0;j<3;++j)!this.surfaceProject[j]||!this.vertexCount||(this._shader.uniforms.model=xe.projections[j],this._shader.uniforms.clipBounds=xe.clipBounds[j],this._vao.draw(re.TRIANGLES,this._vertexCount));this._vao.unbind()}if(xe.showContour){var he=this._contourShader;ee.kambient=1,ee.kdiffuse=0,ee.kspecular=0,ee.opacity=1,he.bind(),he.uniforms=ee;var ge=this._contourVAO;for(ge.bind(),j=0;j<3;++j)for(he.uniforms.permutation=S[j],re.lineWidth(this.contourWidth[j]*this.pixelRatio),ne=0;ne<this.contourLevels[j].length;++ne)ne===this.highlightLevel[j]?(he.uniforms.contourColor=this.highlightColor[j],he.uniforms.contourTint=this.highlightTint[j]):(ne===0||ne-1===this.highlightLevel[j])&&(he.uniforms.contourColor=this.contourColor[j],he.uniforms.contourTint=this.contourTint[j]),this._contourCounts[j][ne]&&(he.uniforms.height=this.contourLevels[j][ne],ge.draw(re.LINES,this._contourCounts[j][ne],this._contourOffsets[j][ne]));for(j=0;j<3;++j)for(he.uniforms.model=xe.projections[j],he.uniforms.clipBounds=xe.clipBounds[j],ne=0;ne<3;++ne)if(!!this.contourProject[j][ne]){he.uniforms.permutation=S[ne],re.lineWidth(this.contourWidth[ne]*this.pixelRatio);for(var me=0;me<this.contourLevels[ne].length;++me)me===this.highlightLevel[ne]?(he.uniforms.contourColor=this.highlightColor[ne],he.uniforms.contourTint=this.highlightTint[ne]):(me===0||me-1===this.highlightLevel[ne])&&(he.uniforms.contourColor=this.contourColor[ne],he.uniforms.contourTint=this.contourTint[ne]),this._contourCounts[ne][me]&&(he.uniforms.height=this.contourLevels[ne][me],ge.draw(re.LINES,this._contourCounts[ne][me],this._contourOffsets[ne][me]))}for(ge.unbind(),ge=this._dynamicVAO,ge.bind(),j=0;j<3;++j)if(this._dynamicCounts[j]!==0)for(he.uniforms.model=ee.model,he.uniforms.clipBounds=ee.clipBounds,he.uniforms.permutation=S[j],re.lineWidth(this.dynamicWidth[j]*this.pixelRatio),he.uniforms.contourColor=this.dynamicColor[j],he.uniforms.contourTint=this.dynamicTint[j],he.uniforms.height=this.dynamicLevel[j],ge.draw(re.LINES,this._dynamicCounts[j],this._dynamicOffsets[j]),ne=0;ne<3;++ne)!this.contourProject[ne][j]||(he.uniforms.model=xe.projections[ne],he.uniforms.clipBounds=xe.clipBounds[ne],ge.draw(re.LINES,this._dynamicCounts[j],this._dynamicOffsets[j]));ge.unbind()}}I.draw=function(U){return J.call(this,U,!1)},I.drawTransparent=function(U){return J.call(this,U,!0)};var X={model:f,view:f,projection:f,inverseModel:f,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};I.drawPick=function(U){U=U||{};var V=this.gl;V.disable(V.CULL_FACE);var re=X;re.model=U.model||f,re.view=U.view||f,re.projection=U.projection||f,re.shape=this._field[2].shape,re.pickId=this.pickId/255,re.lowerBound=this.bounds[0],re.upperBound=this.bounds[1],re.objectOffset=this.objectOffset,re.permutation=q;for(var ee=0;ee<2;++ee)for(var j=re.clipBounds[ee],Q=0;Q<3;++Q)j[Q]=Math.min(Math.max(this.clipBounds[ee][Q],-1e8),1e8);var ne=F(re,this);if(ne.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=re,this._vao.bind(),this._vao.draw(V.TRIANGLES,this._vertexCount),ee=0;ee<3;++ee)!this.surfaceProject[ee]||(this._pickShader.uniforms.model=ne.projections[ee],this._pickShader.uniforms.clipBounds=ne.clipBounds[ee],this._vao.draw(V.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ne.showContour){var ae=this._contourPickShader;ae.bind(),ae.uniforms=re;var ie=this._contourVAO;for(ie.bind(),Q=0;Q<3;++Q)for(V.lineWidth(this.contourWidth[Q]*this.pixelRatio),ae.uniforms.permutation=S[Q],ee=0;ee<this.contourLevels[Q].length;++ee)this._contourCounts[Q][ee]&&(ae.uniforms.height=this.contourLevels[Q][ee],ie.draw(V.LINES,this._contourCounts[Q][ee],this._contourOffsets[Q][ee]));for(ee=0;ee<3;++ee)for(ae.uniforms.model=ne.projections[ee],ae.uniforms.clipBounds=ne.clipBounds[ee],Q=0;Q<3;++Q)if(!!this.contourProject[ee][Q]){ae.uniforms.permutation=S[Q],V.lineWidth(this.contourWidth[Q]*this.pixelRatio);for(var ue=0;ue<this.contourLevels[Q].length;++ue)this._contourCounts[Q][ue]&&(ae.uniforms.height=this.contourLevels[Q][ue],ie.draw(V.LINES,this._contourCounts[Q][ue],this._contourOffsets[Q][ue]))}ie.unbind()}},I.pick=function(U){if(!U||U.id!==this.pickId)return null;var V=this._field[2].shape,re=this._pickResult,ee=V[0]*(U.value[0]+(U.value[2]>>4)/16)/255,j=Math.floor(ee),Q=ee-j,ne=V[1]*(U.value[1]+(U.value[2]&15)/16)/255,ae=Math.floor(ne),ie=ne-ae;j+=1,ae+=1;var ue=re.position;ue[0]=ue[1]=ue[2]=0;for(var xe=0;xe<2;++xe)for(var he=xe?Q:1-Q,ge=0;ge<2;++ge)for(var me=ge?ie:1-ie,ke=j+xe,Ae=ae+ge,Ne=he*me,He=0;He<3;++He)ue[He]+=this._field[He].get(ke,Ae)*Ne;for(var Ge=this._pickResult.level,_e=0;_e<3;++_e)if(Ge[_e]=y.le(this.contourLevels[_e],ue[_e]),Ge[_e]<0)this.contourLevels[_e].length>0&&(Ge[_e]=0);else if(Ge[_e]<this.contourLevels[_e].length-1){var De=this.contourLevels[_e][Ge[_e]],Ye=this.contourLevels[_e][Ge[_e]+1];Math.abs(De-ue[_e])>Math.abs(Ye-ue[_e])&&(Ge[_e]+=1)}for(re.index[0]=Q<.5?j:j+1,re.index[1]=ie<.5?ae:ae+1,re.uv[0]=ee/V[0],re.uv[1]=ne/V[1],He=0;He<3;++He)re.dataCoordinate[He]=this._field[He].get(re.index[0],re.index[1]);return re},I.padField=function(U,V){var re=V.shape.slice(),ee=U.shape.slice();s.assign(U.lo(1,1).hi(re[0],re[1]),V),s.assign(U.lo(1).hi(re[0],1),V.hi(re[0],1)),s.assign(U.lo(1,ee[1]-1).hi(re[0],1),V.lo(0,re[1]-1).hi(re[0],1)),s.assign(U.lo(0,1).hi(1,re[1]),V.hi(1)),s.assign(U.lo(ee[0]-1,1).hi(1,re[1]),V.lo(re[0]-1)),U.set(0,0,V.get(0,0)),U.set(0,ee[1]-1,V.get(0,re[1]-1)),U.set(ee[0]-1,0,V.get(re[0]-1,0)),U.set(ee[0]-1,ee[1]-1,V.get(re[0]-1,re[1]-1))};function Z(U,V){return Array.isArray(U)?[V(U[0]),V(U[1]),V(U[2])]:[V(U),V(U),V(U)]}function se(U){return Array.isArray(U)?U.length===3?[U[0],U[1],U[2],1]:[U[0],U[1],U[2],U[3]]:[0,0,0,1]}function le(U){if(Array.isArray(U)){if(Array.isArray(U))return[se(U[0]),se(U[1]),se(U[2])];var V=se(U);return[V.slice(),V.slice(),V.slice()]}}I.update=function(U){U=U||{},this.objectOffset=U.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in U&&(this.contourWidth=Z(U.contourWidth,Number)),"showContour"in U&&(this.showContour=Z(U.showContour,Boolean)),"showSurface"in U&&(this.showSurface=!!U.showSurface),"contourTint"in U&&(this.contourTint=Z(U.contourTint,Boolean)),"contourColor"in U&&(this.contourColor=le(U.contourColor)),"contourProject"in U&&(this.contourProject=Z(U.contourProject,function(wt){return Z(wt,Boolean)})),"surfaceProject"in U&&(this.surfaceProject=U.surfaceProject),"dynamicColor"in U&&(this.dynamicColor=le(U.dynamicColor)),"dynamicTint"in U&&(this.dynamicTint=Z(U.dynamicTint,Number)),"dynamicWidth"in U&&(this.dynamicWidth=Z(U.dynamicWidth,Number)),"opacity"in U&&(this.opacity=U.opacity),"opacityscale"in U&&(this.opacityscale=U.opacityscale),"colorBounds"in U&&(this.colorBounds=U.colorBounds),"vertexColor"in U&&(this.vertexColor=U.vertexColor?1:0),"colormap"in U&&this._colorMap.setPixels(this.genColormap(U.colormap,this.opacityscale));var V=U.field||U.coords&&U.coords[2]||null,re=!1;if(V||(this._field[2].shape[0]||this._field[2].shape[2]?V=this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):V=this._field[2].hi(0,0)),"field"in U||"coords"in U){var ee=(V.shape[0]+2)*(V.shape[1]+2);ee>this._field[2].data.length&&(n.freeFloat(this._field[2].data),this._field[2].data=n.mallocFloat(e.nextPow2(ee))),this._field[2]=v(this._field[2].data,[V.shape[0]+2,V.shape[1]+2]),this.padField(this._field[2],V),this.shape=V.shape.slice();for(var j=this.shape,Q=0;Q<2;++Q)this._field[2].size>this._field[Q].data.length&&(n.freeFloat(this._field[Q].data),this._field[Q].data=n.mallocFloat(this._field[2].size)),this._field[Q]=v(this._field[Q].data,[j[0]+2,j[1]+2]);if(U.coords){var ne=U.coords;if(!Array.isArray(ne)||ne.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(Q=0;Q<2;++Q){var ae=ne[Q];for(ge=0;ge<2;++ge)if(ae.shape[ge]!==j[ge])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[Q],ae)}}else if(U.ticks){var ie=U.ticks;if(!Array.isArray(ie)||ie.length!==2)throw new Error("gl-surface: invalid ticks");for(Q=0;Q<2;++Q){var ue=ie[Q];if((Array.isArray(ue)||ue.length)&&(ue=v(ue)),ue.shape[0]!==j[Q])throw new Error("gl-surface: invalid tick length");var xe=v(ue.data,j);xe.stride[Q]=ue.stride[0],xe.stride[Q^1]=0,this.padField(this._field[Q],xe)}}else{for(Q=0;Q<2;++Q){var he=[0,0];he[Q]=1,this._field[Q]=v(this._field[Q].data,[j[0]+2,j[1]+2],he,0)}this._field[0].set(0,0,0);for(var ge=0;ge<j[0];++ge)this._field[0].set(ge+1,0,ge);for(this._field[0].set(j[0]+1,0,j[0]-1),this._field[1].set(0,0,0),ge=0;ge<j[1];++ge)this._field[1].set(0,ge+1,ge);this._field[1].set(0,j[1]+1,j[1]-1)}var me=this._field,ke=v(n.mallocFloat(me[2].size*3*2),[3,j[0]+2,j[1]+2,2]);for(Q=0;Q<3;++Q)p(ke.pick(Q),me[Q],"mirror");var Ae=v(n.mallocFloat(me[2].size*3),[j[0]+2,j[1]+2,3]);for(Q=0;Q<j[0]+2;++Q)for(ge=0;ge<j[1]+2;++ge){var Ne=ke.get(0,Q,ge,0),He=ke.get(0,Q,ge,1),Ge=ke.get(1,Q,ge,0),_e=ke.get(1,Q,ge,1),De=ke.get(2,Q,ge,0),Ye=ke.get(2,Q,ge,1),qe=Ge*Ye-_e*De,Ue=De*He-Ye*Ne,Ie=Ne*_e-He*Ge,Ve=Math.sqrt(qe*qe+Ue*Ue+Ie*Ie);Ve<1e-8?(Ve=Math.max(Math.abs(qe),Math.abs(Ue),Math.abs(Ie)),Ve<1e-8?(Ie=1,Ue=qe=0,Ve=1):Ve=1/Ve):Ve=1/Math.sqrt(Ve),Ae.set(Q,ge,0,qe*Ve),Ae.set(Q,ge,1,Ue*Ve),Ae.set(Q,ge,2,Ie*Ve)}n.free(ke.data);var dt=[1/0,1/0,1/0],Dt=[-1/0,-1/0,-1/0],Yt=1/0,kt=-1/0,Ft=(j[0]-1)*(j[1]-1)*6,Nt=n.mallocFloat(e.nextPow2(10*Ft)),Lt=0,St=0;for(Q=0;Q<j[0]-1;++Q){e:for(ge=0;ge<j[1]-1;++ge){for(var it=0;it<2;++it)for(var ht=0;ht<2;++ht)for(var Qe=0;Qe<3;++Qe){var Ce=this._field[Qe].get(1+Q+it,1+ge+ht);if(isNaN(Ce)||!isFinite(Ce))continue e}for(Qe=0;Qe<6;++Qe){var je=Q+L[Qe][0],rt=ge+L[Qe][1],ut=this._field[0].get(je+1,rt+1),Pt=this._field[1].get(je+1,rt+1);Ce=this._field[2].get(je+1,rt+1),qe=Ae.get(je+1,rt+1,0),Ue=Ae.get(je+1,rt+1,1),Ie=Ae.get(je+1,rt+1,2),U.intensity&&(Tt=U.intensity.get(je,rt));var Tt=U.intensity?U.intensity.get(je,rt):Ce+this.objectOffset[2];Nt[Lt++]=je,Nt[Lt++]=rt,Nt[Lt++]=ut,Nt[Lt++]=Pt,Nt[Lt++]=Ce,Nt[Lt++]=0,Nt[Lt++]=Tt,Nt[Lt++]=qe,Nt[Lt++]=Ue,Nt[Lt++]=Ie,dt[0]=Math.min(dt[0],ut+this.objectOffset[0]),dt[1]=Math.min(dt[1],Pt+this.objectOffset[1]),dt[2]=Math.min(dt[2],Ce+this.objectOffset[2]),Yt=Math.min(Yt,Tt),Dt[0]=Math.max(Dt[0],ut+this.objectOffset[0]),Dt[1]=Math.max(Dt[1],Pt+this.objectOffset[1]),Dt[2]=Math.max(Dt[2],Ce+this.objectOffset[2]),kt=Math.max(kt,Tt),St+=1}}}for(U.intensityBounds&&(Yt=+U.intensityBounds[0],kt=+U.intensityBounds[1]),Q=6;Q<Lt;Q+=10)Nt[Q]=(Nt[Q]-Yt)/(kt-Yt);this._vertexCount=St,this._coordinateBuffer.update(Nt.subarray(0,Lt)),n.freeFloat(Nt),n.free(Ae.data),this.bounds=[dt,Dt],this.intensity=U.intensity||this._field[2],(this.intensityBounds[0]!==Yt||this.intensityBounds[1]!==kt)&&(re=!0),this.intensityBounds=[Yt,kt]}if("levels"in U){var Ot=U.levels;for(Array.isArray(Ot[0])?Ot=Ot.slice():Ot=[[],[],Ot],Q=0;Q<3;++Q)Ot[Q]=Ot[Q].slice(),Ot[Q].sort(function(wt,Vt){return wt-Vt});for(Q=0;Q<3;++Q)for(ge=0;ge<Ot[Q].length;++ge)Ot[Q][ge]-=this.objectOffset[Q];e:for(Q=0;Q<3;++Q){if(Ot[Q].length!==this.contourLevels[Q].length){re=!0;break}for(ge=0;ge<Ot[Q].length;++ge)if(Ot[Q][ge]!==this.contourLevels[Q][ge]){re=!0;break e}}this.contourLevels=Ot}if(re){me=this._field,j=this.shape;for(var Kt=[],Bt=0;Bt<3;++Bt){var Zt=this.contourLevels[Bt],Je=[],pt=[],Et=[0,0,0];for(Q=0;Q<Zt.length;++Q){var ar=u(this._field[Bt],Zt[Q]);Je.push(Kt.length/5|0),St=0;e:for(ge=0;ge<ar.cells.length;++ge){var vr=ar.cells[ge];for(Qe=0;Qe<2;++Qe){var ir=ar.positions[vr[Qe]],dr=ir[0],Pr=Math.floor(dr)|0,Sr=dr-Pr,tr=ir[1],Nr=Math.floor(tr)|0,et=tr-Nr,we=!1;t:for(var Me=0;Me<3;++Me){Et[Me]=0;var Re=(Bt+Me+1)%3;for(it=0;it<2;++it){var Xe=it?Sr:1-Sr;for(je=Math.min(Math.max(Pr+it,0),j[0])|0,ht=0;ht<2;++ht){var $e=ht?et:1-et;if(rt=Math.min(Math.max(Nr+ht,0),j[1])|0,Me<2?Ce=this._field[Re].get(je,rt):Ce=(this.intensity.get(je,rt)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Ce)||isNaN(Ce)){we=!0;break t}var ot=Xe*$e;Et[Me]+=ot*Ce}}}if(!we)Kt.push(Et[0],Et[1],ir[0],ir[1],Et[2]),St+=1;else{if(Qe>0){for(var st=0;st<5;++st)Kt.pop();St-=1}continue e}}}pt.push(St)}this._contourOffsets[Bt]=Je,this._contourCounts[Bt]=pt}var yt=n.mallocFloat(Kt.length);for(Q=0;Q<Kt.length;++Q)yt[Q]=Kt[Q];this._contourBuffer.update(yt),n.freeFloat(yt)}},I.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var U=0;U<3;++U)n.freeFloat(this._field[U].data)},I.highlight=function(U){var V;if(!U){this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1];return}for(V=0;V<3;++V)this.enableHighlight[V]?this.highlightLevel[V]=U.level[V]:this.highlightLevel[V]=-1;var re;for(this.snapToData?re=U.dataCoordinate:re=U.position,V=0;V<3;++V)re[V]-=this.objectOffset[V];if(!((!this.enableDynamic[0]||re[0]===this.dynamicLevel[0])&&(!this.enableDynamic[1]||re[1]===this.dynamicLevel[1])&&(!this.enableDynamic[2]||re[2]===this.dynamicLevel[2]))){for(var ee=0,j=this.shape,Q=n.mallocFloat(12*j[0]*j[1]),ne=0;ne<3;++ne){if(!this.enableDynamic[ne]){this.dynamicLevel[ne]=NaN,this._dynamicCounts[ne]=0;continue}this.dynamicLevel[ne]=re[ne];var ae=(ne+1)%3,ie=(ne+2)%3,ue=this._field[ne],xe=this._field[ae],he=this._field[ie],ge=u(ue,re[ne]),me=ge.cells,ke=ge.positions;for(this._dynamicOffsets[ne]=ee,V=0;V<me.length;++V)for(var Ae=me[V],Ne=0;Ne<2;++Ne){var He=ke[Ae[Ne]],Ge=+He[0],_e=Ge|0,De=Math.min(_e+1,j[0])|0,Ye=Ge-_e,qe=1-Ye,Ue=+He[1],Ie=Ue|0,Ve=Math.min(Ie+1,j[1])|0,dt=Ue-Ie,Dt=1-dt,Yt=qe*Dt,kt=qe*dt,Ft=Ye*Dt,Nt=Ye*dt,Lt=Yt*xe.get(_e,Ie)+kt*xe.get(_e,Ve)+Ft*xe.get(De,Ie)+Nt*xe.get(De,Ve),St=Yt*he.get(_e,Ie)+kt*he.get(_e,Ve)+Ft*he.get(De,Ie)+Nt*he.get(De,Ve);if(isNaN(Lt)||isNaN(St)){Ne&&(ee-=1);break}Q[2*ee+0]=Lt,Q[2*ee+1]=St,ee+=1}this._dynamicCounts[ne]=ee-this._dynamicOffsets[ne]}this._dynamicBuffer.update(Q.subarray(0,2*ee)),n.freeFloat(Q)}};function oe(U){var V=U.gl,re=m(V),ee=x(V),j=M(V),Q=T(V),ne=o(V),ae=a(V,[{buffer:ne,size:4,stride:_,offset:0},{buffer:ne,size:3,stride:_,offset:16},{buffer:ne,size:3,stride:_,offset:28}]),ie=o(V),ue=a(V,[{buffer:ie,size:4,stride:20,offset:0},{buffer:ie,size:1,stride:20,offset:16}]),xe=o(V),he=a(V,[{buffer:xe,size:2,type:V.FLOAT}]),ge=r(V,1,P,V.RGBA,V.UNSIGNED_BYTE);ge.minFilter=V.LINEAR,ge.magFilter=V.LINEAR;var me=new z(V,[0,0],[[0,0,0],[0,0,0]],re,ee,ne,ae,ge,j,Q,ie,ue,xe,he,[0,0,0]),ke={levels:[[],[],[]]};for(var Ae in U)ke[Ae]=U[Ae];return ke.colormap=ke.colormap||"jet",me.update(ke),me}},{"./lib/shaders":144,"binary-search-bounds":31,"bit-twiddle":32,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-texture2d":146,"gl-vao":150,ndarray:259,"ndarray-gradient":252,"ndarray-ops":254,"ndarray-pack":255,"surface-nets":302,"typedarray-pool":308}],146:[function(l,b,w){var e=l("ndarray"),o=l("ndarray-ops"),a=l("typedarray-pool");b.exports=T;var r=null,n=null,c=null;function s(_){r=[_.LINEAR,_.NEAREST_MIPMAP_LINEAR,_.LINEAR_MIPMAP_NEAREST,_.LINEAR_MIPMAP_NEAREST],n=[_.NEAREST,_.LINEAR,_.NEAREST_MIPMAP_NEAREST,_.NEAREST_MIPMAP_LINEAR,_.LINEAR_MIPMAP_NEAREST,_.LINEAR_MIPMAP_LINEAR],c=[_.REPEAT,_.CLAMP_TO_EDGE,_.MIRRORED_REPEAT]}function i(_){return typeof HTMLCanvasElement!="undefined"&&_ instanceof HTMLCanvasElement||typeof HTMLImageElement!="undefined"&&_ instanceof HTMLImageElement||typeof HTMLVideoElement!="undefined"&&_ instanceof HTMLVideoElement||typeof ImageData!="undefined"&&_ instanceof ImageData}var v=function(_,f){o.muls(_,f,255)};function u(_,f,L){var S=_.gl,k=S.getParameter(S.MAX_TEXTURE_SIZE);if(f<0||f>k||L<0||L>k)throw new Error("gl-texture2d: Invalid texture size");return _._shape=[f,L],_.bind(),S.texImage2D(S.TEXTURE_2D,0,_.format,f,L,0,_.format,_.type,null),_._mipLevels=[0],_}function g(_,f,L,S,k,P){this.gl=_,this.handle=f,this.format=k,this.type=P,this._shape=[L,S],this._mipLevels=[0],this._magFilter=_.NEAREST,this._minFilter=_.NEAREST,this._wrapS=_.CLAMP_TO_EDGE,this._wrapT=_.CLAMP_TO_EDGE,this._anisoSamples=1;var z=this,I=[this._wrapS,this._wrapT];Object.defineProperties(I,[{get:function(){return z._wrapS},set:function(D){return z.wrapS=D}},{get:function(){return z._wrapT},set:function(D){return z.wrapT=D}}]),this._wrapVector=I;var R=[this._shape[0],this._shape[1]];Object.defineProperties(R,[{get:function(){return z._shape[0]},set:function(D){return z.width=D}},{get:function(){return z._shape[1]},set:function(D){return z.height=D}}]),this._shapeVector=R}var h=g.prototype;Object.defineProperties(h,{minFilter:{get:function(){return this._minFilter},set:function(_){this.bind();var f=this.gl;if(this.type===f.FLOAT&&r.indexOf(_)>=0&&(f.getExtension("OES_texture_float_linear")||(_=f.NEAREST)),n.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,_),this._minFilter=_}},magFilter:{get:function(){return this._magFilter},set:function(_){this.bind();var f=this.gl;if(this.type===f.FLOAT&&r.indexOf(_)>=0&&(f.getExtension("OES_texture_float_linear")||(_=f.NEAREST)),n.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,_),this._magFilter=_}},mipSamples:{get:function(){return this._anisoSamples},set:function(_){var f=this._anisoSamples;if(this._anisoSamples=Math.max(_,1)|0,f!==this._anisoSamples){var L=this.gl.getExtension("EXT_texture_filter_anisotropic");L&&this.gl.texParameterf(this.gl.TEXTURE_2D,L.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(_){if(this.bind(),c.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,_),this._wrapS=_}},wrapT:{get:function(){return this._wrapT},set:function(_){if(this.bind(),c.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,_),this._wrapT=_}},wrap:{get:function(){return this._wrapVector},set:function(_){if(Array.isArray(_)||(_=[_,_]),_.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var f=0;f<2;++f)if(c.indexOf(_[f])<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);this._wrapS=_[0],this._wrapT=_[1];var L=this.gl;return this.bind(),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_S,this._wrapS),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_T,this._wrapT),_}},shape:{get:function(){return this._shapeVector},set:function(_){if(!Array.isArray(_))_=[_|0,_|0];else if(_.length!==2)throw new Error("gl-texture2d: Invalid texture shape");return u(this,_[0]|0,_[1]|0),[_[0]|0,_[1]|0]}},width:{get:function(){return this._shape[0]},set:function(_){return _=_|0,u(this,_,this._shape[1]),_}},height:{get:function(){return this._shape[1]},set:function(_){return _=_|0,u(this,this._shape[0],_),_}}}),h.bind=function(_){var f=this.gl;return _!==void 0&&f.activeTexture(f.TEXTURE0+(_|0)),f.bindTexture(f.TEXTURE_2D,this.handle),_!==void 0?_|0:f.getParameter(f.ACTIVE_TEXTURE)-f.TEXTURE0},h.dispose=function(){this.gl.deleteTexture(this.handle)},h.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var _=Math.min(this._shape[0],this._shape[1]),f=0;_>0;++f,_>>>=1)this._mipLevels.indexOf(f)<0&&this._mipLevels.push(f)},h.setPixels=function(_,f,L,S){var k=this.gl;this.bind(),Array.isArray(f)?(S=L,L=f[1]|0,f=f[0]|0):(f=f||0,L=L||0),S=S||0;var P=i(_)?_:_.raw;if(P){var z=this._mipLevels.indexOf(S)<0;z?(k.texImage2D(k.TEXTURE_2D,0,this.format,this.format,this.type,P),this._mipLevels.push(S)):k.texSubImage2D(k.TEXTURE_2D,S,f,L,this.format,this.type,P)}else if(_.shape&&_.stride&&_.data){if(_.shape.length<2||f+_.shape[1]>this._shape[1]>>>S||L+_.shape[0]>this._shape[0]>>>S||f<0||L<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");p(k,f,L,S,this.format,this.type,this._mipLevels,_)}else throw new Error("gl-texture2d: Unsupported data type")};function y(_,f){return _.length===3?f[2]===1&&f[1]===_[0]*_[2]&&f[0]===_[2]:f[0]===1&&f[1]===_[0]}function p(_,f,L,S,k,P,z,I){var R=I.dtype,D=I.shape.slice();if(D.length<2||D.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var O=0,F=0,G=y(D,I.stride.slice());if(R==="float32"?O=_.FLOAT:R==="float64"?(O=_.FLOAT,G=!1,R="float32"):R==="uint8"?O=_.UNSIGNED_BYTE:(O=_.UNSIGNED_BYTE,G=!1,R="uint8"),D.length===2)F=_.LUMINANCE,D=[D[0],D[1],1],I=e(I.data,D,[I.stride[0],I.stride[1],1],I.offset);else if(D.length===3)if(D[2]===1)F=_.ALPHA;else if(D[2]===2)F=_.LUMINANCE_ALPHA;else if(D[2]===3)F=_.RGB;else if(D[2]===4)F=_.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");else throw new Error("gl-texture2d: Invalid shape for texture");if((F===_.LUMINANCE||F===_.ALPHA)&&(k===_.LUMINANCE||k===_.ALPHA)&&(F=k),F!==k)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var W=I.size,q=z.indexOf(S)<0;if(q&&z.push(S),O===P&&G)I.offset===0&&I.data.length===W?q?_.texImage2D(_.TEXTURE_2D,S,k,D[0],D[1],0,k,P,I.data):_.texSubImage2D(_.TEXTURE_2D,S,f,L,D[0],D[1],k,P,I.data):q?_.texImage2D(_.TEXTURE_2D,S,k,D[0],D[1],0,k,P,I.data.subarray(I.offset,I.offset+W)):_.texSubImage2D(_.TEXTURE_2D,S,f,L,D[0],D[1],k,P,I.data.subarray(I.offset,I.offset+W));else{var J;P===_.FLOAT?J=a.mallocFloat32(W):J=a.mallocUint8(W);var X=e(J,D,[D[2],D[2]*D[0],1]);O===_.FLOAT&&P===_.UNSIGNED_BYTE?v(X,I):o.assign(X,I),q?_.texImage2D(_.TEXTURE_2D,S,k,D[0],D[1],0,k,P,J.subarray(0,W)):_.texSubImage2D(_.TEXTURE_2D,S,f,L,D[0],D[1],k,P,J.subarray(0,W)),P===_.FLOAT?a.freeFloat32(J):a.freeUint8(J)}}function A(_){var f=_.createTexture();return _.bindTexture(_.TEXTURE_2D,f),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),f}function m(_,f,L,S,k){var P=_.getParameter(_.MAX_TEXTURE_SIZE);if(f<0||f>P||L<0||L>P)throw new Error("gl-texture2d: Invalid texture shape");if(k===_.FLOAT&&!_.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var z=A(_);return _.texImage2D(_.TEXTURE_2D,0,S,f,L,0,S,k,null),new g(_,z,f,L,S,k)}function M(_,f,L,S,k,P){var z=A(_);return _.texImage2D(_.TEXTURE_2D,0,k,k,P,f),new g(_,z,L,S,k,P)}function x(_,f){var L=f.dtype,S=f.shape.slice(),k=_.getParameter(_.MAX_TEXTURE_SIZE);if(S[0]<0||S[0]>k||S[1]<0||S[1]>k)throw new Error("gl-texture2d: Invalid texture size");var P=y(S,f.stride.slice()),z=0;L==="float32"?z=_.FLOAT:L==="float64"?(z=_.FLOAT,P=!1,L="float32"):L==="uint8"?z=_.UNSIGNED_BYTE:(z=_.UNSIGNED_BYTE,P=!1,L="uint8");var I=0;if(S.length===2)I=_.LUMINANCE,S=[S[0],S[1],1],f=e(f.data,S,[f.stride[0],f.stride[1],1],f.offset);else if(S.length===3)if(S[2]===1)I=_.ALPHA;else if(S[2]===2)I=_.LUMINANCE_ALPHA;else if(S[2]===3)I=_.RGB;else if(S[2]===4)I=_.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");else throw new Error("gl-texture2d: Invalid shape for texture");z===_.FLOAT&&!_.getExtension("OES_texture_float")&&(z=_.UNSIGNED_BYTE,P=!1);var R,D,O=f.size;if(P)f.offset===0&&f.data.length===O?R=f.data:R=f.data.subarray(f.offset,f.offset+O);else{var F=[S[2],S[2]*S[0],1];D=a.malloc(O,L);var G=e(D,S,F,0);(L==="float32"||L==="float64")&&z===_.UNSIGNED_BYTE?v(G,f):o.assign(G,f),R=D.subarray(0,O)}var W=A(_);return _.texImage2D(_.TEXTURE_2D,0,I,S[0],S[1],0,I,z,R),P||a.free(D),new g(_,W,S[0],S[1],I,z)}function T(_){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(r||s(_),typeof arguments[1]=="number")return m(_,arguments[1],arguments[2],arguments[3]||_.RGBA,arguments[4]||_.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return m(_,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var f=arguments[1],L=i(f)?f:f.raw;if(L)return M(_,L,f.width|0,f.height|0,arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(f.shape&&f.data&&f.stride)return x(_,f)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],147:[function(l,b,w){function e(o,a,r){a?a.bind():o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,null);var n=o.getParameter(o.MAX_VERTEX_ATTRIBS)|0;if(r){if(r.length>n)throw new Error("gl-vao: Too many vertex attributes");for(var c=0;c<r.length;++c){var s=r[c];if(s.buffer){var i=s.buffer,v=s.size||4,u=s.type||o.FLOAT,g=!!s.normalized,h=s.stride||0,y=s.offset||0;i.bind(),o.enableVertexAttribArray(c),o.vertexAttribPointer(c,v,u,g,h,y)}else{if(typeof s=="number")o.vertexAttrib1f(c,s);else if(s.length===1)o.vertexAttrib1f(c,s[0]);else if(s.length===2)o.vertexAttrib2f(c,s[0],s[1]);else if(s.length===3)o.vertexAttrib3f(c,s[0],s[1],s[2]);else if(s.length===4)o.vertexAttrib4f(c,s[0],s[1],s[2],s[3]);else throw new Error("gl-vao: Invalid vertex attribute");o.disableVertexAttribArray(c)}}for(;c<n;++c)o.disableVertexAttribArray(c)}else{o.bindBuffer(o.ARRAY_BUFFER,null);for(var c=0;c<n;++c)o.disableVertexAttribArray(c)}}b.exports=e},{}],148:[function(l,b,w){var e=l("./do-bind.js");function o(r){this.gl=r,this._elements=null,this._attributes=null,this._elementsType=r.UNSIGNED_SHORT}o.prototype.bind=function(){e(this.gl,this._elements,this._attributes)},o.prototype.update=function(r,n,c){this._elements=n,this._attributes=r,this._elementsType=c||this.gl.UNSIGNED_SHORT},o.prototype.dispose=function(){},o.prototype.unbind=function(){},o.prototype.draw=function(r,n,c){c=c||0;var s=this.gl;this._elements?s.drawElements(r,n,this._elementsType,c):s.drawArrays(r,c,n)};function a(r){return new o(r)}b.exports=a},{"./do-bind.js":147}],149:[function(l,b,w){var e=l("./do-bind.js");function o(n,c,s,i,v,u){this.location=n,this.dimension=c,this.a=s,this.b=i,this.c=v,this.d=u}o.prototype.bind=function(n){switch(this.dimension){case 1:n.vertexAttrib1f(this.location,this.a);break;case 2:n.vertexAttrib2f(this.location,this.a,this.b);break;case 3:n.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:n.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d);break}};function a(n,c,s){this.gl=n,this._ext=c,this.handle=s,this._attribs=[],this._useElements=!1,this._elementsType=n.UNSIGNED_SHORT}a.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var n=0;n<this._attribs.length;++n)this._attribs[n].bind(this.gl)},a.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},a.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},a.prototype.update=function(n,c,s){if(this.bind(),e(this.gl,c,n),this.unbind(),this._attribs.length=0,n)for(var i=0;i<n.length;++i){var v=n[i];typeof v=="number"?this._attribs.push(new o(i,1,v)):Array.isArray(v)&&this._attribs.push(new o(i,v.length,v[0],v[1],v[2],v[3]))}this._useElements=!!c,this._elementsType=s||this.gl.UNSIGNED_SHORT},a.prototype.draw=function(n,c,s){s=s||0;var i=this.gl;this._useElements?i.drawElements(n,c,this._elementsType,s):i.drawArrays(n,s,c)};function r(n,c){return new a(n,c,c.createVertexArrayOES())}b.exports=r},{"./do-bind.js":147}],150:[function(l,b,w){var e=l("./lib/vao-native.js"),o=l("./lib/vao-emulated.js");function a(n){this.bindVertexArrayOES=n.bindVertexArray.bind(n),this.createVertexArrayOES=n.createVertexArray.bind(n),this.deleteVertexArrayOES=n.deleteVertexArray.bind(n)}function r(n,c,s,i){var v=n.createVertexArray?new a(n):n.getExtension("OES_vertex_array_object"),u;return v?u=e(n,v):u=o(n),u.update(c,s,i),u}b.exports=r},{"./lib/vao-emulated.js":148,"./lib/vao-native.js":149}],151:[function(l,b,w){b.exports=e;function e(o,a,r){return o[0]=a[0]+r[0],o[1]=a[1]+r[1],o[2]=a[2]+r[2],o}},{}],152:[function(l,b,w){b.exports=r;var e=l("./fromValues"),o=l("./normalize"),a=l("./dot");function r(n,c){var s=e(n[0],n[1],n[2]),i=e(c[0],c[1],c[2]);o(s,s),o(i,i);var v=a(s,i);return v>1?0:Math.acos(v)}},{"./dot":162,"./fromValues":168,"./normalize":179}],153:[function(l,b,w){b.exports=e;function e(o,a){return o[0]=Math.ceil(a[0]),o[1]=Math.ceil(a[1]),o[2]=Math.ceil(a[2]),o}},{}],154:[function(l,b,w){b.exports=e;function e(o){var a=new Float32Array(3);return a[0]=o[0],a[1]=o[1],a[2]=o[2],a}},{}],155:[function(l,b,w){b.exports=e;function e(o,a){return o[0]=a[0],o[1]=a[1],o[2]=a[2],o}},{}],156:[function(l,b,w){b.exports=e;function e(){var o=new Float32Array(3);return o[0]=0,o[1]=0,o[2]=0,o}},{}],157:[function(l,b,w){b.exports=e;function e(o,a,r){var n=a[0],c=a[1],s=a[2],i=r[0],v=r[1],u=r[2];return o[0]=c*u-s*v,o[1]=s*i-n*u,o[2]=n*v-c*i,o}},{}],158:[function(l,b,w){b.exports=l("./distance")},{"./distance":159}],159:[function(l,b,w){b.exports=e;function e(o,a){var r=a[0]-o[0],n=a[1]-o[1],c=a[2]-o[2];return Math.sqrt(r*r+n*n+c*c)}},{}],160:[function(l,b,w){b.exports=l("./divide")},{"./divide":161}],161:[function(l,b,w){b.exports=e;function e(o,a,r){return o[0]=a[0]/r[0],o[1]=a[1]/r[1],o[2]=a[2]/r[2],o}},{}],162:[function(l,b,w){b.exports=e;function e(o,a){return o[0]*a[0]+o[1]*a[1]+o[2]*a[2]}},{}],163:[function(l,b,w){b.exports=1e-6},{}],164:[function(l,b,w){b.exports=o;var e=l("./epsilon");function o(a,r){var n=a[0],c=a[1],s=a[2],i=r[0],v=r[1],u=r[2];return Math.abs(n-i)<=e*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(c-v)<=e*Math.max(1,Math.abs(c),Math.abs(v))&&Math.abs(s-u)<=e*Math.max(1,Math.abs(s),Math.abs(u))}},{"./epsilon":163}],165:[function(l,b,w){b.exports=e;function e(o,a){return o[0]===a[0]&&o[1]===a[1]&&o[2]===a[2]}},{}],166:[function(l,b,w){b.exports=e;function e(o,a){return o[0]=Math.floor(a[0]),o[1]=Math.floor(a[1]),o[2]=Math.floor(a[2]),o}},{}],167:[function(l,b,w){b.exports=o;var e=l("./create")();function o(a,r,n,c,s,i){var v,u;for(r||(r=3),n||(n=0),c?u=Math.min(c*r+n,a.length):u=a.length,v=n;v<u;v+=r)e[0]=a[v],e[1]=a[v+1],e[2]=a[v+2],s(e,e,i),a[v]=e[0],a[v+1]=e[1],a[v+2]=e[2];return a}},{"./create":156}],168:[function(l,b,w){b.exports=e;function e(o,a,r){var n=new Float32Array(3);return n[0]=o,n[1]=a,n[2]=r,n}},{}],169:[function(l,b,w){b.exports={EPSILON:l("./epsilon"),create:l("./create"),clone:l("./clone"),angle:l("./angle"),fromValues:l("./fromValues"),copy:l("./copy"),set:l("./set"),equals:l("./equals"),exactEquals:l("./exactEquals"),add:l("./add"),subtract:l("./subtract"),sub:l("./sub"),multiply:l("./multiply"),mul:l("./mul"),divide:l("./divide"),div:l("./div"),min:l("./min"),max:l("./max"),floor:l("./floor"),ceil:l("./ceil"),round:l("./round"),scale:l("./scale"),scaleAndAdd:l("./scaleAndAdd"),distance:l("./distance"),dist:l("./dist"),squaredDistance:l("./squaredDistance"),sqrDist:l("./sqrDist"),length:l("./length"),len:l("./len"),squaredLength:l("./squaredLength"),sqrLen:l("./sqrLen"),negate:l("./negate"),inverse:l("./inverse"),normalize:l("./normalize"),dot:l("./dot"),cross:l("./cross"),lerp:l("./lerp"),random:l("./random"),transformMat4:l("./transformMat4"),transformMat3:l("./transformMat3"),transformQuat:l("./transformQuat"),rotateX:l("./rotateX"),rotateY:l("./rotateY"),rotateZ:l("./rotateZ"),forEach:l("./forEach")}},{"./add":151,"./angle":152,"./ceil":153,"./clone":154,"./copy":155,"./create":156,"./cross":157,"./dist":158,"./distance":159,"./div":160,"./divide":161,"./dot":162,"./epsilon":163,"./equals":164,"./exactEquals":165,"./floor":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./len":171,"./length":172,"./lerp":173,"./max":174,"./min":175,"./mul":176,"./multiply":177,"./negate":178,"./normalize":179,"./random":180,"./rotateX":181,"./rotateY":182,"./rotateZ":183,"./round":184,"./scale":185,"./scaleAndAdd":186,"./set":187,"./sqrDist":188,"./sqrLen":189,"./squaredDistance":190,"./squaredLength":191,"./sub":192,"./subtract":193,"./transformMat3":194,"./transformMat4":195,"./transformQuat":196}],170:[function(l,b,w){b.exports=e;function e(o,a){return o[0]=1/a[0],o[1]=1/a[1],o[2]=1/a[2],o}},{}],171:[function(l,b,w){b.exports=l("./length")},{"./length":172}],172:[function(l,b,w){b.exports=e;function e(o){var a=o[0],r=o[1],n=o[2];return Math.sqrt(a*a+r*r+n*n)}},{}],173:[function(l,b,w){b.exports=e;function e(o,a,r,n){var c=a[0],s=a[1],i=a[2];return o[0]=c+n*(r[0]-c),o[1]=s+n*(r[1]-s),o[2]=i+n*(r[2]-i),o}},{}],174:[function(l,b,w){b.exports=e;function e(o,a,r){return o[0]=Math.max(a[0],r[0]),o[1]=Math.max(a[1],r[1]),o[2]=Math.max(a[2],r[2]),o}},{}],175:[function(l,b,w){b.exports=e;function e(o,a,r){return o[0]=Math.min(a[0],r[0]),o[1]=Math.min(a[1],r[1]),o[2]=Math.min(a[2],r[2]),o}},{}],176:[function(l,b,w){b.exports=l("./multiply")},{"./multiply":177}],177:[function(l,b,w){b.exports=e;function e(o,a,r){return o[0]=a[0]*r[0],o[1]=a[1]*r[1],o[2]=a[2]*r[2],o}},{}],178:[function(l,b,w){b.exports=e;function e(o,a){return o[0]=-a[0],o[1]=-a[1],o[2]=-a[2],o}},{}],179:[function(l,b,w){b.exports=e;function e(o,a){var r=a[0],n=a[1],c=a[2],s=r*r+n*n+c*c;return s>0&&(s=1/Math.sqrt(s),o[0]=a[0]*s,o[1]=a[1]*s,o[2]=a[2]*s),o}},{}],180:[function(l,b,w){b.exports=e;function e(o,a){a=a||1;var r=Math.random()*2*Math.PI,n=Math.random()*2-1,c=Math.sqrt(1-n*n)*a;return o[0]=Math.cos(r)*c,o[1]=Math.sin(r)*c,o[2]=n*a,o}},{}],181:[function(l,b,w){b.exports=e;function e(o,a,r,n){var c=r[1],s=r[2],i=a[1]-c,v=a[2]-s,u=Math.sin(n),g=Math.cos(n);return o[0]=a[0],o[1]=c+i*g-v*u,o[2]=s+i*u+v*g,o}},{}],182:[function(l,b,w){b.exports=e;function e(o,a,r,n){var c=r[0],s=r[2],i=a[0]-c,v=a[2]-s,u=Math.sin(n),g=Math.cos(n);return o[0]=c+v*u+i*g,o[1]=a[1],o[2]=s+v*g-i*u,o}},{}],183:[function(l,b,w){b.exports=e;function e(o,a,r,n){var c=r[0],s=r[1],i=a[0]-c,v=a[1]-s,u=Math.sin(n),g=Math.cos(n);return o[0]=c+i*g-v*u,o[1]=s+i*u+v*g,o[2]=a[2],o}},{}],184:[function(l,b,w){b.exports=e;function e(o,a){return o[0]=Math.round(a[0]),o[1]=Math.round(a[1]),o[2]=Math.round(a[2]),o}},{}],185:[function(l,b,w){b.exports=e;function e(o,a,r){return o[0]=a[0]*r,o[1]=a[1]*r,o[2]=a[2]*r,o}},{}],186:[function(l,b,w){b.exports=e;function e(o,a,r,n){return o[0]=a[0]+r[0]*n,o[1]=a[1]+r[1]*n,o[2]=a[2]+r[2]*n,o}},{}],187:[function(l,b,w){b.exports=e;function e(o,a,r,n){return o[0]=a,o[1]=r,o[2]=n,o}},{}],188:[function(l,b,w){b.exports=l("./squaredDistance")},{"./squaredDistance":190}],189:[function(l,b,w){b.exports=l("./squaredLength")},{"./squaredLength":191}],190:[function(l,b,w){b.exports=e;function e(o,a){var r=a[0]-o[0],n=a[1]-o[1],c=a[2]-o[2];return r*r+n*n+c*c}},{}],191:[function(l,b,w){b.exports=e;function e(o){var a=o[0],r=o[1],n=o[2];return a*a+r*r+n*n}},{}],192:[function(l,b,w){b.exports=l("./subtract")},{"./subtract":193}],193:[function(l,b,w){b.exports=e;function e(o,a,r){return o[0]=a[0]-r[0],o[1]=a[1]-r[1],o[2]=a[2]-r[2],o}},{}],194:[function(l,b,w){b.exports=e;function e(o,a,r){var n=a[0],c=a[1],s=a[2];return o[0]=n*r[0]+c*r[3]+s*r[6],o[1]=n*r[1]+c*r[4]+s*r[7],o[2]=n*r[2]+c*r[5]+s*r[8],o}},{}],195:[function(l,b,w){b.exports=e;function e(o,a,r){var n=a[0],c=a[1],s=a[2],i=r[3]*n+r[7]*c+r[11]*s+r[15];return i=i||1,o[0]=(r[0]*n+r[4]*c+r[8]*s+r[12])/i,o[1]=(r[1]*n+r[5]*c+r[9]*s+r[13])/i,o[2]=(r[2]*n+r[6]*c+r[10]*s+r[14])/i,o}},{}],196:[function(l,b,w){b.exports=e;function e(o,a,r){var n=a[0],c=a[1],s=a[2],i=r[0],v=r[1],u=r[2],g=r[3],h=g*n+v*s-u*c,y=g*c+u*n-i*s,p=g*s+i*c-v*n,A=-i*n-v*c-u*s;return o[0]=h*g+A*-i+y*-u-p*-v,o[1]=y*g+A*-v+p*-i-h*-u,o[2]=p*g+A*-u+h*-v-y*-i,o}},{}],197:[function(l,b,w){b.exports=e;function e(o,a,r){return o[0]=a[0]+r[0],o[1]=a[1]+r[1],o[2]=a[2]+r[2],o[3]=a[3]+r[3],o}},{}],198:[function(l,b,w){b.exports=e;function e(o){var a=new Float32Array(4);return a[0]=o[0],a[1]=o[1],a[2]=o[2],a[3]=o[3],a}},{}],199:[function(l,b,w){b.exports=e;function e(o,a){return o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],o}},{}],200:[function(l,b,w){b.exports=e;function e(){var o=new Float32Array(4);return o[0]=0,o[1]=0,o[2]=0,o[3]=0,o}},{}],201:[function(l,b,w){b.exports=e;function e(o,a){var r=a[0]-o[0],n=a[1]-o[1],c=a[2]-o[2],s=a[3]-o[3];return Math.sqrt(r*r+n*n+c*c+s*s)}},{}],202:[function(l,b,w){b.exports=e;function e(o,a,r){return o[0]=a[0]/r[0],o[1]=a[1]/r[1],o[2]=a[2]/r[2],o[3]=a[3]/r[3],o}},{}],203:[function(l,b,w){b.exports=e;function e(o,a){return o[0]*a[0]+o[1]*a[1]+o[2]*a[2]+o[3]*a[3]}},{}],204:[function(l,b,w){b.exports=e;function e(o,a,r,n){var c=new Float32Array(4);return c[0]=o,c[1]=a,c[2]=r,c[3]=n,c}},{}],205:[function(l,b,w){b.exports={create:l("./create"),clone:l("./clone"),fromValues:l("./fromValues"),copy:l("./copy"),set:l("./set"),add:l("./add"),subtract:l("./subtract"),multiply:l("./multiply"),divide:l("./divide"),min:l("./min"),max:l("./max"),scale:l("./scale"),scaleAndAdd:l("./scaleAndAdd"),distance:l("./distance"),squaredDistance:l("./squaredDistance"),length:l("./length"),squaredLength:l("./squaredLength"),negate:l("./negate"),inverse:l("./inverse"),normalize:l("./normalize"),dot:l("./dot"),lerp:l("./lerp"),random:l("./random"),transformMat4:l("./transformMat4"),transformQuat:l("./transformQuat")}},{"./add":197,"./clone":198,"./copy":199,"./create":200,"./distance":201,"./divide":202,"./dot":203,"./fromValues":204,"./inverse":206,"./length":207,"./lerp":208,"./max":209,"./min":210,"./multiply":211,"./negate":212,"./normalize":213,"./random":214,"./scale":215,"./scaleAndAdd":216,"./set":217,"./squaredDistance":218,"./squaredLength":219,"./subtract":220,"./transformMat4":221,"./transformQuat":222}],206:[function(l,b,w){b.exports=e;function e(o,a){return o[0]=1/a[0],o[1]=1/a[1],o[2]=1/a[2],o[3]=1/a[3],o}},{}],207:[function(l,b,w){b.exports=e;function e(o){var a=o[0],r=o[1],n=o[2],c=o[3];return Math.sqrt(a*a+r*r+n*n+c*c)}},{}],208:[function(l,b,w){b.exports=e;function e(o,a,r,n){var c=a[0],s=a[1],i=a[2],v=a[3];return o[0]=c+n*(r[0]-c),o[1]=s+n*(r[1]-s),o[2]=i+n*(r[2]-i),o[3]=v+n*(r[3]-v),o}},{}],209:[function(l,b,w){b.exports=e;function e(o,a,r){return o[0]=Math.max(a[0],r[0]),o[1]=Math.max(a[1],r[1]),o[2]=Math.max(a[2],r[2]),o[3]=Math.max(a[3],r[3]),o}},{}],210:[function(l,b,w){b.exports=e;function e(o,a,r){return o[0]=Math.min(a[0],r[0]),o[1]=Math.min(a[1],r[1]),o[2]=Math.min(a[2],r[2]),o[3]=Math.min(a[3],r[3]),o}},{}],211:[function(l,b,w){b.exports=e;function e(o,a,r){return o[0]=a[0]*r[0],o[1]=a[1]*r[1],o[2]=a[2]*r[2],o[3]=a[3]*r[3],o}},{}],212:[function(l,b,w){b.exports=e;function e(o,a){return o[0]=-a[0],o[1]=-a[1],o[2]=-a[2],o[3]=-a[3],o}},{}],213:[function(l,b,w){b.exports=e;function e(o,a){var r=a[0],n=a[1],c=a[2],s=a[3],i=r*r+n*n+c*c+s*s;return i>0&&(i=1/Math.sqrt(i),o[0]=r*i,o[1]=n*i,o[2]=c*i,o[3]=s*i),o}},{}],214:[function(l,b,w){var e=l("./normalize"),o=l("./scale");b.exports=a;function a(r,n){return n=n||1,r[0]=Math.random(),r[1]=Math.random(),r[2]=Math.random(),r[3]=Math.random(),e(r,r),o(r,r,n),r}},{"./normalize":213,"./scale":215}],215:[function(l,b,w){b.exports=e;function e(o,a,r){return o[0]=a[0]*r,o[1]=a[1]*r,o[2]=a[2]*r,o[3]=a[3]*r,o}},{}],216:[function(l,b,w){b.exports=e;function e(o,a,r,n){return o[0]=a[0]+r[0]*n,o[1]=a[1]+r[1]*n,o[2]=a[2]+r[2]*n,o[3]=a[3]+r[3]*n,o}},{}],217:[function(l,b,w){b.exports=e;function e(o,a,r,n,c){return o[0]=a,o[1]=r,o[2]=n,o[3]=c,o}},{}],218:[function(l,b,w){b.exports=e;function e(o,a){var r=a[0]-o[0],n=a[1]-o[1],c=a[2]-o[2],s=a[3]-o[3];return r*r+n*n+c*c+s*s}},{}],219:[function(l,b,w){b.exports=e;function e(o){var a=o[0],r=o[1],n=o[2],c=o[3];return a*a+r*r+n*n+c*c}},{}],220:[function(l,b,w){b.exports=e;function e(o,a,r){return o[0]=a[0]-r[0],o[1]=a[1]-r[1],o[2]=a[2]-r[2],o[3]=a[3]-r[3],o}},{}],221:[function(l,b,w){b.exports=e;function e(o,a,r){var n=a[0],c=a[1],s=a[2],i=a[3];return o[0]=r[0]*n+r[4]*c+r[8]*s+r[12]*i,o[1]=r[1]*n+r[5]*c+r[9]*s+r[13]*i,o[2]=r[2]*n+r[6]*c+r[10]*s+r[14]*i,o[3]=r[3]*n+r[7]*c+r[11]*s+r[15]*i,o}},{}],222:[function(l,b,w){b.exports=e;function e(o,a,r){var n=a[0],c=a[1],s=a[2],i=r[0],v=r[1],u=r[2],g=r[3],h=g*n+v*s-u*c,y=g*c+u*n-i*s,p=g*s+i*c-v*n,A=-i*n-v*c-u*s;return o[0]=h*g+A*-i+y*-u-p*-v,o[1]=y*g+A*-v+p*-i-h*-u,o[2]=p*g+A*-u+h*-v-y*-i,o[3]=a[3],o}},{}],223:[function(l,b,w){var e=l("glsl-tokenizer"),o=l("atob-lite");b.exports=a;function a(r){for(var n=Array.isArray(r)?r:e(r),c=0;c<n.length;c++){var s=n[c];if(s.type==="preprocessor"){var i=s.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(!!i&&!!i[2]){var v=i[1],u=i[2];return(v?o(u):u).trim()}}}}},{"atob-lite":13,"glsl-tokenizer":230}],224:[function(l,b,w){b.exports=f;var e=l("./lib/literals"),o=l("./lib/operators"),a=l("./lib/builtins"),r=l("./lib/literals-300es"),n=l("./lib/builtins-300es"),c=999,s=9999,i=0,v=1,u=2,g=3,h=4,y=5,p=6,A=7,m=8,M=9,x=10,T=11,_=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function f(L){var S=0,k=0,P=c,z,I,R=[],D=[],O=1,F=0,G=0,W=!1,q=!1,J="",X;L=L||{};var Z=a,se=e;L.version==="300 es"&&(Z=n,se=r);for(var le={},oe={},S=0;S<Z.length;S++)le[Z[S]]=!0;for(var S=0;S<se.length;S++)oe[se[S]]=!0;return function(ke){return D=[],ke!==null?V(ke):re()};function U(ke){ke.length&&D.push({type:_[P],data:ke,position:G,line:O,column:F})}function V(ke){S=0,ke.toString&&(ke=ke.toString()),J+=ke.replace(/\r\n/g,`
`),X=J.length;for(var Ae;z=J[S],S<X;){switch(Ae=S,P){case i:S=ae();break;case v:S=ne();break;case u:S=Q();break;case g:S=ie();break;case h:S=he();break;case T:S=xe();break;case y:S=ge();break;case s:S=me();break;case M:S=j();break;case c:S=ee();break}if(Ae!==S)switch(J[Ae]){case`
`:F=0,++O;break;default:++F;break}}return k+=S,J=J.slice(S),D}function re(ke){return R.length&&U(R.join("")),P=x,U("(eof)"),D}function ee(){return R=R.length?[]:R,I==="/"&&z==="*"?(G=k+S-1,P=i,I=z,S+1):I==="/"&&z==="/"?(G=k+S-1,P=v,I=z,S+1):z==="#"?(P=u,G=k+S,S):/\s/.test(z)?(P=M,G=k+S,S):(W=/\d/.test(z),q=/[^\w_]/.test(z),G=k+S,P=W?h:q?g:s,S)}function j(){return/[^\s]/g.test(z)?(U(R.join("")),P=c,S):(R.push(z),I=z,S+1)}function Q(){return(z==="\r"||z===`
`)&&I!=="\\"?(U(R.join("")),P=c,S):(R.push(z),I=z,S+1)}function ne(){return Q()}function ae(){return z==="/"&&I==="*"?(R.push(z),U(R.join("")),P=c,S+1):(R.push(z),I=z,S+1)}function ie(){if(I==="."&&/\d/.test(z))return P=y,S;if(I==="/"&&z==="*")return P=i,S;if(I==="/"&&z==="/")return P=v,S;if(z==="."&&R.length){for(;ue(R););return P=y,S}if(z===";"||z===")"||z==="("){if(R.length)for(;ue(R););return U(z),P=c,S+1}var ke=R.length===2&&z!=="=";if(/[\w_\d\s]/.test(z)||ke){for(;ue(R););return P=c,S}return R.push(z),I=z,S+1}function ue(ke){var Ae=0,Ne,He;do{if(Ne=o.indexOf(ke.slice(0,ke.length+Ae).join("")),He=o[Ne],Ne===-1){if(Ae--+ke.length>0)continue;He=ke.slice(0,1).join("")}return U(He),G+=He.length,R=R.slice(He.length),R.length}while(1)}function xe(){return/[^a-fA-F0-9]/.test(z)?(U(R.join("")),P=c,S):(R.push(z),I=z,S+1)}function he(){return z==="."||/[eE]/.test(z)?(R.push(z),P=y,I=z,S+1):z==="x"&&R.length===1&&R[0]==="0"?(P=T,R.push(z),I=z,S+1):/[^\d]/.test(z)?(U(R.join("")),P=c,S):(R.push(z),I=z,S+1)}function ge(){return z==="f"&&(R.push(z),I=z,S+=1),/[eE]/.test(z)||(z==="-"||z==="+")&&/[eE]/.test(I)?(R.push(z),I=z,S+1):/[^\d]/.test(z)?(U(R.join("")),P=c,S):(R.push(z),I=z,S+1)}function me(){if(/[^\d\w_]/.test(z)){var ke=R.join("");return oe[ke]?P=m:le[ke]?P=A:P=p,U(R.join("")),P=c,S}return R.push(z),I=z,S+1}}},{"./lib/builtins":226,"./lib/builtins-300es":225,"./lib/literals":228,"./lib/literals-300es":227,"./lib/operators":229}],225:[function(l,b,w){var e=l("./builtins");e=e.slice().filter(function(o){return!/^(gl\_|texture)/.test(o)}),b.exports=e.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":226}],226:[function(l,b,w){b.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],227:[function(l,b,w){var e=l("./literals");b.exports=e.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":228}],228:[function(l,b,w){b.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],229:[function(l,b,w){b.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],230:[function(l,b,w){var e=l("./index");b.exports=o;function o(a,r){var n=e(r),c=[];return c=c.concat(n(a)),c=c.concat(n(null)),c}},{"./index":224}],231:[function(l,b,w){b.exports=function(e){typeof e=="string"&&(e=[e]);for(var o=[].slice.call(arguments,1),a=[],r=0;r<e.length-1;r++)a.push(e[r],o[r]||"");return a.push(e[r]),a.join("")}},{}],232:[function(l,b,w){var e=l("is-browser");function o(){var a=!1;try{var r=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("test",null,r),window.removeEventListener("test",null,r)}catch{a=!1}return a}b.exports=e&&o()},{"is-browser":236}],233:[function(l,b,w){b.exports=g;var e=l("robust-orientation"),o=l("simplicial-complex").compareCells;function a(h,y,p){this.vertices=h,this.adjacent=y,this.boundary=p,this.lastVisited=-1}a.prototype.flip=function(){var h=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=h;var y=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=y};function r(h,y,p){this.vertices=h,this.cell=y,this.index=p}function n(h,y){return o(h.vertices,y.vertices)}function c(h){return function(){var y=this.tuple;return h.apply(this,y)}}function s(h){var y=e[h+1];return y||(y=e),c(y)}var i=[];function v(h,y,p){this.dimension=h,this.vertices=y,this.simplices=p,this.interior=p.filter(function(M){return!M.boundary}),this.tuple=new Array(h+1);for(var A=0;A<=h;++A)this.tuple[A]=this.vertices[A];var m=i[h];m||(m=i[h]=s(h)),this.orient=m}var u=v.prototype;u.handleBoundaryDegeneracy=function(h,y){var p=this.dimension,A=this.vertices.length-1,m=this.tuple,M=this.vertices,x=[h];for(h.lastVisited=-A;x.length>0;){h=x.pop();for(var T=h.adjacent,_=0;_<=p;++_){var f=T[_];if(!(!f.boundary||f.lastVisited<=-A)){for(var L=f.vertices,S=0;S<=p;++S){var k=L[S];k<0?m[S]=y:m[S]=M[k]}var P=this.orient();if(P>0)return f;f.lastVisited=-A,P===0&&x.push(f)}}}return null},u.walk=function(h,y){var p=this.vertices.length-1,A=this.dimension,m=this.vertices,M=this.tuple,x=y?this.interior.length*Math.random()|0:this.interior.length-1,T=this.interior[x];e:for(;!T.boundary;){for(var _=T.vertices,f=T.adjacent,L=0;L<=A;++L)M[L]=m[_[L]];T.lastVisited=p;for(var L=0;L<=A;++L){var S=f[L];if(!(S.lastVisited>=p)){var k=M[L];M[L]=h;var P=this.orient();if(M[L]=k,P<0){T=S;continue e}else S.boundary?S.lastVisited=-p:S.lastVisited=p}}return}return T},u.addPeaks=function(h,y){var p=this.vertices.length-1,A=this.dimension,m=this.vertices,M=this.tuple,x=this.interior,T=this.simplices,_=[y];y.lastVisited=p,y.vertices[y.vertices.indexOf(-1)]=p,y.boundary=!1,x.push(y);for(var f=[];_.length>0;){var y=_.pop(),L=y.vertices,S=y.adjacent,k=L.indexOf(p);if(!(k<0)){for(var P=0;P<=A;++P)if(P!==k){var z=S[P];if(!(!z.boundary||z.lastVisited>=p)){var I=z.vertices;if(z.lastVisited!==-p){for(var R=0,D=0;D<=A;++D)I[D]<0?(R=D,M[D]=h):M[D]=m[I[D]];var O=this.orient();if(O>0){I[R]=p,z.boundary=!1,x.push(z),_.push(z),z.lastVisited=p;continue}else z.lastVisited=-p}var F=z.adjacent,G=L.slice(),W=S.slice(),q=new a(G,W,!0);T.push(q);var J=F.indexOf(y);if(!(J<0)){F[J]=q,W[k]=z,G[P]=-1,W[P]=y,S[P]=q,q.flip();for(var D=0;D<=A;++D){var X=G[D];if(!(X<0||X===p)){for(var Z=new Array(A-1),se=0,le=0;le<=A;++le){var oe=G[le];oe<0||le===D||(Z[se++]=oe)}f.push(new r(Z,q,D))}}}}}}}f.sort(n);for(var P=0;P+1<f.length;P+=2){var U=f[P],V=f[P+1],re=U.index,ee=V.index;re<0||ee<0||(U.cell.adjacent[U.index]=V.cell,V.cell.adjacent[V.index]=U.cell)}},u.insert=function(h,y){var p=this.vertices;p.push(h);var A=this.walk(h,y);if(!!A){for(var m=this.dimension,M=this.tuple,x=0;x<=m;++x){var T=A.vertices[x];T<0?M[x]=h:M[x]=p[T]}var _=this.orient(M);_<0||_===0&&(A=this.handleBoundaryDegeneracy(A,h),!A)||this.addPeaks(h,A)}},u.boundary=function(){for(var h=this.dimension,y=[],p=this.simplices,A=p.length,m=0;m<A;++m){var M=p[m];if(M.boundary){for(var x=new Array(h),T=M.vertices,_=0,f=0,L=0;L<=h;++L)T[L]>=0?x[_++]=T[L]:f=L&1;if(f===(h&1)){var S=x[0];x[0]=x[1],x[1]=S}y.push(x)}}return y};function g(h,y){var p=h.length;if(p===0)throw new Error("Must have at least d+1 points");var A=h[0].length;if(p<=A)throw new Error("Must input at least d+1 points");var m=h.slice(0,A+1),M=e.apply(void 0,m);if(M===0)throw new Error("Input not in general position");for(var x=new Array(A+1),T=0;T<=A;++T)x[T]=T;M<0&&(x[0]=1,x[1]=0);for(var _=new a(x,new Array(A+1),!1),f=_.adjacent,L=new Array(A+2),T=0;T<=A;++T){for(var S=x.slice(),k=0;k<=A;++k)k===T&&(S[k]=-1);var P=S[0];S[0]=S[1],S[1]=P;var z=new a(S,new Array(A+1),!0);f[T]=z,L[T]=z}L[A+1]=_;for(var T=0;T<=A;++T)for(var S=f[T].vertices,I=f[T].adjacent,k=0;k<=A;++k){var R=S[k];if(R<0){I[k]=_;continue}for(var D=0;D<=A;++D)f[D].vertices.indexOf(R)<0&&(I[k]=f[D])}for(var O=new v(A,m,L),F=!!y,T=A+1;T<p;++T)O.insert(h[T],F);return O.boundary()}},{"robust-orientation":284,"simplicial-complex":293}],234:[function(l,b,w){var e=l("binary-search-bounds"),o=0,a=1,r=2;b.exports=_;function n(f,L,S,k,P){this.mid=f,this.left=L,this.right=S,this.leftPoints=k,this.rightPoints=P,this.count=(L?L.count:0)+(S?S.count:0)+k.length}var c=n.prototype;function s(f,L){f.mid=L.mid,f.left=L.left,f.right=L.right,f.leftPoints=L.leftPoints,f.rightPoints=L.rightPoints,f.count=L.count}function i(f,L){var S=M(L);f.mid=S.mid,f.left=S.left,f.right=S.right,f.leftPoints=S.leftPoints,f.rightPoints=S.rightPoints,f.count=S.count}function v(f,L){var S=f.intervals([]);S.push(L),i(f,S)}function u(f,L){var S=f.intervals([]),k=S.indexOf(L);return k<0?o:(S.splice(k,1),i(f,S),a)}c.intervals=function(f){return f.push.apply(f,this.leftPoints),this.left&&this.left.intervals(f),this.right&&this.right.intervals(f),f},c.insert=function(f){var L=this.count-this.leftPoints.length;if(this.count+=1,f[1]<this.mid)this.left?4*(this.left.count+1)>3*(L+1)?v(this,f):this.left.insert(f):this.left=M([f]);else if(f[0]>this.mid)this.right?4*(this.right.count+1)>3*(L+1)?v(this,f):this.right.insert(f):this.right=M([f]);else{var S=e.ge(this.leftPoints,f,A),k=e.ge(this.rightPoints,f,m);this.leftPoints.splice(S,0,f),this.rightPoints.splice(k,0,f)}},c.remove=function(f){var L=this.count-this.leftPoints;if(f[1]<this.mid){if(!this.left)return o;var S=this.right?this.right.count:0;if(4*S>3*(L-1))return u(this,f);var k=this.left.remove(f);return k===r?(this.left=null,this.count-=1,a):(k===a&&(this.count-=1),k)}else if(f[0]>this.mid){if(!this.right)return o;var P=this.left?this.left.count:0;if(4*P>3*(L-1))return u(this,f);var k=this.right.remove(f);return k===r?(this.right=null,this.count-=1,a):(k===a&&(this.count-=1),k)}else{if(this.count===1)return this.leftPoints[0]===f?r:o;if(this.leftPoints.length===1&&this.leftPoints[0]===f){if(this.left&&this.right){for(var z=this,I=this.left;I.right;)z=I,I=I.right;if(z===this)I.right=this.right;else{var R=this.left,k=this.right;z.count-=I.count,z.right=I.left,I.left=R,I.right=k}s(this,I),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?s(this,this.left):s(this,this.right);return a}for(var R=e.ge(this.leftPoints,f,A);R<this.leftPoints.length&&this.leftPoints[R][0]===f[0];++R)if(this.leftPoints[R]===f){this.count-=1,this.leftPoints.splice(R,1);for(var k=e.ge(this.rightPoints,f,m);k<this.rightPoints.length&&this.rightPoints[k][1]===f[1];++k)if(this.rightPoints[k]===f)return this.rightPoints.splice(k,1),a}return o}};function g(f,L,S){for(var k=0;k<f.length&&f[k][0]<=L;++k){var P=S(f[k]);if(P)return P}}function h(f,L,S){for(var k=f.length-1;k>=0&&f[k][1]>=L;--k){var P=S(f[k]);if(P)return P}}function y(f,L){for(var S=0;S<f.length;++S){var k=L(f[S]);if(k)return k}}c.queryPoint=function(f,L){if(f<this.mid){if(this.left){var S=this.left.queryPoint(f,L);if(S)return S}return g(this.leftPoints,f,L)}else if(f>this.mid){if(this.right){var S=this.right.queryPoint(f,L);if(S)return S}return h(this.rightPoints,f,L)}else return y(this.leftPoints,L)},c.queryInterval=function(f,L,S){if(f<this.mid&&this.left){var k=this.left.queryInterval(f,L,S);if(k)return k}if(L>this.mid&&this.right){var k=this.right.queryInterval(f,L,S);if(k)return k}return L<this.mid?g(this.leftPoints,L,S):f>this.mid?h(this.rightPoints,f,S):y(this.leftPoints,S)};function p(f,L){return f-L}function A(f,L){var S=f[0]-L[0];return S||f[1]-L[1]}function m(f,L){var S=f[1]-L[1];return S||f[0]-L[0]}function M(f){if(f.length===0)return null;for(var L=[],S=0;S<f.length;++S)L.push(f[S][0],f[S][1]);L.sort(p);for(var k=L[L.length>>1],P=[],z=[],I=[],S=0;S<f.length;++S){var R=f[S];R[1]<k?P.push(R):k<R[0]?z.push(R):I.push(R)}var D=I,O=I.slice();return D.sort(A),O.sort(m),new n(k,M(P),M(z),D,O)}function x(f){this.root=f}var T=x.prototype;T.insert=function(f){this.root?this.root.insert(f):this.root=new n(f[0],null,null,[f],[f])},T.remove=function(f){if(this.root){var L=this.root.remove(f);return L===r&&(this.root=null),L!==o}return!1},T.queryPoint=function(f,L){if(this.root)return this.root.queryPoint(f,L)},T.queryInterval=function(f,L,S){if(f<=L&&this.root)return this.root.queryInterval(f,L,S)},Object.defineProperty(T,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(T,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function _(f){return!f||f.length===0?new x(null):new x(M(f))}},{"binary-search-bounds":31}],235:[function(l,b,w){function e(o){for(var a=new Array(o),r=0;r<o;++r)a[r]=r;return a}b.exports=e},{}],236:[function(l,b,w){b.exports=!0},{}],237:[function(l,b,w){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */b.exports=function(a){return a!=null&&(e(a)||o(a)||!!a._isBuffer)};function e(a){return!!a.constructor&&typeof a.constructor.isBuffer=="function"&&a.constructor.isBuffer(a)}function o(a){return typeof a.readFloatLE=="function"&&typeof a.slice=="function"&&e(a.slice(0,0))}},{}],238:[function(l,b,w){b.exports=a,b.exports.isMobile=a,b.exports.default=a;var e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,o=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function a(r){r||(r={});var n=r.ua;if(!n&&typeof navigator!="undefined"&&(n=navigator.userAgent),n&&n.headers&&typeof n.headers["user-agent"]=="string"&&(n=n.headers["user-agent"]),typeof n!="string")return!1;var c=r.tablet?o.test(n):e.test(n);return!c&&r.tablet&&r.featureDetect&&navigator&&navigator.maxTouchPoints>1&&n.indexOf("Macintosh")!==-1&&n.indexOf("Safari")!==-1&&(c=!0),c}},{}],239:[function(l,b,w){b.exports=function(e){for(var o=e.length,a,r=0;r<o;r++)if(a=e.charCodeAt(r),(a<9||a>13)&&a!==32&&a!==133&&a!==160&&a!==5760&&a!==6158&&(a<8192||a>8205)&&a!==8232&&a!==8233&&a!==8239&&a!==8287&&a!==8288&&a!==12288&&a!==65279)return!1;return!0}},{}],240:[function(l,b,w){function e(o,a,r){return o*(1-r)+a*r}b.exports=e},{}],241:[function(l,b,w){var e=l("./normalize"),o=l("gl-mat4/create"),a=l("gl-mat4/clone"),r=l("gl-mat4/determinant"),n=l("gl-mat4/invert"),c=l("gl-mat4/transpose"),s={length:l("gl-vec3/length"),normalize:l("gl-vec3/normalize"),dot:l("gl-vec3/dot"),cross:l("gl-vec3/cross")},i=o(),v=o(),u=[0,0,0,0],g=[[0,0,0],[0,0,0],[0,0,0]],h=[0,0,0];b.exports=function(M,x,T,_,f,L){if(x||(x=[0,0,0]),T||(T=[0,0,0]),_||(_=[0,0,0]),f||(f=[0,0,0,1]),L||(L=[0,0,0,1]),!e(i,M)||(a(v,i),v[3]=0,v[7]=0,v[11]=0,v[15]=1,Math.abs(r(v)<1e-8)))return!1;var S=i[3],k=i[7],P=i[11],z=i[12],I=i[13],R=i[14],D=i[15];if(S!==0||k!==0||P!==0){u[0]=S,u[1]=k,u[2]=P,u[3]=D;var O=n(v,v);if(!O)return!1;c(v,v),y(f,u,v)}else f[0]=f[1]=f[2]=0,f[3]=1;if(x[0]=z,x[1]=I,x[2]=R,p(g,i),T[0]=s.length(g[0]),s.normalize(g[0],g[0]),_[0]=s.dot(g[0],g[1]),A(g[1],g[1],g[0],1,-_[0]),T[1]=s.length(g[1]),s.normalize(g[1],g[1]),_[0]/=T[1],_[1]=s.dot(g[0],g[2]),A(g[2],g[2],g[0],1,-_[1]),_[2]=s.dot(g[1],g[2]),A(g[2],g[2],g[1],1,-_[2]),T[2]=s.length(g[2]),s.normalize(g[2],g[2]),_[1]/=T[2],_[2]/=T[2],s.cross(h,g[1],g[2]),s.dot(g[0],h)<0)for(var F=0;F<3;F++)T[F]*=-1,g[F][0]*=-1,g[F][1]*=-1,g[F][2]*=-1;return L[0]=.5*Math.sqrt(Math.max(1+g[0][0]-g[1][1]-g[2][2],0)),L[1]=.5*Math.sqrt(Math.max(1-g[0][0]+g[1][1]-g[2][2],0)),L[2]=.5*Math.sqrt(Math.max(1-g[0][0]-g[1][1]+g[2][2],0)),L[3]=.5*Math.sqrt(Math.max(1+g[0][0]+g[1][1]+g[2][2],0)),g[2][1]>g[1][2]&&(L[0]=-L[0]),g[0][2]>g[2][0]&&(L[1]=-L[1]),g[1][0]>g[0][1]&&(L[2]=-L[2]),!0};function y(m,M,x){var T=M[0],_=M[1],f=M[2],L=M[3];return m[0]=x[0]*T+x[4]*_+x[8]*f+x[12]*L,m[1]=x[1]*T+x[5]*_+x[9]*f+x[13]*L,m[2]=x[2]*T+x[6]*_+x[10]*f+x[14]*L,m[3]=x[3]*T+x[7]*_+x[11]*f+x[15]*L,m}function p(m,M){m[0][0]=M[0],m[0][1]=M[1],m[0][2]=M[2],m[1][0]=M[4],m[1][1]=M[5],m[1][2]=M[6],m[2][0]=M[8],m[2][1]=M[9],m[2][2]=M[10]}function A(m,M,x,T,_){m[0]=M[0]*T+x[0]*_,m[1]=M[1]*T+x[1]*_,m[2]=M[2]*T+x[2]*_}},{"./normalize":242,"gl-mat4/clone":92,"gl-mat4/create":93,"gl-mat4/determinant":94,"gl-mat4/invert":98,"gl-mat4/transpose":109,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/length":172,"gl-vec3/normalize":179}],242:[function(l,b,w){b.exports=function(o,a){var r=a[15];if(r===0)return!1;for(var n=1/r,c=0;c<16;c++)o[c]=a[c]*n;return!0}},{}],243:[function(l,b,w){var e=l("gl-vec3/lerp"),o=l("mat4-recompose"),a=l("mat4-decompose"),r=l("gl-mat4/determinant"),n=l("quat-slerp"),c=u(),s=u(),i=u();b.exports=v;function v(y,p,A,m){if(r(p)===0||r(A)===0)return!1;var M=a(p,c.translate,c.scale,c.skew,c.perspective,c.quaternion),x=a(A,s.translate,s.scale,s.skew,s.perspective,s.quaternion);return!M||!x?!1:(e(i.translate,c.translate,s.translate,m),e(i.skew,c.skew,s.skew,m),e(i.scale,c.scale,s.scale,m),e(i.perspective,c.perspective,s.perspective,m),n(i.quaternion,c.quaternion,s.quaternion,m),o(y,i.translate,i.scale,i.skew,i.perspective,i.quaternion),!0)}function u(){return{translate:g(),scale:g(1),skew:g(),perspective:h(),quaternion:h()}}function g(y){return[y||0,y||0,y||0]}function h(){return[0,0,0,1]}},{"gl-mat4/determinant":94,"gl-vec3/lerp":173,"mat4-decompose":241,"mat4-recompose":244,"quat-slerp":271}],244:[function(l,b,w){var e={identity:l("gl-mat4/identity"),translate:l("gl-mat4/translate"),multiply:l("gl-mat4/multiply"),create:l("gl-mat4/create"),scale:l("gl-mat4/scale"),fromRotationTranslation:l("gl-mat4/fromRotationTranslation")};e.create();var o=e.create();b.exports=function(r,n,c,s,i,v){return e.identity(r),e.fromRotationTranslation(r,v,n),r[3]=i[0],r[7]=i[1],r[11]=i[2],r[15]=i[3],e.identity(o),s[2]!==0&&(o[9]=s[2],e.multiply(r,r,o)),s[1]!==0&&(o[9]=0,o[8]=s[1],e.multiply(r,r,o)),s[0]!==0&&(o[8]=0,o[4]=s[0],e.multiply(r,r,o)),e.scale(r,r,c),r}},{"gl-mat4/create":93,"gl-mat4/fromRotationTranslation":96,"gl-mat4/identity":97,"gl-mat4/multiply":100,"gl-mat4/scale":107,"gl-mat4/translate":108}],245:[function(l,b,w){var e=l("binary-search-bounds"),o=l("mat4-interpolate"),a=l("gl-mat4/invert"),r=l("gl-mat4/rotateX"),n=l("gl-mat4/rotateY"),c=l("gl-mat4/rotateZ"),s=l("gl-mat4/lookAt"),i=l("gl-mat4/translate");l("gl-mat4/scale");var v=l("gl-vec3/normalize"),u=[0,0,0];b.exports=p;function g(A){this._components=A.slice(),this._time=[0],this.prevMatrix=A.slice(),this.nextMatrix=A.slice(),this.computedMatrix=A.slice(),this.computedInverse=A.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}var h=g.prototype;h.recalcMatrix=function(A){var m=this._time,M=e.le(m,A),x=this.computedMatrix;if(!(M<0)){var T=this._components;if(M===m.length-1)for(var _=16*M,f=0;f<16;++f)x[f]=T[_++];else{for(var L=m[M+1]-m[M],_=16*M,S=this.prevMatrix,k=!0,f=0;f<16;++f)S[f]=T[_++];for(var P=this.nextMatrix,f=0;f<16;++f)P[f]=T[_++],k=k&&S[f]===P[f];if(L<1e-6||k)for(var f=0;f<16;++f)x[f]=S[f];else o(x,S,P,(A-m[M])/L)}var z=this.computedUp;z[0]=x[1],z[1]=x[5],z[2]=x[9],v(z,z);var I=this.computedInverse;a(I,x);var R=this.computedEye,D=I[15];R[0]=I[12]/D,R[1]=I[13]/D,R[2]=I[14]/D;for(var O=this.computedCenter,F=Math.exp(this.computedRadius[0]),f=0;f<3;++f)O[f]=R[f]-x[2+4*f]*F}},h.idle=function(A){if(!(A<this.lastT())){for(var m=this._components,M=m.length-16,x=0;x<16;++x)m.push(m[M++]);this._time.push(A)}},h.flush=function(A){var m=e.gt(this._time,A)-2;m<0||(this._time.splice(0,m),this._components.splice(0,16*m))},h.lastT=function(){return this._time[this._time.length-1]},h.lookAt=function(A,m,M,x){this.recalcMatrix(A),m=m||this.computedEye,M=M||u,x=x||this.computedUp,this.setMatrix(A,s(this.computedMatrix,m,M,x));for(var T=0,_=0;_<3;++_)T+=Math.pow(M[_]-m[_],2);T=Math.log(Math.sqrt(T)),this.computedRadius[0]=T},h.rotate=function(A,m,M,x){this.recalcMatrix(A);var T=this.computedInverse;m&&n(T,T,m),M&&r(T,T,M),x&&c(T,T,x),this.setMatrix(A,a(this.computedMatrix,T))};var y=[0,0,0];h.pan=function(A,m,M,x){y[0]=-(m||0),y[1]=-(M||0),y[2]=-(x||0),this.recalcMatrix(A);var T=this.computedInverse;i(T,T,y),this.setMatrix(A,a(T,T))},h.translate=function(A,m,M,x){y[0]=m||0,y[1]=M||0,y[2]=x||0,this.recalcMatrix(A);var T=this.computedMatrix;i(T,T,y),this.setMatrix(A,T)},h.setMatrix=function(A,m){if(!(A<this.lastT())){this._time.push(A);for(var M=0;M<16;++M)this._components.push(m[M])}},h.setDistance=function(A,m){this.computedRadius[0]=m},h.setDistanceLimits=function(A,m){var M=this._limits;M[0]=A,M[1]=m},h.getDistanceLimits=function(A){var m=this._limits;return A?(A[0]=m[0],A[1]=m[1],A):m};function p(A){A=A||{};var m=A.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new g(m)}},{"binary-search-bounds":31,"gl-mat4/invert":98,"gl-mat4/lookAt":99,"gl-mat4/rotateX":104,"gl-mat4/rotateY":105,"gl-mat4/rotateZ":106,"gl-mat4/scale":107,"gl-mat4/translate":108,"gl-vec3/normalize":179,"mat4-interpolate":243}],246:[function(l,b,w){b.exports=o;var e=l("robust-orientation")[3];function o(a){var r=a.length;if(r<3){for(var h=new Array(r),n=0;n<r;++n)h[n]=n;return r===2&&a[0][0]===a[1][0]&&a[0][1]===a[1][1]?[0]:h}for(var c=new Array(r),n=0;n<r;++n)c[n]=n;c.sort(function(m,M){var x=a[m][0]-a[M][0];return x||a[m][1]-a[M][1]});for(var s=[c[0],c[1]],i=[c[0],c[1]],n=2;n<r;++n){for(var v=c[n],u=a[v],g=s.length;g>1&&e(a[s[g-2]],a[s[g-1]],u)<=0;)g-=1,s.pop();for(s.push(v),g=i.length;g>1&&e(a[i[g-2]],a[i[g-1]],u)>=0;)g-=1,i.pop();i.push(v)}for(var h=new Array(i.length+s.length-2),y=0,n=0,p=s.length;n<p;++n)h[y++]=s[n];for(var A=i.length-2;A>0;--A)h[y++]=i[A];return h}},{"robust-orientation":284}],247:[function(l,b,w){b.exports=o;var e=l("mouse-event");function o(a,r){r||(r=a,a=window);var n=0,c=0,s=0,i={shift:!1,alt:!1,control:!1,meta:!1},v=!1;function u(f){var L=!1;return"altKey"in f&&(L=L||f.altKey!==i.alt,i.alt=!!f.altKey),"shiftKey"in f&&(L=L||f.shiftKey!==i.shift,i.shift=!!f.shiftKey),"ctrlKey"in f&&(L=L||f.ctrlKey!==i.control,i.control=!!f.ctrlKey),"metaKey"in f&&(L=L||f.metaKey!==i.meta,i.meta=!!f.metaKey),L}function g(f,L){var S=e.x(L),k=e.y(L);"buttons"in L&&(f=L.buttons|0),(f!==n||S!==c||k!==s||u(L))&&(n=f|0,c=S||0,s=k||0,r&&r(n,c,s,i))}function h(f){g(0,f)}function y(){(n||c||s||i.shift||i.alt||i.meta||i.control)&&(c=s=0,n=0,i.shift=i.alt=i.control=i.meta=!1,r&&r(0,0,0,i))}function p(f){u(f)&&r&&r(n,c,s,i)}function A(f){e.buttons(f)===0?g(0,f):g(n,f)}function m(f){g(n|e.buttons(f),f)}function M(f){g(n&~e.buttons(f),f)}function x(){v||(v=!0,a.addEventListener("mousemove",A),a.addEventListener("mousedown",m),a.addEventListener("mouseup",M),a.addEventListener("mouseleave",h),a.addEventListener("mouseenter",h),a.addEventListener("mouseout",h),a.addEventListener("mouseover",h),a.addEventListener("blur",y),a.addEventListener("keyup",p),a.addEventListener("keydown",p),a.addEventListener("keypress",p),a!==window&&(window.addEventListener("blur",y),window.addEventListener("keyup",p),window.addEventListener("keydown",p),window.addEventListener("keypress",p)))}function T(){!v||(v=!1,a.removeEventListener("mousemove",A),a.removeEventListener("mousedown",m),a.removeEventListener("mouseup",M),a.removeEventListener("mouseleave",h),a.removeEventListener("mouseenter",h),a.removeEventListener("mouseout",h),a.removeEventListener("mouseover",h),a.removeEventListener("blur",y),a.removeEventListener("keyup",p),a.removeEventListener("keydown",p),a.removeEventListener("keypress",p),a!==window&&(window.removeEventListener("blur",y),window.removeEventListener("keyup",p),window.removeEventListener("keydown",p),window.removeEventListener("keypress",p)))}x();var _={element:a};return Object.defineProperties(_,{enabled:{get:function(){return v},set:function(f){f?x():T()},enumerable:!0},buttons:{get:function(){return n},enumerable:!0},x:{get:function(){return c},enumerable:!0},y:{get:function(){return s},enumerable:!0},mods:{get:function(){return i},enumerable:!0}}),_}},{"mouse-event":249}],248:[function(l,b,w){var e={left:0,top:0};b.exports=o;function o(r,n,c){n=n||r.currentTarget||r.srcElement,Array.isArray(c)||(c=[0,0]);var s=r.clientX||0,i=r.clientY||0,v=a(n);return c[0]=s-v.left,c[1]=i-v.top,c}function a(r){return r===window||r===document||r===document.body?e:r.getBoundingClientRect()}},{}],249:[function(l,b,w){function e(n){if(typeof n=="object"){if("buttons"in n)return n.buttons;if("which"in n){var c=n.which;if(c===2)return 4;if(c===3)return 2;if(c>0)return 1<<c-1}else if("button"in n){var c=n.button;if(c===1)return 4;if(c===2)return 2;if(c>=0)return 1<<c}}return 0}w.buttons=e;function o(n){return n.target||n.srcElement||window}w.element=o;function a(n){if(typeof n=="object"){if("offsetX"in n)return n.offsetX;var c=o(n),s=c.getBoundingClientRect();return n.clientX-s.left}return 0}w.x=a;function r(n){if(typeof n=="object"){if("offsetY"in n)return n.offsetY;var c=o(n),s=c.getBoundingClientRect();return n.clientY-s.top}return 0}w.y=r},{}],250:[function(l,b,w){var e=l("to-px");b.exports=o;function o(a,r,n){typeof a=="function"&&(n=!!r,r=a,a=window);var c=e("ex",a),s=function(i){n&&i.preventDefault();var v=i.deltaX||0,u=i.deltaY||0,g=i.deltaZ||0,h=i.deltaMode,y=1;switch(h){case 1:y=c;break;case 2:y=window.innerHeight;break}if(v*=y,u*=y,g*=y,v||u||g)return r(v,u,g,i)};return a.addEventListener("wheel",s),s}},{"to-px":304}],251:[function(l,b,w){var e=l("typedarray-pool");b.exports=r;var o={"false,0,1":function(c,s,i,v,u){return function(h,y,p,A){var m=h.shape[0]|0,M=h.shape[1]|0,x=h.data,T=h.offset|0,_=h.stride[0]|0,f=h.stride[1]|0,L=T,S,k=-_|0,P=0,z=-f|0,I=0,R=-_-f|0,D=0,O=_|0,F=f-_*m|0,G=0,W=0,q=0,J=2*m|0,X=v(J),Z=v(J),se=0,le=0,oe=-1,U=-1,V=0,re=-m|0,ee=m|0,j=0,Q=-m-1|0,ne=m-1|0,ae=0,ie=0,ue=0;for(G=0;G<m;++G)X[se++]=i(x[L],y,p,A),L+=O;if(L+=F,M>0){if(W=1,X[se++]=i(x[L],y,p,A),L+=O,m>0)for(G=1,S=x[L],le=X[se]=i(S,y,p,A),V=X[se+oe],j=X[se+re],ae=X[se+Q],(le!==V||le!==j||le!==ae)&&(P=x[L+k],I=x[L+z],D=x[L+R],c(G,W,S,P,I,D,le,V,j,ae,y,p,A),ie=Z[se]=q++),se+=1,L+=O,G=2;G<m;++G)S=x[L],le=X[se]=i(S,y,p,A),V=X[se+oe],j=X[se+re],ae=X[se+Q],(le!==V||le!==j||le!==ae)&&(P=x[L+k],I=x[L+z],D=x[L+R],c(G,W,S,P,I,D,le,V,j,ae,y,p,A),ie=Z[se]=q++,ae!==V&&s(Z[se+oe],ie,D,P,ae,V,y,p,A)),se+=1,L+=O;for(L+=F,se=0,ue=oe,oe=U,U=ue,ue=re,re=ee,ee=ue,ue=Q,Q=ne,ne=ue,W=2;W<M;++W){if(X[se++]=i(x[L],y,p,A),L+=O,m>0)for(G=1,S=x[L],le=X[se]=i(S,y,p,A),V=X[se+oe],j=X[se+re],ae=X[se+Q],(le!==V||le!==j||le!==ae)&&(P=x[L+k],I=x[L+z],D=x[L+R],c(G,W,S,P,I,D,le,V,j,ae,y,p,A),ie=Z[se]=q++,ae!==j&&s(Z[se+re],ie,I,D,j,ae,y,p,A)),se+=1,L+=O,G=2;G<m;++G)S=x[L],le=X[se]=i(S,y,p,A),V=X[se+oe],j=X[se+re],ae=X[se+Q],(le!==V||le!==j||le!==ae)&&(P=x[L+k],I=x[L+z],D=x[L+R],c(G,W,S,P,I,D,le,V,j,ae,y,p,A),ie=Z[se]=q++,ae!==j&&s(Z[se+re],ie,I,D,j,ae,y,p,A),ae!==V&&s(Z[se+oe],ie,D,P,ae,V,y,p,A)),se+=1,L+=O;W&1&&(se=0),ue=oe,oe=U,U=ue,ue=re,re=ee,ee=ue,ue=Q,Q=ne,ne=ue,L+=F}}u(Z),u(X)}},"false,1,0":function(c,s,i,v,u){return function(h,y,p,A){var m=h.shape[0]|0,M=h.shape[1]|0,x=h.data,T=h.offset|0,_=h.stride[0]|0,f=h.stride[1]|0,L=T,S,k=-_|0,P=0,z=-f|0,I=0,R=-_-f|0,D=0,O=f|0,F=_-f*M|0,G=0,W=0,q=0,J=2*M|0,X=v(J),Z=v(J),se=0,le=0,oe=-1,U=-1,V=0,re=-M|0,ee=M|0,j=0,Q=-M-1|0,ne=M-1|0,ae=0,ie=0,ue=0;for(W=0;W<M;++W)X[se++]=i(x[L],y,p,A),L+=O;if(L+=F,m>0){if(G=1,X[se++]=i(x[L],y,p,A),L+=O,M>0)for(W=1,S=x[L],le=X[se]=i(S,y,p,A),j=X[se+re],V=X[se+oe],ae=X[se+Q],(le!==j||le!==V||le!==ae)&&(P=x[L+k],I=x[L+z],D=x[L+R],c(G,W,S,P,I,D,le,j,V,ae,y,p,A),ie=Z[se]=q++),se+=1,L+=O,W=2;W<M;++W)S=x[L],le=X[se]=i(S,y,p,A),j=X[se+re],V=X[se+oe],ae=X[se+Q],(le!==j||le!==V||le!==ae)&&(P=x[L+k],I=x[L+z],D=x[L+R],c(G,W,S,P,I,D,le,j,V,ae,y,p,A),ie=Z[se]=q++,ae!==V&&s(Z[se+oe],ie,I,D,V,ae,y,p,A)),se+=1,L+=O;for(L+=F,se=0,ue=re,re=ee,ee=ue,ue=oe,oe=U,U=ue,ue=Q,Q=ne,ne=ue,G=2;G<m;++G){if(X[se++]=i(x[L],y,p,A),L+=O,M>0)for(W=1,S=x[L],le=X[se]=i(S,y,p,A),j=X[se+re],V=X[se+oe],ae=X[se+Q],(le!==j||le!==V||le!==ae)&&(P=x[L+k],I=x[L+z],D=x[L+R],c(G,W,S,P,I,D,le,j,V,ae,y,p,A),ie=Z[se]=q++,ae!==j&&s(Z[se+re],ie,D,P,ae,j,y,p,A)),se+=1,L+=O,W=2;W<M;++W)S=x[L],le=X[se]=i(S,y,p,A),j=X[se+re],V=X[se+oe],ae=X[se+Q],(le!==j||le!==V||le!==ae)&&(P=x[L+k],I=x[L+z],D=x[L+R],c(G,W,S,P,I,D,le,j,V,ae,y,p,A),ie=Z[se]=q++,ae!==V&&s(Z[se+oe],ie,I,D,V,ae,y,p,A),ae!==j&&s(Z[se+re],ie,D,P,ae,j,y,p,A)),se+=1,L+=O;G&1&&(se=0),ue=re,re=ee,ee=ue,ue=oe,oe=U,U=ue,ue=Q,Q=ne,ne=ue,L+=F}}u(Z),u(X)}}};function a(n,c,s,i,v,u){var g=[u,v].join(","),h=o[g];return h(n,c,s,e.mallocUint32,e.freeUint32)}function r(n){function c(y){throw new Error("ndarray-extract-contour: "+y)}typeof n!="object"&&c("Must specify arguments");var s=n.order;Array.isArray(s)||c("Must specify order");var i=n.arrayArguments||1;i<1&&c("Must have at least one array argument");var v=n.scalarArguments||0;v<0&&c("Scalar arg count must be > 0"),typeof n.vertex!="function"&&c("Must specify vertex creation function"),typeof n.cell!="function"&&c("Must specify cell creation function"),typeof n.phase!="function"&&c("Must specify phase function");for(var u=n.getters||[],g=new Array(i),h=0;h<i;++h)u.indexOf(h)>=0?g[h]=!0:g[h]=!1;return a(n.vertex,n.cell,n.phase,v,s,g)}},{"typedarray-pool":308}],252:[function(l,b,w){var e=l("dup"),o={zero:function(p,A,m,M){var x=p[0],T=m[0];M|=0;var _=0,f=T;for(_=0;_<x;++_)A[M]=0,M+=f},fdTemplate1:function(p,A,m,M,x,T,_){var f=p[0],L=m[0],S=T[0],k=-1*L,P=L;M|=0,_|=0;var z=0,I=L,R=S;for(z=0;z<f;++z)x[_]=.5*(A[M+k]-A[M+P]),M+=I,_+=R},fdTemplate2:function(p,A,m,M,x,T,_,f,L,S){var k=p[0],P=p[1],z=m[0],I=m[1],R=T[0],D=T[1],O=L[0],F=L[1],G=-1*z,W=z,q=-1*I,J=I;M|=0,_|=0,S|=0;var X=0,Z=0,se=I,le=z-P*I,oe=D,U=R-P*D,V=F,re=O-P*F;for(Z=0;Z<k;++Z){for(X=0;X<P;++X)x[_]=.5*(A[M+G]-A[M+W]),f[S]=.5*(A[M+q]-A[M+J]),M+=se,_+=oe,S+=V;M+=le,_+=U,S+=re}}},a={cdiff:function(p){var A={};return function(M,x,T){var _=M.dtype,f=M.order,L=x.dtype,S=x.order,k=T.dtype,P=T.order,z=[_,f.join(),L,S.join(),k,P.join()].join(),I=A[z];return I||(A[z]=I=p([_,f,L,S,k,P])),I(M.shape.slice(0),M.data,M.stride,M.offset|0,x.data,x.stride,x.offset|0,T.data,T.stride,T.offset|0)}},zero:function(p){var A={};return function(M){var x=M.dtype,T=M.order,_=[x,T.join()].join(),f=A[_];return f||(A[_]=f=p([x,T])),f(M.shape.slice(0),M.data,M.stride,M.offset|0)}},fdTemplate1:function(p){var A={};return function(M,x){var T=M.dtype,_=M.order,f=x.dtype,L=x.order,S=[T,_.join(),f,L.join()].join(),k=A[S];return k||(A[S]=k=p([T,_,f,L])),k(M.shape.slice(0),M.data,M.stride,M.offset|0,x.data,x.stride,x.offset|0)}},fdTemplate2:function(p){var A={};return function(M,x,T){var _=M.dtype,f=M.order,L=x.dtype,S=x.order,k=T.dtype,P=T.order,z=[_,f.join(),L,S.join(),k,P.join()].join(),I=A[z];return I||(A[z]=I=p([_,f,L,S,k,P])),I(M.shape.slice(0),M.data,M.stride,M.offset|0,x.data,x.stride,x.offset|0,T.data,T.stride,T.offset|0)}}};function r(p){var A=a[p.funcName];return A(n.bind(void 0,p))}function n(p){return o[p.funcName]}function c(p){return r({funcName:p.funcName})}var s={},i={},v=c({funcName:"cdiff"}),u=c({funcName:"zero"});function g(p){return p in s?s[p]:s[p]=c({funcName:"fdTemplate"+p})}function h(p,A,m,M){return function(x,T){var _=T.shape.slice();return _[0]>2&&_[1]>2&&M(T.pick(-1,-1).lo(1,1).hi(_[0]-2,_[1]-2),x.pick(-1,-1,0).lo(1,1).hi(_[0]-2,_[1]-2),x.pick(-1,-1,1).lo(1,1).hi(_[0]-2,_[1]-2)),_[1]>2&&(m(T.pick(0,-1).lo(1).hi(_[1]-2),x.pick(0,-1,1).lo(1).hi(_[1]-2)),A(x.pick(0,-1,0).lo(1).hi(_[1]-2))),_[1]>2&&(m(T.pick(_[0]-1,-1).lo(1).hi(_[1]-2),x.pick(_[0]-1,-1,1).lo(1).hi(_[1]-2)),A(x.pick(_[0]-1,-1,0).lo(1).hi(_[1]-2))),_[0]>2&&(m(T.pick(-1,0).lo(1).hi(_[0]-2),x.pick(-1,0,0).lo(1).hi(_[0]-2)),A(x.pick(-1,0,1).lo(1).hi(_[0]-2))),_[0]>2&&(m(T.pick(-1,_[1]-1).lo(1).hi(_[0]-2),x.pick(-1,_[1]-1,0).lo(1).hi(_[0]-2)),A(x.pick(-1,_[1]-1,1).lo(1).hi(_[0]-2))),x.set(0,0,0,0),x.set(0,0,1,0),x.set(_[0]-1,0,0,0),x.set(_[0]-1,0,1,0),x.set(0,_[1]-1,0,0),x.set(0,_[1]-1,1,0),x.set(_[0]-1,_[1]-1,0,0),x.set(_[0]-1,_[1]-1,1,0),x}}function y(p){var A=p.join(),_=i[A];if(_)return _;for(var m=p.length,M=[v,u],x=1;x<=m;++x)M.push(g(x));var T=h,_=T.apply(void 0,M);return i[A]=_,_}b.exports=function(A,m,M){if(Array.isArray(M)||(typeof M=="string"?M=e(m.dimension,M):M=e(m.dimension,"clamp")),m.size===0)return A;if(m.dimension===0)return A.set(0),A;var x=y(M);return x(A,m)}},{dup:65}],253:[function(l,b,w){function e(c,s){var i=Math.floor(s),v=s-i,u=0<=i&&i<c.shape[0],g=0<=i+1&&i+1<c.shape[0],h=u?+c.get(i):0,y=g?+c.get(i+1):0;return(1-v)*h+v*y}function o(c,s,i){var v=Math.floor(s),u=s-v,g=0<=v&&v<c.shape[0],h=0<=v+1&&v+1<c.shape[0],y=Math.floor(i),p=i-y,A=0<=y&&y<c.shape[1],m=0<=y+1&&y+1<c.shape[1],M=g&&A?c.get(v,y):0,x=g&&m?c.get(v,y+1):0,T=h&&A?c.get(v+1,y):0,_=h&&m?c.get(v+1,y+1):0;return(1-p)*((1-u)*M+u*T)+p*((1-u)*x+u*_)}function a(c,s,i,v){var u=Math.floor(s),g=s-u,h=0<=u&&u<c.shape[0],y=0<=u+1&&u+1<c.shape[0],p=Math.floor(i),A=i-p,m=0<=p&&p<c.shape[1],M=0<=p+1&&p+1<c.shape[1],x=Math.floor(v),T=v-x,_=0<=x&&x<c.shape[2],f=0<=x+1&&x+1<c.shape[2],L=h&&m&&_?c.get(u,p,x):0,S=h&&M&&_?c.get(u,p+1,x):0,k=y&&m&&_?c.get(u+1,p,x):0,P=y&&M&&_?c.get(u+1,p+1,x):0,z=h&&m&&f?c.get(u,p,x+1):0,I=h&&M&&f?c.get(u,p+1,x+1):0,R=y&&m&&f?c.get(u+1,p,x+1):0,D=y&&M&&f?c.get(u+1,p+1,x+1):0;return(1-T)*((1-A)*((1-g)*L+g*k)+A*((1-g)*S+g*P))+T*((1-A)*((1-g)*z+g*R)+A*((1-g)*I+g*D))}function r(c){var s=c.shape.length|0,i=new Array(s),v=new Array(s),u=new Array(s),g=new Array(s),h,y;for(h=0;h<s;++h)y=+arguments[h+1],i[h]=Math.floor(y),v[h]=y-i[h],u[h]=0<=i[h]&&i[h]<c.shape[h],g[h]=0<=i[h]+1&&i[h]+1<c.shape[h];var p=0,A,m,M;e:for(h=0;h<1<<s;++h){for(m=1,M=c.offset,A=0;A<s;++A)if(h&1<<A){if(!g[A])continue e;m*=v[A],M+=c.stride[A]*(i[A]+1)}else{if(!u[A])continue e;m*=1-v[A],M+=c.stride[A]*i[A]}p+=m*c.data[M]}return p}function n(c,s,i,v){switch(c.shape.length){case 0:return 0;case 1:return e(c,s);case 2:return o(c,s,i);case 3:return a(c,s,i,v);default:return r.apply(void 0,arguments)}}b.exports=n,b.exports.d1=e,b.exports.d2=o,b.exports.d3=a},{}],254:[function(l,b,w){var e={"float64,2,1,0":function(){return function(v,u,g,h,y){var p=v[0],A=v[1],m=v[2],M=g[0],x=g[1],T=g[2];h|=0;var _=0,f=0,L=0,S=T,k=x-m*T,P=M-A*x;for(L=0;L<p;++L){for(f=0;f<A;++f){for(_=0;_<m;++_)u[h]/=y,h+=S;h+=k}h+=P}}},"uint8,2,0,1,float64,2,1,0":function(){return function(v,u,g,h,y,p,A,m){var M=v[0],x=v[1],T=v[2],_=g[0],f=g[1],L=g[2],S=p[0],k=p[1],P=p[2];h|=0,A|=0;for(var z=h,I=A,R=v[0]|0;R>0;){R<64?(M=R,R=0):(M=64,R-=64);for(var D=v[1]|0;D>0;){D<64?(x=D,D=0):(x=64,D-=64),h=z+R*_+D*f,A=I+R*S+D*k;var O=0,F=0,G=0,W=L,q=_-T*L,J=f-M*_,X=P,Z=S-T*P,se=k-M*S;for(G=0;G<x;++G){for(F=0;F<M;++F){for(O=0;O<T;++O)u[h]=y[A]*m,h+=W,A+=X;h+=q,A+=Z}h+=J,A+=se}}}}},"float32,1,0,float32,1,0":function(){return function(v,u,g,h,y,p,A){var m=v[0],M=v[1],x=g[0],T=g[1],_=p[0],f=p[1];h|=0,A|=0;var L=0,S=0,k=T,P=x-M*T,z=f,I=_-M*f;for(S=0;S<m;++S){for(L=0;L<M;++L)u[h]=y[A],h+=k,A+=z;h+=P,A+=I}}},"float32,1,0,float32,0,1":function(){return function(v,u,g,h,y,p,A){var m=v[0],M=v[1],x=g[0],T=g[1],_=p[0],f=p[1];h|=0,A|=0;for(var L=h,S=A,k=v[1]|0;k>0;){k<64?(M=k,k=0):(M=64,k-=64);for(var P=v[0]|0;P>0;){P<64?(m=P,P=0):(m=64,P-=64),h=L+k*T+P*x,A=S+k*f+P*_;var z=0,I=0,R=T,D=x-M*T,O=f,F=_-M*f;for(I=0;I<m;++I){for(z=0;z<M;++z)u[h]=y[A],h+=R,A+=O;h+=D,A+=F}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(v,u,g,h,y,p,A){var m=v[0],M=v[1],x=v[2],T=g[0],_=g[1],f=g[2],L=p[0],S=p[1],k=p[2];h|=0,A|=0;for(var P=h,z=A,I=v[2]|0;I>0;){I<64?(x=I,I=0):(x=64,I-=64);for(var R=v[0]|0;R>0;){R<64?(m=R,R=0):(m=64,R-=64);for(var D=v[1]|0;D>0;){D<64?(M=D,D=0):(M=64,D-=64),h=P+I*f+R*T+D*_,A=z+I*k+R*L+D*S;var O=0,F=0,G=0,W=f,q=T-x*f,J=_-m*T,X=k,Z=L-x*k,se=S-m*L;for(G=0;G<M;++G){for(F=0;F<m;++F){for(O=0;O<x;++O)u[h]=y[A],h+=W,A+=X;h+=q,A+=Z}h+=J,A+=se}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(v,u,g,h,y,p,A){var m=v[0],M=v[1],x=v[2],T=g[0],_=g[1],f=g[2],L=p[0],S=p[1],k=p[2];h|=0,A|=0;var P=0,z=0,I=0,R=f,D=T-x*f,O=_-m*T,F=k,G=L-x*k,W=S-m*L;for(I=0;I<M;++I){for(z=0;z<m;++z){for(P=0;P<x;++P)u[h]=y[A],h+=R,A+=F;h+=D,A+=G}h+=O,A+=W}}}};function o(i,v){var u=v.join(","),g=e[u];return g()}var a=o,r={mul:function(i){var v={};return function(g,h,y){var p=g.dtype,A=g.order,m=h.dtype,M=h.order,x=y.dtype,T=y.order,_=[p,A.join(),m,M.join(),x,T.join()].join(),f=v[_];return f||(v[_]=f=i([p,A,m,M,x,T])),f(g.shape.slice(0),g.data,g.stride,g.offset|0,h.data,h.stride,h.offset|0,y.data,y.stride,y.offset|0)}},muls:function(i){var v={};return function(g,h,y){var p=g.dtype,A=g.order,m=h.dtype,M=h.order,x=[p,A.join(),m,M.join()].join(),T=v[x];return T||(v[x]=T=i([p,A,m,M])),T(g.shape.slice(0),g.data,g.stride,g.offset|0,h.data,h.stride,h.offset|0,y)}},mulseq:function(i){var v={};return function(g,h){var y=g.dtype,p=g.order,A=[y,p.join()].join(),m=v[A];return m||(v[A]=m=i([y,p])),m(g.shape.slice(0),g.data,g.stride,g.offset|0,h)}},div:function(i){var v={};return function(g,h,y){var p=g.dtype,A=g.order,m=h.dtype,M=h.order,x=y.dtype,T=y.order,_=[p,A.join(),m,M.join(),x,T.join()].join(),f=v[_];return f||(v[_]=f=i([p,A,m,M,x,T])),f(g.shape.slice(0),g.data,g.stride,g.offset|0,h.data,h.stride,h.offset|0,y.data,y.stride,y.offset|0)}},divs:function(i){var v={};return function(g,h,y){var p=g.dtype,A=g.order,m=h.dtype,M=h.order,x=[p,A.join(),m,M.join()].join(),T=v[x];return T||(v[x]=T=i([p,A,m,M])),T(g.shape.slice(0),g.data,g.stride,g.offset|0,h.data,h.stride,h.offset|0,y)}},divseq:function(i){var v={};return function(g,h){var y=g.dtype,p=g.order,A=[y,p.join()].join(),m=v[A];return m||(v[A]=m=i([y,p])),m(g.shape.slice(0),g.data,g.stride,g.offset|0,h)}},assign:function(i){var v={};return function(g,h){var y=g.dtype,p=g.order,A=h.dtype,m=h.order,M=[y,p.join(),A,m.join()].join(),x=v[M];return x||(v[M]=x=i([y,p,A,m])),x(g.shape.slice(0),g.data,g.stride,g.offset|0,h.data,h.stride,h.offset|0)}}};function n(i){var v=r[i.funcName];return v(a.bind(void 0,i))}function c(i){return n({funcName:i.funcName})}var s={mul:"*",div:"/"};(function(){for(var i in s)w[i]=c({funcName:i}),w[i+"s"]=c({funcName:i+"s"}),w[i+"seq"]=c({funcName:i+"seq"})})(),w.assign=c({funcName:"assign"})},{}],255:[function(l,b,w){var e=l("ndarray"),o=l("./doConvert.js");b.exports=function(r,n){for(var c=[],s=r,i=1;Array.isArray(s);)c.push(s.length),i*=s.length,s=s[0];return c.length===0?e():(n||(n=e(new Float64Array(i),c)),o(n,r),n)}},{"./doConvert.js":256,ndarray:259}],256:[function(l,b,w){function e(){return function(s,i,v,u,g){var h=s[0],y=s[1],p=s[2],A=v[0],m=v[1],M=v[2],x=[0,0,0];u|=0;var T=0,_=0,f=0,L=M,S=m-p*M,k=A-y*m;for(f=0;f<h;++f){for(_=0;_<y;++_){for(T=0;T<p;++T){{var P=g,z;for(z=0;z<x.length-1;++z)P=P[x[z]];i[u]=P[x[x.length-1]]}u+=L,++x[2]}u+=S,x[2]-=p,++x[1]}u+=k,x[1]-=y,++x[0]}}}function o(){return e()}var a=o;function r(s){var i={};return function(u,g){var h=u.dtype,y=u.order,p=[h,y.join()].join(),A=i[p];return A||(i[p]=A=s([h,y])),A(u.shape.slice(0),u.data,u.stride,u.offset|0,g)}}function n(s){return r(a.bind(void 0,s))}function c(s){return n({funcName:s.funcName})}b.exports=c({funcName:"convert"})},{}],257:[function(l,b,w){var e=l("typedarray-pool");function o(v){switch(v){case"uint32":return[e.mallocUint32,e.freeUint32];default:return null}}var a={"uint32,1,0":function(v,u){return function(h,y,p,A,m,M,x,T,_,f,L){var S,k,P,z=h*m+A,I,R=v(T),D,O,F,G;for(S=h+1;S<=y;++S){for(k=S,z+=m,P=z,D=0,O=z,I=0;I<T;++I)R[D++]=p[O],O+=_;e:for(;k-- >h;){D=0,O=P-m;t:for(I=0;I<T;++I){if(F=p[O],G=R[D],F<G)break e;if(F>G)break t;O+=f,D+=L}for(D=P,O=P-m,I=0;I<T;++I)p[D]=p[O],D+=_,O+=_;P-=m}for(D=P,O=0,I=0;I<T;++I)p[D]=R[O++],D+=_}u(R)}}};function r(v,u){var g=o(u),h=[u,v].join(","),y=a[h];return g?y(g[0],g[1]):y()}var n={"uint32,1,0":function(v,u,g){return function h(y,p,A,m,M,x,T,_,f,L,S){var k=(p-y+1)/6|0,P=y+k,z=p-k,I=y+p>>1,R=I-k,D=I+k,O=P,F=R,G=I,W=D,q=z,J=y+1,X=p-1,Z=!0,se,le,oe,U,V,re,ee,j,Q,ne=0,ae=0,ie=0,ue,xe,he,ge,me,ke,Ae,Ne,He,Ge,_e,De,Ye,qe,Ue,Ie,Ve=_,dt=u(Ve),Dt=u(Ve);xe=M*O,he=M*F,Ie=m;e:for(ue=0;ue<_;++ue){if(ee=xe+Ie,j=he+Ie,ie=A[ee]-A[j],ie>0){le=O,O=F,F=le;break e}if(ie<0)break e;Ie+=L}xe=M*W,he=M*q,Ie=m;e:for(ue=0;ue<_;++ue){if(ee=xe+Ie,j=he+Ie,ie=A[ee]-A[j],ie>0){le=W,W=q,q=le;break e}if(ie<0)break e;Ie+=L}xe=M*O,he=M*G,Ie=m;e:for(ue=0;ue<_;++ue){if(ee=xe+Ie,j=he+Ie,ie=A[ee]-A[j],ie>0){le=O,O=G,G=le;break e}if(ie<0)break e;Ie+=L}xe=M*F,he=M*G,Ie=m;e:for(ue=0;ue<_;++ue){if(ee=xe+Ie,j=he+Ie,ie=A[ee]-A[j],ie>0){le=F,F=G,G=le;break e}if(ie<0)break e;Ie+=L}xe=M*O,he=M*W,Ie=m;e:for(ue=0;ue<_;++ue){if(ee=xe+Ie,j=he+Ie,ie=A[ee]-A[j],ie>0){le=O,O=W,W=le;break e}if(ie<0)break e;Ie+=L}xe=M*G,he=M*W,Ie=m;e:for(ue=0;ue<_;++ue){if(ee=xe+Ie,j=he+Ie,ie=A[ee]-A[j],ie>0){le=G,G=W,W=le;break e}if(ie<0)break e;Ie+=L}xe=M*F,he=M*q,Ie=m;e:for(ue=0;ue<_;++ue){if(ee=xe+Ie,j=he+Ie,ie=A[ee]-A[j],ie>0){le=F,F=q,q=le;break e}if(ie<0)break e;Ie+=L}xe=M*F,he=M*G,Ie=m;e:for(ue=0;ue<_;++ue){if(ee=xe+Ie,j=he+Ie,ie=A[ee]-A[j],ie>0){le=F,F=G,G=le;break e}if(ie<0)break e;Ie+=L}xe=M*W,he=M*q,Ie=m;e:for(ue=0;ue<_;++ue){if(ee=xe+Ie,j=he+Ie,ie=A[ee]-A[j],ie>0){le=W,W=q,q=le;break e}if(ie<0)break e;Ie+=L}for(xe=M*O,he=M*F,ge=M*G,me=M*W,ke=M*q,Ae=M*P,Ne=M*I,He=M*z,Ue=0,Ie=m,ue=0;ue<_;++ue)ee=xe+Ie,j=he+Ie,Q=ge+Ie,Ge=me+Ie,_e=ke+Ie,De=Ae+Ie,Ye=Ne+Ie,qe=He+Ie,dt[Ue]=A[j],Dt[Ue]=A[Ge],Z=Z&&dt[Ue]===Dt[Ue],oe=A[ee],U=A[Q],V=A[_e],A[De]=oe,A[Ye]=U,A[qe]=V,++Ue,Ie+=f;for(xe=M*R,he=M*y,Ie=m,ue=0;ue<_;++ue)ee=xe+Ie,j=he+Ie,A[ee]=A[j],Ie+=f;for(xe=M*D,he=M*p,Ie=m,ue=0;ue<_;++ue)ee=xe+Ie,j=he+Ie,A[ee]=A[j],Ie+=f;if(Z)for(re=J;re<=X;++re){ee=m+re*M,Ue=0;e:for(ue=0;ue<_;++ue){if(ie=A[ee]-dt[Ue],ie!==0)break e;Ue+=S,ee+=L}if(ie!==0)if(ie<0){if(re!==J)for(xe=M*re,he=M*J,Ie=m,ue=0;ue<_;++ue)ee=xe+Ie,j=he+Ie,se=A[ee],A[ee]=A[j],A[j]=se,Ie+=f;++J}else for(;;){ee=m+X*M,Ue=0;e:for(ue=0;ue<_;++ue){if(ie=A[ee]-dt[Ue],ie!==0)break e;Ue+=S,ee+=L}if(ie>0)X--;else if(ie<0){for(xe=M*re,he=M*J,ge=M*X,Ie=m,ue=0;ue<_;++ue)ee=xe+Ie,j=he+Ie,Q=ge+Ie,se=A[ee],A[ee]=A[j],A[j]=A[Q],A[Q]=se,Ie+=f;++J,--X;break}else{for(xe=M*re,he=M*X,Ie=m,ue=0;ue<_;++ue)ee=xe+Ie,j=he+Ie,se=A[ee],A[ee]=A[j],A[j]=se,Ie+=f;--X;break}}}else for(re=J;re<=X;++re){ee=m+re*M,Ue=0;e:for(ue=0;ue<_;++ue){if(ne=A[ee]-dt[Ue],ne!==0)break e;Ue+=S,ee+=L}if(ne<0){if(re!==J)for(xe=M*re,he=M*J,Ie=m,ue=0;ue<_;++ue)ee=xe+Ie,j=he+Ie,se=A[ee],A[ee]=A[j],A[j]=se,Ie+=f;++J}else{ee=m+re*M,Ue=0;e:for(ue=0;ue<_;++ue){if(ae=A[ee]-Dt[Ue],ae!==0)break e;Ue+=S,ee+=L}if(ae>0)for(;;){ee=m+X*M,Ue=0;e:for(ue=0;ue<_;++ue){if(ie=A[ee]-Dt[Ue],ie!==0)break e;Ue+=S,ee+=L}if(ie>0){if(--X<re)break;continue}else{ee=m+X*M,Ue=0;e:for(ue=0;ue<_;++ue){if(ie=A[ee]-dt[Ue],ie!==0)break e;Ue+=S,ee+=L}if(ie<0){for(xe=M*re,he=M*J,ge=M*X,Ie=m,ue=0;ue<_;++ue)ee=xe+Ie,j=he+Ie,Q=ge+Ie,se=A[ee],A[ee]=A[j],A[j]=A[Q],A[Q]=se,Ie+=f;++J,--X}else{for(xe=M*re,he=M*X,Ie=m,ue=0;ue<_;++ue)ee=xe+Ie,j=he+Ie,se=A[ee],A[ee]=A[j],A[j]=se,Ie+=f;--X}break}}}}for(xe=M*y,he=M*(J-1),Ue=0,Ie=m,ue=0;ue<_;++ue)ee=xe+Ie,j=he+Ie,A[ee]=A[j],A[j]=dt[Ue],++Ue,Ie+=f;for(xe=M*p,he=M*(X+1),Ue=0,Ie=m,ue=0;ue<_;++ue)ee=xe+Ie,j=he+Ie,A[ee]=A[j],A[j]=Dt[Ue],++Ue,Ie+=f;if(J-2-y<=32?v(y,J-2,A,m,M,x,T,_,f,L,S):h(y,J-2,A,m,M,x,T,_,f,L,S),p-(X+2)<=32?v(X+2,p,A,m,M,x,T,_,f,L,S):h(X+2,p,A,m,M,x,T,_,f,L,S),Z){g(dt),g(Dt);return}if(J<P&&X>z){e:for(;;){for(ee=m+J*M,Ue=0,Ie=m,ue=0;ue<_;++ue){if(A[ee]!==dt[Ue])break e;++Ue,ee+=f}++J}e:for(;;){for(ee=m+X*M,Ue=0,Ie=m,ue=0;ue<_;++ue){if(A[ee]!==Dt[Ue])break e;++Ue,ee+=f}--X}for(re=J;re<=X;++re){ee=m+re*M,Ue=0;e:for(ue=0;ue<_;++ue){if(ne=A[ee]-dt[Ue],ne!==0)break e;Ue+=S,ee+=L}if(ne===0){if(re!==J)for(xe=M*re,he=M*J,Ie=m,ue=0;ue<_;++ue)ee=xe+Ie,j=he+Ie,se=A[ee],A[ee]=A[j],A[j]=se,Ie+=f;++J}else{ee=m+re*M,Ue=0;e:for(ue=0;ue<_;++ue){if(ae=A[ee]-Dt[Ue],ae!==0)break e;Ue+=S,ee+=L}if(ae===0)for(;;){ee=m+X*M,Ue=0;e:for(ue=0;ue<_;++ue){if(ie=A[ee]-Dt[Ue],ie!==0)break e;Ue+=S,ee+=L}if(ie===0){if(--X<re)break;continue}else{ee=m+X*M,Ue=0;e:for(ue=0;ue<_;++ue){if(ie=A[ee]-dt[Ue],ie!==0)break e;Ue+=S,ee+=L}if(ie<0){for(xe=M*re,he=M*J,ge=M*X,Ie=m,ue=0;ue<_;++ue)ee=xe+Ie,j=he+Ie,Q=ge+Ie,se=A[ee],A[ee]=A[j],A[j]=A[Q],A[Q]=se,Ie+=f;++J,--X}else{for(xe=M*re,he=M*X,Ie=m,ue=0;ue<_;++ue)ee=xe+Ie,j=he+Ie,se=A[ee],A[ee]=A[j],A[j]=se,Ie+=f;--X}break}}}}}g(dt),g(Dt),X-J<=32?v(J,X,A,m,M,x,T,_,f,L,S):h(J,X,A,m,M,x,T,_,f,L,S)}}};function c(v,u,g){var h=o(u),y=[u,v].join(","),p=n[y];return v.length>1&&h?p(g,h[0],h[1]):p(g)}var s={"uint32,1,0":function(v,u){return function(g){var h=g.data,y=g.offset|0,p=g.shape,A=g.stride,m=A[0]|0,M=p[0]|0,x=A[1]|0,T=p[1]|0,_=x,f=x,L=1;M<=32?v(0,M-1,h,y,m,x,M,T,_,f,L):u(0,M-1,h,y,m,x,M,T,_,f,L)}}};function i(v,u){var g=[u,v].join(","),h=s[g],y=r(v,u),p=c(v,u,y);return h(y,p)}b.exports=i},{"typedarray-pool":308}],258:[function(l,b,w){var e=l("./lib/compile_sort.js"),o={};function a(r){var n=r.order,c=r.dtype,s=[n,c],i=s.join(":"),v=o[i];return v||(o[i]=v=e(n,c)),v(r),r}b.exports=a},{"./lib/compile_sort.js":257}],259:[function(l,b,w){var e=l("is-buffer"),o=typeof Float64Array!="undefined";function a(u,g){return u[0]-g[0]}function r(){var u=this.stride,g=new Array(u.length),h;for(h=0;h<g.length;++h)g[h]=[Math.abs(u[h]),h];g.sort(a);var y=new Array(g.length);for(h=0;h<y.length;++h)y[h]=g[h][1];return y}var n={T:function(u){function g(y){this.data=y}var h=g.prototype;return h.dtype=u,h.index=function(){return-1},h.size=0,h.dimension=-1,h.shape=h.stride=h.order=[],h.lo=h.hi=h.transpose=h.step=function(){return new g(this.data)},h.get=h.set=function(){},h.pick=function(){return null},function(p){return new g(p)}},0:function(u,g){function h(p,A){this.data=p,this.offset=A}var y=h.prototype;return y.dtype=u,y.index=function(){return this.offset},y.dimension=0,y.size=1,y.shape=y.stride=y.order=[],y.lo=y.hi=y.transpose=y.step=function(){return new h(this.data,this.offset)},y.pick=function(){return g(this.data)},y.valueOf=y.get=function(){return u==="generic"?this.data.get(this.offset):this.data[this.offset]},y.set=function(A){return u==="generic"?this.data.set(this.offset,A):this.data[this.offset]=A},function(A,m,M,x){return new h(A,x)}},1:function(u,g,h){function y(A,m,M,x){this.data=A,this.shape=[m],this.stride=[M],this.offset=x|0}var p=y.prototype;return p.dtype=u,p.dimension=1,Object.defineProperty(p,"size",{get:function(){return this.shape[0]}}),p.order=[0],p.set=function(m,M){return u==="generic"?this.data.set(this.offset+this.stride[0]*m,M):this.data[this.offset+this.stride[0]*m]=M},p.get=function(m){return u==="generic"?this.data.get(this.offset+this.stride[0]*m):this.data[this.offset+this.stride[0]*m]},p.index=function(m){return this.offset+this.stride[0]*m},p.hi=function(m){return new y(this.data,typeof m!="number"||m<0?this.shape[0]:m|0,this.stride[0],this.offset)},p.lo=function(m){var M=this.offset,x=0,T=this.shape[0],_=this.stride[0];return typeof m=="number"&&m>=0&&(x=m|0,M+=_*x,T-=x),new y(this.data,T,_,M)},p.step=function(m){var M=this.shape[0],x=this.stride[0],T=this.offset,_=0,f=Math.ceil;return typeof m=="number"&&(_=m|0,_<0?(T+=x*(M-1),M=f(-M/_)):M=f(M/_),x*=_),new y(this.data,M,x,T)},p.transpose=function(m){m=m===void 0?0:m|0;var M=this.shape,x=this.stride;return new y(this.data,M[m],x[m],this.offset)},p.pick=function(m){var M=[],x=[],T=this.offset;typeof m=="number"&&m>=0?T=T+this.stride[0]*m|0:(M.push(this.shape[0]),x.push(this.stride[0]));var _=g[M.length+1];return _(this.data,M,x,T)},function(m,M,x,T){return new y(m,M[0],x[0],T)}},2:function(u,g,h){function y(A,m,M,x,T,_){this.data=A,this.shape=[m,M],this.stride=[x,T],this.offset=_|0}var p=y.prototype;return p.dtype=u,p.dimension=2,Object.defineProperty(p,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(p,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),p.set=function(m,M,x){return u==="generic"?this.data.set(this.offset+this.stride[0]*m+this.stride[1]*M,x):this.data[this.offset+this.stride[0]*m+this.stride[1]*M]=x},p.get=function(m,M){return u==="generic"?this.data.get(this.offset+this.stride[0]*m+this.stride[1]*M):this.data[this.offset+this.stride[0]*m+this.stride[1]*M]},p.index=function(m,M){return this.offset+this.stride[0]*m+this.stride[1]*M},p.hi=function(m,M){return new y(this.data,typeof m!="number"||m<0?this.shape[0]:m|0,typeof M!="number"||M<0?this.shape[1]:M|0,this.stride[0],this.stride[1],this.offset)},p.lo=function(m,M){var x=this.offset,T=0,_=this.shape[0],f=this.shape[1],L=this.stride[0],S=this.stride[1];return typeof m=="number"&&m>=0&&(T=m|0,x+=L*T,_-=T),typeof M=="number"&&M>=0&&(T=M|0,x+=S*T,f-=T),new y(this.data,_,f,L,S,x)},p.step=function(m,M){var x=this.shape[0],T=this.shape[1],_=this.stride[0],f=this.stride[1],L=this.offset,S=0,k=Math.ceil;return typeof m=="number"&&(S=m|0,S<0?(L+=_*(x-1),x=k(-x/S)):x=k(x/S),_*=S),typeof M=="number"&&(S=M|0,S<0?(L+=f*(T-1),T=k(-T/S)):T=k(T/S),f*=S),new y(this.data,x,T,_,f,L)},p.transpose=function(m,M){m=m===void 0?0:m|0,M=M===void 0?1:M|0;var x=this.shape,T=this.stride;return new y(this.data,x[m],x[M],T[m],T[M],this.offset)},p.pick=function(m,M){var x=[],T=[],_=this.offset;typeof m=="number"&&m>=0?_=_+this.stride[0]*m|0:(x.push(this.shape[0]),T.push(this.stride[0])),typeof M=="number"&&M>=0?_=_+this.stride[1]*M|0:(x.push(this.shape[1]),T.push(this.stride[1]));var f=g[x.length+1];return f(this.data,x,T,_)},function(m,M,x,T){return new y(m,M[0],M[1],x[0],x[1],T)}},3:function(u,g,h){function y(A,m,M,x,T,_,f,L){this.data=A,this.shape=[m,M,x],this.stride=[T,_,f],this.offset=L|0}var p=y.prototype;return p.dtype=u,p.dimension=3,Object.defineProperty(p,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(p,"order",{get:function(){var m=Math.abs(this.stride[0]),M=Math.abs(this.stride[1]),x=Math.abs(this.stride[2]);return m>M?M>x?[2,1,0]:m>x?[1,2,0]:[1,0,2]:m>x?[2,0,1]:x>M?[0,1,2]:[0,2,1]}}),p.set=function(m,M,x,T){return u==="generic"?this.data.set(this.offset+this.stride[0]*m+this.stride[1]*M+this.stride[2]*x,T):this.data[this.offset+this.stride[0]*m+this.stride[1]*M+this.stride[2]*x]=T},p.get=function(m,M,x){return u==="generic"?this.data.get(this.offset+this.stride[0]*m+this.stride[1]*M+this.stride[2]*x):this.data[this.offset+this.stride[0]*m+this.stride[1]*M+this.stride[2]*x]},p.index=function(m,M,x){return this.offset+this.stride[0]*m+this.stride[1]*M+this.stride[2]*x},p.hi=function(m,M,x){return new y(this.data,typeof m!="number"||m<0?this.shape[0]:m|0,typeof M!="number"||M<0?this.shape[1]:M|0,typeof x!="number"||x<0?this.shape[2]:x|0,this.stride[0],this.stride[1],this.stride[2],this.offset)},p.lo=function(m,M,x){var T=this.offset,_=0,f=this.shape[0],L=this.shape[1],S=this.shape[2],k=this.stride[0],P=this.stride[1],z=this.stride[2];return typeof m=="number"&&m>=0&&(_=m|0,T+=k*_,f-=_),typeof M=="number"&&M>=0&&(_=M|0,T+=P*_,L-=_),typeof x=="number"&&x>=0&&(_=x|0,T+=z*_,S-=_),new y(this.data,f,L,S,k,P,z,T)},p.step=function(m,M,x){var T=this.shape[0],_=this.shape[1],f=this.shape[2],L=this.stride[0],S=this.stride[1],k=this.stride[2],P=this.offset,z=0,I=Math.ceil;return typeof m=="number"&&(z=m|0,z<0?(P+=L*(T-1),T=I(-T/z)):T=I(T/z),L*=z),typeof M=="number"&&(z=M|0,z<0?(P+=S*(_-1),_=I(-_/z)):_=I(_/z),S*=z),typeof x=="number"&&(z=x|0,z<0?(P+=k*(f-1),f=I(-f/z)):f=I(f/z),k*=z),new y(this.data,T,_,f,L,S,k,P)},p.transpose=function(m,M,x){m=m===void 0?0:m|0,M=M===void 0?1:M|0,x=x===void 0?2:x|0;var T=this.shape,_=this.stride;return new y(this.data,T[m],T[M],T[x],_[m],_[M],_[x],this.offset)},p.pick=function(m,M,x){var T=[],_=[],f=this.offset;typeof m=="number"&&m>=0?f=f+this.stride[0]*m|0:(T.push(this.shape[0]),_.push(this.stride[0])),typeof M=="number"&&M>=0?f=f+this.stride[1]*M|0:(T.push(this.shape[1]),_.push(this.stride[1])),typeof x=="number"&&x>=0?f=f+this.stride[2]*x|0:(T.push(this.shape[2]),_.push(this.stride[2]));var L=g[T.length+1];return L(this.data,T,_,f)},function(m,M,x,T){return new y(m,M[0],M[1],M[2],x[0],x[1],x[2],T)}},4:function(u,g,h){function y(A,m,M,x,T,_,f,L,S,k){this.data=A,this.shape=[m,M,x,T],this.stride=[_,f,L,S],this.offset=k|0}var p=y.prototype;return p.dtype=u,p.dimension=4,Object.defineProperty(p,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(p,"order",{get:h}),p.set=function(m,M,x,T,_){return u==="generic"?this.data.set(this.offset+this.stride[0]*m+this.stride[1]*M+this.stride[2]*x+this.stride[3]*T,_):this.data[this.offset+this.stride[0]*m+this.stride[1]*M+this.stride[2]*x+this.stride[3]*T]=_},p.get=function(m,M,x,T){return u==="generic"?this.data.get(this.offset+this.stride[0]*m+this.stride[1]*M+this.stride[2]*x+this.stride[3]*T):this.data[this.offset+this.stride[0]*m+this.stride[1]*M+this.stride[2]*x+this.stride[3]*T]},p.index=function(m,M,x,T){return this.offset+this.stride[0]*m+this.stride[1]*M+this.stride[2]*x+this.stride[3]*T},p.hi=function(m,M,x,T){return new y(this.data,typeof m!="number"||m<0?this.shape[0]:m|0,typeof M!="number"||M<0?this.shape[1]:M|0,typeof x!="number"||x<0?this.shape[2]:x|0,typeof T!="number"||T<0?this.shape[3]:T|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},p.lo=function(m,M,x,T){var _=this.offset,f=0,L=this.shape[0],S=this.shape[1],k=this.shape[2],P=this.shape[3],z=this.stride[0],I=this.stride[1],R=this.stride[2],D=this.stride[3];return typeof m=="number"&&m>=0&&(f=m|0,_+=z*f,L-=f),typeof M=="number"&&M>=0&&(f=M|0,_+=I*f,S-=f),typeof x=="number"&&x>=0&&(f=x|0,_+=R*f,k-=f),typeof T=="number"&&T>=0&&(f=T|0,_+=D*f,P-=f),new y(this.data,L,S,k,P,z,I,R,D,_)},p.step=function(m,M,x,T){var _=this.shape[0],f=this.shape[1],L=this.shape[2],S=this.shape[3],k=this.stride[0],P=this.stride[1],z=this.stride[2],I=this.stride[3],R=this.offset,D=0,O=Math.ceil;return typeof m=="number"&&(D=m|0,D<0?(R+=k*(_-1),_=O(-_/D)):_=O(_/D),k*=D),typeof M=="number"&&(D=M|0,D<0?(R+=P*(f-1),f=O(-f/D)):f=O(f/D),P*=D),typeof x=="number"&&(D=x|0,D<0?(R+=z*(L-1),L=O(-L/D)):L=O(L/D),z*=D),typeof T=="number"&&(D=T|0,D<0?(R+=I*(S-1),S=O(-S/D)):S=O(S/D),I*=D),new y(this.data,_,f,L,S,k,P,z,I,R)},p.transpose=function(m,M,x,T){m=m===void 0?0:m|0,M=M===void 0?1:M|0,x=x===void 0?2:x|0,T=T===void 0?3:T|0;var _=this.shape,f=this.stride;return new y(this.data,_[m],_[M],_[x],_[T],f[m],f[M],f[x],f[T],this.offset)},p.pick=function(m,M,x,T){var _=[],f=[],L=this.offset;typeof m=="number"&&m>=0?L=L+this.stride[0]*m|0:(_.push(this.shape[0]),f.push(this.stride[0])),typeof M=="number"&&M>=0?L=L+this.stride[1]*M|0:(_.push(this.shape[1]),f.push(this.stride[1])),typeof x=="number"&&x>=0?L=L+this.stride[2]*x|0:(_.push(this.shape[2]),f.push(this.stride[2])),typeof T=="number"&&T>=0?L=L+this.stride[3]*T|0:(_.push(this.shape[3]),f.push(this.stride[3]));var S=g[_.length+1];return S(this.data,_,f,L)},function(m,M,x,T){return new y(m,M[0],M[1],M[2],M[3],x[0],x[1],x[2],x[3],T)}},5:function(g,h,y){function p(m,M,x,T,_,f,L,S,k,P,z,I){this.data=m,this.shape=[M,x,T,_,f],this.stride=[L,S,k,P,z],this.offset=I|0}var A=p.prototype;return A.dtype=g,A.dimension=5,Object.defineProperty(A,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(A,"order",{get:y}),A.set=function(M,x,T,_,f,L){return g==="generic"?this.data.set(this.offset+this.stride[0]*M+this.stride[1]*x+this.stride[2]*T+this.stride[3]*_+this.stride[4]*f,L):this.data[this.offset+this.stride[0]*M+this.stride[1]*x+this.stride[2]*T+this.stride[3]*_+this.stride[4]*f]=L},A.get=function(M,x,T,_,f){return g==="generic"?this.data.get(this.offset+this.stride[0]*M+this.stride[1]*x+this.stride[2]*T+this.stride[3]*_+this.stride[4]*f):this.data[this.offset+this.stride[0]*M+this.stride[1]*x+this.stride[2]*T+this.stride[3]*_+this.stride[4]*f]},A.index=function(M,x,T,_,f){return this.offset+this.stride[0]*M+this.stride[1]*x+this.stride[2]*T+this.stride[3]*_+this.stride[4]*f},A.hi=function(M,x,T,_,f){return new p(this.data,typeof M!="number"||M<0?this.shape[0]:M|0,typeof x!="number"||x<0?this.shape[1]:x|0,typeof T!="number"||T<0?this.shape[2]:T|0,typeof _!="number"||_<0?this.shape[3]:_|0,typeof f!="number"||f<0?this.shape[4]:f|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},A.lo=function(M,x,T,_,f){var L=this.offset,S=0,k=this.shape[0],P=this.shape[1],z=this.shape[2],I=this.shape[3],R=this.shape[4],D=this.stride[0],O=this.stride[1],F=this.stride[2],G=this.stride[3],W=this.stride[4];return typeof M=="number"&&M>=0&&(S=M|0,L+=D*S,k-=S),typeof x=="number"&&x>=0&&(S=x|0,L+=O*S,P-=S),typeof T=="number"&&T>=0&&(S=T|0,L+=F*S,z-=S),typeof _=="number"&&_>=0&&(S=_|0,L+=G*S,I-=S),typeof f=="number"&&f>=0&&(S=f|0,L+=W*S,R-=S),new p(this.data,k,P,z,I,R,D,O,F,G,W,L)},A.step=function(M,x,T,_,f){var L=this.shape[0],S=this.shape[1],k=this.shape[2],P=this.shape[3],z=this.shape[4],I=this.stride[0],R=this.stride[1],D=this.stride[2],O=this.stride[3],F=this.stride[4],G=this.offset,W=0,q=Math.ceil;return typeof M=="number"&&(W=M|0,W<0?(G+=I*(L-1),L=q(-L/W)):L=q(L/W),I*=W),typeof x=="number"&&(W=x|0,W<0?(G+=R*(S-1),S=q(-S/W)):S=q(S/W),R*=W),typeof T=="number"&&(W=T|0,W<0?(G+=D*(k-1),k=q(-k/W)):k=q(k/W),D*=W),typeof _=="number"&&(W=_|0,W<0?(G+=O*(P-1),P=q(-P/W)):P=q(P/W),O*=W),typeof f=="number"&&(W=f|0,W<0?(G+=F*(z-1),z=q(-z/W)):z=q(z/W),F*=W),new p(this.data,L,S,k,P,z,I,R,D,O,F,G)},A.transpose=function(M,x,T,_,f){M=M===void 0?0:M|0,x=x===void 0?1:x|0,T=T===void 0?2:T|0,_=_===void 0?3:_|0,f=f===void 0?4:f|0;var L=this.shape,S=this.stride;return new p(this.data,L[M],L[x],L[T],L[_],L[f],S[M],S[x],S[T],S[_],S[f],this.offset)},A.pick=function(M,x,T,_,f){var L=[],S=[],k=this.offset;typeof M=="number"&&M>=0?k=k+this.stride[0]*M|0:(L.push(this.shape[0]),S.push(this.stride[0])),typeof x=="number"&&x>=0?k=k+this.stride[1]*x|0:(L.push(this.shape[1]),S.push(this.stride[1])),typeof T=="number"&&T>=0?k=k+this.stride[2]*T|0:(L.push(this.shape[2]),S.push(this.stride[2])),typeof _=="number"&&_>=0?k=k+this.stride[3]*_|0:(L.push(this.shape[3]),S.push(this.stride[3])),typeof f=="number"&&f>=0?k=k+this.stride[4]*f|0:(L.push(this.shape[4]),S.push(this.stride[4]));var P=h[L.length+1];return P(this.data,L,S,k)},function(M,x,T,_){return new p(M,x[0],x[1],x[2],x[3],x[4],T[0],T[1],T[2],T[3],T[4],_)}}};function c(u,g){var h=g===-1?"T":String(g),y=n[h];return g===-1?y(u):g===0?y(u,i[u][0]):y(u,i[u],r)}function s(u){if(e(u))return"buffer";if(o)switch(Object.prototype.toString.call(u)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(u)?"array":"generic"}var i={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};function v(u,g,h,y){if(u===void 0){var T=i.array[0];return T([])}else typeof u=="number"&&(u=[u]);g===void 0&&(g=[u.length]);var p=g.length;if(h===void 0){h=new Array(p);for(var A=p-1,m=1;A>=0;--A)h[A]=m,m*=g[A]}if(y===void 0){y=0;for(var A=0;A<p;++A)h[A]<0&&(y-=(g[A]-1)*h[A])}for(var M=s(u),x=i[M];x.length<=p+1;)x.push(c(M,x.length-1));var T=x[p+1];return T(u,g,h,y)}b.exports=v},{"is-buffer":237}],260:[function(l,b,w){var e=l("double-bits"),o=Math.pow(2,-1074),a=-1>>>0;b.exports=r;function r(n,c){if(isNaN(n)||isNaN(c))return NaN;if(n===c)return n;if(n===0)return c<0?-o:o;var s=e.hi(n),i=e.lo(n);return c>n==n>0?i===a?(s+=1,i=0):i+=1:i===0?(i=a,s-=1):i-=1,e.pack(i,s)}},{"double-bits":64}],261:[function(l,b,w){var e=1e-6,o=1e-6;w.vertexNormals=function(a,r,n){for(var c=r.length,s=new Array(c),i=n===void 0?e:n,v=0;v<c;++v)s[v]=[0,0,0];for(var v=0;v<a.length;++v)for(var u=a[v],g=0,h=u[u.length-1],y=u[0],p=0;p<u.length;++p){g=h,h=y,y=u[(p+1)%u.length];for(var A=r[g],m=r[h],M=r[y],x=new Array(3),T=0,_=new Array(3),f=0,L=0;L<3;++L)x[L]=A[L]-m[L],T+=x[L]*x[L],_[L]=M[L]-m[L],f+=_[L]*_[L];if(T*f>i)for(var S=s[h],k=1/Math.sqrt(T*f),L=0;L<3;++L){var P=(L+1)%3,z=(L+2)%3;S[L]+=k*(_[P]*x[z]-_[z]*x[P])}}for(var v=0;v<c;++v){for(var S=s[v],I=0,L=0;L<3;++L)I+=S[L]*S[L];if(I>i)for(var k=1/Math.sqrt(I),L=0;L<3;++L)S[L]*=k;else for(var L=0;L<3;++L)S[L]=0}return s},w.faceNormals=function(a,r,n){for(var c=a.length,s=new Array(c),i=n===void 0?o:n,v=0;v<c;++v){for(var u=a[v],g=new Array(3),h=0;h<3;++h)g[h]=r[u[h]];for(var y=new Array(3),p=new Array(3),h=0;h<3;++h)y[h]=g[1][h]-g[0][h],p[h]=g[2][h]-g[0][h];for(var A=new Array(3),m=0,h=0;h<3;++h){var M=(h+1)%3,x=(h+2)%3;A[h]=y[M]*p[x]-y[x]*p[M],m+=A[h]*A[h]}m>i?m=1/Math.sqrt(m):m=0;for(var h=0;h<3;++h)A[h]*=m;s[v]=A}return s}},{}],262:[function(l,b,w){b.exports=e;function e(o,a,r,n,c,s,i,v,u,g){var h=a+s+g;if(y>0){var y=Math.sqrt(h+1);o[0]=.5*(i-u)/y,o[1]=.5*(v-n)/y,o[2]=.5*(r-s)/y,o[3]=.5*y}else{var p=Math.max(a,s,g),y=Math.sqrt(2*p-h+1);a>=p?(o[0]=.5*y,o[1]=.5*(c+r)/y,o[2]=.5*(v+n)/y,o[3]=.5*(i-u)/y):s>=p?(o[0]=.5*(r+c)/y,o[1]=.5*y,o[2]=.5*(u+i)/y,o[3]=.5*(v-n)/y):(o[0]=.5*(n+v)/y,o[1]=.5*(i+u)/y,o[2]=.5*y,o[3]=.5*(r-c)/y)}return o}},{}],263:[function(l,b,w){b.exports=g;var e=l("filtered-vector"),o=l("gl-mat4/lookAt"),a=l("gl-mat4/fromQuat"),r=l("gl-mat4/invert"),n=l("./lib/quatFromFrame");function c(h,y,p){return Math.sqrt(Math.pow(h,2)+Math.pow(y,2)+Math.pow(p,2))}function s(h,y,p,A){return Math.sqrt(Math.pow(h,2)+Math.pow(y,2)+Math.pow(p,2)+Math.pow(A,2))}function i(h,y){var p=y[0],A=y[1],m=y[2],M=y[3],x=s(p,A,m,M);x>1e-6?(h[0]=p/x,h[1]=A/x,h[2]=m/x,h[3]=M/x):(h[0]=h[1]=h[2]=0,h[3]=1)}function v(h,y,p){this.radius=e([p]),this.center=e(y),this.rotation=e(h),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var u=v.prototype;u.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},u.recalcMatrix=function(h){this.radius.curve(h),this.center.curve(h),this.rotation.curve(h);var y=this.computedRotation;i(y,y);var p=this.computedMatrix;a(p,y);var A=this.computedCenter,m=this.computedEye,M=this.computedUp,x=Math.exp(this.computedRadius[0]);m[0]=A[0]+x*p[2],m[1]=A[1]+x*p[6],m[2]=A[2]+x*p[10],M[0]=p[1],M[1]=p[5],M[2]=p[9];for(var T=0;T<3;++T){for(var _=0,f=0;f<3;++f)_+=p[T+4*f]*m[f];p[12+T]=-_}},u.getMatrix=function(h,y){this.recalcMatrix(h);var p=this.computedMatrix;if(y){for(var A=0;A<16;++A)y[A]=p[A];return y}return p},u.idle=function(h){this.center.idle(h),this.radius.idle(h),this.rotation.idle(h)},u.flush=function(h){this.center.flush(h),this.radius.flush(h),this.rotation.flush(h)},u.pan=function(h,y,p,A){y=y||0,p=p||0,A=A||0,this.recalcMatrix(h);var m=this.computedMatrix,M=m[1],x=m[5],T=m[9],_=c(M,x,T);M/=_,x/=_,T/=_;var f=m[0],L=m[4],S=m[8],k=f*M+L*x+S*T;f-=M*k,L-=x*k,S-=T*k;var P=c(f,L,S);f/=P,L/=P,S/=P,m[2],m[6],m[10];var z=f*y+M*p,I=L*y+x*p,R=S*y+T*p;this.center.move(h,z,I,R);var D=Math.exp(this.computedRadius[0]);D=Math.max(1e-4,D+A),this.radius.set(h,Math.log(D))},u.rotate=function(h,y,p,A){this.recalcMatrix(h),y=y||0,p=p||0;var m=this.computedMatrix,M=m[0],x=m[4],T=m[8],_=m[1],f=m[5],L=m[9],S=m[2],k=m[6],P=m[10],z=y*M+p*_,I=y*x+p*f,R=y*T+p*L,D=-(k*R-P*I),O=-(P*z-S*R),F=-(S*I-k*z),G=Math.sqrt(Math.max(0,1-Math.pow(D,2)-Math.pow(O,2)-Math.pow(F,2))),W=s(D,O,F,G);W>1e-6?(D/=W,O/=W,F/=W,G/=W):(D=O=F=0,G=1);var q=this.computedRotation,J=q[0],X=q[1],Z=q[2],se=q[3],le=J*G+se*D+X*F-Z*O,oe=X*G+se*O+Z*D-J*F,U=Z*G+se*F+J*O-X*D,V=se*G-J*D-X*O-Z*F;if(A){D=S,O=k,F=P;var re=Math.sin(A)/c(D,O,F);D*=re,O*=re,F*=re,G=Math.cos(y),le=le*G+V*D+oe*F-U*O,oe=oe*G+V*O+U*D-le*F,U=U*G+V*F+le*O-oe*D,V=V*G-le*D-oe*O-U*F}var ee=s(le,oe,U,V);ee>1e-6?(le/=ee,oe/=ee,U/=ee,V/=ee):(le=oe=U=0,V=1),this.rotation.set(h,le,oe,U,V)},u.lookAt=function(h,y,p,A){this.recalcMatrix(h),p=p||this.computedCenter,y=y||this.computedEye,A=A||this.computedUp;var m=this.computedMatrix;o(m,y,p,A);var M=this.computedRotation;n(M,m[0],m[1],m[2],m[4],m[5],m[6],m[8],m[9],m[10]),i(M,M),this.rotation.set(h,M[0],M[1],M[2],M[3]);for(var x=0,T=0;T<3;++T)x+=Math.pow(p[T]-y[T],2);this.radius.set(h,.5*Math.log(Math.max(x,1e-6))),this.center.set(h,p[0],p[1],p[2])},u.translate=function(h,y,p,A){this.center.move(h,y||0,p||0,A||0)},u.setMatrix=function(h,y){var p=this.computedRotation;n(p,y[0],y[1],y[2],y[4],y[5],y[6],y[8],y[9],y[10]),i(p,p),this.rotation.set(h,p[0],p[1],p[2],p[3]);var A=this.computedMatrix;r(A,y);var m=A[15];if(Math.abs(m)>1e-6){var M=A[12]/m,x=A[13]/m,T=A[14]/m;this.recalcMatrix(h);var _=Math.exp(this.computedRadius[0]);this.center.set(h,M-A[2]*_,x-A[6]*_,T-A[10]*_),this.radius.idle(h)}else this.center.idle(h),this.radius.idle(h)},u.setDistance=function(h,y){y>0&&this.radius.set(h,Math.log(y))},u.setDistanceLimits=function(h,y){h>0?h=Math.log(h):h=-1/0,y>0?y=Math.log(y):y=1/0,y=Math.max(y,h),this.radius.bounds[0][0]=h,this.radius.bounds[1][0]=y},u.getDistanceLimits=function(h){var y=this.radius.bounds;return h?(h[0]=Math.exp(y[0][0]),h[1]=Math.exp(y[1][0]),h):[Math.exp(y[0][0]),Math.exp(y[1][0])]},u.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},u.fromJSON=function(h){var y=this.lastT(),p=h.center;p&&this.center.set(y,p[0],p[1],p[2]);var A=h.rotation;A&&this.rotation.set(y,A[0],A[1],A[2],A[3]);var m=h.distance;m&&m>0&&this.radius.set(y,Math.log(m)),this.setDistanceLimits(h.zoomMin,h.zoomMax)};function g(h){h=h||{};var y=h.center||[0,0,0],p=h.rotation||[0,0,0,1],A=h.radius||1;y=[].slice.call(y,0,3),p=[].slice.call(p,0,4),i(p,p);var m=new v(p,y,Math.log(A));return m.setDistanceLimits(h.zoomMin,h.zoomMax),("eye"in h||"up"in h)&&m.lookAt(0,h.eye,h.center,h.up),m}},{"./lib/quatFromFrame":262,"filtered-vector":68,"gl-mat4/fromQuat":95,"gl-mat4/invert":98,"gl-mat4/lookAt":99}],264:[function(l,b,w){var e=l("repeat-string");b.exports=function(a,r,n){return n=typeof n!="undefined"?n+"":" ",e(n,r)+a}},{"repeat-string":277}],265:[function(l,b,w){b.exports=function(o,a){a||(a=[0,""]),o=String(o);var r=parseFloat(o,10);return a[0]=r,a[1]=o.match(/[\d.\-\+]*\s*(.*)/)[1]||"",a}},{}],266:[function(l,b,w){b.exports=o;var e=l("compare-angle");function o(a,r){for(var n=r.length|0,c=a.length,s=[new Array(n),new Array(n)],i=0;i<n;++i)s[0][i]=[],s[1][i]=[];for(var i=0;i<c;++i){var v=a[i];s[0][v[0]].push(v),s[1][v[1]].push(v)}for(var u=[],i=0;i<n;++i)s[0][i].length+s[1][i].length===0&&u.push([i]);function g(x,T){var _=s[T][x[T]];_.splice(_.indexOf(x),1)}function h(x,T,_){for(var f,L,S,k=0;k<2;++k)if(s[k][T].length>0){f=s[k][T][0],S=k;break}L=f[S^1];for(var P=0;P<2;++P)for(var z=s[P][T],I=0;I<z.length;++I){var R=z[I],D=R[P^1],O=e(r[x],r[T],r[L],r[D]);O>0&&(f=R,L=D,S=P)}return _||f&&g(f,S),L}function y(x,T){var _=s[T][x][0],f=[x];g(_,T);for(var L=_[T^1];;){for(;L!==x;)f.push(L),L=h(f[f.length-2],L,!1);if(s[0][x].length+s[1][x].length===0)break;var S=f[f.length-1],k=x,P=f[1],z=h(S,k,!0);if(e(r[S],r[k],r[P],r[z])<0)break;f.push(x),L=h(S,k)}return f}function p(x,T){return T[1]===T[T.length-1]}for(var i=0;i<n;++i)for(var A=0;A<2;++A){for(var m=[];s[A][i].length>0;){s[0][i].length;var M=y(i,A);p(m,M)?m.push.apply(m,M):(m.length>0&&u.push(m),m=M)}m.length>0&&u.push(m)}return u}},{"compare-angle":54}],267:[function(l,b,w){b.exports=o;var e=l("edges-to-adjacency-list");function o(a,r){for(var n=e(a,r.length),c=new Array(r.length),s=new Array(r.length),i=[],v=0;v<r.length;++v){var u=n[v].length;s[v]=u,c[v]=!0,u<=1&&i.push(v)}for(;i.length>0;){var g=i.pop();c[g]=!1;for(var h=n[g],v=0;v<h.length;++v){var y=h[v];--s[y]===0&&i.push(y)}}for(var p=new Array(r.length),A=[],v=0;v<r.length;++v)if(c[v]){var g=A.length;p[v]=g,A.push(r[v])}else p[v]=-1;for(var m=[],v=0;v<a.length;++v){var M=a[v];c[M[0]]&&c[M[1]]&&m.push([p[M[0]],p[M[1]]])}return[m,A]}},{"edges-to-adjacency-list":66}],268:[function(l,b,w){b.exports=u;var e=l("edges-to-adjacency-list"),o=l("planar-dual"),a=l("point-in-big-polygon"),r=l("two-product"),n=l("robust-sum"),c=l("uniq"),s=l("./lib/trim-leaves");function i(g,h){for(var y=new Array(g),p=0;p<g;++p)y[p]=h;return y}function v(g){for(var h=new Array(g),y=0;y<g;++y)h[y]=[];return h}function u(g,h){var V=s(g,h);g=V[0],h=V[1];var y=h.length;g.length;for(var p=e(g,h.length),A=0;A<y;++A)if(p[A].length%2===1)throw new Error("planar-graph-to-polyline: graph must be manifold");var m=o(g,h);function M(ie){for(var ue=ie.length,xe=[0],he=0;he<ue;++he){var ge=h[ie[he]],me=h[ie[(he+1)%ue]],ke=r(-ge[0],ge[1]),Ae=r(-ge[0],me[1]),Ne=r(me[0],ge[1]),He=r(me[0],me[1]);xe=n(xe,n(n(ke,Ae),n(Ne,He)))}return xe[xe.length-1]>0}m=m.filter(M);for(var x=m.length,T=new Array(x),_=new Array(x),A=0;A<x;++A){T[A]=A;var f=new Array(x),L=m[A].map(function(ue){return h[ue]}),S=a([L]),k=0;e:for(var P=0;P<x;++P)if(f[P]=0,A!==P){for(var z=m[P],I=z.length,R=0;R<I;++R){var D=S(h[z[R]]);if(D!==0){D<0&&(f[P]=1,k+=1);continue e}}f[P]=1,k+=1}_[A]=[k,A,f]}_.sort(function(ie,ue){return ue[0]-ie[0]});for(var A=0;A<x;++A)for(var f=_[A],O=f[1],F=f[2],P=0;P<x;++P)F[P]&&(T[P]=O);for(var G=v(x),A=0;A<x;++A)G[A].push(T[A]),G[T[A]].push(A);for(var W={},q=i(y,!1),A=0;A<x;++A)for(var z=m[A],I=z.length,P=0;P<I;++P){var J=z[P],X=z[(P+1)%I],Z=Math.min(J,X)+":"+Math.max(J,X);if(Z in W){var se=W[Z];G[se].push(A),G[A].push(se),q[J]=q[X]=!0}else W[Z]=A}function le(ie){for(var ue=ie.length,xe=0;xe<ue;++xe)if(!q[ie[xe]])return!1;return!0}for(var oe=[],U=i(x,-1),A=0;A<x;++A)T[A]===A&&!le(m[A])?(oe.push(A),U[A]=0):U[A]=-1;for(var V=[];oe.length>0;){var re=oe.pop(),ee=G[re];c(ee,function(ie,ue){return ie-ue});var j=ee.length,Q=U[re],ne;if(Q===0){var z=m[re];ne=[z]}for(var A=0;A<j;++A){var ae=ee[A];if(!(U[ae]>=0)&&(U[ae]=Q^1,oe.push(ae),Q===0)){var z=m[ae];le(z)||(z.reverse(),ne.push(z))}}Q===0&&V.push(ne)}return V}},{"./lib/trim-leaves":267,"edges-to-adjacency-list":66,"planar-dual":266,"point-in-big-polygon":269,"robust-sum":289,"two-product":306,uniq:310}],269:[function(l,b,w){b.exports=h;var e=l("robust-orientation")[3],o=l("slab-decomposition"),a=l("interval-tree-1d"),r=l("binary-search-bounds");function n(){return!0}function c(y){return function(p,A){var m=y[p];return m?!!m.queryPoint(A,n):!1}}function s(y){for(var p={},A=0;A<y.length;++A){var m=y[A],M=m[0][0],x=m[0][1],T=m[1][1],_=[Math.min(x,T),Math.max(x,T)];M in p?p[M].push(_):p[M]=[_]}for(var f={},L=Object.keys(p),A=0;A<L.length;++A){var S=p[L[A]];f[L[A]]=a(S)}return c(f)}function i(y,p){return function(A){var m=r.le(p,A[0]);if(m<0)return 1;var M=y[m];if(!M)if(m>0&&p[m]===A[0])M=y[m-1];else return 1;for(var x=1;M;){var T=M.key,_=e(A,T[0],T[1]);if(T[0][0]<T[1][0])if(_<0)M=M.left;else if(_>0)x=-1,M=M.right;else return 0;else if(_>0)M=M.left;else if(_<0)x=1,M=M.right;else return 0}return x}}function v(y){return 1}function u(y){return function(A){return y(A[0],A[1])?0:1}}function g(y,p){return function(m){return y(m[0],m[1])?0:p(m)}}function h(y){for(var p=y.length,A=[],m=[],M=0;M<p;++M)for(var x=y[M],T=x.length,_=T-1,f=0;f<T;_=f++){var L=x[_],S=x[f];L[0]===S[0]?m.push([L,S]):A.push([L,S])}if(A.length===0)return m.length===0?v:u(s(m));var k=o(A),P=i(k.slabs,k.coordinates);return m.length===0?P:g(s(m),P)}},{"binary-search-bounds":31,"interval-tree-1d":234,"robust-orientation":284,"slab-decomposition":299}],270:[function(l,b,w){var e=new Float64Array(4),o=new Float64Array(4),a=new Float64Array(4);function r(n,c,s,i,v){e.length<i.length&&(e=new Float64Array(i.length),o=new Float64Array(i.length),a=new Float64Array(i.length));for(var u=0;u<i.length;++u)e[u]=n[u]-i[u],o[u]=c[u]-n[u],a[u]=s[u]-n[u];for(var g=0,h=0,y=0,p=0,A=0,m=0,u=0;u<i.length;++u){var M=o[u],x=a[u],T=e[u];g+=M*M,h+=M*x,y+=x*x,p+=T*M,A+=T*x,m+=T*T}var _=Math.abs(g*y-h*h),f=h*A-y*p,L=h*p-g*A,S;if(f+L<=_)if(f<0)L<0&&p<0?(L=0,-p>=g?(f=1,S=g+2*p+m):(f=-p/g,S=p*f+m)):(f=0,A>=0?(L=0,S=m):-A>=y?(L=1,S=y+2*A+m):(L=-A/y,S=A*L+m));else if(L<0)L=0,p>=0?(f=0,S=m):-p>=g?(f=1,S=g+2*p+m):(f=-p/g,S=p*f+m);else{var k=1/_;f*=k,L*=k,S=f*(g*f+h*L+2*p)+L*(h*f+y*L+2*A)+m}else{var P,z,I,R;f<0?(P=h+p,z=y+A,z>P?(I=z-P,R=g-2*h+y,I>=R?(f=1,L=0,S=g+2*p+m):(f=I/R,L=1-f,S=f*(g*f+h*L+2*p)+L*(h*f+y*L+2*A)+m)):(f=0,z<=0?(L=1,S=y+2*A+m):A>=0?(L=0,S=m):(L=-A/y,S=A*L+m))):L<0?(P=h+A,z=g+p,z>P?(I=z-P,R=g-2*h+y,I>=R?(L=1,f=0,S=y+2*A+m):(L=I/R,f=1-L,S=f*(g*f+h*L+2*p)+L*(h*f+y*L+2*A)+m)):(L=0,z<=0?(f=1,S=g+2*p+m):p>=0?(f=0,S=m):(f=-p/g,S=p*f+m))):(I=y+A-h-p,I<=0?(f=0,L=1,S=y+2*A+m):(R=g-2*h+y,I>=R?(f=1,L=0,S=g+2*p+m):(f=I/R,L=1-f,S=f*(g*f+h*L+2*p)+L*(h*f+y*L+2*A)+m)))}for(var D=1-f-L,u=0;u<i.length;++u)v[u]=D*n[u]+f*c[u]+L*s[u];return S<0?0:S}b.exports=r},{}],271:[function(l,b,w){b.exports=l("gl-quat/slerp")},{"gl-quat/slerp":124}],272:[function(l,b,w){var e=l("big-rat/add");b.exports=o;function o(a,r){for(var n=a.length,c=new Array(n),s=0;s<n;++s)c[s]=e(a[s],r[s]);return c}},{"big-rat/add":15}],273:[function(l,b,w){b.exports=o;var e=l("big-rat");function o(a){for(var r=new Array(a.length),n=0;n<a.length;++n)r[n]=e(a[n]);return r}},{"big-rat":18}],274:[function(l,b,w){var e=l("big-rat"),o=l("big-rat/mul");b.exports=a;function a(r,n){for(var c=e(n),s=r.length,i=new Array(s),v=0;v<s;++v)i[v]=o(r[v],c);return i}},{"big-rat":18,"big-rat/mul":27}],275:[function(l,b,w){var e=l("big-rat/sub");b.exports=o;function o(a,r){for(var n=a.length,c=new Array(n),s=0;s<n;++s)c[s]=e(a[s],r[s]);return c}},{"big-rat/sub":29}],276:[function(l,b,w){var e=l("compare-cell"),o=l("compare-oriented-cell"),a=l("cell-orientation");b.exports=r;function r(n){n.sort(o);for(var c=n.length,s=0,i=0;i<c;++i){var v=n[i],u=a(v);if(u!==0){if(s>0){var g=n[s-1];if(e(v,g)===0&&a(g)!==u){s-=1;continue}}n[s++]=v}}return n.length=s,n}},{"cell-orientation":47,"compare-cell":56,"compare-oriented-cell":57}],277:[function(l,b,w){var e="",o;b.exports=a;function a(r,n){if(typeof r!="string")throw new TypeError("expected a string");if(n===1)return r;if(n===2)return r+r;var c=r.length*n;if(o!==r||typeof o=="undefined")o=r,e="";else if(e.length>=c)return e.substr(0,c);for(;c>e.length&&n>1;)n&1&&(e+=r),n>>=1,r+=r;return e+=r,e=e.substr(0,c),e}},{}],278:[function(l,b,w){(function(e){(function(){b.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,typeof d!="undefined"?d:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],279:[function(l,b,w){b.exports=e;function e(o){for(var a=o.length,r=o[o.length-1],n=a,c=a-2;c>=0;--c){var s=r,i=o[c];r=s+i;var v=r-s,u=i-v;u&&(o[--n]=r,r=u)}for(var g=0,c=n;c<a;++c){var s=o[c],i=r;r=s+i;var v=r-s,u=i-v;u&&(o[g++]=u)}return o[g++]=r,o.length=g,o}},{}],280:[function(l,b,w){var e=l("two-product"),o=l("robust-sum"),a=l("robust-scale"),r=l("robust-compress"),n=4;function c(h,y,p,A){return function(M){return A(h(p(M[0][0],M[1][1]),p(-M[0][1],M[1][0])))}}function s(h,y,p,A){return function(M){return A(h(y(h(p(M[1][1],M[2][2]),p(-M[1][2],M[2][1])),M[0][0]),h(y(h(p(M[1][0],M[2][2]),p(-M[1][2],M[2][0])),-M[0][1]),y(h(p(M[1][0],M[2][1]),p(-M[1][1],M[2][0])),M[0][2]))))}}function i(h){var y=h===2?c:h===3?s:void 0;return y(o,a,e,r)}var v=[function(){return[0]},function(y){return[y[0][0]]}];function u(h,y,p,A,m,M){return function(T){switch(T.length){case 0:return h(T);case 1:return y(T);case 2:return p(T);case 3:return A(T)}var _=m[T.length];return _||(_=m[T.length]=M(T.length)),_(T)}}function g(){for(;v.length<n;)v.push(i(v.length));b.exports=u.apply(void 0,v.concat([v,i]));for(var h=0;h<v.length;++h)b.exports[h]=v[h]}g()},{"robust-compress":279,"robust-scale":286,"robust-sum":289,"two-product":306}],281:[function(l,b,w){var e=l("two-product"),o=l("robust-sum");b.exports=a;function a(r,n){for(var c=e(r[0],n[0]),s=1;s<r.length;++s)c=o(c,e(r[s],n[s]));return c}},{"robust-sum":289,"two-product":306}],282:[function(l,b,w){var e=l("two-product"),o=l("robust-sum"),a=l("robust-subtract"),r=l("robust-scale"),n=6;function c(x){var T=x===3?u:x===4?g:x===5?h:y;return T(o,a,e,r)}function s(){return 0}function i(){return 0}function v(){return 0}function u(x,T,_,f){function L(S,k,P){var z=_(S[0],S[0]),I=f(z,k[0]),R=f(z,P[0]),D=_(k[0],k[0]),O=f(D,S[0]),F=f(D,P[0]),G=_(P[0],P[0]),W=f(G,S[0]),q=f(G,k[0]),J=x(T(q,F),T(O,I)),X=T(W,R),Z=T(J,X);return Z[Z.length-1]}return L}function g(x,T,_,f){function L(S,k,P,z){var I=x(_(S[0],S[0]),_(S[1],S[1])),R=f(I,k[0]),D=f(I,P[0]),O=f(I,z[0]),F=x(_(k[0],k[0]),_(k[1],k[1])),G=f(F,S[0]),W=f(F,P[0]),q=f(F,z[0]),J=x(_(P[0],P[0]),_(P[1],P[1])),X=f(J,S[0]),Z=f(J,k[0]),se=f(J,z[0]),le=x(_(z[0],z[0]),_(z[1],z[1])),oe=f(le,S[0]),U=f(le,k[0]),V=f(le,P[0]),re=x(x(f(T(V,se),k[1]),x(f(T(U,q),-P[1]),f(T(Z,W),z[1]))),x(f(T(U,q),S[1]),x(f(T(oe,O),-k[1]),f(T(G,R),z[1])))),ee=x(x(f(T(V,se),S[1]),x(f(T(oe,O),-P[1]),f(T(X,D),z[1]))),x(f(T(Z,W),S[1]),x(f(T(X,D),-k[1]),f(T(G,R),P[1])))),j=T(re,ee);return j[j.length-1]}return L}function h(x,T,_,f){function L(S,k,P,z,I){var R=x(_(S[0],S[0]),x(_(S[1],S[1]),_(S[2],S[2]))),D=f(R,k[0]),O=f(R,P[0]),F=f(R,z[0]),G=f(R,I[0]),W=x(_(k[0],k[0]),x(_(k[1],k[1]),_(k[2],k[2]))),q=f(W,S[0]),J=f(W,P[0]),X=f(W,z[0]),Z=f(W,I[0]),se=x(_(P[0],P[0]),x(_(P[1],P[1]),_(P[2],P[2]))),le=f(se,S[0]),oe=f(se,k[0]),U=f(se,z[0]),V=f(se,I[0]),re=x(_(z[0],z[0]),x(_(z[1],z[1]),_(z[2],z[2]))),ee=f(re,S[0]),j=f(re,k[0]),Q=f(re,P[0]),ne=f(re,I[0]),ae=x(_(I[0],I[0]),x(_(I[1],I[1]),_(I[2],I[2]))),ie=f(ae,S[0]),ue=f(ae,k[0]),xe=f(ae,P[0]),he=f(ae,z[0]),ge=x(x(x(f(x(f(T(he,ne),P[1]),x(f(T(xe,V),-z[1]),f(T(Q,U),I[1]))),k[2]),x(f(x(f(T(he,ne),k[1]),x(f(T(ue,Z),-z[1]),f(T(j,X),I[1]))),-P[2]),f(x(f(T(xe,V),k[1]),x(f(T(ue,Z),-P[1]),f(T(oe,J),I[1]))),z[2]))),x(f(x(f(T(Q,U),k[1]),x(f(T(j,X),-P[1]),f(T(oe,J),z[1]))),-I[2]),x(f(x(f(T(he,ne),k[1]),x(f(T(ue,Z),-z[1]),f(T(j,X),I[1]))),S[2]),f(x(f(T(he,ne),S[1]),x(f(T(ie,G),-z[1]),f(T(ee,F),I[1]))),-k[2])))),x(x(f(x(f(T(ue,Z),S[1]),x(f(T(ie,G),-k[1]),f(T(q,D),I[1]))),z[2]),x(f(x(f(T(j,X),S[1]),x(f(T(ee,F),-k[1]),f(T(q,D),z[1]))),-I[2]),f(x(f(T(Q,U),k[1]),x(f(T(j,X),-P[1]),f(T(oe,J),z[1]))),S[2]))),x(f(x(f(T(Q,U),S[1]),x(f(T(ee,F),-P[1]),f(T(le,O),z[1]))),-k[2]),x(f(x(f(T(j,X),S[1]),x(f(T(ee,F),-k[1]),f(T(q,D),z[1]))),P[2]),f(x(f(T(oe,J),S[1]),x(f(T(le,O),-k[1]),f(T(q,D),P[1]))),-z[2]))))),me=x(x(x(f(x(f(T(he,ne),P[1]),x(f(T(xe,V),-z[1]),f(T(Q,U),I[1]))),S[2]),f(x(f(T(he,ne),S[1]),x(f(T(ie,G),-z[1]),f(T(ee,F),I[1]))),-P[2])),x(f(x(f(T(xe,V),S[1]),x(f(T(ie,G),-P[1]),f(T(le,O),I[1]))),z[2]),f(x(f(T(Q,U),S[1]),x(f(T(ee,F),-P[1]),f(T(le,O),z[1]))),-I[2]))),x(x(f(x(f(T(xe,V),k[1]),x(f(T(ue,Z),-P[1]),f(T(oe,J),I[1]))),S[2]),f(x(f(T(xe,V),S[1]),x(f(T(ie,G),-P[1]),f(T(le,O),I[1]))),-k[2])),x(f(x(f(T(ue,Z),S[1]),x(f(T(ie,G),-k[1]),f(T(q,D),I[1]))),P[2]),f(x(f(T(oe,J),S[1]),x(f(T(le,O),-k[1]),f(T(q,D),P[1]))),-I[2])))),ke=T(ge,me);return ke[ke.length-1]}return L}function y(x,T,_,f){function L(S,k,P,z,I,R){var D=x(x(_(S[0],S[0]),_(S[1],S[1])),x(_(S[2],S[2]),_(S[3],S[3]))),O=f(D,k[0]),F=f(D,P[0]),G=f(D,z[0]),W=f(D,I[0]),q=f(D,R[0]),J=x(x(_(k[0],k[0]),_(k[1],k[1])),x(_(k[2],k[2]),_(k[3],k[3]))),X=f(J,S[0]),Z=f(J,P[0]),se=f(J,z[0]),le=f(J,I[0]),oe=f(J,R[0]),U=x(x(_(P[0],P[0]),_(P[1],P[1])),x(_(P[2],P[2]),_(P[3],P[3]))),V=f(U,S[0]),re=f(U,k[0]),ee=f(U,z[0]),j=f(U,I[0]),Q=f(U,R[0]),ne=x(x(_(z[0],z[0]),_(z[1],z[1])),x(_(z[2],z[2]),_(z[3],z[3]))),ae=f(ne,S[0]),ie=f(ne,k[0]),ue=f(ne,P[0]),xe=f(ne,I[0]),he=f(ne,R[0]),ge=x(x(_(I[0],I[0]),_(I[1],I[1])),x(_(I[2],I[2]),_(I[3],I[3]))),me=f(ge,S[0]),ke=f(ge,k[0]),Ae=f(ge,P[0]),Ne=f(ge,z[0]),He=f(ge,R[0]),Ge=x(x(_(R[0],R[0]),_(R[1],R[1])),x(_(R[2],R[2]),_(R[3],R[3]))),_e=f(Ge,S[0]),De=f(Ge,k[0]),Ye=f(Ge,P[0]),qe=f(Ge,z[0]),Ue=f(Ge,I[0]),Ie=x(x(x(f(x(x(f(x(f(T(Ue,He),z[1]),x(f(T(qe,he),-I[1]),f(T(Ne,xe),R[1]))),P[2]),f(x(f(T(Ue,He),P[1]),x(f(T(Ye,Q),-I[1]),f(T(Ae,j),R[1]))),-z[2])),x(f(x(f(T(qe,he),P[1]),x(f(T(Ye,Q),-z[1]),f(T(ue,ee),R[1]))),I[2]),f(x(f(T(Ne,xe),P[1]),x(f(T(Ae,j),-z[1]),f(T(ue,ee),I[1]))),-R[2]))),k[3]),x(f(x(x(f(x(f(T(Ue,He),z[1]),x(f(T(qe,he),-I[1]),f(T(Ne,xe),R[1]))),k[2]),f(x(f(T(Ue,He),k[1]),x(f(T(De,oe),-I[1]),f(T(ke,le),R[1]))),-z[2])),x(f(x(f(T(qe,he),k[1]),x(f(T(De,oe),-z[1]),f(T(ie,se),R[1]))),I[2]),f(x(f(T(Ne,xe),k[1]),x(f(T(ke,le),-z[1]),f(T(ie,se),I[1]))),-R[2]))),-P[3]),f(x(x(f(x(f(T(Ue,He),P[1]),x(f(T(Ye,Q),-I[1]),f(T(Ae,j),R[1]))),k[2]),f(x(f(T(Ue,He),k[1]),x(f(T(De,oe),-I[1]),f(T(ke,le),R[1]))),-P[2])),x(f(x(f(T(Ye,Q),k[1]),x(f(T(De,oe),-P[1]),f(T(re,Z),R[1]))),I[2]),f(x(f(T(Ae,j),k[1]),x(f(T(ke,le),-P[1]),f(T(re,Z),I[1]))),-R[2]))),z[3]))),x(x(f(x(x(f(x(f(T(qe,he),P[1]),x(f(T(Ye,Q),-z[1]),f(T(ue,ee),R[1]))),k[2]),f(x(f(T(qe,he),k[1]),x(f(T(De,oe),-z[1]),f(T(ie,se),R[1]))),-P[2])),x(f(x(f(T(Ye,Q),k[1]),x(f(T(De,oe),-P[1]),f(T(re,Z),R[1]))),z[2]),f(x(f(T(ue,ee),k[1]),x(f(T(ie,se),-P[1]),f(T(re,Z),z[1]))),-R[2]))),-I[3]),f(x(x(f(x(f(T(Ne,xe),P[1]),x(f(T(Ae,j),-z[1]),f(T(ue,ee),I[1]))),k[2]),f(x(f(T(Ne,xe),k[1]),x(f(T(ke,le),-z[1]),f(T(ie,se),I[1]))),-P[2])),x(f(x(f(T(Ae,j),k[1]),x(f(T(ke,le),-P[1]),f(T(re,Z),I[1]))),z[2]),f(x(f(T(ue,ee),k[1]),x(f(T(ie,se),-P[1]),f(T(re,Z),z[1]))),-I[2]))),R[3])),x(f(x(x(f(x(f(T(Ue,He),z[1]),x(f(T(qe,he),-I[1]),f(T(Ne,xe),R[1]))),k[2]),f(x(f(T(Ue,He),k[1]),x(f(T(De,oe),-I[1]),f(T(ke,le),R[1]))),-z[2])),x(f(x(f(T(qe,he),k[1]),x(f(T(De,oe),-z[1]),f(T(ie,se),R[1]))),I[2]),f(x(f(T(Ne,xe),k[1]),x(f(T(ke,le),-z[1]),f(T(ie,se),I[1]))),-R[2]))),S[3]),f(x(x(f(x(f(T(Ue,He),z[1]),x(f(T(qe,he),-I[1]),f(T(Ne,xe),R[1]))),S[2]),f(x(f(T(Ue,He),S[1]),x(f(T(_e,q),-I[1]),f(T(me,W),R[1]))),-z[2])),x(f(x(f(T(qe,he),S[1]),x(f(T(_e,q),-z[1]),f(T(ae,G),R[1]))),I[2]),f(x(f(T(Ne,xe),S[1]),x(f(T(me,W),-z[1]),f(T(ae,G),I[1]))),-R[2]))),-k[3])))),x(x(x(f(x(x(f(x(f(T(Ue,He),k[1]),x(f(T(De,oe),-I[1]),f(T(ke,le),R[1]))),S[2]),f(x(f(T(Ue,He),S[1]),x(f(T(_e,q),-I[1]),f(T(me,W),R[1]))),-k[2])),x(f(x(f(T(De,oe),S[1]),x(f(T(_e,q),-k[1]),f(T(X,O),R[1]))),I[2]),f(x(f(T(ke,le),S[1]),x(f(T(me,W),-k[1]),f(T(X,O),I[1]))),-R[2]))),z[3]),f(x(x(f(x(f(T(qe,he),k[1]),x(f(T(De,oe),-z[1]),f(T(ie,se),R[1]))),S[2]),f(x(f(T(qe,he),S[1]),x(f(T(_e,q),-z[1]),f(T(ae,G),R[1]))),-k[2])),x(f(x(f(T(De,oe),S[1]),x(f(T(_e,q),-k[1]),f(T(X,O),R[1]))),z[2]),f(x(f(T(ie,se),S[1]),x(f(T(ae,G),-k[1]),f(T(X,O),z[1]))),-R[2]))),-I[3])),x(f(x(x(f(x(f(T(Ne,xe),k[1]),x(f(T(ke,le),-z[1]),f(T(ie,se),I[1]))),S[2]),f(x(f(T(Ne,xe),S[1]),x(f(T(me,W),-z[1]),f(T(ae,G),I[1]))),-k[2])),x(f(x(f(T(ke,le),S[1]),x(f(T(me,W),-k[1]),f(T(X,O),I[1]))),z[2]),f(x(f(T(ie,se),S[1]),x(f(T(ae,G),-k[1]),f(T(X,O),z[1]))),-I[2]))),R[3]),f(x(x(f(x(f(T(qe,he),P[1]),x(f(T(Ye,Q),-z[1]),f(T(ue,ee),R[1]))),k[2]),f(x(f(T(qe,he),k[1]),x(f(T(De,oe),-z[1]),f(T(ie,se),R[1]))),-P[2])),x(f(x(f(T(Ye,Q),k[1]),x(f(T(De,oe),-P[1]),f(T(re,Z),R[1]))),z[2]),f(x(f(T(ue,ee),k[1]),x(f(T(ie,se),-P[1]),f(T(re,Z),z[1]))),-R[2]))),S[3]))),x(x(f(x(x(f(x(f(T(qe,he),P[1]),x(f(T(Ye,Q),-z[1]),f(T(ue,ee),R[1]))),S[2]),f(x(f(T(qe,he),S[1]),x(f(T(_e,q),-z[1]),f(T(ae,G),R[1]))),-P[2])),x(f(x(f(T(Ye,Q),S[1]),x(f(T(_e,q),-P[1]),f(T(V,F),R[1]))),z[2]),f(x(f(T(ue,ee),S[1]),x(f(T(ae,G),-P[1]),f(T(V,F),z[1]))),-R[2]))),-k[3]),f(x(x(f(x(f(T(qe,he),k[1]),x(f(T(De,oe),-z[1]),f(T(ie,se),R[1]))),S[2]),f(x(f(T(qe,he),S[1]),x(f(T(_e,q),-z[1]),f(T(ae,G),R[1]))),-k[2])),x(f(x(f(T(De,oe),S[1]),x(f(T(_e,q),-k[1]),f(T(X,O),R[1]))),z[2]),f(x(f(T(ie,se),S[1]),x(f(T(ae,G),-k[1]),f(T(X,O),z[1]))),-R[2]))),P[3])),x(f(x(x(f(x(f(T(Ye,Q),k[1]),x(f(T(De,oe),-P[1]),f(T(re,Z),R[1]))),S[2]),f(x(f(T(Ye,Q),S[1]),x(f(T(_e,q),-P[1]),f(T(V,F),R[1]))),-k[2])),x(f(x(f(T(De,oe),S[1]),x(f(T(_e,q),-k[1]),f(T(X,O),R[1]))),P[2]),f(x(f(T(re,Z),S[1]),x(f(T(V,F),-k[1]),f(T(X,O),P[1]))),-R[2]))),-z[3]),f(x(x(f(x(f(T(ue,ee),k[1]),x(f(T(ie,se),-P[1]),f(T(re,Z),z[1]))),S[2]),f(x(f(T(ue,ee),S[1]),x(f(T(ae,G),-P[1]),f(T(V,F),z[1]))),-k[2])),x(f(x(f(T(ie,se),S[1]),x(f(T(ae,G),-k[1]),f(T(X,O),z[1]))),P[2]),f(x(f(T(re,Z),S[1]),x(f(T(V,F),-k[1]),f(T(X,O),P[1]))),-z[2]))),R[3]))))),Ve=x(x(x(f(x(x(f(x(f(T(Ue,He),z[1]),x(f(T(qe,he),-I[1]),f(T(Ne,xe),R[1]))),P[2]),f(x(f(T(Ue,He),P[1]),x(f(T(Ye,Q),-I[1]),f(T(Ae,j),R[1]))),-z[2])),x(f(x(f(T(qe,he),P[1]),x(f(T(Ye,Q),-z[1]),f(T(ue,ee),R[1]))),I[2]),f(x(f(T(Ne,xe),P[1]),x(f(T(Ae,j),-z[1]),f(T(ue,ee),I[1]))),-R[2]))),S[3]),x(f(x(x(f(x(f(T(Ue,He),z[1]),x(f(T(qe,he),-I[1]),f(T(Ne,xe),R[1]))),S[2]),f(x(f(T(Ue,He),S[1]),x(f(T(_e,q),-I[1]),f(T(me,W),R[1]))),-z[2])),x(f(x(f(T(qe,he),S[1]),x(f(T(_e,q),-z[1]),f(T(ae,G),R[1]))),I[2]),f(x(f(T(Ne,xe),S[1]),x(f(T(me,W),-z[1]),f(T(ae,G),I[1]))),-R[2]))),-P[3]),f(x(x(f(x(f(T(Ue,He),P[1]),x(f(T(Ye,Q),-I[1]),f(T(Ae,j),R[1]))),S[2]),f(x(f(T(Ue,He),S[1]),x(f(T(_e,q),-I[1]),f(T(me,W),R[1]))),-P[2])),x(f(x(f(T(Ye,Q),S[1]),x(f(T(_e,q),-P[1]),f(T(V,F),R[1]))),I[2]),f(x(f(T(Ae,j),S[1]),x(f(T(me,W),-P[1]),f(T(V,F),I[1]))),-R[2]))),z[3]))),x(x(f(x(x(f(x(f(T(qe,he),P[1]),x(f(T(Ye,Q),-z[1]),f(T(ue,ee),R[1]))),S[2]),f(x(f(T(qe,he),S[1]),x(f(T(_e,q),-z[1]),f(T(ae,G),R[1]))),-P[2])),x(f(x(f(T(Ye,Q),S[1]),x(f(T(_e,q),-P[1]),f(T(V,F),R[1]))),z[2]),f(x(f(T(ue,ee),S[1]),x(f(T(ae,G),-P[1]),f(T(V,F),z[1]))),-R[2]))),-I[3]),f(x(x(f(x(f(T(Ne,xe),P[1]),x(f(T(Ae,j),-z[1]),f(T(ue,ee),I[1]))),S[2]),f(x(f(T(Ne,xe),S[1]),x(f(T(me,W),-z[1]),f(T(ae,G),I[1]))),-P[2])),x(f(x(f(T(Ae,j),S[1]),x(f(T(me,W),-P[1]),f(T(V,F),I[1]))),z[2]),f(x(f(T(ue,ee),S[1]),x(f(T(ae,G),-P[1]),f(T(V,F),z[1]))),-I[2]))),R[3])),x(f(x(x(f(x(f(T(Ue,He),P[1]),x(f(T(Ye,Q),-I[1]),f(T(Ae,j),R[1]))),k[2]),f(x(f(T(Ue,He),k[1]),x(f(T(De,oe),-I[1]),f(T(ke,le),R[1]))),-P[2])),x(f(x(f(T(Ye,Q),k[1]),x(f(T(De,oe),-P[1]),f(T(re,Z),R[1]))),I[2]),f(x(f(T(Ae,j),k[1]),x(f(T(ke,le),-P[1]),f(T(re,Z),I[1]))),-R[2]))),S[3]),f(x(x(f(x(f(T(Ue,He),P[1]),x(f(T(Ye,Q),-I[1]),f(T(Ae,j),R[1]))),S[2]),f(x(f(T(Ue,He),S[1]),x(f(T(_e,q),-I[1]),f(T(me,W),R[1]))),-P[2])),x(f(x(f(T(Ye,Q),S[1]),x(f(T(_e,q),-P[1]),f(T(V,F),R[1]))),I[2]),f(x(f(T(Ae,j),S[1]),x(f(T(me,W),-P[1]),f(T(V,F),I[1]))),-R[2]))),-k[3])))),x(x(x(f(x(x(f(x(f(T(Ue,He),k[1]),x(f(T(De,oe),-I[1]),f(T(ke,le),R[1]))),S[2]),f(x(f(T(Ue,He),S[1]),x(f(T(_e,q),-I[1]),f(T(me,W),R[1]))),-k[2])),x(f(x(f(T(De,oe),S[1]),x(f(T(_e,q),-k[1]),f(T(X,O),R[1]))),I[2]),f(x(f(T(ke,le),S[1]),x(f(T(me,W),-k[1]),f(T(X,O),I[1]))),-R[2]))),P[3]),f(x(x(f(x(f(T(Ye,Q),k[1]),x(f(T(De,oe),-P[1]),f(T(re,Z),R[1]))),S[2]),f(x(f(T(Ye,Q),S[1]),x(f(T(_e,q),-P[1]),f(T(V,F),R[1]))),-k[2])),x(f(x(f(T(De,oe),S[1]),x(f(T(_e,q),-k[1]),f(T(X,O),R[1]))),P[2]),f(x(f(T(re,Z),S[1]),x(f(T(V,F),-k[1]),f(T(X,O),P[1]))),-R[2]))),-I[3])),x(f(x(x(f(x(f(T(Ae,j),k[1]),x(f(T(ke,le),-P[1]),f(T(re,Z),I[1]))),S[2]),f(x(f(T(Ae,j),S[1]),x(f(T(me,W),-P[1]),f(T(V,F),I[1]))),-k[2])),x(f(x(f(T(ke,le),S[1]),x(f(T(me,W),-k[1]),f(T(X,O),I[1]))),P[2]),f(x(f(T(re,Z),S[1]),x(f(T(V,F),-k[1]),f(T(X,O),P[1]))),-I[2]))),R[3]),f(x(x(f(x(f(T(Ne,xe),P[1]),x(f(T(Ae,j),-z[1]),f(T(ue,ee),I[1]))),k[2]),f(x(f(T(Ne,xe),k[1]),x(f(T(ke,le),-z[1]),f(T(ie,se),I[1]))),-P[2])),x(f(x(f(T(Ae,j),k[1]),x(f(T(ke,le),-P[1]),f(T(re,Z),I[1]))),z[2]),f(x(f(T(ue,ee),k[1]),x(f(T(ie,se),-P[1]),f(T(re,Z),z[1]))),-I[2]))),S[3]))),x(x(f(x(x(f(x(f(T(Ne,xe),P[1]),x(f(T(Ae,j),-z[1]),f(T(ue,ee),I[1]))),S[2]),f(x(f(T(Ne,xe),S[1]),x(f(T(me,W),-z[1]),f(T(ae,G),I[1]))),-P[2])),x(f(x(f(T(Ae,j),S[1]),x(f(T(me,W),-P[1]),f(T(V,F),I[1]))),z[2]),f(x(f(T(ue,ee),S[1]),x(f(T(ae,G),-P[1]),f(T(V,F),z[1]))),-I[2]))),-k[3]),f(x(x(f(x(f(T(Ne,xe),k[1]),x(f(T(ke,le),-z[1]),f(T(ie,se),I[1]))),S[2]),f(x(f(T(Ne,xe),S[1]),x(f(T(me,W),-z[1]),f(T(ae,G),I[1]))),-k[2])),x(f(x(f(T(ke,le),S[1]),x(f(T(me,W),-k[1]),f(T(X,O),I[1]))),z[2]),f(x(f(T(ie,se),S[1]),x(f(T(ae,G),-k[1]),f(T(X,O),z[1]))),-I[2]))),P[3])),x(f(x(x(f(x(f(T(Ae,j),k[1]),x(f(T(ke,le),-P[1]),f(T(re,Z),I[1]))),S[2]),f(x(f(T(Ae,j),S[1]),x(f(T(me,W),-P[1]),f(T(V,F),I[1]))),-k[2])),x(f(x(f(T(ke,le),S[1]),x(f(T(me,W),-k[1]),f(T(X,O),I[1]))),P[2]),f(x(f(T(re,Z),S[1]),x(f(T(V,F),-k[1]),f(T(X,O),P[1]))),-I[2]))),-z[3]),f(x(x(f(x(f(T(ue,ee),k[1]),x(f(T(ie,se),-P[1]),f(T(re,Z),z[1]))),S[2]),f(x(f(T(ue,ee),S[1]),x(f(T(ae,G),-P[1]),f(T(V,F),z[1]))),-k[2])),x(f(x(f(T(ie,se),S[1]),x(f(T(ae,G),-k[1]),f(T(X,O),z[1]))),P[2]),f(x(f(T(re,Z),S[1]),x(f(T(V,F),-k[1]),f(T(X,O),P[1]))),-z[2]))),I[3]))))),dt=T(Ie,Ve);return dt[dt.length-1]}return L}var p=[s,i,v];function A(x){var T=p[x.length];return T||(T=p[x.length]=c(x.length)),T.apply(void 0,x)}function m(x,T,_,f,L,S,k,P){function z(I,R,D,O,F,G){switch(arguments.length){case 0:case 1:return 0;case 2:return f(I,R);case 3:return L(I,R,D);case 4:return S(I,R,D,O);case 5:return k(I,R,D,O,F);case 6:return P(I,R,D,O,F,G)}for(var W=new Array(arguments.length),q=0;q<arguments.length;++q)W[q]=arguments[q];return x(W)}return z}function M(){for(;p.length<=n;)p.push(c(p.length));b.exports=m.apply(void 0,[A].concat(p));for(var x=0;x<=n;++x)b.exports[x]=p[x]}M()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],283:[function(l,b,w){var e=l("robust-determinant"),o=3;function a(g){var h=g===2?c:s;return g<o?h(e[g]):h(e)}function r(){return[[0]]}function n(g,h){return[[h[0]],[g[0][0]]]}function c(g){return function(y,p){return[g([[+p[0],+y[0][1]],[+p[1],+y[1][1]]]),g([[+y[0][0],+p[0]],[+y[1][0],+p[1]]]),g(y)]}}function s(g){return function(y,p){return[g([[+p[0],+y[0][1],+y[0][2]],[+p[1],+y[1][1],+y[1][2]],[+p[2],+y[2][1],+y[2][2]]]),g([[+y[0][0],+p[0],+y[0][2]],[+y[1][0],+p[1],+y[1][2]],[+y[2][0],+p[2],+y[2][2]]]),g([[+y[0][0],+y[0][1],+p[0]],[+y[1][0],+y[1][1],+p[1]],[+y[2][0],+y[2][1],+p[2]]]),g(y)]}}var i=[r,n];function v(g,h,y,p,A,m){return function(x,T){switch(x.length){case 0:return g(x,T);case 1:return h(x,T);case 2:return y(x,T);case 3:return p(x,T)}var _=A[x.length];return _||(_=A[x.length]=m(x.length)),_(x,T)}}function u(){for(;i.length<=o;)i.push(a(i.length));b.exports=v.apply(void 0,i.concat([i,a]));for(var g=0;g<o;++g)b.exports[g]=i[g]}u()},{"robust-determinant":280}],284:[function(l,b,w){var e=l("two-product"),o=l("robust-sum"),a=l("robust-scale"),r=l("robust-subtract"),n=5,c=11102230246251565e-32,s=(3+16*c)*c,i=(7+56*c)*c;function v(T,_,f,L){return function(k,P,z){var I=T(T(_(P[1],z[0]),_(-z[1],P[0])),T(_(k[1],P[0]),_(-P[1],k[0]))),R=T(_(k[1],z[0]),_(-z[1],k[0])),D=L(I,R);return D[D.length-1]}}function u(T,_,f,L){return function(k,P,z,I){var R=T(T(f(T(_(z[1],I[0]),_(-I[1],z[0])),P[2]),T(f(T(_(P[1],I[0]),_(-I[1],P[0])),-z[2]),f(T(_(P[1],z[0]),_(-z[1],P[0])),I[2]))),T(f(T(_(P[1],I[0]),_(-I[1],P[0])),k[2]),T(f(T(_(k[1],I[0]),_(-I[1],k[0])),-P[2]),f(T(_(k[1],P[0]),_(-P[1],k[0])),I[2])))),D=T(T(f(T(_(z[1],I[0]),_(-I[1],z[0])),k[2]),T(f(T(_(k[1],I[0]),_(-I[1],k[0])),-z[2]),f(T(_(k[1],z[0]),_(-z[1],k[0])),I[2]))),T(f(T(_(P[1],z[0]),_(-z[1],P[0])),k[2]),T(f(T(_(k[1],z[0]),_(-z[1],k[0])),-P[2]),f(T(_(k[1],P[0]),_(-P[1],k[0])),z[2])))),O=L(R,D);return O[O.length-1]}}function g(T,_,f,L){return function(k,P,z,I,R){var D=T(T(T(f(T(f(T(_(I[1],R[0]),_(-R[1],I[0])),z[2]),T(f(T(_(z[1],R[0]),_(-R[1],z[0])),-I[2]),f(T(_(z[1],I[0]),_(-I[1],z[0])),R[2]))),P[3]),T(f(T(f(T(_(I[1],R[0]),_(-R[1],I[0])),P[2]),T(f(T(_(P[1],R[0]),_(-R[1],P[0])),-I[2]),f(T(_(P[1],I[0]),_(-I[1],P[0])),R[2]))),-z[3]),f(T(f(T(_(z[1],R[0]),_(-R[1],z[0])),P[2]),T(f(T(_(P[1],R[0]),_(-R[1],P[0])),-z[2]),f(T(_(P[1],z[0]),_(-z[1],P[0])),R[2]))),I[3]))),T(f(T(f(T(_(z[1],I[0]),_(-I[1],z[0])),P[2]),T(f(T(_(P[1],I[0]),_(-I[1],P[0])),-z[2]),f(T(_(P[1],z[0]),_(-z[1],P[0])),I[2]))),-R[3]),T(f(T(f(T(_(I[1],R[0]),_(-R[1],I[0])),P[2]),T(f(T(_(P[1],R[0]),_(-R[1],P[0])),-I[2]),f(T(_(P[1],I[0]),_(-I[1],P[0])),R[2]))),k[3]),f(T(f(T(_(I[1],R[0]),_(-R[1],I[0])),k[2]),T(f(T(_(k[1],R[0]),_(-R[1],k[0])),-I[2]),f(T(_(k[1],I[0]),_(-I[1],k[0])),R[2]))),-P[3])))),T(T(f(T(f(T(_(P[1],R[0]),_(-R[1],P[0])),k[2]),T(f(T(_(k[1],R[0]),_(-R[1],k[0])),-P[2]),f(T(_(k[1],P[0]),_(-P[1],k[0])),R[2]))),I[3]),T(f(T(f(T(_(P[1],I[0]),_(-I[1],P[0])),k[2]),T(f(T(_(k[1],I[0]),_(-I[1],k[0])),-P[2]),f(T(_(k[1],P[0]),_(-P[1],k[0])),I[2]))),-R[3]),f(T(f(T(_(z[1],I[0]),_(-I[1],z[0])),P[2]),T(f(T(_(P[1],I[0]),_(-I[1],P[0])),-z[2]),f(T(_(P[1],z[0]),_(-z[1],P[0])),I[2]))),k[3]))),T(f(T(f(T(_(z[1],I[0]),_(-I[1],z[0])),k[2]),T(f(T(_(k[1],I[0]),_(-I[1],k[0])),-z[2]),f(T(_(k[1],z[0]),_(-z[1],k[0])),I[2]))),-P[3]),T(f(T(f(T(_(P[1],I[0]),_(-I[1],P[0])),k[2]),T(f(T(_(k[1],I[0]),_(-I[1],k[0])),-P[2]),f(T(_(k[1],P[0]),_(-P[1],k[0])),I[2]))),z[3]),f(T(f(T(_(P[1],z[0]),_(-z[1],P[0])),k[2]),T(f(T(_(k[1],z[0]),_(-z[1],k[0])),-P[2]),f(T(_(k[1],P[0]),_(-P[1],k[0])),z[2]))),-I[3]))))),O=T(T(T(f(T(f(T(_(I[1],R[0]),_(-R[1],I[0])),z[2]),T(f(T(_(z[1],R[0]),_(-R[1],z[0])),-I[2]),f(T(_(z[1],I[0]),_(-I[1],z[0])),R[2]))),k[3]),f(T(f(T(_(I[1],R[0]),_(-R[1],I[0])),k[2]),T(f(T(_(k[1],R[0]),_(-R[1],k[0])),-I[2]),f(T(_(k[1],I[0]),_(-I[1],k[0])),R[2]))),-z[3])),T(f(T(f(T(_(z[1],R[0]),_(-R[1],z[0])),k[2]),T(f(T(_(k[1],R[0]),_(-R[1],k[0])),-z[2]),f(T(_(k[1],z[0]),_(-z[1],k[0])),R[2]))),I[3]),f(T(f(T(_(z[1],I[0]),_(-I[1],z[0])),k[2]),T(f(T(_(k[1],I[0]),_(-I[1],k[0])),-z[2]),f(T(_(k[1],z[0]),_(-z[1],k[0])),I[2]))),-R[3]))),T(T(f(T(f(T(_(z[1],R[0]),_(-R[1],z[0])),P[2]),T(f(T(_(P[1],R[0]),_(-R[1],P[0])),-z[2]),f(T(_(P[1],z[0]),_(-z[1],P[0])),R[2]))),k[3]),f(T(f(T(_(z[1],R[0]),_(-R[1],z[0])),k[2]),T(f(T(_(k[1],R[0]),_(-R[1],k[0])),-z[2]),f(T(_(k[1],z[0]),_(-z[1],k[0])),R[2]))),-P[3])),T(f(T(f(T(_(P[1],R[0]),_(-R[1],P[0])),k[2]),T(f(T(_(k[1],R[0]),_(-R[1],k[0])),-P[2]),f(T(_(k[1],P[0]),_(-P[1],k[0])),R[2]))),z[3]),f(T(f(T(_(P[1],z[0]),_(-z[1],P[0])),k[2]),T(f(T(_(k[1],z[0]),_(-z[1],k[0])),-P[2]),f(T(_(k[1],P[0]),_(-P[1],k[0])),z[2]))),-R[3])))),F=L(D,O);return F[F.length-1]}}function h(T){var _=T===3?v:T===4?u:g;return _(o,e,a,r)}var y=h(3),p=h(4),A=[function(){return 0},function(){return 0},function(_,f){return f[0]-_[0]},function(_,f,L){var S=(_[1]-L[1])*(f[0]-L[0]),k=(_[0]-L[0])*(f[1]-L[1]),P=S-k,z;if(S>0){if(k<=0)return P;z=S+k}else if(S<0){if(k>=0)return P;z=-(S+k)}else return P;var I=s*z;return P>=I||P<=-I?P:y(_,f,L)},function(_,f,L,S){var k=_[0]-S[0],P=f[0]-S[0],z=L[0]-S[0],I=_[1]-S[1],R=f[1]-S[1],D=L[1]-S[1],O=_[2]-S[2],F=f[2]-S[2],G=L[2]-S[2],W=P*D,q=z*R,J=z*I,X=k*D,Z=k*R,se=P*I,le=O*(W-q)+F*(J-X)+G*(Z-se),oe=(Math.abs(W)+Math.abs(q))*Math.abs(O)+(Math.abs(J)+Math.abs(X))*Math.abs(F)+(Math.abs(Z)+Math.abs(se))*Math.abs(G),U=i*oe;return le>U||-le>U?le:p(_,f,L,S)}];function m(T){var _=A[T.length];return _||(_=A[T.length]=h(T.length)),_.apply(void 0,T)}function M(T,_,f,L,S,k,P){return function(I,R,D,O,F){switch(arguments.length){case 0:case 1:return 0;case 2:return L(I,R);case 3:return S(I,R,D);case 4:return k(I,R,D,O);case 5:return P(I,R,D,O,F)}for(var G=new Array(arguments.length),W=0;W<arguments.length;++W)G[W]=arguments[W];return T(G)}}function x(){for(;A.length<=n;)A.push(h(A.length));b.exports=M.apply(void 0,[m].concat(A));for(var T=0;T<=n;++T)b.exports[T]=A[T]}x()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],285:[function(l,b,w){var e=l("robust-sum"),o=l("robust-scale");b.exports=a;function a(r,n){if(r.length===1)return o(n,r[0]);if(n.length===1)return o(r,n[0]);if(r.length===0||n.length===0)return[0];var c=[0];if(r.length<n.length)for(var s=0;s<r.length;++s)c=e(c,o(n,r[s]));else for(var s=0;s<n.length;++s)c=e(c,o(r,n[s]));return c}},{"robust-scale":286,"robust-sum":289}],286:[function(l,b,w){var e=l("two-product"),o=l("two-sum");b.exports=a;function a(r,n){var c=r.length;if(c===1){var s=e(r[0],n);return s[0]?s:[s[1]]}var i=new Array(2*c),v=[.1,.1],u=[.1,.1],g=0;e(r[0],n,v),v[0]&&(i[g++]=v[0]);for(var h=1;h<c;++h){e(r[h],n,u);var y=v[1];o(y,u[0],v),v[0]&&(i[g++]=v[0]);var p=u[1],A=v[1],m=p+A,M=m-p,x=A-M;v[1]=m,x&&(i[g++]=x)}return v[1]&&(i[g++]=v[1]),g===0&&(i[g++]=0),i.length=g,i}},{"two-product":306,"two-sum":307}],287:[function(l,b,w){b.exports=a;var e=l("robust-orientation")[3];function o(r,n,c,s){for(var i=0;i<2;++i){var v=r[i],u=n[i],g=Math.min(v,u),h=Math.max(v,u),y=c[i],p=s[i],A=Math.min(y,p),m=Math.max(y,p);if(m<g||h<A)return!1}return!0}function a(r,n,c,s){var i=e(r,c,s),v=e(n,c,s);if(i>0&&v>0||i<0&&v<0)return!1;var u=e(c,r,n),g=e(s,r,n);return u>0&&g>0||u<0&&g<0?!1:i===0&&v===0&&u===0&&g===0?o(r,n,c,s):!0}},{"robust-orientation":284}],288:[function(l,b,w){b.exports=o;function e(a,r){var n=a+r,c=n-a,s=n-c,i=r-c,v=a-s,u=v+i;return u?[u,n]:[n]}function o(a,r){var n=a.length|0,c=r.length|0;if(n===1&&c===1)return e(a[0],-r[0]);var s=n+c,i=new Array(s),v=0,u=0,g=0,h=Math.abs,y=a[u],p=h(y),A=-r[g],m=h(A),M,x;p<m?(x=y,u+=1,u<n&&(y=a[u],p=h(y))):(x=A,g+=1,g<c&&(A=-r[g],m=h(A))),u<n&&p<m||g>=c?(M=y,u+=1,u<n&&(y=a[u],p=h(y))):(M=A,g+=1,g<c&&(A=-r[g],m=h(A)));for(var T=M+x,_=T-M,f=x-_,L=f,S=T,k,P,z,I,R;u<n&&g<c;)p<m?(M=y,u+=1,u<n&&(y=a[u],p=h(y))):(M=A,g+=1,g<c&&(A=-r[g],m=h(A))),x=L,T=M+x,_=T-M,f=x-_,f&&(i[v++]=f),k=S+T,P=k-S,z=k-P,I=T-P,R=S-z,L=R+I,S=k;for(;u<n;)M=y,x=L,T=M+x,_=T-M,f=x-_,f&&(i[v++]=f),k=S+T,P=k-S,z=k-P,I=T-P,R=S-z,L=R+I,S=k,u+=1,u<n&&(y=a[u]);for(;g<c;)M=A,x=L,T=M+x,_=T-M,f=x-_,f&&(i[v++]=f),k=S+T,P=k-S,z=k-P,I=T-P,R=S-z,L=R+I,S=k,g+=1,g<c&&(A=-r[g]);return L&&(i[v++]=L),S&&(i[v++]=S),v||(i[v++]=0),i.length=v,i}},{}],289:[function(l,b,w){b.exports=o;function e(a,r){var n=a+r,c=n-a,s=n-c,i=r-c,v=a-s,u=v+i;return u?[u,n]:[n]}function o(a,r){var n=a.length|0,c=r.length|0;if(n===1&&c===1)return e(a[0],r[0]);var s=n+c,i=new Array(s),v=0,u=0,g=0,h=Math.abs,y=a[u],p=h(y),A=r[g],m=h(A),M,x;p<m?(x=y,u+=1,u<n&&(y=a[u],p=h(y))):(x=A,g+=1,g<c&&(A=r[g],m=h(A))),u<n&&p<m||g>=c?(M=y,u+=1,u<n&&(y=a[u],p=h(y))):(M=A,g+=1,g<c&&(A=r[g],m=h(A)));for(var T=M+x,_=T-M,f=x-_,L=f,S=T,k,P,z,I,R;u<n&&g<c;)p<m?(M=y,u+=1,u<n&&(y=a[u],p=h(y))):(M=A,g+=1,g<c&&(A=r[g],m=h(A))),x=L,T=M+x,_=T-M,f=x-_,f&&(i[v++]=f),k=S+T,P=k-S,z=k-P,I=T-P,R=S-z,L=R+I,S=k;for(;u<n;)M=y,x=L,T=M+x,_=T-M,f=x-_,f&&(i[v++]=f),k=S+T,P=k-S,z=k-P,I=T-P,R=S-z,L=R+I,S=k,u+=1,u<n&&(y=a[u]);for(;g<c;)M=A,x=L,T=M+x,_=T-M,f=x-_,f&&(i[v++]=f),k=S+T,P=k-S,z=k-P,I=T-P,R=S-z,L=R+I,S=k,g+=1,g<c&&(A=r[g]);return L&&(i[v++]=L),S&&(i[v++]=S),v||(i[v++]=0),i.length=v,i}},{}],290:[function(l,b,w){b.exports=a;var e=l("boundary-cells"),o=l("reduce-simplicial-complex");function a(r){return o(e(r))}},{"boundary-cells":34,"reduce-simplicial-complex":276}],291:[function(l,b,w){b.exports=g;var e=l("ndarray"),o=l("typedarray-pool"),a=l("ndarray-sort"),r=l("./lib/codegen");function n(h){for(var y=h.length,p=0,A=0;A<y;++A)p=Math.max(p,h[A].length)|0;return p-1}function c(h,y){for(var p=h.length,A=o.mallocUint8(p),m=0;m<p;++m)A[m]=h[m]<y|0;return A}function s(h,y){for(var p=h.length,A=y*(y+1)/2*p|0,m=o.mallocUint32(A*2),M=0,x=0;x<p;++x)for(var T=h[x],y=T.length,_=0;_<y;++_)for(var f=0;f<_;++f){var L=T[f],S=T[_];m[M++]=Math.min(L,S)|0,m[M++]=Math.max(L,S)|0}var k=M/2|0;a(e(m,[k,2]));for(var P=2,x=2;x<M;x+=2)m[x-2]===m[x]&&m[x-1]===m[x+1]||(m[P++]=m[x],m[P++]=m[x+1]);return e(m,[P/2|0,2])}function i(h,y,p,A){for(var m=h.data,M=h.shape[0],x=o.mallocDouble(M),T=0,_=0;_<M;++_){var f=m[2*_],L=m[2*_+1];if(p[f]!==p[L]){var S=y[f],k=y[L];m[2*T]=f,m[2*T+1]=L,x[T++]=(k-A)/(k-S)}}return h.shape[0]=T,e(x,[T])}function v(h,y){var p=o.mallocInt32(y*2),A=h.shape[0],m=h.data;p[0]=0;for(var M=0,x=0;x<A;++x){var T=m[2*x];if(T!==M){for(p[2*M+1]=x;++M<T;)p[2*M]=x,p[2*M+1]=x;p[2*M]=x}}for(p[2*M+1]=A;++M<y;)p[2*M]=p[2*M+1]=A;return p}function u(h){for(var y=h.shape[0]|0,p=h.data,A=new Array(y),m=0;m<y;++m)A[m]=[p[2*m],p[2*m+1]];return A}function g(h,y,p,A){p=p||0,typeof A=="undefined"&&(A=n(h));var m=h.length;if(m===0||A<1)return{cells:[],vertexIds:[],vertexWeights:[]};var M=c(y,+p),x=s(h,A),T=i(x,y,M,+p),_=v(x,y.length|0),f=r(A)(h,x.data,_,M),L=u(x),S=[].slice.call(T.data,0,T.shape[0]);return o.free(M),o.free(x.data),o.free(T.data),o.free(_),{cells:f,vertexIds:L,vertexWeights:S}}},{"./lib/codegen":292,ndarray:259,"ndarray-sort":258,"typedarray-pool":308}],292:[function(l,b,w){b.exports=o;var e=[function(){function r(n,c,s,i){for(var v=n.length,u=[],g=0;g<v;++g){var h=n[g];h.length}return u}return r},function(){function r(c,s,i,v){for(var u=Math.min(i,v)|0,g=Math.max(i,v)|0,h=c[2*u],y=c[2*u+1];h<y;){var p=h+y>>1,A=s[2*p+1];if(A===g)return p;g<A?y=p:h=p+1}return h}function n(c,s,i,v){for(var u=c.length,g=[],h=0;h<u;++h){var y=c[h],p=y.length;if(p===2){var A=(v[y[0]]<<0)+(v[y[1]]<<1);if(A===0||A===3)continue;switch(A){case 0:break;case 1:g.push([r(i,s,y[0],y[1])]);break;case 2:g.push([r(i,s,y[1],y[0])]);break}}}return g}return n},function(){function r(c,s,i,v){for(var u=Math.min(i,v)|0,g=Math.max(i,v)|0,h=c[2*u],y=c[2*u+1];h<y;){var p=h+y>>1,A=s[2*p+1];if(A===g)return p;g<A?y=p:h=p+1}return h}function n(c,s,i,v){for(var u=c.length,g=[],h=0;h<u;++h){var y=c[h],p=y.length;if(p===3){var A=(v[y[0]]<<0)+(v[y[1]]<<1)+(v[y[2]]<<2);if(A===0||A===7)continue;switch(A){case 0:break;case 1:g.push([r(i,s,y[0],y[2]),r(i,s,y[0],y[1])]);break;case 2:g.push([r(i,s,y[1],y[0]),r(i,s,y[1],y[2])]);break;case 3:g.push([r(i,s,y[0],y[2]),r(i,s,y[1],y[2])]);break;case 4:g.push([r(i,s,y[2],y[1]),r(i,s,y[2],y[0])]);break;case 5:g.push([r(i,s,y[2],y[1]),r(i,s,y[0],y[1])]);break;case 6:g.push([r(i,s,y[1],y[0]),r(i,s,y[2],y[0])]);break}}else if(p===2){var A=(v[y[0]]<<0)+(v[y[1]]<<1);if(A===0||A===3)continue;switch(A){case 0:break;case 1:g.push([r(i,s,y[0],y[1])]);break;case 2:g.push([r(i,s,y[1],y[0])]);break}}}return g}return n},function(){function r(c,s,i,v){for(var u=Math.min(i,v)|0,g=Math.max(i,v)|0,h=c[2*u],y=c[2*u+1];h<y;){var p=h+y>>1,A=s[2*p+1];if(A===g)return p;g<A?y=p:h=p+1}return h}function n(c,s,i,v){for(var u=c.length,g=[],h=0;h<u;++h){var y=c[h],p=y.length;if(p===4){var A=(v[y[0]]<<0)+(v[y[1]]<<1)+(v[y[2]]<<2)+(v[y[3]]<<3);if(A===0||A===15)continue;switch(A){case 0:break;case 1:g.push([r(i,s,y[0],y[1]),r(i,s,y[0],y[2]),r(i,s,y[0],y[3])]);break;case 2:g.push([r(i,s,y[1],y[2]),r(i,s,y[1],y[0]),r(i,s,y[1],y[3])]);break;case 3:g.push([r(i,s,y[1],y[2]),r(i,s,y[0],y[2]),r(i,s,y[0],y[3])],[r(i,s,y[1],y[3]),r(i,s,y[1],y[2]),r(i,s,y[0],y[3])]);break;case 4:g.push([r(i,s,y[2],y[0]),r(i,s,y[2],y[1]),r(i,s,y[2],y[3])]);break;case 5:g.push([r(i,s,y[0],y[1]),r(i,s,y[2],y[1]),r(i,s,y[0],y[3])],[r(i,s,y[2],y[1]),r(i,s,y[2],y[3]),r(i,s,y[0],y[3])]);break;case 6:g.push([r(i,s,y[2],y[0]),r(i,s,y[1],y[0]),r(i,s,y[1],y[3])],[r(i,s,y[2],y[3]),r(i,s,y[2],y[0]),r(i,s,y[1],y[3])]);break;case 7:g.push([r(i,s,y[0],y[3]),r(i,s,y[1],y[3]),r(i,s,y[2],y[3])]);break;case 8:g.push([r(i,s,y[3],y[1]),r(i,s,y[3],y[0]),r(i,s,y[3],y[2])]);break;case 9:g.push([r(i,s,y[3],y[1]),r(i,s,y[0],y[1]),r(i,s,y[0],y[2])],[r(i,s,y[3],y[2]),r(i,s,y[3],y[1]),r(i,s,y[0],y[2])]);break;case 10:g.push([r(i,s,y[1],y[0]),r(i,s,y[3],y[0]),r(i,s,y[1],y[2])],[r(i,s,y[3],y[0]),r(i,s,y[3],y[2]),r(i,s,y[1],y[2])]);break;case 11:g.push([r(i,s,y[1],y[2]),r(i,s,y[0],y[2]),r(i,s,y[3],y[2])]);break;case 12:g.push([r(i,s,y[3],y[0]),r(i,s,y[2],y[0]),r(i,s,y[2],y[1])],[r(i,s,y[3],y[1]),r(i,s,y[3],y[0]),r(i,s,y[2],y[1])]);break;case 13:g.push([r(i,s,y[0],y[1]),r(i,s,y[2],y[1]),r(i,s,y[3],y[1])]);break;case 14:g.push([r(i,s,y[2],y[0]),r(i,s,y[1],y[0]),r(i,s,y[3],y[0])]);break}}else if(p===3){var A=(v[y[0]]<<0)+(v[y[1]]<<1)+(v[y[2]]<<2);if(A===0||A===7)continue;switch(A){case 0:break;case 1:g.push([r(i,s,y[0],y[2]),r(i,s,y[0],y[1])]);break;case 2:g.push([r(i,s,y[1],y[0]),r(i,s,y[1],y[2])]);break;case 3:g.push([r(i,s,y[0],y[2]),r(i,s,y[1],y[2])]);break;case 4:g.push([r(i,s,y[2],y[1]),r(i,s,y[2],y[0])]);break;case 5:g.push([r(i,s,y[2],y[1]),r(i,s,y[0],y[1])]);break;case 6:g.push([r(i,s,y[1],y[0]),r(i,s,y[2],y[0])]);break}}else if(p===2){var A=(v[y[0]]<<0)+(v[y[1]]<<1);if(A===0||A===3)continue;switch(A){case 0:break;case 1:g.push([r(i,s,y[0],y[1])]);break;case 2:g.push([r(i,s,y[1],y[0])]);break}}}return g}return n}];function o(a){return e[a]()}},{}],293:[function(l,b,w){var e=l("bit-twiddle"),o=l("union-find");function a(T){for(var _=0,f=Math.max,L=0,S=T.length;L<S;++L)_=f(_,T[L].length);return _-1}w.dimension=a;function r(T){for(var _=-1,f=Math.max,L=0,S=T.length;L<S;++L)for(var k=T[L],P=0,z=k.length;P<z;++P)_=f(_,k[P]);return _+1}w.countVertices=r;function n(T){for(var _=new Array(T.length),f=0,L=T.length;f<L;++f)_[f]=T[f].slice(0);return _}w.cloneCells=n;function c(T,_){var f=T.length,L=T.length-_.length,S=Math.min;if(L)return L;switch(f){case 0:return 0;case 1:return T[0]-_[0];case 2:var R=T[0]+T[1]-_[0]-_[1];return R||S(T[0],T[1])-S(_[0],_[1]);case 3:var k=T[0]+T[1],P=_[0]+_[1];if(R=k+T[2]-(P+_[2]),R)return R;var z=S(T[0],T[1]),I=S(_[0],_[1]),R=S(z,T[2])-S(I,_[2]);return R||S(z+T[2],k)-S(I+_[2],P);default:var D=T.slice(0);D.sort();var O=_.slice(0);O.sort();for(var F=0;F<f;++F)if(L=D[F]-O[F],L)return L;return 0}}w.compareCells=c;function s(T,_){return c(T[0],_[0])}function i(T,_){if(_){for(var f=T.length,L=new Array(f),S=0;S<f;++S)L[S]=[T[S],_[S]];L.sort(s);for(var S=0;S<f;++S)T[S]=L[S][0],_[S]=L[S][1];return T}else return T.sort(c),T}w.normalize=i;function v(T){if(T.length===0)return[];for(var _=1,f=T.length,L=1;L<f;++L){var S=T[L];if(c(S,T[L-1])){if(L===_){_++;continue}T[_++]=S}}return T.length=_,T}w.unique=v;function u(T,_){for(var f=0,L=T.length-1,S=-1;f<=L;){var k=f+L>>1,P=c(T[k],_);P<=0?(P===0&&(S=k),f=k+1):P>0&&(L=k-1)}return S}w.findCell=u;function g(T,_){for(var f=new Array(T.length),L=0,S=f.length;L<S;++L)f[L]=[];for(var k=[],L=0,P=_.length;L<P;++L)for(var z=_[L],I=z.length,R=1,D=1<<I;R<D;++R){k.length=e.popCount(R);for(var O=0,F=0;F<I;++F)R&1<<F&&(k[O++]=z[F]);var G=u(T,k);if(!(G<0))for(;f[G++].push(L),!(G>=T.length||c(T[G],k)!==0););}return f}w.incidence=g;function h(T,_){if(!_)return g(v(p(T,0)),T);for(var f=new Array(_),L=0;L<_;++L)f[L]=[];for(var L=0,S=T.length;L<S;++L)for(var k=T[L],P=0,z=k.length;P<z;++P)f[k[P]].push(L);return f}w.dual=h;function y(T){for(var _=[],f=0,L=T.length;f<L;++f)for(var S=T[f],k=S.length|0,P=1,z=1<<k;P<z;++P){for(var I=[],R=0;R<k;++R)P>>>R&1&&I.push(S[R]);_.push(I)}return i(_)}w.explode=y;function p(T,_){if(_<0)return[];for(var f=[],L=(1<<_+1)-1,S=0;S<T.length;++S)for(var k=T[S],P=L;P<1<<k.length;P=e.nextCombination(P)){for(var z=new Array(_+1),I=0,R=0;R<k.length;++R)P&1<<R&&(z[I++]=k[R]);f.push(z)}return i(f)}w.skeleton=p;function A(T){for(var _=[],f=0,L=T.length;f<L;++f)for(var S=T[f],k=0,P=S.length;k<P;++k){for(var z=new Array(S.length-1),I=0,R=0;I<P;++I)I!==k&&(z[R++]=S[I]);_.push(z)}return i(_)}w.boundary=A;function m(T,_){for(var f=new o(_),L=0;L<T.length;++L)for(var S=T[L],k=0;k<S.length;++k)for(var P=k+1;P<S.length;++P)f.link(S[k],S[P]);for(var z=[],I=f.ranks,L=0;L<I.length;++L)I[L]=-1;for(var L=0;L<T.length;++L){var R=f.find(T[L][0]);I[R]<0?(I[R]=z.length,z.push([T[L].slice(0)])):z[I[R]].push(T[L].slice(0))}return z}function M(T){for(var _=v(i(p(T,0))),f=new o(_.length),L=0;L<T.length;++L)for(var S=T[L],k=0;k<S.length;++k)for(var P=u(_,[S[k]]),z=k+1;z<S.length;++z)f.link(P,u(_,[S[z]]));for(var I=[],R=f.ranks,L=0;L<R.length;++L)R[L]=-1;for(var L=0;L<T.length;++L){var D=f.find(u(_,[T[L][0]]));R[D]<0?(R[D]=I.length,I.push([T[L].slice(0)])):I[R[D]].push(T[L].slice(0))}return I}function x(T,_){return _?m(T,_):M(T)}w.connectedComponents=x},{"bit-twiddle":32,"union-find":309}],294:[function(l,b,w){arguments[4][32][0].apply(w,arguments)},{dup:32}],295:[function(l,b,w){arguments[4][293][0].apply(w,arguments)},{"bit-twiddle":294,dup:293,"union-find":296}],296:[function(l,b,w){b.exports=e;function e(o){this.roots=new Array(o),this.ranks=new Array(o);for(var a=0;a<o;++a)this.roots[a]=a,this.ranks[a]=0}e.prototype.length=function(){return this.roots.length},e.prototype.makeSet=function(){var o=this.roots.length;return this.roots.push(o),this.ranks.push(0),o},e.prototype.find=function(o){for(var a=this.roots;a[o]!==o;){var r=a[o];a[o]=a[r],o=r}return o},e.prototype.link=function(o,a){var r=this.find(o),n=this.find(a);if(r!==n){var c=this.ranks,s=this.roots,i=c[r],v=c[n];i<v?s[r]=n:v<i?s[n]=r:(s[n]=r,++c[r])}}},{}],297:[function(l,b,w){b.exports=r;var e=l("robust-orientation"),o=l("simplicial-complex");function a(n,c,s){var i=Math.abs(e(n,c,s)),v=Math.sqrt(Math.pow(c[0]-s[0],2)+Math.pow(c[1]-s[1],2));return i/v}function r(n,c,s){for(var i=c.length,v=n.length,u=new Array(i),g=new Array(i),h=new Array(i),y=new Array(i),p=0;p<i;++p)u[p]=g[p]=-1,h[p]=1/0,y[p]=!1;for(var p=0;p<v;++p){var A=n[p];if(A.length!==2)throw new Error("Input must be a graph");var m=A[1],M=A[0];g[M]!==-1?g[M]=-2:g[M]=m,u[m]!==-1?u[m]=-2:u[m]=M}function x(J){if(y[J])return 1/0;var X=u[J],Z=g[J];return X<0||Z<0?1/0:a(c[J],c[X],c[Z])}function T(J,X){var Z=I[J],se=I[X];I[J]=se,I[X]=Z,R[Z]=X,R[se]=J}function _(J){return h[I[J]]}function f(J){return J&1?J-1>>1:(J>>1)-1}function L(J){for(var X=_(J);;){var Z=X,se=2*J+1,le=2*(J+1),oe=J;if(se<O){var U=_(se);U<Z&&(oe=se,Z=U)}if(le<O){var V=_(le);V<Z&&(oe=le)}if(oe===J)return J;T(J,oe),J=oe}}function S(J){for(var X=_(J);J>0;){var Z=f(J);if(Z>=0){var se=_(Z);if(X<se){T(J,Z),J=Z;continue}}return J}}function k(){if(O>0){var J=I[0];return T(0,O-1),O-=1,L(0),J}return-1}function P(J,X){var Z=I[J];return h[Z]===X?J:(h[Z]=-1/0,S(J),k(),h[Z]=X,O+=1,S(O-1))}function z(J){if(!y[J]){y[J]=!0;var X=u[J],Z=g[J];u[Z]>=0&&(u[Z]=X),g[X]>=0&&(g[X]=Z),R[X]>=0&&P(R[X],x(X)),R[Z]>=0&&P(R[Z],x(Z))}}for(var I=[],R=new Array(i),p=0;p<i;++p){var D=h[p]=x(p);D<1/0?(R[p]=I.length,I.push(p)):R[p]=-1}for(var O=I.length,p=O>>1;p>=0;--p)L(p);for(;;){var F=k();if(F<0||h[F]>s)break;z(F)}for(var G=[],p=0;p<i;++p)y[p]||(R[p]=G.length,G.push(c[p].slice()));G.length;function W(J,X){if(J[X]<0)return X;var Z=X,se=X;do{var le=J[se];if(!y[se]||le<0||le===se||(se=le,le=J[se],!y[se]||le<0||le===se))break;se=le,Z=J[Z]}while(Z!==se);for(var oe=X;oe!==se;oe=J[oe])J[oe]=se;return se}var q=[];return n.forEach(function(J){var X=W(u,J[0]),Z=W(g,J[1]);if(X>=0&&Z>=0&&X!==Z){var se=R[X],le=R[Z];se!==le&&q.push([se,le])}}),o.unique(o.normalize(q)),{positions:G,edges:q}}},{"robust-orientation":284,"simplicial-complex":295}],298:[function(l,b,w){b.exports=a;var e=l("robust-orientation");function o(r,n){var c,s;if(n[0][0]<n[1][0])c=n[0],s=n[1];else if(n[0][0]>n[1][0])c=n[1],s=n[0];else{var i=Math.min(r[0][1],r[1][1]),v=Math.max(r[0][1],r[1][1]),u=Math.min(n[0][1],n[1][1]),g=Math.max(n[0][1],n[1][1]);return v<u?v-u:i>g?i-g:v-g}var h,y;r[0][1]<r[1][1]?(h=r[0],y=r[1]):(h=r[1],y=r[0]);var p=e(s,c,h);return p||(p=e(s,c,y),p)?p:y-s}function a(r,n){var c,s;if(n[0][0]<n[1][0])c=n[0],s=n[1];else if(n[0][0]>n[1][0])c=n[1],s=n[0];else return o(n,r);var i,v;if(r[0][0]<r[1][0])i=r[0],v=r[1];else if(r[0][0]>r[1][0])i=r[1],v=r[0];else return-o(r,n);var u=e(c,s,v),g=e(c,s,i);if(u<0){if(g<=0)return u}else if(u>0){if(g>=0)return u}else if(g)return g;if(u=e(v,i,s),g=e(v,i,c),u<0){if(g<=0)return u}else if(u>0){if(g>=0)return u}else if(g)return g;return s[0]-v[0]}},{"robust-orientation":284}],299:[function(l,b,w){b.exports=g;var e=l("binary-search-bounds"),o=l("functional-red-black-tree"),a=l("robust-orientation"),r=l("./lib/order-segments");function n(h,y,p){this.slabs=h,this.coordinates=y,this.horizontal=p}var c=n.prototype;function s(h,y){return h.y-y}function i(h,y){for(var p=null;h;){var A=h.key,m,M;A[0][0]<A[1][0]?(m=A[0],M=A[1]):(m=A[1],M=A[0]);var x=a(m,M,y);if(x<0)h=h.left;else if(x>0)if(y[0]!==A[1][0])p=h,h=h.right;else{var T=i(h.right,y);if(T)return T;h=h.left}else{if(y[0]!==A[1][0])return h;var T=i(h.right,y);if(T)return T;h=h.left}}return p}c.castUp=function(h){var y=e.le(this.coordinates,h[0]);if(y<0)return-1;this.slabs[y];var p=i(this.slabs[y],h),A=-1;if(p&&(A=p.value),this.coordinates[y]===h[0]){var m=null;if(p&&(m=p.key),y>0){var M=i(this.slabs[y-1],h);M&&(m?r(M.key,m)>0&&(m=M.key,A=M.value):(A=M.value,m=M.key))}var x=this.horizontal[y];if(x.length>0){var T=e.ge(x,h[1],s);if(T<x.length){var _=x[T];if(h[1]===_.y){if(_.closed)return _.index;for(;T<x.length-1&&x[T+1].y===h[1];)if(T=T+1,_=x[T],_.closed)return _.index;if(_.y===h[1]&&!_.start){if(T=T+1,T>=x.length)return A;_=x[T]}}if(_.start)if(m){var f=a(m[0],m[1],[h[0],_.y]);m[0][0]>m[1][0]&&(f=-f),f>0&&(A=_.index)}else A=_.index;else _.y!==h[1]&&(A=_.index)}}}return A};function v(h,y,p,A){this.y=h,this.index=y,this.start=p,this.closed=A}function u(h,y,p,A){this.x=h,this.segment=y,this.create=p,this.index=A}function g(h){for(var y=h.length,p=2*y,A=new Array(p),m=0;m<y;++m){var M=h[m],x=M[0][0]<M[1][0];A[2*m]=new u(M[0][0],M,x,m),A[2*m+1]=new u(M[1][0],M,!x,m)}A.sort(function(z,I){var R=z.x-I.x;return R||(R=z.create-I.create,R)?R:Math.min(z.segment[0][1],z.segment[1][1])-Math.min(I.segment[0][1],I.segment[1][1])});for(var T=o(r),_=[],f=[],L=[],m=0;m<p;){for(var S=A[m].x,k=[];m<p;){var P=A[m];if(P.x!==S)break;m+=1,P.segment[0][0]===P.x&&P.segment[1][0]===P.x?P.create&&(P.segment[0][1]<P.segment[1][1]?(k.push(new v(P.segment[0][1],P.index,!0,!0)),k.push(new v(P.segment[1][1],P.index,!1,!1))):(k.push(new v(P.segment[1][1],P.index,!0,!1)),k.push(new v(P.segment[0][1],P.index,!1,!0)))):P.create?T=T.insert(P.segment,P.index):T=T.remove(P.segment)}_.push(T.root),f.push(S),L.push(k)}return new n(_,f,L)}},{"./lib/order-segments":298,"binary-search-bounds":31,"functional-red-black-tree":69,"robust-orientation":284}],300:[function(l,b,w){var e=l("robust-dot-product"),o=l("robust-sum");b.exports=n,b.exports.positive=c,b.exports.negative=s;function a(i,v){var u=o(e(i,v),[v[v.length-1]]);return u[u.length-1]}function r(i,v,u,g){var h=g-v,y=-v/h;y<0?y=0:y>1&&(y=1);for(var p=1-y,A=i.length,m=new Array(A),M=0;M<A;++M)m[M]=y*i[M]+p*u[M];return m}function n(i,v){for(var u=[],g=[],h=a(i[i.length-1],v),y=i[i.length-1],p=i[0],A=0;A<i.length;++A,y=p){p=i[A];var m=a(p,v);if(h<0&&m>0||h>0&&m<0){var M=r(y,m,p,h);u.push(M),g.push(M.slice())}m<0?g.push(p.slice()):m>0?u.push(p.slice()):(u.push(p.slice()),g.push(p.slice())),h=m}return{positive:u,negative:g}}function c(i,v){for(var u=[],g=a(i[i.length-1],v),h=i[i.length-1],y=i[0],p=0;p<i.length;++p,h=y){y=i[p];var A=a(y,v);(g<0&&A>0||g>0&&A<0)&&u.push(r(h,A,y,g)),A>=0&&u.push(y.slice()),g=A}return u}function s(i,v){for(var u=[],g=a(i[i.length-1],v),h=i[i.length-1],y=i[0],p=0;p<i.length;++p,h=y){y=i[p];var A=a(y,v);(g<0&&A>0||g>0&&A<0)&&u.push(r(h,A,y,g)),A<=0&&u.push(y.slice()),g=A}return u}},{"robust-dot-product":281,"robust-sum":289}],301:[function(l,b,w){(function(){var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function o(s){return r(c(s),arguments)}function a(s,i){return o.apply(null,[s].concat(i||[]))}function r(s,i){var v=1,u=s.length,g,h="",y,p,A,m,M,x,T,_;for(y=0;y<u;y++)if(typeof s[y]=="string")h+=s[y];else if(typeof s[y]=="object"){if(A=s[y],A.keys)for(g=i[v],p=0;p<A.keys.length;p++){if(g==null)throw new Error(o('[sprintf] Cannot access property "%s" of undefined value "%s"',A.keys[p],A.keys[p-1]));g=g[A.keys[p]]}else A.param_no?g=i[A.param_no]:g=i[v++];if(e.not_type.test(A.type)&&e.not_primitive.test(A.type)&&g instanceof Function&&(g=g()),e.numeric_arg.test(A.type)&&typeof g!="number"&&isNaN(g))throw new TypeError(o("[sprintf] expecting number but found %T",g));switch(e.number.test(A.type)&&(T=g>=0),A.type){case"b":g=parseInt(g,10).toString(2);break;case"c":g=String.fromCharCode(parseInt(g,10));break;case"d":case"i":g=parseInt(g,10);break;case"j":g=JSON.stringify(g,null,A.width?parseInt(A.width):0);break;case"e":g=A.precision?parseFloat(g).toExponential(A.precision):parseFloat(g).toExponential();break;case"f":g=A.precision?parseFloat(g).toFixed(A.precision):parseFloat(g);break;case"g":g=A.precision?String(Number(g.toPrecision(A.precision))):parseFloat(g);break;case"o":g=(parseInt(g,10)>>>0).toString(8);break;case"s":g=String(g),g=A.precision?g.substring(0,A.precision):g;break;case"t":g=String(!!g),g=A.precision?g.substring(0,A.precision):g;break;case"T":g=Object.prototype.toString.call(g).slice(8,-1).toLowerCase(),g=A.precision?g.substring(0,A.precision):g;break;case"u":g=parseInt(g,10)>>>0;break;case"v":g=g.valueOf(),g=A.precision?g.substring(0,A.precision):g;break;case"x":g=(parseInt(g,10)>>>0).toString(16);break;case"X":g=(parseInt(g,10)>>>0).toString(16).toUpperCase();break}e.json.test(A.type)?h+=g:(e.number.test(A.type)&&(!T||A.sign)?(_=T?"+":"-",g=g.toString().replace(e.sign,"")):_="",M=A.pad_char?A.pad_char==="0"?"0":A.pad_char.charAt(1):" ",x=A.width-(_+g).length,m=A.width&&x>0?M.repeat(x):"",h+=A.align?_+g+m:M==="0"?_+m+g:m+_+g)}return h}var n=Object.create(null);function c(s){if(n[s])return n[s];for(var i=s,v,u=[],g=0;i;){if((v=e.text.exec(i))!==null)u.push(v[0]);else if((v=e.modulo.exec(i))!==null)u.push("%");else if((v=e.placeholder.exec(i))!==null){if(v[2]){g|=1;var h=[],y=v[2],p=[];if((p=e.key.exec(y))!==null)for(h.push(p[1]);(y=y.substring(p[0].length))!=="";)if((p=e.key_access.exec(y))!==null)h.push(p[1]);else if((p=e.index_access.exec(y))!==null)h.push(p[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");v[2]=h}else g|=2;if(g===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");u.push({placeholder:v[0],param_no:v[1],keys:v[2],sign:v[3],pad_char:v[4],align:v[5],width:v[6],precision:v[7],type:v[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");i=i.substring(v[0].length)}return n[s]=u}typeof w!="undefined"&&(w.sprintf=o,w.vsprintf=a),typeof window!="undefined"&&(window.sprintf=o,window.vsprintf=a)})()},{}],302:[function(l,b,w){b.exports=s;var e=l("ndarray-extract-contour"),o=l("zero-crossings"),a={"2d":function(i,v,u){var g=i({order:v,scalarArguments:3,getters:u==="generic"?[0]:void 0,phase:function(y,p,A,m){return y>m|0},vertex:function(y,p,A,m,M,x,T,_,f,L,S,k,P){var z=(T<<0)+(_<<1)+(f<<2)+(L<<3)|0;if(!(z===0||z===15))switch(z){case 0:S.push([y-.5,p-.5]);break;case 1:S.push([y-.25-.25*(m+A-2*P)/(A-m),p-.25-.25*(M+A-2*P)/(A-M)]);break;case 2:S.push([y-.75-.25*(-m-A+2*P)/(m-A),p-.25-.25*(x+m-2*P)/(m-x)]);break;case 3:S.push([y-.5,p-.5-.5*(M+A+x+m-4*P)/(A-M+m-x)]);break;case 4:S.push([y-.25-.25*(x+M-2*P)/(M-x),p-.75-.25*(-M-A+2*P)/(M-A)]);break;case 5:S.push([y-.5-.5*(m+A+x+M-4*P)/(A-m+M-x),p-.5]);break;case 6:S.push([y-.5-.25*(-m-A+x+M)/(m-A+M-x),p-.5-.25*(-M-A+x+m)/(M-A+m-x)]);break;case 7:S.push([y-.75-.25*(x+M-2*P)/(M-x),p-.75-.25*(x+m-2*P)/(m-x)]);break;case 8:S.push([y-.75-.25*(-x-M+2*P)/(x-M),p-.75-.25*(-x-m+2*P)/(x-m)]);break;case 9:S.push([y-.5-.25*(m+A+-x-M)/(A-m+x-M),p-.5-.25*(M+A+-x-m)/(A-M+x-m)]);break;case 10:S.push([y-.5-.5*(-m-A+-x-M+4*P)/(m-A+x-M),p-.5]);break;case 11:S.push([y-.25-.25*(-x-M+2*P)/(x-M),p-.75-.25*(M+A-2*P)/(A-M)]);break;case 12:S.push([y-.5,p-.5-.5*(-M-A+-x-m+4*P)/(M-A+x-m)]);break;case 13:S.push([y-.75-.25*(m+A-2*P)/(A-m),p-.25-.25*(-x-m+2*P)/(x-m)]);break;case 14:S.push([y-.25-.25*(-m-A+2*P)/(m-A),p-.25-.25*(-M-A+2*P)/(M-A)]);break;case 15:S.push([y-.5,p-.5]);break}},cell:function(y,p,A,m,M,x,T,_,f){M?_.push([y,p]):_.push([p,y])}});return function(h,y){var p=[],A=[];return g(h,p,A,y),{positions:p,cells:A}}}};function r(i,v){var u=i.length+"d",g=a[u];if(g)return g(e,i,v)}function n(i,v){for(var u=o(i,v),g=u.length,h=new Array(g),y=new Array(g),p=0;p<g;++p)h[p]=[u[p]],y[p]=[p];return{positions:h,cells:y}}var c={};function s(i,h){if(i.dimension<=0)return{positions:[],cells:[]};if(i.dimension===1)return n(i,h);var u=i.order.join()+"-"+i.dtype,g=c[u],h=+h||0;return g||(g=c[u]=r(i.order,i.dtype)),g(i,h)}},{"ndarray-extract-contour":251,"zero-crossings":318}],303:[function(l,b,w){(function(e){(function(){b.exports=c;var o=l("vectorize-text"),a=window||e.global||{},r=a.__TEXT_CACHE||{};a.__TEXT_CACHE={};function n(s){for(var i=s.cells,v=s.positions,u=new Float32Array(i.length*6),g=0,h=0,y=0;y<i.length;++y)for(var p=i[y],A=0;A<3;++A){var m=v[p[A]];u[g++]=m[0],u[g++]=m[1]+1.4,h=Math.max(m[0],h)}return{data:u,shape:h}}function c(s,i,u){var u=u||{},g=r[s];g||(g=r[s]={" ":{data:new Float32Array(0),shape:.2}});var h=g[i];if(!h)if(i.length<=1||!/\d/.test(i))h=g[i]=n(o(i,{triangles:!0,font:s,textAlign:u.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var y=i.split(/(\d|\s)/),p=new Array(y.length),A=0,m=0,M=0;M<y.length;++M)p[M]=c(s,y[M]),A+=p[M].data.length,m+=p[M].shape,M>0&&(m+=.02);for(var x=new Float32Array(A),T=0,_=-.5*m,M=0;M<p.length;++M){for(var f=p[M].data,L=0;L<f.length;L+=2)x[T++]=f[L]+_,x[T++]=f[L+1];_+=p[M].shape+.02}h=g[i]={data:x,shape:m}}return h}}).call(this)}).call(this,l("_process"))},{_process:5,"vectorize-text":311}],304:[function(l,b,w){var e=l("parse-unit");b.exports=n;var o=96;function a(c,s){var i=e(getComputedStyle(c).getPropertyValue(s));return i[0]*n(i[1],c)}function r(c,s){var i=document.createElement("div");i.style["font-size"]="128"+c,s.appendChild(i);var v=a(i,"font-size")/128;return s.removeChild(i),v}function n(c,s){switch(s=s||document.body,c=(c||"px").trim().toLowerCase(),(s===window||s===document)&&(s=document.body),c){case"%":return s.clientHeight/100;case"ch":case"ex":return r(c,s);case"em":return a(s,"font-size");case"rem":return a(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return o;case"cm":return o/2.54;case"mm":return o/25.4;case"pt":return o/72;case"pc":return o/6}return 1}},{"parse-unit":265}],305:[function(l,b,w){b.exports=y;var e=l("filtered-vector"),o=l("gl-mat4/invert"),a=l("gl-mat4/rotate"),r=l("gl-vec3/cross"),n=l("gl-vec3/normalize"),c=l("gl-vec3/dot");function s(p,A,m){return Math.sqrt(Math.pow(p,2)+Math.pow(A,2)+Math.pow(m,2))}function i(p){return Math.min(1,Math.max(-1,p))}function v(p){var A=Math.abs(p[0]),m=Math.abs(p[1]),M=Math.abs(p[2]),x=[0,0,0];A>Math.max(m,M)?x[2]=1:m>Math.max(A,M)?x[0]=1:x[1]=1;for(var T=0,_=0,f=0;f<3;++f)T+=p[f]*p[f],_+=x[f]*p[f];for(var f=0;f<3;++f)x[f]-=_/T*p[f];return n(x,x),x}function u(p,A,m,M,x,T,_,f){this.center=e(m),this.up=e(M),this.right=e(x),this.radius=e([T]),this.angle=e([_,f]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(p,A),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var L=0;L<16;++L)this.computedMatrix[L]=.5;this.recalcMatrix(0)}var g=u.prototype;g.setDistanceLimits=function(p,A){p>0?p=Math.log(p):p=-1/0,A>0?A=Math.log(A):A=1/0,A=Math.max(A,p),this.radius.bounds[0][0]=p,this.radius.bounds[1][0]=A},g.getDistanceLimits=function(p){var A=this.radius.bounds[0];return p?(p[0]=Math.exp(A[0][0]),p[1]=Math.exp(A[1][0]),p):[Math.exp(A[0][0]),Math.exp(A[1][0])]},g.recalcMatrix=function(p){this.center.curve(p),this.up.curve(p),this.right.curve(p),this.radius.curve(p),this.angle.curve(p);for(var A=this.computedUp,m=this.computedRight,M=0,x=0,T=0;T<3;++T)x+=A[T]*m[T],M+=A[T]*A[T];for(var _=Math.sqrt(M),f=0,T=0;T<3;++T)m[T]-=A[T]*x/M,f+=m[T]*m[T],A[T]/=_;for(var L=Math.sqrt(f),T=0;T<3;++T)m[T]/=L;var S=this.computedToward;r(S,A,m),n(S,S);for(var k=Math.exp(this.computedRadius[0]),P=this.computedAngle[0],z=this.computedAngle[1],I=Math.cos(P),R=Math.sin(P),D=Math.cos(z),O=Math.sin(z),F=this.computedCenter,G=I*D,W=R*D,q=O,J=-I*O,X=-R*O,Z=D,se=this.computedEye,le=this.computedMatrix,T=0;T<3;++T){var oe=G*m[T]+W*S[T]+q*A[T];le[4*T+1]=J*m[T]+X*S[T]+Z*A[T],le[4*T+2]=oe,le[4*T+3]=0}var U=le[1],V=le[5],re=le[9],ee=le[2],j=le[6],Q=le[10],ne=V*Q-re*j,ae=re*ee-U*Q,ie=U*j-V*ee,ue=s(ne,ae,ie);ne/=ue,ae/=ue,ie/=ue,le[0]=ne,le[4]=ae,le[8]=ie;for(var T=0;T<3;++T)se[T]=F[T]+le[2+4*T]*k;for(var T=0;T<3;++T){for(var f=0,xe=0;xe<3;++xe)f+=le[T+4*xe]*se[xe];le[12+T]=-f}le[15]=1},g.getMatrix=function(p,A){this.recalcMatrix(p);var m=this.computedMatrix;if(A){for(var M=0;M<16;++M)A[M]=m[M];return A}return m};var h=[0,0,0];g.rotate=function(p,A,m,M){if(this.angle.move(p,A,m),M){this.recalcMatrix(p);var x=this.computedMatrix;h[0]=x[2],h[1]=x[6],h[2]=x[10];for(var T=this.computedUp,_=this.computedRight,f=this.computedToward,L=0;L<3;++L)x[4*L]=T[L],x[4*L+1]=_[L],x[4*L+2]=f[L];a(x,x,M,h);for(var L=0;L<3;++L)T[L]=x[4*L],_[L]=x[4*L+1];this.up.set(p,T[0],T[1],T[2]),this.right.set(p,_[0],_[1],_[2])}},g.pan=function(p,A,m,M){A=A||0,m=m||0,M=M||0,this.recalcMatrix(p);var x=this.computedMatrix;Math.exp(this.computedRadius[0]);var T=x[1],_=x[5],f=x[9],L=s(T,_,f);T/=L,_/=L,f/=L;var S=x[0],k=x[4],P=x[8],z=S*T+k*_+P*f;S-=T*z,k-=_*z,P-=f*z;var I=s(S,k,P);S/=I,k/=I,P/=I;var R=S*A+T*m,D=k*A+_*m,O=P*A+f*m;this.center.move(p,R,D,O);var F=Math.exp(this.computedRadius[0]);F=Math.max(1e-4,F+M),this.radius.set(p,Math.log(F))},g.translate=function(p,A,m,M){this.center.move(p,A||0,m||0,M||0)},g.setMatrix=function(p,A,m,M){var x=1;typeof m=="number"&&(x=m|0),(x<0||x>3)&&(x=1);var T=(x+2)%3;A||(this.recalcMatrix(p),A=this.computedMatrix);var _=A[x],f=A[x+4],L=A[x+8];if(M){var k=Math.abs(_),P=Math.abs(f),z=Math.abs(L),I=Math.max(k,P,z);k===I?(_=_<0?-1:1,f=L=0):z===I?(L=L<0?-1:1,_=f=0):(f=f<0?-1:1,_=L=0)}else{var S=s(_,f,L);_/=S,f/=S,L/=S}var R=A[T],D=A[T+4],O=A[T+8],F=R*_+D*f+O*L;R-=_*F,D-=f*F,O-=L*F;var G=s(R,D,O);R/=G,D/=G,O/=G;var W=f*O-L*D,q=L*R-_*O,J=_*D-f*R,X=s(W,q,J);W/=X,q/=X,J/=X,this.center.jump(p,ke,Ae,Ne),this.radius.idle(p),this.up.jump(p,_,f,L),this.right.jump(p,R,D,O);var Z,se;if(x===2){var le=A[1],oe=A[5],U=A[9],V=le*R+oe*D+U*O,re=le*W+oe*q+U*J;ne<0?Z=-Math.PI/2:Z=Math.PI/2,se=Math.atan2(re,V)}else{var ee=A[2],j=A[6],Q=A[10],ne=ee*_+j*f+Q*L,ae=ee*R+j*D+Q*O,ie=ee*W+j*q+Q*J;Z=Math.asin(i(ne)),se=Math.atan2(ie,ae)}this.angle.jump(p,se,Z),this.recalcMatrix(p);var ue=A[2],xe=A[6],he=A[10],ge=this.computedMatrix;o(ge,A);var me=ge[15],ke=ge[12]/me,Ae=ge[13]/me,Ne=ge[14]/me,He=Math.exp(this.computedRadius[0]);this.center.jump(p,ke-ue*He,Ae-xe*He,Ne-he*He)},g.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},g.idle=function(p){this.center.idle(p),this.up.idle(p),this.right.idle(p),this.radius.idle(p),this.angle.idle(p)},g.flush=function(p){this.center.flush(p),this.up.flush(p),this.right.flush(p),this.radius.flush(p),this.angle.flush(p)},g.setDistance=function(p,A){A>0&&this.radius.set(p,Math.log(A))},g.lookAt=function(p,A,m,M){this.recalcMatrix(p),A=A||this.computedEye,m=m||this.computedCenter,M=M||this.computedUp;var x=M[0],T=M[1],_=M[2],f=s(x,T,_);if(!(f<1e-6)){x/=f,T/=f,_/=f;var L=A[0]-m[0],S=A[1]-m[1],k=A[2]-m[2],P=s(L,S,k);if(!(P<1e-6)){L/=P,S/=P,k/=P;var z=this.computedRight,I=z[0],R=z[1],D=z[2],O=x*I+T*R+_*D;I-=O*x,R-=O*T,D-=O*_;var F=s(I,R,D);if(!(F<.01&&(I=T*k-_*S,R=_*L-x*k,D=x*S-T*L,F=s(I,R,D),F<1e-6))){I/=F,R/=F,D/=F,this.up.set(p,x,T,_),this.right.set(p,I,R,D),this.center.set(p,m[0],m[1],m[2]),this.radius.set(p,Math.log(P));var G=T*D-_*R,W=_*I-x*D,q=x*R-T*I,J=s(G,W,q);G/=J,W/=J,q/=J;var X=x*L+T*S+_*k,Z=I*L+R*S+D*k,se=G*L+W*S+q*k,le=Math.asin(i(X)),oe=Math.atan2(se,Z),U=this.angle._state,V=U[U.length-1],re=U[U.length-2];V=V%(2*Math.PI);var ee=Math.abs(V+2*Math.PI-oe),j=Math.abs(V-oe),Q=Math.abs(V-2*Math.PI-oe);ee<j&&(V+=2*Math.PI),Q<j&&(V-=2*Math.PI),this.angle.jump(this.angle.lastT(),V,re),this.angle.set(p,oe,le)}}}};function y(p){p=p||{};var A=p.center||[0,0,0],m=p.up||[0,1,0],M=p.right||v(m),x=p.radius||1,T=p.theta||0,_=p.phi||0;if(A=[].slice.call(A,0,3),m=[].slice.call(m,0,3),n(m,m),M=[].slice.call(M,0,3),n(M,M),"eye"in p){var f=p.eye,L=[f[0]-A[0],f[1]-A[1],f[2]-A[2]];r(M,L,m),s(M[0],M[1],M[2])<1e-6?M=v(m):n(M,M),x=s(L[0],L[1],L[2]);var S=c(m,L)/x,k=c(M,L)/x;_=Math.acos(S),T=Math.acos(k)}return x=Math.log(x),new u(p.zoomMin,p.zoomMax,A,m,M,x,T,_)}},{"filtered-vector":68,"gl-mat4/invert":98,"gl-mat4/rotate":103,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/normalize":179}],306:[function(l,b,w){b.exports=o;var e=+(Math.pow(2,27)+1);function o(a,r,n){var c=a*r,s=e*a,i=s-a,v=s-i,u=a-v,g=e*r,h=g-r,y=g-h,p=r-y,A=c-v*y,m=A-u*y,M=m-v*p,x=u*p-M;return n?(n[0]=x,n[1]=c,n):[x,c]}},{}],307:[function(l,b,w){b.exports=e;function e(o,a,r){var n=o+a,c=n-o,s=n-c,i=a-c,v=o-s;return r?(r[0]=v+i,r[1]=n,r):[v+i,n]}},{}],308:[function(l,b,w){(function(e){(function(){var o=l("bit-twiddle"),a=l("dup"),r=l("buffer").Buffer;e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:a([32,0]),UINT16:a([32,0]),UINT32:a([32,0]),BIGUINT64:a([32,0]),INT8:a([32,0]),INT16:a([32,0]),INT32:a([32,0]),BIGINT64:a([32,0]),FLOAT:a([32,0]),DOUBLE:a([32,0]),DATA:a([32,0]),UINT8C:a([32,0]),BUFFER:a([32,0])});var n=typeof Uint8ClampedArray!="undefined",c=typeof BigUint64Array!="undefined",s=typeof BigInt64Array!="undefined",i=e.__TYPEDARRAY_POOL;i.UINT8C||(i.UINT8C=a([32,0])),i.BIGUINT64||(i.BIGUINT64=a([32,0])),i.BIGINT64||(i.BIGINT64=a([32,0])),i.BUFFER||(i.BUFFER=a([32,0]));var v=i.DATA,u=i.BUFFER;w.free=function(R){if(r.isBuffer(R))u[o.log2(R.length)].push(R);else{if(Object.prototype.toString.call(R)!=="[object ArrayBuffer]"&&(R=R.buffer),!R)return;var D=R.length||R.byteLength,O=o.log2(D)|0;v[O].push(R)}};function g(I){if(!!I){var R=I.length||I.byteLength,D=o.log2(R);v[D].push(I)}}function h(I){g(I.buffer)}w.freeUint8=w.freeUint16=w.freeUint32=w.freeBigUint64=w.freeInt8=w.freeInt16=w.freeInt32=w.freeBigInt64=w.freeFloat32=w.freeFloat=w.freeFloat64=w.freeDouble=w.freeUint8Clamped=w.freeDataView=h,w.freeArrayBuffer=g,w.freeBuffer=function(R){u[o.log2(R.length)].push(R)},w.malloc=function(R,D){if(D===void 0||D==="arraybuffer")return y(R);switch(D){case"uint8":return p(R);case"uint16":return A(R);case"uint32":return m(R);case"int8":return M(R);case"int16":return x(R);case"int32":return T(R);case"float":case"float32":return _(R);case"double":case"float64":return f(R);case"uint8_clamped":return L(R);case"bigint64":return k(R);case"biguint64":return S(R);case"buffer":return z(R);case"data":case"dataview":return P(R);default:return null}return null};function y(R){var R=o.nextPow2(R),D=o.log2(R),O=v[D];return O.length>0?O.pop():new ArrayBuffer(R)}w.mallocArrayBuffer=y;function p(I){return new Uint8Array(y(I),0,I)}w.mallocUint8=p;function A(I){return new Uint16Array(y(2*I),0,I)}w.mallocUint16=A;function m(I){return new Uint32Array(y(4*I),0,I)}w.mallocUint32=m;function M(I){return new Int8Array(y(I),0,I)}w.mallocInt8=M;function x(I){return new Int16Array(y(2*I),0,I)}w.mallocInt16=x;function T(I){return new Int32Array(y(4*I),0,I)}w.mallocInt32=T;function _(I){return new Float32Array(y(4*I),0,I)}w.mallocFloat32=w.mallocFloat=_;function f(I){return new Float64Array(y(8*I),0,I)}w.mallocFloat64=w.mallocDouble=f;function L(I){return n?new Uint8ClampedArray(y(I),0,I):p(I)}w.mallocUint8Clamped=L;function S(I){return c?new BigUint64Array(y(8*I),0,I):null}w.mallocBigUint64=S;function k(I){return s?new BigInt64Array(y(8*I),0,I):null}w.mallocBigInt64=k;function P(I){return new DataView(y(I),0,I)}w.mallocDataView=P;function z(I){I=o.nextPow2(I);var R=o.log2(I),D=u[R];return D.length>0?D.pop():new r(I)}w.mallocBuffer=z,w.clearCache=function(){for(var R=0;R<32;++R)i.UINT8[R].length=0,i.UINT16[R].length=0,i.UINT32[R].length=0,i.INT8[R].length=0,i.INT16[R].length=0,i.INT32[R].length=0,i.FLOAT[R].length=0,i.DOUBLE[R].length=0,i.BIGUINT64[R].length=0,i.BIGINT64[R].length=0,i.UINT8C[R].length=0,v[R].length=0,u[R].length=0}}).call(this)}).call(this,typeof d!="undefined"?d:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"bit-twiddle":32,buffer:3,dup:65}],309:[function(l,b,w){b.exports=e;function e(a){this.roots=new Array(a),this.ranks=new Array(a);for(var r=0;r<a;++r)this.roots[r]=r,this.ranks[r]=0}var o=e.prototype;Object.defineProperty(o,"length",{get:function(){return this.roots.length}}),o.makeSet=function(){var a=this.roots.length;return this.roots.push(a),this.ranks.push(0),a},o.find=function(a){for(var r=a,n=this.roots;n[a]!==a;)a=n[a];for(;n[r]!==a;){var c=n[r];n[r]=a,r=c}return a},o.link=function(a,r){var n=this.find(a),c=this.find(r);if(n!==c){var s=this.ranks,i=this.roots,v=s[n],u=s[c];v<u?i[n]=c:u<v?i[c]=n:(i[c]=n,++s[n])}}},{}],310:[function(l,b,w){function e(r,n){for(var c=1,s=r.length,i=r[0],v=r[0],u=1;u<s;++u)if(v=i,i=r[u],n(i,v)){if(u===c){c++;continue}r[c++]=i}return r.length=c,r}function o(r){for(var n=1,c=r.length,s=r[0],i=r[0],v=1;v<c;++v,i=s)if(i=s,s=r[v],s!==i){if(v===n){n++;continue}r[n++]=s}return r.length=n,r}function a(r,n,c){return r.length===0?r:n?(c||r.sort(n),e(r,n)):(c||r.sort(),o(r))}b.exports=a},{}],311:[function(l,b,w){b.exports=r;var e=l("./lib/vtext"),o=null,a=null;typeof document!="undefined"&&(o=document.createElement("canvas"),o.width=8192,o.height=1024,a=o.getContext("2d"));function r(n,c){return(typeof c!="object"||c===null)&&(c={}),e(n,c.canvas||o,c.context||a,c)}},{"./lib/vtext":312}],312:[function(l,b,w){b.exports=S,b.exports.processPixels=L;var e=l("surface-nets"),o=l("ndarray"),a=l("simplify-planar-graph"),r=l("clean-pslg"),n=l("cdt2d"),c=l("planar-graph-to-polyline"),s="b",i="b|",v="i",u="i|",g="sup",h="+",y="+1",p="sub",A="-",m="-1";function M(k,P,z,I){for(var R="<"+k+">",D="</"+k+">",O=R.length,F=D.length,G=P[0]===h||P[0]===A,W=0,q=-F;W>-1&&(W=z.indexOf(R,W),!(W===-1||(q=z.indexOf(D,W+O),q===-1)||q<=W));){for(var J=W;J<q+F;++J)if(J<W+O||J>=q)I[J]=null,z=z.substr(0,J)+" "+z.substr(J+1);else if(I[J]!==null){var X=I[J].indexOf(P[0]);X===-1?I[J]+=P:G&&(I[J]=I[J].substr(0,X+1)+(1+parseInt(I[J][X+1]))+I[J].substr(X+2))}var Z=W+O,se=z.substr(Z,q-Z),le=se.indexOf(R);le!==-1?W=le:W=q+F}return I}function x(k,P,z){for(var I=P.textAlign||"start",R=P.textBaseline||"alphabetic",D=[1<<30,1<<30],O=[0,0],F=k.length,G=0;G<F;++G)for(var W=k[G],q=0;q<2;++q)D[q]=Math.min(D[q],W[q])|0,O[q]=Math.max(O[q],W[q])|0;var J=0;switch(I){case"center":J=-.5*(D[0]+O[0]);break;case"right":case"end":J=-O[0];break;case"left":case"start":J=-D[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+I+"'")}var X=0;switch(R){case"hanging":case"top":X=-D[1];break;case"middle":X=-.5*(D[1]+O[1]);break;case"alphabetic":case"ideographic":X=-3*z;break;case"bottom":X=-O[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+R+"'")}var Z=1/z;return"lineHeight"in P?Z*=+P.lineHeight:"width"in P?Z=P.width/(O[0]-D[0]):"height"in P&&(Z=P.height/(O[1]-D[1])),k.map(function(se){return[Z*(se[0]+J),Z*(se[1]+X)]})}function T(k,P,z,I,R,D){z=z.replace(/\n/g,""),D.breaklines===!0?z=z.replace(/\<br\>/g,`
`):z=z.replace(/\<br\>/g," ");var O="",F=[];for(V=0;V<z.length;++V)F[V]=O;D.bolds===!0&&(F=M(s,i,z,F)),D.italics===!0&&(F=M(v,u,z,F)),D.superscripts===!0&&(F=M(g,y,z,F)),D.subscripts===!0&&(F=M(p,m,z,F));var G=[],W="";for(V=0;V<z.length;++V)F[V]!==null&&(W+=z[V],G.push(F[V]));var q=W.split(`
`),J=q.length,X=Math.round(R*I),Z=I,se=I*2,le=0,oe=J*X+se;k.height<oe&&(k.height=oe),P.fillStyle="#000",P.fillRect(0,0,k.width,k.height),P.fillStyle="#fff";var U,V,re,ee,j,Q=0,ne="";function ae(){if(ne!==""){var Ne=P.measureText(ne).width;P.fillText(ne,Z+re,se+ee),re+=Ne}}function ie(){return""+Math.round(j)+"px "}function ue(Ne,He){var Ge=""+P.font;if(D.subscripts===!0){var _e=Ne.indexOf(A),De=He.indexOf(A),Ye=_e>-1?parseInt(Ne[1+_e]):0,qe=De>-1?parseInt(He[1+De]):0;Ye!==qe&&(Ge=Ge.replace(ie(),"?px "),j*=Math.pow(.75,qe-Ye),Ge=Ge.replace("?px ",ie())),ee+=.25*X*(qe-Ye)}if(D.superscripts===!0){var Ue=Ne.indexOf(h),Ie=He.indexOf(h),Ve=Ue>-1?parseInt(Ne[1+Ue]):0,dt=Ie>-1?parseInt(He[1+Ie]):0;Ve!==dt&&(Ge=Ge.replace(ie(),"?px "),j*=Math.pow(.75,dt-Ve),Ge=Ge.replace("?px ",ie())),ee-=.25*X*(dt-Ve)}if(D.bolds===!0){var Dt=Ne.indexOf(i)>-1,Yt=He.indexOf(i)>-1;!Dt&&Yt&&(kt?Ge=Ge.replace("italic ","italic bold "):Ge="bold "+Ge),Dt&&!Yt&&(Ge=Ge.replace("bold ",""))}if(D.italics===!0){var kt=Ne.indexOf(u)>-1,Ft=He.indexOf(u)>-1;!kt&&Ft&&(Ge="italic "+Ge),kt&&!Ft&&(Ge=Ge.replace("italic ",""))}P.font=Ge}for(U=0;U<J;++U){var xe=q[U]+`
`;for(re=0,ee=U*X,j=I,ne="",V=0;V<xe.length;++V){var he=V+Q<G.length?G[V+Q]:G[G.length-1];O===he?ne+=xe[V]:(ae(),ne=xe[V],he!==void 0&&(ue(O,he),O=he))}ae(),Q+=xe.length;var ge=Math.round(re+2*Z)|0;le<ge&&(le=ge)}var me=le,ke=se+X*J,Ae=o(P.getImageData(0,0,me,ke).data,[ke,me,4]);return Ae.pick(-1,-1,0).transpose(1,0)}function _(k,P){var z=e(k,128);return P?a(z.cells,z.positions,.25):{edges:z.cells,positions:z.positions}}function f(k,P,z,I){var R=_(k,I),D=x(R.positions,P,z),O=R.edges,F=P.orientation==="ccw";if(r(D,O),P.polygons||P.polygon||P.polyline){for(var G=c(O,D),W=new Array(G.length),q=0;q<G.length;++q){for(var J=G[q],X=new Array(J.length),Z=0;Z<J.length;++Z){for(var se=J[Z],le=new Array(se.length),oe=0;oe<se.length;++oe)le[oe]=D[se[oe]].slice();F&&le.reverse(),X[Z]=le}W[q]=X}return W}else return P.triangles||P.triangulate||P.triangle?{cells:n(D,O,{delaunay:!1,exterior:!1,interior:!0}),positions:D}:{edges:O,positions:D}}function L(k,P,z){try{return f(k,P,z,!0)}catch{}try{return f(k,P,z,!1)}catch{}return P.polygons||P.polyline||P.polygon?[]:P.triangles||P.triangulate||P.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function S(k,P,z,I){var R=64,D=1.25,O={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};I&&(I.size&&I.size>0&&(R=I.size),I.lineSpacing&&I.lineSpacing>0&&(D=I.lineSpacing),I.styletags&&I.styletags.breaklines&&(O.breaklines=!!I.styletags.breaklines),I.styletags&&I.styletags.bolds&&(O.bolds=!!I.styletags.bolds),I.styletags&&I.styletags.italics&&(O.italics=!!I.styletags.italics),I.styletags&&I.styletags.subscripts&&(O.subscripts=!!I.styletags.subscripts),I.styletags&&I.styletags.superscripts&&(O.superscripts=!!I.styletags.superscripts)),z.font=[I.fontStyle,I.fontVariant,I.fontWeight,R+"px",I.font].filter(function(G){return G}).join(" "),z.textAlign="start",z.textBaseline="alphabetic",z.direction="ltr";var F=T(P,z,k,R,D,O);return L(F,I,R)}},{cdt2d:42,"clean-pslg":50,ndarray:259,"planar-graph-to-polyline":268,"simplify-planar-graph":297,"surface-nets":302}],313:[function(l,b,w){(function(){if(typeof ses!="undefined"&&ses.ok&&!ses.ok())return;function o(L){L.permitHostObjects___&&L.permitHostObjects___(o)}typeof ses!="undefined"&&(ses.weakMapPermitHostObjects=o);var a=!1;if(typeof WeakMap=="function"){var r=WeakMap;if(!(typeof navigator!="undefined"&&/Firefox/.test(navigator.userAgent))){var n=new r,c=Object.freeze({});if(n.set(c,1),n.get(c)!==1)a=!0;else{b.exports=WeakMap;return}}}var s=Object.getOwnPropertyNames,i=Object.defineProperty,v=Object.isExtensible,u="weakmap:",g=u+"ident:"+Math.random()+"___";if(typeof crypto!="undefined"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var h=new ArrayBuffer(25),y=new Uint8Array(h);crypto.getRandomValues(y),g=u+"rand:"+Array.prototype.map.call(y,function(L){return(L%36).toString(36)}).join("")+"___"}function p(L){return!(L.substr(0,u.length)==u&&L.substr(L.length-3)==="___")}if(i(Object,"getOwnPropertyNames",{value:function(S){return s(S).filter(p)}}),"getPropertyNames"in Object){var A=Object.getPropertyNames;i(Object,"getPropertyNames",{value:function(S){return A(S).filter(p)}})}function m(L){if(L!==Object(L))throw new TypeError("Not an object: "+L);var S=L[g];if(S&&S.key===L)return S;if(!!v(L)){S={key:L};try{return i(L,g,{value:S,writable:!1,enumerable:!1,configurable:!1}),S}catch{return}}}(function(){var L=Object.freeze;i(Object,"freeze",{value:function(z){return m(z),L(z)}});var S=Object.seal;i(Object,"seal",{value:function(z){return m(z),S(z)}});var k=Object.preventExtensions;i(Object,"preventExtensions",{value:function(z){return m(z),k(z)}})})();function M(L){return L.prototype=null,Object.freeze(L)}var x=!1;function T(){!x&&typeof console!="undefined"&&(x=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}var _=0,f=function(){this instanceof f||T();var L=[],S=[],k=_++;function P(D,O){var F,G=m(D);return G?k in G?G[k]:O:(F=L.indexOf(D),F>=0?S[F]:O)}function z(D){var O=m(D);return O?k in O:L.indexOf(D)>=0}function I(D,O){var F,G=m(D);return G?G[k]=O:(F=L.indexOf(D),F>=0?S[F]=O:(F=L.length,S[F]=O,L[F]=D)),this}function R(D){var O=m(D),F,G;return O?k in O&&delete O[k]:(F=L.indexOf(D),F<0?!1:(G=L.length-1,L[F]=void 0,S[F]=S[G],L[F]=L[G],L.length=G,S.length=G,!0))}return Object.create(f.prototype,{get___:{value:M(P)},has___:{value:M(z)},set___:{value:M(I)},delete___:{value:M(R)}})};f.prototype=Object.create(Object.prototype,{get:{value:function(S,k){return this.get___(S,k)},writable:!0,configurable:!0},has:{value:function(S){return this.has___(S)},writable:!0,configurable:!0},set:{value:function(S,k){return this.set___(S,k)},writable:!0,configurable:!0},delete:{value:function(S){return this.delete___(S)},writable:!0,configurable:!0}}),typeof r=="function"?function(){a&&typeof Proxy!="undefined"&&(Proxy=void 0);function L(){this instanceof f||T();var S=new r,k=void 0,P=!1;function z(O,F){return k?S.has(O)?S.get(O):k.get___(O,F):S.get(O,F)}function I(O){return S.has(O)||(k?k.has___(O):!1)}var R;a?R=function(O,F){return S.set(O,F),S.has(O)||(k||(k=new f),k.set(O,F)),this}:R=function(O,F){if(P)try{S.set(O,F)}catch{k||(k=new f),k.set___(O,F)}else S.set(O,F);return this};function D(O){var F=!!S.delete(O);return k&&k.delete___(O)||F}return Object.create(f.prototype,{get___:{value:M(z)},has___:{value:M(I)},set___:{value:M(R)},delete___:{value:M(D)},permitHostObjects___:{value:M(function(O){if(O===o)P=!0;else throw new Error("bogus call to permitHostObjects___")})}})}L.prototype=f.prototype,b.exports=L,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy!="undefined"&&(Proxy=void 0),b.exports=f)})()},{}],314:[function(l,b,w){var e=l("./hidden-store.js");b.exports=o;function o(){var a={};return function(r){if((typeof r!="object"||r===null)&&typeof r!="function")throw new Error("Weakmap-shim: Key must be object");var n=r.valueOf(a);return n&&n.identity===a?n:e(r,a)}}},{"./hidden-store.js":315}],315:[function(l,b,w){b.exports=e;function e(o,a){var r={identity:a},n=o.valueOf;return Object.defineProperty(o,"valueOf",{value:function(c){return c!==a?n.apply(this,arguments):r},writable:!0}),r}},{}],316:[function(l,b,w){var e=l("./create-store.js");b.exports=o;function o(){var a=e();return{get:function(r,n){var c=a(r);return c.hasOwnProperty("value")?c.value:n},set:function(r,n){return a(r).value=n,this},has:function(r){return"value"in a(r)},delete:function(r){return delete a(r).value}}}},{"./create-store.js":314}],317:[function(l,b,w){function e(){return function(s,i,v,u,g,h){var y=s[0],p=v[0],A=[0],m=p;u|=0;var M=0,x=p;for(M=0;M<y;++M){{var T=i[u]-h,_=i[u+m]-h;T>=0!=_>=0&&g.push(A[0]+.5+.5*(T+_)/(T-_))}u+=x,++A[0]}}}function o(){return e()}var a=o;function r(s){var i={};return function(u,g,h){var y=u.dtype,p=u.order,A=[y,p.join()].join(),m=i[A];return m||(i[A]=m=s([y,p])),m(u.shape.slice(0),u.data,u.stride,u.offset|0,g,h)}}function n(s){return r(a.bind(void 0,s))}function c(s){return n({funcName:s.funcName})}b.exports=c({funcName:"zeroCrossings"})},{}],318:[function(l,b,w){b.exports=o;var e=l("./lib/zc-core");function o(a,r){var n=[];return r=+r||0,e(a.hi(a.shape[0]-1),n,r),n}},{"./lib/zc-core":317}]},{},[6])(6)})}).call(this)}).call(this,typeof Ao!="undefined"?Ao:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[27])(27)})})(v2);(function(K){Object.defineProperty(K,"__esModule",{value:!0}),K.default=void 0;var fe=B(u2),t=B(v2.exports);function B(l){return l&&l.__esModule?l:{default:l}}var H=(0,fe.default)(t.default),d=H;K.default=d})(l2);var T5=l3(l2),g5={exports:{}},Tp={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y5=gp.exports,p2=60103;Tp.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var gx=Symbol.for;p2=gx("react.element"),Tp.Fragment=gx("react.fragment")}var m5=y5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,x5=Object.prototype.hasOwnProperty,b5={key:!0,ref:!0,__self:!0,__source:!0};function d2(K,fe,t){var B,H={},d=null,l=null;t!==void 0&&(d=""+t),fe.key!==void 0&&(d=""+fe.key),fe.ref!==void 0&&(l=fe.ref);for(B in fe)x5.call(fe,B)&&!b5.hasOwnProperty(B)&&(H[B]=fe[B]);if(K&&K.defaultProps)for(B in fe=K.defaultProps,fe)H[B]===void 0&&(H[B]=fe[B]);return{$$typeof:p2,type:K,key:d,ref:l,props:H,_owner:m5.current}}Tp.jsx=d2;Tp.jsxs=d2;g5.exports=Tp;export{T5 as P,w5 as R,_5 as a,g5 as j,gp as r};
